const tL=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))f(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const h of n.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&f(h)}).observe(document,{childList:!0,subtree:!0});function e(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerpolicy&&(n.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?n.credentials="include":i.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function f(i){if(i.ep)return;i.ep=!0;const n=e(i);fetch(i.href,n)}};tL();var Hr=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function eL(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var wy={exports:{}};(function(s,t){(function(f,i){s.exports=i()})(Hr,function(){return function(e){var f={};function i(n){if(f[n])return f[n].exports;var h=f[n]={i:n,l:!1,exports:{}};return e[n].call(h.exports,h,h.exports,i),h.l=!0,h.exports}return i.m=e,i.c=f,i.d=function(n,h,r){i.o(n,h)||Object.defineProperty(n,h,{enumerable:!0,get:r})},i.r=function(n){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},i.t=function(n,h){if(h&1&&(n=i(n)),h&8||h&4&&typeof n=="object"&&n&&n.__esModule)return n;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:n}),h&2&&typeof n!="string")for(var a in n)i.d(r,a,function(l){return n[l]}.bind(null,a));return r},i.n=function(n){var h=n&&n.__esModule?function(){return n.default}:function(){return n};return i.d(h,"a",h),h},i.o=function(n,h){return Object.prototype.hasOwnProperty.call(n,h)},i.p="",i(i.s=1528)}([function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function i(o){return!!o.get&&typeof o.get=="function"||!!o.set&&typeof o.set=="function"}function n(o,u,v){var d=v?o[u]:Object.getOwnPropertyDescriptor(o,u);return!v&&d.value&&typeof d.value=="object"&&(d=d.value),d&&i(d)?(typeof d.enumerable=="undefined"&&(d.enumerable=!0),typeof d.configurable=="undefined"&&(d.configurable=!0),d):!1}function h(o,u){var v=Object.getOwnPropertyDescriptor(o,u);return v?(v.value&&typeof v.value=="object"&&(v=v.value),v.configurable===!1):!1}function r(o,u,v,d){for(var c in u)if(!!u.hasOwnProperty(c)){var p=n(u,c,v);if(p!==!1){var g=d||o;if(h(g.prototype,c)){if(l.ignoreFinals)continue;throw new Error("cannot override final property '"+c+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(o.prototype,c,p)}else o.prototype[c]=u[c]}}function a(o,u){if(!!u){Array.isArray(u)||(u=[u]);for(var v=0;v<u.length;v++)r(o,u[v].prototype||u[v])}}function l(o){o||(o={});var u,v;if(o.initialize){if(typeof o.initialize!="function")throw new Error("initialize must be a function");u=o.initialize,delete o.initialize}else if(o.Extends){var d=o.Extends;u=function(){d.apply(this,arguments)}}else u=function(){};o.Extends?(u.prototype=Object.create(o.Extends.prototype),u.prototype.constructor=u,v=o.Extends,delete o.Extends):u.prototype.constructor=u;var c=null;return o.Mixins&&(c=o.Mixins,delete o.Mixins),a(u,c),r(u,o,!0,v),u}l.extend=r,l.mixin=a,l.ignoreFinals=!1,e.exports=l},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(){};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r){var a=typeof n;return!n||a==="number"||a==="string"?r:n.hasOwnProperty(h)&&n[h]!==void 0?n[h]:r};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(124),r=new n({initialize:function(l,o){this.x=0,this.y=0,typeof l=="object"?(this.x=l.x||0,this.y=l.y||0):(o===void 0&&(o=l),this.x=l||0,this.y=o||0)},clone:function(){return new r(this.x,this.y)},copy:function(a){return this.x=a.x||0,this.y=a.y||0,this},setFromObject:function(a){return this.x=a.x||0,this.y=a.y||0,this},set:function(a,l){return l===void 0&&(l=a),this.x=a,this.y=l,this},setTo:function(a,l){return this.set(a,l)},setToPolar:function(a,l){return l==null&&(l=1),this.x=Math.cos(a)*l,this.y=Math.sin(a)*l,this},equals:function(a){return this.x===a.x&&this.y===a.y},fuzzyEquals:function(a,l){return h(this.x,a.x,l)&&h(this.y,a.y,l)},angle:function(){var a=Math.atan2(this.y,this.x);return a<0&&(a+=2*Math.PI),a},setAngle:function(a){return this.setToPolar(a,this.length())},add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(a){return this.x-=a.x,this.y-=a.y,this},multiply:function(a){return this.x*=a.x,this.y*=a.y,this},scale:function(a){return isFinite(a)?(this.x*=a,this.y*=a):(this.x=0,this.y=0),this},divide:function(a){return this.x/=a.x,this.y/=a.y,this},negate:function(){return this.x=-this.x,this.y=-this.y,this},distance:function(a){var l=a.x-this.x,o=a.y-this.y;return Math.sqrt(l*l+o*o)},distanceSq:function(a){var l=a.x-this.x,o=a.y-this.y;return l*l+o*o},length:function(){var a=this.x,l=this.y;return Math.sqrt(a*a+l*l)},setLength:function(a){return this.normalize().scale(a)},lengthSq:function(){var a=this.x,l=this.y;return a*a+l*l},normalize:function(){var a=this.x,l=this.y,o=a*a+l*l;return o>0&&(o=1/Math.sqrt(o),this.x=a*o,this.y=l*o),this},normalizeRightHand:function(){var a=this.x;return this.x=this.y*-1,this.y=a,this},normalizeLeftHand:function(){var a=this.x;return this.x=this.y,this.y=a*-1,this},dot:function(a){return this.x*a.x+this.y*a.y},cross:function(a){return this.x*a.y-this.y*a.x},lerp:function(a,l){l===void 0&&(l=0);var o=this.x,u=this.y;return this.x=o+l*(a.x-o),this.y=u+l*(a.y-u),this},transformMat3:function(a){var l=this.x,o=this.y,u=a.val;return this.x=u[0]*l+u[3]*o+u[6],this.y=u[1]*l+u[4]*o+u[7],this},transformMat4:function(a){var l=this.x,o=this.y,u=a.val;return this.x=u[0]*l+u[4]*o+u[12],this.y=u[1]*l+u[5]*o+u[13],this},reset:function(){return this.x=0,this.y=0,this},limit:function(a){var l=this.length();return l&&l>a&&this.scale(a/l),this},reflect:function(a){return a=a.clone().normalize(),this.subtract(a.scale(2*this.dot(a)))},mirror:function(a){return this.reflect(a).negate()},rotate:function(a){var l=Math.cos(a),o=Math.sin(a);return this.set(l*this.x-o*this.y,o*this.x+l*this.y)}});r.ZERO=new r,r.RIGHT=new r(1,0),r.LEFT=new r(-1,0),r.UP=new r(0,-1),r.DOWN=new r(0,1),r.ONE=new r(1,1),e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(56),r=new n({initialize:function(l,o){l===void 0&&(l=0),o===void 0&&(o=l),this.type=h.POINT,this.x=l,this.y=o},setTo:function(a,l){return a===void 0&&(a=0),l===void 0&&(l=a),this.x=a,this.y=l,this}});e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(24),r=i(20),a=new n({initialize:function(o){this.scene=o,this.systems=o.sys,this.events=o.sys.events,this.displayList,this.updateList,this.events.once(r.BOOT,this.boot,this),this.events.on(r.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(r.DESTROY,this.destroy,this)},start:function(){this.events.once(r.SHUTDOWN,this.shutdown,this)},existing:function(l){return(l.renderCanvas||l.renderWebGL)&&this.displayList.add(l),l.preUpdate&&this.updateList.add(l),l},shutdown:function(){this.events.off(r.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(r.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});a.register=function(l,o){a.prototype.hasOwnProperty(l)||(a.prototype[l]=o)},a.remove=function(l){a.prototype.hasOwnProperty(l)&&delete a.prototype[l]},h.register("GameObjectFactory",a,"add"),e.exports=a},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r){if(!n||typeof n=="number")return r;if(n.hasOwnProperty(h))return n[h];if(h.indexOf(".")!==-1){for(var a=h.split("."),l=n,o=r,u=0;u<a.length;u++)if(l.hasOwnProperty(a[u]))o=l[a[u]],l=l[a[u]];else{o=r;break}return o}else return r};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){if(typeof n!="object"||n.nodeType||n===n.window)return!1;try{if(n.constructor&&!{}.hasOwnProperty.call(n.constructor.prototype,"isPrototypeOf"))return!1}catch{return!1}return!0};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={},n={install:function(h){for(var r in i)h[r]=i[r]},register:function(h,r){i[h]=r},destroy:function(){i={}}};e.exports=n},function(e,f,i){var n=Object.prototype.hasOwnProperty,h="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(h=!1));function a(v,d,c){this.fn=v,this.context=d,this.once=c||!1}function l(v,d,c,p,g){if(typeof c!="function")throw new TypeError("The listener must be a function");var m=new a(c,p||v,g),x=h?h+d:d;return v._events[x]?v._events[x].fn?v._events[x]=[v._events[x],m]:v._events[x].push(m):(v._events[x]=m,v._eventsCount++),v}function o(v,d){--v._eventsCount===0?v._events=new r:delete v._events[d]}function u(){this._events=new r,this._eventsCount=0}u.prototype.eventNames=function(){var d=[],c,p;if(this._eventsCount===0)return d;for(p in c=this._events)n.call(c,p)&&d.push(h?p.slice(1):p);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(c)):d},u.prototype.listeners=function(d){var c=h?h+d:d,p=this._events[c];if(!p)return[];if(p.fn)return[p.fn];for(var g=0,m=p.length,x=new Array(m);g<m;g++)x[g]=p[g].fn;return x},u.prototype.listenerCount=function(d){var c=h?h+d:d,p=this._events[c];return p?p.fn?1:p.length:0},u.prototype.emit=function(d,c,p,g,m,x){var y=h?h+d:d;if(!this._events[y])return!1;var T=this._events[y],C=arguments.length,S,E;if(T.fn){switch(T.once&&this.removeListener(d,T.fn,void 0,!0),C){case 1:return T.fn.call(T.context),!0;case 2:return T.fn.call(T.context,c),!0;case 3:return T.fn.call(T.context,c,p),!0;case 4:return T.fn.call(T.context,c,p,g),!0;case 5:return T.fn.call(T.context,c,p,g,m),!0;case 6:return T.fn.call(T.context,c,p,g,m,x),!0}for(E=1,S=new Array(C-1);E<C;E++)S[E-1]=arguments[E];T.fn.apply(T.context,S)}else{var M=T.length,O;for(E=0;E<M;E++)switch(T[E].once&&this.removeListener(d,T[E].fn,void 0,!0),C){case 1:T[E].fn.call(T[E].context);break;case 2:T[E].fn.call(T[E].context,c);break;case 3:T[E].fn.call(T[E].context,c,p);break;case 4:T[E].fn.call(T[E].context,c,p,g);break;default:if(!S)for(O=1,S=new Array(C-1);O<C;O++)S[O-1]=arguments[O];T[E].fn.apply(T[E].context,S)}}return!0},u.prototype.on=function(d,c,p){return l(this,d,c,p,!1)},u.prototype.once=function(d,c,p){return l(this,d,c,p,!0)},u.prototype.removeListener=function(d,c,p,g){var m=h?h+d:d;if(!this._events[m])return this;if(!c)return o(this,m),this;var x=this._events[m];if(x.fn)x.fn===c&&(!g||x.once)&&(!p||x.context===p)&&o(this,m);else{for(var y=0,T=[],C=x.length;y<C;y++)(x[y].fn!==c||g&&!x[y].once||p&&x[y].context!==p)&&T.push(x[y]);T.length?this._events[m]=T.length===1?T[0]:T:o(this,m)}return this},u.prototype.removeAllListeners=function(d){var c;return d?(c=h?h+d:d,this._events[c]&&o(this,c)):(this._events=new r,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=h,u.EventEmitter=u,e.exports=u},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(57),r=i(171),a=i(306),l=i(56),o=i(47),u=i(174),v=new n({initialize:function(c,p,g,m){c===void 0&&(c=0),p===void 0&&(p=0),g===void 0&&(g=0),m===void 0&&(m=0),this.type=l.RECTANGLE,this.x=c,this.y=p,this.width=g,this.height=m},contains:function(d,c){return h(this,d,c)},getPoint:function(d,c){return r(this,d,c)},getPoints:function(d,c,p){return a(this,d,c,p)},getRandomPoint:function(d){return u(this,d)},setTo:function(d,c,p,g){return this.x=d,this.y=c,this.width=p,this.height=g,this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(d,c){return c===void 0&&(c=d),this.x=d,this.y=c,this},setSize:function(d,c){return c===void 0&&(c=d),this.width=d,this.height=c,this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(d){return d===void 0&&(d=new o),d.setTo(this.x,this.y,this.right,this.y),d},getLineB:function(d){return d===void 0&&(d=new o),d.setTo(this.right,this.y,this.right,this.bottom),d},getLineC:function(d){return d===void 0&&(d=new o),d.setTo(this.right,this.bottom,this.x,this.bottom),d},getLineD:function(d){return d===void 0&&(d=new o),d.setTo(this.x,this.bottom,this.x,this.y),d},left:{get:function(){return this.x},set:function(d){d>=this.right?this.width=0:this.width=this.right-d,this.x=d}},right:{get:function(){return this.x+this.width},set:function(d){d<=this.x?this.width=0:this.width=d-this.x}},top:{get:function(){return this.y},set:function(d){d>=this.bottom?this.height=0:this.height=this.bottom-d,this.y=d}},bottom:{get:function(){return this.y+this.height},set:function(d){d<=this.y?this.height=0:this.height=d-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(d){this.x=d-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(d){this.y=d-this.height/2}}});e.exports=v},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Alpha:i(607),AlphaSingle:i(303),BlendMode:i(304),ComputedSize:i(608),Crop:i(609),Depth:i(305),Flip:i(610),GetBounds:i(611),Mask:i(309),Origin:i(632),PathFollower:i(633),Pipeline:i(167),ScrollFactor:i(312),Size:i(634),Texture:i(635),TextureCrop:i(636),Tint:i(637),ToJSON:i(176),Transform:i(313),TransformMatrix:i(25),Visible:i(314)}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @author       Matthew Groves <@doormat>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function i(n){for(var h="",r=0;r<n;++r)r>0&&(h+=`
else `),r<n-1&&(h+="if(test == "+r+".0){}");return h}e.exports={getTintFromFloats:function(n,h,r,a){var l=(n*255|0)&255,o=(h*255|0)&255,u=(r*255|0)&255,v=(a*255|0)&255;return(v<<24|l<<16|o<<8|u)>>>0},getTintAppendFloatAlpha:function(n,h){var r=(h*255|0)&255;return(r<<24|n)>>>0},getTintAppendFloatAlphaAndSwap:function(n,h){var r=(n>>16|0)&255,a=(n>>8|0)&255,l=(n|0)&255,o=(h*255|0)&255;return(o<<24|l<<16|a<<8|r)>>>0},getFloatsFromUintRGB:function(n){var h=(n>>16|0)&255,r=(n>>8|0)&255,a=(n|0)&255;return[h/255,r/255,a/255]},checkShaderMax:function(n,h){(!h||h===-1)&&(h=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS));for(var r=n.createShader(n.FRAGMENT_SHADER),a=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);;){var l=a.replace(/%forloop%/gi,i(h));if(n.shaderSource(r,l),n.compileShader(r),!n.getShaderParameter(r,n.COMPILE_STATUS))h=h/2|0;else break}return h},parseFragmentShaderMaxTextures:function(n,h){if(!n)return"";for(var r="",a=0;a<h;a++)a>0&&(r+=`
	else `),a<h-1&&(r+="if (outTexId < "+a+".5)"),r+=`
	{`,r+=`
		texture = texture2D(uMainSampler[`+a+"], outTexCoord);",r+=`
	}`;return n=n.replace(/%count%/gi,h.toString()),n.replace(/%forloop%/gi,r)}}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(193),h=i(6),r=function(a,l,o){var u=h(a,l,null);if(u===null)return o;if(Array.isArray(u))return n.RND.pick(u);if(typeof u=="object"){if(u.hasOwnProperty("randInt"))return n.RND.integerInRange(u.randInt[0],u.randInt[1]);if(u.hasOwnProperty("randFloat"))return n.RND.realInRange(u.randFloat[0],u.randFloat[1])}else if(typeof u=="function")return u(l);return u};e.exports=r},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={PI2:Math.PI*2,TAU:Math.PI*.5,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(176),r=i(101),a=i(9),l=i(75),o=i(20),u=new n({Extends:a,initialize:function(d,c){a.call(this),this.scene=d,this.displayList=null,this.type=c,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.on(l.ADDED_TO_SCENE,this.addedToScene,this),this.on(l.REMOVED_FROM_SCENE,this.removedFromScene,this),d.sys.queueDepthSort()},setActive:function(v){return this.active=v,this},setName:function(v){return this.name=v,this},setState:function(v){return this.state=v,this},setDataEnabled:function(){return this.data||(this.data=new r(this)),this},setData:function(v,d){return this.data||(this.data=new r(this)),this.data.set(v,d),this},incData:function(v,d){return this.data||(this.data=new r(this)),this.data.inc(v,d),this},toggleData:function(v){return this.data||(this.data=new r(this)),this.data.toggle(v),this},getData:function(v){return this.data||(this.data=new r(this)),this.data.get(v)},setInteractive:function(v,d,c){return this.scene.sys.input.enable(this,v,d,c),this},disableInteractive:function(){return this.input&&(this.input.enabled=!1),this},removeInteractive:function(){return this.scene.sys.input.clear(this),this.input=void 0,this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return h(this)},willRender:function(v){return!(u.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&v.id)},getIndexList:function(){for(var v=this,d=this.parentContainer,c=[];d&&(c.unshift(d.getIndex(v)),v=d,d.parentContainer);)d=d.parentContainer;return this.displayList?c.unshift(this.displayList.getIndex(v)):c.unshift(this.scene.sys.displayList.getIndex(v)),c},addToDisplayList:function(v){return v===void 0&&(v=this.scene.sys.displayList),this.displayList&&this.displayList!==v&&this.removeFromDisplayList(),v.exists(this)||(this.displayList=v,v.add(this,!0),v.queueDepthSort(),this.emit(l.ADDED_TO_SCENE,this,this.scene),v.events.emit(o.ADDED_TO_SCENE,this,this.scene)),this},addToUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.add(this),this},removeFromDisplayList:function(){var v=this.displayList||this.scene.sys.displayList;return v.exists(this)&&(v.remove(this,!0),v.queueDepthSort(),this.displayList=null,this.emit(l.REMOVED_FROM_SCENE,this,this.scene),v.events.emit(o.REMOVED_FROM_SCENE,this,this.scene)),this},removeFromUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.remove(this),this},destroy:function(v){!this.scene||this.ignoreDestroy||(v===void 0&&(v=!1),this.preDestroy&&this.preDestroy.call(this),this.emit(l.DESTROY,this,v),this.removeAllListeners(),this.postPipelines&&this.resetPostPipeline(!0),this.removeFromDisplayList(),this.removeFromUpdateList(),this.input&&(this.scene.sys.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),this.active=!1,this.visible=!1,this.scene=void 0,this.parentContainer=void 0)}});u.RENDER_MASK=15,e.exports=u},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(24),r=i(20),a=new n({initialize:function(o){this.scene=o,this.systems=o.sys,this.events=o.sys.events,this.displayList,this.updateList,this.events.once(r.BOOT,this.boot,this),this.events.on(r.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(r.DESTROY,this.destroy,this)},start:function(){this.events.once(r.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.events.off(r.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(r.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});a.register=function(l,o){a.prototype.hasOwnProperty(l)||(a.prototype[l]=o)},a.remove=function(l){a.prototype.hasOwnProperty(l)&&delete a.prototype[l]},h.register("GameObjectCreator",a,"make"),e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(7),h=function(){var r,a,l,o,u,v,d=arguments[0]||{},c=1,p=arguments.length,g=!1;for(typeof d=="boolean"&&(g=d,d=arguments[1]||{},c=2),p===c&&(d=this,--c);c<p;c++)if((r=arguments[c])!=null)for(a in r)l=d[a],o=r[a],d!==o&&(g&&o&&(n(o)||(u=Array.isArray(o)))?(u?(u=!1,v=l&&Array.isArray(l)?l:[]):v=l&&n(l)?l:{},d[a]=h(g,v,o)):o!==void 0&&(d[a]=o));return d};e.exports=h},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r){return Math.max(h,Math.min(r,n))};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(25),h=new n,r=new n,a=new n,l={camera:h,sprite:r,calc:a},o=function(u,v,d){var c=h,p=r,g=a;return p.applyITRS(u.x,u.y,u.rotation,u.scaleX,u.scaleY),c.copyFrom(v.matrix),d?(c.multiplyWithOffset(d,-v.scrollX*u.scrollFactorX,-v.scrollY*u.scrollFactorY),p.e=u.x,p.f=u.y):(p.e-=v.scrollX*u.scrollFactorX,p.f-=v.scrollY*u.scrollFactorY),c.multiply(p,g),l};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ADDED_TO_SCENE:i(656),BOOT:i(657),CREATE:i(658),DESTROY:i(659),PAUSE:i(660),POST_UPDATE:i(661),PRE_RENDER:i(662),PRE_UPDATE:i(663),READY:i(664),REMOVED_FROM_SCENE:i(665),RENDER:i(666),RESUME:i(667),SHUTDOWN:i(668),SLEEP:i(669),START:i(670),TRANSITION_COMPLETE:i(671),TRANSITION_INIT:i(672),TRANSITION_OUT:i(673),TRANSITION_START:i(674),TRANSITION_WAKE:i(675),UPDATE:i(676),WAKE:i(677)}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={BLUR:i(612),BOOT:i(613),CONTEXT_LOST:i(614),CONTEXT_RESTORED:i(615),DESTROY:i(616),FOCUS:i(617),HIDDEN:i(618),PAUSE:i(619),POST_RENDER:i(620),POST_STEP:i(621),PRE_RENDER:i(622),PRE_STEP:i(623),READY:i(624),RESUME:i(625),STEP:i(626),VISIBLE:i(627)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(21),r=i(95),a=i(2),l=i(155),o=i(240),u=i(517),v=i(156),d=new n({initialize:function(p,g){this.loader=p,this.cache=a(g,"cache",!1),this.type=a(g,"type",!1),this.key=a(g,"key",!1);var m=this.key;if(p.prefix&&p.prefix!==""&&(this.key=p.prefix+m),!this.type||!this.key)throw new Error("Invalid Loader."+this.type+" key");var x=a(g,"url");x===void 0?x=p.path+m+"."+a(g,"extension",""):typeof x=="string"&&!x.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)&&(x=p.path+x),this.url=x,this.src="",this.xhrSettings=v(a(g,"responseType",void 0)),a(g,"xhrSettings",!1)&&(this.xhrSettings=o(this.xhrSettings,a(g,"xhrSettings",{}))),this.xhrLoader=null,this.state=typeof this.url=="function"?h.FILE_POPULATED:h.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=a(g,"config",{}),this.multiFile,this.linkFile},setLink:function(c){this.linkFile=c,c.linkFile=this},resetXHR:function(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function(){this.state===h.FILE_POPULATED?this.loader.nextFile(this,!0):(this.state=h.FILE_LOADING,this.src=l(this,this.loader.baseURL),this.src.indexOf("data:")===0?console.warn("Local data URIs are not supported: "+this.key):this.xhrLoader=u(this,this.loader.xhr))},onLoad:function(c,p){var g=c.responseURL&&(c.responseURL.indexOf("file://")===0||c.responseURL.indexOf("capacitor://")===0),m=g&&p.target.status===0,x=!(p.target&&p.target.status!==200)||m;c.readyState===4&&c.status>=400&&c.status<=599&&(x=!1),this.state=h.FILE_LOADED,this.resetXHR(),this.loader.nextFile(this,x)},onError:function(){this.resetXHR(),this.loader.nextFile(this,!1)},onProgress:function(c){c.lengthComputable&&(this.bytesLoaded=c.loaded,this.bytesTotal=c.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(r.FILE_PROGRESS,this,this.percentComplete))},onProcess:function(){this.state=h.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function(){this.state=h.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function(){this.state=h.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function(){return this.cache&&this.cache.exists(this.key)},addToCache:function(){this.cache&&this.cache.add(this.key,this.data),this.pendingDestroy()},pendingDestroy:function(c){c===void 0&&(c=this.data);var p=this.key,g=this.type;this.loader.emit(r.FILE_COMPLETE,p,g,c),this.loader.emit(r.FILE_KEY_COMPLETE+g+"-"+p,p,g,c),this.loader.flagForRemoval(this)},destroy:function(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});d.createObjectURL=function(c,p,g){if(typeof URL=="function")c.src=URL.createObjectURL(p);else{var m=new FileReader;m.onload=function(){c.removeAttribute("crossOrigin"),c.src="data:"+(p.type||g)+";base64,"+m.result.split(",")[1]},m.onerror=c.onerror,m.readAsDataURL(p)}},d.revokeObjectURL=function(c){typeof URL=="function"&&URL.revokeObjectURL(c.src)},e.exports=d},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={},n={},h={};h.register=function(r,a,l,o){o===void 0&&(o=!1),i[r]={plugin:a,mapping:l,custom:o}},h.registerCustom=function(r,a,l,o){n[r]={plugin:a,mapping:l,data:o}},h.hasCore=function(r){return i.hasOwnProperty(r)},h.hasCustom=function(r){return n.hasOwnProperty(r)},h.getCore=function(r){return i[r]},h.getCustom=function(r){return n[r]},h.getCustomClass=function(r){return n.hasOwnProperty(r)?n[r].plugin:null},h.remove=function(r){i.hasOwnProperty(r)&&delete i[r]},h.removeCustom=function(r){n.hasOwnProperty(r)&&delete n[r]},h.destroyCorePlugins=function(){for(var r in i)i.hasOwnProperty(r)&&delete i[r]},h.destroyCustomPlugins=function(){for(var r in n)n.hasOwnProperty(r)&&delete n[r]},e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(14),r=i(3),a=new n({initialize:function(o,u,v,d,c,p){o===void 0&&(o=1),u===void 0&&(u=0),v===void 0&&(v=0),d===void 0&&(d=1),c===void 0&&(c=0),p===void 0&&(p=0),this.matrix=new Float32Array([o,u,v,d,c,p,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0}},a:{get:function(){return this.matrix[0]},set:function(l){this.matrix[0]=l}},b:{get:function(){return this.matrix[1]},set:function(l){this.matrix[1]=l}},c:{get:function(){return this.matrix[2]},set:function(l){this.matrix[2]=l}},d:{get:function(){return this.matrix[3]},set:function(l){this.matrix[3]=l}},e:{get:function(){return this.matrix[4]},set:function(l){this.matrix[4]=l}},f:{get:function(){return this.matrix[5]},set:function(l){this.matrix[5]=l}},tx:{get:function(){return this.matrix[4]},set:function(l){this.matrix[4]=l}},ty:{get:function(){return this.matrix[5]},set:function(l){this.matrix[5]=l}},rotation:{get:function(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},rotationNormalized:{get:function(){var l=this.matrix,o=l[0],u=l[1],v=l[2],d=l[3];return o||u?u>0?Math.acos(o/this.scaleX):-Math.acos(o/this.scaleX):v||d?h.TAU-(d>0?Math.acos(-v/this.scaleY):-Math.acos(v/this.scaleY)):0}},scaleX:{get:function(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function(){var l=this.matrix;return l[0]=1,l[1]=0,l[2]=0,l[3]=1,l[4]=0,l[5]=0,this},translate:function(l,o){var u=this.matrix;return u[4]=u[0]*l+u[2]*o+u[4],u[5]=u[1]*l+u[3]*o+u[5],this},scale:function(l,o){var u=this.matrix;return u[0]*=l,u[1]*=l,u[2]*=o,u[3]*=o,this},rotate:function(l){var o=Math.sin(l),u=Math.cos(l),v=this.matrix,d=v[0],c=v[1],p=v[2],g=v[3];return v[0]=d*u+p*o,v[1]=c*u+g*o,v[2]=d*-o+p*u,v[3]=c*-o+g*u,this},multiply:function(l,o){var u=this.matrix,v=l.matrix,d=u[0],c=u[1],p=u[2],g=u[3],m=u[4],x=u[5],y=v[0],T=v[1],C=v[2],S=v[3],E=v[4],M=v[5],O=o===void 0?this:o;return O.a=y*d+T*p,O.b=y*c+T*g,O.c=C*d+S*p,O.d=C*c+S*g,O.e=E*d+M*p+m,O.f=E*c+M*g+x,O},multiplyWithOffset:function(l,o,u){var v=this.matrix,d=l.matrix,c=v[0],p=v[1],g=v[2],m=v[3],x=v[4],y=v[5],T=o*c+u*g+x,C=o*p+u*m+y,S=d[0],E=d[1],M=d[2],O=d[3],L=d[4],R=d[5];return v[0]=S*c+E*g,v[1]=S*p+E*m,v[2]=M*c+O*g,v[3]=M*p+O*m,v[4]=L*c+R*g+T,v[5]=L*p+R*m+C,this},transform:function(l,o,u,v,d,c){var p=this.matrix,g=p[0],m=p[1],x=p[2],y=p[3],T=p[4],C=p[5];return p[0]=l*g+o*x,p[1]=l*m+o*y,p[2]=u*g+v*x,p[3]=u*m+v*y,p[4]=d*g+c*x+T,p[5]=d*m+c*y+C,this},transformPoint:function(l,o,u){u===void 0&&(u={x:0,y:0});var v=this.matrix,d=v[0],c=v[1],p=v[2],g=v[3],m=v[4],x=v[5];return u.x=l*d+o*p+m,u.y=l*c+o*g+x,u},invert:function(){var l=this.matrix,o=l[0],u=l[1],v=l[2],d=l[3],c=l[4],p=l[5],g=o*d-u*v;return l[0]=d/g,l[1]=-u/g,l[2]=-v/g,l[3]=o/g,l[4]=(v*p-d*c)/g,l[5]=-(o*p-u*c)/g,this},copyFrom:function(l){var o=this.matrix;return o[0]=l.a,o[1]=l.b,o[2]=l.c,o[3]=l.d,o[4]=l.e,o[5]=l.f,this},copyFromArray:function(l){var o=this.matrix;return o[0]=l[0],o[1]=l[1],o[2]=l[2],o[3]=l[3],o[4]=l[4],o[5]=l[5],this},copyToContext:function(l){var o=this.matrix;return l.transform(o[0],o[1],o[2],o[3],o[4],o[5]),l},setToContext:function(l){var o=this.matrix;return l.setTransform(o[0],o[1],o[2],o[3],o[4],o[5]),l},copyToArray:function(l){var o=this.matrix;return l===void 0?l=[o[0],o[1],o[2],o[3],o[4],o[5]]:(l[0]=o[0],l[1]=o[1],l[2]=o[2],l[3]=o[3],l[4]=o[4],l[5]=o[5]),l},setTransform:function(l,o,u,v,d,c){var p=this.matrix;return p[0]=l,p[1]=o,p[2]=u,p[3]=v,p[4]=d,p[5]=c,this},decomposeMatrix:function(){var l=this.decomposedMatrix,o=this.matrix,u=o[0],v=o[1],d=o[2],c=o[3],p=u*c-v*d;if(l.translateX=o[4],l.translateY=o[5],u||v){var g=Math.sqrt(u*u+v*v);l.rotation=v>0?Math.acos(u/g):-Math.acos(u/g),l.scaleX=g,l.scaleY=p/g}else if(d||c){var m=Math.sqrt(d*d+c*c);l.rotation=Math.PI*.5-(c>0?Math.acos(-d/m):-Math.acos(d/m)),l.scaleX=p/m,l.scaleY=m}else l.rotation=0,l.scaleX=0,l.scaleY=0;return l},applyITRS:function(l,o,u,v,d){var c=this.matrix,p=Math.sin(u),g=Math.cos(u);return c[4]=l,c[5]=o,c[0]=g*v,c[1]=p*v,c[2]=-p*d,c[3]=g*d,this},applyInverse:function(l,o,u){u===void 0&&(u=new r);var v=this.matrix,d=v[0],c=v[1],p=v[2],g=v[3],m=v[4],x=v[5],y=1/(d*g+p*-c);return u.x=g*y*l+-p*y*o+(x*p-m*g)*y,u.y=d*y*o+-c*y*l+(-x*d+m*c)*y,u},getX:function(l,o){return l*this.a+o*this.c+this.e},getY:function(l,o){return l*this.b+o*this.d+this.f},getXRound:function(l,o,u){var v=this.getX(l,o);return u&&(v=Math.round(v)),v},getYRound:function(l,o,u){var v=this.getY(l,o);return u&&(v=Math.round(v)),v},getCSSMatrix:function(){var l=this.matrix;return"matrix("+l[0]+","+l[1]+","+l[2]+","+l[3]+","+l[4]+","+l[5]+")"},destroy:function(){this.matrix=null,this.decomposedMatrix=null}});e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(2),h=function(r,a,l,o,u,v){r===void 0&&(r=0),a===void 0&&(a=0),l===void 0&&(l=v.width),o===void 0&&(o=v.height),u||(u={});var d=n(u,"isNotEmpty",!1),c=n(u,"isColliding",!1),p=n(u,"hasInterestingFace",!1);r<0&&(l+=r,r=0),a<0&&(o+=a,a=0),r+l>v.width&&(l=Math.max(v.width-r,0)),a+o>v.height&&(o=Math.max(v.height-a,0));for(var g=[],m=a;m<a+o;m++)for(var x=r;x<r+l;x++){var y=v.data[m][x];if(y!==null){if(d&&y.index===-1||c&&!y.collides||p&&!y.hasInterestingFace)continue;g.push(y)}}return g};e.exports=h},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r,a,l,o){a===void 0&&(a=0),l===void 0&&(l=0),o===void 0&&(o=1);var u,v=0,d=n.length;if(o===1)for(u=l;u<d;u++)n[u][h]=r+v*a,v++;else for(u=l;u>=0;u--)n[u][h]=r+v*a,v++;return n};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(35),h=i(13),r=function(a,l,o){l.x=h(o,"x",0),l.y=h(o,"y",0),l.depth=h(o,"depth",0),l.flipX=h(o,"flipX",!1),l.flipY=h(o,"flipY",!1);var u=h(o,"scale",null);typeof u=="number"?l.setScale(u):u!==null&&(l.scaleX=h(u,"x",1),l.scaleY=h(u,"y",1));var v=h(o,"scrollFactor",null);typeof v=="number"?l.setScrollFactor(v):v!==null&&(l.scrollFactorX=h(v,"x",1),l.scrollFactorY=h(v,"y",1)),l.rotation=h(o,"rotation",0);var d=h(o,"angle",null);d!==null&&(l.angle=d),l.alpha=h(o,"alpha",1);var c=h(o,"origin",null);if(typeof c=="number")l.setOrigin(c);else if(c!==null){var p=h(c,"x",.5),g=h(c,"y",.5);l.setOrigin(p,g)}l.blendMode=h(o,"blendMode",n.NORMAL),l.visible=h(o,"visible",!0);var m=h(o,"add",!0);return m&&a.sys.displayList.add(l),l.preUpdate&&a.sys.updateList.add(l),l};e.exports=r},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ORTHOGONAL:0,ISOMETRIC:1,STAGGERED:2,HEXAGONAL:3}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(19),h=function(r,a,l,o,u){var v=o.alpha*l.alpha;if(v<=0)return!1;var d=n(l,o,u).calc;return a.globalCompositeOperation=r.blendModes[l.blendMode],a.globalAlpha=v,a.save(),d.setToContext(a),a.imageSmoothingEnabled=!(!r.antialias||l.frame&&l.frame.source.scaleMode),!0};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(33),h=i(192),r=[],a=!1,l=function(){var o=function(y,T,C,S,E){T===void 0&&(T=1),C===void 0&&(C=1),S===void 0&&(S=n.CANVAS),E===void 0&&(E=!1);var M,O=d(S);return O===null?(O={parent:y,canvas:document.createElement("canvas"),type:S},S===n.CANVAS&&r.push(O),M=O.canvas):(O.parent=y,M=O.canvas),E&&(O.parent=M),M.width=T,M.height=C,a&&S===n.CANVAS&&h.disable(M.getContext("2d")),M},u=function(y,T,C){return o(y,T,C,n.CANVAS)},v=function(y,T,C){return o(y,T,C,n.WEBGL)},d=function(y){if(y===void 0&&(y=n.CANVAS),y===n.WEBGL)return null;for(var T=0;T<r.length;T++){var C=r[T];if(!C.parent&&C.type===y)return C}return null},c=function(y){var T=y instanceof HTMLCanvasElement;r.forEach(function(C){(T&&C.canvas===y||!T&&C.parent===y)&&(C.parent=null,C.canvas.width=1,C.canvas.height=1)})},p=function(){var y=0;return r.forEach(function(T){T.parent&&y++}),y},g=function(){return r.length-p()},m=function(){a=!0},x=function(){a=!1};return{create2D:u,create:o,createWebGL:v,disableSmoothing:m,enableSmoothing:x,first:d,free:g,pool:r,remove:c,total:p}};e.exports=l()},function(e,f){var i={};e.exports=i,function(){i._nextId=0,i._seed=0,i._nowStartTime=+new Date,i.extend=function(h,r){var a,l;typeof r=="boolean"?(a=2,l=r):(a=1,l=!0);for(var o=a;o<arguments.length;o++){var u=arguments[o];if(u)for(var v in u)l&&u[v]&&u[v].constructor===Object&&(!h[v]||h[v].constructor===Object)?(h[v]=h[v]||{},i.extend(h[v],l,u[v])):h[v]=u[v]}return h},i.clone=function(h,r){return i.extend({},r,h)},i.keys=function(h){if(Object.keys)return Object.keys(h);var r=[];for(var a in h)r.push(a);return r},i.values=function(h){var r=[];if(Object.keys){for(var a=Object.keys(h),l=0;l<a.length;l++)r.push(h[a[l]]);return r}for(var o in h)r.push(h[o]);return r},i.get=function(h,r,a,l){r=r.split(".").slice(a,l);for(var o=0;o<r.length;o+=1)h=h[r[o]];return h},i.set=function(h,r,a,l,o){var u=r.split(".").slice(l,o);return i.get(h,r,0,-1)[u[u.length-1]]=a,a},i.shuffle=function(h){for(var r=h.length-1;r>0;r--){var a=Math.floor(i.random()*(r+1)),l=h[r];h[r]=h[a],h[a]=l}return h},i.choose=function(h){return h[Math.floor(i.random()*h.length)]},i.isElement=function(h){return typeof HTMLElement!="undefined"?h instanceof HTMLElement:!!(h&&h.nodeType&&h.nodeName)},i.isArray=function(h){return Object.prototype.toString.call(h)==="[object Array]"},i.isFunction=function(h){return typeof h=="function"},i.isPlainObject=function(h){return typeof h=="object"&&h.constructor===Object},i.isString=function(h){return Object.prototype.toString.call(h)==="[object String]"},i.clamp=function(h,r,a){return h<r?r:h>a?a:h},i.sign=function(h){return h<0?-1:1},i.now=function(){if(typeof window!="undefined"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return new Date-i._nowStartTime},i.random=function(h,r){return h=typeof h!="undefined"?h:0,r=typeof r!="undefined"?r:1,h+n()*(r-h)};var n=function(){return i._seed=(i._seed*9301+49297)%233280,i._seed/233280};i.colorToNumber=function(h){return h=h.replace("#",""),h.length==3&&(h=h.charAt(0)+h.charAt(0)+h.charAt(1)+h.charAt(1)+h.charAt(2)+h.charAt(2)),parseInt(h,16)},i.logLevel=1,i.log=function(){console&&i.logLevel>0&&i.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},i.info=function(){console&&i.logLevel>0&&i.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},i.warn=function(){console&&i.logLevel>0&&i.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},i.nextId=function(){return i._nextId++},i.indexOf=function(h,r){if(h.indexOf)return h.indexOf(r);for(var a=0;a<h.length;a++)if(h[a]===r)return a;return-1},i.map=function(h,r){if(h.map)return h.map(r);for(var a=[],l=0;l<h.length;l+=1)a.push(r(h[l]));return a},i.topologicalSort=function(h){var r=[],a=[],l=[];for(var o in h)!a[o]&&!l[o]&&i._topologicalSort(o,a,l,h,r);return r},i._topologicalSort=function(h,r,a,l,o){var u=l[h]||[];a[h]=!0;for(var v=0;v<u.length;v+=1){var d=u[v];a[d]||r[d]||i._topologicalSort(d,r,a,l,o)}a[h]=!1,r[h]=!0,o.push(h)},i.chain=function(){for(var h=[],r=0;r<arguments.length;r+=1){var a=arguments[r];a._chained?h.push.apply(h,a._chained):h.push(a)}var l=function(){for(var o,u=new Array(arguments.length),v=0,d=arguments.length;v<d;v++)u[v]=arguments[v];for(v=0;v<h.length;v+=1){var c=h[v].apply(o,u);typeof c!="undefined"&&(o=c)}return o};return l._chained=h,l},i.chainPathBefore=function(h,r,a){return i.set(h,r,i.chain(a,i.get(h,r)))},i.chainPathAfter=function(h,r,a){return i.set(h,r,i.chain(i.get(h,r),a))}}()},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n={VERSION:"3.55.2",BlendModes:i(35),ScaleModes:i(168),AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,FOREVER:-1,NONE:4,UP:5,DOWN:6,LEFT:7,RIGHT:8};e.exports=n},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(11),r=i(15),a=i(47),l=new n({Extends:r,Mixins:[h.AlphaSingle,h.BlendMode,h.Depth,h.GetBounds,h.Mask,h.Origin,h.Pipeline,h.ScrollFactor,h.Transform,h.Visible],initialize:function(u,v,d){v===void 0&&(v="Shape"),r.call(this,u,v),this.geom=d,this.pathData=[],this.pathIndexes=[],this.fillColor=16777215,this.fillAlpha=1,this.strokeColor=16777215,this.strokeAlpha=1,this.lineWidth=1,this.isFilled=!1,this.isStroked=!1,this.closePath=!0,this._tempLine=new a,this.width=0,this.height=0,this.initPipeline()},setFillStyle:function(o,u){return u===void 0&&(u=1),o===void 0?this.isFilled=!1:(this.fillColor=o,this.fillAlpha=u,this.isFilled=!0),this},setStrokeStyle:function(o,u,v){return v===void 0&&(v=1),o===void 0?this.isStroked=!1:(this.lineWidth=o,this.strokeColor=u,this.strokeAlpha=v,this.isStroked=!0),this},setClosePath:function(o){return this.closePath=o,this},setSize:function(o,u){return this.width=o,this.height=u,this},setDisplaySize:function(o,u){return this.displayWidth=o,this.displayHeight=u,this},preDestroy:function(){this.geom=null,this._tempLine=null,this.pathData=[],this.pathIndexes=[]},displayWidth:{get:function(){return this.scaleX*this.width},set:function(o){this.scaleX=o/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(o){this.scaleY=o/this.height}}});e.exports=l},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(14),h=function(r){return r*n.DEG_TO_RAD};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={DESTROY:i(743),FADE_IN_COMPLETE:i(744),FADE_IN_START:i(745),FADE_OUT_COMPLETE:i(746),FADE_OUT_START:i(747),FLASH_COMPLETE:i(748),FLASH_START:i(749),FOLLOW_UPDATE:i(750),PAN_COMPLETE:i(751),PAN_START:i(752),POST_RENDER:i(753),PRE_RENDER:i(754),ROTATE_COMPLETE:i(755),ROTATE_START:i(756),SHAKE_COMPLETE:i(757),SHAKE_START:i(758),ZOOM_COMPLETE:i(759),ZOOM_START:i(760)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(103),r=i(328),a=i(188),l=i(329),o=new n({initialize:function(v,d,c,p){v===void 0&&(v=0),d===void 0&&(d=0),c===void 0&&(c=0),p===void 0&&(p=255),this.r=0,this.g=0,this.b=0,this.a=255,this._h=0,this._s=0,this._v=0,this._locked=!1,this.gl=[0,0,0,1],this._color=0,this._color32=0,this._rgba="",this.setTo(v,d,c,p)},transparent:function(){return this._locked=!0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this._locked=!1,this.update(!0)},setTo:function(u,v,d,c,p){return c===void 0&&(c=255),p===void 0&&(p=!0),this._locked=!0,this.red=u,this.green=v,this.blue=d,this.alpha=c,this._locked=!1,this.update(p)},setGLTo:function(u,v,d,c){return c===void 0&&(c=1),this._locked=!0,this.redGL=u,this.greenGL=v,this.blueGL=d,this.alphaGL=c,this._locked=!1,this.update(!0)},setFromRGB:function(u){return this._locked=!0,this.red=u.r,this.green=u.g,this.blue=u.b,u.hasOwnProperty("a")&&(this.alpha=u.a),this._locked=!1,this.update(!0)},setFromHSV:function(u,v,d){return a(u,v,d,this)},update:function(u){if(u===void 0&&(u=!1),this._locked)return this;var v=this.r,d=this.g,c=this.b,p=this.a;return this._color=h(v,d,c),this._color32=r(v,d,c,p),this._rgba="rgba("+v+","+d+","+c+","+p/255+")",u&&l(v,d,c,this),this},updateHSV:function(){var u=this.r,v=this.g,d=this.b;return l(u,v,d,this),this},clone:function(){return new o(this.r,this.g,this.b,this.a)},gray:function(u){return this.setTo(u,u,u)},random:function(u,v){u===void 0&&(u=0),v===void 0&&(v=255);var d=Math.floor(u+Math.random()*(v-u)),c=Math.floor(u+Math.random()*(v-u)),p=Math.floor(u+Math.random()*(v-u));return this.setTo(d,c,p)},randomGray:function(u,v){u===void 0&&(u=0),v===void 0&&(v=255);var d=Math.floor(u+Math.random()*(v-u));return this.setTo(d,d,d)},saturate:function(u){return this.s+=u/100,this},desaturate:function(u){return this.s-=u/100,this},lighten:function(u){return this.v+=u/100,this},darken:function(u){return this.v-=u/100,this},brighten:function(u){var v=this.r,d=this.g,c=this.b;return v=Math.max(0,Math.min(255,v-Math.round(255*-(u/100)))),d=Math.max(0,Math.min(255,d-Math.round(255*-(u/100)))),c=Math.max(0,Math.min(255,c-Math.round(255*-(u/100)))),this.setTo(v,d,c)},color:{get:function(){return this._color}},color32:{get:function(){return this._color32}},rgba:{get:function(){return this._rgba}},redGL:{get:function(){return this.gl[0]},set:function(u){this.gl[0]=Math.min(Math.abs(u),1),this.r=Math.floor(this.gl[0]*255),this.update(!0)}},greenGL:{get:function(){return this.gl[1]},set:function(u){this.gl[1]=Math.min(Math.abs(u),1),this.g=Math.floor(this.gl[1]*255),this.update(!0)}},blueGL:{get:function(){return this.gl[2]},set:function(u){this.gl[2]=Math.min(Math.abs(u),1),this.b=Math.floor(this.gl[2]*255),this.update(!0)}},alphaGL:{get:function(){return this.gl[3]},set:function(u){this.gl[3]=Math.min(Math.abs(u),1),this.a=Math.floor(this.gl[3]*255),this.update()}},red:{get:function(){return this.r},set:function(u){u=Math.floor(Math.abs(u)),this.r=Math.min(u,255),this.gl[0]=u/255,this.update(!0)}},green:{get:function(){return this.g},set:function(u){u=Math.floor(Math.abs(u)),this.g=Math.min(u,255),this.gl[1]=u/255,this.update(!0)}},blue:{get:function(){return this.b},set:function(u){u=Math.floor(Math.abs(u)),this.b=Math.min(u,255),this.gl[2]=u/255,this.update(!0)}},alpha:{get:function(){return this.a},set:function(u){u=Math.floor(Math.abs(u)),this.a=Math.min(u,255),this.gl[3]=u/255,this.update()}},h:{get:function(){return this._h},set:function(u){this._h=u,a(u,this._s,this._v,this)}},s:{get:function(){return this._s},set:function(u){this._s=u,a(this._h,u,this._v,this)}},v:{get:function(){return this._v},set:function(u){this._v=u,a(this._h,this._s,u,this)}}});e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=new n({initialize:function(a,l,o){this.x=0,this.y=0,this.z=0,typeof a=="object"?(this.x=a.x||0,this.y=a.y||0,this.z=a.z||0):(this.x=a||0,this.y=l||0,this.z=o||0)},up:function(){return this.x=0,this.y=1,this.z=0,this},min:function(r){return this.x=Math.min(this.x,r.x),this.y=Math.min(this.y,r.y),this.z=Math.min(this.z,r.z),this},max:function(r){return this.x=Math.max(this.x,r.x),this.y=Math.max(this.y,r.y),this.z=Math.max(this.z,r.z),this},clone:function(){return new h(this.x,this.y,this.z)},addVectors:function(r,a){return this.x=r.x+a.x,this.y=r.y+a.y,this.z=r.z+a.z,this},crossVectors:function(r,a){var l=r.x,o=r.y,u=r.z,v=a.x,d=a.y,c=a.z;return this.x=o*c-u*d,this.y=u*v-l*c,this.z=l*d-o*v,this},equals:function(r){return this.x===r.x&&this.y===r.y&&this.z===r.z},copy:function(r){return this.x=r.x,this.y=r.y,this.z=r.z||0,this},set:function(r,a,l){return typeof r=="object"?(this.x=r.x||0,this.y=r.y||0,this.z=r.z||0):(this.x=r||0,this.y=a||0,this.z=l||0),this},setFromMatrixPosition:function(r){return this.fromArray(r.val,12)},setFromMatrixColumn:function(r,a){return this.fromArray(r.val,a*4)},fromArray:function(r,a){return a===void 0&&(a=0),this.x=r[a],this.y=r[a+1],this.z=r[a+2],this},add:function(r){return this.x+=r.x,this.y+=r.y,this.z+=r.z||0,this},addScalar:function(r){return this.x+=r,this.y+=r,this.z+=r,this},addScale:function(r,a){return this.x+=r.x*a,this.y+=r.y*a,this.z+=r.z*a||0,this},subtract:function(r){return this.x-=r.x,this.y-=r.y,this.z-=r.z||0,this},multiply:function(r){return this.x*=r.x,this.y*=r.y,this.z*=r.z||1,this},scale:function(r){return isFinite(r)?(this.x*=r,this.y*=r,this.z*=r):(this.x=0,this.y=0,this.z=0),this},divide:function(r){return this.x/=r.x,this.y/=r.y,this.z/=r.z||1,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function(r){var a=r.x-this.x,l=r.y-this.y,o=r.z-this.z||0;return Math.sqrt(a*a+l*l+o*o)},distanceSq:function(r){var a=r.x-this.x,l=r.y-this.y,o=r.z-this.z||0;return a*a+l*l+o*o},length:function(){var r=this.x,a=this.y,l=this.z;return Math.sqrt(r*r+a*a+l*l)},lengthSq:function(){var r=this.x,a=this.y,l=this.z;return r*r+a*a+l*l},normalize:function(){var r=this.x,a=this.y,l=this.z,o=r*r+a*a+l*l;return o>0&&(o=1/Math.sqrt(o),this.x=r*o,this.y=a*o,this.z=l*o),this},dot:function(r){return this.x*r.x+this.y*r.y+this.z*r.z},cross:function(r){var a=this.x,l=this.y,o=this.z,u=r.x,v=r.y,d=r.z;return this.x=l*d-o*v,this.y=o*u-a*d,this.z=a*v-l*u,this},lerp:function(r,a){a===void 0&&(a=0);var l=this.x,o=this.y,u=this.z;return this.x=l+a*(r.x-l),this.y=o+a*(r.y-o),this.z=u+a*(r.z-u),this},applyMatrix3:function(r){var a=this.x,l=this.y,o=this.z,u=r.val;return this.x=u[0]*a+u[3]*l+u[6]*o,this.y=u[1]*a+u[4]*l+u[7]*o,this.z=u[2]*a+u[5]*l+u[8]*o,this},applyMatrix4:function(r){var a=this.x,l=this.y,o=this.z,u=r.val,v=1/(u[3]*a+u[7]*l+u[11]*o+u[15]);return this.x=(u[0]*a+u[4]*l+u[8]*o+u[12])*v,this.y=(u[1]*a+u[5]*l+u[9]*o+u[13])*v,this.z=(u[2]*a+u[6]*l+u[10]*o+u[14])*v,this},transformMat3:function(r){var a=this.x,l=this.y,o=this.z,u=r.val;return this.x=a*u[0]+l*u[3]+o*u[6],this.y=a*u[1]+l*u[4]+o*u[7],this.z=a*u[2]+l*u[5]+o*u[8],this},transformMat4:function(r){var a=this.x,l=this.y,o=this.z,u=r.val;return this.x=u[0]*a+u[4]*l+u[8]*o+u[12],this.y=u[1]*a+u[5]*l+u[9]*o+u[13],this.z=u[2]*a+u[6]*l+u[10]*o+u[14],this},transformCoordinates:function(r){var a=this.x,l=this.y,o=this.z,u=r.val,v=a*u[0]+l*u[4]+o*u[8]+u[12],d=a*u[1]+l*u[5]+o*u[9]+u[13],c=a*u[2]+l*u[6]+o*u[10]+u[14],p=a*u[3]+l*u[7]+o*u[11]+u[15];return this.x=v/p,this.y=d/p,this.z=c/p,this},transformQuat:function(r){var a=this.x,l=this.y,o=this.z,u=r.x,v=r.y,d=r.z,c=r.w,p=c*a+v*o-d*l,g=c*l+d*a-u*o,m=c*o+u*l-v*a,x=-u*a-v*l-d*o;return this.x=p*c+x*-u+g*-d-m*-v,this.y=g*c+x*-v+m*-u-p*-d,this.z=m*c+x*-d+p*-v-g*-u,this},project:function(r){var a=this.x,l=this.y,o=this.z,u=r.val,v=u[0],d=u[1],c=u[2],p=u[3],g=u[4],m=u[5],x=u[6],y=u[7],T=u[8],C=u[9],S=u[10],E=u[11],M=u[12],O=u[13],L=u[14],R=u[15],F=1/(a*p+l*y+o*E+R);return this.x=(a*v+l*g+o*T+M)*F,this.y=(a*d+l*m+o*C+O)*F,this.z=(a*c+l*x+o*S+L)*F,this},projectViewMatrix:function(r,a){return this.applyMatrix4(r).applyMatrix4(a)},unprojectViewMatrix:function(r,a){return this.applyMatrix4(r).applyMatrix4(a)},unproject:function(r,a){var l=r.x,o=r.y,u=r.z,v=r.w,d=this.x-l,c=v-this.y-1-o,p=this.z;return this.x=2*d/u-1,this.y=2*c/v-1,this.z=2*p-1,this.project(a)},reset:function(){return this.x=0,this.y=0,this.z=0,this}});h.ZERO=new h,h.RIGHT=new h(1,0,0),h.LEFT=new h(-1,0,0),h.UP=new h(0,-1,0),h.DOWN=new h(0,1,0),h.FORWARD=new h(0,0,1),h.BACK=new h(0,0,-1),h.ONE=new h(1,1,1),e.exports=h},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={CSV:0,TILED_JSON:1,ARRAY_2D:2,WELTMEISTER:3}},function(e,f,i){var n={};e.exports=n;var h=i(64),r=i(83),a=i(165),l=i(32),o=i(84),u=i(271);(function(){n._inertiaScale=4,n._nextCollidingGroupId=1,n._nextNonCollidingGroupId=-1,n._nextCategory=1,n.create=function(d){var c={id:l.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:null,position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},previousPositionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inverseMass:0,inertia:0,inverseInertia:0,_original:null,render:{visible:!0,opacity:1,sprite:{xOffset:0,yOffset:0},fillColor:null,fillOpacity:null,lineColor:null,lineOpacity:null,lineThickness:null},gameObject:null,scale:{x:1,y:1},centerOfMass:{x:0,y:0},centerOffset:{x:0,y:0},gravityScale:{x:1,y:1},ignoreGravity:!1,ignorePointer:!1,onCollideCallback:null,onCollideEndCallback:null,onCollideActiveCallback:null,onCollideWith:{}};!d.hasOwnProperty("position")&&d.hasOwnProperty("vertices")?d.position=h.centre(d.vertices):d.hasOwnProperty("vertices")||(c.vertices=h.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"));var p=l.extend(c,d);return v(p,d),p.setOnCollideWith=function(g,m){return m?this.onCollideWith[g.id]=m:delete this.onCollideWith[g.id],this},p},n.nextGroup=function(d){return d?n._nextNonCollidingGroupId--:n._nextCollidingGroupId++},n.nextCategory=function(){return n._nextCategory=n._nextCategory<<1,n._nextCategory};var v=function(d,c){c=c||{},n.set(d,{bounds:d.bounds||o.create(d.vertices),positionPrev:d.positionPrev||r.clone(d.position),anglePrev:d.anglePrev||d.angle,vertices:d.vertices,parts:d.parts||[d],isStatic:d.isStatic,isSleeping:d.isSleeping,parent:d.parent||d});var p=d.bounds;if(h.rotate(d.vertices,d.angle,d.position),u.rotate(d.axes,d.angle),o.update(p,d.vertices,d.velocity),n.set(d,{axes:c.axes||d.axes,area:c.area||d.area,mass:c.mass||d.mass,inertia:c.inertia||d.inertia}),d.parts.length===1){var g=d.centerOfMass,m=d.centerOffset,x=p.max.x-p.min.x,y=p.max.y-p.min.y;g.x=-(p.min.x-d.position.x)/x,g.y=-(p.min.y-d.position.y)/y,m.x=x*g.x,m.y=y*g.y}};n.set=function(d,c,p){var g;typeof c=="string"&&(g=c,c={},c[g]=p);for(g in c)if(!!Object.prototype.hasOwnProperty.call(c,g))switch(p=c[g],g){case"isStatic":n.setStatic(d,p);break;case"isSleeping":a.set(d,p);break;case"mass":n.setMass(d,p);break;case"density":n.setDensity(d,p);break;case"inertia":n.setInertia(d,p);break;case"vertices":n.setVertices(d,p);break;case"position":n.setPosition(d,p);break;case"angle":n.setAngle(d,p);break;case"velocity":n.setVelocity(d,p);break;case"angularVelocity":n.setAngularVelocity(d,p);break;case"parts":n.setParts(d,p);break;case"centre":n.setCentre(d,p);break;default:d[g]=p}},n.setStatic=function(d,c){for(var p=0;p<d.parts.length;p++){var g=d.parts[p];g.isStatic=c,c?(g._original={restitution:g.restitution,friction:g.friction,mass:g.mass,inertia:g.inertia,density:g.density,inverseMass:g.inverseMass,inverseInertia:g.inverseInertia},g.restitution=0,g.friction=1,g.mass=g.inertia=g.density=1/0,g.inverseMass=g.inverseInertia=0,g.positionPrev.x=g.position.x,g.positionPrev.y=g.position.y,g.anglePrev=g.angle,g.angularVelocity=0,g.speed=0,g.angularSpeed=0,g.motion=0):g._original&&(g.restitution=g._original.restitution,g.friction=g._original.friction,g.mass=g._original.mass,g.inertia=g._original.inertia,g.density=g._original.density,g.inverseMass=g._original.inverseMass,g.inverseInertia=g._original.inverseInertia,g._original=null)}},n.setMass=function(d,c){var p=d.inertia/(d.mass/6);d.inertia=p*(c/6),d.inverseInertia=1/d.inertia,d.mass=c,d.inverseMass=1/d.mass,d.density=d.mass/d.area},n.setDensity=function(d,c){n.setMass(d,c*d.area),d.density=c},n.setInertia=function(d,c){d.inertia=c,d.inverseInertia=1/d.inertia},n.setVertices=function(d,c){c[0].body===d?d.vertices=c:d.vertices=h.create(c,d),d.axes=u.fromVertices(d.vertices),d.area=h.area(d.vertices),n.setMass(d,d.density*d.area);var p=h.centre(d.vertices);h.translate(d.vertices,p,-1),n.setInertia(d,n._inertiaScale*h.inertia(d.vertices,d.mass)),h.translate(d.vertices,d.position),o.update(d.bounds,d.vertices,d.velocity)},n.setParts=function(d,c,p){var g;for(c=c.slice(0),d.parts.length=0,d.parts.push(d),d.parent=d,g=0;g<c.length;g++){var m=c[g];m!==d&&(m.parent=d,d.parts.push(m))}if(d.parts.length!==1){if(p=typeof p!="undefined"?p:!0,p){var x=[];for(g=0;g<c.length;g++)x=x.concat(c[g].vertices);h.clockwiseSort(x);var y=h.hull(x),T=h.centre(y);n.setVertices(d,y),h.translate(d.vertices,T)}var C=n._totalProperties(d),S=C.centre.x,E=C.centre.y,M=d.bounds,O=d.centerOfMass,L=d.centerOffset;o.update(M,d.vertices,d.velocity),O.x=-(M.min.x-S)/(M.max.x-M.min.x),O.y=-(M.min.y-E)/(M.max.y-M.min.y),L.x=S,L.y=E,d.area=C.area,d.parent=d,d.position.x=S,d.position.y=E,d.positionPrev.x=S,d.positionPrev.y=E,n.setMass(d,C.mass),n.setInertia(d,C.inertia),n.setPosition(d,C.centre)}},n.setCentre=function(d,c,p){p?(d.positionPrev.x+=c.x,d.positionPrev.y+=c.y,d.position.x+=c.x,d.position.y+=c.y):(d.positionPrev.x=c.x-(d.position.x-d.positionPrev.x),d.positionPrev.y=c.y-(d.position.y-d.positionPrev.y),d.position.x=c.x,d.position.y=c.y)},n.setPosition=function(d,c){var p=r.sub(c,d.position);d.positionPrev.x+=p.x,d.positionPrev.y+=p.y;for(var g=0;g<d.parts.length;g++){var m=d.parts[g];m.position.x+=p.x,m.position.y+=p.y,h.translate(m.vertices,p),o.update(m.bounds,m.vertices,d.velocity)}},n.setAngle=function(d,c){var p=c-d.angle;d.anglePrev+=p;for(var g=0;g<d.parts.length;g++){var m=d.parts[g];m.angle+=p,h.rotate(m.vertices,p,d.position),u.rotate(m.axes,p),o.update(m.bounds,m.vertices,d.velocity),g>0&&r.rotateAbout(m.position,p,d.position,m.position)}},n.setVelocity=function(d,c){d.positionPrev.x=d.position.x-c.x,d.positionPrev.y=d.position.y-c.y,d.velocity.x=c.x,d.velocity.y=c.y,d.speed=r.magnitude(d.velocity)},n.setAngularVelocity=function(d,c){d.anglePrev=d.angle-c,d.angularVelocity=c,d.angularSpeed=Math.abs(d.angularVelocity)},n.translate=function(d,c){n.setPosition(d,r.add(d.position,c))},n.rotate=function(d,c,p){if(!p)n.setAngle(d,d.angle+c);else{var g=Math.cos(c),m=Math.sin(c),x=d.position.x-p.x,y=d.position.y-p.y;n.setPosition(d,{x:p.x+(x*g-y*m),y:p.y+(x*m+y*g)}),n.setAngle(d,d.angle+c)}},n.scale=function(d,c,p,g){var m=0,x=0;g=g||d.position;for(var y=0;y<d.parts.length;y++){var T=d.parts[y];T.scale.x=c,T.scale.y=p,h.scale(T.vertices,c,p,g),T.axes=u.fromVertices(T.vertices),T.area=h.area(T.vertices),n.setMass(T,d.density*T.area),h.translate(T.vertices,{x:-T.position.x,y:-T.position.y}),n.setInertia(T,n._inertiaScale*h.inertia(T.vertices,T.mass)),h.translate(T.vertices,{x:T.position.x,y:T.position.y}),y>0&&(m+=T.area,x+=T.inertia),T.position.x=g.x+(T.position.x-g.x)*c,T.position.y=g.y+(T.position.y-g.y)*p,o.update(T.bounds,T.vertices,d.velocity)}d.parts.length>1&&(d.area=m,d.isStatic||(n.setMass(d,d.density*m),n.setInertia(d,x))),d.circleRadius&&(c===p?d.circleRadius*=c:d.circleRadius=null)},n.update=function(d,c,p,g){var m=Math.pow(c*p*d.timeScale,2),x=1-d.frictionAir*p*d.timeScale,y=d.position.x-d.positionPrev.x,T=d.position.y-d.positionPrev.y;d.velocity.x=y*x*g+d.force.x/d.mass*m,d.velocity.y=T*x*g+d.force.y/d.mass*m,d.positionPrev.x=d.position.x,d.positionPrev.y=d.position.y,d.position.x+=d.velocity.x,d.position.y+=d.velocity.y,d.angularVelocity=(d.angle-d.anglePrev)*x*g+d.torque/d.inertia*m,d.anglePrev=d.angle,d.angle+=d.angularVelocity,d.speed=r.magnitude(d.velocity),d.angularSpeed=Math.abs(d.angularVelocity);for(var C=0;C<d.parts.length;C++){var S=d.parts[C];h.translate(S.vertices,d.velocity),C>0&&(S.position.x+=d.velocity.x,S.position.y+=d.velocity.y),d.angularVelocity!==0&&(h.rotate(S.vertices,d.angularVelocity,d.position),u.rotate(S.axes,d.angularVelocity),C>0&&r.rotateAbout(S.position,d.angularVelocity,d.position,S.position)),o.update(S.bounds,S.vertices,d.velocity)}},n.applyForce=function(d,c,p){d.force.x+=p.x,d.force.y+=p.y;var g={x:c.x-d.position.x,y:c.y-d.position.y};d.torque+=g.x*p.y-g.y*p.x},n._totalProperties=function(d){for(var c={mass:0,area:0,inertia:0,centre:{x:0,y:0}},p=d.parts.length===1?0:1;p<d.parts.length;p++){var g=d.parts[p],m=g.mass!==1/0?g.mass:1;c.mass+=m,c.area+=g.area,c.inertia+=g.inertia,c.centre=r.add(c.centre,r.mult(g.position,m))}return c.centre=r.div(c.centre,c.mass),c}})()},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n.y+n.height-n.height*n.originY};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n.x-n.width*n.originX};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n.x+n.width-n.width*n.originX};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n.y-n.height*n.originY};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r,a,l,o){a===void 0&&(a=0),l===void 0&&(l=0),o===void 0&&(o=1);var u,v=0,d=n.length;if(o===1)for(u=l;u<d;u++)n[u][h]+=r+v*a,v++;else for(u=l;u>=0;u--)n[u][h]+=r+v*a,v++;return n};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(307),r=i(172),a=i(56),l=i(173),o=i(3),u=new n({initialize:function(d,c,p,g){d===void 0&&(d=0),c===void 0&&(c=0),p===void 0&&(p=0),g===void 0&&(g=0),this.type=a.LINE,this.x1=d,this.y1=c,this.x2=p,this.y2=g},getPoint:function(v,d){return h(this,v,d)},getPoints:function(v,d,c){return r(this,v,d,c)},getRandomPoint:function(v){return l(this,v)},setTo:function(v,d,c,p){return v===void 0&&(v=0),d===void 0&&(d=0),c===void 0&&(c=0),p===void 0&&(p=0),this.x1=v,this.y1=d,this.x2=c,this.y2=p,this},getPointA:function(v){return v===void 0&&(v=new o),v.set(this.x1,this.y1),v},getPointB:function(v){return v===void 0&&(v=new o),v.set(this.x2,this.y2),v},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(v){this.x1<=this.x2?this.x1=v:this.x2=v}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(v){this.x1>this.x2?this.x1=v:this.x2=v}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(v){this.y1<=this.y2?this.y1=v:this.y2=v}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(v){this.y1>this.y2?this.y1=v:this.y2=v}}});e.exports=u},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r,a){var l=r||h.fillColor,o=a||h.fillAlpha,u=(l&16711680)>>>16,v=(l&65280)>>>8,d=l&255;n.fillStyle="rgba("+u+","+v+","+d+","+o+")"};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=new n({initialize:function(a,l,o,u){var v=[];u.forEach(function(c){c&&v.push(c)}),this.loader=a,this.type=l,this.key=o,this.multiKeyIndex=a.multiKeyIndex++,this.files=v,this.complete=!1,this.pending=v.length,this.failed=0,this.config={},this.baseURL=a.baseURL,this.path=a.path,this.prefix=a.prefix;for(var d=0;d<v.length;d++)v[d].multiFile=this},isReadyToProcess:function(){return this.pending===0&&this.failed===0&&!this.complete},addToMultiFile:function(r){return this.files.push(r),r.multiFile=this,this.pending++,this.complete=!1,this},onFileComplete:function(r){var a=this.files.indexOf(r);a!==-1&&this.pending--},onFileFailed:function(r){var a=this.files.indexOf(r);a!==-1&&this.failed++}});e.exports=h},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r,a){var l=n-r,o=h-a;return Math.sqrt(l*l+o*o)};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={BOOT:i(922),DESTROY:i(923),DRAG_END:i(924),DRAG_ENTER:i(925),DRAG:i(926),DRAG_LEAVE:i(927),DRAG_OVER:i(928),DRAG_START:i(929),DROP:i(930),GAME_OUT:i(931),GAME_OVER:i(932),GAMEOBJECT_DOWN:i(933),GAMEOBJECT_DRAG_END:i(934),GAMEOBJECT_DRAG_ENTER:i(935),GAMEOBJECT_DRAG:i(936),GAMEOBJECT_DRAG_LEAVE:i(937),GAMEOBJECT_DRAG_OVER:i(938),GAMEOBJECT_DRAG_START:i(939),GAMEOBJECT_DROP:i(940),GAMEOBJECT_MOVE:i(941),GAMEOBJECT_OUT:i(942),GAMEOBJECT_OVER:i(943),GAMEOBJECT_POINTER_DOWN:i(944),GAMEOBJECT_POINTER_MOVE:i(945),GAMEOBJECT_POINTER_OUT:i(946),GAMEOBJECT_POINTER_OVER:i(947),GAMEOBJECT_POINTER_UP:i(948),GAMEOBJECT_POINTER_WHEEL:i(949),GAMEOBJECT_UP:i(950),GAMEOBJECT_WHEEL:i(951),MANAGER_BOOT:i(952),MANAGER_PROCESS:i(953),MANAGER_UPDATE:i(954),POINTER_DOWN:i(955),POINTER_DOWN_OUTSIDE:i(956),POINTER_MOVE:i(957),POINTER_OUT:i(958),POINTER_OVER:i(959),POINTER_UP:i(960),POINTER_UP_OUTSIDE:i(961),POINTER_WHEEL:i(962),POINTERLOCK_CHANGE:i(963),PRE_UPDATE:i(964),SHUTDOWN:i(965),START:i(966),UPDATE:i(967)}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){return n.y=h+n.height*n.originY,n};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){return n.x=h+n.width*n.originX,n};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){return n.x=h-n.width+n.width*n.originX,n};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){return n.y=h-n.height+n.height*n.originY,n};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r){return n.width<=0||n.height<=0?!1:n.x<=h&&n.x+n.width>=h&&n.y<=r&&n.y+n.height>=r};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(175),r=i(9),a=i(374),l=i(2),o=i(69),u=i(91),v=i(141),d=i(12),c=i(375),p=new n({Extends:r,initialize:function(m){r.call(this);var x=m.game,y=x.renderer,T=y.gl;this.name=l(m,"name","WebGLPipeline"),this.game=x,this.renderer=y,this.manager,this.gl=T,this.view=x.canvas,this.width=0,this.height=0,this.vertexCount=0,this.vertexCapacity=0,this.vertexData,this.vertexBuffer,this.topology=l(m,"topology",T.TRIANGLES),this.bytes,this.vertexViewF32,this.vertexViewU32,this.active=!0,this.currentUnit=0,this.forceZero=l(m,"forceZero",!1),this.hasBooted=!1,this.isPostFX=!1,this.renderTargets=[],this.currentRenderTarget,this.shaders=[],this.currentShader,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.config=m,this.glReset=!1},boot:function(){var g,m=this.gl,x=this.config,y=this.renderer;this.isPostFX||(this.projectionMatrix=new o().identity());var T=this.renderTargets,C=l(x,"renderTarget",!1);typeof C=="boolean"&&C&&(C=1);var S=y.width,E=y.height;if(typeof C=="number")for(g=0;g<C;g++)T.push(new v(y,S,E,1,0,!0));else if(Array.isArray(C))for(g=0;g<C.length;g++){var M=l(C[g],"scale",1),O=l(C[g],"minFilter",0),L=l(C[g],"autoClear",1);T.push(new v(y,S,E,M,O,L))}T.length&&(this.currentRenderTarget=T[0]),this.setShadersFromConfig(x);var R=this.shaders,F=0;for(g=0;g<R.length;g++)R[g].vertexSize>F&&(F=R[g].vertexSize);var D=l(x,"batchSize",y.config.batchSize);this.vertexCapacity=D*6;var B=new ArrayBuffer(this.vertexCapacity*F);this.vertexData=B,this.bytes=new Uint8Array(B),this.vertexViewF32=new Float32Array(B),this.vertexViewU32=new Uint32Array(B);var N=l(x,"vertices",null);for(N?(this.vertexViewF32.set(N),this.vertexBuffer=y.createVertexBuffer(B,m.STATIC_DRAW)):this.vertexBuffer=y.createVertexBuffer(B.byteLength,m.DYNAMIC_DRAW),this.setVertexBuffer(),g=R.length-1;g>=0;g--)R[g].rebind();this.hasBooted=!0,y.on(u.RESIZE,this.resize,this),y.on(u.PRE_RENDER,this.onPreRender,this),y.on(u.RENDER,this.onRender,this),y.on(u.POST_RENDER,this.onPostRender,this),this.emit(a.BOOT,this),this.onBoot()},onBoot:function(){},onResize:function(){},setShader:function(g,m){var x=this.renderer;if(g!==this.currentShader||x.currentProgram!==this.currentShader.program){this.flush(),x.resetTextures();var y=this.setVertexBuffer();y&&!m&&(m=!0),g.bind(m,!1),this.currentShader=g}return this},getShaderByName:function(g){for(var m=this.shaders,x=0;x<m.length;x++)if(m[x].name===g)return m[x]},setShadersFromConfig:function(g){var m,x=this.shaders,y=this.renderer;for(m=0;m<x.length;m++)x[m].destroy();var T="vertShader",C="fragShader",S="attributes",E=l(g,T,null),M=d.parseFragmentShaderMaxTextures(l(g,C,null),y.maxTextures),O=l(g,S,null),L=l(g,"shaders",[]),R=L.length;if(R===0)E&&M&&(this.shaders=[new c(this,"default",E,M,h(O))]);else{var F=[];for(m=0;m<R;m++){var D=L[m],B=l(D,"name","default"),N=l(D,T,E),U=d.parseFragmentShaderMaxTextures(l(D,C,M),y.maxTextures),X=l(D,S,O);N&&U&&F.push(new c(this,B,N,U,h(X)))}this.shaders=F}return this.shaders.length===0?console.warn("Pipeline: "+this.name+" - Invalid shader config"):this.currentShader=this.shaders[0],this},setGameObject:function(g,m){return m===void 0&&(m=g.frame),this.currentUnit=this.renderer.setTextureSource(m.source),this.currentUnit},shouldFlush:function(g){return g===void 0&&(g=0),this.vertexCount+g>this.vertexCapacity},resize:function(g,m){(g!==this.width||m!==this.height)&&this.flush(),this.width=g,this.height=m;for(var x=this.renderTargets,y=0;y<x.length;y++)x[y].resize(g,m);return this.setProjectionMatrix(g,m),this.emit(a.RESIZE,g,m,this),this.onResize(g,m),this},setProjectionMatrix:function(g,m){var x=this.projectionMatrix;if(!x)return this;this.projectionWidth=g,this.projectionHeight=m,x.ortho(0,g,m,0,-1e3,1e3);for(var y=this.shaders,T="uProjectionMatrix",C=0;C<y.length;C++){var S=y[C];S.hasUniform(T)&&(S.resetUniform(T),S.setMatrix4fv(T,!1,x.val,S))}return this},updateProjectionMatrix:function(){if(this.projectionMatrix){var g=this.renderer.projectionWidth,m=this.renderer.projectionHeight;(this.projectionWidth!==g||this.projectionHeight!==m)&&this.setProjectionMatrix(g,m)}},bind:function(g){if(g===void 0&&(g=this.currentShader),this.glReset)return this.rebind(g);var m=this.setVertexBuffer();return g.bind(m),this.currentShader=g,this.emit(a.BIND,this,g),this.onActive(g),this},rebind:function(g){this.setVertexBuffer();for(var m=this.shaders,x=m.length-1;x>=0;x--){var y=m[x].rebind();(!g||y===g)&&(this.currentShader=y)}return this.emit(a.REBIND,this.currentShader),this.onActive(this.currentShader),this.onRebind(),this.glReset=!1,this},setVertexBuffer:function(){var g=this.gl,m=this.vertexBuffer;return g.getParameter(g.ARRAY_BUFFER_BINDING)!==m?(g.bindBuffer(g.ARRAY_BUFFER,m),!0):!1},preBatch:function(g){return this.currentRenderTarget&&this.currentRenderTarget.bind(),this.onPreBatch(g),this},postBatch:function(g){return this.onDraw(this.currentRenderTarget),this.onPostBatch(g),this},onDraw:function(){},unbind:function(){this.currentRenderTarget&&this.currentRenderTarget.unbind()},flush:function(g){if(g===void 0&&(g=!1),this.vertexCount>0){this.emit(a.BEFORE_FLUSH,this,g),this.onBeforeFlush(g);var m=this.gl,x=this.vertexCount,y=this.currentShader.vertexSize;this.active&&(this.setVertexBuffer(),x===this.vertexCapacity?m.bufferData(m.ARRAY_BUFFER,this.vertexData,m.DYNAMIC_DRAW):m.bufferSubData(m.ARRAY_BUFFER,0,this.bytes.subarray(0,x*y)),m.drawArrays(this.topology,0,x)),this.vertexCount=0,this.emit(a.AFTER_FLUSH,this,g),this.onAfterFlush(g)}return this},onActive:function(){},onBind:function(){},onRebind:function(){},onBatch:function(){},onPreBatch:function(){},onPostBatch:function(){},onPreRender:function(){},onRender:function(){},onPostRender:function(){},onBeforeFlush:function(){},onAfterFlush:function(){},batchVert:function(g,m,x,y,T,C,S){var E=this.vertexViewF32,M=this.vertexViewU32,O=this.vertexCount*this.currentShader.vertexComponentCount-1;E[++O]=g,E[++O]=m,E[++O]=x,E[++O]=y,E[++O]=T,E[++O]=C,M[++O]=S,this.vertexCount++},batchQuad:function(g,m,x,y,T,C,S,E,M,O,L,R,F,D,B,N,U,X,K,k){k===void 0&&(k=this.currentUnit);var b=!1;return this.shouldFlush(6)&&(this.flush(),b=!0,k=this.setTexture2D(K)),this.batchVert(m,x,O,L,k,X,D),this.batchVert(y,T,O,F,k,X,N),this.batchVert(C,S,R,F,k,X,U),this.batchVert(m,x,O,L,k,X,D),this.batchVert(C,S,R,F,k,X,U),this.batchVert(E,M,R,L,k,X,B),this.onBatch(g),b},batchTri:function(g,m,x,y,T,C,S,E,M,O,L,R,F,D,B,N,U){U===void 0&&(U=this.currentUnit);var X=!1;return this.shouldFlush(3)&&(this.flush(),X=!0,U=this.setTexture2D(N)),this.batchVert(m,x,E,M,U,B,R),this.batchVert(y,T,E,L,U,B,F),this.batchVert(C,S,O,L,U,B,D),this.onBatch(g),X},drawFillRect:function(g,m,x,y,T,C,S,E){S===void 0&&(S=this.renderer.whiteTexture.glTexture),E===void 0&&(E=!0),g=Math.floor(g),m=Math.floor(m);var M=Math.floor(g+x),O=Math.floor(m+y),L=this.setTexture2D(S),R=d.getTintAppendFloatAlphaAndSwap(T,C),F=0,D=0,B=1,N=1;E&&(D=1,N=0),this.batchQuad(null,g,m,g,O,M,O,M,m,F,D,B,N,R,R,R,R,0,S,L)},setTexture2D:function(g){return g===void 0&&(g=this.renderer.whiteTexture.glTexture),this.currentUnit=this.renderer.setTexture2D(g),this.currentUnit},bindTexture:function(g,m){m===void 0&&(m=0);var x=this.gl;return x.activeTexture(x.TEXTURE0+m),x.bindTexture(x.TEXTURE_2D,g),this},bindRenderTarget:function(g,m){return this.bindTexture(g.texture,m)},setTime:function(g){return this.set1f(g,this.game.loop.getDuration()),this},set1f:function(g,m,x){return x===void 0&&(x=this.currentShader),x.set1f(g,m),this},set2f:function(g,m,x,y){return y===void 0&&(y=this.currentShader),y.set2f(g,m,x),this},set3f:function(g,m,x,y,T){return T===void 0&&(T=this.currentShader),T.set3f(g,m,x,y),this},set4f:function(g,m,x,y,T,C){return C===void 0&&(C=this.currentShader),C.set4f(g,m,x,y,T),this},set1fv:function(g,m,x){return x===void 0&&(x=this.currentShader),x.set1fv(g,m),this},set2fv:function(g,m,x){return x===void 0&&(x=this.currentShader),x.set2fv(g,m),this},set3fv:function(g,m,x){return x===void 0&&(x=this.currentShader),x.set3fv(g,m),this},set4fv:function(g,m,x){return x===void 0&&(x=this.currentShader),x.set4fv(g,m),this},set1iv:function(g,m,x){return x===void 0&&(x=this.currentShader),x.set1iv(g,m),this},set2iv:function(g,m,x){return x===void 0&&(x=this.currentShader),x.set2iv(g,m),this},set3iv:function(g,m,x){return x===void 0&&(x=this.currentShader),x.set3iv(g,m),this},set4iv:function(g,m,x){return x===void 0&&(x=this.currentShader),x.set4iv(g,m),this},set1i:function(g,m,x){return x===void 0&&(x=this.currentShader),x.set1i(g,m),this},set2i:function(g,m,x,y){return y===void 0&&(y=this.currentShader),y.set2i(g,m,x),this},set3i:function(g,m,x,y,T){return T===void 0&&(T=this.currentShader),T.set3i(g,m,x,y),this},set4i:function(g,m,x,y,T,C){return C===void 0&&(C=this.currentShader),C.set4i(g,m,x,y,T),this},setMatrix2fv:function(g,m,x,y){return y===void 0&&(y=this.currentShader),y.setMatrix2fv(g,m,x),this},setMatrix3fv:function(g,m,x,y){return y===void 0&&(y=this.currentShader),y.setMatrix3fv(g,m,x),this},setMatrix4fv:function(g,m,x,y){return y===void 0&&(y=this.currentShader),y.setMatrix4fv(g,m,x),this},destroy:function(){this.emit(a.DESTROY,this);var g,m=this.shaders;for(g=0;g<m.length;g++)m[g].destroy();var x=this.renderTargets;for(g=0;g<x.length;g++)x[g].destroy();this.gl.deleteBuffer(this.vertexBuffer);var y=this.renderer;return y.off(u.RESIZE,this.resize,this),y.off(u.PRE_RENDER,this.onPreRender,this),y.off(u.RENDER,this.onRender,this),y.off(u.POST_RENDER,this.onPostRender,this),this.removeAllListeners(),this.game=null,this.renderer=null,this.manager=null,this.gl=null,this.view=null,this.shaders=null,this.renderTargets=null,this.bytes=null,this.vertexViewF32=null,this.vertexViewU32=null,this.vertexData=null,this.vertexBuffer=null,this.currentShader=null,this.currentRenderTarget=null,this}});e.exports=p},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function n(I,G,Y){Y=Y||2;var V=G&&G.length,W=V?G[0]*Y:I.length,H=h(I,0,W,Y,!0),Z=[];if(!H||H.next===H.prev)return Z;var q,_,nt,rt,at,ct,ut;if(V&&(H=d(I,G,H,Y)),I.length>80*Y){q=nt=I[0],_=rt=I[1];for(var vt=Y;vt<W;vt+=Y)at=I[vt],ct=I[vt+1],at<q&&(q=at),ct<_&&(_=ct),at>nt&&(nt=at),ct>rt&&(rt=ct);ut=Math.max(nt-q,rt-_),ut=ut!==0?1/ut:0}return a(H,Z,Y,q,_,ut),Z}function h(I,G,Y,V,W){var H,Z;if(W===b(I,G,Y,V)>0)for(H=G;H<Y;H+=V)Z=X(H,I[H],I[H+1],Z);else for(H=Y-V;H>=G;H-=V)Z=X(H,I[H],I[H+1],Z);return Z&&O(Z,Z.next)&&(K(Z),Z=Z.next),Z}function r(I,G){if(!I)return I;G||(G=I);var Y=I,V;do if(V=!1,!Y.steiner&&(O(Y,Y.next)||M(Y.prev,Y,Y.next)===0)){if(K(Y),Y=G=Y.prev,Y===Y.next)break;V=!0}else Y=Y.next;while(V||Y!==G);return G}function a(I,G,Y,V,W,H,Z){if(!!I){!Z&&H&&x(I,V,W,H);for(var q=I,_,nt;I.prev!==I.next;){if(_=I.prev,nt=I.next,H?o(I,V,W,H):l(I)){G.push(_.i/Y),G.push(I.i/Y),G.push(nt.i/Y),K(I),I=nt.next,q=nt.next;continue}if(I=nt,I===q){Z?Z===1?(I=u(r(I),G,Y),a(I,G,Y,V,W,H,2)):Z===2&&v(I,G,Y,V,W,H):a(r(I),G,Y,V,W,H,1);break}}}}function l(I){var G=I.prev,Y=I,V=I.next;if(M(G,Y,V)>=0)return!1;for(var W=I.next.next;W!==I.prev;){if(S(G.x,G.y,Y.x,Y.y,V.x,V.y,W.x,W.y)&&M(W.prev,W,W.next)>=0)return!1;W=W.next}return!0}function o(I,G,Y,V){var W=I.prev,H=I,Z=I.next;if(M(W,H,Z)>=0)return!1;for(var q=W.x<H.x?W.x<Z.x?W.x:Z.x:H.x<Z.x?H.x:Z.x,_=W.y<H.y?W.y<Z.y?W.y:Z.y:H.y<Z.y?H.y:Z.y,nt=W.x>H.x?W.x>Z.x?W.x:Z.x:H.x>Z.x?H.x:Z.x,rt=W.y>H.y?W.y>Z.y?W.y:Z.y:H.y>Z.y?H.y:Z.y,at=T(q,_,G,Y,V),ct=T(nt,rt,G,Y,V),ut=I.prevZ,vt=I.nextZ;ut&&ut.z>=at&&vt&&vt.z<=ct;){if(ut!==I.prev&&ut!==I.next&&S(W.x,W.y,H.x,H.y,Z.x,Z.y,ut.x,ut.y)&&M(ut.prev,ut,ut.next)>=0||(ut=ut.prevZ,vt!==I.prev&&vt!==I.next&&S(W.x,W.y,H.x,H.y,Z.x,Z.y,vt.x,vt.y)&&M(vt.prev,vt,vt.next)>=0))return!1;vt=vt.nextZ}for(;ut&&ut.z>=at;){if(ut!==I.prev&&ut!==I.next&&S(W.x,W.y,H.x,H.y,Z.x,Z.y,ut.x,ut.y)&&M(ut.prev,ut,ut.next)>=0)return!1;ut=ut.prevZ}for(;vt&&vt.z<=ct;){if(vt!==I.prev&&vt!==I.next&&S(W.x,W.y,H.x,H.y,Z.x,Z.y,vt.x,vt.y)&&M(vt.prev,vt,vt.next)>=0)return!1;vt=vt.nextZ}return!0}function u(I,G,Y){var V=I;do{var W=V.prev,H=V.next.next;!O(W,H)&&L(W,V,V.next,H)&&B(W,H)&&B(H,W)&&(G.push(W.i/Y),G.push(V.i/Y),G.push(H.i/Y),K(V),K(V.next),V=I=H),V=V.next}while(V!==I);return r(V)}function v(I,G,Y,V,W,H){var Z=I;do{for(var q=Z.next.next;q!==Z.prev;){if(Z.i!==q.i&&E(Z,q)){var _=U(Z,q);Z=r(Z,Z.next),_=r(_,_.next),a(Z,G,Y,V,W,H),a(_,G,Y,V,W,H);return}q=q.next}Z=Z.next}while(Z!==I)}function d(I,G,Y,V){var W=[],H,Z,q,_,nt;for(H=0,Z=G.length;H<Z;H++)q=G[H]*V,_=H<Z-1?G[H+1]*V:I.length,nt=h(I,q,_,V,!1),nt===nt.next&&(nt.steiner=!0),W.push(C(nt));for(W.sort(c),H=0;H<W.length;H++)p(W[H],Y),Y=r(Y,Y.next);return Y}function c(I,G){return I.x-G.x}function p(I,G){if(G=g(I,G),G){var Y=U(G,I);r(G,G.next),r(Y,Y.next)}}function g(I,G){var Y=G,V=I.x,W=I.y,H=-1/0,Z;do{if(W<=Y.y&&W>=Y.next.y&&Y.next.y!==Y.y){var q=Y.x+(W-Y.y)*(Y.next.x-Y.x)/(Y.next.y-Y.y);if(q<=V&&q>H){if(H=q,q===V){if(W===Y.y)return Y;if(W===Y.next.y)return Y.next}Z=Y.x<Y.next.x?Y:Y.next}}Y=Y.next}while(Y!==G);if(!Z)return null;if(V===H)return Z;var _=Z,nt=Z.x,rt=Z.y,at=1/0,ct;Y=Z;do V>=Y.x&&Y.x>=nt&&V!==Y.x&&S(W<rt?V:H,W,nt,rt,W<rt?H:V,W,Y.x,Y.y)&&(ct=Math.abs(W-Y.y)/(V-Y.x),B(Y,I)&&(ct<at||ct===at&&(Y.x>Z.x||Y.x===Z.x&&m(Z,Y)))&&(Z=Y,at=ct)),Y=Y.next;while(Y!==_);return Z}function m(I,G){return M(I.prev,I,G.prev)<0&&M(G.next,I,I.next)<0}function x(I,G,Y,V){var W=I;do W.z===null&&(W.z=T(W.x,W.y,G,Y,V)),W.prevZ=W.prev,W.nextZ=W.next,W=W.next;while(W!==I);W.prevZ.nextZ=null,W.prevZ=null,y(W)}function y(I){var G,Y,V,W,H,Z,q,_,nt=1;do{for(Y=I,I=null,H=null,Z=0;Y;){for(Z++,V=Y,q=0,G=0;G<nt&&(q++,V=V.nextZ,!!V);G++);for(_=nt;q>0||_>0&&V;)q!==0&&(_===0||!V||Y.z<=V.z)?(W=Y,Y=Y.nextZ,q--):(W=V,V=V.nextZ,_--),H?H.nextZ=W:I=W,W.prevZ=H,H=W;Y=V}H.nextZ=null,nt*=2}while(Z>1);return I}function T(I,G,Y,V,W){return I=32767*(I-Y)*W,G=32767*(G-V)*W,I=(I|I<<8)&16711935,I=(I|I<<4)&252645135,I=(I|I<<2)&858993459,I=(I|I<<1)&1431655765,G=(G|G<<8)&16711935,G=(G|G<<4)&252645135,G=(G|G<<2)&858993459,G=(G|G<<1)&1431655765,I|G<<1}function C(I){var G=I,Y=I;do(G.x<Y.x||G.x===Y.x&&G.y<Y.y)&&(Y=G),G=G.next;while(G!==I);return Y}function S(I,G,Y,V,W,H,Z,q){return(W-Z)*(G-q)-(I-Z)*(H-q)>=0&&(I-Z)*(V-q)-(Y-Z)*(G-q)>=0&&(Y-Z)*(H-q)-(W-Z)*(V-q)>=0}function E(I,G){return I.next.i!==G.i&&I.prev.i!==G.i&&!D(I,G)&&(B(I,G)&&B(G,I)&&N(I,G)&&(M(I.prev,I,G.prev)||M(I,G.prev,G))||O(I,G)&&M(I.prev,I,I.next)>0&&M(G.prev,G,G.next)>0)}function M(I,G,Y){return(G.y-I.y)*(Y.x-G.x)-(G.x-I.x)*(Y.y-G.y)}function O(I,G){return I.x===G.x&&I.y===G.y}function L(I,G,Y,V){var W=F(M(I,G,Y)),H=F(M(I,G,V)),Z=F(M(Y,V,I)),q=F(M(Y,V,G));return!!(W!==H&&Z!==q||W===0&&R(I,Y,G)||H===0&&R(I,V,G)||Z===0&&R(Y,I,V)||q===0&&R(Y,G,V))}function R(I,G,Y){return G.x<=Math.max(I.x,Y.x)&&G.x>=Math.min(I.x,Y.x)&&G.y<=Math.max(I.y,Y.y)&&G.y>=Math.min(I.y,Y.y)}function F(I){return I>0?1:I<0?-1:0}function D(I,G){var Y=I;do{if(Y.i!==I.i&&Y.next.i!==I.i&&Y.i!==G.i&&Y.next.i!==G.i&&L(Y,Y.next,I,G))return!0;Y=Y.next}while(Y!==I);return!1}function B(I,G){return M(I.prev,I,I.next)<0?M(I,G,I.next)>=0&&M(I,I.prev,G)>=0:M(I,G,I.prev)<0||M(I,I.next,G)<0}function N(I,G){var Y=I,V=!1,W=(I.x+G.x)/2,H=(I.y+G.y)/2;do Y.y>H!=Y.next.y>H&&Y.next.y!==Y.y&&W<(Y.next.x-Y.x)*(H-Y.y)/(Y.next.y-Y.y)+Y.x&&(V=!V),Y=Y.next;while(Y!==I);return V}function U(I,G){var Y=new k(I.i,I.x,I.y),V=new k(G.i,G.x,G.y),W=I.next,H=G.prev;return I.next=G,G.prev=I,Y.next=W,W.prev=Y,V.next=Y,Y.prev=V,H.next=V,V.prev=H,V}function X(I,G,Y,V){var W=new k(I,G,Y);return V?(W.next=V.next,W.prev=V,V.next.prev=W,V.next=W):(W.prev=W,W.next=W),W}function K(I){I.next.prev=I.prev,I.prev.next=I.next,I.prevZ&&(I.prevZ.nextZ=I.nextZ),I.nextZ&&(I.nextZ.prevZ=I.prevZ)}function k(I,G,Y){this.i=I,this.x=G,this.y=Y,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}n.deviation=function(I,G,Y,V){var W=G&&G.length,H=W?G[0]*Y:I.length,Z=Math.abs(b(I,0,H,Y));if(W)for(var q=0,_=G.length;q<_;q++){var nt=G[q]*Y,rt=q<_-1?G[q+1]*Y:I.length;Z-=Math.abs(b(I,nt,rt,Y))}var at=0;for(q=0;q<V.length;q+=3){var ct=V[q]*Y,ut=V[q+1]*Y,vt=V[q+2]*Y;at+=Math.abs((I[ct]-I[vt])*(I[ut+1]-I[ct+1])-(I[ct]-I[ut])*(I[vt+1]-I[ct+1]))}return Z===0&&at===0?0:Math.abs((at-Z)/Z)};function b(I,G,Y,V){for(var W=0,H=G,Z=Y-V;H<Y;H+=V)W+=(I[Z]-I[H])*(I[H+1]+I[Z+1]),Z=H;return W}n.flatten=function(I){for(var G=I[0][0].length,Y={vertices:[],holes:[],dimensions:G},V=0,W=0;W<I.length;W++){for(var H=0;H<I[W].length;H++)for(var Z=0;Z<G;Z++)Y.vertices.push(I[W][H][Z]);W>0&&(V+=I[W-1].length,Y.holes.push(V))}return Y},e.exports=n},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r,a){var l=r||h.strokeColor,o=a||h.strokeAlpha,u=(l&16711680)>>>16,v=(l&65280)>>>8,d=l&255;n.strokeStyle="rgba("+u+","+v+","+d+","+o+")",n.lineWidth=h.lineWidth};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(21),r=i(23),a=i(8),l=i(2),o=i(6),u=i(7),v=new n({Extends:r,initialize:function(c,p,g,m,x){var y="json";if(u(p)){var T=p;p=l(T,"key"),g=l(T,"url"),m=l(T,"xhrSettings"),y=l(T,"extension",y),x=l(T,"dataKey",x)}var C={type:"json",cache:c.cacheManager.json,extension:y,responseType:"text",key:p,url:g,xhrSettings:m,config:x};r.call(this,c,C),u(g)&&(x?this.data=o(g,x):this.data=g,this.state=h.FILE_POPULATED)},onProcess:function(){if(this.state!==h.FILE_POPULATED){this.state=h.FILE_PROCESSING;try{var d=JSON.parse(this.xhrLoader.responseText)}catch(p){throw console.warn("Invalid JSON: "+this.key),this.onProcessError(),p}var c=this.config;typeof c=="string"?this.data=o(d,c,d):this.data=d}this.onProcessComplete()}});a.register("json",function(d,c,p,g){if(Array.isArray(d))for(var m=0;m<d.length;m++)this.addFile(new v(this,d[m]));else this.addFile(new v(this,d,c,g,p));return this}),e.exports=v},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={DYNAMIC_BODY:0,STATIC_BODY:1,GROUP:2,TILEMAPLAYER:3,FACING_NONE:10,FACING_UP:11,FACING_DOWN:12,FACING_LEFT:13,FACING_RIGHT:14};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(158),h=i(26),r=function(a,l,o,u,v){for(var d=null,c=null,p=null,g=null,m=h(a,l,o,u,null,v),x=0;x<m.length;x++){var y=m[x];y&&(y.collides?(d=n(y.x,y.y-1,!0,v),c=n(y.x,y.y+1,!0,v),p=n(y.x-1,y.y,!0,v),g=n(y.x+1,y.y,!0,v),y.faceTop=!(d&&d.collides),y.faceBottom=!(c&&c.collides),y.faceLeft=!(p&&p.collides),y.faceRight=!(g&&g.collides)):y.resetFaces())}};e.exports=r},function(e,f,i){var n={};e.exports=n;var h=i(83),r=i(32);(function(){n.create=function(a,l){for(var o=[],u=0;u<a.length;u++){var v=a[u],d={x:v.x,y:v.y,index:u,body:l,isInternal:!1,contact:null,offset:null};d.contact={vertex:d,normalImpulse:0,tangentImpulse:0},o.push(d)}return o},n.fromPath=function(a,l){var o=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,u=[];return a.replace(o,function(v,d,c){u.push({x:parseFloat(d),y:parseFloat(c)})}),n.create(u,l)},n.centre=function(a){for(var l=n.area(a,!0),o={x:0,y:0},u,v,d,c=0;c<a.length;c++)d=(c+1)%a.length,u=h.cross(a[c],a[d]),v=h.mult(h.add(a[c],a[d]),u),o=h.add(o,v);return h.div(o,6*l)},n.mean=function(a){for(var l={x:0,y:0},o=0;o<a.length;o++)l.x+=a[o].x,l.y+=a[o].y;return h.div(l,a.length)},n.area=function(a,l){for(var o=0,u=a.length-1,v=0;v<a.length;v++)o+=(a[u].x-a[v].x)*(a[u].y+a[v].y),u=v;return l?o/2:Math.abs(o)/2},n.inertia=function(a,l){for(var o=0,u=0,v=a,d,c,p=0;p<v.length;p++)c=(p+1)%v.length,d=Math.abs(h.cross(v[c],v[p])),o+=d*(h.dot(v[c],v[c])+h.dot(v[c],v[p])+h.dot(v[p],v[p])),u+=d;return l/6*(o/u)},n.translate=function(a,l,o){var u;if(o)for(u=0;u<a.length;u++)a[u].x+=l.x*o,a[u].y+=l.y*o;else for(u=0;u<a.length;u++)a[u].x+=l.x,a[u].y+=l.y;return a},n.rotate=function(a,l,o){if(l!==0){for(var u=Math.cos(l),v=Math.sin(l),d=0;d<a.length;d++){var c=a[d],p=c.x-o.x,g=c.y-o.y;c.x=o.x+(p*u-g*v),c.y=o.y+(p*v+g*u)}return a}},n.contains=function(a,l){for(var o=0;o<a.length;o++){var u=a[o],v=a[(o+1)%a.length];if((l.x-u.x)*(v.y-u.y)+(l.y-u.y)*(u.x-v.x)>0)return!1}return!0},n.scale=function(a,l,o,u){if(l===1&&o===1)return a;u=u||n.centre(a);for(var v,d,c=0;c<a.length;c++)v=a[c],d=h.sub(v,u),a[c].x=u.x+d.x*l,a[c].y=u.y+d.y*o;return a},n.chamfer=function(a,l,o,u,v){typeof l=="number"?l=[l]:l=l||[8],o=typeof o!="undefined"?o:-1,u=u||2,v=v||14;for(var d=[],c=0;c<a.length;c++){var p=a[c-1>=0?c-1:a.length-1],g=a[c],m=a[(c+1)%a.length],x=l[c<l.length?c:l.length-1];if(x===0){d.push(g);continue}var y=h.normalise({x:g.y-p.y,y:p.x-g.x}),T=h.normalise({x:m.y-g.y,y:g.x-m.x}),C=Math.sqrt(2*Math.pow(x,2)),S=h.mult(r.clone(y),x),E=h.normalise(h.mult(h.add(y,T),.5)),M=h.sub(g,h.mult(E,C)),O=o;o===-1&&(O=Math.pow(x,.32)*1.75),O=r.clamp(O,u,v),O%2===1&&(O+=1);for(var L=Math.acos(h.dot(y,T)),R=L/O,F=0;F<O;F++)d.push(h.add(h.rotate(S,R*F),M))}return d},n.clockwiseSort=function(a){var l=n.mean(a);return a.sort(function(o,u){return h.angle(l,o)-h.angle(l,u)}),a},n.isConvex=function(a){var l=0,o=a.length,u,v,d,c;if(o<3)return null;for(u=0;u<o;u++)if(v=(u+1)%o,d=(u+2)%o,c=(a[v].x-a[u].x)*(a[d].y-a[v].y),c-=(a[v].y-a[u].y)*(a[d].x-a[v].x),c<0?l|=1:c>0&&(l|=2),l===3)return!1;return l!==0?!0:null},n.hull=function(a){var l=[],o=[],u,v;for(a=a.slice(0),a.sort(function(d,c){var p=d.x-c.x;return p!==0?p:d.y-c.y}),v=0;v<a.length;v+=1){for(u=a[v];o.length>=2&&h.cross3(o[o.length-2],o[o.length-1],u)<=0;)o.pop();o.push(u)}for(v=a.length-1;v>=0;v-=1){for(u=a[v];l.length>=2&&h.cross3(l[l.length-2],l[l.length-1],u)<=0;)l.pop();l.push(u)}return l.pop(),o.pop(),l.concat(o)}})()},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(66),r=i(300),a=i(301),l=i(56),o=i(170),u=new n({initialize:function(d,c,p){d===void 0&&(d=0),c===void 0&&(c=0),p===void 0&&(p=0),this.type=l.CIRCLE,this.x=d,this.y=c,this._radius=p,this._diameter=p*2},contains:function(v,d){return h(this,v,d)},getPoint:function(v,d){return r(this,v,d)},getPoints:function(v,d,c){return a(this,v,d,c)},getRandomPoint:function(v){return o(this,v)},setTo:function(v,d,c){return this.x=v,this.y=d,this._radius=c,this._diameter=c*2,this},setEmpty:function(){return this._radius=0,this._diameter=0,this},setPosition:function(v,d){return d===void 0&&(d=v),this.x=v,this.y=d,this},isEmpty:function(){return this._radius<=0},radius:{get:function(){return this._radius},set:function(v){this._radius=v,this._diameter=v*2}},diameter:{get:function(){return this._diameter},set:function(v){this._diameter=v,this._radius=v*.5}},left:{get:function(){return this.x-this._radius},set:function(v){this.x=v+this._radius}},right:{get:function(){return this.x+this._radius},set:function(v){this.x=v-this._radius}},top:{get:function(){return this.y-this._radius},set:function(v){this.y=v+this._radius}},bottom:{get:function(){return this.y+this._radius},set:function(v){this.y=v-this._radius}}});e.exports=u},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r){if(n.radius>0&&h>=n.left&&h<=n.right&&r>=n.top&&r<=n.bottom){var a=(n.x-h)*(n.x-h),l=(n.y-r)*(n.y-r);return a+l<=n.radius*n.radius}else return!1};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return Math.sqrt((n.x2-n.x1)*(n.x2-n.x1)+(n.y2-n.y1)*(n.y2-n.y1))};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r){var a=r-h;return h+((n-h)%a+a)%a};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(39),r=1e-6,a=new n({initialize:function(p){this.val=new Float32Array(16),p?this.copy(p):this.identity()},clone:function(){return new a(this)},set:function(c){return this.copy(c)},setValues:function(c,p,g,m,x,y,T,C,S,E,M,O,L,R,F,D){var B=this.val;return B[0]=c,B[1]=p,B[2]=g,B[3]=m,B[4]=x,B[5]=y,B[6]=T,B[7]=C,B[8]=S,B[9]=E,B[10]=M,B[11]=O,B[12]=L,B[13]=R,B[14]=F,B[15]=D,this},copy:function(c){var p=c.val;return this.setValues(p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],p[8],p[9],p[10],p[11],p[12],p[13],p[14],p[15])},fromArray:function(c){return this.setValues(c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],c[8],c[9],c[10],c[11],c[12],c[13],c[14],c[15])},zero:function(){return this.setValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},transform:function(c,p,g){var m=l.fromQuat(g),x=m.val,y=p.x,T=p.y,C=p.z;return this.setValues(x[0]*y,x[1]*y,x[2]*y,0,x[4]*T,x[5]*T,x[6]*T,0,x[8]*C,x[9]*C,x[10]*C,0,c.x,c.y,c.z,1)},xyz:function(c,p,g){this.identity();var m=this.val;return m[12]=c,m[13]=p,m[14]=g,this},scaling:function(c,p,g){this.zero();var m=this.val;return m[0]=c,m[5]=p,m[10]=g,m[15]=1,this},identity:function(){return this.setValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transpose:function(){var c=this.val,p=c[1],g=c[2],m=c[3],x=c[6],y=c[7],T=c[11];return c[1]=c[4],c[2]=c[8],c[3]=c[12],c[4]=p,c[6]=c[9],c[7]=c[13],c[8]=g,c[9]=x,c[11]=c[14],c[12]=m,c[13]=y,c[14]=T,this},getInverse:function(c){return this.copy(c),this.invert()},invert:function(){var c=this.val,p=c[0],g=c[1],m=c[2],x=c[3],y=c[4],T=c[5],C=c[6],S=c[7],E=c[8],M=c[9],O=c[10],L=c[11],R=c[12],F=c[13],D=c[14],B=c[15],N=p*T-g*y,U=p*C-m*y,X=p*S-x*y,K=g*C-m*T,k=g*S-x*T,b=m*S-x*C,I=E*F-M*R,G=E*D-O*R,Y=E*B-L*R,V=M*D-O*F,W=M*B-L*F,H=O*B-L*D,Z=N*H-U*W+X*V+K*Y-k*G+b*I;return Z?(Z=1/Z,this.setValues((T*H-C*W+S*V)*Z,(m*W-g*H-x*V)*Z,(F*b-D*k+B*K)*Z,(O*k-M*b-L*K)*Z,(C*Y-y*H-S*G)*Z,(p*H-m*Y+x*G)*Z,(D*X-R*b-B*U)*Z,(E*b-O*X+L*U)*Z,(y*W-T*Y+S*I)*Z,(g*Y-p*W-x*I)*Z,(R*k-F*X+B*N)*Z,(M*X-E*k-L*N)*Z,(T*G-y*V-C*I)*Z,(p*V-g*G+m*I)*Z,(F*U-R*K-D*N)*Z,(E*K-M*U+O*N)*Z)):this},adjoint:function(){var c=this.val,p=c[0],g=c[1],m=c[2],x=c[3],y=c[4],T=c[5],C=c[6],S=c[7],E=c[8],M=c[9],O=c[10],L=c[11],R=c[12],F=c[13],D=c[14],B=c[15];return this.setValues(T*(O*B-L*D)-M*(C*B-S*D)+F*(C*L-S*O),-(g*(O*B-L*D)-M*(m*B-x*D)+F*(m*L-x*O)),g*(C*B-S*D)-T*(m*B-x*D)+F*(m*S-x*C),-(g*(C*L-S*O)-T*(m*L-x*O)+M*(m*S-x*C)),-(y*(O*B-L*D)-E*(C*B-S*D)+R*(C*L-S*O)),p*(O*B-L*D)-E*(m*B-x*D)+R*(m*L-x*O),-(p*(C*B-S*D)-y*(m*B-x*D)+R*(m*S-x*C)),p*(C*L-S*O)-y*(m*L-x*O)+E*(m*S-x*C),y*(M*B-L*F)-E*(T*B-S*F)+R*(T*L-S*M),-(p*(M*B-L*F)-E*(g*B-x*F)+R*(g*L-x*M)),p*(T*B-S*F)-y*(g*B-x*F)+R*(g*S-x*T),-(p*(T*L-S*M)-y*(g*L-x*M)+E*(g*S-x*T)),-(y*(M*D-O*F)-E*(T*D-C*F)+R*(T*O-C*M)),p*(M*D-O*F)-E*(g*D-m*F)+R*(g*O-m*M),-(p*(T*D-C*F)-y*(g*D-m*F)+R*(g*C-m*T)),p*(T*O-C*M)-y*(g*O-m*M)+E*(g*C-m*T))},determinant:function(){var c=this.val,p=c[0],g=c[1],m=c[2],x=c[3],y=c[4],T=c[5],C=c[6],S=c[7],E=c[8],M=c[9],O=c[10],L=c[11],R=c[12],F=c[13],D=c[14],B=c[15],N=p*T-g*y,U=p*C-m*y,X=p*S-x*y,K=g*C-m*T,k=g*S-x*T,b=m*S-x*C,I=E*F-M*R,G=E*D-O*R,Y=E*B-L*R,V=M*D-O*F,W=M*B-L*F,H=O*B-L*D;return N*H-U*W+X*V+K*Y-k*G+b*I},multiply:function(c){var p=this.val,g=p[0],m=p[1],x=p[2],y=p[3],T=p[4],C=p[5],S=p[6],E=p[7],M=p[8],O=p[9],L=p[10],R=p[11],F=p[12],D=p[13],B=p[14],N=p[15],U=c.val,X=U[0],K=U[1],k=U[2],b=U[3];return p[0]=X*g+K*T+k*M+b*F,p[1]=X*m+K*C+k*O+b*D,p[2]=X*x+K*S+k*L+b*B,p[3]=X*y+K*E+k*R+b*N,X=U[4],K=U[5],k=U[6],b=U[7],p[4]=X*g+K*T+k*M+b*F,p[5]=X*m+K*C+k*O+b*D,p[6]=X*x+K*S+k*L+b*B,p[7]=X*y+K*E+k*R+b*N,X=U[8],K=U[9],k=U[10],b=U[11],p[8]=X*g+K*T+k*M+b*F,p[9]=X*m+K*C+k*O+b*D,p[10]=X*x+K*S+k*L+b*B,p[11]=X*y+K*E+k*R+b*N,X=U[12],K=U[13],k=U[14],b=U[15],p[12]=X*g+K*T+k*M+b*F,p[13]=X*m+K*C+k*O+b*D,p[14]=X*x+K*S+k*L+b*B,p[15]=X*y+K*E+k*R+b*N,this},multiplyLocal:function(c){var p=this.val,g=c.val;return this.setValues(p[0]*g[0]+p[1]*g[4]+p[2]*g[8]+p[3]*g[12],p[0]*g[1]+p[1]*g[5]+p[2]*g[9]+p[3]*g[13],p[0]*g[2]+p[1]*g[6]+p[2]*g[10]+p[3]*g[14],p[0]*g[3]+p[1]*g[7]+p[2]*g[11]+p[3]*g[15],p[4]*g[0]+p[5]*g[4]+p[6]*g[8]+p[7]*g[12],p[4]*g[1]+p[5]*g[5]+p[6]*g[9]+p[7]*g[13],p[4]*g[2]+p[5]*g[6]+p[6]*g[10]+p[7]*g[14],p[4]*g[3]+p[5]*g[7]+p[6]*g[11]+p[7]*g[15],p[8]*g[0]+p[9]*g[4]+p[10]*g[8]+p[11]*g[12],p[8]*g[1]+p[9]*g[5]+p[10]*g[9]+p[11]*g[13],p[8]*g[2]+p[9]*g[6]+p[10]*g[10]+p[11]*g[14],p[8]*g[3]+p[9]*g[7]+p[10]*g[11]+p[11]*g[15],p[12]*g[0]+p[13]*g[4]+p[14]*g[8]+p[15]*g[12],p[12]*g[1]+p[13]*g[5]+p[14]*g[9]+p[15]*g[13],p[12]*g[2]+p[13]*g[6]+p[14]*g[10]+p[15]*g[14],p[12]*g[3]+p[13]*g[7]+p[14]*g[11]+p[15]*g[15])},premultiply:function(c){return this.multiplyMatrices(c,this)},multiplyMatrices:function(c,p){var g=c.val,m=p.val,x=g[0],y=g[4],T=g[8],C=g[12],S=g[1],E=g[5],M=g[9],O=g[13],L=g[2],R=g[6],F=g[10],D=g[14],B=g[3],N=g[7],U=g[11],X=g[15],K=m[0],k=m[4],b=m[8],I=m[12],G=m[1],Y=m[5],V=m[9],W=m[13],H=m[2],Z=m[6],q=m[10],_=m[14],nt=m[3],rt=m[7],at=m[11],ct=m[15];return this.setValues(x*K+y*G+T*H+C*nt,S*K+E*G+M*H+O*nt,L*K+R*G+F*H+D*nt,B*K+N*G+U*H+X*nt,x*k+y*Y+T*Z+C*rt,S*k+E*Y+M*Z+O*rt,L*k+R*Y+F*Z+D*rt,B*k+N*Y+U*Z+X*rt,x*b+y*V+T*q+C*at,S*b+E*V+M*q+O*at,L*b+R*V+F*q+D*at,B*b+N*V+U*q+X*at,x*I+y*W+T*_+C*ct,S*I+E*W+M*_+O*ct,L*I+R*W+F*_+D*ct,B*I+N*W+U*_+X*ct)},translate:function(c){return this.translateXYZ(c.x,c.y,c.z)},translateXYZ:function(c,p,g){var m=this.val;return m[12]=m[0]*c+m[4]*p+m[8]*g+m[12],m[13]=m[1]*c+m[5]*p+m[9]*g+m[13],m[14]=m[2]*c+m[6]*p+m[10]*g+m[14],m[15]=m[3]*c+m[7]*p+m[11]*g+m[15],this},scale:function(c){return this.scaleXYZ(c.x,c.y,c.z)},scaleXYZ:function(c,p,g){var m=this.val;return m[0]=m[0]*c,m[1]=m[1]*c,m[2]=m[2]*c,m[3]=m[3]*c,m[4]=m[4]*p,m[5]=m[5]*p,m[6]=m[6]*p,m[7]=m[7]*p,m[8]=m[8]*g,m[9]=m[9]*g,m[10]=m[10]*g,m[11]=m[11]*g,this},makeRotationAxis:function(c,p){var g=Math.cos(p),m=Math.sin(p),x=1-g,y=c.x,T=c.y,C=c.z,S=x*y,E=x*T;return this.setValues(S*y+g,S*T-m*C,S*C+m*T,0,S*T+m*C,E*T+g,E*C-m*y,0,S*C-m*T,E*C+m*y,x*C*C+g,0,0,0,0,1)},rotate:function(c,p){var g=this.val,m=p.x,x=p.y,y=p.z,T=Math.sqrt(m*m+x*x+y*y);if(Math.abs(T)<r)return this;T=1/T,m*=T,x*=T,y*=T;var C=Math.sin(c),S=Math.cos(c),E=1-S,M=g[0],O=g[1],L=g[2],R=g[3],F=g[4],D=g[5],B=g[6],N=g[7],U=g[8],X=g[9],K=g[10],k=g[11],b=g[12],I=g[13],G=g[14],Y=g[15],V=m*m*E+S,W=x*m*E+y*C,H=y*m*E-x*C,Z=m*x*E-y*C,q=x*x*E+S,_=y*x*E+m*C,nt=m*y*E+x*C,rt=x*y*E-m*C,at=y*y*E+S;return this.setValues(M*V+F*W+U*H,O*V+D*W+X*H,L*V+B*W+K*H,R*V+N*W+k*H,M*Z+F*q+U*_,O*Z+D*q+X*_,L*Z+B*q+K*_,R*Z+N*q+k*_,M*nt+F*rt+U*at,O*nt+D*rt+X*at,L*nt+B*rt+K*at,R*nt+N*rt+k*at,b,I,G,Y)},rotateX:function(c){var p=this.val,g=Math.sin(c),m=Math.cos(c),x=p[4],y=p[5],T=p[6],C=p[7],S=p[8],E=p[9],M=p[10],O=p[11];return p[4]=x*m+S*g,p[5]=y*m+E*g,p[6]=T*m+M*g,p[7]=C*m+O*g,p[8]=S*m-x*g,p[9]=E*m-y*g,p[10]=M*m-T*g,p[11]=O*m-C*g,this},rotateY:function(c){var p=this.val,g=Math.sin(c),m=Math.cos(c),x=p[0],y=p[1],T=p[2],C=p[3],S=p[8],E=p[9],M=p[10],O=p[11];return p[0]=x*m-S*g,p[1]=y*m-E*g,p[2]=T*m-M*g,p[3]=C*m-O*g,p[8]=x*g+S*m,p[9]=y*g+E*m,p[10]=T*g+M*m,p[11]=C*g+O*m,this},rotateZ:function(c){var p=this.val,g=Math.sin(c),m=Math.cos(c),x=p[0],y=p[1],T=p[2],C=p[3],S=p[4],E=p[5],M=p[6],O=p[7];return p[0]=x*m+S*g,p[1]=y*m+E*g,p[2]=T*m+M*g,p[3]=C*m+O*g,p[4]=S*m-x*g,p[5]=E*m-y*g,p[6]=M*m-T*g,p[7]=O*m-C*g,this},fromRotationTranslation:function(c,p){var g=c.x,m=c.y,x=c.z,y=c.w,T=g+g,C=m+m,S=x+x,E=g*T,M=g*C,O=g*S,L=m*C,R=m*S,F=x*S,D=y*T,B=y*C,N=y*S;return this.setValues(1-(L+F),M+N,O-B,0,M-N,1-(E+F),R+D,0,O+B,R-D,1-(E+L),0,p.x,p.y,p.z,1)},fromQuat:function(c){var p=c.x,g=c.y,m=c.z,x=c.w,y=p+p,T=g+g,C=m+m,S=p*y,E=p*T,M=p*C,O=g*T,L=g*C,R=m*C,F=x*y,D=x*T,B=x*C;return this.setValues(1-(O+R),E+B,M-D,0,E-B,1-(S+R),L+F,0,M+D,L-F,1-(S+O),0,0,0,0,1)},frustum:function(c,p,g,m,x,y){var T=1/(p-c),C=1/(m-g),S=1/(x-y);return this.setValues(x*2*T,0,0,0,0,x*2*C,0,0,(p+c)*T,(m+g)*C,(y+x)*S,-1,0,0,y*x*2*S,0)},perspective:function(c,p,g,m){var x=1/Math.tan(c/2),y=1/(g-m);return this.setValues(x/p,0,0,0,0,x,0,0,0,0,(m+g)*y,-1,0,0,2*m*g*y,0)},perspectiveLH:function(c,p,g,m){return this.setValues(2*g/c,0,0,0,0,2*g/p,0,0,0,0,-m/(g-m),1,0,0,g*m/(g-m),0)},ortho:function(c,p,g,m,x,y){var T=c-p,C=g-m,S=x-y;return T=T===0?T:1/T,C=C===0?C:1/C,S=S===0?S:1/S,this.setValues(-2*T,0,0,0,0,-2*C,0,0,0,0,2*S,0,(c+p)*T,(m+g)*C,(y+x)*S,1)},lookAtRH:function(c,p,g){var m=this.val;return d.subVectors(c,p),d.getLengthSquared()===0&&(d.z=1),d.normalize(),u.crossVectors(g,d),u.getLengthSquared()===0&&(Math.abs(g.z)===1?d.x+=1e-4:d.z+=1e-4,d.normalize(),u.crossVectors(g,d)),u.normalize(),v.crossVectors(d,u),m[0]=u.x,m[1]=u.y,m[2]=u.z,m[4]=v.x,m[5]=v.y,m[6]=v.z,m[8]=d.x,m[9]=d.y,m[10]=d.z,this},lookAt:function(c,p,g){var m=c.x,x=c.y,y=c.z,T=g.x,C=g.y,S=g.z,E=p.x,M=p.y,O=p.z;if(Math.abs(m-E)<r&&Math.abs(x-M)<r&&Math.abs(y-O)<r)return this.identity();var L=m-E,R=x-M,F=y-O,D=1/Math.sqrt(L*L+R*R+F*F);L*=D,R*=D,F*=D;var B=C*F-S*R,N=S*L-T*F,U=T*R-C*L;D=Math.sqrt(B*B+N*N+U*U),D?(D=1/D,B*=D,N*=D,U*=D):(B=0,N=0,U=0);var X=R*U-F*N,K=F*B-L*U,k=L*N-R*B;return D=Math.sqrt(X*X+K*K+k*k),D?(D=1/D,X*=D,K*=D,k*=D):(X=0,K=0,k=0),this.setValues(B,X,L,0,N,K,R,0,U,k,F,0,-(B*m+N*x+U*y),-(X*m+K*x+k*y),-(L*m+R*x+F*y),1)},yawPitchRoll:function(c,p,g){this.zero(),l.zero(),o.zero();var m=this.val,x=l.val,y=o.val,T=Math.sin(g),C=Math.cos(g);return m[10]=1,m[15]=1,m[0]=C,m[1]=T,m[4]=-T,m[5]=C,T=Math.sin(p),C=Math.cos(p),x[0]=1,x[15]=1,x[5]=C,x[10]=C,x[9]=-T,x[6]=T,T=Math.sin(c),C=Math.cos(c),y[5]=1,y[15]=1,y[0]=C,y[2]=-T,y[8]=T,y[10]=C,this.multiplyLocal(l),this.multiplyLocal(o),this},setWorldMatrix:function(c,p,g,m,x){return this.yawPitchRoll(c.y,c.x,c.z),l.scaling(g.x,g.y,g.z),o.xyz(p.x,p.y,p.z),this.multiplyLocal(l),this.multiplyLocal(o),m&&this.multiplyLocal(m),x&&this.multiplyLocal(x),this},multiplyToMat4:function(c,p){var g=this.val,m=c.val,x=g[0],y=g[1],T=g[2],C=g[3],S=g[4],E=g[5],M=g[6],O=g[7],L=g[8],R=g[9],F=g[10],D=g[11],B=g[12],N=g[13],U=g[14],X=g[15],K=m[0],k=m[1],b=m[2],I=m[3],G=m[4],Y=m[5],V=m[6],W=m[7],H=m[8],Z=m[9],q=m[10],_=m[11],nt=m[12],rt=m[13],at=m[14],ct=m[15];return p.setValues(K*x+k*S+b*L+I*B,k*y+k*E+b*R+I*N,b*T+k*M+b*F+I*U,I*C+k*O+b*D+I*X,G*x+Y*S+V*L+W*B,G*y+Y*E+V*R+W*N,G*T+Y*M+V*F+W*U,G*C+Y*O+V*D+W*X,H*x+Z*S+q*L+_*B,H*y+Z*E+q*R+_*N,H*T+Z*M+q*F+_*U,H*C+Z*O+q*D+_*X,nt*x+rt*S+at*L+ct*B,nt*y+rt*E+at*R+ct*N,nt*T+rt*M+at*F+ct*U,nt*C+rt*O+at*D+ct*X)},fromRotationXYTranslation:function(c,p,g){var m=p.x,x=p.y,y=p.z,T=Math.sin(c.x),C=Math.cos(c.x),S=Math.sin(c.y),E=Math.cos(c.y),M=m,O=x,L=y,R=-T,F=0-R*S,D=0-C*S,B=R*E,N=C*E;return g||(M=E*m+S*y,O=F*m+C*x+B*y,L=D*m+T*x+N*y),this.setValues(E,F,D,0,0,C,T,0,S,B,N,0,M,O,L,1)},getMaxScaleOnAxis:function(){var c=this.val,p=c[0]*c[0]+c[1]*c[1]+c[2]*c[2],g=c[4]*c[4]+c[5]*c[5]+c[6]*c[6],m=c[8]*c[8]+c[9]*c[9]+c[10]*c[10];return Math.sqrt(Math.max(p,g,m))}}),l=new a,o=new a,u=new h,v=new h,d=new h;e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={COMPLETE:i(987),DECODED:i(988),DECODED_ALL:i(989),DESTROY:i(990),DETUNE:i(991),GLOBAL_DETUNE:i(992),GLOBAL_MUTE:i(993),GLOBAL_RATE:i(994),GLOBAL_VOLUME:i(995),LOOP:i(996),LOOPED:i(997),MUTE:i(998),PAN:i(999),PAUSE_ALL:i(1e3),PAUSE:i(1001),PLAY:i(1002),RATE:i(1003),RESUME_ALL:i(1004),RESUME:i(1005),SEEK:i(1006),STOP_ALL:i(1007),STOP:i(1008),UNLOCKED:i(1009),VOLUME:i(1010)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(21),r=i(23),a=i(8),l=i(2),o=i(7),u=new n({Extends:r,initialize:function v(d,c,p,g,m){var x="png",y;if(o(c)){var T=c;c=l(T,"key"),p=l(T,"url"),y=l(T,"normalMap"),g=l(T,"xhrSettings"),x=l(T,"extension",x),m=l(T,"frameConfig")}Array.isArray(p)&&(y=p[1],p=p[0]);var C={type:"image",cache:d.textureManager,extension:x,responseType:"blob",key:c,url:p,xhrSettings:g,config:m};if(r.call(this,d,C),y){var S=new v(d,this.key,y,g,m);S.type="normalMap",this.setLink(S),d.addFile(S)}},onProcess:function(){this.state=h.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var v=this;this.data.onload=function(){r.revokeObjectURL(v.data),v.onProcessComplete()},this.data.onerror=function(){r.revokeObjectURL(v.data),v.onProcessError()},r.createObjectURL(this.data,this.xhrLoader.response,"image/png")},addToCache:function(){var v,d=this.linkFile;d&&d.state===h.FILE_COMPLETE?(this.type==="image"?v=this.cache.addImage(this.key,this.data,d.data):v=this.cache.addImage(d.key,d.data,this.data),this.pendingDestroy(v),d.pendingDestroy(v)):d||(v=this.cache.addImage(this.key,this.data),this.pendingDestroy(v))}});a.register("image",function(v,d,c){if(Array.isArray(v))for(var p=0;p<v.length;p++)this.addFile(new u(this,v[p]));else this.addFile(new u(this,v,d,c));return this}),e.exports=u},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){h?n.setCollision(!0,!0,!0,!0,!1):n.resetCollision(!1)};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(164),h=i(0),r=i(11),a=i(15),l=i(1065),o=new h({Extends:a,Mixins:[r.Alpha,r.BlendMode,r.Depth,r.Flip,r.GetBounds,r.Mask,r.Origin,r.Pipeline,r.ScrollFactor,r.Size,r.TextureCrop,r.Tint,r.Transform,r.Visible,l],initialize:function(v,d,c,p,g){a.call(this,v,"Sprite"),this._crop=this.resetCropObject(),this.anims=new n(this),this.setTexture(p,g),this.setPosition(d,c),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(u,v){this.anims.update(u,v)},play:function(u,v){return this.anims.play(u,v)},playReverse:function(u,v){return this.anims.playReverse(u,v)},playAfterDelay:function(u,v){return this.anims.playAfterDelay(u,v)},playAfterRepeat:function(u,v){return this.anims.playAfterRepeat(u,v)},chain:function(u){return this.anims.chain(u)},stop:function(){return this.anims.stop()},stopAfterDelay:function(u){return this.anims.stopAfterDelay(u)},stopAfterRepeat:function(u){return this.anims.stopAfterRepeat(u)},stopOnFrame:function(u){return this.anims.stopOnFrame(u)},toJSON:function(){return r.ToJSON(this)},preDestroy:function(){this.anims.destroy(),this.anims=void 0}});e.exports=o},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){if(!(h>=n.length)){for(var r=n.length-1,a=n[h],l=h;l<r;l++)n[l]=n[l+1];return n.length=r,a}};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ADDED_TO_SCENE:i(643),DESTROY:i(644),REMOVED_FROM_SCENE:i(645),VIDEO_COMPLETE:i(646),VIDEO_CREATED:i(647),VIDEO_ERROR:i(648),VIDEO_LOOP:i(649),VIDEO_PLAY:i(650),VIDEO_SEEKED:i(651),VIDEO_SEEKING:i(652),VIDEO_STOP:i(653),VIDEO_TIMEOUT:i(654),VIDEO_UNLOCKED:i(655)}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r,a){return r===void 0&&(r=0),h===0?n:(n-=r,n=h*Math.floor(n/h),a?(r+n)/h:r+n)};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){var h={};for(var r in n)Array.isArray(n[r])?h[r]=n[r].slice(0):h[r]=n[r];return h};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r,a){var l=n.length;if(h<0||h>l||h>=r||r>l||h+r>l){if(a)throw new Error("Range Error: Values outside acceptable range");return!1}else return!0};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Angry Bytes (and contributors)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function i(a,l){return String(a).localeCompare(l)}function n(a,l){var o=a.length;if(o<=1)return a;for(var u=new Array(o),v=1;v<o;v*=2){h(a,l,v,u);var d=a;a=u,u=d}return a}function h(a,l,o,u){var v=a.length,d=0,c=o*2,p,g,m,x,y;for(p=0;p<v;p+=c)for(g=p+o,m=g+o,g>v&&(g=v),m>v&&(m=v),x=p,y=g;;)if(x<g&&y<m)l(a[x],a[y])<=0?u[d++]=a[x++]:u[d++]=a[y++];else if(x<g)u[d++]=a[x++];else if(y<m)u[d++]=a[y++];else break}var r=function(a,l){l===void 0&&(l=i);var o=n(a,l);return o!==a&&h(o,null,a.length,a),a};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(134),h=i(205),r=function(a,l){var o=n.Power0;if(typeof a=="string")if(n.hasOwnProperty(a))o=n[a];else{var u="";a.indexOf(".")&&(u=a.substr(a.indexOf(".")+1),u.toLowerCase()==="in"?u="easeIn":u.toLowerCase()==="out"?u="easeOut":u.toLowerCase()==="inout"&&(u="easeInOut")),a=h(a.substr(0,a.indexOf(".")+1)+u),n.hasOwnProperty(a)&&(o=n[a])}else typeof a=="function"?o=a:Array.isArray(a)&&a.length;if(!l)return o;var v=l.slice(0);return v.unshift(0),function(d){return v[0]=d,o.apply(this,v)}};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(12),h=function(r,a,l,o,u){var v=r.strokeTint,d=n.getTintAppendFloatAlpha(a.strokeColor,a.strokeAlpha*l);v.TL=d,v.TR=d,v.BL=d,v.BR=d;var c=a.pathData,p=c.length-1,g=a.lineWidth,m=g/2,x=c[0]-o,y=c[1]-u;a.closePath||(p-=2);for(var T=2;T<p;T+=2){var C=c[T]-o,S=c[T+1]-u;r.batchLine(x,y,C,S,m,m,g,T-2,a.closePath?T===p-1:!1),x=C,y=S}};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(115),r=i(476),a=i(477),l=i(56),o=i(47),u=i(181),v=new n({initialize:function(c,p,g,m,x,y){c===void 0&&(c=0),p===void 0&&(p=0),g===void 0&&(g=0),m===void 0&&(m=0),x===void 0&&(x=0),y===void 0&&(y=0),this.type=l.TRIANGLE,this.x1=c,this.y1=p,this.x2=g,this.y2=m,this.x3=x,this.y3=y},contains:function(d,c){return h(this,d,c)},getPoint:function(d,c){return r(this,d,c)},getPoints:function(d,c,p){return a(this,d,c,p)},getRandomPoint:function(d){return u(this,d)},setTo:function(d,c,p,g,m,x){return d===void 0&&(d=0),c===void 0&&(c=0),p===void 0&&(p=0),g===void 0&&(g=0),m===void 0&&(m=0),x===void 0&&(x=0),this.x1=d,this.y1=c,this.x2=p,this.y2=g,this.x3=m,this.y3=x,this},getLineA:function(d){return d===void 0&&(d=new o),d.setTo(this.x1,this.y1,this.x2,this.y2),d},getLineB:function(d){return d===void 0&&(d=new o),d.setTo(this.x2,this.y2,this.x3,this.y3),d},getLineC:function(d){return d===void 0&&(d=new o),d.setTo(this.x3,this.y3,this.x1,this.y1),d},left:{get:function(){return Math.min(this.x1,this.x2,this.x3)},set:function(d){var c=0;this.x1<=this.x2&&this.x1<=this.x3?c=this.x1-d:this.x2<=this.x1&&this.x2<=this.x3?c=this.x2-d:c=this.x3-d,this.x1-=c,this.x2-=c,this.x3-=c}},right:{get:function(){return Math.max(this.x1,this.x2,this.x3)},set:function(d){var c=0;this.x1>=this.x2&&this.x1>=this.x3?c=this.x1-d:this.x2>=this.x1&&this.x2>=this.x3?c=this.x2-d:c=this.x3-d,this.x1-=c,this.x2-=c,this.x3-=c}},top:{get:function(){return Math.min(this.y1,this.y2,this.y3)},set:function(d){var c=0;this.y1<=this.y2&&this.y1<=this.y3?c=this.y1-d:this.y2<=this.y1&&this.y2<=this.y3?c=this.y2-d:c=this.y3-d,this.y1-=c,this.y2-=c,this.y3-=c}},bottom:{get:function(){return Math.max(this.y1,this.y2,this.y3)},set:function(d){var c=0;this.y1>=this.y2&&this.y1>=this.y3?c=this.y1-d:this.y2>=this.y1&&this.y2>=this.y3?c=this.y2-d:c=this.y3-d,this.y1-=c,this.y2-=c,this.y3-=c}}});e.exports=v},function(e,f){var i={};e.exports=i,function(){i.create=function(n,h){return{x:n||0,y:h||0}},i.clone=function(n){return{x:n.x,y:n.y}},i.magnitude=function(n){return Math.sqrt(n.x*n.x+n.y*n.y)},i.magnitudeSquared=function(n){return n.x*n.x+n.y*n.y},i.rotate=function(n,h,r){var a=Math.cos(h),l=Math.sin(h);r||(r={});var o=n.x*a-n.y*l;return r.y=n.x*l+n.y*a,r.x=o,r},i.rotateAbout=function(n,h,r,a){var l=Math.cos(h),o=Math.sin(h);a||(a={});var u=r.x+((n.x-r.x)*l-(n.y-r.y)*o);return a.y=r.y+((n.x-r.x)*o+(n.y-r.y)*l),a.x=u,a},i.normalise=function(n){var h=i.magnitude(n);return h===0?{x:0,y:0}:{x:n.x/h,y:n.y/h}},i.dot=function(n,h){return n.x*h.x+n.y*h.y},i.cross=function(n,h){return n.x*h.y-n.y*h.x},i.cross3=function(n,h,r){return(h.x-n.x)*(r.y-n.y)-(h.y-n.y)*(r.x-n.x)},i.add=function(n,h,r){return r||(r={}),r.x=n.x+h.x,r.y=n.y+h.y,r},i.sub=function(n,h,r){return r||(r={}),r.x=n.x-h.x,r.y=n.y-h.y,r},i.mult=function(n,h){return{x:n.x*h,y:n.y*h}},i.div=function(n,h){return{x:n.x/h,y:n.y/h}},i.perp=function(n,h){return h=h===!0?-1:1,{x:h*-n.y,y:h*n.x}},i.neg=function(n){return{x:-n.x,y:-n.y}},i.angle=function(n,h){return Math.atan2(h.y-n.y,h.x-n.x)},i._temp=[i.create(),i.create(),i.create(),i.create(),i.create(),i.create()]}()},function(e,f){var i={};e.exports=i,function(){i.create=function(n){var h={min:{x:0,y:0},max:{x:0,y:0}};return n&&i.update(h,n),h},i.update=function(n,h,r){n.min.x=1/0,n.max.x=-1/0,n.min.y=1/0,n.max.y=-1/0;for(var a=0;a<h.length;a++){var l=h[a];l.x>n.max.x&&(n.max.x=l.x),l.x<n.min.x&&(n.min.x=l.x),l.y>n.max.y&&(n.max.y=l.y),l.y<n.min.y&&(n.min.y=l.y)}r&&(r.x>0?n.max.x+=r.x:n.min.x+=r.x,r.y>0?n.max.y+=r.y:n.min.y+=r.y)},i.contains=function(n,h){return h.x>=n.min.x&&h.x<=n.max.x&&h.y>=n.min.y&&h.y<=n.max.y},i.overlaps=function(n,h){return n.min.x<=h.max.x&&n.max.x>=h.min.x&&n.max.y>=h.min.y&&n.min.y<=h.max.y},i.translate=function(n,h){n.min.x+=h.x,n.max.x+=h.x,n.min.y+=h.y,n.max.y+=h.y},i.shift=function(n,h){var r=n.max.x-n.min.x,a=n.max.y-n.min.y;n.min.x=h.x,n.max.x=h.x+r,n.min.y=h.y,n.max.y=h.y+a}}()},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(29),h=i(0),r=i(11),a=i(502),l=new h({Mixins:[r.Alpha,r.Flip,r.Visible],initialize:function(u,v,d,c,p,g,m,x){this.layer=u,this.index=v,this.x=d,this.y=c,this.width=p,this.height=g,this.right,this.bottom,this.baseWidth=m!==void 0?m:p,this.baseHeight=x!==void 0?x:g,this.pixelX=0,this.pixelY=0,this.updatePixelXY(),this.properties={},this.rotation=0,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceLeft=!1,this.faceRight=!1,this.faceTop=!1,this.faceBottom=!1,this.collisionCallback=void 0,this.collisionCallbackContext=this,this.tint=16777215,this.physics={}},containsPoint:function(o,u){return!(o<this.pixelX||u<this.pixelY||o>this.right||u>this.bottom)},copy:function(o){return this.index=o.index,this.alpha=o.alpha,this.properties=o.properties,this.visible=o.visible,this.setFlip(o.flipX,o.flipY),this.tint=o.tint,this.rotation=o.rotation,this.collideUp=o.collideUp,this.collideDown=o.collideDown,this.collideLeft=o.collideLeft,this.collideRight=o.collideRight,this.collisionCallback=o.collisionCallback,this.collisionCallbackContext=o.collisionCallbackContext,this},getCollisionGroup:function(){return this.tileset?this.tileset.getTileCollisionGroup(this.index):null},getTileData:function(){return this.tileset?this.tileset.getTileData(this.index):null},getLeft:function(o){var u=this.tilemapLayer;return u?u.tileToWorldX(this.x,o):this.x*this.baseWidth},getRight:function(o){var u=this.tilemapLayer;return u?this.getLeft(o)+this.width*u.scaleX:this.getLeft(o)+this.width},getTop:function(o){var u=this.tilemapLayer;return u?u.tileToWorldY(this.y,o)-(this.height-this.baseHeight)*u.scaleY:this.y*this.baseHeight-(this.height-this.baseHeight)},getBottom:function(o){var u=this.tilemapLayer;return u?this.getTop(o)+this.height*u.scaleY:this.getTop(o)+this.height},getBounds:function(o,u){return u===void 0&&(u=new a),u.x=this.getLeft(),u.y=this.getTop(),u.width=this.getRight()-u.x,u.height=this.getBottom()-u.y,u},getCenterX:function(o){return(this.getLeft(o)+this.getRight(o))/2},getCenterY:function(o){return(this.getTop(o)+this.getBottom(o))/2},intersects:function(o,u,v,d){return!(v<=this.pixelX||d<=this.pixelY||o>=this.right||u>=this.bottom)},isInteresting:function(o,u){return o&&u?this.canCollide||this.hasInterestingFace:o?this.collides:u?this.hasInterestingFace:!1},resetCollision:function(o){if(o===void 0&&(o=!0),this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,o){var u=this.tilemapLayer;u&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},resetFaces:function(){return this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,this},setCollision:function(o,u,v,d,c){if(u===void 0&&(u=o),v===void 0&&(v=o),d===void 0&&(d=o),c===void 0&&(c=!0),this.collideLeft=o,this.collideRight=u,this.collideUp=v,this.collideDown=d,this.faceLeft=o,this.faceRight=u,this.faceTop=v,this.faceBottom=d,c){var p=this.tilemapLayer;p&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},setCollisionCallback:function(o,u){return o===null?(this.collisionCallback=void 0,this.collisionCallbackContext=void 0):(this.collisionCallback=o,this.collisionCallbackContext=u),this},setSize:function(o,u,v,d){return o!==void 0&&(this.width=o),u!==void 0&&(this.height=u),v!==void 0&&(this.baseWidth=v),d!==void 0&&(this.baseHeight=d),this.updatePixelXY(),this},updatePixelXY:function(){var o=this.layer.orientation;if(o===n.ORTHOGONAL)this.pixelX=this.x*this.baseWidth,this.pixelY=this.y*this.baseHeight;else if(o===n.ISOMETRIC)this.pixelX=(this.x-this.y)*this.baseWidth*.5,this.pixelY=(this.x+this.y)*this.baseHeight*.5;else if(o===n.STAGGERED)this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*(this.baseHeight/2);else if(o===n.HEXAGONAL){var u=this.layer.hexSideLength,v=(this.baseHeight-u)/2+u;this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*v}return this.right=this.pixelX+this.baseWidth,this.bottom=this.pixelY+this.baseHeight,this},destroy:function(){this.collisionCallback=void 0,this.collisionCallbackContext=void 0,this.properties=void 0},canCollide:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||this.collisionCallback!==void 0}},collides:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown}},hasInterestingFace:{get:function(){return this.faceTop||this.faceBottom||this.faceLeft||this.faceRight}},tileset:{get:function(){var o=this.layer.tilemapLayer;if(o){var u=o.gidMap[this.index];if(u)return u}return null}},tilemapLayer:{get:function(){return this.layer.tilemapLayer}},tilemap:{get:function(){var o=this.tilemapLayer;return o?o.tilemap:null}}});e.exports=l},function(e,f,i){var n={};e.exports=n;var h=i(64),r=i(32),a=i(41),l=i(84),o=i(83),u=i(1393);(function(){n.rectangle=function(v,d,c,p,g){g=g||{};var m={label:"Rectangle Body",position:{x:v,y:d},vertices:h.fromPath("L 0 0 L "+c+" 0 L "+c+" "+p+" L 0 "+p)};if(g.chamfer){var x=g.chamfer;m.vertices=h.chamfer(m.vertices,x.radius,x.quality,x.qualityMin,x.qualityMax),delete g.chamfer}return a.create(r.extend({},m,g))},n.trapezoid=function(v,d,c,p,g,m){m=m||{},g*=.5;var x=(1-g*2)*c,y=c*g,T=y+x,C=T+y,S;g<.5?S="L 0 0 L "+y+" "+-p+" L "+T+" "+-p+" L "+C+" 0":S="L 0 0 L "+T+" "+-p+" L "+C+" 0";var E={label:"Trapezoid Body",position:{x:v,y:d},vertices:h.fromPath(S)};if(m.chamfer){var M=m.chamfer;E.vertices=h.chamfer(E.vertices,M.radius,M.quality,M.qualityMin,M.qualityMax),delete m.chamfer}return a.create(r.extend({},E,m))},n.circle=function(v,d,c,p,g){p=p||{};var m={label:"Circle Body",circleRadius:c};g=g||25;var x=Math.ceil(Math.max(10,Math.min(g,c)));return x%2===1&&(x+=1),n.polygon(v,d,x,c,r.extend({},m,p))},n.polygon=function(v,d,c,p,g){if(g=g||{},c<3)return n.circle(v,d,p,g);for(var m=2*Math.PI/c,x="",y=m*.5,T=0;T<c;T+=1){var C=y+T*m,S=Math.cos(C)*p,E=Math.sin(C)*p;x+="L "+S.toFixed(3)+" "+E.toFixed(3)+" "}var M={label:"Polygon Body",position:{x:v,y:d},vertices:h.fromPath(x)};if(g.chamfer){var O=g.chamfer;M.vertices=h.chamfer(M.vertices,O.radius,O.quality,O.qualityMin,O.qualityMax),delete g.chamfer}return a.create(r.extend({},M,g))},n.fromVertices=function(v,d,c,p,g,m,x){var y,T,C,S,E,M;for(p=p||{},T=[],g=typeof g!="undefined"?g:!1,m=typeof m!="undefined"?m:.01,x=typeof x!="undefined"?x:10,u||r.warn("Bodies.fromVertices: poly-decomp.js required. Could not decompose vertices. Fallback to convex hull."),r.isArray(c[0])||(c=[c]),M=0;M<c.length;M+=1)if(S=c[M],C=h.isConvex(S),C||!u)C?S=h.clockwiseSort(S):S=h.hull(S),T.push({position:{x:v,y:d},vertices:S});else{var O=S.map(function(D){return[D.x,D.y]});u.makeCCW(O),m!==!1&&u.removeCollinearPoints(O,m);var L=u.quickDecomp(O);for(E=0;E<L.length;E++){var R=L[E],F=R.map(function(D){return{x:D[0],y:D[1]}});x>0&&h.area(F)<x||T.push({position:h.centre(F),vertices:F})}}for(E=0;E<T.length;E++)T[E]=a.create(r.extend(T[E],p));return g&&n.flagCoincidentParts(T,5),T.length>1?(y=a.create(r.extend({parts:T.slice(0)},p)),a.setPosition(y,{x:v,y:d}),y):T[0]},n.flagCoincidentParts=function(v,d){d===void 0&&(d=5);for(var c=0;c<v.length;c++)for(var p=v[c],g=c+1;g<v.length;g++){var m=v[g];if(l.overlaps(p.bounds,m.bounds))for(var x=p.vertices,y=m.vertices,T=0;T<p.vertices.length;T++)for(var C=0;C<m.vertices.length;C++){var S=o.magnitudeSquared(o.sub(x[(T+1)%x.length],y[C])),E=o.magnitudeSquared(o.sub(x[T],y[(C+1)%y.length]));S<d&&E<d&&(x[T].isInternal=!0,y[C].isInternal=!0)}}return v}})()},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n.x-n.width*n.originX+n.width*.5};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){var r=n.width*n.originX;return n.x=h+r-n.width*.5,n};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n.y-n.height*n.originY+n.height*.5};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){var r=n.height*n.originY;return n.y=h+r-n.height*.5,n};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={POST_RENDER:i(628),PRE_RENDER:i(629),RENDER:i(630),RESIZE:i(631)}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={BITMAPMASK_PIPELINE:"BitmapMaskPipeline",LIGHT_PIPELINE:"Light2D",POINTLIGHT_PIPELINE:"PointLightPipeline",SINGLE_PIPELINE:"SinglePipeline",MULTI_PIPELINE:"MultiPipeline",ROPE_PIPELINE:"RopePipeline",GRAPHICS_PIPELINE:"GraphicsPipeline",POSTFX_PIPELINE:"PostFXPipeline",UTILITY_PIPELINE:"UtilityPipeline"};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(74),h=function(r,a,l,o){o===void 0&&(o=r);var u;if(!Array.isArray(a))return u=r.indexOf(a),u!==-1?(n(r,u),l&&l.call(o,a),a):null;for(var v=a.length-1,d=[];v>=0;){var c=a[v];u=r.indexOf(c),u!==-1&&(n(r,u),d.push(c),l&&l.call(o,c)),v--}return d};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(199),r=i(10),a=i(3),l=new n({initialize:function(u){this.type=u,this.defaultDivisions=5,this.arcLengthDivisions=100,this.cacheArcLengths=[],this.needsUpdate=!0,this.active=!0,this._tmpVec2A=new a,this._tmpVec2B=new a},draw:function(o,u){return u===void 0&&(u=32),o.strokePoints(this.getPoints(u))},getBounds:function(o,u){o||(o=new r),u===void 0&&(u=16);var v=this.getLength();u>v&&(u=v/2);var d=Math.max(1,Math.round(v/u));return h(this.getSpacedPoints(d),o)},getDistancePoints:function(o){var u=this.getLength(),v=Math.max(1,u/o);return this.getSpacedPoints(v)},getEndPoint:function(o){return o===void 0&&(o=new a),this.getPointAt(1,o)},getLength:function(){var o=this.getLengths();return o[o.length-1]},getLengths:function(o){if(o===void 0&&(o=this.arcLengthDivisions),this.cacheArcLengths.length===o+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var u=[],v,d=this.getPoint(0,this._tmpVec2A),c=0;u.push(0);for(var p=1;p<=o;p++)v=this.getPoint(p/o,this._tmpVec2B),c+=v.distance(d),u.push(c),d.copy(v);return this.cacheArcLengths=u,u},getPointAt:function(o,u){var v=this.getUtoTmapping(o);return this.getPoint(v,u)},getPoints:function(o,u,v){v===void 0&&(v=[]),o||(u?o=this.getLength()/u:o=this.defaultDivisions);for(var d=0;d<=o;d++)v.push(this.getPoint(d/o));return v},getRandomPoint:function(o){return o===void 0&&(o=new a),this.getPoint(Math.random(),o)},getSpacedPoints:function(o,u,v){v===void 0&&(v=[]),o||(u?o=this.getLength()/u:o=this.defaultDivisions);for(var d=0;d<=o;d++){var c=this.getUtoTmapping(d/o,null,o);v.push(this.getPoint(c))}return v},getStartPoint:function(o){return o===void 0&&(o=new a),this.getPointAt(0,o)},getTangent:function(o,u){u===void 0&&(u=new a);var v=1e-4,d=o-v,c=o+v;return d<0&&(d=0),c>1&&(c=1),this.getPoint(d,this._tmpVec2A),this.getPoint(c,u),u.subtract(this._tmpVec2A).normalize()},getTangentAt:function(o,u){var v=this.getUtoTmapping(o);return this.getTangent(v,u)},getTFromDistance:function(o,u){return o<=0?0:this.getUtoTmapping(0,o,u)},getUtoTmapping:function(o,u,v){var d=this.getLengths(v),c=0,p=d.length,g;u?g=Math.min(u,d[p-1]):g=o*d[p-1];for(var m=0,x=p-1,y;m<=x;)if(c=Math.floor(m+(x-m)/2),y=d[c]-g,y<0)m=c+1;else if(y>0)x=c-1;else{x=c;break}if(c=x,d[c]===g)return c/(p-1);var T=d[c],C=d[c+1],S=C-T,E=(g-T)/S;return(c+E)/(p-1)},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()}});e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ADD:i(968),COMPLETE:i(969),FILE_COMPLETE:i(970),FILE_KEY_COMPLETE:i(971),FILE_LOAD_ERROR:i(972),FILE_LOAD:i(973),FILE_PROGRESS:i(974),POST_PROCESS:i(975),PROGRESS:i(976),START:i(977)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4),h=function(r,a,l){l===void 0&&(l=new n);var o=r.x1,u=r.y1,v=r.x2,d=r.y2,c=a.x1,p=a.y1,g=a.x2,m=a.y2,x=(g-c)*(u-p)-(m-p)*(o-c),y=(v-o)*(u-p)-(d-u)*(o-c),T=(m-p)*(v-o)-(g-c)*(d-u);if(T===0)return!1;var C=x/T,S=y/T;return C>=0&&C<=1&&S>=0&&S<=1?(l.x=o+C*(v-o),l.y=u+C*(d-u),!0):!1};e.exports=h},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return Math.atan2(n.y2-n.y1,n.x2-n.x1)};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(18),h=function(r,a,l){return r=n(r,0,1),(l-a)*r+a};e.exports=h},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r){return n&&n.hasOwnProperty(h)?n[h]:r};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={CREATED:0,INIT:1,DELAY:2,OFFSET_DELAY:3,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING_ADD:20,PAUSED:21,LOOP_DELAY:22,ACTIVE:23,COMPLETE_DELAY:24,PENDING_REMOVE:25,REMOVED:26};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(315),r=new n({initialize:function(l,o){this.parent=l,this.events=o,o||(this.events=l.events?l.events:l),this.list={},this.values={},this._frozen=!1,!l.hasOwnProperty("sys")&&this.events&&this.events.once(h.DESTROY,this.destroy,this)},get:function(a){var l=this.list;if(Array.isArray(a)){for(var o=[],u=0;u<a.length;u++)o.push(l[a[u]]);return o}else return l[a]},getAll:function(){var a={};for(var l in this.list)this.list.hasOwnProperty(l)&&(a[l]=this.list[l]);return a},query:function(a){var l={};for(var o in this.list)this.list.hasOwnProperty(o)&&o.match(a)&&(l[o]=this.list[o]);return l},set:function(a,l){if(this._frozen)return this;if(typeof a=="string")return this.setValue(a,l);for(var o in a)this.setValue(o,a[o]);return this},inc:function(a,l){if(this._frozen)return this;l===void 0&&(l=1);var o=this.get(a);return o===void 0&&(o=0),this.set(a,o+l),this},toggle:function(a){return this._frozen?this:(this.set(a,!this.get(a)),this)},setValue:function(a,l){if(this._frozen)return this;if(this.has(a))this.values[a]=l;else{var o=this,u=this.list,v=this.events,d=this.parent;Object.defineProperty(this.values,a,{enumerable:!0,configurable:!0,get:function(){return u[a]},set:function(c){if(!o._frozen){var p=u[a];u[a]=c,v.emit(h.CHANGE_DATA,d,a,c,p),v.emit(h.CHANGE_DATA_KEY+a,d,c,p)}}}),u[a]=l,v.emit(h.SET_DATA,d,a,l)}return this},each:function(a,l){for(var o=[this.parent,null,void 0],u=1;u<arguments.length;u++)o.push(arguments[u]);for(var v in this.list)o[1]=v,o[2]=this.list[v],a.apply(l,o);return this},merge:function(a,l){l===void 0&&(l=!0);for(var o in a)a.hasOwnProperty(o)&&(l||!l&&!this.has(o))&&this.setValue(o,a[o]);return this},remove:function(a){if(this._frozen)return this;if(Array.isArray(a))for(var l=0;l<a.length;l++)this.removeValue(a[l]);else return this.removeValue(a);return this},removeValue:function(a){if(this.has(a)){var l=this.list[a];delete this.list[a],delete this.values[a],this.events.emit(h.REMOVE_DATA,this.parent,a,l)}return this},pop:function(a){var l=void 0;return!this._frozen&&this.has(a)&&(l=this.list[a],delete this.list[a],delete this.values[a],this.events.emit(h.REMOVE_DATA,this.parent,a,l)),l},has:function(a){return this.list.hasOwnProperty(a)},setFreeze:function(a){return this._frozen=a,this},reset:function(){for(var a in this.list)delete this.list[a],delete this.values[a];return this._frozen=!1,this},destroy:function(){this.reset(),this.events.off(h.CHANGE_DATA),this.events.off(h.SET_DATA),this.events.off(h.REMOVE_DATA),this.parent=null},freeze:{get:function(){return this._frozen},set:function(a){this._frozen=!!a}},count:{get:function(){var a=0;for(var l in this.list)this.list[l]!==void 0&&a++;return a}}});e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=new n({initialize:function(a){if(this.entries={},this.size=0,Array.isArray(a))for(var l=0;l<a.length;l++)this.set(a[l][0],a[l][1])},set:function(r,a){return this.has(r)||this.size++,this.entries[r]=a,this},get:function(r){if(this.has(r))return this.entries[r]},getArray:function(){var r=[],a=this.entries;for(var l in a)r.push(a[l]);return r},has:function(r){return this.entries.hasOwnProperty(r)},delete:function(r){return this.has(r)&&(delete this.entries[r],this.size--),this},clear:function(){return Object.keys(this.entries).forEach(function(r){delete this.entries[r]},this),this.size=0,this},keys:function(){return Object.keys(this.entries)},values:function(){var r=[],a=this.entries;for(var l in a)r.push(a[l]);return r},dump:function(){var r=this.entries;console.group("Map");for(var a in r)console.log(a,r[a]);console.groupEnd()},each:function(r){var a=this.entries;for(var l in a)if(r(l,a[l])===!1)break;return this},contains:function(r){var a=this.entries;for(var l in a)if(a[l]===r)return!0;return!1},merge:function(r,a){a===void 0&&(a=!1);var l=this.entries,o=r.entries;for(var u in o)l.hasOwnProperty(u)&&a?l[u]=o[u]:this.set(u,o[u]);return this}});e.exports=h},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r){return n<<16|h<<8|r};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ENTER_FULLSCREEN:i(800),FULLSCREEN_FAILED:i(801),FULLSCREEN_UNSUPPORTED:i(802),LEAVE_FULLSCREEN:i(803),ORIENTATION_CHANGE:i(804),RESIZE:i(805)}},function(e,f,i){(function(n){/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2020 Photon Storm Ltd.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var h={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1};function r(){if(typeof importScripts=="function")return h;var a=navigator.userAgent;/Windows/.test(a)?h.windows=!0:/Mac OS/.test(a)&&!/like Mac OS/.test(a)?navigator.maxTouchPoints&&navigator.maxTouchPoints>2?(h.iOS=!0,h.iPad=!0,navigator.appVersion.match(/Version\/(\d+)/),h.iOSVersion=parseInt(RegExp.$1,10)):h.macOS=!0:/Android/.test(a)?h.android=!0:/Linux/.test(a)?h.linux=!0:/iP[ao]d|iPhone/i.test(a)?(h.iOS=!0,navigator.appVersion.match(/OS (\d+)/),h.iOSVersion=parseInt(RegExp.$1,10),h.iPhone=a.toLowerCase().indexOf("iphone")!==-1,h.iPad=a.toLowerCase().indexOf("ipad")!==-1):/Kindle/.test(a)||/\bKF[A-Z][A-Z]+/.test(a)||/Silk.*Mobile Safari/.test(a)?h.kindle=!0:/CrOS/.test(a)&&(h.chromeOS=!0),(/Windows Phone/i.test(a)||/IEMobile/i.test(a))&&(h.android=!1,h.iOS=!1,h.macOS=!1,h.windows=!0,h.windowsPhone=!0);var l=/Silk/.test(a);return(h.windows||h.macOS||h.linux&&!l||h.chromeOS)&&(h.desktop=!0),(h.windowsPhone||/Windows NT/i.test(a)&&/Touch/i.test(a))&&(h.desktop=!1),navigator.standalone&&(h.webApp=!0),typeof importScripts!="function"&&(window.cordova!==void 0&&(h.cordova=!0),window.ejecta!==void 0&&(h.ejecta=!0)),typeof n!="undefined"&&n.versions&&n.versions.node&&(h.node=!0),h.node&&typeof n.versions=="object"&&(h.nodeWebkit=!!n.versions["node-webkit"],h.electron=!!n.versions.electron),/Crosswalk/.test(a)&&(h.crosswalk=!0),h.pixelRatio=window.devicePixelRatio||1,h}e.exports=r()}).call(this,i(807))},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ADD:i(861),ERROR:i(862),LOAD:i(863),READY:i(864),REMOVE:i(865)}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={BYTE:{enum:5120,size:1},UNSIGNED_BYTE:{enum:5121,size:1},SHORT:{enum:5122,size:2},UNSIGNED_SHORT:{enum:5123,size:2},INT:{enum:5124,size:4},UNSIGNED_INT:{enum:5125,size:4},FLOAT:{enum:5126,size:4}};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(59),r=i(2),a=i(878),l=i(879),o=i(25),u=i(12),v=i(107),d=i(58),c=new n({Extends:d,initialize:function(g){var m=g.game.renderer,x=r(g,"fragShader",a);g.fragShader=u.parseFragmentShaderMaxTextures(x,m.maxTextures),g.vertShader=r(g,"vertShader",l),g.attributes=r(g,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:v.UNSIGNED_BYTE,normalized:!0}]),d.call(this,g),this._tempMatrix1=new o,this._tempMatrix2=new o,this._tempMatrix3=new o,this.calcMatrix=new o,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},boot:function(){d.prototype.boot.call(this),this.currentShader.set1iv("uMainSampler",this.renderer.textureIndexes)},batchSprite:function(p,g,m){this.manager.set(this,p);var x=this._tempMatrix1,y=this._tempMatrix2,T=this._tempMatrix3,C=p.frame,S=C.glTexture,E=C.u0,M=C.v0,O=C.u1,L=C.v1,R=C.x,F=C.y,D=C.cutWidth,B=C.cutHeight,N=C.customPivot,U=p.displayOriginX,X=p.displayOriginY,K=-U+R,k=-X+F;if(p.isCropped){var b=p._crop;(b.flipX!==p.flipX||b.flipY!==p.flipY)&&C.updateCropUVs(b,p.flipX,p.flipY),E=b.u0,M=b.v0,O=b.u1,L=b.v1,D=b.width,B=b.height,R=b.x,F=b.y,K=-U+R,k=-X+F}var I=1,G=1;p.flipX&&(N||(K+=-C.realWidth+U*2),I=-1),(p.flipY||C.source.isGLTexture&&!S.flipY)&&(N||(k+=-C.realHeight+X*2),G=-1),y.applyITRS(p.x,p.y,p.rotation,p.scaleX*I,p.scaleY*G),x.copyFrom(g.matrix),m?(x.multiplyWithOffset(m,-g.scrollX*p.scrollFactorX,-g.scrollY*p.scrollFactorY),y.e=p.x,y.f=p.y):(y.e-=g.scrollX*p.scrollFactorX,y.f-=g.scrollY*p.scrollFactorY),x.multiply(y,T);var Y=K+D,V=k+B,W=g.roundPixels,H=T.getXRound(K,k,W),Z=T.getYRound(K,k,W),q=T.getXRound(K,V,W),_=T.getYRound(K,V,W),nt=T.getXRound(Y,V,W),rt=T.getYRound(Y,V,W),at=T.getXRound(Y,k,W),ct=T.getYRound(Y,k,W),ut=u.getTintAppendFloatAlpha,vt=g.alpha,It=ut(p.tintTopLeft,vt*p._alphaTL),St=ut(p.tintTopRight,vt*p._alphaTR),Et=ut(p.tintBottomLeft,vt*p._alphaBL),dt=ut(p.tintBottomRight,vt*p._alphaBR);this.shouldFlush(6)&&this.flush();var Bt=this.setGameObject(p,C);this.manager.preBatch(p),this.batchQuad(p,H,Z,q,_,nt,rt,at,ct,E,M,O,L,It,St,Et,dt,p.tintFill,S,Bt),this.manager.postBatch(p)},batchTexture:function(p,g,m,x,y,T,C,S,E,M,O,L,R,F,D,B,N,U,X,K,k,b,I,G,Y,V,W,H,Z,q,_,nt){this.manager.set(this,p);var rt=this._tempMatrix1,at=this._tempMatrix2,ct=this._tempMatrix3,ut=U/m+W,vt=X/x+H,It=(U+K)/m+W,St=(X+k)/x+H,Et=C,dt=S,Bt=-B,mt=-N;if(p.isCropped){var At=p._crop,Ae=At.width,$e=At.height;Et=Ae,dt=$e,C=Ae,S=$e,U=At.x,X=At.y;var Zt=U,Xt=X;L&&(Zt=K-At.x-Ae),R&&(Xt=k-At.y-$e),ut=Zt/m+W,vt=Xt/x+H,It=(Zt+Ae)/m+W,St=(Xt+$e)/x+H,Bt=-B+U,mt=-N+X}R=R^(!_&&g.isRenderTexture?1:0),L&&(Et*=-1,Bt+=C),R&&(dt*=-1,mt+=S);var se=Bt+Et,ee=mt+dt;at.applyITRS(y,T,O,E,M),rt.copyFrom(Z.matrix),q?(rt.multiplyWithOffset(q,-Z.scrollX*F,-Z.scrollY*D),at.e=y,at.f=T):(at.e-=Z.scrollX*F,at.f-=Z.scrollY*D),rt.multiply(at,ct);var re=Z.roundPixels,Ie=ct.getXRound(Bt,mt,re),yi=ct.getYRound(Bt,mt,re),Ti=ct.getXRound(Bt,ee,re),Ci=ct.getYRound(Bt,ee,re),Si=ct.getXRound(se,ee,re),Ei=ct.getYRound(se,ee,re),Pi=ct.getXRound(se,mt,re),da=ct.getYRound(se,mt,re);nt===void 0&&(nt=this.renderer.setTexture2D(g)),p&&this.manager.preBatch(p),this.batchQuad(p,Ie,yi,Ti,Ci,Si,Ei,Pi,da,ut,vt,It,St,b,I,G,Y,V,g,nt),p&&this.manager.postBatch(p)},batchTextureFrame:function(p,g,m,x,y,T,C){this.manager.set(this);var S=this._tempMatrix1.copyFrom(T),E=this._tempMatrix2,M=g+p.width,O=m+p.height;C?S.multiply(C,E):E=S;var L=E.getX(g,m),R=E.getY(g,m),F=E.getX(g,O),D=E.getY(g,O),B=E.getX(M,O),N=E.getY(M,O),U=E.getX(M,m),X=E.getY(M,m),K=this.renderer.setTextureSource(p.source);x=u.getTintAppendFloatAlpha(x,y),this.batchQuad(null,L,R,F,D,B,N,U,X,p.u0,p.v0,p.u1,p.v1,x,x,x,x,0,p.glTexture,K)},batchFillRect:function(p,g,m,x,y,T){this.renderer.pipelines.set(this);var C=this.calcMatrix;T&&T.multiply(y,C);var S=p+m,E=g+x,M=C.getX(p,g),O=C.getY(p,g),L=C.getX(p,E),R=C.getY(p,E),F=C.getX(S,E),D=C.getY(S,E),B=C.getX(S,g),N=C.getY(S,g),U=this.fillTint;this.batchQuad(null,M,O,L,R,F,D,B,N,0,0,1,1,U.TL,U.TR,U.BL,U.BR,2)},batchFillTriangle:function(p,g,m,x,y,T,C,S){this.renderer.pipelines.set(this);var E=this.calcMatrix;S&&S.multiply(C,E);var M=E.getX(p,g),O=E.getY(p,g),L=E.getX(m,x),R=E.getY(m,x),F=E.getX(y,T),D=E.getY(y,T),B=this.fillTint;this.batchTri(null,M,O,L,R,F,D,0,0,1,1,B.TL,B.TR,B.BL,2)},batchStrokeTriangle:function(p,g,m,x,y,T,C,S,E){var M=this.tempTriangle;M[0].x=p,M[0].y=g,M[0].width=C,M[1].x=m,M[1].y=x,M[1].width=C,M[2].x=y,M[2].y=T,M[2].width=C,M[3].x=p,M[3].y=g,M[3].width=C,this.batchStrokePath(M,C,!1,S,E)},batchFillPath:function(p,g,m){this.renderer.pipelines.set(this);var x=this.calcMatrix;m&&m.multiply(g,x);for(var y=p.length,T=this.polygonCache,C,S,E=this.fillTint.TL,M=this.fillTint.TR,O=this.fillTint.BL,L=0;L<y;++L)S=p[L],T.push(S.x,S.y);C=h(T),y=C.length;for(var R=0;R<y;R+=3){var F=C[R+0]*2,D=C[R+1]*2,B=C[R+2]*2,N=T[F+0],U=T[F+1],X=T[D+0],K=T[D+1],k=T[B+0],b=T[B+1],I=x.getX(N,U),G=x.getY(N,U),Y=x.getX(X,K),V=x.getY(X,K),W=x.getX(k,b),H=x.getY(k,b);this.batchTri(null,I,G,Y,V,W,H,0,0,1,1,E,M,O,2)}T.length=0},batchStrokePath:function(p,g,m,x,y){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var T=p.length-1,C=0;C<T;C++){var S=p[C],E=p[C+1];this.batchLine(S.x,S.y,E.x,E.y,S.width/2,E.width/2,g,C,!m&&C===T-1,x,y)}},batchLine:function(p,g,m,x,y,T,C,S,E,M,O){this.renderer.pipelines.set(this);var L=this.calcMatrix;O&&O.multiply(M,L);var R=m-p,F=x-g,D=Math.sqrt(R*R+F*F),B=y*(x-g)/D,N=y*(p-m)/D,U=T*(x-g)/D,X=T*(p-m)/D,K=m-U,k=x-X,b=p-B,I=g-N,G=m+U,Y=x+X,V=p+B,W=g+N,H=L.getX(K,k),Z=L.getY(K,k),q=L.getX(b,I),_=L.getY(b,I),nt=L.getX(G,Y),rt=L.getY(G,Y),at=L.getX(V,W),ct=L.getY(V,W),ut=this.strokeTint,vt=ut.TL,It=ut.TR,St=ut.BL,Et=ut.BR;if(this.batchQuad(null,at,ct,q,_,H,Z,nt,rt,0,0,1,1,vt,It,St,Et,2),!(C<=2)){var dt=this.prevQuad,Bt=this.firstQuad;S>0&&dt[4]?this.batchQuad(null,at,ct,q,_,dt[0],dt[1],dt[2],dt[3],0,0,1,1,vt,It,St,Et,2):(Bt[0]=at,Bt[1]=ct,Bt[2]=q,Bt[3]=_,Bt[4]=1),E&&Bt[4]?this.batchQuad(null,H,Z,nt,rt,Bt[0],Bt[1],Bt[2],Bt[3],0,0,1,1,vt,It,St,Et,2):(dt[0]=H,dt[1]=Z,dt[2]=nt,dt[3]=rt,dt[4]=1)}}});e.exports=c},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(18),r=i(17),a=new n({initialize:function(o,u,v,d,c,p,g){this.texture=o,this.name=u,this.source=o.source[v],this.sourceIndex=v,this.glTexture=this.source.glTexture,this.cutX,this.cutY,this.cutWidth,this.cutHeight,this.x=0,this.y=0,this.width,this.height,this.halfWidth,this.halfHeight,this.centerX,this.centerY,this.pivotX=0,this.pivotY=0,this.customPivot=!1,this.rotated=!1,this.autoRound=-1,this.customData={},this.u0=0,this.v0=0,this.u1=0,this.v1=0,this.data={cut:{x:0,y:0,w:0,h:0,r:0,b:0},trim:!1,sourceSize:{w:0,h:0},spriteSourceSize:{x:0,y:0,w:0,h:0,r:0,b:0},radius:0,drawImage:{x:0,y:0,width:0,height:0}},this.setSize(p,g,d,c)},setSize:function(l,o,u,v){u===void 0&&(u=0),v===void 0&&(v=0),this.cutX=u,this.cutY=v,this.cutWidth=l,this.cutHeight=o,this.width=l,this.height=o,this.halfWidth=Math.floor(l*.5),this.halfHeight=Math.floor(o*.5),this.centerX=Math.floor(l/2),this.centerY=Math.floor(o/2);var d=this.data,c=d.cut;c.x=u,c.y=v,c.w=l,c.h=o,c.r=u+l,c.b=v+o,d.sourceSize.w=l,d.sourceSize.h=o,d.spriteSourceSize.w=l,d.spriteSourceSize.h=o,d.radius=.5*Math.sqrt(l*l+o*o);var p=d.drawImage;return p.x=u,p.y=v,p.width=l,p.height=o,this.updateUVs()},setTrim:function(l,o,u,v,d,c){var p=this.data,g=p.spriteSourceSize;return p.trim=!0,p.sourceSize.w=l,p.sourceSize.h=o,g.x=u,g.y=v,g.w=d,g.h=c,g.r=u+d,g.b=v+c,this.x=u,this.y=v,this.width=d,this.height=c,this.halfWidth=d*.5,this.halfHeight=c*.5,this.centerX=Math.floor(d/2),this.centerY=Math.floor(c/2),this.updateUVs()},setCropUVs:function(l,o,u,v,d,c,p){var g=this.cutX,m=this.cutY,x=this.cutWidth,y=this.cutHeight,T=this.realWidth,C=this.realHeight;o=h(o,0,T),u=h(u,0,C),v=h(v,0,T-o),d=h(d,0,C-u);var S=g+o,E=m+u,M=v,O=d,L=this.data;if(L.trim){var R=L.spriteSourceSize;v=h(v,0,x-o),d=h(d,0,y-u);var F=o+v,D=u+d,B=!(R.r<o||R.b<u||R.x>F||R.y>D);if(B){var N=Math.max(R.x,o),U=Math.max(R.y,u),X=Math.min(R.r,F)-N,K=Math.min(R.b,D)-U;M=X,O=K,c?S=g+(x-(N-R.x)-X):S=g+(N-R.x),p?E=m+(y-(U-R.y)-K):E=m+(U-R.y),o=N,u=U,v=X,d=K}else S=0,E=0,M=0,O=0}else c&&(S=g+(x-o-v)),p&&(E=m+(y-u-d));var k=this.source.width,b=this.source.height;return l.u0=Math.max(0,S/k),l.v0=Math.max(0,E/b),l.u1=Math.min(1,(S+M)/k),l.v1=Math.min(1,(E+O)/b),l.x=o,l.y=u,l.cx=S,l.cy=E,l.cw=M,l.ch=O,l.width=v,l.height=d,l.flipX=c,l.flipY=p,l},updateCropUVs:function(l,o,u){return this.setCropUVs(l,l.x,l.y,l.width,l.height,o,u)},setUVs:function(l,o,u,v,d,c){var p=this.data.drawImage;return p.width=l,p.height=o,this.u0=u,this.v0=v,this.u1=d,this.v1=c,this},updateUVs:function(){var l=this.cutX,o=this.cutY,u=this.cutWidth,v=this.cutHeight,d=this.data.drawImage;d.width=u,d.height=v;var c=this.source.width,p=this.source.height;return this.u0=l/c,this.v0=o/p,this.u1=(l+u)/c,this.v1=(o+v)/p,this},updateUVsInverted:function(){var l=this.source.width,o=this.source.height;return this.u0=(this.cutX+this.cutHeight)/l,this.v0=this.cutY/o,this.u1=this.cutX/l,this.v1=(this.cutY+this.cutWidth)/o,this},clone:function(){var l=new a(this.texture,this.name,this.sourceIndex);return l.cutX=this.cutX,l.cutY=this.cutY,l.cutWidth=this.cutWidth,l.cutHeight=this.cutHeight,l.x=this.x,l.y=this.y,l.width=this.width,l.height=this.height,l.halfWidth=this.halfWidth,l.halfHeight=this.halfHeight,l.centerX=this.centerX,l.centerY=this.centerY,l.rotated=this.rotated,l.data=r(!0,l.data,this.data),l.updateUVs(),l},destroy:function(){this.source=null,this.texture=null,this.glTexture=null,this.customData=null,this.data=null},realWidth:{get:function(){return this.data.sourceSize.w}},realHeight:{get:function(){return this.data.sourceSize.h}},radius:{get:function(){return this.data.radius}},trimmed:{get:function(){return this.data.trim}},canvasData:{get:function(){return this.data.drawImage}}});e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(208),h=i(0),r=i(1),a=i(79),l=new h({initialize:function(u){this.parent=u,this.list=[],this.position=0,this.addCallback=r,this.removeCallback=r,this._sortKey=""},add:function(o,u){return u?n.Add(this.list,o):n.Add(this.list,o,0,this.addCallback,this)},addAt:function(o,u,v){return v?n.AddAt(this.list,o,u):n.AddAt(this.list,o,u,0,this.addCallback,this)},getAt:function(o){return this.list[o]},getIndex:function(o){return this.list.indexOf(o)},sort:function(o,u){return o?(u===void 0&&(u=function(v,d){return v[o]-d[o]}),a(this.list,u),this):this},getByName:function(o){return n.GetFirst(this.list,"name",o)},getRandom:function(o,u){return n.GetRandom(this.list,o,u)},getFirst:function(o,u,v,d){return n.GetFirst(this.list,o,u,v,d)},getAll:function(o,u,v,d){return n.GetAll(this.list,o,u,v,d)},count:function(o,u){return n.CountAllMatching(this.list,o,u)},swap:function(o,u){n.Swap(this.list,o,u)},moveTo:function(o,u){return n.MoveTo(this.list,o,u)},moveAbove:function(o,u){return n.MoveAbove(this.list,o,u)},moveBelow:function(o,u){return n.MoveBelow(this.list,o,u)},remove:function(o,u){return u?n.Remove(this.list,o):n.Remove(this.list,o,this.removeCallback,this)},removeAt:function(o,u){return u?n.RemoveAt(this.list,o):n.RemoveAt(this.list,o,this.removeCallback,this)},removeBetween:function(o,u,v){return v?n.RemoveBetween(this.list,o,u):n.RemoveBetween(this.list,o,u,this.removeCallback,this)},removeAll:function(o){for(var u=this.list.length;u--;)this.remove(this.list[u],o);return this},bringToTop:function(o){return n.BringToTop(this.list,o)},sendToBack:function(o){return n.SendToBack(this.list,o)},moveUp:function(o){return n.MoveUp(this.list,o),o},moveDown:function(o){return n.MoveDown(this.list,o),o},reverse:function(){return this.list.reverse(),this},shuffle:function(){return n.Shuffle(this.list),this},replace:function(o,u){return n.Replace(this.list,o,u)},exists:function(o){return this.list.indexOf(o)>-1},setAll:function(o,u,v,d){return n.SetAll(this.list,o,u,v,d),this},each:function(o,u){for(var v=[null],d=2;d<arguments.length;d++)v.push(arguments[d]);for(d=0;d<this.list.length;d++)v[0]=this.list[d],o.apply(u,v)},shutdown:function(){this.removeAll(),this.list=[]},destroy:function(){this.removeAll(),this.parent=null,this.addCallback=null,this.removeCallback=null},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}}});e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(112),r=i(445),a=i(446),l=i(56),o=i(180),u=new n({initialize:function(d,c,p,g){d===void 0&&(d=0),c===void 0&&(c=0),p===void 0&&(p=0),g===void 0&&(g=0),this.type=l.ELLIPSE,this.x=d,this.y=c,this.width=p,this.height=g},contains:function(v,d){return h(this,v,d)},getPoint:function(v,d){return r(this,v,d)},getPoints:function(v,d,c){return a(this,v,d,c)},getRandomPoint:function(v){return o(this,v)},setTo:function(v,d,c,p){return this.x=v,this.y=d,this.width=c,this.height=p,this},setEmpty:function(){return this.width=0,this.height=0,this},setPosition:function(v,d){return d===void 0&&(d=v),this.x=v,this.y=d,this},setSize:function(v,d){return d===void 0&&(d=v),this.width=v,this.height=d,this},isEmpty:function(){return this.width<=0||this.height<=0},getMinorRadius:function(){return Math.min(this.width,this.height)/2},getMajorRadius:function(){return Math.max(this.width,this.height)/2},left:{get:function(){return this.x-this.width/2},set:function(v){this.x=v+this.width/2}},right:{get:function(){return this.x+this.width/2},set:function(v){this.x=v-this.width/2}},top:{get:function(){return this.y-this.height/2},set:function(v){this.y=v+this.height/2}},bottom:{get:function(){return this.y+this.height/2},set:function(v){this.y=v-this.height/2}}});e.exports=u},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r){if(n.width<=0||n.height<=0)return!1;var a=(h-n.x)/n.width,l=(r-n.y)/n.height;return a*=a,l*=l,a+l<.25};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(275),h=i(0),r=i(75),a=i(9),l=i(207),o=i(2),u=i(6),v=i(7),d=i(437),c=i(149),p=i(73),g=new h({Extends:a,initialize:function(x,y,T){a.call(this),T?y&&!Array.isArray(y)&&(y=[y]):Array.isArray(y)?v(y[0])&&(T=y,y=null):v(y)&&(T=y,y=null),this.scene=x,this.children=new c,this.isParent=!0,this.type="Group",this.classType=o(T,"classType",p),this.name=o(T,"name",""),this.active=o(T,"active",!0),this.maxSize=o(T,"maxSize",-1),this.defaultKey=o(T,"defaultKey",null),this.defaultFrame=o(T,"defaultFrame",null),this.runChildUpdate=o(T,"runChildUpdate",!1),this.createCallback=o(T,"createCallback",null),this.removeCallback=o(T,"removeCallback",null),this.createMultipleCallback=o(T,"createMultipleCallback",null),this.internalCreateCallback=o(T,"internalCreateCallback",null),this.internalRemoveCallback=o(T,"internalRemoveCallback",null),y&&this.addMultiple(y),T&&this.createMultiple(T),this.on(r.ADDED_TO_SCENE,this.addedToScene,this),this.on(r.REMOVED_FROM_SCENE,this.removedFromScene,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},create:function(m,x,y,T,C,S){if(m===void 0&&(m=0),x===void 0&&(x=0),y===void 0&&(y=this.defaultKey),T===void 0&&(T=this.defaultFrame),C===void 0&&(C=!0),S===void 0&&(S=!0),this.isFull())return null;var E=new this.classType(this.scene,m,x,y,T);return E.addToDisplayList(this.scene.sys.displayList),E.addToUpdateList(),E.visible=C,E.setActive(S),this.add(E),E},createMultiple:function(m){if(this.isFull())return[];Array.isArray(m)||(m=[m]);var x=[];if(m[0].key)for(var y=0;y<m.length;y++){var T=this.createFromConfig(m[y]);x=x.concat(T)}return x},createFromConfig:function(m){if(this.isFull())return[];this.classType=o(m,"classType",this.classType);var x=o(m,"key",void 0),y=o(m,"frame",null),T=o(m,"visible",!0),C=o(m,"active",!0),S=[];if(x===void 0)return S;Array.isArray(x)||(x=[x]),Array.isArray(y)||(y=[y]);var E=o(m,"repeat",0),M=o(m,"randomKey",!1),O=o(m,"randomFrame",!1),L=o(m,"yoyo",!1),R=o(m,"quantity",!1),F=o(m,"frameQuantity",1),D=o(m,"max",0),B=d(x,y,{max:D,qty:R||F,random:M,randomB:O,repeat:E,yoyo:L});m.createCallback&&(this.createCallback=m.createCallback),m.removeCallback&&(this.removeCallback=m.removeCallback);for(var N=0;N<B.length;N++){var U=this.create(0,0,B[N].a,B[N].b,T,C);if(!U)break;S.push(U)}var X=u(m,"setXY.x",0),K=u(m,"setXY.y",0),k=u(m,"setXY.stepX",0),b=u(m,"setXY.stepY",0);n.SetXY(S,X,K,k,b);var I=u(m,"setRotation.value",0),G=u(m,"setRotation.step",0);n.SetRotation(S,I,G);var Y=u(m,"setScale.x",1),V=u(m,"setScale.y",Y),W=u(m,"setScale.stepX",0),H=u(m,"setScale.stepY",0);n.SetScale(S,Y,V,W,H);var Z=u(m,"setOrigin.x",.5),q=u(m,"setOrigin.y",Z),_=u(m,"setOrigin.stepX",0),nt=u(m,"setOrigin.stepY",0);n.SetOrigin(S,Z,q,_,nt);var rt=u(m,"setAlpha.value",1),at=u(m,"setAlpha.step",0);n.SetAlpha(S,rt,at);var ct=u(m,"setDepth.value",0),ut=u(m,"setDepth.step",0);n.SetDepth(S,ct,ut);var vt=u(m,"setScrollFactor.x",1),It=u(m,"setScrollFactor.y",vt),St=u(m,"setScrollFactor.stepX",0),Et=u(m,"setScrollFactor.stepY",0);n.SetScrollFactor(S,vt,It,St,Et);var dt=o(m,"hitArea",null),Bt=o(m,"hitAreaCallback",null);dt&&n.SetHitArea(S,dt,Bt);var mt=o(m,"gridAlign",!1);return mt&&n.GridAlign(S,mt),this.createMultipleCallback&&this.createMultipleCallback.call(this,S),S},preUpdate:function(m,x){if(!(!this.runChildUpdate||this.children.size===0))for(var y=this.children.entries.slice(),T=0;T<y.length;T++){var C=y[T];C.active&&C.update(m,x)}},add:function(m,x){return x===void 0&&(x=!1),this.isFull()?this:(this.children.set(m),this.internalCreateCallback&&this.internalCreateCallback.call(this,m),this.createCallback&&this.createCallback.call(this,m),x&&(m.addToDisplayList(this.scene.sys.displayList),m.addToUpdateList()),m.on(r.DESTROY,this.remove,this),this)},addMultiple:function(m,x){if(x===void 0&&(x=!1),Array.isArray(m))for(var y=0;y<m.length;y++)this.add(m[y],x);return this},remove:function(m,x,y){return x===void 0&&(x=!1),y===void 0&&(y=!1),this.children.contains(m)?(this.children.delete(m),this.internalRemoveCallback&&this.internalRemoveCallback.call(this,m),this.removeCallback&&this.removeCallback.call(this,m),m.off(r.DESTROY,this.remove,this),y?m.destroy():x&&(m.removeFromDisplayList(),m.removeFromUpdateList()),this):this},clear:function(m,x){m===void 0&&(m=!1),x===void 0&&(x=!1);for(var y=this.children,T=0;T<y.size;T++){var C=y.entries[T];C.off(r.DESTROY,this.remove,this),x?C.destroy():m&&(C.removeFromDisplayList(),C.removeFromUpdateList())}return this.children.clear(),this},contains:function(m){return this.children.contains(m)},getChildren:function(){return this.children.entries},getLength:function(){return this.children.size},getMatching:function(m,x,y,T){return l(this.children.entries,m,x,y,T)},getFirst:function(m,x,y,T,C,S,E){return this.getHandler(!0,1,m,x,y,T,C,S,E)},getFirstNth:function(m,x,y,T,C,S,E,M){return this.getHandler(!0,m,x,y,T,C,S,E,M)},getLast:function(m,x,y,T,C,S,E){return this.getHandler(!1,1,m,x,y,T,C,S,E)},getLastNth:function(m,x,y,T,C,S,E,M){return this.getHandler(!1,m,x,y,T,C,S,E,M)},getHandler:function(m,x,y,T,C,S,E,M,O){y===void 0&&(y=!1),T===void 0&&(T=!1);var L,R,F=0,D=this.children.entries;if(m)for(R=0;R<D.length;R++)if(L=D[R],L.active===y){if(F++,F===x)break}else L=null;else for(R=D.length-1;R>=0;R--)if(L=D[R],L.active===y){if(F++,F===x)break}else L=null;return L?(typeof C=="number"&&(L.x=C),typeof S=="number"&&(L.y=S),L):T?this.create(C,S,E,M,O):null},get:function(m,x,y,T,C){return this.getFirst(!1,!0,m,x,y,T,C)},getFirstAlive:function(m,x,y,T,C,S){return this.getFirst(!0,m,x,y,T,C,S)},getFirstDead:function(m,x,y,T,C,S){return this.getFirst(!1,m,x,y,T,C,S)},playAnimation:function(m,x){return n.PlayAnimation(this.children.entries,m,x),this},isFull:function(){return this.maxSize===-1?!1:this.children.size>=this.maxSize},countActive:function(m){m===void 0&&(m=!0);for(var x=0,y=0;y<this.children.size;y++)this.children.entries[y].active===m&&x++;return x},getTotalUsed:function(){return this.countActive()},getTotalFree:function(){var m=this.getTotalUsed(),x=this.maxSize===-1?999999999999:this.maxSize;return x-m},setActive:function(m){return this.active=m,this},setName:function(m){return this.name=m,this},propertyValueSet:function(m,x,y,T,C){return n.PropertyValueSet(this.children.entries,m,x,y,T,C),this},propertyValueInc:function(m,x,y,T,C){return n.PropertyValueInc(this.children.entries,m,x,y,T,C),this},setX:function(m,x){return n.SetX(this.children.entries,m,x),this},setY:function(m,x){return n.SetY(this.children.entries,m,x),this},setXY:function(m,x,y,T){return n.SetXY(this.children.entries,m,x,y,T),this},incX:function(m,x){return n.IncX(this.children.entries,m,x),this},incY:function(m,x){return n.IncY(this.children.entries,m,x),this},incXY:function(m,x,y,T){return n.IncXY(this.children.entries,m,x,y,T),this},shiftPosition:function(m,x,y){return n.ShiftPosition(this.children.entries,m,x,y),this},angle:function(m,x){return n.Angle(this.children.entries,m,x),this},rotate:function(m,x){return n.Rotate(this.children.entries,m,x),this},rotateAround:function(m,x){return n.RotateAround(this.children.entries,m,x),this},rotateAroundDistance:function(m,x,y){return n.RotateAroundDistance(this.children.entries,m,x,y),this},setAlpha:function(m,x){return n.SetAlpha(this.children.entries,m,x),this},setTint:function(m,x,y,T){return n.SetTint(this.children.entries,m,x,y,T),this},setOrigin:function(m,x,y,T){return n.SetOrigin(this.children.entries,m,x,y,T),this},scaleX:function(m,x){return n.ScaleX(this.children.entries,m,x),this},scaleY:function(m,x){return n.ScaleY(this.children.entries,m,x),this},scaleXY:function(m,x,y,T){return n.ScaleXY(this.children.entries,m,x,y,T),this},setDepth:function(m,x){return n.SetDepth(this.children.entries,m,x),this},setBlendMode:function(m){return n.SetBlendMode(this.children.entries,m),this},setHitArea:function(m,x){return n.SetHitArea(this.children.entries,m,x),this},shuffle:function(){return n.Shuffle(this.children.entries),this},kill:function(m){this.children.contains(m)&&m.setActive(!1)},killAndHide:function(m){this.children.contains(m)&&(m.setActive(!1),m.setVisible(!1))},setVisible:function(m,x,y){return n.SetVisible(this.children.entries,m,x,y),this},toggleVisible:function(){return n.ToggleVisible(this.children.entries),this},destroy:function(m,x){m===void 0&&(m=!1),x===void 0&&(x=!1),!(!this.scene||this.ignoreDestroy)&&(this.emit(r.DESTROY,this),this.removeAllListeners(),this.scene.sys.updateList.remove(this),this.clear(x,m),this.scene=void 0,this.children=void 0)}});e.exports=g},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(12),h=function(r,a,l,o,u,v){for(var d=n.getTintAppendFloatAlpha(l.fillColor,l.fillAlpha*o),c=l.pathData,p=l.pathIndexes,g=0;g<p.length;g+=3){var m=p[g]*2,x=p[g+1]*2,y=p[g+2]*2,T=c[m+0]-u,C=c[m+1]-v,S=c[x+0]-u,E=c[x+1]-v,M=c[y+0]-u,O=c[y+1]-v,L=a.getX(T,C),R=a.getY(T,C),F=a.getX(S,E),D=a.getY(S,E),B=a.getX(M,O),N=a.getY(M,O);r.batchTri(l,L,R,F,D,B,N,0,0,1,1,d,d,d,2)}};e.exports=h},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r){var a=n.x3-n.x1,l=n.y3-n.y1,o=n.x2-n.x1,u=n.y2-n.y1,v=h-n.x1,d=r-n.y1,c=a*a+l*l,p=a*o+l*u,g=a*v+l*d,m=o*o+u*u,x=o*v+u*d,y=c*m-p*p,T=y===0?0:1/y,C=(m*g-p*x)*T,S=(c*x-p*g)*T;return C>=0&&S>=0&&C+S<1};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(10),r=i(3);function a(o,u,v,d){var c=o-v,p=u-d,g=c*c+p*p;return Math.sqrt(g)}var l=new n({initialize:function(u,v,d){this.vertex1=u,this.vertex2=v,this.vertex3=d,this.bounds=new h,this._inCenter=new r},getInCenter:function(o){o===void 0&&(o=!0);var u=this.vertex1,v=this.vertex2,d=this.vertex3,c,p,g,m,x,y;o?(c=u.x,p=u.y,g=v.x,m=v.y,x=d.x,y=d.y):(c=u.vx,p=u.vy,g=v.vx,m=v.vy,x=d.vx,y=d.vy);var T=a(x,y,g,m),C=a(c,p,x,y),S=a(g,m,c,p),E=T+C+S;return this._inCenter.set((c*T+g*C+x*S)/E,(p*T+m*C+y*S)/E)},contains:function(o,u,v){var d=this.vertex1,c=this.vertex2,p=this.vertex3,g=d.vx,m=d.vy,x=c.vx,y=c.vy,T=p.vx,C=p.vy;if(v){var S=v.a,E=v.b,M=v.c,O=v.d,L=v.e,R=v.f;g=d.vx*S+d.vy*M+L,m=d.vx*E+d.vy*O+R,x=c.vx*S+c.vy*M+L,y=c.vx*E+c.vy*O+R,T=p.vx*S+p.vy*M+L,C=p.vx*E+p.vy*O+R}var F=T-g,D=C-m,B=x-g,N=y-m,U=o-g,X=u-m,K=F*F+D*D,k=F*B+D*N,b=F*U+D*X,I=B*B+N*N,G=B*U+N*X,Y=K*I-k*k,V=Y===0?0:1/Y,W=(I*b-k*G)*V,H=(K*G-k*b)*V;return W>=0&&H>=0&&W+H<1},isCounterClockwise:function(o){var u=this.vertex1,v=this.vertex2,d=this.vertex3,c=(v.vx-u.vx)*(d.vy-u.vy)-(v.vy-u.vy)*(d.vx-u.vx);return o<=0?c>=0:c<0},load:function(o,u,v,d,c){return v=this.vertex1.load(o,u,v,d,c),v=this.vertex2.load(o,u,v,d,c),v=this.vertex3.load(o,u,v,d,c),v},transformCoordinatesLocal:function(o,u,v,d){return this.vertex1.transformCoordinatesLocal(o,u,v,d),this.vertex2.transformCoordinatesLocal(o,u,v,d),this.vertex3.transformCoordinatesLocal(o,u,v,d),this},updateBounds:function(){var o=this.vertex1,u=this.vertex2,v=this.vertex3,d=this.bounds;return d.x=Math.min(o.vx,u.vx,v.vx),d.y=Math.min(o.vy,u.vy,v.vy),d.width=Math.max(o.vx,u.vx,v.vx)-d.x,d.height=Math.max(o.vy,u.vy,v.vy)-d.y,this},isInView:function(o,u,v,d,c,p,g,m,x,y,T){var C=this.vertex1.update(c,p,g,m,x,y,T,d),S=this.vertex2.update(c,p,g,m,x,y,T,d),E=this.vertex3.update(c,p,g,m,x,y,T,d);if(C.ta<=0&&S.ta<=0&&E.ta<=0||u&&!this.isCounterClockwise(v))return!1;var M=this.bounds;M.x=Math.min(C.tx,S.tx,E.tx),M.y=Math.min(C.ty,S.ty,E.ty),M.width=Math.max(C.tx,S.tx,E.tx)-M.x,M.height=Math.max(C.ty,S.ty,E.ty)-M.y;var O=o.x+o.width,L=o.y+o.height;return M.width<=0||M.height<=0||o.width<=0||o.height<=0?!1:!(M.right<o.x||M.bottom<o.y||M.x>O||M.y>L)},translate:function(o,u){u===void 0&&(u=0);var v=this.vertex1,d=this.vertex2,c=this.vertex3;return v.x+=o,v.y+=u,d.x+=o,d.y+=u,c.x+=o,c.y+=u,this},x:{get:function(){return this.getInCenter().x},set:function(o){var u=this.getInCenter();this.translate(o-u.x,0)}},y:{get:function(){return this.getInCenter().y},set:function(o){var u=this.getInCenter();this.translate(0,o-u.y)}},alpha:{get:function(){var o=this.vertex1,u=this.vertex2,v=this.vertex3;return(o.alpha+u.alpha+v.alpha)/3},set:function(o){this.vertex1.alpha=o,this.vertex2.alpha=o,this.vertex3.alpha=o}},depth:{get:function(){var o=this.vertex1,u=this.vertex2,v=this.vertex3;return(o.vz+u.vz+v.vz)/3}},destroy:function(){this.vertex1=null,this.vertex2=null,this.vertex3=null}});e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(12),r=i(39),a=new n({Extends:r,initialize:function(o,u,v,d,c,p,g,m,x,y){p===void 0&&(p=16777215),g===void 0&&(g=1),m===void 0&&(m=0),x===void 0&&(x=0),y===void 0&&(y=0),r.call(this,o,u,v),this.vx=0,this.vy=0,this.vz=0,this.nx=m,this.ny=x,this.nz=y,this.u=d,this.v=c,this.color=p,this.alpha=g,this.tx=0,this.ty=0,this.ta=0},setUVs:function(l,o){return this.u=l,this.v=o,this},transformCoordinatesLocal:function(l,o,u,v){var d=this.x,c=this.y,p=this.z,g=l.val,m=d*g[0]+c*g[4]+p*g[8]+g[12],x=d*g[1]+c*g[5]+p*g[9]+g[13],y=d*g[2]+c*g[6]+p*g[10]+g[14],T=d*g[3]+c*g[7]+p*g[11]+g[15];this.vx=m/T*o,this.vy=-(x/T)*u,v<=0?this.vz=y/T:this.vz=-(y/T)},update:function(l,o,u,v,d,c,p,g){var m=this.vx*l+this.vy*u+d,x=this.vx*o+this.vy*v+c;return p&&(m=Math.round(m),x=Math.round(x)),this.tx=m,this.ty=x,this.ta=this.alpha*g,this},load:function(l,o,u,v,d){return l[++u]=this.tx,l[++u]=this.ty,l[++u]=this.u,l[++u]=this.v,l[++u]=v,l[++u]=d,o[++u]=h.getTintAppendFloatAlpha(this.color,this.ta),u}});e.exports=a},function(e,f,i){var n={};e.exports=n;var h=i(166),r=i(32),a=i(84),l=i(41);(function(){n.create=function(o){return r.extend({id:r.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{}},o)},n.setModified=function(o,u,v,d){if(h.trigger(o,"compositeModified",o),o.isModified=u,v&&o.parent&&n.setModified(o.parent,u,v,d),d)for(var c=0;c<o.composites.length;c++){var p=o.composites[c];n.setModified(p,u,v,d)}},n.add=function(o,u){var v=[].concat(u);h.trigger(o,"beforeAdd",{object:u});for(var d=0;d<v.length;d++){var c=v[d];switch(c.type){case"body":if(c.parent!==c){r.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}n.addBody(o,c);break;case"constraint":n.addConstraint(o,c);break;case"composite":n.addComposite(o,c);break;case"mouseConstraint":n.addConstraint(o,c.constraint);break}}return h.trigger(o,"afterAdd",{object:u}),o},n.remove=function(o,u,v){var d=[].concat(u);h.trigger(o,"beforeRemove",{object:u});for(var c=0;c<d.length;c++){var p=d[c];switch(p.type){case"body":n.removeBody(o,p,v);break;case"constraint":n.removeConstraint(o,p,v);break;case"composite":n.removeComposite(o,p,v);break;case"mouseConstraint":n.removeConstraint(o,p.constraint);break}}return h.trigger(o,"afterRemove",{object:u}),o},n.addComposite=function(o,u){return o.composites.push(u),u.parent=o,n.setModified(o,!0,!0,!1),o},n.removeComposite=function(o,u,v){var d=o.composites.indexOf(u);if(d!==-1&&(n.removeCompositeAt(o,d),n.setModified(o,!0,!0,!1)),v)for(var c=0;c<o.composites.length;c++)n.removeComposite(o.composites[c],u,!0);return o},n.removeCompositeAt=function(o,u){return o.composites.splice(u,1),n.setModified(o,!0,!0,!1),o},n.addBody=function(o,u){return o.bodies.push(u),n.setModified(o,!0,!0,!1),o},n.removeBody=function(o,u,v){var d=o.bodies.indexOf(u);if(d!==-1&&(n.removeBodyAt(o,d),n.setModified(o,!0,!0,!1)),v)for(var c=0;c<o.composites.length;c++)n.removeBody(o.composites[c],u,!0);return o},n.removeBodyAt=function(o,u){return o.bodies.splice(u,1),n.setModified(o,!0,!0,!1),o},n.addConstraint=function(o,u){return o.constraints.push(u),n.setModified(o,!0,!0,!1),o},n.removeConstraint=function(o,u,v){var d=o.constraints.indexOf(u);if(d!==-1&&n.removeConstraintAt(o,d),v)for(var c=0;c<o.composites.length;c++)n.removeConstraint(o.composites[c],u,!0);return o},n.removeConstraintAt=function(o,u){return o.constraints.splice(u,1),n.setModified(o,!0,!0,!1),o},n.clear=function(o,u,v){if(v)for(var d=0;d<o.composites.length;d++)n.clear(o.composites[d],u,!0);return u?o.bodies=o.bodies.filter(function(c){return c.isStatic}):o.bodies.length=0,o.constraints.length=0,o.composites.length=0,n.setModified(o,!0,!0,!1),o},n.allBodies=function(o){for(var u=[].concat(o.bodies),v=0;v<o.composites.length;v++)u=u.concat(n.allBodies(o.composites[v]));return u},n.allConstraints=function(o){for(var u=[].concat(o.constraints),v=0;v<o.composites.length;v++)u=u.concat(n.allConstraints(o.composites[v]));return u},n.allComposites=function(o){for(var u=[].concat(o.composites),v=0;v<o.composites.length;v++)u=u.concat(n.allComposites(o.composites[v]));return u},n.get=function(o,u,v){var d,c;switch(v){case"body":d=n.allBodies(o);break;case"constraint":d=n.allConstraints(o);break;case"composite":d=n.allComposites(o).concat(o);break}return d?(c=d.filter(function(p){return p.id.toString()===u.toString()}),c.length===0?null:c[0]):null},n.move=function(o,u,v){return n.remove(o,u),n.add(v,u),o},n.rebase=function(o){for(var u=n.allBodies(o).concat(n.allConstraints(o)).concat(n.allComposites(o)),v=0;v<u.length;v++)u[v].id=r.nextId();return n.setModified(o,!0,!0,!1),o},n.translate=function(o,u,v){for(var d=v?n.allBodies(o):o.bodies,c=0;c<d.length;c++)l.translate(d[c],u);return n.setModified(o,!0,!0,!1),o},n.rotate=function(o,u,v,d){for(var c=Math.cos(u),p=Math.sin(u),g=d?n.allBodies(o):o.bodies,m=0;m<g.length;m++){var x=g[m],y=x.position.x-v.x,T=x.position.y-v.y;l.setPosition(x,{x:v.x+(y*c-T*p),y:v.y+(y*p+T*c)}),l.rotate(x,u)}return n.setModified(o,!0,!0,!1),o},n.scale=function(o,u,v,d,c){for(var p=c?n.allBodies(o):o.bodies,g=0;g<p.length;g++){var m=p[g],x=m.position.x-d.x,y=m.position.y-d.y;l.setPosition(m,{x:d.x+x*u,y:d.y+y*v}),l.scale(m,u,v)}return n.setModified(o,!0,!0,!1),o},n.bounds=function(o){for(var u=n.allBodies(o),v=[],d=0;d<u.length;d+=1){var c=u[d];v.push(c.bounds.min,c.bounds.max)}return a.create(v)}})()},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r){return n>=0&&n<r.width&&h>=0&&h<r.height};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(29),r=i(2),a=new n({initialize:function(o){o===void 0&&(o={}),this.name=r(o,"name","layer"),this.x=r(o,"x",0),this.y=r(o,"y",0),this.width=r(o,"width",0),this.height=r(o,"height",0),this.tileWidth=r(o,"tileWidth",0),this.tileHeight=r(o,"tileHeight",0),this.baseTileWidth=r(o,"baseTileWidth",this.tileWidth),this.baseTileHeight=r(o,"baseTileHeight",this.tileHeight),this.orientation=r(o,"orientation",h.ORTHOGONAL),this.widthInPixels=r(o,"widthInPixels",this.width*this.baseTileWidth),this.heightInPixels=r(o,"heightInPixels",this.height*this.baseTileHeight),this.alpha=r(o,"alpha",1),this.visible=r(o,"visible",!0),this.properties=r(o,"properties",[]),this.indexes=r(o,"indexes",[]),this.collideIndexes=r(o,"collideIndexes",[]),this.callbacks=r(o,"callbacks",[]),this.bodies=r(o,"bodies",[]),this.data=r(o,"data",[]),this.tilemapLayer=r(o,"tilemapLayer",null),this.hexSideLength=r(o,"hexSideLength",0)}});e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(29),r=i(2),a=new n({initialize:function(o){o===void 0&&(o={}),this.name=r(o,"name","map"),this.width=r(o,"width",0),this.height=r(o,"height",0),this.infinite=r(o,"infinite",!1),this.tileWidth=r(o,"tileWidth",0),this.tileHeight=r(o,"tileHeight",0),this.widthInPixels=r(o,"widthInPixels",this.width*this.tileWidth),this.heightInPixels=r(o,"heightInPixels",this.height*this.tileHeight),this.format=r(o,"format",null),this.orientation=r(o,"orientation",h.ORTHOGONAL),this.renderOrder=r(o,"renderOrder","right-down"),this.version=r(o,"version","1"),this.properties=r(o,"properties",{}),this.layers=r(o,"layers",[]),this.images=r(o,"images",[]),this.objects=r(o,"objects",{}),this.collision=r(o,"collision",{}),this.tilesets=r(o,"tilesets",[]),this.imageCollections=r(o,"imageCollections",[]),this.tiles=r(o,"tiles",[]),this.hexSideLength=r(o,"hexSideLength",0)}});e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=new n({initialize:function(a,l,o,u,v,d,c,p){(o===void 0||o<=0)&&(o=32),(u===void 0||u<=0)&&(u=32),v===void 0&&(v=0),d===void 0&&(d=0),c===void 0&&(c={}),p===void 0&&(p={}),this.name=a,this.firstgid=l,this.tileWidth=o,this.tileHeight=u,this.tileMargin=v,this.tileSpacing=d,this.tileProperties=c,this.tileData=p,this.image=null,this.glTexture=null,this.rows=0,this.columns=0,this.total=0,this.texCoordinates=[]},getTileProperties:function(r){return this.containsTileIndex(r)?this.tileProperties[r-this.firstgid]:null},getTileData:function(r){return this.containsTileIndex(r)?this.tileData[r-this.firstgid]:null},getTileCollisionGroup:function(r){var a=this.getTileData(r);return a&&a.objectgroup?a.objectgroup:null},containsTileIndex:function(r){return r>=this.firstgid&&r<this.firstgid+this.total},getTileTextureCoordinates:function(r){return this.containsTileIndex(r)?this.texCoordinates[r-this.firstgid]:null},setImage:function(r){return this.image=r,this.glTexture=r.get().source.glTexture,this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setTileSize:function(r,a){return r!==void 0&&(this.tileWidth=r),a!==void 0&&(this.tileHeight=a),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setSpacing:function(r,a){return r!==void 0&&(this.tileMargin=r),a!==void 0&&(this.tileSpacing=a),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},updateTileData:function(r,a){var l=(a-this.tileMargin*2+this.tileSpacing)/(this.tileHeight+this.tileSpacing),o=(r-this.tileMargin*2+this.tileSpacing)/(this.tileWidth+this.tileSpacing);(l%1!==0||o%1!==0)&&console.warn("Image tile area not tile size multiple in: "+this.name),l=Math.floor(l),o=Math.floor(o),this.rows=l,this.columns=o,this.total=l*o,this.texCoordinates.length=0;for(var u=this.tileMargin,v=this.tileMargin,d=0;d<this.rows;d++){for(var c=0;c<this.columns;c++)this.texCoordinates.push({x:u,y:v}),u+=this.tileWidth+this.tileSpacing;u=this.tileMargin,v+=this.tileHeight+this.tileSpacing}return this}});e.exports=h},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r){return r===void 0&&(r=1e-4),Math.abs(n-h)<r};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(11),r=i(15),a=i(1068),l=new n({Extends:r,Mixins:[h.Alpha,h.BlendMode,h.Depth,h.Flip,h.GetBounds,h.Mask,h.Origin,h.Pipeline,h.ScrollFactor,h.Size,h.TextureCrop,h.Tint,h.Transform,h.Visible,a],initialize:function(u,v,d,c,p){r.call(this,u,"Image"),this._crop=this.resetCropObject(),this.setTexture(c,p),this.setPosition(v,d),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline()}});e.exports=l},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){return n.hasOwnProperty(h)};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(77),h=function(r,a){var l=n(r);for(var o in a)l.hasOwnProperty(o)||(l[o]=a[o]);return l};e.exports=h},function(e,f,i){var n={};e.exports=n;var h=i(64),r=i(83),a=i(165),l=i(84),o=i(271),u=i(32);(function(){n._warming=.4,n._torqueDampen=1,n._minLength=1e-6,n.create=function(v){var d=v;d.bodyA&&!d.pointA&&(d.pointA={x:0,y:0}),d.bodyB&&!d.pointB&&(d.pointB={x:0,y:0});var c=d.bodyA?r.add(d.bodyA.position,d.pointA):d.pointA,p=d.bodyB?r.add(d.bodyB.position,d.pointB):d.pointB,g=r.magnitude(r.sub(c,p));d.length=typeof d.length!="undefined"?d.length:g,d.id=d.id||u.nextId(),d.label=d.label||"Constraint",d.type="constraint",d.stiffness=d.stiffness||(d.length>0?1:.7),d.damping=d.damping||0,d.angularStiffness=d.angularStiffness||0,d.angleA=d.bodyA?d.bodyA.angle:d.angleA,d.angleB=d.bodyB?d.bodyB.angle:d.angleB,d.plugin={};var m={visible:!0,type:"line",anchors:!0,lineColor:null,lineOpacity:null,lineThickness:null,pinSize:null,anchorColor:null,anchorSize:null};return d.length===0&&d.stiffness>.1?(m.type="pin",m.anchors=!1):d.stiffness<.9&&(m.type="spring"),d.render=u.extend(m,d.render),d},n.preSolveAll=function(v){for(var d=0;d<v.length;d+=1){var c=v[d],p=c.constraintImpulse;c.isStatic||p.x===0&&p.y===0&&p.angle===0||(c.position.x+=p.x,c.position.y+=p.y,c.angle+=p.angle)}},n.solveAll=function(v,d){for(var c=0;c<v.length;c+=1){var p=v[c],g=!p.bodyA||p.bodyA&&p.bodyA.isStatic,m=!p.bodyB||p.bodyB&&p.bodyB.isStatic;(g||m)&&n.solve(v[c],d)}for(c=0;c<v.length;c+=1)p=v[c],g=!p.bodyA||p.bodyA&&p.bodyA.isStatic,m=!p.bodyB||p.bodyB&&p.bodyB.isStatic,!g&&!m&&n.solve(v[c],d)},n.solve=function(v,d){var c=v.bodyA,p=v.bodyB,g=v.pointA,m=v.pointB;if(!(!c&&!p)){c&&!c.isStatic&&(r.rotate(g,c.angle-v.angleA,g),v.angleA=c.angle),p&&!p.isStatic&&(r.rotate(m,p.angle-v.angleB,m),v.angleB=p.angle);var x=g,y=m;if(c&&(x=r.add(c.position,g)),p&&(y=r.add(p.position,m)),!(!x||!y)){var T=r.sub(x,y),C=r.magnitude(T);C<n._minLength&&(C=n._minLength);var S=(C-v.length)/C,E=v.stiffness<1?v.stiffness*d:v.stiffness,M=r.mult(T,S*E),O=(c?c.inverseMass:0)+(p?p.inverseMass:0),L=(c?c.inverseInertia:0)+(p?p.inverseInertia:0),R=O+L,F,D,B,N,U;if(v.damping){var X=r.create();B=r.div(T,C),U=r.sub(p&&r.sub(p.position,p.positionPrev)||X,c&&r.sub(c.position,c.positionPrev)||X),N=r.dot(B,U)}c&&!c.isStatic&&(D=c.inverseMass/O,c.constraintImpulse.x-=M.x*D,c.constraintImpulse.y-=M.y*D,c.position.x-=M.x*D,c.position.y-=M.y*D,v.damping&&(c.positionPrev.x-=v.damping*B.x*N*D,c.positionPrev.y-=v.damping*B.y*N*D),F=r.cross(g,M)/R*n._torqueDampen*c.inverseInertia*(1-v.angularStiffness),c.constraintImpulse.angle-=F,c.angle-=F),p&&!p.isStatic&&(D=p.inverseMass/O,p.constraintImpulse.x+=M.x*D,p.constraintImpulse.y+=M.y*D,p.position.x+=M.x*D,p.position.y+=M.y*D,v.damping&&(p.positionPrev.x+=v.damping*B.x*N*D,p.positionPrev.y+=v.damping*B.y*N*D),F=r.cross(m,M)/R*n._torqueDampen*p.inverseInertia*(1-v.angularStiffness),p.constraintImpulse.angle+=F,p.angle+=F)}}},n.postSolveAll=function(v){for(var d=0;d<v.length;d++){var c=v[d],p=c.constraintImpulse;if(!(c.isStatic||p.x===0&&p.y===0&&p.angle===0)){a.set(c,!1);for(var g=0;g<c.parts.length;g++){var m=c.parts[g];h.translate(m.vertices,p),g>0&&(m.position.x+=p.x,m.position.y+=p.y),p.angle!==0&&(h.rotate(m.vertices,p.angle,c.position),o.rotate(m.axes,p.angle),g>0&&r.rotateAbout(m.position,p.angle,c.position,m.position)),l.update(m.bounds,m.vertices,c.velocity)}p.angle*=n._warming,p.x*=n._warming,p.y*=n._warming}}},n.pointAWorld=function(v){return{x:(v.bodyA?v.bodyA.position.x:0)+v.pointA.x,y:(v.bodyA?v.bodyA.position.y:0)+v.pointA.y}},n.pointBWorld=function(v){return{x:(v.bodyB?v.bodyB.position.x:0)+v.pointB.x,y:(v.bodyB?v.bodyB.position.y:0)+v.pointB.y}}})()},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(35),h=i(65),r=i(66),a=i(0),l=i(11),o=i(15),u=i(10),v=i(57),d=new a({Extends:o,Mixins:[l.Depth,l.GetBounds,l.Origin,l.Transform,l.ScrollFactor,l.Visible],initialize:function(p,g,m,x,y){x===void 0&&(x=1),y===void 0&&(y=x),o.call(this,p,"Zone"),this.setPosition(g,m),this.width=x,this.height=y,this.blendMode=n.NORMAL,this.updateDisplayOrigin()},displayWidth:{get:function(){return this.scaleX*this.width},set:function(c){this.scaleX=c/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(c){this.scaleY=c/this.height}},setSize:function(c,p,g){g===void 0&&(g=!0),this.width=c,this.height=p,this.updateDisplayOrigin();var m=this.input;return g&&m&&!m.customHitArea&&(m.hitArea.width=c,m.hitArea.height=p),this},setDisplaySize:function(c,p){return this.displayWidth=c,this.displayHeight=p,this},setCircleDropZone:function(c){return this.setDropZone(new h(0,0,c),r)},setRectangleDropZone:function(c,p){return this.setDropZone(new u(0,0,c,p),v)},setDropZone:function(c,p){return c===void 0?this.setRectangleDropZone(this.width,this.height):this.input||this.setInteractive(c,p,!0),this},setAlpha:function(){},setBlendMode:function(){},renderCanvas:function(c,p,g){g.addToRenderList(p)},renderWebGL:function(c,p,g){g.addToRenderList(p)}});e.exports=d},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return 2*(n.width+n.height)};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){for(var h=n.length-1;h>0;h--){var r=Math.floor(Math.random()*(h+1)),a=n[h];n[h]=n[r],n[r]=a}return n};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ADD_ANIMATION:i(724),ANIMATION_COMPLETE:i(725),ANIMATION_COMPLETE_KEY:i(726),ANIMATION_REPEAT:i(727),ANIMATION_RESTART:i(728),ANIMATION_START:i(729),ANIMATION_STOP:i(730),ANIMATION_UPDATE:i(731),PAUSE_ALL:i(732),REMOVE_ANIMATION:i(733),RESUME_ALL:i(734)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(11),r=i(36),a=i(9),l=i(37),o=i(10),u=i(25),v=i(187),d=i(3),c=new n({Extends:a,Mixins:[h.Alpha,h.Visible],initialize:function(g,m,x,y){g===void 0&&(g=0),m===void 0&&(m=0),x===void 0&&(x=0),y===void 0&&(y=0),a.call(this),this.scene,this.sceneManager,this.scaleManager,this.cameraManager,this.id=0,this.name="",this.roundPixels=!1,this.useBounds=!1,this.worldView=new o,this.dirty=!0,this._x=g,this._y=m,this._width=x,this._height=y,this._bounds=new o,this._scrollX=0,this._scrollY=0,this._zoomX=1,this._zoomY=1,this._rotation=0,this.matrix=new u,this.transparent=!0,this.backgroundColor=v("rgba(0,0,0,0)"),this.disableCull=!1,this.culledObjects=[],this.midPoint=new d(x/2,y/2),this.originX=.5,this.originY=.5,this._customViewport=!1,this.mask=null,this._maskCamera=null,this.renderList=[]},addToRenderList:function(p){this.renderList.push(p)},setOrigin:function(p,g){return p===void 0&&(p=.5),g===void 0&&(g=p),this.originX=p,this.originY=g,this},getScroll:function(p,g,m){m===void 0&&(m=new d);var x=this.width*.5,y=this.height*.5;return m.x=p-x,m.y=g-y,this.useBounds&&(m.x=this.clampX(m.x),m.y=this.clampY(m.y)),m},centerOnX:function(p){var g=this.width*.5;return this.midPoint.x=p,this.scrollX=p-g,this.useBounds&&(this.scrollX=this.clampX(this.scrollX)),this},centerOnY:function(p){var g=this.height*.5;return this.midPoint.y=p,this.scrollY=p-g,this.useBounds&&(this.scrollY=this.clampY(this.scrollY)),this},centerOn:function(p,g){return this.centerOnX(p),this.centerOnY(g),this},centerToBounds:function(){if(this.useBounds){var p=this._bounds,g=this.width*.5,m=this.height*.5;this.midPoint.set(p.centerX,p.centerY),this.scrollX=p.centerX-g,this.scrollY=p.centerY-m}return this},centerToSize:function(){return this.scrollX=this.width*.5,this.scrollY=this.height*.5,this},cull:function(p){if(this.disableCull)return p;var g=this.matrix.matrix,m=g[0],x=g[1],y=g[2],T=g[3],C=m*T-x*y;if(!C)return p;var S=g[4],E=g[5],M=this.scrollX,O=this.scrollY,L=this.width,R=this.height,F=this.y,D=F+R,B=this.x,N=B+L,U=this.culledObjects,X=p.length;C=1/C,U.length=0;for(var K=0;K<X;++K){var k=p[K];if(!k.hasOwnProperty("width")||k.parentContainer){U.push(k);continue}var b=k.width,I=k.height,G=k.x-M*k.scrollFactorX-b*k.originX,Y=k.y-O*k.scrollFactorY-I*k.originY,V=G*m+Y*y+S,W=G*x+Y*T+E,H=(G+b)*m+(Y+I)*y+S,Z=(G+b)*x+(Y+I)*T+E;H>B&&V<N&&Z>F&&W<D&&U.push(k)}return U},getWorldPoint:function(p,g,m){m===void 0&&(m=new d);var x=this.matrix.matrix,y=x[0],T=x[1],C=x[2],S=x[3],E=x[4],M=x[5],O=y*S-T*C;if(!O)return m.x=p,m.y=g,m;O=1/O;var L=S*O,R=-T*O,F=-C*O,D=y*O,B=(C*M-S*E)*O,N=(T*E-y*M)*O,U=Math.cos(this.rotation),X=Math.sin(this.rotation),K=this.zoomX,k=this.zoomY,b=this.scrollX,I=this.scrollY,G=p+(b*U-I*X)*K,Y=g+(b*X+I*U)*k;return m.x=G*L+Y*F+B,m.y=G*R+Y*D+N,m},ignore:function(p){var g=this.id;Array.isArray(p)||(p=[p]);for(var m=0;m<p.length;m++){var x=p[m];Array.isArray(x)?this.ignore(x):x.isParent?this.ignore(x.getChildren()):x.cameraFilter|=g}return this},preRender:function(){this.renderList.length=0;var p=this.width,g=this.height,m=p*.5,x=g*.5,y=this.zoomX,T=this.zoomY,C=this.matrix,S=p*this.originX,E=g*this.originY,M=this.scrollX,O=this.scrollY;this.useBounds&&(M=this.clampX(M),O=this.clampY(O)),this.roundPixels&&(S=Math.round(S),E=Math.round(E)),this.scrollX=M,this.scrollY=O;var L=M+m,R=O+x;this.midPoint.set(L,R);var F=p/y,D=g/T;this.worldView.setTo(L-F/2,R-D/2,F,D),C.applyITRS(this.x+S,this.y+E,this.rotation,y,T),C.translate(-S,-E)},clampX:function(p){var g=this._bounds,m=this.displayWidth,x=g.x+(m-this.width)/2,y=Math.max(x,x+g.width-m);return p<x?p=x:p>y&&(p=y),p},clampY:function(p){var g=this._bounds,m=this.displayHeight,x=g.y+(m-this.height)/2,y=Math.max(x,x+g.height-m);return p<x?p=x:p>y&&(p=y),p},removeBounds:function(){return this.useBounds=!1,this.dirty=!0,this._bounds.setEmpty(),this},setAngle:function(p){return p===void 0&&(p=0),this.rotation=r(p),this},setBackgroundColor:function(p){return p===void 0&&(p="rgba(0,0,0,0)"),this.backgroundColor=v(p),this.transparent=this.backgroundColor.alpha===0,this},setBounds:function(p,g,m,x,y){return y===void 0&&(y=!1),this._bounds.setTo(p,g,m,x),this.dirty=!0,this.useBounds=!0,y?this.centerToBounds():(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},getBounds:function(p){p===void 0&&(p=new o);var g=this._bounds;return p.setTo(g.x,g.y,g.width,g.height),p},setName:function(p){return p===void 0&&(p=""),this.name=p,this},setPosition:function(p,g){return g===void 0&&(g=p),this.x=p,this.y=g,this},setRotation:function(p){return p===void 0&&(p=0),this.rotation=p,this},setRoundPixels:function(p){return this.roundPixels=p,this},setScene:function(p){this.scene&&this._customViewport&&this.sceneManager.customViewports--,this.scene=p;var g=p.sys;return this.sceneManager=g.game.scene,this.scaleManager=g.scale,this.cameraManager=g.cameras,this.updateSystem(),this},setScroll:function(p,g){return g===void 0&&(g=p),this.scrollX=p,this.scrollY=g,this},setSize:function(p,g){return g===void 0&&(g=p),this.width=p,this.height=g,this},setViewport:function(p,g,m,x){return this.x=p,this.y=g,this.width=m,this.height=x,this},setZoom:function(p,g){return p===void 0&&(p=1),g===void 0&&(g=p),p===0&&(p=.001),g===0&&(g=.001),this.zoomX=p,this.zoomY=g,this},setMask:function(p,g){return g===void 0&&(g=!0),this.mask=p,this._maskCamera=g?this.cameraManager.default:this,this},clearMask:function(p){return p===void 0&&(p=!1),p&&this.mask&&this.mask.destroy(),this.mask=null,this},toJSON:function(){var p={name:this.name,x:this.x,y:this.y,width:this.width,height:this.height,zoom:this.zoom,rotation:this.rotation,roundPixels:this.roundPixels,scrollX:this.scrollX,scrollY:this.scrollY,backgroundColor:this.backgroundColor.rgba};return this.useBounds&&(p.bounds={x:this._bounds.x,y:this._bounds.y,width:this._bounds.width,height:this._bounds.height}),p},update:function(){},updateSystem:function(){if(!!this.scaleManager){var p=this._x!==0||this._y!==0||this.scaleManager.width!==this._width||this.scaleManager.height!==this._height,g=this.sceneManager;p&&!this._customViewport?g.customViewports++:!p&&this._customViewport&&g.customViewports--,this.dirty=!0,this._customViewport=p}},destroy:function(){this.emit(l.DESTROY,this),this.removeAllListeners(),this.matrix.destroy(),this.culledObjects=[],this._customViewport&&this.sceneManager.customViewports--,this.renderList=[],this._bounds=null,this.scene=null,this.scaleManager=null,this.sceneManager=null,this.cameraManager=null},x:{get:function(){return this._x},set:function(p){this._x=p,this.updateSystem()}},y:{get:function(){return this._y},set:function(p){this._y=p,this.updateSystem()}},width:{get:function(){return this._width},set:function(p){this._width=p,this.updateSystem()}},height:{get:function(){return this._height},set:function(p){this._height=p,this.updateSystem()}},scrollX:{get:function(){return this._scrollX},set:function(p){this._scrollX=p,this.dirty=!0}},scrollY:{get:function(){return this._scrollY},set:function(p){this._scrollY=p,this.dirty=!0}},zoom:{get:function(){return(this._zoomX+this._zoomY)/2},set:function(p){this._zoomX=p,this._zoomY=p,this.dirty=!0}},zoomX:{get:function(){return this._zoomX},set:function(p){this._zoomX=p,this.dirty=!0}},zoomY:{get:function(){return this._zoomY},set:function(p){this._zoomY=p,this.dirty=!0}},rotation:{get:function(){return this._rotation},set:function(p){this._rotation=p,this.dirty=!0}},centerX:{get:function(){return this.x+.5*this.width}},centerY:{get:function(){return this.y+.5*this.height}},displayWidth:{get:function(){return this.width/this.zoomX}},displayHeight:{get:function(){return this.height/this.zoomY}}});e.exports=c},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(334),h=i(335),r=i(336),a=i(337),l=i(338),o=i(339),u=i(340),v=i(341),d=i(342),c=i(343),p=i(344),g=i(345);e.exports={Power0:u,Power1:v.Out,Power2:a.Out,Power3:d.Out,Power4:c.Out,Linear:u,Quad:v.Out,Cubic:a.Out,Quart:d.Out,Quint:c.Out,Sine:p.Out,Expo:o.Out,Circ:r.Out,Elastic:l.Out,Back:n.Out,Bounce:h.Out,Stepped:g,"Quad.easeIn":v.In,"Cubic.easeIn":a.In,"Quart.easeIn":d.In,"Quint.easeIn":c.In,"Sine.easeIn":p.In,"Expo.easeIn":o.In,"Circ.easeIn":r.In,"Elastic.easeIn":l.In,"Back.easeIn":n.In,"Bounce.easeIn":h.In,"Quad.easeOut":v.Out,"Cubic.easeOut":a.Out,"Quart.easeOut":d.Out,"Quint.easeOut":c.Out,"Sine.easeOut":p.Out,"Expo.easeOut":o.Out,"Circ.easeOut":r.Out,"Elastic.easeOut":l.Out,"Back.easeOut":n.Out,"Bounce.easeOut":h.Out,"Quad.easeInOut":v.InOut,"Cubic.easeInOut":a.InOut,"Quart.easeInOut":d.InOut,"Quint.easeInOut":c.InOut,"Sine.easeInOut":p.InOut,"Expo.easeInOut":o.InOut,"Circ.easeInOut":r.InOut,"Elastic.easeInOut":l.InOut,"Back.easeInOut":n.InOut,"Bounce.easeInOut":h.InOut}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r){return(h-n)*r+n};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(105),h={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0};function r(){var a=navigator.userAgent;return/Edge\/\d+/.test(a)?h.edge=!0:/Chrome\/(\d+)/.test(a)&&!n.windowsPhone?(h.chrome=!0,h.chromeVersion=parseInt(RegExp.$1,10)):/Firefox\D+(\d+)/.test(a)?(h.firefox=!0,h.firefoxVersion=parseInt(RegExp.$1,10)):/AppleWebKit/.test(a)&&n.iOS?h.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(a)?(h.ie=!0,h.ieVersion=parseInt(RegExp.$1,10)):/Opera/.test(a)?h.opera=!0:/Safari/.test(a)&&!n.windowsPhone?h.safari=!0:/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(a)&&(h.ie=!0,h.trident=!0,h.tridentVersion=parseInt(RegExp.$1,10),h.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(a)&&(h.silk=!0),h}e.exports=r()},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){return Math.random()*(h-n)+n};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){return n>0&&(n&n-1)===0&&h>0&&(h&h-1)===0};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r,a){return r===void 0&&(r=0),h===0?n:(n-=r,n=h*Math.ceil(n/h),a?(r+n)/h:r+n)};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=new n({initialize:function(a,l,o,u){this.x=0,this.y=0,this.z=0,this.w=0,typeof a=="object"?(this.x=a.x||0,this.y=a.y||0,this.z=a.z||0,this.w=a.w||0):(this.x=a||0,this.y=l||0,this.z=o||0,this.w=u||0)},clone:function(){return new h(this.x,this.y,this.z,this.w)},copy:function(r){return this.x=r.x,this.y=r.y,this.z=r.z||0,this.w=r.w||0,this},equals:function(r){return this.x===r.x&&this.y===r.y&&this.z===r.z&&this.w===r.w},set:function(r,a,l,o){return typeof r=="object"?(this.x=r.x||0,this.y=r.y||0,this.z=r.z||0,this.w=r.w||0):(this.x=r||0,this.y=a||0,this.z=l||0,this.w=o||0),this},add:function(r){return this.x+=r.x,this.y+=r.y,this.z+=r.z||0,this.w+=r.w||0,this},subtract:function(r){return this.x-=r.x,this.y-=r.y,this.z-=r.z||0,this.w-=r.w||0,this},scale:function(r){return this.x*=r,this.y*=r,this.z*=r,this.w*=r,this},length:function(){var r=this.x,a=this.y,l=this.z,o=this.w;return Math.sqrt(r*r+a*a+l*l+o*o)},lengthSq:function(){var r=this.x,a=this.y,l=this.z,o=this.w;return r*r+a*a+l*l+o*o},normalize:function(){var r=this.x,a=this.y,l=this.z,o=this.w,u=r*r+a*a+l*l+o*o;return u>0&&(u=1/Math.sqrt(u),this.x=r*u,this.y=a*u,this.z=l*u,this.w=o*u),this},dot:function(r){return this.x*r.x+this.y*r.y+this.z*r.z+this.w*r.w},lerp:function(r,a){a===void 0&&(a=0);var l=this.x,o=this.y,u=this.z,v=this.w;return this.x=l+a*(r.x-l),this.y=o+a*(r.y-o),this.z=u+a*(r.z-u),this.w=v+a*(r.w-v),this},multiply:function(r){return this.x*=r.x,this.y*=r.y,this.z*=r.z||1,this.w*=r.w||1,this},divide:function(r){return this.x/=r.x,this.y/=r.y,this.z/=r.z||1,this.w/=r.w||1,this},distance:function(r){var a=r.x-this.x,l=r.y-this.y,o=r.z-this.z||0,u=r.w-this.w||0;return Math.sqrt(a*a+l*l+o*o+u*u)},distanceSq:function(r){var a=r.x-this.x,l=r.y-this.y,o=r.z-this.z||0,u=r.w-this.w||0;return a*a+l*l+o*o+u*u},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function(r){var a=this.x,l=this.y,o=this.z,u=this.w,v=r.val;return this.x=v[0]*a+v[4]*l+v[8]*o+v[12]*u,this.y=v[1]*a+v[5]*l+v[9]*o+v[13]*u,this.z=v[2]*a+v[6]*l+v[10]*o+v[14]*u,this.w=v[3]*a+v[7]*l+v[11]*o+v[15]*u,this},transformQuat:function(r){var a=this.x,l=this.y,o=this.z,u=r.x,v=r.y,d=r.z,c=r.w,p=c*a+v*o-d*l,g=c*l+d*a-u*o,m=c*o+u*l-v*a,x=-u*a-v*l-d*o;return this.x=p*c+x*-u+g*-d-m*-v,this.y=g*c+x*-v+m*-u-p*-d,this.z=m*c+x*-d+p*-v-g*-u,this},reset:function(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});h.prototype.sub=h.prototype.subtract,h.prototype.mul=h.prototype.multiply,h.prototype.div=h.prototype.divide,h.prototype.dist=h.prototype.distance,h.prototype.distSq=h.prototype.distanceSq,h.prototype.len=h.prototype.length,h.prototype.lenSq=h.prototype.lengthSq,e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(91),r=new n({initialize:function(l,o,u,v,d,c,p){v===void 0&&(v=1),d===void 0&&(d=0),c===void 0&&(c=!0),p===void 0&&(p=!1),this.renderer=l,this.framebuffer=null,this.texture=null,this.width=0,this.height=0,this.scale=v,this.minFilter=d,this.autoClear=c,this.autoResize=!1,this.resize(o,u),p&&this.setAutoResize(!0)},setAutoResize:function(a){return a&&!this.autoResize?(this.renderer.on(h.RESIZE,this.resize,this),this.autoResize=!0):!a&&this.autoResize&&(this.renderer.off(h.RESIZE,this.resize,this),this.autoResize=!1),this},resize:function(a,l){var o=a*this.scale,u=l*this.scale;if(o!==this.width||u!==this.height){var v=this.renderer;v.deleteFramebuffer(this.framebuffer),v.deleteTexture(this.texture),a*=this.scale,l*=this.scale,a=Math.round(a),l=Math.round(l),a<=0&&(a=1),l<=0&&(l=1),this.texture=v.createTextureFromSource(null,a,l,this.minFilter),this.framebuffer=v.createFramebuffer(a,l,this.texture,!1),this.width=a,this.height=l}return this},bind:function(a,l,o){if(a===void 0&&(a=!1),a&&this.renderer.flush(),l&&o&&this.resize(l,o),this.renderer.pushFramebuffer(this.framebuffer,!1,!1,!1),a&&this.adjustViewport(),this.autoClear){var u=this.renderer.gl;u.clearColor(0,0,0,0),u.clear(u.COLOR_BUFFER_BIT)}},adjustViewport:function(){var a=this.renderer.gl;a.viewport(0,0,this.width,this.height),a.disable(a.SCISSOR_TEST)},clear:function(){var a=this.renderer,l=a.gl;a.pushFramebuffer(this.framebuffer),l.disable(l.SCISSOR_TEST),l.clearColor(0,0,0,0),l.clear(l.COLOR_BUFFER_BIT),a.popFramebuffer(),a.resetScissor()},unbind:function(a){a===void 0&&(a=!1);var l=this.renderer;return a&&l.flush(),l.popFramebuffer()},destroy:function(){var a=this.renderer;a.deleteFramebuffer(this.framebuffer),a.deleteTexture(this.texture),a.off(h.RESIZE,this.resize,this),this.renderer=null,this.framebuffer=null,this.texture=null}});e.exports=r},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){var r;if(h)typeof h=="string"?r=document.getElementById(h):typeof h=="object"&&h.nodeType===1&&(r=h);else if(n.parentElement||h===null)return n;return r||(r=document.body),r.appendChild(n),n};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:42,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ADD:107,NUMPAD_SUBTRACT:109,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SEMICOLON:186,PLUS:187,COMMA:188,MINUS:189,PERIOD:190,FORWARD_SLASH:191,BACK_SLASH:220,QUOTES:222,BACKTICK:192,OPEN_BRACKET:219,CLOSED_BRACKET:221,SEMICOLON_FIREFOX:59,COLON:58,COMMA_FIREFOX_WINDOWS:60,COMMA_FIREFOX:62,BRACKET_RIGHT_FIREFOX:174,BRACKET_LEFT_FIREFOX:175};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={PENDING:0,INIT:1,START:2,LOADING:3,CREATING:4,RUNNING:5,PAUSED:6,SLEEPING:7,SHUTDOWN:8,DESTROYED:9};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(77),r=i(9),a=i(70),l=i(22),o=i(1),u=i(207),v=i(428),d=new n({Extends:r,initialize:function(p){r.call(this),this.game=p,this.jsonCache=p.cache.json,this.sounds=[],this.mute=!1,this.volume=1,this.pauseOnBlur=!0,this._rate=1,this._detune=0,this.locked=this.locked||!1,this.unlocked=!1,p.events.on(l.BLUR,this.onGameBlur,this),p.events.on(l.FOCUS,this.onGameFocus,this),p.events.on(l.PRE_STEP,this.update,this),p.events.once(l.DESTROY,this.destroy,this)},add:o,addAudioSprite:function(c,p){p===void 0&&(p={});var g=this.add(c,p);g.spritemap=this.jsonCache.get(c).spritemap;for(var m in g.spritemap)if(!!g.spritemap.hasOwnProperty(m)){var x=h(p),y=g.spritemap[m];x.loop=y.hasOwnProperty("loop")?y.loop:!1,g.addMarker({name:m,start:y.start,duration:y.end-y.start,config:x})}return g},get:function(c){return v(this.sounds,"key",c)},getAll:function(c){return u(this.sounds,"key",c)},play:function(c,p){var g=this.add(c);return g.once(a.COMPLETE,g.destroy,g),p?p.name?(g.addMarker(p),g.play(p.name)):g.play(p):g.play()},playAudioSprite:function(c,p,g){var m=this.addAudioSprite(c);return m.once(a.COMPLETE,m.destroy,m),m.play(p,g)},remove:function(c){var p=this.sounds.indexOf(c);return p!==-1?(c.destroy(),this.sounds.splice(p,1),!0):!1},removeAll:function(){this.sounds.forEach(function(c){c.destroy()}),this.sounds.length=0},removeByKey:function(c){for(var p=0,g=this.sounds.length-1;g>=0;g--){var m=this.sounds[g];m.key===c&&(m.destroy(),this.sounds.splice(g,1),p++)}return p},pauseAll:function(){this.forEachActiveSound(function(c){c.pause()}),this.emit(a.PAUSE_ALL,this)},resumeAll:function(){this.forEachActiveSound(function(c){c.resume()}),this.emit(a.RESUME_ALL,this)},stopAll:function(){this.forEachActiveSound(function(c){c.stop()}),this.emit(a.STOP_ALL,this)},stopByKey:function(c){var p=0;return this.getAll(c).forEach(function(g){g.stop()&&p++}),p},unlock:o,onBlur:o,onFocus:o,onGameBlur:function(){this.pauseOnBlur&&this.onBlur()},onGameFocus:function(){this.pauseOnBlur&&this.onFocus()},update:function(c,p){this.unlocked&&(this.unlocked=!1,this.locked=!1,this.emit(a.UNLOCKED,this));for(var g=this.sounds.length-1;g>=0;g--)this.sounds[g].pendingRemove&&this.sounds.splice(g,1);this.sounds.forEach(function(m){m.update(c,p)})},destroy:function(){this.game.events.off(l.BLUR,this.onGameBlur,this),this.game.events.off(l.FOCUS,this.onGameFocus,this),this.game.events.off(l.PRE_STEP,this.update,this),this.removeAllListeners(),this.removeAll(),this.sounds.length=0,this.sounds=null,this.game=null},forEachActiveSound:function(c,p){var g=this;this.sounds.forEach(function(m,x){m&&!m.pendingRemove&&c.call(p||g,m,x,g.sounds)})},setRate:function(c){return this.rate=c,this},rate:{get:function(){return this._rate},set:function(c){this._rate=c,this.forEachActiveSound(function(p){p.calculateRate()}),this.emit(a.GLOBAL_RATE,this,c)}},setDetune:function(c){return this.detune=c,this},detune:{get:function(){return this._detune},set:function(c){this._detune=c,this.forEachActiveSound(function(p){p.calculateRate()}),this.emit(a.GLOBAL_DETUNE,this,c)}}});e.exports=d},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(9),r=i(70),a=i(17),l=i(1),o=new n({Extends:h,initialize:function(v,d,c){h.call(this),this.manager=v,this.key=d,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=this.duration||0,this.totalDuration=this.totalDuration||0,this.config={mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},this.currentConfig=this.config,this.config=a(this.config,c),this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:function(u){return!u||!u.name||typeof u.name!="string"?!1:this.markers[u.name]?(console.error("addMarker "+u.name+" already exists in Sound"),!1):(u=a(!0,{name:"",start:0,duration:this.totalDuration-(u.start||0),config:{mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0}},u),this.markers[u.name]=u,!0)},updateMarker:function(u){return!u||!u.name||typeof u.name!="string"?!1:this.markers[u.name]?(this.markers[u.name]=a(!0,this.markers[u.name],u),!0):(console.warn("Audio Marker: "+u.name+" missing in Sound: "+this.key),!1)},removeMarker:function(u){var v=this.markers[u];return v?(this.markers[u]=null,v):null},play:function(u,v){if(u===void 0&&(u=""),typeof u=="object"&&(v=u,u=""),typeof u!="string")return!1;if(!u)this.currentMarker=null,this.currentConfig=this.config,this.duration=this.totalDuration;else{if(!this.markers[u])return console.warn("Marker: "+u+" missing in Sound: "+this.key),!1;this.currentMarker=this.markers[u],this.currentConfig=this.currentMarker.config,this.duration=this.currentMarker.duration}return this.resetConfig(),this.currentConfig=a(this.currentConfig,v),this.isPlaying=!0,this.isPaused=!1,!0},pause:function(){return this.isPaused||!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!0,!0)},resume:function(){return!this.isPaused||this.isPlaying?!1:(this.isPlaying=!0,this.isPaused=!1,!0)},stop:function(){return!this.isPaused&&!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!1,this.resetConfig(),!0)},applyConfig:function(){this.mute=this.currentConfig.mute,this.volume=this.currentConfig.volume,this.rate=this.currentConfig.rate,this.detune=this.currentConfig.detune,this.loop=this.currentConfig.loop,this.pan=this.currentConfig.pan},resetConfig:function(){this.currentConfig.seek=0,this.currentConfig.delay=0},update:l,calculateRate:function(){var u=1.0005777895065548,v=this.currentConfig.detune+this.manager.detune,d=Math.pow(u,v);this.totalRate=this.currentConfig.rate*this.manager.rate*d},destroy:function(){this.pendingRemove||(this.emit(r.DESTROY,this),this.pendingRemove=!0,this.manager=null,this.key="",this.removeAllListeners(),this.isPlaying=!1,this.isPaused=!1,this.config=null,this.currentConfig=null,this.markers=null,this.currentMarker=null)}});e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(209),h=i(435),r=function(a,l){if(l===void 0&&(l=90),!n(a))return null;if(typeof l!="string"&&(l=(l%360+360)%360),l===90||l===-270||l==="rotateLeft")a=h(a),a.reverse();else if(l===-90||l===270||l==="rotateRight")a.reverse(),a=h(a);else if(Math.abs(l)===180||l==="rotate180"){for(var o=0;o<a.length;o++)a[o].reverse();a.reverse()}return a};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(18),r=i(11),a=i(15),l=i(1043),o=i(1044),u=i(212),v=i(10),d=i(1045),c=new n({Extends:a,Mixins:[r.Alpha,r.BlendMode,r.Depth,r.Mask,r.Origin,r.Pipeline,r.ScrollFactor,r.Texture,r.Tint,r.Transform,r.Visible,d],initialize:function(g,m,x,y,T,C,S){T===void 0&&(T=""),S===void 0&&(S=0),a.call(this,g,"BitmapText"),this.font=y;var E=this.scene.sys.cache.bitmapFont.get(y);E||console.warn("Invalid BitmapText key: "+y),this.fontData=E.data,this._text="",this._fontSize=C||this.fontData.size,this._letterSpacing=0,this._align=S,this._bounds=l(),this._dirty=!0,this._maxWidth=0,this.wordWrapCharCode=32,this.charColors=[],this.dropShadowX=0,this.dropShadowY=0,this.dropShadowColor=0,this.dropShadowAlpha=.5,this.fromAtlas=E.fromAtlas,this.setTexture(E.texture,E.frame),this.setPosition(m,x),this.setOrigin(0,0),this.initPipeline(),this.setText(T)},setLeftAlign:function(){return this._align=c.ALIGN_LEFT,this._dirty=!0,this},setCenterAlign:function(){return this._align=c.ALIGN_CENTER,this._dirty=!0,this},setRightAlign:function(){return this._align=c.ALIGN_RIGHT,this._dirty=!0,this},setFontSize:function(p){return this._fontSize=p,this._dirty=!0,this},setLetterSpacing:function(p){return p===void 0&&(p=0),this._letterSpacing=p,this._dirty=!0,this},setText:function(p){return!p&&p!==0&&(p=""),Array.isArray(p)&&(p=p.join(`
`)),p!==this.text&&(this._text=p.toString(),this._dirty=!0,this.updateDisplayOrigin()),this},setDropShadow:function(p,g,m,x){return p===void 0&&(p=0),g===void 0&&(g=0),m===void 0&&(m=0),x===void 0&&(x=.5),this.dropShadowX=p,this.dropShadowY=g,this.dropShadowColor=m,this.dropShadowAlpha=x,this},setCharacterTint:function(p,g,m,x,y,T,C){p===void 0&&(p=0),g===void 0&&(g=1),m===void 0&&(m=!1),x===void 0&&(x=-1),y===void 0&&(y=x,T=x,C=x);var S=this.text.length;g===-1&&(g=S),p<0&&(p=S+p),p=h(p,0,S-1);for(var E=h(p+g,p,S),M=this.charColors,O=p;O<E;O++){var L=M[O];if(x===-1)M[O]=null;else{var R=m?1:0;L?(L.tintEffect=R,L.tintTL=x,L.tintTR=y,L.tintBL=T,L.tintBR=C):M[O]={tintEffect:R,tintTL:x,tintTR:y,tintBL:T,tintBR:C}}}return this},setWordTint:function(p,g,m,x,y,T,C){g===void 0&&(g=1);for(var S=this.getTextBounds(),E=S.words,M=typeof p=="number",O=0,L=0;L<E.length;L++){var R=E[L];if((M&&L===p||!M&&R.word===p)&&(this.setCharacterTint(R.i,R.word.length,m,x,y,T,C),O++,O===g))return this}return this},getTextBounds:function(p){var g=this._bounds;return(this._dirty||p||this.scaleX!==g.scaleX||this.scaleY!==g.scaleY)&&(l(this,p,!0,g),this._dirty=!1),g},getCharacterAt:function(p,g,m){for(var x=this.getLocalPoint(p,g,null,m),y=this.getTextBounds(),T=y.characters,C=new v,S=0;S<T.length;S++){var E=T[S];if(C.setTo(E.x,E.t,E.r-E.x,E.b),C.contains(x.x,x.y))return E}return null},updateDisplayOrigin:function(){return this._dirty=!0,this.getTextBounds(!1),this},setFont:function(p,g,m){if(g===void 0&&(g=this._fontSize),m===void 0&&(m=this._align),p!==this.font){var x=this.scene.sys.cache.bitmapFont.get(p);x&&(this.font=p,this.fontData=x.data,this._fontSize=g,this._align=m,this.fromAtlas=x.fromAtlas===!0,this.setTexture(x.texture,x.frame),l(this,!1,!0,this._bounds))}return this},setMaxWidth:function(p,g){return this._maxWidth=p,this._dirty=!0,g!==void 0&&(this.wordWrapCharCode=g),this},align:{set:function(p){this._align=p,this._dirty=!0},get:function(){return this._align}},text:{set:function(p){this.setText(p)},get:function(){return this._text}},fontSize:{set:function(p){this._fontSize=p,this._dirty=!0},get:function(){return this._fontSize}},letterSpacing:{set:function(p){this._letterSpacing=p,this._dirty=!0},get:function(){return this._letterSpacing}},maxWidth:{set:function(p){this._maxWidth=p,this._dirty=!0},get:function(){return this._maxWidth}},width:{get:function(){return this.getTextBounds(!1),this._bounds.global.width}},height:{get:function(){return this.getTextBounds(!1),this._bounds.global.height}},toJSON:function(){var p=r.ToJSON(this),g={font:this.font,text:this.text,fontSize:this.fontSize,letterSpacing:this.letterSpacing,align:this.align};return p.data=g,p},preDestroy:function(){this.charColors.length=0,this._bounds=null,this.fontData=null}});c.ALIGN_LEFT=0,c.ALIGN_CENTER=1,c.ALIGN_RIGHT=2,c.ParseFromAtlas=o,c.ParseXMLBitmapFont=u,e.exports=c},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=new n({initialize:function(a){if(this.entries=[],Array.isArray(a))for(var l=0;l<a.length;l++)this.set(a[l])},set:function(r){return this.entries.indexOf(r)===-1&&this.entries.push(r),this},get:function(r,a){for(var l=0;l<this.entries.length;l++){var o=this.entries[l];if(o[r]===a)return o}},getArray:function(){return this.entries.slice(0)},delete:function(r){var a=this.entries.indexOf(r);return a>-1&&this.entries.splice(a,1),this},dump:function(){console.group("Set");for(var r=0;r<this.entries.length;r++){var a=this.entries[r];console.log(a)}console.groupEnd()},each:function(r,a){var l,o=this.entries.slice(),u=o.length;if(a)for(l=0;l<u&&r.call(a,o[l],l)!==!1;l++);else for(l=0;l<u&&r(o[l],l)!==!1;l++);return this},iterate:function(r,a){var l,o=this.entries.length;if(a)for(l=0;l<o&&r.call(a,this.entries[l],l)!==!1;l++);else for(l=0;l<o&&r(this.entries[l],l)!==!1;l++);return this},iterateLocal:function(r){var a,l=[];for(a=1;a<arguments.length;a++)l.push(arguments[a]);var o=this.entries.length;for(a=0;a<o;a++){var u=this.entries[a];u[r].apply(u,l)}return this},clear:function(){return this.entries.length=0,this},contains:function(r){return this.entries.indexOf(r)>-1},union:function(r){var a=new h;return r.entries.forEach(function(l){a.set(l)}),this.entries.forEach(function(l){a.set(l)}),a},intersect:function(r){var a=new h;return this.entries.forEach(function(l){r.contains(l)&&a.set(l)}),a},difference:function(r){var a=new h;return this.entries.forEach(function(l){r.contains(l)||a.set(l)}),a},size:{get:function(){return this.entries.length},set:function(r){return r<this.entries.length?this.entries.length=r:this.entries.length}}});e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(11),r=i(15),a=i(189),l=i(92),o=i(1182),u=new n({Extends:r,Mixins:[h.AlphaSingle,h.BlendMode,h.Depth,h.GetBounds,h.Mask,h.Pipeline,h.ScrollFactor,h.Transform,h.Visible,o],initialize:function(d,c,p,g,m,x,y){g===void 0&&(g=16777215),m===void 0&&(m=128),x===void 0&&(x=1),y===void 0&&(y=.1),r.call(this,d,"PointLight"),this.initPipeline(l.POINTLIGHT_PIPELINE),this.setPosition(c,p),this.color=a(g),this.intensity=x,this.attenuation=y,this.width=m*2,this.height=m*2,this._radius=m},radius:{get:function(){return this._radius},set:function(v){this._radius=v,this.width=v*2,this.height=v*2}},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this._radius}},displayOriginY:{get:function(){return this._radius}}});e.exports=u},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){var r=h.width/2,a=h.height/2,l=Math.abs(n.x-h.x-r),o=Math.abs(n.y-h.y-a),u=r+n.radius,v=a+n.radius;if(l>u||o>v)return!1;if(l<=r||o<=a)return!0;var d=l-r,c=o-a,p=d*d,g=c*c,m=n.radius*n.radius;return p+g<=m};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){return n.width<=0||n.height<=0||h.width<=0||h.height<=0?!1:!(n.right<h.x||n.bottom<h.y||n.x>h.right||n.y>h.bottom)};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(6),h={},r={};r.register=function(a,l,o,u,v){h[a]={plugin:l,mapping:o,settingsKey:u,configKey:v}},r.getPlugin=function(a){return h[a]},r.install=function(a){var l=a.scene.sys,o=l.settings.input,u=l.game.config;for(var v in h){var d=h[v].plugin,c=h[v].mapping,p=h[v].settingsKey,g=h[v].configKey;n(o,p,u[g])&&(a[c]=new d(a))}},r.remove=function(a){h.hasOwnProperty(a)&&delete h[a]},e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ANY_KEY_DOWN:i(1323),ANY_KEY_UP:i(1324),COMBO_MATCH:i(1325),DOWN:i(1326),KEY_DOWN:i(1327),KEY_UP:i(1328),UP:i(1329)}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){return n.url?n.url.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)?n.url:h+n.url:!1};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r,a,l,o){return n===void 0&&(n=""),h===void 0&&(h=!0),r===void 0&&(r=""),a===void 0&&(a=""),l===void 0&&(l=0),o===void 0&&(o=!1),{responseType:n,async:h,user:r,password:a,timeout:l,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:o}};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(243),r=i(73),a=new n({Extends:r,Mixins:[h.Acceleration,h.Angular,h.Bounce,h.Debug,h.Drag,h.Enable,h.Friction,h.Gravity,h.Immovable,h.Mass,h.Pushable,h.Size,h.Velocity],initialize:function(o,u,v,d,c){r.call(this,o,u,v,d,c),this.body=null}});e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(119),h=function(r,a,l,o){if(l===void 0&&(l=!1),n(r,a,o)){var u=o.data[a][r]||null;return u?u.index===-1?l?u:null:u:null}else return null};e.exports=h},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r,a){var l=n.data,o=n.width,u=n.height,v=n.tilemapLayer,d=Math.max(0,h.left),c=Math.min(o,h.right),p=Math.max(0,h.top),g=Math.min(u,h.bottom),m,x,y;if(r===0)for(x=p;x<g;x++)for(m=d;l[x]&&m<c;m++)y=l[x][m],!(!y||y.index===-1||!y.visible||y.alpha===0)&&a.push(y);else if(r===1)for(x=p;x<g;x++)for(m=c;l[x]&&m>=d;m--)y=l[x][m],!(!y||y.index===-1||!y.visible||y.alpha===0)&&a.push(y);else if(r===2)for(x=g;x>=p;x--)for(m=d;l[x]&&m<c;m++)y=l[x][m],!(!y||y.index===-1||!y.visible||y.alpha===0)&&a.push(y);else if(r===3)for(x=g;x>=p;x--)for(m=c;l[x]&&m>=d;m--)y=l[x][m],!(!y||y.index===-1||!y.visible||y.alpha===0)&&a.push(y);return v.tilesDrawn=a.length,v.tilesTotal=o*u,a};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r){var a=r.collideIndexes.indexOf(n);h&&a===-1?r.collideIndexes.push(n):!h&&a!==-1&&r.collideIndexes.splice(a,1)};e.exports=i},function(e,f,i){/**
 * @author       Seth Berrier <berriers@uwstout.edu>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(2),h=function(r,a,l){if(!a)return{i:0,layers:r.layers,name:"",opacity:1,visible:!0,x:0,y:0};var o=a.x+n(a,"startx",0)*r.tilewidth+n(a,"offsetx",0),u=a.y+n(a,"starty",0)*r.tileheight+n(a,"offsety",0);return{i:0,layers:a.layers,name:l.name+a.name+"/",opacity:l.opacity*a.opacity,visible:l.visible&&a.visible,x:l.x+o,y:l.y+u}};e.exports=h},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r){var a;if(n.hasOwnProperty(h)){var l=typeof n[h];l==="function"?a=function(o,u,v,d,c,p){return n[h](o,u,v,d,c,p)}:a=function(){return n[h]}}else typeof r=="function"?a=r:a=function(){return r};return a};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(265),h=i(13),r=i(99),a=i(80),l=i(162),o=i(583),u=i(263),v=i(6),d=i(264),c=i(266),p=i(268),g=function(m,x,y){y===void 0&&(y=n);for(var T=y.targets?y.targets:u(x),C=o(x),S=l(x,"delay",y.delay),E=l(x,"duration",y.duration),M=v(x,"easeParams",y.easeParams),O=a(v(x,"ease",y.ease),M),L=l(x,"hold",y.hold),R=l(x,"repeat",y.repeat),F=l(x,"repeatDelay",y.repeatDelay),D=r(x,"yoyo",y.yoyo),B=r(x,"flipX",y.flipX),N=r(x,"flipY",y.flipY),U=[],X=0;X<C.length;X++)for(var K=C[X].key,k=C[X].value,b=0;b<T.length;b++){var I=d(K,k),G=p(T[b],b,K,I.getEnd,I.getStart,I.getActive,a(v(k,"ease",O),v(k,"easeParams",M)),l(k,"delay",S),l(k,"duration",E),r(k,"yoyo",D),l(k,"hold",L),l(k,"repeat",R),l(k,"repeatDelay",F),r(k,"flipX",B),r(k,"flipY",N));U.push(G)}var Y=new c(m,U,T);Y.offset=h(x,"offset",null),Y.completeDelay=h(x,"completeDelay",0),Y.loop=Math.round(h(x,"loop",0)),Y.loopDelay=Math.round(h(x,"loopDelay",0)),Y.paused=r(x,"paused",!1),Y.useFrames=r(x,"useFrames",!1);for(var V=v(x,"callbackScope",Y),W=[Y,null],H=c.TYPES,Z=0;Z<H.length;Z++){var q=H[Z],_=v(x,q,!1);if(_){var nt=v(x,q+"Scope",V),rt=v(x,q+"Params",[]);Y.setCallback(q,_,W.concat(rt),nt)}}return Y};e.exports=g},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(102),r=i(2),a=i(132),l=i(185),o=new n({initialize:function(v){this.parent=v,this.animationManager=v.scene.sys.anims,this.animationManager.on(a.REMOVE_ANIMATION,this.globalRemove,this),this.textureManager=this.animationManager.textureManager,this.anims=null,this.isPlaying=!1,this.hasStarted=!1,this.currentAnim=null,this.currentFrame=null,this.nextAnim=null,this.nextAnimsQueue=[],this.timeScale=1,this.frameRate=0,this.duration=0,this.msPerFrame=0,this.skipMissedFrames=!0,this.delay=0,this.repeat=0,this.repeatDelay=0,this.yoyo=!1,this.showOnStart=!1,this.hideOnComplete=!1,this.forward=!0,this.inReverse=!1,this.accumulator=0,this.nextTick=0,this.delayCounter=0,this.repeatCounter=0,this.pendingRepeat=!1,this._paused=!1,this._wasPlaying=!1,this._pendingStop=0,this._pendingStopValue},chain:function(u){var v=this.parent;if(u===void 0)return this.nextAnimsQueue.length=0,this.nextAnim=null,v;Array.isArray(u)||(u=[u]);for(var d=0;d<u.length;d++){var c=u[d];this.nextAnim===null?this.nextAnim=c:this.nextAnimsQueue.push(c)}return this.parent},getName:function(){return this.currentAnim?this.currentAnim.key:""},getFrameName:function(){return this.currentFrame?this.currentFrame.textureFrame:""},load:function(u){this.isPlaying&&this.stop();var v=this.animationManager,d=typeof u=="string"?u:r(u,"key",null),c=this.exists(d)?this.get(d):v.get(d);if(!c)console.warn("Missing animation: "+d);else{this.currentAnim=c;var p=c.getTotalFrames(),g=r(u,"frameRate",c.frameRate),m=r(u,"duration",c.duration);c.calculateDuration(this,p,m,g),this.delay=r(u,"delay",c.delay),this.repeat=r(u,"repeat",c.repeat),this.repeatDelay=r(u,"repeatDelay",c.repeatDelay),this.yoyo=r(u,"yoyo",c.yoyo),this.showOnStart=r(u,"showOnStart",c.showOnStart),this.hideOnComplete=r(u,"hideOnComplete",c.hideOnComplete),this.skipMissedFrames=r(u,"skipMissedFrames",c.skipMissedFrames),this.timeScale=r(u,"timeScale",this.timeScale);var x=r(u,"startFrame",0);x>c.getTotalFrames()&&(x=0);var y=c.frames[x];x===0&&!this.forward&&(y=c.getLastFrame()),this.currentFrame=y}return this.parent},pause:function(u){return this._paused||(this._paused=!0,this._wasPlaying=this.isPlaying,this.isPlaying=!1),u!==void 0&&this.setCurrentFrame(u),this.parent},resume:function(u){return this._paused&&(this._paused=!1,this.isPlaying=this._wasPlaying),u!==void 0&&this.setCurrentFrame(u),this.parent},playAfterDelay:function(u,v){if(!this.isPlaying)this.delayCounter=v,this.play(u,!0);else{var d=this.nextAnim,c=this.nextAnimsQueue;d&&c.unshift(d),this.nextAnim=u,this._pendingStop=1,this._pendingStopValue=v}return this.parent},playAfterRepeat:function(u,v){if(v===void 0&&(v=1),!this.isPlaying)this.play(u);else{var d=this.nextAnim,c=this.nextAnimsQueue;d&&c.unshift(d),this.repeatCounter!==-1&&v>this.repeatCounter&&(v=this.repeatCounter),this.nextAnim=u,this._pendingStop=2,this._pendingStopValue=v}return this.parent},play:function(u,v){v===void 0&&(v=!1);var d=this.currentAnim,c=this.parent,p=typeof u=="string"?u:u.key;if(v&&this.isPlaying&&d.key===p)return c;if(d&&this.isPlaying){var g=this.animationManager.getMix(d.key,u);if(g>0)return this.playAfterDelay(u,g)}return this.forward=!0,this.inReverse=!1,this._paused=!1,this._wasPlaying=!0,this.startAnimation(u)},playReverse:function(u,v){v===void 0&&(v=!1);var d=typeof u=="string"?u:u.key;return v&&this.isPlaying&&this.currentAnim.key===d?this.parent:(this.forward=!1,this.inReverse=!0,this._paused=!1,this._wasPlaying=!0,this.startAnimation(u))},startAnimation:function(u){this.load(u);var v=this.currentAnim,d=this.parent;return v&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat,v.getFirstTick(this),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!1,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.delayCounter+=this.delay,this.delayCounter===0&&this.handleStart()),d},handleStart:function(){this.showOnStart&&this.parent.setVisible(!0),this.setCurrentFrame(this.currentFrame),this.hasStarted=!0,this.emitEvents(a.ANIMATION_START)},handleRepeat:function(){this.pendingRepeat=!1,this.emitEvents(a.ANIMATION_REPEAT)},handleStop:function(){this._pendingStop=0,this.isPlaying=!1,this.emitEvents(a.ANIMATION_STOP)},handleComplete:function(){this._pendingStop=0,this.isPlaying=!1,this.hideOnComplete&&this.parent.setVisible(!1),this.emitEvents(a.ANIMATION_COMPLETE,a.ANIMATION_COMPLETE_KEY)},emitEvents:function(u,v){var d=this.currentAnim,c=this.currentFrame,p=this.parent,g=c.textureFrame;p.emit(u,d,c,p,g),v&&p.emit(v+d.key,d,c,p,g)},reverse:function(){return this.isPlaying&&(this.inReverse=!this.inReverse,this.forward=!this.forward),this.parent},getProgress:function(){var u=this.currentFrame;if(!u)return 0;var v=u.progress;return this.inReverse&&(v*=-1),v},setProgress:function(u){return this.forward||(u=1-u),this.setCurrentFrame(this.currentAnim.getFrameByProgress(u)),this.parent},setRepeat:function(u){return this.repeatCounter=u===-1?Number.MAX_VALUE:u,this.parent},globalRemove:function(u,v){v===void 0&&(v=this.currentAnim),this.isPlaying&&v.key===this.currentAnim.key&&(this.stop(),this.setCurrentFrame(this.currentAnim.frames[0]))},restart:function(u,v){u===void 0&&(u=!1),v===void 0&&(v=!1);var d=this.currentAnim,c=this.parent;return d?(v&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat),d.getFirstTick(this),this.emitEvents(a.ANIMATION_RESTART),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!u,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.setCurrentFrame(d.frames[0]),this.parent):c},complete:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleComplete(),this.nextAnim){var u=this.nextAnim;this.nextAnim=this.nextAnimsQueue.length>0?this.nextAnimsQueue.shift():null,this.play(u)}return this.parent},stop:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleStop(),this.nextAnim){var u=this.nextAnim;this.nextAnim=this.nextAnimsQueue.shift(),this.play(u)}return this.parent},stopAfterDelay:function(u){return this._pendingStop=1,this._pendingStopValue=u,this.parent},stopAfterRepeat:function(u){return u===void 0&&(u=1),this.repeatCounter!==-1&&u>this.repeatCounter&&(u=this.repeatCounter),this._pendingStop=2,this._pendingStopValue=u,this.parent},stopOnFrame:function(u){return this._pendingStop=3,this._pendingStopValue=u,this.parent},getTotalFrames:function(){return this.currentAnim?this.currentAnim.getTotalFrames():0},update:function(u,v){var d=this.currentAnim;if(!(!this.isPlaying||!d||d.paused)){if(this.accumulator+=v*this.timeScale,this._pendingStop===1&&(this._pendingStopValue-=v,this._pendingStopValue<=0))return this.stop();if(!this.hasStarted)this.accumulator>=this.delayCounter&&(this.accumulator-=this.delayCounter,this.handleStart());else if(this.accumulator>=this.nextTick&&(this.forward?d.nextFrame(this):d.previousFrame(this),this.isPlaying&&this._pendingStop===0&&this.skipMissedFrames&&this.accumulator>this.nextTick)){var c=0;do this.forward?d.nextFrame(this):d.previousFrame(this),c++;while(this.isPlaying&&this.accumulator>this.nextTick&&c<60)}}},setCurrentFrame:function(u){var v=this.parent;return this.currentFrame=u,v.texture=u.frame.texture,v.frame=u.frame,v.isCropped&&v.frame.updateCropUVs(v._crop,v.flipX,v.flipY),u.setAlpha&&(v.alpha=u.alpha),v.setSizeToFrame(),v._originComponent&&(u.frame.customPivot?v.setOrigin(u.frame.pivotX,u.frame.pivotY):v.updateDisplayOrigin()),this.isPlaying&&this.hasStarted&&(this.emitEvents(a.ANIMATION_UPDATE),this._pendingStop===3&&this._pendingStopValue===u&&this.stop()),v},nextFrame:function(){return this.currentAnim&&this.currentAnim.nextFrame(this),this.parent},previousFrame:function(){return this.currentAnim&&this.currentAnim.previousFrame(this),this.parent},get:function(u){return this.anims?this.anims.get(u):null},exists:function(u){return this.anims?this.anims.has(u):!1},create:function(u){var v=u.key,d=!1;return v&&(d=this.get(v),d||(d=new l(this,v,u),this.anims||(this.anims=new h),this.anims.set(v,d))),d},generateFrameNames:function(u,v){return this.animationManager.generateFrameNames(u,v)},generateFrameNumbers:function(u,v){return this.animationManager.generateFrameNumbers(u,v)},remove:function(u){var v=this.get(u);return v&&(this.currentAnim===v&&this.stop(),this.anims.delete(u)),v},destroy:function(){this.animationManager.off(a.REMOVE_ANIMATION,this.globalRemove,this),this.anims&&this.anims.clear(),this.animationManager=null,this.parent=null,this.nextAnim=null,this.nextAnimsQueue.length=0,this.currentAnim=null,this.currentFrame=null},isPaused:{get:function(){return this._paused}}});e.exports=o},function(e,f,i){var n={};e.exports=n;var h=i(166);(function(){n._motionWakeThreshold=.18,n._motionSleepThreshold=.08,n._minBias=.9,n.update=function(r,a){for(var l=a*a*a,o=0;o<r.length;o++){var u=r[o],v=u.speed*u.speed+u.angularSpeed*u.angularSpeed;if(u.force.x!==0||u.force.y!==0){n.set(u,!1);continue}var d=Math.min(u.motion,v),c=Math.max(u.motion,v);u.motion=n._minBias*d+(1-n._minBias)*c,u.sleepThreshold>0&&u.motion<n._motionSleepThreshold*l?(u.sleepCounter+=1,u.sleepCounter>=u.sleepThreshold&&n.set(u,!0)):u.sleepCounter>0&&(u.sleepCounter-=1)}},n.afterCollisions=function(r,a){for(var l=a*a*a,o=0;o<r.length;o++){var u=r[o];if(!!u.isActive){var v=u.collision,d=v.bodyA.parent,c=v.bodyB.parent;if(!(d.isSleeping&&c.isSleeping||d.isStatic||c.isStatic)&&(d.isSleeping||c.isSleeping)){var p=d.isSleeping&&!d.isStatic?d:c,g=p===d?c:d;!p.isStatic&&g.motion>n._motionWakeThreshold*l&&n.set(p,!1)}}}},n.set=function(r,a){var l=r.isSleeping;a?(r.isSleeping=!0,r.sleepCounter=r.sleepThreshold,r.positionImpulse.x=0,r.positionImpulse.y=0,r.positionPrev.x=r.position.x,r.positionPrev.y=r.position.y,r.anglePrev=r.angle,r.speed=0,r.angularSpeed=0,r.motion=0,l||h.trigger(r,"sleepStart")):(r.isSleeping=!1,r.sleepCounter=0,l&&h.trigger(r,"sleepEnd"))}})()},function(e,f,i){var n={};e.exports=n;var h=i(32);(function(){n.on=function(r,a,l){for(var o=a.split(" "),u,v=0;v<o.length;v++)u=o[v],r.events=r.events||{},r.events[u]=r.events[u]||[],r.events[u].push(l);return l},n.off=function(r,a,l){if(!a){r.events={};return}typeof a=="function"&&(l=a,a=h.keys(r.events).join(" "));for(var o=a.split(" "),u=0;u<o.length;u++){var v=r.events[o[u]],d=[];if(l&&v)for(var c=0;c<v.length;c++)v[c]!==l&&d.push(v[c]);r.events[o[u]]=d}},n.trigger=function(r,a,l){var o,u,v,d,c=r.events;if(c&&h.keys(c).length>0){l||(l={}),o=a.split(" ");for(var p=0;p<o.length;p++)if(u=o[p],v=c[u],v){d=h.clone(l,!1),d.name=u,d.source=r;for(var g=0;g<v.length;g++)v[g].apply(r,[d])}}}})()},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(175),h=i(92),r=i(74),a={defaultPipeline:null,pipeline:null,hasPostPipeline:!1,postPipelines:null,pipelineData:null,initPipeline:function(l){l===void 0&&(l=h.MULTI_PIPELINE);var o=this.scene.sys.renderer;if(!o)return!1;var u=o.pipelines;if(this.postPipelines=[],this.pipelineData={},u){var v=u.get(l);if(v)return this.defaultPipeline=v,this.pipeline=v,!0}return!1},setPipeline:function(l,o,u){var v=this.scene.sys.renderer;if(!v)return this;var d=v.pipelines;if(d){var c=d.get(l);c&&(this.pipeline=c),o&&(this.pipelineData=u?n(o):o)}return this},setPostPipeline:function(l,o,u){var v=this.scene.sys.renderer;if(!v)return this;var d=v.pipelines;if(d){Array.isArray(l)||(l=[l]);for(var c=0;c<l.length;c++){var p=d.getPostPipeline(l[c],this);p&&this.postPipelines.push(p)}o&&(this.pipelineData=u?n(o):o)}return this.hasPostPipeline=this.postPipelines.length>0,this},setPipelineData:function(l,o){var u=this.pipelineData;return o===void 0?delete u[l]:u[l]=o,this},getPostPipeline:function(l){for(var o=this.postPipelines,u=[],v=0;v<o.length;v++){var d=o[v];(typeof l=="string"&&d.name===l||d instanceof l)&&u.push(d)}return u.length===1?u[0]:u},resetPipeline:function(l,o){return l===void 0&&(l=!1),o===void 0&&(o=!1),this.pipeline=this.defaultPipeline,l&&(this.postPipelines=[],this.hasPostPipeline=!1),o&&(this.pipelineData={}),this.pipeline!==null},resetPostPipeline:function(l){l===void 0&&(l=!1);for(var o=this.postPipelines,u=0;u<o.length;u++)o[u].destroy();this.postPipelines=[],this.hasPostPipeline=!1,l&&(this.pipelineData={})},removePostPipeline:function(l){for(var o=this.postPipelines,u=o.length-1;u>=0;u--){var v=o[u];(typeof l=="string"&&v.name===l||typeof l!="string"&&v instanceof l)&&(v.destroy(),r(o,u))}return this.hasPostPipeline=this.postPipelines.length>0,this},getPipelineName:function(){return this.pipeline.name}};e.exports=a},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={DEFAULT:0,LINEAR:0,NEAREST:1};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4),h=function(r,a,l){return l===void 0&&(l=new n),l.x=r.x+r.radius*Math.cos(a),l.y=r.y+r.radius*Math.sin(a),l};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4),h=function(r,a){a===void 0&&(a=new n);var l=2*Math.PI*Math.random(),o=Math.random()+Math.random(),u=o>1?2-o:o,v=u*Math.cos(l),d=u*Math.sin(l);return a.x=r.x+v*r.radius,a.y=r.y+d*r.radius,a};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(130),h=i(4),r=function(a,l,o){if(o===void 0&&(o=new h),l<=0||l>=1)return o.x=a.x,o.y=a.y,o;var u=n(a)*l;return l>.5?(u-=a.width+a.height,u<=a.width?(o.x=a.right-u,o.y=a.bottom):(o.x=a.x,o.y=a.bottom-(u-a.width))):u<=a.width?(o.x=a.x+u,o.y=a.y):(o.x=a.right,o.y=a.y+(u-a.width)),o};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(67),h=i(4),r=function(a,l,o,u){u===void 0&&(u=[]),!l&&o>0&&(l=n(a)/o);for(var v=a.x1,d=a.y1,c=a.x2,p=a.y2,g=0;g<l;g++){var m=g/l,x=v+(c-v)*m,y=d+(p-d)*m;u.push(new h(x,y))}return u};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4),h=function(r,a){a===void 0&&(a=new n);var l=Math.random();return a.x=r.x1+l*(r.x2-r.x1),a.y=r.y1+l*(r.y2-r.y1),a};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4),h=function(r,a){return a===void 0&&(a=new n),a.x=r.x+Math.random()*r.width,a.y=r.y+Math.random()*r.height,a};e.exports=h},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){var h,r,a;if(typeof n!="object"||n===null)return n;h=Array.isArray(n)?[]:{};for(a in n)r=n[a],h[a]=i(r);return h};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){var h={name:n.name,type:n.type,x:n.x,y:n.y,depth:n.depth,scale:{x:n.scaleX,y:n.scaleY},origin:{x:n.originX,y:n.originY},flipX:n.flipX,flipY:n.flipY,rotation:n.rotation,alpha:n.alpha,visible:n.visible,blendMode:n.blendMode,textureKey:"",frameKey:"",data:{}};return n.texture&&(h.textureKey=n.texture.key,h.frameKey=n.frame.name),h};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(3),h=function(r,a,l,o,u,v,d,c){c===void 0&&(c=new n);var p=Math.sin(u),g=Math.cos(u),m=g*v,x=p*v,y=-p*d,T=g*d,C=1/(m*T+y*-x);return c.x=T*C*r+-y*C*a+(o*y-l*T)*C,c.y=m*C*a+-x*C*r+(-o*m+l*x)*C,c};e.exports=h},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){h===void 0&&(h=1);for(var r=null,a=0;a<h;a++)r=n.shift(),n.push(r);return r};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){h===void 0&&(h=1);for(var r=null,a=0;a<h;a++)r=n.pop(),n.unshift(r);return r};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4),h=function(r,a){a===void 0&&(a=new n);var l=Math.random()*Math.PI*2,o=Math.sqrt(Math.random());return a.x=r.x+o*Math.cos(l)*r.width/2,a.y=r.y+o*Math.sin(l)*r.height/2,a};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4),h=function(r,a){a===void 0&&(a=new n);var l=r.x2-r.x1,o=r.y2-r.y1,u=r.x3-r.x1,v=r.y3-r.y1,d=Math.random(),c=Math.random();return d+c>=1&&(d=1-d,c=1-c),a.x=r.x1+(l*d+u*c),a.y=r.y1+(o*d+v*c),a};e.exports=h},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r,a,l){var o=a+Math.atan2(n.y-r,n.x-h);return n.x=h+l*Math.cos(o),n.y=r+l*Math.sin(o),n};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r){return n=Math.max(0,Math.min(1,(n-h)/(r-h))),n*n*n*(n*(n*6-15)+10)};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r){return n<=h?0:n>=r?1:(n=(n-h)/(r-h),n*n*(3-2*n))};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(18),h=i(0),r=i(132),a=i(318),l=i(319),o=i(6),u=i(320),v=new h({initialize:function(c,p,g){this.manager=c,this.key=p,this.type="frame",this.frames=this.getFrames(c.textureManager,o(g,"frames",[]),o(g,"defaultTextureKey",null),o(g,"sortFrames",!0)),this.frameRate=o(g,"frameRate",null),this.duration=o(g,"duration",null),this.msPerFrame,this.skipMissedFrames=o(g,"skipMissedFrames",!0),this.delay=o(g,"delay",0),this.repeat=o(g,"repeat",0),this.repeatDelay=o(g,"repeatDelay",0),this.yoyo=o(g,"yoyo",!1),this.showOnStart=o(g,"showOnStart",!1),this.hideOnComplete=o(g,"hideOnComplete",!1),this.paused=!1,this.calculateDuration(this,this.getTotalFrames(),this.duration,this.frameRate),this.manager.on&&(this.manager.on(r.PAUSE_ALL,this.pause,this),this.manager.on(r.RESUME_ALL,this.resume,this))},getTotalFrames:function(){return this.frames.length},calculateDuration:function(d,c,p,g){p===null&&g===null?(d.frameRate=24,d.duration=24/c*1e3):p&&g===null?(d.duration=p,d.frameRate=c/(p/1e3)):(d.frameRate=g,d.duration=c/g*1e3),d.msPerFrame=1e3/d.frameRate},addFrame:function(d){return this.addFrameAt(this.frames.length,d)},addFrameAt:function(d,c){var p=this.getFrames(this.manager.textureManager,c);if(p.length>0){if(d===0)this.frames=p.concat(this.frames);else if(d===this.frames.length)this.frames=this.frames.concat(p);else{var g=this.frames.slice(0,d),m=this.frames.slice(d);this.frames=g.concat(p,m)}this.updateFrameSequence()}return this},checkFrame:function(d){return d>=0&&d<this.frames.length},getFirstTick:function(d){d.accumulator=0,d.nextTick=d.msPerFrame+d.currentFrame.duration},getFrameAt:function(d){return this.frames[d]},getFrames:function(d,c,p,g){g===void 0&&(g=!0);var m=[],x,y,T=1,C,S;if(typeof c=="string"){S=c;var E=d.get(S),M=E.getFrameNames();g&&u(M),c=[],M.forEach(function(B){c.push({key:S,frame:B})})}if(!Array.isArray(c)||c.length===0)return m;for(C=0;C<c.length;C++){var O=c[C],L=o(O,"key",p);if(!!L){var R=o(O,"frame",0),F=d.getFrame(L,R);y=new l(L,R,T,F),y.duration=o(O,"duration",0),y.isFirst=!x,x&&(x.nextFrame=y,y.prevFrame=x),m.push(y),x=y,T++}}if(m.length>0){y.isLast=!0,y.nextFrame=m[0],m[0].prevFrame=y;var D=1/(m.length-1);for(C=0;C<m.length;C++)m[C].progress=C*D}return m},getNextTick:function(d){d.accumulator-=d.nextTick,d.nextTick=d.msPerFrame+d.currentFrame.duration},getFrameByProgress:function(d){return d=n(d,0,1),a(d,this.frames,"progress")},nextFrame:function(d){var c=d.currentFrame;c.isLast?d.yoyo?this.handleYoyoFrame(d,!1):d.repeatCounter>0?d.inReverse&&d.forward?d.forward=!1:this.repeatAnimation(d):d.complete():this.updateAndGetNextTick(d,c.nextFrame)},handleYoyoFrame:function(d,c){if(c||(c=!1),d.inReverse===!c&&d.repeatCounter>0){(d.repeatDelay===0||d.pendingRepeat)&&(d.forward=c),this.repeatAnimation(d);return}if(d.inReverse!==c&&d.repeatCounter===0){d.complete();return}d.forward=c;var p=c?d.currentFrame.nextFrame:d.currentFrame.prevFrame;this.updateAndGetNextTick(d,p)},getLastFrame:function(){return this.frames[this.frames.length-1]},previousFrame:function(d){var c=d.currentFrame;c.isFirst?d.yoyo?this.handleYoyoFrame(d,!0):d.repeatCounter>0?d.inReverse&&!d.forward?this.repeatAnimation(d):(d.forward=!0,this.repeatAnimation(d)):d.complete():this.updateAndGetNextTick(d,c.prevFrame)},updateAndGetNextTick:function(d,c){d.setCurrentFrame(c),this.getNextTick(d)},removeFrame:function(d){var c=this.frames.indexOf(d);return c!==-1&&this.removeFrameAt(c),this},removeFrameAt:function(d){return this.frames.splice(d,1),this.updateFrameSequence(),this},repeatAnimation:function(d){if(d._pendingStop===2){if(d._pendingStopValue===0)return d.stop();d._pendingStopValue--}d.repeatDelay>0&&!d.pendingRepeat?(d.pendingRepeat=!0,d.accumulator-=d.nextTick,d.nextTick+=d.repeatDelay):(d.repeatCounter--,d.forward?d.setCurrentFrame(d.currentFrame.nextFrame):d.setCurrentFrame(d.currentFrame.prevFrame),d.isPlaying&&(this.getNextTick(d),d.handleRepeat()))},toJSON:function(){var d={key:this.key,type:this.type,frames:[],frameRate:this.frameRate,duration:this.duration,skipMissedFrames:this.skipMissedFrames,delay:this.delay,repeat:this.repeat,repeatDelay:this.repeatDelay,yoyo:this.yoyo,showOnStart:this.showOnStart,hideOnComplete:this.hideOnComplete};return this.frames.forEach(function(c){d.frames.push(c.toJSON())}),d},updateFrameSequence:function(){for(var d=this.frames.length,c=1/(d-1),p,g=0;g<d;g++)p=this.frames[g],p.index=g+1,p.isFirst=!1,p.isLast=!1,p.progress=g*c,g===0?(p.isFirst=!0,d===1?(p.isLast=!0,p.nextFrame=p,p.prevFrame=p):(p.isLast=!1,p.prevFrame=this.frames[d-1],p.nextFrame=this.frames[g+1])):g===d-1&&d>1?(p.isLast=!0,p.prevFrame=this.frames[d-2],p.nextFrame=this.frames[0]):d>1&&(p.prevFrame=this.frames[g-1],p.nextFrame=this.frames[g+1]);return this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},destroy:function(){this.manager.off&&(this.manager.off(r.PAUSE_ALL,this.pause,this),this.manager.off(r.RESUME_ALL,this.resume,this)),this.manager.remove(this.key);for(var d=0;d<this.frames.length;d++)this.frames[d].destroy();this.frames=[],this.manager=null}});e.exports=v},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r,a){h===void 0&&(h=0),r===void 0&&(r=" "),a===void 0&&(a=3),n=n.toString();var l=0;if(h+1>=n.length)switch(a){case 1:n=new Array(h+1-n.length).join(r)+n;break;case 3:var o=Math.ceil((l=h-n.length)/2),u=l-o;n=new Array(u+1).join(r)+n+new Array(o+1).join(r);break;default:n=n+new Array(h+1-n.length).join(r);break}return n};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(327),h=i(189),r=i(331),a=i(332),l=function(o){var u=typeof o;switch(u){case"string":return o.substr(0,3).toLowerCase()==="rgb"?a(o):n(o);case"number":return h(o);case"object":return r(o)}};e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(103);function h(a,l,o,u){var v=(a+l*6)%6,d=Math.min(v,4-v,1);return Math.round(255*(u-u*o*Math.max(0,d)))}var r=function(a,l,o,u){l===void 0&&(l=1),o===void 0&&(o=1);var v=h(5,a,l,o),d=h(3,a,l,o),c=h(1,a,l,o);return u?u.setTo?u.setTo(v,d,c,u.alpha,!1):(u.r=v,u.g=d,u.b=c,u.color=n(v,d,c),u):{r:v,g:d,b:c,color:n(v,d,c)}};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(38),h=i(330),r=function(a){var l=h(a);return new n(l.r,l.g,l.b,l.a)};e.exports=r},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r){return n.x=h-n.width/2,n.y=r-n.height/2,n};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(105),h=i(136),r=i(31),a={canvas:!1,canvasBitBltShift:null,file:!1,fileSystem:!1,getUserMedia:!0,littleEndian:!1,localStorage:!1,pointerLock:!1,support32bit:!1,vibration:!1,webGL:!1,worker:!1};function l(){var u=new ArrayBuffer(4),v=new Uint8Array(u),d=new Uint32Array(u);return v[0]=161,v[1]=178,v[2]=195,v[3]=212,d[0]===3569595041?!0:d[0]===2712847316?!1:null}function o(){if(typeof importScripts=="function")return a;a.canvas=!!window.CanvasRenderingContext2D;try{a.localStorage=!!localStorage.getItem}catch{a.localStorage=!1}a.file=!!window.File&&!!window.FileReader&&!!window.FileList&&!!window.Blob,a.fileSystem=!!window.requestFileSystem;var u=!1,v=function(){if(window.WebGLRenderingContext)try{var d=r.createWebGL(this),c=d.getContext("webgl")||d.getContext("experimental-webgl"),p=r.create2D(this),g=p.getContext("2d"),m=g.createImageData(1,1);return u=m.data instanceof Uint8ClampedArray,r.remove(d),r.remove(p),!!c}catch{return!1}return!1};return a.webGL=v(),a.worker=!!window.Worker,a.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,a.getUserMedia=a.getUserMedia&&!!navigator.getUserMedia&&!!window.URL,h.firefox&&h.firefoxVersion<21&&(a.getUserMedia=!1),!n.iOS&&(h.ie||h.firefox||h.chrome)&&(a.canvasBitBltShift=!0),(h.safari||h.mobileSafari)&&(a.canvasBitBltShift=!1),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(a.vibration=!0),typeof ArrayBuffer!="undefined"&&typeof Uint8Array!="undefined"&&typeof Uint32Array!="undefined"&&(a.littleEndian=l()),a.support32bit=typeof ArrayBuffer!="undefined"&&typeof Uint8ClampedArray!="undefined"&&typeof Int32Array!="undefined"&&a.littleEndian!==null&&u,a}e.exports=o()},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i="",n=function(){var h=function(o){for(var u=["i","webkitI","msI","mozI","oI"],v=0;v<u.length;v++){var d=u[v]+"mageSmoothingEnabled";if(d in o)return d}return null},r=function(o){return i===""&&(i=h(o)),i&&(o[i]=!0),o},a=function(o){return i===""&&(i=h(o)),i&&(o[i]=!1),o},l=function(o){return i!==null?o[i]:null};return{disable:a,enable:r,getPrefix:h,isEnabled:l}};e.exports=n()},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(14),h=i(17),r={Angle:i(812),Distance:i(821),Easing:i(826),Fuzzy:i(827),Interpolation:i(830),Pow2:i(835),Snap:i(837),RandomDataGenerator:i(839),Average:i(840),Bernstein:i(356),Between:i(195),CatmullRom:i(194),CeilTo:i(841),Clamp:i(18),DegToRad:i(36),Difference:i(842),Euler:i(843),Factorial:i(357),FloatBetween:i(137),FloorTo:i(844),FromPercent:i(98),GetSpeed:i(845),IsEven:i(846),IsEvenStrict:i(847),Linear:i(135),MaxAdd:i(848),Median:i(849),MinSub:i(850),Percent:i(851),RadToDeg:i(196),RandomXY:i(852),RandomXYZ:i(853),RandomXYZW:i(854),Rotate:i(362),RotateAround:i(308),RotateAroundDistance:i(182),RotateTo:i(855),RoundAwayFromZero:i(363),RoundTo:i(856),SinCosTableGenerator:i(857),SmootherStep:i(183),SmoothStep:i(184),ToXY:i(858),TransformXY:i(177),Within:i(859),Wrap:i(68),Vector2:i(3),Vector3:i(39),Vector4:i(140),Matrix3:i(364),Matrix4:i(69),Quaternion:i(365),RotateVec3:i(860)};r=h(!1,r,n),e.exports=r},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r,a,l){var o=(a-h)*.5,u=(l-r)*.5,v=n*n,d=n*v;return(2*r-2*a+o+u)*d+(-3*r+3*a-2*o-u)*v+o*n+r};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){return Math.floor(Math.random()*(h-n+1)+n)};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(14),h=function(r){return r*n.RAD_TO_DEG};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n={Global:["game","anims","cache","plugins","registry","scale","sound","textures","renderer"],CoreScene:["EventEmitter","CameraManager","GameObjectCreator","GameObjectFactory","ScenePlugin","DisplayList","UpdateList"],DefaultScene:["Clock","DataManagerPlugin","InputPlugin","Loader","TweenManager","LightsPlugin"]};e.exports=n},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=new n({initialize:function(){this._matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.alpha=1,this._dirty=!0,this._data},set:function(r){return this._matrix=r,this._dirty=!0,this},reset:function(){var r=this._matrix;return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=0,r[6]=1,r[7]=0,r[8]=0,r[9]=0,r[10]=0,r[11]=0,r[12]=1,r[13]=0,r[14]=0,r[15]=0,r[16]=0,r[17]=0,r[18]=1,r[19]=0,this._dirty=!0,this},getData:function(){if(this._dirty){var r=new Float32Array(this._matrix);r[4]/=255,r[9]/=255,r[14]/=255,r[19]/=255,this._data=r,this._dirty=!1}return this._data},brightness:function(r,a){r===void 0&&(r=0),a===void 0&&(a=!1);var l=r;return this.multiply([l,0,0,0,0,0,l,0,0,0,0,0,l,0,0,0,0,0,1,0],a)},saturate:function(r,a){r===void 0&&(r=0),a===void 0&&(a=!1);var l=r*2/3+1,o=(l-1)*-.5;return this.multiply([l,o,o,0,0,o,l,o,0,0,o,o,l,0,0,0,0,0,1,0],a)},desaturate:function(r){return r===void 0&&(r=!1),this.saturate(-1,r)},hue:function(r,a){r===void 0&&(r=0),a===void 0&&(a=!1),r=r/180*Math.PI;var l=Math.cos(r),o=Math.sin(r),u=.213,v=.715,d=.072;return this.multiply([u+l*(1-u)+o*-u,v+l*-v+o*-v,d+l*-d+o*(1-d),0,0,u+l*-u+o*.143,v+l*(1-v)+o*.14,d+l*-d+o*-.283,0,0,u+l*-u+o*-(1-u),v+l*-v+o*v,d+l*(1-d)+o*d,0,0,0,0,0,1,0],a)},grayscale:function(r,a){return r===void 0&&(r=1),a===void 0&&(a=!1),this.saturate(-r,a)},blackWhite:function(r){return r===void 0&&(r=!1),this.multiply([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],r)},contrast:function(r,a){r===void 0&&(r=0),a===void 0&&(a=!1);var l=r+1,o=-.5*(l-1);return this.multiply([l,0,0,0,o,0,l,0,0,o,0,0,l,0,o,0,0,0,1,0],a)},negative:function(r){return r===void 0&&(r=!1),this.multiply([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],r)},desaturateLuminance:function(r){return r===void 0&&(r=!1),this.multiply([.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,0,0,0,1,0],r)},sepia:function(r){return r===void 0&&(r=!1),this.multiply([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],r)},night:function(r,a){return r===void 0&&(r=.1),a===void 0&&(a=!1),this.multiply([r*-2,-r,0,0,0,-r,0,r,0,0,0,r,r*2,0,0,0,0,0,1,0],a)},lsd:function(r){return r===void 0&&(r=!1),this.multiply([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],r)},brown:function(r){return r===void 0&&(r=!1),this.multiply([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],r)},vintagePinhole:function(r){return r===void 0&&(r=!1),this.multiply([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],r)},kodachrome:function(r){return r===void 0&&(r=!1),this.multiply([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],r)},technicolor:function(r){return r===void 0&&(r=!1),this.multiply([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],r)},polaroid:function(r){return r===void 0&&(r=!1),this.multiply([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],r)},shiftToBGR:function(r){return r===void 0&&(r=!1),this.multiply([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],r)},multiply:function(r,a){a||this.reset();for(var l=this._matrix,o=[],u=0;u<20;u++)o[u]=l[u];return l[0]=o[0]*r[0]+o[1]*r[5]+o[2]*r[10]+o[3]*r[15],l[1]=o[0]*r[1]+o[1]*r[6]+o[2]*r[11]+o[3]*r[16],l[2]=o[0]*r[2]+o[1]*r[7]+o[2]*r[12]+o[3]*r[17],l[3]=o[0]*r[3]+o[1]*r[8]+o[2]*r[13]+o[3]*r[18],l[4]=o[0]*r[4]+o[1]*r[9]+o[2]*r[14]+o[3]*r[19]+o[4],l[5]=o[5]*r[0]+o[6]*r[5]+o[7]*r[10]+o[8]*r[15],l[6]=o[5]*r[1]+o[6]*r[6]+o[7]*r[11]+o[8]*r[16],l[7]=o[5]*r[2]+o[6]*r[7]+o[7]*r[12]+o[8]*r[17],l[8]=o[5]*r[3]+o[6]*r[8]+o[7]*r[13]+o[8]*r[18],l[9]=o[5]*r[4]+o[6]*r[9]+o[7]*r[14]+o[8]*r[19]+o[9],l[10]=o[10]*r[0]+o[11]*r[5]+o[12]*r[10]+o[13]*r[15],l[11]=o[10]*r[1]+o[11]*r[6]+o[12]*r[11]+o[13]*r[16],l[12]=o[10]*r[2]+o[11]*r[7]+o[12]*r[12]+o[13]*r[17],l[13]=o[10]*r[3]+o[11]*r[8]+o[12]*r[13]+o[13]*r[18],l[14]=o[10]*r[4]+o[11]*r[9]+o[12]*r[14]+o[13]*r[19]+o[14],l[15]=o[15]*r[0]+o[16]*r[5]+o[17]*r[10]+o[18]*r[15],l[16]=o[15]*r[1]+o[16]*r[6]+o[17]*r[11]+o[18]*r[16],l[17]=o[15]*r[2]+o[16]*r[7]+o[17]*r[12]+o[18]*r[17],l[18]=o[15]*r[3]+o[16]*r[8]+o[17]*r[13]+o[18]*r[18],l[19]=o[15]*r[4]+o[16]*r[9]+o[17]*r[14]+o[18]*r[19]+o[19],this._dirty=!0,this}});e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(10),h=i(14),r=function(a,l){if(l===void 0&&(l=new n),a.length===0)return l;for(var o=Number.MAX_VALUE,u=Number.MAX_VALUE,v=h.MIN_SAFE_INTEGER,d=h.MIN_SAFE_INTEGER,c,p,g,m=0;m<a.length;m++)c=a[m],Array.isArray(c)?(p=c[0],g=c[1]):(p=c.x,g=c.y),o=Math.min(o,p),u=Math.min(u,g),v=Math.max(v,p),d=Math.max(d,g);return l.x=o,l.y=u,l.width=v-o,l.height=d-u,l};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(1),r=new n({initialize:function(l,o,u){this._rgb=[0,0,0],this.onChangeCallback=h,this.dirty=!1,this.set(l,o,u)},set:function(a,l,o){return a===void 0&&(a=0),l===void 0&&(l=0),o===void 0&&(o=0),this._rgb=[a,l,o],this.onChange(),this},equals:function(a,l,o){var u=this._rgb;return u.r===a&&u.g===l&&u.b===o},onChange:function(){this.dirty=!0;var a=this._rgb;this.onChangeCallback.call(this,a[0],a[1],a[2])},r:{get:function(){return this._rgb[0]},set:function(a){this._rgb[0]=a,this.onChange()}},g:{get:function(){return this._rgb[1]},set:function(a){this._rgb[1]=a,this.onChange()}},b:{get:function(){return this._rgb[2]},set:function(a){this._rgb[2]=a,this.onChange()}},destroy:function(){this.onChangeCallback=null}});e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n={CENTER:i(403),ORIENTATION:i(404),SCALE_MODE:i(405),ZOOM:i(406)};e.exports=n},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){n.parentNode&&n.parentNode.removeChild(n)};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={MOUSE_DOWN:0,MOUSE_MOVE:1,MOUSE_UP:2,TOUCH_START:3,TOUCH_MOVE:4,TOUCH_END:5,POINTER_LOCK_CHANGE:6,TOUCH_CANCEL:7,MOUSE_WHEEL:8};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(144),r=i(197),a=i(20),l=i(419),o=i(420),u=i(33),v=i(1),d=i(421),c=new n({initialize:function(g,m){this.scene=g,this.game,this.renderer,this.config=m,this.settings=d.create(m),this.canvas,this.context,this.anims,this.cache,this.plugins,this.registry,this.scale,this.sound,this.textures,this.add,this.cameras,this.displayList,this.events,this.make,this.scenePlugin,this.updateList,this.sceneUpdate=v},init:function(p){this.settings.status=h.INIT,this.sceneUpdate=v,this.game=p,this.renderer=p.renderer,this.canvas=p.canvas,this.context=p.context;var g=p.plugins;this.plugins=g,g.addToScene(this,r.Global,[r.CoreScene,o(this),l(this)]),this.events.emit(a.BOOT,this),this.settings.isBooted=!0},step:function(p,g){var m=this.events;m.emit(a.PRE_UPDATE,p,g),m.emit(a.UPDATE,p,g),this.sceneUpdate.call(this.scene,p,g),m.emit(a.POST_UPDATE,p,g)},render:function(p){var g=this.displayList;g.depthSort(),this.events.emit(a.PRE_RENDER,p),this.cameras.render(p,g),this.events.emit(a.RENDER,p)},queueDepthSort:function(){this.displayList.queueDepthSort()},depthSort:function(){this.displayList.depthSort()},pause:function(p){var g=this.events,m=this.settings;return this.settings.active&&(m.status=h.PAUSED,m.active=!1,g.emit(a.PAUSE,this,p)),this},resume:function(p){var g=this.events,m=this.settings;return this.settings.active||(m.status=h.RUNNING,m.active=!0,g.emit(a.RESUME,this,p)),this},sleep:function(p){var g=this.events,m=this.settings;return m.status=h.SLEEPING,m.active=!1,m.visible=!1,g.emit(a.SLEEP,this,p),this},wake:function(p){var g=this.events,m=this.settings;return m.status=h.RUNNING,m.active=!0,m.visible=!0,g.emit(a.WAKE,this,p),m.isTransition&&g.emit(a.TRANSITION_WAKE,m.transitionFrom,m.transitionDuration),this},getData:function(){return this.settings.data},isSleeping:function(){return this.settings.status===h.SLEEPING},isActive:function(){return this.settings.status===h.RUNNING},isPaused:function(){return this.settings.status===h.PAUSED},isTransitioning:function(){return this.settings.isTransition||this.scenePlugin._target!==null},isTransitionOut:function(){return this.scenePlugin._target!==null&&this.scenePlugin._duration>0},isTransitionIn:function(){return this.settings.isTransition},isVisible:function(){return this.settings.visible},setVisible:function(p){return this.settings.visible=p,this},setActive:function(p,g){return p?this.resume(g):this.pause(g)},start:function(p){var g=this.events,m=this.settings;p&&(m.data=p),m.status=h.START,m.active=!0,m.visible=!0,g.emit(a.START,this),g.emit(a.READY,this,p)},shutdown:function(p){var g=this.events,m=this.settings;g.off(a.TRANSITION_INIT),g.off(a.TRANSITION_START),g.off(a.TRANSITION_COMPLETE),g.off(a.TRANSITION_OUT),m.status=h.SHUTDOWN,m.active=!1,m.visible=!1,this.renderer===u.WEBGL&&this.renderer.resetTextures(!0),g.emit(a.SHUTDOWN,this,p)},destroy:function(){var p=this.events,g=this.settings;g.status=h.DESTROYED,g.active=!1,g.visible=!1,p.emit(a.DESTROY,this),p.removeAllListeners();for(var m=["scene","game","anims","cache","plugins","registry","sound","textures","add","camera","displayList","events","make","scenePlugin","updateList"],x=0;x<m.length;x++)this[m[x]]=null}});e.exports=c},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n&&n[0].toUpperCase()+n.slice(1)};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(33),h=i(0),r=i(109),a=i(424),l="Texture.frame missing: ",o=new h({initialize:function(v,d,c,p,g){Array.isArray(c)||(c=[c]),this.manager=v,this.key=d,this.source=[],this.dataSource=[],this.frames={},this.customData={},this.firstFrame="__BASE",this.frameTotal=0;for(var m=0;m<c.length;m++)this.source.push(new a(this,c[m],p,g))},add:function(u,v,d,c,p,g){if(this.has(u))return null;var m=new r(this,u,v,d,c,p,g);return this.frames[u]=m,this.firstFrame==="__BASE"&&(this.firstFrame=u),this.frameTotal++,m},remove:function(u){if(this.has(u)){var v=this.get(u);return v.destroy(),delete this.frames[u],!0}return!1},has:function(u){return this.frames[u]},get:function(u){u||(u=this.firstFrame);var v=this.frames[u];return v||(console.warn(l+u),v=this.frames[this.firstFrame]),v},getTextureSourceIndex:function(u){for(var v=0;v<this.source.length;v++)if(this.source[v]===u)return v;return-1},getFramesFromTextureSource:function(u,v){v===void 0&&(v=!1);var d=[];for(var c in this.frames)if(!(c==="__BASE"&&!v)){var p=this.frames[c];p.sourceIndex===u&&d.push(p)}return d},getFrameNames:function(u){u===void 0&&(u=!1);var v=Object.keys(this.frames);if(!u){var d=v.indexOf("__BASE");d!==-1&&v.splice(d,1)}return v},getSourceImage:function(u){(u==null||this.frameTotal===1)&&(u="__BASE");var v=this.frames[u];return v?v.source.image:(console.warn(l+u),this.frames.__BASE.source.image)},getDataSourceImage:function(u){(u==null||this.frameTotal===1)&&(u="__BASE");var v=this.frames[u],d;return v?d=v.sourceIndex:(console.warn(l+u),d=this.frames.__BASE.sourceIndex),this.dataSource[d].image},setDataSource:function(u){Array.isArray(u)||(u=[u]);for(var v=0;v<u.length;v++){var d=this.source[v];this.dataSource.push(new a(this,u[v],d.width,d.height))}},setFilter:function(u){var v;for(v=0;v<this.source.length;v++)this.source[v].setFilter(u);for(v=0;v<this.dataSource.length;v++)this.dataSource[v].setFilter(u)},destroy:function(){var u;for(u=0;u<this.source.length;u++)this.source[u].destroy();for(u=0;u<this.dataSource.length;u++)this.dataSource[u].destroy();for(var v in this.frames){var d=this.frames[v];d.destroy()}this.source=[],this.dataSource=[],this.frames={},this.manager.removeKey(this.key);var c=this.manager.game.renderer;c&&c.type===n.WEBGL&&c.resetTextures(!0),this.manager=null}});e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(78),h=function(r,a,l,o,u){o===void 0&&(o=0),u===void 0&&(u=r.length);var v=[];if(n(r,o,u))for(var d=o;d<u;d++){var c=r[d];(!a||a&&l===void 0&&c.hasOwnProperty(a)||a&&l!==void 0&&c[a]===l)&&v.push(c)}return v};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Matrix:i(1013),Add:i(1021),AddAt:i(1022),BringToTop:i(1023),CountAllMatching:i(1024),Each:i(1025),EachInRange:i(1026),FindClosestInSorted:i(318),GetAll:i(207),GetFirst:i(428),GetRandom:i(210),MoveDown:i(1027),MoveTo:i(1028),MoveUp:i(1029),MoveAbove:i(1030),MoveBelow:i(1031),NumberArray:i(322),NumberArrayStep:i(1032),QuickSelect:i(436),Range:i(437),Remove:i(93),RemoveAt:i(1033),RemoveBetween:i(1034),RemoveRandomElement:i(1035),Replace:i(1036),RotateLeft:i(178),RotateRight:i(179),SafeRange:i(78),SendToBack:i(1037),SetAll:i(1038),Shuffle:i(131),SortByDigits:i(320),SpliceOne:i(74),StableSort:i(79),Swap:i(1039)}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){if(!Array.isArray(n)||n.length<2||!Array.isArray(n[0]))return!1;for(var h=n[0].length,r=1;r<n.length;r++)if(n[r].length!==h)return!1;return!0};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r){h===void 0&&(h=0),r===void 0&&(r=n.length);var a=h+Math.floor(Math.random()*r);return n[a]===void 0?null:n[a]};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(9),r=i(438),a=new n({Extends:h,initialize:function(){h.call(this),this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,this.checkQueue=!1},add:function(l){return this._pending.push(l),this._toProcess++,l},remove:function(l){return this._destroy.push(l),this._toProcess++,l},removeAll:function(){for(var l=this._active,o=this._destroy,u=l.length;u--;)o.push(l[u]),this._toProcess++;return this},update:function(){if(this._toProcess===0)return this._active;var l=this._destroy,o=this._active,u,v;for(u=0;u<l.length;u++){v=l[u];var d=o.indexOf(v);d!==-1&&(o.splice(d,1),this.emit(r.PROCESS_QUEUE_REMOVE,v))}for(l.length=0,l=this._pending,u=0;u<l.length;u++)v=l[u],(!this.checkQueue||this.checkQueue&&o.indexOf(v)===-1)&&(o.push(v),this.emit(r.PROCESS_QUEUE_ADD,v));return l.length=0,this._toProcess=0,o},getActive:function(){return this._active},length:{get:function(){return this._active.length}},destroy:function(){this._toProcess=0,this._pending=[],this._active=[],this._destroy=[]}});e.exports=a},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function i(h,r){return parseInt(h.getAttribute(r),10)}var n=function(h,r,a,l,o){a===void 0&&(a=0),l===void 0&&(l=0);var u=r.cutX,v=r.cutY,d=r.source.width,c=r.source.height,p=r.sourceIndex,g={},m=h.getElementsByTagName("info")[0],x=h.getElementsByTagName("common")[0];g.font=m.getAttribute("face"),g.size=i(m,"size"),g.lineHeight=i(x,"lineHeight")+l,g.chars={};var y=h.getElementsByTagName("char"),T=r!==void 0&&r.trimmed;if(T)var C=r.height,S=r.width;for(var E=0;E<y.length;E++){var M=y[E],O=i(M,"id"),L=String.fromCharCode(O),R=i(M,"x"),F=i(M,"y"),D=i(M,"width"),B=i(M,"height");T&&(R<S&&(S=R),F<C&&(C=F)),T&&C!==0&&S!==0&&(R-=r.x,F-=r.y);var N=(u+R)/d,U=(v+F)/c,X=(u+R+D)/d,K=(v+F+B)/c;if(g.chars[O]={x:R,y:F,width:D,height:B,centerX:Math.floor(D/2),centerY:Math.floor(B/2),xOffset:i(M,"xoffset"),yOffset:i(M,"yoffset"),xAdvance:i(M,"xadvance")+a,data:{},kerning:{},u0:N,v0:U,u1:X,v1:K},o&&D!==0&&B!==0){var k=o.add(L,p,R,F,D,B);k&&k.setUVs(D,B,N,U,X,K)}}var b=h.getElementsByTagName("kerning");for(E=0;E<b.length;E++){var I=b[E],G=i(I,"first"),Y=i(I,"second"),V=i(I,"amount");g.chars[Y].kerning[G]=V}return g};e.exports=n},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1049),h=i(440),r=i(0),a=i(11),l=i(109),o=i(15),u=i(110),v=new r({Extends:o,Mixins:[a.Alpha,a.BlendMode,a.Depth,a.Mask,a.Pipeline,a.ScrollFactor,a.Size,a.Texture,a.Transform,a.Visible,n],initialize:function(c,p,g,m,x){o.call(this,c,"Blitter"),this.setTexture(m,x),this.setPosition(p,g),this.initPipeline(),this.children=new u,this.renderList=[],this.dirty=!1},create:function(d,c,p,g,m){g===void 0&&(g=!0),m===void 0&&(m=this.children.length),p===void 0?p=this.frame:p instanceof l||(p=this.texture.get(p));var x=new h(this,d,c,p,g);return this.children.addAt(x,m,!1),this.dirty=!0,x},createFromCallback:function(d,c,p,g){for(var m=this.createMultiple(c,p,g),x=0;x<m.length;x++){var y=m[x];d.call(this,y,x)}return m},createMultiple:function(d,c,p){c===void 0&&(c=this.frame.name),p===void 0&&(p=!0),Array.isArray(c)||(c=[c]);var g=[],m=this;return c.forEach(function(x){for(var y=0;y<d;y++)g.push(m.create(0,0,x,p))}),g},childCanRender:function(d){return d.visible&&d.alpha>0},getRenderList:function(){return this.dirty&&(this.renderList=this.children.list.filter(this.childCanRender,this),this.dirty=!1),this.renderList},clear:function(){this.children.removeAll(),this.dirty=!0},preDestroy:function(){this.children.destroy(),this.renderList=[]}});e.exports=v},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(208),h=i(35),r=i(0),a=i(11),l=i(75),o=i(15),u=i(10),v=i(1052),d=i(441),c=i(3),p=new r({Extends:o,Mixins:[a.AlphaSingle,a.BlendMode,a.ComputedSize,a.Depth,a.Mask,a.Pipeline,a.Transform,a.Visible,v],initialize:function(m,x,y,T){o.call(this,m,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new a.TransformMatrix,this.tempTransformMatrix=new a.TransformMatrix,this._sortKey="",this._sysEvents=m.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.initPipeline(),this.setPosition(x,y),this.clearAlpha(),this.setBlendMode(h.SKIP_CHECK),T&&this.add(T)},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this.width*.5}},displayOriginY:{get:function(){return this.height*.5}},setExclusive:function(g){return g===void 0&&(g=!0),this.exclusive=g,this},getBounds:function(g){if(g===void 0&&(g=new u),g.setTo(this.x,this.y,0,0),this.parentContainer){var m=this.parentContainer.getBoundsTransformMatrix(),x=m.transformPoint(this.x,this.y);g.setTo(x.x,x.y,0,0)}if(this.list.length>0){var y=this.list,T=new u,C=!1;g.setEmpty();for(var S=0;S<y.length;S++){var E=y[S];E.getBounds&&(E.getBounds(T),C?d(T,g,g):(g.setTo(T.x,T.y,T.width,T.height),C=!0))}}return g},addHandler:function(g){g.once(l.DESTROY,this.remove,this),this.exclusive&&(g.parentContainer&&g.parentContainer.remove(g),g.removeFromDisplayList(),g.parentContainer=this)},removeHandler:function(g){g.off(l.DESTROY,this.remove),this.exclusive&&(g.parentContainer=null,g.addToDisplayList())},pointToContainer:function(g,m){m===void 0&&(m=new c),this.parentContainer?this.parentContainer.pointToContainer(g,m):m=new c(g.x,g.y);var x=this.tempTransformMatrix;return x.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),x.invert(),x.transformPoint(g.x,g.y,m),m},getBoundsTransformMatrix:function(){return this.getWorldTransformMatrix(this.tempTransformMatrix,this.localTransform)},add:function(g){return n.Add(this.list,g,this.maxSize,this.addHandler,this),this},addAt:function(g,m){return n.AddAt(this.list,g,m,this.maxSize,this.addHandler,this),this},getAt:function(g){return this.list[g]},getIndex:function(g){return this.list.indexOf(g)},sort:function(g,m){return g?(m===void 0&&(m=function(x,y){return x[g]-y[g]}),n.StableSort(this.list,m),this):this},getByName:function(g){return n.GetFirst(this.list,"name",g)},getRandom:function(g,m){return n.GetRandom(this.list,g,m)},getFirst:function(g,m,x,y){return n.GetFirst(this.list,g,m,x,y)},getAll:function(g,m,x,y){return n.GetAll(this.list,g,m,x,y)},count:function(g,m,x,y){return n.CountAllMatching(this.list,g,m,x,y)},swap:function(g,m){return n.Swap(this.list,g,m),this},moveTo:function(g,m){return n.MoveTo(this.list,g,m),this},moveAbove:function(g,m){return n.MoveAbove(this.list,g,m),this},moveBelow:function(g,m){return n.MoveBelow(this.list,g,m),this},remove:function(g,m){var x=n.Remove(this.list,g,this.removeHandler,this);if(m&&x){Array.isArray(x)||(x=[x]);for(var y=0;y<x.length;y++)x[y].destroy()}return this},removeAt:function(g,m){var x=n.RemoveAt(this.list,g,this.removeHandler,this);return m&&x&&x.destroy(),this},removeBetween:function(g,m,x){var y=n.RemoveBetween(this.list,g,m,this.removeHandler,this);if(x)for(var T=0;T<y.length;T++)y[T].destroy();return this},removeAll:function(g){var m=n.RemoveBetween(this.list,0,this.list.length,this.removeHandler,this);if(g)for(var x=0;x<m.length;x++)m[x].destroy();return this},bringToTop:function(g){return n.BringToTop(this.list,g),this},sendToBack:function(g){return n.SendToBack(this.list,g),this},moveUp:function(g){return n.MoveUp(this.list,g),this},moveDown:function(g){return n.MoveDown(this.list,g),this},reverse:function(){return this.list.reverse(),this},shuffle:function(){return n.Shuffle(this.list),this},replace:function(g,m,x){var y=n.Replace(this.list,g,m);return y&&(this.addHandler(m),this.removeHandler(g),x&&g.destroy()),this},exists:function(g){return this.list.indexOf(g)>-1},setAll:function(g,m,x,y){return n.SetAll(this.list,g,m,x,y),this},each:function(g,m){var x=[null],y,T=this.list.slice(),C=T.length;for(y=2;y<arguments.length;y++)x.push(arguments[y]);for(y=0;y<C;y++)x[0]=T[y],g.apply(m,x);return this},iterate:function(g,m){var x=[null],y;for(y=2;y<arguments.length;y++)x.push(arguments[y]);for(y=0;y<this.list.length;y++)x[0]=this.list[y],g.apply(m,x);return this},setScrollFactor:function(g,m,x){return m===void 0&&(m=g),x===void 0&&(x=!1),this.scrollFactorX=g,this.scrollFactorY=m,x&&(n.SetAll(this.list,"scrollFactorX",g),n.SetAll(this.list,"scrollFactorY",m)),this},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.tempTransformMatrix.destroy(),this.list=[]}});e.exports=p},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(148),h=i(0),r=i(1057),a=new h({Extends:n,Mixins:[r],initialize:function(o,u,v,d,c,p,g){n.call(this,o,u,v,d,c,p,g),this.type="DynamicBitmapText",this.scrollX=0,this.scrollY=0,this.cropWidth=0,this.cropHeight=0,this.displayCallback,this.callbackData={parent:this,color:0,tint:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},index:0,charCode:0,x:0,y:0,scale:0,rotation:0,data:0}},setSize:function(l,o){return this.cropWidth=l,this.cropHeight=o,this},setDisplayCallback:function(l){return this.displayCallback=l,this},setScrollX:function(l){return this.scrollX=l,this},setScrollY:function(l){return this.scrollY=l,this}});e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(133),h=i(0),r=i(217),a=i(303),l=i(304),o=i(305),u=i(309),v=i(167),d=i(312),c=i(313),p=i(314),g=i(111),m=i(15),x=i(2),y=i(6),T=i(14),C=i(1063),S=new h({Extends:m,Mixins:[a,l,o,u,v,c,p,d,C],initialize:function(M,O){var L=y(O,"x",0),R=y(O,"y",0);m.call(this,M,"Graphics"),this.setPosition(L,R),this.initPipeline(),this.displayOriginX=0,this.displayOriginY=0,this.commandBuffer=[],this.defaultFillColor=-1,this.defaultFillAlpha=1,this.defaultStrokeWidth=1,this.defaultStrokeColor=-1,this.defaultStrokeAlpha=1,this._lineWidth=1,this.setDefaultStyles(O)},setDefaultStyles:function(E){return y(E,"lineStyle",null)&&(this.defaultStrokeWidth=y(E,"lineStyle.width",1),this.defaultStrokeColor=y(E,"lineStyle.color",16777215),this.defaultStrokeAlpha=y(E,"lineStyle.alpha",1),this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha)),y(E,"fillStyle",null)&&(this.defaultFillColor=y(E,"fillStyle.color",16777215),this.defaultFillAlpha=y(E,"fillStyle.alpha",1),this.fillStyle(this.defaultFillColor,this.defaultFillAlpha)),this},lineStyle:function(E,M,O){return O===void 0&&(O=1),this.commandBuffer.push(r.LINE_STYLE,E,M,O),this._lineWidth=E,this},fillStyle:function(E,M){return M===void 0&&(M=1),this.commandBuffer.push(r.FILL_STYLE,E,M),this},fillGradientStyle:function(E,M,O,L,R,F,D,B){return R===void 0&&(R=1),F===void 0&&(F=R),D===void 0&&(D=R),B===void 0&&(B=R),this.commandBuffer.push(r.GRADIENT_FILL_STYLE,R,F,D,B,E,M,O,L),this},lineGradientStyle:function(E,M,O,L,R,F){return F===void 0&&(F=1),this.commandBuffer.push(r.GRADIENT_LINE_STYLE,E,F,M,O,L,R),this},beginPath:function(){return this.commandBuffer.push(r.BEGIN_PATH),this},closePath:function(){return this.commandBuffer.push(r.CLOSE_PATH),this},fillPath:function(){return this.commandBuffer.push(r.FILL_PATH),this},fill:function(){return this.commandBuffer.push(r.FILL_PATH),this},strokePath:function(){return this.commandBuffer.push(r.STROKE_PATH),this},stroke:function(){return this.commandBuffer.push(r.STROKE_PATH),this},fillCircleShape:function(E){return this.fillCircle(E.x,E.y,E.radius)},strokeCircleShape:function(E){return this.strokeCircle(E.x,E.y,E.radius)},fillCircle:function(E,M,O){return this.beginPath(),this.arc(E,M,O,0,T.PI2),this.fillPath(),this},strokeCircle:function(E,M,O){return this.beginPath(),this.arc(E,M,O,0,T.PI2),this.strokePath(),this},fillRectShape:function(E){return this.fillRect(E.x,E.y,E.width,E.height)},strokeRectShape:function(E){return this.strokeRect(E.x,E.y,E.width,E.height)},fillRect:function(E,M,O,L){return this.commandBuffer.push(r.FILL_RECT,E,M,O,L),this},strokeRect:function(E,M,O,L){var R=this._lineWidth/2,F=E-R,D=E+R;return this.beginPath(),this.moveTo(E,M),this.lineTo(E,M+L),this.strokePath(),this.beginPath(),this.moveTo(E+O,M),this.lineTo(E+O,M+L),this.strokePath(),this.beginPath(),this.moveTo(F,M),this.lineTo(D+O,M),this.strokePath(),this.beginPath(),this.moveTo(F,M+L),this.lineTo(D+O,M+L),this.strokePath(),this},fillRoundedRect:function(E,M,O,L,R){R===void 0&&(R=20);var F=R,D=R,B=R,N=R;return typeof R!="number"&&(F=x(R,"tl",20),D=x(R,"tr",20),B=x(R,"bl",20),N=x(R,"br",20)),this.beginPath(),this.moveTo(E+F,M),this.lineTo(E+O-D,M),this.arc(E+O-D,M+D,D,-T.TAU,0),this.lineTo(E+O,M+L-N),this.arc(E+O-N,M+L-N,N,0,T.TAU),this.lineTo(E+B,M+L),this.arc(E+B,M+L-B,B,T.TAU,Math.PI),this.lineTo(E,M+F),this.arc(E+F,M+F,F,-Math.PI,-T.TAU),this.fillPath(),this},strokeRoundedRect:function(E,M,O,L,R){R===void 0&&(R=20);var F=R,D=R,B=R,N=R;return typeof R!="number"&&(F=x(R,"tl",20),D=x(R,"tr",20),B=x(R,"bl",20),N=x(R,"br",20)),this.beginPath(),this.moveTo(E+F,M),this.lineTo(E+O-D,M),this.moveTo(E+O-D,M),this.arc(E+O-D,M+D,D,-T.TAU,0),this.lineTo(E+O,M+L-N),this.moveTo(E+O,M+L-N),this.arc(E+O-N,M+L-N,N,0,T.TAU),this.lineTo(E+B,M+L),this.moveTo(E+B,M+L),this.arc(E+B,M+L-B,B,T.TAU,Math.PI),this.lineTo(E,M+F),this.moveTo(E,M+F),this.arc(E+F,M+F,F,-Math.PI,-T.TAU),this.strokePath(),this},fillPointShape:function(E,M){return this.fillPoint(E.x,E.y,M)},fillPoint:function(E,M,O){return!O||O<1?O=1:(E-=O/2,M-=O/2),this.commandBuffer.push(r.FILL_RECT,E,M,O,O),this},fillTriangleShape:function(E){return this.fillTriangle(E.x1,E.y1,E.x2,E.y2,E.x3,E.y3)},strokeTriangleShape:function(E){return this.strokeTriangle(E.x1,E.y1,E.x2,E.y2,E.x3,E.y3)},fillTriangle:function(E,M,O,L,R,F){return this.commandBuffer.push(r.FILL_TRIANGLE,E,M,O,L,R,F),this},strokeTriangle:function(E,M,O,L,R,F){return this.commandBuffer.push(r.STROKE_TRIANGLE,E,M,O,L,R,F),this},strokeLineShape:function(E){return this.lineBetween(E.x1,E.y1,E.x2,E.y2)},lineBetween:function(E,M,O,L){return this.beginPath(),this.moveTo(E,M),this.lineTo(O,L),this.strokePath(),this},lineTo:function(E,M){return this.commandBuffer.push(r.LINE_TO,E,M),this},moveTo:function(E,M){return this.commandBuffer.push(r.MOVE_TO,E,M),this},strokePoints:function(E,M,O,L){M===void 0&&(M=!1),O===void 0&&(O=!1),L===void 0&&(L=E.length),this.beginPath(),this.moveTo(E[0].x,E[0].y);for(var R=1;R<L;R++)this.lineTo(E[R].x,E[R].y);return M&&this.lineTo(E[0].x,E[0].y),O&&this.closePath(),this.strokePath(),this},fillPoints:function(E,M,O,L){M===void 0&&(M=!1),O===void 0&&(O=!1),L===void 0&&(L=E.length),this.beginPath(),this.moveTo(E[0].x,E[0].y);for(var R=1;R<L;R++)this.lineTo(E[R].x,E[R].y);return M&&this.lineTo(E[0].x,E[0].y),O&&this.closePath(),this.fillPath(),this},strokeEllipseShape:function(E,M){M===void 0&&(M=32);var O=E.getPoints(M);return this.strokePoints(O,!0)},strokeEllipse:function(E,M,O,L,R){R===void 0&&(R=32);var F=new g(E,M,O,L),D=F.getPoints(R);return this.strokePoints(D,!0)},fillEllipseShape:function(E,M){M===void 0&&(M=32);var O=E.getPoints(M);return this.fillPoints(O,!0)},fillEllipse:function(E,M,O,L,R){R===void 0&&(R=32);var F=new g(E,M,O,L),D=F.getPoints(R);return this.fillPoints(D,!0)},arc:function(E,M,O,L,R,F,D){return F===void 0&&(F=!1),D===void 0&&(D=0),this.commandBuffer.push(r.ARC,E,M,O,L,R,F,D),this},slice:function(E,M,O,L,R,F,D){return F===void 0&&(F=!1),D===void 0&&(D=0),this.commandBuffer.push(r.BEGIN_PATH),this.commandBuffer.push(r.MOVE_TO,E,M),this.commandBuffer.push(r.ARC,E,M,O,L,R,F,D),this.commandBuffer.push(r.CLOSE_PATH),this},save:function(){return this.commandBuffer.push(r.SAVE),this},restore:function(){return this.commandBuffer.push(r.RESTORE),this},translateCanvas:function(E,M){return this.commandBuffer.push(r.TRANSLATE,E,M),this},scaleCanvas:function(E,M){return this.commandBuffer.push(r.SCALE,E,M),this},rotateCanvas:function(E){return this.commandBuffer.push(r.ROTATE,E),this},clear:function(){return this.commandBuffer.length=0,this.defaultFillColor>-1&&this.fillStyle(this.defaultFillColor,this.defaultFillAlpha),this.defaultStrokeColor>-1&&this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha),this},generateTexture:function(E,M,O){var L=this.scene.sys,R=L.game.renderer;M===void 0&&(M=L.scale.width),O===void 0&&(O=L.scale.height),S.TargetCamera.setScene(this.scene),S.TargetCamera.setViewport(0,0,M,O),S.TargetCamera.scrollX=this.x,S.TargetCamera.scrollY=this.y;var F,D;if(typeof E=="string")if(L.textures.exists(E)){F=L.textures.get(E);var B=F.getSourceImage();B instanceof HTMLCanvasElement&&(D=B.getContext("2d"))}else F=L.textures.createCanvas(E,M,O),D=F.getSourceImage().getContext("2d");else E instanceof HTMLCanvasElement&&(D=E.getContext("2d"));return D&&(this.renderCanvas(R,this,S.TargetCamera,null,D,!1),F&&F.refresh()),this},preDestroy:function(){this.commandBuffer=[]}});S.TargetCamera=new n,e.exports=S},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ARC:0,BEGIN_PATH:1,CLOSE_PATH:2,FILL_RECT:3,LINE_TO:4,MOVE_TO:5,LINE_STYLE:6,FILL_STYLE:7,FILL_PATH:8,STROKE_PATH:9,FILL_TRIANGLE:10,STROKE_TRIANGLE:11,SAVE:14,RESTORE:15,TRANSLATE:16,SCALE:17,ROTATE:18,GRADIENT_FILL_STYLE:21,GRADIENT_LINE_STYLE:22}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4),h=function(r,a,l){l===void 0&&(l=new n);var o=r.width/2,u=r.height/2;return l.x=r.x+o*Math.cos(a),l.y=r.y+u*Math.sin(a),l};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(35),h=i(0),r=i(11),a=i(176),l=i(101),o=i(9),u=i(75),v=i(110),d=i(1071),c=i(20),p=i(79),g=new h({Extends:v,Mixins:[r.AlphaSingle,r.BlendMode,r.Depth,r.Mask,r.Pipeline,r.Visible,o,d],initialize:function(x,y){v.call(this,x),o.call(this),this.scene=x,this.displayList=null,this.type="Layer",this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.systems=x.sys,this.events=x.sys.events,this.sortChildrenFlag=!1,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.initPipeline(),this.clearAlpha(),this.setBlendMode(n.SKIP_CHECK),y&&this.add(y),x.sys.queueDepthSort()},setActive:function(m){return this.active=m,this},setName:function(m){return this.name=m,this},setState:function(m){return this.state=m,this},setDataEnabled:function(){return this.data||(this.data=new l(this)),this},setData:function(m,x){return this.data||(this.data=new l(this)),this.data.set(m,x),this},incData:function(m,x){return this.data||(this.data=new l(this)),this.data.inc(m,x),this},toggleData:function(m){return this.data||(this.data=new l(this)),this.data.toggle(m),this},getData:function(m){return this.data||(this.data=new l(this)),this.data.get(m)},setInteractive:function(){return this},disableInteractive:function(){return this},removeInteractive:function(){return this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return a(this)},willRender:function(m){return!(this.renderFlags!==15||this.list.length===0||this.cameraFilter!==0&&this.cameraFilter&m.id)},getIndexList:function(){for(var m=this,x=this.parentContainer,y=[];x&&(y.unshift(x.getIndex(m)),m=x,x.parentContainer);)x=x.parentContainer;return y.unshift(this.displayList.getIndex(m)),y},addChildCallback:function(m){m.displayList&&m.displayList!==this&&m.removeFromDisplayList(),m.displayList||(this.queueDepthSort(),m.displayList=this,m.emit(u.ADDED_TO_SCENE,m,this.scene),this.events.emit(c.ADDED_TO_SCENE,m,this.scene))},removeChildCallback:function(m){this.queueDepthSort(),m.displayList=null,m.emit(u.REMOVED_FROM_SCENE,m,this.scene),this.events.emit(c.REMOVED_FROM_SCENE,m,this.scene)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(p(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(m,x){return m._depth-x._depth},getChildren:function(){return this.list},destroy:function(){if(!(!this.scene||this.ignoreDestroy)){this.emit(u.DESTROY,this);for(var m=this.list.length;m--;)this.list[m].destroy();this.removeAllListeners(),this.resetPostPipeline(!0),this.displayList&&(this.displayList.remove(this,!0),this.displayList.queueDepthSort()),this.data&&(this.data.destroy(),this.data=void 0),this.active=!1,this.visible=!1,this.list=void 0,this.scene=void 0,this.displayList=void 0,this.systems=void 0,this.events=void 0}}});e.exports=g},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(11),r=i(15),a=i(450),l=i(110),o=i(452),u=i(1075),v=new n({Extends:r,Mixins:[h.Depth,h.Mask,h.Pipeline,h.Transform,h.Visible,u],initialize:function(c,p,g,m){if(r.call(this,c,"ParticleEmitterManager"),this.blendMode=-1,this.timeScale=1,this.texture=null,this.frame=null,this.frameNames=[],g!==null&&(typeof g=="object"||Array.isArray(g))&&(m=g,g=null),this.setTexture(p,g),this.initPipeline(),this.emitters=new l(this),this.wells=new l(this),m){Array.isArray(m)||(m=[m]);for(var x=0;x<m.length;x++)this.createEmitter(m[x])}},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},setTexture:function(d,c){return this.texture=this.scene.sys.textures.get(d),this.setFrame(c)},setFrame:function(d){this.frame=this.texture.get(d);var c=this.texture.getFramesFromTextureSource(this.frame.sourceIndex),p=[];return c.forEach(function(g){p.push(g.name)}),this.frameNames=p,this.defaultFrame=this.frame,this},setEmitterFrames:function(d,c){Array.isArray(d)||(d=[d]);var p=c.frames;p.length=0;for(var g=0;g<d.length;g++){var m=d[g];this.frameNames.indexOf(m)!==-1&&p.push(this.texture.get(m))}return p.length>0?c.defaultFrame=p[0]:c.defaultFrame=this.defaultFrame,this},addEmitter:function(d){return this.emitters.add(d)},createEmitter:function(d){return this.addEmitter(new o(this,d))},removeEmitter:function(d){return this.emitters.remove(d,!0)},addGravityWell:function(d){return this.wells.add(d)},createGravityWell:function(d){return this.addGravityWell(new a(d))},emitParticle:function(d,c,p){for(var g=this.emitters.list,m=0;m<g.length;m++){var x=g[m];x.active&&x.emitParticle(d,c,p)}return this},emitParticleAt:function(d,c,p){return this.emitParticle(p,d,c)},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},getProcessors:function(){return this.wells.getAll("active",!0)},preUpdate:function(d,c){c*=this.timeScale;for(var p=this.emitters.list,g=0;g<p.length;g++){var m=p[g];m.active&&m.preUpdate(d,c)}},setAlpha:function(){},setScrollFactor:function(){},setBlendMode:function(){}});e.exports=v},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(35),h=i(133),r=i(31),a=i(0),l=i(11),o=i(33),u=i(109),v=i(15),d=i(1),c=i(92),p=i(1079),g=i(141),m=i(12),x=i(222),y=new a({Extends:v,Mixins:[l.Alpha,l.BlendMode,l.ComputedSize,l.Crop,l.Depth,l.Flip,l.GetBounds,l.Mask,l.Origin,l.Pipeline,l.ScrollFactor,l.Tint,l.Transform,l.Visible,p],initialize:function(C,S,E,M,O,L,R){S===void 0&&(S=0),E===void 0&&(E=0),M===void 0&&(M=32),O===void 0&&(O=32),v.call(this,C,"RenderTexture"),this.renderer=C.sys.renderer,this.textureManager=C.sys.textures,this.globalTint=16777215,this.globalAlpha=1,this.canvas=null,this.dirty=!1,this._crop=this.resetCropObject(),this.texture=null,this.frame=null,this._saved=!1,L===void 0?(this.canvas=r.create2D(this,M,O),this.texture=C.sys.textures.addCanvas(x(),this.canvas),this.frame=this.texture.get()):(this.texture=C.sys.textures.get(L),this.frame=this.texture.get(R),this.canvas=this.frame.source.image,this._saved=!0,this.dirty=!0,this.width=this.frame.cutWidth,this.height=this.frame.cutHeight),this.context=this.canvas.getContext("2d"),this._eraseMode=!1,this.camera=new h(0,0,M,O),this.renderTarget=null;var F=this.renderer;F?F.type===o.WEBGL?(this.drawGameObject=this.batchGameObjectWebGL,this.renderTarget=new g(F,M,O,1,0,!1)):F.type===o.CANVAS&&(this.drawGameObject=this.batchGameObjectCanvas):this.drawGameObject=d,this.camera.setScene(C),this.setPosition(S,E),L===void 0&&this.setSize(M,O),this.setOrigin(0,0),this.initPipeline(c.SINGLE_PIPELINE)},setSize:function(T,C){return this.resize(T,C)},resize:function(T,C){C===void 0&&(C=T);var S=this.frame;if(T!==this.width||C!==this.height){if(S.name==="__BASE"){this.canvas.width=T,this.canvas.height=C,this.texture.width=T,this.texture.height=C;var E=this.renderTarget;E&&(E.resize(T,C),S.glTexture=E.texture,S.source.isRenderTexture=!0,S.source.isGLTexture=!0,S.source.glTexture=E.texture),this.camera.setSize(T,C),S.source.width=T,S.source.height=C,S.setSize(T,C),this.width=T,this.height=C}}else{var M=this.texture.getSourceImage();S.cutX+T>M.width&&(T=M.width-S.cutX),S.cutY+C>M.height&&(C=M.height-S.cutY),S.setSize(T,C,S.cutX,S.cutY)}this.updateDisplayOrigin();var O=this.input;return O&&!O.customHitArea&&(O.hitArea.width=T,O.hitArea.height=C),this},setGlobalTint:function(T){return this.globalTint=T,this},setGlobalAlpha:function(T){return this.globalAlpha=T,this},saveTexture:function(T){return this.textureManager.renameTexture(this.texture.key,T),this._saved=!0,this.texture},fill:function(T,C,S,E,M,O){var L=this.frame,R=this.camera,F=this.renderer;C===void 0&&(C=1),S===void 0&&(S=0),E===void 0&&(E=0),M===void 0&&(M=L.cutWidth),O===void 0&&(O=L.cutHeight);var D=(T>>16&255)/255,B=(T>>8&255)/255,N=(T&255)/255,U=this.renderTarget;if(R.preRender(),U){U.bind(!0);var X=this.pipeline;X.manager.set(X);var K=U.width,k=U.height,b=F.width,I=F.height,G=b/K,Y=I/k;X.drawFillRect(S*G,E*Y,M*G,O*Y,m.getTintFromFloats(N,B,D,1),C),U.unbind(!0)}else{var V=this.context;F.setContext(V),V.fillStyle="rgba("+D+","+B+","+N+","+C+")",V.fillRect(S+L.cutX,E+L.cutY,M,O),F.setContext()}return this.dirty=!0,this},clear:function(){if(this.dirty){var T=this.renderTarget;if(T)T.clear();else{var C=this.context;C.save(),C.setTransform(1,0,0,1,0,0),C.clearRect(this.frame.cutX,this.frame.cutY,this.frame.cutWidth,this.frame.cutHeight),C.restore()}this.dirty=!1}return this},erase:function(T,C,S){return this._eraseMode=!0,this.draw(T,C,S,1,16777215),this._eraseMode=!1,this},draw:function(T,C,S,E,M){return this.beginDraw(),this.batchDraw(T,C,S,E,M),this.endDraw(),this},drawFrame:function(T,C,S,E,M,O){return this.beginDraw(),this.batchDrawFrame(T,C,S,E,M,O),this.endDraw(),this},beginDraw:function(){var T=this.camera,C=this.renderer,S=this.renderTarget;return T.preRender(),S?C.beginCapture(S.width,S.height):C.setContext(this.context),this},batchDraw:function(T,C,S,E,M){return E===void 0&&(E=this.globalAlpha),M===void 0?M=(this.globalTint>>16)+(this.globalTint&65280)+((this.globalTint&255)<<16):M=(M>>16)+(M&65280)+((M&255)<<16),Array.isArray(T)||(T=[T]),this.batchList(T,C,S,E,M),this},batchDrawFrame:function(T,C,S,E,M,O){S===void 0&&(S=0),E===void 0&&(E=0),M===void 0&&(M=this.globalAlpha),O===void 0?O=(this.globalTint>>16)+(this.globalTint&65280)+((this.globalTint&255)<<16):O=(O>>16)+(O&65280)+((O&255)<<16);var L=this.textureManager.getFrame(T,C);return L&&(this.renderTarget?this.pipeline.batchTextureFrame(L,S,E,O,M,this.camera.matrix,null):this.batchTextureFrame(L,S+this.frame.cutX,E+this.frame.cutY,M,O)),this},endDraw:function(T){T===void 0&&(T=this._eraseMode);var C=this.renderer,S=this.renderTarget;if(S){var E=C.endCapture(),M=C.pipelines.setUtility();M.blitFrame(E,S,1,!1,!1,T),C.resetScissor(),C.resetViewport()}else C.setContext();return this.dirty=!0,this},batchList:function(T,C,S,E,M){for(var O=0;O<T.length;O++){var L=T[O];!L||L===this||(L.renderWebGL||L.renderCanvas?this.drawGameObject(L,C,S):L.isParent||L.list?this.batchGroup(L.getChildren(),C,S):typeof L=="string"?this.batchTextureFrameKey(L,null,C,S,E,M):L instanceof u?this.batchTextureFrame(L,C,S,E,M):Array.isArray(L)&&this.batchList(L,C,S,E,M))}},batchGroup:function(T,C,S){C===void 0&&(C=0),S===void 0&&(S=0),C+=this.frame.cutX,S+=this.frame.cutY;for(var E=0;E<T.length;E++){var M=T[E];if(M.willRender(this.camera)){var O=M.x+C,L=M.y+S;this.drawGameObject(M,O,L)}}},batchGameObjectWebGL:function(T,C,S){C===void 0&&(C=T.x),S===void 0&&(S=T.y);var E=T.x,M=T.y;T.setPosition(C+this.frame.cutX,S+this.frame.cutY),T.renderDirect?T.renderDirect(this.renderer,T,this.camera):T.renderWebGL(this.renderer,T,this.camera),T.setPosition(E,M)},batchGameObjectCanvas:function(T,C,S){C===void 0&&(C=T.x),S===void 0&&(S=T.y);var E=T.x,M=T.y;if(this._eraseMode){var O=T.blendMode;T.blendMode=n.ERASE}T.setPosition(C+this.frame.cutX,S+this.frame.cutY),T.renderCanvas(this.renderer,T,this.camera,null),T.setPosition(E,M),this._eraseMode&&(T.blendMode=O)},batchTextureFrameKey:function(T,C,S,E,M,O){var L=this.textureManager.getFrame(T,C);L&&this.batchTextureFrame(L,S,E,M,O)},batchTextureFrame:function(T,C,S,E,M){C===void 0&&(C=0),S===void 0&&(S=0),C+=this.frame.cutX,S+=this.frame.cutY;var O=this.renderTarget;if(O)this.pipeline.batchTextureFrame(T,C,S,M,E,this.camera.matrix,null);else{var L=this.context,R=T.canvasData,F=T.source.image,D=this.camera.matrix;L.save(),L.globalCompositeOperation=this._eraseMode?"destination-out":"source-over",L.globalAlpha=E,D.setToContext(L),L.drawImage(F,R.x,R.y,R.width,R.height,C,S,R.width,R.height),L.restore()}},snapshotArea:function(T,C,S,E,M,O,L){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,M,!1,T,C,S,E,O,L):this.renderer.snapshotCanvas(this.canvas,M,!1,T,C,S,E,O,L),this},snapshot:function(T,C,S){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,T,!1,0,0,this.width,this.height,C,S):this.renderer.snapshotCanvas(this.canvas,T,!1,0,0,this.width,this.height,C,S),this},snapshotPixel:function(T,C,S){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,S,!0,T,C):this.renderer.snapshotCanvas(this.canvas,S,!0,T,C),this},preDestroy:function(){this._saved||(r.remove(this.canvas),this.renderTarget&&this.renderTarget.destroy(),this.texture.destroy(),this.camera.destroy(),this.canvas=null,this.context=null,this.texture=null)}});e.exports=y},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var h=Math.random()*16|0,r=n==="x"?h:h&3|8;return r.toString(16)})};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(164),h=i(0),r=i(11),a=i(15),l=i(92),o=i(1085),u=i(3),v=new h({Extends:a,Mixins:[r.AlphaSingle,r.BlendMode,r.Depth,r.Flip,r.Mask,r.Pipeline,r.Size,r.Texture,r.Transform,r.Visible,r.ScrollFactor,o],initialize:function(c,p,g,m,x,y,T,C,S){m===void 0&&(m="__DEFAULT"),y===void 0&&(y=2),T===void 0&&(T=!0),a.call(this,c,"Rope"),this.anims=new n(this),this.points=y,this.vertices,this.uv,this.colors,this.alphas,this.tintFill=m==="__DEFAULT",this.dirty=!1,this.horizontal=T,this._flipX=!1,this._flipY=!1,this._perp=new u,this.debugCallback=null,this.debugGraphic=null,this.setTexture(m,x),this.setPosition(p,g),this.setSizeToFrame(),this.initPipeline(l.ROPE_PIPELINE),Array.isArray(y)&&this.resizeArrays(y.length),this.setPoints(y,C,S),this.updateVertices()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(d,c){var p=this.anims.currentFrame;this.anims.update(d,c),this.anims.currentFrame!==p&&(this.updateUVs(),this.updateVertices())},play:function(d,c,p){return this.anims.play(d,c,p),this},setDirty:function(){return this.dirty=!0,this},setHorizontal:function(d,c,p){return d===void 0&&(d=this.points.length),this.horizontal?this:(this.horizontal=!0,this.setPoints(d,c,p))},setVertical:function(d,c,p){return d===void 0&&(d=this.points.length),this.horizontal?(this.horizontal=!1,this.setPoints(d,c,p)):this},setTintFill:function(d){return d===void 0&&(d=!1),this.tintFill=d,this},setAlphas:function(d,c){var p=this.points.length;if(p<1)return this;var g=this.alphas;d===void 0?d=[1]:!Array.isArray(d)&&c===void 0&&(d=[d]);var m,x=0;if(c!==void 0)for(m=0;m<p;m++)x=m*2,g[x]=d,g[x+1]=c;else if(d.length===p)for(m=0;m<p;m++)x=m*2,g[x]=d[m],g[x+1]=d[m];else{var y=d[0];for(m=0;m<p;m++)x=m*2,d.length>x&&(y=d[x]),g[x]=y,d.length>x+1&&(y=d[x+1]),g[x+1]=y}return this},setColors:function(d){var c=this.points.length;if(c<1)return this;var p=this.colors;d===void 0?d=[16777215]:Array.isArray(d)||(d=[d]);var g,m=0;if(d.length===c)for(g=0;g<c;g++)m=g*2,p[m]=d[g],p[m+1]=d[g];else{var x=d[0];for(g=0;g<c;g++)m=g*2,d.length>m&&(x=d[m]),p[m]=x,d.length>m+1&&(x=d[m+1]),p[m+1]=x}return this},setPoints:function(d,c,p){if(d===void 0&&(d=2),typeof d=="number"){var g=d;g<2&&(g=2),d=[];var m,x,y;if(this.horizontal)for(y=-this.frame.halfWidth,x=this.frame.width/(g-1),m=0;m<g;m++)d.push({x:y+m*x,y:0});else for(y=-this.frame.halfHeight,x=this.frame.height/(g-1),m=0;m<g;m++)d.push({x:0,y:y+m*x})}var T=d.length,C=this.points.length;return T<1?(console.warn("Rope: Not enough points given"),this):(T===1&&(d.unshift({x:0,y:0}),T++),C!==T&&this.resizeArrays(T),this.points=d,this.updateUVs(),c!=null&&this.setColors(c),p!=null&&this.setAlphas(p),this)},updateUVs:function(){for(var d=this.uv,c=this.points.length,p=this.frame.u0,g=this.frame.v0,m=this.frame.u1,x=this.frame.v1,y=(m-p)/(c-1),T=(x-g)/(c-1),C=0;C<c;C++){var S=C*4,E,M,O,L;this.horizontal?(this._flipX?(E=m-C*y,O=m-C*y):(E=p+C*y,O=p+C*y),this._flipY?(M=x,L=g):(M=g,L=x)):(this._flipX?(E=p,O=m):(E=m,O=p),this._flipY?(M=x-C*T,L=x-C*T):(M=g+C*T,L=g+C*T)),d[S+0]=E,d[S+1]=M,d[S+2]=O,d[S+3]=L}return this},resizeArrays:function(d){var c=this.colors,p=this.alphas;this.vertices=new Float32Array(d*4),this.uv=new Float32Array(d*4),c=new Uint32Array(d*2),p=new Float32Array(d*2);for(var g=0;g<d*2;g++)c[g]=16777215,p[g]=1;return this.colors=c,this.alphas=p,this.dirty=!0,this},updateVertices:function(){var d=this._perp,c=this.points,p=this.vertices,g=c.length;if(this.dirty=!1,!(g<1)){for(var m,x=c[0],y=this.horizontal?this.frame.halfHeight:this.frame.halfWidth,T=0;T<g;T++){var C=c[T],S=T*4;T<g-1?m=c[T+1]:m=C,d.x=m.y-x.y,d.y=-(m.x-x.x);var E=d.length();d.x/=E,d.y/=E,d.x*=y,d.y*=y,p[S]=C.x+d.x,p[S+1]=C.y+d.y,p[S+2]=C.x-d.x,p[S+3]=C.y-d.y,x=C}return this}},setDebug:function(d,c){return this.debugGraphic=d,!d&&!c?this.debugCallback=null:c?this.debugCallback=c:this.debugCallback=this.renderDebugVerts,this},renderDebugVerts:function(d,c,p){var g=d.debugGraphic,m=p[0],x=p[1],y=p[2],T=p[3];g.lineBetween(m,x,y,T);for(var C=4;C<c;C+=4){var S=p[C+0],E=p[C+1],M=p[C+2],O=p[C+3];g.lineBetween(m,x,S,E),g.lineBetween(y,T,M,O),g.lineBetween(y,T,S,E),g.lineBetween(S,E,M,O),m=S,x=E,y=M,T=O}},preDestroy:function(){this.anims.destroy(),this.anims=void 0,this.points=null,this.vertices=null,this.uv=null,this.colors=null,this.alphas=null,this.debugCallback=null,this.debugGraphic=null},flipX:{get:function(){return this._flipX},set:function(d){return this._flipX=d,this.updateUVs()}},flipY:{get:function(){return this._flipY},set:function(d){return this._flipY=d,this.updateUVs()}}});e.exports=v},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(142),h=i(31),r=i(0),a=i(11),l=i(22),o=i(15),u=i(458),v=i(6),d=i(202),c=i(1088),p=i(459),g=new r({Extends:o,Mixins:[a.Alpha,a.BlendMode,a.ComputedSize,a.Crop,a.Depth,a.Flip,a.GetBounds,a.Mask,a.Origin,a.Pipeline,a.ScrollFactor,a.Tint,a.Transform,a.Visible,c],initialize:function(x,y,T,C,S){y===void 0&&(y=0),T===void 0&&(T=0),o.call(this,x,"Text"),this.renderer=x.sys.renderer,this.setPosition(y,T),this.setOrigin(0,0),this.initPipeline(),this.canvas=h.create(this),this.context=this.canvas.getContext("2d"),this.style=new p(this,S),this.autoRound=!0,this.splitRegExp=/(?:\r\n|\r|\n)/,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.lineSpacing=0,this.dirty=!1,this.style.resolution===0&&(this.style.resolution=1),this._crop=this.resetCropObject(),this.texture=x.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.initRTL(),this.setText(C),S&&S.padding&&this.setPadding(S.padding),S&&S.lineSpacing&&this.setLineSpacing(S.lineSpacing),x.sys.game.events.on(l.CONTEXT_RESTORED,function(){this.dirty=!0},this)},initRTL:function(){!this.style.rtl||(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",n(this.canvas,this.scene.sys.canvas),this.originX=1)},runWordWrap:function(m){var x=this.style;if(x.wordWrapCallback){var y=x.wordWrapCallback.call(x.wordWrapCallbackScope,m,this);return Array.isArray(y)&&(y=y.join(`
`)),y}else return x.wordWrapWidth?x.wordWrapUseAdvanced?this.advancedWordWrap(m,this.context,this.style.wordWrapWidth):this.basicWordWrap(m,this.context,this.style.wordWrapWidth):m},advancedWordWrap:function(m,x,y){for(var T="",C=m.replace(/ +/gi," ").split(this.splitRegExp),S=C.length,E=0;E<S;E++){var M=C[E],O="";M=M.replace(/^ *|\s*$/gi,"");var L=x.measureText(M).width;if(L<y){T+=M+`
`;continue}for(var R=y,F=M.split(" "),D=0;D<F.length;D++){var B=F[D],N=B+" ",U=x.measureText(N).width;if(U>R){if(D===0){for(var X=N;X.length&&(X=X.slice(0,-1),U=x.measureText(X).width,!(U<=R)););if(!X.length)throw new Error("This text's wordWrapWidth setting is less than a single character!");var K=B.substr(X.length);F[D]=K,O+=X}var k=F[D].length?D:D+1,b=F.slice(k).join(" ").replace(/[ \n]*$/gi,"");C[E+1]=b+" "+(C[E+1]||""),S=C.length;break}else O+=N,R-=U}T+=O.replace(/[ \n]*$/gi,"")+`
`}return T=T.replace(/[\s|\n]*$/gi,""),T},basicWordWrap:function(m,x,y){for(var T="",C=m.split(this.splitRegExp),S=C.length-1,E=x.measureText(" ").width,M=0;M<=S;M++){for(var O=y,L=C[M].split(" "),R=L.length-1,F=0;F<=R;F++){var D=L[F],B=x.measureText(D).width,N=B;F<R&&(N+=E),N>O&&F>0&&(T+=`
`,O=y),T+=D,F<R?(T+=" ",O-=N):O-=B}M<S&&(T+=`
`)}return T},getWrappedText:function(m){m===void 0&&(m=this._text),this.style.syncFont(this.canvas,this.context);var x=this.runWordWrap(m);return x.split(this.splitRegExp)},setText:function(m){return!m&&m!==0&&(m=""),Array.isArray(m)&&(m=m.join(`
`)),m!==this._text&&(this._text=m.toString(),this.updateText()),this},setStyle:function(m){return this.style.setStyle(m)},setFont:function(m){return this.style.setFont(m)},setFontFamily:function(m){return this.style.setFontFamily(m)},setFontSize:function(m){return this.style.setFontSize(m)},setFontStyle:function(m){return this.style.setFontStyle(m)},setFixedSize:function(m,x){return this.style.setFixedSize(m,x)},setBackgroundColor:function(m){return this.style.setBackgroundColor(m)},setFill:function(m){return this.style.setFill(m)},setColor:function(m){return this.style.setColor(m)},setStroke:function(m,x){return this.style.setStroke(m,x)},setShadow:function(m,x,y,T,C,S){return this.style.setShadow(m,x,y,T,C,S)},setShadowOffset:function(m,x){return this.style.setShadowOffset(m,x)},setShadowColor:function(m){return this.style.setShadowColor(m)},setShadowBlur:function(m){return this.style.setShadowBlur(m)},setShadowStroke:function(m){return this.style.setShadowStroke(m)},setShadowFill:function(m){return this.style.setShadowFill(m)},setWordWrapWidth:function(m,x){return this.style.setWordWrapWidth(m,x)},setWordWrapCallback:function(m,x){return this.style.setWordWrapCallback(m,x)},setAlign:function(m){return this.style.setAlign(m)},setResolution:function(m){return this.style.setResolution(m)},setLineSpacing:function(m){return this.lineSpacing=m,this.updateText()},setPadding:function(m,x,y,T){if(typeof m=="object"){var C=m,S=v(C,"x",null);S!==null?(m=S,y=S):(m=v(C,"left",0),y=v(C,"right",m));var E=v(C,"y",null);E!==null?(x=E,T=E):(x=v(C,"top",0),T=v(C,"bottom",x))}else m===void 0&&(m=0),x===void 0&&(x=m),y===void 0&&(y=m),T===void 0&&(T=x);return this.padding.left=m,this.padding.top=x,this.padding.right=y,this.padding.bottom=T,this.updateText()},setMaxLines:function(m){return this.style.setMaxLines(m)},updateText:function(){var m=this.canvas,x=this.context,y=this.style,T=y.resolution,C=y.metrics;y.syncFont(m,x);var S=this._text;(y.wordWrapWidth||y.wordWrapCallback)&&(S=this.runWordWrap(this._text));var E=S.split(this.splitRegExp),M=u(this,C,E),O=this.padding,L;y.fixedWidth===0?(this.width=M.width+O.left+O.right,L=M.width):(this.width=y.fixedWidth,L=this.width-O.left-O.right,L<M.width&&(L=M.width)),y.fixedHeight===0?this.height=M.height+O.top+O.bottom:this.height=y.fixedHeight;var R=this.width,F=this.height;this.updateDisplayOrigin(),R*=T,F*=T,R=Math.max(R,1),F=Math.max(F,1),m.width!==R||m.height!==F?(m.width=R,m.height=F,this.frame.setSize(R,F),y.syncFont(m,x)):x.clearRect(0,0,R,F),x.save(),x.scale(T,T),y.backgroundColor&&(x.fillStyle=y.backgroundColor,x.fillRect(0,0,R,F)),y.syncStyle(m,x),x.textBaseline="alphabetic",x.translate(O.left,O.top);for(var D,B,N=0;N<M.lines;N++){if(D=y.strokeThickness/2,B=y.strokeThickness/2+N*M.lineHeight+C.ascent,N>0&&(B+=M.lineSpacing*N),y.rtl)D=R-D;else if(y.align==="right")D+=L-M.lineWidths[N];else if(y.align==="center")D+=(L-M.lineWidths[N])/2;else if(y.align==="justify"){var U=.85;if(M.lineWidths[N]/M.width>=U){var X=M.width-M.lineWidths[N],K=x.measureText(" ").width,k=E[N].trim(),b=k.split(" ");X+=(E[N].length-k.length)*K;for(var I=Math.floor(X/K),G=0;I>0;)b[G]+=" ",G=(G+1)%(b.length-1||1),--I;E[N]=b.join(" ")}}this.autoRound&&(D=Math.round(D),B=Math.round(B)),y.strokeThickness&&(this.style.syncShadow(x,y.shadowStroke),x.strokeText(E[N],D,B)),y.color&&(this.style.syncShadow(x,y.shadowFill),x.fillText(E[N],D,B))}x.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(m,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!0;var Y=this.input;return Y&&!Y.customHitArea&&(Y.hitArea.width=this.width,Y.hitArea.height=this.height),this},getTextMetrics:function(){return this.style.getTextMetrics()},text:{get:function(){return this._text},set:function(m){this.setText(m)}},toJSON:function(){var m=a.ToJSON(this),x={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return m.data=x,m},preDestroy:function(){this.style.rtl&&d(this.canvas),h.remove(this.canvas),this.texture.destroy()}});e.exports=g},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(31),h=i(0),r=i(11),a=i(22),l=i(15),o=i(361),u=i(192),v=i(1091),d=i(3),c=8,p=new h({Extends:l,Mixins:[r.Alpha,r.BlendMode,r.ComputedSize,r.Crop,r.Depth,r.Flip,r.GetBounds,r.Mask,r.Origin,r.Pipeline,r.ScrollFactor,r.Tint,r.Transform,r.Visible,v],initialize:function(m,x,y,T,C,S,E){var M=m.sys.renderer;l.call(this,m,"TileSprite");var O=m.sys.textures.get(S),L=O.get(E);!T||!C?(T=L.width,C=L.height):(T=Math.floor(T),C=Math.floor(C)),this._tilePosition=new d,this._tileScale=new d(1,1),this.dirty=!1,this.renderer=M,this.canvas=n.create(this,T,C),this.context=this.canvas.getContext("2d"),this.displayTexture=O,this.displayFrame=L,this._crop=this.resetCropObject(),this.texture=m.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.potWidth=o(L.width),this.potHeight=o(L.height),this.fillCanvas=n.create2D(this,this.potWidth,this.potHeight),this.fillContext=this.fillCanvas.getContext("2d"),this.fillPattern=null,this.setPosition(x,y),this.setSize(T,C),this.setFrame(E),this.setOriginFromFrame(),this.initPipeline(),m.sys.game.events.on(a.CONTEXT_RESTORED,function(R){if(!!R){var F=R.gl;this.dirty=!0,this.fillPattern=null,this.fillPattern=R.createTexture2D(0,F.LINEAR,F.LINEAR,F.REPEAT,F.REPEAT,F.RGBA,this.fillCanvas,this.potWidth,this.potHeight)}},this)},setTexture:function(g,m){return this.displayTexture=this.scene.sys.textures.get(g),this.setFrame(m)},setFrame:function(g){var m=this.displayTexture.get(g);return this.potWidth=o(m.width),this.potHeight=o(m.height),this.canvas.width=0,!m.cutWidth||!m.cutHeight?this.renderFlags&=~c:this.renderFlags|=c,this.displayFrame=m,this.dirty=!0,this.updateTileTexture(),this},setTilePosition:function(g,m){return g!==void 0&&(this.tilePositionX=g),m!==void 0&&(this.tilePositionY=m),this},setTileScale:function(g,m){return g===void 0&&(g=this.tileScaleX),m===void 0&&(m=g),this.tileScaleX=g,this.tileScaleY=m,this},updateTileTexture:function(){if(!(!this.dirty||!this.renderer)){var g=this.displayFrame;if(g.source.isRenderTexture||g.source.isGLTexture){console.warn("TileSprites can only use Image or Canvas based textures"),this.dirty=!1;return}var m=this.fillContext,x=this.fillCanvas,y=this.potWidth,T=this.potHeight;(!this.renderer||!this.renderer.gl)&&(y=g.cutWidth,T=g.cutHeight),m.clearRect(0,0,y,T),x.width=y,x.height=T,m.drawImage(g.source.image,g.cutX,g.cutY,g.cutWidth,g.cutHeight,0,0,y,T),this.renderer&&this.renderer.gl?this.fillPattern=this.renderer.canvasToTexture(x,this.fillPattern):this.fillPattern=m.createPattern(x,"repeat"),this.updateCanvas(),this.dirty=!1}},updateCanvas:function(){var g=this.canvas;if((g.width!==this.width||g.height!==this.height)&&(g.width=this.width,g.height=this.height,this.frame.setSize(this.width,this.height),this.updateDisplayOrigin(),this.dirty=!0),!this.dirty||this.renderer&&this.renderer.gl){this.dirty=!1;return}var m=this.context;this.scene.sys.game.config.antialias||u.disable(m);var x=this._tileScale.x,y=this._tileScale.y,T=this._tilePosition.x,C=this._tilePosition.y;m.clearRect(0,0,this.width,this.height),m.save(),m.scale(x,y),m.translate(-T,-C),m.fillStyle=this.fillPattern,m.fillRect(T,C,this.width/x,this.height/y),m.restore(),this.dirty=!1},preDestroy:function(){this.renderer&&this.renderer.gl&&this.renderer.deleteTexture(this.fillPattern),n.remove(this.canvas),n.remove(this.fillCanvas),this.fillPattern=null,this.fillContext=null,this.fillCanvas=null,this.displayTexture=null,this.displayFrame=null,this.texture.destroy(),this.renderer=null},tilePositionX:{get:function(){return this._tilePosition.x},set:function(g){this._tilePosition.x=g,this.dirty=!0}},tilePositionY:{get:function(){return this._tilePosition.y},set:function(g){this._tilePosition.y=g,this.dirty=!0}},tileScaleX:{get:function(){return this._tileScale.x},set:function(g){this._tileScale.x=g,this.dirty=!0}},tileScaleY:{get:function(){return this._tileScale.y},set:function(g){this._tileScale.y=g,this.dirty=!0}}});e.exports=p},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(18),r=i(11),a=i(75),l=i(22),o=i(51),u=i(15),v=i(70),d=i(222),c=i(1094),p=i(14),g=new n({Extends:u,Mixins:[r.Alpha,r.BlendMode,r.Depth,r.Flip,r.GetBounds,r.Mask,r.Origin,r.Pipeline,r.ScrollFactor,r.Size,r.TextureCrop,r.Tint,r.Transform,r.Visible,c],initialize:function(x,y,T,C){u.call(this,x,"Video"),this.video=null,this.videoTexture=null,this.videoTextureSource=null,this.snapshotTexture=null,this.flipY=!1,this._key=d(),this.touchLocked=!0,this.playWhenUnlocked=!1,this.retryLimit=20,this.retry=0,this.retryInterval=500,this._retryID=null,this._systemMuted=!1,this._codeMuted=!1,this._systemPaused=!1,this._codePaused=!1,this._callbacks={play:this.playHandler.bind(this),error:this.loadErrorHandler.bind(this),end:this.completeHandler.bind(this),time:this.timeUpdateHandler.bind(this),seeking:this.seekingHandler.bind(this),seeked:this.seekedHandler.bind(this)},this._crop=this.resetCropObject(),this.markers={},this._markerIn=-1,this._markerOut=p.MAX_SAFE_INTEGER,this._lastUpdate=0,this._cacheKey="",this._isSeeking=!1,this.removeVideoElementOnDestroy=!1,this.setPosition(y,T),this.initPipeline(),C&&this.changeSource(C,!1);var S=x.sys.game.events;S.on(l.PAUSE,this.globalPause,this),S.on(l.RESUME,this.globalResume,this);var E=x.sys.sound;E&&E.on(v.GLOBAL_MUTE,this.globalMute,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},play:function(m,x,y){if(this.touchLocked&&this.playWhenUnlocked||this.isPlaying())return this;var T=this.video;if(!T)return console.warn("Video not loaded"),this;m===void 0&&(m=T.loop);var C=this.scene.sys.sound;C&&C.mute&&this.setMute(!0),isNaN(x)||(this._markerIn=x),!isNaN(y)&&y>x&&(this._markerOut=y),T.loop=m;var S=this._callbacks,E=T.play();return E!==void 0?E.then(this.playPromiseSuccessHandler.bind(this)).catch(this.playPromiseErrorHandler.bind(this)):(T.addEventListener("playing",S.play,!0),T.readyState<2&&(this.retry=this.retryLimit,this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval))),T.addEventListener("ended",S.end,!0),T.addEventListener("timeupdate",S.time,!0),T.addEventListener("seeking",S.seeking,!0),T.addEventListener("seeked",S.seeked,!0),this},changeSource:function(m,x,y,T,C){x===void 0&&(x=!0);var S=this.video;S&&this.stop();var E=this.scene.sys.cache.video.get(m);return E?(this.video=E,this._cacheKey=m,this._codePaused=E.paused,this._codeMuted=E.muted,this.videoTexture?(this.scene.sys.textures.remove(this._key),this.videoTexture=this.scene.sys.textures.create(this._key,E,E.videoWidth,E.videoHeight),this.videoTextureSource=this.videoTexture.source[0],this.videoTexture.add("__BASE",0,0,0,E.videoWidth,E.videoHeight),this.setTexture(this.videoTexture),this.setSizeToFrame(),this.updateDisplayOrigin(),this.emit(a.VIDEO_CREATED,this,E.videoWidth,E.videoHeight)):this.updateTexture(),E.currentTime=0,this._lastUpdate=0,x&&this.play(y,T,C)):this.video=null,this},addMarker:function(m,x,y){return!isNaN(x)&&x>=0&&!isNaN(y)&&(this.markers[m]=[x,y]),this},playMarker:function(m,x){var y=this.markers[m];return y&&this.play(x,y[0],y[1]),this},removeMarker:function(m){return delete this.markers[m],this},snapshot:function(m,x){return m===void 0&&(m=this.width),x===void 0&&(x=this.height),this.snapshotArea(0,0,this.width,this.height,m,x)},snapshotArea:function(m,x,y,T,C,S){m===void 0&&(m=0),x===void 0&&(x=0),y===void 0&&(y=this.width),T===void 0&&(T=this.height),C===void 0&&(C=y),S===void 0&&(S=T);var E=this.video,M=this.snapshotTexture;return M?(M.setSize(C,S),E&&M.context.drawImage(E,m,x,y,T,0,0,C,S)):(M=this.scene.sys.textures.createCanvas(d(),C,S),this.snapshotTexture=M,E&&M.context.drawImage(E,m,x,y,T,0,0,C,S)),M.update()},saveSnapshotTexture:function(m){return this.snapshotTexture?this.scene.sys.textures.renameTexture(this.snapshotTexture.key,m):this.snapshotTexture=this.scene.sys.textures.createCanvas(m,this.width,this.height),this.snapshotTexture},loadURL:function(m,x,y){y===void 0&&(y=!1),this.video&&this.stop(),this.videoTexture&&this.scene.sys.textures.remove(this._key);var T=document.createElement("video");return T.controls=!1,y&&(T.muted=!0,T.defaultMuted=!0,T.setAttribute("autoplay","autoplay")),T.setAttribute("playsinline","playsinline"),T.setAttribute("preload","auto"),T.addEventListener("error",this._callbacks.error,!0),T.src=m,T.load(),this.video=T,this},loadMediaStream:function(m,x,y){y===void 0&&(y=!1),this.video&&this.stop(),this.videoTexture&&this.scene.sys.textures.remove(this._key);var T=document.createElement("video");T.controls=!1,y&&(T.muted=!0,T.defaultMuted=!0,T.setAttribute("autoplay","autoplay")),T.setAttribute("playsinline","playsinline"),T.setAttribute("preload","auto"),T.addEventListener("error",this._callbacks.error,!0);try{T.srcObject=m}catch{T.src=window.URL.createObjectURL(m)}return T.load(),this.video=T,this},playPromiseSuccessHandler:function(){this._codePaused=!1,this.touchLocked=!1,this.emit(a.VIDEO_PLAY,this),this._markerIn>-1&&(this.video.currentTime=this._markerIn)},playPromiseErrorHandler:function(m){this.scene.sys.input.once(o.POINTER_DOWN,this.unlockHandler,this),this.touchLocked=!0,this.playWhenUnlocked=!0,this.emit(a.VIDEO_ERROR,this,m)},playHandler:function(){this._codePaused=!1,this.touchLocked=!1,this.emit(a.VIDEO_PLAY,this),this.video.removeEventListener("playing",this._callbacks.play,!0)},loadErrorHandler:function(m){this.stop(),this.emit(a.VIDEO_ERROR,this,m)},unlockHandler:function(){this.touchLocked=!1,this.playWhenUnlocked=!1,this.emit(a.VIDEO_UNLOCKED,this),this._markerIn>-1&&(this.video.currentTime=this._markerIn),this.video.play(),this.emit(a.VIDEO_PLAY,this)},completeHandler:function(){this.emit(a.VIDEO_COMPLETE,this)},timeUpdateHandler:function(){this.video&&this.video.currentTime<this._lastUpdate&&(this.emit(a.VIDEO_LOOP,this),this._lastUpdate=0)},preUpdate:function(){var m=this.video;if(m){var x=m.currentTime;x!==this._lastUpdate&&(this._lastUpdate=x,this.updateTexture(),x>=this._markerOut&&(m.loop?(m.currentTime=this._markerIn,this.updateTexture(),this._lastUpdate=x,this.emit(a.VIDEO_LOOP,this)):(this.emit(a.VIDEO_COMPLETE,this),this.stop())))}},checkVideoProgress:function(){this.video.readyState>=2?this.updateTexture():(this.retry--,this.retry>0?this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval):this.emit(a.VIDEO_TIMEOUT,this))},updateTexture:function(){var m=this.video,x=m.videoWidth,y=m.videoHeight;if(!this.videoTexture)this.videoTexture=this.scene.sys.textures.create(this._key,m,x,y),this.videoTextureSource=this.videoTexture.source[0],this.videoTexture.add("__BASE",0,0,0,x,y),this.setTexture(this.videoTexture),this.setSizeToFrame(),this.updateDisplayOrigin(),this.emit(a.VIDEO_CREATED,this,x,y);else{var T=this.videoTextureSource;T.source!==m&&(T.source=m,T.width=x,T.height=y),T.update()}},getVideoKey:function(){return this._cacheKey},seekTo:function(m){var x=this.video;if(x){var y=x.duration;if(y!==1/0&&!isNaN(y)){var T=y*m;this.setCurrentTime(T)}}return this},getCurrentTime:function(){return this.video?this.video.currentTime:0},setCurrentTime:function(m){var x=this.video;if(x){if(typeof m=="string"){var y=m[0],T=parseFloat(m.substr(1));y==="+"?m=x.currentTime+T:y==="-"&&(m=x.currentTime-T)}x.currentTime=m,this._lastUpdate=m}return this},isSeeking:function(){return this._isSeeking},seekingHandler:function(){this._isSeeking=!0,this.emit(a.VIDEO_SEEKING,this)},seekedHandler:function(){this._isSeeking=!1,this.emit(a.VIDEO_SEEKED,this);var m=this.video;m&&this.updateTexture()},getProgress:function(){var m=this.video;if(m){var x=m.currentTime,y=m.duration;if(y!==1/0&&!isNaN(y))return x/y}return 0},getDuration:function(){return this.video?this.video.duration:0},setMute:function(m){m===void 0&&(m=!0),this._codeMuted=m;var x=this.video;return x&&(x.muted=this._systemMuted?!0:m),this},isMuted:function(){return this._codeMuted},globalMute:function(m,x){this._systemMuted=x;var y=this.video;y&&(y.muted=this._codeMuted?!0:x)},globalPause:function(){this._systemPaused=!0,this.video&&this.video.pause()},globalResume:function(){this._systemPaused=!1,this.video&&!this._codePaused&&this.video.play()},setPaused:function(m){m===void 0&&(m=!0);var x=this.video;return this._codePaused=m,x&&(m?x.paused||x.pause():m||x.paused&&!this._systemPaused&&x.play()),this},getVolume:function(){return this.video?this.video.volume:1},setVolume:function(m){return m===void 0&&(m=1),this.video&&(this.video.volume=h(m,0,1)),this},getPlaybackRate:function(){return this.video?this.video.playbackRate:1},setPlaybackRate:function(m){return this.video&&(this.video.playbackRate=m),this},getLoop:function(){return this.video?this.video.loop:!1},setLoop:function(m){return m===void 0&&(m=!0),this.video&&(this.video.loop=m),this},isPlaying:function(){return this.video?!(this.video.paused||this.video.ended):!1},isPaused:function(){return this.video&&this.video.paused||this._codePaused||this._systemPaused},saveTexture:function(m,x){return x===void 0&&(x=!1),this.videoTexture&&this.scene.sys.textures.renameTexture(this._key,m),this._key=m,this.flipY=x,this.videoTextureSource&&this.videoTextureSource.setFlipY(x),this.videoTexture},stop:function(){var m=this.video;if(m){var x=this._callbacks;for(var y in x)m.removeEventListener(y,x[y],!0);m.pause()}return this._retryID&&window.clearTimeout(this._retryID),this.emit(a.VIDEO_STOP,this),this},removeVideoElement:function(){var m=this.video;if(!!m){for(m.parentNode&&m.parentNode.removeChild(m);m.hasChildNodes();)m.removeChild(m.firstChild);m.removeAttribute("autoplay"),m.removeAttribute("src"),this.video=null}},preDestroy:function(){this.stop(),this.removeVideoElementOnDestroy&&this.removeVideoElement();var m=this.scene.sys.game.events;m.off(l.PAUSE,this.globalPause,this),m.off(l.RESUME,this.globalResume,this);var x=this.scene.sys.sound;x&&x.off(v.GLOBAL_MUTE,this.globalMute,this),this._retryID&&window.clearTimeout(this._retryID)}});e.exports=g},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(228),r=i(470),a=i(56),l=new n({initialize:function(u){this.type=a.POLYGON,this.area=0,this.points=[],u&&this.setTo(u)},contains:function(o,u){return h(this,o,u)},setTo:function(o){if(this.area=0,this.points=[],typeof o=="string"&&(o=o.split(" ")),!Array.isArray(o))return this;for(var u,v=Number.MAX_VALUE,d=0;d<o.length;d++)u={x:0,y:0},typeof o[d]=="number"||typeof o[d]=="string"?(u.x=parseFloat(o[d]),u.y=parseFloat(o[d+1]),d++):Array.isArray(o[d])?(u.x=o[d][0],u.y=o[d][1]):(u.x=o[d].x,u.y=o[d].y),this.points.push(u),u.y<v&&(v=u.y);return this.calculateArea(v),this},calculateArea:function(){if(this.points.length<3)return this.area=0,this.area;for(var o=0,u,v,d=0;d<this.points.length-1;d++)u=this.points[d],v=this.points[d+1],o+=(v.x-u.x)*(u.y+v.y);return u=this.points[0],v=this.points[this.points.length-1],o+=(u.x-v.x)*(v.y+u.y),this.area=-o*.5,this.area},getPoints:function(o,u,v){return r(this,o,u,v)}});e.exports=l},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r){for(var a=!1,l=-1,o=n.points.length-1;++l<n.points.length;o=l){var u=n.points[l].x,v=n.points[l].y,d=n.points[o].x,c=n.points[o].y;(v<=r&&r<c||c<=r&&r<v)&&h<(d-u)*(r-v)/(c-v)+u&&(a=!a)}return a};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(11),r=i(15),a=i(2),l=i(17),o=i(478),u=i(1176),v=i(25),d=new n({Extends:r,Mixins:[h.ComputedSize,h.Depth,h.GetBounds,h.Mask,h.Origin,h.ScrollFactor,h.Transform,h.Visible,u],initialize:function(p,g,m,x,y,T,C,S){m===void 0&&(m=0),x===void 0&&(x=0),y===void 0&&(y=128),T===void 0&&(T=128),r.call(this,p,"Shader"),this.blendMode=-1,this.shader;var E=p.sys.renderer;this.renderer=E,this.gl=E.gl,this.vertexData=new ArrayBuffer(6*(Float32Array.BYTES_PER_ELEMENT*2)),this.vertexBuffer=E.createVertexBuffer(this.vertexData.byteLength,this.gl.STREAM_DRAW),this.program=null,this.bytes=new Uint8Array(this.vertexData),this.vertexViewF32=new Float32Array(this.vertexData),this._tempMatrix1=new v,this._tempMatrix2=new v,this._tempMatrix3=new v,this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.uniforms={},this.pointer=null,this._rendererWidth=E.width,this._rendererHeight=E.height,this._textureCount=0,this.framebuffer=null,this.glTexture=null,this.renderToTexture=!1,this.texture=null,this.setPosition(m,x),this.setSize(y,T),this.setOrigin(.5,.5),this.setShader(g,C,S)},willRender:function(c){return this.renderToTexture?!0:!(r.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&c.id)},setRenderToTexture:function(c,p){if(p===void 0&&(p=!1),!this.renderToTexture){var g=this.width,m=this.height,x=this.renderer;this.glTexture=x.createTextureFromSource(null,g,m,0),this.glTexture.flipY=p,this.framebuffer=x.createFramebuffer(g,m,this.glTexture,!1),this._rendererWidth=g,this._rendererHeight=m,this.renderToTexture=!0,this.projOrtho(0,this.width,this.height,0),c&&(this.texture=this.scene.sys.textures.addGLTexture(c,this.glTexture,g,m))}return this.shader&&(x.pipelines.clear(),this.load(),this.flush(),x.pipelines.rebind()),this},setShader:function(c,p,g){if(p===void 0&&(p=[]),typeof c=="string"){var m=this.scene.sys.cache.shader;if(!m.has(c))return console.warn("Shader missing: "+c),this;this.shader=m.get(c)}else this.shader=c;var x=this.gl,y=this.renderer;this.program&&x.deleteProgram(this.program);var T=y.createProgram(this.shader.vertexSrc,this.shader.fragmentSrc);x.uniformMatrix4fv(x.getUniformLocation(T,"uViewMatrix"),!1,this.viewMatrix),x.uniformMatrix4fv(x.getUniformLocation(T,"uProjectionMatrix"),!1,this.projectionMatrix),x.uniform2f(x.getUniformLocation(T,"uResolution"),this.width,this.height),this.program=T;var C=new Date,S={resolution:{type:"2f",value:{x:this.width,y:this.height}},time:{type:"1f",value:0},mouse:{type:"2f",value:{x:this.width/2,y:this.height/2}},date:{type:"4fv",value:[C.getFullYear(),C.getMonth(),C.getDate(),C.getHours()*60*60+C.getMinutes()*60+C.getSeconds()]},sampleRate:{type:"1f",value:44100},iChannel0:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel1:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel2:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel3:{type:"sampler2D",value:null,textureData:{repeat:!0}}};this.shader.uniforms?this.uniforms=l(!0,{},this.shader.uniforms,S):this.uniforms=S;for(var E=0;E<4;E++)p[E]&&this.setSampler2D("iChannel"+E,p[E],E,g);return this.initUniforms(),this.projOrtho(0,this._rendererWidth,this._rendererHeight,0),this},setPointer:function(c){return this.pointer=c,this},projOrtho:function(c,p,g,m){var x=-1e3,y=1e3,T=1/(c-p),C=1/(g-m),S=1/(x-y),E=this.projectionMatrix;E[0]=-2*T,E[5]=-2*C,E[10]=2*S,E[12]=(c+p)*T,E[13]=(m+g)*C,E[14]=(y+x)*S;var M=this.program,O=this.gl,L=this.renderer;L.setProgram(M),O.uniformMatrix4fv(O.getUniformLocation(M,"uProjectionMatrix"),!1,this.projectionMatrix),this._rendererWidth=p,this._rendererHeight=g},initUniforms:function(){var c=this.gl,p=this.renderer.glFuncMap,g=this.program;this._textureCount=0;for(var m in this.uniforms){var x=this.uniforms[m],y=x.type,T=p[y];x.uniformLocation=c.getUniformLocation(g,m),y!=="sampler2D"&&(x.glMatrix=T.matrix,x.glValueLength=T.length,x.glFunc=T.func)}},setSampler2DBuffer:function(c,p,g,m,x,y){x===void 0&&(x=0),y===void 0&&(y={});var T=this.uniforms[c];return T.value=p,y.width=g,y.height=m,T.textureData=y,this._textureCount=x,this.initSampler2D(T),this},setSampler2D:function(c,p,g,m){g===void 0&&(g=0);var x=this.scene.sys.textures;if(x.exists(p)){var y=x.getFrame(p);if(y.glTexture&&y.glTexture.isRenderTexture)return this.setSampler2DBuffer(c,y.glTexture,y.width,y.height,g,m);var T=this.uniforms[c],C=y.source;T.textureKey=p,T.source=C.image,T.value=y.glTexture,C.isGLTexture&&(m||(m={}),m.width=C.width,m.height=C.height),m&&(T.textureData=m),this._textureCount=g,this.initSampler2D(T)}return this},setUniform:function(c,p){return o(this.uniforms,c,p),this},getUniform:function(c){return a(this.uniforms,c,null)},setChannel0:function(c,p){return this.setSampler2D("iChannel0",c,0,p)},setChannel1:function(c,p){return this.setSampler2D("iChannel1",c,1,p)},setChannel2:function(c,p){return this.setSampler2D("iChannel2",c,2,p)},setChannel3:function(c,p){return this.setSampler2D("iChannel3",c,3,p)},initSampler2D:function(c){if(!!c.value){var p=this.gl;p.activeTexture(p.TEXTURE0+this._textureCount),p.bindTexture(p.TEXTURE_2D,c.value);var g=c.textureData;if(g&&!c.value.isRenderTexture){var m=p[a(g,"magFilter","linear").toUpperCase()],x=p[a(g,"minFilter","linear").toUpperCase()],y=p[a(g,"wrapS","repeat").toUpperCase()],T=p[a(g,"wrapT","repeat").toUpperCase()],C=p[a(g,"format","rgba").toUpperCase()];if(g.repeat&&(y=p.REPEAT,T=p.REPEAT),p.pixelStorei(p.UNPACK_FLIP_Y_WEBGL,!!g.flipY),g.width){var S=a(g,"width",512),E=a(g,"height",2),M=a(g,"border",0);p.texImage2D(p.TEXTURE_2D,0,C,S,E,M,C,p.UNSIGNED_BYTE,null)}else p.texImage2D(p.TEXTURE_2D,0,C,p.RGBA,p.UNSIGNED_BYTE,c.source);p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,m),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,x),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,y),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,T)}this.renderer.setProgram(this.program),p.uniform1i(c.uniformLocation,this._textureCount),this._textureCount++}},syncUniforms:function(){var c=this.gl,p=this.uniforms,g,m,x,y,T,C=0;for(var S in p)g=p[S],x=g.glFunc,m=g.glValueLength,y=g.uniformLocation,T=g.value,T!==null&&(m===1?g.glMatrix?x.call(c,y,g.transpose,T):x.call(c,y,T):m===2?x.call(c,y,T.x,T.y):m===3?x.call(c,y,T.x,T.y,T.z):m===4?x.call(c,y,T.x,T.y,T.z,T.w):g.type==="sampler2D"&&(c.activeTexture(c.TEXTURE0+C),c.bindTexture(c.TEXTURE_2D,T),c.uniform1i(y,C),C++))},load:function(c){var p=this.gl,g=this.width,m=this.height,x=this.renderer,y=this.program,T=this.viewMatrix;if(!this.renderToTexture){var C=-this._displayOriginX,S=-this._displayOriginY;T[0]=c[0],T[1]=c[1],T[4]=c[2],T[5]=c[3],T[8]=c[4],T[9]=c[5],T[12]=T[0]*C+T[4]*S,T[13]=T[1]*C+T[5]*S}p.useProgram(y),p.uniformMatrix4fv(p.getUniformLocation(y,"uViewMatrix"),!1,T),p.uniform2f(p.getUniformLocation(y,"uResolution"),this.width,this.height);var E=this.uniforms,M=E.resolution;M.value.x=g,M.value.y=m,E.time.value=x.game.loop.getDuration();var O=this.pointer;if(O){var L=E.mouse,R=O.x/g,F=1-O.y/m;L.value.x=R.toFixed(2),L.value.y=F.toFixed(2)}this.syncUniforms()},flush:function(){var c=this.width,p=this.height,g=this.program,m=this.gl,x=this.vertexBuffer,y=this.renderer,T=Float32Array.BYTES_PER_ELEMENT*2;this.renderToTexture&&(y.setFramebuffer(this.framebuffer),m.clearColor(0,0,0,0),m.clear(m.COLOR_BUFFER_BIT)),m.bindBuffer(m.ARRAY_BUFFER,x);var C=m.getAttribLocation(g,"inPosition");C!==-1&&(m.enableVertexAttribArray(C),m.vertexAttribPointer(C,2,m.FLOAT,!1,T,0));var S=this.vertexViewF32;S[3]=p,S[4]=c,S[5]=p,S[8]=c,S[9]=p,S[10]=c;var E=6;m.bufferSubData(m.ARRAY_BUFFER,0,this.bytes.subarray(0,E*T)),m.drawArrays(m.TRIANGLES,0,E),this.renderToTexture&&y.setFramebuffer(null,!1)},setAlpha:function(){},setBlendMode:function(){},preDestroy:function(){var c=this.gl;c.deleteProgram(this.program),c.deleteBuffer(this.vertexBuffer),this.renderToTexture&&(this.renderer.deleteFramebuffer(this.framebuffer),this.texture.destroy(),this.framebuffer=null,this.glTexture=null,this.texture=null)}});e.exports=d},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(11),r=i(36),a=i(116),l=i(15),o=i(479),u=i(480),v=i(19),d=i(69),c=i(1179),p=i(79),g=i(39),m=i(117),x=new n({Extends:l,Mixins:[h.AlphaSingle,h.BlendMode,h.Depth,h.Mask,h.Pipeline,h.Size,h.Texture,h.Transform,h.Visible,h.ScrollFactor,c],initialize:function(T,C,S,E,M,O,L,R,F,D,B,N){C===void 0&&(C=0),S===void 0&&(S=0),E===void 0&&(E="__WHITE"),l.call(this,T,"Mesh"),this.faces=[],this.vertices=[],this.tintFill=!1,this.debugCallback=null,this.debugGraphic=null,this.hideCCW=!0,this.modelPosition=new g,this.modelScale=new g(1,1,1),this.modelRotation=new g,this.dirtyCache=[0,0,0,0,0,0,0,0,0,0,0,0],this.transformMatrix=new d,this.viewPosition=new g,this.viewMatrix=new d,this.projectionMatrix=new d,this.totalRendered=0,this.totalFrame=0,this.ignoreDirtyCache=!1;var U=T.sys.renderer;this.setPosition(C,S),this.setTexture(E,M),this.setSize(U.width,U.height),this.initPipeline(),this.setPerspective(U.width,U.height),O&&this.addVertices(O,L,R,F,D,B,N)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},panX:function(y){return this.viewPosition.addScale(g.LEFT,y),this.dirtyCache[10]=1,this},panY:function(y){return this.viewPosition.y+=g.DOWN.y*y,this.dirtyCache[10]=1,this},panZ:function(y){return this.viewPosition.z+=y,this.dirtyCache[10]=1,this},setPerspective:function(y,T,C,S,E){return C===void 0&&(C=45),S===void 0&&(S=.01),E===void 0&&(E=1e3),this.projectionMatrix.perspective(r(C),y/T,S,E),this.dirtyCache[10]=1,this.dirtyCache[11]=0,this},setOrtho:function(y,T,C,S){return y===void 0&&(y=this.scene.sys.renderer.getAspectRatio()),T===void 0&&(T=1),C===void 0&&(C=-1e3),S===void 0&&(S=1e3),this.projectionMatrix.ortho(-y,y,-T,T,C,S),this.dirtyCache[10]=1,this.dirtyCache[11]=1,this},clear:function(){return this.faces.forEach(function(y){y.destroy()}),this.faces=[],this.vertices=[],this},addVerticesFromObj:function(y,T,C,S,E,M,O,L,R){var F=this.scene.sys.cache.obj.get(y);return F&&u(F,this,T,C,S,E,M,O,L,R),this},sortByDepth:function(y,T){return y.depth-T.depth},depthSort:function(){return p(this.faces,this.sortByDepth),this},addVertex:function(y,T,C,S,E,M,O){var L=new m(y,T,C,S,E,M,O);return this.vertices.push(L),L},addFace:function(y,T,C){var S=new a(y,T,C);return this.faces.push(S),this.dirtyCache[9]=-1,S},addVertices:function(y,T,C,S,E,M,O){var L=o(y,T,C,S,E,M,O);return L&&(this.faces=this.faces.concat(L.faces),this.vertices=this.vertices.concat(L.vertices)),this.dirtyCache[9]=-1,this},getFaceCount:function(){return this.faces.length},getVertexCount:function(){return this.vertices.length},getFace:function(y){return this.faces[y]},getFaceAt:function(y,T,C){C===void 0&&(C=this.scene.sys.cameras.main);for(var S=v(this,C).calc,E=this.faces,M=[],O=0;O<E.length;O++){var L=E[O];L.contains(y,T,S)&&M.push(L)}return p(M,this.sortByDepth)},setDebug:function(y,T){return this.debugGraphic=y,!y&&!T?this.debugCallback=null:T?this.debugCallback=T:this.debugCallback=this.renderDebug,this},isDirty:function(){var y=this.modelPosition,T=this.modelRotation,C=this.modelScale,S=this.dirtyCache,E=y.x,M=y.y,O=y.z,L=T.x,R=T.y,F=T.z,D=C.x,B=C.y,N=C.z,U=this.getFaceCount(),X=S[0],K=S[1],k=S[2],b=S[3],I=S[4],G=S[5],Y=S[6],V=S[7],W=S[8],H=S[9];return S[0]=E,S[1]=M,S[2]=O,S[3]=L,S[4]=R,S[5]=F,S[6]=D,S[7]=B,S[8]=N,S[9]=U,X!==E||K!==M||k!==O||b!==L||I!==R||G!==F||Y!==D||V!==B||W!==N||H!==U},preUpdate:function(){this.totalRendered=this.totalFrame,this.totalFrame=0;var y=this.dirtyCache;if(!(!this.ignoreDirtyCache&&!y[10]&&!this.isDirty())){var T=this.width,C=this.height,S=this.viewMatrix,E=this.viewPosition;y[10]&&(S.identity(),S.translate(E),S.invert(),y[10]=0);var M=this.transformMatrix;M.setWorldMatrix(this.modelRotation,this.modelPosition,this.modelScale,this.viewMatrix,this.projectionMatrix);for(var O=E.z,L=this.faces,R=0;R<L.length;R++)L[R].transformCoordinatesLocal(M,T,C,O);this.depthSort()}},renderDebug:function(y,T){for(var C=y.debugGraphic,S=0;S<T.length;S++){var E=T[S],M=E.vertex1.tx,O=E.vertex1.ty,L=E.vertex2.tx,R=E.vertex2.ty,F=E.vertex3.tx,D=E.vertex3.ty;C.strokeTriangle(M,O,L,R,F,D)}},preDestroy:function(){this.clear(),this.debugCallback=null,this.debugGraphic=null}});e.exports=x},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(50),h=function(r,a){return n(r.x,r.y,a.x,a.y)<=r.radius+a.radius};e.exports=h},function(e,f,i){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4),h=i(233),r=function(a,l,o){if(o===void 0&&(o=[]),h(a,l)){var u=a.x1,v=a.y1,d=a.x2,c=a.y2,p=l.x,g=l.y,m=l.radius,x=d-u,y=c-v,T=u-p,C=v-g,S=x*x+y*y,E=2*(x*T+y*C),M=T*T+C*C-m*m,O=E*E-4*S*M,L,R;if(O===0){var F=-E/(2*S);L=u+F*x,R=v+F*y,F>=0&&F<=1&&o.push(new n(L,R))}else if(O>0){var D=(-E-Math.sqrt(O))/(2*S);L=u+D*x,R=v+D*y,D>=0&&D<=1&&o.push(new n(L,R));var B=(-E+Math.sqrt(O))/(2*S);L=u+B*x,R=v+B*y,B>=0&&B<=1&&o.push(new n(L,R))}}return o};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(66),h=i(4),r=new h,a=function(l,o,u){if(u===void 0&&(u=r),n(o,l.x1,l.y1))return u.x=l.x1,u.y=l.y1,!0;if(n(o,l.x2,l.y2))return u.x=l.x2,u.y=l.y2,!0;var v=l.x2-l.x1,d=l.y2-l.y1,c=o.x-l.x1,p=o.y-l.y1,g=v*v+d*d,m=v,x=d;if(g>0){var y=(c*v+p*d)/g;m*=y,x*=y}u.x=l.x1+m,u.y=l.y1+x;var T=m*m+x*x;return T<=g&&m*v+x*d>=0&&n(o,u.x,u.y)};e.exports=a},function(e,f,i){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4),h=i(96),r=i(488),a=function(l,o,u){if(u===void 0&&(u=[]),r(l,o))for(var v=o.getLineA(),d=o.getLineB(),c=o.getLineC(),p=o.getLineD(),g=[new n,new n,new n,new n],m=[h(v,l,g[0]),h(d,l,g[1]),h(c,l,g[2]),h(p,l,g[3])],x=0;x<4;x++)m[x]&&u.push(g[x]);return u};e.exports=a},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r,a){r===void 0&&(r=!1),a===void 0&&(a=[]);for(var l=n.x3-n.x1,o=n.y3-n.y1,u=n.x2-n.x1,v=n.y2-n.y1,d=l*l+o*o,c=l*u+o*v,p=u*u+v*v,g=d*p-c*c,m=g===0?0:1/g,x,y,T,C,S,E,M=n.x1,O=n.y1,L=0;L<h.length&&(T=h[L].x-M,C=h[L].y-O,S=l*T+o*C,E=u*T+v*C,x=(p*S-c*E)*m,y=(d*E-c*S)*m,!(x>=0&&y>=0&&x+y<1&&(a.push({x:h[L].x,y:h[L].y}),r)));L++);return a};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r,a){var l=Math.cos(a),o=Math.sin(a),u=n.x1-h,v=n.y1-r;return n.x1=u*l-v*o+h,n.y1=u*o+v*l+r,u=n.x2-h,v=n.y2-r,n.x2=u*l-v*o+h,n.y2=u*o+v*l+r,n};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n.height===0?NaN:n.width/n.height};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r,a){var l=Math.cos(a),o=Math.sin(a),u=n.x1-h,v=n.y1-r;return n.x1=u*l-v*o+h,n.y1=u*o+v*l+r,u=n.x2-h,v=n.y2-r,n.x2=u*l-v*o+h,n.y2=u*o+v*l+r,u=n.x3-h,v=n.y3-r,n.x3=u*l-v*o+h,n.y3=u*o+v*l+r,n};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={BUTTON_DOWN:i(1310),BUTTON_UP:i(1311),CONNECTED:i(1312),DISCONNECTED:i(1313),GAMEPAD_BUTTON_DOWN:i(1314),GAMEPAD_BUTTON_UP:i(1315)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(17),h=i(156),r=function(a,l){var o=a===void 0?h():n({},a);if(l)for(var u in l)l[u]!==void 0&&(o[u]=l[u]);return o};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(21),r=i(23),a=i(8),l=i(2),o=i(7),u=i(408),v=new n({Extends:r,initialize:function(c,p,g,m){var x="xml";if(o(p)){var y=p;p=l(y,"key"),g=l(y,"url"),m=l(y,"xhrSettings"),x=l(y,"extension",x)}var T={type:"xml",cache:c.cacheManager.xml,extension:x,responseType:"text",key:p,url:g,xhrSettings:m};r.call(this,c,T)},onProcess:function(){this.state=h.FILE_PROCESSING,this.data=u(this.xhrLoader.responseText),this.data?this.onProcessComplete():(console.warn("Invalid XMLFile: "+this.key),this.onProcessError())}});a.register("xml",function(d,c,p){if(Array.isArray(d))for(var g=0;g<d.length;g++)this.addFile(new v(this,d[g]));else this.addFile(new v(this,d,c,p));return this}),e.exports=v},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(21),r=i(23),a=i(8),l=i(2),o=i(7),u=new n({Extends:r,initialize:function(d,c,p,g){var m="text",x="txt",y=d.cacheManager.text;if(o(c)){var T=c;c=l(T,"key"),p=l(T,"url"),g=l(T,"xhrSettings"),x=l(T,"extension",x),m=l(T,"type",m),y=l(T,"cache",y)}var C={type:m,cache:y,extension:x,responseType:"text",key:c,url:p,xhrSettings:g};r.call(this,d,C)},onProcess:function(){this.state=h.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});a.register("text",function(v,d,c){if(Array.isArray(v))for(var p=0;p<v.length;p++)this.addFile(new u(this,v[p]));else this.addFile(new u(this,v,d,c));return this}),e.exports=u},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Acceleration:i(1368),Angular:i(1369),Bounce:i(1370),Debug:i(1371),Drag:i(1372),Enable:i(1373),Friction:i(1374),Gravity:i(1375),Immovable:i(1376),Mass:i(1377),OverlapCirc:i(523),OverlapRect:i(244),Pushable:i(1378),Size:i(1379),Velocity:i(1380)}},function(e,f){var i=function(n,h,r,a,l,o,u){o===void 0&&(o=!0),u===void 0&&(u=!1);var v=[],d=[],c=n.treeMinMax;if(c.minX=h,c.minY=r,c.maxX=h+a,c.maxY=r+l,u&&(d=n.staticTree.search(c)),o&&n.useTree)v=n.tree.search(c);else if(o){var p=n.bodies,g={position:{x:h,y:r},left:h,top:r,right:h+a,bottom:r+l,isCircle:!1},m=n.intersects;p.iterate(function(x){m(x,g)&&v.push(x)})}return d.concat(v)};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={COLLIDE:i(1381),OVERLAP:i(1382),PAUSE:i(1383),RESUME:i(1384),TILE_COLLIDE:i(1385),TILE_OVERLAP:i(1386),WORLD_BOUNDS:i(1387),WORLD_STEP:i(1388)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(62),h=function(r,a,l,o){var u=0,v=r.deltaAbsX()+a.deltaAbsX()+o;return r._dx===0&&a._dx===0?(r.embedded=!0,a.embedded=!0):r._dx>a._dx?(u=r.right-a.x,u>v&&!l||r.checkCollision.right===!1||a.checkCollision.left===!1?u=0:(r.touching.none=!1,r.touching.right=!0,a.touching.none=!1,a.touching.left=!0,a.physicsType===n.STATIC_BODY&&!l&&(r.blocked.none=!1,r.blocked.right=!0),r.physicsType===n.STATIC_BODY&&!l&&(a.blocked.none=!1,a.blocked.left=!0))):r._dx<a._dx&&(u=r.x-a.width-a.x,-u>v&&!l||r.checkCollision.left===!1||a.checkCollision.right===!1?u=0:(r.touching.none=!1,r.touching.left=!0,a.touching.none=!1,a.touching.right=!0,a.physicsType===n.STATIC_BODY&&!l&&(r.blocked.none=!1,r.blocked.left=!0),r.physicsType===n.STATIC_BODY&&!l&&(a.blocked.none=!1,a.blocked.right=!0))),r.overlapX=u,a.overlapX=u,u};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(62),h=function(r,a,l,o){var u=0,v=r.deltaAbsY()+a.deltaAbsY()+o;return r._dy===0&&a._dy===0?(r.embedded=!0,a.embedded=!0):r._dy>a._dy?(u=r.bottom-a.y,u>v&&!l||r.checkCollision.down===!1||a.checkCollision.up===!1?u=0:(r.touching.none=!1,r.touching.down=!0,a.touching.none=!1,a.touching.up=!0,a.physicsType===n.STATIC_BODY&&!l&&(r.blocked.none=!1,r.blocked.down=!0),r.physicsType===n.STATIC_BODY&&!l&&(a.blocked.none=!1,a.blocked.up=!0))):r._dy<a._dy&&(u=r.y-a.bottom,-u>v&&!l||r.checkCollision.up===!1||a.checkCollision.down===!1?u=0:(r.touching.none=!1,r.touching.up=!0,a.touching.none=!1,a.touching.down=!0,a.physicsType===n.STATIC_BODY&&!l&&(r.blocked.none=!1,r.blocked.up=!0),r.physicsType===n.STATIC_BODY&&!l&&(a.blocked.none=!1,a.blocked.down=!0))),r.overlapY=u,a.overlapY=u,u};e.exports=h},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){return!(h.right<=n.left||h.bottom<=n.top||h.position.x>=n.right||h.position.y>=n.bottom)};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Bounce:i(1495),Collision:i(1496),Force:i(1497),Friction:i(1498),Gravity:i(1499),Mass:i(1500),Sensor:i(1501),SetBody:i(1502),Sleep:i(1503),Static:i(1520),Transform:i(1521),Velocity:i(1522)}},function(e,f){var i={};e.exports=i,function(){i.create=function(n,h){var r=n.bodyA,a=n.bodyB,l={id:i.id(r,a),bodyA:r,bodyB:a,activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:r.isSensor||a.isSensor,timeCreated:h,timeUpdated:h,collision:null,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return i.update(l,n,h),l},i.update=function(n,h,r){if(n.collision=h,h.collided){var a=h.supports,l=n.activeContacts,o=h.parentA,u=h.parentB;n.inverseMass=o.inverseMass+u.inverseMass,n.friction=Math.min(o.friction,u.friction),n.frictionStatic=Math.max(o.frictionStatic,u.frictionStatic),n.restitution=Math.max(o.restitution,u.restitution),n.slop=Math.max(o.slop,u.slop);for(var v=0;v<a.length;v++)l[v]=a[v].contact;var d=a.length;d<l.length&&(l.length=d),n.separation=h.depth,i.setActive(n,!0,r)}else n.isActive===!0&&i.setActive(n,!1,r)},i.setActive=function(n,h,r){h?(n.isActive=!0,n.timeUpdated=r):(n.isActive=!1,n.activeContacts.length=0)},i.id=function(n,h){return n.id<h.id?"A"+n.id+"B"+h.id:"A"+h.id+"B"+n.id}}()},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={CalculateFacesAt:i(252),CalculateFacesWithin:i(63),CheckIsoBounds:i(541),Copy:i(1420),CreateFromTiles:i(1421),CullBounds:i(543),CullTiles:i(544),Fill:i(1422),FilterTiles:i(1423),FindByIndex:i(1424),FindTile:i(1425),ForEachTile:i(1426),GetCullTilesFunction:i(1427),GetTileAt:i(158),GetTileAtWorldXY:i(1428),GetTilesWithin:i(26),GetTilesWithinShape:i(1429),GetTilesWithinWorldXY:i(529),GetTileToWorldXFunction:i(1430),GetTileToWorldXYFunction:i(1431),GetTileToWorldYFunction:i(1432),GetWorldToTileXFunction:i(1433),GetWorldToTileXYFunction:i(1434),GetWorldToTileYFunction:i(1435),HasTileAt:i(562),HasTileAtWorldXY:i(1436),HexagonalCullBounds:i(546),HexagonalCullTiles:i(545),HexagonalTileToWorldXY:i(550),HexagonalTileToWorldY:i(554),HexagonalWorldToTileXY:i(556),HexagonalWorldToTileY:i(560),IsInLayerBounds:i(119),IsometricCullTiles:i(547),IsometricTileToWorldXY:i(551),IsometricWorldToTileXY:i(557),PutTileAt:i(257),PutTileAtWorldXY:i(1437),PutTilesAt:i(1438),Randomize:i(1439),RemoveTileAt:i(563),RemoveTileAtWorldXY:i(1440),RenderDebug:i(1441),ReplaceByIndex:i(542),RunCull:i(159),SetCollision:i(1442),SetCollisionBetween:i(1443),SetCollisionByExclusion:i(1444),SetCollisionByProperty:i(1445),SetCollisionFromCollisionGroup:i(1446),SetLayerCollisionIndex:i(160),SetTileCollision:i(72),SetTileIndexCallback:i(1447),SetTileLocationCallback:i(1448),Shuffle:i(1449),StaggeredCullBounds:i(549),StaggeredCullTiles:i(548),StaggeredTileToWorldXY:i(552),StaggeredTileToWorldY:i(555),StaggeredWorldToTileXY:i(558),StaggeredWorldToTileY:i(561),SwapByIndex:i(1450),TileToWorldX:i(253),TileToWorldXY:i(553),TileToWorldY:i(254),WeightedRandomize:i(1451),WorldToTileX:i(255),WorldToTileXY:i(559),WorldToTileY:i(256)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(158),h=function(r,a,l){var o=n(r,a,!0,l),u=n(r,a-1,!0,l),v=n(r,a+1,!0,l),d=n(r-1,a,!0,l),c=n(r+1,a,!0,l),p=o&&o.collides;return p&&(o.faceTop=!0,o.faceBottom=!0,o.faceLeft=!0,o.faceRight=!0),u&&u.collides&&(p&&(o.faceTop=!1),u.faceBottom=!p),v&&v.collides&&(p&&(o.faceBottom=!1),v.faceTop=!p),d&&d.collides&&(p&&(o.faceLeft=!1),d.faceRight=!p),c&&c.collides&&(p&&(o.faceRight=!1),c.faceLeft=!p),o&&!o.collides&&o.resetFaces(),o};e.exports=h},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r){var a=r.baseTileWidth,l=r.tilemapLayer,o=0;return l&&(h||(h=l.scene.cameras.main),o=l.x+h.scrollX*(1-l.scrollFactorX),a*=l.scaleX),o+n*a};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r){var a=r.baseTileHeight,l=r.tilemapLayer,o=0;return l&&(h||(h=l.scene.cameras.main),o=l.y+h.scrollY*(1-l.scrollFactorY),a*=l.scaleY),o+n*a};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r,a){h===void 0&&(h=!0);var l=a.baseTileWidth,o=a.tilemapLayer;return o&&(r||(r=o.scene.cameras.main),n=n-(o.x+r.scrollX*(1-o.scrollFactorX)),l*=o.scaleX),h?Math.floor(n/l):n/l};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r,a){h===void 0&&(h=!0);var l=a.baseTileHeight,o=a.tilemapLayer;return o&&(r||(r=o.scene.cameras.main),n=n-(o.y+r.scrollY*(1-o.scrollFactorY)),l*=o.scaleY),h?Math.floor(n/l):n/l};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(85),h=i(119),r=i(252),a=i(72),l=function(o,u,v,d,c){if(d===void 0&&(d=!0),!h(u,v,c))return null;var p=c.data[v][u],g=p&&p.collides;if(o instanceof n)c.data[v][u]===null&&(c.data[v][u]=new n(c,o.index,u,v,c.tileWidth,c.tileHeight)),c.data[v][u].copy(o);else{var m=o;c.data[v][u]===null?c.data[v][u]=new n(c,m,u,v,c.tileWidth,c.tileHeight):c.data[v][u].index=m}var x=c.data[v][u],y=c.collideIndexes.indexOf(x.index)!==-1;return a(x,y),d&&g!==x.collides&&r(u,v,c),x};e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(29),h=function(r){return r=r.toLowerCase(),r==="isometric"?n.ISOMETRIC:r==="staggered"?n.STAGGERED:r==="hexagonal"?n.HEXAGONAL:n.ORTHOGONAL};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(40),h=i(120),r=i(121),a=i(85),l=function(o,u,v,d,c){for(var p=new h({tileWidth:v,tileHeight:d}),g=new r({name:o,tileWidth:v,tileHeight:d,format:n.ARRAY_2D,layers:[p]}),m=[],x=u.length,y=0,T=0;T<u.length;T++){m[T]=[];for(var C=u[T],S=0;S<C.length;S++){var E=parseInt(C[S],10);isNaN(E)||E===-1?m[T][S]=c?null:new a(p,-1,S,T,v,d):m[T][S]=new a(p,E,S,T,v,d)}y===0&&(y=C.length)}return g.width=p.width=y,g.height=p.height=x,g.widthInPixels=p.widthInPixels=y*v,g.heightInPixels=p.heightInPixels=x*d,p.data=m,g};e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(571),h=i(261),r=function(o){return{x:o.x,y:o.y}},a=["id","name","type","rotation","properties","visible","x","y","width","height"],l=function(o,u,v){u===void 0&&(u=0),v===void 0&&(v=0);var d=n(o,a);if(d.x+=u,d.y+=v,o.gid){var c=h(o.gid);d.gid=c.gid,d.flippedHorizontal=c.flippedHorizontal,d.flippedVertical=c.flippedVertical,d.flippedAntiDiagonal=c.flippedAntiDiagonal}else o.polyline?d.polyline=o.polyline.map(r):o.polygon?d.polygon=o.polygon.map(r):o.ellipse?d.ellipse=o.ellipse:o.text?d.text=o.text:o.point?d.point=!0:d.rectangle=!0;return d};e.exports=l},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=2147483648,n=1073741824,h=536870912,r=function(a){var l=Boolean(a&i),o=Boolean(a&n),u=Boolean(a&h);a=a&~(i|n|h);var v=0,d=!1;return l&&o&&u?(v=Math.PI/2,d=!0):l&&o&&!u?(v=Math.PI,d=!1):l&&!o&&u?(v=Math.PI/2,d=!1):l&&!o&&!u?(v=0,d=!0):!l&&o&&u?(v=3*Math.PI/2,d=!1):!l&&o&&!u?(v=Math.PI,d=!0):!l&&!o&&u?(v=3*Math.PI/2,d=!0):!l&&!o&&!u&&(v=0,d=!1),{gid:a,flippedHorizontal:l,flippedVertical:o,flippedAntiDiagonal:u,rotation:v,flipped:d}};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(40),h=i(121),r=i(564),a=i(580),l=function(o,u,v,d,c,p,g,m){v===void 0&&(v=32),d===void 0&&(d=32),c===void 0&&(c=10),p===void 0&&(p=10),m===void 0&&(m=!1);var x=null;if(Array.isArray(g)){var y=u!==void 0?u:"map";x=r(y,n.ARRAY_2D,g,v,d,m)}else if(u!==void 0){var T=o.cache.tilemap.get(u);T?x=r(u,T.format,T.data,v,d,m):console.warn("No map data found for key "+u)}return x===null&&(x=new h({tileWidth:v,tileHeight:d,width:c,height:p})),new a(o,x)};e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(6),h=function(r){var a=n(r,"targets",null);return a===null||(typeof a=="function"&&(a=a.call()),Array.isArray(a)||(a=[a])),a};e.exports=h},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function i(l){return!!l.getActive&&typeof l.getActive=="function"}function n(l){return!!l.getStart&&typeof l.getStart=="function"}function h(l){return!!l.getEnd&&typeof l.getEnd=="function"}function r(l){return n(l)||h(l)||i(l)}var a=function(l,o){var u,v=function(E,M,O){return O},d=function(E,M,O){return O},c=null,p=typeof o;if(p==="number")v=function(){return o};else if(p==="string"){var g=o[0],m=parseFloat(o.substr(2));switch(g){case"+":v=function(E,M,O){return O+m};break;case"-":v=function(E,M,O){return O-m};break;case"*":v=function(E,M,O){return O*m};break;case"/":v=function(E,M,O){return O/m};break;default:v=function(){return parseFloat(o)}}}else if(p==="function")v=o;else if(p==="object")if(r(o))i(o)&&(c=o.getActive),h(o)&&(v=o.getEnd),n(o)&&(d=o.getStart);else if(o.hasOwnProperty("value"))u=a(l,o.value);else{var x=o.hasOwnProperty("to"),y=o.hasOwnProperty("from"),T=o.hasOwnProperty("start");if(x&&(y||T)){if(u=a(l,o.to),T){var C=a(l,o.start);u.getActive=C.getEnd}if(y){var S=a(l,o.from);u.getStart=S.getEnd}}}return u||(u={getActive:c,getEnd:v,getStart:d}),u};e.exports=a},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={targets:null,delay:0,duration:1e3,ease:"Power0",easeParams:null,hold:0,repeat:0,repeatDelay:0,yoyo:!1,flipX:!1,flipY:!1};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(9),r=i(267),a=i(16),l=i(5),o=i(100),u=i(14),v=new n({Extends:h,initialize:function(c,p,g){h.call(this),this.parent=c,this.parentIsTimeline=c.hasOwnProperty("isTimeline"),this.data=p,this.totalData=p.length,this.targets=g,this.totalTargets=g.length,this.useFrames=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.startDelay=0,this.hasStarted=!1,this.isSeeking=!1,this.completeDelay=0,this.countdown=0,this.offset=0,this.calculatedOffset=0,this.state=o.PENDING_ADD,this._pausedState=o.INIT,this.paused=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.callbacks={onActive:null,onComplete:null,onLoop:null,onRepeat:null,onStart:null,onStop:null,onUpdate:null,onYoyo:null},this.callbackScope},getValue:function(d){return d===void 0&&(d=0),this.data[d].current},setTimeScale:function(d){return this.timeScale=d,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return this.state===o.ACTIVE},isPaused:function(){return this.state===o.PAUSED},hasTarget:function(d){return this.targets.indexOf(d)!==-1},updateTo:function(d,c,p){p===void 0&&(p=!1);for(var g=0;g<this.totalData;g++){var m=this.data[g];m.key===d&&(m.end=c,p&&(m.start=m.current))}return this},restart:function(){return this.elapsed=0,this.progress=0,this.totalElapsed=0,this.totalProgress=0,this.state===o.ACTIVE?this.seek(0):this.state===o.REMOVED?(this.seek(0),this.parent.makeActive(this),this):this.state===o.PENDING_ADD?this:this.play()},calcDuration:function(){for(var d=0,c=u.MAX_SAFE_INTEGER,p=this.data,g=0;g<this.totalData;g++){var m=p[g];m.t1=m.duration+m.hold,m.yoyo&&(m.t1+=m.duration),m.t2=m.t1+m.repeatDelay,m.totalDuration=m.delay+m.t1,m.repeat===-1?m.totalDuration+=m.t2*999999999999:m.repeat>0&&(m.totalDuration+=m.t2*m.repeat),m.totalDuration>d&&(d=m.totalDuration),m.delay<c&&(c=m.delay)}this.duration=Math.max(d,.001),this.loopCounter=this.loop===-1?999999999999:this.loop,this.loopCounter>0?this.totalDuration=this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.totalDuration=this.duration+this.completeDelay,this.startDelay=c},init:function(){if(this.paused&&!this.parentIsTimeline)return this.state=o.PENDING_ADD,this._pausedState=o.INIT,!1;for(var d=this.data,c=this.totalTargets,p=0;p<this.totalData;p++){var g=d[p],m=g.target,x=g.gen,y=g.key,T=g.index;g.delay=x.delay(m,y,0,T,c,this),g.duration=Math.max(x.duration(m,y,0,T,c,this),.001),g.hold=x.hold(m,y,0,T,c,this),g.repeat=x.repeat(m,y,0,T,c,this),g.repeatDelay=x.repeatDelay(m,y,0,T,c,this)}return this.calcDuration(),this.progress=0,this.totalProgress=0,this.elapsed=0,this.totalElapsed=0,this.state=o.INIT,!0},makeActive:function(){this.parent.makeActive(this),this.dispatchTweenEvent(r.TWEEN_ACTIVE,this.callbacks.onActive)},nextState:function(){this.loopCounter>0?(this.elapsed=0,this.progress=0,this.loopCounter--,this.resetTweenData(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.state=o.LOOP_DELAY):(this.state=o.ACTIVE,this.dispatchTweenEvent(r.TWEEN_LOOP,this.callbacks.onLoop))):this.completeDelay>0?(this.state=o.COMPLETE_DELAY,this.countdown=this.completeDelay):(this.state=o.PENDING_REMOVE,this.dispatchTweenEvent(r.TWEEN_COMPLETE,this.callbacks.onComplete))},pause:function(){return this.state===o.PAUSED?this:(this.paused=!0,this._pausedState=this.state,this.state=o.PAUSED,this)},play:function(d){d===void 0&&(d=!1);var c=this.state;return c===o.INIT&&!this.parentIsTimeline?(this.resetTweenData(!1),this.state=o.ACTIVE,this):c===o.ACTIVE||c===o.PENDING_ADD&&this._pausedState===o.PENDING_ADD?this:!this.parentIsTimeline&&(c===o.PENDING_REMOVE||c===o.REMOVED)?(this.seek(0),this.parent.makeActive(this),this):(this.parentIsTimeline?(this.resetTweenData(d),this.calculatedOffset===0?this.state=o.ACTIVE:(this.countdown=this.calculatedOffset,this.state=o.OFFSET_DELAY)):this.paused?(this.paused=!1,this.makeActive()):(this.resetTweenData(d),this.state=o.ACTIVE,this.makeActive()),this)},resetTweenData:function(d){for(var c=this.data,p=this.totalData,g=this.totalTargets,m=0;m<p;m++){var x=c[m],y=x.target,T=x.key,C=x.index;x.progress=0,x.elapsed=0,x.repeatCounter=x.repeat===-1?999999999999:x.repeat,d?(x.start=x.getStartValue(y,T,x.start,C,g,this),x.end=x.getEndValue(y,T,x.end,C,g,this),x.current=x.start,x.state=o.PLAYING_FORWARD):x.state=o.PENDING_RENDER,x.delay>0&&(x.elapsed=x.delay,x.state=o.DELAY),x.getActiveValue&&(y[T]=x.getActiveValue(x.target,x.key,x.start))}},resume:function(){return this.state===o.PAUSED?(this.paused=!1,this.state=this._pausedState):this.play(),this},seek:function(d,c){c===void 0&&(c=16.6),this.state===o.REMOVED&&this.makeActive(),this.elapsed=0,this.progress=0,this.totalElapsed=0,this.totalProgress=0;for(var p=this.data,g=this.totalTargets,m=0;m<this.totalData;m++){var x=p[m],y=x.target,T=x.gen,C=x.key,S=x.index;x.progress=0,x.elapsed=0,x.repeatCounter=x.repeat===-1?999999999999:x.repeat,x.delay=T.delay(y,C,0,S,g,this),x.duration=Math.max(T.duration(y,C,0,S,g,this),.001),x.hold=T.hold(y,C,0,S,g,this),x.repeat=T.repeat(y,C,0,S,g,this),x.repeatDelay=T.repeatDelay(y,C,0,S,g,this),x.current=x.start,x.state=o.PLAYING_FORWARD,this.updateTweenData(this,x,0,S,g),x.delay>0&&(x.elapsed=x.delay,x.state=o.DELAY)}this.calcDuration();var E=!1;this.state===o.PAUSED&&(E=!0,this.state=o.ACTIVE),this.isSeeking=!0;do this.update(0,c);while(this.totalProgress<d);return this.isSeeking=!1,E&&(this.state=o.PAUSED),this},setCallback:function(d,c,p,g){return this.callbacks[d]={func:c,scope:g,params:p},this},complete:function(d){return d===void 0&&(d=0),d?(this.state=o.COMPLETE_DELAY,this.countdown=d):(this.state=o.PENDING_REMOVE,this.dispatchTweenEvent(r.TWEEN_COMPLETE,this.callbacks.onComplete)),this},remove:function(){return this.parent.remove(this),this},stop:function(d){return this.state===o.ACTIVE&&d!==void 0&&this.seek(d),this.state!==o.REMOVED&&((this.state===o.PAUSED||this.state===o.PENDING_ADD)&&(this.parentIsTimeline?(this.parent.manager._destroy.push(this),this.parent.manager._toProcess++):(this.parent._destroy.push(this),this.parent._toProcess++)),this.dispatchTweenEvent(r.TWEEN_STOP,this.callbacks.onStop),this.removeAllListeners(),this.state=o.PENDING_REMOVE),this},update:function(d,c){if(this.state===o.PAUSED)return!1;switch(this.useFrames&&(c=1*this.parent.timeScale),c*=this.timeScale,this.elapsed+=c,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=c,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),this.state){case o.ACTIVE:!this.hasStarted&&!this.isSeeking&&(this.startDelay-=c,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchTweenEvent(r.TWEEN_START,this.callbacks.onStart)));for(var p=!1,g=0;g<this.totalData;g++){var m=this.data[g];this.updateTweenData(this,m,c)&&(p=!0)}p||this.nextState();break;case o.LOOP_DELAY:this.countdown-=c,this.countdown<=0&&(this.state=o.ACTIVE,this.dispatchTweenEvent(r.TWEEN_LOOP,this.callbacks.onLoop));break;case o.OFFSET_DELAY:this.countdown-=c,this.countdown<=0&&(this.state=o.ACTIVE);break;case o.COMPLETE_DELAY:this.countdown-=c,this.countdown<=0&&(this.state=o.PENDING_REMOVE,this.dispatchTweenEvent(r.TWEEN_COMPLETE,this.callbacks.onComplete));break}return this.state===o.PENDING_REMOVE},dispatchTweenDataEvent:function(d,c,p){this.isSeeking||(this.emit(d,this,p.key,p.target,p.current,p.previous),c&&(c.params[1]=p.target,c.func.apply(c.scope,c.params)))},dispatchTweenEvent:function(d,c){this.isSeeking||(this.emit(d,this,this.targets),c&&(c.params[1]=this.targets,c.func.apply(c.scope,c.params)))},setStateFromEnd:function(d,c,p){return c.yoyo?(c.elapsed=p,c.progress=p/c.duration,c.flipX&&c.target.toggleFlipX(),c.flipY&&c.target.toggleFlipY(),this.dispatchTweenDataEvent(r.TWEEN_YOYO,d.callbacks.onYoyo,c),c.start=c.getStartValue(c.target,c.key,c.start,c.index,d.totalTargets,d),o.PLAYING_BACKWARD):c.repeatCounter>0?(c.repeatCounter--,c.elapsed=p,c.progress=p/c.duration,c.flipX&&c.target.toggleFlipX(),c.flipY&&c.target.toggleFlipY(),c.start=c.getStartValue(c.target,c.key,c.start,c.index,d.totalTargets,d),c.end=c.getEndValue(c.target,c.key,c.start,c.index,d.totalTargets,d),c.repeatDelay>0?(c.elapsed=c.repeatDelay-p,c.current=c.start,c.target[c.key]=c.current,o.REPEAT_DELAY):(this.dispatchTweenDataEvent(r.TWEEN_REPEAT,d.callbacks.onRepeat,c),o.PLAYING_FORWARD)):o.COMPLETE},setStateFromStart:function(d,c,p){return c.repeatCounter>0?(c.repeatCounter--,c.elapsed=p,c.progress=p/c.duration,c.flipX&&c.target.toggleFlipX(),c.flipY&&c.target.toggleFlipY(),c.end=c.getEndValue(c.target,c.key,c.start,c.index,d.totalTargets,d),c.repeatDelay>0?(c.elapsed=c.repeatDelay-p,c.current=c.start,c.target[c.key]=c.current,o.REPEAT_DELAY):(this.dispatchTweenDataEvent(r.TWEEN_REPEAT,d.callbacks.onRepeat,c),o.PLAYING_FORWARD)):o.COMPLETE},updateTweenData:function(d,c,p){var g=c.target;switch(c.state){case o.PLAYING_FORWARD:case o.PLAYING_BACKWARD:if(!g){c.state=o.COMPLETE;break}var m=c.elapsed,x=c.duration,y=0;m+=p,m>x&&(y=m-x,m=x);var T=c.state===o.PLAYING_FORWARD,C=m/x;if(c.elapsed=m,c.progress=C,c.previous=c.current,C===1)T?(c.current=c.end,g[c.key]=c.end,c.hold>0?(c.elapsed=c.hold-y,c.state=o.HOLD_DELAY):c.state=this.setStateFromEnd(d,c,y)):(c.current=c.start,g[c.key]=c.start,c.state=this.setStateFromStart(d,c,y));else{var S=T?c.ease(C):c.ease(1-C);c.current=c.start+(c.end-c.start)*S,g[c.key]=c.current}this.dispatchTweenDataEvent(r.TWEEN_UPDATE,d.callbacks.onUpdate,c);break;case o.DELAY:c.elapsed-=p,c.elapsed<=0&&(c.elapsed=Math.abs(c.elapsed),c.state=o.PENDING_RENDER);break;case o.REPEAT_DELAY:c.elapsed-=p,c.elapsed<=0&&(c.elapsed=Math.abs(c.elapsed),c.state=o.PLAYING_FORWARD,this.dispatchTweenDataEvent(r.TWEEN_REPEAT,d.callbacks.onRepeat,c));break;case o.HOLD_DELAY:c.elapsed-=p,c.elapsed<=0&&(c.state=this.setStateFromEnd(d,c,Math.abs(c.elapsed)));break;case o.PENDING_RENDER:g?(c.start=c.getStartValue(g,c.key,g[c.key],c.index,d.totalTargets,d),c.end=c.getEndValue(g,c.key,c.start,c.index,d.totalTargets,d),c.current=c.start,g[c.key]=c.start,c.state=o.PLAYING_FORWARD):c.state=o.COMPLETE;break}return c.state!==o.COMPLETE}});v.TYPES=["onActive","onComplete","onLoop","onRepeat","onStart","onStop","onUpdate","onYoyo"],l.register("tween",function(d){return this.scene.sys.tweens.add(d)}),a.register("tween",function(d){return this.scene.sys.tweens.create(d)}),e.exports=v},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={TIMELINE_COMPLETE:i(1466),TIMELINE_LOOP:i(1467),TIMELINE_PAUSE:i(1468),TIMELINE_RESUME:i(1469),TIMELINE_START:i(1470),TIMELINE_UPDATE:i(1471),TWEEN_ACTIVE:i(1472),TWEEN_COMPLETE:i(1473),TWEEN_LOOP:i(1474),TWEEN_REPEAT:i(1475),TWEEN_START:i(1476),TWEEN_STOP:i(1477),TWEEN_UPDATE:i(1478),TWEEN_YOYO:i(1479)}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r,a,l,o,u,v,d,c,p,g,m,x,y){return{target:n,index:h,key:r,getActiveValue:o,getEndValue:a,getStartValue:l,ease:u,duration:0,totalDuration:0,delay:0,yoyo:c,hold:0,repeat:0,repeatDelay:0,flipX:x,flipY:y,progress:0,elapsed:0,repeatCounter:0,start:0,previous:0,current:0,end:0,t1:0,t2:0,gen:{delay:v,duration:d,hold:p,repeat:g,repeatDelay:m},state:0}};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(68),h=function(r){return n(r,-Math.PI,Math.PI)};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(68),h=function(r){return n(r,-180,180)};e.exports=h},function(e,f,i){var n={};e.exports=n;var h=i(83),r=i(32);(function(){n.fromVertices=function(a){for(var l={},o=0;o<a.length;o++){var u=(o+1)%a.length,v=h.normalise({x:a[u].y-a[o].y,y:a[o].x-a[u].x}),d=v.y===0?1/0:v.x/v.y;d=d.toFixed(3).toString(),l[d]=v}return r.values(l)},n.rotate=function(a,l){if(l!==0)for(var o=Math.cos(l),u=Math.sin(l),v=0;v<a.length;v++){var d=a[v],c;c=d.x*o-d.y*u,d.y=d.x*u+d.y*o,d.x=c}}})()},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={AFTER_ADD:i(1504),AFTER_REMOVE:i(1505),AFTER_UPDATE:i(1506),BEFORE_ADD:i(1507),BEFORE_REMOVE:i(1508),BEFORE_UPDATE:i(1509),COLLISION_ACTIVE:i(1510),COLLISION_END:i(1511),COLLISION_START:i(1512),DRAG_END:i(1513),DRAG:i(1514),DRAG_START:i(1515),PAUSE:i(1516),RESUME:i(1517),SLEEP_END:i(1518),SLEEP_START:i(1519)}},function(e,f,i){var n={};e.exports=n;var h=i(274),r=i(250),a=i(84);(function(){n.collisions=function(l,o){for(var u=[],v=o.pairs.table,d=o.metrics,c=0;c<l.length;c++){var p=l[c][0],g=l[c][1];if(!((p.isStatic||p.isSleeping)&&(g.isStatic||g.isSleeping))&&!!n.canCollide(p.collisionFilter,g.collisionFilter)&&(d.midphaseTests+=1,a.overlaps(p.bounds,g.bounds)))for(var m=p.parts.length>1?1:0;m<p.parts.length;m++)for(var x=p.parts[m],y=g.parts.length>1?1:0;y<g.parts.length;y++){var T=g.parts[y];if(x===p&&T===g||a.overlaps(x.bounds,T.bounds)){var C=r.id(x,T),S=v[C],E;S&&S.isActive?E=S.collision:E=null;var M=h.collides(x,T,E);d.narrowphaseTests+=1,M.reused&&(d.narrowReuseCount+=1),M.collided&&(u.push(M),d.narrowDetections+=1)}}}return u},n.canCollide=function(l,o){return l.group===o.group&&l.group!==0?l.group>0:(l.mask&o.category)!==0&&(o.mask&l.category)!==0}})()},function(e,f,i){var n={};e.exports=n;var h=i(64),r=i(83);(function(){n.collides=function(a,l,o){var u,v,d,c,p=!1;if(o){var g=a.parent,m=l.parent,x=g.speed*g.speed+g.angularSpeed*g.angularSpeed+m.speed*m.speed+m.angularSpeed*m.angularSpeed;p=o&&o.collided&&x<.2,c=o}else c={collided:!1,bodyA:a,bodyB:l};if(o&&p){var y=c.axisBody,T=y===a?l:a,C=[y.axes[o.axisNumber]];if(d=n._overlapAxes(y.vertices,T.vertices,C),c.reused=!0,d.overlap<=0)return c.collided=!1,c}else{if(u=n._overlapAxes(a.vertices,l.vertices,a.axes),u.overlap<=0||(v=n._overlapAxes(l.vertices,a.vertices,l.axes),v.overlap<=0))return c.collided=!1,c;u.overlap<v.overlap?(d=u,c.axisBody=a):(d=v,c.axisBody=l),c.axisNumber=d.axisNumber}c.bodyA=a.id<l.id?a:l,c.bodyB=a.id<l.id?l:a,c.collided=!0,c.depth=d.overlap,c.parentA=c.bodyA.parent,c.parentB=c.bodyB.parent,a=c.bodyA,l=c.bodyB,r.dot(d.axis,r.sub(l.position,a.position))<0?c.normal={x:d.axis.x,y:d.axis.y}:c.normal={x:-d.axis.x,y:-d.axis.y},c.tangent=r.perp(c.normal),c.penetration=c.penetration||{},c.penetration.x=c.normal.x*c.depth,c.penetration.y=c.normal.y*c.depth;var S=n._findSupports(a,l,c.normal),E=[];if(h.contains(a.vertices,S[0])&&E.push(S[0]),h.contains(a.vertices,S[1])&&E.push(S[1]),E.length<2){var M=n._findSupports(l,a,r.neg(c.normal));h.contains(l.vertices,M[0])&&E.push(M[0]),E.length<2&&h.contains(l.vertices,M[1])&&E.push(M[1])}return E.length<1&&(E=[S[0]]),c.supports=E,c},n._overlapAxes=function(a,l,o){for(var u=r._temp[0],v=r._temp[1],d={overlap:Number.MAX_VALUE},c,p,g=0;g<o.length;g++){if(p=o[g],n._projectToAxis(u,a,p),n._projectToAxis(v,l,p),c=Math.min(u.max-v.min,v.max-u.min),c<=0)return d.overlap=c,d;c<d.overlap&&(d.overlap=c,d.axis=p,d.axisNumber=g)}return d},n._projectToAxis=function(a,l,o){for(var u=r.dot(l[0],o),v=u,d=1;d<l.length;d+=1){var c=r.dot(l[d],o);c>v?v=c:c<u&&(u=c)}a.min=u,a.max=v},n._findSupports=function(a,l,o){for(var u=Number.MAX_VALUE,v=r._temp[0],d=l.vertices,c=a.position,p,g,m,x,y=0;y<d.length;y++)g=d[y],v.x=g.x-c.x,v.y=g.y-c.y,p=-r.dot(o,v),p<u&&(u=p,m=g);var T=m.index-1>=0?m.index-1:d.length-1;g=d[T],v.x=g.x-c.x,v.y=g.y-c.y,u=-r.dot(o,v),x=g;var C=(m.index+1)%d.length;return g=d[C],v.x=g.x-c.x,v.y=g.y-c.y,p=-r.dot(o,v),p<u&&(x=g),[m,x]}})()},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={AlignTo:i(601),Angle:i(602),Call:i(603),GetFirst:i(604),GetLast:i(605),GridAlign:i(606),IncAlpha:i(678),IncX:i(679),IncXY:i(680),IncY:i(681),PlaceOnCircle:i(682),PlaceOnEllipse:i(683),PlaceOnLine:i(684),PlaceOnRectangle:i(685),PlaceOnTriangle:i(686),PlayAnimation:i(687),PropertyValueInc:i(46),PropertyValueSet:i(27),RandomCircle:i(688),RandomEllipse:i(689),RandomLine:i(690),RandomRectangle:i(691),RandomTriangle:i(692),Rotate:i(693),RotateAround:i(694),RotateAroundDistance:i(695),ScaleX:i(696),ScaleXY:i(697),ScaleY:i(698),SetAlpha:i(699),SetBlendMode:i(700),SetDepth:i(701),SetHitArea:i(702),SetOrigin:i(703),SetRotation:i(704),SetScale:i(705),SetScaleX:i(706),SetScaleY:i(707),SetScrollFactor:i(708),SetScrollFactorX:i(709),SetScrollFactorY:i(710),SetTint:i(711),SetVisible:i(712),SetX:i(713),SetXY:i(714),SetY:i(715),ShiftPosition:i(716),Shuffle:i(717),SmootherStep:i(718),SmoothStep:i(719),Spread:i(720),ToggleVisible:i(721),WrapInRectangle:i(722)}},function(e,f,i){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(123),h=[];h[n.BOTTOM_CENTER]=i(277),h[n.BOTTOM_LEFT]=i(278),h[n.BOTTOM_RIGHT]=i(279),h[n.LEFT_BOTTOM]=i(280),h[n.LEFT_CENTER]=i(281),h[n.LEFT_TOP]=i(282),h[n.RIGHT_BOTTOM]=i(283),h[n.RIGHT_CENTER]=i(284),h[n.RIGHT_TOP]=i(285),h[n.TOP_CENTER]=i(286),h[n.TOP_LEFT]=i(287),h[n.TOP_RIGHT]=i(288);var r=function(a,l,o,u,v){return h[o](a,l,u,v)};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(42),h=i(87),r=i(88),a=i(52),l=function(o,u,v,d){return v===void 0&&(v=0),d===void 0&&(d=0),r(o,h(u)+v),a(o,n(u)+d),o};e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(42),h=i(43),r=i(53),a=i(52),l=function(o,u,v,d){return v===void 0&&(v=0),d===void 0&&(d=0),r(o,h(u)-v),a(o,n(u)+d),o};e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(42),h=i(44),r=i(54),a=i(52),l=function(o,u,v,d){return v===void 0&&(v=0),d===void 0&&(d=0),r(o,h(u)+v),a(o,n(u)+d),o};e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(42),h=i(43),r=i(55),a=i(54),l=function(o,u,v,d){return v===void 0&&(v=0),d===void 0&&(d=0),a(o,h(u)-v),r(o,n(u)+d),o};e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(89),h=i(43),r=i(90),a=i(54),l=function(o,u,v,d){return v===void 0&&(v=0),d===void 0&&(d=0),a(o,h(u)-v),r(o,n(u)+d),o};e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(43),h=i(45),r=i(54),a=i(52),l=function(o,u,v,d){return v===void 0&&(v=0),d===void 0&&(d=0),r(o,n(u)-v),a(o,h(u)-d),o};e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(42),h=i(44),r=i(55),a=i(53),l=function(o,u,v,d){return v===void 0&&(v=0),d===void 0&&(d=0),a(o,h(u)+v),r(o,n(u)+d),o};e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(89),h=i(44),r=i(90),a=i(53),l=function(o,u,v,d){return v===void 0&&(v=0),d===void 0&&(d=0),a(o,h(u)+v),r(o,n(u)+d),o};e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(44),h=i(45),r=i(53),a=i(52),l=function(o,u,v,d){return v===void 0&&(v=0),d===void 0&&(d=0),r(o,n(u)+v),a(o,h(u)-d),o};e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(87),h=i(45),r=i(55),a=i(88),l=function(o,u,v,d){return v===void 0&&(v=0),d===void 0&&(d=0),a(o,n(u)+v),r(o,h(u)-d),o};e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(43),h=i(45),r=i(55),a=i(53),l=function(o,u,v,d){return v===void 0&&(v=0),d===void 0&&(d=0),a(o,n(u)-v),r(o,h(u)-d),o};e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(44),h=i(45),r=i(55),a=i(54),l=function(o,u,v,d){return v===void 0&&(v=0),d===void 0&&(d=0),a(o,n(u)+v),r(o,h(u)-d),o};e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(123),h=[];h[n.BOTTOM_CENTER]=i(290),h[n.BOTTOM_LEFT]=i(291),h[n.BOTTOM_RIGHT]=i(292),h[n.CENTER]=i(293),h[n.LEFT_CENTER]=i(295),h[n.RIGHT_CENTER]=i(296),h[n.TOP_CENTER]=i(297),h[n.TOP_LEFT]=i(298),h[n.TOP_RIGHT]=i(299),h[n.LEFT_BOTTOM]=h[n.BOTTOM_LEFT],h[n.LEFT_TOP]=h[n.TOP_LEFT],h[n.RIGHT_BOTTOM]=h[n.BOTTOM_RIGHT],h[n.RIGHT_TOP]=h[n.TOP_RIGHT];var r=function(a,l,o,u,v){return h[o](a,l,u,v)};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(42),h=i(87),r=i(55),a=i(88),l=function(o,u,v,d){return v===void 0&&(v=0),d===void 0&&(d=0),a(o,h(u)+v),r(o,n(u)+d),o};e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(42),h=i(43),r=i(55),a=i(53),l=function(o,u,v,d){return v===void 0&&(v=0),d===void 0&&(d=0),a(o,h(u)-v),r(o,n(u)+d),o};e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(42),h=i(44),r=i(55),a=i(54),l=function(o,u,v,d){return v===void 0&&(v=0),d===void 0&&(d=0),a(o,h(u)+v),r(o,n(u)+d),o};e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(294),h=i(87),r=i(89),a=function(l,o,u,v){return u===void 0&&(u=0),v===void 0&&(v=0),n(l,h(o)+u,r(o)+v),l};e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(88),h=i(90),r=function(a,l,o){return n(a,l),h(a,o)};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(89),h=i(43),r=i(90),a=i(53),l=function(o,u,v,d){return v===void 0&&(v=0),d===void 0&&(d=0),a(o,h(u)-v),r(o,n(u)+d),o};e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(89),h=i(44),r=i(90),a=i(54),l=function(o,u,v,d){return v===void 0&&(v=0),d===void 0&&(d=0),a(o,h(u)+v),r(o,n(u)+d),o};e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(87),h=i(45),r=i(88),a=i(52),l=function(o,u,v,d){return v===void 0&&(v=0),d===void 0&&(d=0),r(o,n(u)+v),a(o,h(u)-d),o};e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(43),h=i(45),r=i(53),a=i(52),l=function(o,u,v,d){return v===void 0&&(v=0),d===void 0&&(d=0),r(o,n(u)-v),a(o,h(u)-d),o};e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(44),h=i(45),r=i(54),a=i(52),l=function(o,u,v,d){return v===void 0&&(v=0),d===void 0&&(d=0),r(o,n(u)+v),a(o,h(u)-d),o};e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(169),h=i(98),r=i(14),a=i(4),l=function(o,u,v){v===void 0&&(v=new a);var d=h(u,0,r.PI2);return n(o,d,v)};e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(302),h=i(169),r=i(98),a=i(14),l=function(o,u,v,d){d===void 0&&(d=[]),!u&&v>0&&(u=n(o)/v);for(var c=0;c<u;c++){var p=r(c/u,0,a.PI2);d.push(h(o,p))}return d};e.exports=l},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return 2*(Math.PI*n.radius)};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(18),h=2,r={_alpha:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(a){return a===void 0&&(a=1),this.alpha=a,this},alpha:{get:function(){return this._alpha},set:function(a){var l=n(a,0,1);this._alpha=l,l===0?this.renderFlags&=~h:this.renderFlags|=h}}};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(35),h={_blendMode:n.NORMAL,blendMode:{get:function(){return this._blendMode},set:function(r){typeof r=="string"&&(r=n[r]),r|=0,r>=-1&&(this._blendMode=r)}},setBlendMode:function(r){return this.blendMode=r,this}};e.exports=h},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={_depth:0,depth:{get:function(){return this._depth},set:function(n){this.displayList&&this.displayList.queueDepthSort(),this._depth=n}},setDepth:function(n){return n===void 0&&(n=0),this.depth=n,this}};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(171),h=i(130),r=function(a,l,o,u){u===void 0&&(u=[]),!l&&o>0&&(l=h(a)/o);for(var v=0;v<l;v++){var d=v/l;u.push(n(a,d))}return u};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4),h=function(r,a,l){return l===void 0&&(l=new n),l.x=r.x1+(r.x2-r.x1)*a,l.y=r.y1+(r.y2-r.y1)*a,l};e.exports=h},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r,a){var l=Math.cos(a),o=Math.sin(a),u=n.x-h,v=n.y-r;return n.x=u*l-v*o+h,n.y=u*o+v*l+r,n};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(310),h=i(311),r={mask:null,setMask:function(a){return this.mask=a,this},clearMask:function(a){return a===void 0&&(a=!1),a&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function(a){return a===void 0&&(this.texture||this.shader)&&(a=this),new n(this.scene,a)},createGeometryMask:function(a){return a===void 0&&this.type==="Graphics"&&(a=this),new h(this.scene,a)}};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(22),r=i(91),a=new n({initialize:function(o,u){var v=o.sys.renderer;this.renderer=v,this.bitmapMask=u,this.maskTexture=null,this.mainTexture=null,this.dirty=!0,this.mainFramebuffer=null,this.maskFramebuffer=null,this.invertAlpha=!1,this.isStencil=!1,this.createMask(),o.sys.game.events.on(h.CONTEXT_RESTORED,this.createMask,this),v&&v.on(r.RESIZE,this.createMask,this)},createMask:function(){var l=this.renderer;if(!(!l||!l.gl)){this.mainTexture&&this.clearMask();var o=l.width,u=l.height,v=(o&o-1)===0&&(u&u-1)===0,d=l.gl,c=v?d.REPEAT:d.CLAMP_TO_EDGE,p=d.LINEAR;this.mainTexture=l.createTexture2D(0,p,p,c,c,d.RGBA,null,o,u),this.maskTexture=l.createTexture2D(0,p,p,c,c,d.RGBA,null,o,u),this.mainFramebuffer=l.createFramebuffer(o,u,this.mainTexture,!0),this.maskFramebuffer=l.createFramebuffer(o,u,this.maskTexture,!0)}},clearMask:function(){var l=this.renderer;!l||!l.gl||!this.mainTexture||(l.deleteTexture(this.mainTexture),l.deleteTexture(this.maskTexture),l.deleteFramebuffer(this.mainFramebuffer),l.deleteFramebuffer(this.maskFramebuffer),this.mainTexture=null,this.maskTexture=null,this.mainFramebuffer=null,this.maskFramebuffer=null)},setBitmap:function(l){this.bitmapMask=l},preRenderWebGL:function(l,o,u){l.pipelines.BITMAPMASK_PIPELINE.beginMask(this,o,u)},postRenderWebGL:function(l,o){l.pipelines.BITMAPMASK_PIPELINE.endMask(this,o)},preRenderCanvas:function(){},postRenderCanvas:function(){},destroy:function(){this.clearMask(),this.renderer&&this.renderer.off(r.RESIZE,this.createMask,this),this.bitmapMask=null,this.prevFramebuffer=null,this.renderer=null}});e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=new n({initialize:function(a,l){this.geometryMask=l,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function(r){return this.geometryMask=r,this},setInvertAlpha:function(r){return r===void 0&&(r=!0),this.invertAlpha=r,this},preRenderWebGL:function(r,a,l){var o=r.gl;r.flush(),r.maskStack.length===0&&(o.enable(o.STENCIL_TEST),o.clear(o.STENCIL_BUFFER_BIT),r.maskCount=0),r.currentCameraMask.mask!==this&&(r.currentMask.mask=this),r.maskStack.push({mask:this,camera:l}),this.applyStencil(r,l,!0),r.maskCount++},applyStencil:function(r,a,l){var o=r.gl,u=this.geometryMask,v=r.maskCount;o.colorMask(!1,!1,!1,!1),l?(o.stencilFunc(o.EQUAL,v,255),o.stencilOp(o.KEEP,o.KEEP,o.INCR)):(o.stencilFunc(o.EQUAL,v+1,255),o.stencilOp(o.KEEP,o.KEEP,o.DECR)),u.renderWebGL(r,u,a),r.flush(),o.colorMask(!0,!0,!0,!0),o.stencilOp(o.KEEP,o.KEEP,o.KEEP),l?this.invertAlpha?o.stencilFunc(o.NOTEQUAL,v+1,255):o.stencilFunc(o.EQUAL,v+1,255):this.invertAlpha?o.stencilFunc(o.NOTEQUAL,v,255):o.stencilFunc(o.EQUAL,v,255)},postRenderWebGL:function(r){var a=r.gl;r.maskStack.pop(),r.maskCount--,r.flush();var l=r.currentMask;if(r.maskStack.length===0)l.mask=null,a.disable(a.STENCIL_TEST);else{var o=r.maskStack[r.maskStack.length-1];o.mask.applyStencil(r,o.camera,!1),r.currentCameraMask.mask!==o.mask?(l.mask=o.mask,l.camera=o.camera):l.mask=null}},preRenderCanvas:function(r,a,l){var o=this.geometryMask;r.currentContext.save(),o.renderCanvas(r,o,l,null,null,!0),r.currentContext.clip()},postRenderCanvas:function(r){r.currentContext.restore()},destroy:function(){this.geometryMask=null}});e.exports=h},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function(n,h){return h===void 0&&(h=n),this.scrollFactorX=n,this.scrollFactorY=h,this}};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(14),h=i(25),r=i(177),a=i(269),l=i(270),o=i(3),u=4,v={_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(d){this._scaleX=d,this._scaleY=d,d===0?this.renderFlags&=~u:this.renderFlags|=u}},scaleX:{get:function(){return this._scaleX},set:function(d){this._scaleX=d,d===0?this.renderFlags&=~u:this.renderFlags|=u}},scaleY:{get:function(){return this._scaleY},set:function(d){this._scaleY=d,d===0?this.renderFlags&=~u:this.renderFlags|=u}},angle:{get:function(){return l(this._rotation*n.RAD_TO_DEG)},set:function(d){this.rotation=l(d)*n.DEG_TO_RAD}},rotation:{get:function(){return this._rotation},set:function(d){this._rotation=a(d)}},setPosition:function(d,c,p,g){return d===void 0&&(d=0),c===void 0&&(c=d),p===void 0&&(p=0),g===void 0&&(g=0),this.x=d,this.y=c,this.z=p,this.w=g,this},copyPosition:function(d){return d.x!==void 0&&(this.x=d.x),d.y!==void 0&&(this.y=d.y),d.z!==void 0&&(this.z=d.z),d.w!==void 0&&(this.w=d.w),this},setRandomPosition:function(d,c,p,g){return d===void 0&&(d=0),c===void 0&&(c=0),p===void 0&&(p=this.scene.sys.scale.width),g===void 0&&(g=this.scene.sys.scale.height),this.x=d+Math.random()*p,this.y=c+Math.random()*g,this},setRotation:function(d){return d===void 0&&(d=0),this.rotation=d,this},setAngle:function(d){return d===void 0&&(d=0),this.angle=d,this},setScale:function(d,c){return d===void 0&&(d=1),c===void 0&&(c=d),this.scaleX=d,this.scaleY=c,this},setX:function(d){return d===void 0&&(d=0),this.x=d,this},setY:function(d){return d===void 0&&(d=0),this.y=d,this},setZ:function(d){return d===void 0&&(d=0),this.z=d,this},setW:function(d){return d===void 0&&(d=0),this.w=d,this},getLocalTransformMatrix:function(d){return d===void 0&&(d=new h),d.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function(d,c){d===void 0&&(d=new h),c===void 0&&(c=new h);var p=this.parentContainer;if(!p)return this.getLocalTransformMatrix(d);for(d.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);p;)c.applyITRS(p.x,p.y,p._rotation,p._scaleX,p._scaleY),c.multiply(d,d),p=p.parentContainer;return d},getLocalPoint:function(d,c,p,g){p||(p=new o),g||(g=this.scene.sys.cameras.main);var m=g.scrollX,x=g.scrollY,y=d+m*this.scrollFactorX-m,T=c+x*this.scrollFactorY-x;return this.parentContainer?this.getWorldTransformMatrix().applyInverse(y,T,p):r(y,T,this.x,this.y,this.rotation,this.scaleX,this.scaleY,p),this._originComponent&&(p.x+=this._displayOriginX,p.y+=this._displayOriginY),p},getParentRotation:function(){for(var d=0,c=this.parentContainer;c;)d+=c.rotation,c=c.parentContainer;return d}};e.exports=v},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=1,n={_visible:!0,visible:{get:function(){return this._visible},set:function(h){h?(this._visible=!0,this.renderFlags|=i):(this._visible=!1,this.renderFlags&=~i)}},setVisible:function(h){return this.visible=h,this}};e.exports=n},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={CHANGE_DATA:i(638),CHANGE_DATA_KEY:i(639),DESTROY:i(640),REMOVE_DATA:i(641),SET_DATA:i(642)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(130),h=i(4),r=function(a,l,o,u){if(u===void 0&&(u=[]),!l&&!o)return u;l?o=Math.round(n(a)/l):l=n(a)/o;for(var v=a.x,d=a.y,c=0,p=0;p<o;p++)switch(u.push(new h(v,d)),c){case 0:v+=l,v>=a.right&&(c=1,d+=v-a.right,v=a.right);break;case 1:d+=l,d>=a.bottom&&(c=2,v-=d-a.bottom,d=a.bottom);break;case 2:v-=l,v<=a.left&&(c=3,d-=a.left-v,v=a.left);break;case 3:d-=l,d<=a.top&&(c=0,d=a.top);break}return u};e.exports=r},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r){h===void 0&&(h=1),r===void 0&&(r=[]);var a=Math.round(n.x1),l=Math.round(n.y1),o=Math.round(n.x2),u=Math.round(n.y2),v=Math.abs(o-a),d=Math.abs(u-l),c=a<o?1:-1,p=l<u?1:-1,g=v-d;r.push({x:a,y:l});for(var m=1;!(a===o&&l===u);){var x=g<<1;x>-d&&(g-=d,a+=c),x<v&&(g+=v,l+=p),m%h===0&&r.push({x:a,y:l}),m++}return r};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r){if(h.length){if(h.length===1)return h[0]}else return NaN;var a=1,l,o;if(r){if(n<h[0][r])return h[0];for(;h[a][r]<n;)a++}else for(;h[a]<n;)a++;return a>h.length&&(a=h.length),r?(l=h[a-1][r],o=h[a][r],o-n<=n-l?h[a]:h[a-1]):(l=h[a-1],o=h[a],o-n<=n-l?o:l)};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=new n({initialize:function(a,l,o,u,v){v===void 0&&(v=!1),this.textureKey=a,this.textureFrame=l,this.index=o,this.frame=u,this.isFirst=!1,this.isLast=!1,this.prevFrame=null,this.nextFrame=null,this.duration=0,this.progress=0,this.isKeyFrame=v},toJSON:function(){return{key:this.textureKey,frame:this.textureFrame,duration:this.duration,keyframe:this.isKeyFrame}},destroy:function(){this.frame=void 0}});e.exports=h},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){var h=/\D/g;return n.sort(function(r,a){return parseInt(r.replace(h,""),10)-parseInt(a.replace(h,""),10)}),n};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(185),h=i(0),r=i(102),a=i(9),l=i(132),o=i(22),u=i(2),v=i(6),d=i(186),c=i(322),p=new h({Extends:a,initialize:function(m){a.call(this),this.game=m,this.textureManager=null,this.globalTimeScale=1,this.anims=new r,this.mixes=new r,this.paused=!1,this.name="AnimationManager",m.events.once(o.BOOT,this.boot,this)},boot:function(){this.textureManager=this.game.textures,this.game.events.once(o.DESTROY,this.destroy,this)},addMix:function(g,m,x){var y=this.anims,T=this.mixes,C=typeof g=="string"?g:g.key,S=typeof m=="string"?m:m.key;if(y.has(C)&&y.has(S)){var E=T.get(C);E||(E={}),E[S]=x,T.set(C,E)}return this},removeMix:function(g,m){var x=this.mixes,y=typeof g=="string"?g:g.key,T=x.get(y);if(T)if(m){var C=typeof m=="string"?m:m.key;T.hasOwnProperty(C)&&delete T[C]}else m||x.delete(y);return this},getMix:function(g,m){var x=this.mixes,y=typeof g=="string"?g:g.key,T=typeof m=="string"?m:m.key,C=x.get(y);return C&&C.hasOwnProperty(T)?C[T]:0},add:function(g,m){return this.anims.has(g)?(console.warn("Animation key exists: "+g),this):(m.key=g,this.anims.set(g,m),this.emit(l.ADD_ANIMATION,g,m),this)},exists:function(g){return this.anims.has(g)},createFromAseprite:function(g,m){var x=[],y=this.game.cache.json.get(g);if(!y)return x;var T=this,C=v(y,"meta",null),S=v(y,"frames",null);if(C&&S){var E=v(C,"frameTags",[]);E.forEach(function(M){var O=[],L=u(M,"name",null),R=u(M,"from",0),F=u(M,"to",0),D=u(M,"direction","forward");if(!!L&&(!m||m&&m.indexOf(L)>-1)){for(var B=[],N=Number.MAX_SAFE_INTEGER,U=R;U<=F;U++){var X=U.toString(),K=S[X];if(K){var k=u(K,"duration",Number.MAX_SAFE_INTEGER);k<N&&(N=k),B.push({frame:X,duration:k})}}B.forEach(function(Y){O.push({key:g,frame:Y.frame,duration:N-Y.duration})});var b=N*O.length;D==="reverse"&&(O=O.reverse());var I={key:L,frames:O,duration:b,yoyo:D==="pingpong"},G=T.create(I);G&&x.push(G)}})}return x},create:function(g){var m=g.key,x=!1;return m&&(x=this.get(m),x||(x=new n(this,m,g),this.anims.set(m,x),this.emit(l.ADD_ANIMATION,m,x))),x},fromJSON:function(g,m){m===void 0&&(m=!1),m&&this.anims.clear(),typeof g=="string"&&(g=JSON.parse(g));var x=[];if(g.hasOwnProperty("anims")&&Array.isArray(g.anims)){for(var y=0;y<g.anims.length;y++)x.push(this.create(g.anims[y]));g.hasOwnProperty("globalTimeScale")&&(this.globalTimeScale=g.globalTimeScale)}else g.hasOwnProperty("key")&&g.type==="frame"&&x.push(this.create(g));return x},generateFrameNames:function(g,m){var x=v(m,"prefix",""),y=v(m,"start",0),T=v(m,"end",0),C=v(m,"suffix",""),S=v(m,"zeroPad",0),E=v(m,"outputArray",[]),M=v(m,"frames",!1),O=this.textureManager.get(g);if(!O)return E;var L;if(m)for(M||(M=c(y,T)),L=0;L<M.length;L++){var R=x+d(M[L],S,"0",1)+C;O.has(R)?E.push({key:g,frame:R}):console.warn("generateFrameNames: Frame missing: "+R+" from texture: "+g)}else for(M=O.getFrameNames(),L=0;L<M.length;L++)E.push({key:g,frame:M[L]});return E},generateFrameNumbers:function(g,m){var x=v(m,"start",0),y=v(m,"end",-1),T=v(m,"first",!1),C=v(m,"outputArray",[]),S=v(m,"frames",!1),E=this.textureManager.get(g);if(!E)return C;T&&E.has(T)&&C.push({key:g,frame:T}),S||(y===-1&&(y=E.frameTotal-2),S=c(x,y));for(var M=0;M<S.length;M++)E.has(S[M])?C.push({key:g,frame:S[M]}):console.warn("generateFrameNumbers: Frame "+M+" missing from texture: "+g);return C},get:function(g){return this.anims.get(g)},pauseAll:function(){return this.paused||(this.paused=!0,this.emit(l.PAUSE_ALL)),this},play:function(g,m){Array.isArray(m)||(m=[m]);for(var x=0;x<m.length;x++)m[x].anims.play(g);return this},staggerPlay:function(g,m,x,y){x===void 0&&(x=0),y===void 0&&(y=!0),Array.isArray(m)||(m=[m]);var T=m.length;y||T--;for(var C=0;C<m.length;C++){var S=x<0?Math.abs(x)*(T-C):x*C;m[C].anims.playAfterDelay(g,S)}return this},remove:function(g){var m=this.get(g);return m&&(this.emit(l.REMOVE_ANIMATION,g,m),this.anims.delete(g),this.removeMix(g)),m},resumeAll:function(){return this.paused&&(this.paused=!1,this.emit(l.RESUME_ALL)),this},toJSON:function(g){var m={anims:[],globalTimeScale:this.globalTimeScale};return g!==void 0&&g!==""?m.anims.push(this.anims.get(g).toJSON()):this.anims.each(function(x,y){m.anims.push(y.toJSON())}),m},destroy:function(){this.anims.clear(),this.mixes.clear(),this.textureManager=null,this.game=null}});e.exports=p},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r,a){var l=[],o,u=!1;if((r||a)&&(u=!0,r||(r=""),a||(a="")),h<n)for(o=n;o>=h;o--)u?l.push(r+o.toString()+a):l.push(o);else for(o=n;o<=h;o++)u?l.push(r+o.toString()+a):l.push(o);return l};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(102),r=i(9),a=i(324),l=new n({initialize:function(){this.entries=new h,this.events=new r},add:function(o,u){return this.entries.set(o,u),this.events.emit(a.ADD,this,o,u),this},has:function(o){return this.entries.has(o)},exists:function(o){return this.entries.has(o)},get:function(o){return this.entries.get(o)},remove:function(o){var u=this.get(o);return u&&(this.entries.delete(o),this.events.emit(a.REMOVE,this,o,u.data)),this},getKeys:function(){return this.entries.keys()},destroy:function(){this.entries.clear(),this.events.removeAllListeners(),this.entries=null,this.events=null}});e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ADD:i(736),REMOVE:i(737)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(323),h=i(0),r=i(22),a=new h({initialize:function(o){this.game=o,this.binary=new n,this.bitmapFont=new n,this.json=new n,this.physics=new n,this.shader=new n,this.audio=new n,this.video=new n,this.text=new n,this.html=new n,this.obj=new n,this.tilemap=new n,this.xml=new n,this.custom={},this.game.events.once(r.DESTROY,this.destroy,this)},addCustom:function(l){return this.custom.hasOwnProperty(l)||(this.custom[l]=new n),this.custom[l]},destroy:function(){for(var l=["binary","bitmapFont","json","physics","shader","audio","video","text","html","obj","tilemap","xml"],o=0;o<l.length;o++)this[l[o]].destroy(),this[l[o]]=null;for(var u in this.custom)this.custom[u].destroy();this.custom=null,this.game=null}});e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(133),h=i(190),r=i(18),a=i(0),l=i(11),o=i(333),u=i(37),v=i(135),d=i(10),c=i(3),p=new a({Extends:n,Mixins:[l.Flip,l.Tint,l.Pipeline],initialize:function(m,x,y,T){n.call(this,m,x,y,T),this.postPipelines=[],this.pipelineData={},this.inputEnabled=!0,this.fadeEffect=new o.Fade(this),this.flashEffect=new o.Flash(this),this.shakeEffect=new o.Shake(this),this.panEffect=new o.Pan(this),this.rotateToEffect=new o.RotateTo(this),this.zoomEffect=new o.Zoom(this),this.lerp=new c(1,1),this.followOffset=new c,this.deadzone=null,this._follow=null},setDeadzone:function(g,m){if(g===void 0)this.deadzone=null;else{if(this.deadzone?(this.deadzone.width=g,this.deadzone.height=m):this.deadzone=new d(0,0,g,m),this._follow){var x=this.width/2,y=this.height/2,T=this._follow.x-this.followOffset.x,C=this._follow.y-this.followOffset.y;this.midPoint.set(T,C),this.scrollX=T-x,this.scrollY=C-y}h(this.deadzone,this.midPoint.x,this.midPoint.y)}return this},fadeIn:function(g,m,x,y,T,C){return this.fadeEffect.start(!1,g,m,x,y,!0,T,C)},fadeOut:function(g,m,x,y,T,C){return this.fadeEffect.start(!0,g,m,x,y,!0,T,C)},fadeFrom:function(g,m,x,y,T,C,S){return this.fadeEffect.start(!1,g,m,x,y,T,C,S)},fade:function(g,m,x,y,T,C,S){return this.fadeEffect.start(!0,g,m,x,y,T,C,S)},flash:function(g,m,x,y,T,C,S){return this.flashEffect.start(g,m,x,y,T,C,S)},shake:function(g,m,x,y,T){return this.shakeEffect.start(g,m,x,y,T)},pan:function(g,m,x,y,T,C,S){return this.panEffect.start(g,m,x,y,T,C,S)},rotateTo:function(g,m,x,y,T,C,S){return this.rotateToEffect.start(g,m,x,y,T,C,S)},zoomTo:function(g,m,x,y,T,C){return this.zoomEffect.start(g,m,x,y,T,C)},preRender:function(){this.renderList.length=0;var g=this.width,m=this.height,x=g*.5,y=m*.5,T=this.zoom,C=this.matrix,S=g*this.originX,E=m*this.originY,M=this._follow,O=this.deadzone,L=this.scrollX,R=this.scrollY;O&&h(O,this.midPoint.x,this.midPoint.y);var F=!1;if(M&&!this.panEffect.isRunning){var D=M.x-this.followOffset.x,B=M.y-this.followOffset.y;O?(D<O.x?L=v(L,L-(O.x-D),this.lerp.x):D>O.right&&(L=v(L,L+(D-O.right),this.lerp.x)),B<O.y?R=v(R,R-(O.y-B),this.lerp.y):B>O.bottom&&(R=v(R,R+(B-O.bottom),this.lerp.y))):(L=v(L,D-S,this.lerp.x),R=v(R,B-E,this.lerp.y)),F=!0}this.useBounds&&(L=this.clampX(L),R=this.clampY(R)),this.roundPixels&&(S=Math.round(S),E=Math.round(E),L=Math.round(L),R=Math.round(R)),this.scrollX=L,this.scrollY=R;var N=L+x,U=R+y;this.midPoint.set(N,U);var X=g/T,K=m/T,k=N-X/2,b=U-K/2;this.roundPixels&&(k=Math.round(k),b=Math.round(b)),this.worldView.setTo(k,b,X,K),C.applyITRS(this.x+S,this.y+E,this.rotation,T,T),C.translate(-S,-E),this.shakeEffect.preRender(),F&&this.emit(u.FOLLOW_UPDATE,this,M)},setLerp:function(g,m){return g===void 0&&(g=1),m===void 0&&(m=g),this.lerp.set(g,m),this},setFollowOffset:function(g,m){return g===void 0&&(g=0),m===void 0&&(m=0),this.followOffset.set(g,m),this},startFollow:function(g,m,x,y,T,C){m===void 0&&(m=!1),x===void 0&&(x=1),y===void 0&&(y=x),T===void 0&&(T=0),C===void 0&&(C=T),this._follow=g,this.roundPixels=m,x=r(x,0,1),y=r(y,0,1),this.lerp.set(x,y),this.followOffset.set(T,C);var S=this.width/2,E=this.height/2,M=g.x-T,O=g.y-C;return this.midPoint.set(M,O),this.scrollX=M-S,this.scrollY=O-E,this.useBounds&&(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},stopFollow:function(){return this._follow=null,this},resetFX:function(){return this.rotateToEffect.reset(),this.panEffect.reset(),this.shakeEffect.reset(),this.flashEffect.reset(),this.fadeEffect.reset(),this},update:function(g,m){this.visible&&(this.rotateToEffect.update(g,m),this.panEffect.update(g,m),this.zoomEffect.update(g,m),this.shakeEffect.update(g,m),this.flashEffect.update(g,m),this.fadeEffect.update(g,m))},destroy:function(){this.resetFX(),n.prototype.destroy.call(this),this._follow=null,this.deadzone=null}});e.exports=p},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(38),h=function(r){var a=new n;r=r.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,function(d,c,p,g){return c+c+p+p+g+g});var l=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(r);if(l){var o=parseInt(l[1],16),u=parseInt(l[2],16),v=parseInt(l[3],16);a.setTo(o,u,v)}return a};e.exports=h},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r,a){return a<<24|n<<16|h<<8|r};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r,a){a===void 0&&(a={h:0,s:0,v:0}),n/=255,h/=255,r/=255;var l=Math.min(n,h,r),o=Math.max(n,h,r),u=o-l,v=0,d=o===0?0:u/o,c=o;return o!==l&&(o===n?v=(h-r)/u+(h<r?6:0):o===h?v=(r-n)/u+2:o===r&&(v=(n-h)/u+4),v/=6),a.hasOwnProperty("_h")?(a._h=v,a._s=d,a._v=c):(a.h=v,a.s=d,a.v=c),a};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n>16777215?{a:n>>>24,r:n>>16&255,g:n>>8&255,b:n&255}:{a:255,r:n>>16&255,g:n>>8&255,b:n&255}};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(38),h=function(r){return new n(r.r,r.g,r.b,r.a)};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(38),h=function(r){var a=new n,l=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(r.toLowerCase());if(l){var o=parseInt(l[1],10),u=parseInt(l[2],10),v=parseInt(l[3],10),d=l[4]!==void 0?parseFloat(l[4]):1;a.setTo(o,u,v,d*255)}return a};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Fade:i(761),Flash:i(762),Pan:i(763),Shake:i(796),RotateTo:i(797),Zoom:i(798)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={In:i(764),Out:i(765),InOut:i(766)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={In:i(767),Out:i(768),InOut:i(769)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={In:i(770),Out:i(771),InOut:i(772)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={In:i(773),Out:i(774),InOut:i(775)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={In:i(776),Out:i(777),InOut:i(778)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={In:i(779),Out:i(780),InOut:i(781)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports=i(782)},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={In:i(783),Out:i(784),InOut:i(785)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={In:i(786),Out:i(787),InOut:i(788)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={In:i(789),Out:i(790),InOut:i(791)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={In:i(792),Out:i(793),InOut:i(794)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports=i(795)},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(33),r=i(347),a=i(2),l=i(6),o=i(7),u=i(193),v=i(1),d=i(197),c=i(187),p=new n({initialize:function(m){m===void 0&&(m={});var x=["#ff0000","#ffff00","#00ff00","#00ffff","#000000"],y="#ffffff";this.width=l(m,"width",1024),this.height=l(m,"height",768),this.zoom=l(m,"zoom",1),this.parent=l(m,"parent",void 0),this.scaleMode=l(m,"scaleMode",0),this.expandParent=l(m,"expandParent",!0),this.autoRound=l(m,"autoRound",!1),this.autoCenter=l(m,"autoCenter",0),this.resizeInterval=l(m,"resizeInterval",500),this.fullscreenTarget=l(m,"fullscreenTarget",null),this.minWidth=l(m,"minWidth",0),this.maxWidth=l(m,"maxWidth",0),this.minHeight=l(m,"minHeight",0),this.maxHeight=l(m,"maxHeight",0);var T=l(m,"scale",null);T&&(this.width=l(T,"width",this.width),this.height=l(T,"height",this.height),this.zoom=l(T,"zoom",this.zoom),this.parent=l(T,"parent",this.parent),this.scaleMode=l(T,"mode",this.scaleMode),this.expandParent=l(T,"expandParent",this.expandParent),this.autoRound=l(T,"autoRound",this.autoRound),this.autoCenter=l(T,"autoCenter",this.autoCenter),this.resizeInterval=l(T,"resizeInterval",this.resizeInterval),this.fullscreenTarget=l(T,"fullscreenTarget",this.fullscreenTarget),this.minWidth=l(T,"min.width",this.minWidth),this.maxWidth=l(T,"max.width",this.maxWidth),this.minHeight=l(T,"min.height",this.minHeight),this.maxHeight=l(T,"max.height",this.maxHeight)),this.renderType=l(m,"type",h.AUTO),this.canvas=l(m,"canvas",null),this.context=l(m,"context",null),this.canvasStyle=l(m,"canvasStyle",null),this.customEnvironment=l(m,"customEnvironment",!1),this.sceneConfig=l(m,"scene",null),this.seed=l(m,"seed",[(Date.now()*Math.random()).toString()]),u.RND=new u.RandomDataGenerator(this.seed),this.gameTitle=l(m,"title",""),this.gameURL=l(m,"url","https://phaser.io"),this.gameVersion=l(m,"version",""),this.autoFocus=l(m,"autoFocus",!0),this.domCreateContainer=l(m,"dom.createContainer",!1),this.domBehindCanvas=l(m,"dom.behindCanvas",!1),this.domPointerEvents=l(m,"dom.pointerEvents","none"),this.inputKeyboard=l(m,"input.keyboard",!0),this.inputKeyboardEventTarget=l(m,"input.keyboard.target",window),this.inputKeyboardCapture=l(m,"input.keyboard.capture",[]),this.inputMouse=l(m,"input.mouse",!0),this.inputMouseEventTarget=l(m,"input.mouse.target",null),this.inputMousePreventDefaultDown=l(m,"input.mouse.preventDefaultDown",!0),this.inputMousePreventDefaultUp=l(m,"input.mouse.preventDefaultUp",!0),this.inputMousePreventDefaultMove=l(m,"input.mouse.preventDefaultMove",!0),this.inputMousePreventDefaultWheel=l(m,"input.mouse.preventDefaultWheel",!0),this.inputTouch=l(m,"input.touch",r.input.touch),this.inputTouchEventTarget=l(m,"input.touch.target",null),this.inputTouchCapture=l(m,"input.touch.capture",!0),this.inputActivePointers=l(m,"input.activePointers",1),this.inputSmoothFactor=l(m,"input.smoothFactor",0),this.inputWindowEvents=l(m,"input.windowEvents",!0),this.inputGamepad=l(m,"input.gamepad",!1),this.inputGamepadEventTarget=l(m,"input.gamepad.target",window),this.disableContextMenu=l(m,"disableContextMenu",!1),this.audio=l(m,"audio",{}),this.hideBanner=l(m,"banner",null)===!1,this.hidePhaser=l(m,"banner.hidePhaser",!1),this.bannerTextColor=l(m,"banner.text",y),this.bannerBackgroundColor=l(m,"banner.background",x),this.gameTitle===""&&this.hidePhaser&&(this.hideBanner=!0),this.fps=l(m,"fps",null);var C=l(m,"render",m);this.pipeline=l(C,"pipeline",null),this.antialias=l(C,"antialias",!0),this.antialiasGL=l(C,"antialiasGL",!0),this.mipmapFilter=l(C,"mipmapFilter","LINEAR"),this.desynchronized=l(C,"desynchronized",!1),this.roundPixels=l(C,"roundPixels",!1),this.pixelArt=l(C,"pixelArt",this.zoom!==1),this.pixelArt&&(this.antialias=!1,this.antialiasGL=!1,this.roundPixels=!0),this.transparent=l(C,"transparent",!1),this.clearBeforeRender=l(C,"clearBeforeRender",!0),this.preserveDrawingBuffer=l(C,"preserveDrawingBuffer",!1),this.premultipliedAlpha=l(C,"premultipliedAlpha",!0),this.failIfMajorPerformanceCaveat=l(C,"failIfMajorPerformanceCaveat",!1),this.powerPreference=l(C,"powerPreference","default"),this.batchSize=l(C,"batchSize",4096),this.maxTextures=l(C,"maxTextures",-1),this.maxLights=l(C,"maxLights",10);var S=l(m,"backgroundColor",0);this.backgroundColor=c(S),this.transparent&&(this.backgroundColor=c(0),this.backgroundColor.alpha=0),this.preBoot=l(m,"callbacks.preBoot",v),this.postBoot=l(m,"callbacks.postBoot",v),this.physics=l(m,"physics",{}),this.defaultPhysicsSystem=l(this.physics,"default",!1),this.loaderBaseURL=l(m,"loader.baseURL",""),this.loaderPath=l(m,"loader.path","");var E=r.os.android?6:32;this.loaderMaxParallelDownloads=l(m,"loader.maxParallelDownloads",E),this.loaderCrossOrigin=l(m,"loader.crossOrigin",void 0),this.loaderResponseType=l(m,"loader.responseType",""),this.loaderAsync=l(m,"loader.async",!0),this.loaderUser=l(m,"loader.user",""),this.loaderPassword=l(m,"loader.password",""),this.loaderTimeout=l(m,"loader.timeout",0),this.loaderWithCredentials=l(m,"loader.withCredentials",!1),this.installGlobalPlugins=[],this.installScenePlugins=[];var M=l(m,"plugins",null),O=d.DefaultScene;M&&(Array.isArray(M)?this.defaultPlugins=M:o(M)&&(this.installGlobalPlugins=a(M,"global",[]),this.installScenePlugins=a(M,"scene",[]),Array.isArray(M.default)?O=M.default:Array.isArray(M.defaultMerge)&&(O=O.concat(M.defaultMerge)))),this.defaultPlugins=O;var L="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAg";this.defaultImage=l(m,"images.default",L+"AQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg=="),this.missingImage=l(m,"images.missing",L+"CAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg=="),this.whiteImage=l(m,"images.white","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAIAAAAmkwkpAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABdJREFUeNpi/P//PwMMMDEgAdwcgAADAJZuAwXJYZOzAAAAAElFTkSuQmCC"),window&&(window.FORCE_WEBGL?this.renderType=h.WEBGL:window.FORCE_CANVAS&&(this.renderType=h.CANVAS))}});e.exports=p},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={os:i(105),browser:i(136),features:i(191),input:i(808),audio:i(809),video:i(810),fullscreen:i(811),canvasFeatures:i(348)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(31),h={supportInverseAlpha:!1,supportNewBlendModes:!1};function r(){var o="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",u="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",v=new Image;return v.onload=function(){var d=new Image;d.onload=function(){var c=n.create(d,6,1),p=c.getContext("2d");if(p.globalCompositeOperation="multiply",p.drawImage(v,0,0),p.drawImage(d,2,0),!p.getImageData(2,0,1,1))return!1;var g=p.getImageData(2,0,1,1).data;n.remove(d),h.supportNewBlendModes=g[0]===255&&g[1]===0&&g[2]===0},d.src=o+"/wCKxvRF"+u},v.src=o+"AP804Oa6"+u,!1}function a(){var o=n.create(this,2,1),u=o.getContext("2d");u.fillStyle="rgba(10, 20, 30, 0.5)",u.fillRect(0,0,1,1);var v=u.getImageData(0,0,1,1);if(v===null)return!1;u.putImageData(v,1,0);var d=u.getImageData(1,0,1,1);return d.data[0]===v.data[0]&&d.data[1]===v.data[1]&&d.data[2]===v.data[2]&&d.data[3]===v.data[3]}function l(){return typeof importScripts!="function"&&document!==void 0&&(h.supportNewBlendModes=r(),h.supportInverseAlpha=a()),h}e.exports=l()},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r,a){return Math.atan2(a-h,r-n)};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){return Math.atan2(h.y-n.y,h.x-n.x)};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n=n%(2*Math.PI),n>=0?n:n+2*Math.PI};e.exports=i},function(e,f){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){var r=n.x-h.x,a=n.y-h.y;return Math.sqrt(r*r+a*a)};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r,a){var l=n-r,o=h-a;return l*l+o*o};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r){return r===void 0&&(r=1e-4),n>h-r};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r){return r===void 0&&(r=1e-4),n<h+r};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(357),h=function(r,a){return n(r)/n(a)/n(r-a)};e.exports=h},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){if(n===0)return 1;for(var h=n;--n;)h*=n;return h};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function i(l,o){var u=1-l;return u*u*u*o}function n(l,o){var u=1-l;return 3*u*u*l*o}function h(l,o){return 3*(1-l)*l*l*o}function r(l,o){return l*l*l*o}var a=function(l,o,u,v,d){return i(l,o)+n(l,u)+h(l,v)+r(l,d)};e.exports=a},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function i(a,l){var o=1-a;return o*o*l}function n(a,l){return 2*(1-a)*a*l}function h(a,l){return a*a*l}var r=function(a,l,o,u){return i(a,l)+n(a,o)+h(a,u)};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(184),h=function(r,a,l){return a+(l-a)*n(r,0,1)};e.exports=h},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){var h=Math.log(n)/.6931471805599453;return 1<<Math.ceil(h)};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){var r=n.x,a=n.y;return n.x=r*Math.cos(h)-a*Math.sin(h),n.y=r*Math.sin(h)+a*Math.cos(h),n};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n>0?Math.ceil(n):Math.floor(n)};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=new n({initialize:function(a){this.val=new Float32Array(9),a?this.copy(a):this.identity()},clone:function(){return new h(this)},set:function(r){return this.copy(r)},copy:function(r){var a=this.val,l=r.val;return a[0]=l[0],a[1]=l[1],a[2]=l[2],a[3]=l[3],a[4]=l[4],a[5]=l[5],a[6]=l[6],a[7]=l[7],a[8]=l[8],this},fromMat4:function(r){var a=r.val,l=this.val;return l[0]=a[0],l[1]=a[1],l[2]=a[2],l[3]=a[4],l[4]=a[5],l[5]=a[6],l[6]=a[8],l[7]=a[9],l[8]=a[10],this},fromArray:function(r){var a=this.val;return a[0]=r[0],a[1]=r[1],a[2]=r[2],a[3]=r[3],a[4]=r[4],a[5]=r[5],a[6]=r[6],a[7]=r[7],a[8]=r[8],this},identity:function(){var r=this.val;return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=1,r[5]=0,r[6]=0,r[7]=0,r[8]=1,this},transpose:function(){var r=this.val,a=r[1],l=r[2],o=r[5];return r[1]=r[3],r[2]=r[6],r[3]=a,r[5]=r[7],r[6]=l,r[7]=o,this},invert:function(){var r=this.val,a=r[0],l=r[1],o=r[2],u=r[3],v=r[4],d=r[5],c=r[6],p=r[7],g=r[8],m=g*v-d*p,x=-g*u+d*c,y=p*u-v*c,T=a*m+l*x+o*y;return T?(T=1/T,r[0]=m*T,r[1]=(-g*l+o*p)*T,r[2]=(d*l-o*v)*T,r[3]=x*T,r[4]=(g*a-o*c)*T,r[5]=(-d*a+o*u)*T,r[6]=y*T,r[7]=(-p*a+l*c)*T,r[8]=(v*a-l*u)*T,this):null},adjoint:function(){var r=this.val,a=r[0],l=r[1],o=r[2],u=r[3],v=r[4],d=r[5],c=r[6],p=r[7],g=r[8];return r[0]=v*g-d*p,r[1]=o*p-l*g,r[2]=l*d-o*v,r[3]=d*c-u*g,r[4]=a*g-o*c,r[5]=o*u-a*d,r[6]=u*p-v*c,r[7]=l*c-a*p,r[8]=a*v-l*u,this},determinant:function(){var r=this.val,a=r[0],l=r[1],o=r[2],u=r[3],v=r[4],d=r[5],c=r[6],p=r[7],g=r[8];return a*(g*v-d*p)+l*(-g*u+d*c)+o*(p*u-v*c)},multiply:function(r){var a=this.val,l=a[0],o=a[1],u=a[2],v=a[3],d=a[4],c=a[5],p=a[6],g=a[7],m=a[8],x=r.val,y=x[0],T=x[1],C=x[2],S=x[3],E=x[4],M=x[5],O=x[6],L=x[7],R=x[8];return a[0]=y*l+T*v+C*p,a[1]=y*o+T*d+C*g,a[2]=y*u+T*c+C*m,a[3]=S*l+E*v+M*p,a[4]=S*o+E*d+M*g,a[5]=S*u+E*c+M*m,a[6]=O*l+L*v+R*p,a[7]=O*o+L*d+R*g,a[8]=O*u+L*c+R*m,this},translate:function(r){var a=this.val,l=r.x,o=r.y;return a[6]=l*a[0]+o*a[3]+a[6],a[7]=l*a[1]+o*a[4]+a[7],a[8]=l*a[2]+o*a[5]+a[8],this},rotate:function(r){var a=this.val,l=a[0],o=a[1],u=a[2],v=a[3],d=a[4],c=a[5],p=Math.sin(r),g=Math.cos(r);return a[0]=g*l+p*v,a[1]=g*o+p*d,a[2]=g*u+p*c,a[3]=g*v-p*l,a[4]=g*d-p*o,a[5]=g*c-p*u,this},scale:function(r){var a=this.val,l=r.x,o=r.y;return a[0]=l*a[0],a[1]=l*a[1],a[2]=l*a[2],a[3]=o*a[3],a[4]=o*a[4],a[5]=o*a[5],this},fromQuat:function(r){var a=r.x,l=r.y,o=r.z,u=r.w,v=a+a,d=l+l,c=o+o,p=a*v,g=a*d,m=a*c,x=l*d,y=l*c,T=o*c,C=u*v,S=u*d,E=u*c,M=this.val;return M[0]=1-(x+T),M[3]=g+E,M[6]=m-S,M[1]=g-E,M[4]=1-(p+T),M[7]=y+C,M[2]=m+S,M[5]=y-C,M[8]=1-(p+x),this},normalFromMat4:function(r){var a=r.val,l=this.val,o=a[0],u=a[1],v=a[2],d=a[3],c=a[4],p=a[5],g=a[6],m=a[7],x=a[8],y=a[9],T=a[10],C=a[11],S=a[12],E=a[13],M=a[14],O=a[15],L=o*p-u*c,R=o*g-v*c,F=o*m-d*c,D=u*g-v*p,B=u*m-d*p,N=v*m-d*g,U=x*E-y*S,X=x*M-T*S,K=x*O-C*S,k=y*M-T*E,b=y*O-C*E,I=T*O-C*M,G=L*I-R*b+F*k+D*K-B*X+N*U;return G?(G=1/G,l[0]=(p*I-g*b+m*k)*G,l[1]=(g*K-c*I-m*X)*G,l[2]=(c*b-p*K+m*U)*G,l[3]=(v*b-u*I-d*k)*G,l[4]=(o*I-v*K+d*X)*G,l[5]=(u*K-o*b-d*U)*G,l[6]=(E*N-M*B+O*D)*G,l[7]=(M*F-S*N-O*R)*G,l[8]=(S*B-E*F+O*L)*G,this):null}});e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(364),r=i(1),a=i(39),l=1e-6,o=new Int8Array([1,2,0]),u=new Float32Array([0,0,0]),v=new a(1,0,0),d=new a(0,1,0),c=new a,p=new h,g=new n({initialize:function(x,y,T,C){this.onChangeCallback=r,this.set(x,y,T,C)},x:{get:function(){return this._x},set:function(m){this._x=m,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(m){this._y=m,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(m){this._z=m,this.onChangeCallback(this)}},w:{get:function(){return this._w},set:function(m){this._w=m,this.onChangeCallback(this)}},copy:function(m){return this.set(m)},set:function(m,x,y,T,C){return C===void 0&&(C=!0),typeof m=="object"?(this._x=m.x||0,this._y=m.y||0,this._z=m.z||0,this._w=m.w||0):(this._x=m||0,this._y=x||0,this._z=y||0,this._w=T||0),C&&this.onChangeCallback(this),this},add:function(m){return this._x+=m.x,this._y+=m.y,this._z+=m.z,this._w+=m.w,this.onChangeCallback(this),this},subtract:function(m){return this._x-=m.x,this._y-=m.y,this._z-=m.z,this._w-=m.w,this.onChangeCallback(this),this},scale:function(m){return this._x*=m,this._y*=m,this._z*=m,this._w*=m,this.onChangeCallback(this),this},length:function(){var m=this.x,x=this.y,y=this.z,T=this.w;return Math.sqrt(m*m+x*x+y*y+T*T)},lengthSq:function(){var m=this.x,x=this.y,y=this.z,T=this.w;return m*m+x*x+y*y+T*T},normalize:function(){var m=this.x,x=this.y,y=this.z,T=this.w,C=m*m+x*x+y*y+T*T;return C>0&&(C=1/Math.sqrt(C),this._x=m*C,this._y=x*C,this._z=y*C,this._w=T*C),this.onChangeCallback(this),this},dot:function(m){return this.x*m.x+this.y*m.y+this.z*m.z+this.w*m.w},lerp:function(m,x){x===void 0&&(x=0);var y=this.x,T=this.y,C=this.z,S=this.w;return this.set(y+x*(m.x-y),T+x*(m.y-T),C+x*(m.z-C),S+x*(m.w-S))},rotationTo:function(m,x){var y=m.x*x.x+m.y*x.y+m.z*x.z;return y<-.999999?(c.copy(v).cross(m).length()<l&&c.copy(d).cross(m),c.normalize(),this.setAxisAngle(c,Math.PI)):y>.999999?this.set(0,0,0,1):(c.copy(m).cross(x),this._x=c.x,this._y=c.y,this._z=c.z,this._w=1+y,this.normalize())},setAxes:function(m,x,y){var T=p.val;return T[0]=x.x,T[3]=x.y,T[6]=x.z,T[1]=y.x,T[4]=y.y,T[7]=y.z,T[2]=-m.x,T[5]=-m.y,T[8]=-m.z,this.fromMat3(p).normalize()},identity:function(){return this.set(0,0,0,1)},setAxisAngle:function(m,x){x=x*.5;var y=Math.sin(x);return this.set(y*m.x,y*m.y,y*m.z,Math.cos(x))},multiply:function(m){var x=this.x,y=this.y,T=this.z,C=this.w,S=m.x,E=m.y,M=m.z,O=m.w;return this.set(x*O+C*S+y*M-T*E,y*O+C*E+T*S-x*M,T*O+C*M+x*E-y*S,C*O-x*S-y*E-T*M)},slerp:function(m,x){var y=this.x,T=this.y,C=this.z,S=this.w,E=m.x,M=m.y,O=m.z,L=m.w,R=y*E+T*M+C*O+S*L;R<0&&(R=-R,E=-E,M=-M,O=-O,L=-L);var F=1-x,D=x;if(1-R>l){var B=Math.acos(R),N=Math.sin(B);F=Math.sin((1-x)*B)/N,D=Math.sin(x*B)/N}return this.set(F*y+D*E,F*T+D*M,F*C+D*O,F*S+D*L)},invert:function(){var m=this.x,x=this.y,y=this.z,T=this.w,C=m*m+x*x+y*y+T*T,S=C?1/C:0;return this.set(-m*S,-x*S,-y*S,T*S)},conjugate:function(){return this._x=-this.x,this._y=-this.y,this._z=-this.z,this.onChangeCallback(this),this},rotateX:function(m){m*=.5;var x=this.x,y=this.y,T=this.z,C=this.w,S=Math.sin(m),E=Math.cos(m);return this.set(x*E+C*S,y*E+T*S,T*E-y*S,C*E-x*S)},rotateY:function(m){m*=.5;var x=this.x,y=this.y,T=this.z,C=this.w,S=Math.sin(m),E=Math.cos(m);return this.set(x*E-T*S,y*E+C*S,T*E+x*S,C*E-y*S)},rotateZ:function(m){m*=.5;var x=this.x,y=this.y,T=this.z,C=this.w,S=Math.sin(m),E=Math.cos(m);return this.set(x*E+y*S,y*E-x*S,T*E+C*S,C*E-T*S)},calculateW:function(){var m=this.x,x=this.y,y=this.z;return this.w=-Math.sqrt(1-m*m-x*x-y*y),this},setFromEuler:function(m,x){var y=m.x/2,T=m.y/2,C=m.z/2,S=Math.cos(y),E=Math.cos(T),M=Math.cos(C),O=Math.sin(y),L=Math.sin(T),R=Math.sin(C);switch(m.order){case"XYZ":{this.set(O*E*M+S*L*R,S*L*M-O*E*R,S*E*R+O*L*M,S*E*M-O*L*R,x);break}case"YXZ":{this.set(O*E*M+S*L*R,S*L*M-O*E*R,S*E*R-O*L*M,S*E*M+O*L*R,x);break}case"ZXY":{this.set(O*E*M-S*L*R,S*L*M+O*E*R,S*E*R+O*L*M,S*E*M-O*L*R,x);break}case"ZYX":{this.set(O*E*M-S*L*R,S*L*M+O*E*R,S*E*R-O*L*M,S*E*M+O*L*R,x);break}case"YZX":{this.set(O*E*M+S*L*R,S*L*M+O*E*R,S*E*R-O*L*M,S*E*M-O*L*R,x);break}case"XZY":{this.set(O*E*M-S*L*R,S*L*M-O*E*R,S*E*R+O*L*M,S*E*M+O*L*R,x);break}}return this},setFromRotationMatrix:function(m){var x=m.val,y=x[0],T=x[4],C=x[8],S=x[1],E=x[5],M=x[9],O=x[2],L=x[6],R=x[10],F=y+E+R,D;return F>0?(D=.5/Math.sqrt(F+1),this.set((L-M)*D,(C-O)*D,(S-T)*D,.25/D)):y>E&&y>R?(D=2*Math.sqrt(1+y-E-R),this.set(.25*D,(T+S)/D,(C+O)/D,(L-M)/D)):E>R?(D=2*Math.sqrt(1+E-y-R),this.set((T+S)/D,.25*D,(M+L)/D,(C-O)/D)):(D=2*Math.sqrt(1+R-y-E),this.set((C+O)/D,(M+L)/D,.25*D,(S-T)/D)),this},fromMat3:function(m){var x=m.val,y=x[0]+x[4]+x[8],T;if(y>0)T=Math.sqrt(y+1),this.w=.5*T,T=.5/T,this._x=(x[7]-x[5])*T,this._y=(x[2]-x[6])*T,this._z=(x[3]-x[1])*T;else{var C=0;x[4]>x[0]&&(C=1),x[8]>x[C*3+C]&&(C=2);var S=o[C],E=o[S];T=Math.sqrt(x[C*3+C]-x[S*3+S]-x[E*3+E]+1),u[C]=.5*T,T=.5/T,u[S]=(x[S*3+C]+x[C*3+S])*T,u[E]=(x[E*3+C]+x[C*3+E])*T,this._x=u[0],this._y=u[1],this._z=u[2],this._w=(x[E*3+S]-x[S*3+E])*T}return this.onChangeCallback(this),this}});e.exports=g},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(367),h=i(31),r=i(33),a=i(191),l=function(o){var u=o.config;if((u.customEnvironment||u.canvas)&&u.renderType===r.AUTO)throw new Error("Must set explicit renderType in custom environment");if(!u.customEnvironment&&!u.canvas&&u.renderType!==r.HEADLESS)if(u.renderType===r.CANVAS||u.renderType!==r.CANVAS&&!a.webGL)if(a.canvas)u.renderType=r.CANVAS;else throw new Error("Cannot create Canvas or WebGL context, aborting.");else u.renderType=r.WEBGL;u.antialias||h.disableSmoothing();var v=o.scale.baseSize,d=v.width,c=v.height;if(u.canvas?(o.canvas=u.canvas,o.canvas.width=d,o.canvas.height=c):o.canvas=h.create(o,d,c,u.renderType),u.canvasStyle&&(o.canvas.style=u.canvasStyle),u.antialias||n.setCrisp(o.canvas),u.renderType!==r.HEADLESS){var p,g;p=i(368),g=i(371),u.renderType===r.WEBGL?o.renderer=new g(o):(o.renderer=new p(o),o.context=o.renderer.gameContext)}};e.exports=l},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setCrisp:function(n){var h=["optimizeSpeed","-moz-crisp-edges","-o-crisp-edges","-webkit-optimize-contrast","optimize-contrast","crisp-edges","pixelated"];return h.forEach(function(r){n.style["image-rendering"]=r}),n.style.msInterpolationMode="nearest-neighbor",n},setBicubic:function(n){return n.style["image-rendering"]="auto",n.style.msInterpolationMode="bicubic",n}};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(37),h=i(369),r=i(0),a=i(33),l=i(9),o=i(91),u=i(370),v=i(104),d=i(106),c=i(25),p=new r({Extends:l,initialize:function(m){l.call(this);var x=m.config;this.config={clearBeforeRender:x.clearBeforeRender,backgroundColor:x.backgroundColor,antialias:x.antialias,roundPixels:x.roundPixels},this.game=m,this.type=a.CANVAS,this.drawCount=0,this.width=0,this.height=0,this.gameCanvas=m.canvas;var y={alpha:m.config.transparent,desynchronized:m.config.desynchronized};this.gameContext=x.context?x.context:this.gameCanvas.getContext("2d",y),this.currentContext=this.gameContext,this.antialias=m.config.antialias,this.blendModes=u(),this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92},this._tempMatrix1=new c,this._tempMatrix2=new c,this._tempMatrix3=new c,this.isBooted=!1,this.init()},init:function(){this.game.textures.once(d.READY,this.boot,this)},boot:function(){var g=this.game,m=g.scale.baseSize;this.width=m.width,this.height=m.height,this.isBooted=!0,g.scale.on(v.RESIZE,this.onResize,this),this.resize(m.width,m.height)},onResize:function(g,m){(m.width!==this.width||m.height!==this.height)&&this.resize(m.width,m.height)},resize:function(g,m){this.width=g,this.height=m,this.emit(o.RESIZE,g,m)},resetTransform:function(){this.currentContext.setTransform(1,0,0,1,0,0)},setBlendMode:function(g){return this.currentContext.globalCompositeOperation=g,this},setContext:function(g){return this.currentContext=g||this.gameContext,this},setAlpha:function(g){return this.currentContext.globalAlpha=g,this},preRender:function(){var g=this.gameContext,m=this.config,x=this.width,y=this.height;g.globalAlpha=1,g.globalCompositeOperation="source-over",g.setTransform(1,0,0,1,0,0),m.clearBeforeRender&&(g.clearRect(0,0,x,y),m.transparent||(g.fillStyle=m.backgroundColor.rgba,g.fillRect(0,0,x,y))),g.save(),this.drawCount=0,this.emit(o.PRE_RENDER)},render:function(g,m,x){var y=m.length;this.emit(o.RENDER,g,x);var T=x.x,C=x.y,S=x.width,E=x.height,M=x.renderToTexture?x.context:g.sys.context;M.save(),this.game.scene.customViewports&&(M.beginPath(),M.rect(T,C,S,E),M.clip()),this.currentContext=M;var O=x.mask;O&&O.preRenderCanvas(this,null,x._maskCamera),x.transparent||(M.fillStyle=x.backgroundColor.rgba,M.fillRect(T,C,S,E)),M.globalAlpha=x.alpha,M.globalCompositeOperation="source-over",this.drawCount+=y,x.renderToTexture&&x.emit(n.PRE_RENDER,x),x.matrix.copyToContext(M);for(var L=0;L<y;L++){var R=m[L];R.mask&&R.mask.preRenderCanvas(this,R,x),R.renderCanvas(this,R,x),R.mask&&R.mask.postRenderCanvas(this,R,x)}M.setTransform(1,0,0,1,0,0),M.globalCompositeOperation="source-over",M.globalAlpha=1,x.flashEffect.postRenderCanvas(M),x.fadeEffect.postRenderCanvas(M),x.dirty=!1,O&&O.postRenderCanvas(this),M.restore(),x.renderToTexture&&(x.emit(n.POST_RENDER,x),x.renderToGame&&g.sys.context.drawImage(x.canvas,T,C))},postRender:function(){var g=this.gameContext;g.restore(),this.emit(o.POST_RENDER);var m=this.snapshotState;m.callback&&(h(this.gameCanvas,m),m.callback=null)},snapshotCanvas:function(g,m,x,y,T,C,S,E,M){x===void 0&&(x=!1),this.snapshotArea(y,T,C,S,m,E,M);var O=this.snapshotState;return O.getPixel=x,h(this.canvas,O),O.callback=null,this},snapshot:function(g,m,x){return this.snapshotArea(0,0,this.gameCanvas.width,this.gameCanvas.height,g,m,x)},snapshotArea:function(g,m,x,y,T,C,S){var E=this.snapshotState;return E.callback=T,E.type=C,E.encoder=S,E.getPixel=!1,E.x=g,E.y=m,E.width=Math.min(x,this.gameCanvas.width),E.height=Math.min(y,this.gameCanvas.height),this},snapshotPixel:function(g,m,x){return this.snapshotArea(g,m,1,1,x),this.snapshotState.getPixel=!0,this},batchSprite:function(g,m,x,y){var T=x.alpha*g.alpha;if(T!==0){var C=this.currentContext,S=this._tempMatrix1,E=this._tempMatrix2,M=m.canvasData,O=M.x,L=M.y,R=m.cutWidth,F=m.cutHeight,D=m.customPivot,B=m.source.resolution,N=g.displayOriginX,U=g.displayOriginY,X=-N+m.x,K=-U+m.y;if(g.isCropped){var k=g._crop;(k.flipX!==g.flipX||k.flipY!==g.flipY)&&m.updateCropUVs(k,g.flipX,g.flipY),R=k.cw,F=k.ch,O=k.cx,L=k.cy,X=-N+k.x,K=-U+k.y,g.flipX&&(X>=0?X=-(X+R):X<0&&(X=Math.abs(X)-R)),g.flipY&&(K>=0?K=-(K+F):K<0&&(K=Math.abs(K)-F))}var b=1,I=1;g.flipX&&(D||(X+=-m.realWidth+N*2),b=-1),g.flipY&&(D||(K+=-m.realHeight+U*2),I=-1),E.applyITRS(g.x,g.y,g.rotation,g.scaleX*b,g.scaleY*I),S.copyFrom(x.matrix),y?(S.multiplyWithOffset(y,-x.scrollX*g.scrollFactorX,-x.scrollY*g.scrollFactorY),E.e=g.x,E.f=g.y):(E.e-=x.scrollX*g.scrollFactorX,E.f-=x.scrollY*g.scrollFactorY),S.multiply(E),C.save(),S.setToContext(C),C.globalCompositeOperation=this.blendModes[g.blendMode],C.globalAlpha=T,C.imageSmoothingEnabled=!(!this.antialias||m.source.scaleMode),g.mask&&g.mask.preRenderCanvas(this,g,x),C.drawImage(m.source.image,O,L,R,F,X,K,R/B,F/B),g.mask&&g.mask.postRenderCanvas(this,g,x),C.restore()}},destroy:function(){this.removeAllListeners(),this.game=null,this.gameCanvas=null,this.gameContext=null}});e.exports=p},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(31),h=i(38),r=i(2),a=function(l,o){var u=r(o,"callback"),v=r(o,"type","image/png"),d=r(o,"encoder",.92),c=Math.abs(Math.round(r(o,"x",0))),p=Math.abs(Math.round(r(o,"y",0))),g=r(o,"width",l.width),m=r(o,"height",l.height),x=r(o,"getPixel",!1);if(x){var y=l.getContext("2d"),T=y.getImageData(c,p,1,1),C=T.data;u.call(null,new h(C[0],C[1],C[2],C[3]/255))}else if(c!==0||p!==0||g!==l.width||m!==l.height){var S=n.createWebGL(this,g,m),E=S.getContext("2d");E.drawImage(l,c,p,g,m,0,0,g,m);var M=new Image;M.onerror=function(){u.call(null),n.remove(S)},M.onload=function(){u.call(null,M),n.remove(S)},M.src=S.toDataURL(v,d)}else{var O=new Image;O.onerror=function(){u.call(null)},O.onload=function(){u.call(null,O)},O.src=l.toDataURL(v,d)}};e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(35),h=i(348),r=function(){var a=[],l=h.supportNewBlendModes,o="source-over";return a[n.NORMAL]=o,a[n.ADD]="lighter",a[n.MULTIPLY]=l?"multiply":o,a[n.SCREEN]=l?"screen":o,a[n.OVERLAY]=l?"overlay":o,a[n.DARKEN]=l?"darken":o,a[n.LIGHTEN]=l?"lighten":o,a[n.COLOR_DODGE]=l?"color-dodge":o,a[n.COLOR_BURN]=l?"color-burn":o,a[n.HARD_LIGHT]=l?"hard-light":o,a[n.SOFT_LIGHT]=l?"soft-light":o,a[n.DIFFERENCE]=l?"difference":o,a[n.EXCLUSION]=l?"exclusion":o,a[n.HUE]=l?"hue":o,a[n.SATURATION]=l?"saturation":o,a[n.COLOR]=l?"color":o,a[n.LUMINOSITY]=l?"luminosity":o,a[n.ERASE]="destination-out",a[n.SOURCE_IN]="source-in",a[n.SOURCE_OUT]="source-out",a[n.SOURCE_ATOP]="source-atop",a[n.DESTINATION_OVER]="destination-over",a[n.DESTINATION_IN]="destination-in",a[n.DESTINATION_OUT]="destination-out",a[n.DESTINATION_ATOP]="destination-atop",a[n.LIGHTER]="lighter",a[n.COPY]="copy",a[n.XOR]="xor",a};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(93),h=i(37),r=i(0),a=i(33),l=i(9),o=i(91),u=i(22),v=i(138),d=i(69),c=i(1),p=i(372),g=i(141),m=i(104),x=i(106),y=i(12),T=i(383),C=new r({Extends:l,initialize:function(E){l.call(this);var M=E.config,O={alpha:M.transparent,desynchronized:M.desynchronized,depth:!1,antialias:M.antialiasGL,premultipliedAlpha:M.premultipliedAlpha,stencil:!0,failIfMajorPerformanceCaveat:M.failIfMajorPerformanceCaveat,powerPreference:M.powerPreference,preserveDrawingBuffer:M.preserveDrawingBuffer};this.config={clearBeforeRender:M.clearBeforeRender,antialias:M.antialias,backgroundColor:M.backgroundColor,contextCreation:O,roundPixels:M.roundPixels,maxTextures:M.maxTextures,maxTextureSize:M.maxTextureSize,batchSize:M.batchSize,maxLights:M.maxLights,mipmapFilter:M.mipmapFilter},this.game=E,this.type=a.WEBGL,this.pipelines=null,this.width=0,this.height=0,this.canvas=E.canvas,this.blendModes=[],this.contextLost=!1,this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92,isFramebuffer:!1,bufferWidth:0,bufferHeight:0},this.currentActiveTexture=0,this.startActiveTexture=0,this.maxTextures=0,this.textureIndexes,this.tempTextures,this.textureZero,this.normalTexture,this.currentFramebuffer=null,this.fboStack=[],this.currentProgram=null,this.currentBlendMode=1/0,this.currentScissorEnabled=!1,this.currentScissor=null,this.scissorStack=[],this.contextLostHandler=c,this.contextRestoredHandler=c,this.gl=null,this.supportedExtensions=null,this.instancedArraysExtension=null,this.vaoExtension=null,this.extensions={},this.glFormats=[],this.compression={ETC1:!1,PVRTC:!1,S3TC:!1},this.drawingBufferHeight=0,this.blankTexture=null,this.whiteTexture=null,this.maskCount=0,this.maskStack=[],this.currentMask={mask:null,camera:null},this.currentCameraMask={mask:null,camera:null},this.glFuncMap=null,this.currentType="",this.newType=!1,this.nextTypeMatch=!1,this.finalType=!1,this.mipmapFilter=null,this.textureFlush=0,this.isTextureClean=!1,this.defaultScissor=[0,0,0,0],this.isBooted=!1,this.renderTarget=null,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.init(this.config)},init:function(S){var E,M=this.game,O=this.canvas,L=S.backgroundColor;if(M.config.context?E=M.config.context:E=O.getContext("webgl",S.contextCreation)||O.getContext("experimental-webgl",S.contextCreation),!E||E.isContextLost())throw this.contextLost=!0,new Error("WebGL unsupported");this.gl=E;var R=this;this.contextLostHandler=function(G){R.contextLost=!0,R.game.events.emit(u.CONTEXT_LOST,R),G.preventDefault()},this.contextRestoredHandler=function(){R.contextLost=!1,R.init(R.config),R.game.events.emit(u.CONTEXT_RESTORED,R)},O.addEventListener("webglcontextlost",this.contextLostHandler,!1),O.addEventListener("webglcontextrestored",this.contextRestoredHandler,!1),M.context=E;for(var F=0;F<=27;F++)this.blendModes.push({func:[E.ONE,E.ONE_MINUS_SRC_ALPHA],equation:E.FUNC_ADD});this.blendModes[1].func=[E.ONE,E.DST_ALPHA],this.blendModes[2].func=[E.DST_COLOR,E.ONE_MINUS_SRC_ALPHA],this.blendModes[3].func=[E.ONE,E.ONE_MINUS_SRC_COLOR],this.blendModes[17]={func:[E.ZERO,E.ONE_MINUS_SRC_ALPHA],equation:E.FUNC_REVERSE_SUBTRACT},this.glFormats[0]=E.BYTE,this.glFormats[1]=E.SHORT,this.glFormats[2]=E.UNSIGNED_BYTE,this.glFormats[3]=E.UNSIGNED_SHORT,this.glFormats[4]=E.FLOAT,this.glFuncMap={mat2:{func:E.uniformMatrix2fv,length:1,matrix:!0},mat3:{func:E.uniformMatrix3fv,length:1,matrix:!0},mat4:{func:E.uniformMatrix4fv,length:1,matrix:!0},"1f":{func:E.uniform1f,length:1},"1fv":{func:E.uniform1fv,length:1},"1i":{func:E.uniform1i,length:1},"1iv":{func:E.uniform1iv,length:1},"2f":{func:E.uniform2f,length:2},"2fv":{func:E.uniform2fv,length:1},"2i":{func:E.uniform2i,length:2},"2iv":{func:E.uniform2iv,length:1},"3f":{func:E.uniform3f,length:3},"3fv":{func:E.uniform3fv,length:1},"3i":{func:E.uniform3i,length:3},"3iv":{func:E.uniform3iv,length:1},"4f":{func:E.uniform4f,length:4},"4fv":{func:E.uniform4fv,length:1},"4i":{func:E.uniform4i,length:4},"4iv":{func:E.uniform4iv,length:1}};var D=E.getSupportedExtensions();(!S.maxTextures||S.maxTextures===-1)&&(S.maxTextures=E.getParameter(E.MAX_TEXTURE_IMAGE_UNITS)),S.maxTextureSize||(S.maxTextureSize=E.getParameter(E.MAX_TEXTURE_SIZE));var B="WEBGL_compressed_texture_",N="WEBKIT_"+B;this.compression.ETC1=E.getExtension(B+"etc1")||E.getExtension(N+"etc1"),this.compression.PVRTC=E.getExtension(B+"pvrtc")||E.getExtension(N+"pvrtc"),this.compression.S3TC=E.getExtension(B+"s3tc")||E.getExtension(N+"s3tc"),this.supportedExtensions=D;var U="ANGLE_instanced_arrays";this.instancedArraysExtension=D.indexOf(U)>-1?E.getExtension(U):null;var X="OES_vertex_array_object";this.vaoExtension=D.indexOf(X)>-1?E.getExtension(X):null,E.disable(E.DEPTH_TEST),E.disable(E.CULL_FACE),E.enable(E.BLEND),E.clearColor(L.redGL,L.greenGL,L.blueGL,L.alphaGL),this.mipmapFilter=E[S.mipmapFilter],this.maxTextures=y.checkShaderMax(E,S.maxTextures),this.textureIndexes=[];var K=this.tempTextures;if(Array.isArray(K))for(var k=0;F<this.maxTextures;k++)E.deleteTexture(K[k]);else K=new Array(this.maxTextures);for(var b=0;b<this.maxTextures;b++){var I=E.createTexture();E.activeTexture(E.TEXTURE0+b),E.bindTexture(E.TEXTURE_2D,I),E.texImage2D(E.TEXTURE_2D,0,E.RGBA,1,1,0,E.RGBA,E.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),K[b]=I,this.textureIndexes.push(b)}return this.tempTextures=K,this.currentActiveTexture=1,this.startActiveTexture++,E.activeTexture(E.TEXTURE1),this.pipelines=new p(this),this.setBlendMode(a.BlendModes.NORMAL),this.projectionMatrix=new d().identity(),M.textures.once(x.READY,this.boot,this),this},boot:function(){var S=this.game,E=this.pipelines,M=S.scale.baseSize;this.width=M.width,this.height=M.height,this.isBooted=!0,this.renderTarget=new g(this,this.width,this.height,1,0,!0,!0),E.boot(S.config.pipeline),this.blankTexture=S.textures.getFrame("__DEFAULT"),this.whiteTexture=S.textures.getFrame("__WHITE");var O=this.gl;O.bindFramebuffer(O.FRAMEBUFFER,null),O.enable(O.SCISSOR_TEST),S.scale.on(m.RESIZE,this.onResize,this),this.resize(M.width,M.height)},onResize:function(S,E){(E.width!==this.width||E.height!==this.height)&&this.resize(E.width,E.height)},beginCapture:function(S,E){S===void 0&&(S=this.width),E===void 0&&(E=this.height),this.renderTarget.bind(!0,S,E),this.setProjectionMatrix(S,E),this.resetTextures()},endCapture:function(){return this.renderTarget.unbind(!0),this.resetProjectionMatrix(),this.renderTarget},resize:function(S,E){var M=this.gl;return this.width=S,this.height=E,this.setProjectionMatrix(S,E),M.viewport(0,0,S,E),this.drawingBufferHeight=M.drawingBufferHeight,M.scissor(0,M.drawingBufferHeight-E,S,E),this.defaultScissor[2]=S,this.defaultScissor[3]=E,this.emit(o.RESIZE,S,E),this},getAspectRatio:function(){return this.width/this.height},setProjectionMatrix:function(S,E){return(S!==this.projectionWidth||E!==this.projectionHeight)&&(this.projectionWidth=S,this.projectionHeight=E,this.projectionMatrix.ortho(0,S,E,0,-1e3,1e3)),this},resetProjectionMatrix:function(){this.projectionWidth=this.width,this.projectionHeight=this.height,this.projectionMatrix.ortho(0,this.width,this.height,0,-1e3,1e3)},hasExtension:function(S){return this.supportedExtensions?this.supportedExtensions.indexOf(S):!1},getExtension:function(S){return this.hasExtension(S)?(S in this.extensions||(this.extensions[S]=this.gl.getExtension(S)),this.extensions[S]):null},flush:function(){this.pipelines.flush()},pushScissor:function(S,E,M,O,L){L===void 0&&(L=this.drawingBufferHeight);var R=this.scissorStack,F=[S,E,M,O];return R.push(F),this.setScissor(S,E,M,O,L),this.currentScissor=F,F},setScissor:function(S,E,M,O,L){L===void 0&&(L=this.drawingBufferHeight);var R=this.gl,F=this.currentScissor,D=M>0&&O>0;if(F&&D){var B=F[0],N=F[1],U=F[2],X=F[3];D=B!==S||N!==E||U!==M||X!==O}D&&(this.flush(),R.scissor(S,L-E-O,M,O))},resetScissor:function(){var S=this.gl;S.enable(S.SCISSOR_TEST);var E=this.currentScissor;if(E){var M=E[0],O=E[1],L=E[2],R=E[3];L>0&&R>0&&S.scissor(M,this.drawingBufferHeight-O-R,L,R)}},popScissor:function(){var S=this.scissorStack;S.pop();var E=S[S.length-1];E&&this.setScissor(E[0],E[1],E[2],E[3]),this.currentScissor=E},hasActiveStencilMask:function(){var S=this.currentMask.mask,E=this.currentCameraMask.mask;return S&&S.isStencil||E&&E.isStencil},resetViewport:function(){var S=this.gl;S.viewport(0,0,this.width,this.height),this.drawingBufferHeight=S.drawingBufferHeight},setBlendMode:function(S,E){E===void 0&&(E=!1);var M=this.gl,O=this.blendModes[S];return E||S!==a.BlendModes.SKIP_CHECK&&this.currentBlendMode!==S?(this.flush(),M.enable(M.BLEND),M.blendEquation(O.equation),O.func.length>2?M.blendFuncSeparate(O.func[0],O.func[1],O.func[2],O.func[3]):M.blendFunc(O.func[0],O.func[1]),this.currentBlendMode=S,!0):!1},addBlendMode:function(S,E){var M=this.blendModes.push({func:S,equation:E});return M-1},updateBlendMode:function(S,E,M){return this.blendModes[S]&&(this.blendModes[S].func=E,M&&(this.blendModes[S].equation=M)),this},removeBlendMode:function(S){return S>17&&this.blendModes[S]&&this.blendModes.splice(S,1),this},setBlankTexture:function(){this.setTexture2D(this.blankTexture.glTexture)},setTextureSource:function(S){if(this.pipelines.forceZero())return this.setTextureZero(S.glTexture,!0),0;var E=this.gl,M=this.currentActiveTexture;return S.glIndexCounter<this.startActiveTexture&&(S.glIndexCounter=this.startActiveTexture,M<this.maxTextures?(S.glIndex=M,E.activeTexture(E.TEXTURE0+M),E.bindTexture(E.TEXTURE_2D,S.glTexture),this.currentActiveTexture++):(this.flush(),this.startActiveTexture++,this.textureFlush++,S.glIndexCounter=this.startActiveTexture,S.glIndex=1,E.activeTexture(E.TEXTURE1),E.bindTexture(E.TEXTURE_2D,S.glTexture),this.currentActiveTexture=2)),this.isTextureClean=!1,S.glIndex},isNewNormalMap:function(S,E){return this.textureZero!==S||this.normalTexture!==E},setTextureZero:function(S,E){if(this.textureZero!==S){E&&this.flush();var M=this.gl;M.activeTexture(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,S),this.textureZero=S}},clearTextureZero:function(){this.textureZero=null},setNormalMap:function(S){if(this.normalTexture!==S){var E=this.gl;E.activeTexture(E.TEXTURE1),E.bindTexture(E.TEXTURE_2D,S),this.normalTexture=S,this.currentActiveTexture===1&&(this.currentActiveTexture=2)}},clearNormalMap:function(){this.normalTexture=null,this.startActiveTexture++,this.currentActiveTexture=1,this.textureFlush++},unbindTextures:function(){for(var S=this.gl,E=this.tempTextures,M=0;M<E.length;M++)S.activeTexture(S.TEXTURE0+M),S.bindTexture(S.TEXTURE_2D,null);this.normalTexture=null,this.textureZero=null,this.currentActiveTexture=1,this.startActiveTexture++,this.textureFlush++},resetTextures:function(S){if(S===void 0&&(S=!1),!this.isTextureClean){this.flush();var E=this.gl,M=this.tempTextures;if(S){for(var O=0;O<M.length;O++)E.activeTexture(E.TEXTURE0+O),E.bindTexture(E.TEXTURE_2D,M[O]);E.activeTexture(E.TEXTURE1),E.bindTexture(E.TEXTURE_2D,M[1]),this.isTextureClean=!0}else E.activeTexture(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,M[0]),E.activeTexture(E.TEXTURE1),E.bindTexture(E.TEXTURE_2D,M[1]);this.normalTexture=null,this.textureZero=null,this.currentActiveTexture=1,this.startActiveTexture++,this.textureFlush++}},setTexture2D:function(S){if(this.pipelines.forceZero())return this.setTextureZero(S,!0),0;var E=this.gl,M=this.currentActiveTexture;return S.glIndexCounter<this.startActiveTexture&&(S.glIndexCounter=this.startActiveTexture,M<this.maxTextures?(S.glIndex=M,E.activeTexture(E.TEXTURE0+M),E.bindTexture(E.TEXTURE_2D,S),this.currentActiveTexture++):(this.flush(),this.startActiveTexture++,this.textureFlush++,S.glIndexCounter=this.startActiveTexture,S.glIndex=1,E.activeTexture(E.TEXTURE1),E.bindTexture(E.TEXTURE_2D,S),this.currentActiveTexture=2)),this.isTextureClean=!1,S.glIndex},pushFramebuffer:function(S,E,M,O){return S===this.currentFramebuffer?this:(this.fboStack.push(S),this.setFramebuffer(S,E,M,O))},setFramebuffer:function(S,E,M,O){if(E===void 0&&(E=!1),M===void 0&&(M=!1),O===void 0&&(O=!0),S===this.currentFramebuffer)return this;var L=this.gl,R=this.width,F=this.height;return S&&S.renderTexture&&O?(R=S.renderTexture.width,F=S.renderTexture.height):this.flush(),L.bindFramebuffer(L.FRAMEBUFFER,S),O&&L.viewport(0,0,R,F),E&&(S?(this.drawingBufferHeight=F,this.pushScissor(0,0,R,F)):(this.drawingBufferHeight=this.height,this.popScissor())),this.currentFramebuffer=S,M&&this.resetTextures(),this},popFramebuffer:function(S,E,M){S===void 0&&(S=!1),E===void 0&&(E=!1),M===void 0&&(M=!0);var O=this.fboStack;O.pop();var L=O[O.length-1];return L||(L=null),this.setFramebuffer(L,S,E,M),L},setProgram:function(S){return S!==this.currentProgram?(this.flush(),this.gl.useProgram(S),this.currentProgram=S,!0):!1},resetProgram:function(){return this.gl.useProgram(this.currentProgram),this},createTextureFromSource:function(S,E,M,O){var L=this.gl,R=L.NEAREST,F=L.NEAREST,D=L.CLAMP_TO_EDGE,B=null;E=S?S.width:E,M=S?S.height:M;var N=v(E,M);return N&&(D=L.REPEAT),O===a.ScaleModes.LINEAR&&this.config.antialias&&(R=N?this.mipmapFilter:L.LINEAR,F=L.LINEAR),!S&&typeof E=="number"&&typeof M=="number"?B=this.createTexture2D(0,R,F,D,D,L.RGBA,null,E,M):B=this.createTexture2D(0,R,F,D,D,L.RGBA,S),B},createTexture2D:function(S,E,M,O,L,R,F,D,B,N,U,X){N=N==null?!0:N,U===void 0&&(U=!1),X===void 0&&(X=!1);var K=this.gl,k=K.createTexture();K.activeTexture(K.TEXTURE0);var b=K.getParameter(K.TEXTURE_BINDING_2D);return K.bindTexture(K.TEXTURE_2D,k),K.texParameteri(K.TEXTURE_2D,K.TEXTURE_MIN_FILTER,E),K.texParameteri(K.TEXTURE_2D,K.TEXTURE_MAG_FILTER,M),K.texParameteri(K.TEXTURE_2D,K.TEXTURE_WRAP_S,L),K.texParameteri(K.TEXTURE_2D,K.TEXTURE_WRAP_T,O),K.pixelStorei(K.UNPACK_PREMULTIPLY_ALPHA_WEBGL,N),K.pixelStorei(K.UNPACK_FLIP_Y_WEBGL,X),F==null?K.texImage2D(K.TEXTURE_2D,S,R,D,B,0,R,K.UNSIGNED_BYTE,null):(U||(D=F.width,B=F.height),K.texImage2D(K.TEXTURE_2D,S,R,R,K.UNSIGNED_BYTE,F)),v(D,B)&&K.generateMipmap(K.TEXTURE_2D),b&&K.bindTexture(K.TEXTURE_2D,b),k.isAlphaPremultiplied=N,k.isRenderTexture=!1,k.width=D,k.height=B,k.glIndex=0,k.glIndexCounter=-1,k},createFramebuffer:function(S,E,M,O){var L=this.gl,R=L.createFramebuffer(),F=0;if(this.setFramebuffer(R),O){var D=L.createRenderbuffer();L.bindRenderbuffer(L.RENDERBUFFER,D),L.renderbufferStorage(L.RENDERBUFFER,L.DEPTH_STENCIL,S,E),L.framebufferRenderbuffer(L.FRAMEBUFFER,L.DEPTH_STENCIL_ATTACHMENT,L.RENDERBUFFER,D)}if(M.isRenderTexture=!0,M.isAlphaPremultiplied=!1,L.framebufferTexture2D(L.FRAMEBUFFER,L.COLOR_ATTACHMENT0,L.TEXTURE_2D,M,0),F=L.checkFramebufferStatus(L.FRAMEBUFFER),F!==L.FRAMEBUFFER_COMPLETE){var B={36054:"Incomplete Attachment",36055:"Missing Attachment",36057:"Incomplete Dimensions",36061:"Framebuffer Unsupported"};throw new Error("Framebuffer status: "+B[F])}return R.renderTexture=M,this.setFramebuffer(null),this.resetTextures(),R},createProgram:function(S,E){var M=this.gl,O=M.createProgram(),L=M.createShader(M.VERTEX_SHADER),R=M.createShader(M.FRAGMENT_SHADER);if(M.shaderSource(L,S),M.shaderSource(R,E),M.compileShader(L),M.compileShader(R),!M.getShaderParameter(L,M.COMPILE_STATUS))throw new Error(`Vertex Shader failed:
`+M.getShaderInfoLog(L));if(!M.getShaderParameter(R,M.COMPILE_STATUS))throw new Error(`Fragment Shader failed:
`+M.getShaderInfoLog(R));if(M.attachShader(O,L),M.attachShader(O,R),M.linkProgram(O),!M.getProgramParameter(O,M.LINK_STATUS))throw new Error(`Link Program failed:
`+M.getProgramInfoLog(O));return M.useProgram(O),O},createVertexBuffer:function(S,E){var M=this.gl,O=M.createBuffer();return M.bindBuffer(M.ARRAY_BUFFER,O),M.bufferData(M.ARRAY_BUFFER,S,E),M.bindBuffer(M.ARRAY_BUFFER,null),O},createIndexBuffer:function(S,E){var M=this.gl,O=M.createBuffer();return M.bindBuffer(M.ELEMENT_ARRAY_BUFFER,O),M.bufferData(M.ELEMENT_ARRAY_BUFFER,S,E),M.bindBuffer(M.ELEMENT_ARRAY_BUFFER,null),O},deleteTexture:function(S,E){return E&&this.resetTextures(!0),S&&this.gl.deleteTexture(S),this},deleteFramebuffer:function(S){return S&&(this.gl.deleteFramebuffer(S),n(this.fboStack,S),this.currentFramebuffer===S&&(this.currentFramebuffer=null)),this},deleteProgram:function(S){return S&&this.gl.deleteProgram(S),this},deleteBuffer:function(S){return this.gl.deleteBuffer(S),this},preRenderCamera:function(S){var E=S.x,M=S.y,O=S.width,L=S.height,R=S.backgroundColor;if(S.emit(h.PRE_RENDER,S),this.pipelines.preBatchCamera(S),this.pushScissor(E,M,O,L),S.mask&&(this.currentCameraMask.mask=S.mask,this.currentCameraMask.camera=S._maskCamera,S.mask.preRenderWebGL(this,S,S._maskCamera)),R.alphaGL>0){var F=this.pipelines.setMulti();F.drawFillRect(E,M,O,L,y.getTintFromFloats(R.blueGL,R.greenGL,R.redGL,1),R.alphaGL)}},getCurrentStencilMask:function(){var S=null,E=this.maskStack,M=this.currentCameraMask;return E.length>0?S=E[E.length-1]:M.mask&&M.mask.isStencil&&(S=M),S},postRenderCamera:function(S){var E=S.flashEffect,M=S.fadeEffect;if(E.isRunning||M.isRunning||M.isComplete){var O=this.pipelines.setMulti();E.postRenderWebGL(O,y.getTintFromFloats),M.postRenderWebGL(O,y.getTintFromFloats)}S.dirty=!1,this.popScissor(),S.mask&&(this.currentCameraMask.mask=null,S.mask.postRenderWebGL(this,S._maskCamera)),this.pipelines.postBatchCamera(S),S.emit(h.POST_RENDER,S)},preRender:function(){if(!this.contextLost){var S=this.gl;if(S.bindFramebuffer(S.FRAMEBUFFER,null),this.config.clearBeforeRender){var E=this.config.backgroundColor;S.clearColor(E.redGL,E.greenGL,E.blueGL,E.alphaGL),S.clear(S.COLOR_BUFFER_BIT|S.DEPTH_BUFFER_BIT|S.STENCIL_BUFFER_BIT)}S.enable(S.SCISSOR_TEST),this.currentScissor=this.defaultScissor,this.scissorStack.length=0,this.scissorStack.push(this.currentScissor),this.game.scene.customViewports&&S.scissor(0,this.drawingBufferHeight-this.height,this.width,this.height),this.currentMask.mask=null,this.currentCameraMask.mask=null,this.maskStack.length=0,this.textureFlush=0,this.emit(o.PRE_RENDER)}},render:function(S,E,M){if(!this.contextLost){var O=E.length;if(this.emit(o.RENDER,S,M),this.preRenderCamera(M),O===0){this.setBlendMode(a.BlendModes.NORMAL),this.postRenderCamera(M);return}this.currentType="";for(var L=this.currentMask,R=0;R<O;R++){this.finalType=R===O-1;var F=E[R],D=F.mask;L=this.currentMask,L.mask&&L.mask!==D&&L.mask.postRenderWebGL(this,L.camera),D&&L.mask!==D&&D.preRenderWebGL(this,F,M),F.blendMode!==this.currentBlendMode&&this.setBlendMode(F.blendMode);var B=F.type;B!==this.currentType&&(this.newType=!0,this.currentType=B),this.finalType?this.nextTypeMatch=!1:this.nextTypeMatch=E[R+1].type===this.currentType,F.renderWebGL(this,F,M),this.newType=!1}L=this.currentMask,L.mask&&L.mask.postRenderWebGL(this,L.camera),this.setBlendMode(a.BlendModes.NORMAL),this.postRenderCamera(M)}},postRender:function(){if(!this.contextLost){this.flush(),this.emit(o.POST_RENDER);var S=this.snapshotState;S.callback&&(T(this.canvas,S),S.callback=null),this.textureFlush>0&&(this.startActiveTexture++,this.currentActiveTexture=1)}},snapshot:function(S,E,M){return this.snapshotArea(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,S,E,M)},snapshotArea:function(S,E,M,O,L,R,F){var D=this.snapshotState;return D.callback=L,D.type=R,D.encoder=F,D.getPixel=!1,D.x=S,D.y=E,D.width=Math.min(M,this.gl.drawingBufferWidth),D.height=Math.min(O,this.gl.drawingBufferHeight),this},snapshotPixel:function(S,E,M){return this.snapshotArea(S,E,1,1,M),this.snapshotState.getPixel=!0,this},snapshotFramebuffer:function(S,E,M,O,L,R,F,D,B,N,U){L===void 0&&(L=!1),R===void 0&&(R=0),F===void 0&&(F=0),D===void 0&&(D=E),B===void 0&&(B=M);var X=this.currentFramebuffer;this.snapshotArea(R,F,D,B,O,N,U);var K=this.snapshotState;return K.getPixel=L,K.isFramebuffer=!0,K.bufferWidth=E,K.bufferHeight=M,this.setFramebuffer(S),T(this.canvas,K),this.setFramebuffer(X),K.callback=null,K.isFramebuffer=!1,this},canvasToTexture:function(S,E,M,O){return M===void 0&&(M=!1),O===void 0&&(O=!1),E?this.updateCanvasTexture(S,E,O):this.createCanvasTexture(S,M,O)},createCanvasTexture:function(S,E,M){E===void 0&&(E=!1),M===void 0&&(M=!1);var O=this.gl,L=O.NEAREST,R=O.NEAREST,F=S.width,D=S.height,B=O.CLAMP_TO_EDGE,N=v(F,D);return!E&&N&&(B=O.REPEAT),this.config.antialias&&(L=N?this.mipmapFilter:O.LINEAR,R=O.LINEAR),this.createTexture2D(0,L,R,B,B,O.RGBA,S,F,D,!0,!1,M)},updateCanvasTexture:function(S,E,M){M===void 0&&(M=!1);var O=this.gl,L=S.width,R=S.height;if(L>0&&R>0){O.activeTexture(O.TEXTURE0);var F=O.getParameter(O.TEXTURE_BINDING_2D);O.bindTexture(O.TEXTURE_2D,E),O.pixelStorei(O.UNPACK_FLIP_Y_WEBGL,M),O.pixelStorei(O.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),O.texImage2D(O.TEXTURE_2D,0,O.RGBA,O.RGBA,O.UNSIGNED_BYTE,S),E.width=L,E.height=R,F&&O.bindTexture(O.TEXTURE_2D,F)}return E},createVideoTexture:function(S,E,M){E===void 0&&(E=!1),M===void 0&&(M=!1);var O=this.gl,L=O.NEAREST,R=O.NEAREST,F=S.videoWidth,D=S.videoHeight,B=O.CLAMP_TO_EDGE,N=v(F,D);return!E&&N&&(B=O.REPEAT),this.config.antialias&&(L=N?this.mipmapFilter:O.LINEAR,R=O.LINEAR),this.createTexture2D(0,L,R,B,B,O.RGBA,S,F,D,!0,!0,M)},updateVideoTexture:function(S,E,M){M===void 0&&(M=!1);var O=this.gl,L=S.videoWidth,R=S.videoHeight;if(L>0&&R>0){O.activeTexture(O.TEXTURE0);var F=O.getParameter(O.TEXTURE_BINDING_2D);O.bindTexture(O.TEXTURE_2D,E),O.pixelStorei(O.UNPACK_FLIP_Y_WEBGL,M),O.texImage2D(O.TEXTURE_2D,0,O.RGBA,O.RGBA,O.UNSIGNED_BYTE,S),E.width=L,E.height=R,F&&O.bindTexture(O.TEXTURE_2D,F)}return E},setTextureFilter:function(S,E){var M=this.gl,O=[M.LINEAR,M.NEAREST][E];M.activeTexture(M.TEXTURE0);var L=M.getParameter(M.TEXTURE_BINDING_2D);return M.bindTexture(M.TEXTURE_2D,S),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_MIN_FILTER,O),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_MAG_FILTER,O),L&&M.bindTexture(M.TEXTURE_2D,L),this},getMaxTextureSize:function(){return this.config.maxTextureSize},destroy:function(){this.canvas.removeEventListener("webglcontextlost",this.contextLostHandler,!1),this.canvas.removeEventListener("webglcontextrestored",this.contextRestoredHandler,!1);for(var S=this.gl,E=this.tempTextures,M=0;M<E.length;M++)S.deleteTexture(E[M]);this.pipelines.destroy(),this.removeAllListeners(),this.fboStack=[],this.maskStack=[],this.extensions={},this.textureIndexes=[],this.gl=null,this.game=null,this.canvas=null,this.contextLost=!0,this.currentMask=null,this.currentCameraMask=null}});e.exports=C},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(92),r=i(102),a=i(373),l=i(376),o=i(377),u=i(108),v=i(378),d=i(379),c=i(380),p=i(381),g=new n({initialize:function(x){this.game=x.game,this.renderer=x,this.classes=new r([[h.UTILITY_PIPELINE,p],[h.MULTI_PIPELINE,u],[h.BITMAPMASK_PIPELINE,a],[h.SINGLE_PIPELINE,c],[h.ROPE_PIPELINE,d],[h.LIGHT_PIPELINE,o],[h.POINTLIGHT_PIPELINE,v],[h.GRAPHICS_PIPELINE,l]]),this.postPipelineClasses=new r,this.pipelines=new r,this.current=null,this.previous=null,this.MULTI_PIPELINE=null,this.BITMAPMASK_PIPELINE=null,this.UTILITY_PIPELINE=null,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(m){var x,y,T=this,C=this.game;if(this.classes.each(function(E,M){x=T.add(E,new M({game:C})),E===h.UTILITY_PIPELINE&&(T.UTILITY_PIPELINE=x,T.fullFrame1=x.fullFrame1,T.fullFrame2=x.fullFrame2,T.halfFrame1=x.halfFrame1,T.halfFrame2=x.halfFrame2)}),this.MULTI_PIPELINE=this.get(h.MULTI_PIPELINE),this.BITMAPMASK_PIPELINE=this.get(h.BITMAPMASK_PIPELINE),m)for(y in m){var S=m[y];x=new S(C),x.isPostFX?this.postPipelineClasses.set(y,S):this.has(y)||(this.classes.set(y,S),this.add(y,x))}},add:function(m,x){if(x.isPostFX){console.warn(m+" is a Post Pipeline. Use `addPostPipeline` instead");return}var y=this.pipelines,T=this.renderer;return y.has(m)?console.warn("Pipeline exists: "+m):(x.name=m,x.manager=this,y.set(m,x)),x.hasBooted||x.boot(),T.width!==0&&T.height!==0&&x.resize(T.width,T.height),x},addPostPipeline:function(m,x){this.postPipelineClasses.has(m)||this.postPipelineClasses.set(m,x)},flush:function(){this.current&&this.current.flush()},has:function(m){var x=this.pipelines;return typeof m=="string"?x.has(m):!!x.contains(m)},get:function(m){var x=this.pipelines;if(typeof m=="string")return x.get(m);if(x.contains(m))return m},getPostPipeline:function(m,x){var y=this.postPipelineClasses,T;if(typeof m=="string"?T=y.get(m):typeof m=="function"?y.contains(m)&&(T=m):typeof m=="object"&&(T=y.get(m.name)),T){var C=new T(this.game);return x&&(C.gameObject=x),C}},remove:function(m,x,y){x===void 0&&(x=!0),y===void 0&&(y=!0),this.pipelines.delete(m),x&&this.classes.delete(m),y&&this.postPipelineClasses.delete(m)},set:function(m,x,y){if(!m.isPostFX)return this.isCurrent(m,y)||(this.flush(),this.current&&this.current.unbind(),this.current=m,m.bind(y)),m.updateProjectionMatrix(),m.onBind(x),m},preBatch:function(m){if(m.hasPostPipeline){this.flush();for(var x=m.postPipelines,y=x.length-1;y>=0;y--){var T=x[y];T.active&&T.preBatch(m)}}},postBatch:function(m){if(m.hasPostPipeline){this.flush();for(var x=m.postPipelines,y=0;y<x.length;y++){var T=x[y];T.active&&T.postBatch(m)}}},preBatchCamera:function(m){if(m.hasPostPipeline){this.flush();for(var x=m.postPipelines,y=x.length-1;y>=0;y--){var T=x[y];T.active&&T.preBatch(m)}}},postBatchCamera:function(m){if(m.hasPostPipeline){this.flush();for(var x=m.postPipelines,y=0;y<x.length;y++){var T=x[y];T.active&&T.postBatch(m)}}},isCurrent:function(m,x){var y=this.renderer,T=this.current;return T&&!x&&(x=T.currentShader),!(T!==m||x.program!==y.currentProgram)},copyFrame:function(m,x,y,T,C){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyFrame(m,x,y,T,C),this},copyToGame:function(m){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyToGame(m),this},drawFrame:function(m,x,y,T){return this.setUtility(this.UTILITY_PIPELINE.colorMatrixShader).drawFrame(m,x,y,T),this},blendFrames:function(m,x,y,T,C){return this.setUtility(this.UTILITY_PIPELINE.linearShader).blendFrames(m,x,y,T,C),this},blendFramesAdditive:function(m,x,y,T,C){return this.setUtility(this.UTILITY_PIPELINE.addShader).blendFramesAdditive(m,x,y,T,C),this},clearFrame:function(m,x){return this.UTILITY_PIPELINE.clearFrame(m,x),this},blitFrame:function(m,x,y,T,C,S){return this.setUtility(this.UTILITY_PIPELINE.copyShader).blitFrame(m,x,y,T,C,S),this},copyFrameRect:function(m,x,y,T,C,S,E,M){return this.UTILITY_PIPELINE.copyFrameRect(m,x,y,T,C,S,E,M),this},forceZero:function(){return this.current&&this.current.forceZero},setMulti:function(){return this.set(this.MULTI_PIPELINE)},setUtility:function(m){return this.UTILITY_PIPELINE.bind(m)},rebind:function(m){m===void 0&&this.previous&&(m=this.previous);var x=this.renderer,y=x.gl;y.disable(y.DEPTH_TEST),y.disable(y.CULL_FACE),x.hasActiveStencilMask()?y.clear(y.DEPTH_BUFFER_BIT):(y.disable(y.STENCIL_TEST),y.clear(y.DEPTH_BUFFER_BIT|y.STENCIL_BUFFER_BIT)),y.viewport(0,0,x.width,x.height),x.currentProgram=null,x.setBlendMode(0,!0);var T=this.pipelines.entries;for(var C in T)T[C].glReset=!0;m&&(this.current=m,m.rebind()),x.resetTextures()},clear:function(){var m=this.renderer;this.flush(),this.current?(this.current.unbind(),this.previous=this.current,this.current=null):this.previous=null,m.currentProgram=null,m.setBlendMode(0,!0)},destroy:function(){this.flush(),this.classes.clear(),this.postPipelineClasses.clear(),this.pipelines.clear(),this.renderer=null,this.game=null,this.classes=null,this.postPipelineClasses=null,this.pipelines=null,this.current=null,this.previous=null}});e.exports=g},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(2),r=i(866),a=i(867),l=i(107),o=i(58),u=new n({Extends:o,initialize:function(d){d.fragShader=h(d,"fragShader",r),d.vertShader=h(d,"vertShader",a),d.batchSize=h(d,"batchSize",1),d.vertices=h(d,"vertices",[-1,1,-1,-7,7,1]),d.attributes=h(d,"attributes",[{name:"inPosition",size:2,type:l.FLOAT}]),o.call(this,d)},boot:function(){o.prototype.boot.call(this),this.set1i("uMainSampler",0),this.set1i("uMaskSampler",1)},resize:function(v,d){o.prototype.resize.call(this,v,d),this.set2f("uResolution",v,d)},beginMask:function(v,d,c){var p=this.gl;if(v.bitmapMask&&p){var g=this.renderer;g.flush(),g.pushFramebuffer(v.mainFramebuffer),p.disable(p.STENCIL_TEST),p.clearColor(0,0,0,0),p.clear(p.COLOR_BUFFER_BIT),g.currentCameraMask.mask!==v&&(g.currentMask.mask=v,g.currentMask.camera=c)}},endMask:function(v,d){var c=this.gl,p=this.renderer,g=v.bitmapMask;if(g&&c){p.flush(),p.pushFramebuffer(v.maskFramebuffer),c.clearColor(0,0,0,0),c.clear(c.COLOR_BUFFER_BIT),p.setBlendMode(0,!0),g.renderWebGL(p,g,d),p.flush(),p.popFramebuffer(),p.popFramebuffer();var m=p.getCurrentStencilMask();m?(c.enable(c.STENCIL_TEST),m.mask.applyStencil(p,m.camera,!0)):p.currentMask.mask=null,p.pipelines.set(this),c.activeTexture(c.TEXTURE1),c.bindTexture(c.TEXTURE_2D,v.maskTexture),c.activeTexture(c.TEXTURE0),c.bindTexture(c.TEXTURE_2D,v.mainTexture),this.set1i("uInvertMaskAlpha",v.invertAlpha),c.drawArrays(this.topology,0,3),p.resetTextures()}}});e.exports=u},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={AFTER_FLUSH:i(868),BEFORE_FLUSH:i(869),BIND:i(870),BOOT:i(871),DESTROY:i(872),REBIND:i(873),RESIZE:i(874)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(2),r=i(107),a=new n({initialize:function(o,u,v,d,c){this.pipeline=o,this.name=u,this.renderer=o.renderer,this.gl=this.renderer.gl,this.program=this.renderer.createProgram(v,d),this.attributes,this.vertexComponentCount=0,this.vertexSize=0,this.uniforms={},this.createAttributes(c),this.createUniforms()},createAttributes:function(l){var o=0,u=0,v=[];this.vertexComponentCount=0;for(var d=0;d<l.length;d++){var c=l[d],p=c.name,g=h(c,"size",1),m=h(c,"type",r.FLOAT),x=m.enum,y=m.size,T=!!c.normalized;v.push({name:p,size:g,type:x,normalized:T,offset:u,enabled:!1,location:-1}),y===4?o+=g:o++,u+=g*y}this.vertexSize=u,this.vertexComponentCount=o,this.attributes=v},bind:function(l,o){return l===void 0&&(l=!1),o===void 0&&(o=!1),o&&this.pipeline.flush(),this.renderer.setProgram(this.program),l&&this.setAttribPointers(),this},rebind:function(){return this.renderer.setProgram(this.program),this.setAttribPointers(!0),this},setAttribPointers:function(l){l===void 0&&(l=!1);for(var o=this.gl,u=this.vertexSize,v=this.attributes,d=this.program,c=0;c<v.length;c++){var p=v[c],g=p.size,m=p.type,x=p.offset,y=p.enabled,T=p.location,C=!!p.normalized;if(l){var S=o.getAttribLocation(d,p.name);S>=0?(o.enableVertexAttribArray(S),o.vertexAttribPointer(S,g,m,C,u,x),p.enabled=!0,p.location=S):S!==-1&&o.disableVertexAttribArray(S)}else y?o.vertexAttribPointer(T,g,m,C,u,x):!y&&T>-1&&(o.disableVertexAttribArray(T),p.location=-1)}return this},createUniforms:function(){var l=this.gl,o=this.program,u=this.uniforms,v,d,c,p=l.getProgramParameter(o,l.ACTIVE_UNIFORMS);for(v=0;v<p;v++){var g=l.getActiveUniform(o,v);if(g){d=g.name,c=l.getUniformLocation(o,d),c!==null&&(u[d]={name:d,location:c,value1:null,value2:null,value3:null,value4:null});var m=d.indexOf("[");m>0&&(d=d.substr(0,m),u.hasOwnProperty(d)||(c=l.getUniformLocation(o,d),c!==null&&(u[d]={name:d,location:c,value1:null,value2:null,value3:null,value4:null})))}}return this},hasUniform:function(l){return this.uniforms.hasOwnProperty(l)},resetUniform:function(l){var o=this.uniforms[l];return o&&(o.value1=null,o.value2=null,o.value3=null,o.value4=null),this},setUniform1:function(l,o,u,v){var d=this.uniforms[o];return d?((v||d.value1!==u)&&(d.value1=u,this.renderer.setProgram(this.program),l.call(this.gl,d.location,u),this.pipeline.currentShader=this),this):this},setUniform2:function(l,o,u,v,d){var c=this.uniforms[o];return c?((d||c.value1!==u||c.value2!==v)&&(c.value1=u,c.value2=v,this.renderer.setProgram(this.program),l.call(this.gl,c.location,u,v),this.pipeline.currentShader=this),this):this},setUniform3:function(l,o,u,v,d,c){var p=this.uniforms[o];return p?((c||p.value1!==u||p.value2!==v||p.value3!==d)&&(p.value1=u,p.value2=v,p.value3=d,this.renderer.setProgram(this.program),l.call(this.gl,p.location,u,v,d),this.pipeline.currentShader=this),this):this},setUniform4:function(l,o,u,v,d,c,p){var g=this.uniforms[o];return g?((p||g.value1!==u||g.value2!==v||g.value3!==d||g.value4!==c)&&(g.value1=u,g.value2=v,g.value3=d,g.value4=c,this.renderer.setProgram(this.program),l.call(this.gl,g.location,u,v,d,c),this.pipeline.currentShader=this),this):this},set1f:function(l,o){return this.setUniform1(this.gl.uniform1f,l,o)},set2f:function(l,o,u){return this.setUniform2(this.gl.uniform2f,l,o,u)},set3f:function(l,o,u,v){return this.setUniform3(this.gl.uniform3f,l,o,u,v)},set4f:function(l,o,u,v,d){return this.setUniform4(this.gl.uniform4f,l,o,u,v,d)},set1fv:function(l,o){return this.setUniform1(this.gl.uniform1fv,l,o,!0)},set2fv:function(l,o){return this.setUniform1(this.gl.uniform2fv,l,o,!0)},set3fv:function(l,o){return this.setUniform1(this.gl.uniform3fv,l,o,!0)},set4fv:function(l,o){return this.setUniform1(this.gl.uniform4fv,l,o,!0)},set1iv:function(l,o){return this.setUniform1(this.gl.uniform1iv,l,o,!0)},set2iv:function(l,o){return this.setUniform1(this.gl.uniform2iv,l,o,!0)},set3iv:function(l,o){return this.setUniform1(this.gl.uniform3iv,l,o,!0)},set4iv:function(l,o){return this.setUniform1(this.gl.uniform4iv,l,o,!0)},set1i:function(l,o){return this.setUniform1(this.gl.uniform1i,l,o)},set2i:function(l,o,u){return this.setUniform2(this.gl.uniform2i,l,o,u)},set3i:function(l,o,u,v){return this.setUniform3(this.gl.uniform3i,l,o,u,v)},set4i:function(l,o,u,v,d){return this.setUniform4(this.gl.uniform4i,l,o,u,v,d)},setMatrix2fv:function(l,o,u){return this.setUniform2(this.gl.uniformMatrix2fv,l,o,u,!0)},setMatrix3fv:function(l,o,u){return this.setUniform2(this.gl.uniformMatrix3fv,l,o,u,!0)},setMatrix4fv:function(l,o,u){return this.setUniform2(this.gl.uniformMatrix4fv,l,o,u,!0)},destroy:function(){this.gl.deleteProgram(this.program),this.pipeline=null,this.renderer=null,this.gl=null,this.program=null,this.attributes=null,this.uniforms=null}});e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(59),r=i(2),a=i(875),l=i(876),o=i(25),u=i(107),v=i(58),d=new n({Extends:v,initialize:function(p){p.fragShader=r(p,"fragShader",a),p.vertShader=r(p,"vertShader",l),p.attributes=r(p,"attributes",[{name:"inPosition",size:2},{name:"inColor",size:4,type:u.UNSIGNED_BYTE,normalized:!0}]),v.call(this,p),this.calcMatrix=new o,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},batchFillRect:function(c,p,g,m,x,y){this.renderer.pipelines.set(this);var T=this.calcMatrix;y&&y.multiply(x,T);var C=c+g,S=p+m,E=T.getX(c,p),M=T.getY(c,p),O=T.getX(c,S),L=T.getY(c,S),R=T.getX(C,S),F=T.getY(C,S),D=T.getX(C,p),B=T.getY(C,p),N=this.fillTint;this.batchQuad(E,M,O,L,R,F,D,B,N.TL,N.TR,N.BL,N.BR)},batchFillTriangle:function(c,p,g,m,x,y,T,C){this.renderer.pipelines.set(this);var S=this.calcMatrix;C&&C.multiply(T,S);var E=S.getX(c,p),M=S.getY(c,p),O=S.getX(g,m),L=S.getY(g,m),R=S.getX(x,y),F=S.getY(x,y),D=this.fillTint;this.batchTri(E,M,O,L,R,F,D.TL,D.TR,D.BL)},batchStrokeTriangle:function(c,p,g,m,x,y,T,C,S){var E=this.tempTriangle;E[0].x=c,E[0].y=p,E[0].width=T,E[1].x=g,E[1].y=m,E[1].width=T,E[2].x=x,E[2].y=y,E[2].width=T,E[3].x=c,E[3].y=p,E[3].width=T,this.batchStrokePath(E,T,!1,C,S)},batchFillPath:function(c,p,g){this.renderer.pipelines.set(this);var m=this.calcMatrix;g&&g.multiply(p,m);for(var x=c.length,y=this.polygonCache,T,C,S=this.fillTint.TL,E=this.fillTint.TR,M=this.fillTint.BL,O=0;O<x;++O)C=c[O],y.push(C.x,C.y);T=h(y),x=T.length;for(var L=0;L<x;L+=3){var R=T[L+0]*2,F=T[L+1]*2,D=T[L+2]*2,B=y[R+0],N=y[R+1],U=y[F+0],X=y[F+1],K=y[D+0],k=y[D+1],b=m.getX(B,N),I=m.getY(B,N),G=m.getX(U,X),Y=m.getY(U,X),V=m.getX(K,k),W=m.getY(K,k);this.batchTri(b,I,G,Y,V,W,S,E,M)}y.length=0},batchStrokePath:function(c,p,g,m,x){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var y=c.length-1,T=0;T<y;T++){var C=c[T],S=c[T+1];this.batchLine(C.x,C.y,S.x,S.y,C.width/2,S.width/2,p,T,!g&&T===y-1,m,x)}},batchLine:function(c,p,g,m,x,y,T,C,S,E,M){this.renderer.pipelines.set(this);var O=this.calcMatrix;M&&M.multiply(E,O);var L=g-c,R=m-p,F=Math.sqrt(L*L+R*R),D=x*(m-p)/F,B=x*(c-g)/F,N=y*(m-p)/F,U=y*(c-g)/F,X=g-N,K=m-U,k=c-D,b=p-B,I=g+N,G=m+U,Y=c+D,V=p+B,W=O.getX(X,K),H=O.getY(X,K),Z=O.getX(k,b),q=O.getY(k,b),_=O.getX(I,G),nt=O.getY(I,G),rt=O.getX(Y,V),at=O.getY(Y,V),ct=this.strokeTint,ut=ct.TL,vt=ct.TR,It=ct.BL,St=ct.BR;if(this.batchQuad(rt,at,Z,q,W,H,_,nt,ut,vt,It,St),!(T<=2)){var Et=this.prevQuad,dt=this.firstQuad;C>0&&Et[4]?this.batchQuad(rt,at,Z,q,Et[0],Et[1],Et[2],Et[3],ut,vt,It,St):(dt[0]=rt,dt[1]=at,dt[2]=Z,dt[3]=q,dt[4]=1),S&&dt[4]?this.batchQuad(W,H,_,nt,dt[0],dt[1],dt[2],dt[3],ut,vt,It,St):(Et[0]=W,Et[1]=H,Et[2]=_,Et[3]=nt,Et[4]=1)}},batchVert:function(c,p,g){var m=this.vertexViewF32,x=this.vertexViewU32,y=this.vertexCount*this.currentShader.vertexComponentCount-1;m[++y]=c,m[++y]=p,x[++y]=g,this.vertexCount++},batchQuad:function(c,p,g,m,x,y,T,C,S,E,M,O){var L=!1;return this.shouldFlush(6)&&(this.flush(),L=!0),this.batchVert(c,p,S),this.batchVert(g,m,M),this.batchVert(x,y,O),this.batchVert(c,p,S),this.batchVert(x,y,O),this.batchVert(T,C,E),L},batchTri:function(c,p,g,m,x,y,T,C,S){var E=!1;return this.shouldFlush(3)&&(this.flush(),E=!0),this.batchVert(c,p,T),this.batchVert(g,m,C),this.batchVert(x,y,S),E},destroy:function(){return v.prototype.destroy.call(this),this.polygonCache=null,this}});e.exports=d},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(2),r=i(877),a=i(108),l=i(3),o=i(58),u=10,v=new l,d=new n({Extends:a,initialize:function(p){u=p.game.renderer.config.maxLights;for(var g=h(p,"fragShader",r),m=[],x=1;x<=u;x++)m.push({name:"lights"+x,fragShader:g.replace("%LIGHT_COUNT%",x.toString())});p.shaders=m,a.call(this,p),this.inverseRotationMatrix=new Float32Array([1,0,0,0,1,0,0,0,1]),this.defaultNormalMap,this.lightsActive=!0},boot:function(){o.prototype.boot.call(this);var c=this.gl,p=c.createTexture();c.activeTexture(c.TEXTURE0),c.bindTexture(c.TEXTURE_2D,p),c.texImage2D(c.TEXTURE_2D,0,c.RGBA,1,1,0,c.RGBA,c.UNSIGNED_BYTE,new Uint8Array([127,127,255,255])),this.defaultNormalMap={glTexture:p};for(var g=0;g<this.shaders.length;g++)this["lightShader"+(g+1)]=this.shaders[g]},onRender:function(c,p){var g=c.sys.lights;if(this.lightsActive=!1,!(!g||!g.active)){var m=g.getLights(p),x=m.length;if(x!==0){this.lightsActive=!0,this.setShader(this["lightShader"+x],!0);var y,T=this.renderer,C=T.height,S=p.matrix;for(this.set1i("uMainSampler",0),this.set1i("uNormSampler",1),this.set2f("uResolution",this.width/2,this.height/2),this.set4f("uCamera",p.x,p.y,p.rotation,p.zoom),this.set3f("uAmbientLightColor",g.ambientColor.r,g.ambientColor.g,g.ambientColor.b),y=0;y<x;y++){var E=m[y].light,M=E.color,O="uLights["+y+"].";S.transformPoint(E.x,E.y,v),this.set2f(O+"position",v.x-p.scrollX*E.scrollFactorX*p.zoom,C-(v.y-p.scrollY*E.scrollFactorY*p.zoom)),this.set3f(O+"color",M.r,M.g,M.b),this.set1f(O+"intensity",E.intensity),this.set1f(O+"radius",E.radius)}this.currentNormalMapRotation=null}}},setNormalMapRotation:function(c){if(c!==this.currentNormalMapRotation||this.vertexCount===0){this.vertexCount>0&&this.flush();var p=this.inverseRotationMatrix;if(c){var g=-c,m=Math.cos(g),x=Math.sin(g);p[1]=x,p[3]=-x,p[0]=p[4]=m}else p[0]=p[4]=1,p[1]=p[3]=0;this.setMatrix3fv("uInverseRotationMatrix",!1,p),this.currentNormalMapRotation=c}},setTexture2D:function(c,p){var g=this.renderer;c===void 0&&(c=g.tempTextures[0]);var m=this.getNormalMap(p);g.isNewNormalMap(c,m)&&(this.flush(),g.setTextureZero(c),g.setNormalMap(m));var x=p?p.rotation:0;return this.setNormalMapRotation(x),this.currentUnit=0,0},setGameObject:function(c,p){p===void 0&&(p=c.frame);var g=this.renderer,m=p.glTexture,x=this.getNormalMap(c);return g.isNewNormalMap()&&(this.flush(),g.setTextureZero(m),g.setNormalMap(x)),this.setNormalMapRotation(c.rotation),this.currentUnit=0,0},getNormalMap:function(c){var p;return c?c.displayTexture?p=c.displayTexture.dataSource[c.displayFrame.sourceIndex]:c.texture?p=c.texture.dataSource[c.frame.sourceIndex]:c.tileset&&(Array.isArray(c.tileset)?p=c.tileset[0].image.dataSource[0]:p=c.tileset.image.dataSource[0]):p=this.defaultNormalMap,p||(p=this.defaultNormalMap),p.glTexture},batchSprite:function(c,p,g){this.lightsActive&&a.prototype.batchSprite.call(this,c,p,g)},batchTexture:function(c,p,g,m,x,y,T,C,S,E,M,O,L,R,F,D,B,N,U,X,K,k,b,I,G,Y,V,W,H,Z,q,_){this.lightsActive&&a.prototype.batchTexture.call(this,c,p,g,m,x,y,T,C,S,E,M,O,L,R,F,D,B,N,U,X,K,k,b,I,G,Y,V,W,H,Z,q,_)},batchTextureFrame:function(c,p,g,m,x,y,T){this.lightsActive&&a.prototype.batchTextureFrame.call(this,c,p,g,m,x,y,T)}});d.LIGHT_COUNT=u,e.exports=d},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(2),r=i(880),a=i(881),l=i(58),o=new n({Extends:l,initialize:function(v){v.vertShader=h(v,"vertShader",a),v.fragShader=h(v,"fragShader",r),v.attributes=h(v,"attributes",[{name:"inPosition",size:2},{name:"inLightPosition",size:2},{name:"inLightRadius"},{name:"inLightAttenuation"},{name:"inLightColor",size:4}]),l.call(this,v)},onRender:function(u,v){this.set2f("uResolution",this.width,this.height),this.set1f("uCameraZoom",v.zoom)},batchPointLight:function(u,v,d,c,p,g,m,x,y,T,C,S){var E=u.color,M=u.intensity,O=u.radius,L=u.attenuation,R=E.r*M,F=E.g*M,D=E.b*M,B=v.alpha*u.alpha;this.shouldFlush(6)&&this.flush(),this.batchLightVert(d,c,C,S,O,L,R,F,D,B),this.batchLightVert(p,g,C,S,O,L,R,F,D,B),this.batchLightVert(m,x,C,S,O,L,R,F,D,B),this.batchLightVert(d,c,C,S,O,L,R,F,D,B),this.batchLightVert(m,x,C,S,O,L,R,F,D,B),this.batchLightVert(y,T,C,S,O,L,R,F,D,B)},batchLightVert:function(u,v,d,c,p,g,m,x,y,T){var C=this.vertexViewF32,S=this.vertexCount*this.currentShader.vertexComponentCount-1;C[++S]=u,C[++S]=v,C[++S]=d,C[++S]=c,C[++S]=p,C[++S]=g,C[++S]=m,C[++S]=x,C[++S]=y,C[++S]=T,this.vertexCount++}});e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(2),r=i(108),a=new n({Extends:r,initialize:function(o){o.topology=5,o.batchSize=h(o,"batchSize",256),r.call(this,o)}});e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(2),r=i(108),a=i(882),l=i(883),o=i(58),u=new n({Extends:r,initialize:function(d){d.fragShader=h(d,"fragShader",a),d.vertShader=h(d,"vertShader",l),d.forceZero=!0,r.call(this,d)},boot:function(){o.prototype.boot.call(this),this.set1i("uMainSampler",0)}});e.exports=u},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(884),h=i(35),r=i(0),a=i(198),l=i(885),o=i(886),u=i(2),v=i(887),d=i(382),c=i(58),p=new r({Extends:c,initialize:function(m){m.renderTarget=u(m,"renderTarget",[{scale:1},{scale:1},{scale:.5},{scale:.5}]),m.vertShader=u(m,"vertShader",d),m.shaders=u(m,"shaders",[{name:"Copy",fragShader:o},{name:"AddBlend",fragShader:n},{name:"LinearBlend",fragShader:v},{name:"ColorMatrix",fragShader:l}]),m.attributes=u(m,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),m.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],m.batchSize=1,c.call(this,m),this.colorMatrix=new a,this.copyShader,this.addShader,this.linearShader,this.colorMatrixShader,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(){c.prototype.boot.call(this);var g=this.shaders,m=this.renderTargets;this.copyShader=g[0],this.addShader=g[1],this.linearShader=g[2],this.colorMatrixShader=g[3],this.fullFrame1=m[0],this.fullFrame2=m[1],this.halfFrame1=m[2],this.halfFrame2=m[3]},copyFrame:function(g,m,x,y,T){x===void 0&&(x=1),y===void 0&&(y=!0),T===void 0&&(T=!0);var C=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",x),C.activeTexture(C.TEXTURE0),C.bindTexture(C.TEXTURE_2D,g.texture),m?(C.viewport(0,0,m.width,m.height),C.bindFramebuffer(C.FRAMEBUFFER,m.framebuffer),C.framebufferTexture2D(C.FRAMEBUFFER,C.COLOR_ATTACHMENT0,C.TEXTURE_2D,m.texture,0)):C.viewport(0,0,g.width,g.height),y&&(T?C.clearColor(0,0,0,0):C.clearColor(0,0,0,1),C.clear(C.COLOR_BUFFER_BIT)),C.bufferData(C.ARRAY_BUFFER,this.vertexData,C.STATIC_DRAW),C.drawArrays(C.TRIANGLES,0,6),C.bindFramebuffer(C.FRAMEBUFFER,null),C.bindTexture(C.TEXTURE_2D,null)},blitFrame:function(g,m,x,y,T,C){x===void 0&&(x=1),y===void 0&&(y=!0),T===void 0&&(T=!0),C===void 0&&(C=!1);var S=this.gl;if(this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",x),S.activeTexture(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,g.texture),g.height>m.height)S.viewport(0,0,g.width,g.height),this.setTargetUVs(g,m);else{var E=m.height-g.height;S.viewport(0,E,g.width,g.height)}if(S.bindFramebuffer(S.FRAMEBUFFER,m.framebuffer),S.framebufferTexture2D(S.FRAMEBUFFER,S.COLOR_ATTACHMENT0,S.TEXTURE_2D,m.texture,0),y&&(T?S.clearColor(0,0,0,0):S.clearColor(0,0,0,1),S.clear(S.COLOR_BUFFER_BIT)),C){var M=this.renderer.currentBlendMode;this.renderer.setBlendMode(h.ERASE)}S.bufferData(S.ARRAY_BUFFER,this.vertexData,S.STATIC_DRAW),S.drawArrays(S.TRIANGLES,0,6),C&&this.renderer.setBlendMode(M),S.bindFramebuffer(S.FRAMEBUFFER,null),S.bindTexture(S.TEXTURE_2D,null),this.resetUVs()},copyFrameRect:function(g,m,x,y,T,C,S,E){S===void 0&&(S=!0),E===void 0&&(E=!0);var M=this.gl;M.bindFramebuffer(M.FRAMEBUFFER,g.framebuffer),M.framebufferTexture2D(M.FRAMEBUFFER,M.COLOR_ATTACHMENT0,M.TEXTURE_2D,g.texture,0),S&&(E?M.clearColor(0,0,0,0):M.clearColor(0,0,0,1),M.clear(M.COLOR_BUFFER_BIT)),M.activeTexture(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,m.texture),M.copyTexSubImage2D(M.TEXTURE_2D,0,0,0,x,y,T,C),M.bindFramebuffer(M.FRAMEBUFFER,null),M.bindTexture(M.TEXTURE_2D,null)},copyToGame:function(g){var m=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",1),this.renderer.popFramebuffer(),m.activeTexture(m.TEXTURE0),m.bindTexture(m.TEXTURE_2D,g.texture),m.bufferData(m.ARRAY_BUFFER,this.vertexData,m.STATIC_DRAW),m.drawArrays(m.TRIANGLES,0,6),this.renderer.resetTextures()},drawFrame:function(g,m,x,y){x===void 0&&(x=!0),y===void 0&&(y=this.colorMatrix);var T=this.gl;this.setShader(this.colorMatrixShader),this.set1i("uMainSampler",0),this.set1fv("uColorMatrix",y.getData()),this.set1f("uAlpha",y.alpha),T.activeTexture(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,g.texture),m?(T.viewport(0,0,m.width,m.height),T.bindFramebuffer(T.FRAMEBUFFER,m.framebuffer),T.framebufferTexture2D(T.FRAMEBUFFER,T.COLOR_ATTACHMENT0,T.TEXTURE_2D,m.texture,0)):T.viewport(0,0,g.width,g.height),x?T.clearColor(0,0,0,0):T.clearColor(0,0,0,1),T.clear(T.COLOR_BUFFER_BIT),T.bufferData(T.ARRAY_BUFFER,this.vertexData,T.STATIC_DRAW),T.drawArrays(T.TRIANGLES,0,6),T.bindFramebuffer(T.FRAMEBUFFER,null),T.bindTexture(T.TEXTURE_2D,null)},blendFrames:function(g,m,x,y,T,C){y===void 0&&(y=1),T===void 0&&(T=!0),C===void 0&&(C=this.linearShader);var S=this.gl;this.setShader(C),this.set1i("uMainSampler1",0),this.set1i("uMainSampler2",1),this.set1f("uStrength",y),S.activeTexture(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,g.texture),S.activeTexture(S.TEXTURE1),S.bindTexture(S.TEXTURE_2D,m.texture),x?(S.bindFramebuffer(S.FRAMEBUFFER,x.framebuffer),S.framebufferTexture2D(S.FRAMEBUFFER,S.COLOR_ATTACHMENT0,S.TEXTURE_2D,x.texture,0),S.viewport(0,0,x.width,x.height)):S.viewport(0,0,g.width,g.height),T?S.clearColor(0,0,0,0):S.clearColor(0,0,0,1),S.clear(S.COLOR_BUFFER_BIT),S.bufferData(S.ARRAY_BUFFER,this.vertexData,S.STATIC_DRAW),S.drawArrays(S.TRIANGLES,0,6),S.bindFramebuffer(S.FRAMEBUFFER,null),S.bindTexture(S.TEXTURE_2D,null)},blendFramesAdditive:function(g,m,x,y,T){this.blendFrames(g,m,x,y,T,this.addShader)},clearFrame:function(g,m){m===void 0&&(m=!0);var x=this.gl;x.viewport(0,0,g.width,g.height),x.bindFramebuffer(x.FRAMEBUFFER,g.framebuffer),m?x.clearColor(0,0,0,0):x.clearColor(0,0,0,1),x.clear(x.COLOR_BUFFER_BIT);var y=this.renderer.currentFramebuffer;x.bindFramebuffer(x.FRAMEBUFFER,y)},setUVs:function(g,m,x,y,T,C,S,E){var M=this.vertexViewF32;M[2]=g,M[3]=m,M[6]=x,M[7]=y,M[10]=T,M[11]=C,M[14]=g,M[15]=m,M[18]=T,M[19]=C,M[22]=S,M[23]=E},setTargetUVs:function(g,m){var x=m.height/g.height;x>.5?x=.5-(x-.5):x=.5+(.5-x),this.setUVs(0,x,0,1+x,1,1+x,1,x)},flipX:function(){this.setUVs(1,0,1,1,0,1,0,0)},flipY:function(){this.setUVs(0,1,0,0,1,0,1,1)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)}});e.exports=p},function(e,f){e.exports=["#define SHADER_NAME PHASER_QUAD_VS","","precision mediump float;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","","varying vec2 outFragCoord;","varying vec2 outTexCoord;","","void main ()","{","    outFragCoord = inPosition.xy * 0.5 + 0.5;","    outTexCoord = inTexCoord;","","    gl_Position = vec4(inPosition, 0, 1);","}",""].join(`
`)},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(31),h=i(38),r=i(2),a=function(l,o){var u=l.getContext("experimental-webgl"),v=r(o,"callback"),d=r(o,"type","image/png"),c=r(o,"encoder",.92),p=r(o,"x",0),g=r(o,"y",0),m=r(o,"getPixel",!1),x=r(o,"isFramebuffer",!1),y=x?r(o,"bufferWidth",1):u.drawingBufferWidth,T=x?r(o,"bufferHeight",1):u.drawingBufferHeight;if(m){var C=new Uint8Array(4),S=x?g:T-g;u.readPixels(p,S,1,1,u.RGBA,u.UNSIGNED_BYTE,C),v.call(null,new h(C[0],C[1],C[2],C[3]/255))}else{var E=r(o,"width",y),M=r(o,"height",T),O=E*M*4,L=new Uint8Array(O);u.readPixels(p,T-g-M,E,M,u.RGBA,u.UNSIGNED_BYTE,L);for(var R=n.createWebGL(this,E,M),F=R.getContext("2d"),D=F.getImageData(0,0,E,M),B=D.data,N=0;N<M;N++)for(var U=0;U<E;U++){var X=((M-N-1)*E+U)*4,K=(N*E+U)*4;B[K+0]=L[X+0],B[K+1]=L[X+1],B[K+2]=L[X+2],B[K+3]=L[X+3]}F.putImageData(D,0,0);var k=new Image;k.onerror=function(){v.call(null),n.remove(R)},k.onload=function(){v.call(null,k),n.remove(R)},k.src=R.toDataURL(d,c)}};e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(33),h=function(r){var a=r.config;if(!a.hideBanner){var l="WebGL";a.renderType===n.CANVAS?l="Canvas":a.renderType===n.HEADLESS&&(l="Headless");var o=a.audio,u=r.device.audio,v;if(u.webAudio&&!o.disableWebAudio?v="Web Audio":o.noAudio||!u.webAudio&&!u.audioData?v="No Audio":v="HTML5 Audio",r.device.browser.ie)window.console&&console.log("Phaser v"+n.VERSION+" / https://phaser.io");else{var d="",c=[d];if(Array.isArray(a.bannerBackgroundColor)){var p;a.bannerBackgroundColor.forEach(function(m){d=d.concat("%c "),c.push("background: "+m),p=m}),c[c.length-1]="color: "+a.bannerTextColor+"; background: "+p}else d=d.concat("%c "),c.push("color: "+a.bannerTextColor+"; background: "+a.bannerBackgroundColor);c.push("background: transparent"),a.gameTitle&&(d=d.concat(a.gameTitle),a.gameVersion&&(d=d.concat(" v"+a.gameVersion)),a.hidePhaser||(d=d.concat(" / ")));var g="";a.hidePhaser||(d=d.concat("Phaser v"+n.VERSION+g+" ("+l+" | "+v+")")),d=d.concat(" %c "+a.gameURL),c[0]=d,console.log.apply(console,c)}}};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(6),r=i(1),a=i(386),l=new n({initialize:function(u,v){this.game=u,this.raf=new a,this.started=!1,this.running=!1,this.minFps=h(v,"min",5),this.targetFps=h(v,"target",60),this._min=1e3/this.minFps,this._target=1e3/this.targetFps,this.actualFps=this.targetFps,this.nextFpsUpdate=0,this.framesThisSecond=0,this.callback=r,this.forceSetTimeOut=h(v,"forceSetTimeOut",!1),this.time=0,this.startTime=0,this.lastTime=0,this.frame=0,this.inFocus=!0,this._pauseTime=0,this._coolDown=0,this.delta=0,this.deltaIndex=0,this.deltaHistory=[],this.deltaSmoothingMax=h(v,"deltaHistory",10),this.panicMax=h(v,"panicMax",120),this.rawDelta=0,this.now=0,this.smoothStep=h(v,"smoothStep",!0)},blur:function(){this.inFocus=!1},focus:function(){this.inFocus=!0,this.resetDelta()},pause:function(){this._pauseTime=window.performance.now()},resume:function(){this.resetDelta(),this.startTime+=this.time-this._pauseTime},resetDelta:function(){var o=window.performance.now();this.time=o,this.lastTime=o,this.nextFpsUpdate=o+1e3,this.framesThisSecond=0;for(var u=0;u<this.deltaSmoothingMax;u++)this.deltaHistory[u]=Math.min(this._target,this.deltaHistory[u]);this.delta=0,this.deltaIndex=0,this._coolDown=this.panicMax},start:function(o){if(this.started)return this;this.started=!0,this.running=!0;for(var u=0;u<this.deltaSmoothingMax;u++)this.deltaHistory[u]=this._target;this.resetDelta(),this.startTime=window.performance.now(),this.callback=o,this.raf.start(this.step.bind(this),this.forceSetTimeOut,this._target)},step:function(){var o=window.performance.now();this.now=o;var u=o-this.lastTime;u<0&&(u=0),this.rawDelta=u;var v=this.deltaIndex,d=this.deltaHistory,c=this.deltaSmoothingMax,p=u,g=u;if(this.smoothStep){(this._coolDown>0||!this.inFocus)&&(this._coolDown--,p=Math.min(p,this._target)),p>this._min&&(p=d[v],p=Math.min(p,this._min)),d[v]=p,this.deltaIndex++,this.deltaIndex>c&&(this.deltaIndex=0),g=0;for(var m=0;m<c;m++)g+=d[m];g/=c}this.delta=g,this.time+=this.rawDelta,o>this.nextFpsUpdate&&(this.actualFps=.25*this.framesThisSecond+.75*this.actualFps,this.nextFpsUpdate=o+1e3,this.framesThisSecond=0),this.framesThisSecond++;var x=g/this._target;this.callback(o,g,x),this.lastTime=o,this.frame++},tick:function(){this.step()},sleep:function(){this.running&&(this.raf.stop(),this.running=!1)},wake:function(o){this.running||(o&&(this.startTime+=-this.lastTime+(this.lastTime+window.performance.now())),this.raf.start(this.step.bind(this),this.useRAF),this.running=!0,this.step())},getDuration:function(){return Math.round(this.lastTime-this.startTime)/1e3},getDurationMS:function(){return Math.round(this.lastTime-this.startTime)},stop:function(){return this.running=!1,this.started=!1,this.raf.stop(),this},destroy:function(){this.stop(),this.callback=r,this.raf=null,this.game=null}});e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(1),r=new n({initialize:function(){this.isRunning=!1,this.callback=h,this.tick=0,this.isSetTimeOut=!1,this.timeOutID=null,this.lastTime=0,this.target=0;var l=this;this.step=function o(){var u=window.performance.now();l.lastTime=l.tick,l.tick=u,l.callback(u),l.timeOutID=window.requestAnimationFrame(o)},this.stepTimeout=function o(){var u=Date.now(),v=Math.min(Math.max(l.target*2+l.tick-u,0),l.target);l.lastTime=l.tick,l.tick=u,l.callback(u),l.timeOutID=window.setTimeout(o,v)}},start:function(a,l,o){this.isRunning||(this.callback=a,this.isSetTimeOut=l,this.target=o,this.isRunning=!0,this.timeOutID=l?window.setTimeout(this.stepTimeout,0):window.requestAnimationFrame(this.step))},stop:function(){this.isRunning=!1,this.isSetTimeOut?clearTimeout(this.timeOutID):window.cancelAnimationFrame(this.timeOutID)},destroy:function(){this.stop(),this.callback=h}});e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(22),h=function(r){var a,l=r.events;if(document.hidden!==void 0)a="visibilitychange";else{var o=["webkit","moz","ms"];o.forEach(function(v){document[v+"Hidden"]!==void 0&&(document.hidden=function(){return document[v+"Hidden"]},a=v+"visibilitychange")})}var u=function(v){document.hidden||v.type==="pause"?l.emit(n.HIDDEN):l.emit(n.VISIBLE)};a&&document.addEventListener(a,u,!1),window.onblur=function(){l.emit(n.BLUR)},window.onfocus=function(){l.emit(n.FOCUS)},window.focus&&r.config.autoFocus&&window.focus()};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(389),h=i(31),r=i(6),a=function(l){var o=r(l,"data",[]),u=r(l,"canvas",null),v=r(l,"palette",n),d=r(l,"pixelWidth",1),c=r(l,"pixelHeight",d),p=r(l,"resizeCanvas",!0),g=r(l,"clearCanvas",!0),m=r(l,"preRender",null),x=r(l,"postRender",null),y=Math.floor(Math.abs(o[0].length*d)),T=Math.floor(Math.abs(o.length*c));u||(u=h.create2D(this,y,T),p=!1,g=!1),p&&(u.width=y,u.height=T);var C=u.getContext("2d");g&&C.clearRect(0,0,y,T),m&&m(u,C);for(var S=0;S<o.length;S++)for(var E=o[S],M=0;M<E.length;M++){var O=E[M];O!=="."&&O!==" "&&(C.fillStyle=v[O],C.fillRect(M*d,S*c,d,c))}return x&&x(u,C),u};e.exports=a},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={0:"#000",1:"#9D9D9D",2:"#FFF",3:"#BE2633",4:"#E06F8B",5:"#493C2B",6:"#A46422",7:"#EB8931",8:"#F7E26B",9:"#2F484E",A:"#44891A",B:"#A3CE27",C:"#1B2632",D:"#005784",E:"#31A2F2",F:"#B2DCEF"}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(358),r=i(94),a=i(3),l=new n({Extends:r,initialize:function(u,v,d,c){r.call(this,"CubicBezierCurve"),Array.isArray(u)&&(c=new a(u[6],u[7]),d=new a(u[4],u[5]),v=new a(u[2],u[3]),u=new a(u[0],u[1])),this.p0=u,this.p1=v,this.p2=d,this.p3=c},getStartPoint:function(o){return o===void 0&&(o=new a),o.copy(this.p0)},getResolution:function(o){return o},getPoint:function(o,u){u===void 0&&(u=new a);var v=this.p0,d=this.p1,c=this.p2,p=this.p3;return u.set(h(o,v.x,d.x,c.x,p.x),h(o,v.y,d.y,c.y,p.y))},draw:function(o,u){u===void 0&&(u=32);var v=this.getPoints(u);o.beginPath(),o.moveTo(this.p0.x,this.p0.y);for(var d=1;d<v.length;d++)o.lineTo(v[d].x,v[d].y);return o.strokePath(),o},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y,this.p3.x,this.p3.y]}}});l.fromJSON=function(o){var u=o.points,v=new a(u[0],u[1]),d=new a(u[2],u[3]),c=new a(u[4],u[5]),p=new a(u[6],u[7]);return new l(v,d,c,p)},e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(94),r=i(36),a=i(6),l=i(196),o=i(3),u=new n({Extends:h,initialize:function(d,c,p,g,m,x,y,T){if(typeof d=="object"){var C=d;d=a(C,"x",0),c=a(C,"y",0),p=a(C,"xRadius",0),g=a(C,"yRadius",p),m=a(C,"startAngle",0),x=a(C,"endAngle",360),y=a(C,"clockwise",!1),T=a(C,"rotation",0)}else g===void 0&&(g=p),m===void 0&&(m=0),x===void 0&&(x=360),y===void 0&&(y=!1),T===void 0&&(T=0);h.call(this,"EllipseCurve"),this.p0=new o(d,c),this._xRadius=p,this._yRadius=g,this._startAngle=r(m),this._endAngle=r(x),this._clockwise=y,this._rotation=r(T)},getStartPoint:function(v){return v===void 0&&(v=new o),this.getPoint(0,v)},getResolution:function(v){return v*2},getPoint:function(v,d){d===void 0&&(d=new o);for(var c=Math.PI*2,p=this._endAngle-this._startAngle,g=Math.abs(p)<Number.EPSILON;p<0;)p+=c;for(;p>c;)p-=c;p<Number.EPSILON&&(g?p=0:p=c),this._clockwise&&!g&&(p===c?p=-c:p=p-c);var m=this._startAngle+v*p,x=this.p0.x+this._xRadius*Math.cos(m),y=this.p0.y+this._yRadius*Math.sin(m);if(this._rotation!==0){var T=Math.cos(this._rotation),C=Math.sin(this._rotation),S=x-this.p0.x,E=y-this.p0.y;x=S*T-E*C+this.p0.x,y=S*C+E*T+this.p0.y}return d.set(x,y)},setXRadius:function(v){return this.xRadius=v,this},setYRadius:function(v){return this.yRadius=v,this},setWidth:function(v){return this.xRadius=v/2,this},setHeight:function(v){return this.yRadius=v/2,this},setStartAngle:function(v){return this.startAngle=v,this},setEndAngle:function(v){return this.endAngle=v,this},setClockwise:function(v){return this.clockwise=v,this},setRotation:function(v){return this.rotation=v,this},x:{get:function(){return this.p0.x},set:function(v){this.p0.x=v}},y:{get:function(){return this.p0.y},set:function(v){this.p0.y=v}},xRadius:{get:function(){return this._xRadius},set:function(v){this._xRadius=v}},yRadius:{get:function(){return this._yRadius},set:function(v){this._yRadius=v}},startAngle:{get:function(){return l(this._startAngle)},set:function(v){this._startAngle=r(v)}},endAngle:{get:function(){return l(this._endAngle)},set:function(v){this._endAngle=r(v)}},clockwise:{get:function(){return this._clockwise},set:function(v){this._clockwise=v}},angle:{get:function(){return l(this._rotation)},set:function(v){this._rotation=r(v)}},rotation:{get:function(){return this._rotation},set:function(v){this._rotation=v}},toJSON:function(){return{type:this.type,x:this.p0.x,y:this.p0.y,xRadius:this._xRadius,yRadius:this._yRadius,startAngle:l(this._startAngle),endAngle:l(this._endAngle),clockwise:this._clockwise,rotation:l(this._rotation)}}});u.fromJSON=function(v){return new u(v)},e.exports=u},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(94),r=i(199),a=i(10),l=i(3),o=new n({Extends:h,initialize:function(v,d){h.call(this,"LineCurve"),Array.isArray(v)&&(d=new l(v[2],v[3]),v=new l(v[0],v[1])),this.p0=v,this.p1=d,this.arcLengthDivisions=1},getBounds:function(u){return u===void 0&&(u=new a),r([this.p0,this.p1],u)},getStartPoint:function(u){return u===void 0&&(u=new l),u.copy(this.p0)},getResolution:function(u){return u===void 0&&(u=1),u},getPoint:function(u,v){return v===void 0&&(v=new l),u===1?v.copy(this.p1):(v.copy(this.p1).subtract(this.p0).scale(u).add(this.p0),v)},getPointAt:function(u,v){return this.getPoint(u,v)},getTangent:function(u,v){return v===void 0&&(v=new l),v.copy(this.p1).subtract(this.p0).normalize(),v},getUtoTmapping:function(u,v,d){var c;if(v){var p=this.getLengths(d),g=p[p.length-1],m=Math.min(v,g);c=m/g}else c=u;return c},draw:function(u){return u.lineBetween(this.p0.x,this.p0.y,this.p1.x,this.p1.y),u},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y]}}});o.fromJSON=function(u){var v=u.points,d=new l(v[0],v[1]),c=new l(v[2],v[3]);return new o(d,c)},e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(3),r=new n({initialize:function(l,o){this.active=!1,this.p0=new h(l,o)},getPoint:function(a,l){return l===void 0&&(l=new h),l.copy(this.p0)},getPointAt:function(a,l){return this.getPoint(a,l)},getResolution:function(){return 1},getLength:function(){return 0},toJSON:function(){return{type:"MoveTo",points:[this.p0.x,this.p0.y]}}});e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(94),r=i(359),a=i(3),l=new n({Extends:h,initialize:function(u,v,d){h.call(this,"QuadraticBezier"),Array.isArray(u)&&(d=new a(u[4],u[5]),v=new a(u[2],u[3]),u=new a(u[0],u[1])),this.p0=u,this.p1=v,this.p2=d},getStartPoint:function(o){return o===void 0&&(o=new a),o.copy(this.p0)},getResolution:function(o){return o},getPoint:function(o,u){u===void 0&&(u=new a);var v=this.p0,d=this.p1,c=this.p2;return u.set(r(o,v.x,d.x,c.x),r(o,v.y,d.y,c.y))},draw:function(o,u){u===void 0&&(u=32);var v=this.getPoints(u);o.beginPath(),o.moveTo(this.p0.x,this.p0.y);for(var d=1;d<v.length;d++)o.lineTo(v[d].x,v[d].y);return o.strokePath(),o},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y]}}});l.fromJSON=function(o){var u=o.points,v=new a(u[0],u[1]),d=new a(u[2],u[3]),c=new a(u[4],u[5]);return new l(v,d,c)},e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(194),h=i(0),r=i(94),a=i(3),l=new h({Extends:r,initialize:function(u){u===void 0&&(u=[]),r.call(this,"SplineCurve"),this.points=[],this.addPoints(u)},addPoints:function(o){for(var u=0;u<o.length;u++){var v=new a;typeof o[u]=="number"?(v.x=o[u],v.y=o[u+1],u++):Array.isArray(o[u])?(v.x=o[u][0],v.y=o[u][1]):(v.x=o[u].x,v.y=o[u].y),this.points.push(v)}return this},addPoint:function(o,u){var v=new a(o,u);return this.points.push(v),v},getStartPoint:function(o){return o===void 0&&(o=new a),o.copy(this.points[0])},getResolution:function(o){return o*this.points.length},getPoint:function(o,u){u===void 0&&(u=new a);var v=this.points,d=(v.length-1)*o,c=Math.floor(d),p=d-c,g=v[c===0?c:c-1],m=v[c],x=v[c>v.length-2?v.length-1:c+1],y=v[c>v.length-3?v.length-1:c+2];return u.set(n(p,g.x,m.x,x.x,y.x),n(p,g.y,m.y,x.y,y.y))},toJSON:function(){for(var o=[],u=0;u<this.points.length;u++)o.push(this.points[u].x),o.push(this.points[u].y);return{type:this.type,points:o}}});l.fromJSON=function(o){return new l(o.points)},e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=new n({initialize:function(a,l,o,u){(!l||l==="")&&(l=["precision mediump float;","uniform vec2 resolution;","varying vec2 fragCoord;","void main () {","    vec2 uv = fragCoord / resolution.xy;","    gl_FragColor = vec4(uv.xyx, 1.0);","}"].join(`
`)),(!o||o==="")&&(o=["precision mediump float;","uniform mat4 uProjectionMatrix;","uniform mat4 uViewMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","varying vec2 fragCoord;","varying vec2 outTexCoord;","void main () {","   gl_Position = uProjectionMatrix * uViewMatrix * vec4(inPosition, 1.0, 1.0);","   fragCoord = vec2(inPosition.x, uResolution.y - inPosition.y);","   outTexCoord = vec2(inPosition.x / uResolution.x, fragCoord.y / uResolution.y);","}"].join(`
`)),u===void 0&&(u=null),this.key=a,this.fragmentSrc=l,this.vertexSrc=o,this.uniforms=u}});e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(38);n.ColorSpectrum=i(909),n.ColorToRGBA=i(910),n.ComponentToHex=i(398),n.GetColor=i(103),n.GetColor32=i(328),n.HexStringToColor=i(327),n.HSLToColor=i(911),n.HSVColorWheel=i(912),n.HSVToRGB=i(188),n.HueToComponent=i(399),n.IntegerToColor=i(189),n.IntegerToRGB=i(330),n.Interpolate=i(913),n.ObjectToColor=i(331),n.RandomRGB=i(914),n.RGBStringToColor=i(332),n.RGBToHSV=i(329),n.RGBToString=i(915),n.ValueToColor=i(187),e.exports=n},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){var h=n.toString(16);return h.length===1?"0"+h:h};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r){return r<0&&(r+=1),r>1&&(r-=1),r<.16666666666666666?n+(h-n)*6*r:r<.5?h:r<.6666666666666666?n+(h-n)*(.6666666666666666-r)*6:n};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(105),h=function(r){if(document.readyState==="complete"||document.readyState==="interactive"){r();return}var a=function(){document.removeEventListener("deviceready",a,!0),document.removeEventListener("DOMContentLoaded",a,!0),window.removeEventListener("load",a,!0),r()};document.body?n.cordova?document.addEventListener("deviceready",a,!1):(document.addEventListener("DOMContentLoaded",a,!0),window.addEventListener("load",a,!0)):window.setTimeout(a,20)};e.exports=h},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){if(!n)return window.innerHeight;var h=Math.abs(window.orientation),r={w:0,h:0},a=document.createElement("div");return a.setAttribute("style","position: fixed; height: 100vh; width: 0; top: 0"),document.documentElement.appendChild(a),r.w=h===90?a.offsetHeight:window.innerWidth,r.h=h===90?window.innerWidth:a.offsetHeight,document.documentElement.removeChild(a),a=null,Math.abs(window.orientation)!==90?r.h:r.w};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(201),h=function(r,a){var l=window.screen,o=l?l.orientation||l.mozOrientation||l.msOrientation:!1;if(o&&typeof o.type=="string")return o.type;if(typeof o=="string")return o;if(typeof window.orientation=="number")return window.orientation===0||window.orientation===180?n.ORIENTATION.PORTRAIT:n.ORIENTATION.LANDSCAPE;if(window.matchMedia){if(window.matchMedia("(orientation: portrait)").matches)return n.ORIENTATION.PORTRAIT;if(window.matchMedia("(orientation: landscape)").matches)return n.ORIENTATION.LANDSCAPE}else return a>r?n.ORIENTATION.PORTRAIT:n.ORIENTATION.LANDSCAPE};e.exports=h},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={NO_CENTER:0,CENTER_BOTH:1,CENTER_HORIZONTALLY:2,CENTER_VERTICALLY:3}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={LANDSCAPE:"landscape-primary",PORTRAIT:"portrait-primary"}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={NONE:0,WIDTH_CONTROLS_HEIGHT:1,HEIGHT_CONTROLS_WIDTH:2,FIT:3,ENVELOP:4,RESIZE:5}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={NO_ZOOM:1,ZOOM_2X:2,ZOOM_4X:4,MAX_ZOOM:-1}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){var h;return n!==""&&(typeof n=="string"?h=document.getElementById(n):n&&n.nodeType===1&&(h=n)),h||(h=document.body),h};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){var h="";try{if(window.DOMParser){var r=new DOMParser;h=r.parseFromString(n,"text/xml")}else h=new ActiveXObject("Microsoft.XMLDOM"),h.loadXML(n)}catch{h=null}return!h||!h.documentElement||h.getElementsByTagName("parsererror").length?null:h};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(203),r=i(9),a=i(51),l=i(22),o=i(410),u=i(411),v=i(412),d=i(413),c=i(25),p=i(177),g=new n({initialize:function(x,y){this.game=x,this.scaleManager,this.canvas,this.config=y,this.enabled=!0,this.events=new r,this.isOver=!0,this.defaultCursor="",this.keyboard=y.inputKeyboard?new o(this):null,this.mouse=y.inputMouse?new u(this):null,this.touch=y.inputTouch?new d(this):null,this.pointers=[],this.pointersTotal=y.inputActivePointers,y.inputTouch&&this.pointersTotal===1&&(this.pointersTotal=2);for(var T=0;T<=this.pointersTotal;T++){var C=new v(this,T);C.smoothFactor=y.inputSmoothFactor,this.pointers.push(C)}this.mousePointer=y.inputMouse?this.pointers[0]:null,this.activePointer=this.pointers[0],this.globalTopOnly=!0,this.time=0,this._tempPoint={x:0,y:0},this._tempHitTest=[],this._tempMatrix=new c,this._tempMatrix2=new c,this._tempSkip=!1,this.mousePointerContainer=[this.mousePointer],x.events.once(l.BOOT,this.boot,this)},boot:function(){this.canvas=this.game.canvas,this.scaleManager=this.game.scale,this.events.emit(a.MANAGER_BOOT),this.game.events.on(l.PRE_RENDER,this.preRender,this),this.game.events.once(l.DESTROY,this.destroy,this)},setCanvasOver:function(m){this.isOver=!0,this.events.emit(a.GAME_OVER,m)},setCanvasOut:function(m){this.isOver=!1,this.events.emit(a.GAME_OUT,m)},preRender:function(){var m=this.game.loop.now,x=this.game.loop.delta,y=this.game.scene.getScenes(!0,!0);this.time=m,this.events.emit(a.MANAGER_UPDATE);for(var T=0;T<y.length;T++){var C=y[T];if(C.sys.input&&C.sys.input.updatePoll(m,x)&&this.globalTopOnly)return}},setDefaultCursor:function(m){this.defaultCursor=m,this.canvas.style.cursor!==m&&(this.canvas.style.cursor=m)},setCursor:function(m){m.cursor&&(this.canvas.style.cursor=m.cursor)},resetCursor:function(m){m.cursor&&this.canvas&&(this.canvas.style.cursor=this.defaultCursor)},addPointer:function(m){m===void 0&&(m=1);var x=[];this.pointersTotal+m>10&&(m=10-this.pointersTotal);for(var y=0;y<m;y++){var T=this.pointers.length,C=new v(this,T);C.smoothFactor=this.config.inputSmoothFactor,this.pointers.push(C),this.pointersTotal++,x.push(C)}return x},updateInputPlugins:function(m,x){var y=this.game.scene.getScenes(!0,!0);this._tempSkip=!1;for(var T=0;T<y.length;T++){var C=y[T];if(C.sys.input){var S=C.sys.input.update(m,x);if(S&&this.globalTopOnly||this._tempSkip)return}}},onTouchStart:function(m){for(var x=this.pointers,y=[],T=0;T<m.changedTouches.length;T++)for(var C=m.changedTouches[T],S=1;S<this.pointersTotal;S++){var E=x[S];if(!E.active){E.touchstart(C,m),this.activePointer=E,y.push(E);break}}this.updateInputPlugins(h.TOUCH_START,y)},onTouchMove:function(m){for(var x=this.pointers,y=[],T=0;T<m.changedTouches.length;T++)for(var C=m.changedTouches[T],S=1;S<this.pointersTotal;S++){var E=x[S];if(E.active&&E.identifier===C.identifier){E.touchmove(C,m),this.activePointer=E,y.push(E);break}}this.updateInputPlugins(h.TOUCH_MOVE,y)},onTouchEnd:function(m){for(var x=this.pointers,y=[],T=0;T<m.changedTouches.length;T++)for(var C=m.changedTouches[T],S=1;S<this.pointersTotal;S++){var E=x[S];if(E.active&&E.identifier===C.identifier){E.touchend(C,m),y.push(E);break}}this.updateInputPlugins(h.TOUCH_END,y)},onTouchCancel:function(m){for(var x=this.pointers,y=[],T=0;T<m.changedTouches.length;T++)for(var C=m.changedTouches[T],S=1;S<this.pointersTotal;S++){var E=x[S];if(E.active&&E.identifier===C.identifier){E.touchcancel(C,m),y.push(E);break}}this.updateInputPlugins(h.TOUCH_CANCEL,y)},onMouseDown:function(m){var x=this.mousePointer;x.down(m),x.updateMotion(),this.activePointer=x,this.updateInputPlugins(h.MOUSE_DOWN,this.mousePointerContainer)},onMouseMove:function(m){var x=this.mousePointer;x.move(m),x.updateMotion(),this.activePointer=x,this.updateInputPlugins(h.MOUSE_MOVE,this.mousePointerContainer)},onMouseUp:function(m){var x=this.mousePointer;x.up(m),x.updateMotion(),this.activePointer=x,this.updateInputPlugins(h.MOUSE_UP,this.mousePointerContainer)},onMouseWheel:function(m){var x=this.mousePointer;x.wheel(m),this.activePointer=x,this.updateInputPlugins(h.MOUSE_WHEEL,this.mousePointerContainer)},onPointerLockChange:function(m){var x=this.mouse.locked;this.mousePointer.locked=x,this.events.emit(a.POINTERLOCK_CHANGE,m,x)},inputCandidate:function(m,x){var y=m.input;if(!y||!y.enabled||!y.alwaysEnabled&&!m.willRender(x))return!1;var T=!0,C=m.parentContainer;if(C)do{if(!C.willRender(x)){T=!1;break}C=C.parentContainer}while(C);return T},hitTest:function(m,x,y,T){T===void 0&&(T=this._tempHitTest);var C=this._tempPoint,S=y.scrollX,E=y.scrollY;T.length=0;var M=m.x,O=m.y;y.getWorldPoint(M,O,C),m.worldX=C.x,m.worldY=C.y;for(var L={x:0,y:0},R=this._tempMatrix,F=this._tempMatrix2,D=0;D<x.length;D++){var B=x[D];if(!!this.inputCandidate(B,y)){var N=C.x+S*B.scrollFactorX-S,U=C.y+E*B.scrollFactorY-E;B.parentContainer?(B.getWorldTransformMatrix(R,F),R.applyInverse(N,U,L)):p(N,U,B.x,B.y,B.rotation,B.scaleX,B.scaleY,L),this.pointWithinHitArea(B,L.x,L.y)&&T.push(B)}}return T},pointWithinHitArea:function(m,x,y){x+=m.displayOriginX,y+=m.displayOriginY;var T=m.input;return T&&T.hitAreaCallback(T.hitArea,x,y,m)?(T.localX=x,T.localY=y,!0):!1},pointWithinInteractiveObject:function(m,x,y){return m.hitArea?(x+=m.gameObject.displayOriginX,y+=m.gameObject.displayOriginY,m.localX=x,m.localY=y,m.hitAreaCallback(m.hitArea,x,y,m)):!1},transformPointer:function(m,x,y,T){var C=m.position,S=m.prevPosition;S.x=C.x,S.y=C.y;var E=this.scaleManager.transformX(x),M=this.scaleManager.transformY(y),O=m.smoothFactor;!T||O===0?(C.x=E,C.y=M):(C.x=E*O+S.x*(1-O),C.y=M*O+S.y*(1-O))},destroy:function(){this.events.removeAllListeners(),this.game.events.off(l.PRE_RENDER),this.keyboard&&this.keyboard.destroy(),this.mouse&&this.mouse.destroy(),this.touch&&this.touch.destroy();for(var m=0;m<this.pointers.length;m++)this.pointers[m].destroy();this.pointers=[],this._tempHitTest=[],this._tempMatrix.destroy(),this.canvas=null,this.game=null}});e.exports=g},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(93),h=i(0),r=i(22),a=i(51),l=i(143),o=i(1),u=new h({initialize:function(d){this.manager=d,this.queue=[],this.preventDefault=!0,this.captures=[],this.enabled=!1,this.target,this.onKeyDown=o,this.onKeyUp=o,d.events.once(a.MANAGER_BOOT,this.boot,this)},boot:function(){var v=this.manager.config;this.enabled=v.inputKeyboard,this.target=v.inputKeyboardEventTarget,this.addCapture(v.inputKeyboardCapture),!this.target&&window&&(this.target=window),this.enabled&&this.target&&this.startListeners(),this.manager.game.events.on(r.POST_STEP,this.postUpdate,this)},startListeners:function(){var v=this;this.onKeyDown=function(c){if(!(c.defaultPrevented||!v.enabled||!v.manager)){v.queue.push(c),v.manager.events.emit(a.MANAGER_PROCESS);var p=c.altKey||c.ctrlKey||c.shiftKey||c.metaKey;v.preventDefault&&!p&&v.captures.indexOf(c.keyCode)>-1&&c.preventDefault()}},this.onKeyUp=function(c){if(!(c.defaultPrevented||!v.enabled||!v.manager)){v.queue.push(c),v.manager.events.emit(a.MANAGER_PROCESS);var p=c.altKey||c.ctrlKey||c.shiftKey||c.metaKey;v.preventDefault&&!p&&v.captures.indexOf(c.keyCode)>-1&&c.preventDefault()}};var d=this.target;d&&(d.addEventListener("keydown",this.onKeyDown,!1),d.addEventListener("keyup",this.onKeyUp,!1),this.enabled=!0)},stopListeners:function(){var v=this.target;v.removeEventListener("keydown",this.onKeyDown,!1),v.removeEventListener("keyup",this.onKeyUp,!1),this.enabled=!1},postUpdate:function(){this.queue=[]},addCapture:function(v){typeof v=="string"&&(v=v.split(",")),Array.isArray(v)||(v=[v]);for(var d=this.captures,c=0;c<v.length;c++){var p=v[c];typeof p=="string"&&(p=l[p.trim().toUpperCase()]),d.indexOf(p)===-1&&d.push(p)}this.preventDefault=d.length>0},removeCapture:function(v){typeof v=="string"&&(v=v.split(",")),Array.isArray(v)||(v=[v]);for(var d=this.captures,c=0;c<v.length;c++){var p=v[c];typeof p=="string"&&(p=l[p.toUpperCase()]),n(d,p)}this.preventDefault=d.length>0},clearCaptures:function(){this.captures=[],this.preventDefault=!1},destroy:function(){this.stopListeners(),this.clearCaptures(),this.queue=[],this.manager.game.events.off(r.POST_RENDER,this.postUpdate,this),this.target=null,this.enabled=!1,this.manager=null}});e.exports=u},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(191),r=i(51),a=i(1),l=new n({initialize:function(u){this.manager=u,this.preventDefaultDown=!0,this.preventDefaultUp=!0,this.preventDefaultMove=!0,this.preventDefaultWheel=!1,this.enabled=!1,this.target,this.locked=!1,this.onMouseMove=a,this.onMouseDown=a,this.onMouseUp=a,this.onMouseDownWindow=a,this.onMouseUpWindow=a,this.onMouseOver=a,this.onMouseOut=a,this.onMouseWheel=a,this.pointerLockChange=a,this.isTop=!0,u.events.once(r.MANAGER_BOOT,this.boot,this)},boot:function(){var o=this.manager.config;this.enabled=o.inputMouse,this.target=o.inputMouseEventTarget,this.passive=o.inputMousePassive,this.preventDefaultDown=o.inputMousePreventDefaultDown,this.preventDefaultUp=o.inputMousePreventDefaultUp,this.preventDefaultMove=o.inputMousePreventDefaultMove,this.preventDefaultWheel=o.inputMousePreventDefaultWheel,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,o.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return document.body.addEventListener("contextmenu",function(o){return o.preventDefault(),!1}),this},requestPointerLock:function(){if(h.pointerLock){var o=this.target;o.requestPointerLock=o.requestPointerLock||o.mozRequestPointerLock||o.webkitRequestPointerLock,o.requestPointerLock()}},releasePointerLock:function(){h.pointerLock&&(document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock())},startListeners:function(){var o=this.target;if(!!o){var u=this,v=this.manager,d=v.canvas,c=window&&window.focus&&v.game.config.autoFocus;this.onMouseMove=function(g){!g.defaultPrevented&&u.enabled&&v&&v.enabled&&(v.onMouseMove(g),u.preventDefaultMove&&g.preventDefault())},this.onMouseDown=function(g){c&&window.focus(),!g.defaultPrevented&&u.enabled&&v&&v.enabled&&(v.onMouseDown(g),u.preventDefaultDown&&g.target===d&&g.preventDefault())},this.onMouseDownWindow=function(g){!g.defaultPrevented&&u.enabled&&v&&v.enabled&&g.target!==d&&v.onMouseDown(g)},this.onMouseUp=function(g){!g.defaultPrevented&&u.enabled&&v&&v.enabled&&(v.onMouseUp(g),u.preventDefaultUp&&g.target===d&&g.preventDefault())},this.onMouseUpWindow=function(g){!g.defaultPrevented&&u.enabled&&v&&v.enabled&&g.target!==d&&v.onMouseUp(g)},this.onMouseOver=function(g){!g.defaultPrevented&&u.enabled&&v&&v.enabled&&v.setCanvasOver(g)},this.onMouseOut=function(g){!g.defaultPrevented&&u.enabled&&v&&v.enabled&&v.setCanvasOut(g)},this.onMouseWheel=function(g){!g.defaultPrevented&&u.enabled&&v&&v.enabled&&v.onMouseWheel(g),u.preventDefaultWheel&&g.target===d&&g.preventDefault()};var p={passive:!0};if(o.addEventListener("mousemove",this.onMouseMove),o.addEventListener("mousedown",this.onMouseDown),o.addEventListener("mouseup",this.onMouseUp),o.addEventListener("mouseover",this.onMouseOver,p),o.addEventListener("mouseout",this.onMouseOut,p),this.preventDefaultWheel?o.addEventListener("wheel",this.onMouseWheel,{passive:!1}):o.addEventListener("wheel",this.onMouseWheel,p),window&&v.game.config.inputWindowEvents)try{window.top.addEventListener("mousedown",this.onMouseDownWindow,p),window.top.addEventListener("mouseup",this.onMouseUpWindow,p)}catch{window.addEventListener("mousedown",this.onMouseDownWindow,p),window.addEventListener("mouseup",this.onMouseUpWindow,p),this.isTop=!1}h.pointerLock&&(this.pointerLockChange=function(g){var m=u.target;u.locked=document.pointerLockElement===m||document.mozPointerLockElement===m||document.webkitPointerLockElement===m,v.onPointerLockChange(g)},document.addEventListener("pointerlockchange",this.pointerLockChange,!0),document.addEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.addEventListener("webkitpointerlockchange",this.pointerLockChange,!0)),this.enabled=!0}},stopListeners:function(){var o=this.target;o.removeEventListener("mousemove",this.onMouseMove),o.removeEventListener("mousedown",this.onMouseDown),o.removeEventListener("mouseup",this.onMouseUp),o.removeEventListener("mouseover",this.onMouseOver),o.removeEventListener("mouseout",this.onMouseOut),window&&(o=this.isTop?window.top:window,o.removeEventListener("mousedown",this.onMouseDownWindow),o.removeEventListener("mouseup",this.onMouseUpWindow)),h.pointerLock&&(document.removeEventListener("pointerlockchange",this.pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this.pointerLockChange,!0))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(349),h=i(0),r=i(50),a=i(124),l=i(360),o=i(3),u=i(105),v=new h({initialize:function(c,p){this.manager=c,this.id=p,this.event,this.downElement,this.upElement,this.camera=null,this.button=0,this.buttons=0,this.position=new o,this.prevPosition=new o,this.midPoint=new o(-1,-1),this.velocity=new o,this.angle=0,this.distance=0,this.smoothFactor=0,this.motionFactor=.2,this.worldX=0,this.worldY=0,this.moveTime=0,this.downX=0,this.downY=0,this.downTime=0,this.upX=0,this.upY=0,this.upTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.active=p===0,this.locked=!1,this.deltaX=0,this.deltaY=0,this.deltaZ=0},updateWorldPoint:function(d){var c=d.getWorldPoint(this.x,this.y);return this.worldX=c.x,this.worldY=c.y,this},positionToCamera:function(d,c){return d.getWorldPoint(this.x,this.y,c)},updateMotion:function(){var d=this.position.x,c=this.position.y,p=this.midPoint.x,g=this.midPoint.y;if(!(d===p&&c===g)){var m=l(this.motionFactor,p,d),x=l(this.motionFactor,g,c);a(m,d,.1)&&(m=d),a(x,c,.1)&&(x=c),this.midPoint.set(m,x);var y=d-m,T=c-x;this.velocity.set(y,T),this.angle=n(m,x,d,c),this.distance=Math.sqrt(y*y+T*T)}},up:function(d){"buttons"in d&&(this.buttons=d.buttons),this.event=d,this.button=d.button,this.upElement=d.target,this.manager.transformPointer(this,d.pageX,d.pageY,!1),d.button===0&&(this.primaryDown=!1,this.upX=this.x,this.upY=this.y),this.buttons===0&&(this.isDown=!1,this.upTime=d.timeStamp,this.wasTouch=!1)},down:function(d){"buttons"in d&&(this.buttons=d.buttons),this.event=d,this.button=d.button,this.downElement=d.target,this.manager.transformPointer(this,d.pageX,d.pageY,!1),d.button===0&&(this.primaryDown=!0,this.downX=this.x,this.downY=this.y),u.macOS&&d.ctrlKey&&(this.buttons=2,this.primaryDown=!1),this.isDown||(this.isDown=!0,this.downTime=d.timeStamp),this.wasTouch=!1},move:function(d){"buttons"in d&&(this.buttons=d.buttons),this.event=d,this.manager.transformPointer(this,d.pageX,d.pageY,!0),this.locked&&(this.movementX=d.movementX||d.mozMovementX||d.webkitMovementX||0,this.movementY=d.movementY||d.mozMovementY||d.webkitMovementY||0),this.moveTime=d.timeStamp,this.wasTouch=!1},wheel:function(d){"buttons"in d&&(this.buttons=d.buttons),this.event=d,this.manager.transformPointer(this,d.pageX,d.pageY,!1),this.deltaX=d.deltaX,this.deltaY=d.deltaY,this.deltaZ=d.deltaZ,this.wasTouch=!1},touchstart:function(d,c){d.pointerId&&(this.pointerId=d.pointerId),this.identifier=d.identifier,this.target=d.target,this.active=!0,this.buttons=1,this.event=c,this.downElement=d.target,this.manager.transformPointer(this,d.pageX,d.pageY,!1),this.primaryDown=!0,this.downX=this.x,this.downY=this.y,this.downTime=c.timeStamp,this.isDown=!0,this.wasTouch=!0,this.wasCanceled=!1,this.updateMotion()},touchmove:function(d,c){this.event=c,this.manager.transformPointer(this,d.pageX,d.pageY,!0),this.moveTime=c.timeStamp,this.wasTouch=!0,this.updateMotion()},touchend:function(d,c){this.buttons=0,this.event=c,this.upElement=d.target,this.manager.transformPointer(this,d.pageX,d.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=c.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!1,this.active=!1,this.updateMotion()},touchcancel:function(d,c){this.buttons=0,this.event=c,this.upElement=d.target,this.manager.transformPointer(this,d.pageX,d.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=c.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!0,this.active=!1},noButtonDown:function(){return this.buttons===0},leftButtonDown:function(){return!!(this.buttons&1)},rightButtonDown:function(){return!!(this.buttons&2)},middleButtonDown:function(){return!!(this.buttons&4)},backButtonDown:function(){return!!(this.buttons&8)},forwardButtonDown:function(){return!!(this.buttons&16)},leftButtonReleased:function(){return this.button===0&&!this.isDown},rightButtonReleased:function(){return this.button===2&&!this.isDown},middleButtonReleased:function(){return this.button===1&&!this.isDown},backButtonReleased:function(){return this.button===3&&!this.isDown},forwardButtonReleased:function(){return this.button===4&&!this.isDown},getDistance:function(){return this.isDown?r(this.downX,this.downY,this.x,this.y):r(this.downX,this.downY,this.upX,this.upY)},getDistanceX:function(){return this.isDown?Math.abs(this.downX-this.x):Math.abs(this.downX-this.upX)},getDistanceY:function(){return this.isDown?Math.abs(this.downY-this.y):Math.abs(this.downY-this.upY)},getDuration:function(){return this.isDown?this.manager.time-this.downTime:this.upTime-this.downTime},getAngle:function(){return this.isDown?n(this.downX,this.downY,this.x,this.y):n(this.downX,this.downY,this.upX,this.upY)},getInterpolatedPosition:function(d,c){d===void 0&&(d=10),c===void 0&&(c=[]);for(var p=this.prevPosition.x,g=this.prevPosition.y,m=this.position.x,x=this.position.y,y=0;y<d;y++){var T=1/d*y;c[y]={x:l(T,p,m),y:l(T,g,x)}}return c},destroy:function(){this.camera=null,this.manager=null,this.position=null},x:{get:function(){return this.position.x},set:function(d){this.position.x=d}},y:{get:function(){return this.position.y},set:function(d){this.position.y=d}},time:{get:function(){return this.event?this.event.timeStamp:0}}});e.exports=v},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(51),r=i(1),a=new n({initialize:function(o){this.manager=o,this.capture=!0,this.enabled=!1,this.target,this.onTouchStart=r,this.onTouchStartWindow=r,this.onTouchMove=r,this.onTouchEnd=r,this.onTouchEndWindow=r,this.onTouchCancel=r,this.onTouchCancelWindow=r,this.onTouchOver=r,this.onTouchOut=r,o.events.once(h.MANAGER_BOOT,this.boot,this)},boot:function(){var l=this.manager.config;this.enabled=l.inputTouch,this.target=l.inputTouchEventTarget,this.capture=l.inputTouchCapture,this.target||(this.target=this.manager.game.canvas),l.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return document.body.addEventListener("contextmenu",function(l){return l.preventDefault(),!1}),this},startListeners:function(){var l=this,o=this.manager.canvas,u=window&&window.focus&&this.manager.game.config.autoFocus;this.onTouchStart=function(p){u&&window.focus(),!p.defaultPrevented&&l.enabled&&l.manager&&l.manager.enabled&&(l.manager.onTouchStart(p),l.capture&&p.cancelable&&p.target===o&&p.preventDefault())},this.onTouchStartWindow=function(p){!p.defaultPrevented&&l.enabled&&l.manager&&l.manager.enabled&&p.target!==o&&l.manager.onTouchStart(p)},this.onTouchMove=function(p){!p.defaultPrevented&&l.enabled&&l.manager&&l.manager.enabled&&(l.manager.onTouchMove(p),l.capture&&p.cancelable&&p.preventDefault())},this.onTouchEnd=function(p){!p.defaultPrevented&&l.enabled&&l.manager&&l.manager.enabled&&(l.manager.onTouchEnd(p),l.capture&&p.cancelable&&p.target===o&&p.preventDefault())},this.onTouchEndWindow=function(p){!p.defaultPrevented&&l.enabled&&l.manager&&l.manager.enabled&&p.target!==o&&l.manager.onTouchEnd(p)},this.onTouchCancel=function(p){!p.defaultPrevented&&l.enabled&&l.manager&&l.manager.enabled&&(l.manager.onTouchCancel(p),l.capture&&p.preventDefault())},this.onTouchCancelWindow=function(p){!p.defaultPrevented&&l.enabled&&l.manager&&l.manager.enabled&&l.manager.onTouchCancel(p)},this.onTouchOver=function(p){!p.defaultPrevented&&l.enabled&&l.manager&&l.manager.enabled&&l.manager.setCanvasOver(p)},this.onTouchOut=function(p){!p.defaultPrevented&&l.enabled&&l.manager&&l.manager.enabled&&l.manager.setCanvasOut(p)};var v=this.target;if(!!v){var d={passive:!0},c={passive:!1};v.addEventListener("touchstart",this.onTouchStart,this.capture?c:d),v.addEventListener("touchmove",this.onTouchMove,this.capture?c:d),v.addEventListener("touchend",this.onTouchEnd,this.capture?c:d),v.addEventListener("touchcancel",this.onTouchCancel,this.capture?c:d),v.addEventListener("touchover",this.onTouchOver,this.capture?c:d),v.addEventListener("touchout",this.onTouchOut,this.capture?c:d),window&&this.manager.game.config.inputWindowEvents&&(window.addEventListener("touchstart",this.onTouchStartWindow,c),window.addEventListener("touchend",this.onTouchEndWindow,c),window.addEventListener("touchcancel",this.onTouchCancelWindow,c)),this.enabled=!0}},stopListeners:function(){var l=this.target;l.removeEventListener("touchstart",this.onTouchStart),l.removeEventListener("touchmove",this.onTouchMove),l.removeEventListener("touchend",this.onTouchEnd),l.removeEventListener("touchcancel",this.onTouchCancel),l.removeEventListener("touchover",this.onTouchOver),l.removeEventListener("touchout",this.onTouchOut),window&&(window.removeEventListener("touchstart",this.onTouchStartWindow),window.removeEventListener("touchend",this.onTouchEndWindow))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(22),r=i(9),a=i(8),l=i(16),o=i(5),u=i(2),v=i(24),d=i(93),c=new n({Extends:r,initialize:function(g){r.call(this),this.game=g,this.plugins=[],this.scenePlugins=[],this._pendingGlobal=[],this._pendingScene=[],g.isBooted?this.boot():g.events.once(h.BOOT,this.boot,this)},boot:function(){var p,g,m,x,y,T,C,S=this.game.config,E=S.installGlobalPlugins;for(E=E.concat(this._pendingGlobal),p=0;p<E.length;p++)g=E[p],m=u(g,"key",null),x=u(g,"plugin",null),y=u(g,"start",!1),T=u(g,"mapping",null),C=u(g,"data",null),m&&(x?this.install(m,x,y,T,C):console.warn("Missing `plugin` for key: "+m));for(E=S.installScenePlugins,E=E.concat(this._pendingScene),p=0;p<E.length;p++)g=E[p],m=u(g,"key",null),x=u(g,"plugin",null),T=u(g,"mapping",null),m&&(x?this.installScenePlugin(m,x,T):console.warn("Missing `plugin` for key: "+m));this._pendingGlobal=[],this._pendingScene=[],this.game.events.once(h.DESTROY,this.destroy,this)},addToScene:function(p,g,m){var x,y,T,C=this.game,S=p.scene,E=p.settings.map,M=p.settings.isBooted;for(x=0;x<g.length;x++)y=g[x],C[y]?(p[y]=C[y],E.hasOwnProperty(y)&&(S[E[y]]=p[y])):y==="game"&&E.hasOwnProperty(y)&&(S[E[y]]=C);for(var O=0;O<m.length;O++)for(T=m[O],x=0;x<T.length;x++)if(y=T[x],!!v.hasCore(y)){var L=v.getCore(y),R=L.mapping,F=new L.plugin(S,this,R);p[R]=F,L.custom?S[R]=F:E.hasOwnProperty(R)&&(S[E[R]]=F),M&&F.boot()}for(T=this.plugins,x=0;x<T.length;x++){var D=T[x];D.mapping&&(S[D.mapping]=D.plugin)}},getDefaultScenePlugins:function(){var p=this.game.config.defaultPlugins;return p=p.concat(this.scenePlugins),p},installScenePlugin:function(p,g,m,x,y){if(y===void 0&&(y=!1),typeof g!="function"){console.warn("Invalid Scene Plugin: "+p);return}if(!v.hasCore(p))v.register(p,g,m,!0),this.scenePlugins.push(p);else if(!y&&v.hasCore(p)){console.warn("Scene Plugin key in use: "+p);return}if(x){var T=new g(x,this,p);x.sys[p]=T,m&&m!==""&&(x[m]=T),T.boot()}},install:function(p,g,m,x,y){if(m===void 0&&(m=!1),x===void 0&&(x=null),y===void 0&&(y=null),typeof g!="function")return console.warn("Invalid Plugin: "+p),null;if(v.hasCustom(p))return console.warn("Plugin key in use: "+p),null;if(x!==null&&(m=!0),!this.game.isBooted)this._pendingGlobal.push({key:p,plugin:g,start:m,mapping:x,data:y});else if(v.registerCustom(p,g,x,y),m)return this.start(p);return null},getIndex:function(p){for(var g=this.plugins,m=0;m<g.length;m++){var x=g[m];if(x.key===p)return m}return-1},getEntry:function(p){var g=this.getIndex(p);if(g!==-1)return this.plugins[g]},isActive:function(p){var g=this.getEntry(p);return g&&g.active},start:function(p,g){g===void 0&&(g=p);var m=this.getEntry(g);return m&&!m.active?(m.active=!0,m.plugin.start()):m||(m=this.createEntry(p,g)),m?m.plugin:null},createEntry:function(p,g){var m=v.getCustom(p);if(m){var x=new m.plugin(this);m={key:g,plugin:x,active:!0,mapping:m.mapping,data:m.data},this.plugins.push(m),x.init(m.data),x.start()}return m},stop:function(p){var g=this.getEntry(p);return g&&g.active&&(g.active=!1,g.plugin.stop()),this},get:function(p,g){g===void 0&&(g=!0);var m=this.getEntry(p);if(m)return m.plugin;var x=this.getClass(p);return x&&g?(m=this.createEntry(p,p),m?m.plugin:null):x||null},getClass:function(p){return v.getCustomClass(p)},removeGlobalPlugin:function(p){var g=this.getEntry(p);g&&d(this.plugins,g),v.removeCustom(p)},removeScenePlugin:function(p){d(this.scenePlugins,p),v.remove(p)},registerGameObject:function(p,g,m){return g&&o.register(p,g),m&&l.register(p,m),this},removeGameObject:function(p,g,m){return g===void 0&&(g=!0),m===void 0&&(m=!0),g&&o.remove(p),m&&l.remove(p),this},registerFileType:function(p,g,m){a.register(p,g),m&&m.sys.load&&(m.sys.load[p]=g)},destroy:function(){for(var p=0;p<this.plugins.length;p++)this.plugins[p].plugin.destroy();v.destroyCustomPlugins(),this.game.noReturn&&v.destroyCorePlugins(),this.game=null,this.plugins=[],this.scenePlugins=[]}});e.exports=c},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(201),h=i(0),r=i(9),a=i(104),l=i(22),o=i(401),u=i(407),v=i(402),d=i(1),c=i(10),p=i(416),g=i(76),m=i(3),x=new h({Extends:r,initialize:function(T){r.call(this),this.game=T,this.canvas,this.canvasBounds=new c,this.parent=null,this.parentIsWindow=!1,this.parentSize=new p,this.gameSize=new p,this.baseSize=new p,this.displaySize=new p,this.scaleMode=n.SCALE_MODE.NONE,this.zoom=1,this._resetZoom=!1,this.displayScale=new m(1,1),this.autoRound=!1,this.autoCenter=n.CENTER.NO_CENTER,this.orientation=n.ORIENTATION.LANDSCAPE,this.fullscreen,this.fullscreenTarget=null,this._createdFullscreenTarget=!1,this.dirty=!1,this.resizeInterval=500,this._lastCheck=0,this._checkOrientation=!1,this.listeners={orientationChange:d,windowResize:d,fullScreenChange:d,fullScreenError:d}},preBoot:function(){this.parseConfig(this.game.config),this.game.events.once(l.BOOT,this.boot,this)},boot:function(){var y=this.game;this.canvas=y.canvas,this.fullscreen=y.device.fullscreen,this.scaleMode!==n.SCALE_MODE.RESIZE&&this.displaySize.setAspectMode(this.scaleMode),this.scaleMode===n.SCALE_MODE.NONE?this.resize(this.width,this.height):(this.getParentBounds(),this.parentSize.width>0&&this.parentSize.height>0&&this.displaySize.setParent(this.parentSize),this.refresh()),y.events.on(l.PRE_STEP,this.step,this),y.events.once(l.READY,this.refresh,this),y.events.once(l.DESTROY,this.destroy,this),this.startListeners()},parseConfig:function(y){this.getParent(y),this.getParentBounds();var T=y.width,C=y.height,S=y.scaleMode,E=y.zoom,M=y.autoRound;if(typeof T=="string"){var O=this.parentSize.width;O===0&&(O=window.innerWidth);var L=parseInt(T,10)/100;T=Math.floor(O*L)}if(typeof C=="string"){var R=this.parentSize.height;R===0&&(R=window.innerHeight);var F=parseInt(C,10)/100;C=Math.floor(R*F)}this.scaleMode=S,this.autoRound=M,this.autoCenter=y.autoCenter,this.resizeInterval=y.resizeInterval,M&&(T=Math.floor(T),C=Math.floor(C)),this.gameSize.setSize(T,C),E===n.ZOOM.MAX_ZOOM&&(E=this.getMaxZoom()),this.zoom=E,E!==1&&(this._resetZoom=!0),this.baseSize.setSize(T,C),M&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),y.minWidth>0&&this.displaySize.setMin(y.minWidth*E,y.minHeight*E),y.maxWidth>0&&this.displaySize.setMax(y.maxWidth*E,y.maxHeight*E),this.displaySize.setSize(T,C),this.orientation=v(T,C)},getParent:function(y){var T=y.parent;if(T!==null){if(this.parent=u(T),this.parentIsWindow=this.parent===document.body,y.expandParent&&y.scaleMode!==n.SCALE_MODE.NONE){var C=this.parent.getBoundingClientRect();(this.parentIsWindow||C.height===0)&&(document.documentElement.style.height="100%",document.body.style.height="100%",C=this.parent.getBoundingClientRect(),!this.parentIsWindow&&C.height===0&&(this.parent.style.overflow="hidden",this.parent.style.width="100%",this.parent.style.height="100%"))}y.fullscreenTarget&&!this.fullscreenTarget&&(this.fullscreenTarget=u(y.fullscreenTarget))}},getParentBounds:function(){if(!this.parent)return!1;var y=this.parentSize,T=this.parent.getBoundingClientRect();this.parentIsWindow&&this.game.device.os.iOS&&(T.height=o(!0));var C=T.width,S=T.height;return y.width!==C||y.height!==S?(y.setSize(C,S),!0):!1},lockOrientation:function(y){var T=screen.lockOrientation||screen.mozLockOrientation||screen.msLockOrientation;return T?T.call(screen,y):!1},setParentSize:function(y,T){return this.parentSize.setSize(y,T),this.refresh()},setGameSize:function(y,T){var C=this.autoRound;C&&(y=Math.floor(y),T=Math.floor(T));var S=this.width,E=this.height;return this.gameSize.resize(y,T),this.baseSize.resize(y,T),C&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setAspectRatio(y/T),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height,this.refresh(S,E)},resize:function(y,T){var C=this.zoom,S=this.autoRound;S&&(y=Math.floor(y),T=Math.floor(T));var E=this.width,M=this.height;this.gameSize.resize(y,T),this.baseSize.resize(y,T),S&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setSize(y*C,T*C),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height;var O=this.canvas.style,L=y*C,R=T*C;return S&&(L=Math.floor(L),R=Math.floor(R)),(L!==y||R!==T)&&(O.width=L+"px",O.height=R+"px"),this.refresh(E,M)},setZoom:function(y){return this.zoom=y,this._resetZoom=!0,this.refresh()},setMaxZoom:function(){return this.zoom=this.getMaxZoom(),this._resetZoom=!0,this.refresh()},refresh:function(y,T){y===void 0&&(y=this.width),T===void 0&&(T=this.height),this.updateScale(),this.updateBounds(),this.updateOrientation(),this.displayScale.set(this.baseSize.width/this.canvasBounds.width,this.baseSize.height/this.canvasBounds.height);var C=this.game.domContainer;if(C){this.baseSize.setCSS(C);var S=this.canvas.style,E=C.style;E.transform="scale("+this.displaySize.width/this.baseSize.width+","+this.displaySize.height/this.baseSize.height+")",E.marginLeft=S.marginLeft,E.marginTop=S.marginTop}return this.emit(a.RESIZE,this.gameSize,this.baseSize,this.displaySize,y,T),this},updateOrientation:function(){if(this._checkOrientation){this._checkOrientation=!1;var y=v(this.width,this.height);y!==this.orientation&&(this.orientation=y,this.emit(a.ORIENTATION_CHANGE,y))}},updateScale:function(){var y=this.canvas.style,T=this.gameSize.width,C=this.gameSize.height,S,E,M=this.zoom,O=this.autoRound;this.scaleMode===n.SCALE_MODE.NONE?(this.displaySize.setSize(T*M,C*M),S=this.displaySize.width,E=this.displaySize.height,O&&(S=Math.floor(S),E=Math.floor(E)),this._resetZoom&&(y.width=S+"px",y.height=E+"px",this._resetZoom=!1)):this.scaleMode===n.SCALE_MODE.RESIZE?(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),this.gameSize.setSize(this.displaySize.width,this.displaySize.height),this.baseSize.setSize(this.displaySize.width,this.displaySize.height),S=this.displaySize.width,E=this.displaySize.height,O&&(S=Math.floor(S),E=Math.floor(E)),this.canvas.width=S,this.canvas.height=E):(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),S=this.displaySize.width,E=this.displaySize.height,O&&(S=Math.floor(S),E=Math.floor(E)),y.width=S+"px",y.height=E+"px"),this.getParentBounds(),this.updateCenter()},getMaxZoom:function(){var y=g(this.parentSize.width,this.gameSize.width,0,!0),T=g(this.parentSize.height,this.gameSize.height,0,!0);return Math.max(Math.min(y,T),1)},updateCenter:function(){var y=this.autoCenter;if(y!==n.CENTER.NO_CENTER){var T=this.canvas,C=T.style,S=T.getBoundingClientRect(),E=S.width,M=S.height,O=Math.floor((this.parentSize.width-E)/2),L=Math.floor((this.parentSize.height-M)/2);y===n.CENTER.CENTER_HORIZONTALLY?L=0:y===n.CENTER.CENTER_VERTICALLY&&(O=0),C.marginLeft=O+"px",C.marginTop=L+"px"}},updateBounds:function(){var y=this.canvasBounds,T=this.canvas.getBoundingClientRect();y.x=T.left+(window.pageXOffset||0)-(document.documentElement.clientLeft||0),y.y=T.top+(window.pageYOffset||0)-(document.documentElement.clientTop||0),y.width=T.width,y.height=T.height},transformX:function(y){return(y-this.canvasBounds.left)*this.displayScale.x},transformY:function(y){return(y-this.canvasBounds.top)*this.displayScale.y},startFullscreen:function(y){y===void 0&&(y={navigationUI:"hide"});var T=this.fullscreen;if(!T.available){this.emit(a.FULLSCREEN_UNSUPPORTED);return}if(!T.active){var C=this.getFullscreenTarget();T.keyboard?C[T.request](Element.ALLOW_KEYBOARD_INPUT):C[T.request](y)}},fullscreenSuccessHandler:function(){this.getParentBounds(),this.refresh(),this.emit(a.ENTER_FULLSCREEN)},fullscreenErrorHandler:function(y){this.removeFullscreenTarget(),this.emit(a.FULLSCREEN_FAILED,y)},getFullscreenTarget:function(){if(!this.fullscreenTarget){var y=document.createElement("div");y.style.margin="0",y.style.padding="0",y.style.width="100%",y.style.height="100%",this.fullscreenTarget=y,this._createdFullscreenTarget=!0}if(this._createdFullscreenTarget){var T=this.canvas.parentNode;T.insertBefore(this.fullscreenTarget,this.canvas),this.fullscreenTarget.appendChild(this.canvas)}return this.fullscreenTarget},removeFullscreenTarget:function(){if(this._createdFullscreenTarget){var y=this.fullscreenTarget;if(y&&y.parentNode){var T=y.parentNode;T.insertBefore(this.canvas,y),T.removeChild(y)}}},stopFullscreen:function(){var y=this.fullscreen;if(!y.available)return this.emit(a.FULLSCREEN_UNSUPPORTED),!1;y.active&&document[y.cancel](),this.removeFullscreenTarget(),this.getParentBounds(),this.emit(a.LEAVE_FULLSCREEN),this.refresh()},toggleFullscreen:function(y){this.fullscreen.active?this.stopFullscreen():this.startFullscreen(y)},startListeners:function(){var y=this,T=this.listeners;if(T.orientationChange=function(){y.updateBounds(),y._checkOrientation=!0,y.dirty=!0},T.windowResize=function(){y.updateBounds(),y.dirty=!0},window.addEventListener("orientationchange",T.orientationChange,!1),window.addEventListener("resize",T.windowResize,!1),this.fullscreen.available){T.fullScreenChange=function(S){return y.onFullScreenChange(S)},T.fullScreenError=function(S){return y.onFullScreenError(S)};var C=["webkit","moz",""];C.forEach(function(S){document.addEventListener(S+"fullscreenchange",T.fullScreenChange,!1),document.addEventListener(S+"fullscreenerror",T.fullScreenError,!1)}),document.addEventListener("MSFullscreenChange",T.fullScreenChange,!1),document.addEventListener("MSFullscreenError",T.fullScreenError,!1)}},onFullScreenChange:function(){document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement?this.fullscreenSuccessHandler():this.stopFullscreen()},onFullScreenError:function(){this.removeFullscreenTarget()},step:function(y,T){!this.parent||(this._lastCheck+=T,(this.dirty||this._lastCheck>this.resizeInterval)&&(this.getParentBounds()&&this.refresh(),this.dirty=!1,this._lastCheck=0))},stopListeners:function(){var y=this.listeners;window.removeEventListener("orientationchange",y.orientationChange,!1),window.removeEventListener("resize",y.windowResize,!1);var T=["webkit","moz",""];T.forEach(function(C){document.removeEventListener(C+"fullscreenchange",y.fullScreenChange,!1),document.removeEventListener(C+"fullscreenerror",y.fullScreenError,!1)}),document.removeEventListener("MSFullscreenChange",y.fullScreenChange,!1),document.removeEventListener("MSFullscreenError",y.fullScreenError,!1)},destroy:function(){this.removeAllListeners(),this.stopListeners(),this.game=null,this.canvas=null,this.canvasBounds=null,this.parent=null,this.fullscreenTarget=null,this.parentSize.destroy(),this.gameSize.destroy(),this.baseSize.destroy(),this.displaySize.destroy()},isFullscreen:{get:function(){return this.fullscreen.active}},width:{get:function(){return this.gameSize.width}},height:{get:function(){return this.gameSize.height}},isPortrait:{get:function(){return this.orientation===n.ORIENTATION.PORTRAIT}},isLandscape:{get:function(){return this.orientation===n.ORIENTATION.LANDSCAPE}},isGamePortrait:{get:function(){return this.height>this.width}},isGameLandscape:{get:function(){return this.width>this.height}}});e.exports=x},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(18),h=i(0),r=i(76),a=i(3),l=new h({initialize:function(u,v,d,c){u===void 0&&(u=0),v===void 0&&(v=u),d===void 0&&(d=0),c===void 0&&(c=null),this._width=u,this._height=v,this._parent=c,this.aspectMode=d,this.aspectRatio=v===0?1:u/v,this.minWidth=0,this.minHeight=0,this.maxWidth=Number.MAX_VALUE,this.maxHeight=Number.MAX_VALUE,this.snapTo=new a},setAspectMode:function(o){return o===void 0&&(o=0),this.aspectMode=o,this.setSize(this._width,this._height)},setSnap:function(o,u){return o===void 0&&(o=0),u===void 0&&(u=o),this.snapTo.set(o,u),this.setSize(this._width,this._height)},setParent:function(o){return this._parent=o,this.setSize(this._width,this._height)},setMin:function(o,u){return o===void 0&&(o=0),u===void 0&&(u=o),this.minWidth=n(o,0,this.maxWidth),this.minHeight=n(u,0,this.maxHeight),this.setSize(this._width,this._height)},setMax:function(o,u){return o===void 0&&(o=Number.MAX_VALUE),u===void 0&&(u=o),this.maxWidth=n(o,this.minWidth,Number.MAX_VALUE),this.maxHeight=n(u,this.minHeight,Number.MAX_VALUE),this.setSize(this._width,this._height)},setSize:function(o,u){switch(o===void 0&&(o=0),u===void 0&&(u=o),this.aspectMode){case l.NONE:this._width=this.getNewWidth(r(o,this.snapTo.x)),this._height=this.getNewHeight(r(u,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height;break;case l.WIDTH_CONTROLS_HEIGHT:this._width=this.getNewWidth(r(o,this.snapTo.x)),this._height=this.getNewHeight(this._width*(1/this.aspectRatio),!1);break;case l.HEIGHT_CONTROLS_WIDTH:this._height=this.getNewHeight(r(u,this.snapTo.y)),this._width=this.getNewWidth(this._height*this.aspectRatio,!1);break;case l.FIT:this.constrain(o,u,!0);break;case l.ENVELOP:this.constrain(o,u,!1);break}return this},setAspectRatio:function(o){return this.aspectRatio=o,this.setSize(this._width,this._height)},resize:function(o,u){return this._width=this.getNewWidth(r(o,this.snapTo.x)),this._height=this.getNewHeight(r(u,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height,this},getNewWidth:function(o,u){return u===void 0&&(u=!0),o=n(o,this.minWidth,this.maxWidth),u&&this._parent&&o>this._parent.width&&(o=Math.max(this.minWidth,this._parent.width)),o},getNewHeight:function(o,u){return u===void 0&&(u=!0),o=n(o,this.minHeight,this.maxHeight),u&&this._parent&&o>this._parent.height&&(o=Math.max(this.minHeight,this._parent.height)),o},constrain:function(o,u,v){o===void 0&&(o=0),u===void 0&&(u=o),v===void 0&&(v=!0),o=this.getNewWidth(o),u=this.getNewHeight(u);var d=this.snapTo,c=u===0?1:o/u;return v&&this.aspectRatio>c||!v&&this.aspectRatio<c?(o=r(o,d.x),u=o/this.aspectRatio,d.y>0&&(u=r(u,d.y),o=u*this.aspectRatio)):(v&&this.aspectRatio<c||!v&&this.aspectRatio>c)&&(u=r(u,d.y),o=u*this.aspectRatio,d.x>0&&(o=r(o,d.x),u=o*(1/this.aspectRatio))),this._width=o,this._height=u,this},fitTo:function(o,u){return this.constrain(o,u,!0)},envelop:function(o,u){return this.constrain(o,u,!1)},setWidth:function(o){return this.setSize(o,this._height)},setHeight:function(o){return this.setSize(this._width,o)},toString:function(){return"[{ Size (width="+this._width+" height="+this._height+" aspectRatio="+this.aspectRatio+" aspectMode="+this.aspectMode+") }]"},setCSS:function(o){o&&o.style&&(o.style.width=this._width+"px",o.style.height=this._height+"px")},copy:function(o){return o.setAspectMode(this.aspectMode),o.aspectRatio=this.aspectRatio,o.setSize(this.width,this.height)},destroy:function(){this._parent=null,this.snapTo=null},width:{get:function(){return this._width},set:function(o){this.setSize(o,this._height)}},height:{get:function(){return this._height},set:function(o){this.setSize(this._width,o)}}});l.NONE=0,l.WIDTH_CONTROLS_HEIGHT=1,l.HEIGHT_CONTROLS_WIDTH=2,l.FIT=3,l.ENVELOP=4,e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(144),r=i(20),a=i(22),l=i(6),o=i(95),u=i(1),v=i(418),d=i(204),c=new n({initialize:function(g,m){if(this.game=g,this.keys={},this.scenes=[],this._pending=[],this._start=[],this._queue=[],this._data={},this.isProcessing=!1,this.isBooted=!1,this.customViewports=0,m){Array.isArray(m)||(m=[m]);for(var x=0;x<m.length;x++)this._pending.push({key:"default",scene:m[x],autoStart:x===0,data:{}})}g.events.once(a.READY,this.bootQueue,this)},bootQueue:function(){if(!this.isBooted){var p,g,m,x;for(p=0;p<this._pending.length;p++){g=this._pending[p],m=g.key,x=g.scene;var y;x instanceof v?y=this.createSceneFromInstance(m,x):typeof x=="object"?y=this.createSceneFromObject(m,x):typeof x=="function"&&(y=this.createSceneFromFunction(m,x)),m=y.sys.settings.key,this.keys[m]=y,this.scenes.push(y),this._data[m]&&(y.sys.settings.data=this._data[m].data,this._data[m].autoStart&&(g.autoStart=!0)),(g.autoStart||y.sys.settings.active)&&this._start.push(m)}for(this._pending.length=0,this._data={},this.isBooted=!0,p=0;p<this._start.length;p++)g=this._start[p],this.start(g);this._start.length=0}},processQueue:function(){var p=this._pending.length,g=this._queue.length;if(!(p===0&&g===0)){var m,x;if(p){for(m=0;m<p;m++)x=this._pending[m],this.add(x.key,x.scene,x.autoStart,x.data);for(m=0;m<this._start.length;m++)x=this._start[m],this.start(x);this._start.length=0,this._pending.length=0;return}for(m=0;m<this._queue.length;m++)x=this._queue[m],this[x.op](x.keyA,x.keyB);this._queue.length=0}},add:function(p,g,m,x){if(m===void 0&&(m=!1),x===void 0&&(x={}),this.isProcessing||!this.isBooted)return this._pending.push({key:p,scene:g,autoStart:m,data:x}),this.isBooted||(this._data[p]={data:x}),null;p=this.getKey(p,g);var y;return g instanceof v?y=this.createSceneFromInstance(p,g):typeof g=="object"?(g.key=p,y=this.createSceneFromObject(p,g)):typeof g=="function"&&(y=this.createSceneFromFunction(p,g)),y.sys.settings.data=x,p=y.sys.settings.key,this.keys[p]=y,this.scenes.push(y),(m||y.sys.settings.active)&&(this._pending.length?this._start.push(p):this.start(p)),y},remove:function(p){if(this.isProcessing)this._queue.push({op:"remove",keyA:p,keyB:null});else{var g=this.getScene(p);if(!g||g.sys.isTransitioning())return this;var m=this.scenes.indexOf(g),x=g.sys.settings.key;m>-1&&(delete this.keys[x],this.scenes.splice(m,1),this._start.indexOf(x)>-1&&(m=this._start.indexOf(x),this._start.splice(m,1)),g.sys.destroy())}return this},bootScene:function(p){var g=p.sys,m=g.settings;g.sceneUpdate=u,p.init&&(p.init.call(p,m.data),m.status=h.INIT,m.isTransition&&g.events.emit(r.TRANSITION_INIT,m.transitionFrom,m.transitionDuration));var x;g.load&&(x=g.load,x.reset()),x&&p.preload?(p.preload.call(p),x.list.size===0?this.create(p):(m.status=h.LOADING,x.once(o.COMPLETE,this.loadComplete,this),x.start())):this.create(p)},loadComplete:function(p){this.create(p.scene)},payloadComplete:function(p){this.bootScene(p.scene)},update:function(p,g){this.processQueue(),this.isProcessing=!0;for(var m=this.scenes.length-1;m>=0;m--){var x=this.scenes[m].sys;x.settings.status>h.START&&x.settings.status<=h.RUNNING&&x.step(p,g)}},render:function(p){for(var g=0;g<this.scenes.length;g++){var m=this.scenes[g].sys;m.settings.visible&&m.settings.status>=h.LOADING&&m.settings.status<h.SLEEPING&&m.render(p)}this.isProcessing=!1},create:function(p){var g=p.sys,m=g.settings;p.create&&(m.status=h.CREATING,p.create.call(p,m.data),m.status===h.DESTROYED)||(m.isTransition&&g.events.emit(r.TRANSITION_START,m.transitionFrom,m.transitionDuration),p.update&&(g.sceneUpdate=p.update),m.status=h.RUNNING,g.events.emit(r.CREATE,p))},createSceneFromFunction:function(p,g){var m=new g;if(m instanceof v){var x=m.sys.settings.key;if(x!==""&&(p=x),this.keys.hasOwnProperty(p))throw new Error("Cannot add a Scene with duplicate key: "+p);return this.createSceneFromInstance(p,m)}else return m.sys=new d(m),m.sys.settings.key=p,m.sys.init(this.game),m},createSceneFromInstance:function(p,g){var m=g.sys.settings.key;return m===""&&(g.sys.settings.key=p),g.sys.init(this.game),g},createSceneFromObject:function(p,g){var m=new v(g),x=m.sys.settings.key;x!==""?p=x:m.sys.settings.key=p,m.sys.init(this.game);for(var y=["init","preload","create","update","render"],T=0;T<y.length;T++){var C=l(g,y[T],null);C&&(m[y[T]]=C)}if(g.hasOwnProperty("extend")){for(var S in g.extend)if(!!g.extend.hasOwnProperty(S)){var E=g.extend[S];S==="data"&&m.hasOwnProperty("data")&&typeof E=="object"?m.data.merge(E):S!=="sys"&&(m[S]=E)}}return m},getKey:function(p,g){if(p||(p="default"),typeof g=="function")return p;if(g instanceof v?p=g.sys.settings.key:typeof g=="object"&&g.hasOwnProperty("key")&&(p=g.key),this.keys.hasOwnProperty(p))throw new Error("Cannot add a Scene with duplicate key: "+p);return p},getScenes:function(p,g){p===void 0&&(p=!0),g===void 0&&(g=!1);for(var m=[],x=this.scenes,y=0;y<x.length;y++){var T=x[y];T&&(!p||p&&T.sys.isActive())&&m.push(T)}return g?m.reverse():m},getScene:function(p){if(typeof p=="string"){if(this.keys[p])return this.keys[p]}else for(var g=0;g<this.scenes.length;g++)if(p===this.scenes[g])return p;return null},isActive:function(p){var g=this.getScene(p);return g?g.sys.isActive():null},isPaused:function(p){var g=this.getScene(p);return g?g.sys.isPaused():null},isVisible:function(p){var g=this.getScene(p);return g?g.sys.isVisible():null},isSleeping:function(p){var g=this.getScene(p);return g?g.sys.isSleeping():null},pause:function(p,g){var m=this.getScene(p);return m&&m.sys.pause(g),this},resume:function(p,g){var m=this.getScene(p);return m&&m.sys.resume(g),this},sleep:function(p,g){var m=this.getScene(p);return m&&!m.sys.isTransitioning()&&m.sys.sleep(g),this},wake:function(p,g){var m=this.getScene(p);return m&&m.sys.wake(g),this},run:function(p,g){var m=this.getScene(p);if(!m){for(var x=0;x<this._pending.length;x++)if(this._pending[x].key===p){this.queueOp("start",p,g);break}return this}m.sys.isSleeping()?m.sys.wake(g):m.sys.isPaused()?m.sys.resume(g):this.start(p,g)},start:function(p,g){if(!this.isBooted)return this._data[p]={autoStart:!0,data:g},this;var m=this.getScene(p);if(m){var x=m.sys;if(x.isActive()||x.isPaused())x.shutdown(),x.sceneUpdate=u,x.start(g);else{x.sceneUpdate=u,x.start(g);var y;if(x.load&&(y=x.load),y&&x.settings.hasOwnProperty("pack")&&(y.reset(),y.addPack({payload:x.settings.pack})))return x.settings.status=h.LOADING,y.once(o.COMPLETE,this.payloadComplete,this),y.start(),this}this.bootScene(m)}return this},stop:function(p,g){var m=this.getScene(p);return m&&!m.sys.isTransitioning()&&m.sys.shutdown(g),this},switch:function(p,g){var m=this.getScene(p),x=this.getScene(g);return m&&x&&m!==x&&(this.sleep(p),this.isSleeping(g)?this.wake(g):this.start(g)),this},getAt:function(p){return this.scenes[p]},getIndex:function(p){var g=this.getScene(p);return this.scenes.indexOf(g)},bringToTop:function(p){if(this.isProcessing)this._queue.push({op:"bringToTop",keyA:p,keyB:null});else{var g=this.getIndex(p);if(g!==-1&&g<this.scenes.length){var m=this.getScene(p);this.scenes.splice(g,1),this.scenes.push(m)}}return this},sendToBack:function(p){if(this.isProcessing)this._queue.push({op:"sendToBack",keyA:p,keyB:null});else{var g=this.getIndex(p);if(g!==-1&&g>0){var m=this.getScene(p);this.scenes.splice(g,1),this.scenes.unshift(m)}}return this},moveDown:function(p){if(this.isProcessing)this._queue.push({op:"moveDown",keyA:p,keyB:null});else{var g=this.getIndex(p);if(g>0){var m=g-1,x=this.getScene(p),y=this.getAt(m);this.scenes[g]=y,this.scenes[m]=x}}return this},moveUp:function(p){if(this.isProcessing)this._queue.push({op:"moveUp",keyA:p,keyB:null});else{var g=this.getIndex(p);if(g<this.scenes.length-1){var m=g+1,x=this.getScene(p),y=this.getAt(m);this.scenes[g]=y,this.scenes[m]=x}}return this},moveAbove:function(p,g){if(p===g)return this;if(this.isProcessing)this._queue.push({op:"moveAbove",keyA:p,keyB:g});else{var m=this.getIndex(p),x=this.getIndex(g);if(m!==-1&&x!==-1){var y=this.getAt(x);this.scenes.splice(x,1),this.scenes.splice(m+1,0,y)}}return this},moveBelow:function(p,g){if(p===g)return this;if(this.isProcessing)this._queue.push({op:"moveBelow",keyA:p,keyB:g});else{var m=this.getIndex(p),x=this.getIndex(g);if(m!==-1&&x!==-1){var y=this.getAt(x);this.scenes.splice(x,1),m===0?this.scenes.unshift(y):this.scenes.splice(m,0,y)}}return this},queueOp:function(p,g,m){return this._queue.push({op:p,keyA:g,keyB:m}),this},swapPosition:function(p,g){if(p===g)return this;if(this.isProcessing)this._queue.push({op:"swapPosition",keyA:p,keyB:g});else{var m=this.getIndex(p),x=this.getIndex(g);if(m!==x&&m!==-1&&x!==-1){var y=this.getAt(m);this.scenes[m]=this.scenes[x],this.scenes[x]=y}}return this},dump:function(){for(var p=[],g=["pending","init","start","loading","creating","running","paused","sleeping","shutdown","destroyed"],m=0;m<this.scenes.length;m++){var x=this.scenes[m].sys,y=x.settings.visible&&(x.settings.status===h.RUNNING||x.settings.status===h.PAUSED)?"[*] ":"[-] ";y+=x.settings.key+" ("+g[x.settings.status]+")",p.push(y)}console.log(p.join(`
`))},destroy:function(){for(var p=0;p<this.scenes.length;p++){var g=this.scenes[p].sys;g.destroy()}this.update=u,this.scenes=[],this._pending=[],this._start=[],this._queue=[],this.game=null}});e.exports=c},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(204),r=new n({initialize:function(l){this.sys=new h(this,l),this.game,this.anims,this.cache,this.registry,this.sound,this.textures,this.events,this.cameras,this.add,this.make,this.scene,this.children,this.lights,this.data,this.input,this.load,this.time,this.tweens,this.physics,this.matter,this.scale,this.plugins,this.renderer},update:function(){}});e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(2),h=i(205),r=function(a){var l=a.game.config.defaultPhysicsSystem,o=n(a.settings,"physics",!1);if(!(!l&&!o)){var u=[];if(l&&u.push(h(l+"Physics")),o)for(var v in o)v=h(v.concat("Physics")),u.indexOf(v)===-1&&u.push(v);return u}};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(2),h=function(r){var a=r.plugins.getDefaultScenePlugins(),l=n(r.settings,"plugins",!1);return Array.isArray(l)?l:a||[]};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(144),h=i(6),r=i(127),a=i(978),l={create:function(o){return typeof o=="string"?o={key:o}:o===void 0&&(o={}),{status:n.PENDING,key:h(o,"key",""),active:h(o,"active",!1),visible:h(o,"visible",!0),isBooted:!1,isTransition:!1,transitionFrom:null,transitionDuration:0,transitionAllowInput:!0,data:{},pack:h(o,"pack",!1),cameras:h(o,"cameras",null),map:h(o,"map",r(a,h(o,"mapAdd",{}))),physics:h(o,"physics",{}),loader:h(o,"loader",{}),plugins:h(o,"plugins",!1),input:h(o,"input",{})}}};e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(31),h=i(423),r=i(0),a=i(38),l=i(33),o=i(9),u=i(106),v=i(22),d=i(388),c=i(6),p=i(425),g=i(206),m=new r({Extends:o,initialize:function(y){o.call(this),this.game=y,this.name="TextureManager",this.list={},this._tempCanvas=n.create2D(this,1,1),this._tempContext=this._tempCanvas.getContext("2d"),this._pending=0,y.events.once(v.BOOT,this.boot,this)},boot:function(){this._pending=3,this.on(u.LOAD,this.updatePending,this),this.on(u.ERROR,this.updatePending,this);var x=this.game.config;this.addBase64("__DEFAULT",x.defaultImage),this.addBase64("__MISSING",x.missingImage),this.addBase64("__WHITE",x.whiteImage),this.game.events.once(v.DESTROY,this.destroy,this)},updatePending:function(){this._pending--,this._pending===0&&(this.off(u.LOAD),this.off(u.ERROR),this.emit(u.READY))},checkKey:function(x){return this.exists(x)?(console.error("Texture key already in use: "+x),!1):!0},remove:function(x){if(typeof x=="string")if(this.exists(x))x=this.get(x);else return console.warn("No texture found matching key: "+x),this;return this.list.hasOwnProperty(x.key)&&(x.destroy(),this.emit(u.REMOVE,x.key)),this},removeKey:function(x){return this.list.hasOwnProperty(x)&&delete this.list[x],this},addBase64:function(x,y){if(this.checkKey(x)){var T=this,C=new Image;C.onerror=function(){T.emit(u.ERROR,x)},C.onload=function(){var S=T.create(x,C);p.Image(S,0),T.emit(u.ADD,x,S),T.emit(u.LOAD,x,S)},C.src=y}return this},getBase64:function(x,y,T,C){T===void 0&&(T="image/png"),C===void 0&&(C=.92);var S="",E=this.getFrame(x,y);if(E&&(E.source.isRenderTexture||E.source.isGLTexture))console.warn("Cannot getBase64 from WebGL Texture");else if(E){var M=E.canvasData,O=n.create2D(this,M.width,M.height),L=O.getContext("2d");L.drawImage(E.source.image,M.x,M.y,M.width,M.height,0,0,M.width,M.height),S=O.toDataURL(T,C),n.remove(O)}return S},addImage:function(x,y,T){var C=null;return this.checkKey(x)&&(C=this.create(x,y),p.Image(C,0),T&&C.setDataSource(T),this.emit(u.ADD,x,C)),C},addGLTexture:function(x,y,T,C){var S=null;return this.checkKey(x)&&(T===void 0&&(T=y.width),C===void 0&&(C=y.height),S=this.create(x,y,T,C),S.add("__BASE",0,0,0,T,C),this.emit(u.ADD,x,S)),S},addRenderTexture:function(x,y){var T=null;return this.checkKey(x)&&(T=this.create(x,y),T.add("__BASE",0,0,0,y.width,y.height),this.emit(u.ADD,x,T)),T},generate:function(x,y){if(this.checkKey(x)){var T=n.create(this,1,1);return y.canvas=T,d(y),this.addCanvas(x,T)}else return null},createCanvas:function(x,y,T){if(y===void 0&&(y=256),T===void 0&&(T=256),this.checkKey(x)){var C=n.create(this,y,T,l.CANVAS,!0);return this.addCanvas(x,C)}return null},addCanvas:function(x,y,T){T===void 0&&(T=!1);var C=null;return T?C=new h(this,x,y,y.width,y.height):this.checkKey(x)&&(C=new h(this,x,y,y.width,y.height),this.list[x]=C,this.emit(u.ADD,x,C)),C},addAtlas:function(x,y,T,C){return Array.isArray(T.textures)||Array.isArray(T.frames)?this.addAtlasJSONArray(x,y,T,C):this.addAtlasJSONHash(x,y,T,C)},addAtlasJSONArray:function(x,y,T,C){var S=null;if(this.checkKey(x)){if(S=this.create(x,y),Array.isArray(T))for(var E=T.length===1,M=0;M<S.source.length;M++){var O=E?T[0]:T[M];p.JSONArray(S,M,O)}else p.JSONArray(S,0,T);C&&S.setDataSource(C),this.emit(u.ADD,x,S)}return S},addAtlasJSONHash:function(x,y,T,C){var S=null;if(this.checkKey(x)){if(S=this.create(x,y),Array.isArray(T))for(var E=0;E<T.length;E++)p.JSONHash(S,E,T[E]);else p.JSONHash(S,0,T);C&&S.setDataSource(C),this.emit(u.ADD,x,S)}return S},addAtlasXML:function(x,y,T,C){var S=null;return this.checkKey(x)&&(S=this.create(x,y),p.AtlasXML(S,0,T),C&&S.setDataSource(C),this.emit(u.ADD,x,S)),S},addUnityAtlas:function(x,y,T,C){var S=null;return this.checkKey(x)&&(S=this.create(x,y),p.UnityYAML(S,0,T),C&&S.setDataSource(C),this.emit(u.ADD,x,S)),S},addSpriteSheet:function(x,y,T){var C=null;if(this.checkKey(x)){C=this.create(x,y);var S=C.source[0].width,E=C.source[0].height;p.SpriteSheet(C,0,0,0,S,E,T),this.emit(u.ADD,x,C)}return C},addSpriteSheetFromAtlas:function(x,y){if(!this.checkKey(x))return null;var T=c(y,"atlas",null),C=c(y,"frame",null);if(!(!T||!C)){var S=this.get(T),E=S.get(C);if(E){var M=this.create(x,E.source.image);return E.trimmed?p.SpriteSheetFromAtlas(M,E,y):p.SpriteSheet(M,0,E.cutX,E.cutY,E.cutWidth,E.cutHeight,y),this.emit(u.ADD,x,M),M}}},create:function(x,y,T,C){var S=null;return this.checkKey(x)&&(S=new g(this,x,y,T,C),this.list[x]=S),S},exists:function(x){return this.list.hasOwnProperty(x)},get:function(x){return x===void 0&&(x="__DEFAULT"),this.list[x]?this.list[x]:x instanceof g?x:this.list.__MISSING},cloneFrame:function(x,y){if(this.list[x])return this.list[x].get(y).clone()},getFrame:function(x,y){if(this.list[x])return this.list[x].get(y)},getTextureKeys:function(){var x=[];for(var y in this.list)y!=="__DEFAULT"&&y!=="__MISSING"&&x.push(y);return x},getPixel:function(x,y,T,C){var S=this.getFrame(T,C);if(S){x-=S.x,y-=S.y;var E=S.data.cut;if(x+=E.x,y+=E.y,x>=E.x&&x<E.r&&y>=E.y&&y<E.b){var M=this._tempContext;M.clearRect(0,0,1,1),M.drawImage(S.source.image,x,y,1,1,0,0,1,1);var O=M.getImageData(0,0,1,1);return new a(O.data[0],O.data[1],O.data[2],O.data[3])}}return null},getPixelAlpha:function(x,y,T,C){var S=this.getFrame(T,C);if(S){x-=S.x,y-=S.y;var E=S.data.cut;if(x+=E.x,y+=E.y,x>=E.x&&x<E.r&&y>=E.y&&y<E.b){var M=this._tempContext;M.clearRect(0,0,1,1),M.drawImage(S.source.image,x,y,1,1,0,0,1,1);var O=M.getImageData(0,0,1,1);return O.data[3]}}return null},setTexture:function(x,y,T){return this.list[y]&&(x.texture=this.list[y],x.frame=x.texture.get(T)),x},renameTexture:function(x,y){var T=this.get(x);return T&&x!==y?(T.key=y,this.list[y]=T,delete this.list[x],!0):!1},each:function(x,y){for(var T=[null],C=1;C<arguments.length;C++)T.push(arguments[C]);for(var S in this.list)T[0]=this.list[S],x.apply(y,T)},destroy:function(){for(var x in this.list)this.list[x].destroy();this.list={},this.game=null,n.remove(this._tempCanvas)}});e.exports=m},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(18),r=i(38),a=i(33),l=i(138),o=i(206),u=new n({Extends:o,initialize:function(d,c,p,g,m){o.call(this,d,c,p,g,m),this.add("__BASE",0,0,0,g,m),this._source=this.frames.__BASE.source,this.canvas=this._source.image,this.context=this.canvas.getContext("2d"),this.width=g,this.height=m,this.imageData=this.context.getImageData(0,0,g,m),this.data=null,this.imageData&&(this.data=this.imageData.data),this.pixels=null,this.buffer,this.data&&(this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data)},update:function(){return this.imageData=this.context.getImageData(0,0,this.width,this.height),this.data=this.imageData.data,this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data,this.manager.game.config.renderType===a.WEBGL&&this.refresh(),this},draw:function(v,d,c){return this.context.drawImage(c,v,d),this.update()},drawFrame:function(v,d,c,p){c===void 0&&(c=0),p===void 0&&(p=0);var g=this.manager.getFrame(v,d);if(g){var m=g.canvasData,x=g.cutWidth,y=g.cutHeight,T=g.source.resolution;return this.context.drawImage(g.source.image,m.x,m.y,x,y,c,p,x/T,y/T),this.update()}else return this},setPixel:function(v,d,c,p,g,m){m===void 0&&(m=255),v=Math.abs(Math.floor(v)),d=Math.abs(Math.floor(d));var x=this.getIndex(v,d);if(x>-1){var y=this.context.getImageData(v,d,1,1);y.data[0]=c,y.data[1]=p,y.data[2]=g,y.data[3]=m,this.context.putImageData(y,v,d)}return this},putData:function(v,d,c,p,g,m,x){return p===void 0&&(p=0),g===void 0&&(g=0),m===void 0&&(m=v.width),x===void 0&&(x=v.height),this.context.putImageData(v,d,c,p,g,m,x),this},getData:function(v,d,c,p){v=h(Math.floor(v),0,this.width-1),d=h(Math.floor(d),0,this.height-1),c=h(c,1,this.width-v),p=h(p,1,this.height-d);var g=this.context.getImageData(v,d,c,p);return g},getPixel:function(v,d,c){c||(c=new r);var p=this.getIndex(v,d);if(p>-1){var g=this.data,m=g[p+0],x=g[p+1],y=g[p+2],T=g[p+3];c.setTo(m,x,y,T)}return c},getPixels:function(v,d,c,p){v===void 0&&(v=0),d===void 0&&(d=0),c===void 0&&(c=this.width),p===void 0&&(p=c),v=Math.abs(Math.round(v)),d=Math.abs(Math.round(d));for(var g=h(v,0,this.width),m=h(v+c,0,this.width),x=h(d,0,this.height),y=h(d+p,0,this.height),T=new r,C=[],S=x;S<y;S++){for(var E=[],M=g;M<m;M++)T=this.getPixel(M,S,T),E.push({x:M,y:S,color:T.color,alpha:T.alphaGL});C.push(E)}return C},getIndex:function(v,d){return v=Math.abs(Math.round(v)),d=Math.abs(Math.round(d)),v<this.width&&d<this.height?(v+d*this.width)*4:-1},refresh:function(){return this._source.update(),this},getCanvas:function(){return this.canvas},getContext:function(){return this.context},clear:function(v,d,c,p){return v===void 0&&(v=0),d===void 0&&(d=0),c===void 0&&(c=this.width),p===void 0&&(p=this.height),this.context.clearRect(v,d,c,p),this.update()},setSize:function(v,d){return d===void 0&&(d=v),(v!==this.width||d!==this.height)&&(this.canvas.width=v,this.canvas.height=d,this._source.width=v,this._source.height=d,this._source.isPowerOf2=l(v,d),this.frames.__BASE.setSize(v,d,0,0),this.width=v,this.height=d,this.refresh()),this},destroy:function(){o.prototype.destroy.call(this),this._source=null,this.canvas=null,this.context=null,this.imageData=null,this.data=null,this.pixels=null,this.buffer=null}});e.exports=u},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(31),h=i(0),r=i(138),a=i(168),l=new h({initialize:function(u,v,d,c,p){p===void 0&&(p=!1);var g=u.manager.game;this.renderer=g.renderer,this.texture=u,this.source=v,this.image=v,this.compressionAlgorithm=null,this.resolution=1,this.width=d||v.naturalWidth||v.videoWidth||v.width||0,this.height=c||v.naturalHeight||v.videoHeight||v.height||0,this.scaleMode=a.DEFAULT,this.isCanvas=v instanceof HTMLCanvasElement,this.isVideo=window.hasOwnProperty("HTMLVideoElement")&&v instanceof HTMLVideoElement,this.isRenderTexture=v.type==="RenderTexture",this.isGLTexture=window.hasOwnProperty("WebGLTexture")&&v instanceof WebGLTexture,this.isPowerOf2=r(this.width,this.height),this.glTexture=null,this.glIndex=0,this.glIndexCounter=-1,this.flipY=p,this.init(g)},init:function(o){var u=this.renderer;u&&(u.gl?this.isCanvas?this.glTexture=u.createCanvasTexture(this.image,!1,this.flipY):this.isVideo?this.glTexture=u.createVideoTexture(this.image,!1,this.flipY):this.isRenderTexture?(this.image=this.source.canvas,this.glTexture=u.createTextureFromSource(null,this.width,this.height,this.scaleMode)):this.isGLTexture?this.glTexture=this.source:this.glTexture=u.createTextureFromSource(this.image,this.width,this.height,this.scaleMode):this.isRenderTexture&&(this.image=this.source.canvas)),o.config.antialias||this.setFilter(1)},setFilter:function(o){this.renderer.gl&&this.renderer.setTextureFilter(this.glTexture,o),this.scaleMode=o},setFlipY:function(o){return o===void 0&&(o=!0),this.flipY=o,this},update:function(){var o=this.renderer.gl;o&&this.isCanvas?this.glTexture=this.renderer.updateCanvasTexture(this.image,this.glTexture,this.flipY):o&&this.isVideo&&(this.glTexture=this.renderer.updateVideoTexture(this.image,this.glTexture,this.flipY))},destroy:function(){this.glTexture&&this.renderer.deleteTexture(this.glTexture,!0),this.isCanvas&&n.remove(this.image),this.renderer=null,this.texture=null,this.source=null,this.image=null,this.glTexture=null}});e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={AtlasXML:i(979),Canvas:i(980),Image:i(981),JSONArray:i(982),JSONHash:i(983),SpriteSheet:i(984),SpriteSheetFromAtlas:i(985),UnityYAML:i(986)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(427),h=i(430),r=i(432),a={create:function(l){var o=l.config.audio,u=l.device.audio;return o.noAudio||!u.webAudio&&!u.audioData?new h(l):u.webAudio&&!o.disableWebAudio?new r(l):new n(l)}};e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(145),h=i(0),r=i(70),a=i(429),l=new h({Extends:n,initialize:function(u){this.override=!0,this.audioPlayDelay=.1,this.loopEndOffset=.05,this.onBlurPausedSounds=[],this.locked="ontouchstart"in window,this.lockedActionsQueue=this.locked?[]:null,this._mute=!1,this._volume=1,n.call(this,u)},add:function(o,u){var v=new a(this,o,u);return this.sounds.push(v),v},unlock:function(){this.locked=!1;var o=this;if(this.game.cache.audio.entries.each(function(c,p){for(var g=0;g<p.length;g++)if(p[g].dataset.locked==="true")return o.locked=!0,!1;return!0}),!!this.locked){var u=!1,v=function(){u=!0},d=function(){if(u){u=!1;return}document.body.removeEventListener("touchmove",v),document.body.removeEventListener("touchend",d);var c=[];if(o.game.cache.audio.entries.each(function(g,m){for(var x=0;x<m.length;x++){var y=m[x];y.dataset.locked==="true"&&c.push(y)}return!0}),c.length!==0){var p=c[c.length-1];p.oncanplaythrough=function(){p.oncanplaythrough=null,c.forEach(function(g){g.dataset.locked="false"}),o.unlocked=!0},c.forEach(function(g){g.load()})}};this.once(r.UNLOCKED,function(){for(this.forEachActiveSound(function(p){p.currentMarker===null&&p.duration===0&&(p.duration=p.tags[0].duration),p.totalDuration=p.tags[0].duration});this.lockedActionsQueue.length;){var c=this.lockedActionsQueue.shift();c.sound[c.prop].apply?c.sound[c.prop].apply(c.sound,c.value||[]):c.sound[c.prop]=c.value}},this),document.body.addEventListener("touchmove",v,!1),document.body.addEventListener("touchend",d,!1)}},onBlur:function(){this.forEachActiveSound(function(o){o.isPlaying&&(this.onBlurPausedSounds.push(o),o.onBlur())})},onFocus:function(){this.onBlurPausedSounds.forEach(function(o){o.onFocus()}),this.onBlurPausedSounds.length=0},destroy:function(){n.prototype.destroy.call(this),this.onBlurPausedSounds.length=0,this.onBlurPausedSounds=null},isLocked:function(o,u,v){return o.tags[0].dataset.locked==="true"?(this.lockedActionsQueue.push({sound:o,prop:u,value:v}),!0):!1},setMute:function(o){return this.mute=o,this},mute:{get:function(){return this._mute},set:function(o){this._mute=o,this.forEachActiveSound(function(u){u.updateMute()}),this.emit(r.GLOBAL_MUTE,this,o)}},setVolume:function(o){return this.volume=o,this},volume:{get:function(){return this._volume},set:function(o){this._volume=o,this.forEachActiveSound(function(u){u.updateVolume()}),this.emit(r.GLOBAL_VOLUME,this,o)}}});e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(78),h=function(r,a,l,o,u){if(o===void 0&&(o=0),u===void 0&&(u=r.length),n(r,o,u))for(var v=o;v<u;v++){var d=r[v];if(!a||a&&l===void 0&&d.hasOwnProperty(a)||a&&l!==void 0&&d[a]===l)return d}return null};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(146),h=i(0),r=i(70),a=i(18),l=new h({Extends:n,initialize:function(u,v,d){if(d===void 0&&(d={}),this.tags=u.game.cache.audio.get(v),!this.tags)throw new Error('There is no audio asset with key "'+v+'" in the audio cache');this.audio=null,this.startTime=0,this.previousTime=0,this.duration=this.tags[0].duration,this.totalDuration=this.tags[0].duration,n.call(this,u,v,d)},play:function(o,u){return this.manager.isLocked(this,"play",[o,u])||!n.prototype.play.call(this,o,u)||!this.pickAndPlayAudioTag()?!1:(this.emit(r.PLAY,this),!0)},pause:function(){return this.manager.isLocked(this,"pause")||this.startTime>0||!n.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.stopAndReleaseAudioTag(),this.emit(r.PAUSE,this),!0)},resume:function(){return this.manager.isLocked(this,"resume")||this.startTime>0||!n.prototype.resume.call(this)||!this.pickAndPlayAudioTag()?!1:(this.emit(r.RESUME,this),!0)},stop:function(){return this.manager.isLocked(this,"stop")||!n.prototype.stop.call(this)?!1:(this.stopAndReleaseAudioTag(),this.emit(r.STOP,this),!0)},pickAndPlayAudioTag:function(){if(!this.pickAudioTag())return this.reset(),!1;var o=this.currentConfig.seek,u=this.currentConfig.delay,v=(this.currentMarker?this.currentMarker.start:0)+o;return this.previousTime=v,this.audio.currentTime=v,this.applyConfig(),u===0?(this.startTime=0,this.audio.paused&&this.playCatchPromise()):(this.startTime=window.performance.now()+u*1e3,this.audio.paused||this.audio.pause()),this.resetConfig(),!0},pickAudioTag:function(){if(this.audio)return!0;for(var o=0;o<this.tags.length;o++){var u=this.tags[o];if(u.dataset.used==="false")return u.dataset.used="true",this.audio=u,!0}if(!this.manager.override)return!1;var v=[];this.manager.forEachActiveSound(function(c){c.key===this.key&&c.audio&&v.push(c)},this),v.sort(function(c,p){return c.loop===p.loop?p.seek/p.duration-c.seek/c.duration:c.loop?1:-1});var d=v[0];return this.audio=d.audio,d.reset(),d.audio=null,d.startTime=0,d.previousTime=0,!0},playCatchPromise:function(){var o=this.audio.play();o&&o.catch(function(u){console.warn(u)})},stopAndReleaseAudioTag:function(){this.startTime=0,this.previousTime=0,this.audio&&(this.audio.pause(),this.audio.dataset.used="false",this.audio=null)},reset:function(){n.prototype.stop.call(this)},onBlur:function(){this.isPlaying=!1,this.isPaused=!0,this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.currentConfig.delay=Math.max(0,(this.startTime-window.performance.now())/1e3),this.stopAndReleaseAudioTag()},onFocus:function(){this.isPlaying=!0,this.isPaused=!1,this.pickAndPlayAudioTag()},update:function(o){if(!!this.isPlaying){if(this.startTime>0){this.startTime<o-this.manager.audioPlayDelay&&(this.audio.currentTime+=Math.max(0,o-this.startTime)/1e3,this.startTime=0,this.previousTime=this.audio.currentTime,this.playCatchPromise());return}var u=this.currentMarker?this.currentMarker.start:0,v=u+this.duration,d=this.audio.currentTime;if(this.currentConfig.loop)d>=v-this.manager.loopEndOffset?(this.audio.currentTime=u+Math.max(0,d-v),d=this.audio.currentTime):d<u&&(this.audio.currentTime+=u,d=this.audio.currentTime),d<this.previousTime&&this.emit(r.LOOPED,this);else if(d>=v){this.reset(),this.stopAndReleaseAudioTag(),this.emit(r.COMPLETE,this);return}this.previousTime=d}},destroy:function(){n.prototype.destroy.call(this),this.tags=null,this.audio&&this.stopAndReleaseAudioTag()},updateMute:function(){this.audio&&(this.audio.muted=this.currentConfig.mute||this.manager.mute)},updateVolume:function(){this.audio&&(this.audio.volume=a(this.currentConfig.volume*this.manager.volume,0,1))},calculateRate:function(){n.prototype.calculateRate.call(this),this.audio&&(this.audio.playbackRate=this.totalRate)},mute:{get:function(){return this.currentConfig.mute},set:function(o){this.currentConfig.mute=o,!this.manager.isLocked(this,"mute",o)&&(this.updateMute(),this.emit(r.MUTE,this,o))}},setMute:function(o){return this.mute=o,this},volume:{get:function(){return this.currentConfig.volume},set:function(o){this.currentConfig.volume=o,!this.manager.isLocked(this,"volume",o)&&(this.updateVolume(),this.emit(r.VOLUME,this,o))}},setVolume:function(o){return this.volume=o,this},rate:{get:function(){return this.currentConfig.rate},set:function(o){this.currentConfig.rate=o,!this.manager.isLocked(this,r.RATE,o)&&(this.calculateRate(),this.emit(r.RATE,this,o))}},setRate:function(o){return this.rate=o,this},detune:{get:function(){return this.currentConfig.detune},set:function(o){this.currentConfig.detune=o,!this.manager.isLocked(this,r.DETUNE,o)&&(this.calculateRate(),this.emit(r.DETUNE,this,o))}},setDetune:function(o){return this.detune=o,this},seek:{get:function(){return this.isPlaying?this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0):this.isPaused?this.currentConfig.seek:0},set:function(o){this.manager.isLocked(this,"seek",o)||this.startTime>0||(this.isPlaying||this.isPaused)&&(o=Math.min(Math.max(0,o),this.duration),this.isPlaying?(this.previousTime=o,this.audio.currentTime=o):this.isPaused&&(this.currentConfig.seek=o),this.emit(r.SEEK,this,o))}},setSeek:function(o){return this.seek=o,this},loop:{get:function(){return this.currentConfig.loop},set:function(o){this.currentConfig.loop=o,!this.manager.isLocked(this,"loop",o)&&(this.audio&&(this.audio.loop=o),this.emit(r.LOOP,this,o))}},setLoop:function(o){return this.loop=o,this},pan:{get:function(){return this.currentConfig.pan},set:function(o){this.currentConfig.pan=o,this.emit(r.PAN,this,o)}},setPan:function(o){return this.pan=o,this}});e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(145),h=i(0),r=i(9),a=i(431),l=i(1),o=new h({Extends:r,initialize:function(v){r.call(this),this.game=v,this.sounds=[],this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.pauseOnBlur=!0,this.locked=!1},add:function(u,v){var d=new a(this,u,v);return this.sounds.push(d),d},addAudioSprite:function(u,v){var d=this.add(u,v);return d.spritemap={},d},play:function(u,v){return!1},playAudioSprite:function(u,v,d){return!1},remove:function(u){return n.prototype.remove.call(this,u)},removeByKey:function(u){return n.prototype.removeByKey.call(this,u)},pauseAll:l,resumeAll:l,stopAll:l,update:l,setRate:l,setDetune:l,setMute:l,setVolume:l,forEachActiveSound:function(u,v){n.prototype.forEachActiveSound.call(this,u,v)},destroy:function(){n.prototype.destroy.call(this)}});e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(146),h=i(0),r=i(9),a=i(17),l=function(){return!1},o=function(){return null},u=function(){return this},v=new h({Extends:r,initialize:function(c,p,g){g===void 0&&(g={}),r.call(this),this.manager=c,this.key=p,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=0,this.totalDuration=0,this.config=a({mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},g),this.currentConfig=this.config,this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.seek=0,this.loop=!1,this.pan=0,this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:l,updateMarker:l,removeMarker:o,play:l,pause:l,resume:l,stop:l,destroy:function(){n.prototype.destroy.call(this)},setMute:u,setVolume:u,setRate:u,setDetune:u,setSeek:u,setLoop:u,setPan:u});e.exports=v},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(433),h=i(145),r=i(0),a=i(70),l=i(22),o=i(434),u=new r({Extends:h,initialize:function(d){this.context=this.createAudioContext(d),this.masterMuteNode=this.context.createGain(),this.masterVolumeNode=this.context.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(this.context.destination),this.destination=this.masterMuteNode,this.locked=this.context.state==="suspended"&&("ontouchstart"in window||"onclick"in window),h.call(this,d),this.locked&&d.isBooted?this.unlock():d.events.once(l.BOOT,this.unlock,this)},createAudioContext:function(v){var d=v.config.audio;if(d.context)return d.context.resume(),d.context;if(window.hasOwnProperty("AudioContext"))return new AudioContext;if(window.hasOwnProperty("webkitAudioContext"))return new window.webkitAudioContext},setAudioContext:function(v){return this.context&&this.context.close(),this.masterMuteNode&&this.masterMuteNode.disconnect(),this.masterVolumeNode&&this.masterVolumeNode.disconnect(),this.context=v,this.masterMuteNode=v.createGain(),this.masterVolumeNode=v.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(v.destination),this.destination=this.masterMuteNode,this},add:function(v,d){var c=new o(this,v,d);return this.sounds.push(c),c},decodeAudio:function(v,d){var c;Array.isArray(v)?c=v:c=[{key:v,data:d}];for(var p=this.game.cache.audio,g=c.length,m=0;m<c.length;m++){var x=c[m],y=x.key,T=x.data;typeof T=="string"&&(T=n(T));var C=function(E,M){p.add(E,M),this.emit(a.DECODED,E),g--,g===0&&this.emit(a.DECODED_ALL)}.bind(this,y),S=function(E,M){console.error("Error decoding audio: "+E+" - ",M?M.message:""),g--,g===0&&this.emit(a.DECODED_ALL)}.bind(this,y);this.context.decodeAudioData(T,C,S)}},unlock:function(){var v=this,d=document.body,c=function p(){if(v.context&&d){var g=d.removeEventListener;v.context.resume().then(function(){g("touchstart",p),g("touchend",p),g("click",p),g("keydown",p),v.unlocked=!0},function(){g("touchstart",p),g("touchend",p),g("click",p),g("keydown",p)})}};d&&(d.addEventListener("touchstart",c,!1),d.addEventListener("touchend",c,!1),d.addEventListener("click",c,!1),d.addEventListener("keydown",c,!1))},onBlur:function(){this.locked||this.context.suspend()},onFocus:function(){var v=this.context;(v.state==="suspended"||v.state==="interrupted")&&!this.locked&&v.resume()},update:function(v,d){h.prototype.update.call(this,v,d);var c=this.context;c&&c.state==="interrupted"&&c.resume()},destroy:function(){if(this.destination=null,this.masterVolumeNode.disconnect(),this.masterVolumeNode=null,this.masterMuteNode.disconnect(),this.masterMuteNode=null,this.game.config.audio.context)this.context.suspend();else{var v=this;this.context.close().then(function(){v.context=null})}h.prototype.destroy.call(this)},setMute:function(v){return this.mute=v,this},mute:{get:function(){return this.masterMuteNode.gain.value===0},set:function(v){this.masterMuteNode.gain.setValueAtTime(v?0:1,0),this.emit(a.GLOBAL_MUTE,this,v)}},setVolume:function(v){return this.volume=v,this},volume:{get:function(){return this.masterVolumeNode.gain.value},set:function(v){this.masterVolumeNode.gain.setValueAtTime(v,0),this.emit(a.GLOBAL_VOLUME,this,v)}}});e.exports=u},function(e,f){/**
 * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */for(var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=new Uint8Array(256),h=0;h<i.length;h++)n[i.charCodeAt(h)]=h;var r=function(a){a=a.substr(a.indexOf(",")+1);var l=a.length,o=l*.75,u=0,v,d,c,p;a[l-1]==="="&&(o--,a[l-2]==="="&&o--);for(var g=new ArrayBuffer(o),m=new Uint8Array(g),x=0;x<l;x+=4)v=n[a.charCodeAt(x)],d=n[a.charCodeAt(x+1)],c=n[a.charCodeAt(x+2)],p=n[a.charCodeAt(x+3)],m[u++]=v<<2|d>>4,m[u++]=(d&15)<<4|c>>2,m[u++]=(c&3)<<6|p&63;return g};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(146),h=i(0),r=i(70),a=new h({Extends:n,initialize:function(o,u,v){if(v===void 0&&(v={}),this.audioBuffer=o.game.cache.audio.get(u),!this.audioBuffer)throw new Error('Audio key "'+u+'" missing from cache');this.source=null,this.loopSource=null,this.muteNode=o.context.createGain(),this.volumeNode=o.context.createGain(),this.pannerNode=null,this.playTime=0,this.startTime=0,this.loopTime=0,this.rateUpdates=[],this.hasEnded=!1,this.hasLooped=!1,this.muteNode.connect(this.volumeNode),o.context.createStereoPanner?(this.pannerNode=o.context.createStereoPanner(),this.volumeNode.connect(this.pannerNode),this.pannerNode.connect(o.destination)):this.volumeNode.connect(o.destination),this.duration=this.audioBuffer.duration,this.totalDuration=this.audioBuffer.duration,n.call(this,o,u,v)},play:function(l,o){return n.prototype.play.call(this,l,o)?(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource(),this.emit(r.PLAY,this),!0):!1},pause:function(){return this.manager.context.currentTime<this.startTime||!n.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.getCurrentTime(),this.stopAndRemoveBufferSource(),this.emit(r.PAUSE,this),!0)},resume:function(){return this.manager.context.currentTime<this.startTime||!n.prototype.resume.call(this)?!1:(this.createAndStartBufferSource(),this.emit(r.RESUME,this),!0)},stop:function(){return n.prototype.stop.call(this)?(this.stopAndRemoveBufferSource(),this.emit(r.STOP,this),!0):!1},createAndStartBufferSource:function(){var l=this.currentConfig.seek,o=this.currentConfig.delay,u=this.manager.context.currentTime+o,v=(this.currentMarker?this.currentMarker.start:0)+l,d=this.duration-l;this.playTime=u-l,this.startTime=u,this.source=this.createBufferSource(),this.applyConfig(),this.source.start(Math.max(0,u),Math.max(0,v),Math.max(0,d)),this.resetConfig()},createAndStartLoopBufferSource:function(){var l=this.getLoopTime(),o=this.currentMarker?this.currentMarker.start:0,u=this.duration;this.loopTime=l,this.loopSource=this.createBufferSource(),this.loopSource.playbackRate.setValueAtTime(this.totalRate,0),this.loopSource.start(Math.max(0,l),Math.max(0,o),Math.max(0,u))},createBufferSource:function(){var l=this,o=this.manager.context.createBufferSource();return o.buffer=this.audioBuffer,o.connect(this.muteNode),o.onended=function(u){u.target===l.source&&(l.currentConfig.loop?l.hasLooped=!0:l.hasEnded=!0)},o},stopAndRemoveBufferSource:function(){this.source&&(this.source.stop(),this.source.disconnect(),this.source=null),this.playTime=0,this.startTime=0,this.stopAndRemoveLoopBufferSource()},stopAndRemoveLoopBufferSource:function(){this.loopSource&&(this.loopSource.stop(),this.loopSource.disconnect(),this.loopSource=null),this.loopTime=0},applyConfig:function(){this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:1}),n.prototype.applyConfig.call(this)},update:function(){this.hasEnded?(this.hasEnded=!1,n.prototype.stop.call(this),this.stopAndRemoveBufferSource(),this.emit(r.COMPLETE,this)):this.hasLooped&&(this.hasLooped=!1,this.source=this.loopSource,this.loopSource=null,this.playTime=this.startTime=this.loopTime,this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:this.totalRate}),this.createAndStartLoopBufferSource(),this.emit(r.LOOPED,this))},destroy:function(){n.prototype.destroy.call(this),this.audioBuffer=null,this.stopAndRemoveBufferSource(),this.muteNode.disconnect(),this.muteNode=null,this.volumeNode.disconnect(),this.volumeNode=null,this.pannerNode&&(this.pannerNode.disconnect(),this.pannerNode=null),this.rateUpdates.length=0,this.rateUpdates=null},calculateRate:function(){n.prototype.calculateRate.call(this);var l=this.manager.context.currentTime;this.source&&typeof this.totalRate=="number"&&this.source.playbackRate.setValueAtTime(this.totalRate,l),this.isPlaying&&(this.rateUpdates.push({time:Math.max(this.startTime,l)-this.playTime,rate:this.totalRate}),this.loopSource&&(this.stopAndRemoveLoopBufferSource(),this.createAndStartLoopBufferSource()))},getCurrentTime:function(){for(var l=0,o=0;o<this.rateUpdates.length;o++){var u=0;o<this.rateUpdates.length-1?u=this.rateUpdates[o+1].time:u=this.manager.context.currentTime-this.playTime,l+=(u-this.rateUpdates[o].time)*this.rateUpdates[o].rate}return l},getLoopTime:function(){for(var l=0,o=0;o<this.rateUpdates.length-1;o++)l+=(this.rateUpdates[o+1].time-this.rateUpdates[o].time)*this.rateUpdates[o].rate;var u=this.rateUpdates[this.rateUpdates.length-1];return this.playTime+u.time+(this.duration-l)/u.rate},rate:{get:function(){return this.currentConfig.rate},set:function(l){this.currentConfig.rate=l,this.calculateRate(),this.emit(r.RATE,this,l)}},setRate:function(l){return this.rate=l,this},detune:{get:function(){return this.currentConfig.detune},set:function(l){this.currentConfig.detune=l,this.calculateRate(),this.emit(r.DETUNE,this,l)}},setDetune:function(l){return this.detune=l,this},mute:{get:function(){return this.muteNode.gain.value===0},set:function(l){this.currentConfig.mute=l,this.muteNode.gain.setValueAtTime(l?0:1,0),this.emit(r.MUTE,this,l)}},setMute:function(l){return this.mute=l,this},volume:{get:function(){return this.volumeNode.gain.value},set:function(l){this.currentConfig.volume=l,this.volumeNode.gain.setValueAtTime(l,0),this.emit(r.VOLUME,this,l)}},setVolume:function(l){return this.volume=l,this},seek:{get:function(){return this.isPlaying?this.manager.context.currentTime<this.startTime?this.startTime-this.playTime:this.getCurrentTime():this.isPaused?this.currentConfig.seek:0},set:function(l){this.manager.context.currentTime<this.startTime||(this.isPlaying||this.isPaused)&&(l=Math.min(Math.max(0,l),this.duration),this.currentConfig.seek=l,this.isPlaying&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource()),this.emit(r.SEEK,this,l))}},setSeek:function(l){return this.seek=l,this},loop:{get:function(){return this.currentConfig.loop},set:function(l){this.currentConfig.loop=l,this.isPlaying&&(this.stopAndRemoveLoopBufferSource(),l&&this.createAndStartLoopBufferSource()),this.emit(r.LOOP,this,l)}},setLoop:function(l){return this.loop=l,this},pan:{get:function(){return this.pannerNode?this.pannerNode.pan.value:0},set:function(l){this.currentConfig.pan=l,this.pannerNode&&this.pannerNode.pan.setValueAtTime(l,this.manager.context.currentTime),this.emit(r.PAN,this,l)}},setPan:function(l){return this.pan=l,this}});e.exports=a},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){for(var h=n.length,r=n[0].length,a=new Array(r),l=0;l<r;l++){a[l]=new Array(h);for(var o=h-1;o>-1;o--)a[l][o]=n[o][l]}return a};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function i(r,a,l){var o=r[a];r[a]=r[l],r[l]=o}function n(r,a){return r<a?-1:r>a?1:0}var h=function(r,a,l,o,u){for(l===void 0&&(l=0),o===void 0&&(o=r.length-1),u===void 0&&(u=n);o>l;){if(o-l>600){var v=o-l+1,d=a-l+1,c=Math.log(v),p=.5*Math.exp(2*c/3),g=.5*Math.sqrt(c*p*(v-p)/v)*(d-v/2<0?-1:1),m=Math.max(l,Math.floor(a-d*p/v+g)),x=Math.min(o,Math.floor(a+(v-d)*p/v+g));h(r,a,m,x,u)}var y=r[a],T=l,C=o;for(i(r,l,a),u(r[o],y)>0&&i(r,l,o);T<C;){for(i(r,T,C),T++,C--;u(r[T],y)<0;)T++;for(;u(r[C],y)>0;)C--}u(r[l],y)===0?i(r,l,C):(C++,i(r,C,o)),C<=a&&(l=C+1),a<=C&&(o=C-1)}};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(6),h=i(131),r=function(l,o,u){for(var v=[],d=0;d<l.length;d++)for(var c=0;c<o.length;c++)for(var p=0;p<u;p++)v.push({a:l[d],b:o[c]});return v},a=function(l,o,u){var v=n(u,"max",0),d=n(u,"qty",1),c=n(u,"random",!1),p=n(u,"randomB",!1),g=n(u,"repeat",0),m=n(u,"yoyo",!1),x=[];if(p&&h(o),g===-1)if(v===0)g=0;else{var y=l.length*o.length*d;m&&(y*=2),g=Math.ceil(v/y)}for(var T=0;T<=g;T++){var C=r(l,o,d);c&&h(C),x=x.concat(C),m&&(C.reverse(),x=x.concat(C))}return v&&x.splice(v),x};e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={PROCESS_QUEUE_ADD:i(1041),PROCESS_QUEUE_REMOVE:i(1042)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(13),h=function(r,a){var l=n(a,"anims",null);if(l===null)return r;if(typeof l=="string")r.anims.play(l);else if(typeof l=="object"){var o=r.anims,u=n(l,"key",void 0);if(u){var v=n(l,"startFrame",void 0),d=n(l,"delay",0),c=n(l,"repeat",0),p=n(l,"repeatDelay",0),g=n(l,"yoyo",!1),m=n(l,"play",!1),x=n(l,"delayedPlay",0),y={key:u,delay:d,repeat:c,repeatDelay:p,yoyo:g,startFrame:v};m?o.play(y):x>0?o.playAfterDelay(y,x):o.load(y)}}return r};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(109),r=new n({initialize:function(l,o,u,v,d){this.parent=l,this.x=o,this.y=u,this.frame=v,this.data={},this.tint=16777215,this._visible=d,this._alpha=1,this.flipX=!1,this.flipY=!1},setFrame:function(a){return a===void 0?this.frame=this.parent.frame:a instanceof h&&a.texture===this.parent.texture?this.frame=a:this.frame=this.parent.texture.get(a),this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this},reset:function(a,l,o){return this.x=a,this.y=l,this.flipX=!1,this.flipY=!1,this._alpha=1,this._visible=!0,this.parent.dirty=!0,o&&this.setFrame(o),this},setPosition:function(a,l){return this.x=a,this.y=l,this},setFlipX:function(a){return this.flipX=a,this},setFlipY:function(a){return this.flipY=a,this},setFlip:function(a,l){return this.flipX=a,this.flipY=l,this},setVisible:function(a){return this.visible=a,this},setAlpha:function(a){return this.alpha=a,this},setTint:function(a){return this.tint=a,this},destroy:function(){this.parent.dirty=!0,this.parent.children.remove(this),this.parent=void 0,this.frame=void 0,this.data=void 0},visible:{get:function(){return this._visible},set:function(a){this.parent.dirty|=this._visible!==a,this._visible=a}},alpha:{get:function(){return this._alpha},set:function(a){this.parent.dirty|=this._alpha>0!=a>0,this._alpha=a}}});e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(10),h=function(r,a,l){l===void 0&&(l=new n);var o=Math.min(r.x,a.x),u=Math.min(r.y,a.y),v=Math.max(r.right,a.right)-o,d=Math.max(r.bottom,a.bottom)-u;return l.setTo(o,u,v,d)};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(11),r=i(1055),a=i(15),l=i(7),o=i(202),u=i(20),v=i(140),d=new n({Extends:a,Mixins:[h.AlphaSingle,h.BlendMode,h.Depth,h.Origin,h.ScrollFactor,h.Transform,h.Visible,r],initialize:function(p,g,m,x,y,T){a.call(this,p,"DOMElement"),this.parent=p.sys.game.domContainer,this.cache=p.sys.cache.html,this.node,this.transformOnly=!1,this.skewX=0,this.skewY=0,this.rotate3d=new v,this.rotate3dAngle="deg",this.pointerEvents="auto",this.width=0,this.height=0,this.displayWidth=0,this.displayHeight=0,this.handler=this.dispatchNativeEvent.bind(this),this.setPosition(g,m),typeof x=="string"?x[0]==="#"?this.setElement(x.substr(1),y,T):this.createElement(x,y,T):x&&this.setElement(x,y,T),p.sys.events.on(u.SLEEP,this.handleSceneEvent,this),p.sys.events.on(u.WAKE,this.handleSceneEvent,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},handleSceneEvent:function(c){var p=this.node,g=p.style;p&&(g.display=c.settings.visible?"block":"none")},setSkew:function(c,p){return c===void 0&&(c=0),p===void 0&&(p=c),this.skewX=c,this.skewY=p,this},setPerspective:function(c){return this.parent.style.perspective=c+"px",this},perspective:{get:function(){return parseFloat(this.parent.style.perspective)},set:function(c){this.parent.style.perspective=c+"px"}},addListener:function(c){if(this.node){c=c.split(" ");for(var p=0;p<c.length;p++)this.node.addEventListener(c[p],this.handler,!1)}return this},removeListener:function(c){if(this.node){c=c.split(" ");for(var p=0;p<c.length;p++)this.node.removeEventListener(c[p],this.handler)}return this},dispatchNativeEvent:function(c){this.emit(c.type,c)},createElement:function(c,p,g){return this.setElement(document.createElement(c),p,g)},setElement:function(c,p,g){this.removeElement();var m;if(typeof c=="string"?(c[0]==="#"&&(c=c.substr(1)),m=document.getElementById(c)):typeof c=="object"&&c.nodeType===1&&(m=c),!m)return this;if(this.node=m,p&&l(p))for(var x in p)m.style[x]=p[x];else typeof p=="string"&&(m.style=p);return m.style.zIndex="0",m.style.display="inline",m.style.position="absolute",m.phaser=this,this.parent&&this.parent.appendChild(m),g&&(m.innerText=g),this.updateSize()},createFromCache:function(c,p){var g=this.cache.get(c);return g&&this.createFromHTML(g,p),this},createFromHTML:function(c,p){p===void 0&&(p="div"),this.removeElement();var g=document.createElement(p);return this.node=g,g.style.zIndex="0",g.style.display="inline",g.style.position="absolute",g.phaser=this,this.parent&&this.parent.appendChild(g),g.innerHTML=c,this.updateSize()},removeElement:function(){return this.node&&(o(this.node),this.node=null),this},updateSize:function(){var c=this.node,p=c.getBoundingClientRect();return this.width=c.clientWidth,this.height=c.clientHeight,this.displayWidth=p.width||0,this.displayHeight=p.height||0,this},getChildByProperty:function(c,p){if(this.node){for(var g=this.node.querySelectorAll("*"),m=0;m<g.length;m++)if(g[m][c]===p)return g[m]}return null},getChildByID:function(c){return this.getChildByProperty("id",c)},getChildByName:function(c){return this.getChildByProperty("name",c)},setClassName:function(c){return this.node&&(this.node.className=c,this.updateSize()),this},setText:function(c){return this.node&&(this.node.innerText=c,this.updateSize()),this},setHTML:function(c){return this.node&&(this.node.innerHTML=c,this.updateSize()),this},preUpdate:function(){var c=this.parentContainer,p=this.node;p&&c&&!c.willRender()&&(p.style.display="none")},willRender:function(){return!0},preDestroy:function(){this.removeElement(),this.scene.sys.events.off(u.SLEEP,this.handleSceneEvent,this),this.scene.sys.events.off(u.WAKE,this.handleSceneEvent,this)}});e.exports=d},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1056),h=i(15),r=i(25),a=new r,l=new r,o=new r,u=function(v,d,c,p){if(!!d.node){var g=d.node.style,m=d.scene.sys.settings;if(!g||!m.visible||h.RENDER_MASK!==d.renderFlags||d.cameraFilter!==0&&d.cameraFilter&c.id||d.parentContainer&&!d.parentContainer.willRender()){g.display="none";return}var x=d.parentContainer,y=c.alpha*d.alpha;x&&(y*=x.alpha);var T=a,C=l,S=o,E=0,M=0,O="0%",L="0%";p?(E=d.width*d.scaleX*d.originX,M=d.height*d.scaleY*d.originY,C.applyITRS(d.x-E,d.y-M,d.rotation,d.scaleX,d.scaleY),T.copyFrom(c.matrix),T.multiplyWithOffset(p,-c.scrollX*d.scrollFactorX,-c.scrollY*d.scrollFactorY),C.e=d.x-E,C.f=d.y-M,T.multiply(C,S)):(E=d.width*d.originX,M=d.height*d.originY,C.applyITRS(d.x-E,d.y-M,d.rotation,d.scaleX,d.scaleY),T.copyFrom(c.matrix),O=100*d.originX+"%",L=100*d.originY+"%",C.e-=c.scrollX*d.scrollFactorX,C.f-=c.scrollY*d.scrollFactorY,T.multiply(C,S)),d.transformOnly||(g.display="block",g.opacity=y,g.zIndex=d._depth,g.pointerEvents=d.pointerEvents,g.mixBlendMode=n[d._blendMode]),g.transform=S.getCSSMatrix()+" skew("+d.skewX+"rad, "+d.skewY+"rad) rotate3d("+d.rotate3d.x+","+d.rotate3d.y+","+d.rotate3d.z+","+d.rotate3d.w+d.rotate3dAngle+")",g.transformOrigin=O+" "+L}};e.exports=u},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(11),r=i(15),a=i(1060),l=new n({Extends:r,Mixins:[h.Alpha,h.BlendMode,h.Depth,h.Flip,h.Origin,h.ScrollFactor,h.Size,h.Texture,h.Tint,h.Transform,h.Visible,a],initialize:function(u){r.call(this,u,"Extern")},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(){},render:function(){}});e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(218),h=i(98),r=i(14),a=i(4),l=function(o,u,v){v===void 0&&(v=new a);var d=h(u,0,r.PI2);return n(o,d,v)};e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(447),h=i(218),r=i(98),a=i(14),l=function(o,u,v,d){d===void 0&&(d=[]),!u&&v>0&&(u=n(o)/v);for(var c=0;c<u;c++){var p=r(c/u,0,a.PI2);d.push(h(o,p))}return d};e.exports=l},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){var h=n.width/2,r=n.height/2,a=Math.pow(h-r,2)/Math.pow(h+r,2);return Math.PI*(h+r)*(1+3*a/(10+Math.sqrt(4-3*a)))};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(217),h=i(30),r=function(a,l,o,u,v,d){var c=l.commandBuffer,p=c.length,g=v||a.currentContext;if(!(p===0||!h(a,g,l,o,u))){o.addToRenderList(l);var m=1,x=1,y=0,T=0,C=1,S=0,E=0,M=0;g.beginPath();for(var O=0;O<p;++O){var L=c[O];switch(L){case n.ARC:g.arc(c[O+1],c[O+2],c[O+3],c[O+4],c[O+5],c[O+6]),O+=7;break;case n.LINE_STYLE:C=c[O+1],y=c[O+2],m=c[O+3],S=(y&16711680)>>>16,E=(y&65280)>>>8,M=y&255,g.strokeStyle="rgba("+S+","+E+","+M+","+m+")",g.lineWidth=C,O+=3;break;case n.FILL_STYLE:T=c[O+1],x=c[O+2],S=(T&16711680)>>>16,E=(T&65280)>>>8,M=T&255,g.fillStyle="rgba("+S+","+E+","+M+","+x+")",O+=2;break;case n.BEGIN_PATH:g.beginPath();break;case n.CLOSE_PATH:g.closePath();break;case n.FILL_PATH:d||g.fill();break;case n.STROKE_PATH:d||g.stroke();break;case n.FILL_RECT:d?g.rect(c[O+1],c[O+2],c[O+3],c[O+4]):g.fillRect(c[O+1],c[O+2],c[O+3],c[O+4]),O+=4;break;case n.FILL_TRIANGLE:g.beginPath(),g.moveTo(c[O+1],c[O+2]),g.lineTo(c[O+3],c[O+4]),g.lineTo(c[O+5],c[O+6]),g.closePath(),d||g.fill(),O+=6;break;case n.STROKE_TRIANGLE:g.beginPath(),g.moveTo(c[O+1],c[O+2]),g.lineTo(c[O+3],c[O+4]),g.lineTo(c[O+5],c[O+6]),g.closePath(),d||g.stroke(),O+=6;break;case n.LINE_TO:g.lineTo(c[O+1],c[O+2]),O+=2;break;case n.MOVE_TO:g.moveTo(c[O+1],c[O+2]),O+=2;break;case n.LINE_FX_TO:g.lineTo(c[O+1],c[O+2]),O+=5;break;case n.MOVE_FX_TO:g.moveTo(c[O+1],c[O+2]),O+=5;break;case n.SAVE:g.save();break;case n.RESTORE:g.restore();break;case n.TRANSLATE:g.translate(c[O+1],c[O+2]),O+=2;break;case n.SCALE:g.scale(c[O+1],c[O+2]),O+=2;break;case n.ROTATE:g.rotate(c[O+1]),O+=1;break;case n.GRADIENT_FILL_STYLE:O+=5;break;case n.GRADIENT_LINE_STYLE:O+=6;break}}g.restore()}};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(137),r=i(80),a=i(2),l=i(68),o=new n({initialize:function(v,d,c,p){p===void 0&&(p=!1),this.propertyKey=d,this.propertyValue=c,this.defaultValue=c,this.steps=0,this.counter=0,this.start=0,this.end=0,this.ease,this.emitOnly=p,this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,this.loadConfig(v)},loadConfig:function(u,v){u===void 0&&(u={}),v&&(this.propertyKey=v),this.propertyValue=a(u,this.propertyKey,this.defaultValue),this.setMethods(),this.emitOnly&&(this.onUpdate=this.defaultUpdate)},toJSON:function(){return this.propertyValue},onChange:function(u){return this.propertyValue=u,this.setMethods()},setMethods:function(){var u=this.propertyValue,v=typeof u;if(this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,v==="number")this.onEmit=this.staticValueEmit,this.onUpdate=this.staticValueUpdate;else if(Array.isArray(u))this.onEmit=this.randomStaticValueEmit;else if(v==="function")this.emitOnly?this.onEmit=u:this.onUpdate=u;else if(v==="object"&&this.hasBoth(u,"start","end")){this.start=u.start,this.end=u.end;var d=this.has(u,"random");if(d&&(this.onEmit=this.randomRangedValueEmit),this.has(u,"steps"))this.steps=u.steps,this.counter=this.start,this.onEmit=this.steppedEmit;else{var c=this.has(u,"ease")?u.ease:"Linear";this.ease=r(c,u.easeParams),d||(this.onEmit=this.easedValueEmit),this.onUpdate=this.easeValueUpdate}}else if(v==="object"&&this.hasBoth(u,"min","max"))this.start=u.min,this.end=u.max,this.onEmit=this.randomRangedValueEmit;else if(v==="object"&&this.has(u,"random")){var p=u.random;Array.isArray(p)&&(this.start=p[0],this.end=p[1]),this.onEmit=this.randomRangedValueEmit}else v==="object"&&this.hasEither(u,"onEmit","onUpdate")&&(this.has(u,"onEmit")&&(this.onEmit=u.onEmit),this.has(u,"onUpdate")&&(this.onUpdate=u.onUpdate));return this},has:function(u,v){return u.hasOwnProperty(v)},hasBoth:function(u,v,d){return u.hasOwnProperty(v)&&u.hasOwnProperty(d)},hasEither:function(u,v,d){return u.hasOwnProperty(v)||u.hasOwnProperty(d)},defaultEmit:function(u,v,d){return d},defaultUpdate:function(u,v,d,c){return c},staticValueEmit:function(){return this.propertyValue},staticValueUpdate:function(){return this.propertyValue},randomStaticValueEmit:function(){var u=Math.floor(Math.random()*this.propertyValue.length);return this.propertyValue[u]},randomRangedValueEmit:function(u,v){var d=h(this.start,this.end);return u&&u.data[v]&&(u.data[v].min=d),d},steppedEmit:function(){var u=this.counter,v=this.counter+(this.end-this.start)/this.steps;return this.counter=l(v,this.start,this.end),u},easedValueEmit:function(u,v){if(u&&u.data[v]){var d=u.data[v];d.min=this.start,d.max=this.end}return this.start},easeValueUpdate:function(u,v,d){var c=u.data[v];return(c.max-c.min)*this.ease(d)+c.min}});e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(2),r=new n({initialize:function(l,o,u,v,d){if(typeof l=="object"){var c=l;l=h(c,"x",0),o=h(c,"y",0),u=h(c,"power",0),v=h(c,"epsilon",100),d=h(c,"gravity",50)}else l===void 0&&(l=0),o===void 0&&(o=0),u===void 0&&(u=0),v===void 0&&(v=100),d===void 0&&(d=50);this.x=l,this.y=o,this.active=!0,this._gravity=d,this._power=0,this._epsilon=0,this.power=u,this.epsilon=v},update:function(a,l){var o=this.x-a.x,u=this.y-a.y,v=o*o+u*u;if(v!==0){var d=Math.sqrt(v);v<this._epsilon&&(v=this._epsilon);var c=this._power*l/(v*d)*100;a.velocityX+=o*c,a.velocityY+=u*c}},epsilon:{get:function(){return Math.sqrt(this._epsilon)},set:function(a){this._epsilon=a*a}},power:{get:function(){return this._power/this._gravity},set:function(a){this._power=a*this._gravity}},gravity:{get:function(){return this._gravity},set:function(a){var l=this.power;this._gravity=a,this.power=l}}});e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(36),r=i(50),a=new n({initialize:function(o){this.emitter=o,this.frame=null,this.x=0,this.y=0,this.velocityX=0,this.velocityY=0,this.accelerationX=0,this.accelerationY=0,this.maxVelocityX=1e4,this.maxVelocityY=1e4,this.bounce=0,this.scaleX=1,this.scaleY=1,this.alpha=1,this.angle=0,this.rotation=0,this.tint=16777215,this.life=1e3,this.lifeCurrent=1e3,this.delayCurrent=0,this.lifeT=0,this.data={tint:{min:16777215,max:16777215,current:16777215},alpha:{min:1,max:1},rotate:{min:0,max:0},scaleX:{min:1,max:1},scaleY:{min:1,max:1}}},isAlive:function(){return this.lifeCurrent>0},resetPosition:function(){this.x=0,this.y=0},fire:function(l,o){var u=this.emitter;this.frame=u.getFrame(),u.emitZone&&u.emitZone.getPoint(this),l===void 0?this.x+=u.x.onEmit(this,"x"):this.x+=l,o===void 0?this.y+=u.y.onEmit(this,"y"):this.y+=o,this.life=u.lifespan.onEmit(this,"lifespan"),this.lifeCurrent=this.life,this.lifeT=0;var v=u.speedX.onEmit(this,"speedX"),d=u.speedY?u.speedY.onEmit(this,"speedY"):v;if(u.radial){var c=h(u.angle.onEmit(this,"angle"));this.velocityX=Math.cos(c)*Math.abs(v),this.velocityY=Math.sin(c)*Math.abs(d)}else if(u.moveTo){var p=u.moveToX.onEmit(this,"moveToX"),g=u.moveToY?u.moveToY.onEmit(this,"moveToY"):p,m=Math.atan2(g-this.y,p-this.x),x=r(this.x,this.y,p,g)/(this.life/1e3);this.velocityX=Math.cos(m)*x,this.velocityY=Math.sin(m)*x}else this.velocityX=v,this.velocityY=d;u.acceleration&&(this.accelerationX=u.accelerationX.onEmit(this,"accelerationX"),this.accelerationY=u.accelerationY.onEmit(this,"accelerationY")),this.maxVelocityX=u.maxVelocityX.onEmit(this,"maxVelocityX"),this.maxVelocityY=u.maxVelocityY.onEmit(this,"maxVelocityY"),this.delayCurrent=u.delay.onEmit(this,"delay"),this.scaleX=u.scaleX.onEmit(this,"scaleX"),this.scaleY=u.scaleY?u.scaleY.onEmit(this,"scaleY"):this.scaleX,this.angle=u.rotate.onEmit(this,"rotate"),this.rotation=h(this.angle),this.bounce=u.bounce.onEmit(this,"bounce"),this.alpha=u.alpha.onEmit(this,"alpha"),this.tint=u.tint.onEmit(this,"tint")},computeVelocity:function(l,o,u,v){var d=this.velocityX,c=this.velocityY,p=this.accelerationX,g=this.accelerationY,m=this.maxVelocityX,x=this.maxVelocityY;d+=l.gravityX*u,c+=l.gravityY*u,p&&(d+=p*u),g&&(c+=g*u),d>m?d=m:d<-m&&(d=-m),c>x?c=x:c<-x&&(c=-x),this.velocityX=d,this.velocityY=c;for(var y=0;y<v.length;y++)v[y].update(this,o,u)},checkBounds:function(l){var o=l.bounds,u=-this.bounce;this.x<o.x&&l.collideLeft?(this.x=o.x,this.velocityX*=u):this.x>o.right&&l.collideRight&&(this.x=o.right,this.velocityX*=u),this.y<o.y&&l.collideTop?(this.y=o.y,this.velocityY*=u):this.y>o.bottom&&l.collideBottom&&(this.y=o.bottom,this.velocityY*=u)},update:function(l,o,u){if(this.delayCurrent>0)return this.delayCurrent-=l,!1;var v=this.emitter,d=1-this.lifeCurrent/this.life;return this.lifeT=d,this.computeVelocity(v,l,o,u),this.x+=this.velocityX*o,this.y+=this.velocityY*o,v.bounds&&this.checkBounds(v),v.deathZone&&v.deathZone.willKill(this)?(this.lifeCurrent=0,!0):(this.scaleX=v.scaleX.onUpdate(this,"scaleX",d,this.scaleX),v.scaleY?this.scaleY=v.scaleY.onUpdate(this,"scaleY",d,this.scaleY):this.scaleY=this.scaleX,this.angle=v.rotate.onUpdate(this,"rotate",d,this.angle),this.rotation=h(this.angle),this.alpha=v.alpha.onUpdate(this,"alpha",d,this.alpha),this.tint=v.tint.onUpdate(this,"tint",d,this.tint),this.lifeCurrent-=l,this.lifeCurrent<=0)}});e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(35),h=i(0),r=i(11),a=i(453),l=i(454),o=i(449),u=i(2),v=i(210),d=i(455),c=i(126),p=i(451),g=i(456),m=i(10),x=i(79),y=i(3),T=i(68),C=new h({Mixins:[r.BlendMode,r.Mask,r.ScrollFactor,r.Visible],initialize:function(E,M){this.manager=E,this.texture=E.texture,this.frames=[E.defaultFrame],this.defaultFrame=E.defaultFrame,this.configFastMap=["active","blendMode","collideBottom","collideLeft","collideRight","collideTop","deathCallback","deathCallbackScope","emitCallback","emitCallbackScope","follow","frequency","gravityX","gravityY","maxParticles","name","on","particleBringToTop","particleClass","radial","timeScale","trackVisible","visible"],this.configOpMap=["accelerationX","accelerationY","angle","alpha","bounce","delay","lifespan","maxVelocityX","maxVelocityY","moveToX","moveToY","quantity","rotate","scaleX","scaleY","speedX","speedY","tint","x","y"],this.name="",this.particleClass=p,this.x=new o(M,"x",0,!0),this.y=new o(M,"y",0,!0),this.radial=!0,this.gravityX=0,this.gravityY=0,this.acceleration=!1,this.accelerationX=new o(M,"accelerationX",0,!0),this.accelerationY=new o(M,"accelerationY",0,!0),this.maxVelocityX=new o(M,"maxVelocityX",1e4,!0),this.maxVelocityY=new o(M,"maxVelocityY",1e4,!0),this.speedX=new o(M,"speedX",0,!0),this.speedY=new o(M,"speedY",0,!0),this.moveTo=!1,this.moveToX=new o(M,"moveToX",0,!0),this.moveToY=new o(M,"moveToY",0,!0),this.bounce=new o(M,"bounce",0,!0),this.scaleX=new o(M,"scaleX",1),this.scaleY=new o(M,"scaleY",1),this.tint=new o(M,"tint",16777215),this.alpha=new o(M,"alpha",1),this.lifespan=new o(M,"lifespan",1e3,!0),this.angle=new o(M,"angle",{min:0,max:360},!0),this.rotate=new o(M,"rotate",0),this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.maxParticles=0,this.quantity=new o(M,"quantity",1,!0),this.delay=new o(M,"delay",0,!0),this.frequency=0,this.on=!0,this.particleBringToTop=!0,this.timeScale=1,this.emitZone=null,this.deathZone=null,this.bounds=null,this.collideLeft=!0,this.collideRight=!0,this.collideTop=!0,this.collideBottom=!0,this.active=!0,this.visible=!0,this.blendMode=n.NORMAL,this.follow=null,this.followOffset=new y,this.trackVisible=!1,this.currentFrame=0,this.randomFrame=!0,this.frameQuantity=1,this.dead=[],this.alive=[],this._counter=0,this._frameCounter=0,M&&this.fromJSON(M)},fromJSON:function(S){if(!S)return this;var E=0,M="";for(E=0;E<this.configFastMap.length;E++)M=this.configFastMap[E],c(S,M)&&(this[M]=u(S,M));for(E=0;E<this.configOpMap.length;E++)M=this.configOpMap[E],c(S,M)&&this[M].loadConfig(S);if(this.acceleration=this.accelerationX.propertyValue!==0||this.accelerationY.propertyValue!==0,this.moveTo=this.moveToX.propertyValue!==0||this.moveToY.propertyValue!==0,c(S,"speed")&&(this.speedX.loadConfig(S,"speed"),this.speedY=null),(d(S,["speedX","speedY"])||this.moveTo)&&(this.radial=!1),c(S,"scale")&&(this.scaleX.loadConfig(S,"scale"),this.scaleY=null),c(S,"callbackScope")){var O=u(S,"callbackScope",null);this.emitCallbackScope=O,this.deathCallbackScope=O}return c(S,"emitZone")&&this.setEmitZone(S.emitZone),c(S,"deathZone")&&this.setDeathZone(S.deathZone),c(S,"bounds")&&this.setBounds(S.bounds),c(S,"followOffset")&&this.followOffset.setFromObject(u(S,"followOffset",0)),c(S,"frame")&&this.setFrame(S.frame),c(S,"reserve")&&this.reserve(S.reserve),this},toJSON:function(S){S===void 0&&(S={});var E=0,M="";for(E=0;E<this.configFastMap.length;E++)M=this.configFastMap[E],S[M]=this[M];for(E=0;E<this.configOpMap.length;E++)M=this.configOpMap[E],this[M]&&(S[M]=this[M].toJSON());return this.speedY||(delete S.speedX,S.speed=this.speedX.toJSON()),this.scaleY||(delete S.scaleX,S.scale=this.scaleX.toJSON()),S},startFollow:function(S,E,M,O){return E===void 0&&(E=0),M===void 0&&(M=0),O===void 0&&(O=!1),this.follow=S,this.followOffset.set(E,M),this.trackVisible=O,this},stopFollow:function(){return this.follow=null,this.followOffset.set(0,0),this.trackVisible=!1,this},getFrame:function(){if(this.frames.length===1)return this.defaultFrame;if(this.randomFrame)return v(this.frames);var S=this.frames[this.currentFrame];return this._frameCounter++,this._frameCounter===this.frameQuantity&&(this._frameCounter=0,this.currentFrame=T(this.currentFrame+1,0,this._frameLength)),S},setFrame:function(S,E,M){E===void 0&&(E=!0),M===void 0&&(M=1),this.randomFrame=E,this.frameQuantity=M,this.currentFrame=0,this._frameCounter=0;var O=typeof S;if(Array.isArray(S)||O==="string"||O==="number")this.manager.setEmitterFrames(S,this);else if(O==="object"){var L=S;S=u(L,"frames",null),S&&this.manager.setEmitterFrames(S,this);var R=u(L,"cycle",!1);this.randomFrame=!R,this.frameQuantity=u(L,"quantity",M)}return this._frameLength=this.frames.length,this._frameLength===1&&(this.frameQuantity=1,this.randomFrame=!1),this},setRadial:function(S){return S===void 0&&(S=!0),this.radial=S,this},setPosition:function(S,E){return this.x.onChange(S),this.y.onChange(E),this},setBounds:function(S,E,M,O){if(typeof S=="object"){var L=S;S=L.x,E=L.y,M=c(L,"w")?L.w:L.width,O=c(L,"h")?L.h:L.height}return this.bounds?this.bounds.setTo(S,E,M,O):this.bounds=new m(S,E,M,O),this},setSpeedX:function(S){return this.speedX.onChange(S),this.radial=!1,this},setSpeedY:function(S){return this.speedY&&(this.speedY.onChange(S),this.radial=!1),this},setSpeed:function(S){return this.speedX.onChange(S),this.speedY=null,this.radial=!0,this},setScaleX:function(S){return this.scaleX.onChange(S),this},setScaleY:function(S){return this.scaleY.onChange(S),this},setScale:function(S){return this.scaleX.onChange(S),this.scaleY=null,this},setGravityX:function(S){return this.gravityX=S,this},setGravityY:function(S){return this.gravityY=S,this},setGravity:function(S,E){return this.gravityX=S,this.gravityY=E,this},setAlpha:function(S){return this.alpha.onChange(S),this},setTint:function(S){return this.tint.onChange(S),this},setEmitterAngle:function(S){return this.angle.onChange(S),this},setAngle:function(S){return this.angle.onChange(S),this},setLifespan:function(S){return this.lifespan.onChange(S),this},setQuantity:function(S){return this.quantity.onChange(S),this},setFrequency:function(S,E){return this.frequency=S,this._counter=0,E&&this.quantity.onChange(E),this},setEmitZone:function(S){if(S===void 0)this.emitZone=null;else{var E=u(S,"type","random"),M=u(S,"source",null);switch(E){case"random":this.emitZone=new g(M);break;case"edge":var O=u(S,"quantity",1),L=u(S,"stepRate",0),R=u(S,"yoyo",!1),F=u(S,"seamless",!0);this.emitZone=new l(M,O,L,R,F);break}}return this},setDeathZone:function(S){if(S===void 0)this.deathZone=null;else{var E=u(S,"type","onEnter"),M=u(S,"source",null);if(M&&typeof M.contains=="function"){var O=E==="onEnter";this.deathZone=new a(M,O)}}return this},reserve:function(S){for(var E=this.dead,M=0;M<S;M++)E.push(new this.particleClass(this));return this},getAliveParticleCount:function(){return this.alive.length},getDeadParticleCount:function(){return this.dead.length},getParticleCount:function(){return this.getAliveParticleCount()+this.getDeadParticleCount()},atLimit:function(){return this.maxParticles>0&&this.getParticleCount()===this.maxParticles},onParticleEmit:function(S,E){return S===void 0?(this.emitCallback=null,this.emitCallbackScope=null):typeof S=="function"&&(this.emitCallback=S,E&&(this.emitCallbackScope=E)),this},onParticleDeath:function(S,E){return S===void 0?(this.deathCallback=null,this.deathCallbackScope=null):typeof S=="function"&&(this.deathCallback=S,E&&(this.deathCallbackScope=E)),this},killAll:function(){for(var S=this.dead,E=this.alive;E.length>0;)S.push(E.pop());return this},forEachAlive:function(S,E){for(var M=this.alive,O=M.length,L=0;L<O;++L)S.call(E,M[L],this);return this},forEachDead:function(S,E){for(var M=this.dead,O=M.length,L=0;L<O;++L)S.call(E,M[L],this);return this},start:function(){return this.on=!0,this._counter=0,this},stop:function(){return this.on=!1,this},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},remove:function(){return this.manager.removeEmitter(this),this},depthSort:function(){return x(this.alive,this.depthSortCallback),this},flow:function(S,E){return E===void 0&&(E=1),this.frequency=S,this.quantity.onChange(E),this.start()},explode:function(S,E,M){return this.frequency=-1,this.emitParticle(S,E,M)},emitParticleAt:function(S,E,M){return this.emitParticle(M,S,E)},emitParticle:function(S,E,M){if(!this.atLimit()){S===void 0&&(S=this.quantity.onEmit());for(var O=this.dead,L=this.follow?this.follow.x+this.followOffset.x:E,R=this.follow?this.follow.y+this.followOffset.y:M,F=0;F<S;F++){var D=O.pop();if(D||(D=new this.particleClass(this)),D.fire(L,R),this.particleBringToTop?this.alive.push(D):this.alive.unshift(D),this.emitCallback&&this.emitCallback.call(this.emitCallbackScope,D,this),this.atLimit())break}return D}},preUpdate:function(S,E){E*=this.timeScale;var M=E/1e3;this.trackVisible&&(this.visible=this.follow.visible);var O=this.manager.getProcessors(),L=this.alive,R=this.dead,F=0,D=[],B=L.length;for(F=0;F<B;F++){var N=L[F];N.update(E,M,O)&&D.push({index:F,particle:N})}if(B=D.length,B>0){var U=this.deathCallback,X=this.deathCallbackScope;for(F=B-1;F>=0;F--){var K=D[F];L.splice(K.index,1),R.push(K.particle),U&&U.call(X,K.particle),K.particle.resetPosition()}}!this.on||(this.frequency===0?this.emitParticle():this.frequency>0&&(this._counter-=E,this._counter<=0&&(this.emitParticle(),this._counter=this.frequency-Math.abs(this._counter))))},depthSortCallback:function(S,E){return S.y-E.y}});e.exports=C},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=new n({initialize:function(a,l){this.source=a,this.killOnEnter=l},willKill:function(r){var a=this.source.contains(r.x,r.y);return a&&this.killOnEnter||!a&&!this.killOnEnter}});e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=new n({initialize:function(a,l,o,u,v){u===void 0&&(u=!1),v===void 0&&(v=!0),this.source=a,this.points=[],this.quantity=l,this.stepRate=o,this.yoyo=u,this.counter=-1,this.seamless=v,this._length=0,this._direction=0,this.updateSource()},updateSource:function(){if(this.points=this.source.getPoints(this.quantity,this.stepRate),this.seamless){var r=this.points[0],a=this.points[this.points.length-1];r.x===a.x&&r.y===a.y&&this.points.pop()}var l=this._length;return this._length=this.points.length,this._length<l&&this.counter>this._length&&(this.counter=this._length-1),this},changeSource:function(r){return this.source=r,this.updateSource()},getPoint:function(r){this._direction===0?(this.counter++,this.counter>=this._length&&(this.yoyo?(this._direction=1,this.counter=this._length-1):this.counter=0)):(this.counter--,this.counter===-1&&(this.yoyo?(this._direction=0,this.counter=0):this.counter=this._length-1));var a=this.points[this.counter];a&&(r.x=a.x,r.y=a.y)}});e.exports=h},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){for(var r=0;r<h.length;r++)if(n.hasOwnProperty(h[r]))return!0;return!1};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(3),r=new n({initialize:function(l){this.source=l,this._tempVec=new h},getPoint:function(a){var l=this._tempVec;this.source.getRandomPoint(l),a.x=l.x,a.y=l.y}});e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(11),r=i(73),a=new n({Extends:r,Mixins:[h.PathFollower],initialize:function(o,u,v,d,c,p){r.call(this,o,v,d,c,p),this.path=u},preUpdate:function(l,o){this.anims.update(l,o),this.pathUpdate(l)}});e.exports=a},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r){var a=n.canvas,l=n.context,o=n.style,u=[],v=0,d=r.length;o.maxLines>0&&o.maxLines<r.length&&(d=o.maxLines),o.syncFont(a,l);for(var c=0;c<d;c++){var p=o.strokeThickness;p+=l.measureText(r[c]).width,o.wordWrap&&(p-=l.measureText(" ").width),u[c]=Math.ceil(p),v=Math.max(v,u[c])}var g=h.fontSize+o.strokeThickness,m=g*d,x=n.lineSpacing;return d>1&&(m+=x*(d-1)),{width:v,height:m,lines:d,lineWidths:u,lineSpacing:x,lineHeight:g}};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(13),r=i(6),a=i(460),l={fontFamily:["fontFamily","Courier"],fontSize:["fontSize","16px"],fontStyle:["fontStyle",""],backgroundColor:["backgroundColor",null],color:["color","#fff"],stroke:["stroke","#fff"],strokeThickness:["strokeThickness",0],shadowOffsetX:["shadow.offsetX",0],shadowOffsetY:["shadow.offsetY",0],shadowColor:["shadow.color","#000"],shadowBlur:["shadow.blur",0],shadowStroke:["shadow.stroke",!1],shadowFill:["shadow.fill",!1],align:["align","left"],maxLines:["maxLines",0],fixedWidth:["fixedWidth",0],fixedHeight:["fixedHeight",0],resolution:["resolution",0],rtl:["rtl",!1],testString:["testString","|M\xC3\u2030qgy"],baselineX:["baselineX",1.2],baselineY:["baselineY",1.4],wordWrapWidth:["wordWrap.width",null],wordWrapCallback:["wordWrap.callback",null],wordWrapCallbackScope:["wordWrap.callbackScope",null],wordWrapUseAdvanced:["wordWrap.useAdvancedWrap",!1]},o=new n({initialize:function(v,d){this.parent=v,this.fontFamily,this.fontSize,this.fontStyle,this.backgroundColor,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.align,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.rtl,this.testString,this.baselineX,this.baselineY,this.wordWrapWidth,this.wordWrapCallback,this.wordWrapCallbackScope,this.wordWrapUseAdvanced,this._font,this.setStyle(d,!1,!0);var c=r(d,"metrics",!1);c?this.metrics={ascent:r(c,"ascent",0),descent:r(c,"descent",0),fontSize:r(c,"fontSize",0)}:this.metrics=a(this)},setStyle:function(u,v,d){v===void 0&&(v=!0),d===void 0&&(d=!1),u&&u.hasOwnProperty("fontSize")&&typeof u.fontSize=="number"&&(u.fontSize=u.fontSize.toString()+"px");for(var c in l){var p=d?l[c][1]:this[c];c==="wordWrapCallback"||c==="wordWrapCallbackScope"?this[c]=r(u,l[c][0],p):this[c]=h(u,l[c][0],p)}var g=r(u,"font",null);g!==null&&this.setFont(g,!1),this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim();var m=r(u,"fill",null);return m!==null&&(this.color=m),v?this.update(!0):this.parent},syncFont:function(u,v){v.font=this._font},syncStyle:function(u,v){v.textBaseline="alphabetic",v.fillStyle=this.color,v.strokeStyle=this.stroke,v.lineWidth=this.strokeThickness,v.lineCap="round",v.lineJoin="round"},syncShadow:function(u,v){v?(u.shadowOffsetX=this.shadowOffsetX,u.shadowOffsetY=this.shadowOffsetY,u.shadowColor=this.shadowColor,u.shadowBlur=this.shadowBlur):(u.shadowOffsetX=0,u.shadowOffsetY=0,u.shadowColor=0,u.shadowBlur=0)},update:function(u){return u&&(this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim(),this.metrics=a(this)),this.parent.updateText()},setFont:function(u,v){v===void 0&&(v=!0);var d=u,c="",p="";if(typeof u!="string")d=r(u,"fontFamily","Courier"),c=r(u,"fontSize","16px"),p=r(u,"fontStyle","");else{var g=u.split(" "),m=0;p=g.length>2?g[m++]:"",c=g[m++]||"16px",d=g[m++]||"Courier"}return(d!==this.fontFamily||c!==this.fontSize||p!==this.fontStyle)&&(this.fontFamily=d,this.fontSize=c,this.fontStyle=p,v&&this.update(!0)),this.parent},setFontFamily:function(u){return this.fontFamily!==u&&(this.fontFamily=u,this.update(!0)),this.parent},setFontStyle:function(u){return this.fontStyle!==u&&(this.fontStyle=u,this.update(!0)),this.parent},setFontSize:function(u){return typeof u=="number"&&(u=u.toString()+"px"),this.fontSize!==u&&(this.fontSize=u,this.update(!0)),this.parent},setTestString:function(u){return this.testString=u,this.update(!0)},setFixedSize:function(u,v){return this.fixedWidth=u,this.fixedHeight=v,u&&(this.parent.width=u),v&&(this.parent.height=v),this.update(!1)},setBackgroundColor:function(u){return this.backgroundColor=u,this.update(!1)},setFill:function(u){return this.color=u,this.update(!1)},setColor:function(u){return this.color=u,this.update(!1)},setResolution:function(u){return this.resolution=u,this.update(!1)},setStroke:function(u,v){return v===void 0&&(v=this.strokeThickness),u===void 0&&this.strokeThickness!==0?(this.strokeThickness=0,this.update(!0)):(this.stroke!==u||this.strokeThickness!==v)&&(this.stroke=u,this.strokeThickness=v,this.update(!0)),this.parent},setShadow:function(u,v,d,c,p,g){return u===void 0&&(u=0),v===void 0&&(v=0),d===void 0&&(d="#000"),c===void 0&&(c=0),p===void 0&&(p=!1),g===void 0&&(g=!0),this.shadowOffsetX=u,this.shadowOffsetY=v,this.shadowColor=d,this.shadowBlur=c,this.shadowStroke=p,this.shadowFill=g,this.update(!1)},setShadowOffset:function(u,v){return u===void 0&&(u=0),v===void 0&&(v=u),this.shadowOffsetX=u,this.shadowOffsetY=v,this.update(!1)},setShadowColor:function(u){return u===void 0&&(u="#000"),this.shadowColor=u,this.update(!1)},setShadowBlur:function(u){return u===void 0&&(u=0),this.shadowBlur=u,this.update(!1)},setShadowStroke:function(u){return this.shadowStroke=u,this.update(!1)},setShadowFill:function(u){return this.shadowFill=u,this.update(!1)},setWordWrapWidth:function(u,v){return v===void 0&&(v=!1),this.wordWrapWidth=u,this.wordWrapUseAdvanced=v,this.update(!1)},setWordWrapCallback:function(u,v){return v===void 0&&(v=null),this.wordWrapCallback=u,this.wordWrapCallbackScope=v,this.update(!1)},setAlign:function(u){return u===void 0&&(u="left"),this.align=u,this.update(!1)},setMaxLines:function(u){return u===void 0&&(u=0),this.maxLines=u,this.update(!1)},getTextMetrics:function(){var u=this.metrics;return{ascent:u.ascent,descent:u.descent,fontSize:u.fontSize}},toJSON:function(){var u={};for(var v in l)u[v]=this[v];return u.metrics=this.getTextMetrics(),u},destroy:function(){this.parent=void 0}});e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(31),h=function(r){var a=n.create(this),l=a.getContext("2d");r.syncFont(a,l);var o=l.measureText(r.testString);if("actualBoundingBoxAscent"in o){var u=o.actualBoundingBoxAscent,v=o.actualBoundingBoxDescent;return n.remove(a),{ascent:u,descent:v,fontSize:u+v}}var d=Math.ceil(o.width*r.baselineX),c=d,p=2*c;c=c*r.baselineY|0,a.width=d,a.height=p,l.fillStyle="#f00",l.fillRect(0,0,d,p),l.font=r._font,l.textBaseline="alphabetic",l.fillStyle="#000",l.fillText(r.testString,0,c);var g={ascent:0,descent:0,fontSize:0},m=l.getImageData(0,0,d,p);if(!m)return g.ascent=c,g.descent=c+6,g.fontSize=g.ascent+g.descent,n.remove(a),g;var x=m.data,y=x.length,T=d*4,C,S,E=0,M=!1;for(C=0;C<c;C++){for(S=0;S<T;S+=4)if(x[E+S]!==255){M=!0;break}if(!M)E+=T;else break}for(g.ascent=c-C,E=y-T,M=!1,C=p;C>c;C--){for(S=0;S<T;S+=4)if(x[E+S]!==255){M=!0;break}if(!M)E-=T;else break}return g.descent=C-c,g.fontSize=g.ascent+g.descent,n.remove(a),g};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1097),h=i(0),r=i(36),a=i(59),l=i(65),o=i(14),u=i(34),v=new h({Extends:u,Mixins:[n],initialize:function(c,p,g,m,x,y,T,C,S){p===void 0&&(p=0),g===void 0&&(g=0),m===void 0&&(m=128),x===void 0&&(x=0),y===void 0&&(y=360),T===void 0&&(T=!1),u.call(this,c,"Arc",new l(0,0,m)),this._startAngle=x,this._endAngle=y,this._anticlockwise=T,this._iterations=.01,this.setPosition(p,g);var E=this.geom.radius*2;this.setSize(E,E),C!==void 0&&this.setFillStyle(C,S),this.updateDisplayOrigin(),this.updateData()},iterations:{get:function(){return this._iterations},set:function(d){this._iterations=d,this.updateData()}},radius:{get:function(){return this.geom.radius},set:function(d){this.geom.radius=d;var c=d*2;this.setSize(c,c),this.updateDisplayOrigin(),this.updateData()}},startAngle:{get:function(){return this._startAngle},set:function(d){this._startAngle=d,this.updateData()}},endAngle:{get:function(){return this._endAngle},set:function(d){this._endAngle=d,this.updateData()}},anticlockwise:{get:function(){return this._anticlockwise},set:function(d){this._anticlockwise=d,this.updateData()}},setRadius:function(d){return this.radius=d,this},setIterations:function(d){return d===void 0&&(d=.01),this.iterations=d,this},setStartAngle:function(d,c){return this._startAngle=d,c!==void 0&&(this._anticlockwise=c),this.updateData()},setEndAngle:function(d,c){return this._endAngle=d,c!==void 0&&(this._anticlockwise=c),this.updateData()},updateData:function(){var d=this._iterations,c=d,p=this.geom.radius,g=r(this._startAngle),m=r(this._endAngle),x=this._anticlockwise,y=p,T=p;m-=g,x?m<-o.PI2?m=-o.PI2:m>0&&(m=-o.PI2+m%o.PI2):m>o.PI2?m=o.PI2:m<0&&(m=o.PI2+m%o.PI2);for(var C=[y+Math.cos(g)*p,T+Math.sin(g)*p],S;c<1;)S=m*c+g,C.push(y+Math.cos(S)*p,T+Math.sin(S)*p),c+=d;return S=m+g,C.push(y+Math.cos(S)*p,T+Math.sin(S)*p),C.push(y+Math.cos(g)*p,T+Math.sin(g)*p),this.pathIndexes=a(C),this.pathData=C,this}});e.exports=v},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(1100),r=i(59),a=i(10),l=i(34),o=new n({Extends:l,Mixins:[h],initialize:function(v,d,c,p,g,m){d===void 0&&(d=0),c===void 0&&(c=0),l.call(this,v,"Curve",p),this._smoothness=32,this._curveBounds=new a,this.closePath=!1,this.setPosition(d,c),g!==void 0&&this.setFillStyle(g,m),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(u){this._smoothness=u,this.updateData()}},setSmoothness:function(u){return this._smoothness=u,this.updateData()},updateData:function(){var u=this._curveBounds,v=this._smoothness;this.geom.getBounds(u,v),this.setSize(u.width,u.height),this.updateDisplayOrigin();for(var d=[],c=this.geom.getPoints(v),p=0;p<c.length;p++)d.push(c[p].x,c[p].y);return d.push(c[0].x,c[0].y),this.pathIndexes=r(d),this.pathData=d,this}});e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(59),r=i(1103),a=i(111),l=i(34),o=new n({Extends:l,Mixins:[r],initialize:function(v,d,c,p,g,m,x){d===void 0&&(d=0),c===void 0&&(c=0),p===void 0&&(p=128),g===void 0&&(g=128),l.call(this,v,"Ellipse",new a(p/2,g/2,p,g)),this._smoothness=64,this.setPosition(d,c),this.width=p,this.height=g,m!==void 0&&this.setFillStyle(m,x),this.updateDisplayOrigin(),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(u){this._smoothness=u,this.updateData()}},setSize:function(u,v){return this.width=u,this.height=v,this.geom.setPosition(u/2,v/2),this.geom.setSize(u,v),this.updateData()},setSmoothness:function(u){return this._smoothness=u,this.updateData()},updateData:function(){for(var u=[],v=this.geom.getPoints(this._smoothness),d=0;d<v.length;d++)u.push(v[d].x,v[d].y);return u.push(v[0].x,v[0].y),this.pathIndexes=h(u),this.pathData=u,this}});e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(34),r=i(1106),a=new n({Extends:h,Mixins:[r],initialize:function(o,u,v,d,c,p,g,m,x,y,T){u===void 0&&(u=0),v===void 0&&(v=0),d===void 0&&(d=128),c===void 0&&(c=128),p===void 0&&(p=32),g===void 0&&(g=32),h.call(this,o,"Grid",null),this.cellWidth=p,this.cellHeight=g,this.showCells=!0,this.outlineFillColor=0,this.outlineFillAlpha=0,this.showOutline=!0,this.showAltCells=!1,this.altFillColor,this.altFillAlpha,this.setPosition(u,v),this.setSize(d,c),this.setFillStyle(m,x),y!==void 0&&this.setOutlineStyle(y,T),this.updateDisplayOrigin()},setFillStyle:function(l,o){return o===void 0&&(o=1),l===void 0?this.showCells=!1:(this.fillColor=l,this.fillAlpha=o,this.showCells=!0),this},setAltFillStyle:function(l,o){return o===void 0&&(o=1),l===void 0?this.showAltCells=!1:(this.altFillColor=l,this.altFillAlpha=o,this.showAltCells=!0),this},setOutlineStyle:function(l,o){return o===void 0&&(o=1),l===void 0?this.showOutline=!1:(this.outlineFillColor=l,this.outlineFillAlpha=o,this.showOutline=!0),this}});e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1109),h=i(0),r=i(34),a=new h({Extends:r,Mixins:[n],initialize:function(o,u,v,d,c,p,g,m){u===void 0&&(u=0),v===void 0&&(v=0),d===void 0&&(d=48),c===void 0&&(c=32),p===void 0&&(p=15658734),g===void 0&&(g=10066329),m===void 0&&(m=13421772),r.call(this,o,"IsoBox",null),this.projection=4,this.fillTop=p,this.fillLeft=g,this.fillRight=m,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isFilled=!0,this.setPosition(u,v),this.setSize(d,c),this.updateDisplayOrigin()},setProjection:function(l){return this.projection=l,this},setFaces:function(l,o,u){return l===void 0&&(l=!0),o===void 0&&(o=!0),u===void 0&&(u=!0),this.showTop=l,this.showLeft=o,this.showRight=u,this},setFillStyle:function(l,o,u){return this.fillTop=l,this.fillLeft=o,this.fillRight=u,this.isFilled=!0,this}});e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(1112),r=i(34),a=new n({Extends:r,Mixins:[h],initialize:function(o,u,v,d,c,p,g,m,x){u===void 0&&(u=0),v===void 0&&(v=0),d===void 0&&(d=48),c===void 0&&(c=32),p===void 0&&(p=!1),g===void 0&&(g=15658734),m===void 0&&(m=10066329),x===void 0&&(x=13421772),r.call(this,o,"IsoTriangle",null),this.projection=4,this.fillTop=g,this.fillLeft=m,this.fillRight=x,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isReversed=p,this.isFilled=!0,this.setPosition(u,v),this.setSize(d,c),this.updateDisplayOrigin()},setProjection:function(l){return this.projection=l,this},setReversed:function(l){return this.isReversed=l,this},setFaces:function(l,o,u){return l===void 0&&(l=!0),o===void 0&&(o=!0),u===void 0&&(u=!0),this.showTop=l,this.showLeft=o,this.showRight=u,this},setFillStyle:function(l,o,u){return this.fillTop=l,this.fillLeft=o,this.fillRight=u,this.isFilled=!0,this}});e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(34),r=i(47),a=i(1115),l=new n({Extends:h,Mixins:[a],initialize:function(u,v,d,c,p,g,m,x,y){v===void 0&&(v=0),d===void 0&&(d=0),c===void 0&&(c=0),p===void 0&&(p=0),g===void 0&&(g=128),m===void 0&&(m=0),h.call(this,u,"Line",new r(c,p,g,m));var T=Math.max(1,this.geom.right-this.geom.left),C=Math.max(1,this.geom.bottom-this.geom.top);this.lineWidth=1,this._startWidth=1,this._endWidth=1,this.setPosition(v,d),this.setSize(T,C),x!==void 0&&this.setStrokeStyle(1,x,y),this.updateDisplayOrigin()},setLineWidth:function(o,u){return u===void 0&&(u=o),this._startWidth=o,this._endWidth=u,this.lineWidth=o,this},setTo:function(o,u,v,d){return this.geom.setTo(o,u,v,d),this}});e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1118),h=i(0),r=i(59),a=i(469),l=i(227),o=i(34),u=i(472),v=new h({Extends:o,Mixins:[n],initialize:function(c,p,g,m,x,y){p===void 0&&(p=0),g===void 0&&(g=0),o.call(this,c,"Polygon",new l(m));var T=a(this.geom);this.setPosition(p,g),this.setSize(T.width,T.height),x!==void 0&&this.setFillStyle(x,y),this.updateDisplayOrigin(),this.updateData()},smooth:function(d){d===void 0&&(d=1);for(var c=0;c<d;c++)u(this.geom);return this.updateData()},updateData:function(){for(var d=[],c=this.geom.points,p=0;p<c.length;p++)d.push(c[p].x,c[p].y);return d.push(c[0].x,c[0].y),this.pathIndexes=r(d),this.pathData=d,this}});e.exports=v},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(10),h=function(r,a){a===void 0&&(a=new n);for(var l=1/0,o=1/0,u=-l,v=-o,d,c=0;c<r.points.length;c++)d=r.points[c],l=Math.min(l,d.x),o=Math.min(o,d.y),u=Math.max(u,d.x),v=Math.max(v,d.y);return a.x=l,a.y=o,a.width=u-l,a.height=v-o,a};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(67),h=i(47),r=i(471),a=function(l,o,u,v){v===void 0&&(v=[]);var d=l.points,c=r(l);!o&&u>0&&(o=c/u);for(var p=0;p<o;p++)for(var g=c*(p/o),m=0,x=0;x<d.length;x++){var y=d[x],T=d[(x+1)%d.length],C=new h(y.x,y.y,T.x,T.y),S=n(C);if(g<m||g>m+S){m+=S;continue}var E=C.getPoint((g-m)/S);v.push(E);break}return v};e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(67),h=i(47),r=function(a){for(var l=a.points,o=0,u=0;u<l.length;u++){var v=l[u],d=l[(u+1)%l.length],c=new h(v.x,v.y,d.x,d.y);o+=n(c)}return o};e.exports=r},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Igor Ognichenko <ognichenko.igor@gmail.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(h,r){return h[0]=r[0],h[1]=r[1],h},n=function(h){var r,a=[],l=h.points;for(r=0;r<l.length;r++)a.push([l[r].x,l[r].y]);var o=[];for(a.length>0&&o.push(i([0,0],a[0])),r=0;r<a.length-1;r++){var u=a[r],v=a[r+1],d=u[0],c=u[1],p=v[0],g=v[1];o.push([.85*d+.15*p,.85*c+.15*g]),o.push([.15*d+.85*p,.15*c+.85*g])}return a.length>1&&o.push(i([0,0],a[a.length-1])),h.setTo(o)};e.exports=n},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(10),r=i(34),a=i(1121),l=new n({Extends:r,Mixins:[a],initialize:function(u,v,d,c,p,g,m){v===void 0&&(v=0),d===void 0&&(d=0),c===void 0&&(c=128),p===void 0&&(p=128),r.call(this,u,"Rectangle",new h(0,0,c,p)),this.setPosition(v,d),this.setSize(c,p),g!==void 0&&this.setFillStyle(g,m),this.updateDisplayOrigin(),this.updateData()},setSize:function(o,u){return this.width=o,this.height=u,this.geom.setSize(o,u),this.updateData(),this},updateData:function(){var o=[],u=this.geom,v=this._tempLine;return u.getLineA(v),o.push(v.x1,v.y1,v.x2,v.y2),u.getLineB(v),o.push(v.x2,v.y2),u.getLineC(v),o.push(v.x2,v.y2),u.getLineD(v),o.push(v.x2,v.y2),this.pathData=o,this}});e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1124),h=i(0),r=i(59),a=i(34),l=new h({Extends:a,Mixins:[n],initialize:function(u,v,d,c,p,g,m,x){v===void 0&&(v=0),d===void 0&&(d=0),c===void 0&&(c=5),p===void 0&&(p=32),g===void 0&&(g=64),a.call(this,u,"Star",null),this._points=c,this._innerRadius=p,this._outerRadius=g,this.setPosition(v,d),this.setSize(g*2,g*2),m!==void 0&&this.setFillStyle(m,x),this.updateDisplayOrigin(),this.updateData()},setPoints:function(o){return this._points=o,this.updateData()},setInnerRadius:function(o){return this._innerRadius=o,this.updateData()},setOuterRadius:function(o){return this._outerRadius=o,this.updateData()},points:{get:function(){return this._points},set:function(o){this._points=o,this.updateData()}},innerRadius:{get:function(){return this._innerRadius},set:function(o){this._innerRadius=o,this.updateData()}},outerRadius:{get:function(){return this._outerRadius},set:function(o){this._outerRadius=o,this.updateData()}},updateData:function(){var o=[],u=this._points,v=this._innerRadius,d=this._outerRadius,c=Math.PI/2*3,p=Math.PI/u,g=d,m=d;o.push(g,m+-d);for(var x=0;x<u;x++)o.push(g+Math.cos(c)*d,m+Math.sin(c)*d),c+=p,o.push(g+Math.cos(c)*v,m+Math.sin(c)*v),c+=p;return o.push(g,m+-d),this.pathIndexes=r(o),this.pathData=o,this}});e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(34),r=i(82),a=i(1127),l=new n({Extends:h,Mixins:[a],initialize:function(u,v,d,c,p,g,m,x,y,T,C){v===void 0&&(v=0),d===void 0&&(d=0),c===void 0&&(c=0),p===void 0&&(p=128),g===void 0&&(g=64),m===void 0&&(m=0),x===void 0&&(x=128),y===void 0&&(y=128),h.call(this,u,"Triangle",new r(c,p,g,m,x,y));var S=this.geom.right-this.geom.left,E=this.geom.bottom-this.geom.top;this.setPosition(v,d),this.setSize(S,E),T!==void 0&&this.setFillStyle(T,C),this.updateDisplayOrigin(),this.updateData()},setTo:function(o,u,v,d,c,p){return this.geom.setTo(o,u,v,d,c,p),this.updateData()},updateData:function(){var o=[],u=this.geom,v=this._tempLine;return u.getLineA(v),o.push(v.x1,v.y1,v.x2,v.y2),u.getLineB(v),o.push(v.x2,v.y2),u.getLineC(v),o.push(v.x2,v.y2),this.pathData=o,this}});e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4),h=i(67),r=function(a,l,o){o===void 0&&(o=new n);var u=a.getLineA(),v=a.getLineB(),d=a.getLineC();if(l<=0||l>=1)return o.x=u.x1,o.y=u.y1,o;var c=h(u),p=h(v),g=h(d),m=c+p+g,x=m*l,y=0;return x<c?(y=x/c,o.x=u.x1+(u.x2-u.x1)*y,o.y=u.y1+(u.y2-u.y1)*y):x>c+p?(x-=c+p,y=x/g,o.x=d.x1+(d.x2-d.x1)*y,o.y=d.y1+(d.y2-d.y1)*y):(x-=c,y=x/p,o.x=v.x1+(v.x2-v.x1)*y,o.y=v.y1+(v.y2-v.y1)*y),o};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(67),h=i(4),r=function(a,l,o,u){u===void 0&&(u=[]);var v=a.getLineA(),d=a.getLineB(),c=a.getLineC(),p=n(v),g=n(d),m=n(c),x=p+g+m;!l&&o>0&&(l=x/o);for(var y=0;y<l;y++){var T=x*(y/l),C=0,S=new h;T<p?(C=T/p,S.x=v.x1+(v.x2-v.x1)*C,S.y=v.y1+(v.y2-v.y1)*C):T>p+g?(T-=p+g,C=T/m,S.x=c.x1+(c.x2-c.x1)*C,S.y=c.y1+(c.y2-c.y1)*C):(T-=p,C=T/g,S.x=d.x1+(d.x2-d.x1)*C,S.y=d.y1+(d.y2-d.y1)*C),u.push(S)}return u};e.exports=r},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r){if(!n||typeof n=="number")return!1;if(n.hasOwnProperty(h))return n[h]=r,!0;if(h.indexOf(".")!==-1){for(var a=h.split("."),l=n,o=n,u=0;u<a.length;u++)if(l.hasOwnProperty(a[u]))o=l,l=l[a[u]];else return!1;return o[a[a.length-1]]=r,!0}return!1};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(116),h=i(117),r=function(a,l,o,u,v,d,c){if(u===void 0&&(u=!1),d===void 0&&(d=16777215),c===void 0&&(c=1),a.length!==l.length){console.warn("GenerateVerts: vertices and uvs count not equal");return}var p={faces:[],vertices:[]},g,m,x,y,T,C,S,E,M,O,L,R=u?3:2,F=Array.isArray(d),D=Array.isArray(c);if(Array.isArray(o)&&o.length>0)for(g=0;g<o.length;g++){var B=o[g],N=o[g]*2,U=o[g]*R;m=a[U],x=a[U+1],y=u?a[U+2]:0,T=l[N],C=l[N+1],S=F?d[B]:d,E=D?c[B]:c,M=0,O=0,L=0,v&&(M=v[U],O=v[U+1],L=u?v[U+2]:0),p.vertices.push(new h(m,x,y,T,C,S,E,M,O,L))}else{var X=0,K=0;for(g=0;g<a.length;g+=R)m=a[g],x=a[g+1],y=u?a[g+2]:0,T=l[X],C=l[X+1],S=F?d[K]:d,E=D?c[K]:c,M=0,O=0,L=0,v&&(M=v[g],O=v[g+1],L=u?v[g+2]:0),p.vertices.push(new h(m,x,y,T,C,S,E,M,O,L)),X+=2,K++}for(g=0;g<p.vertices.length;g+=3){var k=p.vertices[g],b=p.vertices[g+1],I=p.vertices[g+2];p.faces.push(new n(k,b,I))}return p};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(116),h=i(69),r=i(39),a=i(117),l=new r,o=new r,u=new h,v=function(d,c,p,g,m,x,y,T,C,S){p===void 0&&(p=1),g===void 0&&(g=0),m===void 0&&(m=0),x===void 0&&(x=0),y===void 0&&(y=0),T===void 0&&(T=0),C===void 0&&(C=0),S===void 0&&(S=!0);var E={faces:[],verts:[]},M=d.materials;l.set(g,m,x),o.set(y,T,C),u.fromRotationXYTranslation(o,l,S);for(var O=0;O<d.models.length;O++)for(var L=d.models[O],R=L.vertices,F=L.textureCoords,D=L.faces,B=0;B<D.length;B++){var N=D[B],U=N.vertices[0],X=N.vertices[1],K=N.vertices[2],k=R[U.vertexIndex],b=R[X.vertexIndex],I=R[K.vertexIndex],G=U.textureCoordsIndex,Y=X.textureCoordsIndex,V=K.textureCoordsIndex,W=G===-1?{u:0,v:1}:F[G],H=Y===-1?{u:0,v:0}:F[Y],Z=V===-1?{u:1,v:1}:F[V],q=16777215;N.material!==""&&M[N.material]&&(q=M[N.material]);var _=new a(k.x*p,k.y*p,k.z*p,W.u,W.v,q).transformMat4(u),nt=new a(b.x*p,b.y*p,b.z*p,H.u,H.v,q).transformMat4(u),rt=new a(I.x*p,I.y*p,I.z*p,Z.u,Z.v,q).transformMat4(u);E.verts.push(_,nt,rt),E.faces.push(new n(_,nt,rt))}return c&&(c.faces=c.faces.concat(E.faces),c.vertices=c.vertices.concat(E.verts)),E};e.exports=v},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(65),h=i(0),r=i(11),a=i(200),l=i(12),o=new h({Extends:n,Mixins:[r.ScrollFactor,r.Visible],initialize:function(v,d,c,p,g,m,x){n.call(this,v,d,c),this.color=new a(p,g,m),this.intensity=x,this.renderFlags=15,this.cameraFilter=0,this.setScrollFactor(1,1)},willRender:function(u){return!(o.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&u.id)},setColor:function(u){var v=l.getFloatsFromUintRGB(u);return this.color.set(v[0],v[1],v[2]),this},setIntensity:function(u){return this.intensity=u,this},setRadius:function(u){return this.radius=u,this}});o.RENDER_MASK=15,e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(151),h=i(0),r=i(50),a=i(481),l=i(150),o=i(200),u=i(74),v=i(79),d=i(12),c=new h({initialize:function(){this.lights=[],this.ambientColor=new o(.1,.1,.1),this.active=!1,this.maxLights=-1,this.visibleLights=0},addPointLight:function(p,g,m,x,y,T){return this.systems.displayList.add(new l(this.scene,p,g,m,x,y,T))},enable:function(){return this.maxLights===-1&&(this.maxLights=this.systems.renderer.config.maxLights),this.active=!0,this},disable:function(){return this.active=!1,this},getLights:function(p){for(var g=this.lights,m=p.worldView,x=[],y=0;y<g.length;y++){var T=g[y];T.willRender(p)&&n(T,m)&&x.push({light:T,distance:r(T.x,T.y,m.centerX,m.centerY)})}return x.length>this.maxLights&&(v(x,this.sortByDistance),x=x.slice(0,this.maxLights)),this.visibleLights=x.length,x},sortByDistance:function(p,g){return p.distance>=g.distance},setAmbientColor:function(p){var g=d.getFloatsFromUintRGB(p);return this.ambientColor.set(g[0],g[1],g[2]),this},getMaxVisibleLights:function(){return this.maxLights},getLightCount:function(){return this.lights.length},addLight:function(p,g,m,x,y){p===void 0&&(p=0),g===void 0&&(g=0),m===void 0&&(m=128),x===void 0&&(x=16777215),y===void 0&&(y=1);var T=d.getFloatsFromUintRGB(x),C=new a(p,g,m,T[0],T[1],T[2],y);return this.lights.push(C),C},removeLight:function(p){var g=this.lights.indexOf(p);return g>=0&&u(this.lights,g),this},shutdown:function(){this.lights.length=0},destroy:function(){this.shutdown()}});e.exports=c},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(56),h=i(17),r={Circle:i(1191),Ellipse:i(1201),Intersects:i(484),Line:i(1221),Mesh:i(1243),Point:i(1246),Polygon:i(1260),Rectangle:i(502),Triangle:i(1293)};r=h(!1,r,n),e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={CircleToCircle:i(231),CircleToRectangle:i(151),GetCircleToCircle:i(1211),GetCircleToRectangle:i(1212),GetLineToCircle:i(232),GetLineToLine:i(485),GetLineToPoints:i(486),GetLineToPolygon:i(487),GetLineToRectangle:i(234),GetRaysFromPointToPolygon:i(1213),GetRectangleIntersection:i(1214),GetRectangleToRectangle:i(1215),GetRectangleToTriangle:i(1216),GetTriangleToCircle:i(1217),GetTriangleToLine:i(492),GetTriangleToTriangle:i(1218),LineToCircle:i(233),LineToLine:i(96),LineToRectangle:i(488),PointToLine:i(496),PointToLineSegment:i(1219),RectangleToRectangle:i(152),RectangleToTriangle:i(489),RectangleToValues:i(1220),TriangleToCircle:i(491),TriangleToLine:i(493),TriangleToTriangle:i(494)}},function(e,f,i){/**
 * @author       Richard Davey
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(39),h=function(r,a,l){var o=r.x1,u=r.y1,v=r.x2,d=r.y2,c=a.x1,p=a.y1,g=a.x2,m=a.y2,x=v-o,y=d-u,T=g-c,C=m-p,S=C*x-T*y;if(x===0||S===0)return!1;var E=(x*(p-u)+y*(o-c))/(T*y-C*x),M=(c+T*E-o)/x;return M<0||E<0||E>1?null:(l===void 0&&(l=new n),l.set(o+x*M,u+y*M,M))};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(39),h=i(485),r=i(47),a=new r,l=new n,o=function(u,v,d){d===void 0&&(d=new n);var c=!1;d.set(),l.set();for(var p=v[0],g=1;g<v.length;g++){var m=v[g];a.setTo(p.x,p.y,m.x,m.y),p=m,h(u,a,l)&&(!c||l.z<d.z)&&(d.copy(l),c=!0)}return c?d:null};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(39),h=i(140),r=i(486),a=new n,l=function(o,u,v){v===void 0&&(v=new h),Array.isArray(u)||(u=[u]);var d=!1;v.set(),a.set();for(var c=0;c<u.length;c++)r(o,u[c].points,a)&&(!d||a.z<v.z)&&(v.set(a.x,a.y,a.z,c),d=!0);return d?v:null};e.exports=l},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){var r=n.x1,a=n.y1,l=n.x2,o=n.y2,u=h.x,v=h.y,d=h.right,c=h.bottom,p=0;if(r>=u&&r<=d&&a>=v&&a<=c||l>=u&&l<=d&&o>=v&&o<=c)return!0;if(r<u&&l>=u){if(p=a+(o-a)*(u-r)/(l-r),p>v&&p<=c)return!0}else if(r>d&&l<=d&&(p=a+(o-a)*(d-r)/(l-r),p>=v&&p<=c))return!0;if(a<v&&o>=v){if(p=r+(l-r)*(v-a)/(o-a),p>=u&&p<=d)return!0}else if(a>c&&o<=c&&(p=r+(l-r)*(c-a)/(o-a),p>=u&&p<=d))return!0;return!1};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(96),h=i(57),r=i(235),a=i(490),l=function(o,u){if(u.left>o.right||u.right<o.left||u.top>o.bottom||u.bottom<o.top)return!1;var v=u.getLineA(),d=u.getLineB(),c=u.getLineC();if(h(o,v.x1,v.y1)||h(o,v.x2,v.y2)||h(o,d.x1,d.y1)||h(o,d.x2,d.y2)||h(o,c.x1,c.y1)||h(o,c.x2,c.y2))return!0;var p=o.getLineA(),g=o.getLineB(),m=o.getLineC(),x=o.getLineD();if(n(v,p)||n(v,g)||n(v,m)||n(v,x)||n(d,p)||n(d,g)||n(d,m)||n(d,x)||n(c,p)||n(c,g)||n(c,m)||n(c,x))return!0;var y=a(o),T=r(u,y,!0);return T.length>0};e.exports=l},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){return h===void 0&&(h=[]),h.push({x:n.x,y:n.y}),h.push({x:n.right,y:n.y}),h.push({x:n.right,y:n.bottom}),h.push({x:n.x,y:n.bottom}),h};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(233),h=i(115),r=function(a,l){return a.left>l.right||a.right<l.left||a.top>l.bottom||a.bottom<l.top?!1:!!(h(a,l.x,l.y)||n(a.getLineA(),l)||n(a.getLineB(),l)||n(a.getLineC(),l))};e.exports=r},function(e,f,i){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4),h=i(493),r=i(96),a=function(l,o,u){if(u===void 0&&(u=[]),h(l,o))for(var v=l.getLineA(),d=l.getLineB(),c=l.getLineC(),p=[new n,new n,new n],g=[r(v,o,p[0]),r(d,o,p[1]),r(c,o,p[2])],m=0;m<3;m++)g[m]&&u.push(p[m]);return u};e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(96),h=function(r,a){return!!(r.contains(a.x1,a.y1)||r.contains(a.x2,a.y2)||n(r.getLineA(),a)||n(r.getLineB(),a)||n(r.getLineC(),a))};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(235),h=i(495),r=i(96),a=function(l,o){if(l.left>o.right||l.right<o.left||l.top>o.bottom||l.bottom<o.top)return!1;var u=l.getLineA(),v=l.getLineB(),d=l.getLineC(),c=o.getLineA(),p=o.getLineB(),g=o.getLineC();if(r(u,c)||r(u,p)||r(u,g)||r(v,c)||r(v,p)||r(v,g)||r(d,c)||r(d,p)||r(d,g))return!0;var m=h(l),x=n(o,m,!0);return x.length>0||(m=h(o),x=n(l,m,!0),x.length>0)};e.exports=a},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){return h===void 0&&(h=[]),h.push({x:n.x1,y:n.y1}),h.push({x:n.x2,y:n.y2}),h.push({x:n.x3,y:n.y3}),h};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Florian Mertens
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r){r===void 0&&(r=1);var a=h.x1,l=h.y1,o=h.x2,u=h.y2,v=n.x,d=n.y,c=(o-a)*(o-a)+(u-l)*(u-l);if(c===0)return!1;var p=((v-a)*(o-a)+(d-l)*(u-l))/c;if(p<0)return Math.sqrt((a-v)*(a-v)+(l-d)*(l-d))<=r;if(p>=0&&p<=1){var g=((l-d)*(o-a)-(a-v)*(u-l))/c;return Math.abs(g)*Math.sqrt(c)<=r}else return Math.sqrt((o-v)*(o-v)+(u-d)*(u-d))<=r};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(14),h=i(68),r=i(97),a=function(l){var o=r(l)-n.TAU;return h(o,-Math.PI,Math.PI)};e.exports=a},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=!0,n="untitled",h="",r="";function a(y){var T=y.indexOf("#");return T>-1?y.substring(0,T):y}function l(y){return y.models.length===0&&y.models.push({faces:[],name:n,textureCoords:[],vertexNormals:[],vertices:[]}),h="",y.models[y.models.length-1]}function o(y,T){var C=y.length>=2?y[1]:n;T.models.push({faces:[],name:C,textureCoords:[],vertexNormals:[],vertices:[]}),h=""}function u(y){y.length===2&&(h=y[1])}function v(y,T){var C=y.length,S=C>=2?parseFloat(y[1]):0,E=C>=3?parseFloat(y[2]):0,M=C>=4?parseFloat(y[3]):0;l(T).vertices.push({x:S,y:E,z:M})}function d(y,T){var C=y.length,S=C>=2?parseFloat(y[1]):0,E=C>=3?parseFloat(y[2]):0,M=C>=4?parseFloat(y[3]):0;isNaN(S)&&(S=0),isNaN(E)&&(E=0),isNaN(M)&&(M=0),i&&(E=1-E),l(T).textureCoords.push({u:S,v:E,w:M})}function c(y,T){var C=y.length,S=C>=2?parseFloat(y[1]):0,E=C>=3?parseFloat(y[2]):0,M=C>=4?parseFloat(y[3]):0;l(T).vertexNormals.push({x:S,y:E,z:M})}function p(y,T){var C=y.length-1;if(!(C<3)){for(var S={group:h,material:r,vertices:[]},E=0;E<C;E++){var M=y[E+1],O=M.split("/"),L=O.length;if(!(L<1||L>3)){var R=0,F=0,D=0;R=parseInt(O[0],10),L>1&&O[1]!==""&&(F=parseInt(O[1],10)),L>2&&(D=parseInt(O[2],10)),R!==0&&(R<0&&(R=l(T).vertices.length+1+R),F-=1,R-=1,D-=1,S.vertices.push({textureCoordsIndex:F,vertexIndex:R,vertexNormalIndex:D}))}}l(T).faces.push(S)}}function g(y,T){y.length>=2&&T.materialLibraries.push(y[1])}function m(y){y.length>=2&&(r=y[1])}var x=function(y,T){T===void 0&&(T=!0),i=T;var C={materials:{},materialLibraries:[],models:[]};h="",r="";for(var S=y.split(`
`),E=0;E<S.length;E++){var M=a(S[E]),O=M.replace(/\s\s+/g," ").trim().split(" ");switch(O[0].toLowerCase()){case"o":o(O,C);break;case"g":u(O);break;case"v":v(O,C);break;case"vt":d(O,C);break;case"vn":c(O,C);break;case"f":p(O,C);break;case"mtllib":g(O,C);break;case"usemtl":m(O);break}}return C};e.exports=x},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(103),h=function(r){for(var a={},l=r.split(`
`),o="",u=0;u<l.length;u++){var v=l[u].trim();if(!(v.indexOf("#")===0||v==="")){var d=v.replace(/\s\s+/g," ").trim().split(" ");switch(d[0].toLowerCase()){case"newmtl":{o=d[1];break}case"kd":{var c=Math.floor(d[1]*255),p=d.length>=2?Math.floor(d[2]*255):c,g=d.length>=3?Math.floor(d[3]*255):c;a[o]=n(c,p,g);break}}}}return a};e.exports=h},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return Math.sqrt(n.x*n.x+n.y*n.y)};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n.x*n.x+n.y*n.y};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(10);n.Area=i(1267),n.Ceil=i(1268),n.CeilAll=i(1269),n.CenterOn=i(190),n.Clone=i(1270),n.Contains=i(57),n.ContainsPoint=i(1271),n.ContainsRect=i(503),n.CopyFrom=i(1272),n.Decompose=i(490),n.Equals=i(1273),n.FitInside=i(1274),n.FitOutside=i(1275),n.Floor=i(1276),n.FloorAll=i(1277),n.FromPoints=i(199),n.FromXY=i(1278),n.GetAspectRatio=i(237),n.GetCenter=i(1279),n.GetPoint=i(171),n.GetPoints=i(306),n.GetSize=i(1280),n.Inflate=i(1281),n.Intersection=i(1282),n.MarchingAnts=i(316),n.MergePoints=i(1283),n.MergeRect=i(1284),n.MergeXY=i(1285),n.Offset=i(1286),n.OffsetPoint=i(1287),n.Overlaps=i(1288),n.Perimeter=i(130),n.PerimeterPoint=i(1289),n.Random=i(174),n.RandomOutside=i(1290),n.SameDimensions=i(1291),n.Scale=i(1292),n.Union=i(441),e.exports=n},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){return h.width*h.height>n.width*n.height?!1:h.x>n.x&&h.x<n.right&&h.right>n.x&&h.right<n.right&&h.y>n.y&&h.y<n.bottom&&h.bottom>n.y&&h.bottom<n.bottom};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4),h=function(r,a){return a===void 0&&(a=new n),a.x=(r.x1+r.x2+r.x3)/3,a.y=(r.y1+r.y2+r.y3)/3,a};e.exports=h},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r){return n.x1+=h,n.y1+=r,n.x2+=h,n.y2+=r,n.x3+=h,n.y3+=r,n};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4);function h(a,l,o,u){var v=a-o,d=l-u,c=v*v+d*d;return Math.sqrt(c)}var r=function(a,l){l===void 0&&(l=new n);var o=a.x1,u=a.y1,v=a.x2,d=a.y2,c=a.x3,p=a.y3,g=h(c,p,v,d),m=h(o,u,c,p),x=h(v,d,o,u),y=g+m+x;return l.x=(o*g+v*m+c*x)/y,l.y=(u*g+d*m+p*x)/y,l};e.exports=r},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){return function(r,a,l,o){var u=n.getPixelAlpha(a,l,o.texture.key,o.frame.name);return u&&u>=h}};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r){return{gameObject:n,enabled:!0,alwaysEnabled:!1,draggable:!1,dropZone:!1,cursor:!1,target:null,camera:null,hitArea:h,hitAreaCallback:r,hitAreaDebug:null,customHitArea:!1,localX:0,localY:0,dragState:0,dragStartX:0,dragStartY:0,dragStartXGlobal:0,dragStartYGlobal:0,dragX:0,dragY:0}};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=new n({initialize:function(a,l){this.pad=a,this.events=a.events,this.index=l,this.value=0,this.threshold=.1},update:function(r){this.value=r},getValue:function(){return Math.abs(this.value)<this.threshold?0:this.value},destroy:function(){this.pad=null,this.events=null}});e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(239),r=new n({initialize:function(l,o){this.pad=l,this.events=l.manager,this.index=o,this.value=0,this.threshold=1,this.pressed=!1},update:function(a){this.value=a;var l=this.pad,o=this.index;a>=this.threshold?this.pressed||(this.pressed=!0,this.events.emit(h.BUTTON_DOWN,l,this,a),this.pad.emit(h.GAMEPAD_BUTTON_DOWN,o,a,this)):this.pressed&&(this.pressed=!1,this.events.emit(h.BUTTON_UP,l,this,a),this.pad.emit(h.GAMEPAD_BUTTON_UP,o,a,this))},destroy:function(){this.pad=null,this.events=null}});e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(509),h=i(510),r=i(0),a=i(9),l=i(3),o=new r({Extends:a,initialize:function(v,d){a.call(this),this.manager=v,this.pad=d,this.id=d.id,this.index=d.index;for(var c=[],p=0;p<d.buttons.length;p++)c.push(new h(this,p));this.buttons=c;var g=[];for(p=0;p<d.axes.length;p++)g.push(new n(this,p));this.axes=g,this.vibration=d.vibrationActuator;var m={value:0,pressed:!1};this._LCLeft=c[14]?c[14]:m,this._LCRight=c[15]?c[15]:m,this._LCTop=c[12]?c[12]:m,this._LCBottom=c[13]?c[13]:m,this._RCLeft=c[2]?c[2]:m,this._RCRight=c[1]?c[1]:m,this._RCTop=c[3]?c[3]:m,this._RCBottom=c[0]?c[0]:m,this._FBLeftTop=c[4]?c[4]:m,this._FBLeftBottom=c[6]?c[6]:m,this._FBRightTop=c[5]?c[5]:m,this._FBRightBottom=c[7]?c[7]:m;var x={value:0};this._HAxisLeft=g[0]?g[0]:x,this._VAxisLeft=g[1]?g[1]:x,this._HAxisRight=g[2]?g[2]:x,this._VAxisRight=g[3]?g[3]:x,this.leftStick=new l,this.rightStick=new l,this._created=performance.now()},getAxisTotal:function(){return this.axes.length},getAxisValue:function(u){return this.axes[u].getValue()},setAxisThreshold:function(u){for(var v=0;v<this.axes.length;v++)this.axes[v].threshold=u},getButtonTotal:function(){return this.buttons.length},getButtonValue:function(u){return this.buttons[u].value},isButtonDown:function(u){return this.buttons[u].pressed},update:function(u){if(!(u.timestamp<this._created)){var v,d=this.buttons,c=u.buttons,p=d.length;for(v=0;v<p;v++)d[v].update(c[v].value);var g=this.axes,m=u.axes;for(p=g.length,v=0;v<p;v++)g[v].update(m[v]);p>=2&&(this.leftStick.set(g[0].getValue(),g[1].getValue()),p>=4&&this.rightStick.set(g[2].getValue(),g[3].getValue()))}},destroy:function(){this.removeAllListeners(),this.manager=null,this.pad=null;var u;for(u=0;u<this.buttons.length;u++)this.buttons[u].destroy();for(u=0;u<this.axes.length;u++)this.axes[u].destroy();this.buttons=[],this.axes=[]},connected:{get:function(){return this.pad.connected}},timestamp:{get:function(){return this.pad.timestamp}},left:{get:function(){return this._LCLeft.pressed}},right:{get:function(){return this._LCRight.pressed}},up:{get:function(){return this._LCTop.pressed}},down:{get:function(){return this._LCBottom.pressed}},A:{get:function(){return this._RCBottom.pressed}},Y:{get:function(){return this._RCTop.pressed}},X:{get:function(){return this._RCLeft.pressed}},B:{get:function(){return this._RCRight.pressed}},L1:{get:function(){return this._FBLeftTop.value}},L2:{get:function(){return this._FBLeftBottom.value}},R1:{get:function(){return this._FBRightTop.value}},R2:{get:function(){return this._FBRightBottom.value}}});e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(9),r=i(154),a=new n({Extends:h,initialize:function(o,u){h.call(this),this.plugin=o,this.keyCode=u,this.originalEvent=void 0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.location=0,this.timeDown=0,this.duration=0,this.timeUp=0,this.emitOnRepeat=!1,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1},setEmitOnRepeat:function(l){return this.emitOnRepeat=l,this},onDown:function(l){this.originalEvent=l,this.enabled&&(this.altKey=l.altKey,this.ctrlKey=l.ctrlKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.location=l.location,this.repeats++,this.isDown?this.emitOnRepeat&&this.emit(r.DOWN,this,l):(this.isDown=!0,this.isUp=!1,this.timeDown=l.timeStamp,this.duration=0,this._justDown=!0,this._justUp=!1,this.emit(r.DOWN,this,l)))},onUp:function(l){this.originalEvent=l,this.enabled&&(this.isDown=!1,this.isUp=!0,this.timeUp=l.timeStamp,this.duration=this.timeUp-this.timeDown,this.repeats=0,this._justDown=!1,this._justUp=!0,this._tick=-1,this.emit(r.UP,this,l))},reset:function(){return this.preventDefault=!0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.timeDown=0,this.duration=0,this.timeUp=0,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1,this},getDuration:function(){return this.isDown?this.plugin.game.loop.time-this.timeDown:0},destroy:function(){this.removeAllListeners(),this.originalEvent=null,this.plugin=null}});e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(154),r=i(2),a=i(514),l=i(516),o=new n({initialize:function(v,d,c){if(c===void 0&&(c={}),d.length<2)return!1;this.manager=v,this.enabled=!0,this.keyCodes=[];for(var p=0;p<d.length;p++){var g=d[p];typeof g=="string"?this.keyCodes.push(g.toUpperCase().charCodeAt(0)):typeof g=="number"?this.keyCodes.push(g):g.hasOwnProperty("keyCode")&&this.keyCodes.push(g.keyCode)}this.current=this.keyCodes[0],this.index=0,this.size=this.keyCodes.length,this.timeLastMatched=0,this.matched=!1,this.timeMatched=0,this.resetOnWrongKey=r(c,"resetOnWrongKey",!0),this.maxKeyDelay=r(c,"maxKeyDelay",0),this.resetOnMatch=r(c,"resetOnMatch",!1),this.deleteOnMatch=r(c,"deleteOnMatch",!1);var m=this,x=function(y){if(!(m.matched||!m.enabled)){var T=a(y,m);T&&(m.manager.emit(h.COMBO_MATCH,m,y),m.resetOnMatch?l(m):m.deleteOnMatch&&m.destroy())}};this.onKeyDown=x,this.manager.on(h.ANY_KEY_DOWN,this.onKeyDown)},progress:{get:function(){return this.index/this.size}},destroy:function(){this.enabled=!1,this.keyCodes=[],this.manager.off(h.ANY_KEY_DOWN,this.onKeyDown),this.manager=null}});e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(515),h=function(r,a){if(a.matched)return!0;var l=!1,o=!1;if(r.keyCode===a.current)if(a.index>0&&a.maxKeyDelay>0){var u=a.timeLastMatched+a.maxKeyDelay;r.timeStamp<=u&&(o=!0,l=n(r,a))}else o=!0,l=n(r,a);return!o&&a.resetOnWrongKey&&(a.index=0,a.current=a.keyCodes[0]),l&&(a.timeLastMatched=r.timeStamp,a.matched=!0,a.timeMatched=r.timeStamp),l};e.exports=h},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){return h.timeLastMatched=n.timeStamp,h.index++,h.index===h.size?!0:(h.current=h.keyCodes[h.index],!1)};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n.current=n.keyCodes[0],n.index=0,n.timeLastMatched=0,n.matched=!1,n.timeMatched=0,n};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(240),h=function(r,a){var l=n(a,r.xhrSettings),o=new XMLHttpRequest;if(o.open("GET",r.src,l.async,l.user,l.password),o.responseType=r.xhrSettings.responseType,o.timeout=l.timeout,l.headers)for(var u in l.headers)o.setRequestHeader(u,l.headers[u]);return l.header&&l.headerValue&&o.setRequestHeader(l.header,l.headerValue),l.requestedWith&&o.setRequestHeader("X-Requested-With",l.requestedWith),l.overrideMimeType&&o.overrideMimeType(l.overrideMimeType),l.withCredentials&&(o.withCredentials=!0),o.onload=r.onLoad.bind(r,o),o.onerror=r.onError.bind(r,o),o.onprogress=r.onProgress.bind(r),o.send(),o};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(21),r=i(23),a=i(8),l=i(2),o=i(519),u=i(7),v=new n({Extends:r,initialize:function(c,p,g,m,x){if(u(p)){var y=p;p=l(y,"key"),m=l(y,"xhrSettings"),x=l(y,"context",x)}var T={type:"audio",cache:c.cacheManager.audio,extension:g.type,responseType:"arraybuffer",key:p,url:g.url,xhrSettings:m,config:{context:x}};r.call(this,c,T)},onProcess:function(){this.state=h.FILE_PROCESSING;var d=this;this.config.context.decodeAudioData(this.xhrLoader.response,function(c){d.data=c,d.onProcessComplete()},function(c){console.error("Error decoding audio: "+d.key+" - ",c?c.message:null),d.onProcessError()}),this.config.context=null}});v.create=function(d,c,p,g,m){var x=d.systems.game,y=x.config.audio,T=x.device.audio;u(c)&&(p=l(c,"url",[]),g=l(c,"config",{}));var C=v.getAudioURL(x,p);return C?T.webAudio&&!y.disableWebAudio?new v(d,c,C,m,x.sound.context):new o(d,c,C,g):null},v.getAudioURL=function(d,c){Array.isArray(c)||(c=[c]);for(var p=0;p<c.length;p++){var g=l(c[p],"url",c[p]);if(g.indexOf("blob:")===0||g.indexOf("data:")===0)return{url:g,type:""};var m=g.match(/\.([a-zA-Z0-9]+)($|\?)/);if(m=l(c[p],"type",m?m[1]:"").toLowerCase(),d.device.audio[m])return{url:g,type:m}}return null},a.register("audio",function(d,c,p,g){var m=this.systems.game,x=m.config.audio,y=m.device.audio;if(x.noAudio||!y.webAudio&&!y.audioData)return this;var T;if(Array.isArray(d))for(var C=0;C<d.length;C++)T=v.create(this,d[C]),T&&this.addFile(T);else T=v.create(this,d,c,p,g),T&&this.addFile(T);return this}),e.exports=v},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(95),r=i(23),a=i(2),l=i(155),o=i(7),u=new n({Extends:r,initialize:function(d,c,p,g){if(o(c)){var m=c;c=a(m,"key"),g=a(m,"config",g)}var x={type:"audio",cache:d.cacheManager.audio,extension:p.type,key:c,url:p.url,config:g};r.call(this,d,x),this.locked="ontouchstart"in window,this.loaded=!1,this.filesLoaded=0,this.filesTotal=0},onLoad:function(){this.loaded||(this.loaded=!0,this.loader.nextFile(this,!0))},onError:function(){for(var v=0;v<this.data.length;v++){var d=this.data[v];d.oncanplaythrough=null,d.onerror=null}this.loader.nextFile(this,!1)},onProgress:function(v){var d=v.target;d.oncanplaythrough=null,d.onerror=null,this.filesLoaded++,this.percentComplete=Math.min(this.filesLoaded/this.filesTotal,1),this.loader.emit(h.FILE_PROGRESS,this,this.percentComplete),this.filesLoaded===this.filesTotal&&this.onLoad()},load:function(){this.data=[];var v=this.config&&this.config.instances||1;this.filesTotal=v,this.filesLoaded=0,this.percentComplete=0;for(var d=0;d<v;d++){var c=new Audio;c.dataset||(c.dataset={}),c.dataset.name=this.key+("0"+d).slice(-2),c.dataset.used="false",this.locked?c.dataset.locked="true":(c.dataset.locked="false",c.preload="auto",c.oncanplaythrough=this.onProgress.bind(this),c.onerror=this.onError.bind(this)),this.data.push(c)}for(d=0;d<this.data.length;d++)c=this.data[d],c.src=l(this,this.loader.baseURL),this.locked||c.load();this.locked&&setTimeout(this.onLoad.bind(this))}});e.exports=u},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(21),r=i(23),a=i(8),l=i(2),o=i(7),u=new n({Extends:r,initialize:function(d,c,p,g){var m="js";if(o(c)){var x=c;c=l(x,"key"),p=l(x,"url"),g=l(x,"xhrSettings"),m=l(x,"extension",m)}var y={type:"script",cache:!1,extension:m,responseType:"text",key:c,url:p,xhrSettings:g};r.call(this,d,y)},onProcess:function(){this.state=h.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});a.register("script",function(v,d,c){if(Array.isArray(v))for(var p=0;p<v.length;p++)this.addFile(new u(this,v[p]));else this.addFile(new u(this,v,d,c));return this}),e.exports=u},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(522),h=i(157),r=i(0),a=i(62),l=i(524),o=i(525),u=new r({initialize:function(d){this.world=d,this.scene=d.scene,this.sys=d.scene.sys},collider:function(v,d,c,p,g){return this.world.addCollider(v,d,c,p,g)},overlap:function(v,d,c,p,g){return this.world.addOverlap(v,d,c,p,g)},existing:function(v,d){var c=d?a.STATIC_BODY:a.DYNAMIC_BODY;return this.world.enableBody(v,c),v},staticImage:function(v,d,c,p){var g=new n(this.scene,v,d,c,p);return this.sys.displayList.add(g),this.world.enableBody(g,a.STATIC_BODY),g},image:function(v,d,c,p){var g=new n(this.scene,v,d,c,p);return this.sys.displayList.add(g),this.world.enableBody(g,a.DYNAMIC_BODY),g},staticSprite:function(v,d,c,p){var g=new h(this.scene,v,d,c,p);return this.sys.displayList.add(g),this.sys.updateList.add(g),this.world.enableBody(g,a.STATIC_BODY),g},sprite:function(v,d,c,p){var g=new h(this.scene,v,d,c,p);return this.sys.displayList.add(g),this.sys.updateList.add(g),this.world.enableBody(g,a.DYNAMIC_BODY),g},staticGroup:function(v,d){return this.sys.updateList.add(new o(this.world,this.world.scene,v,d))},group:function(v,d){return this.sys.updateList.add(new l(this.world,this.world.scene,v,d))},destroy:function(){this.world=null,this.scene=null,this.sys=null}});e.exports=u},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(243),r=i(125),a=new n({Extends:r,Mixins:[h.Acceleration,h.Angular,h.Bounce,h.Debug,h.Drag,h.Enable,h.Friction,h.Gravity,h.Immovable,h.Mass,h.Pushable,h.Size,h.Velocity],initialize:function(o,u,v,d,c){r.call(this,o,u,v,d,c),this.body=null}});e.exports=a},function(e,f,i){var n=i(244),h=i(65),r=i(231),a=i(151),l=function(o,u,v,d,c,p){var g=n(o,u-d,v-d,2*d,2*d,c,p);if(g.length===0)return g;for(var m=new h(u,v,d),x=new h,y=[],T=0;T<g.length;T++){var C=g[T];C.isCircle?(x.setTo(C.center.x,C.center.y,C.halfWidth),r(m,x)&&y.push(C)):a(m,C)&&y.push(C)}return y};e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(157),h=i(0),r=i(62),a=i(2),l=i(113),o=i(7),u=new h({Extends:l,initialize:function(d,c,p,g){if(!p&&!g)g={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};else if(o(p))g=p,p=null,g.internalCreateCallback=this.createCallbackHandler,g.internalRemoveCallback=this.removeCallbackHandler;else if(Array.isArray(p)&&o(p[0])){g=p[0];var m=this;p.forEach(function(x){x.internalCreateCallback=m.createCallbackHandler,x.internalRemoveCallback=m.removeCallbackHandler}),p=null}else g={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};this.world=d,g.classType=a(g,"classType",n),this.physicsType=r.DYNAMIC_BODY,this.defaults={setCollideWorldBounds:a(g,"collideWorldBounds",!1),setBoundsRectangle:a(g,"customBoundsRectangle",null),setAccelerationX:a(g,"accelerationX",0),setAccelerationY:a(g,"accelerationY",0),setAllowDrag:a(g,"allowDrag",!0),setAllowGravity:a(g,"allowGravity",!0),setAllowRotation:a(g,"allowRotation",!0),setBounceX:a(g,"bounceX",0),setBounceY:a(g,"bounceY",0),setDragX:a(g,"dragX",0),setDragY:a(g,"dragY",0),setEnable:a(g,"enable",!0),setGravityX:a(g,"gravityX",0),setGravityY:a(g,"gravityY",0),setFrictionX:a(g,"frictionX",0),setFrictionY:a(g,"frictionY",0),setMaxVelocityX:a(g,"maxVelocityX",1e4),setMaxVelocityY:a(g,"maxVelocityY",1e4),setVelocityX:a(g,"velocityX",0),setVelocityY:a(g,"velocityY",0),setAngularVelocity:a(g,"angularVelocity",0),setAngularAcceleration:a(g,"angularAcceleration",0),setAngularDrag:a(g,"angularDrag",0),setMass:a(g,"mass",1),setImmovable:a(g,"immovable",!1)},l.call(this,c,p,g),this.type="PhysicsGroup"},createCallbackHandler:function(v){v.body||this.world.enableBody(v,r.DYNAMIC_BODY);var d=v.body;for(var c in this.defaults)d[c](this.defaults[c])},removeCallbackHandler:function(v){v.body&&this.world.disableBody(v)},setVelocity:function(v,d,c){c===void 0&&(c=0);for(var p=this.getChildren(),g=0;g<p.length;g++)p[g].body.velocity.set(v+g*c,d+g*c);return this},setVelocityX:function(v,d){d===void 0&&(d=0);for(var c=this.getChildren(),p=0;p<c.length;p++)c[p].body.velocity.x=v+p*d;return this},setVelocityY:function(v,d){d===void 0&&(d=0);for(var c=this.getChildren(),p=0;p<c.length;p++)c[p].body.velocity.y=v+p*d;return this}});e.exports=u},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(157),h=i(0),r=i(62),a=i(2),l=i(113),o=i(7),u=new h({Extends:l,initialize:function(d,c,p,g){!p&&!g?g={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler,createMultipleCallback:this.createMultipleCallbackHandler,classType:n}:o(p)?(g=p,p=null,g.internalCreateCallback=this.createCallbackHandler,g.internalRemoveCallback=this.removeCallbackHandler,g.createMultipleCallback=this.createMultipleCallbackHandler,g.classType=a(g,"classType",n)):Array.isArray(p)&&o(p[0])?(g=p,p=null,g.forEach(function(m){m.internalCreateCallback=this.createCallbackHandler,m.internalRemoveCallback=this.removeCallbackHandler,m.createMultipleCallback=this.createMultipleCallbackHandler,m.classType=a(m,"classType",n)})):g={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler},this.world=d,this.physicsType=r.STATIC_BODY,l.call(this,c,p,g),this.type="StaticPhysicsGroup"},createCallbackHandler:function(v){v.body||this.world.enableBody(v,r.STATIC_BODY)},removeCallbackHandler:function(v){v.body&&this.world.disableBody(v)},createMultipleCallbackHandler:function(){this.refresh()},refresh:function(){for(var v=this.children.entries,d=0;d<v.length;d++)v[d].body.reset();return this}});e.exports=u},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(350),h=i(527),r=i(18),a=i(0),l=i(528),o=i(62),u=i(50),v=i(9),d=i(245),c=i(124),p=i(354),g=i(355),m=i(246),x=i(247),y=i(529),T=i(6),C=i(14),S=i(211),E=i(530),M=i(10),O=i(531),L=i(532),R=i(537),F=i(538),D=i(149),B=i(539),N=i(248),U=i(25),X=i(3),K=i(68),k=new a({Extends:v,initialize:function(I,G){v.call(this),this.scene=I,this.bodies=new D,this.staticBodies=new D,this.pendingDestroy=new D,this.colliders=new S,this.gravity=new X(T(G,"gravity.x",0),T(G,"gravity.y",0)),this.bounds=new M(T(G,"x",0),T(G,"y",0),T(G,"width",I.sys.scale.width),T(G,"height",I.sys.scale.height)),this.checkCollision={up:T(G,"checkCollision.up",!0),down:T(G,"checkCollision.down",!0),left:T(G,"checkCollision.left",!0),right:T(G,"checkCollision.right",!0)},this.fps=T(G,"fps",60),this.fixedStep=T(G,"fixedStep",!0),this._elapsed=0,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this.stepsLastFrame=0,this.timeScale=T(G,"timeScale",1),this.OVERLAP_BIAS=T(G,"overlapBias",4),this.TILE_BIAS=T(G,"tileBias",16),this.forceX=T(G,"forceX",!1),this.isPaused=T(G,"isPaused",!1),this._total=0,this.drawDebug=T(G,"debug",!1),this.debugGraphic,this.defaults={debugShowBody:T(G,"debugShowBody",!0),debugShowStaticBody:T(G,"debugShowStaticBody",!0),debugShowVelocity:T(G,"debugShowVelocity",!0),bodyDebugColor:T(G,"debugBodyColor",16711935),staticBodyDebugColor:T(G,"debugStaticBodyColor",255),velocityDebugColor:T(G,"debugVelocityColor",65280)},this.maxEntries=T(G,"maxEntries",16),this.useTree=T(G,"useTree",!0),this.tree=new O(this.maxEntries),this.staticTree=new O(this.maxEntries),this.treeMinMax={minX:0,minY:0,maxX:0,maxY:0},this._tempMatrix=new U,this._tempMatrix2=new U,this.drawDebug&&this.createDebugGraphic()},enable:function(b,I){I===void 0&&(I=o.DYNAMIC_BODY),Array.isArray(b)||(b=[b]);for(var G=0;G<b.length;G++){var Y=b[G];if(Y.isParent)for(var V=Y.getChildren(),W=0;W<V.length;W++){var H=V[W];H.isParent?this.enable(H,I):this.enableBody(H,I)}else this.enableBody(Y,I)}},enableBody:function(b,I){return I===void 0&&(I=o.DYNAMIC_BODY),b.body||(I===o.DYNAMIC_BODY?b.body=new h(this,b):I===o.STATIC_BODY&&(b.body=new B(this,b))),this.add(b.body),b},add:function(b){return b.physicsType===o.DYNAMIC_BODY?this.bodies.set(b):b.physicsType===o.STATIC_BODY&&(this.staticBodies.set(b),this.staticTree.insert(b)),b.enable=!0,b},disable:function(b){Array.isArray(b)||(b=[b]);for(var I=0;I<b.length;I++){var G=b[I];if(G.isParent)for(var Y=G.getChildren(),V=0;V<Y.length;V++){var W=Y[V];W.isParent?this.disable(W):this.disableBody(W.body)}else this.disableBody(G.body)}},disableBody:function(b){this.remove(b),b.enable=!1},remove:function(b){b.physicsType===o.DYNAMIC_BODY?(this.tree.remove(b),this.bodies.delete(b)):b.physicsType===o.STATIC_BODY&&(this.staticBodies.delete(b),this.staticTree.remove(b))},createDebugGraphic:function(){var b=this.scene.sys.add.graphics({x:0,y:0});return b.setDepth(Number.MAX_VALUE),this.debugGraphic=b,this.drawDebug=!0,b},setBounds:function(b,I,G,Y,V,W,H,Z){return this.bounds.setTo(b,I,G,Y),V!==void 0&&this.setBoundsCollision(V,W,H,Z),this},setBoundsCollision:function(b,I,G,Y){return b===void 0&&(b=!0),I===void 0&&(I=!0),G===void 0&&(G=!0),Y===void 0&&(Y=!0),this.checkCollision.left=b,this.checkCollision.right=I,this.checkCollision.up=G,this.checkCollision.down=Y,this},pause:function(){return this.isPaused=!0,this.emit(d.PAUSE),this},resume:function(){return this.isPaused=!1,this.emit(d.RESUME),this},addCollider:function(b,I,G,Y,V){G===void 0&&(G=null),Y===void 0&&(Y=null),V===void 0&&(V=G);var W=new l(this,!1,b,I,G,Y,V);return this.colliders.add(W),W},addOverlap:function(b,I,G,Y,V){G===void 0&&(G=null),Y===void 0&&(Y=null),V===void 0&&(V=G);var W=new l(this,!0,b,I,G,Y,V);return this.colliders.add(W),W},removeCollider:function(b){return this.colliders.remove(b),this},setFPS:function(b){return this.fps=b,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this},update:function(b,I){if(!(this.isPaused||this.bodies.size===0)){var G,Y=this._frameTime,V=this._frameTimeMS*this.timeScale;this._elapsed+=I;var W,H=this.bodies.entries,Z=this._elapsed>=V;for(this.fixedStep||(Y=I*.001,Z=!0,this._elapsed=0),G=0;G<H.length;G++)W=H[G],W.enable&&W.preUpdate(Z,Y);if(Z){this._elapsed-=V,this.stepsLastFrame=1,this.useTree&&(this.tree.clear(),this.tree.load(H));var q=this.colliders.update();for(G=0;G<q.length;G++){var _=q[G];_.active&&_.update()}this.emit(d.WORLD_STEP,Y)}for(;this._elapsed>=V;)this._elapsed-=V,this.step(Y)}},step:function(b){var I,G,Y=this.bodies.entries,V=Y.length;for(I=0;I<V;I++)G=Y[I],G.enable&&G.update(b);this.useTree&&(this.tree.clear(),this.tree.load(Y));var W=this.colliders.update();for(I=0;I<W.length;I++){var H=W[I];H.active&&H.update()}this.emit(d.WORLD_STEP,b),this.stepsLastFrame++},postUpdate:function(){var b,I,G=this.bodies.entries,Y=G.length,V=this.bodies,W=this.staticBodies;if(this.stepsLastFrame)for(this.stepsLastFrame=0,b=0;b<Y;b++)I=G[b],I.enable&&I.postUpdate();if(this.drawDebug){var H=this.debugGraphic;for(H.clear(),b=0;b<Y;b++)I=G[b],I.willDrawDebug()&&I.drawDebug(H);for(G=W.entries,Y=G.length,b=0;b<Y;b++)I=G[b],I.willDrawDebug()&&I.drawDebug(H)}var Z=this.pendingDestroy;if(Z.size>0){var q=this.tree,_=this.staticTree;for(G=Z.entries,Y=G.length,b=0;b<Y;b++)I=G[b],I.physicsType===o.DYNAMIC_BODY?(q.remove(I),V.delete(I)):I.physicsType===o.STATIC_BODY&&(_.remove(I),W.delete(I)),I.world=void 0,I.gameObject=void 0;Z.clear()}},updateMotion:function(b,I){b.allowRotation&&this.computeAngularVelocity(b,I),this.computeVelocity(b,I)},computeAngularVelocity:function(b,I){var G=b.angularVelocity,Y=b.angularAcceleration,V=b.angularDrag,W=b.maxAngular;Y?G+=Y*I:b.allowDrag&&V&&(V*=I,p(G-V,0,.1)?G-=V:g(G+V,0,.1)?G+=V:G=0),G=r(G,-W,W);var H=G-b.angularVelocity;b.angularVelocity+=H,b.rotation+=b.angularVelocity*I},computeVelocity:function(b,I){var G=b.velocity.x,Y=b.acceleration.x,V=b.drag.x,W=b.maxVelocity.x,H=b.velocity.y,Z=b.acceleration.y,q=b.drag.y,_=b.maxVelocity.y,nt=b.speed,rt=b.maxSpeed,at=b.allowDrag,ct=b.useDamping;b.allowGravity&&(G+=(this.gravity.x+b.gravity.x)*I,H+=(this.gravity.y+b.gravity.y)*I),Y?G+=Y*I:at&&V&&(ct?(V=Math.pow(V,I),G*=V,nt=Math.sqrt(G*G+H*H),c(nt,0,.001)&&(G=0)):(V*=I,p(G-V,0,.01)?G-=V:g(G+V,0,.01)?G+=V:G=0)),Z?H+=Z*I:at&&q&&(ct?(q=Math.pow(q,I),H*=q,nt=Math.sqrt(G*G+H*H),c(nt,0,.001)&&(H=0)):(q*=I,p(H-q,0,.01)?H-=q:g(H+q,0,.01)?H+=q:H=0)),G=r(G,-W,W),H=r(H,-_,_),b.velocity.set(G,H),rt>-1&&nt>rt&&(b.velocity.normalize().scale(rt),nt=rt),b.speed=nt},separate:function(b,I,G,Y,V,W){if(!W&&!b.enable||!I.enable||b.checkCollision.none||I.checkCollision.none||!this.intersects(b,I)||G&&G.call(Y,b.gameObject,I.gameObject)===!1)return!1;if(b.isCircle&&I.isCircle)return this.separateCircle(b,I,V);if(b.isCircle!==I.isCircle){var H=b.isCircle?I:b,Z=b.isCircle?b:I,q={x:H.x,y:H.y,right:H.right,bottom:H.bottom},_=Z.center;if((_.y<q.y||_.y>q.bottom)&&(_.x<q.x||_.x>q.right))return this.separateCircle(b,I,V)}var nt=!1,rt=!1;V?(nt=R(b,I,V,this.OVERLAP_BIAS),rt=F(b,I,V,this.OVERLAP_BIAS)):this.forceX||Math.abs(this.gravity.y+b.gravity.y)<Math.abs(this.gravity.x+b.gravity.x)?(nt=R(b,I,V,this.OVERLAP_BIAS),this.intersects(b,I)&&(rt=F(b,I,V,this.OVERLAP_BIAS))):(rt=F(b,I,V,this.OVERLAP_BIAS),this.intersects(b,I)&&(nt=R(b,I,V,this.OVERLAP_BIAS)));var at=nt||rt;return at&&(V?(b.onOverlap||I.onOverlap)&&this.emit(d.OVERLAP,b.gameObject,I.gameObject,b,I):(b.onCollide||I.onCollide)&&this.emit(d.COLLIDE,b.gameObject,I.gameObject,b,I)),at},separateCircle:function(b,I,G,Y){m(b,I,!1,Y),x(b,I,!1,Y);var V=0;if(b.isCircle!==I.isCircle){var W={x:I.isCircle?b.position.x:I.position.x,y:I.isCircle?b.position.y:I.position.y,right:I.isCircle?b.right:I.right,bottom:I.isCircle?b.bottom:I.bottom},H={x:b.isCircle?b.center.x:I.center.x,y:b.isCircle?b.center.y:I.center.y,radius:b.isCircle?b.halfWidth:I.halfWidth};H.y<W.y?H.x<W.x?V=u(H.x,H.y,W.x,W.y)-H.radius:H.x>W.right&&(V=u(H.x,H.y,W.right,W.y)-H.radius):H.y>W.bottom&&(H.x<W.x?V=u(H.x,H.y,W.x,W.bottom)-H.radius:H.x>W.right&&(V=u(H.x,H.y,W.right,W.bottom)-H.radius)),V*=-1}else V=b.halfWidth+I.halfWidth-u(b.center.x,b.center.y,I.center.x,I.center.y);if(b.overlapR=V,I.overlapR=V,G||V===0||b.immovable&&I.immovable||b.customSeparateX||I.customSeparateX)return V!==0&&(b.onOverlap||I.onOverlap)&&this.emit(d.OVERLAP,b.gameObject,I.gameObject,b,I),V!==0;var Z=b.center.x-I.center.x,q=b.center.y-I.center.y,_=Math.sqrt(Math.pow(Z,2)+Math.pow(q,2)),nt=(I.center.x-b.center.x)/_||0,rt=(I.center.y-b.center.y)/_||0,at=2*(b.velocity.x*nt+b.velocity.y*rt-I.velocity.x*nt-I.velocity.y*rt)/(b.mass+I.mass);(b.immovable||I.immovable)&&(at*=2),b.immovable||(b.velocity.x=b.velocity.x-at/b.mass*nt,b.velocity.y=b.velocity.y-at/b.mass*rt),I.immovable||(I.velocity.x=I.velocity.x+at/I.mass*nt,I.velocity.y=I.velocity.y+at/I.mass*rt),!b.immovable&&!I.immovable&&(V/=2);var ct=n(b.center,I.center),ut=(V+C.EPSILON)*Math.cos(ct),vt=(V+C.EPSILON)*Math.sin(ct);return b.immovable||(b.x-=ut,b.y-=vt,b.updateCenter()),I.immovable||(I.x+=ut,I.y+=vt,I.updateCenter()),b.velocity.x*=b.bounce.x,b.velocity.y*=b.bounce.y,I.velocity.x*=I.bounce.x,I.velocity.y*=I.bounce.y,(b.onCollide||I.onCollide)&&this.emit(d.COLLIDE,b.gameObject,I.gameObject,b,I),!0},intersects:function(b,I){return b===I?!1:!b.isCircle&&!I.isCircle?!(b.right<=I.position.x||b.bottom<=I.position.y||b.position.x>=I.right||b.position.y>=I.bottom):b.isCircle?I.isCircle?u(b.center.x,b.center.y,I.center.x,I.center.y)<=b.halfWidth+I.halfWidth:this.circleBodyIntersects(b,I):this.circleBodyIntersects(I,b)},circleBodyIntersects:function(b,I){var G=r(b.center.x,I.left,I.right),Y=r(b.center.y,I.top,I.bottom),V=(b.center.x-G)*(b.center.x-G),W=(b.center.y-Y)*(b.center.y-Y);return V+W<=b.halfWidth*b.halfWidth},overlap:function(b,I,G,Y,V){return G===void 0&&(G=null),Y===void 0&&(Y=null),V===void 0&&(V=G),this.collideObjects(b,I,G,Y,V,!0)},collide:function(b,I,G,Y,V){return G===void 0&&(G=null),Y===void 0&&(Y=null),V===void 0&&(V=G),this.collideObjects(b,I,G,Y,V,!1)},collideObjects:function(b,I,G,Y,V,W){var H,Z;b.isParent&&b.physicsType===void 0&&(b=b.children.entries),I&&I.isParent&&I.physicsType===void 0&&(I=I.children.entries);var q=Array.isArray(b),_=Array.isArray(I);if(this._total=0,!q&&!_)this.collideHandler(b,I,G,Y,V,W);else if(!q&&_)for(H=0;H<I.length;H++)this.collideHandler(b,I[H],G,Y,V,W);else if(q&&!_)if(I)for(H=0;H<b.length;H++)this.collideHandler(b[H],I,G,Y,V,W);else for(H=0;H<b.length;H++){var nt=b[H];for(Z=H+1;Z<b.length;Z++)H!==Z&&this.collideHandler(nt,b[Z],G,Y,V,W)}else for(H=0;H<b.length;H++)for(Z=0;Z<I.length;Z++)this.collideHandler(b[H],I[Z],G,Y,V,W);return this._total>0},collideHandler:function(b,I,G,Y,V,W){if(I===void 0&&b.isParent)return this.collideGroupVsGroup(b,b,G,Y,V,W);if(!b||!I)return!1;if(b.body){if(I.body)return this.collideSpriteVsSprite(b,I,G,Y,V,W);if(I.isParent)return this.collideSpriteVsGroup(b,I,G,Y,V,W);if(I.isTilemap)return this.collideSpriteVsTilemapLayer(b,I,G,Y,V,W)}else if(b.isParent){if(I.body)return this.collideSpriteVsGroup(I,b,G,Y,V,W);if(I.isParent)return this.collideGroupVsGroup(b,I,G,Y,V,W);if(I.isTilemap)return this.collideGroupVsTilemapLayer(b,I,G,Y,V,W)}else if(b.isTilemap){if(I.body)return this.collideSpriteVsTilemapLayer(I,b,G,Y,V,W);if(I.isParent)return this.collideGroupVsTilemapLayer(I,b,G,Y,V,W)}},collideSpriteVsSprite:function(b,I,G,Y,V,W){return!b.body||!I.body?!1:(this.separate(b.body,I.body,Y,V,W)&&(G&&G.call(V,b,I),this._total++),!0)},collideSpriteVsGroup:function(b,I,G,Y,V,W){var H=b.body;if(!(I.length===0||!H||!H.enable||H.checkCollision.none)){var Z,q,_;if(this.useTree||I.physicsType===o.STATIC_BODY){var nt=this.treeMinMax;nt.minX=H.left,nt.minY=H.top,nt.maxX=H.right,nt.maxY=H.bottom;var rt=I.physicsType===o.DYNAMIC_BODY?this.tree.search(nt):this.staticTree.search(nt);for(q=rt.length,Z=0;Z<q;Z++)_=rt[Z],!(H===_||!_.enable||_.checkCollision.none||!I.contains(_.gameObject))&&this.separate(H,_,Y,V,W,!0)&&(G&&G.call(V,H.gameObject,_.gameObject),this._total++)}else{var at=I.getChildren(),ct=I.children.entries.indexOf(b);for(q=at.length,Z=0;Z<q;Z++)_=at[Z].body,!(!_||Z===ct||!_.enable)&&this.separate(H,_,Y,V,W)&&(G&&G.call(V,H.gameObject,_.gameObject),this._total++)}}},collideGroupVsTilemapLayer:function(b,I,G,Y,V,W){var H=b.getChildren();if(H.length===0)return!1;for(var Z=!1,q=0;q<H.length;q++)H[q].body&&this.collideSpriteVsTilemapLayer(H[q],I,G,Y,V,W)&&(Z=!0);return Z},collideTiles:function(b,I,G,Y,V){return!b.body.enable||I.length===0?!1:this.collideSpriteVsTilesHandler(b,I,G,Y,V,!1,!1)},overlapTiles:function(b,I,G,Y,V){return!b.body.enable||I.length===0?!1:this.collideSpriteVsTilesHandler(b,I,G,Y,V,!0,!1)},collideSpriteVsTilemapLayer:function(b,I,G,Y,V,W){var H=b.body;if(!H.enable||H.checkCollision.none)return!1;var Z=H.position.x,q=H.position.y,_=H.width,nt=H.height,rt=I.layer;if(rt.tileWidth>rt.baseTileWidth){var at=(rt.tileWidth-rt.baseTileWidth)*I.scaleX;Z-=at,_+=at}if(rt.tileHeight>rt.baseTileHeight){var ct=(rt.tileHeight-rt.baseTileHeight)*I.scaleY;nt+=ct}var ut=y(Z,q,_,nt,null,I.scene.cameras.main,I.layer);return ut.length===0?!1:this.collideSpriteVsTilesHandler(b,ut,G,Y,V,W,!0)},collideSpriteVsTilesHandler:function(b,I,G,Y,V,W,H){for(var Z=b.body,q,_={left:0,right:0,top:0,bottom:0},nt,rt=!1,at=0;at<I.length;at++){q=I[at],nt=q.tilemapLayer;var ct=nt.tileToWorldXY(q.x,q.y);_.left=ct.x,_.top=ct.y,q.baseHeight!==q.height&&(_.top-=(q.height-q.baseHeight)*nt.scaleY),_.right=_.left+q.width*nt.scaleX,_.bottom=_.top+q.height*nt.scaleY,N(_,Z)&&(!Y||Y.call(V,b,q))&&E(q,b)&&(W||L(at,Z,q,_,nt,this.TILE_BIAS,H))&&(this._total++,rt=!0,G&&G.call(V,b,q),W&&Z.onOverlap?this.emit(d.TILE_OVERLAP,b,q,Z):Z.onCollide&&this.emit(d.TILE_COLLIDE,b,q,Z))}return rt},collideGroupVsGroup:function(b,I,G,Y,V,W){if(!(b.length===0||I.length===0))for(var H=b.getChildren(),Z=0;Z<H.length;Z++)this.collideSpriteVsGroup(H[Z],I,G,Y,V,W)},wrap:function(b,I){b.body?this.wrapObject(b,I):b.getChildren?this.wrapArray(b.getChildren(),I):Array.isArray(b)?this.wrapArray(b,I):this.wrapObject(b,I)},wrapArray:function(b,I){for(var G=0;G<b.length;G++)this.wrapObject(b[G],I)},wrapObject:function(b,I){I===void 0&&(I=0),b.x=K(b.x,this.bounds.left-I,this.bounds.right+I),b.y=K(b.y,this.bounds.top-I,this.bounds.bottom+I)},shutdown:function(){this.tree.clear(),this.staticTree.clear(),this.bodies.clear(),this.staticBodies.clear(),this.colliders.destroy(),this.removeAllListeners()},destroy:function(){this.shutdown(),this.scene=null}});e.exports=k},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(62),r=i(245),a=i(196),l=i(10),o=i(57),u=i(3),v=new n({initialize:function(c,p){var g=p.displayWidth?p.displayWidth:64,m=p.displayHeight?p.displayHeight:64;this.world=c,this.gameObject=p,this.transform={x:p.x,y:p.y,rotation:p.angle,scaleX:p.scaleX,scaleY:p.scaleY,displayOriginX:p.displayOriginX,displayOriginY:p.displayOriginY},this.debugShowBody=c.defaults.debugShowBody,this.debugShowVelocity=c.defaults.debugShowVelocity,this.debugBodyColor=c.defaults.bodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new u,this.position=new u(p.x-p.scaleX*p.displayOriginX,p.y-p.scaleY*p.displayOriginY),this.prev=this.position.clone(),this.prevFrame=this.position.clone(),this.allowRotation=!0,this.rotation=p.angle,this.preRotation=p.angle,this.width=g,this.height=m,this.sourceWidth=g,this.sourceHeight=m,p.frame&&(this.sourceWidth=p.frame.realWidth,this.sourceHeight=p.frame.realHeight),this.halfWidth=Math.abs(g/2),this.halfHeight=Math.abs(m/2),this.center=new u(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=new u,this.newVelocity=new u,this.deltaMax=new u,this.acceleration=new u,this.allowDrag=!0,this.drag=new u,this.allowGravity=!0,this.gravity=new u,this.bounce=new u,this.worldBounce=null,this.customBoundsRectangle=c.bounds,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.maxVelocity=new u(1e4,1e4),this.maxSpeed=-1,this.friction=new u(1,0),this.useDamping=!1,this.angularVelocity=0,this.angularAcceleration=0,this.angularDrag=0,this.maxAngular=1e3,this.mass=1,this.angle=0,this.speed=0,this.facing=h.FACING_NONE,this.immovable=!1,this.pushable=!0,this.moves=!0,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.syncBounds=!1,this.physicsType=h.DYNAMIC_BODY,this._sx=p.scaleX,this._sy=p.scaleY,this._dx=0,this._dy=0,this._tx=0,this._ty=0,this._bounds=new l},updateBounds:function(){var d=this.gameObject,c=this.transform;if(d.parentContainer){var p=d.getWorldTransformMatrix(this.world._tempMatrix,this.world._tempMatrix2);c.x=p.tx,c.y=p.ty,c.rotation=a(p.rotation),c.scaleX=p.scaleX,c.scaleY=p.scaleY,c.displayOriginX=d.displayOriginX,c.displayOriginY=d.displayOriginY}else c.x=d.x,c.y=d.y,c.rotation=d.angle,c.scaleX=d.scaleX,c.scaleY=d.scaleY,c.displayOriginX=d.displayOriginX,c.displayOriginY=d.displayOriginY;var g=!1;if(this.syncBounds){var m=d.getBounds(this._bounds);this.width=m.width,this.height=m.height,g=!0}else{var x=Math.abs(c.scaleX),y=Math.abs(c.scaleY);(this._sx!==x||this._sy!==y)&&(this.width=this.sourceWidth*x,this.height=this.sourceHeight*y,this._sx=x,this._sy=y,g=!0)}g&&(this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter())},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},updateFromGameObject:function(){this.updateBounds();var d=this.transform;this.position.x=d.x+d.scaleX*(this.offset.x-d.displayOriginX),this.position.y=d.y+d.scaleY*(this.offset.y-d.displayOriginY),this.updateCenter()},resetFlags:function(d){d===void 0&&(d=!1);var c=this.wasTouching,p=this.touching,g=this.blocked;d?(c.none=!0,c.up=!1,c.down=!1,c.left=!1,c.right=!1):(c.none=p.none,c.up=p.up,c.down=p.down,c.left=p.left,c.right=p.right),p.none=!0,p.up=!1,p.down=!1,p.left=!1,p.right=!1,g.none=!0,g.up=!1,g.down=!1,g.left=!1,g.right=!1,this.overlapR=0,this.overlapX=0,this.overlapY=0,this.embedded=!1},preUpdate:function(d,c){d&&this.resetFlags(),this.updateFromGameObject(),this.rotation=this.transform.rotation,this.preRotation=this.rotation,this.moves&&(this.prev.x=this.position.x,this.prev.y=this.position.y,this.prevFrame.x=this.position.x,this.prevFrame.y=this.position.y),d&&this.update(c)},update:function(d){if(this.prev.x=this.position.x,this.prev.y=this.position.y,this.moves){this.world.updateMotion(this,d);var c=this.velocity.x,p=this.velocity.y;this.newVelocity.set(c*d,p*d),this.position.add(this.newVelocity),this.updateCenter(),this.angle=Math.atan2(p,c),this.speed=Math.sqrt(c*c+p*p),this.collideWorldBounds&&this.checkWorldBounds()&&this.onWorldBounds&&this.world.emit(r.WORLD_BOUNDS,this,this.blocked.up,this.blocked.down,this.blocked.left,this.blocked.right)}this._dx=this.position.x-this.prev.x,this._dy=this.position.y-this.prev.y},postUpdate:function(){var d=this.position.x-this.prevFrame.x,c=this.position.y-this.prevFrame.y;if(this.moves){var p=this.deltaMax.x,g=this.deltaMax.y;p!==0&&d!==0&&(d<0&&d<-p?d=-p:d>0&&d>p&&(d=p)),g!==0&&c!==0&&(c<0&&c<-g?c=-g:c>0&&c>g&&(c=g)),this.gameObject.x+=d,this.gameObject.y+=c}d<0?this.facing=h.FACING_LEFT:d>0&&(this.facing=h.FACING_RIGHT),c<0?this.facing=h.FACING_UP:c>0&&(this.facing=h.FACING_DOWN),this.allowRotation&&(this.gameObject.angle+=this.deltaZ()),this._tx=d,this._ty=c},setBoundsRectangle:function(d){return this.customBoundsRectangle=d||this.world.bounds,this},checkWorldBounds:function(){var d=this.position,c=this.customBoundsRectangle,p=this.world.checkCollision,g=this.worldBounce?-this.worldBounce.x:-this.bounce.x,m=this.worldBounce?-this.worldBounce.y:-this.bounce.y,x=!1;return d.x<c.x&&p.left?(d.x=c.x,this.velocity.x*=g,this.blocked.left=!0,x=!0):this.right>c.right&&p.right&&(d.x=c.right-this.width,this.velocity.x*=g,this.blocked.right=!0,x=!0),d.y<c.y&&p.up?(d.y=c.y,this.velocity.y*=m,this.blocked.up=!0,x=!0):this.bottom>c.bottom&&p.down&&(d.y=c.bottom-this.height,this.velocity.y*=m,this.blocked.down=!0,x=!0),x&&(this.blocked.none=!1,this.updateCenter()),x},setOffset:function(d,c){return c===void 0&&(c=d),this.offset.set(d,c),this},setSize:function(d,c,p){p===void 0&&(p=!0);var g=this.gameObject;if(!d&&g.frame&&(d=g.frame.realWidth),!c&&g.frame&&(c=g.frame.realHeight),this.sourceWidth=d,this.sourceHeight=c,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter(),p&&g.getCenter){var m=(g.width-d)/2,x=(g.height-c)/2;this.offset.set(m,x)}return this.isCircle=!1,this.radius=0,this},setCircle:function(d,c,p){return c===void 0&&(c=this.offset.x),p===void 0&&(p=this.offset.y),d>0?(this.isCircle=!0,this.radius=d,this.sourceWidth=d*2,this.sourceHeight=d*2,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(c,p),this.updateCenter()):this.isCircle=!1,this},reset:function(d,c){this.stop();var p=this.gameObject;p.setPosition(d,c),p.getTopLeft?p.getTopLeft(this.position):this.position.set(d,c),this.prev.copy(this.position),this.prevFrame.copy(this.position),this.rotation=p.angle,this.preRotation=p.angle,this.updateBounds(),this.updateCenter(),this.resetFlags(!0)},stop:function(){return this.velocity.set(0),this.acceleration.set(0),this.speed=0,this.angularVelocity=0,this.angularAcceleration=0,this},getBounds:function(d){return d.x=this.x,d.y=this.y,d.right=this.right,d.bottom=this.bottom,d},hitTest:function(d,c){if(!this.isCircle)return o(this,d,c);if(this.radius>0&&d>=this.left&&d<=this.right&&c>=this.top&&c<=this.bottom){var p=(this.center.x-d)*(this.center.x-d),g=(this.center.y-c)*(this.center.y-c);return p+g<=this.radius*this.radius}return!1},onFloor:function(){return this.blocked.down},onCeiling:function(){return this.blocked.up},onWall:function(){return this.blocked.left||this.blocked.right},deltaAbsX:function(){return this._dx>0?this._dx:-this._dx},deltaAbsY:function(){return this._dy>0?this._dy:-this._dy},deltaX:function(){return this._dx},deltaY:function(){return this._dy},deltaXFinal:function(){return this._tx},deltaYFinal:function(){return this._ty},deltaZ:function(){return this.rotation-this.preRotation},destroy:function(){this.enable=!1,this.world&&this.world.pendingDestroy.set(this)},drawDebug:function(d){var c=this.position,p=c.x+this.halfWidth,g=c.y+this.halfHeight;this.debugShowBody&&(d.lineStyle(d.defaultStrokeWidth,this.debugBodyColor),this.isCircle?d.strokeCircle(p,g,this.width/2):(this.checkCollision.up&&d.lineBetween(c.x,c.y,c.x+this.width,c.y),this.checkCollision.right&&d.lineBetween(c.x+this.width,c.y,c.x+this.width,c.y+this.height),this.checkCollision.down&&d.lineBetween(c.x,c.y+this.height,c.x+this.width,c.y+this.height),this.checkCollision.left&&d.lineBetween(c.x,c.y,c.x,c.y+this.height))),this.debugShowVelocity&&(d.lineStyle(d.defaultStrokeWidth,this.world.defaults.velocityDebugColor,1),d.lineBetween(p,g,p+this.velocity.x/2,g+this.velocity.y/2))},willDrawDebug:function(){return this.debugShowBody||this.debugShowVelocity},setCollideWorldBounds:function(d,c,p,g){d===void 0&&(d=!0),this.collideWorldBounds=d;var m=c!==void 0,x=p!==void 0;return(m||x)&&(this.worldBounce||(this.worldBounce=new u),m&&(this.worldBounce.x=c),x&&(this.worldBounce.y=p)),g!==void 0&&(this.onWorldBounds=g),this},setVelocity:function(d,c){return this.velocity.set(d,c),d=this.velocity.x,c=this.velocity.y,this.speed=Math.sqrt(d*d+c*c),this},setVelocityX:function(d){this.velocity.x=d;var c=d,p=this.velocity.y;return this.speed=Math.sqrt(c*c+p*p),this},setVelocityY:function(d){this.velocity.y=d;var c=this.velocity.x,p=d;return this.speed=Math.sqrt(c*c+p*p),this},setMaxVelocity:function(d,c){return this.maxVelocity.set(d,c),this},setMaxVelocityX:function(d){return this.maxVelocity.x=d,this},setMaxVelocityY:function(d){return this.maxVelocity.y=d,this},setMaxSpeed:function(d){return this.maxSpeed=d,this},setBounce:function(d,c){return this.bounce.set(d,c),this},setBounceX:function(d){return this.bounce.x=d,this},setBounceY:function(d){return this.bounce.y=d,this},setAcceleration:function(d,c){return this.acceleration.set(d,c),this},setAccelerationX:function(d){return this.acceleration.x=d,this},setAccelerationY:function(d){return this.acceleration.y=d,this},setAllowDrag:function(d){return d===void 0&&(d=!0),this.allowDrag=d,this},setAllowGravity:function(d){return d===void 0&&(d=!0),this.allowGravity=d,this},setAllowRotation:function(d){return d===void 0&&(d=!0),this.allowRotation=d,this},setDrag:function(d,c){return this.drag.set(d,c),this},setDamping:function(d){return this.useDamping=d,this},setDragX:function(d){return this.drag.x=d,this},setDragY:function(d){return this.drag.y=d,this},setGravity:function(d,c){return this.gravity.set(d,c),this},setGravityX:function(d){return this.gravity.x=d,this},setGravityY:function(d){return this.gravity.y=d,this},setFriction:function(d,c){return this.friction.set(d,c),this},setFrictionX:function(d){return this.friction.x=d,this},setFrictionY:function(d){return this.friction.y=d,this},setAngularVelocity:function(d){return this.angularVelocity=d,this},setAngularAcceleration:function(d){return this.angularAcceleration=d,this},setAngularDrag:function(d){return this.angularDrag=d,this},setMass:function(d){return this.mass=d,this},setImmovable:function(d){return d===void 0&&(d=!0),this.immovable=d,this},setEnable:function(d){return d===void 0&&(d=!0),this.enable=d,this},processX:function(d,c,p,g){this.x+=d,this.updateCenter(),c!==null&&(this.velocity.x=c);var m=this.blocked;p&&(m.left=!0),g&&(m.right=!0)},processY:function(d,c,p,g){this.y+=d,this.updateCenter(),c!==null&&(this.velocity.y=c);var m=this.blocked;p&&(m.up=!0),g&&(m.down=!0)},x:{get:function(){return this.position.x},set:function(d){this.position.x=d}},y:{get:function(){return this.position.y},set:function(d){this.position.y=d}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});e.exports=v},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=new n({initialize:function(a,l,o,u,v,d,c){this.world=a,this.name="",this.active=!0,this.overlapOnly=l,this.object1=o,this.object2=u,this.collideCallback=v,this.processCallback=d,this.callbackContext=c},setName:function(r){return this.name=r,this},update:function(){this.world.collideObjects(this.object1,this.object2,this.collideCallback,this.processCallback,this.callbackContext,this.overlapOnly)},destroy:function(){this.world.removeCollider(this),this.active=!1,this.world=null,this.object1=null,this.object2=null,this.collideCallback=null,this.processCallback=null,this.callbackContext=null}});e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(26),h=i(3),r=new h,a=new h,l=function(o,u,v,d,c,p,g){var m=g.tilemapLayer.tilemap._convert.WorldToTileXY;m(o,u,!0,r,p,g);var x=r.x,y=r.y;m(o+v,u+d,!1,a,p,g);var T=Math.ceil(a.x),C=Math.ceil(a.y);return n(x,y,T-x,C-y,c,g)};e.exports=l},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){return n.collisionCallback?!n.collisionCallback.call(n.collisionCallbackContext,h,n):n.layer.callbacks[n.index]?!n.layer.callbacks[n.index].callback.call(n.layer.callbacks[n.index].callbackContext,h,n):!0};e.exports=i},function(e,f,i){/**
 * @author       Vladimir Agafonkin
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(436);function h(C){if(!(this instanceof h))return new h(C);this._maxEntries=Math.max(4,C||9),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}h.prototype={all:function(){return this._all(this.data,[])},search:function(C){var S=this.data,E=[],M=this.toBBox;if(!x(C,S))return E;for(var O=[],L,R,F,D;S;){for(L=0,R=S.children.length;L<R;L++)F=S.children[L],D=S.leaf?M(F):F,x(C,D)&&(S.leaf?E.push(F):m(C,D)?this._all(F,E):O.push(F));S=O.pop()}return E},collides:function(C){var S=this.data,E=this.toBBox;if(!x(C,S))return!1;for(var M=[],O,L,R,F;S;){for(O=0,L=S.children.length;O<L;O++)if(R=S.children[O],F=S.leaf?E(R):R,x(C,F)){if(S.leaf||m(C,F))return!0;M.push(R)}S=M.pop()}return!1},load:function(C){if(!(C&&C.length))return this;if(C.length<this._minEntries){for(var S=0,E=C.length;S<E;S++)this.insert(C[S]);return this}var M=this._build(C.slice(),0,C.length-1,0);if(!this.data.children.length)this.data=M;else if(this.data.height===M.height)this._splitRoot(this.data,M);else{if(this.data.height<M.height){var O=this.data;this.data=M,M=O}this._insert(M,this.data.height-M.height-1,!0)}return this},insert:function(C){return C&&this._insert(C,this.data.height-1),this},clear:function(){return this.data=y([]),this},remove:function(C,S){if(!C)return this;for(var E=this.data,M=this.toBBox(C),O=[],L=[],R,F,D,B;E||O.length;){if(E||(E=O.pop(),F=O[O.length-1],R=L.pop(),B=!0),E.leaf&&(D=r(C,E.children,S),D!==-1))return E.children.splice(D,1),O.push(E),this._condense(O),this;!B&&!E.leaf&&m(E,M)?(O.push(E),L.push(R),R=0,F=E,E=E.children[0]):F?(R++,E=F.children[R],B=!1):E=null}return this},toBBox:function(C){return C},compareMinX:u,compareMinY:v,toJSON:function(){return this.data},fromJSON:function(C){return this.data=C,this},_all:function(C,S){for(var E=[];C;)C.leaf?S.push.apply(S,C.children):E.push.apply(E,C.children),C=E.pop();return S},_build:function(C,S,E,M){var O=E-S+1,L=this._maxEntries,R;if(O<=L)return R=y(C.slice(S,E+1)),a(R,this.toBBox),R;M||(M=Math.ceil(Math.log(O)/Math.log(L)),L=Math.ceil(O/Math.pow(L,M-1))),R=y([]),R.leaf=!1,R.height=M;var F=Math.ceil(O/L),D=F*Math.ceil(Math.sqrt(L)),B,N,U,X;for(T(C,S,E,D,this.compareMinX),B=S;B<=E;B+=D)for(U=Math.min(B+D-1,E),T(C,B,U,F,this.compareMinY),N=B;N<=U;N+=F)X=Math.min(N+F-1,U),R.children.push(this._build(C,N,X,M-1));return a(R,this.toBBox),R},_chooseSubtree:function(C,S,E,M){for(var O,L,R,F,D,B,N,U;M.push(S),!(S.leaf||M.length-1===E);){for(N=U=1/0,O=0,L=S.children.length;O<L;O++)R=S.children[O],D=d(R),B=p(C,R)-D,B<U?(U=B,N=D<N?D:N,F=R):B===U&&D<N&&(N=D,F=R);S=F||S.children[0]}return S},_insert:function(C,S,E){var M=this.toBBox,O=E?C:M(C),L=[],R=this._chooseSubtree(O,this.data,S,L);for(R.children.push(C),o(R,O);S>=0&&L[S].children.length>this._maxEntries;)this._split(L,S),S--;this._adjustParentBBoxes(O,L,S)},_split:function(C,S){var E=C[S],M=E.children.length,O=this._minEntries;this._chooseSplitAxis(E,O,M);var L=this._chooseSplitIndex(E,O,M),R=y(E.children.splice(L,E.children.length-L));R.height=E.height,R.leaf=E.leaf,a(E,this.toBBox),a(R,this.toBBox),S?C[S-1].children.push(R):this._splitRoot(E,R)},_splitRoot:function(C,S){this.data=y([C,S]),this.data.height=C.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},_chooseSplitIndex:function(C,S,E){var M,O,L,R,F,D,B,N;for(D=B=1/0,M=S;M<=E-S;M++)O=l(C,0,M,this.toBBox),L=l(C,M,E,this.toBBox),R=g(O,L),F=d(O)+d(L),R<D?(D=R,N=M,B=F<B?F:B):R===D&&F<B&&(B=F,N=M);return N},_chooseSplitAxis:function(C,S,E){var M=C.leaf?this.compareMinX:u,O=C.leaf?this.compareMinY:v,L=this._allDistMargin(C,S,E,M),R=this._allDistMargin(C,S,E,O);L<R&&C.children.sort(M)},_allDistMargin:function(C,S,E,M){C.children.sort(M);var O=this.toBBox,L=l(C,0,S,O),R=l(C,E-S,E,O),F=c(L)+c(R),D,B;for(D=S;D<E-S;D++)B=C.children[D],o(L,C.leaf?O(B):B),F+=c(L);for(D=E-S-1;D>=S;D--)B=C.children[D],o(R,C.leaf?O(B):B),F+=c(R);return F},_adjustParentBBoxes:function(C,S,E){for(var M=E;M>=0;M--)o(S[M],C)},_condense:function(C){for(var S=C.length-1,E;S>=0;S--)C[S].children.length===0?S>0?(E=C[S-1].children,E.splice(E.indexOf(C[S]),1)):this.clear():a(C[S],this.toBBox)},compareMinX:function(C,S){return C.left-S.left},compareMinY:function(C,S){return C.top-S.top},toBBox:function(C){return{minX:C.left,minY:C.top,maxX:C.right,maxY:C.bottom}}};function r(C,S,E){if(!E)return S.indexOf(C);for(var M=0;M<S.length;M++)if(E(C,S[M]))return M;return-1}function a(C,S){l(C,0,C.children.length,S,C)}function l(C,S,E,M,O){O||(O=y(null)),O.minX=1/0,O.minY=1/0,O.maxX=-1/0,O.maxY=-1/0;for(var L=S,R;L<E;L++)R=C.children[L],o(O,C.leaf?M(R):R);return O}function o(C,S){return C.minX=Math.min(C.minX,S.minX),C.minY=Math.min(C.minY,S.minY),C.maxX=Math.max(C.maxX,S.maxX),C.maxY=Math.max(C.maxY,S.maxY),C}function u(C,S){return C.minX-S.minX}function v(C,S){return C.minY-S.minY}function d(C){return(C.maxX-C.minX)*(C.maxY-C.minY)}function c(C){return C.maxX-C.minX+(C.maxY-C.minY)}function p(C,S){return(Math.max(S.maxX,C.maxX)-Math.min(S.minX,C.minX))*(Math.max(S.maxY,C.maxY)-Math.min(S.minY,C.minY))}function g(C,S){var E=Math.max(C.minX,S.minX),M=Math.max(C.minY,S.minY),O=Math.min(C.maxX,S.maxX),L=Math.min(C.maxY,S.maxY);return Math.max(0,O-E)*Math.max(0,L-M)}function m(C,S){return C.minX<=S.minX&&C.minY<=S.minY&&S.maxX<=C.maxX&&S.maxY<=C.maxY}function x(C,S){return S.minX<=C.maxX&&S.minY<=C.maxY&&S.maxX>=C.minX&&S.maxY>=C.minY}function y(C){return{children:C,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function T(C,S,E,M,O){for(var L=[S,E],R;L.length;)E=L.pop(),S=L.pop(),!(E-S<=M)&&(R=S+Math.ceil((E-S)/M/2)*M,n(C,R,S,E,O),L.push(S,R,R,E))}e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(533),h=i(535),r=i(248),a=function(l,o,u,v,d,c,p){var g=v.left,m=v.top,x=v.right,y=v.bottom,T=u.faceLeft||u.faceRight,C=u.faceTop||u.faceBottom;if(p||(T=!0,C=!0),!T&&!C)return!1;var S=0,E=0,M=0,O=1;if(o.deltaAbsX()>o.deltaAbsY()?M=-1:o.deltaAbsX()<o.deltaAbsY()&&(O=-1),o.deltaX()!==0&&o.deltaY()!==0&&T&&C&&(M=Math.min(Math.abs(o.position.x-x),Math.abs(o.right-g)),O=Math.min(Math.abs(o.position.y-y),Math.abs(o.bottom-m))),M<O){if(T&&(S=n(o,u,g,x,c,p),S!==0&&!r(v,o)))return!0;C&&(E=h(o,u,m,y,c,p))}else{if(C&&(E=h(o,u,m,y,c,p),E!==0&&!r(v,o)))return!0;T&&(S=n(o,u,g,x,c,p))}return S!==0||E!==0};e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(534),h=function(r,a,l,o,u,v){var d=0,c=a.faceLeft,p=a.faceRight,g=a.collideLeft,m=a.collideRight;return v||(c=!0,p=!0,g=!0,m=!0),r.deltaX()<0&&m&&r.checkCollision.left?p&&r.x<o&&(d=r.x-o,d<-u&&(d=0)):r.deltaX()>0&&g&&r.checkCollision.right&&c&&r.right>l&&(d=r.right-l,d>u&&(d=0)),d!==0&&(r.customSeparateX?r.overlapX=d:n(r,d)),d};e.exports=h},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){h<0?(n.blocked.none=!1,n.blocked.left=!0):h>0&&(n.blocked.none=!1,n.blocked.right=!0),n.position.x-=h,n.bounce.x===0?n.velocity.x=0:n.velocity.x=-n.velocity.x*n.bounce.x};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(536),h=function(r,a,l,o,u,v){var d=0,c=a.faceTop,p=a.faceBottom,g=a.collideUp,m=a.collideDown;return v||(c=!0,p=!0,g=!0,m=!0),r.deltaY()<0&&m&&r.checkCollision.up?p&&r.y<o&&(d=r.y-o,d<-u&&(d=0)):r.deltaY()>0&&g&&r.checkCollision.down&&c&&r.bottom>l&&(d=r.bottom-l,d>u&&(d=0)),d!==0&&(r.customSeparateY?r.overlapY=d:n(r,d)),d};e.exports=h},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){h<0?(n.blocked.none=!1,n.blocked.up=!0):h>0&&(n.blocked.none=!1,n.blocked.down=!0),n.position.y-=h,n.bounce.y===0?n.velocity.y=0:n.velocity.y=-n.velocity.y*n.bounce.y};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(246),h=i(1389),r=function(a,l,o,u){var v=n(a,l,o,u),d=a.immovable,c=l.immovable;if(o||v===0||d&&c||a.customSeparateX||l.customSeparateX)return v!==0||a.embedded&&l.embedded;var p=h.Set(a,l,v);return!d&&!c?p>0?!0:h.Check():(d?h.RunImmovableBody1(p):c&&h.RunImmovableBody2(p),!0)};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(247),h=i(1390),r=function(a,l,o,u){var v=n(a,l,o,u),d=a.immovable,c=l.immovable;if(o||v===0||d&&c||a.customSeparateY||l.customSeparateY)return v!==0||a.embedded&&l.embedded;var p=h.Set(a,l,v);return!d&&!c?p>0?!0:h.Check():(d?h.RunImmovableBody1(p):c&&h.RunImmovableBody2(p),!0)};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(66),h=i(0),r=i(62),a=i(57),l=i(3),o=new h({initialize:function(v,d){var c=d.displayWidth?d.displayWidth:64,p=d.displayHeight?d.displayHeight:64;this.world=v,this.gameObject=d,this.debugShowBody=v.defaults.debugShowStaticBody,this.debugBodyColor=v.defaults.staticBodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new l,this.position=new l(d.x-c*d.originX,d.y-p*d.originY),this.width=c,this.height=p,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center=new l(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=l.ZERO,this.allowGravity=!1,this.gravity=l.ZERO,this.bounce=l.ZERO,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.mass=1,this.immovable=!0,this.pushable=!1,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.physicsType=r.STATIC_BODY,this._dx=0,this._dy=0},setGameObject:function(u,v){return u&&u!==this.gameObject&&(this.gameObject.body=null,u.body=this,this.gameObject=u),v&&this.updateFromGameObject(),this},updateFromGameObject:function(){this.world.staticTree.remove(this);var u=this.gameObject;return u.getTopLeft(this.position),this.width=u.displayWidth,this.height=u.displayHeight,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.world.staticTree.insert(this),this},setOffset:function(u,v){return v===void 0&&(v=u),this.world.staticTree.remove(this),this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(u,v),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this),this},setSize:function(u,v,d){d===void 0&&(d=!0);var c=this.gameObject;if(!u&&c.frame&&(u=c.frame.realWidth),!v&&c.frame&&(v=c.frame.realHeight),this.world.staticTree.remove(this),this.width=u,this.height=v,this.halfWidth=Math.floor(u/2),this.halfHeight=Math.floor(v/2),d&&c.getCenter){var p=c.displayWidth/2,g=c.displayHeight/2;this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(p-this.halfWidth,g-this.halfHeight),this.position.x+=this.offset.x,this.position.y+=this.offset.y}return this.updateCenter(),this.isCircle=!1,this.radius=0,this.world.staticTree.insert(this),this},setCircle:function(u,v,d){return v===void 0&&(v=this.offset.x),d===void 0&&(d=this.offset.y),u>0?(this.world.staticTree.remove(this),this.isCircle=!0,this.radius=u,this.width=u*2,this.height=u*2,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(v,d),this.updateCenter(),this.world.staticTree.insert(this)):this.isCircle=!1,this},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},reset:function(u,v){var d=this.gameObject;u===void 0&&(u=d.x),v===void 0&&(v=d.y),this.world.staticTree.remove(this),d.setPosition(u,v),d.getTopLeft(this.position),this.updateCenter(),this.world.staticTree.insert(this)},stop:function(){return this},getBounds:function(u){return u.x=this.x,u.y=this.y,u.right=this.right,u.bottom=this.bottom,u},hitTest:function(u,v){return this.isCircle?n(this,u,v):a(this,u,v)},postUpdate:function(){},deltaAbsX:function(){return 0},deltaAbsY:function(){return 0},deltaX:function(){return 0},deltaY:function(){return 0},deltaZ:function(){return 0},destroy:function(){this.enable=!1,this.world.pendingDestroy.set(this)},drawDebug:function(u){var v=this.position,d=v.x+this.halfWidth,c=v.y+this.halfHeight;this.debugShowBody&&(u.lineStyle(u.defaultStrokeWidth,this.debugBodyColor,1),this.isCircle?u.strokeCircle(d,c,this.width/2):u.strokeRect(v.x,v.y,this.width,this.height))},willDrawDebug:function(){return this.debugShowBody},setMass:function(u){return u<=0&&(u=.1),this.mass=u,this},x:{get:function(){return this.position.x},set:function(u){this.world.staticTree.remove(this),this.position.x=u,this.world.staticTree.insert(this)}},y:{get:function(){return this.position.y},set:function(u){this.world.staticTree.remove(this),this.position.y=u,this.world.staticTree.insert(this)}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});e.exports=o},function(e,f,i){/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2020 Photon Storm Ltd.
* @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
*/var n=i(0),h=new n({initialize:function(a){this.pluginManager=a,this.game=a.game},init:function(){},start:function(){},stop:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(3),h=new n,r=function(a,l,o,u){var v=o.tilemapLayer,d=v.cullPaddingX,c=v.cullPaddingY,p=v.tilemap.tileToWorldXY(a,l,h,u,v);return p.x>u.worldView.x+v.scaleX*o.tileWidth*(-d-.5)&&p.x<u.worldView.right+v.scaleX*o.tileWidth*(d-.5)&&p.y>u.worldView.y+v.scaleY*o.tileHeight*(-c-1)&&p.y<u.worldView.bottom+v.scaleY*o.tileHeight*(c-.5)};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(26),h=function(r,a,l,o,u,v,d){for(var c=n(l,o,u,v,null,d),p=0;p<c.length;p++)c[p]&&c[p].index===r&&(c[p].index=a)};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(10),h=i(139),r=i(76),a=new n,l=function(o,u){var v=o.tilemapLayer.tilemap,d=o.tilemapLayer,c=Math.floor(v.tileWidth*d.scaleX),p=Math.floor(v.tileHeight*d.scaleY),g=r(u.worldView.x-d.x,c,0,!0)-d.cullPaddingX,m=h(u.worldView.right-d.x,c,0,!0)+d.cullPaddingX,x=r(u.worldView.y-d.y,p,0,!0)-d.cullPaddingY,y=h(u.worldView.bottom-d.y,p,0,!0)+d.cullPaddingY;return a.setTo(g,x,m-g,y-x)};e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(543),h=i(159),r=function(a,l,o,u){o===void 0&&(o=[]),u===void 0&&(u=0),o.length=0;var v=a.tilemapLayer,d=n(a,l);return(v.skipCull||v.scrollFactorX!==1||v.scrollFactorY!==1)&&(d.left=0,d.right=a.width,d.top=0,d.bottom=a.height),h(a,d,u,o),o};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(546),h=i(159),r=function(a,l,o,u){o===void 0&&(o=[]),u===void 0&&(u=0),o.length=0;var v=a.tilemapLayer;if(!v.skipCull&&v.scrollFactorX===1&&v.scrollFactorY===1){var d=n(a,l);h(a,d,u,o)}return o};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(139),h=i(76),r=function(a,l){var o=a.tilemapLayer.tilemap,u=a.tilemapLayer,v=Math.floor(o.tileWidth*u.scaleX),d=Math.floor(o.tileHeight*u.scaleY),c=a.hexSideLength,p=(d-c)/2+c,g=h(l.worldView.x-u.x,v,0,!0)-u.cullPaddingX,m=n(l.worldView.right-u.x,v,0,!0)+u.cullPaddingX,x=h(l.worldView.y-u.y,p,0,!0)-u.cullPaddingY,y=n(l.worldView.bottom-u.y,p,0,!0)+u.cullPaddingY;return{left:g,right:m,top:x,bottom:y}};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(541),h=function(r,a,l,o){l===void 0&&(l=[]),o===void 0&&(o=0),l.length=0;var u=r.tilemapLayer,v=r.data,d=r.width,c=r.height,p=0,g=d,m=0,x=c;if(!u.skipCull){var y,T,C;if(o===0){for(T=m;T<x;T++)for(y=p;v[T]&&y<g;y++)if(n(y,T,r,a)){if(C=v[T][y],!C||C.index===-1||!C.visible||C.alpha===0)continue;l.push(C)}}else if(o===1){for(T=m;T<x;T++)for(y=g;v[T]&&y>=p;y--)if(n(y,T,r,a)){if(C=v[T][y],!C||C.index===-1||!C.visible||C.alpha===0)continue;l.push(C)}}else if(o===2){for(T=x;T>=m;T--)for(y=p;v[T]&&y<g;y++)if(n(y,T,r,a)){if(C=v[T][y],!C||C.index===-1||!C.visible||C.alpha===0)continue;l.push(C)}}else if(o===3){for(T=x;T>=m;T--)for(y=g;v[T]&&y>=p;y--)if(n(y,T,r,a)){if(C=v[T][y],!C||C.index===-1||!C.visible||C.alpha===0)continue;l.push(C)}}}return u.tilesDrawn=l.length,u.tilesTotal=d*c,l};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(549),h=i(159),r=function(a,l,o,u){o===void 0&&(o=[]),u===void 0&&(u=0),o.length=0;var v=a.tilemapLayer;if(!v.skipCull&&v.scrollFactorX===1&&v.scrollFactorY===1){var d=n(a,l);h(a,d,u,o)}return o};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(139),h=i(76),r=function(a,l){var o=a.tilemapLayer.tilemap,u=a.tilemapLayer,v=Math.floor(o.tileWidth*u.scaleX),d=Math.floor(o.tileHeight*u.scaleY),c=h(l.worldView.x-u.x,v,0,!0)-u.cullPaddingX,p=n(l.worldView.right-u.x,v,0,!0)+u.cullPaddingX,g=h(l.worldView.y-u.y,d/2,0,!0)-u.cullPaddingY,m=n(l.worldView.bottom-u.y,d/2,0,!0)+u.cullPaddingY;return{left:c,right:p,top:g,bottom:m}};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(3),h=function(r,a,l,o,u){l||(l=new n);var v=u.baseTileWidth,d=u.baseTileHeight,c=u.tilemapLayer,p=0,g=0;c&&(o||(o=c.scene.cameras.main),p=c.x+o.scrollX*(1-c.scrollFactorX),v*=c.scaleX,g=c.y+o.scrollY*(1-c.scrollFactorY),d*=c.scaleY);var m=u.hexSideLength,x=(d-m)/2+m,y=p+r*v+a%2*(v/2),T=g+a*x;return l.set(y,T)};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(3),h=function(r,a,l,o,u){l||(l=new n);var v=u.baseTileWidth,d=u.baseTileHeight,c=u.tilemapLayer,p=0,g=0;c&&(o||(o=c.scene.cameras.main),p=c.x+o.scrollX*(1-c.scrollFactorX),v*=c.scaleX,g=c.y+o.scrollY*(1-c.scrollFactorY),d*=c.scaleY);var m=p+(r-a)*(v/2),x=g+(r+a)*(d/2);return l.set(m,x)};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(3),h=function(r,a,l,o,u){l||(l=new n);var v=u.baseTileWidth,d=u.baseTileHeight,c=u.tilemapLayer,p=0,g=0;c&&(o||(o=c.scene.cameras.main),p=c.x+o.scrollX*(1-c.scrollFactorX),v*=c.scaleX,g=c.y+o.scrollY*(1-c.scrollFactorY),d*=c.scaleY);var m=p+r*v+a%2*(v/2),x=g+a*(d/2);return l.set(m,x)};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(253),h=i(254),r=i(3),a=function(l,o,u,v,d){return u||(u=new r(0,0)),u.x=n(l,v,d),u.y=h(o,v,d),u};e.exports=a},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r){var a=r.baseTileHeight,l=r.tilemapLayer,o=0;l&&(h===void 0&&(h=l.scene.cameras.main),o=l.y+h.scrollY*(1-l.scrollFactorY),a*=l.scaleY);var u=l.tilemap.hexSideLength,v=(a-u)/2+u;return o+n*v};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r){var a=r.baseTileHeight,l=r.tilemapLayer,o=0;return l&&(h===void 0&&(h=l.scene.cameras.main),o=l.y+h.scrollY*(1-l.scrollFactorY),a*=l.scaleY),o+n*(a/2)};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(3),h=function(r,a,l,o,u,v){o||(o=new n);var d=v.baseTileWidth,c=v.baseTileHeight,p=v.tilemapLayer;p&&(u||(u=p.scene.cameras.main),a=a-(p.y+u.scrollY*(1-p.scrollFactorY)),c*=p.scaleY,r=r-(p.x+u.scrollX*(1-p.scrollFactorX)),d*=p.scaleX);var g=v.hexSideLength,m=(c-g)/2+g,x=l?Math.floor(a/m):a/m,y=l?Math.floor((r-x%2*.5*d)/d):(r-x%2*.5*d)/d;return o.set(y,x)};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(3),h=function(r,a,l,o,u,v){o||(o=new n);var d=v.baseTileWidth,c=v.baseTileHeight,p=v.tilemapLayer;p&&(u||(u=p.scene.cameras.main),a=a-(p.y+u.scrollY*(1-p.scrollFactorY)),c*=p.scaleY,r=r-(p.x+u.scrollX*(1-p.scrollFactorX)),d*=p.scaleX);var g=l?Math.floor((r/(d/2)+a/(c/2))/2):(r/(d/2)+a/(c/2))/2,m=l?Math.floor((a/(c/2)-r/(d/2))/2):(a/(c/2)-r/(d/2))/2;return o.set(g,m)};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(3),h=function(r,a,l,o,u,v){o||(o=new n);var d=v.baseTileWidth,c=v.baseTileHeight,p=v.tilemapLayer;p&&(u||(u=p.scene.cameras.main),a=a-(p.y+u.scrollY*(1-p.scrollFactorY)),c*=p.scaleY,r=r-(p.x+u.scrollX*(1-p.scrollFactorX)),d*=p.scaleX);var g=l?Math.floor(a/(c/2)):a/(c/2),m=l?Math.floor((r+g%2*.5*d)/d):(r+g%2*.5*d)/d;return o.set(m,g)};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(255),h=i(256),r=i(3),a=function(l,o,u,v,d,c){return u===void 0&&(u=!0),v||(v=new r(0,0)),v.x=n(l,u,d,c),v.y=h(o,u,d,c),v};e.exports=a},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r,a){var l=a.baseTileHeight,o=a.tilemapLayer;o&&(r||(r=o.scene.cameras.main),n=n-(o.y+r.scrollY*(1-o.scrollFactorY)),l*=o.scaleY);var u=a.hexSideLength,v=(l-u)/2+u;return h?Math.floor(n/v):n/v};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r,a){var l=a.baseTileHeight,o=a.tilemapLayer;return o&&(r||(r=o.scene.cameras.main),n=n-(o.y+r.scrollY*(1-o.scrollFactorY)),l*=o.scaleY),h?Math.floor(n/(l/2)):n/(l/2)};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(119),h=function(r,a,l){if(n(r,a,l)){var o=l.data[a][r];return o!==null&&o.index>-1}else return!1};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(85),h=i(119),r=i(252),a=function(l,o,u,v,d){if(u===void 0&&(u=!0),v===void 0&&(v=!0),!h(l,o,d))return null;var c=d.data[o][l];if(c)d.data[o][l]=u?null:new n(d,-1,l,o,d.tileWidth,d.tileHeight);else return null;return v&&c&&c.collides&&r(l,o,d),c};e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(40),h=i(259),r=i(565),a=i(566),l=i(577),o=function(u,v,d,c,p,g){var m;switch(v){case n.ARRAY_2D:m=h(u,d,c,p,g);break;case n.CSV:m=r(u,d,c,p,g);break;case n.TILED_JSON:m=a(u,d,g);break;case n.WELTMEISTER:m=l(u,d,g);break;default:console.warn("Unrecognized tilemap data format: "+v),m=null}return m};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(40),h=i(259),r=function(a,l,o,u,v){var d=l.trim().split(`
`).map(function(p){return p.split(",")}),c=h(a,d,o,u,v);return c.format=n.CSV,c};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(567),h=i(568),r=i(29),a=i(40),l=i(258),o=i(121),u=i(569),v=i(570),d=i(573),c=i(575),p=function(g,m,x){var y=new o({width:m.width,height:m.height,name:g,tileWidth:m.tilewidth,tileHeight:m.tileheight,orientation:l(m.orientation),format:a.TILED_JSON,version:m.version,properties:m.properties,renderOrder:m.renderorder,infinite:m.infinite});y.orientation===r.HEXAGONAL&&(y.hexSideLength=m.hexsidelength),y.layers=d(m,x),y.images=u(m);var T=c(m);return y.tilesets=T.tilesets,y.imageCollections=T.imageCollections,y.objects=v(m),y.tiles=h(y),n(y),y};e.exports=p},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(17),h=function(r){for(var a,l,o,u,v,d=0;d<r.layers.length;d++){a=r.layers[d],u=null;for(var c=0;c<a.data.length;c++){v=a.data[c];for(var p=0;p<v.length;p++)l=v[p],!(l===null||l.index<0)&&(o=r.tiles[l.index][2],u=r.tilesets[o],l.width=u.tileWidth,l.height=u.tileHeight,u.tileProperties&&u.tileProperties[l.index-u.firstgid]&&(l.properties=n(l.properties,u.tileProperties[l.index-u.firstgid])))}}};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(122),h=function(r){var a,l,o=[];for(a=0;a<r.imageCollections.length;a++)for(var u=r.imageCollections[a],v=u.images,d=0;d<v.length;d++){var c=v[d];l=new n(c.image,c.gid,u.imageWidth,u.imageHeight,0,0),l.updateTileData(u.imageWidth,u.imageHeight),r.tilesets.push(l)}for(a=0;a<r.tilesets.length;a++){l=r.tilesets[a];for(var p=l.tileMargin,g=l.tileMargin,m=0,x=0,y=0,T=l.firstgid;T<l.firstgid+l.total&&(o[T]=[p,g,a],p+=l.tileWidth+l.tileSpacing,m++,!(m===l.total||(x++,x===l.columns&&(p=l.tileMargin,g+=l.tileHeight+l.tileSpacing,x=0,y++,y===l.rows))));T++);}return o};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(2),h=i(161),r=function(a){for(var l=[],o=[],u=h(a);u.i<u.layers.length||o.length>0;){if(u.i>=u.layers.length){if(o.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}u=o.pop();continue}var v=u.layers[u.i];if(u.i++,v.type!=="imagelayer"){if(v.type==="group"){var d=h(a,v,u);o.push(u),u=d}continue}var c=n(v,"offsetx",0)+n(v,"startx",0),p=n(v,"offsety",0)+n(v,"starty",0);l.push({name:u.name+v.name,image:v.image,x:u.x+c+v.x,y:u.y+p+v.y,alpha:u.opacity*v.opacity,visible:u.visible&&v.visible,properties:n(v,"properties",{})})}return l};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(2),h=i(260),r=i(572),a=i(161),l=function(o){for(var u=[],v=[],d=a(o);d.i<d.layers.length||v.length>0;){if(d.i>=d.layers.length){if(v.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}d=v.pop();continue}var c=d.layers[d.i];if(d.i++,c.opacity*=d.opacity,c.visible=d.visible&&c.visible,c.type!=="objectgroup"){if(c.type==="group"){var p=a(o,c,d);v.push(d),d=p}continue}c.name=d.name+c.name;for(var g=d.x+n(c,"startx",0)+n(c,"offsetx",0),m=d.y+n(c,"starty",0)+n(c,"offsety",0),x=[],y=0;y<c.objects.length;y++){var T=h(c.objects[y],g,m);x.push(T)}var C=new r(c);C.objects=x,u.push(C)}return u};e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(126),h=function(r,a){for(var l={},o=0;o<a.length;o++){var u=a[o];n(r,u)&&(l[u]=r[u])}return l};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(2),r=new n({initialize:function(l){l===void 0&&(l={}),this.name=h(l,"name","object layer"),this.opacity=h(l,"opacity",1),this.properties=h(l,"properties",{}),this.propertyTypes=h(l,"propertytypes",{}),this.type=h(l,"type","objectgroup"),this.visible=h(l,"visible",!0),this.objects=h(l,"objects",[])}});e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(574),h=i(29),r=i(161),a=i(258),l=i(2),o=i(120),u=i(261),v=i(85),d=function(c,p){for(var g=l(c,"infinite",!1),m=[],x=[],y=r(c);y.i<y.layers.length||x.length>0;){if(y.i>=y.layers.length){if(x.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}y=x.pop();continue}var T=y.layers[y.i];if(y.i++,T.type!=="tilelayer"){if(T.type==="group"){var C=r(c,T,y);x.push(y),y=C}continue}if(T.compression){console.warn("TilemapParser.parseTiledJSON - Layer compression is unsupported, skipping layer '"+T.name+"'");continue}else if(T.encoding&&T.encoding==="base64"){if(T.chunks)for(var S=0;S<T.chunks.length;S++)T.chunks[S].data=n(T.chunks[S].data);T.data&&(T.data=n(T.data)),delete T.encoding}var E,M,O,L,R=[],F=0;if(g){var D=l(T,"startx",0)+T.x,B=l(T,"starty",0)+T.y;E=new o({name:y.name+T.name,x:y.x+l(T,"offsetx",0)+D*c.tilewidth,y:y.y+l(T,"offsety",0)+B*c.tileheight,width:T.width,height:T.height,tileWidth:c.tilewidth,tileHeight:c.tileheight,alpha:y.opacity*T.opacity,visible:y.visible&&T.visible,properties:l(T,"properties",[]),orientation:a(c.orientation)}),E.orientation===h.HEXAGONAL&&(E.hexSideLength=c.hexsidelength);for(var N=0;N<T.height;N++){R.push([null]);for(var U=0;U<T.width;U++)R[N][U]=null}for(N=0,Z=T.chunks.length;N<Z;N++)for(var X=T.chunks[N],K=X.x-D,k=X.y-B,b=0,I=0,G=X.data.length;I<G;I++){var Y=F+K,V=b+k;M=u(X.data[I]),M.gid>0?(O=new v(E,M.gid,Y,V,c.tilewidth,c.tileheight),O.rotation=M.rotation,O.flipX=M.flipped,R[V][Y]=O):(L=p?null:new v(E,-1,Y,V,c.tilewidth,c.tileheight),R[V][Y]=L),F++,F===X.width&&(b++,F=0)}}else{E=new o({name:y.name+T.name,x:y.x+l(T,"offsetx",0)+T.x,y:y.y+l(T,"offsety",0)+T.y,width:T.width,height:T.height,tileWidth:c.tilewidth,tileHeight:c.tileheight,alpha:y.opacity*T.opacity,visible:y.visible&&T.visible,properties:l(T,"properties",[]),orientation:a(c.orientation)}),E.orientation===h.HEXAGONAL&&(E.hexSideLength=c.hexsidelength);for(var W=[],H=0,Z=T.data.length;H<Z;H++)M=u(T.data[H]),M.gid>0?(O=new v(E,M.gid,F,R.length,c.tilewidth,c.tileheight),O.rotation=M.rotation,O.flipX=M.flipped,W.push(O)):(L=p?null:new v(E,-1,F,R.length,c.tilewidth,c.tileheight),W.push(L)),F++,F===T.width&&(R.push(W),F=0,W=[])}E.data=R,m.push(E)}return m};e.exports=d},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){for(var h=window.atob(n),r=h.length,a=new Array(r/4),l=0;l<r;l+=4)a[l/4]=(h.charCodeAt(l)|h.charCodeAt(l+1)<<8|h.charCodeAt(l+2)<<16|h.charCodeAt(l+3)<<24)>>>0;return a};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(122),h=i(576),r=i(260),a=i(1453),l=function(o){for(var u=[],v=[],d=null,c,p=0;p<o.tilesets.length;p++){var g=o.tilesets[p];if(g.source)console.warn("External tilesets unsupported. Use Embed Tileset and re-export");else if(g.image){var m=new n(g.name,g.firstgid,g.tilewidth,g.tileheight,g.margin,g.spacing);if(o.version>1){var x=void 0,y=void 0;if(Array.isArray(g.tiles)){x=x||{},y=y||{};for(var T=0;T<g.tiles.length;T++){var C=g.tiles[T];if(C.properties){var S={};C.properties.forEach(function(N){S[N.name]=N.value}),y[C.id]=S}if(C.objectgroup&&((x[C.id]||(x[C.id]={})).objectgroup=C.objectgroup,C.objectgroup.objects)){var E=C.objectgroup.objects.map(function(N){return r(N)});x[C.id].objectgroup.objects=E}C.animation&&((x[C.id]||(x[C.id]={})).animation=C.animation),C.type&&((x[C.id]||(x[C.id]={})).type=C.type)}}Array.isArray(g.wangsets)&&(x=x||{},y=y||{},a(g.wangsets,x)),x&&(m.tileData=x,m.tileProperties=y)}else if(g.tileproperties&&(m.tileProperties=g.tileproperties),g.tiles){m.tileData=g.tiles;for(c in m.tileData){var M=m.tileData[c].objectgroup;if(M&&M.objects){var O=M.objects.map(function(N){return r(N)});m.tileData[c].objectgroup.objects=O}}}m.updateTileData(g.imagewidth,g.imageheight),u.push(m)}else{var L=new h(g.name,g.firstgid,g.tilewidth,g.tileheight,g.margin,g.spacing,g.properties),R=0;for(T=0;T<g.tiles.length;T++){C=g.tiles[T];var F=C.image,D=parseInt(C.id,10),B=g.firstgid+D;L.addImage(B,F),R=Math.max(D,R)}L.maxId=R,v.push(L)}d&&(d.lastgid=g.firstgid-1),d=g}return{tilesets:u,imageCollections:v}};e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=new n({initialize:function(a,l,o,u,v,d,c){(o===void 0||o<=0)&&(o=32),(u===void 0||u<=0)&&(u=32),v===void 0&&(v=0),d===void 0&&(d=0),this.name=a,this.firstgid=l|0,this.imageWidth=o|0,this.imageHeight=u|0,this.imageMargin=v|0,this.imageSpacing=d|0,this.properties=c||{},this.images=[],this.total=0},containsImageIndex:function(r){return r>=this.firstgid&&r<this.firstgid+this.total},addImage:function(r,a){return this.images.push({gid:r,image:a}),this.total++,this}});e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(40),h=i(121),r=i(578),a=i(579),l=function(o,u,v){if(u.layer.length===0)return console.warn("No layers found in the Weltmeister map: "+o),null;for(var d=0,c=0,p=0;p<u.layer.length;p++)u.layer[p].width>d&&(d=u.layer[p].width),u.layer[p].height>c&&(c=u.layer[p].height);var g=new h({width:d,height:c,name:o,tileWidth:u.layer[0].tilesize,tileHeight:u.layer[0].tilesize,format:n.WELTMEISTER});return g.layers=r(u,v),g.tilesets=a(u),g};e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(120),h=i(85),r=function(a,l){for(var o=[],u=0;u<a.layer.length;u++){for(var v=a.layer[u],d=new n({name:v.name,width:v.width,height:v.height,tileWidth:v.tilesize,tileHeight:v.tilesize,visible:v.visible===1}),c=[],p=[],g=0;g<v.data.length;g++){for(var m=0;m<v.data[g].length;m++){var x=v.data[g][m]-1,y;x>-1?y=new h(d,x,m,g,v.tilesize,v.tilesize):y=l?null:new h(d,-1,m,g,v.tilesize,v.tilesize),c.push(y)}p.push(c),c=[]}d.data=p,o.push(d)}return o};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(122),h=function(r){for(var a=[],l=[],o=0;o<r.layer.length;o++){var u=r.layer[o],v=u.tilesetName;v!==""&&l.indexOf(v)===-1&&(l.push(v),a.push(new n(v,0,u.tilesize,u.tilesize,0,0)))}return a};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(36),r=i(40),a=i(2),l=i(120),o=i(29),u=i(362),v=i(74),d=i(73),c=i(85),p=i(251),g=i(581),m=i(122),x=new n({initialize:function(T,C){this.scene=T,this.tileWidth=C.tileWidth,this.tileHeight=C.tileHeight,this.width=C.width,this.height=C.height,this.orientation=C.orientation,this.renderOrder=C.renderOrder,this.format=C.format,this.version=C.version,this.properties=C.properties,this.widthInPixels=C.widthInPixels,this.heightInPixels=C.heightInPixels,this.imageCollections=C.imageCollections,this.images=C.images,this.layers=C.layers,this.tilesets=C.tilesets,this.objects=C.objects,this.currentLayerIndex=0,this.hexSideLength=C.hexSideLength;var S=this.orientation;this._convert={WorldToTileXY:p.GetWorldToTileXYFunction(S),WorldToTileX:p.GetWorldToTileXFunction(S),WorldToTileY:p.GetWorldToTileYFunction(S),TileToWorldXY:p.GetTileToWorldXYFunction(S),TileToWorldX:p.GetTileToWorldXFunction(S),TileToWorldY:p.GetTileToWorldYFunction(S)}},createBlankDynamicLayer:function(y,T,C,S,E,M,O,L){return console.warn("createBlankDynamicLayer is deprecated. Use createBlankLayer"),this.createBlankLayer(y,T,C,S,E,M,O,L)},createDynamicLayer:function(y,T,C,S){return console.warn("createDynamicLayer is deprecated. Use createLayer"),this.createLayer(y,T,C,S)},createStaticLayer:function(y,T,C,S){return console.warn("createStaticLayer is deprecated. Use createLayer"),this.createLayer(y,T,C,S)},setRenderOrder:function(y){var T=["right-down","left-down","right-up","left-up"];return typeof y=="number"&&(y=T[y]),T.indexOf(y)>-1&&(this.renderOrder=y),this},addTilesetImage:function(y,T,C,S,E,M,O){if(y===void 0)return null;if(T==null&&(T=y),!this.scene.sys.textures.exists(T))return console.warn("Invalid Tileset Image: "+T),null;var L=this.scene.sys.textures.get(T),R=this.getTilesetIndex(y);if(R===null&&this.format===r.TILED_JSON)return console.warn("No data found for Tileset: "+y),null;var F=this.tilesets[R];return F?(F.setTileSize(C,S),F.setSpacing(E,M),F.setImage(L),F):(C===void 0&&(C=this.tileWidth),S===void 0&&(S=this.tileHeight),E===void 0&&(E=0),M===void 0&&(M=0),O===void 0&&(O=0),F=new m(y,O,C,S,E,M),F.setImage(L),this.tilesets.push(F),F)},copy:function(y,T,C,S,E,M,O,L){return L=this.getLayer(L),L!==null?(p.Copy(y,T,C,S,E,M,O,L),this):null},createBlankLayer:function(y,T,C,S,E,M,O,L){C===void 0&&(C=0),S===void 0&&(S=0),E===void 0&&(E=this.width),M===void 0&&(M=this.height),O===void 0&&(O=this.tileWidth),L===void 0&&(L=this.tileHeight);var R=this.getLayerIndex(y);if(R!==null)return console.warn("Invalid Tilemap Layer ID: "+y),null;for(var F=new l({name:y,tileWidth:O,tileHeight:L,width:E,height:M,orientation:this.orientation}),D,B=0;B<M;B++){D=[];for(var N=0;N<E;N++)D.push(new c(F,-1,N,B,O,L,this.tileWidth,this.tileHeight));F.data.push(D)}this.layers.push(F),this.currentLayerIndex=this.layers.length-1;var U=new g(this.scene,this,this.currentLayerIndex,T,C,S);return U.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(U),U},createLayer:function(y,T,C,S){var E=this.getLayerIndex(y);if(E===null)return console.warn("Invalid Tilemap Layer ID: "+y),typeof y=="string"&&console.warn(`Valid tilelayer names:
	`+this.getTileLayerNames().join(`,
	`)),null;var M=this.layers[E];if(M.tilemapLayer)return console.warn("Tilemap Layer ID already exists:"+y),null;this.currentLayerIndex=E,C===void 0&&(C=M.x),S===void 0&&(S=M.y);var O=new g(this.scene,this,E,T,C,S);return O.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(O),O},createFromObjects:function(y,T){var C=[],S=this.getObjectLayer(y);if(!S)return console.warn("createFromObjects: Invalid objectLayerName given: "+y),C;Array.isArray(T)||(T=[T]);for(var E=S.objects,M=0;M<T.length;M++){for(var O=T[M],L=a(O,"id",null),R=a(O,"gid",null),F=a(O,"name",null),D,B=[],N=0;N<E.length;N++)D=E[N],(L===null&&R===null&&F===null||L!==null&&D.id===L||R!==null&&D.gid===R||F!==null&&D.name===F)&&B.push(D);for(var U=a(O,"classType",d),X=a(O,"scene",this.scene),K=a(O,"container",null),k=a(O,"key",null),b=a(O,"frame",null),I=0;I<B.length;I++){D=B[I];var G=new U(X);G.setName(D.name),G.setPosition(D.x,D.y),G.setTexture(k,b),D.width&&(G.displayWidth=D.width),D.height&&(G.displayHeight=D.height);var Y={x:G.originX*D.width,y:(G.originY-1)*D.height};if(D.rotation){var V=h(D.rotation);u(Y,V),G.rotation=V}if(G.x+=Y.x,G.y+=Y.y,(D.flippedHorizontal!==void 0||D.flippedVertical!==void 0)&&G.setFlip(D.flippedHorizontal,D.flippedVertical),D.visible||(G.visible=!1),Array.isArray(D.properties))D.properties.forEach(function(H){var Z=H.name;G[Z]!==void 0?G[Z]=H.value:G.setData(Z,H.value)});else for(var W in D.properties)G[W]!==void 0?G[W]=D.properties[W]:G.setData(W,D.properties[W]);K?K.add(G):X.add.existing(G),C.push(G)}}return C},createFromTiles:function(y,T,C,S,E,M){return M=this.getLayer(M),M===null?null:p.CreateFromTiles(y,T,C,S,E,M)},fill:function(y,T,C,S,E,M,O){return M===void 0&&(M=!0),O=this.getLayer(O),O===null?null:(p.Fill(y,T,C,S,E,M,O),this)},filterObjects:function(y,T,C){if(typeof y=="string"){var S=y;if(y=this.getObjectLayer(y),!y)return console.warn("No object layer found with the name: "+S),null}return y.objects.filter(T,C)},filterTiles:function(y,T,C,S,E,M,O,L){return L=this.getLayer(L),L===null?null:p.FilterTiles(y,T,C,S,E,M,O,L)},findByIndex:function(y,T,C,S){return S=this.getLayer(S),S===null?null:p.FindByIndex(y,T,C,S)},findObject:function(y,T,C){if(typeof y=="string"){var S=y;if(y=this.getObjectLayer(y),!y)return console.warn("No object layer found with the name: "+S),null}return y.objects.find(T,C)||null},findTile:function(y,T,C,S,E,M,O,L){return L=this.getLayer(L),L===null?null:p.FindTile(y,T,C,S,E,M,O,L)},forEachTile:function(y,T,C,S,E,M,O,L){return L=this.getLayer(L),L===null?null:(p.ForEachTile(y,T,C,S,E,M,O,L),this)},getImageIndex:function(y){return this.getIndex(this.images,y)},getImageLayerNames:function(){return!this.images||!Array.isArray(this.images)?[]:this.images.map(function(y){return y.name})},getIndex:function(y,T){for(var C=0;C<y.length;C++)if(y[C].name===T)return C;return null},getLayer:function(y){var T=this.getLayerIndex(y);return T!==null?this.layers[T]:null},getObjectLayer:function(y){var T=this.getIndex(this.objects,y);return T!==null?this.objects[T]:null},getObjectLayerNames:function(){return!this.objects||!Array.isArray(this.objects)?[]:this.objects.map(function(y){return y.name})},getLayerIndex:function(y){return y===void 0?this.currentLayerIndex:typeof y=="string"?this.getLayerIndexByName(y):typeof y=="number"&&y<this.layers.length?y:y instanceof g?y.layerIndex:null},getLayerIndexByName:function(y){return this.getIndex(this.layers,y)},getTileAt:function(y,T,C,S){return S=this.getLayer(S),S===null?null:p.GetTileAt(y,T,C,S)},getTileAtWorldXY:function(y,T,C,S,E){return E=this.getLayer(E),E===null?null:p.GetTileAtWorldXY(y,T,C,S,E)},getTileLayerNames:function(){return!this.layers||!Array.isArray(this.layers)?[]:this.layers.map(function(y){return y.name})},getTilesWithin:function(y,T,C,S,E,M){return M=this.getLayer(M),M===null?null:p.GetTilesWithin(y,T,C,S,E,M)},getTilesWithinShape:function(y,T,C,S){return S=this.getLayer(S),S===null?null:p.GetTilesWithinShape(y,T,C,S)},getTilesWithinWorldXY:function(y,T,C,S,E,M,O){return O=this.getLayer(O),O===null?null:p.GetTilesWithinWorldXY(y,T,C,S,E,M,O)},getTileset:function(y){var T=this.getIndex(this.tilesets,y);return T!==null?this.tilesets[T]:null},getTilesetIndex:function(y){return this.getIndex(this.tilesets,y)},hasTileAt:function(y,T,C){return C=this.getLayer(C),C===null?null:p.HasTileAt(y,T,C)},hasTileAtWorldXY:function(y,T,C,S){return S=this.getLayer(S),S===null?null:p.HasTileAtWorldXY(y,T,C,S)},layer:{get:function(){return this.layers[this.currentLayerIndex]},set:function(y){this.setLayer(y)}},putTileAt:function(y,T,C,S,E){return S===void 0&&(S=!0),E=this.getLayer(E),E===null?null:p.PutTileAt(y,T,C,S,E)},putTileAtWorldXY:function(y,T,C,S,E,M){return S===void 0&&(S=!0),M=this.getLayer(M),M===null?null:p.PutTileAtWorldXY(y,T,C,S,E,M)},putTilesAt:function(y,T,C,S,E){return S===void 0&&(S=!0),E=this.getLayer(E),E===null?null:(p.PutTilesAt(y,T,C,S,E),this)},randomize:function(y,T,C,S,E,M){return M=this.getLayer(M),M===null?null:(p.Randomize(y,T,C,S,E,M),this)},calculateFacesAt:function(y,T,C){return C=this.getLayer(C),C===null?null:(p.CalculateFacesAt(y,T,C),this)},calculateFacesWithin:function(y,T,C,S,E){return E=this.getLayer(E),E===null?null:(p.CalculateFacesWithin(y,T,C,S,E),this)},removeLayer:function(y){var T=this.getLayerIndex(y);if(T!==null){v(this.layers,T);for(var C=T;C<this.layers.length;C++)this.layers[C].tilemapLayer&&this.layers[C].tilemapLayer.layerIndex--;return this.currentLayerIndex===T&&(this.currentLayerIndex=0),this}else return null},destroyLayer:function(y){var T=this.getLayerIndex(y);return T!==null?(y=this.layers[T],y.destroy(),v(this.layers,T),this.currentLayerIndex===T&&(this.currentLayerIndex=0),this):null},removeAllLayers:function(){for(var y=this.layers,T=0;T<y.length;T++)y[T].tilemapLayer&&y[T].tilemapLayer.destroy(!1);return y.length=0,this.currentLayerIndex=0,this},removeTile:function(y,T,C){T===void 0&&(T=-1),C===void 0&&(C=!0);var S=[];Array.isArray(y)||(y=[y]);for(var E=0;E<y.length;E++){var M=y[E];S.push(this.removeTileAt(M.x,M.y,!0,C,M.tilemapLayer)),T>-1&&this.putTileAt(T,M.x,M.y,C,M.tilemapLayer)}return S},removeTileAt:function(y,T,C,S,E){return C===void 0&&(C=!0),S===void 0&&(S=!0),E=this.getLayer(E),E===null?null:p.RemoveTileAt(y,T,C,S,E)},removeTileAtWorldXY:function(y,T,C,S,E,M){return C===void 0&&(C=!0),S===void 0&&(S=!0),M=this.getLayer(M),M===null?null:p.RemoveTileAtWorldXY(y,T,C,S,E,M)},renderDebug:function(y,T,C){return C=this.getLayer(C),C===null?null:(this.orientation===o.ORTHOGONAL&&p.RenderDebug(y,T,C),this)},renderDebugFull:function(y,T){for(var C=this.layers,S=0;S<C.length;S++)p.RenderDebug(y,T,C[S]);return this},replaceByIndex:function(y,T,C,S,E,M,O){return O=this.getLayer(O),O===null?null:(p.ReplaceByIndex(y,T,C,S,E,M,O),this)},setCollision:function(y,T,C,S,E){return T===void 0&&(T=!0),C===void 0&&(C=!0),E===void 0&&(E=!0),S=this.getLayer(S),S===null?null:(p.SetCollision(y,T,C,S,E),this)},setCollisionBetween:function(y,T,C,S,E){return C===void 0&&(C=!0),S===void 0&&(S=!0),E=this.getLayer(E),E===null?null:(p.SetCollisionBetween(y,T,C,S,E),this)},setCollisionByProperty:function(y,T,C,S){return T===void 0&&(T=!0),C===void 0&&(C=!0),S=this.getLayer(S),S===null?null:(p.SetCollisionByProperty(y,T,C,S),this)},setCollisionByExclusion:function(y,T,C,S){return T===void 0&&(T=!0),C===void 0&&(C=!0),S=this.getLayer(S),S===null?null:(p.SetCollisionByExclusion(y,T,C,S),this)},setCollisionFromCollisionGroup:function(y,T,C){return y===void 0&&(y=!0),T===void 0&&(T=!0),C=this.getLayer(C),C===null?null:(p.SetCollisionFromCollisionGroup(y,T,C),this)},setTileIndexCallback:function(y,T,C,S){return S=this.getLayer(S),S===null?null:(p.SetTileIndexCallback(y,T,C,S),this)},setTileLocationCallback:function(y,T,C,S,E,M,O){return O=this.getLayer(O),O===null?null:(p.SetTileLocationCallback(y,T,C,S,E,M,O),this)},setLayer:function(y){var T=this.getLayerIndex(y);return T!==null&&(this.currentLayerIndex=T),this},setBaseTileSize:function(y,T){this.tileWidth=y,this.tileHeight=T,this.widthInPixels=this.width*y,this.heightInPixels=this.height*T;for(var C=0;C<this.layers.length;C++){this.layers[C].baseTileWidth=y,this.layers[C].baseTileHeight=T;for(var S=this.layers[C].data,E=this.layers[C].width,M=this.layers[C].height,O=0;O<M;O++)for(var L=0;L<E;L++){var R=S[O][L];R!==null&&R.setSize(void 0,void 0,y,T)}}return this},setLayerTileSize:function(y,T,C){if(C=this.getLayer(C),C===null)return this;C.tileWidth=y,C.tileHeight=T;for(var S=C.data,E=C.width,M=C.height,O=0;O<M;O++)for(var L=0;L<E;L++){var R=S[O][L];R!==null&&R.setSize(y,T)}return this},shuffle:function(y,T,C,S,E){return E=this.getLayer(E),E===null?null:(p.Shuffle(y,T,C,S,E),this)},swapByIndex:function(y,T,C,S,E,M,O){return O=this.getLayer(O),O===null?null:(p.SwapByIndex(y,T,C,S,E,M,O),this)},tileToWorldX:function(y,T,C){return C=this.getLayer(C),C===null?null:this._convert.TileToWorldX(y,T,C)},tileToWorldY:function(y,T,C){return C=this.getLayer(C),C===null?null:this._convert.TileToWorldY(y,T,C)},tileToWorldXY:function(y,T,C,S,E){return E=this.getLayer(E),E===null?null:this._convert.TileToWorldXY(y,T,C,S,E)},weightedRandomize:function(y,T,C,S,E,M){return M=this.getLayer(M),M===null?null:(p.WeightedRandomize(T,C,S,E,y,M),this)},worldToTileX:function(y,T,C,S){return S=this.getLayer(S),S===null?null:this._convert.WorldToTileX(y,T,C,S)},worldToTileY:function(y,T,C,S){return S=this.getLayer(S),S===null?null:this._convert.WorldToTileY(y,T,C,S)},worldToTileXY:function(y,T,C,S,E,M){return M=this.getLayer(M),M===null?null:this._convert.WorldToTileXY(y,T,C,S,E,M)},destroy:function(){this.removeAllLayers(),this.tilesets.length=0,this.objects.length=0,this.scene=null}});e.exports=x},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(11),r=i(15),a=i(251),l=i(1456),o=new n({Extends:r,Mixins:[h.Alpha,h.BlendMode,h.ComputedSize,h.Depth,h.Flip,h.GetBounds,h.Origin,h.Pipeline,h.Transform,h.Visible,h.ScrollFactor,l],initialize:function(v,d,c,p,g,m){r.call(this,v,"TilemapLayer"),this.isTilemap=!0,this.tilemap=d,this.layerIndex=c,this.layer=d.layers[c],this.layer.tilemapLayer=this,this.tileset=[],this.tilesDrawn=0,this.tilesTotal=this.layer.width*this.layer.height,this.culledTiles=[],this.skipCull=!1,this.cullPaddingX=1,this.cullPaddingY=1,this.cullCallback=a.GetCullTilesFunction(this.layer.orientation),this._renderOrder=0,this.gidMap=[],this.setTilesets(p),this.setAlpha(this.layer.alpha),this.setPosition(g,m),this.setOrigin(),this.setSize(d.tileWidth*this.layer.width,d.tileHeight*this.layer.height),this.initPipeline()},setTilesets:function(u){var v=[],d=[],c=this.tilemap;Array.isArray(u)||(u=[u]);for(var p=0;p<u.length;p++){var g=u[p];if(typeof g=="string"&&(g=c.getTileset(g)),g){d.push(g);for(var m=g.firstgid,x=0;x<g.total;x++)v[m+x]=g}}this.gidMap=v,this.tileset=d},setRenderOrder:function(u){var v=["right-down","left-down","right-up","left-up"];return typeof u=="string"&&(u=v.indexOf(u)),u>=0&&u<4&&(this._renderOrder=u),this},calculateFacesAt:function(u,v){return a.CalculateFacesAt(u,v,this.layer),this},calculateFacesWithin:function(u,v,d,c){return a.CalculateFacesWithin(u,v,d,c,this.layer),this},createFromTiles:function(u,v,d,c,p){return a.CreateFromTiles(u,v,d,c,p,this.layer)},cull:function(u){return this.cullCallback(this.layer,u,this.culledTiles,this._renderOrder)},copy:function(u,v,d,c,p,g,m){return a.Copy(u,v,d,c,p,g,m,this.layer),this},fill:function(u,v,d,c,p,g){return a.Fill(u,v,d,c,p,g,this.layer),this},filterTiles:function(u,v,d,c,p,g,m){return a.FilterTiles(u,v,d,c,p,g,m,this.layer)},findByIndex:function(u,v,d){return a.FindByIndex(u,v,d,this.layer)},findTile:function(u,v,d,c,p,g,m){return a.FindTile(u,v,d,c,p,g,m,this.layer)},forEachTile:function(u,v,d,c,p,g,m){return a.ForEachTile(u,v,d,c,p,g,m,this.layer),this},getTileAt:function(u,v,d){return a.GetTileAt(u,v,d,this.layer)},getTileAtWorldXY:function(u,v,d,c){return a.GetTileAtWorldXY(u,v,d,c,this.layer)},getTilesWithin:function(u,v,d,c,p){return a.GetTilesWithin(u,v,d,c,p,this.layer)},getTilesWithinShape:function(u,v,d){return a.GetTilesWithinShape(u,v,d,this.layer)},getTilesWithinWorldXY:function(u,v,d,c,p,g){return a.GetTilesWithinWorldXY(u,v,d,c,p,g,this.layer)},hasTileAt:function(u,v){return a.HasTileAt(u,v,this.layer)},hasTileAtWorldXY:function(u,v,d){return a.HasTileAtWorldXY(u,v,d,this.layer)},putTileAt:function(u,v,d,c){return a.PutTileAt(u,v,d,c,this.layer)},putTileAtWorldXY:function(u,v,d,c,p){return a.PutTileAtWorldXY(u,v,d,c,p,this.layer)},putTilesAt:function(u,v,d,c){return a.PutTilesAt(u,v,d,c,this.layer),this},randomize:function(u,v,d,c,p){return a.Randomize(u,v,d,c,p,this.layer),this},removeTileAt:function(u,v,d,c){return a.RemoveTileAt(u,v,d,c,this.layer)},removeTileAtWorldXY:function(u,v,d,c,p){return a.RemoveTileAtWorldXY(u,v,d,c,p,this.layer)},renderDebug:function(u,v){return a.RenderDebug(u,v,this.layer),this},replaceByIndex:function(u,v,d,c,p,g){return a.ReplaceByIndex(u,v,d,c,p,g,this.layer),this},setSkipCull:function(u){return u===void 0&&(u=!0),this.skipCull=u,this},setCullPadding:function(u,v){return u===void 0&&(u=1),v===void 0&&(v=1),this.cullPaddingX=u,this.cullPaddingY=v,this},setCollision:function(u,v,d,c){return a.SetCollision(u,v,d,this.layer,c),this},setCollisionBetween:function(u,v,d,c){return a.SetCollisionBetween(u,v,d,c,this.layer),this},setCollisionByProperty:function(u,v,d){return a.SetCollisionByProperty(u,v,d,this.layer),this},setCollisionByExclusion:function(u,v,d){return a.SetCollisionByExclusion(u,v,d,this.layer),this},setCollisionFromCollisionGroup:function(u,v){return a.SetCollisionFromCollisionGroup(u,v,this.layer),this},setTileIndexCallback:function(u,v,d){return a.SetTileIndexCallback(u,v,d,this.layer),this},setTileLocationCallback:function(u,v,d,c,p,g){return a.SetTileLocationCallback(u,v,d,c,p,g,this.layer),this},shuffle:function(u,v,d,c){return a.Shuffle(u,v,d,c,this.layer),this},swapByIndex:function(u,v,d,c,p,g){return a.SwapByIndex(u,v,d,c,p,g,this.layer),this},tileToWorldX:function(u,v){return this.tilemap.tileToWorldX(u,v,this)},tileToWorldY:function(u,v){return this.tilemap.tileToWorldY(u,v,this)},tileToWorldXY:function(u,v,d,c){return this.tilemap.tileToWorldXY(u,v,d,c,this)},weightedRandomize:function(u,v,d,c,p){return a.WeightedRandomize(v,d,c,p,u,this.layer),this},worldToTileX:function(u,v,d){return this.tilemap.worldToTileX(u,v,d,this)},worldToTileY:function(u,v,d){return this.tilemap.worldToTileY(u,v,d,this)},worldToTileXY:function(u,v,d,c,p){return this.tilemap.worldToTileXY(u,v,d,c,p,this)},destroy:function(u){u===void 0&&(u=!0),this.tilemap&&(this.layer.tilemapLayer===this&&(this.layer.tilemapLayer=void 0),u&&this.tilemap.removeLayer(this),this.tilemap=void 0,this.layer=void 0,this.culledTiles.length=0,this.cullCallback=null,this.gidMap=[],this.tileset=[],r.prototype.destroy.call(this))}});e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(2),r=new n({initialize:function(l){this.delay=0,this.repeat=0,this.repeatCount=0,this.loop=!1,this.callback,this.callbackScope,this.args,this.timeScale=1,this.startAt=0,this.elapsed=0,this.paused=!1,this.hasDispatched=!1,this.reset(l)},reset:function(a){return this.delay=h(a,"delay",0),this.repeat=h(a,"repeat",0),this.loop=h(a,"loop",!1),this.callback=h(a,"callback",void 0),this.callbackScope=h(a,"callbackScope",this.callback),this.args=h(a,"args",[]),this.timeScale=h(a,"timeScale",1),this.startAt=h(a,"startAt",0),this.paused=h(a,"paused",!1),this.elapsed=this.startAt,this.hasDispatched=!1,this.repeatCount=this.repeat===-1||this.loop?999999999999:this.repeat,this},getProgress:function(){return this.elapsed/this.delay},getOverallProgress:function(){if(this.repeat>0){var a=this.delay+this.delay*this.repeat,l=this.elapsed+this.delay*(this.repeat-this.repeatCount);return l/a}else return this.getProgress()},getRepeatCount:function(){return this.repeatCount},getElapsed:function(){return this.elapsed},getElapsedSeconds:function(){return this.elapsed*.001},getRemaining:function(){return this.delay-this.elapsed},getRemainingSeconds:function(){return this.getRemaining()*.001},getOverallRemaining:function(){return this.delay*(1+this.repeatCount)-this.elapsed},getOverallRemainingSeconds:function(){return this.getOverallRemaining()*.001},remove:function(a){a===void 0&&(a=!1),this.elapsed=this.delay,this.hasDispatched=!a,this.repeatCount=0},destroy:function(){this.callback=void 0,this.callbackScope=void 0,this.args=[]}});e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1465),h=function(r){var a,l=[];if(r.hasOwnProperty("props"))for(a in r.props)a.substr(0,1)!=="_"&&l.push({key:a,value:r.props[a]});else for(a in r)n.indexOf(a)===-1&&a.substr(0,1)!=="_"&&l.push({key:a,value:r[a]});return l};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(6),h=function(r){var a=n(r,"tweens",null);return a===null?[]:(typeof a=="function"&&(a=a.call()),Array.isArray(a)||(a=[a]),a)};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(265),h=i(13),r=i(99),a=i(80),l=i(162),o=i(6),u=i(264),v=i(266),d=i(268),c=function(p,g,m){m===void 0&&(m=n);var x=o(g,"from",0),y=o(g,"to",1),T=[{value:x}],C=l(g,"delay",m.delay),S=l(g,"duration",m.duration),E=o(g,"easeParams",m.easeParams),M=a(o(g,"ease",m.ease),E),O=l(g,"hold",m.hold),L=l(g,"repeat",m.repeat),R=l(g,"repeatDelay",m.repeatDelay),F=r(g,"yoyo",m.yoyo),D=[],B=u("value",y),N=d(T[0],0,"value",B.getEnd,B.getStart,B.getActive,M,C,S,F,O,L,R,!1,!1);N.start=x,N.current=x,N.to=y,D.push(N);var U=new v(p,D,T);U.offset=h(g,"offset",null),U.completeDelay=h(g,"completeDelay",0),U.loop=Math.round(h(g,"loop",0)),U.loopDelay=Math.round(h(g,"loopDelay",0)),U.paused=r(g,"paused",!1),U.useFrames=r(g,"useFrames",!1);for(var X=o(g,"callbackScope",U),K=[U,null],k=v.TYPES,b=0;b<k.length;b++){var I=k[b],G=o(g,I,!1);if(G){var Y=o(g,I+"Scope",X),V=o(g,I+"Params",[]);U.setCallback(I,G,K.concat(V),Y)}}return U};e.exports=c},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(80),h=i(6),r=i(14),a=function(l,o){o===void 0&&(o={});var u,v=h(o,"start",0),d=h(o,"ease",null),c=h(o,"grid",null),p=h(o,"from",0),g=p==="first",m=p==="center",x=p==="last",y=typeof p=="number",T=Array.isArray(l),C=parseFloat(T?l[0]:l),S=T?parseFloat(l[1]):0,E=Math.max(C,S);if(T&&(v+=C),c){var M=c[0],O=c[1],L=0,R=0,F=0,D=0,B=[];x?(L=M-1,R=O-1):y?(L=p%M,R=Math.floor(p/M)):m&&(L=(M-1)/2,R=(O-1)/2);for(var N=r.MIN_SAFE_INTEGER,U=0;U<O;U++){B[U]=[];for(var X=0;X<M;X++){F=L-X,D=R-U;var K=Math.sqrt(F*F+D*D);K>N&&(N=K),B[U][X]=K}}}var k=d?n(d):null;return c?u=function(b,I,G,Y){var V=0,W=Y%M,H=Math.floor(Y/M);W>=0&&W<M&&H>=0&&H<O&&(V=B[H][W]);var Z;if(T){var q=S-C;k?Z=V/N*q*k(V/N):Z=V/N*q}else k?Z=V*C*k(V/N):Z=V*C;return Z+v}:u=function(b,I,G,Y,V){V--;var W;g?W=Y:m?W=Math.abs(V/2-Y):x?W=V-Y:y&&(W=Math.abs(p-Y));var H;if(T){var Z;m?Z=(S-C)/V*(W*2):Z=(S-C)/V*W,k?H=Z*k(W/V):H=Z}else k?H=V*E*k(W/V):H=W*C;return H+v},u};e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(77),h=i(265),r=i(13),a=i(99),l=i(80),o=i(162),u=i(263),v=i(584),d=i(6),c=i(588),p=i(163),g=function(m,x){var y=new c(m);y.completeDelay=r(x,"completeDelay",0),y.loop=Math.round(r(x,"loop",0)),y.loopDelay=Math.round(r(x,"loopDelay",0)),y.paused=a(x,"paused",!1),y.useFrames=a(x,"useFrames",!1);var T=d(x,"callbackScope",y),C=[y],S=d(x,"onStart",!1);if(S){var E=d(x,"onStartScope",T),M=d(x,"onStartParams",[]);y.setCallback("onStart",S,C.concat(M),E)}var O=d(x,"onUpdate",!1);if(O){var L=d(x,"onUpdateScope",T),R=d(x,"onUpdateParams",[]);y.setCallback("onUpdate",O,C.concat(R),L)}var F=d(x,"onLoop",!1);if(F){var D=d(x,"onLoopScope",T),B=d(x,"onLoopParams",[]);y.setCallback("onLoop",F,C.concat(B),D)}var N=d(x,"onYoyo",!1);if(N){var U=d(x,"onYoyoScope",T),X=d(x,"onYoyoParams",[]);y.setCallback("onYoyo",N,C.concat(null,X),U)}var K=d(x,"onComplete",!1);if(K){var k=d(x,"onCompleteScope",T),b=d(x,"onCompleteParams",[]);y.setCallback("onComplete",K,C.concat(b),k)}var I=v(x);if(I.length===0)return y.paused=!0,y;var G=n(h);G.targets=u(x);var Y=r(x,"totalDuration",0);Y>0?G.duration=Math.floor(Y/I.length):G.duration=o(x,"duration",G.duration),G.delay=o(x,"delay",G.delay),G.easeParams=d(x,"easeParams",G.easeParams),G.ease=l(d(x,"ease",G.ease),G.easeParams),G.hold=o(x,"hold",G.hold),G.repeat=o(x,"repeat",G.repeat),G.repeatDelay=o(x,"repeatDelay",G.repeatDelay),G.yoyo=a(x,"yoyo",G.yoyo),G.flipX=a(x,"flipX",G.flipX),G.flipY=a(x,"flipY",G.flipY);for(var V=0;V<I.length;V++)y.queue(p(y,I[V],G));return y};e.exports=g},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(9),r=i(267),a=i(163),l=i(100),o=new n({Extends:h,initialize:function(v){h.call(this),this.manager=v,this.isTimeline=!0,this.data=[],this.totalData=0,this.useFrames=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.completeDelay=0,this.countdown=0,this.state=l.PENDING_ADD,this._pausedState=l.PENDING_ADD,this.paused=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.callbacks={onComplete:null,onLoop:null,onStart:null,onUpdate:null,onYoyo:null},this.callbackScope},dispatchTimelineEvent:function(u,v){this.emit(u,this),v&&v.func.apply(v.scope,v.params)},setTimeScale:function(u){return this.timeScale=u,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return this.state===l.ACTIVE},add:function(u){return this.queue(a(this,u))},queue:function(u){return this.isPlaying()||(u.parent=this,u.parentIsTimeline=!0,this.data.push(u),this.totalData=this.data.length),this},hasOffset:function(u){return u.offset!==null},isOffsetAbsolute:function(u){return typeof u=="number"},isOffsetRelative:function(u){var v=typeof u;if(v==="string"){var d=u[0];if(d==="-"||d==="+")return!0}return!1},getRelativeOffset:function(u,v){var d=u[0],c=parseFloat(u.substr(2)),p=v;switch(d){case"+":p+=c;break;case"-":p-=c;break}return Math.max(0,p)},calcDuration:function(){for(var u=0,v=0,d=0,c=0;c<this.totalData;c++){var p=this.data[c];p.init(),this.hasOffset(p)?this.isOffsetAbsolute(p.offset)?(p.calculatedOffset=p.offset,p.offset===0&&(d=0)):this.isOffsetRelative(p.offset)&&(p.calculatedOffset=this.getRelativeOffset(p.offset,u)):p.calculatedOffset=d,u=p.totalDuration+p.calculatedOffset,v+=p.totalDuration,d+=p.totalDuration}this.duration=v,this.loopCounter=this.loop===-1?999999999999:this.loop,this.loopCounter>0?this.totalDuration=this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.totalDuration=this.duration+this.completeDelay},init:function(){return this.calcDuration(),this.progress=0,this.totalProgress=0,this.paused?(this.state=l.PAUSED,!1):!0},resetTweens:function(u){for(var v=0;v<this.totalData;v++){var d=this.data[v];d.play(u)}},setCallback:function(u,v,d,c){return o.TYPES.indexOf(u)!==-1&&(this.callbacks[u]={func:v,scope:c,params:d}),this},makeActive:function(u){return this.manager.makeActive(u)},play:function(){if(this.state!==l.ACTIVE){if(this.paused){this.paused=!1,this.manager.makeActive(this);return}else this.resetTweens(!1),this.state=l.ACTIVE;this.dispatchTimelineEvent(r.TIMELINE_START,this.callbacks.onStart)}},nextState:function(){this.loopCounter>0?(this.elapsed=0,this.progress=0,this.loopCounter--,this.resetTweens(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.state=l.LOOP_DELAY):(this.state=l.ACTIVE,this.dispatchTimelineEvent(r.TIMELINE_LOOP,this.callbacks.onLoop))):this.completeDelay>0?(this.state=l.COMPLETE_DELAY,this.countdown=this.completeDelay):(this.state=l.PENDING_REMOVE,this.dispatchTimelineEvent(r.TIMELINE_COMPLETE,this.callbacks.onComplete))},update:function(u,v){if(this.state!==l.PAUSED){switch(this.useFrames&&(v=1*this.manager.timeScale),v*=this.timeScale,this.elapsed+=v,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=v,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),this.state){case l.ACTIVE:for(var d=this.totalData,c=0;c<this.totalData;c++){var p=this.data[c];p.update(u,v)&&d--}this.dispatchTimelineEvent(r.TIMELINE_UPDATE,this.callbacks.onUpdate),d===0&&this.nextState();break;case l.LOOP_DELAY:this.countdown-=v,this.countdown<=0&&(this.state=l.ACTIVE,this.dispatchTimelineEvent(r.TIMELINE_LOOP,this.callbacks.onLoop));break;case l.COMPLETE_DELAY:this.countdown-=v,this.countdown<=0&&(this.state=l.PENDING_REMOVE,this.dispatchTimelineEvent(r.TIMELINE_COMPLETE,this.callbacks.onComplete));break}return this.state===l.PENDING_REMOVE}},stop:function(){this.state=l.PENDING_REMOVE},pause:function(){if(this.state!==l.PAUSED)return this.paused=!0,this._pausedState=this.state,this.state=l.PAUSED,this.emit(r.TIMELINE_PAUSE,this),this},resume:function(){return this.state===l.PAUSED&&(this.paused=!1,this.state=this._pausedState,this.emit(r.TIMELINE_RESUME,this)),this},hasTarget:function(u){for(var v=0;v<this.data.length;v++)if(this.data[v].hasTarget(u))return!0;return!1},destroy:function(){for(var u=0;u<this.data.length;u++)this.data[u].stop()}});o.TYPES=["onStart","onUpdate","onLoop","onComplete","onYoyo"],e.exports=o},function(e,f,i){/**
 * @author       Joachim Grill <joachim@codeandweb.com>
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2018 CodeAndWeb GmbH
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(86),h=i(41),r=i(32),a=i(2),l=i(64),o={parseBody:function(u,v,d,c){c===void 0&&(c={});for(var p=a(d,"fixtures",[]),g=[],m=0;m<p.length;m++)for(var x=this.parseFixture(p[m]),y=0;y<x.length;y++)g.push(x[y]);var T=r.clone(d,!0);r.extend(T,c,!0),delete T.fixtures,delete T.type;var C=h.create(T);return h.setParts(C,g),h.setPosition(C,{x:u,y:v}),C},parseFixture:function(u){var v=r.extend({},!1,u);delete v.circle,delete v.vertices;var d;if(u.circle){var c=a(u.circle,"x"),p=a(u.circle,"y"),g=a(u.circle,"radius");d=[n.circle(c,p,g,v)]}else u.vertices&&(d=this.parseVertices(u.vertices,v));return d},parseVertices:function(u,v){v===void 0&&(v={});for(var d=[],c=0;c<u.length;c++)l.clockwiseSort(u[c]),d.push(h.create(r.extend({position:l.centre(u[c]),vertices:u[c]},v)));return n.flagCoincidentParts(d)}};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(86),h=i(41),r={parseBody:function(a,l,o,u){u===void 0&&(u={});var v,d=o.vertices;if(d.length===1)u.vertices=d[0],v=h.create(u),n.flagCoincidentParts(v.parts);else{for(var c=[],p=0;p<d.length;p++){var g=h.create({vertices:d[p]});c.push(g)}n.flagCoincidentParts(c),u.parts=c,v=h.create(u)}return v.label=o.label,h.setPosition(v,{x:a,y:l}),v}};e.exports=r},function(e,f,i){var n={};e.exports=n;var h=i(118),r=i(128),a=i(32),l=i(41),o=i(86);(function(){n.stack=function(u,v,d,c,p,g,m){for(var x=h.create({label:"Stack"}),y=u,T=v,C,S=0,E=0;E<c;E++){for(var M=0,O=0;O<d;O++){var L=m(y,T,O,E,C,S);if(L){var R=L.bounds.max.y-L.bounds.min.y,F=L.bounds.max.x-L.bounds.min.x;R>M&&(M=R),l.translate(L,{x:F*.5,y:R*.5}),y=L.bounds.max.x+p,h.addBody(x,L),C=L,S+=1}else y+=p}T+=M+g,y=u}return x},n.chain=function(u,v,d,c,p,g){for(var m=u.bodies,x=1;x<m.length;x++){var y=m[x-1],T=m[x],C=y.bounds.max.y-y.bounds.min.y,S=y.bounds.max.x-y.bounds.min.x,E=T.bounds.max.y-T.bounds.min.y,M=T.bounds.max.x-T.bounds.min.x,O={bodyA:y,pointA:{x:S*v,y:C*d},bodyB:T,pointB:{x:M*c,y:E*p}},L=a.extend(O,g);h.addConstraint(u,r.create(L))}return u.label+=" Chain",u},n.mesh=function(u,v,d,c,p){var g=u.bodies,m,x,y,T,C;for(m=0;m<d;m++){for(x=1;x<v;x++)y=g[x-1+m*v],T=g[x+m*v],h.addConstraint(u,r.create(a.extend({bodyA:y,bodyB:T},p)));if(m>0)for(x=0;x<v;x++)y=g[x+(m-1)*v],T=g[x+m*v],h.addConstraint(u,r.create(a.extend({bodyA:y,bodyB:T},p))),c&&x>0&&(C=g[x-1+(m-1)*v],h.addConstraint(u,r.create(a.extend({bodyA:C,bodyB:T},p)))),c&&x<v-1&&(C=g[x+1+(m-1)*v],h.addConstraint(u,r.create(a.extend({bodyA:C,bodyB:T},p))))}return u.label+=" Mesh",u},n.pyramid=function(u,v,d,c,p,g,m){return n.stack(u,v,d,c,p,g,function(x,y,T,C,S,E){var M=Math.min(c,Math.ceil(d/2)),O=S?S.bounds.max.x-S.bounds.min.x:0;if(!(C>M)){C=M-C;var L=C,R=d-1-C;if(!(T<L||T>R)){E===1&&l.translate(S,{x:(T+(d%2===1?1:-1))*O,y:0});var F=S?T*O:0;return m(u+F+T*p,y,T,C,S,E)}}})},n.newtonsCradle=function(u,v,d,c,p){for(var g=h.create({label:"Newtons Cradle"}),m=0;m<d;m++){var x=1.9,y=o.circle(u+m*(c*x),v+p,c,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),T=r.create({pointA:{x:u+m*(c*x),y:v},bodyB:y});h.addBody(g,y),h.addConstraint(g,T)}return g},n.car=function(u,v,d,c,p){var g=l.nextGroup(!0),m=20,x=-d*.5+m,y=d*.5-m,T=0,C=h.create({label:"Car"}),S=o.rectangle(u,v,d,c,{collisionFilter:{group:g},chamfer:{radius:c*.5},density:2e-4}),E=o.circle(u+x,v+T,p,{collisionFilter:{group:g},friction:.8}),M=o.circle(u+y,v+T,p,{collisionFilter:{group:g},friction:.8}),O=r.create({bodyB:S,pointB:{x,y:T},bodyA:E,stiffness:1,length:0}),L=r.create({bodyB:S,pointB:{x:y,y:T},bodyA:M,stiffness:1,length:0});return h.addBody(C,S),h.addBody(C,E),h.addBody(C,M),h.addConstraint(C,O),h.addConstraint(C,L),C},n.softBody=function(u,v,d,c,p,g,m,x,y,T){y=a.extend({inertia:1/0},y),T=a.extend({stiffness:.2,render:{type:"line",anchors:!1}},T);var C=n.stack(u,v,d,c,p,g,function(S,E){return o.circle(S,E,x,y)});return n.mesh(C,d,c,m,T),C.label="Soft Body",C}})()},function(e,f,i){var n={};e.exports=n,i(84);var h=i(32);(function(){n.pathToVertices=function(r,a){typeof window!="undefined"&&!("SVGPathSeg"in window)&&h.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var l,o,u,v,d,c,p,g,m,x,y=[],T,C,S=0,E=0,M=0;a=a||15;var O=function(R,F,D){var B=D%2===1&&D>1;if(!m||R!=m.x||F!=m.y){m&&B?(T=m.x,C=m.y):(T=0,C=0);var N={x:T+R,y:C+F};(B||!m)&&(m=N),y.push(N),E=T+R,M=C+F}},L=function(R){var F=R.pathSegTypeAsLetter.toUpperCase();if(F!=="Z"){switch(F){case"M":case"L":case"T":case"C":case"S":case"Q":E=R.x,M=R.y;break;case"H":E=R.x;break;case"V":M=R.y;break}O(E,M,R.pathSegType)}};for(n._svgPathToAbsolute(r),u=r.getTotalLength(),c=[],l=0;l<r.pathSegList.numberOfItems;l+=1)c.push(r.pathSegList.getItem(l));for(p=c.concat();S<u;){if(x=r.getPathSegAtLength(S),d=c[x],d!=g){for(;p.length&&p[0]!=d;)L(p.shift());g=d}switch(d.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":v=r.getPointAtLength(S),O(v.x,v.y,0);break}S+=a}for(l=0,o=p.length;l<o;++l)L(p[l]);return y},n._svgPathToAbsolute=function(r){for(var a,l,o,u,v,d,c=r.pathSegList,p=0,g=0,m=c.numberOfItems,x=0;x<m;++x){var y=c.getItem(x),T=y.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(T))"x"in y&&(p=y.x),"y"in y&&(g=y.y);else switch("x1"in y&&(o=p+y.x1),"x2"in y&&(v=p+y.x2),"y1"in y&&(u=g+y.y1),"y2"in y&&(d=g+y.y2),"x"in y&&(p+=y.x),"y"in y&&(g+=y.y),T){case"m":c.replaceItem(r.createSVGPathSegMovetoAbs(p,g),x);break;case"l":c.replaceItem(r.createSVGPathSegLinetoAbs(p,g),x);break;case"h":c.replaceItem(r.createSVGPathSegLinetoHorizontalAbs(p),x);break;case"v":c.replaceItem(r.createSVGPathSegLinetoVerticalAbs(g),x);break;case"c":c.replaceItem(r.createSVGPathSegCurvetoCubicAbs(p,g,o,u,v,d),x);break;case"s":c.replaceItem(r.createSVGPathSegCurvetoCubicSmoothAbs(p,g,v,d),x);break;case"q":c.replaceItem(r.createSVGPathSegCurvetoQuadraticAbs(p,g,o,u),x);break;case"t":c.replaceItem(r.createSVGPathSegCurvetoQuadraticSmoothAbs(p,g),x);break;case"a":c.replaceItem(r.createSVGPathSegArcAbs(p,g,y.r1,y.r2,y.angle,y.largeArcFlag,y.sweepFlag),x);break;case"z":case"Z":p=a,g=l;break}(T=="M"||T=="m")&&(a=p,l=g)}}})()},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(86),h=i(41),r=i(0),a=i(249),l=i(9),o=i(2),u=i(126),v=i(64),d=new r({Extends:l,Mixins:[a.Bounce,a.Collision,a.Friction,a.Gravity,a.Mass,a.Sensor,a.Sleep,a.Static],initialize:function(p,g,m){l.call(this),this.tile=g,this.world=p,g.physics.matterBody&&g.physics.matterBody.destroy(),g.physics.matterBody=this;var x=o(m,"body",null),y=o(m,"addToWorld",!0);if(x)this.setBody(x,y);else{var T=g.getCollisionGroup(),C=o(T,"objects",[]);C.length>0?this.setFromTileCollision(m):this.setFromTileRectangle(m)}},setFromTileRectangle:function(c){c===void 0&&(c={}),u(c,"isStatic")||(c.isStatic=!0),u(c,"addToWorld")||(c.addToWorld=!0);var p=this.tile.getBounds(),g=p.x+p.width/2,m=p.y+p.height/2,x=n.rectangle(g,m,p.width,p.height,c);return this.setBody(x,c.addToWorld),this},setFromTileCollision:function(c){c===void 0&&(c={}),u(c,"isStatic")||(c.isStatic=!0),u(c,"addToWorld")||(c.addToWorld=!0);for(var p=this.tile.tilemapLayer.scaleX,g=this.tile.tilemapLayer.scaleY,m=this.tile.getLeft(),x=this.tile.getTop(),y=this.tile.getCollisionGroup(),T=o(y,"objects",[]),C=[],S=0;S<T.length;S++){var E=T[S],M=m+E.x*p,O=x+E.y*g,L=E.width*p,R=E.height*g,F=null;if(E.rectangle)F=n.rectangle(M+L/2,O+R/2,L,R,c);else if(E.ellipse)F=n.circle(M+L/2,O+R/2,L/2,c);else if(E.polygon||E.polyline){var D=E.polygon?E.polygon:E.polyline,B=D.map(function(X){return{x:X.x*p,y:X.y*g}}),N=v.create(B),U=v.centre(N);M+=U.x,O+=U.y,F=n.fromVertices(M,O,N,c)}F&&C.push(F)}return C.length===1?this.setBody(C[0],c.addToWorld):C.length>1&&(c.parts=C,this.setBody(h.create(c),c.addToWorld)),this},setBody:function(c,p){return p===void 0&&(p=!0),this.body&&this.removeBody(),this.body=c,this.body.gameObject=this,p&&this.world.add(this.body),this},removeBody:function(){return this.body&&(this.world.remove(this.body),this.body.gameObject=void 0,this.body=void 0),this},destroy:function(){this.removeBody(),this.tile.physics.matterBody=void 0,this.removeAllListeners()}});e.exports=d},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1399);n.Body=i(41),n.Composite=i(118),n.World=i(596),n.Detector=i(273),n.Grid=i(597),n.Pairs=i(598),n.Pair=i(250),n.Query=i(1400),n.Resolver=i(599),n.SAT=i(274),n.Constraint=i(128),n.Common=i(32),n.Engine=i(1401),n.Events=i(166),n.Sleeping=i(165),n.Plugin=i(595),n.Bodies=i(86),n.Composites=i(591),n.Axes=i(271),n.Bounds=i(84),n.Svg=i(592),n.Vector=i(83),n.Vertices=i(64),n.World.add=n.Composite.add,n.World.remove=n.Composite.remove,n.World.addComposite=n.Composite.addComposite,n.World.addBody=n.Composite.addBody,n.World.addConstraint=n.Composite.addConstraint,n.World.clear=n.Composite.clear,e.exports=n},function(e,f,i){var n={};e.exports=n;var h=i(32);(function(){n._registry={},n.register=function(r){if(n.isPlugin(r)||h.warn("Plugin.register:",n.toString(r),"does not implement all required fields."),r.name in n._registry){var a=n._registry[r.name],l=n.versionParse(r.version).number,o=n.versionParse(a.version).number;l>o?(h.warn("Plugin.register:",n.toString(a),"was upgraded to",n.toString(r)),n._registry[r.name]=r):l<o?h.warn("Plugin.register:",n.toString(a),"can not be downgraded to",n.toString(r)):r!==a&&h.warn("Plugin.register:",n.toString(r),"is already registered to different plugin object")}else n._registry[r.name]=r;return r},n.resolve=function(r){return n._registry[n.dependencyParse(r).name]},n.toString=function(r){return typeof r=="string"?r:(r.name||"anonymous")+"@"+(r.version||r.range||"0.0.0")},n.isPlugin=function(r){return r&&r.name&&r.version&&r.install},n.isUsed=function(r,a){return r.used.indexOf(a)>-1},n.isFor=function(r,a){var l=r.for&&n.dependencyParse(r.for);return!r.for||a.name===l.name&&n.versionSatisfies(a.version,l.range)},n.use=function(r,a){if(r.uses=(r.uses||[]).concat(a||[]),r.uses.length===0){h.warn("Plugin.use:",n.toString(r),"does not specify any dependencies to install.");return}for(var l=n.dependencies(r),o=h.topologicalSort(l),u=[],v=0;v<o.length;v+=1)if(o[v]!==r.name){var d=n.resolve(o[v]);if(!d){u.push("\u274C "+o[v]);continue}n.isUsed(r,d.name)||(n.isFor(d,r)||(h.warn("Plugin.use:",n.toString(d),"is for",d.for,"but installed on",n.toString(r)+"."),d._warned=!0),d.install?d.install(r):(h.warn("Plugin.use:",n.toString(d),"does not specify an install function."),d._warned=!0),d._warned?(u.push("\u{1F536} "+n.toString(d)),delete d._warned):u.push("\u2705 "+n.toString(d)),r.used.push(d.name))}u.length>0&&!d.silent&&h.info(u.join("  "))},n.dependencies=function(r,a){var l=n.dependencyParse(r),o=l.name;if(a=a||{},!(o in a)){r=n.resolve(r)||r,a[o]=h.map(r.uses||[],function(v){n.isPlugin(v)&&n.register(v);var d=n.dependencyParse(v),c=n.resolve(v);return c&&!n.versionSatisfies(c.version,d.range)?(h.warn("Plugin.dependencies:",n.toString(c),"does not satisfy",n.toString(d),"used by",n.toString(l)+"."),c._warned=!0,r._warned=!0):c||(h.warn("Plugin.dependencies:",n.toString(v),"used by",n.toString(l),"could not be resolved."),r._warned=!0),d.name});for(var u=0;u<a[o].length;u+=1)n.dependencies(a[o][u],a);return a}},n.dependencyParse=function(r){if(h.isString(r)){var a=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?))?$/;return a.test(r)||h.warn("Plugin.dependencyParse:",r,"is not a valid dependency string."),{name:r.split("@")[0],range:r.split("@")[1]||"*"}}return{name:r.name,range:r.range||r.version}},n.versionParse=function(r){var a=/^\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?$/;a.test(r)||h.warn("Plugin.versionParse:",r,"is not a valid version or range.");var l=r.split("-");r=l[0];var o=isNaN(Number(r[0])),u=o?r.substr(1):r,v=h.map(u.split("."),function(d){return Number(d)});return{isRange:o,version:u,range:r,operator:o?r[0]:"",parts:v,prerelease:l[1],number:v[0]*1e8+v[1]*1e4+v[2]}},n.versionSatisfies=function(r,a){a=a||"*";var l=n.versionParse(a),o=l.parts,u=n.versionParse(r),v=u.parts;if(l.isRange){if(l.operator==="*"||r==="*")return!0;if(l.operator==="~")return v[0]===o[0]&&v[1]===o[1]&&v[2]>=o[2];if(l.operator==="^")return o[0]>0?v[0]===o[0]&&u.number>=l.number:o[1]>0?v[1]===o[1]&&v[2]>=o[2]:v[2]===o[2]}return r===a||r==="*"}})()},function(e,f,i){var n={};e.exports=n;var h=i(118);i(128);var r=i(32);(function(){n.create=function(a){var l=h.create(),o={label:"World",gravity:{x:0,y:1,scale:.001},bounds:{min:{x:-1/0,y:-1/0},max:{x:1/0,y:1/0}}};return r.extend(l,o,a)}})()},function(e,f,i){var n={};e.exports=n;var h=i(250),r=i(273),a=i(32);(function(){n.create=function(l){var o={controller:n,detector:r.collisions,buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return a.extend(o,l)},n.update=function(l,o,u,v){var d,c,p,g=u.world,m=l.buckets,x,y,T=!1,C=u.metrics;for(C.broadphaseTests=0,d=0;d<o.length;d++){var S=o[d];if(!(S.isSleeping&&!v)&&!(S.bounds.max.x<g.bounds.min.x||S.bounds.min.x>g.bounds.max.x||S.bounds.max.y<g.bounds.min.y||S.bounds.min.y>g.bounds.max.y)){var E=n._getRegion(l,S);if(!S.region||E.id!==S.region.id||v){C.broadphaseTests+=1,(!S.region||v)&&(S.region=E);var M=n._regionUnion(E,S.region);for(c=M.startCol;c<=M.endCol;c++)for(p=M.startRow;p<=M.endRow;p++){y=n._getBucketId(c,p),x=m[y];var O=c>=E.startCol&&c<=E.endCol&&p>=E.startRow&&p<=E.endRow,L=c>=S.region.startCol&&c<=S.region.endCol&&p>=S.region.startRow&&p<=S.region.endRow;!O&&L&&L&&x&&n._bucketRemoveBody(l,x,S),(S.region===E||O&&!L||v)&&(x||(x=n._createBucket(m,y)),n._bucketAddBody(l,x,S))}S.region=E,T=!0}}}T&&(l.pairsList=n._createActivePairsList(l))},n.clear=function(l){l.buckets={},l.pairs={},l.pairsList=[]},n._regionUnion=function(l,o){var u=Math.min(l.startCol,o.startCol),v=Math.max(l.endCol,o.endCol),d=Math.min(l.startRow,o.startRow),c=Math.max(l.endRow,o.endRow);return n._createRegion(u,v,d,c)},n._getRegion=function(l,o){var u=o.bounds,v=Math.floor(u.min.x/l.bucketWidth),d=Math.floor(u.max.x/l.bucketWidth),c=Math.floor(u.min.y/l.bucketHeight),p=Math.floor(u.max.y/l.bucketHeight);return n._createRegion(v,d,c,p)},n._createRegion=function(l,o,u,v){return{id:l+","+o+","+u+","+v,startCol:l,endCol:o,startRow:u,endRow:v}},n._getBucketId=function(l,o){return"C"+l+"R"+o},n._createBucket=function(l,o){var u=l[o]=[];return u},n._bucketAddBody=function(l,o,u){for(var v=0;v<o.length;v++){var d=o[v];if(!(u.id===d.id||u.isStatic&&d.isStatic)){var c=h.id(u,d),p=l.pairs[c];p?p[2]+=1:l.pairs[c]=[u,d,1]}}o.push(u)},n._bucketRemoveBody=function(l,o,u){o.splice(o.indexOf(u),1);for(var v=0;v<o.length;v++){var d=o[v],c=h.id(u,d),p=l.pairs[c];p&&(p[2]-=1)}},n._createActivePairsList=function(l){var o,u,v=[];o=a.keys(l.pairs);for(var d=0;d<o.length;d++)u=l.pairs[o[d]],u[2]>0?v.push(u):delete l.pairs[o[d]];return v}})()},function(e,f,i){var n={};e.exports=n;var h=i(250),r=i(32);(function(){n._pairMaxIdleLife=1e3,n.create=function(a){return r.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},a)},n.update=function(a,l,o){var u=a.list,v=a.table,d=a.collisionStart,c=a.collisionEnd,p=a.collisionActive,g,m,x,y;for(d.length=0,c.length=0,p.length=0,y=0;y<u.length;y++)u[y].confirmedActive=!1;for(y=0;y<l.length;y++)g=l[y],g.collided&&(m=h.id(g.bodyA,g.bodyB),x=v[m],x?(x.isActive?p.push(x):d.push(x),h.update(x,g,o),x.confirmedActive=!0):(x=h.create(g,o),v[m]=x,d.push(x),u.push(x)));for(y=0;y<u.length;y++)x=u[y],x.isActive&&!x.confirmedActive&&(h.setActive(x,!1,o),c.push(x))},n.removeOld=function(a,l){var o=a.list,u=a.table,v=[],d,c,p,g;for(g=0;g<o.length;g++){if(d=o[g],c=d.collision,c.bodyA.isSleeping||c.bodyB.isSleeping){d.timeUpdated=l;continue}l-d.timeUpdated>n._pairMaxIdleLife&&v.push(g)}for(g=0;g<v.length;g++)p=v[g]-g,d=o[p],delete u[d.id],o.splice(p,1)},n.clear=function(a){return a.table={},a.list.length=0,a.collisionStart.length=0,a.collisionActive.length=0,a.collisionEnd.length=0,a}})()},function(e,f,i){var n={};e.exports=n;var h=i(64),r=i(83),a=i(32),l=i(84);(function(){n._restingThresh=4,n._restingThreshTangent=6,n._positionDampen=.9,n._positionWarming=.8,n._frictionNormalMultiplier=5,n.preSolvePosition=function(o){var u,v,d;for(u=0;u<o.length;u++)v=o[u],v.isActive&&(d=v.activeContacts.length,v.collision.parentA.totalContacts+=d,v.collision.parentB.totalContacts+=d)},n.solvePosition=function(o,u,v){var d,c,p,g,m,x,y,T,C,S,E,M,O,L,R,F,D=v*n._positionDampen;for(d=0;d<u.length;d++){var B=u[d];B.previousPositionImpulse.x=B.positionImpulse.x,B.previousPositionImpulse.y=B.positionImpulse.y}for(d=0;d<o.length;d++)g=o[d],!(!g.isActive||g.isSensor)&&(m=g.collision,x=m.parentA,y=m.parentB,T=m.normal,E=x.previousPositionImpulse,M=y.previousPositionImpulse,S=m.penetration,L=M.x-E.x+S.x,R=M.y-E.y+S.y,c=T.x,p=T.y,C=c*L+p*R,g.separation=C,F=(C-g.slop)*D,(x.isStatic||y.isStatic)&&(F*=2),x.isStatic||x.isSleeping||(O=F/x.totalContacts,x.positionImpulse.x+=c*O,x.positionImpulse.y+=p*O),y.isStatic||y.isSleeping||(O=F/y.totalContacts,y.positionImpulse.x-=c*O,y.positionImpulse.y-=p*O))},n.postSolvePosition=function(o){for(var u=0;u<o.length;u++){var v=o[u];if(v.totalContacts=0,v.positionImpulse.x!==0||v.positionImpulse.y!==0){for(var d=0;d<v.parts.length;d++){var c=v.parts[d];h.translate(c.vertices,v.positionImpulse),l.update(c.bounds,c.vertices,v.velocity),c.position.x+=v.positionImpulse.x,c.position.y+=v.positionImpulse.y}v.positionPrev.x+=v.positionImpulse.x,v.positionPrev.y+=v.positionImpulse.y,r.dot(v.positionImpulse,v.velocity)<0?(v.positionImpulse.x=0,v.positionImpulse.y=0):(v.positionImpulse.x*=n._positionWarming,v.positionImpulse.y*=n._positionWarming)}}},n.preSolveVelocity=function(o){var u,v,d,c,p,g,m,x,y,T,C,S,E,M,O=r._temp[0],L=r._temp[1];for(u=0;u<o.length;u++)if(d=o[u],!(!d.isActive||d.isSensor))for(c=d.activeContacts,p=d.collision,g=p.parentA,m=p.parentB,x=p.normal,y=p.tangent,v=0;v<c.length;v++)T=c[v],C=T.vertex,S=T.normalImpulse,E=T.tangentImpulse,(S!==0||E!==0)&&(O.x=x.x*S+y.x*E,O.y=x.y*S+y.y*E,g.isStatic||g.isSleeping||(M=r.sub(C,g.position,L),g.positionPrev.x+=O.x*g.inverseMass,g.positionPrev.y+=O.y*g.inverseMass,g.anglePrev+=r.cross(M,O)*g.inverseInertia),m.isStatic||m.isSleeping||(M=r.sub(C,m.position,L),m.positionPrev.x-=O.x*m.inverseMass,m.positionPrev.y-=O.y*m.inverseMass,m.anglePrev-=r.cross(M,O)*m.inverseInertia))},n.solveVelocity=function(o,u){for(var v=u*u,d=r._temp[0],c=r._temp[1],p=r._temp[2],g=r._temp[3],m=r._temp[4],x=r._temp[5],y=0;y<o.length;y++){var T=o[y];if(!(!T.isActive||T.isSensor)){var C=T.collision,S=C.parentA,E=C.parentB,M=C.normal,O=C.tangent,L=T.activeContacts,R=1/L.length;S.velocity.x=S.position.x-S.positionPrev.x,S.velocity.y=S.position.y-S.positionPrev.y,E.velocity.x=E.position.x-E.positionPrev.x,E.velocity.y=E.position.y-E.positionPrev.y,S.angularVelocity=S.angle-S.anglePrev,E.angularVelocity=E.angle-E.anglePrev;for(var F=0;F<L.length;F++){var D=L[F],B=D.vertex,N=r.sub(B,S.position,c),U=r.sub(B,E.position,p),X=r.add(S.velocity,r.mult(r.perp(N),S.angularVelocity),g),K=r.add(E.velocity,r.mult(r.perp(U),E.angularVelocity),m),k=r.sub(X,K,x),b=r.dot(M,k),I=r.dot(O,k),G=Math.abs(I),Y=a.sign(I),V=(1+T.restitution)*b,W=a.clamp(T.separation+b,0,1)*n._frictionNormalMultiplier,H=I,Z=1/0;G>T.friction*T.frictionStatic*W*v&&(Z=G,H=a.clamp(T.friction*Y*v,-Z,Z));var q=r.cross(N,M),_=r.cross(U,M),nt=R/(S.inverseMass+E.inverseMass+S.inverseInertia*q*q+E.inverseInertia*_*_);if(V*=nt,H*=nt,b<0&&b*b>n._restingThresh*v)D.normalImpulse=0;else{var rt=D.normalImpulse;D.normalImpulse=Math.min(D.normalImpulse+V,0),V=D.normalImpulse-rt}if(I*I>n._restingThreshTangent*v)D.tangentImpulse=0;else{var at=D.tangentImpulse;D.tangentImpulse=a.clamp(D.tangentImpulse+H,-Z,Z),H=D.tangentImpulse-at}d.x=M.x*V+O.x*H,d.y=M.y*V+O.y*H,S.isStatic||S.isSleeping||(S.positionPrev.x+=d.x*S.inverseMass,S.positionPrev.y+=d.y*S.inverseMass,S.anglePrev+=r.cross(N,d)*S.inverseInertia),E.isStatic||E.isSleeping||(E.positionPrev.x-=d.x*E.inverseMass,E.positionPrev.y-=d.y*E.inverseMass,E.anglePrev-=r.cross(U,d)*E.inverseInertia)}}}}})()},function(e,f){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch{typeof window=="object"&&(i=window)}e.exports=i},function(e,f,i){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(276),h=function(r,a,l,o){for(var u=r[0],v=1;v<r.length;v++){var d=r[v];n(d,u,a,l,o),u=d}return r};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(46),h=function(r,a,l,o,u){return n(r,"angle",a,l,o,u)};e.exports=h},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r){for(var a=0;a<n.length;a++){var l=n[a];h.call(r,l)}return n};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r){r===void 0&&(r=0);for(var a=r;a<n.length;a++){var l=n[a],o=!0;for(var u in h)l[u]!==h[u]&&(o=!1);if(o)return l}return null};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r){r===void 0&&(r=0);for(var a=r;a<n.length;a++){var l=n[a],o=!0;for(var u in h)l[u]!==h[u]&&(o=!1);if(o)return l}return null};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(289),h=i(123),r=i(2),a=i(1),l=i(129),o=new l({sys:{queueDepthSort:a,events:{once:a}}},0,0,1,1),u=function(v,d){d===void 0&&(d={});var c=d.hasOwnProperty("width"),p=d.hasOwnProperty("height"),g=r(d,"width",-1),m=r(d,"height",-1),x=r(d,"cellWidth",1),y=r(d,"cellHeight",x),T=r(d,"position",h.TOP_LEFT),C=r(d,"x",0),S=r(d,"y",0),E=0,M=0,O=g*x,L=m*y;o.setPosition(C,S),o.setSize(x,y);for(var R=0;R<v.length;R++)if(n(v[R],o,T),c&&g===-1)o.x+=x;else if(p&&m===-1)o.y+=y;else if(p&&!c){if(M+=y,o.y+=y,M===L&&(M=0,E+=x,o.y=S,o.x+=x,E===O))break}else if(E+=x,o.x+=x,E===O&&(E=0,M+=y,o.x=C,o.y+=y,M===L))break;return v};e.exports=u},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(18),h=2,r={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(a,l,o,u){return a===void 0&&(a=1),l===void 0?this.alpha=a:(this._alphaTL=n(a,0,1),this._alphaTR=n(l,0,1),this._alphaBL=n(o,0,1),this._alphaBR=n(u,0,1)),this},alpha:{get:function(){return this._alpha},set:function(a){var l=n(a,0,1);this._alpha=l,this._alphaTL=l,this._alphaTR=l,this._alphaBL=l,this._alphaBR=l,l===0?this.renderFlags&=~h:this.renderFlags|=h}},alphaTopLeft:{get:function(){return this._alphaTL},set:function(a){var l=n(a,0,1);this._alphaTL=l,l!==0&&(this.renderFlags|=h)}},alphaTopRight:{get:function(){return this._alphaTR},set:function(a){var l=n(a,0,1);this._alphaTR=l,l!==0&&(this.renderFlags|=h)}},alphaBottomLeft:{get:function(){return this._alphaBL},set:function(a){var l=n(a,0,1);this._alphaBL=l,l!==0&&(this.renderFlags|=h)}},alphaBottomRight:{get:function(){return this._alphaBR},set:function(a){var l=n(a,0,1);this._alphaBR=l,l!==0&&(this.renderFlags|=h)}}};e.exports=r},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.width},set:function(n){this.scaleX=n/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(n){this.scaleY=n/this.height}},setSize:function(n,h){return this.width=n,this.height=h,this},setDisplaySize:function(n,h){return this.displayWidth=n,this.displayHeight=h,this}};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={texture:null,frame:null,isCropped:!1,setCrop:function(n,h,r,a){if(n===void 0)this.isCropped=!1;else if(this.frame){if(typeof n=="number")this.frame.setCropUVs(this._crop,n,h,r,a,this.flipX,this.flipY);else{var l=n;this.frame.setCropUVs(this._crop,l.x,l.y,l.width,l.height,this.flipX,this.flipY)}this.isCropped=!0}return this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={flipX:!1,flipY:!1,toggleFlipX:function(){return this.flipX=!this.flipX,this},toggleFlipY:function(){return this.flipY=!this.flipY,this},setFlipX:function(n){return this.flipX=n,this},setFlipY:function(n){return this.flipY=n,this},setFlip:function(n,h){return this.flipX=n,this.flipY=h,this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this}};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(10),h=i(308),r=i(3),a={prepareBoundsOutput:function(l,o){if(o===void 0&&(o=!1),this.rotation!==0&&h(l,this.x,this.y,this.rotation),o&&this.parentContainer){var u=this.parentContainer.getBoundsTransformMatrix();u.transformPoint(l.x,l.y,l)}return l},getCenter:function(l){return l===void 0&&(l=new r),l.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,l.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,l},getTopLeft:function(l,o){return l||(l=new r),l.x=this.x-this.displayWidth*this.originX,l.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(l,o)},getTopCenter:function(l,o){return l||(l=new r),l.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,l.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(l,o)},getTopRight:function(l,o){return l||(l=new r),l.x=this.x-this.displayWidth*this.originX+this.displayWidth,l.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(l,o)},getLeftCenter:function(l,o){return l||(l=new r),l.x=this.x-this.displayWidth*this.originX,l.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(l,o)},getRightCenter:function(l,o){return l||(l=new r),l.x=this.x-this.displayWidth*this.originX+this.displayWidth,l.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(l,o)},getBottomLeft:function(l,o){return l||(l=new r),l.x=this.x-this.displayWidth*this.originX,l.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(l,o)},getBottomCenter:function(l,o){return l||(l=new r),l.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,l.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(l,o)},getBottomRight:function(l,o){return l||(l=new r),l.x=this.x-this.displayWidth*this.originX+this.displayWidth,l.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(l,o)},getBounds:function(l){l===void 0&&(l=new n);var o,u,v,d,c,p,g,m;if(this.parentContainer){var x=this.parentContainer.getBoundsTransformMatrix();this.getTopLeft(l),x.transformPoint(l.x,l.y,l),o=l.x,u=l.y,this.getTopRight(l),x.transformPoint(l.x,l.y,l),v=l.x,d=l.y,this.getBottomLeft(l),x.transformPoint(l.x,l.y,l),c=l.x,p=l.y,this.getBottomRight(l),x.transformPoint(l.x,l.y,l),g=l.x,m=l.y}else this.getTopLeft(l),o=l.x,u=l.y,this.getTopRight(l),v=l.x,d=l.y,this.getBottomLeft(l),c=l.x,p=l.y,this.getBottomRight(l),g=l.x,m=l.y;return l.x=Math.min(o,v,c,g),l.y=Math.min(u,d,p,m),l.width=Math.max(o,v,c,g)-l.x,l.height=Math.max(u,d,p,m)-l.y,l}};e.exports=a},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="blur"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="boot"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="contextlost"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="contextrestored"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="destroy"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="focus"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="hidden"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pause"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="postrender"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="poststep"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="prerender"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="prestep"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="ready"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="resume"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="step"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="visible"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="postrender"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="prerender"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="render"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="resize"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function(){return this._displayOriginX},set:function(n){this._displayOriginX=n,this.originX=n/this.width}},displayOriginY:{get:function(){return this._displayOriginY},set:function(n){this._displayOriginY=n,this.originY=n/this.height}},setOrigin:function(n,h){return n===void 0&&(n=.5),h===void 0&&(h=n),this.originX=n,this.originY=h,this.updateDisplayOrigin()},setOriginFromFrame:function(){return!this.frame||!this.frame.customPivot?this.setOrigin():(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin())},setDisplayOrigin:function(n,h){return n===void 0&&(n=0),h===void 0&&(h=n),this.displayOriginX=n,this.displayOriginY=h,this},updateDisplayOrigin:function(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this}};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(36),h=i(99),r=i(6),a=i(100),l=i(3),o={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathDelta:null,pathTween:null,pathConfig:null,_prevDirection:a.PLAYING_FORWARD,setPath:function(u,v){v===void 0&&(v=this.pathConfig);var d=this.pathTween;return d&&d.isPlaying()&&d.stop(),this.path=u,v&&this.startFollow(v),this},setRotateToPath:function(u,v){return v===void 0&&(v=0),this.rotateToPath=u,this.pathRotationOffset=v,this},isFollowing:function(){var u=this.pathTween;return u&&u.isPlaying()},startFollow:function(u,v){u===void 0&&(u={}),v===void 0&&(v=0);var d=this.pathTween;d&&d.isPlaying()&&d.stop(),typeof u=="number"&&(u={duration:u}),u.from=r(u,"from",0),u.to=r(u,"to",1);var c=h(u,"positionOnPath",!1);this.rotateToPath=h(u,"rotateToPath",!1),this.pathRotationOffset=r(u,"rotationOffset",0);var p=r(u,"startAt",v);if(p&&(u.onStart=function(m){var x=m.data[0];x.progress=p,x.elapsed=x.duration*p;var y=x.ease(x.progress);x.current=x.start+(x.end-x.start)*y,x.target[x.key]=x.current}),this.pathOffset||(this.pathOffset=new l(this.x,this.y)),this.pathVector||(this.pathVector=new l),this.pathDelta||(this.pathDelta=new l),this.pathDelta.reset(),this.pathTween=this.scene.sys.tweens.addCounter(u),this.path.getStartPoint(this.pathOffset),c&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=a.PLAYING_FORWARD,this.rotateToPath){var g=this.path.getPoint(.1);this.rotation=Math.atan2(g.y-this.y,g.x-this.x)+n(this.pathRotationOffset)}return this.pathConfig=u,this},pauseFollow:function(){var u=this.pathTween;return u&&u.isPlaying()&&u.pause(),this},resumeFollow:function(){var u=this.pathTween;return u&&u.isPaused()&&u.resume(),this},stopFollow:function(){var u=this.pathTween;return u&&u.isPlaying()&&u.stop(),this},pathUpdate:function(){var u=this.pathTween;if(u){var v=u.data[0],d=this.pathDelta,c=this.pathVector;if(d.copy(c).negate(),v.state===a.COMPLETE){this.path.getPoint(1,c),d.add(c),c.add(this.pathOffset),this.setPosition(c.x,c.y);return}else if(v.state!==a.PLAYING_FORWARD&&v.state!==a.PLAYING_BACKWARD)return;this.path.getPoint(u.getValue(),c),d.add(c),c.add(this.pathOffset);var p=this.x,g=this.y;this.setPosition(c.x,c.y);var m=this.x-p,x=this.y-g;if(m===0&&x===0)return;if(v.state!==this._prevDirection){this._prevDirection=v.state;return}this.rotateToPath&&(this.rotation=Math.atan2(x,m)+n(this.pathRotationOffset))}}};e.exports=o},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function(n){this.scaleX=n/this.frame.realWidth}},displayHeight:{get:function(){return Math.abs(this.scaleY*this.frame.realHeight)},set:function(n){this.scaleY=n/this.frame.realHeight}},setSizeToFrame:function(n){return n===void 0&&(n=this.frame),this.width=n.realWidth,this.height=n.realHeight,this},setSize:function(n,h){return this.width=n,this.height=h,this},setDisplaySize:function(n,h){return this.displayWidth=n,this.displayHeight=h,this}};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=8,n={texture:null,frame:null,isCropped:!1,setTexture:function(h,r){return this.texture=this.scene.sys.textures.get(h),this.setFrame(r)},setFrame:function(h,r,a){return r===void 0&&(r=!0),a===void 0&&(a=!0),this.frame=this.texture.get(h),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~i:this.renderFlags|=i,this._sizeComponent&&r&&this.setSizeToFrame(),this._originComponent&&a&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}};e.exports=n},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=8,n={texture:null,frame:null,isCropped:!1,setCrop:function(h,r,a,l){if(h===void 0)this.isCropped=!1;else if(this.frame){if(typeof h=="number")this.frame.setCropUVs(this._crop,h,r,a,l,this.flipX,this.flipY);else{var o=h;this.frame.setCropUVs(this._crop,o.x,o.y,o.width,o.height,this.flipX,this.flipY)}this.isCropped=!0}return this},setTexture:function(h,r){return this.texture=this.scene.sys.textures.get(h),this.setFrame(r)},setFrame:function(h,r,a){return r===void 0&&(r=!0),a===void 0&&(a=!0),this.frame=this.texture.get(h),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~i:this.renderFlags|=i,this._sizeComponent&&r&&this.setSizeToFrame(),this._originComponent&&a&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};e.exports=n},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={tintTopLeft:16777215,tintTopRight:16777215,tintBottomLeft:16777215,tintBottomRight:16777215,tintFill:!1,clearTint:function(){return this.setTint(16777215),this},setTint:function(n,h,r,a){return n===void 0&&(n=16777215),h===void 0&&(h=n,r=n,a=n),this.tintTopLeft=n,this.tintTopRight=h,this.tintBottomLeft=r,this.tintBottomRight=a,this.tintFill=!1,this},setTintFill:function(n,h,r,a){return this.setTint(n,h,r,a),this.tintFill=!0,this},tint:{set:function(n){this.setTint(n,n,n,n)}},isTinted:{get:function(){var n=16777215;return this.tintFill||this.tintTopLeft!==n||this.tintTopRight!==n||this.tintBottomLeft!==n||this.tintBottomRight!==n}}};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="changedata"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="changedata-"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="destroy"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="removedata"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="setdata"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="addedtoscene"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="destroy"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="removedfromscene"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="complete"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="created"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="error"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="loop"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="play"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="seeked"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="seeking"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="stop"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="timeout"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="unlocked"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="addedtoscene"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="boot"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="create"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="destroy"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pause"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="postupdate"},function(e,f){/**
 * @author       samme
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="prerender"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="preupdate"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="ready"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="removedfromscene"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="render"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="resume"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="shutdown"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="sleep"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="start"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="transitioncomplete"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="transitioninit"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="transitionout"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="transitionstart"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="transitionwake"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="update"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="wake"},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(46),h=function(r,a,l,o,u){return n(r,"alpha",a,l,o,u)};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(46),h=function(r,a,l,o,u){return n(r,"x",a,l,o,u)};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(46),h=function(r,a,l,o,u,v,d){return l==null&&(l=a),n(r,"x",a,o,v,d),n(r,"y",l,u,v,d)};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(46),h=function(r,a,l,o,u){return n(r,"y",a,l,o,u)};e.exports=h},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r,a){r===void 0&&(r=0),a===void 0&&(a=6.28);for(var l=r,o=(a-r)/n.length,u=0;u<n.length;u++)n[u].x=h.x+h.radius*Math.cos(l),n[u].y=h.y+h.radius*Math.sin(l),l+=o;return n};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r,a){r===void 0&&(r=0),a===void 0&&(a=6.28);for(var l=r,o=(a-r)/n.length,u=h.width/2,v=h.height/2,d=0;d<n.length;d++)n[d].x=h.x+u*Math.cos(l),n[d].y=h.y+v*Math.sin(l),l+=o;return n};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(172),h=function(r,a){for(var l=n(a,r.length),o=0;o<r.length;o++){var u=r[o],v=l[o];u.x=v.x,u.y=v.y}return r};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(316),h=i(178),r=i(179),a=function(l,o,u){u===void 0&&(u=0);var v=n(o,!1,l.length);u>0?h(v,u):u<0&&r(v,Math.abs(u));for(var d=0;d<l.length;d++)l[d].x=v[d].x,l[d].y=v[d].y;return l};e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(317),h=function(r,a,l){var o=n({x1:a.x1,y1:a.y1,x2:a.x2,y2:a.y2},l),u=n({x1:a.x2,y1:a.y2,x2:a.x3,y2:a.y3},l),v=n({x1:a.x3,y1:a.y3,x2:a.x1,y2:a.y1},l);o.pop(),u.pop(),v.pop(),o=o.concat(u,v);for(var d=o.length/r.length,c=0,p=0;p<r.length;p++){var g=r[p],m=o[Math.floor(c)];g.x=m.x,g.y=m.y,c+=d}return r};e.exports=h},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r){for(var a=0;a<n.length;a++){var l=n[a];l.anims&&l.anims.play(h,r)}return n};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(170),h=function(r,a){for(var l=0;l<r.length;l++)n(a,r[l]);return r};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(180),h=function(r,a){for(var l=0;l<r.length;l++)n(a,r[l]);return r};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(173),h=function(r,a){for(var l=0;l<r.length;l++)n(a,r[l]);return r};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(174),h=function(r,a){for(var l=0;l<r.length;l++)n(a,r[l]);return r};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(181),h=function(r,a){for(var l=0;l<r.length;l++)n(a,r[l]);return r};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(46),h=function(r,a,l,o,u){return n(r,"rotation",a,l,o,u)};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(182),h=i(50),r=function(a,l,o){for(var u=l.x,v=l.y,d=0;d<a.length;d++){var c=a[d];n(c,u,v,o,Math.max(1,h(c.x,c.y,u,v)))}return a};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(182),h=function(r,a,l,o){var u=a.x,v=a.y;if(o===0)return r;for(var d=0;d<r.length;d++)n(r[d],u,v,l,o);return r};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(46),h=function(r,a,l,o,u){return n(r,"scaleX",a,l,o,u)};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(46),h=function(r,a,l,o,u,v,d){return l==null&&(l=a),n(r,"scaleX",a,o,v,d),n(r,"scaleY",l,u,v,d)};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(46),h=function(r,a,l,o,u){return n(r,"scaleY",a,l,o,u)};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(27),h=function(r,a,l,o,u){return n(r,"alpha",a,l,o,u)};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(27),h=function(r,a,l,o){return n(r,"blendMode",a,0,l,o)};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(27),h=function(r,a,l,o,u){return n(r,"depth",a,l,o,u)};e.exports=h},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r){for(var a=0;a<n.length;a++)n[a].setInteractive(h,r);return n};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(27),h=function(r,a,l,o,u,v,d){return l==null&&(l=a),n(r,"originX",a,o,v,d),n(r,"originY",l,u,v,d),r.forEach(function(c){c.updateDisplayOrigin()}),r};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(27),h=function(r,a,l,o,u){return n(r,"rotation",a,l,o,u)};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(27),h=function(r,a,l,o,u,v,d){return l==null&&(l=a),n(r,"scaleX",a,o,v,d),n(r,"scaleY",l,u,v,d)};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(27),h=function(r,a,l,o,u){return n(r,"scaleX",a,l,o,u)};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(27),h=function(r,a,l,o,u){return n(r,"scaleY",a,l,o,u)};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(27),h=function(r,a,l,o,u,v,d){return l==null&&(l=a),n(r,"scrollFactorX",a,o,v,d),n(r,"scrollFactorY",l,u,v,d)};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(27),h=function(r,a,l,o,u){return n(r,"scrollFactorX",a,l,o,u)};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(27),h=function(r,a,l,o,u){return n(r,"scrollFactorY",a,l,o,u)};e.exports=h},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r,a,l){for(var o=0;o<n.length;o++)n[o].setTint(h,r,a,l);return n};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(27),h=function(r,a,l,o){return n(r,"visible",a,0,l,o)};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(27),h=function(r,a,l,o,u){return n(r,"x",a,l,o,u)};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(27),h=function(r,a,l,o,u,v,d){return l==null&&(l=a),n(r,"x",a,o,v,d),n(r,"y",l,u,v,d)};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(27),h=function(r,a,l,o,u){return n(r,"y",a,l,o,u)};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(3),h=function(r,a,l,o,u){o===void 0&&(o=0),u===void 0&&(u=new n);var v,d;if(r.length>1){var c,p,g,m;if(o===0){var x=r.length-1;for(v=r[x].x,d=r[x].y,c=x-1;c>=0;c--)m=r[c],p=m.x,g=m.y,m.x=v,m.y=d,v=p,d=g;r[x].x=a,r[x].y=l}else{for(v=r[0].x,d=r[0].y,c=1;c<r.length;c++)m=r[c],p=m.x,g=m.y,m.x=v,m.y=d,v=p,d=g;r[0].x=a,r[0].y=l}}else v=r[0].x,d=r[0].y,r[0].x=a,r[0].y=l;return u.x=v,u.y=d,u};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(131),h=function(r){return n(r)};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(183),h=function(r,a,l,o,u){u===void 0&&(u=!1);var v=Math.abs(o-l)/r.length,d;if(u)for(d=0;d<r.length;d++)r[d][a]+=n(d*v,l,o);else for(d=0;d<r.length;d++)r[d][a]=n(d*v,l,o);return r};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(184),h=function(r,a,l,o,u){u===void 0&&(u=!1);var v=Math.abs(o-l)/r.length,d;if(u)for(d=0;d<r.length;d++)r[d][a]+=n(d*v,l,o);else for(d=0;d<r.length;d++)r[d][a]=n(d*v,l,o);return r};e.exports=h},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r,a,l){l===void 0&&(l=!1);var o=Math.abs(a-r)/n.length,u;if(l)for(u=0;u<n.length;u++)n[u][h]+=u*o+r;else for(u=0;u<n.length;u++)n[u][h]=u*o+r;return n};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){for(var h=0;h<n.length;h++)n[h].visible=!n[h].visible;return n};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       samme <samme.npm@gmail.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(68),h=function(r,a,l){l===void 0&&(l=0);for(var o=0;o<r.length;o++){var u=r[o];u.x=n(u.x,a.left-l,a.right+l),u.y=n(u.y,a.top-l,a.bottom+l)}return r};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Animation:i(185),AnimationFrame:i(319),AnimationManager:i(321),AnimationState:i(164),Events:i(132)}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="add"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="animationcomplete"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="animationcomplete-"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="animationrepeat"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="animationrestart"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="animationstart"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="animationstop"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="animationupdate"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pauseall"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="remove"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="resumeall"},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={BaseCache:i(323),CacheManager:i(325),Events:i(324)}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="add"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="remove"},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Controls:i(739),Scene2D:i(742)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={FixedKeyControl:i(740),SmoothedKeyControl:i(741)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(6),r=new n({initialize:function(l){this.camera=h(l,"camera",null),this.left=h(l,"left",null),this.right=h(l,"right",null),this.up=h(l,"up",null),this.down=h(l,"down",null),this.zoomIn=h(l,"zoomIn",null),this.zoomOut=h(l,"zoomOut",null),this.zoomSpeed=h(l,"zoomSpeed",.01),this.minZoom=h(l,"minZoom",.001),this.maxZoom=h(l,"maxZoom",1e3),this.speedX=0,this.speedY=0;var o=h(l,"speed",null);typeof o=="number"?(this.speedX=o,this.speedY=o):(this.speedX=h(l,"speed.x",0),this.speedY=h(l,"speed.y",0)),this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(a){return this.camera=a,this},update:function(a){if(!!this.active){a===void 0&&(a=1);var l=this.camera;this.up&&this.up.isDown?l.scrollY-=this.speedY*a|0:this.down&&this.down.isDown&&(l.scrollY+=this.speedY*a|0),this.left&&this.left.isDown?l.scrollX-=this.speedX*a|0:this.right&&this.right.isDown&&(l.scrollX+=this.speedX*a|0),this.zoomIn&&this.zoomIn.isDown?(l.zoom-=this.zoomSpeed,l.zoom<this.minZoom&&(l.zoom=this.minZoom)):this.zoomOut&&this.zoomOut.isDown&&(l.zoom+=this.zoomSpeed,l.zoom>this.maxZoom&&(l.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(6),r=new n({initialize:function(l){this.camera=h(l,"camera",null),this.left=h(l,"left",null),this.right=h(l,"right",null),this.up=h(l,"up",null),this.down=h(l,"down",null),this.zoomIn=h(l,"zoomIn",null),this.zoomOut=h(l,"zoomOut",null),this.zoomSpeed=h(l,"zoomSpeed",.01),this.minZoom=h(l,"minZoom",.001),this.maxZoom=h(l,"maxZoom",1e3),this.accelX=0,this.accelY=0;var o=h(l,"acceleration",null);typeof o=="number"?(this.accelX=o,this.accelY=o):(this.accelX=h(l,"acceleration.x",0),this.accelY=h(l,"acceleration.y",0)),this.dragX=0,this.dragY=0;var u=h(l,"drag",null);typeof u=="number"?(this.dragX=u,this.dragY=u):(this.dragX=h(l,"drag.x",0),this.dragY=h(l,"drag.y",0)),this.maxSpeedX=0,this.maxSpeedY=0;var v=h(l,"maxSpeed",null);typeof v=="number"?(this.maxSpeedX=v,this.maxSpeedY=v):(this.maxSpeedX=h(l,"maxSpeed.x",0),this.maxSpeedY=h(l,"maxSpeed.y",0)),this._speedX=0,this._speedY=0,this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(a){return this.camera=a,this},update:function(a){if(!!this.active){a===void 0&&(a=1);var l=this.camera;this._speedX>0?(this._speedX-=this.dragX*a,this._speedX<0&&(this._speedX=0)):this._speedX<0&&(this._speedX+=this.dragX*a,this._speedX>0&&(this._speedX=0)),this._speedY>0?(this._speedY-=this.dragY*a,this._speedY<0&&(this._speedY=0)):this._speedY<0&&(this._speedY+=this.dragY*a,this._speedY>0&&(this._speedY=0)),this.up&&this.up.isDown?(this._speedY+=this.accelY,this._speedY>this.maxSpeedY&&(this._speedY=this.maxSpeedY)):this.down&&this.down.isDown&&(this._speedY-=this.accelY,this._speedY<-this.maxSpeedY&&(this._speedY=-this.maxSpeedY)),this.left&&this.left.isDown?(this._speedX+=this.accelX,this._speedX>this.maxSpeedX&&(this._speedX=this.maxSpeedX)):this.right&&this.right.isDown&&(this._speedX-=this.accelX,this._speedX<-this.maxSpeedX&&(this._speedX=-this.maxSpeedX)),this.zoomIn&&this.zoomIn.isDown?this._zoom=-this.zoomSpeed:this.zoomOut&&this.zoomOut.isDown?this._zoom=this.zoomSpeed:this._zoom=0,this._speedX!==0&&(l.scrollX-=this._speedX*a|0),this._speedY!==0&&(l.scrollY-=this._speedY*a|0),this._zoom!==0&&(l.zoom+=this._zoom,l.zoom<this.minZoom?l.zoom=this.minZoom:l.zoom>this.maxZoom&&(l.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Camera:i(326),BaseCamera:i(133),CameraManager:i(799),Effects:i(333),Events:i(37)}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="cameradestroy"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerafadeincomplete"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerafadeinstart"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerafadeoutcomplete"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerafadeoutstart"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="cameraflashcomplete"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="cameraflashstart"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="followupdate"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerapancomplete"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerapanstart"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="postrender"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="prerender"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerarotatecomplete"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerarotatestart"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerashakecomplete"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerashakestart"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerazoomcomplete"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerazoomstart"},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(18),h=i(0),r=i(37),a=new h({initialize:function(o){this.camera=o,this.isRunning=!1,this.isComplete=!1,this.direction=!0,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(l,o,u,v,d,c,p,g){if(l===void 0&&(l=!0),o===void 0&&(o=1e3),u===void 0&&(u=0),v===void 0&&(v=0),d===void 0&&(d=0),c===void 0&&(c=!1),p===void 0&&(p=null),g===void 0&&(g=this.camera.scene),!c&&this.isRunning)return this.camera;this.isRunning=!0,this.isComplete=!1,this.duration=o,this.direction=l,this.progress=0,this.red=u,this.green=v,this.blue=d,this.alpha=l?Number.MIN_VALUE:1,this._elapsed=0,this._onUpdate=p,this._onUpdateScope=g;var m=l?r.FADE_OUT_START:r.FADE_IN_START;return this.camera.emit(m,this.camera,this,o,u,v,d),this.camera},update:function(l,o){!this.isRunning||(this._elapsed+=o,this.progress=n(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this.direction?this.progress:1-this.progress:(this.alpha=this.direction?1:0,this.effectComplete()))},postRenderCanvas:function(l){if(!this.isRunning&&!this.isComplete)return!1;var o=this.camera;return l.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",l.fillRect(o.x,o.y,o.width,o.height),!0},postRenderWebGL:function(l,o){if(!this.isRunning&&!this.isComplete)return!1;var u=this.camera,v=this.red/255,d=this.green/255,c=this.blue/255;return l.drawFillRect(u.x,u.y,u.width,u.height,o(c,d,v,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.isComplete=!0;var l=this.direction?r.FADE_OUT_COMPLETE:r.FADE_IN_COMPLETE;this.camera.emit(l,this.camera,this)},reset:function(){this.isRunning=!1,this.isComplete=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(18),h=i(0),r=i(37),a=new h({initialize:function(o){this.camera=o,this.isRunning=!1,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(l,o,u,v,d,c,p){return l===void 0&&(l=250),o===void 0&&(o=255),u===void 0&&(u=255),v===void 0&&(v=255),d===void 0&&(d=!1),c===void 0&&(c=null),p===void 0&&(p=this.camera.scene),!d&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=l,this.progress=0,this.red=o,this.green=u,this.blue=v,this.alpha=1,this._elapsed=0,this._onUpdate=c,this._onUpdateScope=p,this.camera.emit(r.FLASH_START,this.camera,this,l,o,u,v),this.camera)},update:function(l,o){!this.isRunning||(this._elapsed+=o,this.progress=n(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=1-this.progress:this.effectComplete())},postRenderCanvas:function(l){if(!this.isRunning)return!1;var o=this.camera;return l.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",l.fillRect(o.x,o.y,o.width,o.height),!0},postRenderWebGL:function(l,o){if(!this.isRunning)return!1;var u=this.camera,v=this.red/255,d=this.green/255,c=this.blue/255;return l.drawFillRect(u.x,u.y,u.width,u.height,o(c,d,v,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(r.FLASH_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(18),h=i(0),r=i(134),a=i(37),l=i(3),o=new h({initialize:function(v){this.camera=v,this.isRunning=!1,this.duration=0,this.source=new l,this.current=new l,this.destination=new l,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(u,v,d,c,p,g,m){d===void 0&&(d=1e3),c===void 0&&(c=r.Linear),p===void 0&&(p=!1),g===void 0&&(g=null),m===void 0&&(m=this.camera.scene);var x=this.camera;return!p&&this.isRunning||(this.isRunning=!0,this.duration=d,this.progress=0,this.source.set(x.scrollX,x.scrollY),this.destination.set(u,v),x.getScroll(u,v,this.current),typeof c=="string"&&r.hasOwnProperty(c)?this.ease=r[c]:typeof c=="function"&&(this.ease=c),this._elapsed=0,this._onUpdate=g,this._onUpdateScope=m,this.camera.emit(a.PAN_START,this.camera,this,d,u,v)),x},update:function(u,v){if(!!this.isRunning){this._elapsed+=v;var d=n(this._elapsed/this.duration,0,1);this.progress=d;var c=this.camera;if(this._elapsed<this.duration){var p=this.ease(d);c.getScroll(this.destination.x,this.destination.y,this.current);var g=this.source.x+(this.current.x-this.source.x)*p,m=this.source.y+(this.current.y-this.source.y)*p;c.setScroll(g,m),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,c,d,g,m)}else c.centerOn(this.destination.x,this.destination.y),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,c,d,c.scrollX,c.scrollY),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(a.PAN_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});e.exports=o},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){return h===void 0&&(h=1.70158),n*n*((h+1)*n-h)};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){return h===void 0&&(h=1.70158),--n*n*((h+1)*n+h)+1};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){h===void 0&&(h=1.70158);var r=h*1.525;return(n*=2)<1?.5*(n*n*((r+1)*n-r)):.5*((n-=2)*n*((r+1)*n+r)+2)};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n=1-n,n<.36363636363636365?1-7.5625*n*n:n<.7272727272727273?1-(7.5625*(n-=.5454545454545454)*n+.75):n<.9090909090909091?1-(7.5625*(n-=.8181818181818182)*n+.9375):1-(7.5625*(n-=.9545454545454546)*n+.984375)};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n<.36363636363636365?7.5625*n*n:n<.7272727272727273?7.5625*(n-=.5454545454545454)*n+.75:n<.9090909090909091?7.5625*(n-=.8181818181818182)*n+.9375:7.5625*(n-=.9545454545454546)*n+.984375};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){var h=!1;return n<.5?(n=1-n*2,h=!0):n=n*2-1,n<.36363636363636365?n=7.5625*n*n:n<.7272727272727273?n=7.5625*(n-=.5454545454545454)*n+.75:n<.9090909090909091?n=7.5625*(n-=.8181818181818182)*n+.9375:n=7.5625*(n-=.9545454545454546)*n+.984375,h?(1-n)*.5:n*.5+.5};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return 1-Math.sqrt(1-n*n)};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return Math.sqrt(1- --n*n)};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return(n*=2)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1)};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n*n*n};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return--n*n*n+1};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return(n*=2)<1?.5*n*n*n:.5*((n-=2)*n*n+2)};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r){if(h===void 0&&(h=.1),r===void 0&&(r=.1),n===0)return 0;if(n===1)return 1;var a=r/4;return h<1?h=1:a=r*Math.asin(1/h)/(2*Math.PI),-(h*Math.pow(2,10*(n-=1))*Math.sin((n-a)*(2*Math.PI)/r))};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r){if(h===void 0&&(h=.1),r===void 0&&(r=.1),n===0)return 0;if(n===1)return 1;var a=r/4;return h<1?h=1:a=r*Math.asin(1/h)/(2*Math.PI),h*Math.pow(2,-10*n)*Math.sin((n-a)*(2*Math.PI)/r)+1};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r){if(h===void 0&&(h=.1),r===void 0&&(r=.1),n===0)return 0;if(n===1)return 1;var a=r/4;return h<1?h=1:a=r*Math.asin(1/h)/(2*Math.PI),(n*=2)<1?-.5*(h*Math.pow(2,10*(n-=1))*Math.sin((n-a)*(2*Math.PI)/r)):h*Math.pow(2,-10*(n-=1))*Math.sin((n-a)*(2*Math.PI)/r)*.5+1};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return Math.pow(2,10*(n-1))-.001};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return 1-Math.pow(2,-10*n)};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return(n*=2)<1?.5*Math.pow(2,10*(n-1)):.5*(2-Math.pow(2,-10*(n-1)))};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n*n};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n*(2-n)};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return(n*=2)<1?.5*n*n:-.5*(--n*(n-2)-1)};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n*n*n*n};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return 1- --n*n*n*n};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return(n*=2)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2)};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n*n*n*n*n};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return--n*n*n*n*n+1};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return(n*=2)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2)};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n===0?0:n===1?1:1-Math.cos(n*Math.PI/2)};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n===0?0:n===1?1:Math.sin(n*Math.PI/2)};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n===0?0:n===1?1:.5*(1-Math.cos(Math.PI*n))};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){return h===void 0&&(h=1),n<=0?0:n>=1?1:((h*n|0)+1)*(1/h)};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(18),h=i(0),r=i(37),a=i(3),l=new h({initialize:function(u){this.camera=u,this.isRunning=!1,this.duration=0,this.intensity=new a,this.progress=0,this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate,this._onUpdateScope},start:function(o,u,v,d,c){return o===void 0&&(o=100),u===void 0&&(u=.05),v===void 0&&(v=!1),d===void 0&&(d=null),c===void 0&&(c=this.camera.scene),!v&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=o,this.progress=0,typeof u=="number"?this.intensity.set(u):this.intensity.set(u.x,u.y),this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate=d,this._onUpdateScope=c,this.camera.emit(r.SHAKE_START,this.camera,this,o,u),this.camera)},preRender:function(){this.isRunning&&this.camera.matrix.translate(this._offsetX,this._offsetY)},update:function(o,u){if(!!this.isRunning)if(this._elapsed+=u,this.progress=n(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration){var v=this.intensity,d=this.camera.width,c=this.camera.height,p=this.camera.zoom;this._offsetX=(Math.random()*v.x*d*2-v.x*d)*p,this._offsetY=(Math.random()*v.y*c*2-v.y*c)*p,this.camera.roundPixels&&(this._offsetX=Math.round(this._offsetX),this._offsetY=Math.round(this._offsetY))}else this.effectComplete()},effectComplete:function(){this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(r.SHAKE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.intensity=null}});e.exports=l},function(e,f,i){/**
 * @author       Jason Nicholls <nicholls.jason@gmail.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var n=i(18),h=i(0),r=i(37),a=i(134),l=new h({initialize:function(u){this.camera=u,this.isRunning=!1,this.duration=0,this.source=0,this.current=0,this.destination=0,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope,this.clockwise=!0,this.shortestPath=!1},start:function(o,u,v,d,c,p,g){v===void 0&&(v=1e3),d===void 0&&(d=a.Linear),c===void 0&&(c=!1),p===void 0&&(p=null),g===void 0&&(g=this.camera.scene),u===void 0&&(u=!1),this.shortestPath=u;var m=o;o<0?(m=-1*o,this.clockwise=!1):this.clockwise=!0;var x=360*Math.PI/180;m=m-Math.floor(m/x)*x;var y=this.camera;if(!c&&this.isRunning)return y;if(this.isRunning=!0,this.duration=v,this.progress=0,this.source=y.rotation,this.destination=m,typeof d=="string"&&a.hasOwnProperty(d)?this.ease=a[d]:typeof d=="function"&&(this.ease=d),this._elapsed=0,this._onUpdate=p,this._onUpdateScope=g,this.shortestPath){var T=0,C=0;this.destination>this.source?T=Math.abs(this.destination-this.source):T=Math.abs(this.destination+x)-this.source,this.source>this.destination?C=Math.abs(this.source-this.destination):C=Math.abs(this.source+x)-this.destination,T<C?this.clockwise=!0:T>C&&(this.clockwise=!1)}return this.camera.emit(r.ROTATE_START,this.camera,this,v,m),y},update:function(o,u){if(!!this.isRunning){this._elapsed+=u;var v=n(this._elapsed/this.duration,0,1);this.progress=v;var d=this.camera;if(this._elapsed<this.duration){var c=this.ease(v);this.current=d.rotation;var p=0,g=360*Math.PI/180,m=this.destination,x=this.current;this.clockwise===!1&&(m=this.current,x=this.destination),m>=x?p=Math.abs(m-x):p=Math.abs(m+g)-x;var y=0;this.clockwise?y=d.rotation+p*c:y=d.rotation-p*c,d.rotation=y,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,d,v,y)}else d.rotation=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,d,v,this.destination),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(r.ROTATE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(18),h=i(0),r=i(134),a=i(37),l=new h({initialize:function(u){this.camera=u,this.isRunning=!1,this.duration=0,this.source=1,this.destination=1,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(o,u,v,d,c,p){u===void 0&&(u=1e3),v===void 0&&(v=r.Linear),d===void 0&&(d=!1),c===void 0&&(c=null),p===void 0&&(p=this.camera.scene);var g=this.camera;return!d&&this.isRunning||(this.isRunning=!0,this.duration=u,this.progress=0,this.source=g.zoom,this.destination=o,typeof v=="string"&&r.hasOwnProperty(v)?this.ease=r[v]:typeof v=="function"&&(this.ease=v),this._elapsed=0,this._onUpdate=c,this._onUpdateScope=p,this.camera.emit(a.ZOOM_START,this.camera,this,u,o)),g},update:function(o,u){!this.isRunning||(this._elapsed+=u,this.progress=n(this._elapsed/this.duration,0,1),this._elapsed<this.duration?(this.camera.zoom=this.source+(this.destination-this.source)*this.ease(this.progress),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.camera.zoom)):(this.camera.zoom=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.destination),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(a.ZOOM_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(326),h=i(0),r=i(2),a=i(24),l=i(57),o=i(104),u=i(20),v=new h({initialize:function(c){this.scene=c,this.systems=c.sys,this.roundPixels=c.sys.game.config.roundPixels,this.cameras=[],this.main,this.default,c.sys.events.once(u.BOOT,this.boot,this),c.sys.events.on(u.START,this.start,this)},boot:function(){var d=this.systems;d.settings.cameras?this.fromJSON(d.settings.cameras):this.add(),this.main=this.cameras[0],this.default=new n(0,0,d.scale.width,d.scale.height).setScene(this.scene),d.game.scale.on(o.RESIZE,this.onResize,this),this.systems.events.once(u.DESTROY,this.destroy,this)},start:function(){if(!this.main){var d=this.systems;d.settings.cameras?this.fromJSON(d.settings.cameras):this.add(),this.main=this.cameras[0]}var c=this.systems.events;c.on(u.UPDATE,this.update,this),c.once(u.SHUTDOWN,this.shutdown,this)},add:function(d,c,p,g,m,x){d===void 0&&(d=0),c===void 0&&(c=0),p===void 0&&(p=this.scene.sys.scale.width),g===void 0&&(g=this.scene.sys.scale.height),m===void 0&&(m=!1),x===void 0&&(x="");var y=new n(d,c,p,g);return y.setName(x),y.setScene(this.scene),y.setRoundPixels(this.roundPixels),y.id=this.getNextID(),this.cameras.push(y),m&&(this.main=y),y},addExisting:function(d,c){c===void 0&&(c=!1);var p=this.cameras.indexOf(d);return p===-1?(d.id=this.getNextID(),d.setRoundPixels(this.roundPixels),this.cameras.push(d),c&&(this.main=d),d):null},getNextID:function(){for(var d=this.cameras,c=1,p=0;p<32;p++){for(var g=!1,m=0;m<d.length;m++){var x=d[m];if(x&&x.id===c){g=!0;continue}}if(g)c=c<<1;else return c}return 0},getTotal:function(d){d===void 0&&(d=!1);for(var c=0,p=this.cameras,g=0;g<p.length;g++){var m=p[g];(!d||d&&m.visible)&&c++}return c},fromJSON:function(d){Array.isArray(d)||(d=[d]);for(var c=this.scene.sys.scale.width,p=this.scene.sys.scale.height,g=0;g<d.length;g++){var m=d[g],x=r(m,"x",0),y=r(m,"y",0),T=r(m,"width",c),C=r(m,"height",p),S=this.add(x,y,T,C);S.name=r(m,"name",""),S.zoom=r(m,"zoom",1),S.rotation=r(m,"rotation",0),S.scrollX=r(m,"scrollX",0),S.scrollY=r(m,"scrollY",0),S.roundPixels=r(m,"roundPixels",!1),S.visible=r(m,"visible",!0);var E=r(m,"backgroundColor",!1);E&&S.setBackgroundColor(E);var M=r(m,"bounds",null);if(M){var O=r(M,"x",0),L=r(M,"y",0),R=r(M,"width",c),F=r(M,"height",p);S.setBounds(O,L,R,F)}}return this},getCamera:function(d){for(var c=this.cameras,p=0;p<c.length;p++)if(c[p].name===d)return c[p];return null},getCamerasBelowPointer:function(d){for(var c=this.cameras,p=d.x,g=d.y,m=[],x=0;x<c.length;x++){var y=c[x];y.visible&&y.inputEnabled&&l(y,p,g)&&m.unshift(y)}return m},remove:function(d,c){c===void 0&&(c=!0),Array.isArray(d)||(d=[d]);for(var p=0,g=this.cameras,m=0;m<d.length;m++){var x=g.indexOf(d[m]);x!==-1&&(c?g[x].destroy():g[x].renderList=[],g.splice(x,1),p++)}return!this.main&&g[0]&&(this.main=g[0]),p},render:function(d,c){for(var p=this.scene,g=this.cameras,m=0;m<this.cameras.length;m++){var x=g[m];if(x.visible&&x.alpha>0){x.preRender();var y=this.getVisibleChildren(c.getChildren(),x);d.render(p,y,x)}}},getVisibleChildren:function(d,c){for(var p=[],g=0;g<d.length;g++){var m=d[g];m.willRender(c)&&p.push(m)}return p},resetAll:function(){for(var d=0;d<this.cameras.length;d++)this.cameras[d].destroy();return this.cameras=[],this.main=this.add(),this.main},update:function(d,c){for(var p=0;p<this.cameras.length;p++)this.cameras[p].update(d,c)},onResize:function(d,c,p,g,m){for(var x=0;x<this.cameras.length;x++){var y=this.cameras[x];y._x===0&&y._y===0&&y._width===g&&y._height===m&&y.setSize(c.width,c.height)}},resize:function(d,c){for(var p=0;p<this.cameras.length;p++)this.cameras[p].setSize(d,c)},shutdown:function(){this.main=void 0;for(var d=0;d<this.cameras.length;d++)this.cameras[d].destroy();this.cameras=[];var c=this.systems.events;c.off(u.UPDATE,this.update,this),c.off(u.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.default.destroy(),this.scene.sys.events.off(u.START,this.start,this),this.scene=null,this.systems=null}});a.register("CameraManager",v,"cameras"),e.exports=v},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="enterfullscreen"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="fullscreenfailed"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="fullscreenunsupported"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="leavefullscreen"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="orientationchange"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="resize"},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Config:i(346),CreateRenderer:i(366),DebugHeader:i(384),Events:i(22),TimeStep:i(385),VisibilityHandler:i(387)}},function(e,f){var i=e.exports={},n,h;function r(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?n=setTimeout:n=r}catch{n=r}try{typeof clearTimeout=="function"?h=clearTimeout:h=a}catch{h=a}})();function l(y){if(n===setTimeout)return setTimeout(y,0);if((n===r||!n)&&setTimeout)return n=setTimeout,setTimeout(y,0);try{return n(y,0)}catch{try{return n.call(null,y,0)}catch{return n.call(this,y,0)}}}function o(y){if(h===clearTimeout)return clearTimeout(y);if((h===a||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(y);try{return h(y)}catch{try{return h.call(null,y)}catch{return h.call(this,y)}}}var u=[],v=!1,d,c=-1;function p(){!v||!d||(v=!1,d.length?u=d.concat(u):c=-1,u.length&&g())}function g(){if(!v){var y=l(p);v=!0;for(var T=u.length;T;){for(d=u,u=[];++c<T;)d&&d[c].run();c=-1,T=u.length}d=null,v=!1,o(y)}}i.nextTick=function(y){var T=new Array(arguments.length-1);if(arguments.length>1)for(var C=1;C<arguments.length;C++)T[C-1]=arguments[C];u.push(new m(y,T)),u.length===1&&!v&&l(g)};function m(y,T){this.fun=y,this.array=T}m.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={};function x(){}i.on=x,i.addListener=x,i.once=x,i.off=x,i.removeListener=x,i.removeAllListeners=x,i.emit=x,i.prependListener=x,i.prependOnceListener=x,i.listeners=function(y){return[]},i.binding=function(y){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(y){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(136),h={gamepads:!1,mspointer:!1,touch:!1,wheelEvent:null};function r(){return typeof importScripts=="function"||(("ontouchstart"in document.documentElement||navigator.maxTouchPoints&&navigator.maxTouchPoints>=1)&&(h.touch=!0),(navigator.msPointerEnabled||navigator.pointerEnabled)&&(h.mspointer=!0),navigator.getGamepads&&(h.gamepads=!0),"onwheel"in window||n.ie&&"WheelEvent"in window?h.wheelEvent="wheel":"onmousewheel"in window?h.wheelEvent="mousewheel":n.firefox&&"MouseScrollEvent"in window&&(h.wheelEvent="DOMMouseScroll")),h}e.exports=r()},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(136),h={audioData:!1,dolby:!1,m4a:!1,mp3:!1,ogg:!1,opus:!1,wav:!1,webAudio:!1,webm:!1};function r(){if(typeof importScripts=="function")return h;h.audioData=!!window.Audio,h.webAudio=!!(window.AudioContext||window.webkitAudioContext);var a=document.createElement("audio"),l=!!a.canPlayType;try{if(l&&(a.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"")&&(h.ogg=!0),(a.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,"")||a.canPlayType("audio/opus;").replace(/^no$/,""))&&(h.opus=!0),a.canPlayType("audio/mpeg;").replace(/^no$/,"")&&(h.mp3=!0),a.canPlayType("audio/wav").replace(/^no$/,"")&&(h.wav=!0),(a.canPlayType("audio/x-m4a;")||a.canPlayType("audio/aac;").replace(/^no$/,""))&&(h.m4a=!0),a.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")&&(h.webm=!0),a.canPlayType('audio/mp4;codecs="ec-3"')!=="")){if(n.edge)h.dolby=!0;else if(n.safari&&n.safariVersion>=9&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)){var o=parseInt(RegExp.$1,10),u=parseInt(RegExp.$2,10);(o===10&&u>=11||o>10)&&(h.dolby=!0)}}}catch{}return h}e.exports=r()},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={h264:!1,hls:!1,mp4:!1,ogg:!1,vp9:!1,webm:!1};function n(){if(typeof importScripts=="function")return i;var h=document.createElement("video"),r=!!h.canPlayType;try{r&&(h.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,"")&&(i.ogg=!0),h.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,"")&&(i.h264=!0,i.mp4=!0),h.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")&&(i.webm=!0),h.canPlayType('video/webm; codecs="vp9"').replace(/^no$/,"")&&(i.vp9=!0),h.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(/^no$/,"")&&(i.hls=!0))}catch{}return i}e.exports=n()},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={available:!1,cancel:"",keyboard:!1,request:""};function n(){if(typeof importScripts=="function")return i;var h,r="Fullscreen",a="FullScreen",l=["request"+r,"request"+a,"webkitRequest"+r,"webkitRequest"+a,"msRequest"+r,"msRequest"+a,"mozRequest"+a,"mozRequest"+r];for(h=0;h<l.length;h++)if(document.documentElement[l[h]]){i.available=!0,i.request=l[h];break}var o=["cancel"+a,"exit"+r,"webkitCancel"+a,"webkitExit"+r,"msCancel"+a,"msExit"+r,"mozCancel"+a,"mozExit"+r];if(i.available){for(h=0;h<o.length;h++)if(document[o[h]]){i.cancel=o[h];break}}return window.Element&&Element.ALLOW_KEYBOARD_INPUT&&!/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)&&(i.keyboard=!0),Object.defineProperty(i,"active",{get:function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}}),i}e.exports=n()},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Between:i(349),BetweenPoints:i(350),BetweenPointsY:i(813),BetweenY:i(814),CounterClockwise:i(815),Normalize:i(351),Random:i(816),RandomDegrees:i(817),Reverse:i(818),RotateTo:i(819),ShortestBetween:i(820),Wrap:i(269),WrapDegrees:i(270)}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){return Math.atan2(h.x-n.x,h.y-n.y)};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r,a){return Math.atan2(r-n,a-h)};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(14),h=function(r){return r>Math.PI&&(r-=n.PI2),Math.abs(((r+n.TAU)%n.PI2-n.PI2)%n.PI2)};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       @samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(137),h=function(){return n(-Math.PI,Math.PI)};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       @samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(137),h=function(){return n(-180,180)};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(351),h=function(r){return n(r+Math.PI)};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(14),h=function(r,a,l){return l===void 0&&(l=.05),r===a||(Math.abs(a-r)<=l||Math.abs(a-r)>=n.PI2-l?r=a:(Math.abs(a-r)>Math.PI&&(a<r?a+=n.PI2:a-=n.PI2),a>r?r+=l:a<r&&(r-=l))),r};e.exports=h},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){var r=h-n;if(r===0)return 0;var a=Math.floor((r- -180)/360);return r-a*360};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Between:i(50),BetweenPoints:i(352),BetweenPointsSquared:i(822),Chebyshev:i(823),Power:i(824),Snake:i(825),Squared:i(353)}},function(e,f){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){var r=n.x-h.x,a=n.y-h.y;return r*r+a*a};e.exports=i},function(e,f){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r,a){return Math.max(Math.abs(n-r),Math.abs(h-a))};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r,a,l){return l===void 0&&(l=2),Math.sqrt(Math.pow(r-n,l)+Math.pow(a-h,l))};e.exports=i},function(e,f){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r,a){return Math.abs(n-r)+Math.abs(h-a)};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Back:i(334),Bounce:i(335),Circular:i(336),Cubic:i(337),Elastic:i(338),Expo:i(339),Linear:i(340),Quadratic:i(341),Quartic:i(342),Quintic:i(343),Sine:i(344),Stepped:i(345)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Ceil:i(828),Equal:i(124),Floor:i(829),GreaterThan:i(354),LessThan:i(355)}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){return h===void 0&&(h=1e-4),Math.ceil(n-h)};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){return h===void 0&&(h=1e-4),Math.floor(n+h)};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Bezier:i(831),CatmullRom:i(832),CubicBezier:i(358),Linear:i(833),QuadraticBezier:i(359),SmoothStep:i(360),SmootherStep:i(834)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(356),h=function(r,a){for(var l=0,o=r.length-1,u=0;u<=o;u++)l+=Math.pow(1-a,o-u)*Math.pow(a,u)*r[u]*n(o,u);return l};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(194),h=function(r,a){var l=r.length-1,o=l*a,u=Math.floor(o);return r[0]===r[l]?(a<0&&(u=Math.floor(o=l*(1+a))),n(o-u,r[(u-1+l)%l],r[u],r[(u+1)%l],r[(u+2)%l])):a<0?r[0]-(n(-o,r[0],r[0],r[1],r[1])-r[0]):a>1?r[l]-(n(o-l,r[l],r[l],r[l-1],r[l-1])-r[l]):n(o-u,r[u?u-1:0],r[u],r[l<u+1?l:u+1],r[l<u+2?l:u+2])};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(135),h=function(r,a){var l=r.length-1,o=l*a,u=Math.floor(o);return a<0?n(r[0],r[1],o):a>1?n(r[l],r[l-1],l-o):n(r[u],r[u+1>l?l:u+1],o-u)};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(183),h=function(r,a,l){return a+(l-a)*n(r,0,1)};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={GetNext:i(361),IsSize:i(138),IsValue:i(836)}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n>0&&(n&n-1)===0};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Ceil:i(139),Floor:i(76),To:i(838)}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r,a){return r===void 0&&(r=0),h===0?n:(n-=r,n=h*Math.round(n/h),a?(r+n)/h:r+n)};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=new n({initialize:function(a){a===void 0&&(a=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],a&&this.init(a)},rnd:function(){var r=2091639*this.s0+this.c*23283064365386963e-26;return this.c=r|0,this.s0=this.s1,this.s1=this.s2,this.s2=r-this.c,this.s2},hash:function(r){var a,l=this.n;r=r.toString();for(var o=0;o<r.length;o++)l+=r.charCodeAt(o),a=.02519603282416938*l,l=a>>>0,a-=l,a*=l,l=a>>>0,a-=l,l+=a*4294967296;return this.n=l,(l>>>0)*23283064365386963e-26},init:function(r){typeof r=="string"?this.state(r):this.sow(r)},sow:function(r){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,!!r)for(var a=0;a<r.length&&r[a]!=null;a++){var l=r[a];this.s0-=this.hash(l),this.s0+=~~(this.s0<0),this.s1-=this.hash(l),this.s1+=~~(this.s1<0),this.s2-=this.hash(l),this.s2+=~~(this.s2<0)}},integer:function(){return this.rnd()*4294967296},frac:function(){return this.rnd()+(this.rnd()*2097152|0)*11102230246251565e-32},real:function(){return this.integer()+this.frac()},integerInRange:function(r,a){return Math.floor(this.realInRange(0,a-r+1)+r)},between:function(r,a){return Math.floor(this.realInRange(0,a-r+1)+r)},realInRange:function(r,a){return this.frac()*(a-r)+r},normal:function(){return 1-2*this.frac()},uuid:function(){var r="",a="";for(a=r="";r++<36;a+=~r%5|r*3&4?(r^15?8^this.frac()*(r^20?16:4):4).toString(16):"-");return a},pick:function(r){return r[this.integerInRange(0,r.length-1)]},sign:function(){return this.pick(this.signs)},weightedPick:function(r){return r[~~(Math.pow(this.frac(),2)*(r.length-1)+.5)]},timestamp:function(r,a){return this.realInRange(r||9466848e5,a||1577862e6)},angle:function(){return this.integerInRange(-180,180)},rotation:function(){return this.realInRange(-3.1415926,3.1415926)},state:function(r){return typeof r=="string"&&r.match(/^!rnd/)&&(r=r.split(","),this.c=parseFloat(r[1]),this.s0=parseFloat(r[2]),this.s1=parseFloat(r[3]),this.s2=parseFloat(r[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function(r){for(var a=r.length-1,l=a;l>0;l--){var o=Math.floor(this.frac()*(l+1)),u=r[o];r[o]=r[l],r[l]=u}return r}});e.exports=h},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){for(var h=0,r=0;r<n.length;r++)h+=+n[r];return h/n.length};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r){h===void 0&&(h=0),r===void 0&&(r=10);var a=Math.pow(r,-h);return Math.ceil(n*a)/a};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){return Math.abs(n-h)};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(18),h=i(0),r=i(69),a=i(1),l=new r,o=new h({initialize:function u(v,d,c,p){v===void 0&&(v=0),d===void 0&&(d=0),c===void 0&&(c=0),p===void 0&&(p=u.DefaultOrder),this._x=v,this._y=d,this._z=c,this._order=p,this.onChangeCallback=a},x:{get:function(){return this._x},set:function(u){this._x=u,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(u){this._y=u,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(u){this._z=u,this.onChangeCallback(this)}},order:{get:function(){return this._order},set:function(u){this._order=u,this.onChangeCallback(this)}},set:function(u,v,d,c){return c===void 0&&(c=this._order),this._x=u,this._y=v,this._z=d,this._order=c,this.onChangeCallback(this),this},copy:function(u){return this.set(u.x,u.y,u.z,u.order)},setFromQuaternion:function(u,v,d){return v===void 0&&(v=this._order),d===void 0&&(d=!1),l.fromQuat(u),this.setFromRotationMatrix(l,v,d)},setFromRotationMatrix:function(u,v,d){v===void 0&&(v=this._order),d===void 0&&(d=!1);var c=u.val,p=c[0],g=c[4],m=c[8],x=c[1],y=c[5],T=c[9],C=c[2],S=c[6],E=c[10],M=0,O=0,L=0,R=.99999;switch(v){case"XYZ":{O=Math.asin(n(m,-1,1)),Math.abs(m)<R?(M=Math.atan2(-T,E),L=Math.atan2(-g,p)):M=Math.atan2(S,y);break}case"YXZ":{M=Math.asin(-n(T,-1,1)),Math.abs(T)<R?(O=Math.atan2(m,E),L=Math.atan2(x,y)):O=Math.atan2(-C,p);break}case"ZXY":{M=Math.asin(n(S,-1,1)),Math.abs(S)<R?(O=Math.atan2(-C,E),L=Math.atan2(-g,y)):L=Math.atan2(x,p);break}case"ZYX":{O=Math.asin(-n(C,-1,1)),Math.abs(C)<R?(M=Math.atan2(S,E),L=Math.atan2(x,p)):L=Math.atan2(-g,y);break}case"YZX":{L=Math.asin(n(x,-1,1)),Math.abs(x)<R?(M=Math.atan2(-T,y),O=Math.atan2(-C,p)):O=Math.atan2(m,E);break}case"XZY":{L=Math.asin(-n(g,-1,1)),Math.abs(g)<R?(M=Math.atan2(S,y),O=Math.atan2(m,p)):M=Math.atan2(-T,E);break}}return this._x=M,this._y=O,this._z=L,this._order=v,d&&this.onChangeCallback(this),this}});o.RotationOrders=["XYZ","YXZ","ZXY","ZYX","YZX","XZY"],o.DefaultOrder="XYZ",e.exports=o},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r){h===void 0&&(h=0),r===void 0&&(r=10);var a=Math.pow(r,-h);return Math.floor(n*a)/a};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){return n/h/1e3};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n==parseFloat(n)?!(n%2):void 0};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n===parseFloat(n)?!(n%2):void 0};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r){return Math.min(n+h,r)};e.exports=i},function(e,f){/**
 * @author       Vladislav Forsh <vlad@robowhale.com>
 * @copyright    2021 RoboWhale
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){var h=n.length;if(h===0)return 0;n.sort(function(a,l){return a-l});var r=Math.floor(h/2);return h%2===0?(n[r]+n[r-1])/2:n[r]};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r){return Math.max(n-h,r)};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r,a){r===void 0&&(r=h+1);var l=(n-h)/(r-h);return l>1?a!==void 0?(l=(a-n)/(a-r),l<0&&(l=0)):l=1:l<0&&(l=0),l};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){h===void 0&&(h=1);var r=Math.random()*2*Math.PI;return n.x=Math.cos(r)*h,n.y=Math.sin(r)*h,n};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){h===void 0&&(h=1);var r=Math.random()*2*Math.PI,a=Math.random()*2-1,l=Math.sqrt(1-a*a)*h;return n.x=Math.cos(r)*l,n.y=Math.sin(r)*l,n.z=a*h,n};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){return h===void 0&&(h=1),n.x=(Math.random()*2-1)*h,n.y=(Math.random()*2-1)*h,n.z=(Math.random()*2-1)*h,n.w=(Math.random()*2-1)*h,n};e.exports=i},function(e,f){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r,a,l){return n.x=h+l*Math.cos(a),n.y=r+l*Math.sin(a),n};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r){h===void 0&&(h=0),r===void 0&&(r=10);var a=Math.pow(r,-h);return Math.round(n*a)/a};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r,a){h===void 0&&(h=1),r===void 0&&(r=1),a===void 0&&(a=1),a*=Math.PI/n;for(var l=[],o=[],u=0;u<n;u++)r-=h*a,h+=r*a,l[u]=r,o[u]=h;return{sin:o,cos:l,length:n}};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(3),h=function(r,a,l,o){o===void 0&&(o=new n);var u=0,v=0,d=a*l;return r>0&&r<=d&&(r>a-1?(v=Math.floor(r/a),u=r-v*a):u=r),o.set(u,v)};e.exports=h},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r){return Math.abs(n-h)<=r};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(39),h=i(69),r=i(365),a=new h,l=new r,o=new n,u=function(v,d,c){return l.setAxisAngle(d,c),a.fromRotationTranslation(l,o.set(0,0,0)),v.transformMat4(a)};e.exports=u},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="addtexture"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="onerror"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="onload"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="ready"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="removetexture"},function(e,f){e.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_FS","","precision mediump float;","","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uMaskSampler;","uniform bool uInvertMaskAlpha;","","void main ()","{","    vec2 uv = gl_FragCoord.xy / uResolution;","    vec4 mainColor = texture2D(uMainSampler, uv);","    vec4 maskColor = texture2D(uMaskSampler, uv);","    float alpha = mainColor.a;","","    if (!uInvertMaskAlpha)","    {","        alpha *= (maskColor.a);","    }","    else","    {","        alpha *= (1.0 - maskColor.a);","    }","","    gl_FragColor = vec4(mainColor.rgb * alpha, alpha);","}",""].join(`
`)},function(e,f){e.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_VS","","precision mediump float;","","attribute vec2 inPosition;","","void main ()","{","    gl_Position = vec4(inPosition, 0.0, 1.0);","}",""].join(`
`)},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pipelineafterflush"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pipelinebeforeflush"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pipelinebind"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pipelineboot"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pipelinedestroy"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pipelinerebind"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pipelineresize"},function(e,f){e.exports=["#define SHADER_NAME PHASER_GRAPHICS_FS","","precision mediump float;","","varying vec4 outColor;","","void main ()","{","    gl_FragColor = vec4(outColor.bgr * outColor.a, outColor.a);","}",""].join(`
`)},function(e,f){e.exports=["#define SHADER_NAME PHASER_GRAPHICS_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec4 inColor;","","varying vec4 outColor;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outColor = inColor;","}",""].join(`
`)},function(e,f){e.exports=["#define SHADER_NAME PHASER_LIGHT_FS","","precision mediump float;","","struct Light","{","    vec2 position;","    vec3 color;","    float intensity;","    float radius;","};","","const int kMaxLights = %LIGHT_COUNT%;","","uniform vec4 uCamera; /* x, y, rotation, zoom */","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uNormSampler;","uniform vec3 uAmbientLightColor;","uniform Light uLights[kMaxLights];","uniform mat3 uInverseRotationMatrix;","","varying vec2 outTexCoord;","varying vec4 outTint;","","void main()","{","    vec3 finalColor = vec3(0.0, 0.0, 0.0);","    vec4 color = texture2D(uMainSampler, outTexCoord) * vec4(outTint.bgr * outTint.a, outTint.a);","    vec3 normalMap = texture2D(uNormSampler, outTexCoord).rgb;","    vec3 normal = normalize(uInverseRotationMatrix * vec3(normalMap * 2.0 - 1.0));","    vec2 res = vec2(min(uResolution.x, uResolution.y)) * uCamera.w;","","    for (int index = 0; index < kMaxLights; ++index)","    {","        Light light = uLights[index];","        vec3 lightDir = vec3((light.position.xy / res) - (gl_FragCoord.xy / res), 0.1);","        vec3 lightNormal = normalize(lightDir);","        float distToSurf = length(lightDir) * uCamera.w;","        float diffuseFactor = max(dot(normal, lightNormal), 0.0);","        float radius = (light.radius / res.x * uCamera.w) * uCamera.w;","        float attenuation = clamp(1.0 - distToSurf * distToSurf / (radius * radius), 0.0, 1.0);","        vec3 diffuse = light.color * diffuseFactor;","        finalColor += (attenuation * diffuse) * light.intensity;","    }","","    vec4 colorOutput = vec4(uAmbientLightColor + finalColor, 1.0);","","    gl_FragColor = color * vec4(colorOutput.rgb * colorOutput.a, colorOutput.a);","}",""].join(`
`)},function(e,f){e.exports=["#define SHADER_NAME PHASER_MULTI_FS","","precision mediump float;","","uniform sampler2D uMainSampler[%count%];","","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    vec4 texture;","","    %forloop%","","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","","    //  Multiply texture tint","    vec4 color = texture * texel;","","    if (outTintEffect == 1.0)","    {","        //  Solid color + texture alpha","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        //  Solid color, no texture","        color = texel;","    }","","    gl_FragColor = color;","}",""].join(`
`)},function(e,f){e.exports=["#define SHADER_NAME PHASER_MULTI_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outTexCoord = inTexCoord;","    outTexId = inTexId;","    outTint = inTint;","    outTintEffect = inTintEffect;","}",""].join(`
`)},function(e,f){e.exports=["#define SHADER_NAME PHASER_POINTLIGHT_FS","","precision mediump float;","","uniform vec2 uResolution;","uniform float uCameraZoom;","","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","","void main ()","{","    vec2 center = (lightPosition.xy + 1.0) * (uResolution.xy * 0.5);","","    float distToSurf = length(center - gl_FragCoord.xy);","","    float radius = 1.0 - distToSurf / (lightRadius * uCameraZoom);","","    float intensity = smoothstep(0.0, 1.0, radius * lightAttenuation);","","    vec4 color = vec4(intensity, intensity, intensity, 0.0) * lightColor;","","    gl_FragColor = vec4(color.rgb * lightColor.a, color.a);","}",""].join(`
`)},function(e,f){e.exports=["#define SHADER_NAME PHASER_POINTLIGHT_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inLightPosition;","attribute vec4 inLightColor;","attribute float inLightRadius;","attribute float inLightAttenuation;","","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","","void main ()","{","    lightColor = inLightColor;","    lightRadius = inLightRadius;","    lightAttenuation = inLightAttenuation;","    lightPosition = uProjectionMatrix * vec4(inLightPosition, 1.0, 1.0);","","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","}",""].join(`
`)},function(e,f){e.exports=["#define SHADER_NAME PHASER_SINGLE_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","","    //  Multiply texture tint","    vec4 color = texture * texel;","","    if (outTintEffect == 1.0)","    {","        //  Solid color + texture alpha","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        //  Solid color, no texture","        color = texel;","    }","","    gl_FragColor = color;","}",""].join(`
`)},function(e,f){e.exports=["#define SHADER_NAME PHASER_SINGLE_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}",""].join(`
`)},function(e,f){e.exports=["#define SHADER_NAME PHASER_ADD_BLEND_FS","","precision mediump float;","","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","","    gl_FragColor = frame1 + frame2 * uStrength;","}",""].join(`
`)},function(e,f){e.exports=["#define SHADER_NAME PHASER_COLORMATRIX_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","uniform float uColorMatrix[20];","uniform float uAlpha;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 c = texture2D(uMainSampler, outTexCoord);","","    if (uAlpha == 0.0)","    {","        gl_FragColor = c;","","        return;","    }","","    if (c.a > 0.0)","    {","        c.rgb /= c.a;","    }","","    vec4 result;","","    result.r = (uColorMatrix[0] * c.r) + (uColorMatrix[1] * c.g) + (uColorMatrix[2] * c.b) + (uColorMatrix[3] * c.a) + uColorMatrix[4];","    result.g = (uColorMatrix[5] * c.r) + (uColorMatrix[6] * c.g) + (uColorMatrix[7] * c.b) + (uColorMatrix[8] * c.a) + uColorMatrix[9];","    result.b = (uColorMatrix[10] * c.r) + (uColorMatrix[11] * c.g) + (uColorMatrix[12] * c.b) + (uColorMatrix[13] * c.a) + uColorMatrix[14];","    result.a = (uColorMatrix[15] * c.r) + (uColorMatrix[16] * c.g) + (uColorMatrix[17] * c.b) + (uColorMatrix[18] * c.a) + uColorMatrix[19];","","    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);","","    rgb *= result.a;","","    gl_FragColor = vec4(rgb, result.a);","}",""].join(`
`)},function(e,f){e.exports=["#define SHADER_NAME PHASER_COPY_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","uniform float uBrightness;","","varying vec2 outTexCoord;","","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord) * uBrightness;","}",""].join(`
`)},function(e,f){e.exports=["#define SHADER_NAME PHASER_LINEAR_BLEND_FS","","precision mediump float;","","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","","    gl_FragColor = mix(frame1, frame2 * uStrength, 0.5);","}",""].join(`
`)},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={GenerateTexture:i(388),Palettes:i(889)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ARNE16:i(389),C64:i(890),CGA:i(891),JMP:i(892),MSX:i(893)}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={0:"#000",1:"#fff",2:"#8b4131",3:"#7bbdc5",4:"#8b41ac",5:"#6aac41",6:"#3931a4",7:"#d5de73",8:"#945a20",9:"#5a4100",A:"#bd736a",B:"#525252",C:"#838383",D:"#acee8b",E:"#7b73de",F:"#acacac"}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={0:"#000",1:"#2234d1",2:"#0c7e45",3:"#44aacc",4:"#8a3622",5:"#5c2e78",6:"#aa5c3d",7:"#b5b5b5",8:"#5e606e",9:"#4c81fb",A:"#6cd947",B:"#7be2f9",C:"#eb8a60",D:"#e23d69",E:"#ffd93f",F:"#fff"}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#f5f4eb"}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#fff"}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Path:i(895),MoveTo:i(393),CubicBezier:i(390),Curve:i(94),Ellipse:i(391),Line:i(392),QuadraticBezier:i(394),Spline:i(395)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(390),r=i(391),a=i(5),l=i(392),o=i(393),u=i(394),v=i(10),d=i(395),c=i(3),p=i(14),g=new n({initialize:function(x,y){x===void 0&&(x=0),y===void 0&&(y=0),this.name="",this.curves=[],this.cacheLengths=[],this.autoClose=!1,this.startPoint=new c,this._tmpVec2A=new c,this._tmpVec2B=new c,typeof x=="object"?this.fromJSON(x):this.startPoint.set(x,y)},add:function(m){return this.curves.push(m),this},circleTo:function(m,x,y){return x===void 0&&(x=!1),this.ellipseTo(m,m,0,360,x,y)},closePath:function(){var m=this.curves[0].getPoint(0),x=this.curves[this.curves.length-1].getPoint(1);return m.equals(x)||this.curves.push(new l(x,m)),this},cubicBezierTo:function(m,x,y,T,C,S){var E=this.getEndPoint(),M,O,L;return m instanceof c?(M=m,O=x,L=y):(M=new c(y,T),O=new c(C,S),L=new c(m,x)),this.add(new h(E,M,O,L))},quadraticBezierTo:function(m,x,y,T){var C=this.getEndPoint(),S,E;return m instanceof c?(S=m,E=x):(S=new c(y,T),E=new c(m,x)),this.add(new u(C,S,E))},draw:function(m,x){for(var y=0;y<this.curves.length;y++){var T=this.curves[y];!T.active||T.draw(m,x)}return m},ellipseTo:function(m,x,y,T,C,S){var E=new r(0,0,m,x,y,T,C,S),M=this.getEndPoint(this._tmpVec2A),O=E.getStartPoint(this._tmpVec2B);return M.subtract(O),E.x=M.x,E.y=M.y,this.add(E)},fromJSON:function(m){this.curves=[],this.cacheLengths=[],this.startPoint.set(m.x,m.y),this.autoClose=m.autoClose;for(var x=0;x<m.curves.length;x++){var y=m.curves[x];switch(y.type){case"LineCurve":this.add(l.fromJSON(y));break;case"EllipseCurve":this.add(r.fromJSON(y));break;case"SplineCurve":this.add(d.fromJSON(y));break;case"CubicBezierCurve":this.add(h.fromJSON(y));break;case"QuadraticBezierCurve":this.add(u.fromJSON(y));break}}return this},getBounds:function(m,x){m===void 0&&(m=new v),x===void 0&&(x=16),m.x=Number.MAX_VALUE,m.y=Number.MAX_VALUE;for(var y=new v,T=p.MIN_SAFE_INTEGER,C=p.MIN_SAFE_INTEGER,S=0;S<this.curves.length;S++){var E=this.curves[S];!E.active||(E.getBounds(y,x),m.x=Math.min(m.x,y.x),m.y=Math.min(m.y,y.y),T=Math.max(T,y.right),C=Math.max(C,y.bottom))}return m.right=T,m.bottom=C,m},getCurveLengths:function(){if(this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var m=[],x=0,y=0;y<this.curves.length;y++)x+=this.curves[y].getLength(),m.push(x);return this.cacheLengths=m,m},getEndPoint:function(m){return m===void 0&&(m=new c),this.curves.length>0?this.curves[this.curves.length-1].getPoint(1,m):m.copy(this.startPoint),m},getLength:function(){var m=this.getCurveLengths();return m[m.length-1]},getPoint:function(m,x){x===void 0&&(x=new c);for(var y=m*this.getLength(),T=this.getCurveLengths(),C=0;C<T.length;){if(T[C]>=y){var S=T[C]-y,E=this.curves[C],M=E.getLength(),O=M===0?0:1-S/M;return E.getPointAt(O,x)}C++}return null},getPoints:function(m){m===void 0&&(m=12);for(var x=[],y,T=0;T<this.curves.length;T++){var C=this.curves[T];if(!!C.active)for(var S=C.getResolution(m),E=C.getPoints(S),M=0;M<E.length;M++){var O=E[M];y&&y.equals(O)||(x.push(O),y=O)}}return this.autoClose&&x.length>1&&!x[x.length-1].equals(x[0])&&x.push(x[0]),x},getRandomPoint:function(m){return m===void 0&&(m=new c),this.getPoint(Math.random(),m)},getSpacedPoints:function(m){m===void 0&&(m=40);for(var x=[],y=0;y<=m;y++)x.push(this.getPoint(y/m));return this.autoClose&&x.push(x[0]),x},getStartPoint:function(m){return m===void 0&&(m=new c),m.copy(this.startPoint)},getTangent:function(m,x){x===void 0&&(x=new c);for(var y=m*this.getLength(),T=this.getCurveLengths(),C=0;C<T.length;){if(T[C]>=y){var S=T[C]-y,E=this.curves[C],M=E.getLength(),O=M===0?0:1-S/M;return E.getTangentAt(O,x)}C++}return null},lineTo:function(m,x){m instanceof c?this._tmpVec2B.copy(m):this._tmpVec2B.set(m,x);var y=this.getEndPoint(this._tmpVec2A);return this.add(new l([y.x,y.y,this._tmpVec2B.x,this._tmpVec2B.y]))},splineTo:function(m){return m.unshift(this.getEndPoint()),this.add(new d(m))},moveTo:function(m,x){return m instanceof c?this.add(new o(m.x,m.y)):this.add(new o(m,x))},toJSON:function(){for(var m=[],x=0;x<this.curves.length;x++)m.push(this.curves[x].toJSON());return{type:"Path",x:this.startPoint.x,y:this.startPoint.y,autoClose:this.autoClose,curves:m}},updateArcLengths:function(){this.cacheLengths=[],this.getCurveLengths()},destroy:function(){this.curves.length=0,this.cacheLengths.length=0,this.startPoint=void 0}});a.register("path",function(m,x){return new g(m,x)}),e.exports=g},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={DataManager:i(101),DataManagerPlugin:i(897),Events:i(315)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(101),r=i(24),a=i(20),l=new n({Extends:h,initialize:function(u){h.call(this,u,u.sys.events),this.scene=u,this.systems=u.sys,u.sys.events.once(a.BOOT,this.boot,this),u.sys.events.on(a.START,this.start,this)},boot:function(){this.events=this.systems.events,this.events.once(a.DESTROY,this.destroy,this)},start:function(){this.events.once(a.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.systems.events.off(a.SHUTDOWN,this.shutdown,this)},destroy:function(){h.prototype.destroy.call(this),this.events.off(a.START,this.start,this),this.scene=null,this.systems=null}});r.register("DataManagerPlugin",l,"data"),e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Align:i(899),BaseShader:i(396),Bounds:i(902),Canvas:i(906),Color:i(397),ColorMatrix:i(198),Masks:i(916),RGB:i(200)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(123),h=i(17),r={In:i(900),To:i(901)};r=h(!1,r,n),e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={BottomCenter:i(290),BottomLeft:i(291),BottomRight:i(292),Center:i(293),LeftCenter:i(295),QuickSet:i(289),RightCenter:i(296),TopCenter:i(297),TopLeft:i(298),TopRight:i(299)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={BottomCenter:i(277),BottomLeft:i(278),BottomRight:i(279),LeftBottom:i(280),LeftCenter:i(281),LeftTop:i(282),QuickSet:i(276),RightBottom:i(283),RightCenter:i(284),RightTop:i(285),TopCenter:i(286),TopLeft:i(287),TopRight:i(288)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={CenterOn:i(294),GetBottom:i(42),GetBounds:i(903),GetCenterX:i(87),GetCenterY:i(89),GetLeft:i(43),GetOffsetX:i(904),GetOffsetY:i(905),GetRight:i(44),GetTop:i(45),SetBottom:i(55),SetCenterX:i(88),SetCenterY:i(90),SetLeft:i(53),SetRight:i(54),SetTop:i(52)}},function(e,f,i){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(42),h=i(43),r=i(44),a=i(45),l=function(o,u){u===void 0&&(u={});var v=h(o),d=a(o);return u.x=v,u.y=d,u.width=r(o)-v,u.height=n(o)-d,u};e.exports=l},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n.width*n.originX};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n.height*n.originY};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={CanvasInterpolation:i(367),CanvasPool:i(31),Smoothing:i(192),TouchAction:i(907),UserSelect:i(908)}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){return h===void 0&&(h="none"),n.style.msTouchAction=h,n.style["ms-touch-action"]=h,n.style["touch-action"]=h,n};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){h===void 0&&(h="none");var r=["-webkit-","-khtml-","-moz-","-ms-",""];return r.forEach(function(a){n.style[a+"user-select"]=h}),n.style["-webkit-touch-callout"]=h,n.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",n};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(103),h=function(r){r===void 0&&(r=1024);var a=[],l=255,o,u=255,v=0,d=0;for(o=0;o<=l;o++)a.push({r:u,g:o,b:d,color:n(u,o,d)});for(v=255,o=l;o>=0;o--)a.push({r:o,g:v,b:d,color:n(o,v,d)});for(u=0,o=0;o<=l;o++,v--)a.push({r:u,g:v,b:o,color:n(u,v,o)});for(v=0,d=255,o=0;o<=l;o++,d--,u++)a.push({r:u,g:v,b:d,color:n(u,v,d)});if(r===1024)return a;var c=[],p=0,g=1024/r;for(o=0;o<r;o++)c.push(a[Math.floor(p)]),p+=g;return c};e.exports=h},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){var h={r:n>>16&255,g:n>>8&255,b:n&255,a:255};return n>16777215&&(h.a=n>>>24),h};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(38),h=i(399),r=function(a,l,o){var u=o,v=o,d=o;if(l!==0){var c=o<.5?o*(1+l):o+l-o*l,p=2*o-c;u=h(p,c,a+1/3),v=h(p,c,a),d=h(p,c,a-1/3)}var g=new n;return g.setGLTo(u,v,d,1)};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(188),h=function(r,a){r===void 0&&(r=1),a===void 0&&(a=1);for(var l=[],o=0;o<=359;o++)l.push(n(o/359,r,a));return l};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(135),h=function(l,o,u,v,d,c,p,g){p===void 0&&(p=100),g===void 0&&(g=0);var m=g/p;return{r:n(l,v,m),g:n(o,d,m),b:n(u,c,m)}},r=function(l,o,u,v){return u===void 0&&(u=100),v===void 0&&(v=0),h(l.r,l.g,l.b,o.r,o.g,o.b,u,v)},a=function(l,o,u,v,d,c){return d===void 0&&(d=100),c===void 0&&(c=0),h(l.r,l.g,l.b,o,u,v,d,c)};e.exports={RGBWithRGB:h,ColorWithRGB:a,ColorWithColor:r}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(195),h=i(38),r=function(a,l){return a===void 0&&(a=0),l===void 0&&(l=255),new h(n(a,l),n(a,l),n(a,l))};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(398),h=function(r,a,l,o,u){return o===void 0&&(o=255),u===void 0&&(u="#"),u==="#"?"#"+((1<<24)+(r<<16)+(a<<8)+l).toString(16).slice(1,7):"0x"+n(o)+n(r)+n(a)+n(l)};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={BitmapMask:i(310),GeometryMask:i(311)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n={AddToDOM:i(142),DOMContentLoaded:i(400),GetInnerHeight:i(401),GetScreenOrientation:i(402),GetTarget:i(407),ParseXML:i(408),RemoveFromDOM:i(202),RequestAnimationFrame:i(386)};e.exports=n},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={EventEmitter:i(919)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(9),r=i(24),a=new n({Extends:h,initialize:function(){h.call(this)},shutdown:function(){this.removeAllListeners()},destroy:function(){this.removeAllListeners()}});r.register("EventEmitter",a,"events"),e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(142),h=i(321),r=i(325),a=i(31),l=i(0),o=i(346),u=i(921),v=i(366),d=i(101),c=i(384),p=i(347),g=i(400),m=i(9),x=i(22),y=i(409),T=i(24),C=i(414),S=i(415),E=i(417),M=i(106),O=i(422),L=i(385),R=i(387),F=i(426),D=new l({initialize:function(N){this.config=new o(N),this.renderer=null,this.domContainer=null,this.canvas=null,this.context=null,this.isBooted=!1,this.isRunning=!1,this.events=new m,this.anims=new h(this),this.textures=new O(this),this.cache=new r(this),this.registry=new d(this),this.input=new y(this,this.config),this.scene=new E(this,this.config.sceneConfig),this.device=p,this.scale=new S(this,this.config),this.sound=null,this.sound=F.create(this),this.loop=new L(this,this.config.fps),this.plugins=new C(this,this.config),this.pendingDestroy=!1,this.removeCanvas=!1,this.noReturn=!1,this.hasFocus=!1,g(this.boot.bind(this))},boot:function(){if(!T.hasCore("EventEmitter")){console.warn("Aborting. Core Plugins missing.");return}this.isBooted=!0,this.config.preBoot(this),this.scale.preBoot(),v(this),u(this),c(this),n(this.canvas,this.config.parent),this.textures.once(M.READY,this.texturesReady,this),this.events.emit(x.BOOT)},texturesReady:function(){this.events.emit(x.READY),this.start()},start:function(){this.isRunning=!0,this.config.postBoot(this),this.renderer?this.loop.start(this.step.bind(this)):this.loop.start(this.headlessStep.bind(this)),R(this);var B=this.events;B.on(x.HIDDEN,this.onHidden,this),B.on(x.VISIBLE,this.onVisible,this),B.on(x.BLUR,this.onBlur,this),B.on(x.FOCUS,this.onFocus,this)},step:function(B,N){if(this.pendingDestroy)return this.runDestroy();var U=this.events;U.emit(x.PRE_STEP,B,N),U.emit(x.STEP,B,N),this.scene.update(B,N),U.emit(x.POST_STEP,B,N);var X=this.renderer;X.preRender(),U.emit(x.PRE_RENDER,X,B,N),this.scene.render(X),X.postRender(),U.emit(x.POST_RENDER,X,B,N)},headlessStep:function(B,N){if(this.pendingDestroy)return this.runDestroy();var U=this.events;U.emit(x.PRE_STEP,B,N),U.emit(x.STEP,B,N),this.scene.update(B,N),U.emit(x.POST_STEP,B,N),U.emit(x.PRE_RENDER),U.emit(x.POST_RENDER)},onHidden:function(){this.loop.pause(),this.events.emit(x.PAUSE)},onVisible:function(){this.loop.resume(),this.events.emit(x.RESUME)},onBlur:function(){this.hasFocus=!1,this.loop.blur()},onFocus:function(){this.hasFocus=!0,this.loop.focus()},getFrame:function(){return this.loop.frame},getTime:function(){return this.loop.now},destroy:function(B,N){N===void 0&&(N=!1),this.pendingDestroy=!0,this.removeCanvas=B,this.noReturn=N},runDestroy:function(){this.scene.destroy(),this.events.emit(x.DESTROY),this.events.removeAllListeners(),this.renderer&&this.renderer.destroy(),this.removeCanvas&&this.canvas&&(a.remove(this.canvas),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)),this.domContainer&&this.domContainer.parentNode.removeChild(this.domContainer),this.loop.destroy(),this.pendingDestroy=!1}});e.exports=D},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(142),h=function(r){var a=r.config;if(!(!a.parent||!a.domCreateContainer)){var l=document.createElement("div");l.style.cssText=["display: block;","width: "+r.scale.width+"px;","height: "+r.scale.height+"px;","padding: 0; margin: 0;","position: absolute;","overflow: hidden;","pointer-events: "+a.domPointerEvents+";","transform: scale(1);","transform-origin: left top;"].join(" "),r.domContainer=l,n(l,a.parent)}};e.exports=h},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="boot"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="destroy"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragend"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragenter"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="drag"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragleave"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragover"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragstart"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="drop"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="gameout"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="gameover"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="gameobjectdown"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragend"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragenter"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="drag"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragleave"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragover"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragstart"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="drop"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="gameobjectmove"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="gameobjectout"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="gameobjectover"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerdown"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointermove"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerout"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerover"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerup"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="wheel"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="gameobjectup"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="gameobjectwheel"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="boot"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="process"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="update"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerdown"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerdownoutside"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointermove"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerout"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerover"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerup"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerupoutside"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="wheel"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerlockchange"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="preupdate"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="shutdown"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="start"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="update"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="addfile"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="complete"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="filecomplete"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="filecomplete-"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="loaderror"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="load"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="fileprogress"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="postprocess"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="progress"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="start"},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n={game:"game",renderer:"renderer",anims:"anims",cache:"cache",plugins:"plugins",registry:"registry",scale:"scale",sound:"sound",textures:"textures",events:"events",cameras:"cameras",add:"add",make:"make",scenePlugin:"scene",displayList:"children",lights:"lights",data:"data",input:"input",load:"load",time:"time",tweens:"tweens",arcadePhysics:"physics",impactPhysics:"impact",matterPhysics:"matter"};e.exports=n},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r){if(!r.getElementsByTagName("TextureAtlas")){console.warn("Invalid Texture Atlas XML given");return}var a=n.source[h];n.add("__BASE",h,0,0,a.width,a.height);for(var l=r.getElementsByTagName("SubTexture"),o,u=0;u<l.length;u++){var v=l[u].attributes,d=v.name.value,c=parseInt(v.x.value,10),p=parseInt(v.y.value,10),g=parseInt(v.width.value,10),m=parseInt(v.height.value,10);if(o=n.add(d,h,c,p,g,m),v.frameX){var x=Math.abs(parseInt(v.frameX.value,10)),y=Math.abs(parseInt(v.frameY.value,10)),T=parseInt(v.frameWidth.value,10),C=parseInt(v.frameHeight.value,10);o.setTrim(g,m,x,y,T,C)}}return n};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){var r=n.source[h];return n.add("__BASE",h,0,0,r.width,r.height),n};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){var r=n.source[h];return n.add("__BASE",h,0,0,r.width,r.height),n};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(77),h=function(r,a,l){if(!l.frames&&!l.textures){console.warn("Invalid Texture Atlas JSON Array");return}var o=r.source[a];r.add("__BASE",a,0,0,o.width,o.height);for(var u=Array.isArray(l.textures)?l.textures[a].frames:l.frames,v,d=0;d<u.length;d++){var c=u[d];v=r.add(c.filename,a,c.frame.x,c.frame.y,c.frame.w,c.frame.h),c.trimmed&&v.setTrim(c.sourceSize.w,c.sourceSize.h,c.spriteSourceSize.x,c.spriteSourceSize.y,c.spriteSourceSize.w,c.spriteSourceSize.h),c.rotated&&(v.rotated=!0,v.updateUVsInverted());var p=c.anchor||c.pivot;p&&(v.customPivot=!0,v.pivotX=p.x,v.pivotY=p.y),v.customData=n(c)}for(var g in l)g!=="frames"&&(Array.isArray(l[g])?r.customData[g]=l[g].slice(0):r.customData[g]=l[g]);return r};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(77),h=function(r,a,l){if(!l.frames){console.warn("Invalid Texture Atlas JSON Hash given, missing 'frames' Object");return}var o=r.source[a];r.add("__BASE",a,0,0,o.width,o.height);var u=l.frames,v;for(var d in u)if(!!u.hasOwnProperty(d)){var c=u[d];v=r.add(d,a,c.frame.x,c.frame.y,c.frame.w,c.frame.h),c.trimmed&&v.setTrim(c.sourceSize.w,c.sourceSize.h,c.spriteSourceSize.x,c.spriteSourceSize.y,c.spriteSourceSize.w,c.spriteSourceSize.h),c.rotated&&(v.rotated=!0,v.updateUVsInverted());var p=c.anchor||c.pivot;p&&(v.customPivot=!0,v.pivotX=p.x,v.pivotY=p.y),v.customData=n(c)}for(var g in l)g!=="frames"&&(Array.isArray(l[g])?r.customData[g]=l[g].slice(0):r.customData[g]=l[g]);return r};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(2),h=function(r,a,l,o,u,v,d){var c=n(d,"frameWidth",null),p=n(d,"frameHeight",c);if(c===null)throw new Error("TextureManager.SpriteSheet: Invalid frameWidth given.");var g=r.source[a];r.add("__BASE",a,0,0,g.width,g.height);var m=n(d,"startFrame",0),x=n(d,"endFrame",-1),y=n(d,"margin",0),T=n(d,"spacing",0),C=Math.floor((u-y+T)/(c+T)),S=Math.floor((v-y+T)/(p+T)),E=C*S;E===0&&console.warn("SpriteSheet frame dimensions will result in zero frames for texture:",r.key),(m>E||m<-E)&&(m=0),m<0&&(m=E+m),x!==-1&&(E=m+(x+1));for(var M=y,O=y,L=0,R=0,F=0;F<E;F++){L=0,R=0;var D=M+c,B=O+p;D>u&&(L=D-u),B>v&&(R=B-v),r.add(F,a,l+M,o+O,c-L,p-R),M+=c+T,M+c>u&&(M=y,O+=p+T)}return r};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(2),h=function(r,a,l){var o=n(l,"frameWidth",null),u=n(l,"frameHeight",o);if(!o)throw new Error("TextureManager.SpriteSheetFromAtlas: Invalid frameWidth given.");var v=r.source[0];r.add("__BASE",0,0,0,v.width,v.height),n(l,"startFrame",0),n(l,"endFrame",-1);for(var d=n(l,"margin",0),c=n(l,"spacing",0),p=a.cutX,g=a.cutY,m=a.cutWidth,x=a.cutHeight,y=a.realWidth,T=a.realHeight,C=Math.floor((y-d+c)/(o+c)),S=Math.floor((T-d+c)/(u+c)),E=a.x,M=o-E,O=o-(y-m-E),L=a.y,R=u-L,F=u-(T-x-L),D,B=d,N=d,U=0,X=a.sourceIndex,K=0;K<S;K++){for(var k=K===0,b=K===S-1,I=0;I<C;I++){var G=I===0,Y=I===C-1;if(D=r.add(U,X,p+B,g+N,o,u),G||k||Y||b){var V=G?E:0,W=k?L:0,H=0,Z=0;G&&(H+=o-M),Y&&(H+=o-O),k&&(Z+=u-R),b&&(Z+=u-F);var q=o-H,_=u-Z;D.cutWidth=q,D.cutHeight=_,D.setTrim(o,u,V,W,q,_)}B+=c,G?B+=M:Y?B+=O:B+=o,U++}B=d,N+=c,k?N+=R:b?N+=F:N+=u}return r};e.exports=h},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=0,n=function(r,a,l,o){var u=i-o.y-o.height;r.add(l,a,o.x,u,o.width,o.height)},h=function(r,a,l){var o=r.source[a];r.add("__BASE",a,0,0,o.width,o.height),i=o.height;for(var u=l.split(`
`),v=/^[ ]*(- )*(\w+)+[: ]+(.*)/,d="",c="",p={x:0,y:0,width:0,height:0},g=0;g<u.length;g++){var m=u[g].match(v);if(!!m){var x=m[1]==="- ",y=m[2],T=m[3];if(x&&(c!==d&&(n(r,a,c,p),d=c),p={x:0,y:0,width:0,height:0}),y==="name"){c=T;continue}switch(y){case"x":case"y":case"width":case"height":p[y]=parseInt(T,10);break}}}return c!==d&&n(r,a,c,p),r};e.exports=h},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="complete"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="decoded"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="decodedall"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="destroy"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="detune"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="detune"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="mute"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="rate"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="volume"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="loop"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="looped"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="mute"},function(e,f){/**
 * @author       pi-kei
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pan"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pauseall"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pause"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="play"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="rate"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="resumeall"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="resume"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="seek"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="stopall"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="stop"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="unlocked"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="volume"},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n={Events:i(75),DisplayList:i(1012),GameObjectCreator:i(16),GameObjectFactory:i(5),UpdateList:i(1040),Components:i(11),GetCalcMatrix:i(19),BuildGameObject:i(28),BuildGameObjectAnimation:i(439),GameObject:i(15),BitmapText:i(148),Blitter:i(213),Bob:i(440),Container:i(214),DOMElement:i(442),DynamicBitmapText:i(215),Extern:i(444),Graphics:i(216),Group:i(113),Image:i(125),Layer:i(219),Particles:i(1074),PathFollower:i(457),RenderTexture:i(221),RetroFont:i(1082),Rope:i(223),Sprite:i(73),Text:i(224),GetTextSize:i(458),MeasureText:i(460),TextStyle:i(459),TileSprite:i(225),Zone:i(129),Video:i(226),Shape:i(34),Arc:i(461),Curve:i(462),Ellipse:i(463),Grid:i(464),IsoBox:i(465),IsoTriangle:i(466),Line:i(467),Polygon:i(468),Rectangle:i(473),Star:i(474),Triangle:i(475),Factories:{Blitter:i(1130),Container:i(1131),DOMElement:i(1132),DynamicBitmapText:i(1133),Extern:i(1134),Graphics:i(1135),Group:i(1136),Image:i(1137),Layer:i(1138),Particles:i(1139),PathFollower:i(1140),RenderTexture:i(1141),Rope:i(1142),Sprite:i(1143),StaticBitmapText:i(1144),Text:i(1145),TileSprite:i(1146),Zone:i(1147),Video:i(1148),Arc:i(1149),Curve:i(1150),Ellipse:i(1151),Grid:i(1152),IsoBox:i(1153),IsoTriangle:i(1154),Line:i(1155),Polygon:i(1156),Rectangle:i(1157),Star:i(1158),Triangle:i(1159)},Creators:{Blitter:i(1160),Container:i(1161),DynamicBitmapText:i(1162),Graphics:i(1163),Group:i(1164),Image:i(1165),Layer:i(1166),Particles:i(1167),RenderTexture:i(1168),Rope:i(1169),Sprite:i(1170),StaticBitmapText:i(1171),Text:i(1172),TileSprite:i(1173),Zone:i(1174),Video:i(1175)}};n.Shader=i(229),n.Mesh=i(230),n.PointLight=i(150),n.Factories.Shader=i(1184),n.Factories.Mesh=i(1185),n.Factories.PointLight=i(1186),n.Creators.Shader=i(1187),n.Creators.Mesh=i(1188),n.Creators.PointLight=i(1189),n.Light=i(481),n.LightsManager=i(482),n.LightsPlugin=i(1190),e.exports=n},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(110),r=i(24),a=i(75),l=i(20),o=i(79),u=new n({Extends:h,initialize:function(d){h.call(this,d),this.sortChildrenFlag=!1,this.scene=d,this.systems=d.sys,this.events=d.sys.events,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.events.once(l.BOOT,this.boot,this),this.events.on(l.START,this.start,this)},boot:function(){this.events.once(l.DESTROY,this.destroy,this)},addChildCallback:function(v){v.displayList&&v.displayList!==this&&v.removeFromDisplayList(),v.displayList||(this.queueDepthSort(),v.displayList=this,v.emit(a.ADDED_TO_SCENE,v,this.scene),this.events.emit(l.ADDED_TO_SCENE,v,this.scene))},removeChildCallback:function(v){this.queueDepthSort(),v.displayList=null,v.emit(a.REMOVED_FROM_SCENE,v,this.scene),this.events.emit(l.REMOVED_FROM_SCENE,v,this.scene)},start:function(){this.events.once(l.SHUTDOWN,this.shutdown,this)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(o(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(v,d){return v._depth-d._depth},getChildren:function(){return this.list},shutdown:function(){for(var v=this.list,d=v.length;d--;)v[d].destroy(!0);v.length=0,this.events.off(l.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(l.START,this.start,this),this.scene=null,this.systems=null,this.events=null}});r.register("DisplayList",u,"displayList"),e.exports=u},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={CheckMatrix:i(209),MatrixToString:i(1014),ReverseColumns:i(1015),ReverseRows:i(1016),Rotate180:i(1017),RotateLeft:i(1018),RotateMatrix:i(147),RotateRight:i(1019),Translate:i(1020),TransposeMatrix:i(435)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(186),h=i(209),r=function(a){var l="";if(!h(a))return l;for(var o=0;o<a.length;o++){for(var u=0;u<a[o].length;u++){var v=a[o][u].toString();v!=="undefined"?l+=n(v,2):l+="?",u<a[o].length-1&&(l+=" |")}if(o<a.length-1){l+=`
`;for(var d=0;d<a[o].length;d++)l+="---",d<a[o].length-1&&(l+="+");l+=`
`}}return l};e.exports=r},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n.reverse()};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){for(var h=0;h<n.length;h++)n[h].reverse();return n};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(147),h=function(r){return n(r,180)};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(147),h=function(r){return n(r,90)};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(147),h=function(r){return n(r,-90)};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(178),h=i(179),r=function(a,l,o){if(l===void 0&&(l=0),o===void 0&&(o=0),o!==0&&(o<0?n(a,Math.abs(o)):h(a,o)),l!==0)for(var u=0;u<a.length;u++){var v=a[u];l<0?n(v,Math.abs(l)):h(v,l)}return a};e.exports=r},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r,a,l){if(l===void 0&&(l=n),r>0){var o=r-n.length;if(o<=0)return null}if(!Array.isArray(h))return n.indexOf(h)===-1?(n.push(h),a&&a.call(l,h),h):null;for(var u=h.length-1;u>=0;)n.indexOf(h[u])!==-1&&h.splice(u,1),u--;if(u=h.length,u===0)return null;r>0&&u>o&&(h.splice(o),u=o);for(var v=0;v<u;v++){var d=h[v];n.push(d),a&&a.call(l,d)}return h};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r,a,l,o){if(r===void 0&&(r=0),o===void 0&&(o=n),a>0){var u=a-n.length;if(u<=0)return null}if(!Array.isArray(h))return n.indexOf(h)===-1?(n.splice(r,0,h),l&&l.call(o,h),h):null;for(var v=h.length-1;v>=0;)n.indexOf(h[v])!==-1&&h.pop(),v--;if(v=h.length,v===0)return null;a>0&&v>u&&(h.splice(u),v=u);for(var d=v-1;d>=0;d--){var c=h[d];n.splice(r,0,c),l&&l.call(o,c)}return h};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){var r=n.indexOf(h);return r!==-1&&r<n.length&&(n.splice(r,1),n.push(h)),h};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(78),h=function(r,a,l,o,u){o===void 0&&(o=0),u===void 0&&(u=r.length);var v=0;if(n(r,o,u))for(var d=o;d<u;d++){var c=r[d];c[a]===l&&v++}return v};e.exports=h},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r){var a,l=[null];for(a=3;a<arguments.length;a++)l.push(arguments[a]);for(a=0;a<n.length;a++)l[0]=n[a],h.apply(r,l);return n};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(78),h=function(r,a,l,o,u){if(o===void 0&&(o=0),u===void 0&&(u=r.length),n(r,o,u)){var v,d=[null];for(v=5;v<arguments.length;v++)d.push(arguments[v]);for(v=o;v<u;v++)d[0]=r[v],a.apply(l,d)}return r};e.exports=h},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){var r=n.indexOf(h);if(r>0){var a=n[r-1],l=n.indexOf(a);n[r]=a,n[l]=h}return n};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r){var a=n.indexOf(h);if(a===-1||r<0||r>=n.length)throw new Error("Supplied index out of bounds");return a!==r&&(n.splice(a,1),n.splice(r,0,h)),h};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){var r=n.indexOf(h);if(r!==-1&&r<n.length-1){var a=n[r+1],l=n.indexOf(a);n[r]=a,n[l]=h}return n};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r){if(h===r)return n;var a=n.indexOf(h),l=n.indexOf(r);if(a<0||l<0)throw new Error("Supplied items must be elements of the same array");return a>l||(n.splice(a,1),l===n.length-1?n.push(h):n.splice(l,0,h)),n};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r){if(h===r)return n;var a=n.indexOf(h),l=n.indexOf(r);if(a<0||l<0)throw new Error("Supplied items must be elements of the same array");return a<l||(n.splice(a,1),l===0?n.unshift(h):n.splice(l,0,h)),n};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(363),h=function(r,a,l){r===void 0&&(r=0),a===void 0&&(a=null),l===void 0&&(l=1),a===null&&(a=r,r=0);for(var o=[],u=Math.max(n((a-r)/(l||1)),0),v=0;v<u;v++)o.push(r),r+=l;return o};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(74),h=function(r,a,l,o){if(o===void 0&&(o=r),a<0||a>r.length-1)throw new Error("Index out of bounds");var u=n(r,a);return l&&l.call(o,u),u};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(78),h=function(r,a,l,o,u){if(a===void 0&&(a=0),l===void 0&&(l=r.length),u===void 0&&(u=r),n(r,a,l)){var v=l-a,d=r.splice(a,v);if(o)for(var c=0;c<d.length;c++){var p=d[c];o.call(u,p)}return d}else return[]};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(74),h=function(r,a,l){a===void 0&&(a=0),l===void 0&&(l=r.length);var o=a+Math.floor(Math.random()*l);return n(r,o)};e.exports=h},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r){var a=n.indexOf(h),l=n.indexOf(r);return a!==-1&&l===-1?(n[a]=r,!0):!1};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){var r=n.indexOf(h);return r!==-1&&r>0&&(n.splice(r,1),n.unshift(h)),h};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(78),h=function(r,a,l,o,u){if(o===void 0&&(o=0),u===void 0&&(u=r.length),n(r,o,u))for(var v=o;v<u;v++){var d=r[v];d.hasOwnProperty(a)&&(d[a]=l)}return r};e.exports=h},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r){if(h===r)return n;var a=n.indexOf(h),l=n.indexOf(r);if(a<0||l<0)throw new Error("Supplied items must be elements of the same array");return n[a]=r,n[l]=h,n};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(211),r=i(24),a=i(20),l=new n({Extends:h,initialize:function(u){h.call(this),this.checkQueue=!0,this.scene=u,this.systems=u.sys,u.sys.events.once(a.BOOT,this.boot,this),u.sys.events.on(a.START,this.start,this)},boot:function(){this.systems.events.once(a.DESTROY,this.destroy,this)},start:function(){var o=this.systems.events;o.on(a.PRE_UPDATE,this.update,this),o.on(a.UPDATE,this.sceneUpdate,this),o.once(a.SHUTDOWN,this.shutdown,this)},sceneUpdate:function(o,u){for(var v=this._active,d=v.length,c=0;c<d;c++){var p=v[c];p.active&&p.preUpdate.call(p,o,u)}},shutdown:function(){for(var o=this._active.length;o--;)this._active[o].destroy(!0);for(o=this._pending.length;o--;)this._pending[o].destroy(!0);for(o=this._destroy.length;o--;)this._destroy[o].destroy(!0);this._toProcess=0,this._pending=[],this._active=[],this._destroy=[],this.removeAllListeners();var u=this.systems.events;u.off(a.PRE_UPDATE,this.update,this),u.off(a.UPDATE,this.sceneUpdate,this),u.off(a.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.systems.events.off(a.START,this.start,this),this.scene=null,this.systems=null}});r.register("UpdateList",l,"updateList"),e.exports=l},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="add"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="remove"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r,a){if(r===void 0&&(r=!1),a===void 0)return a={local:{x:0,y:0,width:0,height:0},global:{x:0,y:0,width:0,height:0},lines:{shortest:0,longest:0,lengths:null,height:0},wrappedText:"",words:[],characters:[],scaleX:0,scaleY:0},a;var l=n.text,o=l.length,u=n.maxWidth,v=n.wordWrapCharCode,d=Number.MAX_VALUE,c=Number.MAX_VALUE,p=0,g=0,m=n.fontData.chars,x=n.fontData.lineHeight,y=n.letterSpacing,T=0,C=0,S=0,E=null,M=n._align,O=0,L=0,R=n.fontSize/n.fontData.size,F=R*n.scaleX,D=R*n.scaleY,B=null,N=0,U=[],X=Number.MAX_VALUE,K=0,k=0,b=0,I,G=[],Y=[],V=null;if(u>0){for(I=0;I<o;I++){if(S=l.charCodeAt(I),S===10){V!==null&&(G.push({word:V.word,i:V.i,x:V.x*F,y:V.y*D,w:V.w*F,h:V.h*D,cr:!0}),V=null),T=0,C+=x,B=null;continue}if(E=m[S],!!E){if(B!==null)var W=E.kerning[N];S===v?V!==null&&(G.push({word:V.word,i:V.i,x:V.x*F,y:V.y*D,w:V.w*F,h:V.h*D,cr:!1}),V=null):(V===null&&(V={word:"",i:I,x:T,y:C,w:0,h:x,cr:!1}),V.word=V.word.concat(l[I]),V.w+=E.xOffset+E.xAdvance+(W!==void 0?W:0)),T+=E.xAdvance+y,B=E,N=S}}V!==null&&G.push({word:V.word,i:V.i,x:V.x*F,y:V.y*D,w:V.w*F,h:V.h*D,cr:!1}),T=0,C=0,B=null,N=0;var H,Z=0,q=[];for(I=0;I<G.length;I++){var _=G[I],nt=_.x,rt=_.x+_.w;if(H){var at=nt-(H.x+H.w);Z=nt-(at+H.w),H=null}var ct=nt-Z,ut=rt-Z;ct>u||ut>u?(q.push(_.i-1),_.cr?(q.push(_.i+_.word.length),Z=0,H=null):H=_):_.cr&&(q.push(_.i+_.word.length),Z=0,H=null)}var vt=function(ee,re,Ie){return ee.substr(0,re)+Ie+ee.substr(re+1)};for(I=q.length-1;I>=0;I--)l=vt(l,q[I],`
`);a.wrappedText=l,o=l.length,G=[],V=null}var It=0;for(I=0;I<o;I++){if(S=l.charCodeAt(I),S===10){V!==null&&(G.push({word:V.word,i:V.i,x:V.x*F,y:V.y*D,w:V.w*F,h:V.h*D}),V=null),T=0,C+=x,B=null,U[k]=b,b>K&&(K=b),b<X&&(X=b),k++,b=0;continue}if(E=m[S],!!E){if(O=T,L=C,B!==null){var St=E.kerning[N];O+=St!==void 0?St:0}d>O&&(d=O),c>L&&(c=L);var Et=O+E.xAdvance,dt=L+x;p<Et&&(p=Et),g<dt&&(g=dt);var Bt=E.xOffset+E.xAdvance+(St!==void 0?St:0);S===v?V!==null&&(G.push({word:V.word,i:V.i,x:V.x*F,y:V.y*D,w:V.w*F,h:V.h*D}),V=null):(V===null&&(V={word:"",i:It,x:T,y:C,w:0,h:x}),V.word=V.word.concat(l[I]),V.w+=Bt),Y.push({i:It,char:l[I],code:S,x:(E.xOffset+T)*R,y:(E.yOffset+C)*R,w:E.width*R,h:E.height*R,t:C*R,r:Et*R,b:x*R,line:k,glyph:E}),T+=E.xAdvance+y,B=E,N=S,b=Et*R,It++}}if(V!==null&&G.push({word:V.word,i:V.i,x:V.x*F,y:V.y*D,w:V.w*F,h:V.h*D}),U[k]=b,b>K&&(K=b),b<X&&(X=b),M>0)for(var mt=0;mt<Y.length;mt++){var At=Y[mt];if(M===1){var Ae=(K-U[At.line])/2;At.x+=Ae,At.r+=Ae}else if(M===2){var $e=K-U[At.line];At.x+=$e,At.r+=$e}}var Zt=a.local,Xt=a.global,se=a.lines;return Zt.x=d*R,Zt.y=c*R,Zt.width=p*R,Zt.height=g*R,Xt.x=n.x-n._displayOriginX+d*F,Xt.y=n.y-n._displayOriginY+c*D,Xt.width=p*F,Xt.height=g*D,se.shortest=X,se.longest=K,se.lengths=U,h&&(Zt.x=Math.ceil(Zt.x),Zt.y=Math.ceil(Zt.y),Zt.width=Math.ceil(Zt.width),Zt.height=Math.ceil(Zt.height),Xt.x=Math.ceil(Xt.x),Xt.y=Math.ceil(Xt.y),Xt.width=Math.ceil(Xt.width),Xt.height=Math.ceil(Xt.height),se.shortest=Math.ceil(X),se.longest=Math.ceil(K)),r&&(n._displayOriginX=n.originX*Zt.width,n._displayOriginY=n.originY*Zt.height,Xt.x=n.x-n._displayOriginX*n.scaleX,Xt.y=n.y-n._displayOriginY*n.scaleY,h&&(Xt.x=Math.ceil(Xt.x),Xt.y=Math.ceil(Xt.y))),a.words=G,a.characters=Y,a.lines.height=x,a.scale=R,a.scaleX=n.scaleX,a.scaleY=n.scaleY,a};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(212),h=function(r,a,l,o,u,v,d){var c=r.sys.textures.get(l),p=c.get(o),g=r.sys.cache.xml.get(u);if(p&&g){var m=n(g,p,v,d,c);return r.sys.cache.bitmapFont.add(a,{data:m,texture:l,frame:o,fromAtlas:!0}),!0}else return!1};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),h=i(1);n=i(1046),h=i(1048),e.exports={renderWebGL:n,renderCanvas:h}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1047),h=i(19),r=i(12),a=function(l,o,u,v){var d=o._text,c=d.length;if(c!==0){u.addToRenderList(o);var p=l.pipelines.set(o.pipeline,o),g=h(o,u,v).calc,m=u.roundPixels,x=u.alpha,y=o.charColors,T=o.tintFill,C=r.getTintAppendFloatAlpha,S=C(o.tintTopLeft,x*o._alphaTL),E=C(o.tintTopRight,x*o._alphaTR),M=C(o.tintBottomLeft,x*o._alphaBL),O=C(o.tintBottomRight,x*o._alphaBR),L=o.frame.glTexture,R=p.setGameObject(o),F=o.getTextBounds(!1),D,B,N,U=F.characters,X=o.dropShadowX,K=o.dropShadowY,k=X!==0||K!==0;if(l.pipelines.preBatch(o),k){var b=o.dropShadowColor,I=o.dropShadowAlpha,G=C(b,x*I*o._alphaTL),Y=C(b,x*I*o._alphaTR),V=C(b,x*I*o._alphaBL),W=C(b,x*I*o._alphaBR);for(D=0;D<U.length;D++)B=U[D],N=B.glyph,!(B.code===32||N.width===0||N.height===0)&&n(p,o,B,N,X,K,g,m,G,Y,V,W,1,L,R)}for(D=0;D<U.length;D++)if(B=U[D],N=B.glyph,!(B.code===32||N.width===0||N.height===0))if(y[B.i]){var H=y[B.i],Z=H.tintEffect,q=C(H.tintTL,x*o._alphaTL),_=C(H.tintTR,x*o._alphaTR),nt=C(H.tintBL,x*o._alphaBL),rt=C(H.tintBR,x*o._alphaBR);n(p,o,B,N,0,0,g,m,q,_,nt,rt,Z,L,R)}else n(p,o,B,N,0,0,g,m,S,E,M,O,T,L,R);l.pipelines.postBatch(o)}};e.exports=a},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r,a,l,o,u,v,d,c,p,g,m,x,y){var T=r.x-h.displayOriginX+l,C=r.y-h.displayOriginY+o,S=T+r.w,E=C+r.h,M=u.getXRound(T,C,v),O=u.getYRound(T,C,v),L=u.getXRound(T,E,v),R=u.getYRound(T,E,v),F=u.getXRound(S,E,v),D=u.getYRound(S,E,v),B=u.getXRound(S,C,v),N=u.getYRound(S,C,v);n.batchQuad(h,M,O,L,R,F,D,B,N,a.u0,a.v0,a.u1,a.v1,d,c,p,g,m,x,y)};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(30),h=function(r,a,l,o){var u=a._text,v=u.length,d=r.currentContext;if(!(v===0||!n(r,d,a,l,o))){l.addToRenderList(a);var c=a.fromAtlas?a.frame:a.texture.frames.__BASE,p=a.fontData.chars,g=a.fontData.lineHeight,m=a._letterSpacing,x=0,y=0,T=0,C=null,S=0,E=0,M=0,O=0,L=0,R=0,F=null,D=0,B=c.source.image,N=c.cutX,U=c.cutY,X=a._fontSize/a.fontData.size,K=a._align,k=0,b=0,I=a.getTextBounds(!1);a.maxWidth>0&&(u=I.wrappedText,v=u.length);var G=a._bounds.lines;K===1?b=(G.longest-G.lengths[0])/2:K===2&&(b=G.longest-G.lengths[0]),d.translate(-a.displayOriginX,-a.displayOriginY);for(var Y=l.roundPixels,V=0;V<v;V++){if(T=u.charCodeAt(V),T===10){k++,K===1?b=(G.longest-G.lengths[k])/2:K===2&&(b=G.longest-G.lengths[k]),x=0,y+=g,F=null;continue}if(C=p[T],!!C){if(S=N+C.x,E=U+C.y,M=C.width,O=C.height,L=C.xOffset+x,R=C.yOffset+y,F!==null){var W=C.kerning[D];L+=W!==void 0?W:0}L*=X,R*=X,L+=b,x+=C.xAdvance+m,F=C,D=T,!(M===0||O===0||T===32)&&(Y&&(L=Math.round(L),R=Math.round(R)),d.save(),d.translate(L,R),d.scale(X,X),d.drawImage(B,S,E,M,O,0,0,M,O),d.restore())}}d.restore()}};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),h=i(1);n=i(1050),h=i(1051),e.exports={renderWebGL:n,renderCanvas:h}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(25),h=i(12),r=new n,a=function(l,o,u,v){var d=o.getRenderList();if(d.length!==0){var c=u.alpha*o.alpha;if(c!==0){u.addToRenderList(o);var p=l.pipelines.set(this.pipeline,o),g=u.scrollX*o.scrollFactorX,m=u.scrollY*o.scrollFactorY,x=r.copyFrom(u.matrix);v&&(x.multiplyWithOffset(v,-g,-m),g=0,m=0);var y=o.x-g,T=o.y-m,C=-1,S=!1,E=u.roundPixels;l.pipelines.preBatch(o);for(var M=0;M<d.length;M++){var O=d[M],L=O.frame,R=O.alpha*c;if(R!==0){var F=L.width,D=L.height,B=y+O.x+L.x,N=T+O.y+L.y;O.flipX&&(F*=-1,B+=L.width),O.flipY&&(D*=-1,N+=L.height);var U=B+F,X=N+D,K=x.getX(B,N),k=x.getY(B,N),b=x.getX(U,X),I=x.getY(U,X),G=h.getTintAppendFloatAlpha(O.tint,R);if(L.sourceIndex!==C){var Y=p.setGameObject(o,L);C=L.sourceIndex}E&&(K=Math.round(K),k=Math.round(k),b=Math.round(b),I=Math.round(I)),p.batchQuad(o,K,k,K,I,b,I,b,k,L.u0,L.v0,L.u1,L.v1,G,G,G,G,S,L.glTexture,Y)&&(C=-1)}}l.pipelines.postBatch(o)}}};e.exports=a},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r,a){var l=h.getRenderList();if(l.length!==0){var o=n.currentContext,u=r.alpha*h.alpha;if(u!==0){r.addToRenderList(h),o.globalCompositeOperation=n.blendModes[h.blendMode],o.imageSmoothingEnabled=!(!n.antialias||h.frame.source.scaleMode);var v=h.x-r.scrollX*h.scrollFactorX,d=h.y-r.scrollY*h.scrollFactorY;o.save(),a&&a.copyToContext(o);for(var c=r.roundPixels,p=0;p<l.length;p++){var g=l[p],m=g.flipX||g.flipY,x=g.frame,y=x.canvasData,T=x.x,C=x.y,S=1,E=1,M=g.alpha*u;M!==0&&(o.globalAlpha=M,m?(g.flipX&&(S=-1,T-=y.width),g.flipY&&(E=-1,C-=y.height),o.save(),o.translate(g.x+v,g.y+d),o.scale(S,E),o.drawImage(x.source.image,y.x,y.y,y.width,y.height,T,C,y.width,y.height),o.restore()):(c&&(T=Math.round(T),C=Math.round(C)),o.drawImage(x.source.image,y.x,y.y,y.width,y.height,T+g.x+v,C+g.y+d,y.width,y.height)))}o.restore()}}};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),h=i(1);n=i(1053),h=i(1054),e.exports={renderWebGL:n,renderCanvas:h}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r,a){r.addToRenderList(h);var l=h.list,o=l.length;if(o!==0){var u=h.localTransform;a?(u.loadIdentity(),u.multiply(a),u.translate(h.x,h.y),u.rotate(h.rotation),u.scale(h.scaleX,h.scaleY)):u.applyITRS(h.x,h.y,h.rotation,h.scaleX,h.scaleY),n.pipelines.preBatch(h);var v=h.blendMode!==-1;v||n.setBlendMode(0);for(var d=h.alpha,c=h.scrollFactorX,p=h.scrollFactorY,g=0;g<o;g++){var m=l[g];if(!!m.willRender(r)){var x,y,T,C;if(m.alphaTopLeft!==void 0)x=m.alphaTopLeft,y=m.alphaTopRight,T=m.alphaBottomLeft,C=m.alphaBottomRight;else{var S=m.alpha;x=S,y=S,T=S,C=S}var E=m.scrollFactorX,M=m.scrollFactorY;!v&&m.blendMode!==n.currentBlendMode&&n.setBlendMode(m.blendMode);var O=m.mask;O&&O.preRenderWebGL(n,m,r);var L=m.type;L!==n.currentType&&(n.newType=!0,n.currentType=L),n.nextTypeMatch=g<o-1?l[g+1].type===n.currentType:!1,m.setScrollFactor(E*c,M*p),m.setAlpha(x*d,y*d,T*d,C*d),m.renderWebGL(n,m,r,u),m.setAlpha(x,y,T,C),m.setScrollFactor(E,M),O&&O.postRenderWebGL(n,r),n.newType=!1}}n.pipelines.postBatch(h)}};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r,a){r.addToRenderList(h);var l=h.list;if(l.length!==0){var o=h.localTransform;a?(o.loadIdentity(),o.multiply(a),o.translate(h.x,h.y),o.rotate(h.rotation),o.scale(h.scaleX,h.scaleY)):o.applyITRS(h.x,h.y,h.rotation,h.scaleX,h.scaleY);var u=h.blendMode!==-1;u||n.setBlendMode(0);var v=h._alpha,d=h.scrollFactorX,c=h.scrollFactorY;h.mask&&h.mask.preRenderCanvas(n,null,r);for(var p=0;p<l.length;p++){var g=l[p];if(!!g.willRender(r)){var m=g.alpha,x=g.scrollFactorX,y=g.scrollFactorY;!u&&g.blendMode!==n.currentBlendMode&&n.setBlendMode(g.blendMode),g.setScrollFactor(x*d,y*c),g.setAlpha(m*v),g.renderCanvas(n,g,r,o),g.setAlpha(m),g.setScrollFactor(x,y)}}h.mask&&h.mask.postRenderCanvas(n)}};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),h=i(1);n=i(443),h=i(443),e.exports={renderWebGL:n,renderCanvas:h}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports=["normal","multiply","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),h=i(1);n=i(1058),h=i(1059),e.exports={renderWebGL:n,renderCanvas:h}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(19),h=i(25),r=i(12),a=new h,l=function(o,u,v,d){var c=u.text,p=c.length;if(p!==0){v.addToRenderList(u);var g=o.pipelines.set(u.pipeline,u),m=n(u,v,d),x=m.sprite,y=m.calc,T=a,C=u.cropWidth>0||u.cropHeight>0;C&&(g.flush(),o.pushScissor(y.tx,y.ty,u.cropWidth*y.scaleX,u.cropHeight*y.scaleY));var S=u.frame,E=S.glTexture,M=u.tintFill,O=r.getTintAppendFloatAlpha(u.tintTopLeft,v.alpha*u._alphaTL),L=r.getTintAppendFloatAlpha(u.tintTopRight,v.alpha*u._alphaTR),R=r.getTintAppendFloatAlpha(u.tintBottomLeft,v.alpha*u._alphaBL),F=r.getTintAppendFloatAlpha(u.tintBottomRight,v.alpha*u._alphaBR),D=g.setGameObject(u),B=0,N=0,U=0,X=0,K=u.letterSpacing,k,b=0,I=0,G,Y=u.scrollX,V=u.scrollY,W=u.fontData,H=W.chars,Z=W.lineHeight,q=u.fontSize/W.size,_=0,nt=u._align,rt=0,at=0,ct=u.getTextBounds(!1);u.maxWidth>0&&(c=ct.wrappedText,p=c.length);var ut=u._bounds.lines;nt===1?at=(ut.longest-ut.lengths[0])/2:nt===2&&(at=ut.longest-ut.lengths[0]);var vt=v.roundPixels,It=u.displayCallback,St=u.callbackData;o.pipelines.preBatch(u);for(var Et=0;Et<p;Et++){if(U=c.charCodeAt(Et),U===10){rt++,nt===1?at=(ut.longest-ut.lengths[rt])/2:nt===2&&(at=ut.longest-ut.lengths[rt]),B=0,N+=Z,G=null;continue}if(k=H[U],!!k){b=k.width,I=k.height;var dt=k.xOffset+B-Y,Bt=k.yOffset+N-V;if(G!==null){var mt=k.kerning[X];dt+=mt!==void 0?mt:0}if(B+=k.xAdvance+K,G=k,X=U,!(b===0||I===0||U===32)){if(q=u.fontSize/u.fontData.size,_=0,It){St.color=0,St.tint.topLeft=O,St.tint.topRight=L,St.tint.bottomLeft=R,St.tint.bottomRight=F,St.index=Et,St.charCode=U,St.x=dt,St.y=Bt,St.scale=q,St.rotation=_,St.data=k.data;var At=It(St);dt=At.x,Bt=At.y,q=At.scale,_=At.rotation,At.color?(O=At.color,L=At.color,R=At.color,F=At.color):(O=At.tint.topLeft,L=At.tint.topRight,R=At.tint.bottomLeft,F=At.tint.bottomRight),O=r.getTintAppendFloatAlpha(O,v.alpha*u._alphaTL),L=r.getTintAppendFloatAlpha(L,v.alpha*u._alphaTR),R=r.getTintAppendFloatAlpha(R,v.alpha*u._alphaBL),F=r.getTintAppendFloatAlpha(F,v.alpha*u._alphaBR)}dt*=q,Bt*=q,dt-=u.displayOriginX,Bt-=u.displayOriginY,dt+=at,T.applyITRS(dt,Bt,_,q,q),y.multiply(T,x);var Ae=k.u0,$e=k.v0,Zt=k.u1,Xt=k.v1,se=b,ee=I,re=x.e,Ie=x.f,yi=ee*x.c+x.e,Ti=ee*x.d+x.f,Ci=se*x.a+ee*x.c+x.e,Si=se*x.b+ee*x.d+x.f,Ei=se*x.a+x.e,Pi=se*x.b+x.f;vt&&(re=Math.round(re),Ie=Math.round(Ie),yi=Math.round(yi),Ti=Math.round(Ti),Ci=Math.round(Ci),Si=Math.round(Si),Ei=Math.round(Ei),Pi=Math.round(Pi)),g.batchQuad(u,re,Ie,yi,Ti,Ci,Si,Ei,Pi,Ae,$e,Zt,Xt,O,L,R,F,M,E,D)}}}C&&(g.flush(),o.popScissor()),o.pipelines.postBatch(u)}};e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(30),h=function(r,a,l,o){var u=a._text,v=u.length,d=r.currentContext;if(!(v===0||!n(r,d,a,l,o))){l.addToRenderList(a);var c=a.fromAtlas?a.frame:a.texture.frames.__BASE,p=a.displayCallback,g=a.callbackData,m=a.fontData.chars,x=a.fontData.lineHeight,y=a._letterSpacing,T=0,C=0,S=0,E=null,M=0,O=0,L=0,R=0,F=0,D=0,B=null,N=0,U=a.frame.source.image,X=c.cutX,K=c.cutY,k=0,b=0,I=a._fontSize/a.fontData.size,G=a._align,Y=0,V=0;a.getTextBounds(!1);var W=a._bounds.lines;G===1?V=(W.longest-W.lengths[0])/2:G===2&&(V=W.longest-W.lengths[0]),d.translate(-a.displayOriginX,-a.displayOriginY);var H=l.roundPixels;a.cropWidth>0&&a.cropHeight>0&&(d.beginPath(),d.rect(0,0,a.cropWidth,a.cropHeight),d.clip());for(var Z=0;Z<v;Z++){if(b=I,k=0,S=u.charCodeAt(Z),S===10){Y++,G===1?V=(W.longest-W.lengths[Y])/2:G===2&&(V=W.longest-W.lengths[Y]),T=0,C+=x,B=null;continue}if(E=m[S],!!E){if(M=X+E.x,O=K+E.y,L=E.width,R=E.height,F=E.xOffset+T-a.scrollX,D=E.yOffset+C-a.scrollY,B!==null){var q=E.kerning[N];F+=q!==void 0?q:0}if(p){g.index=Z,g.charCode=S,g.x=F,g.y=D,g.scale=b,g.rotation=k,g.data=E.data;var _=p(g);F=_.x,D=_.y,b=_.scale,k=_.rotation}F*=b,D*=b,F+=V,T+=E.xAdvance+y,B=E,N=S,!(L===0||R===0||S===32)&&(H&&(F=Math.round(F),D=Math.round(D)),d.save(),d.translate(F,D),d.rotate(k),d.scale(b,b),d.drawImage(U,M,O,L,R,0,0,L,R),d.restore())}}d.restore()}};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),h=i(1);n=i(1061),h=i(1062),e.exports={renderWebGL:n,renderCanvas:h}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(19),h=function(r,a,l,o){r.pipelines.clear();var u=n(a,l,o).calc;a.render.call(a,r,l,u),r.pipelines.rebind()};e.exports=h},function(e,f){},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),h=i(1);n=i(1064),h=i(448),h=i(448),e.exports={renderWebGL:n,renderCanvas:h}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(217),h=i(19),r=i(25),a=i(12),l=function(c,p,g){this.x=c,this.y=p,this.width=g},o=function(c,p,g){this.points=[],this.pointsLength=1,this.points[0]=new l(c,p,g)},u=[],v=new r,d=function(c,p,g,m){if(p.commandBuffer.length!==0){g.addToRenderList(p);var x=c.pipelines.set(p.pipeline,p);c.pipelines.preBatch(p);for(var y=h(p,g,m).calc,T=v.loadIdentity(),C=p.commandBuffer,S=g.alpha*p.alpha,E=1,M=x.fillTint,O=x.strokeTint,L=0,R=0,F=0,D=.01,B=Math.PI*2,N,U=[],X=0,K=!0,k=null,b=a.getTintAppendFloatAlpha,I=0;I<C.length;I++)switch(N=C[I],N){case n.BEGIN_PATH:{U.length=0,k=null,K=!0;break}case n.CLOSE_PATH:{K=!1,k&&k.points.length&&k.points.push(k.points[0]);break}case n.FILL_PATH:{for(X=0;X<U.length;X++)x.batchFillPath(U[X].points,T,y);break}case n.STROKE_PATH:{for(X=0;X<U.length;X++)x.batchStrokePath(U[X].points,E,K,T,y);break}case n.LINE_STYLE:{E=C[++I];var G=C[++I],Y=C[++I]*S,V=b(G,Y);O.TL=V,O.TR=V,O.BL=V,O.BR=V;break}case n.FILL_STYLE:{var W=C[++I],H=C[++I]*S,Z=b(W,H);M.TL=Z,M.TR=Z,M.BL=Z,M.BR=Z;break}case n.GRADIENT_FILL_STYLE:{var q=C[++I]*S,_=C[++I]*S,nt=C[++I]*S,rt=C[++I]*S;M.TL=b(C[++I],q),M.TR=b(C[++I],_),M.BL=b(C[++I],nt),M.BR=b(C[++I],rt);break}case n.GRADIENT_LINE_STYLE:{E=C[++I];var at=C[++I]*S;O.TL=b(C[++I],at),O.TR=b(C[++I],at),O.BL=b(C[++I],at),O.BR=b(C[++I],at);break}case n.ARC:{var ct=0,ut=C[++I],vt=C[++I],It=C[++I],St=C[++I],Et=C[++I],dt=C[++I],Bt=C[++I];for(Et-=St,dt?Et<-B?Et=-B:Et>0&&(Et=-B+Et%B):Et>B?Et=B:Et<0&&(Et=B+Et%B),k===null&&(k=new o(ut+Math.cos(St)*It,vt+Math.sin(St)*It,E),U.push(k),ct+=D);ct<1+Bt;)F=Et*ct+St,L=ut+Math.cos(F)*It,R=vt+Math.sin(F)*It,k.points.push(new l(L,R,E)),ct+=D;F=Et+St,L=ut+Math.cos(F)*It,R=vt+Math.sin(F)*It,k.points.push(new l(L,R,E));break}case n.FILL_RECT:{x.batchFillRect(C[++I],C[++I],C[++I],C[++I],T,y);break}case n.FILL_TRIANGLE:{x.batchFillTriangle(C[++I],C[++I],C[++I],C[++I],C[++I],C[++I],T,y);break}case n.STROKE_TRIANGLE:{x.batchStrokeTriangle(C[++I],C[++I],C[++I],C[++I],C[++I],C[++I],E,T,y);break}case n.LINE_TO:{k!==null?k.points.push(new l(C[++I],C[++I],E)):(k=new o(C[++I],C[++I],E),U.push(k));break}case n.MOVE_TO:{k=new o(C[++I],C[++I],E),U.push(k);break}case n.SAVE:{u.push(T.copyToArray());break}case n.RESTORE:{T.copyFromArray(u.pop());break}case n.TRANSLATE:{ut=C[++I],vt=C[++I],T.translate(ut,vt);break}case n.SCALE:{ut=C[++I],vt=C[++I],T.scale(ut,vt);break}case n.ROTATE:{T.rotate(C[++I]);break}}c.pipelines.postBatch(p)}};e.exports=d},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),h=i(1);n=i(1066),h=i(1067),e.exports={renderWebGL:n,renderCanvas:h}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r,a){r.addToRenderList(h),h.pipeline.batchSprite(h,r,a)};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r,a){r.addToRenderList(h),n.batchSprite(h,h.frame,r,a)};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),h=i(1);n=i(1069),h=i(1070),e.exports={renderWebGL:n,renderCanvas:h}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r,a){r.addToRenderList(h),this.pipeline.batchSprite(h,r,a)};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r,a){r.addToRenderList(h),n.batchSprite(h,h.frame,r,a)};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),h=i(1);n=i(1072),h=i(1073),e.exports={renderWebGL:n,renderCanvas:h}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r){var a=h.list,l=a.length;if(l!==0){h.depthSort(),n.pipelines.preBatch(h);var o=h.blendMode!==-1;o||n.setBlendMode(0);for(var u=h.alpha,v=0;v<l;v++){var d=a[v];if(!!d.willRender(r)){var c,p,g,m;if(d.alphaTopLeft!==void 0)c=d.alphaTopLeft,p=d.alphaTopRight,g=d.alphaBottomLeft,m=d.alphaBottomRight;else{var x=d.alpha;c=x,p=x,g=x,m=x}!o&&d.blendMode!==n.currentBlendMode&&n.setBlendMode(d.blendMode);var y=d.mask;y&&y.preRenderWebGL(n,d,r);var T=d.type;T!==n.currentType&&(n.newType=!0,n.currentType=T),n.nextTypeMatch=v<l-1?a[v+1].type===n.currentType:!1,d.setAlpha(c*u,p*u,g*u,m*u),d.renderWebGL(n,d,r),d.setAlpha(c,p,g,m),y&&y.postRenderWebGL(n,r),n.newType=!1}}n.pipelines.postBatch(h)}};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r){var a=h.list;if(a.length!==0){h.depthSort();var l=h.blendMode!==-1;l||n.setBlendMode(0);var o=h._alpha;h.mask&&h.mask.preRenderCanvas(n,null,r);for(var u=0;u<a.length;u++){var v=a[u];if(!!v.willRender(r)){var d=v.alpha;!l&&v.blendMode!==n.currentBlendMode&&n.setBlendMode(v.blendMode),v.setAlpha(d*o),v.renderCanvas(n,v,r),v.setAlpha(d)}}h.mask&&h.mask.postRenderCanvas(n)}};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={EmitterOp:i(449),GravityWell:i(450),Particle:i(451),ParticleEmitter:i(452),ParticleEmitterManager:i(220),Zones:i(1078)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),h=i(1);n=i(1076),h=i(1077),e.exports={renderWebGL:n,renderCanvas:h}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(25),h=i(12),r=new n,a=new n,l=new n,o=new n,u=function(v,d,c,p){var g=d.emitters.list,m=g.length;if(m!==0){var x=v.pipelines.set(d.pipeline),y=r,T=a,C=l,S=o;p?(S.loadIdentity(),S.multiply(p),S.translate(d.x,d.y),S.rotate(d.rotation),S.scale(d.scaleX,d.scaleY)):S.applyITRS(d.x,d.y,d.rotation,d.scaleX,d.scaleY);var E=c.roundPixels,M=d.defaultFrame.glTexture,O=h.getTintAppendFloatAlpha,L=x.setGameObject(d,d.defaultFrame);v.pipelines.preBatch(d);for(var R=0;R<m;R++){var F=g[R],D=F.alive,B=D.length;if(!(!F.visible||B===0)){c.addToRenderList(F);var N=F.scrollFactorX,U=F.scrollFactorY;v.setBlendMode(F.blendMode),F.mask&&(F.mask.preRenderWebGL(v,F,c),v.pipelines.set(d.pipeline));for(var X=0,K=0;K<B;K++){var k=D[K],b=k.alpha*c.alpha;if(!(b<=0)){C.applyITRS(k.x,k.y,k.rotation,k.scaleX,k.scaleY),y.copyFrom(c.matrix),y.multiplyWithOffset(S,-c.scrollX*N,-c.scrollY*U),C.e=k.x,C.f=k.y,y.multiply(C,T);var I=k.frame,G=-I.halfWidth,Y=-I.halfHeight,V=G+I.width,W=Y+I.height,H=T.getXRound(G,Y,E),Z=T.getYRound(G,Y,E),q=T.getXRound(G,W,E),_=T.getYRound(G,W,E),nt=T.getXRound(V,W,E),rt=T.getYRound(V,W,E),at=T.getXRound(V,Y,E),ct=T.getYRound(V,Y,E),ut=O(k.tint,b);x.batchQuad(F,H,Z,q,_,nt,rt,at,ct,I.u0,I.v0,I.u1,I.v1,ut,ut,ut,ut,X,M,L)}}F.mask&&F.mask.postRenderWebGL(v,c)}}v.pipelines.postBatch(d)}};e.exports=u},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(25),h=new n,r=new n,a=new n,l=new n,o=function(u,v,d,c){var p=v.emitters.list,g=p.length;if(g!==0){var m=h.copyFrom(d.matrix),x=r,y=a,T=l;c?(T.loadIdentity(),T.multiply(c),T.translate(v.x,v.y),T.rotate(v.rotation),T.scale(v.scaleX,v.scaleY)):T.applyITRS(v.x,v.y,v.rotation,v.scaleX,v.scaleY);for(var C=u.currentContext,S=d.roundPixels,E=0;E<g;E++){var M=p[E],O=M.alive,L=O.length;if(!(!M.visible||L===0)){d.addToRenderList(M);var R=M.scrollFactorX,F=M.scrollFactorY;C.save(),C.globalCompositeOperation=u.blendModes[M.blendMode];for(var D=0;D<L;D++){var B=O[D],N=B.alpha*d.alpha;if(!(N<=0)){y.applyITRS(B.x,B.y,B.rotation,B.scaleX,B.scaleY),m.copyFrom(d.matrix),m.multiplyWithOffset(T,-d.scrollX*R,-d.scrollY*F),y.e=B.x,y.f=B.y,m.multiply(y,x);var U=B.frame,X=U.canvasData,K=-U.halfWidth,k=-U.halfHeight;C.globalAlpha=N,C.save(),x.setToContext(C),S&&(K=Math.round(K),k=Math.round(k)),C.imageSmoothingEnabled=!(!u.antialias||U.source.scaleMode),C.drawImage(U.source.image,X.x,X.y,X.width,X.height,K,k,X.width,X.height),C.restore()}}C.restore()}}}};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={DeathZone:i(453),EdgeZone:i(454),RandomZone:i(456)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),h=i(1);n=i(1080),h=i(1081),e.exports={renderWebGL:n,renderCanvas:h}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(12),h=function(r,a,l,o){l.addToRenderList(a);var u=l.alpha,v=a.renderTarget,d=v.width,c=v.height,p=n.getTintAppendFloatAlpha,g=r.pipelines.set(a.pipeline),m=g.setTexture2D(v.texture);r.pipelines.preBatch(a),g.batchTexture(a,v.texture,d,c,a.x,a.y,d,c,a.scaleX,a.scaleY,a.rotation,a.flipX,!a.flipY,a.scrollFactorX,a.scrollFactorY,a.displayOriginX,a.displayOriginY,0,0,d,c,p(a.tintTopLeft,u*a._alphaTL),p(a.tintTopRight,u*a._alphaTR),p(a.tintBottomLeft,u*a._alphaBL),p(a.tintBottomRight,u*a._alphaBR),a.tintFill,0,0,l,o,!0,m),r.resetTextures(),r.pipelines.postBatch(a)};e.exports=h},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r,a){r.addToRenderList(h),n.batchSprite(h,h.frame,r,a)};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1083),h=i(17),r={Parse:i(1084)};r=h(!1,r,n),e.exports=r},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={TEXT_SET1:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",TEXT_SET2:` !"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ`,TEXT_SET3:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",TEXT_SET4:"ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789",TEXT_SET5:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789",TEXT_SET6:`ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789"(),-.' `,TEXT_SET7:`AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW")28FLRX-'39`,TEXT_SET8:"0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET9:`ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'"?!`,TEXT_SET10:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET11:`ABCDEFGHIJKLMNOPQRSTUVWXYZ.,"-+!?()':;0123456789`};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(6),h=function(r,a){var l=a.width,o=a.height,u=Math.floor(l/2),v=Math.floor(o/2),d=n(a,"chars","");if(d!==""){var c=n(a,"image",""),p=r.sys.textures.getFrame(c),g=p.cutX,m=p.cutY,x=p.source.width,y=p.source.height,T=n(a,"offset.x",0),C=n(a,"offset.y",0),S=n(a,"spacing.x",0),E=n(a,"spacing.y",0),M=n(a,"lineSpacing",0),O=n(a,"charsPerRow",null);O===null&&(O=x/l,O>d.length&&(O=d.length));for(var L=T,R=C,F={retroFont:!0,font:c,size:l,lineHeight:o+M,chars:{}},D=0,B=0;B<d.length;B++){var N=d.charCodeAt(B),U=(g+L)/x,X=(m+R)/y,K=(g+L+l)/x,k=(m+R+o)/y;F.chars[N]={x:L,y:R,width:l,height:o,centerX:u,centerY:v,xOffset:0,yOffset:0,xAdvance:l,data:{},kerning:{},u0:U,v0:X,u1:K,v1:k},D++,D===O?(D=0,L=T,R+=o+E):L+=l+S}var b={data:F,frame:null,texture:c};return b}};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),h=i(1);n=i(1086),h=i(1087),e.exports={renderWebGL:n,renderCanvas:h}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(19),h=i(12),r=function(a,l,o,u){o.addToRenderList(l);var v=a.pipelines.set(l.pipeline,l),d=n(l,o,u).calc,c=l.vertices,p=l.uv,g=l.colors,m=l.alphas,x=l.alpha,y=h.getTintAppendFloatAlpha,T=o.roundPixels,C=c.length,S=Math.floor(C*.5);v.flush(),a.pipelines.preBatch(l);var E=v.setGameObject(l),M=v.vertexViewF32,O=v.vertexViewU32,L=v.vertexCount*v.currentShader.vertexComponentCount-1,R=0,F=l.tintFill;l.dirty&&l.updateVertices();for(var D=l.debugCallback,B=[],N=0;N<C;N+=2){var U=c[N+0],X=c[N+1],K=U*d.a+X*d.c+d.e,k=U*d.b+X*d.d+d.f;T&&(K=Math.round(K),k=Math.round(k)),M[++L]=K,M[++L]=k,M[++L]=p[N+0],M[++L]=p[N+1],M[++L]=E,M[++L]=F,O[++L]=y(g[R],o.alpha*(m[R]*x)),R++,D&&(B[N+0]=K,B[N+1]=k)}D&&D.call(l,l,C,B),v.vertexCount+=S,a.pipelines.postBatch(l)};e.exports=r},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(){};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),h=i(1);n=i(1089),h=i(1090),e.exports={renderWebGL:n,renderCanvas:h}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(12),h=function(r,a,l,o){if(!(a.width===0||a.height===0)){l.addToRenderList(a);var u=a.frame,v=u.width,d=u.height,c=n.getTintAppendFloatAlpha,p=r.pipelines.set(a.pipeline,a),g=p.setTexture2D(u.glTexture,a);r.pipelines.preBatch(a),p.batchTexture(a,u.glTexture,v,d,a.x,a.y,v/a.style.resolution,d/a.style.resolution,a.scaleX,a.scaleY,a.rotation,a.flipX,a.flipY,a.scrollFactorX,a.scrollFactorY,a.displayOriginX,a.displayOriginY,0,0,v,d,c(a.tintTopLeft,l.alpha*a._alphaTL),c(a.tintTopRight,l.alpha*a._alphaTR),c(a.tintBottomLeft,l.alpha*a._alphaBL),c(a.tintBottomRight,l.alpha*a._alphaBR),a.tintFill,0,0,l,o,!1,g),r.pipelines.postBatch(a)}};e.exports=h},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r,a){h.width===0||h.height===0||(r.addToRenderList(h),n.batchSprite(h,h.frame,r,a))};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),h=i(1);n=i(1092),h=i(1093),e.exports={renderWebGL:n,renderCanvas:h}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(12),h=function(r,a,l,o){a.updateCanvas();var u=a.width,v=a.height;if(!(u===0||v===0)){l.addToRenderList(a),r.pipelines.preBatch(a);var d=n.getTintAppendFloatAlpha,c=r.pipelines.set(a.pipeline,a),p=c.setTexture2D(a.fillPattern,a);c.batchTexture(a,a.fillPattern,a.displayFrame.width*a.tileScaleX,a.displayFrame.height*a.tileScaleY,a.x,a.y,u,v,a.scaleX,a.scaleY,a.rotation,a.flipX,a.flipY,a.scrollFactorX,a.scrollFactorY,a.originX*u,a.originY*v,0,0,u,v,d(a.tintTopLeft,l.alpha*a._alphaTL),d(a.tintTopRight,l.alpha*a._alphaTR),d(a.tintBottomLeft,l.alpha*a._alphaBL),d(a.tintBottomRight,l.alpha*a._alphaBR),a.tintFill,a.tilePositionX%a.displayFrame.width/a.displayFrame.width,a.tilePositionY%a.displayFrame.height/a.displayFrame.height,l,o,!1,p),r.pipelines.postBatch(a)}};e.exports=h},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r,a){h.updateCanvas(),r.addToRenderList(h),n.batchSprite(h,h.frame,r,a)};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),h=i(1);n=i(1095),h=i(1096),e.exports={renderWebGL:n,renderCanvas:h}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r,a){h.videoTexture&&(r.addToRenderList(h),h.pipeline.batchSprite(h,r,a))};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r,a){h.videoTexture&&(r.addToRenderList(h),n.batchSprite(h,h.frame,r,a))};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),h=i(1);n=i(1098),h=i(1099),e.exports={renderWebGL:n,renderCanvas:h}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(19),h=i(114),r=i(81),a=function(l,o,u,v){u.addToRenderList(o);var d=l.pipelines.set(o.pipeline),c=n(o,u,v),p=d.calcMatrix.copyFrom(c.calc),g=o._displayOriginX,m=o._displayOriginY,x=u.alpha*o.alpha;l.pipelines.preBatch(o),o.isFilled&&h(d,p,o,x,g,m),o.isStroked&&r(d,o,x,g,m),l.pipelines.postBatch(o)};e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(36),h=i(48),r=i(60),a=i(30),l=function(o,u,v,d){v.addToRenderList(u);var c=o.currentContext;if(a(o,c,u,v,d)){var p=u.radius;c.beginPath(),c.arc(p-u.originX*(p*2),p-u.originY*(p*2),p,n(u._startAngle),n(u._endAngle),u.anticlockwise),u.closePath&&c.closePath(),u.isFilled&&(h(c,u),c.fill()),u.isStroked&&(r(c,u),c.stroke()),c.restore()}};e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),h=i(1);n=i(1101),h=i(1102),e.exports={renderWebGL:n,renderCanvas:h}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(114),h=i(19),r=i(81),a=function(l,o,u,v){u.addToRenderList(o);var d=l.pipelines.set(o.pipeline),c=h(o,u,v),p=d.calcMatrix.copyFrom(c.calc),g=o._displayOriginX+o._curveBounds.x,m=o._displayOriginY+o._curveBounds.y,x=u.alpha*o.alpha;l.pipelines.preBatch(o),o.isFilled&&n(d,p,o,x,g,m),o.isStroked&&r(d,o,x,g,m),l.pipelines.postBatch(o)};e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(48),h=i(60),r=i(30),a=function(l,o,u,v){u.addToRenderList(o);var d=l.currentContext;if(r(l,d,o,u,v)){var c=o._displayOriginX+o._curveBounds.x,p=o._displayOriginY+o._curveBounds.y,g=o.pathData,m=g.length-1,x=g[0]-c,y=g[1]-p;d.beginPath(),d.moveTo(x,y),o.closePath||(m-=2);for(var T=2;T<m;T+=2){var C=g[T]-c,S=g[T+1]-p;d.lineTo(C,S)}o.closePath&&d.closePath(),o.isFilled&&(n(d,o),d.fill()),o.isStroked&&(h(d,o),d.stroke()),d.restore()}};e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),h=i(1);n=i(1104),h=i(1105),e.exports={renderWebGL:n,renderCanvas:h}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(114),h=i(19),r=i(81),a=function(l,o,u,v){u.addToRenderList(o);var d=l.pipelines.set(o.pipeline),c=h(o,u,v),p=d.calcMatrix.copyFrom(c.calc),g=o._displayOriginX,m=o._displayOriginY,x=u.alpha*o.alpha;l.pipelines.preBatch(o),o.isFilled&&n(d,p,o,x,g,m),o.isStroked&&r(d,o,x,g,m),l.pipelines.postBatch(o)};e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(48),h=i(60),r=i(30),a=function(l,o,u,v){u.addToRenderList(o);var d=l.currentContext;if(r(l,d,o,u,v)){var c=o._displayOriginX,p=o._displayOriginY,g=o.pathData,m=g.length-1,x=g[0]-c,y=g[1]-p;d.beginPath(),d.moveTo(x,y),o.closePath||(m-=2);for(var T=2;T<m;T+=2){var C=g[T]-c,S=g[T+1]-p;d.lineTo(C,S)}d.closePath(),o.isFilled&&(n(d,o),d.fill()),o.isStroked&&(h(d,o),d.stroke()),d.restore()}};e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),h=i(1);n=i(1107),h=i(1108),e.exports={renderWebGL:n,renderCanvas:h}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(19),h=i(12),r=function(a,l,o,u){o.addToRenderList(l);var v=a.pipelines.set(l.pipeline),d=n(l,o,u),c=v.calcMatrix.copyFrom(d.calc);c.translate(-l._displayOriginX,-l._displayOriginY);var p=o.alpha*l.alpha,g=l.width,m=l.height,x=l.cellWidth,y=l.cellHeight,T=Math.ceil(g/x),C=Math.ceil(m/y),S=x,E=y,M=x-(T*x-g),O=y-(C*y-m),L,R,F=l.showCells,D=l.showAltCells,B=l.showOutline,N=0,U=0,X=0,K=0,k=0;if(B&&(S--,E--,M===x&&M--,O===y&&O--),a.pipelines.preBatch(l),F&&l.fillAlpha>0)for(L=v.fillTint,R=h.getTintAppendFloatAlpha(l.fillColor,l.fillAlpha*p),L.TL=R,L.TR=R,L.BL=R,L.BR=R,U=0;U<C;U++)for(D&&(X=U%2),N=0;N<T;N++){if(D&&X){X=0;continue}X++,K=N<T-1?S:M,k=U<C-1?E:O,v.batchFillRect(N*x,U*y,K,k)}if(D&&l.altFillAlpha>0)for(L=v.fillTint,R=h.getTintAppendFloatAlpha(l.altFillColor,l.altFillAlpha*p),L.TL=R,L.TR=R,L.BL=R,L.BR=R,U=0;U<C;U++)for(D&&(X=U%2),N=0;N<T;N++){if(D&&!X){X=1;continue}X=0,K=N<T-1?S:M,k=U<C-1?E:O,v.batchFillRect(N*x,U*y,K,k)}if(B&&l.outlineFillAlpha>0){var b=v.strokeTint,I=h.getTintAppendFloatAlpha(l.outlineFillColor,l.outlineFillAlpha*p);for(b.TL=I,b.TR=I,b.BL=I,b.BR=I,N=1;N<T;N++){var G=N*x;v.batchLine(G,0,G,m,1,1,1,0,!1)}for(U=1;U<C;U++){var Y=U*y;v.batchLine(0,Y,g,Y,1,1,1,0,!1)}}a.pipelines.postBatch(l)};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(48),h=i(60),r=i(30),a=function(l,o,u,v){u.addToRenderList(o);var d=l.currentContext;if(r(l,d,o,u,v)){var c=-o._displayOriginX,p=-o._displayOriginY,g=u.alpha*o.alpha,m=o.width,x=o.height,y=o.cellWidth,T=o.cellHeight,C=Math.ceil(m/y),S=Math.ceil(x/T),E=y,M=T,O=y-(C*y-m),L=T-(S*T-x),R=o.showCells,F=o.showAltCells,D=o.showOutline,B=0,N=0,U=0,X=0,K=0;if(D&&(E--,M--,O===y&&O--,L===T&&L--),R&&o.fillAlpha>0)for(n(d,o),N=0;N<S;N++)for(F&&(U=N%2),B=0;B<C;B++){if(F&&U){U=0;continue}U++,X=B<C-1?E:O,K=N<S-1?M:L,d.fillRect(c+B*y,p+N*T,X,K)}if(F&&o.altFillAlpha>0)for(n(d,o,o.altFillColor,o.altFillAlpha*g),N=0;N<S;N++)for(F&&(U=N%2),B=0;B<C;B++){if(F&&!U){U=1;continue}U=0,X=B<C-1?E:O,K=N<S-1?M:L,d.fillRect(c+B*y,p+N*T,X,K)}if(D&&o.outlineFillAlpha>0){for(h(d,o,o.outlineFillColor,o.outlineFillAlpha*g),B=1;B<C;B++){var k=B*y;d.beginPath(),d.moveTo(k+c,p),d.lineTo(k+c,x+p),d.stroke()}for(N=1;N<S;N++){var b=N*T;d.beginPath(),d.moveTo(c,b+p),d.lineTo(c+m,b+p),d.stroke()}}d.restore()}};e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),h=i(1);n=i(1110),h=i(1111),e.exports={renderWebGL:n,renderCanvas:h}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(19),h=i(12),r=function(a,l,o,u){o.addToRenderList(l);var v=a.pipelines.set(l.pipeline),d=n(l,o,u),c=v.calcMatrix.copyFrom(d.calc),p=l.width,g=l.height,m=p/2,x=p/l.projection,y=o.alpha*l.alpha;if(!!l.isFilled){var T,C,S,E,M,O,L,R,F;a.pipelines.preBatch(l),l.showTop&&(T=h.getTintAppendFloatAlpha(l.fillTop,y),C=c.getX(-m,-g),S=c.getY(-m,-g),E=c.getX(0,-x-g),M=c.getY(0,-x-g),O=c.getX(m,-g),L=c.getY(m,-g),R=c.getX(0,x-g),F=c.getY(0,x-g),v.batchQuad(l,C,S,E,M,O,L,R,F,0,0,1,1,T,T,T,T,2)),l.showLeft&&(T=h.getTintAppendFloatAlpha(l.fillLeft,y),C=c.getX(-m,0),S=c.getY(-m,0),E=c.getX(0,x),M=c.getY(0,x),O=c.getX(0,x-g),L=c.getY(0,x-g),R=c.getX(-m,-g),F=c.getY(-m,-g),v.batchQuad(l,C,S,E,M,O,L,R,F,0,0,1,1,T,T,T,T,2)),l.showRight&&(T=h.getTintAppendFloatAlpha(l.fillRight,y),C=c.getX(m,0),S=c.getY(m,0),E=c.getX(0,x),M=c.getY(0,x),O=c.getX(0,x-g),L=c.getY(0,x-g),R=c.getX(m,-g),F=c.getY(m,-g),v.batchQuad(l,C,S,E,M,O,L,R,F,0,0,1,1,T,T,T,T,2)),a.pipelines.postBatch(l)}};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(48),h=i(30),r=function(a,l,o,u){o.addToRenderList(l);var v=a.currentContext;if(h(a,v,l,o,u)&&l.isFilled){var d=l.width,c=l.height,p=d/2,g=d/l.projection;l.showTop&&(n(v,l,l.fillTop),v.beginPath(),v.moveTo(-p,-c),v.lineTo(0,-g-c),v.lineTo(p,-c),v.lineTo(p,-1),v.lineTo(0,g-1),v.lineTo(-p,-1),v.lineTo(-p,-c),v.fill()),l.showLeft&&(n(v,l,l.fillLeft),v.beginPath(),v.moveTo(-p,0),v.lineTo(0,g),v.lineTo(0,g-c),v.lineTo(-p,-c),v.lineTo(-p,0),v.fill()),l.showRight&&(n(v,l,l.fillRight),v.beginPath(),v.moveTo(p,0),v.lineTo(0,g),v.lineTo(0,g-c),v.lineTo(p,-c),v.lineTo(p,0),v.fill()),v.restore()}};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),h=i(1);n=i(1113),h=i(1114),e.exports={renderWebGL:n,renderCanvas:h}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(19),h=i(12),r=function(a,l,o,u){o.addToRenderList(l);var v=a.pipelines.set(l.pipeline),d=n(l,o,u),c=v.calcMatrix.copyFrom(d.calc),p=l.width,g=l.height,m=p/2,x=p/l.projection,y=l.isReversed,T=o.alpha*l.alpha;if(!!l.isFilled){a.pipelines.preBatch(l);var C,S,E,M,O,L,R;if(l.showTop&&y){C=h.getTintAppendFloatAlpha(l.fillTop,T),S=c.getX(-m,-g),E=c.getY(-m,-g),M=c.getX(0,-x-g),O=c.getY(0,-x-g),L=c.getX(m,-g),R=c.getY(m,-g);var F=c.getX(0,x-g),D=c.getY(0,x-g);v.batchQuad(l,S,E,M,O,L,R,F,D,0,0,1,1,C,C,C,C,2)}l.showLeft&&(C=h.getTintAppendFloatAlpha(l.fillLeft,T),y?(S=c.getX(-m,-g),E=c.getY(-m,-g),M=c.getX(0,x),O=c.getY(0,x),L=c.getX(0,x-g),R=c.getY(0,x-g)):(S=c.getX(-m,0),E=c.getY(-m,0),M=c.getX(0,x),O=c.getY(0,x),L=c.getX(0,x-g),R=c.getY(0,x-g)),v.batchTri(l,S,E,M,O,L,R,0,0,1,1,C,C,C,2)),l.showRight&&(C=h.getTintAppendFloatAlpha(l.fillRight,T),y?(S=c.getX(m,-g),E=c.getY(m,-g),M=c.getX(0,x),O=c.getY(0,x),L=c.getX(0,x-g),R=c.getY(0,x-g)):(S=c.getX(m,0),E=c.getY(m,0),M=c.getX(0,x),O=c.getY(0,x),L=c.getX(0,x-g),R=c.getY(0,x-g)),v.batchTri(l,S,E,M,O,L,R,0,0,1,1,C,C,C,2)),a.pipelines.postBatch(l)}};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(48),h=i(30),r=function(a,l,o,u){o.addToRenderList(l);var v=a.currentContext;if(h(a,v,l,o,u)&&l.isFilled){var d=l.width,c=l.height,p=d/2,g=d/l.projection,m=l.isReversed;l.showTop&&m&&(n(v,l,l.fillTop),v.beginPath(),v.moveTo(-p,-c),v.lineTo(0,-g-c),v.lineTo(p,-c),v.lineTo(0,g-c),v.fill()),l.showLeft&&(n(v,l,l.fillLeft),v.beginPath(),m?(v.moveTo(-p,-c),v.lineTo(0,g),v.lineTo(0,g-c)):(v.moveTo(-p,0),v.lineTo(0,g),v.lineTo(0,g-c)),v.fill()),l.showRight&&(n(v,l,l.fillRight),v.beginPath(),m?(v.moveTo(p,-c),v.lineTo(0,g),v.lineTo(0,g-c)):(v.moveTo(p,0),v.lineTo(0,g),v.lineTo(0,g-c)),v.fill()),v.restore()}};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),h=i(1);n=i(1116),h=i(1117),e.exports={renderWebGL:n,renderCanvas:h}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(19),h=i(12),r=function(a,l,o,u){o.addToRenderList(l);var v=a.pipelines.set(l.pipeline),d=n(l,o,u);v.calcMatrix.copyFrom(d.calc);var c=l._displayOriginX,p=l._displayOriginY,g=o.alpha*l.alpha;if(a.pipelines.preBatch(l),l.isStroked){var m=v.strokeTint,x=h.getTintAppendFloatAlpha(l.strokeColor,l.strokeAlpha*g);m.TL=x,m.TR=x,m.BL=x,m.BR=x;var y=l._startWidth,T=l._endWidth;v.batchLine(l.geom.x1-c,l.geom.y1-p,l.geom.x2-c,l.geom.y2-p,y,T,1,0,!1,d.sprite,d.camera)}a.pipelines.postBatch(l)};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(60),h=i(30),r=function(a,l,o,u){o.addToRenderList(l);var v=a.currentContext;if(h(a,v,l,o,u)){var d=l._displayOriginX,c=l._displayOriginY;l.isStroked&&(n(v,l),v.beginPath(),v.moveTo(l.geom.x1-d,l.geom.y1-c),v.lineTo(l.geom.x2-d,l.geom.y2-c),v.stroke()),v.restore()}};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),h=i(1);n=i(1119),h=i(1120),e.exports={renderWebGL:n,renderCanvas:h}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(114),h=i(19),r=i(81),a=function(l,o,u,v){u.addToRenderList(o);var d=l.pipelines.set(o.pipeline),c=h(o,u,v),p=d.calcMatrix.copyFrom(c.calc),g=o._displayOriginX,m=o._displayOriginY,x=u.alpha*o.alpha;l.pipelines.preBatch(o),o.isFilled&&n(d,p,o,x,g,m),o.isStroked&&r(d,o,x,g,m),l.pipelines.postBatch(o)};e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(48),h=i(60),r=i(30),a=function(l,o,u,v){u.addToRenderList(o);var d=l.currentContext;if(r(l,d,o,u,v)){var c=o._displayOriginX,p=o._displayOriginY,g=o.pathData,m=g.length-1,x=g[0]-c,y=g[1]-p;d.beginPath(),d.moveTo(x,y),o.closePath||(m-=2);for(var T=2;T<m;T+=2){var C=g[T]-c,S=g[T+1]-p;d.lineTo(C,S)}d.closePath(),o.isFilled&&(n(d,o),d.fill()),o.isStroked&&(h(d,o),d.stroke()),d.restore()}};e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),h=i(1);n=i(1122),h=i(1123),e.exports={renderWebGL:n,renderCanvas:h}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(19),h=i(81),r=i(12),a=function(l,o,u,v){u.addToRenderList(o);var d=l.pipelines.set(o.pipeline),c=n(o,u,v);d.calcMatrix.copyFrom(c.calc);var p=o._displayOriginX,g=o._displayOriginY,m=u.alpha*o.alpha;if(l.pipelines.preBatch(o),o.isFilled){var x=d.fillTint,y=r.getTintAppendFloatAlpha(o.fillColor,o.fillAlpha*m);x.TL=y,x.TR=y,x.BL=y,x.BR=y,d.batchFillRect(-p,-g,o.width,o.height)}o.isStroked&&h(d,o,m,p,g),l.pipelines.postBatch(o)};e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(48),h=i(60),r=i(30),a=function(l,o,u,v){u.addToRenderList(o);var d=l.currentContext;if(r(l,d,o,u,v)){var c=o._displayOriginX,p=o._displayOriginY;o.isFilled&&(n(d,o),d.fillRect(-c,-p,o.width,o.height)),o.isStroked&&(h(d,o),d.beginPath(),d.rect(-c,-p,o.width,o.height),d.stroke()),d.restore()}};e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),h=i(1);n=i(1125),h=i(1126),e.exports={renderWebGL:n,renderCanvas:h}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(114),h=i(19),r=i(81),a=function(l,o,u,v){u.addToRenderList(o);var d=l.pipelines.set(o.pipeline),c=h(o,u,v),p=d.calcMatrix.copyFrom(c.calc),g=o._displayOriginX,m=o._displayOriginY,x=u.alpha*o.alpha;l.pipelines.preBatch(o),o.isFilled&&n(d,p,o,x,g,m),o.isStroked&&r(d,o,x,g,m),l.pipelines.postBatch(o)};e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(48),h=i(60),r=i(30),a=function(l,o,u,v){u.addToRenderList(o);var d=l.currentContext;if(r(l,d,o,u,v)){var c=o._displayOriginX,p=o._displayOriginY,g=o.pathData,m=g.length-1,x=g[0]-c,y=g[1]-p;d.beginPath(),d.moveTo(x,y),o.closePath||(m-=2);for(var T=2;T<m;T+=2){var C=g[T]-c,S=g[T+1]-p;d.lineTo(C,S)}d.closePath(),o.isFilled&&(n(d,o),d.fill()),o.isStroked&&(h(d,o),d.stroke()),d.restore()}};e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),h=i(1);n=i(1128),h=i(1129),e.exports={renderWebGL:n,renderCanvas:h}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(19),h=i(81),r=i(12),a=function(l,o,u,v){u.addToRenderList(o);var d=l.pipelines.set(o.pipeline),c=n(o,u,v);d.calcMatrix.copyFrom(c.calc);var p=o._displayOriginX,g=o._displayOriginY,m=u.alpha*o.alpha;if(l.pipelines.preBatch(o),o.isFilled){var x=d.fillTint,y=r.getTintAppendFloatAlpha(o.fillColor,o.fillAlpha*m);x.TL=y,x.TR=y,x.BL=y,x.BR=y;var T=o.geom.x1-p,C=o.geom.y1-g,S=o.geom.x2-p,E=o.geom.y2-g,M=o.geom.x3-p,O=o.geom.y3-g;d.batchFillTriangle(T,C,S,E,M,O,c.sprite,c.camera)}o.isStroked&&h(d,o,m,p,g),l.pipelines.postBatch(o)};e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(48),h=i(60),r=i(30),a=function(l,o,u,v){u.addToRenderList(o);var d=l.currentContext;if(r(l,d,o,u,v)){var c=o._displayOriginX,p=o._displayOriginY,g=o.geom.x1-c,m=o.geom.y1-p,x=o.geom.x2-c,y=o.geom.y2-p,T=o.geom.x3-c,C=o.geom.y3-p;d.beginPath(),d.moveTo(g,m),d.lineTo(x,y),d.lineTo(T,C),d.closePath(),o.isFilled&&(n(d,o),d.fill()),o.isStroked&&(h(d,o),d.stroke()),d.restore()}};e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(213),h=i(5);h.register("blitter",function(r,a,l,o){return this.displayList.add(new n(this.scene,r,a,l,o))})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(214),h=i(5);h.register("container",function(r,a,l){return this.displayList.add(new n(this.scene,r,a,l))})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(442),h=i(5);h.register("dom",function(r,a,l,o,u){var v=new n(this.scene,r,a,l,o,u);return this.displayList.add(v),v})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(215),h=i(5);h.register("dynamicBitmapText",function(r,a,l,o,u){return this.displayList.add(new n(this.scene,r,a,l,o,u))})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(444),h=i(5);h.register("extern",function(){var r=new n(this.scene);return this.displayList.add(r),r})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(216),h=i(5);h.register("graphics",function(r){return this.displayList.add(new n(this.scene,r))})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(113),h=i(5);h.register("group",function(r,a){return this.updateList.add(new n(this.scene,r,a))})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(125),h=i(5);h.register("image",function(r,a,l,o){return this.displayList.add(new n(this.scene,r,a,l,o))})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(219),h=i(5);h.register("layer",function(r){return this.displayList.add(new n(this.scene,r))})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(5),h=i(220);n.register("particles",function(r,a,l){return this.displayList.add(new h(this.scene,r,a,l))})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(5),h=i(457);n.register("follower",function(r,a,l,o,u){var v=new h(this.scene,r,a,l,o,u);return this.displayList.add(v),this.updateList.add(v),v})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(5),h=i(221);n.register("renderTexture",function(r,a,l,o,u,v){return this.displayList.add(new h(this.scene,r,a,l,o,u,v))})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(223),h=i(5);h.register("rope",function(r,a,l,o,u,v,d,c){return this.displayList.add(new n(this.scene,r,a,l,o,u,v,d,c))})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(5),h=i(73);n.register("sprite",function(r,a,l,o){var u=new h(this.scene,r,a,l,o);return this.displayList.add(u),u})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(148),h=i(5);h.register("bitmapText",function(r,a,l,o,u,v){return this.displayList.add(new n(this.scene,r,a,l,o,u,v))})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(224),h=i(5);h.register("text",function(r,a,l,o){return this.displayList.add(new n(this.scene,r,a,l,o))})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(225),h=i(5);h.register("tileSprite",function(r,a,l,o,u,v){return this.displayList.add(new n(this.scene,r,a,l,o,u,v))})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(129),h=i(5);h.register("zone",function(r,a,l,o){return this.displayList.add(new n(this.scene,r,a,l,o))})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(226),h=i(5);h.register("video",function(r,a,l){return this.displayList.add(new n(this.scene,r,a,l))})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(461),h=i(5);h.register("arc",function(r,a,l,o,u,v,d,c){return this.displayList.add(new n(this.scene,r,a,l,o,u,v,d,c))}),h.register("circle",function(r,a,l,o,u){return this.displayList.add(new n(this.scene,r,a,l,0,360,!1,o,u))})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(5),h=i(462);n.register("curve",function(r,a,l,o,u){return this.displayList.add(new h(this.scene,r,a,l,o,u))})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(463),h=i(5);h.register("ellipse",function(r,a,l,o,u,v){return this.displayList.add(new n(this.scene,r,a,l,o,u,v))})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(5),h=i(464);n.register("grid",function(r,a,l,o,u,v,d,c,p,g){return this.displayList.add(new h(this.scene,r,a,l,o,u,v,d,c,p,g))})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(5),h=i(465);n.register("isobox",function(r,a,l,o,u,v,d){return this.displayList.add(new h(this.scene,r,a,l,o,u,v,d))})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(5),h=i(466);n.register("isotriangle",function(r,a,l,o,u,v,d,c){return this.displayList.add(new h(this.scene,r,a,l,o,u,v,d,c))})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(5),h=i(467);n.register("line",function(r,a,l,o,u,v,d,c){return this.displayList.add(new h(this.scene,r,a,l,o,u,v,d,c))})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(5),h=i(468);n.register("polygon",function(r,a,l,o,u){return this.displayList.add(new h(this.scene,r,a,l,o,u))})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(5),h=i(473);n.register("rectangle",function(r,a,l,o,u,v){return this.displayList.add(new h(this.scene,r,a,l,o,u,v))})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(474),h=i(5);h.register("star",function(r,a,l,o,u,v,d){return this.displayList.add(new n(this.scene,r,a,l,o,u,v,d))})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(5),h=i(475);n.register("triangle",function(r,a,l,o,u,v,d,c,p,g){return this.displayList.add(new h(this.scene,r,a,l,o,u,v,d,c,p,g))})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(213),h=i(28),r=i(16),a=i(13);r.register("blitter",function(l,o){l===void 0&&(l={});var u=a(l,"key",null),v=a(l,"frame",null),d=new n(this.scene,0,0,u,v);return o!==void 0&&(l.add=o),h(this.scene,d,l),d})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(28),h=i(214),r=i(16),a=i(13);r.register("container",function(l,o){l===void 0&&(l={});var u=a(l,"x",0),v=a(l,"y",0),d=a(l,"children",null),c=new h(this.scene,u,v,d);return o!==void 0&&(l.add=o),n(this.scene,c,l),c})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(215),h=i(28),r=i(16),a=i(13);r.register("dynamicBitmapText",function(l,o){l===void 0&&(l={});var u=a(l,"font",""),v=a(l,"text",""),d=a(l,"size",!1),c=new n(this.scene,0,0,u,v,d);return o!==void 0&&(l.add=o),h(this.scene,c,l),c})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(16),h=i(216);n.register("graphics",function(r,a){r===void 0&&(r={}),a!==void 0&&(r.add=a);var l=new h(this.scene,r);return r.add&&this.scene.sys.displayList.add(l),l})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(16),h=i(113);n.register("group",function(r){return new h(this.scene,null,r)})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(28),h=i(16),r=i(13),a=i(125);h.register("image",function(l,o){l===void 0&&(l={});var u=r(l,"key",null),v=r(l,"frame",null),d=new a(this.scene,0,0,u,v);return o!==void 0&&(l.add=o),n(this.scene,d,l),d})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(28),h=i(219),r=i(16),a=i(13);r.register("layer",function(l,o){l===void 0&&(l={});var u=a(l,"children",null),v=new h(this.scene,u);return o!==void 0&&(l.add=o),n(this.scene,v,l),v})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(16),h=i(13),r=i(2),a=i(220);n.register("particles",function(l,o){l===void 0&&(l={});var u=h(l,"key",null),v=h(l,"frame",null),d=r(l,"emitters",null),c=new a(this.scene,u,v,d);o!==void 0&&(l.add=o);var p=r(l,"add",!1);return p?this.displayList.add(c):this.updateList.add(c),c})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(28),h=i(16),r=i(13),a=i(221);h.register("renderTexture",function(l,o){l===void 0&&(l={});var u=r(l,"x",0),v=r(l,"y",0),d=r(l,"width",32),c=r(l,"height",32),p=r(l,"key",void 0),g=r(l,"frame",void 0),m=new a(this.scene,u,v,d,c,p,g);return o!==void 0&&(l.add=o),n(this.scene,m,l),m})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(28),h=i(16),r=i(13),a=i(6),l=i(223);h.register("rope",function(o,u){o===void 0&&(o={});var v=r(o,"key",null),d=r(o,"frame",null),c=r(o,"horizontal",!0),p=a(o,"points",void 0),g=a(o,"colors",void 0),m=a(o,"alphas",void 0),x=new l(this.scene,0,0,v,d,p,c,g,m);return u!==void 0&&(o.add=u),n(this.scene,x,o),o.add||this.updateList.add(x),x})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(28),h=i(439),r=i(16),a=i(13),l=i(73);r.register("sprite",function(o,u){o===void 0&&(o={});var v=a(o,"key",null),d=a(o,"frame",null),c=new l(this.scene,0,0,v,d);return u!==void 0&&(o.add=u),n(this.scene,c,o),h(c,o),c})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(148),h=i(28),r=i(16),a=i(13),l=i(6);r.register("bitmapText",function(o,u){o===void 0&&(o={});var v=l(o,"font",""),d=a(o,"text",""),c=a(o,"size",!1),p=l(o,"align",0),g=new n(this.scene,0,0,v,d,c,p);return u!==void 0&&(o.add=u),h(this.scene,g,o),g})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(28),h=i(16),r=i(13),a=i(224);h.register("text",function(l,o){l===void 0&&(l={});var u=r(l,"text",""),v=r(l,"style",null),d=r(l,"padding",null);d!==null&&(v.padding=d);var c=new a(this.scene,0,0,u,v);return o!==void 0&&(l.add=o),n(this.scene,c,l),c.autoRound=r(l,"autoRound",!0),c.resolution=r(l,"resolution",1),c})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(28),h=i(16),r=i(13),a=i(225);h.register("tileSprite",function(l,o){l===void 0&&(l={});var u=r(l,"x",0),v=r(l,"y",0),d=r(l,"width",512),c=r(l,"height",512),p=r(l,"key",""),g=r(l,"frame",""),m=new a(this.scene,u,v,d,c,p,g);return o!==void 0&&(l.add=o),n(this.scene,m,l),m})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(16),h=i(13),r=i(129);n.register("zone",function(a){var l=h(a,"x",0),o=h(a,"y",0),u=h(a,"width",1),v=h(a,"height",u);return new r(this.scene,l,o,u,v)})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(28),h=i(16),r=i(13),a=i(226);h.register("video",function(l,o){l===void 0&&(l={});var u=r(l,"key",null),v=new a(this.scene,0,0,u);return o!==void 0&&(l.add=o),n(this.scene,v,l),l.add||this.updateList.add(v),v})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),h=i(1);n=i(1177),h=i(1178),e.exports={renderWebGL:n,renderCanvas:h}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(19),h=function(r,a,l,o){if(!!a.shader){if(l.addToRenderList(a),r.pipelines.clear(),a.renderToTexture)a.load(),a.flush();else{var u=n(a,l,o).calc;(r.width!==a._rendererWidth||r.height!==a._rendererHeight)&&a.projOrtho(0,r.width,r.height,0),a.load(u.matrix),a.flush()}r.pipelines.rebind()}};e.exports=h},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(){};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),h=i(1);n=i(1180),h=i(1181),e.exports={renderWebGL:n,renderCanvas:h}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(19),h=function(r,a,l,o){var u=a.faces,v=u.length;if(v!==0){l.addToRenderList(a);var d=r.pipelines.set(a.pipeline,a),c=n(a,l,o).calc,p=d.setGameObject(a),g=d.vertexViewF32,m=d.vertexViewU32,x=d.vertexCount*d.currentShader.vertexComponentCount-1,y=a.tintFill,T=[],C=a.debugCallback,S=c.a,E=c.b,M=c.c,O=c.d,L=c.e,R=c.f,F=a.viewPosition.z,D=a.hideCCW,B=l.roundPixels,N=l.alpha*a.alpha,U=0;r.pipelines.preBatch(a);for(var X=0;X<v;X++){var K=u[X];!K.isInView(l,D,F,N,S,E,M,O,L,R,B)||(d.shouldFlush(3)&&(d.flush(),x=0),x=K.load(g,m,x,p,y),U++,d.vertexCount+=3,C&&T.push(K))}a.totalFrame+=U,C&&C.call(a,a,T),r.pipelines.postBatch(a)}};e.exports=h},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(){};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),h=i(1);n=i(1183),e.exports={renderWebGL:n,renderCanvas:h}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(19),h=function(r,a,l,o){l.addToRenderList(a);var u=r.pipelines.set(a.pipeline),v=n(a,l,o).calc,d=a.width,c=a.height,p=-a._radius,g=-a._radius,m=p+d,x=g+c,y=v.getX(0,0),T=v.getY(0,0),C=v.getX(p,g),S=v.getY(p,g),E=v.getX(p,x),M=v.getY(p,x),O=v.getX(m,x),L=v.getY(m,x),R=v.getX(m,g),F=v.getY(m,g);r.pipelines.preBatch(a),u.batchPointLight(a,l,C,S,E,M,O,L,R,F,y,T),r.pipelines.postBatch(a)};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(229),h=i(5);h.register("shader",function(r,a,l,o,u,v,d){return this.displayList.add(new n(this.scene,r,a,l,o,u,v,d))})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(230),h=i(5);h.register("mesh",function(r,a,l,o,u,v,d,c,p,g,m){return this.displayList.add(new n(this.scene,r,a,l,o,u,v,d,c,p,g,m))})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(5),h=i(150);n.register("pointlight",function(r,a,l,o,u,v){return this.displayList.add(new h(this.scene,r,a,l,o,u,v))})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(28),h=i(16),r=i(13),a=i(229);h.register("shader",function(l,o){l===void 0&&(l={});var u=r(l,"key",null),v=r(l,"x",0),d=r(l,"y",0),c=r(l,"width",128),p=r(l,"height",128),g=new a(this.scene,u,v,d,c,p);return o!==void 0&&(l.add=o),n(this.scene,g,l),g})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(28),h=i(16),r=i(13),a=i(6),l=i(230);h.register("mesh",function(o,u){o===void 0&&(o={});var v=r(o,"key",null),d=r(o,"frame",null),c=a(o,"vertices",[]),p=a(o,"uvs",[]),g=a(o,"indicies",[]),m=a(o,"containsZ",!1),x=a(o,"normals",[]),y=a(o,"colors",16777215),T=a(o,"alphas",1),C=new l(this.scene,0,0,v,d,c,p,g,m,x,y,T);return u!==void 0&&(o.add=u),n(this.scene,C,o),C})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(28),h=i(16),r=i(13),a=i(150);h.register("pointlight",function(l,o){l===void 0&&(l={});var u=r(l,"color",16777215),v=r(l,"radius",128),d=r(l,"intensity",1),c=r(l,"attenuation",.1),p=new a(this.scene,0,0,u,v,d,c);return o!==void 0&&(l.add=o),n(this.scene,p,l),p})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(482),r=i(24),a=i(20),l=new n({Extends:h,initialize:function(u){this.scene=u,this.systems=u.sys,u.sys.settings.isBooted||u.sys.events.once(a.BOOT,this.boot,this),h.call(this)},boot:function(){var o=this.systems.events;o.on(a.SHUTDOWN,this.shutdown,this),o.on(a.DESTROY,this.destroy,this)},destroy:function(){this.shutdown(),this.scene=void 0,this.systems=void 0}});r.register("LightsPlugin",l,"lights"),e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(65);n.Area=i(1192),n.Circumference=i(302),n.CircumferencePoint=i(169),n.Clone=i(1193),n.Contains=i(66),n.ContainsPoint=i(1194),n.ContainsRect=i(1195),n.CopyFrom=i(1196),n.Equals=i(1197),n.GetBounds=i(1198),n.GetPoint=i(300),n.GetPoints=i(301),n.Offset=i(1199),n.OffsetPoint=i(1200),n.Random=i(170),e.exports=n},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n.radius>0?Math.PI*n.radius*n.radius:0};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(65),h=function(r){return new n(r.x,r.y,r.radius)};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(66),h=function(r,a){return n(r,a.x,a.y)};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(66),h=function(r,a){return n(r,a.x,a.y)&&n(r,a.right,a.y)&&n(r,a.x,a.bottom)&&n(r,a.right,a.bottom)};e.exports=h},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){return h.setTo(n.x,n.y,n.radius)};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){return n.x===h.x&&n.y===h.y&&n.radius===h.radius};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(10),h=function(r,a){return a===void 0&&(a=new n),a.x=r.left,a.y=r.top,a.width=r.diameter,a.height=r.diameter,a};e.exports=h},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r){return n.x+=h,n.y+=r,n};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){return n.x+=h.x,n.y+=h.y,n};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(111);n.Area=i(1202),n.Circumference=i(447),n.CircumferencePoint=i(218),n.Clone=i(1203),n.Contains=i(112),n.ContainsPoint=i(1204),n.ContainsRect=i(1205),n.CopyFrom=i(1206),n.Equals=i(1207),n.GetBounds=i(1208),n.GetPoint=i(445),n.GetPoints=i(446),n.Offset=i(1209),n.OffsetPoint=i(1210),n.Random=i(180),e.exports=n},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n.isEmpty()?0:n.getMajorRadius()*n.getMinorRadius()*Math.PI};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(111),h=function(r){return new n(r.x,r.y,r.width,r.height)};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(112),h=function(r,a){return n(r,a.x,a.y)};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(112),h=function(r,a){return n(r,a.x,a.y)&&n(r,a.right,a.y)&&n(r,a.x,a.bottom)&&n(r,a.right,a.bottom)};e.exports=h},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){return h.setTo(n.x,n.y,n.width,n.height)};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){return n.x===h.x&&n.y===h.y&&n.width===h.width&&n.height===h.height};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(10),h=function(r,a){return a===void 0&&(a=new n),a.x=r.left,a.y=r.top,a.width=r.width,a.height=r.height,a};e.exports=h},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r){return n.x+=h,n.y+=r,n};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){return n.x+=h.x,n.y+=h.y,n};e.exports=i},function(e,f,i){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4),h=i(231),r=function(a,l,o){if(o===void 0&&(o=[]),h(a,l)){var u=a.x,v=a.y,d=a.radius,c=l.x,p=l.y,g=l.radius,m,x,y,T,C;if(v===p)C=(g*g-d*d-c*c+u*u)/(2*(u-c)),m=1,x=-2*p,y=c*c+C*C-2*c*C+p*p-g*g,T=x*x-4*m*y,T===0?o.push(new n(C,-x/(2*m))):T>0&&(o.push(new n(C,(-x+Math.sqrt(T))/(2*m))),o.push(new n(C,(-x-Math.sqrt(T))/(2*m))));else{var S=(u-c)/(v-p),E=(g*g-d*d-c*c+u*u-p*p+v*v)/(2*(v-p));m=S*S+1,x=2*v*S-2*E*S-2*u,y=u*u+v*v+E*E-d*d-2*v*E,T=x*x-4*m*y,T===0?(C=-x/(2*m),o.push(new n(C,E-C*S))):T>0&&(C=(-x+Math.sqrt(T))/(2*m),o.push(new n(C,E-C*S)),C=(-x-Math.sqrt(T))/(2*m),o.push(new n(C,E-C*S)))}}return o};e.exports=r},function(e,f,i){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(232),h=i(151),r=function(a,l,o){if(o===void 0&&(o=[]),h(a,l)){var u=l.getLineA(),v=l.getLineB(),d=l.getLineC(),c=l.getLineD();n(u,a,o),n(v,a,o),n(d,a,o),n(c,a,o)}return o};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(140),h=i(487),r=i(47),a=new r;function l(v,d,c,p,g){var m=Math.cos(v),x=Math.sin(v);a.setTo(d,c,d+m,c+x);var y=h(a,p);y&&g.push(new n(y.x,y.y,v,y.w))}function o(v,d){return v.z-d.z}var u=function(v,d,c){Array.isArray(c)||(c=[c]);for(var p=[],g=[],m=0;m<c.length;m++)for(var x=c[m].points,y=0;y<x.length;y++){var T=Math.atan2(x[y].y-d,x[y].x-v);g.indexOf(T)===-1&&(l(T,v,d,c,p),l(T-1e-5,v,d,c,p),l(T+1e-5,v,d,c,p),g.push(T))}return p.sort(o)};e.exports=u},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(10),h=i(152),r=function(a,l,o){return o===void 0&&(o=new n),h(a,l)&&(o.x=Math.max(a.x,l.x),o.y=Math.max(a.y,l.y),o.width=Math.min(a.right,l.right)-o.x,o.height=Math.min(a.bottom,l.bottom)-o.y),o};e.exports=r},function(e,f,i){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(234),h=i(152),r=function(a,l,o){if(o===void 0&&(o=[]),h(a,l)){var u=a.getLineA(),v=a.getLineB(),d=a.getLineC(),c=a.getLineD();n(u,l,o),n(v,l,o),n(d,l,o),n(c,l,o)}return o};e.exports=r},function(e,f,i){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(489),h=i(234),r=function(a,l,o){if(o===void 0&&(o=[]),n(a,l)){var u=l.getLineA(),v=l.getLineB(),d=l.getLineC();h(u,a,o),h(v,a,o),h(d,a,o)}return o};e.exports=r},function(e,f,i){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(232),h=i(491),r=function(a,l,o){if(o===void 0&&(o=[]),h(a,l)){var u=a.getLineA(),v=a.getLineB(),d=a.getLineC();n(u,l,o),n(v,l,o),n(d,l,o)}return o};e.exports=r},function(e,f,i){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(494),h=i(492),r=function(a,l,o){if(o===void 0&&(o=[]),n(a,l)){var u=l.getLineA(),v=l.getLineB(),d=l.getLineC();h(a,u,o),h(a,v,o),h(a,d,o)}return o};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(496),h=function(r,a){if(!n(r,a))return!1;var l=Math.min(a.x1,a.x2),o=Math.max(a.x1,a.x2),u=Math.min(a.y1,a.y2),v=Math.max(a.y1,a.y2);return r.x>=l&&r.x<=o&&r.y>=u&&r.y<=v};e.exports=h},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r,a,l,o){return o===void 0&&(o=0),!(h>n.right+o||r<n.left-o||a>n.bottom+o||l<n.top-o)};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(47);n.Angle=i(97),n.BresenhamPoints=i(317),n.CenterOn=i(1222),n.Clone=i(1223),n.CopyFrom=i(1224),n.Equals=i(1225),n.Extend=i(1226),n.GetEasedPoints=i(1227),n.GetMidPoint=i(1228),n.GetNearestPoint=i(1229),n.GetNormal=i(1230),n.GetPoint=i(307),n.GetPoints=i(172),n.GetShortestDistance=i(1231),n.Height=i(1232),n.Length=i(67),n.NormalAngle=i(497),n.NormalX=i(1233),n.NormalY=i(1234),n.Offset=i(1235),n.PerpSlope=i(1236),n.Random=i(173),n.ReflectAngle=i(1237),n.Rotate=i(1238),n.RotateAroundPoint=i(1239),n.RotateAroundXY=i(236),n.SetToAngle=i(1240),n.Slope=i(1241),n.Width=i(1242),e.exports=n},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r){var a=h-(n.x1+n.x2)/2,l=r-(n.y1+n.y2)/2;return n.x1+=a,n.y1+=l,n.x2+=a,n.y2+=l,n};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(47),h=function(r){return new n(r.x1,r.y1,r.x2,r.y2)};e.exports=h},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){return h.setTo(n.x1,n.y1,n.x2,n.y2)};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){return n.x1===h.x1&&n.y1===h.y1&&n.x2===h.x2&&n.y2===h.y2};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(67),h=function(r,a,l){l===void 0&&(l=a);var o=n(r),u=r.x2-r.x1,v=r.y2-r.y1;return a&&(r.x1=r.x1-u/o*a,r.y1=r.y1-v/o*a),l&&(r.x2=r.x2+u/o*l,r.y2=r.y2+v/o*l),r};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(352),h=i(80),r=i(4),a=function(l,o,u,v,d){v===void 0&&(v=0),d===void 0&&(d=[]);var c=[],p=l.x1,g=l.y1,m=l.x2-p,x=l.y2-g,y=h(o,d),T,C,S=u-1;for(T=0;T<S;T++)C=y(T/S),c.push(new r(p+m*C,g+x*C));if(C=y(1),c.push(new r(p+m*C,g+x*C)),v>0){var E=c[0],M=[E];for(T=1;T<c.length-1;T++){var O=c[T];n(E,O)>=v&&(M.push(O),E=O)}var L=c[c.length-1];return n(E,L)<v&&M.pop(),M.push(L),M}else return c};e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4),h=function(r,a){return a===void 0&&(a=new n),a.x=(r.x1+r.x2)/2,a.y=(r.y1+r.y2)/2,a};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Florian Mertens
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4),h=function(r,a,l){l===void 0&&(l=new n);var o=r.x1,u=r.y1,v=r.x2,d=r.y2,c=(v-o)*(v-o)+(d-u)*(d-u);if(c===0)return l;var p=((a.x-o)*(v-o)+(a.y-u)*(d-u))/c;return l.x=o+p*(v-o),l.y=u+p*(d-u),l};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(14),h=i(97),r=i(4),a=function(l,o){o===void 0&&(o=new r);var u=h(l)-n.TAU;return o.x=Math.cos(u),o.y=Math.sin(u),o};e.exports=a},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Florian Mertens
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){var r=n.x1,a=n.y1,l=n.x2,o=n.y2,u=(l-r)*(l-r)+(o-a)*(o-a);if(u===0)return!1;var v=((a-h.y)*(l-r)-(r-h.x)*(o-a))/u;return Math.abs(v)*Math.sqrt(u)};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return Math.abs(n.y1-n.y2)};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(14),h=i(97),r=function(a){return Math.cos(h(a)-n.TAU)};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(14),h=i(97),r=function(a){return Math.sin(h(a)-n.TAU)};e.exports=r},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r){return n.x1+=h,n.y1+=r,n.x2+=h,n.y2+=r,n};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return-((n.x2-n.x1)/(n.y2-n.y1))};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(97),h=i(497),r=function(a,l){return 2*h(l)-Math.PI-n(a)};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(236),h=function(r,a){var l=(r.x1+r.x2)/2,o=(r.y1+r.y2)/2;return n(r,l,o,a)};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(236),h=function(r,a,l){return n(r,a.x,a.y,l)};e.exports=h},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r,a,l){return n.x1=h,n.y1=r,n.x2=h+Math.cos(a)*l,n.y2=r+Math.sin(a)*l,n};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return(n.y2-n.y1)/(n.x2-n.x1)};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return Math.abs(n.x1-n.x2)};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n={Face:i(116),GenerateGridVerts:i(1244),GenerateObjVerts:i(480),GenerateVerts:i(479),ParseObj:i(498),ParseObjMaterial:i(499),RotateFace:i(1245),Vertex:i(117)};e.exports=n},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(116),h=i(2),r=i(69),a=i(39),l=i(117),o=new a,u=new a,v=new r,d=function(c){var p=h(c,"mesh"),g=h(c,"texture",null),m=h(c,"frame"),x=h(c,"width",1),y=h(c,"height",x),T=h(c,"widthSegments",1),C=h(c,"heightSegments",T),S=h(c,"x",0),E=h(c,"y",0),M=h(c,"z",0),O=h(c,"rotateX",0),L=h(c,"rotateY",0),R=h(c,"rotateZ",0),F=h(c,"zIsUp",!0),D=h(c,"isOrtho",p?p.dirtyCache[11]:!1),B=h(c,"colors",[16777215]),N=h(c,"alphas",[1]),U=h(c,"tile",!1),X=h(c,"flipY",!1),K=h(c,"width",null),k={faces:[],verts:[]};if(o.set(S,E,M),u.set(O,L,R),v.fromRotationXYTranslation(u,o,F),!g&&p)g=p.texture;else if(p&&typeof g=="string")g=p.scene.sys.textures.get(g);else return k;var b=g.get(m);!K&&D&&g&&p&&(x=b.width/p.height,y=b.height/p.height);var I=x/2,G=y/2,Y=Math.floor(T),V=Math.floor(C),W=Y+1,H=V+1,Z=x/Y,q=y/V,_=[],nt=[],rt,at,ct=0,ut=1,vt=0,It=1;b&&(ct=b.u0,ut=b.u1,X?(vt=b.v1,It=b.v0):(vt=b.v0,It=b.v1));var St=ut-ct,Et=It-vt;for(at=0;at<H;at++){var dt=at*q-G;for(rt=0;rt<W;rt++){var Bt=rt*Z-I;nt.push(Bt,-dt);var mt=ct+St*(rt/Y),At=vt+Et*(at/V);_.push(mt,At)}}Array.isArray(B)||(B=[B]),Array.isArray(N)||(N=[N]);var Ae=0,$e=0;for(at=0;at<V;at++)for(rt=0;rt<Y;rt++){var Zt=(rt+W*at)*2,Xt=(rt+W*(at+1))*2,se=(rt+1+W*(at+1))*2,ee=(rt+1+W*at)*2,re=B[$e],Ie=N[Ae],yi=new l(nt[Zt],nt[Zt+1],0,_[Zt],_[Zt+1],re,Ie).transformMat4(v),Ti=new l(nt[Xt],nt[Xt+1],0,_[Xt],_[Xt+1],re,Ie).transformMat4(v),Ci=new l(nt[ee],nt[ee+1],0,_[ee],_[ee+1],re,Ie).transformMat4(v),Si=new l(nt[Xt],nt[Xt+1],0,_[Xt],_[Xt+1],re,Ie).transformMat4(v),Ei=new l(nt[se],nt[se+1],0,_[se],_[se+1],re,Ie).transformMat4(v),Pi=new l(nt[ee],nt[ee+1],0,_[ee],_[ee+1],re,Ie).transformMat4(v);U&&(yi.setUVs(ct,It),Ti.setUVs(ct,vt),Ci.setUVs(ut,It),Si.setUVs(ct,vt),Ei.setUVs(ut,vt),Pi.setUVs(ut,It)),$e++,$e===B.length&&($e=0),Ae++,Ae===N.length&&(Ae=0),k.verts.push(yi,Ti,Ci,Si,Ei,Pi),k.faces.push(new n(yi,Ti,Ci),new n(Si,Ei,Pi))}return p&&(p.faces=p.faces.concat(k.faces),p.vertices=p.vertices.concat(k.verts)),k};e.exports=d},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r,a){var l,o;if(r===void 0&&a===void 0){var u=n.getInCenter();l=u.x,o=u.y}var v=Math.cos(h),d=Math.sin(h),c=n.vertex1,p=n.vertex2,g=n.vertex3,m=c.x-l,x=c.y-o;c.set(m*v-x*d+l,m*d+x*v+o),m=p.x-l,x=p.y-o,p.set(m*v-x*d+l,m*d+x*v+o),m=g.x-l,x=g.y-o,g.set(m*v-x*d+l,m*d+x*v+o)};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4);n.Ceil=i(1247),n.Clone=i(1248),n.CopyFrom=i(1249),n.Equals=i(1250),n.Floor=i(1251),n.GetCentroid=i(1252),n.GetMagnitude=i(500),n.GetMagnitudeSq=i(501),n.GetRectangleFromPoints=i(1253),n.Interpolate=i(1254),n.Invert=i(1255),n.Negative=i(1256),n.Project=i(1257),n.ProjectUnit=i(1258),n.SetMagnitude=i(1259),e.exports=n},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n.setTo(Math.ceil(n.x),Math.ceil(n.y))};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4),h=function(r){return new n(r.x,r.y)};e.exports=h},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){return h.setTo(n.x,n.y)};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){return n.x===h.x&&n.y===h.y};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n.setTo(Math.floor(n.x),Math.floor(n.y))};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4),h=function(r,a){if(a===void 0&&(a=new n),!Array.isArray(r))throw new Error("GetCentroid points argument must be an array");var l=r.length;if(l<1)throw new Error("GetCentroid points array must not be empty");if(l===1)a.x=r[0].x,a.y=r[0].y;else{for(var o=0;o<l;o++)a.x+=r[o].x,a.y+=r[o].y;a.x/=l,a.y/=l}return a};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(10),h=function(r,a){a===void 0&&(a=new n);for(var l=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY,u=Number.NEGATIVE_INFINITY,v=Number.POSITIVE_INFINITY,d=0;d<r.length;d++){var c=r[d];c.x>l&&(l=c.x),c.x<o&&(o=c.x),c.y>u&&(u=c.y),c.y<v&&(v=c.y)}return a.x=o,a.y=v,a.width=l-o,a.height=u-v,a};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4),h=function(r,a,l,o){return l===void 0&&(l=0),o===void 0&&(o=new n),o.x=r.x+(a.x-r.x)*l,o.y=r.y+(a.y-r.y)*l,o};e.exports=h},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n.setTo(n.y,n.x)};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4),h=function(r,a){return a===void 0&&(a=new n),a.setTo(-r.x,-r.y)};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4),h=i(501),r=function(a,l,o){o===void 0&&(o=new n);var u=a.x*l.x+a.y*l.y,v=u/h(l);return v!==0&&(o.x=v*l.x,o.y=v*l.y),o};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4),h=function(r,a,l){l===void 0&&(l=new n);var o=r.x*a.x+r.y*a.y;return o!==0&&(l.x=o*a.x,l.y=o*a.y),l};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(500),h=function(r,a){if(r.x!==0||r.y!==0){var l=n(r);r.x/=l,r.y/=l}return r.x*=a,r.y*=a,r};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(227);n.Clone=i(1261),n.Contains=i(228),n.ContainsPoint=i(1262),n.Earcut=i(59),n.GetAABB=i(469),n.GetNumberArray=i(1263),n.GetPoints=i(470),n.Perimeter=i(471),n.Reverse=i(1264),n.Simplify=i(1265),n.Smooth=i(472),n.Translate=i(1266),e.exports=n},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(227),h=function(r){return new n(r.points)};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(228),h=function(r,a){return n(r,a.x,a.y)};e.exports=h},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){h===void 0&&(h=[]);for(var r=0;r<n.points.length;r++)h.push(n.points[r].x),h.push(n.points[r].y);return h};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n.points.reverse(),n};e.exports=i},function(e,f){function i(o,u){var v=o.x-u.x,d=o.y-u.y;return v*v+d*d}function n(o,u,v){var d=u.x,c=u.y,p=v.x-d,g=v.y-c;if(p!==0||g!==0){var m=((o.x-d)*p+(o.y-c)*g)/(p*p+g*g);m>1?(d=v.x,c=v.y):m>0&&(d+=p*m,c+=g*m)}return p=o.x-d,g=o.y-c,p*p+g*g}function h(o,u){for(var v=o[0],d=[v],c,p=1,g=o.length;p<g;p++)c=o[p],i(c,v)>u&&(d.push(c),v=c);return v!==c&&d.push(c),d}function r(o,u,v,d,c){for(var p=d,g,m=u+1;m<v;m++){var x=n(o[m],o[u],o[v]);x>p&&(g=m,p=x)}p>d&&(g-u>1&&r(o,u,g,d,c),c.push(o[g]),v-g>1&&r(o,g,v,d,c))}function a(o,u){var v=o.length-1,d=[o[0]];return r(o,0,v,u,d),d.push(o[v]),d}var l=function(o,u,v){u===void 0&&(u=1),v===void 0&&(v=!1);var d=o.points;if(d.length>2){var c=u*u;v||(d=h(d,c)),o.setTo(a(d,c))}return o};e.exports=l},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r){for(var a=n.points,l=0;l<a.length;l++)a[l].x+=h,a[l].y+=r;return n};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n.width*n.height};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n.x=Math.ceil(n.x),n.y=Math.ceil(n.y),n};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n.x=Math.ceil(n.x),n.y=Math.ceil(n.y),n.width=Math.ceil(n.width),n.height=Math.ceil(n.height),n};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(10),h=function(r){return new n(r.x,r.y,r.width,r.height)};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(57),h=function(r,a){return n(r,a.x,a.y)};e.exports=h},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){return h.setTo(n.x,n.y,n.width,n.height)};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){return n.x===h.x&&n.y===h.y&&n.width===h.width&&n.height===h.height};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(237),h=function(r,a){var l=n(r);return l<n(a)?r.setSize(a.height*l,a.height):r.setSize(a.width,a.width/l),r.setPosition(a.centerX-r.width/2,a.centerY-r.height/2)};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(237),h=function(r,a){var l=n(r);return l>n(a)?r.setSize(a.height*l,a.height):r.setSize(a.width,a.width/l),r.setPosition(a.centerX-r.width/2,a.centerY-r.height/2)};e.exports=h},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n.x=Math.floor(n.x),n.y=Math.floor(n.y),n};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n.x=Math.floor(n.x),n.y=Math.floor(n.y),n.width=Math.floor(n.width),n.height=Math.floor(n.height),n};e.exports=i},function(e,f,i){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(10),h=function(r,a,l,o,u){return u===void 0&&(u=new n),u.setTo(Math.min(r,l),Math.min(a,o),Math.abs(r-l),Math.abs(a-o))};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4),h=function(r,a){return a===void 0&&(a=new n),a.x=r.centerX,a.y=r.centerY,a};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4),h=function(r,a){return a===void 0&&(a=new n),a.x=r.width,a.y=r.height,a};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(190),h=function(r,a,l){var o=r.centerX,u=r.centerY;return r.setSize(r.width+a*2,r.height+l*2),n(r,o,u)};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(10),h=i(152),r=function(a,l,o){return o===void 0&&(o=new n),h(a,l)?(o.x=Math.max(a.x,l.x),o.y=Math.max(a.y,l.y),o.width=Math.min(a.right,l.right)-o.x,o.height=Math.min(a.bottom,l.bottom)-o.y):o.setEmpty(),o};e.exports=r},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){for(var r=n.x,a=n.right,l=n.y,o=n.bottom,u=0;u<h.length;u++)r=Math.min(r,h[u].x),a=Math.max(a,h[u].x),l=Math.min(l,h[u].y),o=Math.max(o,h[u].y);return n.x=r,n.y=l,n.width=a-r,n.height=o-l,n};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){var r=Math.min(n.x,h.x),a=Math.max(n.right,h.right);n.x=r,n.width=a-r;var l=Math.min(n.y,h.y),o=Math.max(n.bottom,h.bottom);return n.y=l,n.height=o-l,n};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r){var a=Math.min(n.x,h),l=Math.max(n.right,h);n.x=a,n.width=l-a;var o=Math.min(n.y,r),u=Math.max(n.bottom,r);return n.y=o,n.height=u-o,n};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r){return n.x+=h,n.y+=r,n};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){return n.x+=h.x,n.y+=h.y,n};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){return n.x<h.right&&n.right>h.x&&n.y<h.bottom&&n.bottom>h.y};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4),h=i(36),r=function(a,l,o){o===void 0&&(o=new n),l=h(l);var u=Math.sin(l),v=Math.cos(l),d=v>0?a.width/2:a.width/-2,c=u>0?a.height/2:a.height/-2;return Math.abs(d*u)<Math.abs(c*v)?c=d*u/v:d=c*v/u,o.x=d+a.centerX,o.y=c+a.centerY,o};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(195),h=i(503),r=i(4),a=function(l,o,u){if(u===void 0&&(u=new r),h(l,o))switch(n(0,3)){case 0:u.x=l.x+Math.random()*(o.right-l.x),u.y=l.y+Math.random()*(o.top-l.y);break;case 1:u.x=o.x+Math.random()*(l.right-o.x),u.y=o.bottom+Math.random()*(l.bottom-o.bottom);break;case 2:u.x=l.x+Math.random()*(o.x-l.x),u.y=o.y+Math.random()*(l.bottom-o.y);break;case 3:u.x=o.right+Math.random()*(l.right-o.right),u.y=l.y+Math.random()*(o.bottom-l.y);break}return u};e.exports=a},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){return n.width===h.width&&n.height===h.height};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r){return r===void 0&&(r=h),n.width*=h,n.height*=r,n};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(82);n.Area=i(1294),n.BuildEquilateral=i(1295),n.BuildFromPolygon=i(1296),n.BuildRight=i(1297),n.CenterOn=i(1298),n.Centroid=i(504),n.CircumCenter=i(1299),n.CircumCircle=i(1300),n.Clone=i(1301),n.Contains=i(115),n.ContainsArray=i(235),n.ContainsPoint=i(1302),n.CopyFrom=i(1303),n.Decompose=i(495),n.Equals=i(1304),n.GetPoint=i(476),n.GetPoints=i(477),n.InCenter=i(506),n.Perimeter=i(1305),n.Offset=i(505),n.Random=i(181),n.Rotate=i(1306),n.RotateAroundPoint=i(1307),n.RotateAroundXY=i(238),e.exports=n},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){var h=n.x1,r=n.y1,a=n.x2,l=n.y2,o=n.x3,u=n.y3;return Math.abs(((o-h)*(l-r)-(a-h)*(u-r))/2)};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(82),h=function(r,a,l){var o=l*(Math.sqrt(3)/2),u=r,v=a,d=r+l/2,c=a+o,p=r-l/2,g=a+o;return new n(u,v,d,c,p,g)};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(59),h=i(82),r=function(a,l,o,u,v){l===void 0&&(l=null),o===void 0&&(o=1),u===void 0&&(u=1),v===void 0&&(v=[]);for(var d=n(a,l),c,p,g,m,x,y,T,C,S,E=0;E<d.length;E+=3)c=d[E],p=d[E+1],g=d[E+2],m=a[c*2]*o,x=a[c*2+1]*u,y=a[p*2]*o,T=a[p*2+1]*u,C=a[g*2]*o,S=a[g*2+1]*u,v.push(new h(m,x,y,T,C,S));return v};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(82),h=function(r,a,l,o){o===void 0&&(o=l);var u=r,v=a,d=r,c=a-o,p=r+l,g=a;return new n(u,v,d,c,p,g)};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(504),h=i(505),r=function(a,l,o,u){u===void 0&&(u=n);var v=u(a),d=l-v.x,c=o-v.y;return h(a,d,c)};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(3);function h(a,l,o,u){return a*u-l*o}var r=function(a,l){l===void 0&&(l=new n);var o=a.x3,u=a.y3,v=a.x1-o,d=a.y1-u,c=a.x2-o,p=a.y2-u,g=2*h(v,d,c,p),m=h(d,v*v+d*d,p,c*c+p*p),x=h(v,v*v+d*d,c,c*c+p*p);return l.x=o-m/g,l.y=u+x/g,l};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(65),h=function(r,a){a===void 0&&(a=new n);var l=r.x1,o=r.y1,u=r.x2,v=r.y2,d=r.x3,c=r.y3,p=u-l,g=v-o,m=d-l,x=c-o,y=p*(l+u)+g*(o+v),T=m*(l+d)+x*(o+c),C=2*(p*(c-v)-g*(d-u)),S,E;if(Math.abs(C)<1e-6){var M=Math.min(l,u,d),O=Math.min(o,v,c);S=(Math.max(l,u,d)-M)*.5,E=(Math.max(o,v,c)-O)*.5,a.x=M+S,a.y=O+E,a.radius=Math.sqrt(S*S+E*E)}else a.x=(x*y-g*T)/C,a.y=(p*T-m*y)/C,S=a.x-l,E=a.y-o,a.radius=Math.sqrt(S*S+E*E);return a};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(82),h=function(r){return new n(r.x1,r.y1,r.x2,r.y2,r.x3,r.y3)};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(115),h=function(r,a){return n(r,a.x,a.y)};e.exports=h},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){return h.setTo(n.x1,n.y1,n.x2,n.y2,n.x3,n.y3)};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){return n.x1===h.x1&&n.y1===h.y1&&n.x2===h.x2&&n.y2===h.y2&&n.x3===h.x3&&n.y3===h.y3};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(67),h=function(r){var a=r.getLineA(),l=r.getLineB(),o=r.getLineC();return n(a)+n(l)+n(o)};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(238),h=i(506),r=function(a,l){var o=h(a);return n(a,o.x,o.y,l)};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(238),h=function(r,a,l){return n(r,a.x,a.y,l)};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(203),h=i(17),r={CreatePixelPerfectHandler:i(507),CreateInteractiveObject:i(508),Events:i(51),Gamepad:i(1309),InputManager:i(409),InputPlugin:i(1321),InputPluginCache:i(153),Keyboard:i(1322),Mouse:i(1336),Pointer:i(412),Touch:i(1337)};r=h(!1,r,n),e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Axis:i(509),Button:i(510),Events:i(239),Gamepad:i(511),GamepadPlugin:i(1316),Configs:i(1317)}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="down"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="up"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="connected"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="disconnected"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="down"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="up"},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(9),r=i(239),a=i(511),l=i(6),o=i(153),u=i(51),v=new n({Extends:h,initialize:function(c){h.call(this),this.scene=c.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=c,this.enabled=!0,this.target,this.gamepads=[],this.queue=[],this.onGamepadHandler,this._pad1,this._pad2,this._pad3,this._pad4,c.pluginEvents.once(u.BOOT,this.boot,this),c.pluginEvents.on(u.START,this.start,this)},boot:function(){var d=this.scene.sys.game,c=this.settings.input,p=d.config;this.enabled=l(c,"gamepad",p.inputGamepad)&&d.device.input.gamepads,this.target=l(c,"gamepad.target",p.inputGamepadEventTarget),this.sceneInputPlugin.pluginEvents.once(u.DESTROY,this.destroy,this)},start:function(){this.enabled&&(this.startListeners(),this.refreshPads()),this.sceneInputPlugin.pluginEvents.once(u.SHUTDOWN,this.shutdown,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},startListeners:function(){var d=this,c=this.target,p=function(g){g.defaultPrevented||!d.isActive()||(d.refreshPads(),d.queue.push(g))};this.onGamepadHandler=p,c.addEventListener("gamepadconnected",p,!1),c.addEventListener("gamepaddisconnected",p,!1),this.sceneInputPlugin.pluginEvents.on(u.UPDATE,this.update,this)},stopListeners:function(){this.target.removeEventListener("gamepadconnected",this.onGamepadHandler),this.target.removeEventListener("gamepaddisconnected",this.onGamepadHandler),this.sceneInputPlugin.pluginEvents.off(u.UPDATE,this.update);for(var d=0;d<this.gamepads.length;d++)this.gamepads[d].removeAllListeners()},disconnectAll:function(){for(var d=0;d<this.gamepads.length;d++)this.gamepads[d].pad.connected=!1},refreshPads:function(){var d=navigator.getGamepads();if(!d)this.disconnectAll();else for(var c=this.gamepads,p=0;p<d.length;p++){var g=d[p];if(!!g){var m=g.id,x=g.index,y=c[x];if(y)y.id!==m?(y.destroy(),c[x]=new a(this,g)):y.update(g);else{var T=new a(this,g);c[x]=T,this._pad1?this._pad2?this._pad3?this._pad4||(this._pad4=T):this._pad3=T:this._pad2=T:this._pad1=T}}}},getAll:function(){for(var d=[],c=this.gamepads,p=0;p<c.length;p++)c[p]&&d.push(c[p]);return d},getPad:function(d){for(var c=this.gamepads,p=0;p<c.length;p++)if(c[p]&&c[p].index===d)return c[p]},update:function(){if(!!this.enabled){this.refreshPads();var d=this.queue.length;if(d!==0)for(var c=this.queue.splice(0,d),p=0;p<d;p++){var g=c[p],m=this.getPad(g.gamepad.index);g.type==="gamepadconnected"?this.emit(r.CONNECTED,m,g):g.type==="gamepaddisconnected"&&this.emit(r.DISCONNECTED,m,g)}}},shutdown:function(){this.stopListeners(),this.removeAllListeners()},destroy:function(){this.shutdown();for(var d=0;d<this.gamepads.length;d++)this.gamepads[d]&&this.gamepads[d].destroy();this.gamepads=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.target=null},total:{get:function(){return this.gamepads.length}},pad1:{get:function(){return this._pad1}},pad2:{get:function(){return this._pad2}},pad3:{get:function(){return this._pad3}},pad4:{get:function(){return this._pad4}}});o.register("GamepadPlugin",v,"gamepad","gamepad","inputGamepad"),e.exports=v},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={DUALSHOCK_4:i(1318),SNES_USB:i(1319),XBOX_360:i(1320)}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SHARE:8,OPTIONS:9,PS:16,TOUCHBAR:17,X:0,CIRCLE:1,SQUARE:2,TRIANGLE:3,L1:4,R1:5,L2:6,R2:7,L3:10,R3:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SELECT:8,START:9,B:0,A:1,Y:2,X:3,LEFT_SHOULDER:4,RIGHT_SHOULDER:5}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,MENU:16,A:0,B:1,X:2,Y:3,LB:4,RB:5,LT:6,RT:7,BACK:8,START:9,LS:10,RS:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(65),h=i(66),r=i(0),a=i(203),l=i(508),o=i(507),u=i(50),v=i(111),d=i(112),c=i(51),p=i(9),g=i(2),m=i(56),x=i(153),y=i(7),T=i(24),C=i(10),S=i(57),E=i(20),M=i(82),O=i(115),L=new r({Extends:p,initialize:function(F){p.call(this),this.scene=F,this.systems=F.sys,this.settings=F.sys.settings,this.manager=F.sys.game.input,this.pluginEvents=new p,this.enabled=!0,this.displayList,this.cameras,x.install(this),this.mouse=this.manager.mouse,this.topOnly=!0,this.pollRate=-1,this._pollTimer=0;var D={cancelled:!1};this._eventContainer={stopPropagation:function(){D.cancelled=!0}},this._eventData=D,this.dragDistanceThreshold=0,this.dragTimeThreshold=0,this._temp=[],this._tempZones=[],this._list=[],this._pendingInsertion=[],this._pendingRemoval=[],this._draggable=[],this._drag={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._dragState=[],this._over={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._validTypes=["onDown","onUp","onOver","onOut","onMove","onDragStart","onDrag","onDragEnd","onDragEnter","onDragLeave","onDragOver","onDrop"],this._updatedThisFrame=!1,F.sys.events.once(E.BOOT,this.boot,this),F.sys.events.on(E.START,this.start,this)},boot:function(){this.cameras=this.systems.cameras,this.displayList=this.systems.displayList,this.systems.events.once(E.DESTROY,this.destroy,this),this.pluginEvents.emit(c.BOOT)},start:function(){var R=this.systems.events;R.on(E.TRANSITION_START,this.transitionIn,this),R.on(E.TRANSITION_OUT,this.transitionOut,this),R.on(E.TRANSITION_COMPLETE,this.transitionComplete,this),R.on(E.PRE_UPDATE,this.preUpdate,this),R.once(E.SHUTDOWN,this.shutdown,this),this.manager.events.on(c.GAME_OUT,this.onGameOut,this),this.manager.events.on(c.GAME_OVER,this.onGameOver,this),this.enabled=!0,this._dragState=[0,0,0,0,0,0,0,0,0,0],this.pluginEvents.emit(c.START)},onGameOver:function(R){this.isActive()&&this.emit(c.GAME_OVER,R.timeStamp,R)},onGameOut:function(R){this.isActive()&&this.emit(c.GAME_OUT,R.timeStamp,R)},preUpdate:function(){this.pluginEvents.emit(c.PRE_UPDATE);var R=this._pendingRemoval,F=this._pendingInsertion,D=R.length,B=F.length;if(!(D===0&&B===0)){for(var N=this._list,U=0;U<D;U++){var X=R[U],K=N.indexOf(X);K>-1&&(N.splice(K,1),this.clear(X,!0))}R.length=0,this._pendingRemoval.length=0,this._list=N.concat(F.splice(0))}},isActive:function(){return this.enabled&&this.scene.sys.isActive()},updatePoll:function(R,F){if(!this.isActive())return!1;if(this.pluginEvents.emit(c.UPDATE,R,F),this._updatedThisFrame)return this._updatedThisFrame=!1,!1;var D,B=this.manager,N=B.pointers,U=B.pointersTotal;for(D=0;D<U;D++)N[D].updateMotion();if(this._list.length===0)return!1;var X=this.pollRate;if(X===-1)return!1;if(X>0)if(this._pollTimer-=F,this._pollTimer<0)this._pollTimer=this.pollRate;else return!1;var K=!1;for(D=0;D<U;D++){var k=0,b=N[D];this._tempZones=[],this._temp=this.hitTestPointer(b),this.sortGameObjects(this._temp,b),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),k+=this.processOverOutEvents(b),this.getDragState(b)===2&&this.processDragThresholdEvent(b,R),k>0&&(K=!0)}return K},update:function(R,F){if(!this.isActive())return!1;for(var D=F.length,B=!1,N=0;N<D;N++){var U=0,X=F[N];switch(this._tempZones=[],this._temp=this.hitTestPointer(X),this.sortGameObjects(this._temp,X),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),R){case a.MOUSE_DOWN:U+=this.processDragDownEvent(X),U+=this.processDownEvents(X),U+=this.processOverOutEvents(X);break;case a.MOUSE_UP:U+=this.processDragUpEvent(X),U+=this.processUpEvents(X),U+=this.processOverOutEvents(X);break;case a.TOUCH_START:U+=this.processDragDownEvent(X),U+=this.processDownEvents(X),U+=this.processOverEvents(X);break;case a.TOUCH_END:case a.TOUCH_CANCEL:U+=this.processDragUpEvent(X),U+=this.processUpEvents(X),U+=this.processOutEvents(X);break;case a.MOUSE_MOVE:case a.TOUCH_MOVE:U+=this.processDragMoveEvent(X),U+=this.processMoveEvents(X),U+=this.processOverOutEvents(X);break;case a.MOUSE_WHEEL:U+=this.processWheelEvent(X);break}U>0&&(B=!0)}return this._updatedThisFrame=!0,B},clear:function(R,F){F===void 0&&(F=!1);var D=R.input;if(!!D){F||this.queueForRemoval(R),D.gameObject=void 0,D.target=void 0,D.hitArea=void 0,D.hitAreaCallback=void 0,D.callbackContext=void 0,R.input=null;var B=this._draggable.indexOf(R);return B>-1&&this._draggable.splice(B,1),B=this._drag[0].indexOf(R),B>-1&&this._drag[0].splice(B,1),B=this._over[0].indexOf(R),B>-1&&(this._over[0].splice(B,1),this.manager.resetCursor(D)),R}},disable:function(R){R.input.enabled=!1},enable:function(R,F,D,B){return B===void 0&&(B=!1),R.input?R.input.enabled=!0:this.setHitArea(R,F,D),R.input&&B&&!R.input.dropZone&&(R.input.dropZone=B),this},hitTestPointer:function(R){for(var F=this.cameras.getCamerasBelowPointer(R),D=0;D<F.length;D++){for(var B=F[D],N=this.manager.hitTest(R,this._list,B),U=0;U<N.length;U++){var X=N[U];X.input.dropZone&&this._tempZones.push(X)}if(N.length>0)return R.camera=B,N}return R.camera=F[0],[]},processDownEvents:function(R){var F=0,D=this._temp,B=this._eventData,N=this._eventContainer;B.cancelled=!1;for(var U=!1,X=0;X<D.length;X++){var K=D[X];if(!!K.input){if(F++,K.emit(c.GAMEOBJECT_POINTER_DOWN,R,K.input.localX,K.input.localY,N),B.cancelled||!K.input){U=!0;break}if(this.emit(c.GAMEOBJECT_DOWN,R,K,N),B.cancelled||!K.input){U=!0;break}}}return!U&&this.manager&&(R.downElement===this.manager.game.canvas?this.emit(c.POINTER_DOWN,R,D):this.emit(c.POINTER_DOWN_OUTSIDE,R)),F},getDragState:function(R){return this._dragState[R.id]},setDragState:function(R,F){this._dragState[R.id]=F},processDragThresholdEvent:function(R,F){var D=!1,B=this.dragTimeThreshold,N=this.dragDistanceThreshold;if((N>0&&u(R.x,R.y,R.downX,R.downY)>=N||B>0&&F>=R.downTime+B)&&(D=!0),D)return this.setDragState(R,3),this.processDragStartList(R)},processDragStartList:function(R){if(this.getDragState(R)!==3)return 0;for(var F=this._drag[R.id],D=0;D<F.length;D++){var B=F[D],N=B.input;N.dragState=2,N.dragStartX=B.x,N.dragStartY=B.y,N.dragStartXGlobal=R.worldX,N.dragStartYGlobal=R.worldY,N.dragX=N.dragStartXGlobal-N.dragStartX,N.dragY=N.dragStartYGlobal-N.dragStartY,B.emit(c.GAMEOBJECT_DRAG_START,R,N.dragX,N.dragY),this.emit(c.DRAG_START,R,B)}return this.setDragState(R,4),F.length},processDragDownEvent:function(R){var F=this._temp;if(this._draggable.length===0||F.length===0||!R.primaryDown||this.getDragState(R)!==0)return 0;this.setDragState(R,1);for(var D=[],B=0;B<F.length;B++){var N=F[B];N.input.draggable&&N.input.dragState===0&&D.push(N)}return D.length===0?(this.setDragState(R,0),0):(D.length>1&&(this.sortGameObjects(D,R),this.topOnly&&D.splice(1)),this._drag[R.id]=D,this.dragDistanceThreshold===0&&this.dragTimeThreshold===0?(this.setDragState(R,3),this.processDragStartList(R)):(this.setDragState(R,2),0))},processDragMoveEvent:function(R){if(this.getDragState(R)===2&&this.processDragThresholdEvent(R,this.manager.game.loop.now),this.getDragState(R)!==4)return 0;for(var F=this._tempZones,D=this._drag[R.id],B=0;B<D.length;B++){var N=D[B],U=N.input,X=U.target;if(X){var K=F.indexOf(X);K===0?(N.emit(c.GAMEOBJECT_DRAG_OVER,R,X),this.emit(c.DRAG_OVER,R,N,X)):K>0?(N.emit(c.GAMEOBJECT_DRAG_LEAVE,R,X),this.emit(c.DRAG_LEAVE,R,N,X),U.target=F[0],X=U.target,N.emit(c.GAMEOBJECT_DRAG_ENTER,R,X),this.emit(c.DRAG_ENTER,R,N,X)):(N.emit(c.GAMEOBJECT_DRAG_LEAVE,R,X),this.emit(c.DRAG_LEAVE,R,N,X),F[0]?(U.target=F[0],X=U.target,N.emit(c.GAMEOBJECT_DRAG_ENTER,R,X),this.emit(c.DRAG_ENTER,R,N,X)):U.target=null)}else!X&&F[0]&&(U.target=F[0],X=U.target,N.emit(c.GAMEOBJECT_DRAG_ENTER,R,X),this.emit(c.DRAG_ENTER,R,N,X));var k,b;if(!N.parentContainer)k=R.worldX-U.dragX,b=R.worldY-U.dragY;else{var I=R.worldX-U.dragStartXGlobal,G=R.worldY-U.dragStartYGlobal,Y=N.getParentRotation(),V=I*Math.cos(Y)+G*Math.sin(Y),W=G*Math.cos(Y)-I*Math.sin(Y);V*=1/N.parentContainer.scaleX,W*=1/N.parentContainer.scaleY,k=V+U.dragStartX,b=W+U.dragStartY}N.emit(c.GAMEOBJECT_DRAG,R,k,b),this.emit(c.DRAG,R,N,k,b)}return D.length},processDragUpEvent:function(R){for(var F=this._drag[R.id],D=0;D<F.length;D++){var B=F[D],N=B.input;if(N&&N.dragState===2){N.dragState=0,N.dragX=N.localX-B.displayOriginX,N.dragY=N.localY-B.displayOriginY;var U=!1,X=N.target;X&&(B.emit(c.GAMEOBJECT_DROP,R,X),this.emit(c.DROP,R,B,X),N.target=null,U=!0),B.input&&(B.emit(c.GAMEOBJECT_DRAG_END,R,N.dragX,N.dragY,U),this.emit(c.DRAG_END,R,B,U))}}return this.setDragState(R,0),F.splice(0),0},processMoveEvents:function(R){var F=0,D=this._temp,B=this._eventData,N=this._eventContainer;B.cancelled=!1;for(var U=!1,X=0;X<D.length;X++){var K=D[X];if(!!K.input){if(F++,K.emit(c.GAMEOBJECT_POINTER_MOVE,R,K.input.localX,K.input.localY,N),B.cancelled||!K.input){U=!0;break}if(this.emit(c.GAMEOBJECT_MOVE,R,K,N),B.cancelled||!K.input){U=!0;break}if(this.topOnly)break}}return U||this.emit(c.POINTER_MOVE,R,D),F},processWheelEvent:function(R){var F=0,D=this._temp,B=this._eventData,N=this._eventContainer;B.cancelled=!1;for(var U=!1,X=R.deltaX,K=R.deltaY,k=R.deltaZ,b=0;b<D.length;b++){var I=D[b];if(!!I.input){if(F++,I.emit(c.GAMEOBJECT_POINTER_WHEEL,R,X,K,k,N),B.cancelled||!I.input){U=!0;break}if(this.emit(c.GAMEOBJECT_WHEEL,R,I,X,K,k,N),B.cancelled||!I.input){U=!0;break}}}return U||this.emit(c.POINTER_WHEEL,R,D,X,K,k),F},processOverEvents:function(R){var F=this._temp,D=0,B=F.length,N=[];if(B>0){var U=this.manager,X=this._eventData,K=this._eventContainer;X.cancelled=!1;for(var k=!1,b=0;b<B;b++){var I=F[b];if(!!I.input){if(N.push(I),U.setCursor(I.input),I.emit(c.GAMEOBJECT_POINTER_OVER,R,I.input.localX,I.input.localY,K),D++,X.cancelled||!I.input){k=!0;break}if(this.emit(c.GAMEOBJECT_OVER,R,I,K),X.cancelled||!I.input){k=!0;break}}}k||this.emit(c.POINTER_OVER,R,N)}return this._over[R.id]=N,D},processOutEvents:function(R){var F=this._over[R.id],D=0,B=F.length;if(B>0){var N=this.manager,U=this._eventData,X=this._eventContainer;U.cancelled=!1;var K=!1;this.sortGameObjects(F,R);for(var k=0;k<B;k++){var b=F[k];if(b=F[k],!!b.input){if(N.resetCursor(b.input),b.emit(c.GAMEOBJECT_POINTER_OUT,R,X),D++,U.cancelled||!b.input){K=!0;break}if(this.emit(c.GAMEOBJECT_OUT,R,b,X),U.cancelled||!b.input){K=!0;break}K||this.emit(c.POINTER_OUT,R,F)}}this._over[R.id]=[]}return D},processOverOutEvents:function(R){var F=this._temp,D,B,N=[],U=[],X=[],K=this._over[R.id],k=this._drag[R.id],b=this.manager;for(D=0;D<K.length;D++)B=K[D],F.indexOf(B)===-1&&k.indexOf(B)===-1?N.push(B):X.push(B);for(D=0;D<F.length;D++)B=F[D],K.indexOf(B)===-1&&U.push(B);var I=N.length,G=0,Y=this._eventData,V=this._eventContainer;Y.cancelled=!1;var W=!1;if(I>0){for(this.sortGameObjects(N,R),D=0;D<I;D++)if(B=N[D],!!B.input){if(b.resetCursor(B.input),B.emit(c.GAMEOBJECT_POINTER_OUT,R,V),G++,Y.cancelled||!B.input){W=!0;break}if(this.emit(c.GAMEOBJECT_OUT,R,B,V),Y.cancelled||!B.input){W=!0;break}}W||this.emit(c.POINTER_OUT,R,N)}if(I=U.length,Y.cancelled=!1,W=!1,I>0){for(this.sortGameObjects(U,R),D=0;D<I;D++)if(B=U[D],!!B.input){if(b.setCursor(B.input),B.emit(c.GAMEOBJECT_POINTER_OVER,R,B.input.localX,B.input.localY,V),G++,Y.cancelled||!B.input){W=!0;break}if(this.emit(c.GAMEOBJECT_OVER,R,B,V),Y.cancelled||!B.input){W=!0;break}}W||this.emit(c.POINTER_OVER,R,U)}return K=X.concat(U),this._over[R.id]=this.sortGameObjects(K,R),G},processUpEvents:function(R){var F=this._temp,D=this._eventData,B=this._eventContainer;D.cancelled=!1;for(var N=!1,U=0;U<F.length;U++){var X=F[U];if(!!X.input){if(X.emit(c.GAMEOBJECT_POINTER_UP,R,X.input.localX,X.input.localY,B),D.cancelled||!X.input){N=!0;break}if(this.emit(c.GAMEOBJECT_UP,R,X,B),D.cancelled||!X.input){N=!0;break}}}return!N&&this.manager&&(R.upElement===this.manager.game.canvas?this.emit(c.POINTER_UP,R,F):this.emit(c.POINTER_UP_OUTSIDE,R)),F.length},queueForInsertion:function(R){return this._pendingInsertion.indexOf(R)===-1&&this._list.indexOf(R)===-1&&this._pendingInsertion.push(R),this},queueForRemoval:function(R){return this._pendingRemoval.push(R),this},setDraggable:function(R,F){F===void 0&&(F=!0),Array.isArray(R)||(R=[R]);for(var D=0;D<R.length;D++){var B=R[D];B.input.draggable=F;var N=this._draggable.indexOf(B);F&&N===-1?this._draggable.push(B):!F&&N>-1&&this._draggable.splice(N,1)}return this},makePixelPerfect:function(R){R===void 0&&(R=1);var F=this.systems.textures;return o(F,R)},setHitArea:function(R,F,D){if(F===void 0)return this.setHitAreaFromTexture(R);Array.isArray(R)||(R=[R]);var B=!1,N=!1,U=!1,X=!1,K=!1,k=!0;if(y(F)){var b=F;F=g(b,"hitArea",null),D=g(b,"hitAreaCallback",null),B=g(b,"draggable",!1),N=g(b,"dropZone",!1),U=g(b,"cursor",!1),X=g(b,"useHandCursor",!1),K=g(b,"pixelPerfect",!1);var I=g(b,"alphaTolerance",1);K&&(F={},D=this.makePixelPerfect(I)),(!F||!D)&&(this.setHitAreaFromTexture(R),k=!1)}else typeof F=="function"&&!D&&(D=F,F={});for(var G=0;G<R.length;G++){var Y=R[G];if(K&&Y.type==="Container"){console.warn("Cannot pixelPerfect test a Container. Use a custom callback.");continue}var V=Y.input?Y.input:l(Y,F,D);V.customHitArea=k,V.dropZone=N,V.cursor=X?"pointer":U,Y.input=V,B&&this.setDraggable(Y),this.queueForInsertion(Y)}return this},setHitAreaCircle:function(R,F,D,B,N){N===void 0&&(N=h);var U=new n(F,D,B);return this.setHitArea(R,U,N)},setHitAreaEllipse:function(R,F,D,B,N,U){U===void 0&&(U=d);var X=new v(F,D,B,N);return this.setHitArea(R,X,U)},setHitAreaFromTexture:function(R,F){F===void 0&&(F=S),Array.isArray(R)||(R=[R]);for(var D=0;D<R.length;D++){var B=R[D],N=B.frame,U=0,X=0;if(B.width?(U=B.width,X=B.height):N&&(U=N.realWidth,X=N.realHeight),B.type==="Container"&&(U===0||X===0)){console.warn("Container.setInteractive must specify a Shape or call setSize() first");continue}U!==0&&X!==0&&(B.input=l(B,new C(0,0,U,X),F),this.queueForInsertion(B))}return this},setHitAreaRectangle:function(R,F,D,B,N,U){U===void 0&&(U=S);var X=new C(F,D,B,N);return this.setHitArea(R,X,U)},setHitAreaTriangle:function(R,F,D,B,N,U,X,K){K===void 0&&(K=O);var k=new M(F,D,B,N,U,X);return this.setHitArea(R,k,K)},enableDebug:function(R,F){F===void 0&&(F=65280);var D=R.input;if(!D||!D.hitArea)return this;var B=D.hitArea,N=B.type,U=D.hitAreaDebug,X=this.systems.add,K=this.systems.updateList;U&&(K.remove(U),U.destroy(),U=null);var k=0,b=0;switch(N){case m.CIRCLE:U=X.arc(0,0,B.radius),k=B.x-B.radius,b=B.y-B.radius;break;case m.ELLIPSE:U=X.ellipse(0,0,B.width,B.height),k=B.x-B.width/2,b=B.y-B.height/2;break;case m.LINE:U=X.line(0,0,B.x1,B.y1,B.x2,B.y2);break;case m.POLYGON:U=X.polygon(0,0,B.points);break;case m.RECTANGLE:U=X.rectangle(0,0,B.width,B.height),k=B.x,b=B.y;break;case m.TRIANGLE:U=X.triangle(0,0,B.x1,B.y1,B.x2,B.y2,B.x3,B.y3);break}return U&&(U.isFilled=!1,U.preUpdate=function(){U.setStrokeStyle(1/R.scale,F),U.setDisplayOrigin(R.displayOriginX,R.displayOriginY);var I=R.x,G=R.y,Y=R.rotation,V=R.scaleX,W=R.scaleY;if(R.parentContainer){var H=R.getWorldTransformMatrix();I=H.tx,G=H.ty,Y=H.rotation,V=H.scaleX,W=H.scaleY}U.setRotation(Y),U.setScale(V,W),U.setPosition(I+k,G+b),U.setScrollFactor(R.scrollFactorX,R.scrollFactorY),U.setDepth(R.depth)},K.add(U),D.hitAreaDebug=U),this},removeDebug:function(R){var F=R.input;if(F&&F.hitAreaDebug){var D=F.hitAreaDebug;this.systems.updateList.remove(D),D.destroy(),F.hitAreaDebug=null}return this},setPollAlways:function(){return this.setPollRate(0)},setPollOnMove:function(){return this.setPollRate(-1)},setPollRate:function(R){return this.pollRate=R,this._pollTimer=0,this},setGlobalTopOnly:function(R){return this.manager.globalTopOnly=R,this},setTopOnly:function(R){return this.topOnly=R,this},sortGameObjects:function(R,F){if(R.length<2)return R;var D=F.camera.renderList;return R.sort(function(B,N){return D.indexOf(N)-D.indexOf(B)})},sortDropZones:function(R){return R.length<2?R:(this.scene.sys.depthSort(),R.sort(this.sortDropZoneHandler.bind(this)))},sortDropZoneHandler:function(R,F){if(!R.parentContainer&&!F.parentContainer)return this.displayList.getIndex(F)-this.displayList.getIndex(R);if(R.parentContainer===F.parentContainer)return F.parentContainer.getIndex(F)-R.parentContainer.getIndex(R);if(R.parentContainer===F)return-1;if(F.parentContainer===R)return 1;for(var D=R.getIndexList(),B=F.getIndexList(),N=Math.min(D.length,B.length),U=0;U<N;U++){var X=D[U],K=B[U];if(X!==K)return K-X}return B.length-D.length},stopPropagation:function(){return this.manager._tempSkip=!0,this},addPointer:function(R){return this.manager.addPointer(R)},setDefaultCursor:function(R){return this.manager.setDefaultCursor(R),this},transitionIn:function(){this.enabled=this.settings.transitionAllowInput},transitionComplete:function(){this.settings.transitionAllowInput||(this.enabled=!0)},transitionOut:function(){this.enabled=this.settings.transitionAllowInput},shutdown:function(){this.pluginEvents.emit(c.SHUTDOWN),this._temp.length=0,this._list.length=0,this._draggable.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0,this._dragState.length=0;for(var R=0;R<10;R++)this._drag[R]=[],this._over[R]=[];this.removeAllListeners();var F=this.manager;F.canvas.style.cursor=F.defaultCursor;var D=this.systems.events;D.off(E.TRANSITION_START,this.transitionIn,this),D.off(E.TRANSITION_OUT,this.transitionOut,this),D.off(E.TRANSITION_COMPLETE,this.transitionComplete,this),D.off(E.PRE_UPDATE,this.preUpdate,this),F.events.off(c.GAME_OUT,this.onGameOut,this),F.events.off(c.GAME_OVER,this.onGameOver,this),D.off(E.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.pluginEvents.emit(c.DESTROY),this.pluginEvents.removeAllListeners(),this.scene.sys.events.off(E.START,this.start,this),this.scene=null,this.cameras=null,this.manager=null,this.events=null,this.mouse=null},x:{get:function(){return this.manager.activePointer.x}},y:{get:function(){return this.manager.activePointer.y}},isOver:{get:function(){return this.manager.isOver}},mousePointer:{get:function(){return this.manager.mousePointer}},activePointer:{get:function(){return this.manager.activePointer}},pointer1:{get:function(){return this.manager.pointers[1]}},pointer2:{get:function(){return this.manager.pointers[2]}},pointer3:{get:function(){return this.manager.pointers[3]}},pointer4:{get:function(){return this.manager.pointers[4]}},pointer5:{get:function(){return this.manager.pointers[5]}},pointer6:{get:function(){return this.manager.pointers[6]}},pointer7:{get:function(){return this.manager.pointers[7]}},pointer8:{get:function(){return this.manager.pointers[8]}},pointer9:{get:function(){return this.manager.pointers[9]}},pointer10:{get:function(){return this.manager.pointers[10]}}});T.register("InputPlugin",L,"input"),e.exports=L},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Events:i(154),KeyboardManager:i(410),KeyboardPlugin:i(1330),Key:i(512),KeyCodes:i(143),KeyCombo:i(513),AdvanceKeyCombo:i(515),ProcessKeyCombo:i(514),ResetKeyCombo:i(516),JustDown:i(1332),JustUp:i(1333),DownDuration:i(1334),UpDuration:i(1335)}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="keydown"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="keyup"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="keycombomatch"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="down"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="keydown-"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="keyup-"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="up"},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(9),r=i(154),a=i(22),l=i(6),o=i(51),u=i(153),v=i(512),d=i(143),c=i(513),p=i(1331),g=i(20),m=i(76),x=new n({Extends:h,initialize:function(T){h.call(this),this.game=T.systems.game,this.scene=T.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=T,this.manager=T.manager.keyboard,this.enabled=!0,this.keys=[],this.combos=[],this.prevCode=null,this.prevTime=0,this.prevType=null,T.pluginEvents.once(o.BOOT,this.boot,this),T.pluginEvents.on(o.START,this.start,this)},boot:function(){var y=this.settings.input;this.enabled=l(y,"keyboard",!0);var T=l(y,"keyboard.capture",null);T&&this.addCaptures(T),this.sceneInputPlugin.pluginEvents.once(o.DESTROY,this.destroy,this)},start:function(){this.sceneInputPlugin.manager.events.on(o.MANAGER_PROCESS,this.update,this),this.sceneInputPlugin.pluginEvents.once(o.SHUTDOWN,this.shutdown,this),this.game.events.on(a.BLUR,this.resetKeys,this),this.scene.sys.events.on(g.PAUSE,this.resetKeys,this),this.scene.sys.events.on(g.SLEEP,this.resetKeys,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},addCapture:function(y){return this.manager.addCapture(y),this},removeCapture:function(y){return this.manager.removeCapture(y),this},getCaptures:function(){return this.manager.captures},enableGlobalCapture:function(){return this.manager.preventDefault=!0,this},disableGlobalCapture:function(){return this.manager.preventDefault=!1,this},clearCaptures:function(){return this.manager.clearCaptures(),this},createCursorKeys:function(){return this.addKeys({up:d.UP,down:d.DOWN,left:d.LEFT,right:d.RIGHT,space:d.SPACE,shift:d.SHIFT})},addKeys:function(y,T,C){T===void 0&&(T=!0),C===void 0&&(C=!1);var S={};if(typeof y=="string"){y=y.split(",");for(var E=0;E<y.length;E++){var M=y[E].trim();M&&(S[M]=this.addKey(M,T,C))}}else for(var O in y)S[O]=this.addKey(y[O],T,C);return S},addKey:function(y,T,C){T===void 0&&(T=!0),C===void 0&&(C=!1);var S=this.keys;if(y instanceof v){var E=S.indexOf(y);return E>-1?S[E]=y:S[y.keyCode]=y,T&&this.addCapture(y.keyCode),y.setEmitOnRepeat(C),y}return typeof y=="string"&&(y=d[y.toUpperCase()]),S[y]||(S[y]=new v(this,y),T&&this.addCapture(y),S[y].setEmitOnRepeat(C)),S[y]},removeKey:function(y,T){T===void 0&&(T=!1);var C=this.keys,S;if(y instanceof v){var E=C.indexOf(y);E>-1&&(S=this.keys[E],this.keys[E]=void 0)}else typeof y=="string"&&(y=d[y.toUpperCase()]);return C[y]&&(S=C[y],C[y]=void 0),S&&(S.plugin=null,T&&S.destroy()),this},removeAllKeys:function(y){for(var T=this.keys,C=0;C<T.length;C++){var S=T[C];S&&(T[C]=void 0,y&&S.destroy())}return this},createCombo:function(y,T){return new c(this,y,T)},checkDown:function(y,T){if(T===void 0&&(T=0),this.enabled&&y.isDown){var C=m(this.time-y.timeDown,T);if(C>y._tick)return y._tick=C,!0}return!1},update:function(){var y=this.manager.queue,T=y.length;if(!(!this.isActive()||T===0))for(var C=this.keys,S=0;S<T;S++){var E=y[S],M=E.keyCode,O=C[M],L=!1;E.cancelled===void 0&&(E.cancelled=0,E.stopImmediatePropagation=function(){E.cancelled=1},E.stopPropagation=function(){E.cancelled=-1}),E.cancelled!==-1&&(M===this.prevCode&&E.timeStamp===this.prevTime&&E.type===this.prevType||(this.prevCode=M,this.prevTime=E.timeStamp,this.prevType=E.type,E.type==="keydown"?(O&&(L=O.isDown,O.onDown(E)),!E.cancelled&&(!O||!L)&&(p[M]&&this.emit(r.KEY_DOWN+p[M],E),E.cancelled||this.emit(r.ANY_KEY_DOWN,E))):(O&&O.onUp(E),E.cancelled||(p[M]&&this.emit(r.KEY_UP+p[M],E),E.cancelled||this.emit(r.ANY_KEY_UP,E))),E.cancelled===1&&(E.cancelled=0)))}},resetKeys:function(){for(var y=this.keys,T=0;T<y.length;T++)y[T]&&y[T].reset();return this},shutdown:function(){this.removeAllKeys(!0),this.removeAllListeners(),this.sceneInputPlugin.manager.events.off(o.MANAGER_PROCESS,this.update,this),this.game.events.off(a.BLUR,this.resetKeys),this.scene.sys.events.off(g.PAUSE,this.resetKeys,this),this.scene.sys.events.off(g.SLEEP,this.resetKeys,this),this.queue=[]},destroy:function(){this.shutdown();for(var y=this.keys,T=0;T<y.length;T++)y[T]&&y[T].destroy();this.keys=[],this.combos=[],this.queue=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.manager=null},time:{get:function(){return this.sceneInputPlugin.manager.time}}});u.register("KeyboardPlugin",x,"keyboard","keyboard","inputKeyboard"),e.exports=x},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(143),h={};for(var r in n)h[n[r]]=r;e.exports=h},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n._justDown?(n._justDown=!1,!0):!1};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n._justUp?(n._justUp=!1,!0):!1};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){h===void 0&&(h=50);var r=n.plugin.game.loop.time-n.timeDown;return n.isDown&&r<h};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){h===void 0&&(h=50);var r=n.plugin.game.loop.time-n.timeUp;return n.isUp&&r<h};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={MouseManager:i(411)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={TouchManager:i(413)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(21),h=i(17),r={Events:i(95),FileTypes:i(1339),File:i(23),FileTypesManager:i(8),GetURL:i(155),LoaderPlugin:i(1365),MergeXHRSettings:i(240),MultiFile:i(49),XHRLoader:i(517),XHRSettings:i(156)};r=h(!1,r,n),e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={AnimationJSONFile:i(1340),AsepriteFile:i(1341),AtlasJSONFile:i(1342),AtlasXMLFile:i(1343),AudioFile:i(518),AudioSpriteFile:i(1344),BinaryFile:i(1345),BitmapFontFile:i(1346),CSSFile:i(1347),GLSLFile:i(1348),HTML5AudioFile:i(519),HTMLFile:i(1349),HTMLTextureFile:i(1350),ImageFile:i(71),JSONFile:i(61),MultiAtlasFile:i(1351),MultiScriptFile:i(1352),OBJFile:i(1353),PackFile:i(1354),PluginFile:i(1355),SceneFile:i(1356),ScenePluginFile:i(1357),ScriptFile:i(520),SpriteSheetFile:i(1358),SVGFile:i(1359),TextFile:i(242),TilemapCSVFile:i(1360),TilemapImpactFile:i(1361),TilemapJSONFile:i(1362),UnityAtlasFile:i(1363),VideoFile:i(1364),XMLFile:i(241)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(8),r=i(61),a=i(95),l=new n({Extends:r,initialize:function(u,v,d,c,p){r.call(this,u,v,d,c,p),this.type="animationJSON"},onProcess:function(){this.loader.once(a.POST_PROCESS,this.onLoadComplete,this),r.prototype.onProcess.call(this)},onLoadComplete:function(){this.loader.systems.anims.fromJSON(this.data)}});h.register("animation",function(o,u,v,d){if(Array.isArray(o))for(var c=0;c<o.length;c++)this.addFile(new l(this,o[c]));else this.addFile(new l(this,o,u,d,v));return this}),e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(8),r=i(2),a=i(71),l=i(7),o=i(61),u=i(49),v=new n({Extends:u,initialize:function(c,p,g,m,x,y){var T,C;if(l(p)){var S=p;p=r(S,"key"),T=new a(c,{key:p,url:r(S,"textureURL"),extension:r(S,"textureExtension","png"),normalMap:r(S,"normalMap"),xhrSettings:r(S,"textureXhrSettings")}),C=new o(c,{key:p,url:r(S,"atlasURL"),extension:r(S,"atlasExtension","json"),xhrSettings:r(S,"atlasXhrSettings")})}else T=new a(c,p,g,x),C=new o(c,p,m,y);T.linkFile?u.call(this,c,"atlasjson",p,[T,C,T.linkFile]):u.call(this,c,"atlasjson",p,[T,C])},addToCache:function(){if(this.isReadyToProcess()){var d=this.files[0],c=this.files[1],p=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(d.key,d.data,c.data,p),c.addToCache(),this.complete=!0}}});h.register("aseprite",function(d,c,p,g,m){var x;if(Array.isArray(d))for(var y=0;y<d.length;y++)x=new v(this,d[y]),this.addFile(x.files);else x=new v(this,d,c,p,g,m),this.addFile(x.files);return this}),e.exports=v},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(8),r=i(2),a=i(71),l=i(7),o=i(61),u=i(49),v=new n({Extends:u,initialize:function(c,p,g,m,x,y){var T,C;if(l(p)){var S=p;p=r(S,"key"),T=new a(c,{key:p,url:r(S,"textureURL"),extension:r(S,"textureExtension","png"),normalMap:r(S,"normalMap"),xhrSettings:r(S,"textureXhrSettings")}),C=new o(c,{key:p,url:r(S,"atlasURL"),extension:r(S,"atlasExtension","json"),xhrSettings:r(S,"atlasXhrSettings")})}else T=new a(c,p,g,x),C=new o(c,p,m,y);T.linkFile?u.call(this,c,"atlasjson",p,[T,C,T.linkFile]):u.call(this,c,"atlasjson",p,[T,C])},addToCache:function(){if(this.isReadyToProcess()){var d=this.files[0],c=this.files[1],p=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(d.key,d.data,c.data,p),c.pendingDestroy(),this.complete=!0}}});h.register("atlas",function(d,c,p,g,m){var x;if(Array.isArray(d))for(var y=0;y<d.length;y++)x=new v(this,d[y]),this.addFile(x.files);else x=new v(this,d,c,p,g,m),this.addFile(x.files);return this}),e.exports=v},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(8),r=i(2),a=i(71),l=i(7),o=i(49),u=i(241),v=new n({Extends:o,initialize:function(c,p,g,m,x,y){var T,C;if(l(p)){var S=p;p=r(S,"key"),T=new a(c,{key:p,url:r(S,"textureURL"),extension:r(S,"textureExtension","png"),normalMap:r(S,"normalMap"),xhrSettings:r(S,"textureXhrSettings")}),C=new u(c,{key:p,url:r(S,"atlasURL"),extension:r(S,"atlasExtension","xml"),xhrSettings:r(S,"atlasXhrSettings")})}else T=new a(c,p,g,x),C=new u(c,p,m,y);T.linkFile?o.call(this,c,"atlasxml",p,[T,C,T.linkFile]):o.call(this,c,"atlasxml",p,[T,C])},addToCache:function(){if(this.isReadyToProcess()){var d=this.files[0],c=this.files[1],p=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlasXML(d.key,d.data,c.data,p),c.pendingDestroy(),this.complete=!0}}});h.register("atlasXML",function(d,c,p,g,m){var x;if(Array.isArray(d))for(var y=0;y<d.length;y++)x=new v(this,d[y]),this.addFile(x.files);else x=new v(this,d,c,p,g,m),this.addFile(x.files);return this}),e.exports=v},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(518),h=i(0),r=i(8),a=i(2),l=i(7),o=i(61),u=i(49),v=new h({Extends:u,initialize:function(c,p,g,m,x,y,T){if(l(p)){var C=p;p=a(C,"key"),g=a(C,"jsonURL"),m=a(C,"audioURL"),x=a(C,"audioConfig"),y=a(C,"audioXhrSettings"),T=a(C,"jsonXhrSettings")}var S;if(!m)S=new o(c,p,g,T),u.call(this,c,"audiosprite",p,[S]),this.config.resourceLoad=!0,this.config.audioConfig=x,this.config.audioXhrSettings=y;else{var E=n.create(c,p,m,x,y);E&&(S=new o(c,p,g,T),u.call(this,c,"audiosprite",p,[E,S]),this.config.resourceLoad=!1)}},onFileComplete:function(d){var c=this.files.indexOf(d);if(c!==-1&&(this.pending--,this.config.resourceLoad&&d.type==="json"&&d.data.hasOwnProperty("resources"))){var p=d.data.resources,g=a(this.config,"audioConfig"),m=a(this.config,"audioXhrSettings"),x=n.create(this.loader,d.key,p,g,m);x&&(this.addToMultiFile(x),this.loader.addFile(x))}},addToCache:function(){if(this.isReadyToProcess()){var d=this.files[0],c=this.files[1];d.addToCache(),c.addToCache(),this.complete=!0}}});r.register("audioSprite",function(d,c,p,g,m,x){var y=this.systems.game,T=y.config.audio,C=y.device.audio;if(T&&T.noAudio||!C.webAudio&&!C.audioData)return this;var S;if(Array.isArray(d))for(var E=0;E<d.length;E++)S=new v(this,d[E]),S.files&&this.addFile(S.files);else S=new v(this,d,c,p,g,m,x),S.files&&this.addFile(S.files);return this})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(21),r=i(23),a=i(8),l=i(2),o=i(7),u=new n({Extends:r,initialize:function(d,c,p,g,m){var x="bin";if(o(c)){var y=c;c=l(y,"key"),p=l(y,"url"),g=l(y,"xhrSettings"),x=l(y,"extension",x),m=l(y,"dataType",m)}var T={type:"binary",cache:d.cacheManager.binary,extension:x,responseType:"arraybuffer",key:c,url:p,xhrSettings:g,config:{dataType:m}};r.call(this,d,T)},onProcess:function(){this.state=h.FILE_PROCESSING;var v=this.config.dataType;this.data=v?new v(this.xhrLoader.response):this.xhrLoader.response,this.onProcessComplete()}});a.register("binary",function(v,d,c,p){if(Array.isArray(v))for(var g=0;g<v.length;g++)this.addFile(new u(this,v[g]));else this.addFile(new u(this,v,d,p,c));return this}),e.exports=u},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(8),r=i(2),a=i(71),l=i(7),o=i(49),u=i(212),v=i(241),d=new n({Extends:o,initialize:function(p,g,m,x,y,T){var C,S;if(l(g)){var E=g;g=r(E,"key"),C=new a(p,{key:g,url:r(E,"textureURL"),extension:r(E,"textureExtension","png"),normalMap:r(E,"normalMap"),xhrSettings:r(E,"textureXhrSettings")}),S=new v(p,{key:g,url:r(E,"fontDataURL"),extension:r(E,"fontDataExtension","xml"),xhrSettings:r(E,"fontDataXhrSettings")})}else C=new a(p,g,m,y),S=new v(p,g,x,T);C.linkFile?o.call(this,p,"bitmapfont",g,[C,S,C.linkFile]):o.call(this,p,"bitmapfont",g,[C,S])},addToCache:function(){if(this.isReadyToProcess()){var c=this.files[0],p=this.files[1];c.addToCache(),p.pendingDestroy();var g=c.cache.get(c.key),m=u(p.data,c.cache.getFrame(c.key),0,0,g);this.loader.cacheManager.bitmapFont.add(c.key,{data:m,texture:c.key,frame:null}),this.complete=!0}}});h.register("bitmapFont",function(c,p,g,m,x){var y;if(Array.isArray(c))for(var T=0;T<c.length;T++)y=new d(this,c[T]),this.addFile(y.files);else y=new d(this,c,p,g,m,x),this.addFile(y.files);return this}),e.exports=d},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(21),r=i(23),a=i(8),l=i(2),o=i(7),u=new n({Extends:r,initialize:function(d,c,p,g){var m="css";if(o(c)){var x=c;c=l(x,"key"),p=l(x,"url"),g=l(x,"xhrSettings"),m=l(x,"extension",m)}var y={type:"script",cache:!1,extension:m,responseType:"text",key:c,url:p,xhrSettings:g};r.call(this,d,y)},onProcess:function(){this.state=h.FILE_PROCESSING,this.data=document.createElement("style"),this.data.defer=!1,this.data.innerHTML=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});a.register("css",function(v,d,c){if(Array.isArray(v))for(var p=0;p<v.length;p++)this.addFile(new u(this,v[p]));else this.addFile(new u(this,v,d,c));return this}),e.exports=u},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(21),r=i(23),a=i(8),l=i(2),o=i(7),u=i(396),v=new n({Extends:r,initialize:function(c,p,g,m,x){var y="glsl";if(o(p)){var T=p;p=l(T,"key"),g=l(T,"url"),m=l(T,"shaderType","fragment"),x=l(T,"xhrSettings"),y=l(T,"extension",y)}else m===void 0&&(m="fragment");var C={type:"glsl",cache:c.cacheManager.shader,extension:y,responseType:"text",key:p,url:g,config:{shaderType:m},xhrSettings:x};r.call(this,c,C)},onProcess:function(){this.state=h.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var d=this.data.split(`
`),c=this.extractBlock(d,0);if(c)for(;c;){var p=this.getShaderName(c.header),g=this.getShaderType(c.header),m=this.getShaderUniforms(c.header),x=c.shader;if(this.cache.has(p)){var y=this.cache.get(p);g==="fragment"?y.fragmentSrc=x:y.vertexSrc=x,y.uniforms||(y.uniforms=m)}else g==="fragment"?this.cache.add(p,new u(p,x,"",m)):this.cache.add(p,new u(p,"",x,m));c=this.extractBlock(d,c.offset)}else this.config.shaderType==="fragment"?this.cache.add(this.key,new u(this.key,this.data)):this.cache.add(this.key,new u(this.key,"",this.data));this.pendingDestroy()},getShaderName:function(d){for(var c=0;c<d.length;c++){var p=d[c].trim();if(p.substring(0,5)==="name:")return p.substring(5).trim()}return this.key},getShaderType:function(d){for(var c=0;c<d.length;c++){var p=d[c].trim();if(p.substring(0,5)==="type:")return p.substring(5).trim()}return this.config.shaderType},getShaderUniforms:function(d){for(var c={},p=0;p<d.length;p++){var g=d[p].trim();if(g.substring(0,8)==="uniform."){var m=g.indexOf(":");if(m){var x=g.substring(8,m);try{c[x]=JSON.parse(g.substring(m+1))}catch{console.warn("Invalid uniform JSON: "+x)}}}}return c},extractBlock:function(d,c){for(var p=-1,g=-1,m=-1,x=!1,y=!1,T=[],C=[],S=c;S<d.length;S++){var E=d[S].trim();if(E==="---")if(p===-1)p=S,x=!0;else if(x)g=S,x=!1,y=!0;else{y=!1;break}else x?T.push(E):y&&(C.push(E),m=S)}return!x&&g!==-1?{header:T,shader:C.join(`
`),offset:m}:null}});a.register("glsl",function(d,c,p,g){if(Array.isArray(d))for(var m=0;m<d.length;m++)this.addFile(new v(this,d[m]));else this.addFile(new v(this,d,c,p,g));return this}),e.exports=v},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(21),r=i(23),a=i(8),l=i(2),o=i(7),u=new n({Extends:r,initialize:function(d,c,p,g){var m="html";if(o(c)){var x=c;c=l(x,"key"),p=l(x,"url"),g=l(x,"xhrSettings"),m=l(x,"extension",m)}var y={type:"text",cache:d.cacheManager.html,extension:m,responseType:"text",key:c,url:p,xhrSettings:g};r.call(this,d,y)},onProcess:function(){this.state=h.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});a.register("html",function(v,d,c){if(Array.isArray(v))for(var p=0;p<v.length;p++)this.addFile(new u(this,v[p]));else this.addFile(new u(this,v,d,c));return this}),e.exports=u},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(21),r=i(23),a=i(8),l=i(2),o=i(7),u=new n({Extends:r,initialize:function(d,c,p,g,m,x){g===void 0&&(g=512),m===void 0&&(m=512);var y="html";if(o(c)){var T=c;c=l(T,"key"),p=l(T,"url"),x=l(T,"xhrSettings"),y=l(T,"extension",y),g=l(T,"width",g),m=l(T,"height",m)}var C={type:"html",cache:d.textureManager,extension:y,responseType:"text",key:c,url:p,xhrSettings:x,config:{width:g,height:m}};r.call(this,d,C)},onProcess:function(){this.state=h.FILE_PROCESSING;var v=this.config.width,d=this.config.height,c=[];c.push('<svg width="'+v+'px" height="'+d+'px" viewBox="0 0 '+v+" "+d+'" xmlns="http://www.w3.org/2000/svg">'),c.push('<foreignObject width="100%" height="100%">'),c.push('<body xmlns="http://www.w3.org/1999/xhtml">'),c.push(this.xhrLoader.responseText),c.push("</body>"),c.push("</foreignObject>"),c.push("</svg>");var p=[c.join(`
`)],g=this;try{var m=new window.Blob(p,{type:"image/svg+xml;charset=utf-8"})}catch{g.state=h.FILE_ERRORED,g.onProcessComplete();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin,this.data.onload=function(){r.revokeObjectURL(g.data),g.onProcessComplete()},this.data.onerror=function(){r.revokeObjectURL(g.data),g.onProcessError()},r.createObjectURL(this.data,m,"image/svg+xml")},addToCache:function(){var v=this.cache.addImage(this.key,this.data);this.pendingDestroy(v)}});a.register("htmlTexture",function(v,d,c,p,g){if(Array.isArray(v))for(var m=0;m<v.length;m++)this.addFile(new u(this,v[m]));else this.addFile(new u(this,v,d,c,p,g));return this}),e.exports=u},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(8),r=i(2),a=i(71),l=i(7),o=i(61),u=i(49),v=new n({Extends:u,initialize:function(c,p,g,m,x,y,T){if(l(p)){var C=p;p=r(C,"key"),r(C,"url",!1)?g=r(C,"url"):g=r(C,"atlasURL"),y=r(C,"xhrSettings"),m=r(C,"path"),x=r(C,"baseURL"),T=r(C,"textureXhrSettings")}var S=new o(c,p,g,y);u.call(this,c,"multiatlas",p,[S]),this.config.path=m,this.config.baseURL=x,this.config.textureXhrSettings=T},onFileComplete:function(d){var c=this.files.indexOf(d);if(c!==-1&&(this.pending--,d.type==="json"&&d.data.hasOwnProperty("textures"))){var p=d.data.textures,g=this.config,m=this.loader,x=m.baseURL,y=m.path,T=m.prefix,C=r(g,"baseURL",this.baseURL),S=r(g,"path",this.path),E=r(g,"prefix",this.prefix),M=r(g,"textureXhrSettings");m.setBaseURL(C),m.setPath(S),m.setPrefix(E);for(var O=0;O<p.length;O++){var L=p[O].image,R="MA"+this.multiKeyIndex+"_"+L,F=new a(m,R,L,M);if(this.addToMultiFile(F),m.addFile(F),p[O].normalMap){var D=new a(m,R,p[O].normalMap,M);D.type="normalMap",F.setLink(D),this.addToMultiFile(D),m.addFile(D)}}m.setBaseURL(x),m.setPath(y),m.setPrefix(T)}},addToCache:function(){if(this.isReadyToProcess()){for(var d=this.files[0],c=[],p=[],g=[],m=1;m<this.files.length;m++){var x=this.files[m];if(x.type!=="normalMap")for(var y=x.key.indexOf("_"),T=x.key.substr(y+1),C=x.data,S=0;S<d.data.textures.length;S++){var E=d.data.textures[S];if(E.image===T){p.push(C),c.push(E),x.linkFile&&g.push(x.linkFile.data);break}}}for(g.length===0&&(g=void 0),this.loader.textureManager.addAtlasJSONArray(this.key,p,c,g),this.complete=!0,m=0;m<this.files.length;m++)this.files[m].pendingDestroy()}}});h.register("multiatlas",function(d,c,p,g,m){var x;if(Array.isArray(d))for(var y=0;y<d.length;y++)x=new v(this,d[y]),this.addFile(x.files);else x=new v(this,d,c,p,g,m),this.addFile(x.files);return this}),e.exports=v},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(8),r=i(2),a=i(7),l=i(49),o=i(520),u=new n({Extends:l,initialize:function(d,c,p,g){var m="js",x=[];if(a(c)){var y=c;c=r(y,"key"),p=r(y,"url"),g=r(y,"xhrSettings"),m=r(y,"extension",m)}Array.isArray(p)||(p=[p]);for(var T=0;T<p.length;T++){var C=new o(d,{key:c+"_"+T.toString(),url:p[T],extension:m,xhrSettings:g});C.onProcess=function(){this.onProcessComplete()},x.push(C)}l.call(this,d,"scripts",c,x)},addToCache:function(){if(this.isReadyToProcess()){for(var v=0;v<this.files.length;v++){var d=this.files[v];d.data=document.createElement("script"),d.data.language="javascript",d.data.type="text/javascript",d.data.defer=!1,d.data.text=d.xhrLoader.responseText,document.head.appendChild(d.data)}this.complete=!0}}});h.register("scripts",function(v,d,c){var p;if(Array.isArray(v))for(var g=0;g<v.length;g++)p=new u(this,v[g]),this.addFile(p.files);else p=new u(this,v,d,c),this.addFile(p.files);return this}),e.exports=u},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(8),r=i(2),a=i(7),l=i(49),o=i(498),u=i(499),v=i(242),d=new n({Extends:l,initialize:function(p,g,m,x,y,T){var C,S,E=p.cacheManager.obj;if(a(g)){var M=g;g=r(M,"key"),C=new v(p,{key:g,type:"obj",cache:E,url:r(M,"url"),extension:r(M,"extension","obj"),xhrSettings:r(M,"xhrSettings"),config:{flipUV:r(M,"flipUV",y)}}),x=r(M,"matURL"),x&&(S=new v(p,{key:g,type:"mat",cache:E,url:x,extension:r(M,"matExtension","mat"),xhrSettings:r(M,"xhrSettings")}))}else C=new v(p,{key:g,url:m,type:"obj",cache:E,extension:"obj",xhrSettings:T,config:{flipUV:y}}),x&&(S=new v(p,{key:g,url:x,type:"mat",cache:E,extension:"mat",xhrSettings:T}));l.call(this,p,"obj",g,[C,S])},addToCache:function(){if(this.isReadyToProcess()){var c=this.files[0],p=this.files[1],g=o(c.data,c.config.flipUV);p&&(g.materials=u(p.data)),c.cache.add(c.key,g),this.complete=!0}}});h.register("obj",function(c,p,g,m,x){var y;if(Array.isArray(c))for(var T=0;T<c.length;T++)y=new d(this,c[T]),this.addFile(y.files);else y=new d(this,c,p,g,m,x),this.addFile(y.files);return this}),e.exports=d},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(21),r=i(8),a=i(61),l=new n({Extends:a,initialize:function(u,v,d,c,p){a.call(this,u,v,d,c,p),this.type="packfile"},onProcess:function(){this.state!==h.FILE_POPULATED&&(this.state=h.FILE_PROCESSING,this.data=JSON.parse(this.xhrLoader.responseText)),this.loader.addPack(this.data,this.config),this.onProcessComplete()}});r.register("pack",function(o,u,v,d){if(Array.isArray(o))for(var c=0;c<o.length;c++)this.addFile(new l(this,o[c]));else this.addFile(new l(this,o,u,d,v));return this}),e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(21),r=i(23),a=i(8),l=i(2),o=i(7),u=new n({Extends:r,initialize:function(d,c,p,g,m,x){var y="js";if(o(c)){var T=c;c=l(T,"key"),p=l(T,"url"),x=l(T,"xhrSettings"),y=l(T,"extension",y),g=l(T,"start"),m=l(T,"mapping")}var C={type:"plugin",cache:!1,extension:y,responseType:"text",key:c,url:p,xhrSettings:x,config:{start:g,mapping:m}};r.call(this,d,C),typeof p=="function"&&(this.data=p,this.state=h.FILE_POPULATED)},onProcess:function(){var v=this.loader.systems.plugins,d=this.config,c=l(d,"start",!1),p=l(d,"mapping",null);if(this.state===h.FILE_POPULATED)v.install(this.key,this.data,c,p);else{this.state=h.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data);var g=v.install(this.key,window[this.key],c,p);(c||p)&&(this.loader.systems[p]=g,this.loader.scene[p]=g)}this.onProcessComplete()}});a.register("plugin",function(v,d,c,p,g){if(Array.isArray(v))for(var m=0;m<v.length;m++)this.addFile(new u(this,v[m]));else this.addFile(new u(this,v,d,c,p,g));return this}),e.exports=u},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(21),r=i(23),a=i(8),l=i(2),o=i(7),u=new n({Extends:r,initialize:function(d,c,p,g){var m="js";if(o(c)){var x=c;c=l(x,"key"),p=l(x,"url"),g=l(x,"xhrSettings"),m=l(x,"extension",m)}var y={type:"text",extension:m,responseType:"text",key:c,url:p,xhrSettings:g};r.call(this,d,y)},onProcess:function(){this.state=h.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var v=this.data.concat(`(function(){
return new `+this.key+`();
}).call(this);`),d=eval;this.loader.sceneManager.add(this.key,d(v)),this.complete=!0}});a.register("sceneFile",function(v,d,c){if(Array.isArray(v))for(var p=0;p<v.length;p++)this.addFile(new u(this,v[p]));else this.addFile(new u(this,v,d,c));return this}),e.exports=u},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(21),r=i(23),a=i(8),l=i(2),o=i(7),u=new n({Extends:r,initialize:function(d,c,p,g,m,x){var y="js";if(o(c)){var T=c;c=l(T,"key"),p=l(T,"url"),x=l(T,"xhrSettings"),y=l(T,"extension",y),g=l(T,"systemKey"),m=l(T,"sceneKey")}var C={type:"scenePlugin",cache:!1,extension:y,responseType:"text",key:c,url:p,xhrSettings:x,config:{systemKey:g,sceneKey:m}};r.call(this,d,C),typeof p=="function"&&(this.data=p,this.state=h.FILE_POPULATED)},onProcess:function(){var v=this.loader.systems.plugins,d=this.config,c=this.key,p=l(d,"systemKey",c),g=l(d,"sceneKey",c);this.state===h.FILE_POPULATED?v.installScenePlugin(p,this.data,g,this.loader.scene,!0):(this.state=h.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),v.installScenePlugin(p,window[this.key],g,this.loader.scene,!0)),this.onProcessComplete()}});a.register("scenePlugin",function(v,d,c,p,g){if(Array.isArray(v))for(var m=0;m<v.length;m++)this.addFile(new u(this,v[m]));else this.addFile(new u(this,v,d,c,p,g));return this}),e.exports=u},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(8),r=i(71),a=new n({Extends:r,initialize:function(o,u,v,d,c){r.call(this,o,u,v,c,d),this.type="spritesheet"},addToCache:function(){var l=this.cache.addSpriteSheet(this.key,this.data,this.config);this.pendingDestroy(l)}});h.register("spritesheet",function(l,o,u,v){if(Array.isArray(l))for(var d=0;d<l.length;d++)this.addFile(new a(this,l[d]));else this.addFile(new a(this,l,o,u,v));return this}),e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(21),r=i(23),a=i(8),l=i(2),o=i(7),u=new n({Extends:r,initialize:function(d,c,p,g,m){var x="svg";if(o(c)){var y=c;c=l(y,"key"),p=l(y,"url"),g=l(y,"svgConfig",{}),m=l(y,"xhrSettings"),x=l(y,"extension",x)}var T={type:"svg",cache:d.textureManager,extension:x,responseType:"text",key:c,url:p,xhrSettings:m,config:{width:l(g,"width"),height:l(g,"height"),scale:l(g,"scale")}};r.call(this,d,T)},onProcess:function(){this.state=h.FILE_PROCESSING;var v=this.xhrLoader.responseText,d=[v],c=this.config.width,p=this.config.height,g=this.config.scale;t:if(c&&p||g){var m=null,x=new DOMParser;m=x.parseFromString(v,"text/xml");var y=m.getElementsByTagName("svg")[0],T=y.hasAttribute("viewBox"),C=parseFloat(y.getAttribute("width")),S=parseFloat(y.getAttribute("height"));if(!T&&C&&S)y.setAttribute("viewBox","0  0 "+C+" "+S);else if(T&&!C&&!S){var E=y.getAttribute("viewBox").split(/\s+|,/);C=E[2],S=E[3]}if(g)if(C&&S)c=C*g,p=S*g;else break t;y.setAttribute("width",c.toString()+"px"),y.setAttribute("height",p.toString()+"px"),d=[new XMLSerializer().serializeToString(y)]}try{var M=new window.Blob(d,{type:"image/svg+xml;charset=utf-8"})}catch{this.onProcessError();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin;var O=this,L=!1;this.data.onload=function(){L||r.revokeObjectURL(O.data),O.onProcessComplete()},this.data.onerror=function(){L?O.onProcessError():(L=!0,r.revokeObjectURL(O.data),O.data.src="data:image/svg+xml,"+encodeURIComponent(d.join("")))},r.createObjectURL(this.data,M,"image/svg+xml")},addToCache:function(){var v=this.cache.addImage(this.key,this.data);this.pendingDestroy(v)}});a.register("svg",function(v,d,c,p){if(Array.isArray(v))for(var g=0;g<v.length;g++)this.addFile(new u(this,v[g]));else this.addFile(new u(this,v,d,c,p));return this}),e.exports=u},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(21),r=i(23),a=i(8),l=i(2),o=i(7),u=i(40),v=new n({Extends:r,initialize:function(c,p,g,m){var x="csv";if(o(p)){var y=p;p=l(y,"key"),g=l(y,"url"),m=l(y,"xhrSettings"),x=l(y,"extension",x)}var T={type:"tilemapCSV",cache:c.cacheManager.tilemap,extension:x,responseType:"text",key:p,url:g,xhrSettings:m};r.call(this,c,T),this.tilemapFormat=u.CSV},onProcess:function(){this.state=h.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var d={format:this.tilemapFormat,data:this.data};this.cache.add(this.key,d),this.pendingDestroy(d)}});a.register("tilemapCSV",function(d,c,p){if(Array.isArray(d))for(var g=0;g<d.length;g++)this.addFile(new v(this,d[g]));else this.addFile(new v(this,d,c,p));return this}),e.exports=v},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(8),r=i(61),a=i(40),l=new n({Extends:r,initialize:function(u,v,d,c){r.call(this,u,v,d,c),this.type="tilemapJSON",this.cache=u.cacheManager.tilemap},addToCache:function(){var o={format:a.WELTMEISTER,data:this.data};this.cache.add(this.key,o),this.pendingDestroy(o)}});h.register("tilemapImpact",function(o,u,v){if(Array.isArray(o))for(var d=0;d<o.length;d++)this.addFile(new l(this,o[d]));else this.addFile(new l(this,o,u,v));return this}),e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(8),r=i(61),a=i(40),l=new n({Extends:r,initialize:function(u,v,d,c){r.call(this,u,v,d,c),this.type="tilemapJSON",this.cache=u.cacheManager.tilemap},addToCache:function(){var o={format:a.TILED_JSON,data:this.data};this.cache.add(this.key,o),this.pendingDestroy(o)}});h.register("tilemapTiledJSON",function(o,u,v){if(Array.isArray(o))for(var d=0;d<o.length;d++)this.addFile(new l(this,o[d]));else this.addFile(new l(this,o,u,v));return this}),e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(8),r=i(2),a=i(71),l=i(7),o=i(49),u=i(242),v=new n({Extends:o,initialize:function(c,p,g,m,x,y){var T,C;if(l(p)){var S=p;p=r(S,"key"),T=new a(c,{key:p,url:r(S,"textureURL"),extension:r(S,"textureExtension","png"),normalMap:r(S,"normalMap"),xhrSettings:r(S,"textureXhrSettings")}),C=new u(c,{key:p,url:r(S,"atlasURL"),extension:r(S,"atlasExtension","txt"),xhrSettings:r(S,"atlasXhrSettings")})}else T=new a(c,p,g,x),C=new u(c,p,m,y);T.linkFile?o.call(this,c,"unityatlas",p,[T,C,T.linkFile]):o.call(this,c,"unityatlas",p,[T,C])},addToCache:function(){if(this.isReadyToProcess()){var d=this.files[0],c=this.files[1],p=this.files[2]?this.files[2].data:null;this.loader.textureManager.addUnityAtlas(d.key,d.data,c.data,p),c.pendingDestroy(),this.complete=!0}}});h.register("unityAtlas",function(d,c,p,g,m){var x;if(Array.isArray(d))for(var y=0;y<d.length;y++)x=new v(this,d[y]),this.addFile(x.files);else x=new v(this,d,c,p,g,m),this.addFile(x.files);return this}),e.exports=v},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(21),r=i(23),a=i(8),l=i(155),o=i(2),u=i(7),v=new n({Extends:r,initialize:function(c,p,g,m,x,y,T){m===void 0&&(m="loadeddata"),x===void 0&&(x=!1),y===void 0&&(y=!1),m!=="loadeddata"&&m!=="canplay"&&m!=="canplaythrough"&&(m="loadeddata");var C={type:"video",cache:c.cacheManager.video,extension:g.type,responseType:"blob",key:p,url:g.url,xhrSettings:T,config:{loadEvent:m,asBlob:x,noAudio:y}};this.onLoadCallback=this.onVideoLoadHandler.bind(this),this.onErrorCallback=this.onVideoErrorHandler.bind(this),r.call(this,c,C)},onProcess:function(){if(this.state=h.FILE_PROCESSING,!this.config.asBlob){this.onProcessComplete();return}var d=this.createVideoElement();this.data=d;var c=this;this.data.onloadeddata=function(){c.onProcessComplete()},this.data.onerror=function(){r.revokeObjectURL(c.data),c.onProcessError()},r.createObjectURL(d,this.xhrLoader.response,""),d.load()},createVideoElement:function(){var d=document.createElement("video");return d.controls=!1,d.crossOrigin=this.loader.crossOrigin,this.config.noAudio&&(d.muted=!0,d.defaultMuted=!0,d.setAttribute("autoplay","autoplay")),d.setAttribute("playsinline","playsinline"),d.setAttribute("preload","auto"),d},onVideoLoadHandler:function(d){var c=d.target;c.removeEventListener(this.config.loadEvent,this.onLoadCallback,!0),c.removeEventListener("error",this.onErrorCallback,!0),this.data=c,this.resetXHR(),this.loader.nextFile(this,!0)},onVideoErrorHandler:function(d){var c=d.target;c&&(c.removeEventListener(this.config.loadEvent,this.onLoadCallback,!0),c.removeEventListener("error",this.onErrorCallback,!0)),this.resetXHR(),this.loader.nextFile(this,!1)},load:function(){var d=this.config.loadEvent;if(this.config.asBlob)r.prototype.load.call(this);else{this.percentComplete=0;var c=this.createVideoElement();c.addEventListener(d,this.onLoadCallback,!0),c.addEventListener("error",this.onErrorCallback,!0),c.src=l(this,this.loader.baseURL),c.load()}}});v.create=function(d,c,p,g,m,x,y){var T=d.systems.game;u(c)&&(p=o(c,"url",[]),g=o(c,"loadEvent","loadeddata"),m=o(c,"asBlob",!1),x=o(c,"noAudio",!1),y=o(c,"xhrSettings"),c=o(c,"key"));var C=v.getVideoURL(T,p);if(C)return new v(d,c,C,g,m,x,y)},v.getVideoURL=function(d,c){Array.isArray(c)||(c=[c]);for(var p=0;p<c.length;p++){var g=o(c[p],"url",c[p]);if(g.indexOf("blob:")===0)return{url:g,type:""};var m;if(g.indexOf("data:")===0?m=g.split(",")[0].match(/\/(.*?);/):m=g.match(/\.([a-zA-Z0-9]+)($|\?)/),m=o(c[p],"type",m?m[1]:"").toLowerCase(),d.device.video[m])return{url:g,type:m}}return null},a.register("video",function(d,c,p,g,m,x){var y;if(Array.isArray(d))for(var T=0;T<d.length;T++)y=v.create(this,d[T]),y&&this.addFile(y);else y=v.create(this,d,c,p,g,m,x),y&&this.addFile(y);return this}),e.exports=v},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(21),r=i(149),a=i(9),l=i(95),o=i(8),u=i(2),v=i(24),d=i(20),c=i(156),p=new n({Extends:a,initialize:function(m){a.call(this);var x=m.sys.game.config,y=m.sys.settings.loader;this.scene=m,this.systems=m.sys,this.cacheManager=m.sys.cache,this.textureManager=m.sys.textures,this.sceneManager=m.sys.game.scene,o.install(this),this.prefix="",this.path="",this.baseURL="",this.setBaseURL(u(y,"baseURL",x.loaderBaseURL)),this.setPath(u(y,"path",x.loaderPath)),this.setPrefix(u(y,"prefix",x.loaderPrefix)),this.maxParallelDownloads=u(y,"maxParallelDownloads",x.loaderMaxParallelDownloads),this.xhr=c(u(y,"responseType",x.loaderResponseType),u(y,"async",x.loaderAsync),u(y,"user",x.loaderUser),u(y,"password",x.loaderPassword),u(y,"timeout",x.loaderTimeout),u(y,"withCredentials",x.loaderWithCredentials)),this.crossOrigin=u(y,"crossOrigin",x.loaderCrossOrigin),this.totalToLoad=0,this.progress=0,this.list=new r,this.inflight=new r,this.queue=new r,this._deleteQueue=new r,this.totalFailed=0,this.totalComplete=0,this.state=h.LOADER_IDLE,this.multiKeyIndex=0,m.sys.events.once(d.BOOT,this.boot,this),m.sys.events.on(d.START,this.pluginStart,this)},boot:function(){this.systems.events.once(d.DESTROY,this.destroy,this)},pluginStart:function(){this.systems.events.once(d.SHUTDOWN,this.shutdown,this)},setBaseURL:function(g){return g===void 0&&(g=""),g!==""&&g.substr(-1)!=="/"&&(g=g.concat("/")),this.baseURL=g,this},setPath:function(g){return g===void 0&&(g=""),g!==""&&g.substr(-1)!=="/"&&(g=g.concat("/")),this.path=g,this},setPrefix:function(g){return g===void 0&&(g=""),this.prefix=g,this},setCORS:function(g){return this.crossOrigin=g,this},addFile:function(g){Array.isArray(g)||(g=[g]);for(var m=0;m<g.length;m++){var x=g[m];this.keyExists(x)||(this.list.set(x),this.emit(l.ADD,x.key,x.type,this,x),this.isLoading()&&(this.totalToLoad++,this.updateProgress()))}},keyExists:function(g){var m=g.hasCacheConflict();return m||this.list.iterate(function(x){if(x.type===g.type&&x.key===g.key)return m=!0,!1}),!m&&this.isLoading()&&(this.inflight.iterate(function(x){if(x.type===g.type&&x.key===g.key)return m=!0,!1}),this.queue.iterate(function(x){if(x.type===g.type&&x.key===g.key)return m=!0,!1})),m},addPack:function(g,m){m&&g.hasOwnProperty(m)&&(g={packKey:g[m]});var x=0,y=this.baseURL,T=this.path,C=this.prefix;for(var S in g)if(!!Object.prototype.hasOwnProperty.call(g,S)){var E=g[S],M=u(E,"baseURL",y),O=u(E,"path",T),L=u(E,"prefix",C),R=u(E,"files",null),F=u(E,"defaultType","void");if(Array.isArray(R)){this.setBaseURL(M),this.setPath(O),this.setPrefix(L);for(var D=0;D<R.length;D++){var B=R[D],N=B.hasOwnProperty("type")?B.type:F;this[N]&&(this[N](B),x++)}}}return this.setBaseURL(y),this.setPath(T),this.setPrefix(C),x>0},isLoading:function(){return this.state===h.LOADER_LOADING||this.state===h.LOADER_PROCESSING},isReady:function(){return this.state===h.LOADER_IDLE||this.state===h.LOADER_COMPLETE},start:function(){!this.isReady()||(this.progress=0,this.totalFailed=0,this.totalComplete=0,this.totalToLoad=this.list.size,this.emit(l.START,this),this.list.size===0?this.loadComplete():(this.state=h.LOADER_LOADING,this.inflight.clear(),this.queue.clear(),this.updateProgress(),this.checkLoadQueue(),this.systems.events.on(d.UPDATE,this.update,this)))},updateProgress:function(){this.progress=1-(this.list.size+this.inflight.size)/this.totalToLoad,this.emit(l.PROGRESS,this.progress)},update:function(){this.state===h.LOADER_LOADING&&this.list.size>0&&this.inflight.size<this.maxParallelDownloads&&this.checkLoadQueue()},checkLoadQueue:function(){this.list.each(function(g){if((g.state===h.FILE_POPULATED||g.state===h.FILE_PENDING&&this.inflight.size<this.maxParallelDownloads)&&(this.inflight.set(g),this.list.delete(g),g.crossOrigin||(g.crossOrigin=this.crossOrigin),g.load()),this.inflight.size===this.maxParallelDownloads)return!1},this)},nextFile:function(g,m){!this.inflight||(this.inflight.delete(g),this.updateProgress(),m?(this.totalComplete++,this.queue.set(g),this.emit(l.FILE_LOAD,g),g.onProcess()):(this.totalFailed++,this._deleteQueue.set(g),this.emit(l.FILE_LOAD_ERROR,g),this.fileProcessComplete(g)))},fileProcessComplete:function(g){!this.scene||!this.systems||!this.systems.game||this.systems.game.pendingDestroy||(g.state===h.FILE_ERRORED?g.multiFile&&g.multiFile.onFileFailed(g):g.state===h.FILE_COMPLETE&&(g.multiFile?g.multiFile.isReadyToProcess()&&g.multiFile.addToCache():g.addToCache()),this.queue.delete(g),this.list.size===0&&this.inflight.size===0&&this.queue.size===0&&this.loadComplete())},loadComplete:function(){this.emit(l.POST_PROCESS,this),this.list.clear(),this.inflight.clear(),this.queue.clear(),this.progress=1,this.state=h.LOADER_COMPLETE,this.systems.events.off(d.UPDATE,this.update,this),this._deleteQueue.iterateLocal("destroy"),this._deleteQueue.clear(),this.emit(l.COMPLETE,this,this.totalComplete,this.totalFailed)},flagForRemoval:function(g){this._deleteQueue.set(g)},saveJSON:function(g,m){return this.save(JSON.stringify(g),m)},save:function(g,m,x){m===void 0&&(m="file.json"),x===void 0&&(x="application/json");var y=new Blob([g],{type:x}),T=URL.createObjectURL(y),C=document.createElement("a");return C.download=m,C.textContent="Download "+m,C.href=T,C.click(),this},reset:function(){this.list.clear(),this.inflight.clear(),this.queue.clear();var g=this.systems.game.config,m=this.systems.settings.loader;this.setBaseURL(u(m,"baseURL",g.loaderBaseURL)),this.setPath(u(m,"path",g.loaderPath)),this.setPrefix(u(m,"prefix",g.loaderPrefix)),this.state=h.LOADER_IDLE},shutdown:function(){this.reset(),this.state=h.LOADER_SHUTDOWN,this.systems.events.off(d.UPDATE,this.update,this),this.systems.events.off(d.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.state=h.LOADER_DESTROYED,this.systems.events.off(d.UPDATE,this.update,this),this.systems.events.off(d.START,this.pluginStart,this),this.list=null,this.inflight=null,this.queue=null,this.scene=null,this.systems=null,this.textureManager=null,this.cacheManager=null,this.sceneManager=null}});v.register("Loader",p,"load"),e.exports=p},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(62),h=i(17),r={ArcadePhysics:i(1367),Body:i(527),Collider:i(528),Components:i(243),Events:i(245),Factory:i(521),GetOverlapX:i(246),GetOverlapY:i(247),SeparateX:i(537),SeparateY:i(538),Group:i(524),Image:i(522),Sprite:i(157),StaticBody:i(539),StaticGroup:i(525),Tilemap:i(1391),World:i(526)};r=h(!1,r,n),e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(36),r=i(50),a=i(353),l=i(521),o=i(2),u=i(127),v=i(523),d=i(244),c=i(24),p=i(20),g=i(3),m=i(526),x=new n({initialize:function(T){this.scene=T,this.systems=T.sys,this.config=this.getConfig(),this.world,this.add,T.sys.events.once(p.BOOT,this.boot,this),T.sys.events.on(p.START,this.start,this)},boot:function(){this.world=new m(this.scene,this.config),this.add=new l(this.world),this.systems.events.once(p.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new m(this.scene,this.config),this.add=new l(this.world));var y=this.systems.events;o(this.config,"customUpdate",!1)||y.on(p.UPDATE,this.world.update,this.world),y.on(p.POST_UPDATE,this.world.postUpdate,this.world),y.once(p.SHUTDOWN,this.shutdown,this)},enableUpdate:function(){this.systems.events.on(p.UPDATE,this.world.update,this.world)},disableUpdate:function(){this.systems.events.off(p.UPDATE,this.world.update,this.world)},getConfig:function(){var y=this.systems.game.config.physics,T=this.systems.settings.physics,C=u(o(T,"arcade",{}),o(y,"arcade",{}));return C},overlap:function(y,T,C,S,E){return C===void 0&&(C=null),S===void 0&&(S=null),E===void 0&&(E=C),this.world.collideObjects(y,T,C,S,E,!0)},collide:function(y,T,C,S,E){return C===void 0&&(C=null),S===void 0&&(S=null),E===void 0&&(E=C),this.world.collideObjects(y,T,C,S,E,!1)},collideTiles:function(y,T,C,S,E){return this.world.collideTiles(y,T,C,S,E)},overlapTiles:function(y,T,C,S,E){return this.world.overlapTiles(y,T,C,S,E)},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},accelerateTo:function(y,T,C,S,E,M){S===void 0&&(S=60);var O=Math.atan2(C-y.y,T-y.x);return y.body.acceleration.setToPolar(O,S),E!==void 0&&M!==void 0&&y.body.maxVelocity.set(E,M),O},accelerateToObject:function(y,T,C,S,E){return this.accelerateTo(y,T.x,T.y,C,S,E)},closest:function(y,T){T||(T=this.world.bodies.entries);for(var C=Number.MAX_VALUE,S=null,E=y.x,M=y.y,O=T.length,L=0;L<O;L++){var R=T[L],F=R.body||R;if(!(y===R||y===F||y===F.gameObject||y===F.center)){var D=a(E,M,F.center.x,F.center.y);D<C&&(S=R,C=D)}}return S},furthest:function(y,T){T||(T=this.world.bodies.entries);for(var C=-1,S=null,E=y.x,M=y.y,O=T.length,L=0;L<O;L++){var R=T[L],F=R.body||R;if(!(y===R||y===F||y===F.gameObject||y===F.center)){var D=a(E,M,F.center.x,F.center.y);D>C&&(S=R,C=D)}}return S},moveTo:function(y,T,C,S,E){S===void 0&&(S=60),E===void 0&&(E=0);var M=Math.atan2(C-y.y,T-y.x);return E>0&&(S=r(y.x,y.y,T,C)/(E/1e3)),y.body.velocity.setToPolar(M,S),M},moveToObject:function(y,T,C,S){return this.moveTo(y,T.x,T.y,C,S)},velocityFromAngle:function(y,T,C){return T===void 0&&(T=60),C===void 0&&(C=new g),C.setToPolar(h(y),T)},velocityFromRotation:function(y,T,C){return T===void 0&&(T=60),C===void 0&&(C=new g),C.setToPolar(y,T)},overlapRect:function(y,T,C,S,E,M){return d(this.world,y,T,C,S,E,M)},overlapCirc:function(y,T,C,S,E){return v(this.world,y,T,C,S,E)},shutdown:function(){if(!!this.world){var y=this.systems.events;y.off(p.UPDATE,this.world.update,this.world),y.off(p.POST_UPDATE,this.world.postUpdate,this.world),y.off(p.SHUTDOWN,this.shutdown,this),this.add.destroy(),this.world.destroy(),this.add=null,this.world=null}},destroy:function(){this.shutdown(),this.scene.sys.events.off(p.START,this.start,this),this.scene=null,this.systems=null}});c.register("ArcadePhysics",x,"arcadePhysics"),e.exports=x},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setAcceleration:function(n,h){return this.body.acceleration.set(n,h),this},setAccelerationX:function(n){return this.body.acceleration.x=n,this},setAccelerationY:function(n){return this.body.acceleration.y=n,this}};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setAngularVelocity:function(n){return this.body.angularVelocity=n,this},setAngularAcceleration:function(n){return this.body.angularAcceleration=n,this},setAngularDrag:function(n){return this.body.angularDrag=n,this}};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setBounce:function(n,h){return this.body.bounce.set(n,h),this},setBounceX:function(n){return this.body.bounce.x=n,this},setBounceY:function(n){return this.body.bounce.y=n,this},setCollideWorldBounds:function(n,h,r){return this.body.setCollideWorldBounds(n,h,r),this}};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setDebug:function(n,h,r){return this.debugShowBody=n,this.debugShowVelocity=h,this.debugBodyColor=r,this},setDebugBodyColor:function(n){return this.body.debugBodyColor=n,this},debugShowBody:{get:function(){return this.body.debugShowBody},set:function(n){this.body.debugShowBody=n}},debugShowVelocity:{get:function(){return this.body.debugShowVelocity},set:function(n){this.body.debugShowVelocity=n}},debugBodyColor:{get:function(){return this.body.debugBodyColor},set:function(n){this.body.debugBodyColor=n}}};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setDrag:function(n,h){return this.body.drag.set(n,h),this},setDragX:function(n){return this.body.drag.x=n,this},setDragY:function(n){return this.body.drag.y=n,this},setDamping:function(n){return this.body.useDamping=n,this}};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={enableBody:function(n,h,r,a,l){return n&&this.body.reset(h,r),a&&(this.body.gameObject.active=!0),l&&(this.body.gameObject.visible=!0),this.body.enable=!0,this},disableBody:function(n,h){return n===void 0&&(n=!1),h===void 0&&(h=!1),this.body.stop(),this.body.enable=!1,n&&(this.body.gameObject.active=!1),h&&(this.body.gameObject.visible=!1),this},refreshBody:function(){return this.body.updateFromGameObject(),this}};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setFriction:function(n,h){return this.body.friction.set(n,h),this},setFrictionX:function(n){return this.body.friction.x=n,this},setFrictionY:function(n){return this.body.friction.y=n,this}};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setGravity:function(n,h){return this.body.gravity.set(n,h),this},setGravityX:function(n){return this.body.gravity.x=n,this},setGravityY:function(n){return this.body.gravity.y=n,this}};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setImmovable:function(n){return n===void 0&&(n=!0),this.body.immovable=n,this}};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setMass:function(n){return this.body.mass=n,this}};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setPushable:function(n){return n===void 0&&(n=!0),this.body.pushable=n,this}};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setOffset:function(n,h){return this.body.setOffset(n,h),this},setSize:function(n,h,r){return this.body.setSize(n,h,r),this},setBodySize:function(n,h,r){return this.body.setSize(n,h,r),this},setCircle:function(n,h,r){return this.body.setCircle(n,h,r),this}};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setVelocity:function(n,h){return this.body.setVelocity(n,h),this},setVelocityX:function(n){return this.body.setVelocityX(n),this},setVelocityY:function(n){return this.body.setVelocityY(n),this},setMaxVelocity:function(n,h){return this.body.maxVelocity.set(n,h),this}};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="collide"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="overlap"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pause"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="resume"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="tilecollide"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="tileoverlap"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="worldbounds"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="worldstep"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i,n,h,r,a,l,o,u,v,d,c,p,g,m,x,y,T,C=function(R,F,D){i=R,n=F;var B=i.velocity.x,N=n.velocity.x;return h=i.pushable,v=i._dx<0,d=i._dx>0,c=i._dx===0,x=Math.abs(i.right-n.x)<=Math.abs(n.right-i.x),o=N-B*i.bounce.x,r=n.pushable,p=n._dx<0,g=n._dx>0,m=n._dx===0,y=!x,u=B-N*n.bounce.x,T=Math.abs(D),S()},S=function(){return d&&x&&n.blocked.right?(i.processX(-T,o,!1,!0),1):v&&y&&n.blocked.left?(i.processX(T,o,!0),1):g&&y&&i.blocked.right?(n.processX(-T,u,!1,!0),2):p&&x&&i.blocked.left?(n.processX(T,u,!0),2):0},E=function(){var R=i.velocity.x,F=n.velocity.x,D=Math.sqrt(F*F*n.mass/i.mass)*(F>0?1:-1),B=Math.sqrt(R*R*i.mass/n.mass)*(R>0?1:-1),N=(D+B)*.5;return D-=N,B-=N,a=N+D*i.bounce.x,l=N+B*n.bounce.x,v&&y?M(0):p&&x?M(1):d&&x?M(2):g&&y?M(3):!1},M=function(R){if(h&&r)T*=.5,R===0||R===3?(i.processX(T,a),n.processX(-T,l)):(i.processX(-T,a),n.processX(T,l));else if(h&&!r)R===0||R===3?i.processX(T,o,!0):i.processX(-T,o,!1,!0);else if(!h&&r)R===0||R===3?n.processX(-T,u,!1,!0):n.processX(T,u,!0);else{var F=T*.5;R===0?m?(i.processX(T,0,!0),n.processX(0,null,!1,!0)):g?(i.processX(F,0,!0),n.processX(-F,0,!1,!0)):(i.processX(F,n.velocity.x,!0),n.processX(-F,null,!1,!0)):R===1?c?(i.processX(0,null,!1,!0),n.processX(T,0,!0)):d?(i.processX(-F,0,!1,!0),n.processX(F,0,!0)):(i.processX(-F,null,!1,!0),n.processX(F,i.velocity.x,!0)):R===2?m?(i.processX(-T,0,!1,!0),n.processX(0,null,!0)):p?(i.processX(-F,0,!1,!0),n.processX(F,0,!0)):(i.processX(-F,n.velocity.x,!1,!0),n.processX(F,null,!0)):R===3&&(c?(i.processX(0,null,!0),n.processX(-T,0,!1,!0)):v?(i.processX(F,0,!0),n.processX(-F,0,!1,!0)):(i.processX(F,n.velocity.y,!0),n.processX(-F,null,!1,!0)))}return!0},O=function(R){R===1?n.velocity.x=0:x?n.processX(T,u,!0):n.processX(-T,u,!1,!0),i.moves&&(n.y+=(i.y-i.prev.y)*i.friction.y,n._dy=n.y-n.prev.y)},L=function(R){R===2?i.velocity.x=0:y?i.processX(T,o,!0):i.processX(-T,o,!1,!0),n.moves&&(i.y+=(n.y-n.prev.y)*n.friction.y,i._dy=i.y-i.prev.y)};e.exports={BlockCheck:S,Check:E,Set:C,Run:M,RunImmovableBody1:O,RunImmovableBody2:L}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i,n,h,r,a,l,o,u,v,d,c,p,g,m,x,y,T,C=function(R,F,D){i=R,n=F;var B=i.velocity.y,N=n.velocity.y;return h=i.pushable,v=i._dy<0,d=i._dy>0,c=i._dy===0,x=Math.abs(i.bottom-n.y)<=Math.abs(n.bottom-i.y),o=N-B*i.bounce.y,r=n.pushable,p=n._dy<0,g=n._dy>0,m=n._dy===0,y=!x,u=B-N*n.bounce.y,T=Math.abs(D),S()},S=function(){return d&&x&&n.blocked.down?(i.processY(-T,o,!1,!0),1):v&&y&&n.blocked.up?(i.processY(T,o,!0),1):g&&y&&i.blocked.down?(n.processY(-T,u,!1,!0),2):p&&x&&i.blocked.up?(n.processY(T,u,!0),2):0},E=function(){var R=i.velocity.y,F=n.velocity.y,D=Math.sqrt(F*F*n.mass/i.mass)*(F>0?1:-1),B=Math.sqrt(R*R*i.mass/n.mass)*(R>0?1:-1),N=(D+B)*.5;return D-=N,B-=N,a=N+D*i.bounce.y,l=N+B*n.bounce.y,v&&y?M(0):p&&x?M(1):d&&x?M(2):g&&y?M(3):!1},M=function(R){if(h&&r)T*=.5,R===0||R===3?(i.processY(T,a),n.processY(-T,l)):(i.processY(-T,a),n.processY(T,l));else if(h&&!r)R===0||R===3?i.processY(T,o,!0):i.processY(-T,o,!1,!0);else if(!h&&r)R===0||R===3?n.processY(-T,u,!1,!0):n.processY(T,u,!0);else{var F=T*.5;R===0?m?(i.processY(T,0,!0),n.processY(0,null,!1,!0)):g?(i.processY(F,0,!0),n.processY(-F,0,!1,!0)):(i.processY(F,n.velocity.y,!0),n.processY(-F,null,!1,!0)):R===1?c?(i.processY(0,null,!1,!0),n.processY(T,0,!0)):d?(i.processY(-F,0,!1,!0),n.processY(F,0,!0)):(i.processY(-F,null,!1,!0),n.processY(F,i.velocity.y,!0)):R===2?m?(i.processY(-T,0,!1,!0),n.processY(0,null,!0)):p?(i.processY(-F,0,!1,!0),n.processY(F,0,!0)):(i.processY(-F,n.velocity.y,!1,!0),n.processY(F,null,!0)):R===3&&(c?(i.processY(0,null,!0),n.processY(-T,0,!1,!0)):v?(i.processY(F,0,!0),n.processY(-F,0,!1,!0)):(i.processY(F,n.velocity.y,!0),n.processY(-F,null,!1,!0)))}return!0},O=function(R){R===1?n.velocity.y=0:x?n.processY(T,u,!0):n.processY(-T,u,!1,!0),i.moves&&(n.x+=(i.x-i.prev.x)*i.friction.x,n._dx=n.x-n.prev.x)},L=function(R){R===2?i.velocity.y=0:y?i.processY(T,o,!0):i.processY(-T,o,!1,!0),n.moves&&(i.x+=(n.x-n.prev.x)*n.friction.x,i._dx=i.x-i.prev.x)};e.exports={BlockCheck:S,Check:E,Set:C,Run:M,RunImmovableBody1:O,RunImmovableBody2:L}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n={ProcessTileCallbacks:i(530),ProcessTileSeparationX:i(534),ProcessTileSeparationY:i(536),SeparateTile:i(532),TileCheckX:i(533),TileCheckY:i(535),TileIntersectsBody:i(248)};e.exports=n},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(3),r=new n({initialize:function(){this.boundsCenter=new h,this.centerDiff=new h},parseBody:function(a){if(a=a.hasOwnProperty("body")?a.body:a,!a.hasOwnProperty("bounds")||!a.hasOwnProperty("centerOfMass"))return!1;var l=this.boundsCenter,o=this.centerDiff,u=a.bounds.max.x-a.bounds.min.x,v=a.bounds.max.y-a.bounds.min.y,d=u*a.centerOfMass.x,c=v*a.centerOfMass.y;return l.set(u/2,v/2),o.set(d-l.x,c-l.y),!0},getTopLeft:function(a,l,o){if(l===void 0&&(l=0),o===void 0&&(o=0),this.parseBody(a)){var u=this.boundsCenter,v=this.centerDiff;return new h(l+u.x+v.x,o+u.y+v.y)}return!1},getTopCenter:function(a,l,o){if(l===void 0&&(l=0),o===void 0&&(o=0),this.parseBody(a)){var u=this.boundsCenter,v=this.centerDiff;return new h(l+v.x,o+u.y+v.y)}return!1},getTopRight:function(a,l,o){if(l===void 0&&(l=0),o===void 0&&(o=0),this.parseBody(a)){var u=this.boundsCenter,v=this.centerDiff;return new h(l-(u.x-v.x),o+u.y+v.y)}return!1},getLeftCenter:function(a,l,o){if(l===void 0&&(l=0),o===void 0&&(o=0),this.parseBody(a)){var u=this.boundsCenter,v=this.centerDiff;return new h(l+u.x+v.x,o+v.y)}return!1},getCenter:function(a,l,o){if(l===void 0&&(l=0),o===void 0&&(o=0),this.parseBody(a)){var u=this.centerDiff;return new h(l+u.x,o+u.y)}return!1},getRightCenter:function(a,l,o){if(l===void 0&&(l=0),o===void 0&&(o=0),this.parseBody(a)){var u=this.boundsCenter,v=this.centerDiff;return new h(l-(u.x-v.x),o+v.y)}return!1},getBottomLeft:function(a,l,o){if(l===void 0&&(l=0),o===void 0&&(o=0),this.parseBody(a)){var u=this.boundsCenter,v=this.centerDiff;return new h(l+u.x+v.x,o-(u.y-v.y))}return!1},getBottomCenter:function(a,l,o){if(l===void 0&&(l=0),o===void 0&&(o=0),this.parseBody(a)){var u=this.boundsCenter,v=this.centerDiff;return new h(l+v.x,o-(u.y-v.y))}return!1},getBottomRight:function(a,l,o){if(l===void 0&&(l=0),o===void 0&&(o=0),this.parseBody(a)){var u=this.boundsCenter,v=this.centerDiff;return new h(l-(u.x-v.x),o-(u.y-v.y))}return!1}});e.exports=r},function(e,f){/**
 * @author       Stefan Hedman <schteppe@gmail.com> (http://steffe.se)
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={decomp:R,quickDecomp:N,isSimple:D,removeCollinearPoints:U,removeDuplicatePoints:X,makeCCW:x};function i(b,I,G){G=G||0;var Y=[0,0],V,W,H,Z,q,_,nt;return V=b[1][1]-b[0][1],W=b[0][0]-b[1][0],H=V*b[0][0]+W*b[0][1],Z=I[1][1]-I[0][1],q=I[0][0]-I[1][0],_=Z*I[0][0]+q*I[0][1],nt=V*q-Z*W,K(nt,0,G)||(Y[0]=(q*H-W*_)/nt,Y[1]=(V*_-Z*H)/nt),Y}function n(b,I,G,Y){var V=I[0]-b[0],W=I[1]-b[1],H=Y[0]-G[0],Z=Y[1]-G[1];if(H*W-Z*V===0)return!1;var q=(V*(G[1]-b[1])+W*(b[0]-G[0]))/(H*W-Z*V),_=(H*(b[1]-G[1])+Z*(G[0]-b[0]))/(Z*V-H*W);return q>=0&&q<=1&&_>=0&&_<=1}function h(b,I,G){return(I[0]-b[0])*(G[1]-b[1])-(G[0]-b[0])*(I[1]-b[1])}function r(b,I,G){return h(b,I,G)>0}function a(b,I,G){return h(b,I,G)>=0}function l(b,I,G){return h(b,I,G)<0}function o(b,I,G){return h(b,I,G)<=0}var u=[],v=[];function d(b,I,G,Y){if(Y){var V=u,W=v;V[0]=I[0]-b[0],V[1]=I[1]-b[1],W[0]=G[0]-I[0],W[1]=G[1]-I[1];var H=V[0]*W[0]+V[1]*W[1],Z=Math.sqrt(V[0]*V[0]+V[1]*V[1]),q=Math.sqrt(W[0]*W[0]+W[1]*W[1]),_=Math.acos(H/(Z*q));return _<Y}else return h(b,I,G)===0}function c(b,I){var G=I[0]-b[0],Y=I[1]-b[1];return G*G+Y*Y}function p(b,I){var G=b.length;return b[I<0?I%G+G:I%G]}function g(b){b.length=0}function m(b,I,G,Y){for(var V=G;V<Y;V++)b.push(I[V])}function x(b){for(var I=0,G=b,Y=1;Y<b.length;++Y)(G[Y][1]<G[I][1]||G[Y][1]===G[I][1]&&G[Y][0]>G[I][0])&&(I=Y);return r(p(b,I-1),p(b,I),p(b,I+1))?!1:(y(b),!0)}function y(b){for(var I=[],G=b.length,Y=0;Y!==G;Y++)I.push(b.pop());for(var Y=0;Y!==G;Y++)b[Y]=I[Y]}function T(b,I){return l(p(b,I-1),p(b,I),p(b,I+1))}var C=[],S=[];function E(b,I,G){var Y,V,W=C,H=S;if(a(p(b,I+1),p(b,I),p(b,G))&&o(p(b,I-1),p(b,I),p(b,G)))return!1;V=c(p(b,I),p(b,G));for(var Z=0;Z!==b.length;++Z)if(!((Z+1)%b.length===I||Z===I)&&a(p(b,I),p(b,G),p(b,Z+1))&&o(p(b,I),p(b,G),p(b,Z))&&(W[0]=p(b,I),W[1]=p(b,G),H[0]=p(b,Z),H[1]=p(b,Z+1),Y=i(W,H),c(p(b,I),Y)<V))return!1;return!0}function M(b,I,G){for(var Y=0;Y!==b.length;++Y)if(!(Y===I||Y===G||(Y+1)%b.length===I||(Y+1)%b.length===G)&&n(p(b,I),p(b,G),p(b,Y),p(b,Y+1)))return!1;return!0}function O(b,I,G,Y){var V=Y||[];if(g(V),I<G)for(var W=I;W<=G;W++)V.push(b[W]);else{for(var W=0;W<=G;W++)V.push(b[W]);for(var W=I;W<b.length;W++)V.push(b[W])}return V}function L(b){for(var I=[],G=[],Y=[],V=[],W=Number.MAX_VALUE,H=0;H<b.length;++H)if(T(b,H)){for(var Z=0;Z<b.length;++Z)if(E(b,H,Z)){G=L(O(b,H,Z,V)),Y=L(O(b,Z,H,V));for(var q=0;q<Y.length;q++)G.push(Y[q]);G.length<W&&(I=G,W=G.length,I.push([p(b,H),p(b,Z)]))}}return I}function R(b){var I=L(b);return I.length>0?F(b,I):[b]}function F(b,I){if(I.length===0)return[b];if(I instanceof Array&&I.length&&I[0]instanceof Array&&I[0].length===2&&I[0][0]instanceof Array){for(var G=[b],Y=0;Y<I.length;Y++)for(var V=I[Y],W=0;W<G.length;W++){var H=G[W],Z=F(H,V);if(Z){G.splice(W,1),G.push(Z[0],Z[1]);break}}return G}else{var V=I,Y=b.indexOf(V[0]),W=b.indexOf(V[1]);return Y!==-1&&W!==-1?[O(b,Y,W),O(b,W,Y)]:!1}}function D(b){var I=b,G;for(G=0;G<I.length-1;G++)for(var Y=0;Y<G-1;Y++)if(n(I[G],I[G+1],I[Y],I[Y+1]))return!1;for(G=1;G<I.length-2;G++)if(n(I[0],I[I.length-1],I[G],I[G+1]))return!1;return!0}function B(b,I,G,Y,V){V=V||0;var W=I[1]-b[1],H=b[0]-I[0],Z=W*b[0]+H*b[1],q=Y[1]-G[1],_=G[0]-Y[0],nt=q*G[0]+_*G[1],rt=W*_-q*H;return K(rt,0,V)?[0,0]:[(_*Z-H*nt)/rt,(W*nt-q*Z)/rt]}function N(b,I,G,Y,V,W,H){W=W||100,H=H||0,V=V||25,I=typeof I!="undefined"?I:[],G=G||[],Y=Y||[];var Z=[0,0],q=[0,0],_=[0,0],nt=0,rt=0,at=0,ct=0,ut=0,vt=0,It=0,St=[],Et=[],dt=b,Bt=b;if(Bt.length<3)return I;if(H++,H>W)return console.warn("quickDecomp: max level ("+W+") reached."),I;for(var mt=0;mt<b.length;++mt)if(T(dt,mt)){G.push(dt[mt]),nt=rt=Number.MAX_VALUE;for(var At=0;At<b.length;++At)r(p(dt,mt-1),p(dt,mt),p(dt,At))&&o(p(dt,mt-1),p(dt,mt),p(dt,At-1))&&(_=B(p(dt,mt-1),p(dt,mt),p(dt,At),p(dt,At-1)),l(p(dt,mt+1),p(dt,mt),_)&&(at=c(dt[mt],_),at<rt&&(rt=at,q=_,vt=At))),r(p(dt,mt+1),p(dt,mt),p(dt,At+1))&&o(p(dt,mt+1),p(dt,mt),p(dt,At))&&(_=B(p(dt,mt+1),p(dt,mt),p(dt,At),p(dt,At+1)),r(p(dt,mt-1),p(dt,mt),_)&&(at=c(dt[mt],_),at<nt&&(nt=at,Z=_,ut=At)));if(vt===(ut+1)%b.length)_[0]=(q[0]+Z[0])/2,_[1]=(q[1]+Z[1])/2,Y.push(_),mt<ut?(m(St,dt,mt,ut+1),St.push(_),Et.push(_),vt!==0&&m(Et,dt,vt,dt.length),m(Et,dt,0,mt+1)):(mt!==0&&m(St,dt,mt,dt.length),m(St,dt,0,ut+1),St.push(_),Et.push(_),m(Et,dt,vt,mt+1));else{if(vt>ut&&(ut+=b.length),ct=Number.MAX_VALUE,ut<vt)return I;for(var At=vt;At<=ut;++At)a(p(dt,mt-1),p(dt,mt),p(dt,At))&&o(p(dt,mt+1),p(dt,mt),p(dt,At))&&(at=c(p(dt,mt),p(dt,At)),at<ct&&M(dt,mt,At)&&(ct=at,It=At%b.length));mt<It?(m(St,dt,mt,It+1),It!==0&&m(Et,dt,It,Bt.length),m(Et,dt,0,mt+1)):(mt!==0&&m(St,dt,mt,Bt.length),m(St,dt,0,It+1),m(Et,dt,It,mt+1))}return St.length<Et.length?(N(St,I,G,Y,V,W,H),N(Et,I,G,Y,V,W,H)):(N(Et,I,G,Y,V,W,H),N(St,I,G,Y,V,W,H)),I}return I.push(b),I}function U(b,I){for(var G=0,Y=b.length-1;b.length>3&&Y>=0;--Y)d(p(b,Y-1),p(b,Y),p(b,Y+1),I)&&(b.splice(Y%b.length,1),G++);return G}function X(b,I){for(var G=b.length-1;G>=1;--G)for(var Y=b[G],V=G-1;V>=0;--V)if(k(Y,b[V],I)){b.splice(G,1);continue}}function K(b,I,G){return G=G||0,Math.abs(b-I)<=G}function k(b,I,G){return K(b[0],I[0],G)&&K(b[1],I[1],G)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(86),h=i(0),r=i(591),a=i(128),l=i(592),o=i(1395),u=i(1396),v=i(1397),d=i(593),c=i(589),p=i(590),g=i(1398),m=i(64),x=new h({initialize:function(T){this.world=T,this.scene=T.scene,this.sys=T.scene.sys},rectangle:function(y,T,C,S,E){var M=n.rectangle(y,T,C,S,E);return this.world.add(M),M},trapezoid:function(y,T,C,S,E,M){var O=n.trapezoid(y,T,C,S,E,M);return this.world.add(O),O},circle:function(y,T,C,S,E){var M=n.circle(y,T,C,S,E);return this.world.add(M),M},polygon:function(y,T,C,S,E){var M=n.polygon(y,T,C,S,E);return this.world.add(M),M},fromVertices:function(y,T,C,S,E,M,O){typeof C=="string"&&(C=m.fromPath(C));var L=n.fromVertices(y,T,C,S,E,M,O);return this.world.add(L),L},fromPhysicsEditor:function(y,T,C,S,E){E===void 0&&(E=!0);var M=c.parseBody(y,T,C,S);return E&&!this.world.has(M)&&this.world.add(M),M},fromSVG:function(y,T,C,S,E,M){S===void 0&&(S=1),E===void 0&&(E={}),M===void 0&&(M=!0);for(var O=C.getElementsByTagName("path"),L=[],R=0;R<O.length;R++){var F=l.pathToVertices(O[R],30);S!==1&&m.scale(F,S,S),L.push(F)}var D=n.fromVertices(y,T,L,E);return M&&this.world.add(D),D},fromJSON:function(y,T,C,S,E){S===void 0&&(S={}),E===void 0&&(E=!0);var M=p.parseBody(y,T,C,S);return M&&E&&this.world.add(M),M},imageStack:function(y,T,C,S,E,M,O,L,R){O===void 0&&(O=0),L===void 0&&(L=0),R===void 0&&(R={});var F=this.world,D=this.sys.displayList;R.addToWorld=!1;var B=r.stack(C,S,E,M,O,L,function(N,U){var X=new u(F,N,U,y,T,R);return D.add(X),X.body});return F.add(B),B},stack:function(y,T,C,S,E,M,O){var L=r.stack(y,T,C,S,E,M,O);return this.world.add(L),L},pyramid:function(y,T,C,S,E,M,O){var L=r.pyramid(y,T,C,S,E,M,O);return this.world.add(L),L},chain:function(y,T,C,S,E,M){return r.chain(y,T,C,S,E,M)},mesh:function(y,T,C,S,E){return r.mesh(y,T,C,S,E)},newtonsCradle:function(y,T,C,S,E){var M=r.newtonsCradle(y,T,C,S,E);return this.world.add(M),M},car:function(y,T,C,S,E){var M=r.car(y,T,C,S,E);return this.world.add(M),M},softBody:function(y,T,C,S,E,M,O,L,R,F){var D=r.softBody(y,T,C,S,E,M,O,L,R,F);return this.world.add(D),D},joint:function(y,T,C,S,E){return this.constraint(y,T,C,S,E)},spring:function(y,T,C,S,E){return this.constraint(y,T,C,S,E)},constraint:function(y,T,C,S,E){S===void 0&&(S=1),E===void 0&&(E={}),E.bodyA=y.type==="body"?y:y.body,E.bodyB=T.type==="body"?T:T.body,isNaN(C)||(E.length=C),E.stiffness=S;var M=a.create(E);return this.world.add(M),M},worldConstraint:function(y,T,C,S){C===void 0&&(C=1),S===void 0&&(S={}),S.bodyB=y.type==="body"?y:y.body,isNaN(T)||(S.length=T),S.stiffness=C;var E=a.create(S);return this.world.add(E),E},mouseSpring:function(y){return this.pointerConstraint(y)},pointerConstraint:function(y){y===void 0&&(y={}),y.hasOwnProperty("render")||(y.render={visible:!1});var T=new g(this.scene,this.world,y);return this.world.add(T.constraint),T},image:function(y,T,C,S,E){var M=new u(this.world,y,T,C,S,E);return this.sys.displayList.add(M),M},tileBody:function(y,T){return new d(this.world,y,T)},sprite:function(y,T,C,S,E){var M=new v(this.world,y,T,C,S,E);return this.sys.displayList.add(M),this.sys.updateList.add(M),M},gameObject:function(y,T,C){return o(this.world,y,T,C)},destroy:function(){this.world=null,this.scene=null,this.sys=null}});e.exports=x},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(249),h=i(2),r=i(3);function a(o){return!!o.get&&typeof o.get=="function"||!!o.set&&typeof o.set=="function"}var l=function(o,u,v,d){v===void 0&&(v={}),d===void 0&&(d=!0);var c=u.x,p=u.y;u.body={temp:!0,position:{x:c,y:p}};var g=[n.Bounce,n.Collision,n.Force,n.Friction,n.Gravity,n.Mass,n.Sensor,n.SetBody,n.Sleep,n.Static,n.Transform,n.Velocity];if(g.forEach(function(x){for(var y in x)a(x[y])?Object.defineProperty(u,y,{get:x[y].get,set:x[y].set}):Object.defineProperty(u,y,{value:x[y]})}),u.world=o,u._tempVec2=new r(c,p),v.hasOwnProperty("type")&&v.type==="body")u.setExistingBody(v,d);else{var m=h(v,"shape",null);m||(m="rectangle"),v.addToWorld=d,u.setBody(m,v)}return u};e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(249),r=i(15),a=i(2),l=i(125),o=i(167),u=i(3),v=new n({Extends:l,Mixins:[h.Bounce,h.Collision,h.Force,h.Friction,h.Gravity,h.Mass,h.Sensor,h.SetBody,h.Sleep,h.Static,h.Transform,h.Velocity,o],initialize:function(c,p,g,m,x,y){r.call(this,c.scene,"Image"),this._crop=this.resetCropObject(),this.setTexture(m,x),this.setSizeToFrame(),this.setOrigin(),this.world=c,this._tempVec2=new u(p,g);var T=a(y,"shape",null);T?this.setBody(T,y):this.setRectangle(this.width,this.height,y),this.setPosition(p,g),this.initPipeline()}});e.exports=v},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(164),h=i(0),r=i(249),a=i(15),l=i(2),o=i(167),u=i(73),v=i(3),d=new h({Extends:u,Mixins:[r.Bounce,r.Collision,r.Force,r.Friction,r.Gravity,r.Mass,r.Sensor,r.SetBody,r.Sleep,r.Static,r.Transform,r.Velocity,o],initialize:function(p,g,m,x,y,T){a.call(this,p.scene,"Sprite"),this._crop=this.resetCropObject(),this.anims=new n(this),this.setTexture(x,y),this.setSizeToFrame(),this.setOrigin(),this.world=p,this._tempVec2=new v(g,m);var C=l(T,"shape",null);C?this.setBody(C,T):this.setRectangle(this.width,this.height,T),this.setPosition(g,m),this.initPipeline()}});e.exports=d},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(84),h=i(0),r=i(118),a=i(128),l=i(273),o=i(272),u=i(51),v=i(127),d=i(165),c=i(3),p=i(64),g=new h({initialize:function(x,y,T){T===void 0&&(T={});var C={label:"Pointer Constraint",pointA:{x:0,y:0},pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,collisionFilter:{category:1,mask:4294967295,group:0}};this.scene=x,this.world=y,this.camera=null,this.pointer=null,this.active=!0,this.position=new c,this.body=null,this.part=null,this.constraint=a.create(v(T,C)),this.world.on(o.BEFORE_UPDATE,this.update,this),x.sys.input.on(u.POINTER_DOWN,this.onDown,this),x.sys.input.on(u.POINTER_UP,this.onUp,this)},onDown:function(m){this.pointer||(this.pointer=m,this.camera=m.camera)},onUp:function(m){m===this.pointer&&(this.pointer=null)},getBody:function(m){var x=this.position,y=this.constraint;this.camera.getWorldPoint(m.x,m.y,x);for(var T=r.allBodies(this.world.localWorld),C=0;C<T.length;C++){var S=T[C];if(!S.ignorePointer&&n.contains(S.bounds,x)&&l.canCollide(S.collisionFilter,y.collisionFilter)&&this.hitTestBody(S,x))return this.world.emit(o.DRAG_START,S,this.part,this),!0}return!1},hitTestBody:function(m,x){for(var y=this.constraint,T=m.parts.length,C=T>1?1:0,S=C;S<T;S++){var E=m.parts[S];if(p.contains(E.vertices,x))return y.pointA=x,y.pointB={x:x.x-m.position.x,y:x.y-m.position.y},y.bodyB=m,y.angleB=m.angle,d.set(m,!1),this.part=E,this.body=m,!0}return!1},update:function(){var m=this.pointer,x=this.body;if(!this.active||!m){x&&this.stopDrag();return}if(!m.isDown&&x){this.stopDrag();return}else if(m.isDown){if(!x&&!this.getBody(m))return;x=this.body;var y=this.position,T=this.constraint;this.camera.getWorldPoint(m.x,m.y,y),T.pointA.x=y.x,T.pointA.y=y.y,d.set(x,!1),this.world.emit(o.DRAG,x,this)}},stopDrag:function(){var m=this.body,x=this.constraint;x.bodyB=null,x.pointB=null,this.pointer=null,this.body=null,this.part=null,m&&this.world.emit(o.DRAG_END,m,this)},destroy:function(){this.world.removeConstraint(this.constraint),this.pointer=null,this.constraint=null,this.body=null,this.part=null,this.world.off(o.BEFORE_UPDATE,this.update),this.scene.sys.input.off(u.POINTER_DOWN,this.onDown,this),this.scene.sys.input.off(u.POINTER_UP,this.onUp,this)}});e.exports=g},function(e,f,i){var n={};e.exports=n;var h=i(595),r=i(32);(function(){n.name="matter-js",n.version="0.14.2",n.uses=[],n.used=[],n.use=function(){h.use(n,Array.prototype.slice.call(arguments))},n.before=function(a,l){return a=a.replace(/^Matter./,""),r.chainPathBefore(n,a,l)},n.after=function(a,l){return a=a.replace(/^Matter./,""),r.chainPathAfter(n,a,l)}})()},function(e,f,i){var n={};e.exports=n;var h=i(83),r=i(274),a=i(84),l=i(86),o=i(64);(function(){n.collides=function(u,v){for(var d=[],c=0;c<v.length;c++){var p=v[c];if(u!==p&&a.overlaps(p.bounds,u.bounds))for(var g=p.parts.length===1?0:1;g<p.parts.length;g++){var m=p.parts[g];if(a.overlaps(m.bounds,u.bounds)){var x=r.collides(m,u);if(x.collided){d.push(x);break}}}}return d},n.ray=function(u,v,d,c){c=c||1e-100;for(var p=h.angle(v,d),g=h.magnitude(h.sub(v,d)),m=(d.x+v.x)*.5,x=(d.y+v.y)*.5,y=l.rectangle(m,x,g,c,{angle:p}),T=n.collides(y,u),C=0;C<T.length;C+=1){var S=T[C];S.body=S.bodyB=S.bodyA}return T},n.region=function(u,v,d){for(var c=[],p=0;p<u.length;p++){var g=u[p],m=a.overlaps(g.bounds,v);(m&&!d||!m&&d)&&c.push(g)}return c},n.point=function(u,v){for(var d=[],c=0;c<u.length;c++){var p=u[c];if(a.contains(p.bounds,v))for(var g=p.parts.length===1?0:1;g<p.parts.length;g++){var m=p.parts[g];if(a.contains(m.bounds,v)&&o.contains(m.vertices,v)){d.push(p);break}}}return d}})()},function(e,f,i){var n={};e.exports=n;var h=i(596),r=i(165),a=i(599),l=i(598),o=i(1523),u=i(597),v=i(166),d=i(118),c=i(128),p=i(32),g=i(41);(function(){n.create=function(m,x){x=p.isElement(m)?x:m,m=p.isElement(m)?m:null,x=x||{},(m||x.render)&&p.warn("Engine.create: engine.render is deprecated (see docs)");var y={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},timing:{timestamp:0,timeScale:1},broadphase:{controller:u}},T=p.extend(y,x);return T.world=x.world||h.create(T.world),T.pairs=l.create(),T.broadphase=T.broadphase.controller.create(T.broadphase),T.metrics=T.metrics||{extended:!1},T.metrics=o.create(T.metrics),T},n.update=function(m,x,y){x=x||1e3/60,y=y||1;var T=m.world,C=m.timing,S=m.broadphase,E=[],M;C.timestamp+=x*C.timeScale;var O={timestamp:C.timestamp};v.trigger(m,"beforeUpdate",O);var L=d.allBodies(T),R=d.allConstraints(T);for(o.reset(m.metrics),m.enableSleeping&&r.update(L,C.timeScale),n._bodiesApplyGravity(L,T.gravity),n._bodiesUpdate(L,x,C.timeScale,y,T.bounds),c.preSolveAll(L),M=0;M<m.constraintIterations;M++)c.solveAll(R,C.timeScale);c.postSolveAll(L),S.controller?(T.isModified&&S.controller.clear(S),S.controller.update(S,L,m,T.isModified),E=S.pairsList):E=L,T.isModified&&d.setModified(T,!1,!1,!0);var F=S.detector(E,m),D=m.pairs,B=C.timestamp;for(l.update(D,F,B),l.removeOld(D,B),m.enableSleeping&&r.afterCollisions(D.list,C.timeScale),D.collisionStart.length>0&&v.trigger(m,"collisionStart",{pairs:D.collisionStart}),a.preSolvePosition(D.list),M=0;M<m.positionIterations;M++)a.solvePosition(D.list,L,C.timeScale);for(a.postSolvePosition(L),c.preSolveAll(L),M=0;M<m.constraintIterations;M++)c.solveAll(R,C.timeScale);for(c.postSolveAll(L),a.preSolveVelocity(D.list),M=0;M<m.velocityIterations;M++)a.solveVelocity(D.list,C.timeScale);return D.collisionActive.length>0&&v.trigger(m,"collisionActive",{pairs:D.collisionActive}),D.collisionEnd.length>0&&v.trigger(m,"collisionEnd",{pairs:D.collisionEnd}),o.update(m.metrics,m),n._bodiesClearForces(L),v.trigger(m,"afterUpdate",O),m},n.merge=function(m,x){if(p.extend(m,x),x.world){m.world=x.world,n.clear(m);for(var y=d.allBodies(m.world),T=0;T<y.length;T++){var C=y[T];r.set(C,!1),C.id=p.nextId()}}},n.clear=function(m){var x=m.world;l.clear(m.pairs);var y=m.broadphase;if(y.controller){var T=d.allBodies(x);y.controller.clear(y),y.controller.update(y,T,m,!0)}},n._bodiesClearForces=function(m){for(var x=0;x<m.length;x++){var y=m[x];y.force.x=0,y.force.y=0,y.torque=0}},n._bodiesApplyGravity=function(m,x){var y=typeof x.scale!="undefined"?x.scale:.001;if(!(x.x===0&&x.y===0||y===0))for(var T=0;T<m.length;T++){var C=m[T];C.ignoreGravity||C.isStatic||C.isSleeping||(C.force.x+=C.mass*x.x*y*C.gravityScale.x,C.force.y+=C.mass*x.y*y*C.gravityScale.y)}},n._bodiesUpdate=function(m,x,y,T,C){for(var S=0;S<m.length;S++){var E=m[S];E.isStatic||E.isSleeping||g.update(E,x,y,T)}}})()},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(86),h=i(41),r=i(0),a=i(32),l=i(118),o=i(1401),u=i(9),v=i(272),d=i(2),c=i(6),p=i(41),g=i(166),m=i(593),x=i(596),y=i(83),T=new r({Extends:u,initialize:function(S,E){u.call(this),this.scene=S,this.engine=o.create(E),this.localWorld=this.engine.world;var M=c(E,"gravity",null);M?this.setGravity(M.x,M.y,M.scale):M===!1&&this.setGravity(0,0,0),this.walls={left:null,right:null,top:null,bottom:null},this.enabled=c(E,"enabled",!0),this.correction=c(E,"correction",1),this.getDelta=c(E,"getDelta",this.update60Hz);var O=d(E,"runner",{}),L=d(O,"fps",!1),R=d(O,"fps",60),F=d(O,"delta",1e3/R),D=d(O,"deltaMin",1e3/R),B=d(O,"deltaMax",1e3/(R*.5));L||(R=1e3/F),this.runner={fps:R,correction:d(O,"correction",1),deltaSampleSize:d(O,"deltaSampleSize",60),counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:d(O,"isFixed",!1),delta:F,deltaMin:D,deltaMax:B},this.autoUpdate=c(E,"autoUpdate",!0);var N=c(E,"debug",!1);if(this.drawDebug=typeof N=="object"?!0:N,this.debugGraphic,this.debugConfig={showAxes:d(N,"showAxes",!1),showAngleIndicator:d(N,"showAngleIndicator",!1),angleColor:d(N,"angleColor",15208787),showBroadphase:d(N,"showBroadphase",!1),broadphaseColor:d(N,"broadphaseColor",16757760),showBounds:d(N,"showBounds",!1),boundsColor:d(N,"boundsColor",16777215),showVelocity:d(N,"showVelocity",!1),velocityColor:d(N,"velocityColor",44783),showCollisions:d(N,"showCollisions",!1),collisionColor:d(N,"collisionColor",16094476),showSeparations:d(N,"showSeparations",!1),separationColor:d(N,"separationColor",16753920),showBody:d(N,"showBody",!0),showStaticBody:d(N,"showStaticBody",!0),showInternalEdges:d(N,"showInternalEdges",!1),renderFill:d(N,"renderFill",!1),renderLine:d(N,"renderLine",!0),fillColor:d(N,"fillColor",1075465),fillOpacity:d(N,"fillOpacity",1),lineColor:d(N,"lineColor",2678297),lineOpacity:d(N,"lineOpacity",1),lineThickness:d(N,"lineThickness",1),staticFillColor:d(N,"staticFillColor",857979),staticLineColor:d(N,"staticLineColor",1255396),showSleeping:d(N,"showSleeping",!1),staticBodySleepOpacity:d(N,"staticBodySleepOpacity",.7),sleepFillColor:d(N,"sleepFillColor",4605510),sleepLineColor:d(N,"sleepLineColor",10066585),showSensors:d(N,"showSensors",!0),sensorFillColor:d(N,"sensorFillColor",857979),sensorLineColor:d(N,"sensorLineColor",1255396),showPositions:d(N,"showPositions",!0),positionSize:d(N,"positionSize",4),positionColor:d(N,"positionColor",14697178),showJoint:d(N,"showJoint",!0),jointColor:d(N,"jointColor",14737474),jointLineOpacity:d(N,"jointLineOpacity",1),jointLineThickness:d(N,"jointLineThickness",2),pinSize:d(N,"pinSize",4),pinColor:d(N,"pinColor",4382944),springColor:d(N,"springColor",14697184),anchorColor:d(N,"anchorColor",15724527),anchorSize:d(N,"anchorSize",4),showConvexHulls:d(N,"showConvexHulls",!1),hullColor:d(N,"hullColor",14091216)},this.drawDebug&&this.createDebugGraphic(),this.setEventsProxy(),d(E,"setBounds",!1)){var U=E.setBounds;if(typeof U=="boolean")this.setBounds();else{var X=d(U,"x",0),K=d(U,"y",0),k=d(U,"width",S.sys.scale.width),b=d(U,"height",S.sys.scale.height),I=d(U,"thickness",64),G=d(U,"left",!0),Y=d(U,"right",!0),V=d(U,"top",!0),W=d(U,"bottom",!0);this.setBounds(X,K,k,b,I,G,Y,V,W)}}},setCompositeRenderStyle:function(C){var S=C.bodies,E=C.constraints,M=C.composites,O,L,R;for(O=0;O<S.length;O++)L=S[O],R=L.render,this.setBodyRenderStyle(L,R.lineColor,R.lineOpacity,R.lineThickness,R.fillColor,R.fillOpacity);for(O=0;O<E.length;O++)L=E[O],R=L.render,this.setConstraintRenderStyle(L,R.lineColor,R.lineOpacity,R.lineThickness,R.pinSize,R.anchorColor,R.anchorSize);for(O=0;O<M.length;O++)L=M[O],this.setCompositeRenderStyle(L);return this},setBodyRenderStyle:function(C,S,E,M,O,L){var R=C.render,F=this.debugConfig;return R?(S==null&&(S=C.isStatic?F.staticLineColor:F.lineColor),E==null&&(E=F.lineOpacity),M==null&&(M=F.lineThickness),O==null&&(O=C.isStatic?F.staticFillColor:F.fillColor),L==null&&(L=F.fillOpacity),S!==!1&&(R.lineColor=S),E!==!1&&(R.lineOpacity=E),M!==!1&&(R.lineThickness=M),O!==!1&&(R.fillColor=O),L!==!1&&(R.fillOpacity=L),this):this},setConstraintRenderStyle:function(C,S,E,M,O,L,R){var F=C.render,D=this.debugConfig;if(!F)return this;if(S==null){var B=F.type;B==="line"?S=D.jointColor:B==="pin"?S=D.pinColor:B==="spring"&&(S=D.springColor)}return E==null&&(E=D.jointLineOpacity),M==null&&(M=D.jointLineThickness),O==null&&(O=D.pinSize),L==null&&(L=D.anchorColor),R==null&&(R=D.anchorSize),S!==!1&&(F.lineColor=S),E!==!1&&(F.lineOpacity=E),M!==!1&&(F.lineThickness=M),O!==!1&&(F.pinSize=O),L!==!1&&(F.anchorColor=L),R!==!1&&(F.anchorSize=R),this},setEventsProxy:function(){var C=this,S=this.engine,E=this.localWorld;this.drawDebug&&(g.on(E,"compositeModified",function(M){C.setCompositeRenderStyle(M)}),g.on(E,"beforeAdd",function(M){for(var O=[].concat(M.object),L=0;L<O.length;L++){var R=O[L],F=R.render;R.type==="body"?C.setBodyRenderStyle(R,F.lineColor,F.lineOpacity,F.lineThickness,F.fillColor,F.fillOpacity):R.type==="composite"?C.setCompositeRenderStyle(R):R.type==="constraint"&&C.setConstraintRenderStyle(R,F.lineColor,F.lineOpacity,F.lineThickness,F.pinSize,F.anchorColor,F.anchorSize)}})),g.on(E,"beforeAdd",function(M){C.emit(v.BEFORE_ADD,M)}),g.on(E,"afterAdd",function(M){C.emit(v.AFTER_ADD,M)}),g.on(E,"beforeRemove",function(M){C.emit(v.BEFORE_REMOVE,M)}),g.on(E,"afterRemove",function(M){C.emit(v.AFTER_REMOVE,M)}),g.on(S,"beforeUpdate",function(M){C.emit(v.BEFORE_UPDATE,M)}),g.on(S,"afterUpdate",function(M){C.emit(v.AFTER_UPDATE,M)}),g.on(S,"collisionStart",function(M){var O=M.pairs,L,R;O.length>0&&(L=O[0].bodyA,R=O[0].bodyB),C.emit(v.COLLISION_START,M,L,R)}),g.on(S,"collisionActive",function(M){var O=M.pairs,L,R;O.length>0&&(L=O[0].bodyA,R=O[0].bodyB),C.emit(v.COLLISION_ACTIVE,M,L,R)}),g.on(S,"collisionEnd",function(M){var O=M.pairs,L,R;O.length>0&&(L=O[0].bodyA,R=O[0].bodyB),C.emit(v.COLLISION_END,M,L,R)})},setBounds:function(C,S,E,M,O,L,R,F,D){return C===void 0&&(C=0),S===void 0&&(S=0),E===void 0&&(E=this.scene.sys.scale.width),M===void 0&&(M=this.scene.sys.scale.height),O===void 0&&(O=64),L===void 0&&(L=!0),R===void 0&&(R=!0),F===void 0&&(F=!0),D===void 0&&(D=!0),this.updateWall(L,"left",C-O,S-O,O,M+O*2),this.updateWall(R,"right",C+E,S-O,O,M+O*2),this.updateWall(F,"top",C,S-O,E,O),this.updateWall(D,"bottom",C,S+M,E,O),this},updateWall:function(C,S,E,M,O,L){var R=this.walls[S];C?(R&&x.remove(this.localWorld,R),E+=O/2,M+=L/2,this.walls[S]=this.create(E,M,O,L,{isStatic:!0,friction:0,frictionStatic:0})):(R&&x.remove(this.localWorld,R),this.walls[S]=null)},createDebugGraphic:function(){var C=this.scene.sys.add.graphics({x:0,y:0});return C.setDepth(Number.MAX_VALUE),this.debugGraphic=C,this.drawDebug=!0,C},disableGravity:function(){return this.localWorld.gravity.x=0,this.localWorld.gravity.y=0,this.localWorld.gravity.scale=0,this},setGravity:function(C,S,E){return C===void 0&&(C=0),S===void 0&&(S=1),this.localWorld.gravity.x=C,this.localWorld.gravity.y=S,E!==void 0&&(this.localWorld.gravity.scale=E),this},create:function(C,S,E,M,O){var L=n.rectangle(C,S,E,M,O);return x.add(this.localWorld,L),L},add:function(C){return x.add(this.localWorld,C),this},remove:function(C,S){Array.isArray(C)||(C=[C]);for(var E=0;E<C.length;E++){var M=C[E],O=M.body?M.body:M;l.remove(this.localWorld,O,S)}return this},removeConstraint:function(C,S){return l.remove(this.localWorld,C,S),this},convertTilemapLayer:function(C,S){var E=C.layer,M=C.getTilesWithin(0,0,E.width,E.height,{isColliding:!0});return this.convertTiles(M,S),this},convertTiles:function(C,S){if(C.length===0)return this;for(var E=0;E<C.length;E++)new m(this,C[E],S);return this},nextGroup:function(C){return p.nextGroup(C)},nextCategory:function(){return p.nextCategory()},pause:function(){return this.enabled=!1,this.emit(v.PAUSE),this},resume:function(){return this.enabled=!0,this.emit(v.RESUME),this},update:function(C,S){if(!(!this.enabled||!this.autoUpdate)){var E=this.engine,M=this.runner,O=E.timing,L=this.correction;M.isFixed?S=this.getDelta(C,S):(S=C-M.timePrev||M.delta,M.timePrev=C,M.deltaHistory.push(S),M.deltaHistory=M.deltaHistory.slice(-M.deltaSampleSize),S=Math.min.apply(null,M.deltaHistory),S=S<M.deltaMin?M.deltaMin:S,S=S>M.deltaMax?M.deltaMax:S,L=S/M.delta,M.delta=S),M.timeScalePrev!==0&&(L*=O.timeScale/M.timeScalePrev),O.timeScale===0&&(L=0),M.timeScalePrev=O.timeScale,M.correction=L,M.frameCounter+=1,C-M.counterTimestamp>=1e3&&(M.fps=M.frameCounter*((C-M.counterTimestamp)/1e3),M.counterTimestamp=C,M.frameCounter=0),o.update(E,S,L)}},step:function(C,S){o.update(this.engine,C,S)},update60Hz:function(){return 1e3/60},update30Hz:function(){return 1e3/30},has:function(C){var S=C.hasOwnProperty("body")?C.body:C;return l.get(this.localWorld,S.id,S.type)!==null},getAllBodies:function(){return l.allBodies(this.localWorld)},getAllConstraints:function(){return l.allConstraints(this.localWorld)},getAllComposites:function(){return l.allComposites(this.localWorld)},postUpdate:function(){if(!!this.drawDebug){var C=this.debugConfig,S=this.engine,E=this.debugGraphic,M=l.allBodies(this.localWorld);this.debugGraphic.clear(),C.showBroadphase&&S.broadphase.controller&&this.renderGrid(S.broadphase,E,C.broadphaseColor,.5),C.showBounds&&this.renderBodyBounds(M,E,C.boundsColor,.5),(C.showBody||C.showStaticBody)&&this.renderBodies(M),C.showJoint&&this.renderJoints(),(C.showAxes||C.showAngleIndicator)&&this.renderBodyAxes(M,E,C.showAxes,C.angleColor,.5),C.showVelocity&&this.renderBodyVelocity(M,E,C.velocityColor,1,2),C.showSeparations&&this.renderSeparations(S.pairs.list,E,C.separationColor),C.showCollisions&&this.renderCollisions(S.pairs.list,E,C.collisionColor)}},renderGrid:function(C,S,E,M){S.lineStyle(1,E,M);for(var O=a.keys(C.buckets),L=0;L<O.length;L++){var R=O[L];if(!(C.buckets[R].length<2)){var F=R.split(/C|R/);S.strokeRect(parseInt(F[1],10)*C.bucketWidth,parseInt(F[2],10)*C.bucketHeight,C.bucketWidth,C.bucketHeight)}}return this},renderSeparations:function(C,S,E){S.lineStyle(1,E,1);for(var M=0;M<C.length;M++){var O=C[M];if(!!O.isActive){var L=O.collision,R=L.bodyA,F=L.bodyB,D=R.position,B=F.position,N=L.penetration,U=!R.isStatic&&!F.isStatic?4:1;F.isStatic&&(U=0),S.lineBetween(B.x,B.y,B.x-N.x*U,B.y-N.y*U),U=!R.isStatic&&!F.isStatic?4:1,R.isStatic&&(U=0),S.lineBetween(D.x,D.y,D.x-N.x*U,D.y-N.y*U)}}return this},renderCollisions:function(C,S,E){S.lineStyle(1,E,.5),S.fillStyle(E,1);var M,O;for(M=0;M<C.length;M++)if(O=C[M],!!O.isActive)for(var L=0;L<O.activeContacts.length;L++){var R=O.activeContacts[L],F=R.vertex;S.fillRect(F.x-2,F.y-2,5,5)}for(M=0;M<C.length;M++)if(O=C[M],!!O.isActive){var D=O.collision,B=O.activeContacts;if(B.length>0){var N=B[0].vertex.x,U=B[0].vertex.y;B.length===2&&(N=(B[0].vertex.x+B[1].vertex.x)/2,U=(B[0].vertex.y+B[1].vertex.y)/2),D.bodyB===D.supports[0].body||D.bodyA.isStatic?S.lineBetween(N-D.normal.x*8,U-D.normal.y*8,N,U):S.lineBetween(N+D.normal.x*8,U+D.normal.y*8,N,U)}}return this},renderBodyBounds:function(C,S,E,M){S.lineStyle(1,E,M);for(var O=0;O<C.length;O++){var L=C[O];if(!!L.render.visible){var R=L.bounds;if(R)S.strokeRect(R.min.x,R.min.y,R.max.x-R.min.x,R.max.y-R.min.y);else for(var F=L.parts,D=F.length>1?1:0;D<F.length;D++){var B=F[D];S.strokeRect(B.bounds.min.x,B.bounds.min.y,B.bounds.max.x-B.bounds.min.x,B.bounds.max.y-B.bounds.min.y)}}}return this},renderBodyAxes:function(C,S,E,M,O){S.lineStyle(1,M,O);for(var L=0;L<C.length;L++){var R=C[L],F=R.parts;if(!!R.render.visible){var D,B,N;if(E)for(B=F.length>1?1:0;B<F.length;B++)for(D=F[B],N=0;N<D.axes.length;N++){var U=D.axes[N];S.lineBetween(D.position.x,D.position.y,D.position.x+U.x*20,D.position.y+U.y*20)}else for(B=F.length>1?1:0;B<F.length;B++)for(D=F[B],N=0;N<D.axes.length;N++)S.lineBetween(D.position.x,D.position.y,(D.vertices[0].x+D.vertices[D.vertices.length-1].x)/2,(D.vertices[0].y+D.vertices[D.vertices.length-1].y)/2)}}return this},renderBodyVelocity:function(C,S,E,M,O){S.lineStyle(O,E,M);for(var L=0;L<C.length;L++){var R=C[L];!R.render.visible||S.lineBetween(R.position.x,R.position.y,R.position.x+(R.position.x-R.positionPrev.x)*2,R.position.y+(R.position.y-R.positionPrev.y)*2)}return this},renderBodies:function(C){for(var S=this.debugGraphic,E=this.debugConfig,M=E.showBody,O=E.showStaticBody,L=E.showSleeping,R=E.showInternalEdges,F=E.showConvexHulls,D=E.renderFill,B=E.renderLine,N=E.staticBodySleepOpacity,U=E.sleepFillColor,X=E.sleepLineColor,K=E.hullColor,k=0;k<C.length;k++){var b=C[k];if(!!b.render.visible&&!(!O&&b.isStatic||!M&&!b.isStatic)){var I=b.render.lineColor,G=b.render.lineOpacity,Y=b.render.lineThickness,V=b.render.fillColor,W=b.render.fillOpacity;L&&b.isSleeping&&(b.isStatic?(G*=N,W*=N):(I=X,V=U)),D||(V=null),B||(I=null),this.renderBody(b,S,R,I,G,Y,V,W);var H=b.parts.length;F&&H>1&&this.renderConvexHull(b,S,K,Y)}}},renderBody:function(C,S,E,M,O,L,R,F){M===void 0&&(M=null),O===void 0&&(O=null),L===void 0&&(L=1),R===void 0&&(R=null),F===void 0&&(F=null);for(var D=this.debugConfig,B=D.sensorFillColor,N=D.sensorLineColor,U=C.parts,X=U.length,K=X>1?1:0;K<X;K++){var k=U[K],b=k.render,I=b.opacity;if(!(!b.visible||I===0||k.isSensor&&!D.showSensors)){var G=k.circleRadius;if(S.beginPath(),k.isSensor?(R!==null&&S.fillStyle(B,F*I),M!==null&&S.lineStyle(L,N,O*I)):(R!==null&&S.fillStyle(R,F*I),M!==null&&S.lineStyle(L,M,O*I)),G)S.arc(k.position.x,k.position.y,G,0,2*Math.PI);else{var Y=k.vertices,V=Y.length;S.moveTo(Y[0].x,Y[0].y);for(var W=1;W<V;W++){var H=Y[W];if(!Y[W-1].isInternal||E?S.lineTo(H.x,H.y):S.moveTo(H.x,H.y),W<V&&H.isInternal&&!E){var Z=(W+1)%V;S.moveTo(Y[Z].x,Y[Z].y)}}S.closePath()}R!==null&&S.fillPath(),M!==null&&S.strokePath()}}if(D.showPositions&&!C.isStatic){var q=C.position.x,_=C.position.y,nt=Math.ceil(D.positionSize/2);S.fillStyle(D.positionColor,1),S.fillRect(q-nt,_-nt,D.positionSize,D.positionSize)}return this},renderConvexHull:function(C,S,E,M){M===void 0&&(M=1);var O=C.parts,L=O.length;if(L>1){var R=C.vertices;S.lineStyle(M,E),S.beginPath(),S.moveTo(R[0].x,R[0].y);for(var F=1;F<R.length;F++)S.lineTo(R[F].x,R[F].y);S.lineTo(R[0].x,R[0].y),S.strokePath()}return this},renderJoints:function(){for(var C=this.debugGraphic,S=l.allConstraints(this.localWorld),E=0;E<S.length;E++){var M=S[E].render,O=M.lineColor,L=M.lineOpacity,R=M.lineThickness,F=M.pinSize,D=M.anchorColor,B=M.anchorSize;this.renderConstraint(S[E],C,O,L,R,F,D,B)}},renderConstraint:function(C,S,E,M,O,L,R,F){var D=C.render;if(!D.visible||!C.pointA||!C.pointB)return this;S.lineStyle(O,E,M);var B=C.bodyA,N=C.bodyB,U,X;if(B?U=y.add(B.position,C.pointA):U=C.pointA,D.type==="pin")S.strokeCircle(U.x,U.y,L);else{if(N?X=y.add(N.position,C.pointB):X=C.pointB,S.beginPath(),S.moveTo(U.x,U.y),D.type==="spring")for(var K=y.sub(X,U),k=y.perp(y.normalise(K)),b=Math.ceil(a.clamp(C.length/5,12,20)),I,G=1;G<b;G+=1)I=G%2===0?1:-1,S.lineTo(U.x+K.x*(G/b)+k.x*I*4,U.y+K.y*(G/b)+k.y*I*4);S.lineTo(X.x,X.y)}return S.strokePath(),D.anchors&&F>0&&(S.fillStyle(R),S.fillCircle(U.x,U.y,F),S.fillCircle(X.x,X.y,F)),this},resetCollisionIDs:function(){return h._nextCollidingGroupId=1,h._nextNonCollidingGroupId=-1,h._nextCategory=1,this},shutdown:function(){g.off(this.engine),this.removeAllListeners(),x.clear(this.localWorld,!1),o.clear(this.engine),this.drawDebug&&this.debugGraphic.destroy()},destroy:function(){this.shutdown()}});e.exports=T},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={BasePlugin:i(540),DefaultPlugins:i(197),PluginCache:i(24),PluginManager:i(414),ScenePlugin:i(1404)}},function(e,f,i){/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2020 Photon Storm Ltd.
* @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
*/var n=i(540),h=i(0),r=i(20),a=new h({Extends:n,initialize:function(o,u,v){n.call(this,u),this.scene=o,this.systems=o.sys,this.pluginKey=v,o.sys.events.once(r.BOOT,this.boot,this)},boot:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Canvas:i(1406),Events:i(91),Snapshot:i(1407),WebGL:i(1408)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={CanvasRenderer:i(368),GetBlendModes:i(370),SetTransform:i(30)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Canvas:i(369),WebGL:i(383)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(107),h=i(17),r={PipelineManager:i(372),Pipelines:i(1409),RenderTarget:i(141),Utils:i(12),WebGLPipeline:i(58),WebGLRenderer:i(371),WebGLShader:i(375)};r=h(!1,r,n),e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(92),h=i(17),r={BitmapMaskPipeline:i(373),Events:i(374),GraphicsPipeline:i(376),LightPipeline:i(377),MultiPipeline:i(108),PointLightPipeline:i(378),PostFXPipeline:i(1410),RopePipeline:i(379),SinglePipeline:i(380),UtilityPipeline:i(381)};r=h(!1,r,n),e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(198),r=i(2),a=i(1411),l=i(382),o=i(58),u=new n({Extends:o,initialize:function(d){d.renderTarget=r(d,"renderTarget",1),d.fragShader=r(d,"fragShader",a),d.vertShader=r(d,"vertShader",l),d.attributes=r(d,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),d.batchSize=1,d.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],o.call(this,d),this.isPostFX=!0,this.gameObject,this.colorMatrix=new h,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderer.isBooted&&(this.manager=this.renderer.pipelines,this.boot())},boot:function(){o.prototype.boot.call(this);var v=this.manager.UTILITY_PIPELINE;this.fullFrame1=v.fullFrame1,this.fullFrame2=v.fullFrame2,this.halfFrame1=v.halfFrame1,this.halfFrame2=v.halfFrame2,this.set1i("uMainSampler",0)},onDraw:function(v){this.bindAndDraw(v)},copyFrame:function(v,d,c,p,g){this.manager.copyFrame(v,d,c,p,g)},copyToGame:function(v){this.manager.copyToGame(v)},drawFrame:function(v,d,c){this.manager.drawFrame(v,d,c,this.colorMatrix)},blendFrames:function(v,d,c,p,g){this.manager.blendFrames(v,d,c,p,g)},blendFramesAdditive:function(v,d,c,p,g){this.manager.blendFramesAdditive(v,d,c,p,g)},clearFrame:function(v,d){this.manager.clearFrame(v,d)},blitFrame:function(v,d,c,p,g,m){this.manager.blitFrame(v,d,c,p,g,m)},copyFrameRect:function(v,d,c,p,g,m,x,y){this.manager.copyFrameRect(v,d,c,p,g,m,x,y)},bindAndDraw:function(v,d,c,p,g){c===void 0&&(c=!0),p===void 0&&(p=!0);var m=this.gl,x=this.renderer;this.bind(g),this.set1i("uMainSampler",0),d?(m.viewport(0,0,d.width,d.height),m.bindFramebuffer(m.FRAMEBUFFER,d.framebuffer),m.framebufferTexture2D(m.FRAMEBUFFER,m.COLOR_ATTACHMENT0,m.TEXTURE_2D,d.texture,0),c&&(p?m.clearColor(0,0,0,0):m.clearColor(0,0,0,1),m.clear(m.COLOR_BUFFER_BIT))):(x.popFramebuffer(!1,!1,!1),x.currentFramebuffer||m.viewport(0,0,x.width,x.height)),m.activeTexture(m.TEXTURE0),m.bindTexture(m.TEXTURE_2D,v.texture),m.bufferData(m.ARRAY_BUFFER,this.vertexData,m.STATIC_DRAW),m.drawArrays(m.TRIANGLES,0,6),d?(m.bindTexture(m.TEXTURE_2D,null),m.bindFramebuffer(m.FRAMEBUFFER,null)):x.resetTextures()}});e.exports=u},function(e,f){e.exports=["#define SHADER_NAME PHASER_POSTFX_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","","varying vec2 outTexCoord;","","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord);","}",""].join(`
`)},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(17),h=i(201),r={Center:i(403),Events:i(104),Orientation:i(404),ScaleManager:i(415),ScaleModes:i(405),Zoom:i(406)};r=n(!1,r,h.CENTER),r=n(!1,r,h.ORIENTATION),r=n(!1,r,h.SCALE_MODE),r=n(!1,r,h.ZOOM),e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(144),h=i(17),r={Events:i(20),GetPhysicsPlugins:i(419),GetScenePlugins:i(420),SceneManager:i(417),ScenePlugin:i(1414),Settings:i(421),Systems:i(204)};r=h(!1,r,n),e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(18),h=i(0),r=i(20),a=i(2),l=i(24),o=new h({initialize:function(v){this.scene=v,this.systems=v.sys,this.settings=v.sys.settings,this.key=v.sys.settings.key,this.manager=v.sys.game.scene,this.transitionProgress=0,this._elapsed=0,this._target=null,this._duration=0,this._onUpdate,this._onUpdateScope,this._willSleep=!1,this._willRemove=!1,v.sys.events.once(r.BOOT,this.boot,this),v.sys.events.on(r.START,this.pluginStart,this)},boot:function(){this.systems.events.once(r.DESTROY,this.destroy,this)},pluginStart:function(){this._target=null,this.systems.events.once(r.SHUTDOWN,this.shutdown,this)},start:function(u,v){return u===void 0&&(u=this.key),this.manager.queueOp("stop",this.key),this.manager.queueOp("start",u,v),this},restart:function(u){var v=this.key;return this.manager.queueOp("stop",v),this.manager.queueOp("start",v,u),this},transition:function(u){u===void 0&&(u={});var v=a(u,"target",!1),d=this.manager.getScene(v);if(!v||!this.checkValidTransition(d))return!1;var c=a(u,"duration",1e3);this._elapsed=0,this._target=d,this._duration=c,this._willSleep=a(u,"sleep",!1),this._willRemove=a(u,"remove",!1);var p=a(u,"onUpdate",null);p&&(this._onUpdate=p,this._onUpdateScope=a(u,"onUpdateScope",this.scene));var g=a(u,"allowInput",!1);this.settings.transitionAllowInput=g;var m=d.sys.settings;return m.isTransition=!0,m.transitionFrom=this.scene,m.transitionDuration=c,m.transitionAllowInput=g,a(u,"moveAbove",!1)?this.manager.moveAbove(this.key,v):a(u,"moveBelow",!1)&&this.manager.moveBelow(this.key,v),d.sys.isSleeping()?d.sys.wake(a(u,"data")):this.manager.start(v,a(u,"data")),this.systems.events.emit(r.TRANSITION_OUT,d,c),this.systems.events.on(r.UPDATE,this.step,this),!0},checkValidTransition:function(u){return!(!u||u.sys.isActive()||u.sys.isTransitioning()||u===this.scene||this.systems.isTransitioning())},step:function(u,v){this._elapsed+=v,this.transitionProgress=n(this._elapsed/this._duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.transitionProgress),this._elapsed>=this._duration&&this.transitionComplete()},transitionComplete:function(){var u=this._target.sys,v=this._target.sys.settings;this.systems.events.off(r.UPDATE,this.step,this),u.events.emit(r.TRANSITION_COMPLETE,this.scene),v.isTransition=!1,v.transitionFrom=null,this._duration=0,this._target=null,this._onUpdate=null,this._onUpdateScope=null,this._willRemove?this.manager.remove(this.key):this._willSleep?this.systems.sleep():this.manager.stop(this.key)},add:function(u,v,d,c){return this.manager.add(u,v,d,c)},launch:function(u,v){return u&&u!==this.key&&this.manager.queueOp("start",u,v),this},run:function(u,v){return u&&u!==this.key&&this.manager.queueOp("run",u,v),this},pause:function(u,v){return u===void 0&&(u=this.key),this.manager.queueOp("pause",u,v),this},resume:function(u,v){return u===void 0&&(u=this.key),this.manager.queueOp("resume",u,v),this},sleep:function(u,v){return u===void 0&&(u=this.key),this.manager.queueOp("sleep",u,v),this},wake:function(u,v){return u===void 0&&(u=this.key),this.manager.queueOp("wake",u,v),this},switch:function(u){return u!==this.key&&this.manager.queueOp("switch",this.key,u),this},stop:function(u,v){return u===void 0&&(u=this.key),this.manager.queueOp("stop",u,v),this},setActive:function(u,v,d){v===void 0&&(v=this.key);var c=this.manager.getScene(v);return c&&c.sys.setActive(u,d),this},setVisible:function(u,v){v===void 0&&(v=this.key);var d=this.manager.getScene(v);return d&&d.sys.setVisible(u),this},isSleeping:function(u){return u===void 0&&(u=this.key),this.manager.isSleeping(u)},isActive:function(u){return u===void 0&&(u=this.key),this.manager.isActive(u)},isPaused:function(u){return u===void 0&&(u=this.key),this.manager.isPaused(u)},isVisible:function(u){return u===void 0&&(u=this.key),this.manager.isVisible(u)},swapPosition:function(u,v){return v===void 0&&(v=this.key),u!==v&&this.manager.swapPosition(u,v),this},moveAbove:function(u,v){return v===void 0&&(v=this.key),u!==v&&this.manager.moveAbove(u,v),this},moveBelow:function(u,v){return v===void 0&&(v=this.key),u!==v&&this.manager.moveBelow(u,v),this},remove:function(u){return u===void 0&&(u=this.key),this.manager.remove(u),this},moveUp:function(u){return u===void 0&&(u=this.key),this.manager.moveUp(u),this},moveDown:function(u){return u===void 0&&(u=this.key),this.manager.moveDown(u),this},bringToTop:function(u){return u===void 0&&(u=this.key),this.manager.bringToTop(u),this},sendToBack:function(u){return u===void 0&&(u=this.key),this.manager.sendToBack(u),this},get:function(u){return this.manager.getScene(u)},getIndex:function(u){return u===void 0&&(u=this.key),this.manager.getIndex(u)},shutdown:function(){var u=this.systems.events;u.off(r.SHUTDOWN,this.shutdown,this),u.off(r.POST_UPDATE,this.step,this),u.off(r.TRANSITION_OUT)},destroy:function(){this.shutdown(),this.scene.sys.events.off(r.START,this.start,this),this.scene=null,this.systems=null,this.settings=null,this.manager=null}});l.register("ScenePlugin",o,"scenePlugin"),e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Events:i(438),List:i(110),Map:i(102),ProcessQueue:i(211),RTree:i(531),Set:i(149),Size:i(416)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(17),h=i(1417),r={CanvasTexture:i(423),Events:i(106),FilterMode:h,Frame:i(109),Parsers:i(425),Texture:i(206),TextureManager:i(422),TextureSource:i(424)};r=n(!1,r,h),e.exports=r},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={LINEAR:0,NEAREST:1};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(17),h=i(1419),r={Components:i(251),Parsers:i(1452),Formats:i(40),ImageCollection:i(576),ParseToTilemap:i(262),Tile:i(85),Tilemap:i(580),TilemapCreator:i(1459),TilemapFactory:i(1460),Tileset:i(122),TilemapLayer:i(581),Orientation:i(29),LayerData:i(120),MapData:i(121),ObjectLayer:i(572)};r=n(!1,r,h.ORIENTATION),e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n={ORIENTATION:i(29)};e.exports=n},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(26),h=i(63),r=function(a,l,o,u,v,d,c,p){c===void 0&&(c=!0),a<0&&(a=0),l<0&&(l=0);for(var g=n(a,l,o,u,null,p),m=v-a,x=d-l,y=0;y<g.length;y++){var T=g[y].x+m,C=g[y].y+x;T>=0&&T<p.width&&C>=0&&C<p.height&&p.data[C][T]&&p.data[C][T].copy(g[y])}c&&h(v-1,d-1,o+2,u+2,p)};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(26),h=i(542),r=function(a,l,o,u,v,d){o||(o={}),Array.isArray(a)||(a=[a]);var c=d.tilemapLayer;u||(u=c.scene),v||(v=u.cameras.main);var p=n(0,0,d.width,d.height,null,d),g=[],m;for(m=0;m<p.length;m++){var x=p[m];if(a.indexOf(x.index)!==-1){var y=c.tileToWorldXY(x.x,x.y,void 0,v,d);o.x=y.x,o.y=y.y,g.push(u.make.sprite(o))}}if(typeof l=="number")for(m=0;m<a.length;m++)h(a[m],l,0,0,d.width,d.height,d);else if(Array.isArray(l))for(m=0;m<a.length;m++)h(a[m],l[m],0,0,d.width,d.height,d);return g};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(26),h=i(63),r=i(72),a=function(l,o,u,v,d,c,p){for(var g=p.collideIndexes.indexOf(l)!==-1,m=n(o,u,v,d,null,p),x=0;x<m.length;x++)m[x].index=l,r(m[x],g);c&&h(o-1,u-1,v+2,d+2,p)};e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(26),h=function(r,a,l,o,u,v,d,c){var p=n(l,o,u,v,d,c);return p.filter(r,a)};e.exports=h},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r,a){h===void 0&&(h=0),r===void 0&&(r=!1);var l=0,o,u,v;if(r){for(u=a.height-1;u>=0;u--)for(o=a.width-1;o>=0;o--)if(v=a.data[u][o],v&&v.index===n){if(l===h)return v;l+=1}}else for(u=0;u<a.height;u++)for(o=0;o<a.width;o++)if(v=a.data[u][o],v&&v.index===n){if(l===h)return v;l+=1}return null};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(26),h=function(r,a,l,o,u,v,d,c){var p=n(l,o,u,v,d,c);return p.find(r,a)||null};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(26),h=function(r,a,l,o,u,v,d,c){var p=n(l,o,u,v,d,c);p.forEach(r,a)};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(29),h=i(544),r=i(545),a=i(547),l=i(1),o=i(548),u=function(v){return v===n.ORTHOGONAL?h:v===n.HEXAGONAL?r:v===n.STAGGERED?o:v===n.ISOMETRIC?a:l};e.exports=u},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(158),h=i(3),r=new h,a=function(l,o,u,v,d){return d.tilemapLayer.worldToTileXY(l,o,!0,r,v),n(r.x,r.y,u,d)};e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(483),h=i(26),r=i(484),a=i(1),l=i(3),o=function(p,g){return r.RectangleToTriangle(g,p)},u=new l,v=new l,d=new l,c=function(p,g,m,x){if(p===void 0)return[];var y=a;p instanceof n.Circle?y=r.CircleToRectangle:p instanceof n.Rectangle?y=r.RectangleToRectangle:p instanceof n.Triangle?y=o:p instanceof n.Line&&(y=r.LineToRectangle),x.tilemapLayer.worldToTileXY(p.left,p.top,!0,v,m);var T=v.x,C=v.y;x.tilemapLayer.worldToTileXY(p.right,p.bottom,!0,d,m);var S=Math.ceil(d.x),E=Math.ceil(d.y),M=Math.max(S-T,1),O=Math.max(E-C,1),L=h(T,C,M,O,g,x),R=x.tileWidth,F=x.tileHeight;x.tilemapLayer&&(R*=x.tilemapLayer.scaleX,F*=x.tilemapLayer.scaleY);for(var D=[],B=new n.Rectangle(0,0,R,F),N=0;N<L.length;N++){var U=L[N];x.tilemapLayer.tileToWorldXY(U.x,U.y,u,m),B.x=u.x,B.y=u.y,y(p,B)&&D.push(U)}return D};e.exports=c},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(29),h=i(1),r=i(253),a=function(l){return l===n.ORTHOGONAL?r:h};e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(29),h=i(550),r=i(551),a=i(1),l=i(552),o=i(553),u=function(v){return v===n.ORTHOGONAL?o:v===n.ISOMETRIC?r:v===n.HEXAGONAL?h:v===n.STAGGERED?l:a};e.exports=u},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(29),h=i(554),r=i(1),a=i(555),l=i(254),o=function(u){return u===n.ORTHOGONAL?l:u===n.HEXAGONAL?h:u===n.STAGGERED?a:r};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(29),h=i(1),r=i(255),a=function(l){return l===n.ORTHOGONAL?r:h};e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(29),h=i(556),r=i(557),a=i(1),l=i(558),o=i(559),u=function(v){return v===n.ORTHOGONAL?o:v===n.ISOMETRIC?r:v===n.HEXAGONAL?h:v===n.STAGGERED?l:a};e.exports=u},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(29),h=i(560),r=i(1),a=i(561),l=i(256),o=function(u){return u===n.ORTHOGONAL?l:u===n.HEXAGONAL?h:u===n.STAGGERED?a:r};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(562),h=i(3),r=new h,a=function(l,o,u,v){v.tilemapLayer.worldToTileXY(l,o,!0,r,u);var d=r.x,c=r.y;return n(d,c,v)};e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(257),h=i(3),r=new h,a=function(l,o,u,v,d,c){return c.tilemapLayer.worldToTileXY(o,u,!0,r,d,c),n(l,r.x,r.y,v,c)};e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(63),h=i(257),r=function(a,l,o,u,v){if(u===void 0&&(u=!0),!Array.isArray(a))return null;Array.isArray(a[0])||(a=[a]);for(var d=a.length,c=a[0].length,p=0;p<d;p++)for(var g=0;g<c;g++){var m=a[p][g];h(m,l+g,o+p,!1,v)}u&&n(l-1,o-1,c+2,d+2,v)};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(26),h=i(210),r=function(a,l,o,u,v,d){var c,p=n(a,l,o,u,{},d);if(!v)for(v=[],c=0;c<p.length;c++)v.indexOf(p[c].index)===-1&&v.push(p[c].index);for(c=0;c<p.length;c++)p[c].index=h(v)};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(563),h=i(3),r=new h,a=function(l,o,u,v,d,c){return c.tilemapLayer.worldToTileXY(l,o,!0,r,d,c),n(r.x,r.y,u,v,c)};e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(26),h=i(397),r=new h(105,210,231,150),a=new h(243,134,48,200),l=new h(40,39,37,150),o=function(u,v,d){v===void 0&&(v={});var c=v.tileColor!==void 0?v.tileColor:r,p=v.collidingTileColor!==void 0?v.collidingTileColor:a,g=v.faceColor!==void 0?v.faceColor:l,m=n(0,0,d.width,d.height,null,d);u.translateCanvas(d.tilemapLayer.x,d.tilemapLayer.y),u.scaleCanvas(d.tilemapLayer.scaleX,d.tilemapLayer.scaleY);for(var x=0;x<m.length;x++){var y=m[x],T=y.width,C=y.height,S=y.pixelX,E=y.pixelY,M=y.collides?p:c;M!==null&&(u.fillStyle(M.color,M.alpha/255),u.fillRect(S,E,T,C)),S+=1,E+=1,T-=2,C-=2,g!==null&&(u.lineStyle(1,g.color,g.alpha/255),y.faceTop&&u.lineBetween(S,E,S+T,E),y.faceRight&&u.lineBetween(S+T,E,S+T,E+C),y.faceBottom&&u.lineBetween(S,E+C,S+T,E+C),y.faceLeft&&u.lineBetween(S,E,S,E+C))}};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(72),h=i(63),r=i(160),a=function(l,o,u,v,d){o===void 0&&(o=!0),u===void 0&&(u=!0),d===void 0&&(d=!0),Array.isArray(l)||(l=[l]);for(var c=0;c<l.length;c++)r(l[c],o,v);if(d)for(var p=0;p<v.height;p++)for(var g=0;g<v.width;g++){var m=v.data[p][g];m&&l.indexOf(m.index)!==-1&&n(m,o)}u&&h(0,0,v.width,v.height,v)};e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(72),h=i(63),r=i(160),a=function(l,o,u,v,d,c){if(u===void 0&&(u=!0),v===void 0&&(v=!0),c===void 0&&(c=!0),!(l>o)){for(var p=l;p<=o;p++)r(p,u,d);if(c)for(var g=0;g<d.height;g++)for(var m=0;m<d.width;m++){var x=d.data[g][m];x&&x.index>=l&&x.index<=o&&n(x,u)}v&&h(0,0,d.width,d.height,d)}};e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(72),h=i(63),r=i(160),a=function(l,o,u,v){o===void 0&&(o=!0),u===void 0&&(u=!0),Array.isArray(l)||(l=[l]);for(var d=0;d<v.height;d++)for(var c=0;c<v.width;c++){var p=v.data[d][c];p&&l.indexOf(p.index)===-1&&(n(p,o),r(p.index,o,v))}u&&h(0,0,v.width,v.height,v)};e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(72),h=i(63),r=i(126),a=function(l,o,u,v){o===void 0&&(o=!0),u===void 0&&(u=!0);for(var d=0;d<v.height;d++)for(var c=0;c<v.width;c++){var p=v.data[d][c];if(!!p){for(var g in l)if(!!r(p.properties,g)){var m=l[g];Array.isArray(m)||(m=[m]);for(var x=0;x<m.length;x++)p.properties[g]===m[x]&&n(p,o)}}}u&&h(0,0,v.width,v.height,v)};e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(72),h=i(63),r=function(a,l,o){a===void 0&&(a=!0),l===void 0&&(l=!0);for(var u=0;u<o.height;u++)for(var v=0;v<o.width;v++){var d=o.data[u][v];if(!!d){var c=d.getCollisionGroup();c&&c.objects&&c.objects.length>0&&n(d,a)}}l&&h(0,0,o.width,o.height,o)};e.exports=r},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h,r,a){if(typeof n=="number")a.callbacks[n]=h!==null?{callback:h,callbackContext:r}:void 0;else for(var l=0,o=n.length;l<o;l++)a.callbacks[n[l]]=h!==null?{callback:h,callbackContext:r}:void 0};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(26),h=function(r,a,l,o,u,v,d){for(var c=n(r,a,l,o,null,d),p=0;p<c.length;p++)c[p].setCollisionCallback(u,v)};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(26),h=i(131),r=function(a,l,o,u,v){var d=n(a,l,o,u,null,v),c=d.map(function(g){return g.index});h(c);for(var p=0;p<d.length;p++)d[p].index=c[p]};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(26),h=function(r,a,l,o,u,v,d){for(var c=n(l,o,u,v,null,d),p=0;p<c.length;p++)c[p]&&(c[p].index===r?c[p].index=a:c[p].index===a&&(c[p].index=r))};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(26),h=function(r,a,l,o,u,v){if(!!u){var d,c=n(r,a,l,o,null,v),p=0;for(d=0;d<u.length;d++)p+=u[d].weight;if(!(p<=0))for(d=0;d<c.length;d++){for(var g=Math.random()*p,m=0,x=-1,y=0;y<u.length;y++)if(m+=u[y].weight,g<=m){var T=u[y].index;x=Array.isArray(T)?T[Math.floor(Math.random()*T.length)]:T;break}c[d].index=x}}};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={FromOrientationString:i(258),Parse:i(564),Parse2DArray:i(259),ParseCSV:i(565),Impact:i(1454),Tiled:i(1455)}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){for(var r=0;r<n.length;r++){var a=n[r],l=r;if(a.name&&a.name!==""&&(l=a.name),Array.isArray(a.wangtiles)&&a.wangtiles.length>0){var o={},u={},v,d,c;if(Array.isArray(a.edgecolors))for(v=0;v<a.edgecolors.length;v++)c=1+v,d=a.edgecolors[v],d.name!==""&&(o[c]=d.name);if(Array.isArray(a.cornercolors))for(v=0;v<a.cornercolors.length;v++)c=1+v,d=a.cornercolors[v],d.name!==""&&(u[c]=d.name);if(Array.isArray(a.colors))for(v=0;v<a.colors.length;v++)d=a.colors[v],c=1+v,d.name!==""&&(o[c]=u[c]=d.name);for(var p=[o,u,o,u,o,u,o,u],g=0;g<a.wangtiles.length;g++){var m=a.wangtiles[g],x=h[m.tileid]||(h[m.tileid]={});x=x.wangid||(x.wangid={});for(var y=[],T=0;T<Math.min(p.length,m.wangid.length);T++){if(d=m.wangid[T],d===0){y.push(void 0);continue}var C=p[T][d];if(C!==void 0){y.push(C);continue}y.push(d)}x[l]=y}}}};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ParseTileLayers:i(578),ParseTilesets:i(579),ParseWeltmeister:i(577)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={AssignTileProperties:i(567),Base64Decode:i(574),BuildTilesetIndex:i(568),CreateGroupLayer:i(161),ParseGID:i(261),ParseImageLayers:i(569),ParseJSONTiled:i(566),ParseObject:i(260),ParseObjectLayers:i(570),ParseTileLayers:i(573),ParseTilesets:i(575)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),h=i(1);n=i(1457),h=i(1458),e.exports={renderWebGL:n,renderCanvas:h}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(12),h=function(r,a,l){var o=a.cull(l),u=o.length,v=l.alpha*a.alpha;if(!(u===0||v<=0)){var d=a.gidMap,c=r.pipelines.set(a.pipeline,a),p=n.getTintAppendFloatAlpha,g=a.scrollFactorX,m=a.scrollFactorY,x=a.x,y=a.y,T=a.scaleX,C=a.scaleY;r.pipelines.preBatch(a);for(var S=0;S<u;S++){var E=o[S],M=d[E.index];if(!!M){var O=M.getTileTextureCoordinates(E.index);if(O!==null){var L=M.glTexture,R=c.setTexture2D(L,a),F=M.tileWidth,D=M.tileHeight,B=O.x,N=O.y,U=M.tileWidth*.5,X=M.tileHeight*.5,K=p(E.tint,v*E.alpha);c.batchTexture(a,L,L.width,L.height,x+(U+E.pixelX)*T,y+(X+E.pixelY)*C,E.width,E.height,T,C,E.rotation,E.flipX,E.flipY,g,m,U,X,B,N,F,D,K,K,K,K,!1,0,0,l,null,!0,R)}}}r.pipelines.postBatch(a)}};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(25),h=new n,r=new n,a=new n,l=function(o,u,v,d){var c=u.cull(v),p=c.length,g=v.alpha*u.alpha;if(!(p===0||g<=0)){var m=h,x=r,y=a;x.applyITRS(u.x,u.y,u.rotation,u.scaleX,u.scaleY),m.copyFrom(v.matrix);var T=o.currentContext,C=u.gidMap;T.save(),d?(m.multiplyWithOffset(d,-v.scrollX*u.scrollFactorX,-v.scrollY*u.scrollFactorY),x.e=u.x,x.f=u.y,m.multiply(x,y),y.copyToContext(T)):(x.e-=v.scrollX*u.scrollFactorX,x.f-=v.scrollY*u.scrollFactorY,x.copyToContext(T)),(!o.antialias||u.scaleX>1||u.scaleY>1)&&(T.imageSmoothingEnabled=!1);for(var S=0;S<p;S++){var E=c[S],M=C[E.index];if(!!M){var O=M.image.getSourceImage(),L=M.getTileTextureCoordinates(E.index);if(L!==null){var R=M.tileWidth,F=M.tileHeight,D=R*.5,B=F*.5;T.save(),T.translate(E.pixelX+D,E.pixelY+B),E.rotation!==0&&T.rotate(E.rotation),(E.flipX||E.flipY)&&T.scale(E.flipX?-1:1,E.flipY?-1:1),T.globalAlpha=g*E.alpha,T.drawImage(O,L.x,L.y,R,F,-D,-B,R,F),T.restore()}}}T.restore()}};e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(16),h=i(262);n.register("tilemap",function(r){var a=r!==void 0?r:{};return h(this.scene,a.key,a.tileWidth,a.tileHeight,a.width,a.height,a.data,a.insertNull)})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(5),h=i(262);n.register("tilemap",function(r,a,l,o,u,v,d){return r===null&&(r=void 0),a===null&&(a=void 0),l===null&&(l=void 0),o===null&&(o=void 0),u===null&&(u=void 0),h(this.scene,r,a,l,o,u,v,d)})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Clock:i(1462),TimerEvent:i(582)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),h=i(24),r=i(20),a=i(582),l=i(93),o=new n({initialize:function(v){this.scene=v,this.systems=v.sys,this.now=0,this.timeScale=1,this.paused=!1,this._active=[],this._pendingInsertion=[],this._pendingRemoval=[],v.sys.events.once(r.BOOT,this.boot,this),v.sys.events.on(r.START,this.start,this)},boot:function(){this.now=this.systems.game.loop.time,this.systems.events.once(r.DESTROY,this.destroy,this)},start:function(){var u=this.systems.events;u.on(r.PRE_UPDATE,this.preUpdate,this),u.on(r.UPDATE,this.update,this),u.once(r.SHUTDOWN,this.shutdown,this)},addEvent:function(u){var v;return u instanceof a?(v=u,this.removeEvent(v),v.elapsed=v.startAt,v.hasDispatched=!1,v.repeatCount=v.repeat===-1||v.loop?999999999999:v.repeat):v=new a(u),this._pendingInsertion.push(v),v},delayedCall:function(u,v,d,c){return this.addEvent({delay:u,callback:v,args:d,callbackScope:c})},clearPendingEvents:function(){return this._pendingInsertion=[],this},removeEvent:function(u){Array.isArray(u)||(u=[u]);for(var v=0;v<u.length;v++){var d=u[v];l(this._pendingRemoval,d),l(this._pendingInsertion,d),l(this._active,d)}return this},removeAllEvents:function(){return this._pendingRemoval=this._pendingRemoval.concat(this._active),this},preUpdate:function(){var u=this._pendingRemoval.length,v=this._pendingInsertion.length;if(!(u===0&&v===0)){var d,c;for(d=0;d<u;d++){c=this._pendingRemoval[d];var p=this._active.indexOf(c);p>-1&&this._active.splice(p,1),c.destroy()}for(d=0;d<v;d++)c=this._pendingInsertion[d],this._active.push(c);this._pendingRemoval.length=0,this._pendingInsertion.length=0}},update:function(u,v){if(this.now=u,!this.paused){v*=this.timeScale;for(var d=0;d<this._active.length;d++){var c=this._active[d];if(!c.paused&&(c.elapsed+=v*c.timeScale,c.elapsed>=c.delay)){var p=c.elapsed-c.delay;c.elapsed=c.delay,!c.hasDispatched&&c.callback&&(c.hasDispatched=!0,c.callback.apply(c.callbackScope,c.args)),c.repeatCount>0?(c.repeatCount--,c.elapsed=p,c.hasDispatched=!1):this._pendingRemoval.push(c)}}}},shutdown:function(){var u;for(u=0;u<this._pendingInsertion.length;u++)this._pendingInsertion[u].destroy();for(u=0;u<this._active.length;u++)this._active[u].destroy();for(u=0;u<this._pendingRemoval.length;u++)this._pendingRemoval[u].destroy();this._active.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;var v=this.systems.events;v.off(r.PRE_UPDATE,this.preUpdate,this),v.off(r.UPDATE,this.update,this),v.off(r.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(r.START,this.start,this),this.scene=null,this.systems=null}});h.register("Clock",o,"time"),e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(100),h=i(17),r={Builders:i(1464),Events:i(267),TweenManager:i(1480),Tween:i(266),TweenData:i(268),Timeline:i(588)};r=h(!1,r,n),e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={GetBoolean:i(99),GetEaseFunction:i(80),GetNewValue:i(162),GetProps:i(583),GetTargets:i(263),GetTweens:i(584),GetValueOp:i(264),NumberTweenBuilder:i(585),StaggerBuilder:i(586),TimelineBuilder:i(587),TweenBuilder:i(163)}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports=["callbackScope","completeDelay","delay","duration","ease","easeParams","flipX","flipY","hold","loop","loopDelay","offset","onActive","onActiveParams","onActiveScope","onComplete","onCompleteParams","onCompleteScope","onLoop","onLoopParams","onLoopScope","onRepeat","onRepeatParams","onRepeatScope","onStart","onStartParams","onStartScope","onStop","onStopParams","onStopScope","onUpdate","onUpdateParams","onUpdateScope","onYoyo","onYoyoParams","onYoyoScope","paused","props","repeat","repeatDelay","targets","useFrames","yoyo"]},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="complete"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="loop"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pause"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="resume"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="start"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="update"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="active"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="complete"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="loop"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="repeat"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="start"},function(e,f){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="stop"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="update"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="yoyo"},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(93),h=i(0),r=i(585),a=i(24),l=i(20),o=i(586),u=i(587),v=i(100),d=i(163),c=new h({initialize:function(g){this.scene=g,this.systems=g.sys,this.timeScale=1,this._add=[],this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,g.sys.events.once(l.BOOT,this.boot,this),g.sys.events.on(l.START,this.start,this)},boot:function(){this.systems.events.once(l.DESTROY,this.destroy,this)},start:function(){var p=this.systems.events;p.on(l.PRE_UPDATE,this.preUpdate,this),p.on(l.UPDATE,this.update,this),p.once(l.SHUTDOWN,this.shutdown,this),this.timeScale=1},createTimeline:function(p){return u(this,p)},timeline:function(p){var g=u(this,p);return g.paused||(this._add.push(g),this._toProcess++),g},create:function(p){return d(this,p)},add:function(p){var g=d(this,p);return this._add.push(g),this._toProcess++,g},existing:function(p){return this._add.push(p),this._toProcess++,this},addCounter:function(p){var g=r(this,p);return this._add.push(g),this._toProcess++,g},stagger:function(p,g){return o(p,g)},preUpdate:function(){if(this._toProcess!==0){var p=this._destroy,g=this._active,m=this._pending,x,y;for(x=0;x<p.length;x++){y=p[x];var T=g.indexOf(y);T===-1?(T=m.indexOf(y),T>-1&&(y.state=v.REMOVED,m.splice(T,1))):(y.state=v.REMOVED,g.splice(T,1))}for(p.length=0,p=this._add,x=0;x<p.length;x++)y=p[x],y.state===v.PENDING_ADD&&(y.init()?(y.play(),this._active.push(y)):this._pending.push(y));p.length=0,this._toProcess=0}},update:function(p,g){var m=this._active,x;g*=this.timeScale;for(var y=0;y<m.length;y++)x=m[y],x.update(p,g)&&(this._destroy.push(x),this._toProcess++)},remove:function(p){return n(this._add,p),n(this._pending,p),n(this._active,p),n(this._destroy,p),p.state=v.REMOVED,this},makeActive:function(p){if(this._add.indexOf(p)!==-1||this._active.indexOf(p)!==-1)return this;var g=this._pending.indexOf(p);return g!==-1&&this._pending.splice(g,1),this._add.push(p),p.state=v.PENDING_ADD,this._toProcess++,this},each:function(p,g){for(var m=[null],x=1;x<arguments.length;x++)m.push(arguments[x]);for(var y in this.list)m[0]=this.list[y],p.apply(g,m)},getAllTweens:function(){for(var p=this._active,g=[],m=0;m<p.length;m++)g.push(p[m]);return g},getGlobalTimeScale:function(){return this.timeScale},getTweensOf:function(p,g){g===void 0&&(g=!1);var m=this._active,x,y=[],T,C;for(Array.isArray(p)||(p=[p]),T=0;T<m.length;T++)for(x=m[T],C=0;C<p.length;C++)x.hasTarget(p[C])&&y.push(x);if(g)for(m=this._pending,T=0;T<m.length;T++)for(x=m[T],C=0;C<p.length;C++)x.hasTarget(p[C])&&y.push(x);return y},isTweening:function(p){for(var g=this._active,m,x=0;x<g.length;x++)if(m=g[x],m.hasTarget(p)&&m.isPlaying())return!0;return!1},killAll:function(){for(var p=this.getAllTweens(),g=0;g<p.length;g++)p[g].stop();return this},killTweensOf:function(p){for(var g=this.getTweensOf(p),m=0;m<g.length;m++)g[m].stop();return this},pauseAll:function(){for(var p=this._active,g=0;g<p.length;g++)p[g].pause();return this},resumeAll:function(){for(var p=this._active,g=0;g<p.length;g++)p[g].resume();return this},setGlobalTimeScale:function(p){return this.timeScale=p,this},shutdown:function(){this.killAll(),this._add=[],this._pending=[],this._active=[],this._destroy=[],this._toProcess=0;var p=this.systems.events;p.off(l.PRE_UPDATE,this.preUpdate,this),p.off(l.UPDATE,this.update,this),p.off(l.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(l.START,this.start,this),this.scene=null,this.systems=null}});a.register("TweenManager",c,"tweens"),e.exports=c},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Array:i(208),Base64:i(1482),Objects:i(1484),String:i(1488),NOOP:i(1)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ArrayBufferToBase64:i(1483),Base64ToArrayBuffer:i(433)}},function(e,f){/**
 * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=function(h,r){for(var a=new Uint8Array(h),l=a.length,o=r?"data:"+r+";base64,":"",u=0;u<l;u+=3)o+=i[a[u]>>2],o+=i[(a[u]&3)<<4|a[u+1]>>4],o+=i[(a[u+1]&15)<<2|a[u+2]>>6],o+=i[a[u+2]&63];return l%3===2?o=o.substring(0,o.length-1)+"=":l%3===1&&(o=o.substring(0,o.length-2)+"=="),o};e.exports=n},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Clone:i(77),DeepCopy:i(175),Extend:i(17),GetAdvancedValue:i(13),GetFastValue:i(2),GetMinMaxValue:i(1485),GetValue:i(6),HasAll:i(1486),HasAny:i(455),HasValue:i(126),IsPlainObject:i(7),Merge:i(127),MergeRight:i(1487),Pick:i(571),SetValue:i(478)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(6),h=i(18),r=function(a,l,o,u,v){v===void 0&&(v=o);var d=n(a,l,v);return h(d,o,u)};e.exports=r},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){for(var r=0;r<h.length;r++)if(!n.hasOwnProperty(h[r]))return!1;return!0};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(77),h=function(r,a){var l=n(r);for(var o in a)l.hasOwnProperty(o)&&(l[o]=a[o]);return l};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Format:i(1489),Pad:i(186),RemoveAt:i(1490),Reverse:i(1491),UppercaseFirst:i(205),UUID:i(222)}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){return n.replace(/%([0-9]+)/g,function(r,a){return h[Number(a)-1]})};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,h){return h===0?n.slice(1):n.slice(0,h-1)+n.slice(h)};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n.split("").reverse().join("")};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={SoundManagerCreator:i(426),Events:i(70),BaseSound:i(146),BaseSoundManager:i(145),WebAudioSound:i(434),WebAudioSoundManager:i(432),HTML5AudioSound:i(429),HTML5AudioSoundManager:i(427),NoAudioSound:i(431),NoAudioSoundManager:i(430)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Arcade:i(1366),Matter:i(1494)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={BodyBounds:i(1392),Components:i(249),Events:i(272),Factory:i(1394),MatterGameObject:i(1395),Image:i(1396),Matter:i(594),MatterPhysics:i(1524),PolyDecomp:i(1393),Sprite:i(1397),TileBody:i(593),PhysicsEditorParser:i(589),PhysicsJSONParser:i(590),PointerConstraint:i(1398),World:i(1402)}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setBounce:function(n){return this.body.restitution=n,this}};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setCollisionCategory:function(n){return this.body.collisionFilter.category=n,this},setCollisionGroup:function(n){return this.body.collisionFilter.group=n,this},setCollidesWith:function(n){var h=0;if(!Array.isArray(n))h=n;else for(var r=0;r<n.length;r++)h|=n[r];return this.body.collisionFilter.mask=h,this},setOnCollide:function(n){return this.body.onCollideCallback=n,this},setOnCollideEnd:function(n){return this.body.onCollideEndCallback=n,this},setOnCollideActive:function(n){return this.body.onCollideActiveCallback=n,this},setOnCollideWith:function(n,h){Array.isArray(n)||(n=[n]);for(var r=0;r<n.length;r++){var a=n[r].hasOwnProperty("body")?n[r].body:n[r];this.body.setOnCollideWith(a,h)}return this}};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(41),h={applyForce:function(r){return this._tempVec2.set(this.body.position.x,this.body.position.y),n.applyForce(this.body,this._tempVec2,r),this},applyForceFrom:function(r,a){return n.applyForce(this.body,r,a),this},thrust:function(r){var a=this.body.angle;return this._tempVec2.set(r*Math.cos(a),r*Math.sin(a)),n.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustLeft:function(r){var a=this.body.angle-Math.PI/2;return this._tempVec2.set(r*Math.cos(a),r*Math.sin(a)),n.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustRight:function(r){var a=this.body.angle+Math.PI/2;return this._tempVec2.set(r*Math.cos(a),r*Math.sin(a)),n.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustBack:function(r){var a=this.body.angle-Math.PI;return this._tempVec2.set(r*Math.cos(a),r*Math.sin(a)),n.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this}};e.exports=h},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setFriction:function(n,h,r){return this.body.friction=n,h!==void 0&&(this.body.frictionAir=h),r!==void 0&&(this.body.frictionStatic=r),this},setFrictionAir:function(n){return this.body.frictionAir=n,this},setFrictionStatic:function(n){return this.body.frictionStatic=n,this}};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setIgnoreGravity:function(n){return this.body.ignoreGravity=n,this}};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(41),h=i(3),r={setMass:function(a){return n.setMass(this.body,a),this},setDensity:function(a){return n.setDensity(this.body,a),this},centerOfMass:{get:function(){return new h(this.body.centerOfMass.x,this.body.centerOfMass.y)}}};e.exports=r},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setSensor:function(n){return this.body.isSensor=n,this},isSensor:function(){return this.body.isSensor}};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(86),h=i(41),r=i(124),a=i(2),l=i(589),o=i(590),u=i(64),v={setRectangle:function(d,c,p){return this.setBody({type:"rectangle",width:d,height:c},p)},setCircle:function(d,c){return this.setBody({type:"circle",radius:d},c)},setPolygon:function(d,c,p){return this.setBody({type:"polygon",sides:c,radius:d},p)},setTrapezoid:function(d,c,p,g){return this.setBody({type:"trapezoid",width:d,height:c,slope:p},g)},setExistingBody:function(d,c){c===void 0&&(c=!0),this.body&&this.world.remove(this.body,!0),this.body=d;for(var p=0;p<d.parts.length;p++)d.parts[p].gameObject=this;var g=this;if(d.destroy=function(){g.world.remove(g.body,!0),g.body.gameObject=null},c&&(this.world.has(d)&&this.world.remove(d,!0),this.world.add(d)),this._originComponent){var m=d.render.sprite.xOffset,x=d.render.sprite.yOffset,y=d.centerOfMass.x,T=d.centerOfMass.y;if(r(y,.5)&&r(T,.5))this.setOrigin(m+.5,x+.5);else{var C=d.centerOffset.x,S=d.centerOffset.y;this.setOrigin(m+C/this.displayWidth,x+S/this.displayHeight)}}return this},setBody:function(d,c){if(!d)return this;var p;typeof d=="string"&&(d={type:d});var g=a(d,"type","rectangle"),m=a(d,"x",this._tempVec2.x),x=a(d,"y",this._tempVec2.y),y=a(d,"width",this.width),T=a(d,"height",this.height);switch(g){case"rectangle":p=n.rectangle(m,x,y,T,c);break;case"circle":var C=a(d,"radius",Math.max(y,T)/2),S=a(d,"maxSides",25);p=n.circle(m,x,C,c,S);break;case"trapezoid":var E=a(d,"slope",.5);p=n.trapezoid(m,x,y,T,E,c);break;case"polygon":var M=a(d,"sides",5),O=a(d,"radius",Math.max(y,T)/2);p=n.polygon(m,x,M,O,c);break;case"fromVertices":case"fromVerts":var L=a(d,"verts",null);if(L)if(typeof L=="string"&&(L=u.fromPath(L)),this.body&&!this.body.hasOwnProperty("temp"))h.setVertices(this.body,L),p=this.body;else{var R=a(d,"flagInternal",!1),F=a(d,"removeCollinear",.01),D=a(d,"minimumArea",10);p=n.fromVertices(m,x,L,c,R,F,D)}break;case"fromPhysicsEditor":p=l.parseBody(m,x,d,c);break;case"fromPhysicsTracer":p=o.parseBody(m,x,d,c);break}return p&&this.setExistingBody(p,d.addToWorld),this}};e.exports=v},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(272),h=i(165),r=i(166),a={setToSleep:function(){return h.set(this.body,!0),this},setAwake:function(){return h.set(this.body,!1),this},setSleepThreshold:function(l){return l===void 0&&(l=60),this.body.sleepThreshold=l,this},setSleepEvents:function(l,o){return this.setSleepStartEvent(l),this.setSleepEndEvent(o),this},setSleepStartEvent:function(l){if(l){var o=this.world;r.on(this.body,"sleepStart",function(u){o.emit(n.SLEEP_START,u,this)})}else r.off(this.body,"sleepStart");return this},setSleepEndEvent:function(l){if(l){var o=this.world;r.on(this.body,"sleepEnd",function(u){o.emit(n.SLEEP_END,u,this)})}else r.off(this.body,"sleepEnd");return this}};e.exports=a},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="afteradd"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="afterremove"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="afterupdate"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="beforeadd"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="beforeremove"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="beforeupdate"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="collisionactive"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="collisionend"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="collisionstart"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragend"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="drag"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragstart"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pause"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="resume"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="sleepend"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="sleepstart"},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(41),h={setStatic:function(r){return n.setStatic(this.body,r),this},isStatic:function(){return this.body.isStatic}};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(41),h=i(14),r=i(269),a=i(270),l=4,o={x:{get:function(){return this.body.position.x},set:function(u){this._tempVec2.set(u,this.y),n.setPosition(this.body,this._tempVec2)}},y:{get:function(){return this.body.position.y},set:function(u){this._tempVec2.set(this.x,u),n.setPosition(this.body,this._tempVec2)}},scaleX:{get:function(){return this._scaleX},set:function(u){var v=1/this._scaleX,d=1/this._scaleY;this._scaleX=u,this._scaleX===0?this.renderFlags&=~l:this.renderFlags|=l,n.scale(this.body,v,d),n.scale(this.body,u,this._scaleY)}},scaleY:{get:function(){return this._scaleY},set:function(u){var v=1/this._scaleX,d=1/this._scaleY;this._scaleY=u,this._scaleY===0?this.renderFlags&=~l:this.renderFlags|=l,n.scale(this.body,v,d),n.scale(this.body,this._scaleX,u)}},angle:{get:function(){return a(this.body.angle*h.RAD_TO_DEG)},set:function(u){this.rotation=a(u)*h.DEG_TO_RAD}},rotation:{get:function(){return this.body.angle},set:function(u){this._rotation=r(u),n.setAngle(this.body,this._rotation)}},setPosition:function(u,v){return u===void 0&&(u=0),v===void 0&&(v=u),this._tempVec2.set(u,v),n.setPosition(this.body,this._tempVec2),this},setRotation:function(u){return u===void 0&&(u=0),this._rotation=r(u),n.setAngle(this.body,u),this},setFixedRotation:function(){return n.setInertia(this.body,1/0),this},setAngle:function(u){return u===void 0&&(u=0),this.angle=u,n.setAngle(this.body,this.rotation),this},setScale:function(u,v,d){u===void 0&&(u=1),v===void 0&&(v=u);var c=1/this._scaleX,p=1/this._scaleY;return this._scaleX=u,this._scaleY=v,n.scale(this.body,c,p,d),n.scale(this.body,u,v,d),this}};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(41),h={setAngularVelocity:function(r){return n.setAngularVelocity(this.body,r),this},setVelocityX:function(r){return this._tempVec2.set(r,this.body.velocity.y),n.setVelocity(this.body,this._tempVec2),this},setVelocityY:function(r){return this._tempVec2.set(this.body.velocity.x,r),n.setVelocity(this.body,this._tempVec2),this},setVelocity:function(r,a){return this._tempVec2.set(r,a),n.setVelocity(this.body,this._tempVec2),this}};e.exports=h},function(e,f,i){var n={};e.exports=n;var h=i(118),r=i(32);(function(){n.create=function(a){var l={extended:!1,narrowDetections:0,narrowphaseTests:0,narrowReuse:0,narrowReuseCount:0,midphaseTests:0,broadphaseTests:0,narrowEff:1e-4,midEff:1e-4,broadEff:1e-4,collisions:0,buckets:0,bodies:0,pairs:0};return r.extend(l,!1,a)},n.reset=function(a){a.extended&&(a.narrowDetections=0,a.narrowphaseTests=0,a.narrowReuse=0,a.narrowReuseCount=0,a.midphaseTests=0,a.broadphaseTests=0,a.narrowEff=0,a.midEff=0,a.broadEff=0,a.collisions=0,a.buckets=0,a.pairs=0,a.bodies=0)},n.update=function(a,l){if(a.extended){var o=l.world,u=h.allBodies(o);a.collisions=a.narrowDetections,a.pairs=l.pairs.list.length,a.bodies=u.length,a.midEff=(a.narrowDetections/(a.midphaseTests||1)).toFixed(2),a.narrowEff=(a.narrowDetections/(a.narrowphaseTests||1)).toFixed(2),a.broadEff=(1-a.broadphaseTests/(u.length||1)).toFixed(2),a.narrowReuse=(a.narrowReuseCount/(a.narrowphaseTests||1)).toFixed(2)}}})()},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(123),h=i(271),r=i(86),a=i(41),l=i(1392),o=i(84),u=i(0),v=i(118),d=i(591),c=i(128),p=i(273),g=i(50),m=i(1394),x=i(2),y=i(6),T=i(597),C=i(1525),S=i(1526),E=i(1399),M=i(1527),O=i(127),L=i(250),R=i(598),F=i(595),D=i(24),B=i(1400),N=i(599),U=i(274),X=i(20),K=i(592),k=i(83),b=i(64),I=i(1402),G=new u({initialize:function(V){this.scene=V,this.systems=V.sys,this.config=this.getConfig(),this.world,this.add,this.bodyBounds,this.body=a,this.composite=v,this.detector=p,this.grid=T,this.pair=L,this.pairs=R,this.query=B,this.resolver=N,this.sat=U,this.constraint=c,this.bodies=r,this.composites=d,this.axes=h,this.bounds=o,this.svg=K,this.vector=k,this.vertices=b,this.verts=b,this._tempVec2=k.create(),y(this.config,"plugins.collisionevents",!0)&&this.enableCollisionEventsPlugin(),y(this.config,"plugins.attractors",!1)&&this.enableAttractorPlugin(),y(this.config,"plugins.wrap",!1)&&this.enableWrapPlugin(),N._restingThresh=y(this.config,"restingThresh",4),N._restingThreshTangent=y(this.config,"restingThreshTangent",6),N._positionDampen=y(this.config,"positionDampen",.9),N._positionWarming=y(this.config,"positionWarming",.8),N._frictionNormalMultiplier=y(this.config,"frictionNormalMultiplier",5),V.sys.events.once(X.BOOT,this.boot,this),V.sys.events.on(X.START,this.start,this)},boot:function(){this.world=new I(this.scene,this.config),this.add=new m(this.world),this.bodyBounds=new l,this.systems.events.once(X.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new I(this.scene,this.config),this.add=new m(this.world));var Y=this.systems.events;Y.on(X.UPDATE,this.world.update,this.world),Y.on(X.POST_UPDATE,this.world.postUpdate,this.world),Y.once(X.SHUTDOWN,this.shutdown,this)},getConfig:function(){var Y=this.systems.game.config.physics,V=this.systems.settings.physics,W=O(x(V,"matter",{}),x(Y,"matter",{}));return W},enableAttractorPlugin:function(){return F.register(C),F.use(E,C),this},enableWrapPlugin:function(){return F.register(M),F.use(E,M),this},enableCollisionEventsPlugin:function(){return F.register(S),F.use(E,S),this},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},set60Hz:function(){return this.world.getDelta=this.world.update60Hz,this.world.autoUpdate=!0,this},set30Hz:function(){return this.world.getDelta=this.world.update30Hz,this.world.autoUpdate=!0,this},step:function(Y,V){this.world.step(Y,V)},containsPoint:function(Y,V,W){Y=this.getMatterBodies(Y);var H=k.create(V,W),Z=B.point(Y,H);return Z.length>0},intersectPoint:function(Y,V,W){W=this.getMatterBodies(W);var H=k.create(Y,V),Z=[],q=B.point(W,H);return q.forEach(function(_){Z.indexOf(_)===-1&&Z.push(_)}),Z},intersectRect:function(Y,V,W,H,Z,q){Z===void 0&&(Z=!1),q=this.getMatterBodies(q);var _={min:{x:Y,y:V},max:{x:Y+W,y:V+H}},nt=[],rt=B.region(q,_,Z);return rt.forEach(function(at){nt.indexOf(at)===-1&&nt.push(at)}),nt},intersectRay:function(Y,V,W,H,Z,q){Z===void 0&&(Z=1),q=this.getMatterBodies(q);for(var _=[],nt=B.ray(q,k.create(Y,V),k.create(W,H),Z),rt=0;rt<nt.length;rt++)_.push(nt[rt].body);return _},intersectBody:function(Y,V){V=this.getMatterBodies(V);for(var W=[],H=B.collides(Y,V),Z=0;Z<H.length;Z++){var q=H[Z];q.bodyA===Y?W.push(q.bodyB):W.push(q.bodyA)}return W},overlap:function(Y,V,W,H,Z){W===void 0&&(W=null),H===void 0&&(H=null),Z===void 0&&(Z=W),Array.isArray(Y)||(Y=[Y]),Y=this.getMatterBodies(Y),V=this.getMatterBodies(V);for(var q=!1,_=0;_<Y.length;_++)for(var nt=Y[_],rt=B.collides(nt,V),at=0;at<rt.length;at++){var ct=rt[at],ut=ct.bodyA.id===nt.id?ct.bodyB:ct.bodyA;if(!H||H.call(Z,nt,ut,ct)){if(q=!0,W)W.call(Z,nt,ut,ct);else if(!H)return!0}}return q},setCollisionCategory:function(Y,V){return Y=this.getMatterBodies(Y),Y.forEach(function(W){W.collisionFilter.category=V}),this},setCollisionGroup:function(Y,V){return Y=this.getMatterBodies(Y),Y.forEach(function(W){W.collisionFilter.group=V}),this},setCollidesWith:function(Y,V){Y=this.getMatterBodies(Y);var W=0;if(!Array.isArray(V))W=V;else for(var H=0;H<V.length;H++)W|=V[H];return Y.forEach(function(Z){Z.collisionFilter.mask=W}),this},getMatterBodies:function(Y){if(!Y)return this.world.getAllBodies();Array.isArray(Y)||(Y=[Y]);for(var V=[],W=0;W<Y.length;W++){var H=Y[W].hasOwnProperty("body")?Y[W].body:Y[W];V.push(H)}return V},setVelocity:function(Y,V,W){Y=this.getMatterBodies(Y);var H=this._tempVec2;return H.x=V,H.y=W,Y.forEach(function(Z){a.setVelocity(Z,H)}),this},setVelocityX:function(Y,V){Y=this.getMatterBodies(Y);var W=this._tempVec2;return W.x=V,Y.forEach(function(H){W.y=H.velocity.y,a.setVelocity(H,W)}),this},setVelocityY:function(Y,V){Y=this.getMatterBodies(Y);var W=this._tempVec2;return W.y=V,Y.forEach(function(H){W.x=H.velocity.x,a.setVelocity(H,W)}),this},setAngularVelocity:function(Y,V){return Y=this.getMatterBodies(Y),Y.forEach(function(W){a.setAngularVelocity(W,V)}),this},applyForce:function(Y,V){Y=this.getMatterBodies(Y);var W=this._tempVec2;return Y.forEach(function(H){W.x=H.position.x,W.y=H.position.y,a.applyForce(H,W,V)}),this},applyForceFromPosition:function(Y,V,W,H){Y=this.getMatterBodies(Y);var Z=this._tempVec2;return Y.forEach(function(q){H===void 0&&(H=q.angle),Z.x=W*Math.cos(H),Z.y=W*Math.sin(H),a.applyForce(q,V,Z)}),this},applyForceFromAngle:function(Y,V,W){Y=this.getMatterBodies(Y);var H=this._tempVec2;return Y.forEach(function(Z){W===void 0&&(W=Z.angle),H.x=V*Math.cos(W),H.y=V*Math.sin(W),a.applyForce(Z,{x:Z.position.x,y:Z.position.y},H)}),this},getConstraintLength:function(Y){var V=Y.pointA.x,W=Y.pointA.y,H=Y.pointB.x,Z=Y.pointB.y;return Y.bodyA&&(V+=Y.bodyA.position.x,W+=Y.bodyA.position.y),Y.bodyB&&(H+=Y.bodyB.position.x,Z+=Y.bodyB.position.y),g(V,W,H,Z)},alignBody:function(Y,V,W,H){Y=Y.hasOwnProperty("body")?Y.body:Y;var Z;switch(H){case n.TOP_LEFT:case n.LEFT_TOP:Z=this.bodyBounds.getTopLeft(Y,V,W);break;case n.TOP_CENTER:Z=this.bodyBounds.getTopCenter(Y,V,W);break;case n.TOP_RIGHT:case n.RIGHT_TOP:Z=this.bodyBounds.getTopRight(Y,V,W);break;case n.LEFT_CENTER:Z=this.bodyBounds.getLeftCenter(Y,V,W);break;case n.CENTER:Z=this.bodyBounds.getCenter(Y,V,W);break;case n.RIGHT_CENTER:Z=this.bodyBounds.getRightCenter(Y,V,W);break;case n.LEFT_BOTTOM:case n.BOTTOM_LEFT:Z=this.bodyBounds.getBottomLeft(Y,V,W);break;case n.BOTTOM_CENTER:Z=this.bodyBounds.getBottomCenter(Y,V,W);break;case n.BOTTOM_RIGHT:case n.RIGHT_BOTTOM:Z=this.bodyBounds.getBottomRight(Y,V,W);break}return Z&&a.setPosition(Y,Z),this},shutdown:function(){var Y=this.systems.events;this.world&&(Y.off(X.UPDATE,this.world.update,this.world),Y.off(X.POST_UPDATE,this.world.postUpdate,this.world)),Y.off(X.SHUTDOWN,this.shutdown,this),this.add&&this.add.destroy(),this.world&&this.world.destroy(),this.add=null,this.world=null},destroy:function(){this.shutdown(),this.scene.sys.events.off(X.START,this.start,this),this.scene=null,this.systems=null}});D.register("MatterPhysics",G,"matterPhysics"),e.exports=G},function(e,f,i){var n=i(594),h={name:"matter-attractors",version:"0.1.7",for:"matter-js@^0.14.2",silent:!0,install:function(r){r.after("Body.create",function(){h.Body.init(this)}),r.before("Engine.update",function(a){h.Engine.update(a)})},Body:{init:function(r){r.plugin.attractors=r.plugin.attractors||[]}},Engine:{update:function(r){for(var a=n.Composite.allBodies(r.world),l=0;l<a.length;l++){var o=a[l],u=o.plugin.attractors;if(u&&u.length>0)for(var v=0;v<a.length;v++){var d=a[v];if(l!==v)for(var c=0;c<u.length;c++){var p=u[c],g=p;n.Common.isFunction(p)&&(g=p(o,d)),g&&n.Body.applyForce(d,d.position,g)}}}}},Attractors:{gravityConstant:.001,gravity:function(r,a){var l=n.Vector.sub(a.position,r.position),o=n.Vector.magnitudeSquared(l)||1e-4,u=n.Vector.normalise(l),v=-h.Attractors.gravityConstant*(r.mass*a.mass/o),d=n.Vector.mult(u,v);n.Body.applyForce(r,r.position,n.Vector.neg(d)),n.Body.applyForce(a,a.position,d)}}};e.exports=h},function(e,f){/**
 * @author       @dxu https://github.com/dxu/matter-collision-events
 * @author       Richard Davey <rich@photonstorm.com>
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={name:"matter-collision-events",version:"0.1.6",for:"matter-js@^0.14.2",silent:!0,install:function(n){n.after("Engine.create",function(){n.Events.on(this,"collisionStart",function(h){h.pairs.map(function(r){var a=r.bodyA,l=r.bodyB;a.gameObject&&a.gameObject.emit("collide",a,l,r),l.gameObject&&l.gameObject.emit("collide",l,a,r),n.Events.trigger(a,"onCollide",{pair:r}),n.Events.trigger(l,"onCollide",{pair:r}),a.onCollideCallback&&a.onCollideCallback(r),l.onCollideCallback&&l.onCollideCallback(r),a.onCollideWith[l.id]&&a.onCollideWith[l.id](l,r),l.onCollideWith[a.id]&&l.onCollideWith[a.id](a,r)})}),n.Events.on(this,"collisionActive",function(h){h.pairs.map(function(r){var a=r.bodyA,l=r.bodyB;a.gameObject&&a.gameObject.emit("collideActive",a,l,r),l.gameObject&&l.gameObject.emit("collideActive",l,a,r),n.Events.trigger(a,"onCollideActive",{pair:r}),n.Events.trigger(l,"onCollideActive",{pair:r}),a.onCollideActiveCallback&&a.onCollideActiveCallback(r),l.onCollideActiveCallback&&l.onCollideActiveCallback(r)})}),n.Events.on(this,"collisionEnd",function(h){h.pairs.map(function(r){var a=r.bodyA,l=r.bodyB;a.gameObject&&a.gameObject.emit("collideEnd",a,l,r),l.gameObject&&l.gameObject.emit("collideEnd",l,a,r),n.Events.trigger(a,"onCollideEnd",{pair:r}),n.Events.trigger(l,"onCollideEnd",{pair:r}),a.onCollideEndCallback&&a.onCollideEndCallback(r),l.onCollideEndCallback&&l.onCollideEndCallback(r)})})})}};e.exports=i},function(e,f,i){var n=i(594),h={name:"matter-wrap",version:"0.1.4",for:"matter-js@^0.14.2",silent:!0,install:function(r){r.after("Engine.update",function(){h.Engine.update(this)})},Engine:{update:function(r){for(var a=r.world,l=n.Composite.allBodies(a),o=n.Composite.allComposites(a),u=0;u<l.length;u+=1){var v=l[u];v.plugin.wrap&&h.Body.wrap(v,v.plugin.wrap)}for(u=0;u<o.length;u+=1){var d=o[u];d.plugin.wrap&&h.Composite.wrap(d,d.plugin.wrap)}}},Bounds:{wrap:function(r,a){var l=null,o=null;if(typeof a.min.x!="undefined"&&typeof a.max.x!="undefined"&&(r.min.x>a.max.x?l=a.min.x-r.max.x:r.max.x<a.min.x&&(l=a.max.x-r.min.x)),typeof a.min.y!="undefined"&&typeof a.max.y!="undefined"&&(r.min.y>a.max.y?o=a.min.y-r.max.y:r.max.y<a.min.y&&(o=a.max.y-r.min.y)),l!==null||o!==null)return{x:l||0,y:o||0}}},Body:{wrap:function(r,a){var l=h.Bounds.wrap(r.bounds,a);return l&&n.Body.translate(r,l),l}},Composite:{bounds:function(r){for(var a=n.Composite.allBodies(r),l=[],o=0;o<a.length;o+=1){var u=a[o];l.push(u.bounds.min,u.bounds.max)}return n.Bounds.create(l)},wrap:function(r,a){var l=h.Bounds.wrap(h.Composite.bounds(r),a);return l&&n.Composite.translate(r,l),l}}};e.exports=h},function(e,f,i){(function(n){/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2020 Photon Storm Ltd.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var h=i(33),r=i(17),a={Actions:i(275),Animations:i(723),BlendModes:i(35),Cache:i(735),Cameras:i(738),Core:i(806),Class:i(0),Create:i(888),Curves:i(894),Data:i(896),Display:i(898),DOM:i(917),Events:i(918),Game:i(920),GameObjects:i(1011),Geom:i(483),Input:i(1308),Loader:i(1338),Math:i(193),Physics:i(1493),Plugins:i(1403),Renderer:i(1405),Scale:i(1412),ScaleModes:i(168),Scene:i(418),Scenes:i(1413),Structs:i(1415),Textures:i(1416),Tilemaps:i(1418),Time:i(1461),Tweens:i(1463),Utils:i(1481)};a.Sound=i(1492),a=r(!1,a,h),e.exports=a,n.Phaser=a}).call(this,i(600))}])})})(wy);var qa=eL(wy.exports);class xt{constructor(t){this.scene=t,this.displayList=t.sys.displayList,this.updateList=t.sys.updateList,t.events.once("destroy",this.destroy,this)}destroy(){this.scene=null,this.displayList=null,this.updateList=null}static register(t,e){xt.prototype[t]=e}}var iL=function(s){return s===void 0&&(s=nL),this.getFrameNameCallback=s,this},nL=function(s,t,e){return e==="__BASE"?`${s},${t}`:`${e}_${s},${t}`},ta=function(s){var t,e,f;if(typeof s!="object"||s===null)return s;t=Array.isArray(s)?[]:{};for(f in s)e=s[f],t[f]=ta(e);return t},sL=function(s,t,e,f){Array.isArray(t)&&(f=e,e=t,t=void 0),t===void 0&&(t="__BASE"),e=ta(e),f=ta(f),this.textureKey=s,this.baseFrameName=t,this.columns.data=e,this.columns.count=e?e.length:0,this.columns.stretch=0,this.columns.minWidth=0,this.columns.scale=1,this.rows.data=f,this.rows.count=f?f.length:0,this.rows.stretch=0,this.rows.minHeight=0,this.rows.scale=1;var i=this.scene.sys.textures.get(s);if(!i)return this.clear(),this;if(!e||!f)return this.clear(),this;for(var n=i.get(t),h=n.width,r=0,a=0,l=e.length;a<l;a++)e[a]===void 0?r++:typeof e[a]=="number"?h-=e[a]:h-=e[a].width;for(var o=h/r,u=n.height,v=0,a=0,l=f.length;a<l;a++)f[a]===void 0?v++:typeof f[a]=="number"?u-=f[a]:u-=f[a].width;for(var d=u/v,c,p,g,m,x,y=0,T=0,C=0,S=f.length;C<S;C++){f[C]===void 0&&(f[C]=d),typeof f[C]=="number"&&(f[C]={height:f[C],stretch:C%2}),c=f[C],g=c.height,this.rows.stretch+=c.stretch|0,this.rows.minHeight+=c.stretch>0?0:g,y=0;for(var a=0,E=e.length;a<E;a++){if(e[a]===void 0&&(e[a]=o),typeof e[a]=="number"&&(e[a]={width:e[a],stretch:a%2}),p=e[a],m=p.width,C===0&&(this.columns.stretch+=p.stretch|0,this.columns.minWidth+=p.stretch>0?0:m),m>=1&&g>=1){x=this.getFrameNameCallback(a,C,t);var M=typeof x;(M==="string"||M==="number")&&i.add(x,0,y+n.cutX,T+n.cutY,m,g)}y+=m}T+=g}return this.updateTexture(),this},rL=function(){if(this.clear(),this.textureKey===void 0)return this;var s=this.scene.sys.textures.get(this.textureKey);if(!s)return this;var t=this.columns.minWidth*this.maxFixedPartScaleX,e=this.rows.minHeight*this.maxFixedPartScaleY,f=this.width-t,i=this.height-e,n=f>=0?this.maxFixedPartScaleX:this.width/t,h=i>=0?this.maxFixedPartScaleY:this.height/e;if(this.preserveRatio){var r=Math.min(n,h);if(n>r){var a=(n-r)*t;f>=0?f+=a:f=a,n=r}if(h>r){var l=(h-r)*e;i>=0?i+=l:i=l,h=r}}this.columns.scale=n,this.rows.scale=h;var o;f>0?o=this.columns.stretch>0?f/this.columns.stretch:0:o=0;var u;i>0?u=this.rows.stretch>0?i/this.rows.stretch:0:u=0;for(var v,d,c,p,g,m=0,x=0,y,T=0,C=this.rows.count;T<C;T++){c=this.rows.data[T],g=c.stretch===0?c.height*h:u*c.stretch,m=0;for(var S=0,E=this.columns.count;S<E;S++)d=this.columns.data[S],p=d.stretch===0?d.width*n:o*d.stretch,v=this.getFrameNameCallback(S,T,this.baseFrameName),s.has(v)&&p>0&&g>0&&(c.stretch===0&&d.stretch===0||this.getStretchMode(S,T)===0?y=0:y=1,y===0?this._drawImage(this.textureKey,v,m,x,p,g):this._drawTileSprite(this.textureKey,v,m,x,p,g)),m+=p;x+=g}};const aL=Phaser.Utils.Objects.IsPlainObject,h0=Phaser.Utils.Objects.GetValue;var oL=function(s){return aL(s)?(this.stretchMode.edge=yf(h0(s,"edge",0)),this.stretchMode.internal=yf(h0(s,"internal",0))):(s=yf(s),this.stretchMode.edge=s,this.stretchMode.internal=s),this},yf=function(s){return typeof s=="string"&&(s=hL[s]),s};const hL={scale:0,repeat:1};var lL=function(s,t){return s===0||s===this.columns.count-1||t===0||t===this.rows.count-1},uL=function(s,t){return lL.call(this,s,t)?this.stretchMode.edge:this.stretchMode.internal},fL=function(s){return s==null&&(s=!0),this.preserveRatio=s,this},dL=function(s,t){return t===void 0&&(t=s),this.maxFixedPartScaleX=s,this.maxFixedPartScaleY=t,this},gi=function(){},cL={_drawImage:gi,_drawTileSprite:gi,setGetFrameNameCallback:iL,setTexture:sL,updateTexture:rL,setStretchMode:oL,getStretchMode:uL,setPreserveRatio:fL,setMaxFixedPartScale:dL};const Ra=Phaser.Utils.Objects.IsPlainObject,qt=Phaser.Utils.Objects.GetValue;var Iy=function(s,t){class e extends s{constructor(i,n,h,r,a,l,o,u,v,d){Ra(n)?(d=n,n=qt(d,"x",0),h=qt(d,"y",0),r=qt(d,"width",1),a=qt(d,"height",1),l=qt(d,"key",void 0),o=qt(d,"baseFrame",void 0),u=qt(d,"columns",void 0),v=qt(d,"rows",void 0)):Ra(r)?(d=r,r=qt(d,"width",1),a=qt(d,"height",1),l=qt(d,"key",void 0),o=qt(d,"baseFrame",void 0),u=qt(d,"columns",void 0),v=qt(d,"rows",void 0)):Ra(l)?(d=l,l=qt(d,"key",void 0),o=qt(d,"baseFrame",void 0),u=qt(d,"columns",void 0),v=qt(d,"rows",void 0)):Ra(o)?(d=o,o=qt(d,"baseFrame",void 0),u=qt(d,"columns",void 0),v=qt(d,"rows",void 0)):Array.isArray(o)?(d=v,v=u,u=o,o=qt(d,"baseFrame",void 0)):Ra(u)&&(d=u,u=qt(d,"columns",void 0),v=qt(d,"rows",void 0)),super(i),this.type=t,this.setPosition(n,h).setSize(r,a).setOrigin(.5,.5),this.columns={},this.rows={},this.stretchMode={},this._tileSprite=void 0,this._image=void 0,this.setGetFrameNameCallback(qt(d,"getFrameNameCallback",void 0)),this.setStretchMode(qt(d,"stretchMode",0)),this.setPreserveRatio(qt(d,"preserveRatio",!0));var c=qt(d,"maxFixedPartScale",1),p=qt(d,"maxFixedPartScaleX",c),g=qt(d,"maxFixedPartScaleY",void 0);this.setMaxFixedPartScale(p,g),this.setTexture(l,o,u,v)}get minWidth(){return this.columns.minWidth}get minHeight(){return this.rows.minHeight}get fixedPartScaleX(){return this.columns.scale}get fixedPartScaleY(){return this.rows.scale}resize(i,n){return this.width===i&&this.height===n?this:(super.resize(i,n),this.updateTexture(),this)}}return Object.assign(e.prototype,cL),e},Dy=function(s,t,e){return e===void 0&&(e="image"),s[t]||(s[t]=s.scene.make[e]({add:!1,origin:{x:0,y:0}}),s.once("destroy",function(){s[t]&&(s[t].destroy(),s[t]=void 0)})),s[t]},vL=function(s,t,e,f,i,n){var h=Dy(this,"_image","image").setTexture(s,t).setDisplaySize(i,n);this.draw(h,e,f)},pL=function(s,t,e,f,i,n){var h=Dy(this,"_tileSprite","tileSprite").setTexture(s,t).setSize(i,n);this.draw(h,e,f)},gL={_drawImage:vL,_drawTileSprite:pL};const mL=Phaser.GameObjects.RenderTexture;class ml extends Iy(mL,"rexNinePatch"){}Object.assign(ml.prototype,gL);var By=function(s){return s==null||s===""||s.length===0},xL=function(s,t,e){var f=s;if(!By(t)){typeof t=="string"&&(t=t.split("."));for(var i,n=0,h=t.length;n<h;n++){if(i=t[n],f[i]==null||typeof f[i]!="object"){var r;n===h-1?e===void 0?r={}:r=e:r={},f[i]=r}f=f[i]}}return f},Ct=function(s,t,e,f){if(f===void 0&&(f="."),typeof s=="object"){if(By(t)){if(e==null)return;typeof e=="object"&&(s=e)}else{typeof t=="string"&&(t=t.split(f));var i=t.pop(),n=xL(s,t);n[i]=e}return s}};xt.register("ninePatch",function(s,t,e,f,i,n,h,r){var a=new ml(this.scene,s,t,e,f,i,n,h,r);return this.scene.add.existing(a),a});Ct(window,"RexPlugins.UI.NinePatch",ml);const yL=Phaser.GameObjects.GetCalcMatrix;var TL=function(s,t,e,f){var i=t.getRenderList();if(i.length!==0){e.addToRenderList(t);var n=s.pipelines.set(t.pipeline),h=t.frame.glTexture,r=n.setGameObject(t),a=e.roundPixels,l=yL(t,e,f),o=n.calcMatrix.copyFrom(l.calc),u=t._displayOriginX,v=t._displayOriginY,d=e.alpha*t.alpha;s.pipelines.preBatch(t);for(var c=0,p=i.length;c<p;c++)i[c].webglRender(n,o,d,u,v,h,r,a);s.pipelines.postBatch(t)}};const CL=Phaser.Renderer.Canvas.SetTransform;var SL=function(s,t,e,f){var i=s.currentContext,n=t.getRenderList();if(!(n.length===0||!CL(s,i,t,e,f))){e.addToRenderList(t);var h=e.roundPixels,r=-t._displayOriginX,a=-t._displayOriginY;i.translate(r,a);for(var l=0,o=n.length;l<o;l++)n[l].canvasRender(i,r,a,h);i.restore()}},EL={renderWebGL:TL,renderCanvas:SL},by=function(s,t){return this.texture=this.scene.sys.textures.get(s),this.frame=this.texture.get(t),this},l0=function(s,t){if(this.width===s&&this.height===t)return this;this.width=s,this.height=t,this.updateDisplayOrigin();var e=this.input;return e&&!e.customHitArea&&(e.hitArea.width=s,e.hitArea.height=t),this},PL=function(s){return this.lastAppendedChildren.length=0,Array.isArray(s)?(this.children.add(s),this.lastAppendedChildren.push(...s)):(this.children.add(s),this.lastAppendedChildren.push(s)),this};const ML=Phaser.Utils.Array.Remove;var AL=function(s){return this.poolManager&&this.poolManager.free(s),ML(this.children.list,s),this.lastAppendedChildren.length=0,this.dirty=!0,this},u0=function(){return this.poolManager&&this.poolManager.freeMultiple(this.children.list),this.children.list.length=0,this.lastAppendedChildren.length=0,this.dirty=!0,this},OL=function(){return this.lastAppendedChildren},RL=function(){return this.children.list},LL={setTint(s){return this.tint=s,this.tintFill=!1,this},setTintFill(s){return this.tint=s,this.tintFill=!0,this},clearTint(){return this.setTint(16777215),this}},Gy={setTexture:by,resize:l0,setSize:l0,addChild:PL,removeChild:AL,removeChildren:u0,clear:u0,getLastAppendedChildren:OL,getChildren:RL};Object.assign(Gy,LL);class Is{constructor(){this.items=[]}destroy(){this.clear(),this.items=void 0}pop(){return this.items.length>0?this.items.pop():null}push(t){return this.items.push(t),this}pushMultiple(t){return this.items.push.apply(this.items,t),t.length=0,this}clear(){return this.items.length=0,this}}const FL=Phaser.Utils.Objects.GetValue;var wL={};class IL{constructor(t){this.pools=FL(t,"pools",wL)}destroy(){this.pools=void 0}free(t){if(!this.pools)return this;var e=t.type;return this.pools.hasOwnProperty(e)||(this.pools[e]=new Is),this.pools[e].push(t),t.onFree(),this}freeMultiple(t){if(!this.pools)return this;for(var e=0,f=t.length;e<f;e++)this.free(t[e]);return this}allocate(t){return!this.pools||!this.pools.hasOwnProperty(t)?null:this.pools[t].pop()}}const DL=Phaser.GameObjects.GameObject,BL=Phaser.Utils.Objects.IsPlainObject,La=Phaser.Utils.Objects.GetValue,bL=Phaser.Structs.List,GL=Phaser.Utils.Array.StableSort;class Ny extends DL{constructor(t,e,f,i,n,h){BL(e)&&(h=e,e=La(h,"x",0),f=La(h,"y",0),i=La(h,"texture"),n=La(h,"frame")),e===void 0&&(e=0),f===void 0&&(f=0),super(t,"rexBlitter"),this.children=new bL,this.renderList=[],this.displayListDirty=!1,this.lastAppendedChildren=[];var r=La(h,"reuseBob",!0);this.poolManager=r?new IL(h):void 0,this.setTexture(i,n).setPosition(e,f).setOrigin(0,0).clearTint().initPipeline()}preDestroy(){this.removeChildren(),this.children.destroy(),this.renderList.length=0,this.poolManager&&this.poolManager.destroy()}getRenderList(){if(this.displayListDirty){this.renderList.length=0;for(var t=!1,e=this.children.list,f=0,i=e.length;f<i;f++){var n=e[f];NL(n)&&(this.renderList.push(n),t||(t=n.depth!==0))}t&&GL(this.renderList,YL),this.displayListDirty=!1}return this.renderList}}var NL=function(s){return s.active&&s.visible&&s.alpha>0},YL=function(s,t){return s._depth-t._depth};const rn=Phaser.GameObjects.Components;Phaser.Class.mixin(Ny,[rn.Alpha,rn.BlendMode,rn.ComputedSize,rn.Depth,rn.GetBounds,rn.Mask,rn.Origin,rn.Pipeline,rn.ScrollFactor,rn.Transform,rn.Visible,EL,Gy]);const Yy="image";/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var pi=function(s,t,e){if(!s||typeof s=="number")return e;if(s.hasOwnProperty(t))return s[t];if(t.indexOf(".")!==-1){for(var f=t.split("."),i=s,n=e,h=0;h<f.length;h++)if(i.hasOwnProperty(f[h]))n=i[f[h]],i=i[f[h]];else{n=e;break}return n}else return e},Ls=function(s){if(typeof s!="object"||s===null)return s;if(Array.isArray(s))s.length=0;else for(var t in s)delete s[t];return s},xl={enableData(){return this.data===void 0&&(this.data={}),this},setData(s,t){if(this.enableData(),arguments.length===1){var e=s;for(s in e)this.data[s]=e[s]}else this.data[s]=t;return this},getData(s,t){return this.enableData(),s===void 0?this.data:pi(this.data,s,t)},incData(s,t,e){return e===void 0&&(e=0),this.enableData(),this.setData(s,this.getData(s,e)+t),this},mulData(s,t,e){return e===void 0&&(e=0),this.enableData(),this.setData(s,this.getData(s,e)*t),this},clearData(){return this.data&&Ls(this.data),this}};class zy{constructor(t,e){this.type=e,this.data=void 0,this.setParent(t).reset().setActive()}destroy(){this.parent&&this.parent.removeChild(this)}setParent(t){return this.parent=t,this}setDisplayListDirty(t){return t&&this.parent&&(this.parent.displayListDirty=!0),this}get active(){return this._active}set active(t){this.setDisplayListDirty(this._active!=t),this._active=t}setActive(t){return t===void 0&&(t=!0),this.active=t,this}modifyPorperties(t){return this}reset(){this.clearData()}onFree(){this.reset().setActive(!1).setParent()}}Object.assign(zy.prototype,xl);const zL=Phaser.Math.DegToRad,VL=Phaser.Math.RadToDeg,Or=Phaser.Utils.Objects.GetValue;class UL extends zy{get visible(){return this._visible}set visible(t){this.setDisplayListDirty(this._visible!=t),this._visible=t}setVisible(t){return t===void 0&&(t=!0),this.visible=t,this}get alpha(){return this._alpha}set alpha(t){this.setDisplayListDirty(!!this._alpha!=!!t),this._alpha=t}setAlpha(t){return this.alpha=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setPosition(t,e){return this.x=t,this.y=e,this}setRotation(t){return this.rotation=t,this}get angle(){return VL(this.rotation)}set angle(t){this.rotation=zL(t)}setAngle(t){return this.angle=t,this}setScaleX(t){return this.scaleX=t,this}get width(){return this._width}set width(t){this._width=t}setWidth(t,e){return e===void 0&&(e=!1),this.width=t,e&&(this.scaleY=this.scaleX),this}setScaleY(t){return this.scaleY=t,this}setScale(t,e){return e===void 0&&(e=t),this.scaleX=t,this.scaleY=e,this}get height(){return this._height}set height(t){this._height=t}setHeight(t,e){return e===void 0&&(e=!1),this.height=t,e&&(this.scaleX=this.scaleY),this}setScale(t,e){return e===void 0&&(e=t),this.scaleX=t,this.scaleY=e,this}get displayWidth(){return this._width*this.scaleX}set displayWidth(t){this.scaleX=t/this._width}setDisplayWidth(t,e){return e===void 0&&(e=!1),this.displayWidth=t,e&&(this.scaleY=this.scaleX),this}get displayHeight(){return this._height*this.scaleY}set displayHeight(t){this.scaleY=t/this._height}setDisplayHeight(t,e){return e===void 0&&(e=!1),this.displayHeight=t,e&&(this.scaleX=this.scaleY),this}setOriginX(t){return this.originX=t,this._displayOriginX=this.width*t,this}setOriginY(t){return this.originY=t,this._displayOriginY=this.height*t,this}setOrigin(t,e){return e===void 0&&(e=t),this.setOriginX(t).setOriginY(e),this}get depth(){return this._depth}set depth(t){this.setDisplayListDirty(this._depth!=t),this._depth=t}setDepth(t){return t===void 0&&(t=0),this.depth=t,this}modifyPorperties(t){if(!t)return this;t.hasOwnProperty("x")&&this.setX(t.x),t.hasOwnProperty("y")&&this.setY(t.y),t.hasOwnProperty("rotation")?this.setRotation(t.rotation):t.hasOwnProperty("angle")&&this.setAngle(t.angle),t.hasOwnProperty("alpha")&&this.setAlpha(t.alpha);var e=Or(t,"width",void 0),f=Or(t,"height",void 0),i=Or(t,"scale",void 0),n=Or(t,"scaleX",i),h=Or(t,"scaleY",i);e!==void 0?f===void 0&&h===void 0?this.setWidth(e,!0):this.setWidth(e):n!==void 0?this.setScaleX(n):t.hasOwnProperty("displayWidth")&&this.setDisplayWidth(t.displayWidth),f!==void 0?e===void 0&&n===void 0?this.setHeight(f,!0):this.setHeight(f):h!==void 0?this.setScaleY(h):t.hasOwnProperty("displayHeight")&&this.setDisplayHeight(t.displayHeight);var r=Or(t,"origin",void 0);return r!==void 0?this.setOrigin(r):(t.hasOwnProperty("originX")&&this.setOriginX(t.originX),t.hasOwnProperty("originY")&&this.setOriginY(t.originY)),t.hasOwnProperty("depth")&&this.setDepth(t.depth),this}reset(){return super.reset(),this.setVisible().setAlpha(1).setPosition(0,0).setRotation(0).setScale(1,1).setOrigin(0).setDepth(0),this}webglRender(t,e,f,i,n,h,r,a){}canvasRender(t,e,f,i){}}const WL=Phaser.GameObjects.Components.TransformMatrix,XL=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha;var an=new WL,HL=function(s,t,e,f,i,n,h,r){var a=this._width,l=this._height,o=a*this.originX,u=l*this.originY,v=this.x-f,d=this.y-i,c=1,p=1;this.flipX&&(v+=a-o*2,c=-1),this.flipY&&(d+=l-u*2,p=-1),an.applyITRS(v,d,this.rotation,this.scaleX*c,this.scaleY*p),t.multiply(an,an);var g=-o,m=-u,x=g+a,y=m+l,T=an.getXRound(g,m,r),C=an.getXRound(g,y,r),S=an.getXRound(x,y,r),E=an.getXRound(x,m,r),M=an.getYRound(g,m,r),O=an.getYRound(g,y,r),L=an.getYRound(x,y,r),R=an.getYRound(x,m,r),F=this.frame.u0,D=this.frame.v0,B=this.frame.u1,N=this.frame.v1,U=XL(this.tint,this.alpha*e);s.batchQuad(this.parent,T,M,C,O,S,L,E,R,F,D,B,N,U,U,U,U,this.tintFill,n,h)},$L=function(s,t,e,f){s.save();var i=this._width,n=this._height,h=i*this.originX,r=n*this.originY,a=this.x-h,l=this.y-r,o=1,u=1;this.flipX&&(a+=i,o=-1),this.flipY&&(l+=n,u=-1),f&&(a=Math.round(a),l=Math.round(l)),s.translate(a,l),s.rotate(this.rotation),s.scale(this.scaleX*o,this.scaleY*u);var v=this.frame;s.drawImage(v.source.image,v.cutX,v.cutY,i,n,0,0,i,n),s.restore()};const KL=Phaser.Utils.Objects.IsPlainObject;class Vy extends UL{constructor(t,e){super(t,Yy),this.setFrame(e)}get width(){return this._width}set width(t){}get height(){return this._height}set height(t){}setFrame(t){return arguments.length>0&&!KL(t)&&(t=this.parent.texture.get(t)),this.frame=t,this._width=t?t.width:0,this._height=t?t.height:0,this}setFlipX(t){return t===void 0&&(t=!0),this.flipX=t,this}setFlipY(t){return t===void 0&&(t=!0),this.flipY=t,this}resetFlip(){return this.flipX=!1,this.flipY=!1,this}get tint(){return this._tint===void 0?this.parent.tint:this._tint}set tint(t){this._tint=t}setTint(t){return this.tint=t,this.tintFill=!1,this}setTintFill(t){return this.tint=t,this.tintFill=!0,this}clearTint(){return this.setTint(16777215),this}resetTint(){return this.tint=void 0,this.tintFill=void 0,this}get tintFill(){return this._tintFill===void 0?this.parent.tintFill:this._tintFill}set tintFill(t){this._tintFill=t}reset(){return super.reset(),this.resetFlip().resetTint().setFrame(),this}modifyPorperties(t){return t?(t.hasOwnProperty("width")&&(t.displayWidth=t.width,delete t.width),t.hasOwnProperty("height")&&(t.displayHeight=t.height,delete t.height),t.hasOwnProperty("frame")&&this.setFrame(t.frame),super.modifyPorperties(t),t.hasOwnProperty("flipX")&&this.setFlipX(t.flipX),t.hasOwnProperty("flipY")&&this.setFlipY(t.flipY),t.hasOwnProperty("tint")&&this.setTint(t.tint),t.hasOwnProperty("tintFill")&&this.setTintFill(t.tintFill),this):this}}var kL={webglRender:HL,canvasRender:$L};Object.assign(Vy.prototype,kL);var Uy=function(s,t){typeof t=="string"&&(t={frame:t});var e=s.poolManager?s.poolManager.allocate(Yy):null;return e===null?e=new Vy(s):e.setParent(s).setActive(),e.modifyPorperties(t),s.addChild(e),e},ZL=function(s,t,e,f,i,n){Uy(this,{frame:t,x:e,y:f,width:i,height:n})},JL=function(s,t,e,f,i,n){var h=this.texture.get(t),r=h.width,a=h.height,l=Math.floor(i/r),o=Math.floor(n/a);e+=(i-l*r)/2,f+=(n-o*a)/2;for(var u=0;u<l;u++)for(var v=0;v<o;v++)Uy(this,{frame:t,x:e+u*r,y:f+v*a})},QL={_drawImage:ZL,_drawTileSprite:JL};class yl extends Iy(Ny,"rexNinePatch2"){setTexture(t,e,f,i){return by.call(this,t,"__BASE"),this.columns?(super.setTexture(t,e,f,i),this):this}}Object.assign(yl.prototype,QL);xt.register("ninePatch2",function(s,t,e,f,i,n,h,r){var a=new yl(this.scene,s,t,e,f,i,n,h,r);return this.scene.add.existing(a),a});Ct(window,"RexPlugins.UI.NinePatch2",yl);const Ps=Phaser.Utils.Objects.GetValue;class Wy{constructor(t,e,f,i,n){this.cornerRadius={},this._width=0,this._height=0,this.setTo(t,e,f,i,n)}setTo(t,e,f,i,n){return this.setPosition(t,e),this.setRadius(n),this.setSize(f,i),this}setPosition(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),this.x=t,this.y=e,this}setRadius(t){return t===void 0&&(t=0),this.radius=t,this}setSize(t,e){return this.width=t,this.height=e,this}get minWidth(){var t=this.cornerRadius;return Math.max(t.tl.x+t.tr.x,t.bl.x+t.br.x)}get minHeight(){var t=this.cornerRadius;return Math.max(t.tl.y+t.bl.y,t.tr.y+t.br.y)}get width(){return this._width}set width(t){t==null&&(t=0),this._width=Math.max(t,this.minWidth)}get height(){return this._height}set height(t){t==null&&(t=0),this._height=Math.max(t,this.minHeight)}get radius(){var t=this.cornerRadius;return Math.max(t.tl.x,t.tl.y,t.tr.x,t.tr.y,t.bl.x,t.bl.y,t.br.x,t.br.y)}set radius(t){var e,f;typeof t=="number"?(e=t,f=t):(e=Ps(t,"x",0),f=Ps(t,"y",0));var i=this.cornerRadius;i.tl=xh(Ps(t,"tl",void 0),e,f),i.tr=xh(Ps(t,"tr",void 0),e,f),i.bl=xh(Ps(t,"bl",void 0),e,f),i.br=xh(Ps(t,"br",void 0),e,f)}get radiusTL(){var t=this.cornerRadius.tl;return Math.max(t.x,t.y)}set radiusTL(t){yh(this.cornerRadius.tl,t)}get radiusTR(){var t=this.cornerRadius.tr;return Math.max(t.x,t.y)}set radiusTR(t){yh(this.cornerRadius.tr,t)}get radiusBL(){var t=this.cornerRadius.bl;return Math.max(t.x,t.y)}set radiusBL(t){yh(this.cornerRadius.bl,t)}get radiusBR(){var t=this.cornerRadius.br;return Math.max(t.x,t.y)}set radiusBR(t){yh(this.cornerRadius.br,t)}}var xh=function(s,t,e){return s===void 0?{x:t,y:e}:typeof s=="number"?{x:s,y:s}:s},yh=function(s,t){typeof t=="number"?(s.x=t,s.y=t):(s.x=Ps(t,"x",0),s.y=Ps(t,"y",0))},Zr=function(s,t,e){var f=e.length;if(f>=2){var i=e[f-2],n=e[f-1];if(s===i&&t===n)return e}return e.push(s,t),e};const f0=Phaser.Math.DegToRad;var Jr=function(s,t,e,f,i,n,h,r,a){h&&n>i?n-=360:!h&&n<i&&(n+=360);var l=n-i,o=f0(l)/r;i=f0(i);for(var u=0;u<=r;u++){var v=i+o*u,d=s+e*Math.cos(v),c=t+f*Math.sin(v);Zr(d,c,a)}return a},jL=Phaser.Renderer.WebGL.Utils,Xy=function(s,t,e,f,i,n){for(var h=jL.getTintAppendFloatAlpha(e.fillColor,e.fillAlpha*f),r=e.pathData,a=e.pathIndexes,l=0;l<a.length;l+=3){var o=a[l]*2,u=a[l+1]*2,v=a[l+2]*2,d=r[o+0]-i,c=r[o+1]-n,p=r[u+0]-i,g=r[u+1]-n,m=r[v+0]-i,x=r[v+1]-n,y=t.getX(d,c),T=t.getY(d,c),C=t.getX(p,g),S=t.getY(p,g),E=t.getX(m,x),M=t.getY(m,x);s.batchTri(e,y,T,C,S,E,M,0,0,1,1,h,h,h,2)}},qL=Phaser.Renderer.WebGL.Utils,Tl=function(s,t,e,f,i){var n=s.strokeTint,h=qL.getTintAppendFloatAlpha(t.strokeColor,t.strokeAlpha*e);n.TL=h,n.TR=h,n.BL=h,n.BR=h;var r=t.pathData,a=r.length-1,l=t.lineWidth,o=l/2,u=r[0]-f,v=r[1]-i;t.closePath||(a-=2);for(var d=2;d<a;d+=2){var c=r[d]-f,p=r[d+1]-i;s.batchLine(u,v,c,p,o,o,l,d-2,t.closePath?d===a-1:!1),u=c,v=p}};const _L=Phaser.GameObjects.GetCalcMatrix;var tF=function(s,t,e,f){t.dirty&&(t.updateData(),t.dirty=!1),e.addToRenderList(t);var i=s.pipelines.set(t.pipeline),n=_L(t,e,f),h=i.calcMatrix.copyFrom(n.calc),r=t._displayOriginX,a=t._displayOriginY,l=e.alpha*t.alpha;s.pipelines.preBatch(t),t.isFilled&&Xy(i,h,t,l,r,a),t.isStroked&&Tl(i,t,l,r,a),s.pipelines.postBatch(t)},go=function(s,t,e,f){var i=e||t.fillColor,n=f||t.fillAlpha,h=(i&16711680)>>>16,r=(i&65280)>>>8,a=i&255;s.fillStyle="rgba("+h+","+r+","+a+","+n+")"},mo=function(s,t,e,f){var i=e||t.strokeColor,n=f||t.strokeAlpha,h=(i&16711680)>>>16,r=(i&65280)>>>8,a=i&255;s.strokeStyle="rgba("+h+","+r+","+a+","+n+")",s.lineWidth=t.lineWidth};const eF=Phaser.Renderer.Canvas.SetTransform;var iF=function(s,t,e,f){t.dirty&&(t.updateData(),t.dirty=!1),e.addToRenderList(t);var i=s.currentContext;if(eF(s,i,t,e,f)){var n=t._displayOriginX,h=t._displayOriginY,r=t.pathData,a=r.length-1,l=r[0]-n,o=r[1]-h;i.beginPath(),i.moveTo(l,o),t.closePath||(a-=2);for(var u=2;u<a;u+=2){var v=r[u]-n,d=r[u+1]-h;i.lineTo(v,d)}i.closePath(),t.isFilled&&(go(i,t),i.fill()),t.isStroked&&(mo(i,t),i.stroke()),i.restore()}},nF={renderWebGL:tF,renderCanvas:iF};const sF=Phaser.GameObjects.Shape,rF=Phaser.Utils.Objects.IsPlainObject,d0=Phaser.Utils.Objects.GetValue,aF=Phaser.Geom.Polygon.Earcut;class Cl extends sF{constructor(t,e,f,i,n,h,r,a){var l,o,u;if(rF(e)){var v=e;e=v.x,f=v.y,i=v.width,n=v.height,h=v.radius,r=v.color,a=v.alpha,l=v.strokeColor,o=v.strokeAlpha,u=v.strokeWidth}e===void 0&&(e=0),f===void 0&&(f=0),h===void 0&&(h=0);var d=new Wy;super(t,"rexRoundRectangleShape",d);var c=d0(h,"radius",h);d.setTo(0,0,i,n,c);var p=d0(h,"iteration",void 0);this.setIteration(p),this.setPosition(e,f),r!==void 0&&this.setFillStyle(r,a),l!==void 0&&(u===void 0&&(u=2),this.setStrokeStyle(u,l,o)),this.updateDisplayOrigin(),this.dirty=!0}updateData(){var t=this.geom,e=this.pathData;e.length=0;var f=t.cornerRadius,i,n=this.iteration+1;if(i=f.br,Th(i)){var h=t.width-i.x,r=t.height-i.y;Jr(h,r,i.x,i.y,0,90,!1,n,e)}else Zr(t.width,t.height,e);if(i=f.bl,Th(i)){var h=i.x,r=t.height-i.y;Jr(h,r,i.x,i.y,90,180,!1,n,e)}else Zr(0,t.height,e);if(i=f.tl,Th(i)){var h=i.x,r=i.y;Jr(h,r,i.x,i.y,180,270,!1,n,e)}else Zr(0,0,e);if(i=f.tr,Th(i)){var h=t.width-i.x,r=i.y;Jr(h,r,i.x,i.y,270,360,!1,n,e)}else Zr(t.width,0,e);return e.push(e[0],e[1]),this.pathIndexes=aF(e),this}get width(){return this.geom.width}set width(t){this.resize(t,this.height)}get height(){return this.geom.height}set height(t){this.resize(this.width,t)}setSize(t,e){if(e===void 0&&(e=t),this.geom.width===t&&this.geom.height===e)return this;this.geom.setSize(t,e),this.updateDisplayOrigin(),this.dirty=!0;var f=this.input;return f&&!f.customHitArea&&(f.hitArea.width=t,f.hitArea.height=e),this}resize(t,e){return this.setSize(t,e),this}get iteration(){return this._iteration}set iteration(t){if(this._iteration===void 0){this._iteration=t;return}this._iteration!==t&&(this._iteration=t,this.dirty=!0)}setIteration(t){return t===void 0&&(t=6),this.iteration=t,this}get radius(){return this.geom.radius}set radius(t){this.geom.setRadius(t),this.updateDisplayOrigin(),this.dirty=!0}get radiusTL(){return this.geom.radiusTL}set radiusTL(t){this.geom.radiusTL=t,this.dirty=!0}get radiusTR(){return this.geom.radiusTR}set radiusTR(t){this.geom.radiusTR=t,this.dirty=!0}get radiusBL(){return this.geom.radiusBL}set radiusBL(t){this.geom.radiusBL=t,this.dirty=!0}get radiusBR(){return this.geom.radiusBR}set radiusBR(t){this.geom.radiusBR=t,this.dirty=!0}setRadius(t){return t===void 0&&(t=0),this.radius=t,this}setRadiusTL(t){return t===void 0&&(t=0),this.radiusTL=t,this}setRadiusTR(t){return t===void 0&&(t=0),this.radiusTR=t,this}setRadiusBL(t){return t===void 0&&(t=0),this.radiuBL=t,this}setRadiusBR(t){return t===void 0&&(t=0),this.radiusBR=t,this}get cornerRadius(){return this.geom.cornerRadius}set cornerRadius(t){this.radius=t}setCornerRadius(t){return this.setRadius(t)}}var Th=function(s){return s.x!==0&&s.y!==0};Object.assign(Cl.prototype,nF);xt.register("roundRectangle",function(s,t,e,f,i,n,h){var r=new Cl(this.scene,s,t,e,f,i,n,h);return this.scene.add.existing(r),r});Ct(window,"RexPlugins.UI.RoundRectangle",Cl);const oF=Phaser.Renderer.WebGL.Utils;var hF=function(s,t,e,f){if(t.dirty&&(t.updateTexture(),t.dirty=!1),!(t.width===0||t.height===0)){e.addToRenderList(t);var i=t.frame,n=i.width,h=i.height,r=oF.getTintAppendFloatAlpha,a=s.pipelines.set(t.pipeline,t),l=a.setTexture2D(i.glTexture,t);s.pipelines.preBatch(t),a.batchTexture(t,i.glTexture,n,h,t.x,t.y,n/t.resolution,h/t.resolution,t.scaleX,t.scaleY,t.rotation,t.flipX,t.flipY,t.scrollFactorX,t.scrollFactorY,t.displayOriginX,t.displayOriginY,0,0,n,h,r(t.tintTopLeft,e.alpha*t._alphaTL),r(t.tintTopRight,e.alpha*t._alphaTR),r(t.tintBottomLeft,e.alpha*t._alphaBL),r(t.tintBottomRight,e.alpha*t._alphaBR),t.tintFill,0,0,e,f,!1,l),s.pipelines.postBatch(t)}},lF=function(s,t,e,f){t.dirty&&(t.updateTexture(),t.dirty=!1),!(t.width===0||t.height===0)&&(e.addToRenderList(t),s.batchSprite(t,t.frame,e,f))},uF={renderWebGL:hF,renderCanvas:lF};const fF=Phaser.Display.Color;var dF={clear(){return this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.dirty=!0,this},fill(s){return this.context.fillStyle=s,this.context.fillRect(0,0,this.canvas.width,this.canvas.height),this.dirty=!0,this},loadFromURL(s,t){var e=this,f=new Image;return f.onload=function(){e.width!==f.width||e.height!==f.height?e.resize(f.width,f.height):e.clear(),e.context.drawImage(f,0,0),e.updateTexture(),t&&t(),f.onload=null,f.src="",f.remove()},f.src=s,this},loadFromURLPromise(s){var t=this;return new Promise(function(e,f){t.loadFromURL(s,e)})},drawFrame(s,t,e,f,i,n){var h=this.scene.sys.textures.getFrame(s,t);return h?(e===void 0&&(e=0),f===void 0&&(f=0),i===void 0&&(i=h.cutWidth),n===void 0&&(n=h.cutHeight),this.context.drawImage(h.source.image,h.cutX,h.cutY,h.cutWidth,h.cutHeight,e,f,i,n),this.dirty=!0,this):this},getDataURL(s,t){return this.canvas.toDataURL(s,t)},getPixel(s,t,e){e===void 0&&(e=new fF);var f=this.context.getImageData(s,t,1,1);return e.setTo(f.data[0],f.data[1],f.data[2],f.data[3]),e},setPixel(s,t,e,f,i,n){if(typeof e!="number"){var h=e;e=h.red,f=h.green,i=h.blue,n=h.alpha}n===void 0&&(n=e!==0||f!==0||i!==0?255:0);var r=this.context.createImageData(1,1);return r.data[0]=e,r.data[1]=f,r.data[2]=i,r.data[3]=n,this.context.putImageData(r,s,t),this.dirty=!0,this}},Hy=function(s,t,e,f,i,n,h){var r=s.sys.textures,a=s.renderer;f===void 0&&(f=0),i===void 0&&(i=0),n===void 0&&(n=t.width),h===void 0&&(h=t.height);var l;r.exists(e)?l=r.get(e):l=r.createCanvas(e,n,h);var o=l.getSourceImage();o.width!==n&&(o.width=n),o.height!==h&&(o.height=h);var u=o.getContext("2d");u.clearRect(0,0,n,h),u.drawImage(t,f,i,n,h),a.gl&&l&&a.canvasToTexture(o,l.source[0].glTexture,!0,0)},cF={updateTexture(s,t){s&&(t?s.call(t,this.canvas,this.context):s(this.canvas,this.context)),(this.canvas.width!==this.frame.width||this.canvas.height!==this.frame.height)&&this.frame.setSize(this.canvas.width,this.canvas.height),this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(this.canvas,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!1;var e=this.input;return e&&!e.customHitArea&&(e.hitArea.width=this.width,e.hitArea.height=this.height),this},generateTexture(s,t,e,f,i){var n=this.canvas;return f===void 0?f=n.width:f*=this.resolution,i===void 0?i=n.height:i*=this.resolution,Hy(this.scene,n,s,t,e,f,i),this},loadTexture(s,t){var e=this.scene.sys.textures.getFrame(s,t);return e?(this.width!==e.cutWidth||this.height!==e.cutHeight?this.setSize(e.cutWidth,e.cutHeight):this.clear(),this.drawFrame(s,t),this.dirty=!0,this):this}};const c0=Phaser.Display.Canvas.CanvasPool,vF=Phaser.GameObjects.GameObject;class Gn extends vF{constructor(t,e,f,i,n){e===void 0&&(e=0),f===void 0&&(f=0),i===void 0&&(i=1),n===void 0&&(n=1),super(t,"rexCanvas"),this.renderer=t.sys.game.renderer,this.resolution=1,this._width=i,this._height=n,i=Math.max(Math.ceil(i*this.resolution),1),n=Math.max(Math.ceil(n*this.resolution),1),this.canvas=c0.create(this,i,n),this.context=this.canvas.getContext("2d"),this.dirty=!1,this.setPosition(e,f),this.setOrigin(.5,.5),this.initPipeline(),this._crop=this.resetCropObject(),this.texture=t.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.dirty=!0,t.sys.game.events.on("contextrestored",this.onContextRestored,this)}onContextRestored(){this.dirty=!0}preDestroy(){this.scene.sys.game.events.off("contextrestored",this.onContextRestored,this),c0.remove(this.canvas),this.texture.destroy(),this.canvas=null,this.context=null}get width(){return this._width}set width(t){this.setSize(t,this._height)}get height(){return this._height}set height(t){this.setSize(this._width,t)}setSize(t,e){return this._width===t&&this._height===e?this:(this._width=t,this._height=e,this.updateDisplayOrigin(),t=Math.max(Math.ceil(t*this.resolution),1),e=Math.max(Math.ceil(e*this.resolution),1),this.canvas.width=t,this.canvas.height=e,this.frame.setSize(t,e),this.dirty=!0,this)}get displayWidth(){return this.scaleX*this._width}set displayWidth(t){this.scaleX=t/this._width}get displayHeight(){return this.scaleY*this._height}set displayHeight(t){this.scaleY=t/this._height}setDisplaySize(t,e){return this.displayWidth=t,this.displayHeight=e,this}getCanvas(t){return t||(this.dirty=!0),this.canvas}getContext(t){return t||(this.dirty=!0),this.context}needRedraw(){return this.dirty=!0,this}resize(t,e){return this.setSize(t,e),this}}const wi=Phaser.GameObjects.Components;Phaser.Class.mixin(Gn,[wi.Alpha,wi.BlendMode,wi.Crop,wi.Depth,wi.Flip,wi.GetBounds,wi.Mask,wi.Origin,wi.Pipeline,wi.ScrollFactor,wi.Tint,wi.Transform,wi.Visible,uF,dF,cF]);const pF=Phaser.Utils.String.Pad;var Wt=function(s,t,e){if(s==null)return s;switch(typeof s){case"string":return s;case"number":return`#${pF(Math.floor(s).toString(16),6,"0",1)}`;case"function":return s(t,e);case"object":return s.hasOwnProperty("r")?s.hasOwnProperty("a")?`rgba(${s.r},${s.g},${s.b},${s.a})`:`rgb(${s.r},${s.g},${s.b})`:s.hasOwnProperty("h")?s.hasOwnProperty("a")?`hsla(${s.h},${s.s},${s.l},${s.a})`:`hsl(${s.h},${s.s},${s.l})`:s;default:return s}};const Sl=Phaser.Math.DegToRad,v0=Sl(0),p0=Sl(90),g0=Sl(180),m0=Sl(270);var $y=function(s,t,e,f,i,n,h){var r=new Wy(t,e,f,i,n),a=r.minWidth,l=r.minHeight,o=f>=a?1:f/a,u=i>=l?1:i/l,v=r.cornerRadius,d,c,p,g,m;s.save(),s.beginPath(),s.translate(t,e),d=v.br,c=d.x*o,p=d.y*u,g=f-c,m=i-p,s.moveTo(f,m),c>0&&p>0?Ch(s,g,m,c,p,v0,p0,h):(s.lineTo(f,i),s.lineTo(g,i)),d=v.bl,c=d.x*o,p=d.y*u,g=c,m=i-p,s.lineTo(c,i),c>0&&p>0?Ch(s,g,m,c,p,p0,g0,h):(s.lineTo(0,i),s.lineTo(0,m)),d=v.tl,c=d.x*o,p=d.y*u,g=c,m=p,s.lineTo(0,m),c>0&&p>0?Ch(s,g,m,c,p,g0,m0,h):(s.lineTo(0,0),s.lineTo(g,0)),d=v.tr,c=d.x*o,p=d.y*u,g=f-c,m=p,s.lineTo(g,0),c>0&&p>0?Ch(s,g,m,c,p,m0,v0,h):(s.lineTo(f,0),s.lineTo(f,m)),s.closePath(),s.restore()},Ch=function(s,t,e,f,i,n,h,r){if(r==null)s.ellipse(t,e,f,i,0,n,h);else{r+=1;for(var a,l,o,u=(h-n)/r,v=0;v<=r;v++)o=n+u*v,a=t+f*Math.cos(o),l=e+i*Math.sin(o),s.lineTo(a,l)}},gF=function(s,t,e,f,i,n,h,r,a,l,o,u,v){if($y(t,e,f,i,n,h,v),r!=null){if(o!=null){var d;u?d=t.createLinearGradient(0,0,i,0):d=t.createLinearGradient(0,0,0,n),d.addColorStop(0,r),d.addColorStop(1,o),r=d}t.fillStyle=r,t.fill()}a!=null&&l>0&&(t.strokeStyle=a,t.lineWidth=l,t.stroke())},sc=function(s,t,e,f,i,n,h,r){if(!(t==null&&e==null)){var a=s.canvas.width,l=s.canvas.height;e==null&&(f=0);var o=f/2;a-=f,l-=f,gF(s.canvas,s.context,o,o,a,l,i,t,e,f,n,h,r)}},mF=function(){sc(this,this.fillStyle,this.strokeStyle,this.lineWidth,this.radius,this.fillColor2,this.isHorizontalGradient,this.iteration)};const x0=Phaser.Utils.Objects.GetValue;class Ky extends Gn{constructor(t,e,f,i,n,h,r,a,l,o,u){super(t,e,f,i,n),this.type="rexRoundRectangleCanvas";var v=x0(h,"radius",h),d=x0(h,"iteration",void 0);this.setRadius(v),this.setIteration(d),this.setFillStyle(r,o,u),this.setStrokeStyle(a,l)}get radius(){return this._radius}set radius(t){this.dirty|=this._radius!=t,this._radius=t}setRadius(t){return this.radius=t,this}get iteration(){return this._iteration}set iteration(t){this.dirty|=this._iteration!=t,this._iteration=t}setIteration(t){return this.iteration=t,this}get fillStyle(){return this._fillStyle}set fillStyle(t){t=Wt(t,this.canvas,this.context),this.dirty|=this._fillStyle!=t,this._fillStyle=t}get fillColor2(){return this._fillColor2}set fillColor2(t){t=Wt(t,this.canvas,this.context),this.dirty|=this._fillColor2!=t,this._fillColor2=t}get isHorizontalGradient(){return this._fillStyle}set isHorizontalGradient(t){this.dirty|=this._isHorizontalGradient!=t,this._isHorizontalGradient=t}setFillStyle(t,e,f){return f===void 0&&(f=!0),this.fillStyle=t,this.fillColor2=e,this.isHorizontalGradient=f,this}get strokeStyle(){return this._strokeStyle}set strokeStyle(t){t=Wt(t,this.canvas,this.context),this.dirty|=this._strokeStyle!=t,this._strokeStyle=t}get lineWidth(){return this._lineWidth}set lineWidth(t){this.dirty|=this._lineWidth!=t,this._lineWidth=t}setStrokeStyle(t,e){return this.strokeStyle=t,this.lineWidth=e,this}updateTexture(){return this.clear(),mF.call(this),super.updateTexture(),this}}xt.register("roundRectangleCanvas",function(s,t,e,f,i,n,h,r,a,l){var o=new Ky(this.scene,s,t,e,f,i,n,h,r,a,l);return this.scene.add.existing(o),o});Ct(window,"RexPlugins.UI.RoundRectangleCanvas",Ky);/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var xF=Phaser.Renderer.WebGL.Utils,yF=function(s,t,e,f){if(!(t.width===0||t.height===0)){e.addToRenderList(t);var i=t.frame,n=i.width,h=i.height,r=xF.getTintAppendFloatAlpha,a=s.pipelines.set(t.pipeline,t),l=a.setTexture2D(i.glTexture,t);s.pipelines.preBatch(t),a.batchTexture(t,i.glTexture,n,h,t.x,t.y,n/t.style.resolution,h/t.style.resolution,t.scaleX,t.scaleY,t.rotation,t.flipX,t.flipY,t.scrollFactorX,t.scrollFactorY,t.displayOriginX,t.displayOriginY,0,0,n,h,r(t.tintTopLeft,e.alpha*t._alphaTL),r(t.tintTopRight,e.alpha*t._alphaTR),r(t.tintBottomLeft,e.alpha*t._alphaBL),r(t.tintBottomRight,e.alpha*t._alphaBR),t.tintFill,0,0,e,f,!1,l),s.pipelines.postBatch(t)}};/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var TF=function(s,t,e,f){t.width===0||t.height===0||(e.addToRenderList(t),s.batchSprite(t,t.frame,e,f))},CF={renderWebGL:yF,renderCanvas:TF};const Tf=Phaser.Display.Canvas.CanvasPool;var SF=function(s,t,e){e===void 0&&(e={});var f=Tf.create(this),i=f.getContext("2d");s.syncFont(f,i);var n=i.measureText(t),h=Math.ceil(n.width*s.baselineX),r=h,a=2*r;if(r=r*s.baselineY|0,f.width=h,f.height=a,i.fillStyle="#f00",i.fillRect(0,0,h,a),i.font=s._font,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(s.testString,0,r),e.left=0,h===0||a===0||!i.getImageData(0,0,h,a))return Tf.remove(f),e;for(var l=i.getImageData(0,0,h,a).data,o=!1,u=0;u<h;u++){for(var v=0;v<a;v++){var d=(v*h+u)*4;if(l[d]!==255){e.left=u,o=!0;break}}if(o)break}return Tf.remove(f),e};const EF=Phaser.GameObjects.GameObject;class ky extends EF{setStyle(t){return this.style.setStyle(t)}setFont(t){return this.style.setFont(t)}setFontFamily(t){return this.style.setFontFamily(t)}setFontSize(t){return this.style.setFontSize(t)}setFontStyle(t){return this.style.setFontStyle(t)}setTestString(t){return this.style.setTestString(t)}setFixedSize(t,e){return this.style.setFixedSize(t,e)}setBackgroundColor(t,e,f){return this.style.setBackgroundColor(t,e,f)}setBackgroundStrokeColor(t,e){return this.style.setBackgroundStrokeColor(t,e)}setBackgroundCornerRadius(t,e){return this.style.setBackgroundCornerRadius(t,e)}setFill(t){return this.style.setFill(t)}setColor(t){return this.style.setColor(t)}setStroke(t,e){return this.style.setStroke(t,e)}setShadow(t,e,f,i,n,h){return this.style.setShadow(t,e,f,i,n,h)}setShadowOffset(t,e){return this.style.setShadowOffset(t,e)}setShadowColor(t){return this.style.setShadowColor(t)}setShadowBlur(t){return this.style.setShadowBlur(t)}setShadowStroke(t){return this.style.setShadowStroke(t)}setShadowFill(t){return this.style.setShadowFill(t)}setWrapMode(t){return this.style.setWrapMode(t)}setWrapWidth(t){return this.style.setWrapWidth(t)}setWordWrapWidth(t){return this.style.setWrapWidth(t)}setAlign(t){return this.style.setHAlign(t)}setHAlign(t){return this.style.setHAlign(t)}setVAlign(t){return this.style.setVAlign(t)}setLineSpacing(t){return this.style.setLineSpacing(t)}set lineSpacing(t){this.setLineSpacing(t)}get lineSpacing(){return this.style.lineSpacing}setXOffset(t){return this.style.setXOffset(t)}setMaxLines(t){return this.style.setMaxLines(t)}setResolution(t){return this.style.setResolution(t)}getTextMetrics(){return this.style.getTextMetrics()}setTextMetrics(t,e){return this.style.setTextMetrics(t,e)}measureTextMargins(t,e){return SF(this.style,t,e)}}const fi=Phaser.GameObjects.Components;Phaser.Class.mixin(ky,[fi.Alpha,fi.BlendMode,fi.ComputedSize,fi.Crop,fi.Depth,fi.Flip,fi.GetBounds,fi.Mask,fi.Origin,fi.Pipeline,fi.ScrollFactor,fi.Tint,fi.Transform,fi.Visible,CF]);var PF={backgroundColor:["backgroundColor",null,Wt],backgroundColor2:["backgroundColor2",null,Wt],backgroundHorizontalGradient:["backgroundHorizontalGradient",!0,null],backgroundStrokeColor:["backgroundStrokeColor",null,Wt],backgroundStrokeLineWidth:["backgroundStrokeLineWidth",2,null],backgroundCornerRadius:["backgroundCornerRadius",0,null],backgroundCornerIteration:["backgroundCornerIteration",null,null],fontFamily:["fontFamily","Courier",null],fontSize:["fontSize","16px",null],fontStyle:["fontStyle","",null],color:["color","#fff",Wt],stroke:["stroke","#fff",Wt],strokeThickness:["strokeThickness",0,null],shadowOffsetX:["shadow.offsetX",0,null],shadowOffsetY:["shadow.offsetY",0,null],shadowColor:["shadow.color","#000",Wt],shadowBlur:["shadow.blur",0,null],shadowStroke:["shadow.stroke",!1,null],shadowFill:["shadow.fill",!1,null],underlineColor:["underline.color","#000",Wt],underlineThickness:["underline.thickness",0,null],underlineOffset:["underline.offset",0,null],halign:["halign","left",null],valign:["valign","top",null],maxLines:["maxLines",0,null],fixedWidth:["fixedWidth",0,null],fixedHeight:["fixedHeight",0,null],resolution:["resolution",0,null],lineSpacing:["lineSpacing",0,null],xOffset:["xOffset",0,null],rtl:["rtl",!1,null],testString:["testString","|M\xC3\u2030qgy",null],baselineX:["baselineX",1.2,null],baselineY:["baselineY",1.4,null],wrapMode:["wrap.mode",0,null],wrapWidth:["wrap.width",0,null],wrapCallback:["wrap.callback",null],wrapCallbackScope:["wrap.callbackScope",null]};/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */const Sh=Phaser.Display.Canvas.CanvasPool;var y0=function(s){var t=Sh.create(this),e=t.getContext("2d");s.syncFont(t,e);var f=e.measureText(s.testString);if("actualBoundingBoxAscent"in f){var i=f.actualBoundingBoxAscent,n=f.actualBoundingBoxDescent,l={ascent:i,descent:n,fontSize:i+n};return Sh.remove(t),l}var h=Math.ceil(f.width*s.baselineX),r=h,a=2*r;r=r*s.baselineY|0,t.width=h,t.height=a,e.fillStyle="#f00",e.fillRect(0,0,h,a),e.font=s._font,e.textBaseline="alphabetic",e.fillStyle="#000",e.fillText(s.testString,0,r);var l={ascent:0,descent:0,fontSize:0};if(!e.getImageData(0,0,h,a))return l.ascent=r,l.descent=r+6,l.fontSize=l.ascent+l.descent,Sh.remove(t),l;var o=e.getImageData(0,0,h,a).data,u=o.length,v=h*4,d,c,p=0,g=!1;for(d=0;d<r;d++){for(c=0;c<v;c+=4)if(o[p+c]!==255){g=!0;break}if(!g)p+=v;else break}for(l.ascent=r-d,p=u-v,g=!1,d=a;d>r;d--){for(c=0;c<v;c+=4)if(o[p+c]!==255){g=!0;break}if(!g)p-=v;else break}return l.descent=d-r,l.fontSize=l.ascent+l.descent,Sh.remove(t),l},we={NO_NEWLINE:0,RAW_NEWLINE:1,WRAPPED_NEWLINE:2,NO_WRAP:0,WORD_WRAP:1,CHAR_WRAP:2,SPLITREGEXP:/(?:\r\n|\r|\n)/};const MF=Phaser.Utils.Objects.GetAdvancedValue,Ii=Phaser.Utils.Objects.GetValue;class rc{constructor(t,e,f){this.parent=t,f===void 0&&(f=PF),this.propertyMap=f,this.backgroundColor,this.backgroundColor2,this.backgroundHorizontalGradient,this.backgroundStrokeColor,this.backgroundStrokeLineWidth,this.backgroundCornerRadius,this.backgroundCornerIteration,this.fontFamily,this.fontSize,this.fontStyle,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.underlineColor,this.underlineThickness,this.underlineOffset,this.halign,this.valign,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.lineSpacing,this.xOffset,this.rtl,this.testString,this.baselineX,this.baselineY,this.wrapMode,this.wrapWidth,this.wrapCallback,this.wrapCallbackScope,this._font,this.setStyle(e,!1,!0)}get isWrapFitMode(){return this.fixedWidth>0&&this.wrapMode!==we.NO_WRAP&&this.wrapWidth===0}setStyle(t,e,f){if(e===void 0&&(e=!0),f===void 0&&(f=!1),t&&t.hasOwnProperty("wrap")){var i=t.wrap;if(i.hasOwnProperty("mode")){var n=i.mode;typeof n=="string"&&(i.mode=T0[n])}else i.hasOwnProperty("width")&&(i.mode=1)}t&&t.rtl&&f&&!t.hasOwnProperty("halign")&&(t.halign="right"),t&&t.hasOwnProperty("fontSize")&&typeof t.fontSize=="number"&&(t.fontSize=t.fontSize.toString()+"px");var h=this.propertyMap;for(var r in h){var a=h[r],l=a[0],o=f?a[1]:this[r],u=a[2];if(r==="wrapCallback"||r==="wrapCallbackScope")this[r]=Ii(t,l,o);else{var v=MF(t,l,o);u&&(v=u(v)),this[r]=v}}var d=Ii(t,"font",null);d===null?this._font=this.fontStyle+" "+this.fontSize+" "+this.fontFamily:this._font=d;var c=Ii(t,"fill",null);c!==null&&(this.color=Wt(c));var p=Ii(t,"metrics",!1);return p?this.metrics={ascent:Ii(p,"ascent",0),descent:Ii(p,"descent",0),fontSize:Ii(p,"fontSize",0)}:(e||!this.metrics)&&(this.metrics=y0(this)),e?this.parent.updateText():this.parent}syncFont(t,e){e.font=this._font}syncStyle(t,e){e.textBaseline="alphabetic",e.fillStyle=this.color,e.strokeStyle=this.stroke,e.lineWidth=this.strokeThickness,e.lineCap="round",e.lineJoin="round"}syncShadow(t,e){e?(t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur):(t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowColor=0,t.shadowBlur=0)}update(t){return t&&(this._font=`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`.trim(),this.metrics=y0(this)),this.parent.updateText(t)}buildFont(){var t=`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`.trim();return t!==this._font&&(this._font=t),this}setFont(t){return typeof t=="string"?(this.fontFamily=t,this.fontSize="",this.fontStyle=""):(this.fontFamily=Ii(t,"fontFamily","Courier"),this.fontSize=Ii(t,"fontSize","16px"),this.fontStyle=Ii(t,"fontStyle","")),this.update(!0)}setFontFamily(t){return this.fontFamily=t,this.update(!0)}setFontStyle(t){return this.fontStyle=t,this.update(!0)}setFontSize(t){return typeof t=="number"&&(t=t.toString()+"px"),this.fontSize=t,this.update(!0)}setTestString(t){return this.testString=t,this.update(!0)}setFixedSize(t,e){return this.fixedWidth=t,this.fixedHeight=e,t&&(this.parent.width=t),e&&(this.parent.height=e),this.update(this.isWrapFitMode)}setResolution(t){return this.resolution=t,this.update(!1)}setLineSpacing(t){return this.lineSpacing=t,this.update(!1)}setXOffset(t){return this.xOffset=t,this.update(!1)}setBackgroundColor(t,e,f){return f===void 0&&(f=!0),this.backgroundColor=Wt(t,this.parent.canvas,this.parent.context),this.backgroundColor2=Wt(e,this.parent.canvas,this.parent.context),this.backgroundHorizontalGradient=f,this.update(!1)}setBackgroundStrokeColor(t,e){return this.backgroundStrokeColor=Wt(t,this.parent.canvas,this.parent.context),this.backgroundStrokeLineWidth=e,this.update(!1)}setBackgroundCornerRadius(t,e){return this.backgroundCornerRadius=t,this.backgroundCornerIteration=e,this.update(!1)}setFill(t){return this.color=Wt(t,this.parent.canvas,this.parent.context),this.update(!1)}setColor(t){return this.color=Wt(t,this.parent.canvas,this.parent.context),this.update(!1)}setStroke(t,e){return t===void 0?this.strokeThickness=0:(e===void 0&&(e=this.strokeThickness),this.stroke=Wt(t,this.parent.canvas,this.parent.context),this.strokeThickness=e),this.update(!0)}setShadow(t,e,f,i,n,h){return t===void 0&&(t=0),e===void 0&&(e=0),f===void 0&&(f="#000"),i===void 0&&(i=0),n===void 0&&(n=!1),h===void 0&&(h=!0),this.shadowOffsetX=t,this.shadowOffsetY=e,this.shadowColor=Wt(f,this.parent.canvas,this.parent.context),this.shadowBlur=i,this.shadowStroke=n,this.shadowFill=h,this.update(!1)}setShadowOffset(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),this.shadowOffsetX=t,this.shadowOffsetY=e,this.update(!1)}setShadowColor(t){return t===void 0&&(t="#000"),this.shadowColor=Wt(t,this.parent.canvas,this.parent.context),this.update(!1)}setShadowBlur(t){return t===void 0&&(t=0),this.shadowBlur=t,this.update(!1)}setShadowStroke(t){return this.shadowStroke=t,this.update(!1)}setShadowFill(t){return this.shadowFill=t,this.update(!1)}setUnderline(t,e,f){return t===void 0&&(t="#000"),e===void 0&&(e=0),f===void 0&&(f=0),this.underlineColor=Wt(t,this.parent.canvas,this.parent.context),this.underlineThickness=e,this.underlineOffset=f,this.update(!1)}setUnderlineColor(t){return t===void 0&&(t="#000"),this.underlineColor=Wt(t,this.parent.canvas,this.parent.context),this.update(!1)}setUnderlineThickness(t){return t===void 0&&(t=0),this.underlineThickness=t,this.update(!1)}setUnderlineOffset(t){return t===void 0&&(t=0),this.underlineOffset=t,this.update(!1)}setWrapMode(t){return typeof t=="string"&&(t=T0[t.toLowerCase()]||0),this.wrapMode=t,this.update(!0)}setWrapWidth(t){return this.wrapWidth=t,this.update(!1)}setAlign(t,e){return t===void 0&&(t="left"),e===void 0&&(e="top"),this.halign=t,this.valign=e,this.update(!1)}setHAlign(t){return t===void 0&&(t="left"),this.halign=t,this.update(!1)}setVAlign(t){return t===void 0&&(t="top"),this.valign=t,this.update(!1)}setMaxLines(t){return t===void 0&&(t=0),this.maxLines=t,this.update(!1)}getTextMetrics(){var t=this.metrics;return{ascent:t.ascent,descent:t.descent,fontSize:t.fontSize}}setTextMetrics(t,e){return this.metrics.ascent=t.ascent,this.metrics.descent=t.descent,this.metrics.fontSize=t.fontSize,e&&(typeof e=="string"?(this.fontFamily=e,this.fontSize="",this.fontStyle=""):(this.fontFamily=Ii(e,"fontFamily",this.fontFamily),this.fontSize=Ii(e,"fontSize",this.fontSize),this.fontStyle=Ii(e,"fontStyle",this.fontStyle))),this.parent.updateText(!0)}get lineHeight(){return this.metrics.fontSize+this.strokeThickness+this.lineSpacing}toJSON(){var t={},e=this.propertyMap;for(var f in e)t[f]=this[f];return t.metrics=this.getTextMetrics(),t}destroy(){this.parent=void 0}}const T0={none:we.NO_WRAP,word:we.WORD_WRAP,char:we.CHAR_WRAP,character:we.CHAR_WRAP};var AF={draw(s,t,e,f){var i=this.penManager;this.hitAreaManager.clear();var n=this.context;n.save();var h=this.defaultStyle;this.clear(),sc(this,h.backgroundColor,h.backgroundStrokeColor,h.backgroundStrokeLineWidth,h.backgroundCornerRadius,h.backgroundColor2,h.backgroundHorizontalGradient,h.backgroundCornerIteration),s+=this.startXOffset,t+=this.startYOffset;var r=h.halign,a=h.valign,l,o=h.lineHeight,u=i.lines,v=u.length,d=h.maxLines,c,p,g;d>0&&v>d?(c=d,a==="center"?p=Math.floor((v-c)/2):a==="bottom"?p=v-c:p=0):(c=v,p=0),g=p+c;var m,x,y=this.rtl,T=y?this.parent.width:void 0;a==="center"?x=Math.max((f-c*o)/2,0):a==="bottom"?x=Math.max(f-c*o-2,0):x=0,x+=t;for(var C=p;C<g;C++)if(l=i.getLineWidth(C),l!==0){for(var S=u[C],E=S.length,M=r,O=0;O<E;O++){var L=S[O].prop.align;if(L!==void 0){M=L;break}}M==="center"?m=(e-l)/2:M==="right"?m=y?0:e-l:m=y?e-l:0,m+=s;for(var O=0;O<E;O++)this.drawPen(S[O],m,x,T)}n.restore()},drawPen(s,t,e,f){t+=s.x,e+=s.y+(s.prop.y||0),f!==void 0&&(t=f-t);var i=this.canvas,n=this.context;n.save();var h=this.parser.propToContextStyle(this.defaultStyle,s.prop);h.buildFont(),h.syncFont(i,n),h.syncStyle(i,n),h.underlineThickness>0&&s.width>0&&this.drawUnderline(t,e,s.width,h),s.isTextPen&&this.drawText(t,e,s.text,h),s.isImagePen&&this.drawImage(t,e,s.prop.img,h),n.restore(),s.hasAreaMarker&&s.width>0&&this.hitAreaManager.add(s.prop.area,t,e-this.startYOffset,s.width,this.defaultStyle.lineHeight)},clear(){var s=this.canvas;this.context.clearRect(0,0,s.width,s.height)},drawUnderline(s,t,e,f){t+=f.underlineOffset-f.underlineThickness/2,this.autoRound&&(s=Math.round(s),t=Math.round(t));var i=this.context,n=i.lineCap;i.lineCap="butt",i.strokeStyle=f.underlineColor,i.lineWidth=f.underlineThickness,i.beginPath(),i.moveTo(s,t),i.lineTo(s+e,t),i.stroke(),i.lineCap=n},drawText(s,t,e,f){this.autoRound&&(s=Math.round(s),t=Math.round(t));var i=this.context;f.stroke&&f.stroke!=="none"&&f.strokeThickness>0&&(f.syncShadow(i,f.shadowStroke),i.strokeText(e,s,t)),f.color&&f.color!=="none"&&(f.syncShadow(i,f.shadowFill),i.fillText(e,s,t))},drawImage(s,t,e,f){t-=this.startYOffset,this.parent.imageManager.draw(e,this.context,s,t,this.autoRound)}};const Js=Phaser.Utils.Objects.GetValue,OF=we.NO_NEWLINE,C0=we.RAW_NEWLINE;class RF{constructor(t){this.prop={},this.resetFromJSON(t)}resetFromJSON(t){this.text=Js(t,"text",""),this.x=Js(t,"x",0),this.y=Js(t,"y",0),this.width=Js(t,"width",0);var e=Js(t,"prop",null);e===null&&(e={}),this.prop=e,this.newLineMode=Js(t,"newLineMode",0),this.startIndex=Js(t,"startIndex",0)}get plainText(){var t=this.text;return this.newLineMode===C0&&(t+=`
`),t}get wrapText(){var t=this.text;return this.newLineMode!==OF&&(t+=`
`),t}get rawTextLength(){var t=this.text.length;return this.newLineMode===C0&&(t+=1),t}get endIndex(){return this.startIndex+this.rawTextLength}get lastX(){return this.x+this.width}get isTextPen(){return this.text!==""}get isImagePen(){return!!this.prop.img}get hasAreaMarker(){return!!this.prop.area}}var lr=function(s,t){var e=Array.isArray(s);if(t===void 0?t=e?[]:{}:Ls(t),e){t.length=s.length;for(var f=0,i=s.length;f<i;f++)t[f]=s[f]}else for(var n in s)t[n]=s[n];return t};const S0=Phaser.Utils.Objects.GetFastValue,E0=we.NO_NEWLINE,LF=we.WRAPPED_NEWLINE;class ac{constructor(t){this.pens=[],this.lines=[],this.maxLinesWidth=void 0,this.pensPool=t.pensPool,this.linesPool=t.linesPool,this.tagToText=S0(t,"tagToText",gi),this.tagToTextScope=S0(t,"tagToTextScope",void 0)}destroy(){this.clear(),this.tagToText=void 0,this.tagToTextScope=void 0}clear(){for(var t=0,e=this.lines.length;t<e;t++)this.lines[t].length=0;this.pensPool.pushMultiple(this.pens),this.linesPool.pushMultiple(this.lines),this.maxLinesWidth=void 0}addTextPen(t,e,f,i,n,h){var r=this.pensPool.pop();return r==null&&(r=new RF),Qs.text=t,Qs.x=e,Qs.y=f,Qs.width=i,Qs.prop=n,Qs.newLineMode=h,r.resetFromJSON(Qs),this.addPen(r),this}addImagePen(t,e,f,i){return this.addTextPen("",t,e,f,i,E0),this}addNewLinePen(){var t=this.lastPen,e=t?t.lastX:0,f=t?t.y:0,i=t?lr(t.prop):null;return this.addTextPen("",e,f,0,i,LF),this}addPen(t){var e=this.lastPen;e==null?t.startIndex=0:t.startIndex=e.endIndex,this.pens.push(t);var f=this.lastLine;f==null&&(f=this.linesPool.pop()||[],this.lines.push(f)),f.push(t),t.newLineMode!==E0&&(f=this.linesPool.pop()||[],this.lines.push(f)),this.maxLinesWidth=void 0}clone(t){t==null&&(t=new ac),t.clear();for(var e=0,f=this.lines.length;e<f;e++)for(var i=this.lines[e],n=0,h=i.length;n<h;n++){var r=i[n];t.addPen(r.text,r.x,r.y,r.width,lr(r.prop),r.newLineMode)}return t}get lastPen(){return this.pens[this.pens.length-1]}get lastLine(){return this.lines[this.lines.length-1]}getLineStartIndex(t){if(t>=this.lines.length)return this.getLineEndIndex(t);var e=this.lines[t];return e&&e[0]?e[0].startIndex:0}getLineEndIndex(t){t>=this.lines.length&&(t=this.lines.length-1);var e,f=!1,i;for(e=t;e>=0&&(i=this.lines[e],f=i!=null&&i.length>0,!f);e--);if(!f)return 0;var n=i[i.length-1];return n.endIndex}getLineWidth(t){var e=this.lines[t];if(!e)return 0;var f=e[e.length-1];if(f==null)return 0;var i=f.lastX;return i}getMaxLineWidth(){if(this.maxLinesWidth!==void 0)return this.maxLinesWidth;for(var t,e=0,f=0,i=this.lines.length;f<i;f++)t=this.getLineWidth(f),t>e&&(e=t);return this.maxLinesWidth=e,e}getLineWidths(){for(var t=[],e=0,f=this.lines.length;e<f;e++)t.push(this.getLineWidth(e));return t}get linesCount(){return this.lines.length}get plainText(){for(var t="",e=this.pens,f=0,i=e.length;f<i;f++)t+=e[f].plainText;return t}get rawTextLength(){for(var t=0,e=this.pens,f=0,i=this.pens.length;f<i;f++)t+=e[f].rawTextLength;return t}getSliceTagText(t,e,f){if(t===void 0&&(t=0),e===void 0){var i=this.lastPen;if(i==null)return"";e=i.endIndex}f===void 0&&(f=!1);for(var n="",h,r,a,l,o,u,v,d=0,c=this.pens.length;d<c&&(h=this.pens[d],l=h.endIndex,!(!(l<=t)&&(h=this.pens[d],r=f?h.wrapText:h.plainText,u=h.prop,a=h.startIndex,o=a>=t&&l<=e,o||(r=r.substring(t-a,e-a)),this.tagToTextScope?n+=this.tagToText.call(this.tagToTextScope,r,u,v):n+=this.tagToText(r,u,v),v=u,l>=e)));d++);return n}get length(){return this.lines.length}set length(t){this.clear()}}var Qs={};const FF=Phaser.Geom.Rectangle;var P0=new Is;class wF{constructor(){this.hitAreas=[]}destroy(){this.clear()}clear(){return P0.pushMultiple(this.hitAreas),this}add(t,e,f,i,n){var h=P0.pop();return h===null?h=new FF(e,f,i,n):h.setTo(e,f,i,n),h.key=t,this.hitAreas.push(h),this}getFirst(t,e){for(var f=0,i=this.hitAreas.length;f<i;f++){var n=this.hitAreas[f];if(n.contains(t,e))return n}return null}drawBounds(t,e,f){e===void 0&&(e=16777215),f&&t.save().scaleCanvas(f.scaleX,f.scaleY).rotateCanvas(f.rotation).translateCanvas(f.x,f.y);for(var i=0,n=this.hitAreas.length;i<n;i++){var h=this.hitAreas[i];t.lineStyle(1,e).strokeRect(h.x,h.y,h.width,h.height)}return f&&t.restore(),this}}var IF=function(){this.parent.on("pointerdown",DF,this).on("pointerup",BF,this).on("pointermove",Cf,this).on("pointerover",Cf,this).on("pointerout",function(s,t){Cf.call(this,s,null,null,t)},this)},DF=function(s,t,e,f){var i=this.hitAreaManager.getFirst(t,e);i!==null&&_a.call(this,"areadown",i.key,s,t,e,f)},BF=function(s,t,e,f){var i=this.hitAreaManager.getFirst(t,e);i!==null&&_a.call(this,"areaup",i.key,s,t,e,f)},Cf=function(s,t,e,f){if(t===null){this.lastHitAreaKey!==null&&_a.call(this,"areaout",this.lastHitAreaKey,s,t,e,f),this.lastHitAreaKey=null;return}var i=this.hitAreaManager.getFirst(t,e),n=i?i.key:null;this.lastHitAreaKey!==n&&(this.lastHitAreaKey!==null&&_a.call(this,"areaout",this.lastHitAreaKey,s,t,e,f),n!==null&&_a.call(this,"areaover",n,s,t,e,f),this.lastHitAreaKey=n)},_a=function(s,t,e,f,i,n){this.parent.emit(`${s}-${t}`,e,f,i,n),this.parent.emit(s,t,e,f,i,n)};const bF=we.NO_NEWLINE,GF=we.RAW_NEWLINE,Sf=we.WRAPPED_NEWLINE,M0=we.NO_WRAP,NF=we.WORD_WRAP,YF=we.CHAR_WRAP,zF=we.SPLITREGEXP;var Zy=function(s,t,e,f,i,n){f<=0&&(e=M0);var h=[];if(!s||!s.length)return h;for(var r=e===M0,a=e===NF,l=s.split(zF),o,u,v,d=0,c=l.length;d<c;d++){if(o=l[d],v=d===c-1?bF:GF,r){var p=t(o);h.push(n.getLine(o,p,v));continue}if(u=d===0?f-i:f,o.length<=100){var p=t(o);if(p<=u){h.push(n.getLine(o,p,v));continue}}var g,m;a?(g=o.split(" "),m=g[g.length-1]==="",m&&(g.length-=1)):g=o;for(var x,y,T,C="",S=0,E,M=a?t(" "):void 0,O=0,L=g.length;O<L;O++){if(x=g[O],y=t(x),T=O===L-1,a&&(!T||m)&&(x+=" ",y+=M),a&&y>f){C!==""?h.push(n.getLine(C,S,Sf)):O===0&&i>0&&h.push(n.getLine("",0,Sf)),h.push(...Zy(x,t,YF,f,0,n));var R=h.pop();C=R.text,S=R.width,n.freeLine(R),C===" "&&(C="",S=0);continue}E=S+y,E>u?(h.push(n.getLine(C,S,Sf)),C=x,S=y,u=f):(C+=x,S=E),T&&h.push(n.getLine(C,S,v))}}return h};const Ef=Phaser.Utils.Objects.GetValue,VF=we.NO_WRAP,UF=we.NO_NEWLINE;class Jy{constructor(t){this.parent=t.parent,this.context=Ef(t,"context",null),this.canvas=this.context.canvas,this.parser=Ef(t,"parser",null),this.defaultStyle=Ef(t,"style",null),this.autoRound=!0,this.pensPool=t.pensPool,this.linesPool=t.linesPool,this.wrapTextLinesPool=t.wrapTextLinesPool,this.penManager=this.newPenManager(),this._tmpPenManager=null,this.hitAreaManager=new wF,this.lastHitAreaKey=null;var e=this.context;this.getTextWidth=function(f){return e.measureText(f).width}}destroy(){this.context=void 0,this.canvas=void 0,this.parser=void 0,this.defaultStyle=void 0,this.penManager&&(this.penManager.destroy(),this.penManager=void 0),this._tmpPenManager&&(this._tmpPenManager.destroy(),this._tmpPenManager=void 0),this.hitAreaManager&&(this.hitAreaManager.destroy(),this.hitAreaManager=void 0)}updatePenManager(t,e,f,i,n){if(n===void 0&&(n=this.penManager),n.clear(),t==="")return n;var h=this.parent.style;if(h.isWrapFitMode){var r=this.parent.padding;f=h.fixedWidth-r.left-r.right}for(var a=this.canvas,l=this.context,o=function(N){return l.measureText(N).width},u=0,v=0,d=h.wrapCallback,c=h.wrapCallbackScope,p=!0,g,m,x,y=this.parser.splitText(t),T,C,S=this.wrapTextLinesPool,E=0,M=y.length;E<M;E++)if(T=this.parser.tagTextToProp(y[E],m),g=T.plainText,m=T.prop,m.img){var O=this.imageManager.getOuterWidth(m.img);f>0&&e!==VF&&f<u+O&&(n.addNewLinePen(),v+=i,u=0),n.addImagePen(u,v,O,lr(m)),u+=O}else if(g!==""){if(l.save(),x=this.parser.propToContextStyle(this.defaultStyle,m),x.buildFont(),x.syncFont(a,l),x.syncStyle(a,l),!d)C=Zy(g,o,e,f,u,S);else{C=d.call(c,g,o,f,u),typeof C=="string"&&(C=C.split(`
`));for(var F,L=0,R=C.length;L<R;L++)F=C[L],typeof F=="string"?C[L]=S.getLine(F,o(F),L<R-1?2:0):p=!1}for(var F,L=0,R=C.length;L<R;L++)F=C[L],n.addTextPen(F.text,u,v,F.width,lr(m),F.newLineMode),F.newLineMode!==UF?(u=0,v+=i):u+=F.width;p&&S.freeLines(C),C=null,l.restore()}for(var E=0,M=this.lines.length;E<M;E++){var D=this.lines[E],B=D[D.length-1];B&&(B.width+=this.parser.getStrokeThinkness(this.defaultStyle,B.prop))}return n}get startXOffset(){var t=this.defaultStyle;return t.strokeThickness/2+t.xOffset}get startYOffset(){var t=this.defaultStyle;return t.strokeThickness/2+t.metrics.ascent}get lines(){return this.penManager.lines}get desplayLinesCount(){var t=this.penManager.linesCount,e=this.defaultStyle.maxLines;return e>0&&t>e&&(t=e),t}get linesWidth(){return Math.ceil(this.penManager.getMaxLineWidth())}get linesHeight(){var t=this.desplayLinesCount,e=this.defaultStyle.lineHeight*t;return t>0&&(e-=this.defaultStyle.lineSpacing),e}get imageManager(){return this.parent.imageManager}get rtl(){return this.parent.style.rtl}newPenManager(){return new ac({pensPool:this.pensPool,linesPool:this.linesPool,tagToText:this.parser.propToTagText,tagToTextScope:this.parser})}get tmpPenManager(){return this._tmpPenManager===null&&(this._tmpPenManager=this.newPenManager()),this._tmpPenManager}getPlainText(t,e,f){var i;if(t==null)i=this.penManager.plainText;else{var n=this.parser.splitText(t,1);i="";for(var h=0,r=n.length;h<r;h++)i+=n[h]}return(e!=null||f!=null)&&(e==null&&(e=0),f==null&&(f=i.length),i=i.substring(e,f)),i}getPenManager(t,e){if(t===void 0)return this.copyPenManager(e,this.penManager);e===void 0&&(e=this.newPenManager());var f=this.defaultStyle;return this.updatePenManager(t,f.wrapMode,f.wrapWidth,f.lineHeight,e),e}getText(t,e,f,i){if(t==null)return this.penManager.getSliceTagText(e,f,i);var n=this.tmpPenManager,h=this.defaultStyle;return this.updatePenManager(t,h.wrapMode,h.wrapWidth,h.lineHeight,n),n.getSliceTagText(e,f,i)}copyPenManager(t,e){return e===void 0&&(e=this.penManager),e.copy(t)}getTextWidth(t){return t===void 0&&(t=this.penManager),t.getMaxLineWidth()}getLastPen(t){return t===void 0&&(t=this.penManager),t.lastPen}}var WF={setInteractive:IF};Object.assign(Jy.prototype,AF,WF);class XF extends Is{freeLine(t){if(!!t)return this.push(t),this}freeLines(t){if(!!t)return this.pushMultiple(t),this}getLine(t,e,f){var i=this.pop();return i===null&&(i={}),i.text=t,i.width=e,i.newLineMode=f,i}}const Pf=Phaser.Utils.Objects.GetValue;var Mf=function(s,t){t===void 0&&(t={key:s}),t.hasOwnProperty("key")||(t.key=s);var e=t.key,f=t.frame,i=t.width,n=t.height;if(i===void 0||n===void 0){var h=this.textureManager.getFrame(e,f),r=h?h.cutWidth:0,a=h?h.cutHeight:0;i===void 0&&n===void 0?(i=r,n=a):i===void 0?i=r*(n/a):n===void 0&&(n=a*(i/r))}this.images[s]={key:e,frame:f,width:i,height:n,y:Pf(t,"y",0),left:Pf(t,"left",0),right:Pf(t,"right",0)}},HF=function(s,t,e,f,i){var n=this.get(s);e+=n.left,f+=n.y,i&&(e=Math.round(e),f=Math.round(f));var h=this.textureManager.getFrame(n.key,n.frame);t.drawImage(h.source.image,h.cutX,h.cutY,h.cutWidth,h.cutHeight,e,f,n.width,n.height)};class oc{constructor(t){this.textureManager=t.sys.textures,this.images={}}destroy(){this.textureManager=void 0,this.images=void 0}add(t,e){if(typeof t=="string")Mf.call(this,t,e);else if(Array.isArray(t))for(var f=t,i=0,n=f.length;i<n;i++)Mf.call(this,f[i]);else{var f=t;for(var t in f)Mf.call(this,t,f[t])}return this}has(t){return this.images.hasOwnProperty(t)}remove(t){return this.has(t)&&delete this.images[t],this}get(t){return this.has(t)||this.textureManager.exists(t)&&this.add(t),this.images[t]}getOuterWidth(t){var e=this.get(t);return e?e.width+e.left+e.right:0}getFrame(t){var e=this.get(t);return e?this.textureManager.getFrame(e.key,e.frame):void 0}hasTexture(t){return!!this.getFrame(t)}}var $F={draw:HF};Object.assign(oc.prototype,$F);const KF=Phaser.Utils.Objects.IsPlainObject,kF=Phaser.DOM.AddToDOM,A0=Phaser.Display.Canvas.CanvasPool,ZF=Phaser.GameObjects.GameObject,on=Phaser.Utils.Objects.GetValue,JF=Phaser.DOM.RemoveFromDOM,QF=we.SPLITREGEXP;var Rr=null,Af=null,Of=null;class Qy extends ky{constructor(t,e,f,i,n,h,r){if(KF(e)){var a=e;e=on(a,"x",0),f=on(a,"y",0),i=on(a,"text",""),n=on(a,"style","")}if(e===void 0&&(e=0),f===void 0&&(f=0),super(t,h),this.renderer=t.sys.game.renderer,this.setPosition(e,f),this.setOrigin(0,0),this.initPipeline(),this.canvas=A0.create(this),this.context=this.canvas.getContext("2d"),this._imageManager=void 0,n){if(n.hasOwnProperty("align")){var l=n.align;delete n.align,n.halign=l}n.hasOwnProperty("stroke")&&!n.hasOwnProperty("strokeThickness")&&(n.strokeThickness=1)}this.style=new rc(this,n);var o=on(n,"images",void 0);o&&this.addImage(o),this.autoRound=!0,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.dirty=!1,this.style.resolution===0&&(this.style.resolution=1),this._crop=this.resetCropObject(),this.texture=t.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),Rr||(Rr={},Af=new Is,Of=new XF,this.scene.game.events.once("destroy",function(){Rr=null,Af=null,Of=null})),Rr.hasOwnProperty(h)||(Rr[h]=new Is),this.canvasText=new Jy({parent:this,context:this.context,parser:r,style:this.style,pensPool:Rr[h],linesPool:Af,wrapTextLinesPool:Of}),this.parser=r,this.initRTL(),n&&n.padding&&this.setPadding(n.padding),this.setText(i),t.sys.game.events.on("contextrestored",this.onContextRestored,this)}onContextRestored(){this.dirty=!0}preDestroy(){this.style.rtl&&JF(this.canvas),this.scene.sys.game.events.off("contextrestored",this.onContextRestored,this),this.canvasText.destroy(),this.canvasText=void 0,this._imageManager&&(this._imageManager.destroy(),this._imageManager=void 0),A0.remove(this.canvas),this.texture.destroy()}set text(t){this.setText(t)}get text(){return this._text}initRTL(){!this.style.rtl||(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",kF(this.canvas,this.scene.sys.canvas),this.originX=1)}setText(t){return t==null?t="":Array.isArray(t)?t=t.join(`
`):t=t.toString(),t===this._text?this:(this._text=t,this.updateText(),this)}appendText(t){return t==null?this:(Array.isArray(t)&&(t=t.join(`
`)),this.setText(this.text+t.toString()),this)}setPadding(t,e,f,i){if(typeof t=="object"){var n=t,h=on(n,"x",null);h!==null?(t=h,f=h):(t=on(n,"left",0),f=on(n,"right",t));var r=on(n,"y",null);r!==null?(e=r,i=r):(e=on(n,"top",0),i=on(n,"bottom",e))}else t===void 0&&(t=0),e===void 0&&(e=t),f===void 0&&(f=t),i===void 0&&(i=e);return this.padding.left=t,this.padding.top=e,this.padding.right=f,this.padding.bottom=i,this.updateText(!1)}updateText(t){t===void 0&&(t=!0);var e=this.canvasText,f=this.style;t&&e.updatePenManager(this._text,f.wrapMode,f.wrapWidth,f.lineHeight);var i=this.padding,n,h,r=Math.ceil(e.linesWidth);f.fixedWidth===0?(this.width=r+i.left+i.right,n=r):(this.width=f.fixedWidth,n=this.width-i.left-i.right,n<r&&(n=r)),f.fixedHeight===0?(this.height=e.linesHeight+i.top+i.bottom,h=e.linesHeight):(this.height=f.fixedHeight,h=this.height-i.top-i.bottom,h<e.linesHeight&&(h=e.linesHeight));var a=this.width,l=this.height;this.updateDisplayOrigin();var o=f.resolution;a*=o,l*=o,a=Math.max(Math.ceil(a),1),l=Math.max(Math.ceil(l),1);var u=this.canvas,v=this.context;u.width!==a||u.height!==l?(u.width=a,u.height=l,this.frame.setSize(a,l)):v.clearRect(0,0,a,l),v.save(),v.scale(o,o);var d=this.style.rtl?i.right:i.left,c=i.top;e.draw(d,c,n,h),v.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(u,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!0;var p=this.input;return p&&!p.customHitArea&&(p.hitArea.width=this.width,p.hitArea.height=this.height),this}toJSON(){var t=Components.ToJSON(this),e={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),resolution:this.resolution,padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return t.data=e,t}setInteractive(t,e,f){var i=!!this.input;return ZF.prototype.setInteractive.call(this,t,e,f),i||this.canvasText.setInteractive(),this}getWrappedText(t,e,f){return t=this.canvasText.getText(t,e,f,!0),t.split(QF)}getPlainText(t,e,f){return this.canvasText.getPlainText(t,e,f)}getText(t,e,f,i){return i===void 0&&(i=!1),this.canvasText.getText(t,e,f,i)}getSubString(t,e,f){return this.getText(t,e,f)}copyPenManager(t){return this.canvasText.copyPenManager(t)}getPenManager(t,e){return this.canvasText.getPenManager(t,e)}setSize(t,e){return this.setFixedSize(t,e)}resize(t,e){return this.setFixedSize(t,e)}get imageManager(){return this._imageManager||(this._imageManager=new oc(this.scene)),this._imageManager}addImage(t,e){return this.imageManager.add(t,e),this}drawAreaBounds(t,e){return this.canvasText.hitAreaManager.drawBounds(t,e,this),this}generateTexture(t,e,f,i,n){var h=this.canvas;return i===void 0?i=h.width:i*=this.resolution,n===void 0?n=h.height:n*=this.resolution,Hy(this.scene,h,t,e,f,i,n),this}}var _e=function(s,t){return t===void 0?`\\[${s}\\]`:`\\[${s}=(${t})\\]`},xi=function(s){return`\\[/${s}\\]`};const hc="[-.0-9]+",lc="[a-z]+|#[0-9abcdef]+",uc="[^\\]]+",jy="esc",qy=_e(jy),_y=xi(jy),t1="raw",e1=_e(t1),i1=xi(t1),n1="b",s1=_e(n1),r1=xi(n1),a1="i",o1=_e(a1),h1=xi(a1),l1="weight",u1=_e(l1,hc),f1=xi(l1),d1="size",c1=_e(d1,hc),v1=xi(d1),p1="color",g1=_e(p1,lc),m1=xi(p1),fc="u",x1=_e(fc),y1=_e(fc,lc),T1=xi(fc),C1="shadow",S1=_e(C1),E1=xi(C1),dc="stroke",P1=_e(dc),M1=_e(dc,lc),A1=xi(dc),O1="y",R1=_e(O1,hc),L1=xi(O1),F1="img",w1=_e(F1,uc),I1=xi(F1),D1="area",B1=_e(D1,uc),b1=xi(D1),G1="align",N1=_e(G1,uc),Y1=xi(G1),z1=new RegExp(qy,"i"),Dd=new RegExp(_y,"i"),V1=new RegExp(e1,"i"),Bd=new RegExp(i1,"i"),jF=new RegExp(s1,"i"),qF=new RegExp(r1,"i"),_F=new RegExp(o1,"i"),tw=new RegExp(h1,"i"),O0=new RegExp(u1,"i"),ew=new RegExp(f1,"i"),R0=new RegExp(c1,"i"),iw=new RegExp(v1,"i"),L0=new RegExp(g1,"i"),nw=new RegExp(m1,"i"),sw=new RegExp(x1,"i"),F0=new RegExp(y1,"i"),rw=new RegExp(T1,"i"),aw=new RegExp(S1,"i"),ow=new RegExp(E1,"i"),hw=new RegExp(P1,"i"),w0=new RegExp(M1,"i"),lw=new RegExp(A1,"i"),I0=new RegExp(R1,"i"),uw=new RegExp(L1,"i"),D0=new RegExp(w1,"i"),fw=new RegExp(I1,"i"),B0=new RegExp(B1,"i"),dw=new RegExp(b1,"i"),b0=new RegExp(N1,"i"),cw=new RegExp(Y1,"i"),G0=new RegExp([e1,i1,qy,_y,s1,r1,o1,h1,u1,f1,c1,v1,g1,m1,x1,y1,T1,S1,E1,P1,M1,A1,R1,L1,w1,I1,B1,b1,N1,Y1].join("|"),"ig");var vw=function(s,t){for(var e=[],f=0,i=!1,n=!1;;){var h=G0.exec(s);if(!h)break;var r=h[0];if(n)if(Dd.test(r))n=!1;else continue;else if(i)if(Bd.test(r))i=!1;else continue;else z1.test(r)?n=!0:V1.test(r)&&(i=!0);var a=G0.lastIndex,l=a-r.length;if(f<l){var o=s.substring(f,l);e.push(o)}t===void 0&&e.push(r),f=a}var u=s.length;return f<u&&e.push(s.substring(f,u)),e};const Ye=!1,ze=!0;var pw={plainText:null,prevProp:null},gw=function(s,t){t==null&&(t={});var e="";if(t.img&&Kt(t,Ye,"img"),t.esc)Dd.test(s)?Kt(t,Ye,"esc"):e=s;else if(t.raw)Bd.test(s)?Kt(t,Ye,"raw"):e=s;else if(z1.test(s))Kt(t,ze,"esc",!0);else if(Dd.test(s))Kt(t,Ye,"esc");else if(V1.test(s))Kt(t,ze,"raw",!0);else if(Bd.test(s))Kt(t,Ye,"raw");else if(jF.test(s))Kt(t,ze,"b",!0);else if(qF.test(s))Kt(t,Ye,"b");else if(_F.test(s))Kt(t,ze,"i",!0);else if(tw.test(s))Kt(t,Ye,"i");else if(O0.test(s)){var f=s.match(O0);Kt(t,ze,"weight",f[1])}else if(ew.test(s))Kt(t,Ye,"weight");else if(R0.test(s)){var f=s.match(R0);Kt(t,ze,"size",`${f[1]}px`)}else if(iw.test(s))Kt(t,Ye,"size");else if(L0.test(s)){var f=s.match(L0);Kt(t,ze,"color",f[1])}else if(nw.test(s))Kt(t,Ye,"color");else if(sw.test(s))Kt(t,ze,"u",!0);else if(F0.test(s)){var f=s.match(F0);Kt(t,ze,"u",f[1])}else if(rw.test(s))Kt(t,Ye,"u");else if(aw.test(s))Kt(t,ze,"shadow",!0);else if(ow.test(s))Kt(t,Ye,"shadow");else if(hw.test(s))Kt(t,ze,"stroke",!0);else if(w0.test(s)){var f=s.match(w0);Kt(t,ze,"stroke",f[1])}else if(lw.test(s))Kt(t,Ye,"stroke");else if(I0.test(s)){var f=s.match(I0);Kt(t,ze,"y",parseFloat(f[1]))}else if(uw.test(s))Kt(t,Ye,"y");else if(D0.test(s)){var f=s.match(D0);Kt(t,ze,"img",f[1])}else if(fw.test(s))Kt(t,Ye,"img");else if(B0.test(s)){var f=s.match(B0);Kt(t,ze,"area",f[1])}else if(dw.test(s))Kt(t,Ye,"area");else if(b0.test(s)){var f=s.match(b0);Kt(t,ze,"align",f[1])}else cw.test(s)?Kt(t,Ye,"align"):e=s;var i=pw;return i.plainText=e,i.prop=t,i},Kt=function(s,t,e,f){return t===ze?s[e]=f:s.hasOwnProperty(e)&&delete s[e],s},mw=function(s,t){var e=yw;if(t.hasOwnProperty("img"))e.image=t.img;else{if(e.image=null,t.hasOwnProperty("family")?e.fontFamily=t.family:e.fontFamily=s.fontFamily,t.hasOwnProperty("size")){var f=t.size;typeof f=="number"&&(f=`${f}px`),e.fontSize=f}else e.fontSize=s.fontSize;e.fontStyle=xw(t),t.hasOwnProperty("color")?e.color=t.color:e.color=s.color,t.hasOwnProperty("stroke")?t.stroke===!0?(e.stroke=s.stroke,e.strokeThickness=s.strokeThickness):(e.stroke=t.stroke,e.strokeThickness=s.strokeThickness):(e.stroke=s.stroke,e.strokeThickness=0)}return t.hasOwnProperty("shadow")?t.shadow===!0?(e.shadowColor=s.shadowColor,e.shadowOffsetX=s.shadowOffsetX,e.shadowOffsetY=s.shadowOffsetY,e.shadowBlur=s.shadowBlur,e.shadowStroke=!0,e.shadowFill=!0):(e.shadowColor=t.shadow,e.shadowOffsetX=s.shadowOffsetX,e.shadowOffsetY=s.shadowOffsetY,e.shadowBlur=s.shadowBlur,e.shadowStroke=!0,e.shadowFill=!0):(e.shadowColor="#000",e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=0,e.shadowStroke=!1,e.shadowFill=!1),t.hasOwnProperty("u")?t.u===!0?(e.underlineColor=s.underlineColor,e.underlineThickness=s.underlineThickness,e.underlineOffset=s.underlineOffset):(e.underlineColor=t.u,e.underlineThickness=s.underlineThickness,e.underlineOffset=s.underlineOffset):(e.underlineColor="#000",e.underlineThickness=0,e.underlineOffset=0),e},xw=function(s){var t=s.b,e=s.weight,f=s.i;return t||e||f?f?t?"bold italic":e?`${e} italic`:"italic":t?"bold":e.toString():""},yw=new rc,Tw=function(s,t,e){e==null&&(e=Cw);var f=[];for(var i in e)t.hasOwnProperty(i)||f.push(`[/${i}]`);for(var i in t){var n=t[i];if(e[i]!==n)switch(i){case"size":f.push(`[size=${n.replace("px","")}]`);break;case"color":case"weight":case"stroke":case"y":case"img":case"area":case"align":f.push(`[${i}=${n}]`);break;case"u":n===!0?f.push("[u]"):f.push(`[u=${n}]`);break;default:f.push(`[${i}]`);break}}return f.push(s),f.join("")},Cw={};class U1{getStrokeThinkness(t,e){var f;return e.hasOwnProperty("stroke")?f=t.strokeThickness:f=0,f}}var Sw={splitText:vw,tagTextToProp:gw,propToContextStyle:mw,propToTagText:Tw};Object.assign(U1.prototype,Sw);class cc extends Qy{constructor(t,e,f,i,n){var h=new U1(n);super(t,e,f,i,n,"rexBBCodeText",h)}}xt.register("BBCodeText",function(s,t,e,f){var i=new cc(this.scene,s,t,e,f);return this.scene.add.existing(i),i});Ct(window,"RexPlugins.UI.BBCodeText",cc);var Ew={plainText:null,prevProp:null},Pw=new rc;class Mw{constructor(t){t===void 0&&(t={}),this.tags=t}addTag(t,e){this.tags[t]=e}getTag(t){return this.tags[t]}splitText(t,e){for(var f=[],i=0;;){var n=Rf.exec(t);if(!n)break;var h=n[0],r=Rf.lastIndex-h.length;if(i<r&&f.push(t.substring(i,r)),e===void 0)f.push(h);else if(e===1){if(Y0.test(h)){var a=h.match(z0);f.push(a[2])}else if(V0.test(h)){var a=h.match(U0);f.push(a[2])}}i=Rf.lastIndex}var l=t.length;return i<l&&f.push(t.substring(i,l)),f}tagTextToProp(t,e){var f,i;if(Y0.test(t)){var n=t.match(z0);if(n!=null){var h=n[1],r=this.tags;r.hasOwnProperty(h)?i=r[h]:i={},i._class=h,f=n[2]}}else if(V0.test(t)){var n=t.match(U0);if(n!=null){var a=n[1];i=Aw(a),i._style=a,f=n[2]}}f==null&&(f=t),i==null&&(i={});var l=Ew;return l.plainText=f,l.prop=i,l}propToContextStyle(t,e){var f=Pw;if(e.hasOwnProperty("img"))f.image=e.img;else{if(f.image=null,e.hasOwnProperty("family")||e.hasOwnProperty("fontFamily")||e.hasOwnProperty("font-family")){var i=e.hasOwnProperty("family")?e.family:e.hasOwnProperty("fontFamily")?e.fontFamily:e["font-family"];f.fontFamily=i}else f.fontFamily=t.fontFamily;if(e.hasOwnProperty("size")||e.hasOwnProperty("fontSize")||e.hasOwnProperty("font-size")){var n=e.hasOwnProperty("size")?e.size:e.hasOwnProperty("fontSize")?e.fontSize:e["font-size"];typeof n=="number"&&(n=`${n}px`),f.fontSize=n}else f.fontSize=t.fontSize;if(e.hasOwnProperty("style")||e.hasOwnProperty("fontStyle")||e.hasOwnProperty("font-style")){var h=e.hasOwnProperty("style")?e.style:e.hasOwnProperty("fontStyle")?e.fontStyle:e["font-style"];f.fontStyle=h}else f.fontStyle=t.fontStyle;if(e.hasOwnProperty("color")||e.hasOwnProperty("font-color")){var r=e.hasOwnProperty("color")?e.color:e["font-color"];f.color=r}else f.color=t.color;if(e.hasOwnProperty("stroke")){var a=e.stroke;f.stroke=a.hasOwnProperty("color")?a.color:t.stroke,f.strokeThickness=a.hasOwnProperty("thickness")?a.thickness:t.strokeThickness}else f.stroke=t.stroke,f.strokeThickness=t.strokeThickness}if(e.hasOwnProperty("shadow")){var l=e.shadow;f.shadowColor=l.hasOwnProperty("color")?l.color:t.shadowColor,f.shadowOffsetX=l.hasOwnProperty("offsetX")?l.offsetX:t.shadowOffsetX,f.shadowOffsetY=l.hasOwnProperty("offsetY")?l.offsetY:t.shadowOffsetY,f.shadowBlur=l.hasOwnProperty("blur")?l.blur:t.shadowBlur,f.shadowStroke=!0,f.shadowFill=!0}else f.shadowColor=t.shadowColor,f.shadowOffsetX=t.shadowOffsetX,f.shadowOffsetY=t.shadowOffsetY,f.shadowBlur=t.shadowBlur,f.shadowStroke=t.shadowStroke,f.shadowFill=t.shadowFill;if(e.hasOwnProperty("u")||e.hasOwnProperty("underline")){var o=e.hasOwnProperty("u")?e.u:e.underline;f.underlineColor=o.hasOwnProperty("color")?o.color:t.underlineColor,f.underlineThickness=o.hasOwnProperty("thickness")?o.thickness:t.underlineThickness,f.underlineOffset=o.hasOwnProperty("offset")?o.offset:t.underlineOffset}else f.underlineColor=t.underlineColor,f.underlineThickness=t.underlineThickness,f.underlineOffset=t.underlineOffset;return f}getStrokeThinkness(t,e){var f;if(e.hasOwnProperty("stroke")){var i=e.stroke;f=i.hasOwnProperty("thickness")?i.thickness:t.strokeThickness}else f=t.strokeThickness;return f}propToTagText(t,e,f){return e.hasOwnProperty("_class")?t===""&&this.isTextTag(e._class)?"":`<class='${e._class}'>${t}</class>`:e.hasOwnProperty("_style")?`<style='${e._style}'>${t}</style>`:t}destroy(){this.tags=void 0}isTextTag(t){var e=this.tags[t];return e?e.img==null:!1}}var Aw=function(s){s=s.split(";");for(var t={},e,f,i,n=0,h=s.length;n<h;n++)if(e=s[n].split(":"),f=e[0],i=e[1],!(N0(f)||N0(i))){switch(f){case"stroke":var r=i.split(" "),o=r.length;i={},o>=1&&(i.color=r[0]),o>=2&&(i.thickness=parseInt(r[1].replace("px","")));break;case"shadow":var a=i.split(" "),o=a.length;i={},o>=1&&(i.color=a[0]),o>=2&&(i.offsetX=parseInt(a[1].replace("px",""))),o>=3&&(i.offsetY=parseInt(a[2].replace("px",""))),o>=4&&(i.blur=parseInt(a[3].replace("px","")));break;case"u":case"underline":var l=i.split(" "),o=l.length;i={},o>=1&&(i.color=l[0]),o>=2&&(i.thickness=parseInt(l[1].replace("px",""))),o>=3&&(i.offset=parseInt(l[2].replace("px","")));break;case"y":i=parseFloat(i);break}t[f]=i}return t},N0=function(s){return s=s.replace(Ow,""),s.length===0},Rf=/<\s*class=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/class\s*\>|<\s*style=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/style\s*\>/g,Y0=/<\s*class=/i,z0=/<\s*class=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/class\s*\>/,V0=/<\s*style=/i,U0=/<\s*style=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/style\s*\>/,Ow=/^\s+|\s+$/;const Rw=Phaser.Utils.Objects.GetValue;class W1 extends Qy{constructor(t,e,f,i,n){var h=Rw(n,"tags",void 0),r=new Mw(h);super(t,e,f,i,n,"rexTagText",r)}addTag(t,e){return this.parser.addTag(t,e),this.updateText(!0)}addTags(t){for(var e in t)this.parser.addTag(e,t[e]);return this.updateText(!0)}getTag(t){return this.parser.getTag(t)}preDestroy(){super.preDestroy(),this.parser.destroy(),this.parser=void 0}}xt.register("tagText",function(s,t,e,f){var i=new W1(this.scene,s,t,e,f);return this.scene.add.existing(i),i});Ct(window,"RexPlugins.UI.TagText",W1);var Lw=function(s,t){if(this.scene.sys.scale.autoRound&&(s=Math.floor(s),t=Math.floor(t)),this.width===s&&this.height===t)return this;var e=this.node.style;return e.width=`${s}px`,e.height=`${t}px`,this.updateSize(),this};const Fw=Phaser.Utils.Objects.GetValue;var W0=function(s,t,e){e===void 0&&(e={});var f,i;for(var n in s)f=s[n],i=Fw(t,n,f[1]),i!==void 0&&(e[f[0]]=i);return e},ww=function(s,t,e){for(let f in e)t.addEventListener(f,function(i){s.emit(e[f],s,i)})},Iw=function(s){s.addEventListener("touchstart",Lr,!1),s.addEventListener("touchmove",Lr,!1),s.addEventListener("touchend",Lr,!1),s.addEventListener("mousedown",Lr,!1),s.addEventListener("mouseup",Lr,!1),s.addEventListener("mousemove",Lr,!1)},Lr=function(s){s.stopPropagation()};const Dw=Phaser.GameObjects.DOMElement,X0=Phaser.Utils.Objects.IsPlainObject,jn=Phaser.Utils.Objects.GetValue;class vc extends Dw{constructor(t,e,f,i,n,h){X0(e)?(h=e,e=jn(h,"x",0),f=jn(h,"y",0),i=jn(h,"width",0),n=jn(h,"height",0)):X0(i)&&(h=i,i=jn(h,"width",0),n=jn(h,"height",0)),h===void 0&&(h={});var r,a=jn(h,"type","text");a==="textarea"?(r=document.createElement("textarea"),r.style.resize="none"):(r=document.createElement("input"),r.type=a),W0(H0,h,r);var l=jn(h,"style",void 0);l=W0($0,h,l);var o=r.style;for(var u in h)u in H0||u in $0||u in o&&(l[u]=h[u]);l["box-sizing"]="border-box",super(t,e,f,r,l),this.type="rexInputText",this.resize(i,n),ww(this,r,bw),Iw(r),jn(h,"selectAll",!1)&&this.selectAll(),this._isFocused=!1,this.on("focus",function(){this._isFocused=!0},this).on("blur",function(){this._isFocused=!1},this)}get text(){return this.node.value}set text(t){this.node.value=t}setText(t){return this.text=t,this}get maxLength(){return this.node.maxLength}set maxLength(t){this.node.maxLength=t}setMaxLength(t){return this.maxLength=t,this}get minLength(){return this.node.minLength}set minLength(t){this.node.minLength=t}setMinLength(t){return this.minLength=t,this}get placeholder(){return this.node.placeholder}set placeholder(t){this.node.placeholder=t}setPlaceholder(t){return this.placeholder=t,this}selectText(t,e){return t===void 0?this.node.select():this.node.setSelectionRange(t,e),this}selectAll(){return this.selectText(),this}get selectionStart(){return this.node.selectionStart}get selectionEnd(){return this.node.selectionEnd}get selectedText(){var t=this.node;return t.value.substring(t.selectionStart,t.selectionEnd)}get cursorPosition(){return this.node.selectionStart}set cursorPosition(t){this.node.setSelectionRange(t,t)}setCursorPosition(t){return t===void 0&&(t=0),this.cursorPosition=t,this}get tooltip(){return this.node.title}set tooltip(t){this.node.title=t}setTooltip(t){return this.tooltip=t,this}setTextChangedCallback(t){return this.onTextChanged=t,this}get readOnly(){return this.node.readOnly}set readOnly(t){this.node.readOnly=t}setReadOnly(t){return t===void 0&&(t=!0),this.readOnly=t,this}get spellCheck(){return this.node.spellcheck}set spellCheck(t){this.node.spellcheck=t}setSpellCheck(t){return this.spellCheck=t,this}get fontColor(){return this.node.style.color}set fontColor(t){this.node.style.color=t}setFontColor(t){return this.fontColor=t,this}setStyle(t,e){return this.node.style[t]=e,this}getStyle(t){return this.node.style[t]}scrollToBottom(){return this.node.scrollTop=this.node.scrollHeight,this}setEnabled(t){return t===void 0&&(t=!0),this.node.disabled=!t,this}setBlur(){return this.node.blur(),this}setFocus(){return this.node.focus(),this}get isFocused(){return this._isFocused}}var Bw={resize:Lw};Object.assign(vc.prototype,Bw);const H0={id:["id",void 0],text:["value",void 0],maxLength:["maxLength",void 0],minLength:["minLength",void 0],placeholder:["placeholder",void 0],tooltip:["title",void 0],readOnly:["readOnly",!1],spellCheck:["spellcheck",!1],autoComplete:["autocomplete","off"]},$0={align:["textAlign",void 0],paddingLeft:["padding-left",void 0],paddingRight:["padding-right",void 0],paddingTop:["padding-top",void 0],paddingBottom:["padding-bottom",void 0],fontFamily:["fontFamily",void 0],fontSize:["font-size",void 0],color:["color","#ffffff"],backgroundColor:["backgroundColor","transparent"],border:["border",0],borderColor:["borderColor","transparent"],outline:["outline","none"],direction:["direction",void 0]},bw={input:"textchange",click:"click",dblclick:"dblclick",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",keydown:"keydown",keyup:"keyup",keypress:"keypress",focus:"focus",blur:"blur",select:"select"};var pc=function(s,t,e,f){if(t)return!(e&&!e(s,t)||!K0(s,t)||f&&!f(s,t));for(var i=s.scene.input.manager,n=i.pointersTotal,h=i.pointers,t,r=0;r<n;r++)if(t=h[r],!(e&&!e(s,t))&&!!K0(s,t)&&!(f&&!f(s,t)))return!0;return!1},K0=function(s,t){for(var e=s.scene,f=e.input.cameras.getCamerasBelowPointer(t),i=e.input.manager,n=[s],h,r=0,a=f.length;r<a;r++)if(h=i.hitTest(t,n,f[r]),h.length>0)return!0;return!1},Gw=function(s,t,e){s=s.replace(" ","");var f=e.previousText;if(s===f)return s;if(isNaN(s)){s=f;var i=e.cursorPosition-1;e.setText(s),e.setCursorPosition(i)}else e.previousText=s;return s};const Nw=Phaser.Game;var k0=function(s){return s instanceof Nw};const Yw=Phaser.Scene;var _r=function(s){return s instanceof Yw},zw=function(s){if(k0(s))return s;if(k0(s.game))return s.game;if(_r(s))return s.sys.game;if(_r(s.scene))return s.scene.sys.game},gc=function(s){return zw(s).loop.delta};const Fr=Phaser.Utils.Objects.GetValue,Vw=Phaser.Math.Wrap;class X1 extends vc{constructor(t,e){super(t.scene,e);var f=this.node.style;f.position="absolute",f.opacity=0,f.pointerEvents="none",f.zIndex=0,f.transform="scale(0)",this.setCursor(Fr(e,"cursor","|")),this.setCursorFlashDuration(Fr(e,"cursorFlashDuration",1e3)),this.cursorFlashTimer=0,this.setEnterClose(Fr(e,"enterClose",!0)),this.onOpenCallback=Fr(e,"onOpen",void 0),this.onCloseCallback=Fr(e,"onClose",void 0);var i=Fr(e,"onUpdate",void 0);i==="number"&&(i=Gw),this.onUpdateCallback=i,this.textObject=t,t.setInteractive().on("pointerdown",this.setFocus,this).on("destroy",this.destroy,this),this.on("focus",function(){this.cursorFlashTimer=0,this.enterClose&&this.scene.input.keyboard.once("keydown-ENTER",this.setBlur,this),this.setText(this.textObject.text),this.scene.sys.events.on("postupdate",this.updateText,this),this.scene.input.on("pointerdown",this.onClickOutside,this),this.onOpenCallback&&this.onOpenCallback(this.textObject,this)},this).on("blur",function(){this.updateText(),this.scene.sys.events.off("postupdate",this.updateText,this),this.scene.input.off("pointerdown",this.onClickOutside,this),this.onCloseCallback&&this.onCloseCallback(this.textObject,this)},this)}preDestroy(){this.textObject.off("pointerdown",this.setFocus,this),this.textObject.off("destroy",this.destroy,this),this.scene.sys.events.off("postupdate",this.updateText,this),this.scene.input.off("pointerdown",this.onClickOutside,this),super.preDestroy()}onClickOutside(t){pc(this.textObject,t)||this.setBlur()}updateText(){var t=this.text;if(this.onUpdateCallback){var e=this.onUpdateCallback(t,this.textObject,this);e!=null&&(t=e)}if(this.isFocused&&this.hasCursor){var f=this.cursorPosition;t=t.substring(0,f)+this.cursor+t.substring(f)}return this.textObject.setText(t),this}setCursor(t){return this._cursor=t,this.hasCursor=t&&t!=="",t}setCursorFlashDuration(t){return this.cursorFlashDuration=t,this}get cursor(){if(!this._isFocused)return this._cursor;var t;this.cursorFlashTimer<this.cursorFlashDuration/2?t=this._cursor:t=" ";var e=this.cursorFlashTimer+gc(this.scene);return this.cursorFlashTimer=Vw(e,0,this.cursorFlashDuration),t}setEnterClose(t){return t===void 0&&(t=!0),this.enterClose=t,this}open(){return this.setFocus(),this}close(){return this.setBlur(),this}get isOpened(){return this._isFocused}}xt.register("hiddenEdit",function(s,t){var e=new X1(s,t);return e});Ct(window,"RexPlugins.UI.HiddenEdit",X1);const Uw=Phaser.GameObjects.Zone,Ww=Phaser.Utils.Array.Add,Xw=Phaser.Utils.Array.Remove;class xo extends Uw{constructor(t,e,f,i,n){e===void 0&&(e=0),f===void 0&&(f=0),i===void 0&&(i=1),n===void 0&&(n=1),super(t,e,f,i,n),this.children=[]}destroy(t){if(!!this.scene){if(t)for(var e,f=this.children.length-1;f>=0;f--)e=this.children[f],!e.parentContainer&&!e.displayList&&e.destroy(t);this.clear(!t),super.destroy(t)}}contains(t){return this.children.indexOf(t)!==-1}add(t){var e=this;return Ww(this.children,t,0,function(f){f.once("destroy",e.onChildDestroy,e)},this),this}remove(t,e){var f=this;return Xw(this.children,t,function(i){i.off("destroy",f.onChildDestroy,f),e&&i.destroy()}),this}onChildDestroy(t,e){this.remove(t,!1)}clear(t){for(var e=this,f,i=0,n=this.children.length;i<n;i++)f=this.children[i],f.off("destroy",e.onChildDestroy,e),t&&f.destroy();return this.children.length=0,this}}const Z0=Phaser.GameObjects.Components;Phaser.Class.mixin(xo,[Z0.Alpha,Z0.Flip]);var mn=function(s,t){var e;if(t===void 0)s.hasOwnProperty("rexContainer")&&(e=s.rexContainer.parent);else for(e=mn(s);e&&e.name!==t;)e=mn(e);return e},H1=function(s){for(var t=mn(s);t;)s=t,t=mn(t);return s};const Hw=Phaser.Math.DegToRad,$w=Phaser.Math.RadToDeg;var kt=function(s){if(!s.hasOwnProperty("rexContainer")){var t={parent:null,self:null,layer:null,x:0,y:0,syncPosition:!0,rotation:0,syncRotation:!0,scaleX:0,scaleY:0,syncScale:!0,alpha:0,syncAlpha:!0,visible:!0,active:!0};Object.defineProperty(t,"angle",{get:function(){return $w(this.rotation)},set:function(e){this.rotation=Hw(e)}}),Object.defineProperty(t,"displayWidth",{get:function(){return s.width*this.scaleX},set:function(e){this.scaleX=e/s.width}}),Object.defineProperty(t,"displayHeight",{get:function(){return s.height*this.scaleY},set:function(e){this.scaleY=e/s.height}}),s.rexContainer=t}return s.rexContainer},Kw={setParent(s,t){t===void 0&&(t=this);var e=kt(s);return t?(e.parent=t,e.self=s):(e.parent=null,e.self=null),this},getParent(s,t){return typeof s=="string"&&(t=s,s=void 0),s===void 0&&(s=this),mn(s,t)},getTopmostParent(s){return s===void 0&&(s=this),H1(s)}};const Eh=Phaser.Utils.Objects.GetValue,$1=xo.prototype.add;var Lf=function(s,t){this.setParent(s);var e=kt(s);return K1(e,t),this.resetChildState(s).updateChildVisible(s).updateChildActive(s).updateChildScrollFactor(s).updateChildMask(s),$1.call(this,s),this.addToRenderLayer(s),this},Ff=function(s,t){this.setParent(s);var e=kt(s);return K1(e,t),e.x=s.x,e.y=s.y,e.rotation=s.rotation,e.scaleX=s.scaleX,e.scaleY=s.scaleY,e.alpha=s.alpha,e.visible=s.visible,e.active=s.active,this.updateChildPosition(s).updateChildAlpha(s).updateChildVisible(s).updateChildActive(s).updateChildScrollFactor(s).updateChildMask(s),$1.call(this,s),this.addToRenderLayer(s),this},K1=function(s,t){s.syncPosition=Eh(t,"syncPosition",!0),s.syncRotation=Eh(t,"syncRotation",!0),s.syncScale=Eh(t,"syncScale",!0),s.syncAlpha=Eh(t,"syncAlpha",!0)},kw={add(s){return Array.isArray(s)?this.addMultiple(s):Lf.call(this,s),this},pin(s,t){return Array.isArray(s)?this.addMultiple(s,t):Lf.call(this,s,t),this},addMultiple(s){for(var t=0,e=s.length;t<e;t++)Lf.call(this,s[t]);return this},addLocal(s){return Array.isArray(s)?this.addMultiple(s):Ff.call(this,s),this},pinLocal(s,t){return Array.isArray(s)?this.addMultiple(s,t):Ff.call(this,s,t),this},addLocalMultiple(s){for(var t=0,e=s.length;t<e;t++)Ff.call(this,s[t]);return this}};const Zw=xo.prototype.remove,Jw=xo.prototype.clear;var Qw={remove(s,t){return mn(s)!==this?this:(this.setParent(s,null),t||this.removeFromRenderLayer(s),Zw.call(this,s,t),this)},clear(s){for(var t=this.children,e=0,f=t.length;e<f;e++){var i=t[e];this.setParent(i,null),s||this.removeFromRenderLayer(i)}return Jw.call(this,s),this}},jw={getLocalState(s){return kt(s)},resetChildState(s){return this.resetChildPositionState(s).resetChildVisibleState(s).resetChildAlphaState(s).resetChildActiveState(s),this},resetChildrenState(s){for(var t=0,e=s.length;t<e;t++)this.resetChildState(s[t]);return this},syncProperties(){return this.syncPosition().syncVisible().syncAlpha().syncActive().syncScrollFactor().syncMask(),this}};const J0=Phaser.Math.RotateAround;var qw={worldToLocal(s){return s.x-=this.x,s.y-=this.y,J0(s,0,0,-this.rotation),s.x/=this.scaleX,s.y/=this.scaleY,s},localToWorld(s){return s.x*=this.scaleX,s.y*=this.scaleY,J0(s,0,0,this.rotation),s.x+=this.x,s.y+=this.y,s}},so=function(s,t){return s===t?1:s/t},_w={updateChildPosition(s){s.isRexContainerLite&&(s.syncChildrenEnable=!1);var t=kt(s),e=t.parent;return t.syncPosition&&(s.x=t.x,s.y=t.y,e.localToWorld(s)),t.syncRotation&&(s.rotation=t.rotation+e.rotation),t.syncScale&&(s.scaleX=t.scaleX*e.scaleX,s.scaleY=t.scaleY*e.scaleY),s.isRexContainerLite&&(s.syncChildrenEnable=!0,s.syncPosition()),this},syncPosition(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildPosition,this),this},resetChildPositionState(s){var t=kt(s),e=t.parent;return t.x=s.x,t.y=s.y,e.worldToLocal(t),t.scaleX=so(s.scaleX,e.scaleX),t.scaleY=so(s.scaleY,e.scaleY),t.rotation=s.rotation-e.rotation,this},setChildPosition(s,t,e){return s.x=t,s.y=e,this.resetChildPositionState(s),this},setChildLocalPosition(s,t,e){var f=kt(s);return f.x=t,f.y=e,this.updateChildPosition(s),this},resetLocalPositionState(){var s=kt(this).parent;return s&&s.resetChildPositionState(this),this}};const tI=Phaser.Math.DegToRad;var eI={updateChildRotation(s){var t=kt(s),e=t.parent;return t.syncRotation&&(s.rotation=e.rotation+t.rotation),this},syncRotation(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildRotation,this),this},resetChildRotationState(s){var t=kt(s),e=t.parent;return t.rotation=s.rotation-e.rotation,this},setChildRotation(s,t){return s.rotation=t,this.resetChildRotationState(s),this},setChildAngle(s,t){return s.angle=t,this.resetChildRotationState(s),this},setChildLocalRotation(s,t){var e=kt(s);return e.rotation=t,this.updateChildRotation(s),this},setChildLocalAngle(s,t){var e=kt(s);return e.rotation=tI(t),this.updateChildRotation(s),this},resetLocalRotationState(){var s=kt(this).parent;return s&&s.resetChildRotationState(this),this}},iI={updateChildScale(s){var t=kt(s),e=t.parent;return t.syncScale&&(s.scaleX=e.scaleX*t.scaleX,s.scaleY=e.scaleY*t.scaleY),this},syncScale(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildScale,this),this},resetChildScaleState(s){var t=kt(s),e=t.parent;return t.scaleX=so(s.scaleX,e.scaleX),t.scaleY=so(s.scaleY,e.scaleY),this},setChildScale(s,t,e){return e===void 0&&(e=t),s.scaleX=t,s.scaleY=e,this.resetChildScaleState(s),this},setChildLocalScale(s,t,e){e===void 0&&(e=t);var f=kt(s);return f.scaleX=t,f.scaleY=e,this.updateChildScale(s),this},setChildDisplaySize(s,t,e){return s.setDisplaySize(t,e),this.resetChildScaleState(s),this},resetLocalScaleState(){var s=kt(this).parent;return s&&s.resetChildScaleState(this),this}},nI={updateChildVisible(s){var t=kt(s),e=t.parent,f=t.hasOwnProperty("maskVisible")?t.maskVisible:!0;return s.visible=e.visible&&t.visible&&f,this},syncVisible(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildVisible,this),this},resetChildVisibleState(s){var t=kt(s);return t.hasOwnProperty("maskVisible")&&delete t.maskVisible,t.visible=s.visible,this},setChildVisible(s,t){return this.setChildLocalVisible(s,t),this},setChildLocalVisible(s,t){t===void 0&&(t=!0);var e=kt(s);return e.visible=t,this.updateChildVisible(s),this},setChildMaskVisible(s,t){t===void 0&&(t=!0);var e=kt(s);return e.maskVisible=t,this.updateChildVisible(s),this},resetLocalVisibleState(){var s=kt(this).parent;return s&&s.resetChildVisibleState(this),this}},sI={updateChildAlpha(s){var t=kt(s),e=t.parent;return t.syncAlpha&&(s.alpha=e.alpha*t.alpha),this},syncAlpha(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildAlpha,this),this},resetChildAlphaState(s){var t=kt(s),e=t.parent;return t.alpha=so(s.alpha,e.alpha),this},setChildAlpha(s,t){return s.alpha=t,this.resetChildAlphaState(s),this},setChildLocalAlpha(s,t){var e=kt(s);return e.alpha=t,this.updateChildAlpha(s),this},resetLocalAlphaState(){var s=kt(this).parent;return s&&s.resetChildAlphaState(this),this}},rI={updateChildActive(s){var t=kt(s),e=t.parent;return s.active=e.active&&t.active,this},syncActive(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildActive,this),this},resetChildActiveState(s){var t=kt(s);return t.active=s.active,this},setChildActive(s,t){return s.active=t,this.resetChildActiveState(s),this},setChildLocalActive(s,t){t===void 0&&(t=!0);var e=kt(s);return e.active=t,this.updateChildActive(s),this},resetLocalActiveState(){var s=kt(this).parent;return s&&s.resetChildActiveState(this),this}},aI={updateChildScrollFactor(s){var t=kt(s),e=t.parent;return s.setScrollFactor(e.scrollFactorX,e.scrollFactorY),this},syncScrollFactor(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildScrollFactor,this),this}},oI={updateChildMask(s){if(this.mask==null)return this;var t=this.mask.hasOwnProperty("geometryMask")?this.mask.geometryMask:this.mask.bitmapMask;return t!==s&&(s.mask=this.mask),this},syncMask(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildMask,this),this},setMask(s){return this.mask=s,this},clearMask(s){return s===void 0&&(s=!1),this._mask=null,this.children.forEach(function(t){t.clearMask(!1)}),s&&this.mask&&this.mask.destroy(),this}},ro=function(s,t){if(s.length===0)return s;t===void 0&&(t=!1);var e=s[0].scene,f=e.sys.displayList;return f.depthSort(),t?s.sort(function(i,n){return f.getIndex(n)-f.getIndex(i)}):s.sort(function(i,n){return f.getIndex(i)-f.getIndex(n)}),s},hI={setDepth(s,t){if(this.depth=s,!t&&this.children)for(var e=this.getAllChildren(),f=0,i=e.length;f<i;f++)e[f].depth=s;return this},swapDepth(s){var t=this.depth,e=s.depth;return this.setDepth(e),s.setDepth(t),this},incDepth(s){if(this.depth+=s,this.children)for(var t=this.getAllChildren(),e=0,f=t.length;e<f;e++)t[e].depth+=s;return this},moveDepthBelow(s){var t=this.displayList;if(s.displayList!==t)return this;var e=this.getAllChildren([this]);ro(e);for(var f=0,i=e.length;f<i;f++){var n=e[f];if(t.exists(n)){t.moveBelow(s,n);break}}return this},moveDepthAbove(s){var t=this.displayList;if(s.displayList!==t)return this;var e=this.getAllChildren([this]);ro(e,!0);for(var f=0,i=e.length;f<i;f++){var n=e[f];if(t.exists(n)){t.moveAbove(s,n);break}}return this}},k1=function(s,t){var e=t(s);if(!e&&s.isRexContainerLite)for(var f=s.children,i=0,n=f.length;i<n;i++)k1(f[i],t)},wf=function(s,t){for(var e=[s];e.length>0;){var f=e.shift(),i=t(f);!i&&f.isRexContainerLite&&e.push(...f.children)}};const js=Phaser.Utils.Array;var lI={getChildren(s){if(!s)s=this.children;else for(var t=0,e=this.children.length;t<e;t++)s.push(this.children[t]);return s},getAllChildren(s){s===void 0&&(s=[]);var t=this;return wf(t,function(e){e!==t&&s.push(e)}),s},getAllVisibleChildren(s){s===void 0&&(s=[]);var t=this;return wf(t,function(e){if(e!==t){if(!e.visible)return!0;s.push(e)}}),s},bfs(s,t){return t===void 0&&(t=this),wf(t,s),this},dfs(s,t){return t===void 0&&(t=this),k1(t,s),this},contains(s){var t=mn(s);return t?t===this?!0:this.contains(t):!1},getByName(s,t){if(t){for(var e=[this],f,i;e.length;){f=e.shift();for(var n=0,h=f.children.length;n<h;n++){if(i=f.children[n],i.name===s)return i;i.isRexContainerLite&&e.push(i)}}return null}else return js.GetFirst(this.children,"name",s)},getRandom(s,t){return js.GetRandom(this.children,s,t)},getFirst(s,t,e,f){return js.GetFirstElement(this.children,s,t,e,f)},getAll(s,t,e,f){return js.GetAll(this.children,s,t,e,f)},count(s,t,e,f){return js.CountAllMatching(this.children,s,t,e,f)},swap(s,t){return js.Swap(this.children,s,t),this},setAll(s,t,e,f){return js.SetAll(this.children,s,t,e,f),this}},If=function(s){for(var t=[],e=0,f=s.length;e<f;e++){var i=s[e];!i.hasOwnProperty("rexContainer")||t.push(i.rexContainer)}return t},uI=function(s){for(var t=0,e=s.length;t<e;t++){var f=s[t].scene;if(f)return f}return null},Q0=function(s,t,e){if(!e.parent){s.remove();return}var f=e.parent,i=e.self;switch(t){case"x":case"y":f.updateChildPosition(i);break;case"angle":case"rotation":f.updateChildRotation(i);break;case"scaleX":case"scaleY":case"displayWidth":case"displayHeight":f.updateChildScale(i);break;case"alpha":f.updateChildAlpha(i);break;default:f.updateChildPosition(i),f.updateChildRotation(i),f.updateChildScale(i),f.updateChildAlpha(i);break}},fI={tweenChild(s){var t=s.targets;Array.isArray(t)||(t=[t]);var e=this.scene||uI(t);if(!!e){s.targets=If(t);var f=e.tweens.add(s);return f.on("update",Q0),f}},createTweenChildConfig(s){var t=s.targets;t&&(Array.isArray(t)||(t=[t]),s.targets=If(t));var e=s.onUpdate;return s.onUpdate=function(f,i){e&&e(f,i),Q0(f,void 0,i)},s},tween(s){var t=this.scene;return s.targets||(s.targets=this),t.tweens.add(s)},timelineChild(s){var t=s.targets;t&&(Array.isArray(t)||(t=[t]),s.targets=If(t));for(var e=s.tweens,f=0,i=e.length;f<i;f++)e[f]=this.createTweenChildConfig(e[f]);var n=this.scene.tweens.timeline(s);return n}},j0=function(s){this._setParentContainerFlag=!0;var t=this.getAllChildren([this]);return ro(t),s.add(t),this._setParentContainerFlag=!1,this},dI=function(){if(!this.parentContainer)return this;this._setParentContainerFlag=!0;var s=this.getAllChildren([this]);return ro(s),s.reverse(),this.parentContainer.remove(s),this._setParentContainerFlag=!1,this},cI={addToLayer:j0,addToContainer:j0,removeFromContainer:dI},vI={enableLayer(){if(this.layer)return this;var s=this.scene.add.layer();return this.moveDepthBelow(s),this.once("destroy",function(){s.list.length=0,s.destroy()}),this.addToLayer(s),this.layer=s,this},getLayer(){return this.layer||this.enableLayer(),this.layer},getRenderLayer(){if(this.layer)return this.layer;for(var s=this.getParent();s;){var t=s.layer;if(t)return t;s=s.getParent()}return null},addToRenderLayer(s){if(!s.displayList)return this;var t=this.getRenderLayer();if(!t)return this;s.isRexContainerLite?s.addToLayer(t):t.add(s);var e=kt(s);return e.layer=t,this},removeFromRenderLayer(s){var t=kt(s),e=t.layer;return e?(e.remove(s),t.layer=null,this):this}},ne=function(s){return s.displayWidth!==void 0?s.displayWidth:s.width},Qt=function(s){return s.displayHeight!==void 0?s.displayHeight:s.height};const q0=Phaser.Geom.Rectangle,Ds=Phaser.Math.Vector2,pI=Phaser.Math.RotateAround;var rl=function(s,t){if(t===void 0?t=new q0:t===!0&&(Df===void 0&&(Df=new q0),t=Df),s.getBounds)return s.getBounds(t);var e,f,i,n,h,r,a,l;if(s.parentContainer){var o=s.parentContainer.getBoundsTransformMatrix();bd(s,t),o.transformPoint(t.x,t.y,t),e=t.x,f=t.y,Gd(s,t),o.transformPoint(t.x,t.y,t),i=t.x,n=t.y,Nd(s,t),o.transformPoint(t.x,t.y,t),h=t.x,r=t.y,Yd(s,t),o.transformPoint(t.x,t.y,t),a=t.x,l=t.y}else bd(s,t),e=t.x,f=t.y,Gd(s,t),i=t.x,n=t.y,Nd(s,t),h=t.x,r=t.y,Yd(s,t),a=t.x,l=t.y;return t.x=Math.min(e,i,h,a),t.y=Math.min(f,n,r,l),t.width=Math.max(e,i,h,a)-t.x,t.height=Math.max(f,n,r,l)-t.y,t},Df=void 0,bd=function(s,t,e){return t===void 0?t=new Ds:t===!0&&(Qi===void 0&&(Qi=new Ds),t=Qi),s.getTopLeft?s.getTopLeft(t):(t.x=s.x-ne(s)*s.originX,t.y=s.y-Qt(s)*s.originY,El(s,t,e))},Gd=function(s,t,e){return t===void 0?t=new Ds:t===!0&&(Qi===void 0&&(Qi=new Ds),t=Qi),s.getTopRight?s.getTopRight(t):(t.x=s.x-ne(s)*s.originX+ne(s),t.y=s.y-Qt(s)*s.originY,El(s,t,e))},Nd=function(s,t,e){return t===void 0?t=new Ds:t===!0&&(Qi===void 0&&(Qi=new Ds),t=Qi),s.getBottomLeft?s.getBottomLeft(t):(t.x=s.x-ne(s)*s.originX,t.y=s.y-Qt(s)*s.originY+Qt(s),El(s,t,e))},Yd=function(s,t,e){return t===void 0?t=new Ds:t===!0&&(Qi===void 0&&(Qi=new Ds),t=Qi),s.getBottomRight?s.getBottomRight(t):(t.x=s.x-ne(s)*s.originX+ne(s),t.y=s.y-Qt(s)*s.originY+Qt(s),El(s,t,e))},Qi=void 0,El=function(s,t,e){if(e===void 0&&(e=!1),s.rotation!==0&&pI(t,s.x,s.y,s.rotation),e&&s.parentContainer){var f=s.parentContainer.getBoundsTransformMatrix();f.transformPoint(t.x,t.y,t)}return t};const _0=Phaser.Geom.Rectangle,gI=Phaser.Geom.Rectangle.Union;var mI=function(s,t){t===void 0?t=new _0:t===!0&&(Bf===void 0&&(Bf=new _0),t=Bf),t.setTo(0,0,0,0);for(var e,f=!0,i=0,n=s.length;i<n;i++)if(e=s[i],!!e.getBounds){var h=rl(e,!0);f?(t.setTo(h.x,h.y,h.width,h.height),f=!1):gI(h,t,t)}return t},Bf,qs=Phaser.Utils.Objects.GetValue,mc=function(s){if(!!s){var t=s.gameObjects,e=s.renderTexture,f=qs(s,"x",void 0),i=qs(s,"y",void 0),n=qs(s,"width",void 0),h=qs(s,"height",void 0),r=qs(s,"originX",0),a=qs(s,"originY",0),l=qs(s,"padding",0),o,u;if(n===void 0||h===void 0||f===void 0||i===void 0){var v=mI(t,!0),d=f!==void 0&&i!==void 0;d?(n=Math.max(f-v.left,v.right-f)*2,h=Math.max(i-v.top,v.bottom-i)*2,r=.5,a=.5):(f=v.x,i=v.y,n=v.width,h=v.height,r=0,a=0),o=v.x,u=v.y}else o=f+(0-r)*n,u=i+(0-a)*h;o-=l,u-=l,n+=l*2,h+=l*2;var c=!e;if(c){var p=t[0].scene;e=p.add.renderTexture(0,0,n,h)}e.setPosition(f,i),(e.width!==n||e.height!==h)&&e.setSize(n,h),e.setOrigin(r,a),e.camera.setScroll(o,u),t=ro(lr(t)),e.draw(t);var g=s.saveTexture;return g&&e.saveTexture(g),c&&g&&e.destroy(),e}},xI={snapshot(s){var t=this.scaleX,e=this.scaleY,f=t===1&&e===1;f||this.setScale(1),s===void 0&&(s={}),s.gameObjects=this.getAllVisibleChildren(),s.x=this.x,s.y=this.y,s.originX=this.originX,s.originY=this.originY;var i=mc(s),n=!!i.scene;return f||(this.setScale(t,e),n&&i.setScale(t,e)),n?i:this}};const tm=Phaser.Utils.Objects.GetValue;var Z1=function(s,t,e){var f=s.getBounds||s.width!==void 0&&s.height!==void 0;if(!!f){var i,n;typeof e=="number"?i=e:(i=tm(e,"color"),n=tm(e,"lineWidth")),i===void 0&&(i=16777215),n===void 0&&(n=1),qn[0]=bd(s,qn[0]),qn[1]=Gd(s,qn[1]),qn[2]=Yd(s,qn[2]),qn[3]=Nd(s,qn[3]),t.lineStyle(n,i).strokePoints(qn,!0,!0)}},qn=[void 0,void 0,void 0,void 0];const yI=Phaser.Utils.Objects.GetValue;var TI=function(s,t){for(var e=yI(t,"drawContainer",!0),f=this.getAllVisibleChildren([this]),i=0,n=f.length;i<n;i++){var h=f[i];!e&&h.isRexContainerLite||Z1(h,s,t)}return this};const CI=Phaser.Math.RotateAround;var SI=function(s,t,e){e===void 0&&(e=t);var f={x:(t-s.originX)*s.displayWidth,y:(e-s.originY)*s.displayHeight};return CI(f,0,0,s.rotation),s.originX=t,s.originY=e,s.x=s.x+f.x,s.y=s.y+f.y,s},EI=function(s,t){this.syncChildrenEnable=!1,SI(this,s,t),this.syncChildrenEnable=!0;for(var e=this.getAllChildren(),f=0,i=e.length;f<i;f++)this.resetChildPositionState(e[f]);return this},J1={changeOrigin:EI,drawBounds:TI};Object.assign(J1,Kw,kw,Qw,jw,qw,_w,eI,iI,nI,sI,rI,aI,oI,hI,lI,fI,cI,vI,xI);class _i extends xo{constructor(t,e,f,i,n,h){Array.isArray(i)&&(h=i,i=void 0,n=void 0),super(t,e,f,i,n),this.type="rexContainerLite",this.isRexContainerLite=!0,this.syncChildrenEnable=!0,this._active=!0,this._mask=null,this._scrollFactorX=1,this._scrollFactorY=1,h&&this.add(h)}destroy(t){!this.scene||(this.syncChildrenEnable=!1,super.destroy(t))}resize(t,e){return this.setSize(t,e),this}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this.syncPosition())}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this.syncPosition())}get rotation(){return super.rotation}set rotation(t){this.rotation!==t&&(super.rotation=t,this.syncPosition())}get scaleX(){return super.scaleX}set scaleX(t){this.scaleX!==t&&(super.scaleX=t,this.syncPosition())}get scaleY(){return super.scaleY}set scaleY(t){this.scaleY!==t&&(super.scaleY=t,this.syncPosition())}get scale(){return super.scale}set scale(t){this.scale!==t&&(super.scale=t,this.syncPosition())}get visible(){return super.visible}set visible(t){super.visible!==t&&(super.visible=t,this.syncVisible())}get alpha(){return super.alpha}set alpha(t){super.alpha!==t&&(super.alpha=t,this.syncAlpha())}get active(){return this._active}set active(t){this._active!==t&&(this._active=t,this.syncActive())}get mask(){return this._mask}set mask(t){this._mask!==t&&(this._mask=t,this.syncMask())}get scrollFactorX(){return this._scrollFactorX}set scrollFactorX(t){this._scrollFactorX!==t&&(this._scrollFactorX=t,this.syncScrollFactor())}get scrollFactorY(){return this._scrollFactorY}set scrollFactorY(t){this._scrollFactorY!==t&&(this._scrollFactorY=t,this.syncScrollFactor())}get list(){return this.children}static GetParent(t){return mn(t)}get parentContainer(){return this._parentContainer}set parentContainer(t){if(!this._parentContainer&&!t){this._parentContainer=t;return}if(this.setParentContainerFlag){this._parentContainer=t;return}this._parentContainer&&!t?(this.removeFromContainer(),this._parentContainer=t):t?(this._parentContainer=t,this.addToContainer(t)):this._parentContainer=t}get setParentContainerFlag(){if(this._setParentContainerFlag)return!0;var t=mn(this);return t?t.setParentContainerFlag:!1}}Object.assign(_i.prototype,J1);xt.register("container",function(s,t,e,f,i){var n=new _i(this.scene,s,t,e,f,i);return this.scene.add.existing(n),n});Ct(window,"RexPlugins.UI.Container",_i);xt.register("canvas",function(s,t,e,f){var i=new Gn(this.scene,s,t,e,f);return this.scene.add.existing(i),i});Ct(window,"RexPlugins.UI.Canvas",Gn);const Ph=Phaser.Utils.Objects.GetValue;class xc extends Gn{constructor(t,e,f,i,n,h){super(t,e,f),this.type="rexCircleMaskImage",this.setTexture(i,n,h)}setTexture(t,e,f){typeof e=="object"&&(f=e,e=void 0),typeof f=="string"&&(f={maskType:f});var i=Ph(f,"maskType",0),n=Ph(f,"backgroundColor",void 0);if(i===void 0?i=0:typeof i=="string"&&(i=PI[i]),this._textureKey=t,this._frameName=e,i===null)return this.loadTexture(t,e),this.dirty=!0,this;var h=n!=null;h||this.loadTexture(t,e);var r=this.canvas,a=this.context,l=r.width,o=r.height;switch(a.save(),a.globalCompositeOperation=h?"source-over":"destination-in",a.beginPath(),i){case 2:var u=Ph(f,"radius",0),v=Ph(f,"iteration",void 0);$y(a,0,0,l,o,u,v);break;default:var d=Math.floor(l/2),c=Math.floor(o/2);i===0?a.arc(d,c,Math.min(d,c),0,2*Math.PI):a.ellipse(d,c,d,c,0,0,2*Math.PI);break}return h&&(a.fillStyle=n),a.fill(),a.restore(),h&&(a.save(),a.globalCompositeOperation="destination-atop",this.loadTexture(t,e),a.restore()),this.dirty=!0,this}resize(t,e){return this.setDisplaySize(t,e),this}}const PI={circle:0,ellipse:1,roundRectangle:2};xt.register("circleMaskImage",function(s,t,e,f,i){var n=new xc(this.scene,s,t,e,f,i);return this.scene.add.existing(n),n});Ct(window,"RexPlugins.UI.CircleMaskImage",xc);const Fa=Phaser.Utils.Objects.GetValue;class yc extends Gn{constructor(t,e,f,i,n,h){super(t,e,f),this.type="rexAlphaMaskImage",this.maskFrame=null,this.setTexture(i,n,h)}setTexture(t,e,f){typeof e=="object"&&(f=e,e=void 0),typeof f=="string"&&(f={mask:{key:f}});var i=Fa(f,"mask.key"),n=Fa(f,"mask.frame"),h=Fa(f,"mask.invertAlpha",!1),r=Fa(f,"mask.scale"),a=Fa(f,"backgroundColor");if(i){this._maskKey=i,this._maskFrame=n,this._maskScale=r;var l=i?this.scene.sys.textures.get(i):null;this.maskFrame=l?l.get(n):null}this._textureKey=t,this._frameName=e;var o=this.maskFrame;if(o===null)return this.loadTexture(t,e),this.dirty=!0,this;var u=a!=null;this.loadTexture(t,e);var v=this.canvas,d=this.context,c=v.width,p=v.height;d.save(),d.globalCompositeOperation=h?"destination-out":"destination-in";var g,m;this._maskScale!=null?(g=o.cutWidth*this._maskScale,m=o.cutHeight*this._maskScale):(g=c,m=p);var x=(c-g)/2,y=(p-m)/2;return this.drawFrame(this._maskKey,this._maskFrame,x,y,g,m),d.restore(),u&&(d.save(),d.globalCompositeOperation="destination-over",d.fillStyle=a,d.fillRect(0,0,c,p),d.restore()),this.dirty=!0,this}resize(t,e){return this.setDisplaySize(t,e),this}}xt.register("alphaMaskImage",function(s,t,e,f,i){var n=new yc(this.scene,s,t,e,f,i);return this.scene.add.existing(n),n});Ct(window,"RexPlugins.UI.AlphaMaskImage",yc);const Mh=Phaser.Utils.Objects.GetValue;var qh=function(s,t){return t===void 0?s:s[t]},Fs=function(s,t,e){s===void 0&&(s={}),t===void 0&&(t=0);var f=typeof t;return f==="string"?s[t]=e:f==="number"?(s.left=t,s.right=t,s.top=t,s.bottom=t):(s.left=Mh(t,"left",0),s.right=Mh(t,"right",0),s.top=Mh(t,"top",0),s.bottom=Mh(t,"bottom",0)),s};class Tc{constructor(t,e){this.setParent(t),this.type=e,this.reset().setActive()}destroy(){this.parent.removeChild(this)}setParent(t){return this.parent=t,this}get scene(){return this.parent.scene}get canvas(){return this.parent?this.parent.canvas:null}get context(){return this.parent?this.parent.context:null}setDirty(t){return t&&this.parent&&(this.parent.dirty=!0),this}get active(){return this._active}set active(t){this.setDirty(this._active!=t),this._active=t}setActive(t){return t===void 0&&(t=!0),this.active=t,this}modifyPorperties(t){return this}onFree(){this.reset().setParent()}reset(){return this}}Object.assign(Tc.prototype,xl);const MI=Phaser.Math.DegToRad,AI=Phaser.Math.RadToDeg,Ah=Phaser.Utils.Objects.GetValue;class Pl extends Tc{constructor(t,e){super(t,e),this.originX=0,this.offsetX=0,this.offsetY=0}get visible(){return this._visible}set visible(t){this.setDirty(this._visible!=t),this._visible=t}setVisible(t){return t===void 0&&(t=!0),this.visible=t,this}get alpha(){return this._alpha}set alpha(t){this.setDirty(this._alpha!=t),this._alpha=t}setAlpha(t){return this.alpha=t,this}get x(){return this._x}set x(t){this.setDirty(this._x!=t),this._x=t}setX(t){return this.x=t,this}get y(){return this._y}set y(t){this.setDirty(this._y!=t),this._y=t}setY(t){return this.y=t,this}setPosition(t,e){return this.x=t,this.y=e,this}setInitialPosition(t,e){return this.x0=t,this.y0=e,this}get rotation(){return this._rotation}set rotation(t){this.setDirty(this._rotation!=t),this._rotation=t}setRotation(t){return this.rotation=t,this}get angle(){return AI(this._rotation)}set angle(t){this.rotation=MI(t)}setAngle(t){return this.angle=t,this}get scaleX(){return this._scaleX}set scaleX(t){this.setDirty(this._scaleX!==t),this._scaleX=t}setScaleX(t){return this.scaleX=t,this}get width(){return 0}set width(t){}setWidth(t,e){return e===void 0&&(e=!1),this.width=t,e&&(this.scaleY=this.scaleX),this}get leftSpace(){return this._leftSpace}set leftSpace(t){this.setDirty(this._leftSpace!==t),this._leftSpace=t}setLeftSpace(t){return this.leftSpace=t,this}get rightSpace(){return this._rightSpace}set rightSpace(t){this.setDirty(this._rightSpace!==t),this._rightSpace=t}setRightSpace(t){return this.rightSpace=t,this}get outerWidth(){return this.width+this.leftSpace+this.rightSpace}get scaleY(){return this._scaleY}set scaleY(t){this.setDirty(this._scaleY!==t),this._scaleY=t}setScaleY(t){return this.scaleY=t,this}get height(){return 0}set height(t){}setHeight(t,e){return e===void 0&&(e=!1),this.height=t,e&&(this.scaleX=this.scaleY),this}setScale(t,e){return e===void 0&&(e=t),this.scaleX=t,this.scaleY=e,this}setOrigin(t){return this.originX=t,this}setAlign(t){return this.align=t,this}modifyPorperties(t){if(!t)return this;t.hasOwnProperty("x")&&this.setX(t.x),t.hasOwnProperty("y")&&this.setY(t.y),t.hasOwnProperty("rotation")?this.setRotation(t.rotation):t.hasOwnProperty("angle")&&this.setAngle(t.angle),t.hasOwnProperty("alpha")&&this.setAlpha(t.alpha);var e=Ah(t,"width",void 0),f=Ah(t,"height",void 0),i=Ah(t,"scaleX",void 0),n=Ah(t,"scaleY",void 0);return e!==void 0?f===void 0&&n===void 0?this.setWidth(e,!0):this.setWidth(e):i!==void 0&&this.setScaleX(i),f!==void 0?e===void 0&&i===void 0?this.setHeight(f,!0):this.setHeight(f):n!==void 0&&this.setScaleY(n),t.hasOwnProperty("leftSpace")&&this.setLeftSpace(t.leftSpace),t.hasOwnProperty("rightSpace")&&this.setRightSpace(t.rightSpace),t.hasOwnProperty("align")&&this.setAlign(t.align),this}setDrawBelowCallback(t){return this.drawBelowCallback=t,this}setDrawAboveCallback(t){return this.drawAboveCallback=t,this}reset(){return this.setVisible().setAlpha(1).setPosition(0,0).setRotation(0).setScale(1,1).setLeftSpace(0).setRightSpace(0).setOrigin(0).setAlign().setDrawBelowCallback().setDrawAboveCallback(),this}drawContent(){}draw(){var t=this.context;t.save();var e=this.x+this.leftSpace+this.offsetX-this.originX*this.width,f=this.y+this.offsetY;this.autoRound&&(e=Math.round(e),f=Math.round(f)),t.translate(e,f),t.globalAlpha=this.alpha,t.scale(this.scaleX,this.scaleY),t.rotate(this.rotation),this.drawBelowCallback&&this.drawBelowCallback(this),this.drawContent(),this.drawAboveCallback&&this.drawAboveCallback(this),t.restore()}}const _s=Phaser.Utils.Objects.GetValue;class OI extends Pl{constructor(t,e){super(t,"background"),this.setColor(_s(e,"color",null),_s(e,"color2",null),_s(e,"horizontalGradient",!0)),this.setStroke(_s(e,"stroke",null),_s(e,"strokeThickness",2)),this.setCornerRadius(_s(e,"cornerRadius",0),_s(e,"cornerIteration",null))}set color(t){t=Wt(t,this.canvas,this.context),this.setDirty(this._color!=t),this._color=t}get color(){return this._color}set color2(t){t=Wt(t,this.canvas,this.context),this.setDirty(this._color2!=t),this._color2=t}get color2(){return this._color2}set horizontalGradient(t){this.setDirty(this._horizontalGradient!=t),this._horizontalGradient=t}get horizontalGradient(){return this._horizontalGradient}setColor(t,e,f){return f===void 0&&(f=!0),this.color=t,this.color2=e,this.horizontalGradient=f,this}set stroke(t){t=Wt(t,this.canvas,this.context),this.setDirty(this._stroke!=t),this._stroke=t}get stroke(){return this._stroke}set strokeThickness(t){this.setDirty(this._strokeThickness!=t),this._strokeThickness=t}get strokeThickness(){return this._strokeThickness}setStroke(t,e){return this.stroke=t,this.strokeThickness=e,this}set cornerRadius(t){this.setDirty(this._cornerRadius!=t),this._cornerRadius=t}get cornerRadius(){return this._cornerRadius}set cornerIteration(t){this.setDirty(this._cornerIteration!=t),this._cornerIteration=t}get cornerIteration(){return this._cornerIteration}setCornerRadius(t,e){return this.cornerRadius=t,this.cornerIteration=e,this}drawContent(){sc(this.parent,this.color,this.stroke,this.strokeThickness,this.cornerRadius,this.color2,this.horizontalGradient,this.cornerIteration)}}const wa=Phaser.Utils.Objects.GetValue;class RI extends Pl{constructor(t,e){super(t,"background"),this.setColor(wa(e,"color",null),wa(e,"color2",null),wa(e,"horizontalGradient",!0)),this.setStroke(wa(e,"stroke",null),wa(e,"strokeThickness",2))}set color(t){t=Wt(t,this.canvas,this.context),this.setDirty(this._color!=t),this._color=t}get color(){return this._color}set color2(t){t=Wt(t,this.canvas,this.context),this.setDirty(this._color2!=t),this._color2=t}get color2(){return this._color2}set horizontalGradient(t){this.setDirty(this._horizontalGradient!=t),this._horizontalGradient=t}get horizontalGradient(){return this._horizontalGradient}setColor(t,e,f){return f===void 0&&(f=!0),this.color=t,this.color2=e,this.horizontalGradient=f,this}set stroke(t){t=Wt(t,this.canvas,this.context),this.setDirty(this._stroke!=t),this._stroke=t}get stroke(){return this._stroke}set strokeThickness(t){this.setDirty(this._strokeThickness!=t),this._strokeThickness=t}get strokeThickness(){return this._strokeThickness}setStroke(t,e){return this.stroke=t,this.strokeThickness=e,this}drawContent(){var t=this.parent.padding,e=t.left,f=t.top,i=this.parent.width-t.left-t.right,n=this.parent.height-t.top-t.bottom,h=this.context;if(this.color!=null){var r;if(this.color2!=null){var a;this.horizontalGradient?a=h.createLinearGradient(0,0,i,0):a=h.createLinearGradient(0,0,0,n),a.addColorStop(0,this.color),a.addColorStop(1,this.color2),r=a}else r=this.color;h.fillStyle=r,h.fillRect(e,f,i,n)}this.stroke!=null&&this.strokeThickness>0&&(h.strokeStyle=this.stroke,h.lineWidth=this.strokeThickness,h.strokeRect(e,f,i,n))}}var Oh=function(s,t,e){return t.hasOwnProperty(s)?t[s]:e[s]};const Ze=Phaser.Utils.Objects.GetValue;class Ml{constructor(t){this.set(t)}toJSON(){return{bold:this.bold,italic:this.italic,fontSize:this.fontSize,fontFamily:this.fontFamily,color:this.color,stroke:this.stroke,strokeThickness:this.strokeThickness,shaodwColor:this.shadowColor,shadowBlur:this.shadowBlur,shadowOffsetX:this.shadowOffsetX,shadowOffsetY:this.shadowOffsetY,offsetX:this.offsetX,offsetY:this.offsetY,leftSpace:this.leftSpace,rightSpace:this.rightSpace,align:this.align}}set(t){return this.setBold(Ze(t,"bold",!1)),this.setItalic(Ze(t,"italic",!1)),this.setFontSize(Ze(t,"fontSize","16px")),this.setFontFamily(Ze(t,"fontFamily","Courier")),this.setColor(Ze(t,"color","#fff")),this.setStrokeStyle(Ze(t,"stroke",null),Ze(t,"strokeThickness",0)),this.setShadow(Ze(t,"shadowColor",null),Ze(t,"shadowOffsetX",0),Ze(t,"shadowOffsetY",0),Ze(t,"shadowBlur",0)),this.setOffset(Ze(t,"offsetX",0),Ze(t,"offsetY",0)),this.setSpace(Ze(t,"leftSpace",0),Ze(t,"rightSpace",0)),this.setAlign(Ze(t,"align",void 0)),this}modify(t){return t.hasOwnProperty("bold")&&this.setBold(t.bold),t.hasOwnProperty("italic")&&this.setItalic(t.italic),t.hasOwnProperty("fontSize")&&this.setFontSize(t.fontSize),t.hasOwnProperty("fontFamily")&&this.setFontFamily(t.fontFamily),t.hasOwnProperty("color")&&this.setColor(t.color),(t.hasOwnProperty("stroke")||t.hasOwnProperty("strokeThickness"))&&this.setStrokeStyle(Oh("stroke",t,this),Oh("strokeThickness",t,this)),t.hasOwnProperty("shadowColor")&&this.setShadowColor(t.shadowColor),(t.hasOwnProperty("shadowOffsetX")||t.hasOwnProperty("shadowOffsetY"))&&this.setShadowOffset(Oh("shadowOffsetX",t,this),Oh("shadowOffsetY",t,this)),t.hasOwnProperty("shadowBlur")&&this.setShadowBlur(t.shaodwBlur),t.hasOwnProperty("offsetX")&&this.setOffsetX(t.offsetX),t.hasOwnProperty("offsetY")&&this.setOffsetY(t.offsetY),t.hasOwnProperty("leftSpace")&&this.setLeftSpace(t.leftSpace),t.hasOwnProperty("rightSpace")&&this.setRightSpace(t.rightSpace),t.hasOwnProperty("align")&&this.setAlign(t.align),this}clone(){return new Ml(this.toJSON())}copyFrom(t){return this.set(t.toJSON()),this}copyTo(t){return t.set(this.toJSON()),this}setBold(t){return t===void 0&&(t=!0),this.bold=t,this}setItalic(t){return t===void 0&&(t=!0),this.italic=t,this}get fontStyle(){return this.bold&&this.italic?"bold italic":this.bold?"bold":this.italic?"italic":""}setFontSize(t){return typeof t=="number"&&(t=`${t}px`),this.fontSize=t,this}setFontFamily(t){return this.fontFamily=t,this}get font(){return`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`}setColor(t){return this.color=Wt(t),this}get hasFill(){return this.color!=null}setStrokeStyle(t,e){return this.stroke=Wt(t),e!==void 0&&(this.strokeThickness=e),this}setStrokeThickness(t){return this.strokeThickness=t,this}get hasStroke(){return this.stroke!=null&&this.strokeThickness>0}setShadowColor(t){return this.shadowColor=Wt(t),this}setShadowOffset(t,e){return t===void 0&&(t=0),e===void 0&&(e=0),this.shadowOffsetX=t,this.shadowOffsetY=e,this}setShadowBlur(t){return t===void 0&&(t=0),this.shaodwBlur=t,this}setShadow(t,e,f,i){return this.setShadowColor(t).setShadowOffset(e,f).setShadowBlur(i),this}setOffsetX(t){return t===void 0&&(t=0),this.offsetX=t,this}setOffsetY(t){return t===void 0&&(t=0),this.offsetY=t,this}setOffset(t,e){return this.setOffsetX(t).setOffsetY(e),this}setLeftSpace(t){return t===void 0&&(t=0),this.leftSpace=t,this}setRightSpace(t){return t===void 0&&(t=0),this.rightSpace=t,this}setSpace(t,e){return this.setLeftSpace(t).setRightSpace(e),this}setAlign(t){return this.align=t,this}syncFont(t){return t.font=this.font,this}syncStyle(t){t.textBaseline="alphabetic";var e=this.hasFill,f=this.hasStroke;return t.fillStyle=e?this.color:"#000",t.strokeStyle=f?this.stroke:"#000",t.lineWidth=f?this.strokeThickness:0,t.lineCap="round",t.lineJoin="round",this}syncShadow(t){t.shadowColor!=null?(t.shadowColor=this.shadowColor,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowBlur=this.shadowBlur):(t.shadowColor=0,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0)}getTextMetrics(t,e){return this.syncFont(t).syncStyle(t),t.measureText(e)}}var LI=function(s,t){return s===void 0&&(s=0),t===void 0&&(t=0),s>0&&t>0?(this.fixedWidth!==s||this.fixedHeight!==t)&&(this.dirty=!0):this.dirty=!0,this.fixedWidth=s,this.fixedHeight=t,s>0&&(this.width=s),t>0&&(this.height=t),this},FI=function(s,t){var e=this.padding,f=e.left,i=e.right,n=e.top,h=e.bottom;return Fs(e,s,t),this.dirty=this.dirty||f!=e.left||i!=e.right||n!=e.top||h!=e.bottom,this},wI=function(s){return qh(this.padding,s)},II=function(s){return this.textStyle.modify(s),this},DI=function(){return this.textStyle.copyFrom(this.defaultTextStyle),this},BI=function(s){return this.poolManager.free(s),RemoveItem(this.children.list,s),this.lastAppendedChildren.length=0,this.dirty=!0,this},bI=function(){return this.poolManager.freeMultiple(this.children),this.children.length=0,this.lastAppendedChildren.length=0,this.dirty=!0,this},GI=function(){return this.setText(),this},NI=function(s){return this.lastAppendedChildren.length=0,Array.isArray(s)?(this.children.push(...s),this.lastAppendedChildren.push(...s)):(this.children.push(s),this.lastAppendedChildren.push(s)),this};const na="text",Cc="image",Sc="command";var Bs=function(s){var t=s.type;return t===na||t===Cc},Q1=function(s){return s.type===na&&s.text===`
`},YI=function(s){return s.type===na&&s.text===" "},zI=function(s){return s.type===Sc};class VI extends Pl{constructor(t,e,f){super(t,na),this.style=new Ml(f),this.setText(e)}get autoRound(){return this.parent.autoRound}get offsetX(){return this.style.offsetX}set offsetX(t){this.style&&(this.style.offsetX=t)}get offsetY(){return this.style.offsetY}set offsetY(t){this.style&&(this.style.offsetY=t)}get leftSpace(){return this.style.leftSpace*this.scaleX}set leftSpace(t){this.style&&(this.style.leftSpace=t),super.leftSpace=t}get rightSpace(){return this.style.rightSpace*this.scaleX}set rightSpace(t){this.style&&(this.style.rightSpace=t),super.rightSpace=t}get align(){return this.style.align}set align(t){this.style&&(this.style.align=t)}modifyStyle(t){return this.setDirty(!0),this.style.modify(t),this}modifyPorperties(t){return t?(this.modifyStyle(t),super.modifyPorperties(t),this):this}setText(t){return this.setDirty(this.text!=t),this.text=t,this.updateTextSize(),this}updateTextSize(){if(this.text===`
`||this.text==="")this.textWidth=0,this.textHeight=0;else{var t=this.style.getTextMetrics(this.context,this.text);this.textWidth=t.width;var e,f;t.hasOwnProperty("actualBoundingBoxAscent")?(e=t.actualBoundingBoxAscent,f=t.actualBoundingBoxDescent):(e=0,f=0),this.textHeight=e+f}return this}get width(){return this.textWidth*this.scaleX}set width(t){this.textWidth>0?this.scaleX=t/this.textWidth:this.scaleX=1}get height(){return this.textHeight*this.scaleY}set height(t){this.textHeight>0?this.scaleY=t/this.textHeight:this.scaleY=1}drawContent(){var t=this.style,e=t.hasFill,f=t.hasStroke;if(!(!e&&!f)){var i=this.context;t.syncFont(i).syncStyle(i),f&&(t.syncShadow(i),i.strokeText(this.text,0,0)),e&&(t.syncShadow(i),i.fillText(this.text,0,0))}}draw(){if(!this.visible||this.text===""||this.text===`
`)return this;super.draw()}}var Al=function(s,t){t&&this.textStyle.modify(t);for(var e=[],f=0,i=s.length;f<i;f++){var n=s.charAt(f),h=this.poolManager.allocate(na);h===null?h=new VI(this,n,this.textStyle):h.setParent(this).setActive().modifyStyle(this.textStyle).setText(n),e.push(h)}return this.addChild(e),this},UI=function(s,t){return s===void 0&&(s=""),this.removeChildren(),Al.call(this,s,t),this.dirty=!0,this};class WI extends Pl{constructor(t,e,f){super(t,Cc),this.setTexture(e,f)}get frameWidth(){return this.frameObj?this.frameObj.cutWidth:0}get frameHeight(){return this.frameObj?this.frameObj.cutHeight:0}get offsetY(){return-this.height}set offsetY(t){}get key(){return this._key}set key(t){this.setDirty(this._key!=t),this._key=t}get frame(){return this._frame}set frame(t){this.setDirty(this._frame!=t),this._frame=t}setTexture(t,e){return this.key=t,this.frame=e,this.frameObj=this.scene.sys.textures.getFrame(t,e),this}get width(){return this.frameWidth*this.scaleX}set width(t){this.setDirty(this.width!==t),this.scaleX=t/this.frameWidth}get height(){return this.frameHeight*this.scaleY}set height(t){this.setDirty(this.height!==t),this.scaleY=t/this.frameHeight}setHeight(t,e){return e===void 0&&(e=!1),this.height=t,e&&(this.scaleX=this.scaleY),this}drawContent(){var t=this.context,e=this.frameObj,f=this.frameWidth,i=this.frameHeight;t.drawImage(e.source.image,e.cutX,e.cutY,f,i,0,0,f,i)}draw(){if(!this.visible)return this;super.draw()}}var j1=function(s,t,e){var f=this.poolManager.allocate(Cc);return f===null?f=new WI(this,s,t):f.setParent(this).setActive().setTexture(s,t),f.modifyPorperties(e),this.addChild(f),this};class XI extends Tc{constructor(t,e,f,i,n){super(t,Sc),this.setName(e).setParameter(i).setCallback(f,n)}setName(t){return this.name=t,this}setParameter(t){return this.param=t,this}setCallback(t,e){return this.callback=t,this.scope=e,this}exec(){var t;return this.scope?t=this.callback.call(this.scope,this.param,this.name):t=this.callback(this.param,this.name),t}draw(){}onFree(){super.onFree(),this.setName().setCallback().setParameter()}}var $t=function(s,t,e,f){var i=this.poolManager.allocate(Sc);return i===null?i=new XI(this,s,t,e,f):i.setParent(this).setActive().setName(s).setCallback(t,f).setParameter(e),this.addChild(i),this},HI=function(s){return s===void 0&&(s={}),this.wrapConfig=s,this},$I=function(s,t,e,f){f===void 0&&(f={word:[],width:0}),f.word.length=0;for(var i=s.length,n=t,h=f.word,r=0;n<i;){var a=s[n];if(!Bs(a)){h.push(a),n++;continue}if(a.type===na&&a.text!==" "&&a.text!==`
`)h.push(a),r+=a.outerWidth,n++;else{n===t&&(h.push(a),r+=a.outerWidth);break}if(e)break}return f.width=r,f},q1=function(s){for(var t=0,e=s.length;t<e;t++){var f=s[t];if(f.align!==void 0)return f.align}},_1=function(s,t,e){if(!(t===0&&e===0))for(var f=0,i=s.length;f<i;f++){var n=s[f];!Bs(n)||(n.x+=t,n.y+=e)}},KI=function(s,t,e){var f=s.hAlign,i=s.vAlign,n,h,r=s.linesHeight;switch(i){case 1:case"center":h=(e-r)/2;break;case 2:case"bottom":h=e-r;break;default:h=0;break}for(var a=s.lines,l=0,o=a.length;l<o;l++){var u=a[l],v=u.width,d=u.children,c=q1(d);switch(c===void 0&&(c=f),c){case 1:case"center":n=(t-v)/2;break;case 2:case"right":n=t-v;break;default:n=0;break}_1(d,n,h)}};const hn=Phaser.Utils.Objects.GetValue;var kI=function(s){var t=hn(s,"start",0);Fs(this.wrapPadding,hn(s,"padding",0));var e=this.padding.top+this.padding.bottom+this.wrapPadding.top+this.wrapPadding.bottom,f=this.padding.left+this.padding.right+this.wrapPadding.left+this.wrapPadding.right,i=hn(s,"lineHeight",void 0),n;if(i===void 0)if(n=hn(s,"maxLines",0),this.fixedHeight>0){var G=this.fixedHeight-e;i=G/n}else i=0;else if(this.fixedHeight>0){if(n=hn(s,"maxLines",void 0),n===void 0){var G=this.fixedHeight-e;n=Math.floor(G/i)}}else n=hn(s,"maxLines",0);var h=n===0,r=hn(s,"wrapWidth",void 0);r===void 0&&(this.fixedWidth>0?r=this.fixedWidth-f:r=1/0);for(var a=hn(s,"letterSpacing",0),l=hn(s,"hAlign",0),o=hn(s,"vAlign",0),u=hn(s,"charWrap",!1),v={start:t,isLastPage:!1,padding:this.wrapPadding,lineHeight:i,maxLines:n,wrapWidth:r,letterSpacing:a,hAlign:l,vAlign:o,charWrap:u,children:[],lines:[],maxLineWidth:0,linesHeight:0},d=this.children,c=0,p=d.length;c<p;c++)d[c].setActive(!1);r+=a;for(var g=this.padding.left+this.wrapPadding.left,m=this.padding.top+this.wrapPadding.top+i,x=g,y=m,T=r,C=t,S=d.length,E=v.children,M=v.lines,O=[],L=0,R=0,F;C<S;){F=$I(d,C,u,F);var D=F.word,B=D.length,N=F.width+B*a;C+=B;var U=Q1(D[0]);if(T<N||U){if(U){var X=D[0];X.setActive().setPosition(x,y),E.push(X),O.push(X)}if(x=g,y+=i,T=r,M.push({children:O,width:L}),R=Math.max(R,L),L=0,O=[],!h&&M.length===n)break;if(U)continue}T-=N,L+=N;for(var c=0,p=D.length;c<p;c++){var K=D[c];K.setActive(),E.push(K),O.push(K),Bs(K)&&(K.setPosition(x,y),x+=K.outerWidth+a)}}O.length>0&&(M.push({children:O,width:L}),R=Math.max(R,L)),v.start+=E.length,v.isLastPage=v.start===S,v.maxLineWidth=R,v.linesHeight=M.length*i;var k=this.fixedWidth>0?this.fixedWidth:v.maxLineWidth+f,b=this.fixedHeight>0?this.fixedHeight:v.linesHeight+e,I=k-f,G=b-e;KI(v,I,G),this.setSize(k,b);for(var c=0,p=E.length;c<p;c++){var K=E[c];!Bs(K)||(K.x0=K.x,K.y0=K.y)}return v};const ZI=Phaser.Utils.Objects.Merge;var JI=function(s){return s===void 0&&(s={}),kI.call(this,ZI(s,this.wrapConfig))},QI=function(s,t,e){var f=s.hAlign,i=s.vAlign,n,h,r=s.rtl,a=s.lines,l=s.lineWidth,o=s.linesWidth;switch(f){case 1:case"center":n=(t-o)/2;break;case 2:case"right":n=t-o;break;default:n=0;break}r&&(n+=l);for(var u=0,v=a.length;u<v;u++){var d=a[r?v-u-1:u],c=d.children,p=d.height,g=q1(c);switch(g===void 0&&(g=i),g){case 1:case"center":h=(e-p)/2;break;case 2:case"bottom":h=e-p;break;default:h=0;break}_1(c,n,h),n+=l}};const Di=Phaser.Utils.Objects.GetValue;var jI=function(s){var t=Di(s,"start",0);Fs(this.wrapPadding,Di(s,"padding",0));var e=this.padding.top+this.padding.bottom+this.wrapPadding.top+this.wrapPadding.bottom,f=this.padding.left+this.padding.right+this.wrapPadding.left+this.wrapPadding.right,i=Di(s,"lineWidth",void 0),n;if(i===void 0)if(n=Di(s,"maxLines",0),this.fixedWidth>0){var k=this.fixedWidth-f;i=k/n}else i=0;else if(this.fixedWidth>0){if(n=Di(s,"maxLines",void 0),n===void 0){var k=this.fixedWidth-f;n=Math.floor(k/i)+1}}else n=Di(s,"maxLines",0);var h=n===0,r=Di(s,"fixedChildHeight",void 0);if(r===void 0){var a=Di(s,"charPerLine",void 0);if(a!==void 0){var b=this.fixedHeight-e;r=Math.floor(b/a)}}var l=Di(s,"wrapHeight",void 0);l===void 0&&(this.fixedHeight>0?l=this.fixedHeight-e:l=1/0);for(var o=Di(s,"letterSpacing",0),u=Di(s,"rtl",!0),v=Di(s,"hAlign",u?2:0),d=Di(s,"vAlign",0),c={start:t,isLastPage:!1,padding:this.wrapPadding,lineWidth:i,maxLines:n,fixedChildHeight:r,wrapHeight:l,letterSpacing:o,hAlign:v,vAlign:d,rtl:u,children:[],lines:[],maxLineHeight:0,linesWidth:0},p=this.children,g=0,m=p.length;g<m;g++)p[g].setActive(!1);l+=o;for(var x=this.padding.left+this.wrapPadding.left,y=this.padding.top+this.wrapPadding.top,T=x,C=y,S=l,E=t,M=p.length,O=c.children,L=c.lines,R=[],F=0,D=0;E<M;){var B=p[E];if(E++,!Bs(B)){B.setActive(),O.push(B),R.push(B);continue}var N=(r!==void 0?r:B.height)+o,U=Q1(B);if(S<N||U){if(U&&(B.setActive().setPosition(T,C).setOrigin(.5),O.push(B),R.push(B)),T=x,C=y,S=l,L.push({children:R,height:F}),D=Math.max(D,F),F=0,R=[],!h&&L.length===n)break;if(U)continue}S-=N,F+=N,B.setActive().setPosition(T,C).setOrigin(.5),O.push(B),R.push(B),C+=N}R.length>0&&(L.push({children:R,height:F}),D=Math.max(D,F)),c.start+=O.length,c.isLastPage=c.start===M,c.maxLineHeight=D,c.linesWidth=L.length*i;var X=this.fixedWidth>0?this.fixedWidth:c.linesWidth+f,K=this.fixedHeight>0?this.fixedHeight:c.maxLineHeight+e,k=X-f,b=K-e;QI(c,k,b),this.setSize(X,K);for(var g=0,m=O.length;g<m;g++){var I=O[g];!Bs(I)||(I.x0=I.x,I.y0=I.y)}return c};const qI=Phaser.Utils.Objects.Merge;var _I=function(s){return s===void 0&&(s={}),jI.call(this,qI(s,this.wrapConfig))},tD=function(){this.clear(),this.setSize(this.width,this.height),this.background.active&&this.background.draw();for(var s,t=0,e=this.children.length;t<e;t++)s=this.children[t],s.active&&s.visible&&s.draw();this.innerBounds.active&&this.innerBounds.draw()},eD=function(){return this.children},iD=function(){return this.lastAppendedChildren};const nD=Phaser.Utils.Array.GetAll;var sD=function(){return nD(this.children,"active",!0)},rD=function(){for(var s=this.children,t=0,e=0,f=0,i=s.length;f<i;f++){var n=s[f];if(!(!Bs(n)||!n.active||!n.visible)){var h=n.x0!==void 0?n.x0:n.x,r=n.y0!==void 0?n.y0:n.y;t=Math.max(t,h),e=Math.max(e,r)}}var a=t+this.padding.left+this.padding.right+this.wrapPadding.left+this.wrapPadding.right,l=e+this.padding.top+this.padding.bottom+this.wrapPadding.top+this.wrapPadding.bottom;return(this.width!==a||this.height!==l)&&(this.dirty=!0,this.width=a,this.height=l),this},aD={setFixedSize:LI,setPadding:FI,getPadding:wI,modifyTextStyle:II,resetTextStyle:DI,removeChild:BI,removeChildren:bI,clearContent:GI,addChild:NI,setText:UI,appendText:Al,appendImage:j1,appendCommand:$t,setWrapConfig:HI,runWordWrap:JI,runVerticalWrap:_I,drawContent:tD,getChildren:eD,getLastAppendedChildren:iD,getActiveChildren:sD,setToMinSize:rD};const oD=Phaser.Utils.Objects.GetFastValue;var hD={};class lD{constructor(t){this.pools=oD(t,"pools",hD)}free(t){if(!this.pools)return this;var e=t.type;return this.pools.hasOwnProperty(e)||(this.pools[e]=new Is),this.pools[e].push(t),t.onFree(),this}freeMultiple(t){if(!this.pools)return this;for(var e=0,f=t.length;e<f;e++)this.free(t[e]);return this}allocate(t){return!this.pools||!this.pools.hasOwnProperty(t)?null:this.pools[t].pop()}}const em=Phaser.Utils.Objects.IsPlainObject,$i=Phaser.Utils.Objects.GetValue;class yo extends Gn{constructor(t,e,f,i,n,h){em(e)?(h=e,e=$i(h,"x",0),f=$i(h,"y",0),i=$i(h,"width",0),n=$i(h,"height",0)):em(i)&&(h=i,i=$i(h,"width",0),n=$i(h,"height",0));var r=i===0?1:i,a=n===0?1:n;super(t,e,f,r,a),this.type="rexDynamicText",this.autoRound=!0,this.padding=Fs(),this.wrapPadding=Fs();var l=$i(h,"style",void 0);this.defaultTextStyle=new Ml(l),this.textStyle=this.defaultTextStyle.clone(),this.background=new OI(this,$i(h,"background",void 0)),this.innerBounds=new RI(this,$i(h,"innerBounds",void 0)),this.children=[],this.lastAppendedChildren=[],this.poolManager=new lD(h),this.setFixedSize(i,n),this.setPadding($i(h,"padding",0)),this.setWrapConfig($i(h,"wrap",void 0));var o=$i(h,"text",void 0);o&&this.setText(o)}updateTexture(){return this.drawContent(),super.updateTexture(),this}}Object.assign(yo.prototype,aD);xt.register("dynamicText",function(s,t,e,f,i){var n=new yo(this.scene,s,t,e,f,i);return this.scene.add.existing(n),n});Ct(window,"RexPlugins.UI.DynamicText",yo);var sa={setEventEmitter(s,t){return t===void 0&&(t=Phaser.Events.EventEmitter),this._privateEE=s===!0||s===void 0,this._eventEmitter=this._privateEE?new t:s,this},destroyEventEmitter(){return this._eventEmitter&&this._privateEE&&this._eventEmitter.shutdown(),this},getEventEmitter(){return this._eventEmitter},on:function(){return this._eventEmitter&&this._eventEmitter.on.apply(this._eventEmitter,arguments),this},once:function(){return this._eventEmitter&&this._eventEmitter.once.apply(this._eventEmitter,arguments),this},off:function(){return this._eventEmitter&&this._eventEmitter.off.apply(this._eventEmitter,arguments),this},emit:function(s){return this._eventEmitter&&s&&this._eventEmitter.emit.apply(this._eventEmitter,arguments),this},addListener:function(){return this._eventEmitter&&this._eventEmitter.addListener.apply(this._eventEmitter,arguments),this},removeListener:function(){return this._eventEmitter&&this._eventEmitter.removeListener.apply(this._eventEmitter,arguments),this},removeAllListeners:function(){return this._eventEmitter&&this._eventEmitter.removeAllListeners.apply(this._eventEmitter,arguments),this},listenerCount:function(){return this._eventEmitter?this._eventEmitter.listenerCount.apply(this._eventEmitter,arguments):0},listeners:function(){return this._eventEmitter?this._eventEmitter.listeners.apply(this._eventEmitter,arguments):[]},eventNames:function(){return this._eventEmitter?this._eventEmitter.eventNames.apply(this._eventEmitter,arguments):[]}},tT=function(s){if(s==null||typeof s!="object")return null;if(_r(s))return s;if(s.scene&&_r(s.scene))return s.scene;if(s.parent&&s.parent.scene&&_r(s.parent.scene))return s.parent.scene};const uD=Phaser.Utils.Objects.GetValue;class He{constructor(t,e){this.parent=t,this.scene=tT(t),this.isShutdown=!1,this.setEventEmitter(uD(e,"eventEmitter",!0)),this.parent&&this.parent===this.scene?this.scene.sys.events.once("shutdown",this.onSceneDestroy,this):this.parent&&this.parent.once&&this.parent.once("destroy",this.onParentDestroy,this)}shutdown(t){this.isShutdown||(this.parent&&this.parent===this.scene?this.scene.sys.events.off("shutdown",this.onSceneDestroy,this):this.parent&&this.parent.once&&this.parent.off("destroy",this.onParentDestroy,this),this.destroyEventEmitter(),this.parent=void 0,this.scene=void 0,this.isShutdown=!0)}destroy(t){this.shutdown(t)}onSceneDestroy(){this.destroy(!0)}onParentDestroy(t,e){this.destroy(e)}}Object.assign(He.prototype,sa);const fD=Phaser.Utils.Objects.GetValue;class Ol extends He{constructor(t,e){super(t,e),this._isRunning=!1,this.isPaused=!1,this.tickingState=!1,this.setTickingMode(fD(e,"tickingMode",1))}boot(){this.tickingMode===2&&!this.tickingState&&this.startTicking()}shutdown(t){this.isShutdown||(this.stop(),this.tickingState&&this.stopTicking(),super.shutdown(t))}setTickingMode(t){typeof t=="string"&&(t=dD[t]),this.tickingMode=t}startTicking(){this.tickingState=!0}stopTicking(){this.tickingState=!1}get isRunning(){return this._isRunning}set isRunning(t){this._isRunning!==t&&(this._isRunning=t,this.tickingMode===1&&t!=this.tickingState&&(t?this.startTicking():this.stopTicking()))}start(){return this.isPaused=!1,this.isRunning=!0,this}pause(){return this.isRunning&&(this.isPaused=!0,this.isRunning=!1),this}resume(){return this.isPaused&&(this.isRunning=!0),this}stop(){return this.isPaused=!1,this.isRunning=!1,this}complete(){this.isPaused=!1,this.isRunning=!1,this.emit("complete",this.parent,this)}}const dD={no:0,lazy:1,always:2},cD=Phaser.Utils.Objects.GetValue;class vD extends Ol{constructor(t,e){super(t,e),this.tickEventName=cD(e,"tickEventName","update")}startTicking(){super.startTicking(),this.scene.sys.events.on(this.tickEventName,this.update,this)}stopTicking(){super.stopTicking(),this.scene&&this.scene.sys.events.off(this.tickEventName,this.update,this)}}const _n=Phaser.Utils.Objects.GetValue,im=Phaser.Math.Clamp;class eT{constructor(t){this.resetFromJSON(t)}resetFromJSON(t){this.state=_n(t,"state",Ia),this.timeScale=_n(t,"timeScale",1),this.delay=_n(t,"delay",0),this.repeat=_n(t,"repeat",0),this.repeatCounter=_n(t,"repeatCounter",0),this.repeatDelay=_n(t,"repeatDelay",0),this.duration=_n(t,"duration",0),this.nowTime=_n(t,"nowTime",0),this.justRestart=_n(t,"justRestart",!1)}toJSON(){return{state:this.state,timeScale:this.timeScale,delay:this.delay,repeat:this.repeat,repeatCounter:this.repeatCounter,repeatDelay:this.repeatDelay,duration:this.duration,nowTime:this.nowTime,justRestart:this.justRestart}}destroy(){}setTimeScale(t){return this.timeScale=t,this}setDelay(t){return t===void 0&&(t=0),this.delay=t,this}setDuration(t){return this.duration=t,this}setRepeat(t){return this.repeat=t,this}setRepeatInfinity(){return this.repeat=-1,this}setRepeatDelay(t){return this.repeatDelay=t,this}start(){return this.nowTime=this.delay>0?-this.delay:0,this.state=this.nowTime>=0?wr:Da,this.repeatCounter=0,this}stop(){return this.state=Ia,this}update(t,e){this.state===Ia||this.state===Rh||e===0||this.timeScale===0||(this.nowTime+=e*this.timeScale,this.justRestart=!1,this.nowTime>=this.duration?this.repeat===-1||this.repeatCounter<this.repeat?(this.repeatCounter++,this.justRestart=!0,this.nowTime-=this.duration,this.repeatDelay>0&&(this.nowTime-=this.repeatDelay,this.state=nm)):(this.nowTime=this.duration,this.state=Rh):this.nowTime>=0&&(this.state=wr))}get t(){var t;switch(this.state){case Ia:case Da:case nm:t=0;break;case wr:t=this.nowTime/this.duration;break;case Rh:t=1;break}return im(t,0,1)}set t(t){t=im(t,-1,1),t<0?(this.state=Da,this.nowTime=-this.delay*t):(this.state=wr,this.nowTime=this.duration*t,t===1&&this.repeat!==0&&this.repeatCounter++)}setT(t){return this.t=t,this}get isIdle(){return this.state===Ia}get isDelay(){return this.state===Da}get isCountDown(){return this.state===wr}get isRunning(){return this.state===Da||this.state===wr}get isDone(){return this.state===Rh}get isOddIteration(){return(this.repeatCounter&1)===1}get isEvenIteration(){return(this.repeatCounter&1)===0}}const Ia=0,Da=1,wr=2,nm=3,Rh=-1;class pD extends vD{constructor(t,e){super(t,e),this.timer=new eT}shutdown(t){this.isShutdown||(super.shutdown(t),this.timer.destroy(),this.timer=void 0)}start(){return this.timer.start(),super.start(),this}stop(){return this.timer.stop(),super.stop(),this}complete(){return this.timer.stop(),super.complete(),this}}const Ba=Phaser.Utils.Objects.GetValue,sm=Phaser.Utils.Objects.GetAdvancedValue,gD=Phaser.Tweens.Builders.GetEaseFunction;class ur extends pD{resetFromJSON(t){return this.timer.resetFromJSON(Ba(t,"timer")),this.setEnable(Ba(t,"enable",!0)),this.setTarget(Ba(t,"target",this.parent)),this.setDelay(sm(t,"delay",0)),this.setDuration(sm(t,"duration",1e3)),this.setEase(Ba(t,"ease","Linear")),this.setRepeat(Ba(t,"repeat",0)),this}setEnable(t){return t==null&&(t=!0),this.enable=t,this}setTarget(t){return t===void 0&&(t=this.parent),this.target=t,this}setDelay(t){return this.delay=t,this}setDuration(t){return this.duration=t,this}setRepeat(t){return this.repeat=t,this}setRepeatDelay(t){return this.repeatDelay=t,this}setEase(t){return t===void 0&&(t="Linear"),this.ease=t,this.easeFn=gD(t),this}start(){return this.timer.isRunning?this:(super.start(),this)}restart(){return this.timer.stop(),this.start.apply(this,arguments),this}stop(t){return t===void 0&&(t=!1),super.stop(),t&&(this.timer.setT(1),this.updateGameObject(this.target,this.timer),this.complete()),this}update(t,e){if(!this.isRunning||!this.enable||!this.parent.active)return this;var f=this.target,i=this.timer;return i.update(t,e),i.isDelay||this.updateGameObject(f,i),this.emit("update",f,this),i.isDone&&this.complete(),this}updateGameObject(t,e){}}const rm=Phaser.Utils.Objects.GetValue,am=Phaser.Utils.Objects.GetAdvancedValue,mD=Phaser.Math.Linear;class iT extends ur{constructor(t,e,f){e.scene=t,e.active=!0,super(e,f),this.volume={},this.resetFromJSON(f)}resetFromJSON(t){return super.resetFromJSON(t),this.setMode(rm(t,"mode",0)),this.setEnable(rm(t,"enable",!0)),this.setVolumeRange(am(t,"volume.start",this.parent.volume),am(t,"volume.end",0)),this}setMode(t){return typeof t=="string"&&(t=xD[t]),this.mode=t,this}setVolumeRange(t,e){return this.volume.start=t,this.volume.end=e,this}start(){return this.timer.isRunning?this:(this.parent.setVolume(this.volume.start),this.timer.setDelay(this.delay).setDuration(this.duration),super.start(),this)}updateGameObject(t,e){t.volume=mD(this.volume.start,this.volume.end,e.t)}complete(){switch(super.complete(),this.mode){case 1:this.parent.stop();break;case 2:this.parent.destroy();break}return this}}const xD={stop:1,destroy:2};var om=function(s,t,e,f,i){f===void 0&&(f=1),i===void 0&&(i=0);var n={mode:0,volume:{start:i,end:f},duration:e};typeof t=="string"&&(t=s.sys.sound.add(t));var h;return t.hasOwnProperty("_fade")?(h=t._fade,h.stop().resetFromJSON(n)):(h=new iT(s,t,n),t._fade=h),h.start(),t.isPlaying||t.setVolume(i).play(),t},bf=function(s,t,e,f){f===void 0&&(f=!0);var i={mode:f?2:1,volume:{start:t.volume,end:0},duration:e},n;return t.hasOwnProperty("_fade")?(n=t._fade,n.stop().resetFromJSON(i)):(n=new iT(s,t,i),t._fade=n),n.start(),t.isPlaying||t.play(),t};const Gf=Phaser.Utils.Objects.GetValue,hm=Phaser.Utils.Array.Remove;class yD{constructor(t,e){this.scene=t,this.soundEffects=[],this.backgroundMusic=void 0,this.setBackgroundMusicLoopValue(Gf(e,"bgm.loop",!0)),this.setBackgroundMusicFadeTime(Gf(e,"bgm.fade",500));var f=Gf(e,"bgm.initial",void 0);f&&this.setCurrentBackgroundMusic(f)}destroy(t){if(this.soundEffects.length&&!t)for(var e=this.soundEffects.length-1;e>=0;e--)this.soundEffects[e].destroy();this.soundEffects.length=0,this.backgroundMusic&&!t&&this.backgroundMusic.destroy(),this.backgroundMusic=void 0,this.scene=void 0}setBackgroundMusicLoopValue(t){return this.backgroundMusicLoopValue=t,this}setBackgroundMusicFadeTime(t){return this.backgroundMusicFadeTime=t,this}getSoundEffects(){return this.soundEffects}getLastSoundEffect(){return this.soundEffects[this.soundEffects.length-1]}getBackgroundMusic(){return this.backgroundMusic}playSoundEffect(t){var e=this.scene.sys.sound.add(t);return this.soundEffects.push(e),e.once("complete",function(){e.destroy(),this.scene&&hm(this.soundEffects,e)},this).once("destroy",function(){!this.scene||hm(this.soundEffects,e)},this).play(),this}setSoundEffectVolume(t){var e=this.getLastSoundEffect();return e&&e.setVolume(t),this}fadeInSoundEffect(t){var e=this.getLastSoundEffect();return e&&om(this.scene,e,t),this}fadeOutSoundEffect(t,e){var f=this.getLastSoundEffect();return f&&bf(this.scene,f,t,e),this}fadeOutAllSoundEffects(t,e){for(var f=this.soundEffects.length-1;f>=0;f--)bf(this.scene,this.soundEffects[f],t,e);return this}setCurrentBackgroundMusic(t){this.backgroundMusic=t,t&&(t.setLoop(this.backgroundMusicLoopValue),t.once("complete",function(){this.backgroundMusic.destroy(),this.backgroundMusic=void 0},this).once("destroy",function(){this.backgroundMusic=void 0},this),t.isPlaying||t.play())}playBackgroundMusic(t){return this.backgroundMusic&&this.backgroundMusic.key===t?this:(this.stopBackgroundMusic(),this.setCurrentBackgroundMusic(this.scene.sys.sound.add(t)),this.backgroundMusicFadeTime>0&&this.fadeInBackgroundMusic(this.backgroundMusicFadeTime),this)}pauseBackgroundMusic(){return this.backgroundMusic&&this.backgroundMusic.pause(),this}resumeBackgroundMusic(){return this.backgroundMusic&&this.backgroundMusic.resume(),this}stopBackgroundMusic(){return this.backgroundMusic&&(this.backgroundMusicFadeTime>0?this.fadeOutBackgroundMusic(this.backgroundMusicFadeTime,!0):(this.backgroundMusic.stop(),this.backgroundMusic.destroy(),this.backgroundMusic=void 0)),this}fadeInBackgroundMusic(t){return this.backgroundMusic&&om(this.scene,this.backgroundMusic,t),this}fadeOutBackgroundMusic(t,e){return this.backgroundMusic&&bf(this.scene,this.backgroundMusic,t,e),this}crossFadeBackgroundMusic(t,e){var f=this.backgroundMusicFadeTime;return this.backgroundMusicFadeTime=0,this.fadeOutBackgroundMusic(e,!0).playBackgroundMusic(t).fadeInBackgroundMusic(e),this.backgroundMusicFadeTime=f,this}}const Nf=Phaser.Utils.Objects.GetValue;class TD extends Ol{constructor(t,e){super(t,e),this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.isRunning=Nf(t,"isRunning",!1),this.timeScale=Nf(t,"timeScale",1),this.now=Nf(t,"now",0),this}toJSON(){return{isRunning:this.isRunning,timeScale:this.timeScale,now:this.now,tickingMode:this.tickingMode}}start(t){return t===void 0&&(t=0),this.delta=0,this.now=t,super.start(),this}seek(t){return this.now=t,this}setTimeScale(t){return this.timeScale=t,this}tick(t){return t*=this.timeScale,this.now+=t,this.delta=t,this.emit("update",this.now,this.delta),this}}class nT extends TD{startTicking(){super.startTicking(),this.scene.sys.events.on("update",this.update,this)}stopTicking(){super.stopTicking(),this.scene&&this.scene.sys.events.off("update",this.update,this)}update(t,e){return!this.isRunning||this.timeScale===0?this:(this.tick(e),this)}}var CD=function(s,t){return t===void 0&&(t=.5),s<=t?s=s/t:s=1-(s-t)/(1-t),s};const lm=Phaser.Math.Clamp;class SD{constructor(t,e){this.setTimeline(t).reset(e)}setTimeline(t){return this.timeline=t,this}setName(t){return this.name=t,this}setCallbacks(t,e,f,i){return this.target=t,this.onStart=e,this.onProgress=f,this.onComplete=i,this}setDuration(t,e){return e===void 0&&(e=!1),this.duration=t,this.remainder=t,this.t=0,this.yoyo=e,this}setPaused(t){return this.isPaused=t,this}pause(){return this.isPaused=!0,this}resume(){return this.isPaused=!1,this}setRemoved(t){return this.removed=t,this}remove(){return this.removed=!0,this}seek(t){return this.remainder=this.duration*(1-t),this}reset(t){return this.setName(t.name).setDuration(t.duration,t.yoyo).setCallbacks(t.target,t.onStart,t.onProgress,t.onComplete).setPaused(!1).setRemoved(!1),this}onFree(){this.setTimeline().setCallbacks()}getProgress(){var t=1-this.remainder/this.duration;return t=lm(t,0,1),this.yoyo&&(t=CD(t)),t}setProgress(t){t=lm(t,0,1),this.remainder=this.duration*(1-t)}runCallback(t){!t||t(this.target,this.t,this)}update(t,e){if(this.removed)return!0;if(this.isPaused)return!1;this.remainder-=e,this.t=this.getProgress(),this.runCallback(this.onProgress);var f=this.remainder<=0;return f&&this.runCallback(this.onComplete),f}}class ED extends Is{allocate(){return this.pop()}free(t){t.onFree(),this.push(t)}freeMultiple(t){for(var e=0,f=t.length;e<f;e++)this.free(t[e]);return this}}const PD=Phaser.Utils.Objects.GetValue,MD=new ED;class AD extends nT{constructor(t,e){super(t,e),this.addedTimers=[],this.timers=[],this.timerPool=PD(e,"pool",MD)}shutdown(){this.isShutdown||(this.timerPool.freeMultiple(this.addedTimers).freeMultiple(this.timers),this.timerPool=void 0,this.addedTimers=void 0,this.timers=void 0,super.shutdown())}addTimer(t){var e=this.timerPool.allocate();return e?e.setTimeline(this).reset(t):e=new SD(this,t),this.addedTimers.push(e),e.runCallback(e.onStart),this.isRunning||this.start(),e}delayCall(t,e,f,i){var n=this.addTimer({duration:t,onComplete:function(h,r,a){f===void 0&&(f=[]),f.push(a),e.apply(i,f)}});return n}getTimers(t){for(var e=[],f=[this.addedTimers,this.timers],i=0,n=f.length;i<n;i++)for(var h=f[i],r=0,a=h.length;r<a;r++){var l=h[r];l.name===t&&e.push(l)}return e}update(t,e){super.update(t,e),this.timers.push(...this.addedTimers),this.addedTimers.length=0;for(var f=[],i=0,n=this.timers.length;i<n;i++){var h=this.timers[i],r=h.update(this.now,this.delta);r?this.timerPool.free(h):f.push(h)}this.timers=f,this.timers.length===0&&this.addedTimers.length===0&&this.complete()}}const OD=Phaser.Utils.Objects.GetValue;var RD=function(s,t){var e=OD(t,"sounds");return e!==!1&&(this.soundManager=new yD(s,e)),this.gameObjectManagers={},this.timeline=new AD(this),this.managersScene=s,this},LD=function(s){this.soundManager&&this.soundManager.destroy(s),this.soundManager=void 0;for(var t in this.gameObjectManagers)this.gameObjectManagers.destroy(s),delete this.gameObjectManagers[t];this.timeline&&this.timeline.destroy(),this.timeline=void 0,this.managersScene=void 0},FD={hasProperty(s){var t=this.gameObject;if(t.hasOwnProperty(s))return!0;var e=t[s];return e!==void 0},getProperty(s){return this.gameObject[s]},setProperty(s,t){return this.gameObject[s]=t,this},easeProperty(s,t,e,f,i,n,h){var r=this.tweens,a=r[s];a&&a.remove();var l=this.gameObject,o={targets:l,duration:e,ease:f,repeat:i,yoyo:n,onComplete:function(){r[s].remove(),r[s]=null,h&&h(l,s)},onCompleteScope:this};return o[s]=t,a=this.scene.tweens.add(o),a.timeScale=this.timeScale,r[s]=a,this}},wD={hasMethod(s){return typeof this.gameObject[s]=="function"},call(s,...t){if(!this.hasMethod(s))return this;var e=this.gameObject;return e[s].apply(e,t),this}},ID={hasData(s){var t=this.gameObject;return t.data?t.data.has(s):!1},getData(s){return this.gameObject.getData(s)},setData(s,t){return this.gameObject.setData(s,t),this}};class Ec{constructor(t,e,f){this.GOManager=t,this.tweens={},this.setGO(e,f)}get scene(){return this.GOManager.scene}get timeScale(){return this.GOManager.timeScale}destroy(){this.freeGO(),this.GOManager=void 0}freeTweens(){var t=this.tweens,e;for(var f in t)e=t[f],e&&e.remove(),t[f]=null;return this}freeGO(){return this.freeTweens(),this.gameObject.destroy(),this.gameObject=void 0,this}setGO(t,e){return t.setName(e),this.gameObject=t,this.name=e,this.freeTweens(),this}setTimeScale(t){var e=this.tweens;for(var f in e)e[f].timeScale=t;return this}}Object.assign(Ec.prototype,FD,wD,ID);var DD=function(s){for(var t in s)return!1;return!0};const BD={tint:0,alpha:1};var bD={setGOFadeMode(s){return typeof s=="string"&&(s=BD[s]),this.fadeMode=s,this},setGOFadeTime(s){return this.fadeTime=s,this},hasTintFadeEffect(s){return(this.fadeMode===void 0||this.fadeMode===0)&&this.fadeTime>0&&s.setTint!==void 0},hasAlphaFadeEffect(s){return(this.fadeMode===void 0||this.fadeMode===1)&&this.fadeTime>0&&s.setAlpha!==void 0},fadeBob(s,t,e,f){var i=s.gameObject;return this.hasTintFadeEffect(i)?(t!==void 0&&s.setProperty("tintGray",255*t),s.easeProperty("tintGray",Math.floor(255*e),this.fadeTime,"Linear",0,!1,f)):this.hasAlphaFadeEffect(i)?(t!==void 0&&s.setProperty("alpha",t),s.easeProperty("alpha",e,this.fadeTime,"Linear",0,!1,f)):f&&f(i),this}},um=function(s){return s>>16&255},fm=function(s){return s>>8&255},dm=function(s){return s&255};const GD=~(255<<16)&16777215,ND=~(255<<8)&16777215,YD=16776960;var zD=function(s,t){return(t&255)<<16|s&GD},VD=function(s,t){return(t&255)<<8|s&ND},UD=function(s,t){return t&255|s&YD},WD=function(s,t,e,f){return(t&255)<<16|(e&255)<<8|f&255},XD=function(s,t){if(s.hasOwnProperty("tintR"))return s;t===void 0&&(t=16777215);var e=um(t),f=fm(t),i=dm(t);return Object.defineProperty(s,"tint",{get:function(){return t},set:function(n){n=Math.floor(n)&16777215,s.setTint&&s.setTint(n),t!==n&&(t=n,e=um(t),f=fm(t),i=dm(t))}}),Object.defineProperty(s,"tintR",{get:function(){return e},set:function(n){n=Math.floor(n)&255,e!==n&&(e=n,s.tint=zD(t,n))}}),Object.defineProperty(s,"tintG",{get:function(){return f},set:function(n){n=Math.floor(n)&255,f!==n&&(f=n,s.tint=VD(t,n))}}),Object.defineProperty(s,"tintB",{get:function(){return i},set:function(n){n=Math.floor(n)&255,i!==n&&(i=n,s.tint=UD(t,n))}}),Object.defineProperty(s,"tintGray",{get:function(){return Math.floor((e+f+i)/3)},set:function(n){n=Math.floor(n)&255,(e!==n||f!==n||i!==n)&&(e=n,f=n,i=n,s.tint=WD(t,n,n,n))}}),s.tint=t,s};const HD=Phaser.Events.EventEmitter;var $D=function(s){if(s.events)return s;var t=new HD,e=s.x;Object.defineProperty(s,"x",{get:function(){return e},set:function(h){e!==h&&(e=h,t.emit("update",s))}});var f=s.y;Object.defineProperty(s,"y",{get:function(){return f},set:function(h){f!==h&&(f=h,t.emit("update",s))}});var i=s.width;Object.defineProperty(s,"width",{get:function(){return i},set:function(h){i!==h&&(i=h,t.emit("update",s))}});var n=s.height;return Object.defineProperty(s,"height",{get:function(){return n},set:function(h){n!==h&&(n=h,t.emit("update",s))}}),s.events=t,s},KD=function(s,t,e,f,i){if(s.hasOwnProperty("vp"))return s;e===void 0&&(e=.5),f===void 0&&(f=.5),i===void 0&&(i=kD),$D(t);var n=t.events;s.vp=t;var h=function(){i(s,t,e,f)};n.on("update",h),s.once("destroy",function(){n.off("update",h),s.vp=void 0}),Object.defineProperty(s,"vpx",{get:function(){return e},set:function(r){e!==r&&(e=r,h())}}),Object.defineProperty(s,"vpy",{get:function(){return f},set:function(r){f!==r&&(f=r,h())}}),h()},kD=function(s,t,e,f){s.x=t.x+t.width*e,s.y=t.y+t.height*f};const ZD=Phaser.Utils.Array.Remove;var JD={has(s){return this.bobs.hasOwnProperty(s)},get(s){return this.bobs[s]},getGO(s){var t=this.get(s);return t?t.gameObject:null},addGO(s,t){this.remove(s,!0),this.hasTintFadeEffect(t)&&XD(t),this.viewportCoordinateEnable&&KD(t,this.viewport),t.once("destroy",function(){ZD(this.removedGOs,t),this.isEmpty&&this.emit("empty")},this);var e=new this.BobClass(this,t,s);return this.bobs[s]=e,this},add(s,...t){var e=this.createGameObjectCallback,f=this.createGameObjectScope,i=e.call(f,this.scene,...t);this.addGO(s,i);var n=this.get(s);return this.fadeBob(n,0,1),this},forEachGO(s,t){for(var e in this.bobs){var f=this.bobs[e].gameObject,i;if(t?i=s.call(t,f,e,this):i=s(f,e,this),i)break}return this}},QD={remove(s,t){if(!this.has(s))return this;var e=this.get(s);return delete this.bobs[s],this.removedGOs.push(e.gameObject),t?e.destroy():this.fadeBob(e,void 0,0,function(){e.destroy()}),this},removeAll(){var s=this.bobs;for(var t in s)this.remove(t);return this},clear(s){s===void 0&&(s=!0);var t=this.bobs;for(var e in t)s&&t[e].destroy(),delete t[e];return this.removedGOs.length=0,this}},jD={hasProperty(s,t){return this.has(s)?this.get(s).hasProperty(t):!1},getProperty(s,t){if(!!this.has(s))return this.get(s).getProperty(t)},setProperty(s,t,e){return this.has(s)?(this.get(s).setProperty(t,e),this):this},easeProperty(s,t,e,f,i,n,h,r){return this.has(s)?(f===void 0&&(f=1e3),i===void 0&&(i="Linear"),n===void 0&&(n=0),h===void 0&&(h=!1),this.get(s).easeProperty(t,e,f,i,n,h,r),this):this},hasTweenTask(s,t){if(!this.has(s))return!1;var e=this.get(s).tweens;return e.hasOwnProperty(t)},getTweenTask(s,t){if(!this.has(s))return null;var e=this.get(s).tweens,f=e[t];return f||null}},qD={hasMethod(s,t){return this.has(s)?this.get(s).hasMethod(t):!1},call(s,t,...e){return this.has(s)?(this.get(s).call(t,...e),this):this}},_D={hasData(s,t){return this.has(s)?this.get(s).hasData(t):!1},getData(s,t){if(!!this.has(s))return this.get(s).getData(t)},setData(s,t,e){return this.has(s)?(this.get(s).setData(t,e),this):this}},tB=function(s,t){return this.forEachGO(function(e){e.drawBounds?e.drawBounds(s,t):Z1(e,s,t)}),this},sT={drawGameObjectsBounds:tB};Object.assign(sT,bD,JD,QD,jD,qD,_D);const eB=Phaser.Cameras.Scene2D.BaseCamera;var iB=function(s){return s instanceof eB};const rT=Phaser.Geom.Rectangle;var ra=function(s,t,e){iB(t)||(e=t,t=void 0),e===void 0?e=new rT:e===!0&&(e=nB);var f=s.sys.scale,i=f.baseSize,n=f.parentSize,h=f.canvasBounds,r=f.displayScale,a=h.x>=0?0:-(h.x*r.x),l=h.y>=0?0:-(h.y*r.y),o;n.width>=h.width?o=i.width:o=i.width-(h.width-n.width)*r.x;var u;if(n.height>=h.height?u=i.height:u=i.height-(h.height-n.height)*r.y,e.setTo(a,l,o,u),t){var v=t.scrollX,d=t.scrollY,c=1/t.zoomX,p=1/t.zoomY;e.width*=c,e.height*=p,e.centerX=t.centerX+v,e.centerY=t.centerY+d}return e},nB=new rT;const En=Phaser.Utils.Objects.GetValue;class Rl{constructor(t,e){this.scene=t,this.BobClass=En(e,"BobClass",Ec),this.setCreateGameObjectCallback(En(e,"createGameObject"),En(e,"createGameObjectScope")),this.setEventEmitter(En(e,"eventEmitter",void 0));var f=En(e,"fade",500);typeof f=="number"?(this.setGOFadeMode(),this.setGOFadeTime(f)):(this.setGOFadeMode(En(f,"mode")),this.setGOFadeTime(En(f,"time",500)));var i=En(e,"viewportCoordinate",!1);i!==!1?(this.setViewportCoordinateEnable(En(e,"enable",!0)),this.setViewport(En(i,"viewport"))):this.setViewportCoordinateEnable(!1),this.bobs={},this.removedGOs=[],this._timeScale=1}destroy(t){this.clear(!t),this.createGameObjectCallback=void 0,this.viewport=void 0,this.scene=void 0}set timeScale(t){if(this._timeScale!==t){this._timeScale=t;var e=this.bobs;for(var f in e)e[f].setTimeScale(t)}}get timeScale(){return this._timeScale}setTimeScale(t){return this.timeScale=t,this}setCreateGameObjectCallback(t,e){return this.createGameObjectCallback=t,this.createGameObjectScope=e,this}setViewportCoordinateEnable(t){return t===void 0&&(t=!0),this.viewportCoordinateEnable=t,this}setViewport(t){return t===void 0&&(t=ra(this.scene,this.scene.cameras.main)),this.viewport=t,this}get isEmpty(){return DD(this.bobs)&&this.removedGOs.length===0}}Object.assign(Rl.prototype,sa,sT);var sB={addGameObjectManager(s,t){s===void 0&&(s={}),t===void 0&&(t=Rl),s.createGameObjectScope||(s.createGameObjectScope=this);var e=new t(this.managersScene,s);return this.gameObjectManagers[s.name]=e,this},getGameObjectManager(s){return this.gameObjectManagers[s]},getGameObjectManagerNames(){var s=[];for(var t in this.gameObjectManagers)s.push(t);return s}},rB={createGameObject(s,t,...e){return this.getGameObjectManager(s).add(t,...e),this},destroyGameObject(s,t){var e=this.getGameObjectManager(s);return t===void 0?e.removeAll():e.remove(t),this},callGameObjectMethod(s,t,e,...f){return this.getGameObjectManager(s).call(t,e,...f),this},setGameObjectProperty(s,t,e,f){return this.getGameObjectManager(s).setProperty(t,e,f),this},easeGameObjectProperty(s,t,e,f,i,n,h,r){return this.getGameObjectManager(s).easeProperty(t,e,f,i,n,h,r),this},getGameObject(s,t,e){var f=this.getGameObjectManager(s);if(typeof t=="string")return f.getGO(t);var i=t;i===void 0&&(i=f.bobs),e===void 0&&(e={});for(t in i)e[t]=f.getGO(t);return e},addGameObject(s,t,e){var f=this.getGameObjectManager(s);if(typeof t=="string")f.addGO(t,e);else{var i=t;for(t in i)f.addGO(t,i[t])}return this},drawGameObjectsBounds(s,t,e){s instanceof Phaser.GameObjects.Graphics&&(e=t,t=s,s=void 0),s===void 0&&(s=this.getGameObjectManagerNames()),Array.isArray(s)||(s=[s]);for(var f=0,i=s.length;f<i;f++)this.getGameObjectManager(s[f]).drawGameObjectsBounds(t,e);return this}},aB=function(s){class t extends s{}var e={initManagers:RD,destroyManagers:LD};return Object.assign(t.prototype,e,sB,rB),t},Ir=function(s){return s.replace(oB,"\\$&").replace(hB,"\\x2d")},oB=/[|\\{}()[\]^$+*?.]/g,hB=/-/g,lB=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,aT=function(s){return typeof s!="string"||(s===""?s=null:lB.test(s)?s=parseFloat(s):s==="false"?s=!1:s==="true"&&(s=!0)),s},uB=function(s,t){if(s==null)return[];for(var e=s.split(","),f=0,i=e.length;f<i;f++)e[f]=t(e[f]);return e};const fB="[!$a-z0-9-_.]+",dB="[ !$a-z0-9-_.#,|&]+",cB=function(s){return s};class oT{constructor(t){this.setEventEmitter(pi(t,"eventEmitter",void 0)),this.setTagExpression(pi(t,"regex.tag",fB)),this.setValueExpression(pi(t,"regex.value",dB)),this.setValueConverter(pi(t,"valueConvert",!0));var e=pi(t,"delimiters","<>");this.setDelimiters(e[0],e[1]),this.setLoopEnable(pi(t,"loop",!1)),this.isRunning=!1,this.isPaused=!1,this.skipEventFlag=!1,this.justCompleted=!1,this.lastTagStart=null,this.lastTagEnd=null,this.lastContent=null}shutdown(){this.destroyEventEmitter()}destroy(){this.shutdown()}setTagExpression(t){return this.tagExpression=t,this}setValueExpression(t){return this.valueExpression=t,this}setValueConverter(t){return t===!0?t=aT:t||(t=cB),this.valueConverter=t,this}setDelimiters(t,e){e===void 0&&(e=t[1],t=t[0]),this.delimiterLeft=t,this.delimiterRight=e,t=Ir(t),e=Ir(e);var f=`${t}(${this.tagExpression})(=(${this.valueExpression}))?${e}`,i=`${t}/(${this.tagExpression})${e}`;return this.reTagOn=RegExp(f,"i"),this.reTagOff=RegExp(i,"i"),this.reSplit=RegExp(`${f}|${i}`,"gi"),this}setLoopEnable(t){return t===void 0&&(t=!0),this.loopEnable=t,this}setSource(t){return this.source=t,this}resetIndex(t){return t===void 0&&(t=0),this.progressIndex=t,this.reSplit.lastIndex=t,this.lastTagStart=null,this.lastTagEnd=null,this.lastContent=null,this.justCompleted=!1,this.isRunning=!1,this}start(t){return this.setSource(t).restart(),this}restart(){this.resetIndex().next()}next(){if(this.isPaused&&this.onResume(),this.isRunning)return this;if(this.isRunning=!0,this.justCompleted)return this.isRunning=!1,this;this.reSplit.lastIndex===0&&this.onStart();var t=this.source,e=t.length;for(this.reSplit.lastIndex=this.progressIndex;;){var f=this.reSplit.exec(t);if(!f){if(this.progressIndex<e&&(this.onContent(t.substring(this.progressIndex,e)),this.isPaused)){this.progressIndex=e;break}this.onComplete(),this.isRunning=!1;return}var i=f[0],n=this.reSplit.lastIndex,h=n-i.length;if(this.progressIndex<h&&(this.onContent(t.substring(this.progressIndex,h)),this.isPaused)){this.progressIndex=h;break}if(this.reTagOff.test(i)?this.onTagEnd(i):this.onTagStart(i),this.progressIndex=n,this.isPaused)break}return this.isRunning=!1,this}skipEvent(){return this.skipEventFlag=!0,this}pause(){return this.isPaused||this.onPause(),this}pauseUntilEvent(t,e){return this.isPaused?this:(this.pause(),t.once(e,function(){this.next()},this),this)}onContent(t){this.skipEventFlag=!1,this.emit("content",t),this.lastContent=t}onTagStart(t){var e=t.match(this.reTagOn),f=e[1],i=uB(e[3],this.valueConverter);this.skipEventFlag=!1,this.emit(`+${f}`,...i),this.skipEventFlag||this.emit("+",f,...i),this.lastTagStart=f}onTagEnd(t){var e=t.match(this.reTagOff)[1];this.skipEventFlag=!1,this.emit(`-${e}`),this.skipEventFlag||this.emit("-",e),this.lastTagEnd=e}onStart(){this.isRunning=!0,this.emit("start",this)}onComplete(){this.isRunning=!1,this.justCompleted=!0,this.emit("complete",this),this.loopEnable&&this.resetIndex()}onPause(){this.isPaused=!0,this.emit("pause",this)}onResume(){this.isPaused=!1,this.emit("resume",this)}getTagOnRegString(t,e){return t===void 0&&(t=this.tagExpression),e===void 0&&(e=this.valueExpression),`${Ir(this.delimiterLeft)}(${t})(=(${e}))?${Ir(this.delimiterRight)}`}getTagOffRegString(t){return t===void 0&&(t=this.tagExpression),`${Ir(this.delimiterLeft)}/(${t})${Ir(this.delimiterRight)}`}}Object.assign(oT.prototype,sa);var vB=function(s,t,e){var f="color",i;t.on("start",function(){i=s.textStyle.color}).on(`+${f}`,function(n){s.textStyle.setColor(n),t.skipEvent()}).on(`-${f}`,function(){s.textStyle.setColor(i),t.skipEvent()}).on("complete",function(){s.textStyle.setColor(i)})},pB=function(s,t,e){var f="stroke",i;t.on("start",function(){i=s.textStyle.stroke,s.textStyle.setStrokeStyle(null)}).on(`+${f}`,function(n){n===void 0&&(n=i),s.textStyle.setStrokeStyle(n),t.skipEvent()}).on(`-${f}`,function(){s.textStyle.setStrokeStyle(null),t.skipEvent()}).on("complete",function(){s.textStyle.setStrokeStyle(i)})},gB=function(s,t,e){var f="b";t.on("start",function(){s.textStyle.setBold(!1)}).on(`+${f}`,function(){s.textStyle.setBold(!0),t.skipEvent()}).on(`-${f}`,function(){s.textStyle.setBold(!1),t.skipEvent()})},mB=function(s,t,e){var f="i";t.on("start",function(){s.textStyle.setItalic(!1)}).on(`+${f}`,function(){s.textStyle.setItalic(!0),t.skipEvent()}).on(`-${f}`,function(){s.textStyle.setItalic(!1),t.skipEvent()})},xB=function(s,t,e){var f="size",i;t.on("start",function(){i=s.textStyle.fontSize}).on(`+${f}`,function(n){s.textStyle.setFontSize(n),t.skipEvent()}).on(`-${f}`,function(){s.textStyle.setFontSize(i),t.skipEvent()}).on("complete",function(){s.textStyle.setFontSize(i)})},yB=function(s,t,e){var f="y",i;t.on("start",function(){i=s.textStyle.offsetY,s.textStyle.setOffsetY(0)}).on(`+${f}`,function(n){n===void 0&&(n=i),s.textStyle.setOffsetY(n),t.skipEvent()}).on(`-${f}`,function(){s.textStyle.setOffsetY(0),t.skipEvent()}).on("complete",function(){s.textStyle.setOffsetY(0)})},TB=function(s,t,e){var f="x",i;t.on("start",function(){i=s.textStyle.offsetY,s.textStyle.setOffsetX(0)}).on(`+${f}`,function(n){n===void 0&&(n=i),s.textStyle.setOffsetX(n),t.skipEvent()}).on(`-${f}`,function(){s.textStyle.setOffsetX(0),t.skipEvent()}).on("complete",function(){s.textStyle.setOffsetX(0)})},CB=function(s,t,e){var f="left",i;t.on("start",function(){i=s.textStyle.leftSpace,s.textStyle.setLeftSpace(0)}).on(`+${f}`,function(n){n===void 0&&(n=i),s.textStyle.setLeftSpace(n),t.skipEvent()}).on(`-${f}`,function(){s.textStyle.setLeftSpace(0),t.skipEvent()}).on("complete",function(){s.textStyle.setLeftSpace(0)})},SB=function(s,t,e){var f="right",i;t.on("start",function(){i=s.textStyle.rightSpace,s.textStyle.setRightSpace(0)}).on(`+${f}`,function(n){n===void 0&&(n=i),s.textStyle.setRightSpace(n),t.skipEvent()}).on(`-${f}`,function(){s.textStyle.setRightSpace(0),t.skipEvent()}).on("complete",function(){s.textStyle.setRightSpace(0)})},EB=function(s,t,e){var f="shadow",i;t.on("start",function(){i=s.textStyle.shadowColor,s.textStyle.setShadowColor(null)}).on(`+${f}`,function(n){n===void 0&&(n=i),s.textStyle.setShadowColor(n),t.skipEvent()}).on(`-${f}`,function(){s.textStyle.setShadowColor(null),t.skipEvent()}).on("complete",function(){s.textStyle.setShadowColor(i)})},PB=function(s,t,e){var f="align";t.on(`+${f}`,function(i){s.textStyle.setAlign(i),t.skipEvent()}).on(`-${f}`,function(){s.textStyle.setAlign(),t.skipEvent()}).on("complete",function(){s.textStyle.setAlign()})},MB=function(s,t,e){var f="img";t.on(`+${f}`,function(i){var n=s.imageManager.get(i);j1.call(s,n.key,n.frame,{width:n.width,hieght:n.height,leftSpace:n.left,rightSpace:n.right}),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()})},AB=function(s,t,e){var f="speed";t.on(`+${f}`,function(i){cm(s,i),t.skipEvent()}).on(`-${f}`,function(){cm(s,void 0),t.skipEvent()})},OB=function(s){this.typeWriter.setTypingSpeed(s)},cm=function(s,t){$t.call(s,"speed",OB,t,s)},RB=function(s,t,e){var f="se";t.on(`+${f}`,function(i,n){$t.call(s,"se",LB,[i,n],s),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()})},LB=function(s){if(!this.skipSoundEffect){var t=s[0],e=s[1];this.soundManager.playSoundEffect(t),e&&this.soundManager.fadeInSoundEffect(e)}},FB=function(s,t,e){var f="se.fadein";t.on(`+${f}`,function(i){$t.call(s,"se.fadein",wB,i,s),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()})},wB=function(s){this.soundManager.fadeInSoundEffect(s)},IB=function(s,t,e){var f="se.fadeout";t.on(`+${f}`,function(i,n){n=n==="stop",$t.call(s,"se.fadeout",DB,[i,n],s),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()})},DB=function(s){this.soundManager.fadeOutSoundEffect(...s)},BB=function(s,t,e){var f="se.volume";t.on(`+${f}`,function(i){$t.call(s,"se.volume",bB,i,s),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()})},bB=function(s){this.soundManager.setSoundEffectVolume(s)},GB=function(s,t,e){var f="bgm";t.on(`+${f}`,function(i,n){$t.call(s,"bgm",NB,[i,n],s),t.skipEvent()}).on(`-${f}`,function(){$t.call(s,"bgm.stop",YB,void 0,s),t.skipEvent()})},NB=function(s){var t=s[0],e=s[1];this.soundManager.playBackgroundMusic(t),e&&this.soundManager.fadeInBackgroundMusic(e)},YB=function(){this.soundManager.stopBackgroundMusic()},zB=function(s,t,e){var f="bgm.fadein";t.on(`+${f}`,function(i){$t.call(s,"bgm.fadein",VB,i,s),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()})},VB=function(s){this.soundManager.fadeInBackgroundMusic(s)},UB=function(s,t,e){var f="bgm.fadeout";t.on(`+${f}`,function(i,n){n=n==="stop",$t.call(s,"bgm.fadeout",WB,[i,n],s),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()})},WB=function(s){this.soundManager.fadeOutBackgroundMusic(...s)},XB=function(s,t,e){var f="bgm.cross";t.on(`+${f}`,function(i,n){$t.call(s,"bgm.cross",HB,[i,n],s),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()})},HB=function(s){this.soundManager.crossFadeBackgroundMusic(...s)};Phaser.Utils.Objects.GetValue;var $B=function(s,t,e){var f="bgm.pause";t.on(`+${f}`,function(){$t.call(s,"bgm.pause",KB,void 0,s),t.skipEvent()}).on(`-${f}`,function(){$t.call(s,"bgm.resume",kB,void 0,s),t.skipEvent()})},KB=function(){this.soundManager.pauseBackgroundMusic()},kB=function(){this.soundManager.resumeBackgroundMusic()},ZB=function(s,t,e){var f="camera.fadein";t.on(`+${f}`,function(i,n,h,r){$t.call(s,"camera.fadein",JB,[i,n,h,r],s),t.skipEvent()})},JB=function(s){this.camera.fadeIn(...s)},QB=function(s,t,e){var f="camera.fadeout";t.on(`+${f}`,function(i,n,h,r){$t.call(s,"camera.fadeout",jB,[i,n,h,r],s),t.skipEvent()})},jB=function(s){this.camera.fadeOut(...s)},qB=function(s,t,e){var f="camera.shake";t.on(`+${f}`,function(i,n){$t.call(s,"camera.shake",_B,[i,n],s),t.skipEvent()})},_B=function(s){this.camera.shake(...s)},tb=function(s,t,e){var f="camera.flash";t.on(`+${f}`,function(i,n,h,r){$t.call(s,"camera.flash",eb,[i,n,h,r],s),t.skipEvent()})},eb=function(s){this.camera.flash(...s)},ib=function(s,t,e){var f="camera.zoom";t.on(`+${f}`,function(i){$t.call(s,"camera.zoom",nb,i,s),t.skipEvent()}).on(`+${f}.to`,function(i,n,h){$t.call(s,"camera.zoom.to",sb,[i,n,h],s),t.skipEvent()})},nb=function(s){this.camera.setZoom(s)},sb=function(s){this.camera.zoomTo(...s)};const vm=Phaser.Math.DegToRad;var rb=function(s,t,e){var f="camera.rotate";t.on(`+${f}`,function(i){i=vm(i),$t.call(s,"camera.rotate",ab,i,s),t.skipEvent()}).on(`+${f}.to`,function(i,n,h){i=vm(i),$t.call(s,"camera.rotate.to",ob,[i,n,h],s),t.skipEvent()})},ab=function(s){this.camera.setRotation(s)},ob=function(s){var t=s[0],e=s[1],f=s[2];this.camera.rotateTo(t,!1,e,f)},hb=function(s,t,e){var f="camera.scroll";t.on(`+${f}`,function(i,n){$t.call(s,"camera.scroll",lb,[i,n],s),t.skipEvent()}).on(`+${f}.to`,function(i,n,h,r){$t.call(s,"camera.scroll.to",ub,[i,n,h,r],s),t.skipEvent()})},lb=function(s){this.camera.setScroll(...s)},ub=function(s){var t=s[0],e=s[1],f=s[2],i=s[3],n=this.camera,h=n.scrollX,r=n.scrollY;n.setScroll(t,e),t+=n.centerX,e+=n.centerY,n.setScroll(h,r),n.pan(t,e,f,i)},fb=function(s,t,e){var f="wait",i="click";t.on(`+${f}`,function(n){pm(s,n),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()}).on(`+${i}`,function(){pm(s,"click"),t.skipEvent()}).on(`-${i}`,function(){t.skipEvent()})},db=function(s){this.typeWriter.wait(s)},pm=function(s,t){$t.call(s,"wait",db,t,s)},cb=function(s,t,e){var f="r";t.on(`+${f}`,function(){Al.call(s,`
`),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()})},vb=function(s,t,e){var f="content.off";t.on(`+${f}`,function(){t.setContentOutputEnable(!1),t.skipEvent()})},pb=function(s,t,e){var f="content.on";t.on(`+${f}`,function(){t.setContentOutputEnable(),t.skipEvent()})},gb=function(s,t,e){t.on("content",function(f){if(t.contentOutputEnable)Al.call(s,f);else{var i=`+${t.lastTagStart}`;s.emit(`parser.${i}#content`,t,f)}})},mb=function(s,t,e){t.on("start",function(){s.emit("parser.start",t)}).on("+",function(f,...i){if(!t.skipEventFlag){var n=`+${f}`,h=i;s.emit(`parser.${n}`,t,...i,h),gm(s,n,h)}}).on("-",function(f){if(!t.skipEventFlag){var i=`-${f}`,n=[];s.emit(`parser.${i}`,t,n),gm(s,i,n)}}).on("complete",function(){s.emit("parser.complete",t)})},xb=function(s,t){var e=`tag.${t}`;s==null?this.emit(e):this.emit(e,...s)},gm=function(s,t,e){$t.call(s,t,xb,e,s)};const mm=[vB,pB,gB,mB,xB,EB,PB,yB,TB,CB,SB,MB,AB,RB,FB,IB,BB,GB,zB,UB,XB,$B,ZB,QB,qB,tb,ib,rb,hb,fb,cb,vb,pb,gb,mb];var yb=function(s,t,e){for(var f=0,i=mm.length;f<i;f++)mm[f](s,t,e)},Tb=function(s,t){for(var e=s.commentLineStart,f=t.split(`
`),i=0,n=f.length;i<n;i++){var h=f[i];h===""||(h.trim().length===0||e&&h.startsWith(e))&&(f[i]="")}return f.join("")};const Cb=Phaser.Utils.Objects.GetValue;class Sb extends oT{constructor(t,e){e===void 0&&(e={}),e.hasOwnProperty("delimiters")||(e.delimiters="[]"),super(e),yb(t,this,e),this.setCommentLineStartSymbol(Cb(e,"comment","//")),this.setContentOutputEnable()}setCommentLineStartSymbol(t){return this.commentLineStart=t,this}setContentOutputEnable(t){return t===void 0&&(t=!0),this.contentOutputEnable=t,this}start(t){return super.start(Tb(this,t)),this}}var Eb={setDefaultTypingSpeed(s){return this.defaultSpeed=s,this},setTypingSpeed(s){return s===void 0&&(s=this.defaultSpeed),this.speed=s,this}},Pc=function(s,t){return new Promise(function(e,f){s.once(t,function(){e()})})},We=function(s){return Pc(s,"complete")},Pb=function(s){return this.children=s,this.index=0,this.isPageTyping=!0,this.onTypeStart&&this.onTypeStart(s),this.typing(),We(this)};const Mb="delay",hT="anim";var lT=function(s){s===void 0&&(s=0);var t=0;for(this.inTypingProcessLoop=!0;this.inTypingProcessLoop;){var e=this.getNextChild();if(!e){this.timeline.isRunning?this.timeline.once("complete",function(){this.isPageTyping=!1,this.emit("complete")},this):(this.isPageTyping=!1,this.emit("complete"));break}if(Bs(e)){var f=this.animationConfig;if(f.duration>0){var i=this.timeline.addTimer({name:hT,target:e,duration:f.duration,yoyo:f.yoyo,onStart:f.onStart,onProgress:f.onProgress,onComplete:f.onComplete});this.skipTypingAnimation&&i.seek(1)}else f.onStart&&f.onStart(e,0);this.minSizeEnable&&this.textPlayer.setToMinSize(),this.textPlayer.emit("typing",e);var n=this.nextChild;if(n&&!(this.skipSpaceEnable&&YI(n))){if(t+=this.speed+s,s=0,t>0){this.typingTimer=this.timeline.addTimer({name:Mb,target:this,duration:t,onComplete:function(h,r,a){h.typingTimer=void 0,lT.call(h,a.remainder)}});break}}}else zI(e)&&e.exec()}this.inTypingProcessLoop=!1},Ab=function(){return this.timeline.pause(),this},Ob=function(){return this.timeline.resume(),this},Rb=function(){return this.isTypingPaused?this:(this.typingTimer?(this.typingTimer.pause(),this.isTypingPaused=!0):this.inTypingProcessLoop&&(this.inTypingProcessLoop=!1,this.isTypingPaused=!0),this)},Lb=function(s){return this.isTypingPaused?(s===void 0&&(s=0),this.typingTimer?(this.isTypingPaused=!1,this.typingTimer.resume(),this.typingTimer.remainder+=s):this.isTypingPaused&&(this.isTypingPaused=!1,this.typing(s)),this):this};const gn="_remove.wait",zd="_remove.play",xm=[gn,zd];var Ys=function(s,t,e,f,i){return function(){s.emit(gn,i),t.apply(f,e)}},ym=function(s,t,e,f,i){var n=Ys(s,e,f,i,"custom"),h=t?`wait.${t}`:"wait";s.emit(h,n)},Fb=function(s,t,e,f,i){var n=Ys(s,e,f,i,"time"),h;s.once(gn,function(){h&&(h.remove(),h=void 0)}),h=s.timeline.delayCall(t,n),s.emit("wait.time",t)},wb=function(s,t,e,f){var i=s.clickEE;if(!!i){var n=Ys(s,t,e,f,"click");s.once(gn,function(){i.off("pointerdown",n,s)}),i.once("pointerdown",n,s),s.emit("wait.click")}},Tm=function(s,t,e,f,i){var n=Ys(s,e,f,i,"music");t&&(s.once(gn,function(){t.off("complete",n,s)}),t.once("complete",n,s)),s.emit("wait.music",t),t||n()},Ib=function(s){switch(s){case"camera.fadein":case"camera.fadeout":case"camera.flash":case"camera.shake":case"camera.zoom":case"camera.rotate":case"camera.scroll":return!0;default:return!1}},Db=function(s,t,e,f,i){var n=Ys(s,e,f,i,`camera.${t}`),h=s.camera,r,a;switch(t){case"camera.fadein":r=h.fadeEffect,a="camerafadeincomplete";break;case"camera.fadeout":r=h.fadeEffect,a="camerafadeoutcomplete";break;case"camera.flash":r=h.flashEffect,a="cameraflashcomplete";break;case"camera.shake":r=h.shakeEffect,a="camerashakecomplete";break;case"camera.zoom":r=h.zoomEffect,a="camerazoomcomplete";break;case"camera.rotate":r=h.rotateToEffect,a="camerarotatecomplete";break;case"camera.scroll":r=h.panEffect,a="camerapancomplete";break}r.isRunning?(s.once(gn,function(l){h.off(a,n,s)}),h.once(a,n,s),s.emit("wait.camera",t)):(s.emit("wait.camera",t),n())},Bb=function(s,t,e,f,i){var n=Ys(s,e,f,i,"keydown"),h=`keydown-${t.toUpperCase()}`,r=s.scene.input.keyboard;s.once(gn,function(){r.off(h,n,s)}),r.once(h,n,s),s.emit("wait.keydown",t)},bb=function(s,t){var e=t.split(".");return s.gameObjectManagers.hasOwnProperty(e[0])},Gb=function(s,t,e,f,i){var n=Ys(s,e,f,i),h=t.split("."),r=h[0],a=s.getGameObjectManager(r),l=`wait.${r}`;switch(h.length){case 1:a.isEmpty?(s.emit(l),n()):(s.once(gn,function(C){a.off("empty",n,s)}),a.once("empty",n,s),s.emit(l));return;case 2:var v=h[1];if(!a.has(v))s.emit(l,v),n();else{var o=a.get(v),u=o.gameObject;s.once(gn,function(){u.off("destroy",n,s)}),u.once("destroy",n,s),s.emit(l,v)}return;case 3:var v=h[1],d=h[2],c=a.getProperty(v,d);if(typeof c=="number"){var p=a.getTweenTask(v,d);p?(s.once(gn,function(){p.off("complete",n,s)}),p.once("complete",n,s),s.emit(l,v,d)):(s.emit(l,v,d),n());return}var g=d,m=g.startsWith("!");if(m&&(g=g.substring(1)),a.hasData(v,g)){var u=a.getGO(v),x=u.getData(g),y=!m;if(x===y)s.emit(l,v,d),n();else{var T=`changedata-${g}`,e=function(E,M,O){M=!!M,M===y&&n.call(s)};s.once(gn,function(){u.off(T,e)}),u.on(T,e),s.emit(l,v,d)}return}}};const Nb=Phaser.Input.Keyboard.KeyCodes;var uT=function(s,t,e,f,i){typeof t=="string"&&t.length>1&&t.indexOf("|")!==-1?t=t.split("|"):t=[t];for(var n=0,h=t.length;n<h;n++){var r=t[n];if(r==null||r==="wait")ym(s,void 0,e,f,i);else if(typeof r=="number"||!isNaN(r))Fb(s,parseFloat(r),e,f,i);else if(r==="click")wb(s,e,f,i);else if(r==="se"){var a=s.soundManager.getLastSoundEffect();Tm(s,a,e,f,i)}else if(r==="bgm"){var a=s.soundManager.getBackgroundMusic();Tm(s,a,e,f,i)}else Nb.hasOwnProperty(r.toUpperCase())?Bb(s,r,e,f,i):Ib(r)?Db(s,r,e,f,i):bb(s,r)?Gb(s,r,e,f,i):ym(s,r,e,f,i)}},Yb=function(s){return this.ignoreWait?this:(this.pauseTyping(),uT(this.textPlayer,s,this.resumeTyping,[],this),this)},zb=function(s){return s===void 0&&(s=!0),this.ignoreWait=s,this},Vb=function(s){return s===void 0&&(s=!0),this.skipSpaceEnable=s,this},Ub=function(s){if(s===void 0&&(s=!0),this.skipTypingAnimation=s,s)for(var t=this.timeline.getTimers(hT),e=0,f=t.length;e<f;e++)t[e].seek(1);return this},Wb=function(s){if(s===void 0&&(s=!0),this.skipSoundEffect=s,s){var t=this.textPlayer._soundManager;t&&t.fadeOutAllSoundEffects(100,!0)}return this},Xb=function(){return this.typingTimer&&this.typingTimer.seek(1),this},fT={start:Pb,typing:lT,pause:Ab,resume:Ob,pauseTyping:Rb,resumeTyping:Lb,wait:Yb,setIgnoreWait:zb,setSkipSpaceEnable:Vb,setSkipTypingAnimation:Ub,setSkipSoundEffect:Wb,skipCurrentTypingDelay:Xb};Object.assign(fT,Eb);const ba=Phaser.Utils.Objects.GetValue;class dT{constructor(t,e){this.setEventEmitter(),this.textPlayer=t,this.isPageTyping=!1,this.typingTimer=void 0,this.pauseTypingTimer=void 0,this.inTypingProcessLoop=!1,this.isTypingPaused=!1,this.setIgnoreWait(!1),this.setSkipTypingAnimation(!1),this.setTypingStartCallback(ba(e,"onTypingStart",$b)),this.setDefaultTypingSpeed(ba(e,"speed",250)),this.setTypingSpeed(),this.setSkipSpaceEnable(ba(e,"skipSpace",!1)),this.setAnimationConfig(ba(e,"animation",void 0)),this.setMinSizeEnable(ba(e,"minSizeEnable",!1))}destroy(){this.destroyEventEmitter(),this.textPlayer=void 0,this.typingTimer=void 0,this.pauseTypingTimer=void 0,this.onTypeStart=void 0,this.animationConfig=void 0}get timeline(){return this.textPlayer.timeline}setTypingStartCallback(t){return this.onTypeStart=t,this}setAnimationConfig(t){return t||(t={}),t.hasOwnProperty("duration")||(t.duration=0),t.hasOwnProperty("onStart")||(t.onStart=Hb),this.animationConfig=t,this}setMinSizeEnable(t){return t===void 0&&(t=!0),this.minSizeEnable=t,this}getNextChild(){var t=this.nextChild;return this.index=Math.min(this.index+1,this.children.length),this._nextChild=void 0,t}get nextChild(){return this._nextChild||(this._nextChild=this.children[this.index]),this._nextChild}}var Hb=function(s){s.setVisible&&s.setVisible()},$b=function(s){for(var t=0,e=s.length;t<e;t++){var f=s[t];f.setVisible&&f.setVisible(!1)}};Object.assign(dT.prototype,sa,fT);class Kb extends Ec{playAnimation(t){return this.gameObject.anims.timeScale=this.timeScale,this.gameObject.play(t),this}stopAnimation(){return this.gameObject.stop(),this}chainAnimation(t){return this.gameObject.chain(t),this}pauseAnimation(){return this.gameObject.anims.pause(),this}setTimeScale(t){return super.setTimeScale(t),this.gameObject.anims&&(this.gameObject.anims.timeScale=t),this}}var kb={playAnimation(s,t){return this.has(s)||this.add(s),this.get(s).playAnimation(t),this},stopAnimation(s){return this.has(s)?(this.get(s).stopAnimation(),this):this},chainAnimation(s,t){return this.has(s)?(this.get(s).chainAnimation(t),this):this},pauseAnimation(s){return this.has(s)?(this.get(s).pauseAnimation(),this):this}},cT={};Object.assign(cT,kb);class vT extends Rl{constructor(t,e){e===void 0&&(e={}),e.BobClass=Kb,super(t,e)}setCreateGameObjectCallback(t,e){return!t||t==="sprite"?t=Zb:t==="image"&&(t=Jb),super.setCreateGameObjectCallback(t,e),this}}var Zb=function(s,t,e){return typeof e!="string"&&typeof e!="number"&&(e=void 0),s.add.sprite(0,0,t,e)},Jb=function(s,t,e){return typeof e!="string"&&typeof e!="number"&&(e=void 0),s.add.image(0,0,t,e)};Object.assign(vT.prototype,cT);var Cm=function(s,t){return s.length===3&&s[0]===t&&s[2]==="play"},Qb=function(s,t){return s.length===3&&s[0]===t&&s[2]==="stop"},jb=function(s,t,e){var f=e.name;t.on("+",function(i,...n){if(!t.skipEventFlag){var h=i.split("."),r;if(Cm(h,f))r=h[1];else return;$t.call(s,`${f}.play`,qb,[f,r,n],s),t.skipEvent()}}).on("+",function(i){if(!t.skipEventFlag){var n=i.split("."),h;if(Qb(n,f))h=n[1];else return;$t.call(s,`${f}.stop`,Sm,[f,h],s),t.skipEvent()}}).on("-",function(i){if(!t.skipEventFlag){var n=i.split("."),h;if(Cm(n,f))h=n[1];else return;$t.call(s,`${f}.stop`,Sm,[f,h],s),t.skipEvent()}})},qb=function(s){var t,e,f;[t,e,f]=s;var i=f.shift(),n=this.getGameObjectManager(t);n.playAnimation(e,i),f.length>0&&n.chainAnimation(e,f)},Sm=function(s){var t,e;[t,...e]=s;var f=this.getGameObjectManager(t);f.stopAnimation(...e)},_b=function(s,t){return s.length===3&&s[0]===t&&s[2]==="pause"},tG=function(s,t,e){var f=e.name;t.on("+",function(i){if(!t.skipEventFlag){var n=i.split("."),h;if(_b(n,f))h=n[1];else return;$t.call(s,`${f}.pause`,eG,[f,h],s),t.skipEvent()}})},eG=function(s){var t,e;[t,...e]=s;var f=this.getGameObjectManager(t);f.pauseAnimation(...e)},iG=function(s,t){return s.length===3&&s[0]===t&&s[2]==="chain"},nG=function(s,t,e){var f=e.name;t.on("+",function(i){if(!t.skipEventFlag){var n=i.split("."),h;if(iG(n,f))h=n[1];else return;var r=Array.prototype.slice.call(arguments,1);$t.call(s,`${f}.chain`,sG,[f,h,r],s),t.skipEvent()}})},sG=function(s){var t,e;[t,...e]=s;var f=this.getGameObjectManager(t);f.chainAnimation(...e)};const rG=[jb,tG,nG];var aG=function(s){s===void 0&&(s={}),s.name="sprite",s.parseCallbacks=rG,this.addGameObjectManager(s,vT)},Em=function(s,t){return s.length===2&&s[0]===t},oG=function(s,t,e){var f=e.name;t.on("+",function(i,...n){if(!t.skipEventFlag){var h=i.split("."),r;if(Em(h,f))r=h[1];else return;$t.call(s,`${f}.add`,hG,[f,r,...n],s),t.skipEvent()}}).on("-",function(i){if(!t.skipEventFlag){var n=i.split("."),h;if(Em(n,f))h=n[1];else return;$t.call(s,`${f}.remove`,lG,[f,h],s),t.skipEvent()}})},hG=function(s){var t,e;[t,...e]=s;var f=this.getGameObjectManager(t);f.add(...e)},lG=function(s){var t,e;[t,...e]=s;var f=this.getGameObjectManager(t);f.remove(...e)},uG=function(s,t,e){var f=e.name;t.on("-",function(i){t.skipEventFlag||i===f&&($t.call(s,`${f}.removeall`,fG,f,s),t.skipEvent())})},fG=function(s){var t=this.getGameObjectManager(s);t.removeAll()},dG=function(s,t){return s.length===3&&s[0]===t},cG=function(s,t,e){var f=e.name;t.on("+",function(i,...n){if(!t.skipEventFlag){var h=i.split("."),r,a;if(dG(h,f))r=h[1],a=h[2];else return;$t.call(s,`${f}.call`,vG,[f,r,a,...n],s),t.skipEvent()}})},vG=function(s){var t,e,f,i;[t,e,f,...i]=s;var n=`${t}.${f}`;if(this.emit(n,e,...i),!(this.listenerCount(n)>0)){var h=this.getGameObjectManager(t);h.hasMethod(e,f)?h.call(e,f,...i):h.setProperty(e,f,i[0])}},pG={to:!0,yoyo:!0,from:!0,toLeft:!0,toRight:!0,toUp:!0,toDown:!0,yoyoLeft:!0,yoyoRight:!0,yoyoUp:!0,yoyoDown:!0,fromLeft:!0,fromRight:!0,fromUp:!0,fromDown:!0},gG=function(s,t){return s.length===4&&s[0]===t&&pG[s[3]]},mG=function(s,t,e){var f=e.name;s.getGameObjectManager(f),t.on("+",function(i,n,h,r,a){if(!t.skipEventFlag){var l=i.split("."),o,u,v;if(gG(l,f))o=l[1],u=l[2],v=l[3];else return;typeof r=="number"&&(a=r,r=void 0),$t.call(s,`${f}.ease`,xG,[f,o,u,n,h,r,a,v],s),t.skipEvent()}})},xG=function(s){var t,e,f,i,n,h,r,a;[t,e,f,i,n,h,r,a]=s;var l=this.getGameObjectManager(t),o=l.getProperty(e,f);if(typeof o=="number"){a.endsWith("Left")||a.endsWith("Up")?a.startsWith("to")||a.startsWith("yoyo")?i=o-i:a.startsWith("from")&&(l.setProperty(e,f,o-i),i=o):a.endsWith("Right")||a.endsWith("Down")?a.startsWith("to")||a.startsWith("yoyo")?i=o+i:a.startsWith("from")&&(l.setProperty(e,f,o+i),i=o):a==="from"&&(l.setProperty(e,f,i),i=o);var u=a.startsWith("yoyo");l.easeProperty(e,f,i,n,h,r,u)}};const Pm=[oG,uG,cG,mG];var yG={addGameObjectManager(s,t){s===void 0&&(s={});var e=s.name;e||console.warn("Parameter 'name' is required in TextPlayer.addGameObjectManager(config) method"),this.__proto__.__proto__.addGameObjectManager.call(this,s,t),t===void 0&&(t=Rl);var f=s.parseCallbacks;f?f=[...f,...Pm]:f=Pm;for(var i=0,n=f.length;i<n;i++)f[i](this,this.parser,s);return this}},TG=function(s){return this.clickTarget=s,s?_r(s)?this.clickEE=s.input:this.clickEE=s.setInteractive():this.clickEE=null,this},CG=function(s){return this.camera=s,this},SG=function(s){var t=this;s?typeof s=="function"?this.nextPageInput=function(e,f,i){var n=Ys(t,e,f,i);s.call(t,n)}:this.nextPageInput=function(e,f,i){uT(t,s,e,f,i)}:this.nextPageInput=null},EG=function(s,t){return this.imageManager.add(s,t),this},PG={play(s){return this.isPlaying?this:(this.removeChildren(),this.parser.start(s),this.isPlaying=!0,this.once("complete",function(){this.isPlaying=!1},this),this.lastWrapResult=void 0,this.typingNextPage(),this)},playPromise(s){var t=We(this);return this.play(s),t}};const MG=Phaser.Utils.Objects.GetValue;var Vd=function(){if(!this.isPlaying||this.isPageTyping)return this;var s=MG(this.wrapConfig,"callback",this.runWordWrap);typeof s=="string"&&(s=this[s]);var t=s.call(this,this.lastWrapResult);this.lastWrapResult=t,this.emit("page.start");var e=function(){this.emit(zd),t.isLastPage?this.emit("complete"):(this.emit("page.complete"),this.ignoreNextPageInput?Vd.call(this):this.nextPageInput&&this.nextPageInput(Vd,[],this))};this.once(zd,function(){this.typeWriter.off("complete",e,this)}),this.typeWriter.once("complete",e,this).start(t.children)},AG={pause(){return this.timeline.pause(),this},pauseTyping(){return this.typeWriter.pauseTyping(),this}},OG={resume(){return this.timeline.resume(),this},resumeTyping(s){return this.typeWriter.resumeTyping(s),this}},RG=function(s){return this.typeWriter.wait(s),this},LG={setDefaultTypingSpeed(s){return this.defaultTypingSpeed=s,this},setTypingSpeed(s){return this.typingSpeed=s,this}},FG=function(s){return this.timeScale=s,this},wG=function(s){return this.typeWriter.setIgnoreWait(s),this},IG=function(s){return s===void 0&&(s=!0),this.ignoreNextPageInput=s,this},DG=function(){if(!this.isPlaying||!this.isPageTyping)return this;var s=this.typeWriter.speed,t=this.typeWriter.ignoreWait,e=this.typeWriter.skipTypingAnimation,f=this.typeWriter.skipSoundEffect;return this.typeWriter.once("complete",function(){this.typeWriter.setTypingSpeed(s).setIgnoreWait(t).setSkipTypingAnimation(e).setSkipSoundEffect(f)},this).setTypingSpeed(0).skipCurrentTypingDelay().setIgnoreWait(!0).setSkipTypingAnimation(!0).setSkipSoundEffect(!0),this},BG={getSprite(s){return this.getGameObject("sprite",s)},addSprite(s,t){return this.addGameObject("sprite",s,t),this}},bG={setContentOutputEnable(s){return this.parser.setContentOutputEnable(s),this},setContentCallback(s,t){return this.contentCallback=s,this.contentCallbackScope=t,this}},pT={setClickTarget:TG,setTargetCamera:CG,setNextPageInput:SG,addImage:EG,typingNextPage:Vd,wait:RG,setTimeScale:FG,setIgnoreWait:wG,setIgnoreNextPageInput:IG,showPage:DG};Object.assign(pT,yG,PG,AG,OG,LG,BG,bG);var GG=function(s){for(var t=0,e=xm.length;t<e;t++)s.emit(xm[t])};const Mm=Phaser.Utils.Objects.IsPlainObject,xs=Phaser.Utils.Objects.GetValue;class Mc extends aB(yo){constructor(t,e,f,i,n,h){Mm(e)?h=e:Mm(i)&&(h=i),h===void 0&&(h={});var r=h.text;delete h.text,super(t,e,f,i,n,h),this.type="rexTextPlayer",this.parser=new Sb(this,xs(h,"parser",void 0)),this.typeWriter=new dT(this,xs(h,"typing",void 0)),this._imageManager=void 0;var a=xs(h,"images",void 0);a&&this.addImage(a),this.setTargetCamera(xs(h,"camera",this.scene.sys.cameras.main)),this.initManagers(t,h);var l=xs(h,"sprites");l!==!1&&l!==null&&aG.call(this,l),this.setIgnoreNextPageInput(xs(h,"ignoreNextPageInput",!1)),this.setClickTarget(xs(h,"clickTarget",this)),this.setNextPageInput(xs(h,"nextPageInput",null)),this.isPlaying=!1,r&&this.play(r)}get imageManager(){return this._imageManager===void 0&&(this._imageManager=new oc(this.scene)),this._imageManager}get spriteManager(){return this.getGameObjectManager("sprite")}destroy(t){!this.scene||(GG(this),this.parser.destroy(),this.parser=void 0,this.typeWriter.destroy(t),this.typeWriter=void 0,this._imageManager&&this._imageManager.destroy(t),this._imageManager=void 0,this.camera=void 0,this.clickEE=void 0,this.destroyManagers(t),super.destroy(t))}get isPageTyping(){return this.typeWriter.isPageTyping}set defaultTypingSpeed(t){this.typeWriter.setDefaultTypingSpeed(t)}get defaultTypingSpeed(){return this.typeWriter.defaultTypingSpeed}set typingSpeed(t){this.typeWriter.setTypingSpeed(t)}get typingSpeed(){return this.typeWriter.speed}set timeScale(t){this.timeline.timeScale=t,this._spriteManager!==void 0&&this._spriteManager.setTimeScale(t)}get timeScale(){return this.timeline.timeScale}}Object.assign(Mc.prototype,pT);xt.register("textPlayer",function(s,t,e,f,i){var n=new Mc(this.scene,s,t,e,f,i);return this.scene.add.existing(n),n});Ct(window,"RexPlugins.UI.TextPlayer",Mc);var Yf=function(s,t,e,f,i,n,h,r,a,l,o,u){l===void 0&&(l=0),o===void 0&&(o=2*Math.PI),u===void 0&&(u=!1),t.beginPath(),t.ellipse(e,f,i,n,0,l,o,u),h!=null&&(t.fillStyle=h,t.fill()),r!=null&&(t.strokeStyle=r,t.lineWidth=a,t.stroke())},NG=function(s,t,e,f,i,n,h,r,a,l,o){a===void 0&&r!=null&&(a=2),l===void 0&&(l="start"),o===void 0&&(o="alphabetic"),t.font=n,t.textAlign=l,t.textBaseline=o,t.fillStyle=h,t.strokeStyle=r,t.lineWidth=a,t.lineCap="round",t.lineJoin="round",r!=null&&r!=="none"&&a>0&&t.strokeText(i,e,f),h!=null&&h!=="none"&&t.fillText(i,e,f)},YG=function(){var s=this.radius,t=this.thickness*this.radius,e=this.radius-t/2,f=this.radius-t,i=this.canvas,n=this.context;if(this.trackColor&&t>0&&(n.save(),Yf(i,n,s,s,e,e,void 0,this.trackColor,t),n.restore()),this.barColor&&e>0){var h,r,a;if(this.value===1)h=!1,r=0,a=2*Math.PI;else{h=this.anticlockwise,r=this.startAngle;var l=2*Math.PI*(h?1-this.value:this.value);a=l+r}n.save(),Yf(i,n,s,s,e,e,void 0,this.barColor,t,r,a,h),n.restore()}if(this.centerColor&&f>0){var o;this.centerColor2?(o=this.context.createRadialGradient(s,s,0,s,s,f),o.addColorStop(0,this.centerColor),o.addColorStop(1,this.centerColor2)):o=this.centerColor,n.save(),Yf(i,n,s,s,f,f,o),n.restore()}this.textFormatCallback&&(this.textColor||this.textStrokeColor)&&(n.save(),NG(i,n,s,s,this.getFormatText(),this.textFont,this.textColor,this.textStrokeColor,this.textStrokeThickness,"center","middle"),n.restore())};const ys=Phaser.Utils.Objects.GetValue,zG=Phaser.Math.Linear;class Ll extends ur{constructor(t,e){super(t,e),this.resetFromJSON(),this.boot()}start(t){if(this.timer.isRunning)return this;var e=this.target;this.propertyKey=ys(t,"key","value");var f=e[this.propertyKey];return this.fromValue=ys(t,"from",f),this.toValue=ys(t,"to",f),this.setEase(ys(t,"ease",this.ease)),this.setDuration(ys(t,"duration",this.duration)),this.setRepeat(ys(t,"repeat",0)),this.setDelay(ys(t,"delay",0)),this.setRepeatDelay(ys(t,"repeatDelay",0)),this.timer.setDuration(this.duration).setRepeat(this.repeat).setDelay(this.delay).setRepeatDelay(this.repeatDelay),e[this.propertyKey]=this.fromValue,super.start(),this}updateGameObject(t,e){var f=e.t;f=this.easeFn(f),t[this.propertyKey]=zG(this.fromValue,this.toValue,f)}}const VG=Phaser.Math.Percent;var UG=function(s){return this.easeValuePropName=s,this},WG=function(s){return this.easeValueDuration=s,this},XG=function(s){return this.easeFunction=s,this},HG=function(){return this.easeValueTask&&this.easeValueTask.stop(),this},$G=function(s,t,e){return s==null?this:(t!==void 0&&(s=VG(s,t,e)),this.easeValueTask===void 0&&(this.easeValueTask=new Ll(this,{eventEmitter:null})),this.easeValueTask.restart({key:this.easeValuePropName,to:s,duration:this.easeValueDuration,ease:this.easeFunction}),this)},KG=function(s,t,e,f){return e===void 0&&(e=-1),f===void 0&&(f=0),this.easeValueTask===void 0&&(this.easeValueTask=new Ll(this,{eventEmitter:null})),this.easeValueTask.restart({key:this.easeValuePropName,from:s,to:t,duration:this.easeValueDuration,ease:this.easeFunction,repeat:e,repeatDelay:f}),this},To={setEaseValuePropName:UG,setEaseValueDuration:WG,setEaseValueFunction:XG,stopEaseValue:HG,easeValueTo:$G,easeValueRepeat:KG};const de=Phaser.Utils.Objects.GetValue,kG=Phaser.Utils.Objects.IsPlainObject,Am=Phaser.Math.Clamp,ZG=Phaser.Math.Linear,Om=Phaser.Math.Percent,JG=Phaser.Math.DegToRad(270);class Ac extends Gn{constructor(t,e,f,i,n,h,r){kG(e)&&(r=e,e=de(r,"x",0),f=de(r,"y",0),i=de(r,"radius",1),n=de(r,"barColor",void 0),h=de(r,"value",0));var a=i*2;super(t,e,f,a,a),this.type="rexCircularProgressCanvas",this.eventEmitter=de(r,"eventEmitter",this),this.setRadius(i),this.setTrackColor(de(r,"trackColor",void 0)),this.setBarColor(n),this.setCenterColor(de(r,"centerColor",void 0)),this.setThickness(de(r,"thickness",.2)),this.setStartAngle(de(r,"startAngle",JG)),this.setAnticlockwise(de(r,"anticlockwise",!1)),this.setTextColor(de(r,"textColor",void 0)),this.setTextStrokeColor(de(r,"textStrokeColor",void 0),de(r,"textStrokeThickness",void 0));var l=de(r,"textFont",void 0);l?this.setTextFont(l):this.setTextFont(de(r,"textSize","16px"),de(r,"textFamily","Courier"),de(r,"textStyle","")),this.setTextFormatCallback(de(r,"textFormatCallback",void 0),de(r,"textFormatCallbackScope",void 0));var o=de(r,"valuechangeCallback",null);if(o!==null){var u=de(r,"valuechangeCallbackScope",void 0);this.eventEmitter.on("valuechange",o,u)}this.setEaseValuePropName("value").setEaseValueDuration(de(r,"easeValue.duration",0)).setEaseValueFunction(de(r,"easeValue.ease","Linear")),this.setValue(h)}resize(t,e){return t=Math.floor(Math.min(t,e)),t===this.width?this:(super.resize(t,t),this.setRadius(t/2),this)}get value(){return this._value}set value(t){t=Am(t,0,1);var e=this._value,f=e!=t;this.dirty=this.dirty||f,this._value=t,f&&this.eventEmitter.emit("valuechange",this._value,e,this.eventEmitter)}setValue(t,e,f){return t==null?this:(e!==void 0&&(t=Om(t,e,f)),this.value=t,this)}addValue(t,e,f){return e!==void 0&&(t=Om(t,e,f)),this.value+=t,this}getValue(t,e){var f=this.value;return t!==void 0&&(f=ZG(t,e,f)),f}get radius(){return this._radius}set radius(t){this.dirty=this.dirty||this._radius!=t,this._radius=t;var e=t*2;this.resize(e,e)}setRadius(t){return this.radius=t,this}get trackColor(){return this._trackColor}set trackColor(t){t=Wt(t,this.canvas,this.context),this.dirty=this.dirty||this._trackColor!=t,this._trackColor=t}setTrackColor(t){return this.trackColor=t,this}get barColor(){return this._barColor}set barColor(t){t=Wt(t,this.canvas,this.context),this.dirty=this.dirty||this._barColor!=t,this._barColor=t}setBarColor(t){return this.barColor=t,this}get startAngle(){return this._startAngle}set startAngle(t){this.dirty=this.dirty||this._startAngle!=t,this._startAngle=t}setStartAngle(t){return this.startAngle=t,this}get anticlockwise(){return this._anticlockwise}set anticlockwise(t){this.dirty=this.dirty||this._anticlockwise!=t,this._anticlockwise=t}setAnticlockwise(t){return t===void 0&&(t=!0),this.anticlockwise=t,this}get thickness(){return this._thickness}set thickness(t){t=Am(t,0,1),this.dirty=this.dirty||this._thickness!=t,this._thickness=t}setThickness(t){return this.thickness=t,this}get centerColor(){return this._centerColor}set centerColor(t){t=Wt(t,this.canvas,this.context),this.dirty=this.dirty||this._centerColor!=t,this._centerColor=t}get centerColor2(){return this._centerColor2}set centerColor2(t){t=Wt(t,this.canvas,this.context),this.dirty=this.dirty||this._centerColor2!=t,this._centerColor2=t}setCenterColor(t,e){return this.centerColor=t,this.centerColor2=e,this}get textColor(){return this._textColor}set textColor(t){t=Wt(t,this.canvas,this.context),this.dirty=this.dirty||this._textColor!=t,this._textColor=t}setTextColor(t){return this.textColor=t,this}get textStrokeColor(){return this._textStrokeColor}set textStrokeColor(t){t=Wt(t,this.canvas,this.context),this.dirty=this.dirty||this._textStrokeColor!=t,this._textStrokeColor=t}get textStrokeThickness(){return this._textStrokeThickness}set textStrokeThickness(t){this.dirty=this.dirty||this._textStrokeThickness!=t,this._textStrokeThickness=t}setTextStrokeColor(t,e){return e===void 0&&(e=2),this.textStrokeColor=t,this.textStrokeThickness=e,this}get textFont(){return this._textFont}set textFont(t){this.dirty=this.dirty||this._textFont!=t,this._textFont=t}setTextFont(t,e,f){var i;return e===void 0?i=t:i=f+" "+t+" "+e,this.textFont=i,this}setTextFormatCallback(t,e){return this.textFormatCallback=t,this.textFormatCallbackScope=e,this}updateTexture(){return this.clear(),YG.call(this),super.updateTexture(),this}getFormatText(t){t===void 0&&(t=this.value);var e;return this.textFormatCallbackScope?e=this.textFormatCallback(t):e=this.textFormatCallback.call(this.textFormatCallbackScope,t),e}}Object.assign(Ac.prototype,To);xt.register("circularProgressCanvas",function(s,t,e,f,i,n){var h=new Ac(this.scene,s,t,e,f,i,n);return this.scene.add.existing(h),h});Ct(window,"RexPlugins.UI.CircularProgressCanvas",Ac);const QG=Phaser.GameObjects.GetCalcMatrix;var jG=function(s,t,e,f){t.updateData(),e.addToRenderList(t);var i=s.pipelines.set(t.pipeline),n=QG(t,e,f),h=i.calcMatrix.copyFrom(n.calc),r=t._displayOriginX,a=t._displayOriginY,l=e.alpha*t.alpha;s.pipelines.preBatch(t);for(var o=t.geom,u=0,v=o.length;u<v;u++)o[u].webglRender(i,h,l,r,a);s.pipelines.postBatch(t)};const qG=Phaser.Renderer.Canvas.SetTransform;var _G=function(s,t,e,f){t.updateData(),e.addToRenderList(t);var i=s.currentContext;if(qG(s,i,t,e,f)){for(var n=t._displayOriginX,h=t._displayOriginY,r=t.geom,a=0,l=r.length;a<l;a++)r[a].canvasRender(i,n,h);i.restore()}},t3={renderWebGL:jG,renderCanvas:_G};const e3=Phaser.GameObjects.Shape,i3=Phaser.Utils.Array.Remove;class Oc extends e3{constructor(t,e,f,i,n){e===void 0&&(e=0),f===void 0&&(f=0),i===void 0&&(i=0),n===void 0&&(n=i),super(t,"rexShapes",[]),this._width=-1,this._height=-1,this.dirty=!0,this.isSizeChanged=!0,this.shapes={},this.setPosition(e,f),this.setSize(i,n),this.updateDisplayOrigin()}get width(){return this._width}set width(t){this.setSize(t,this._height)}get height(){return this._height}set height(t){this.setSize(this._width,t)}setDirty(t){return t===void 0&&(t=!0),this.dirty=t,this}setSize(t,e){this.isSizeChanged=this.isSizeChanged||this._width!==t||this._height!==e,this.dirty=this.dirty||this.isSizeChanged,this._width=t,this._height=e,this.updateDisplayOrigin();var f=this.input;return f&&!f.customHitArea&&(f.hitArea.width=t,f.hitArea.height=e),this}resize(t,e){return this.setSize(t,e),this}get fillColor(){return this._fillColor}set fillColor(t){this.setFillStyle(t,this._fillAlpha)}get fillAlpha(){return this._fillAlpha}set fillAlpha(t){this.setFillStyle(this._fillColor,t)}setFillStyle(t,e){return e===void 0&&(e=1),this.dirty=this.dirty||this.fillColor!==t||this.fillAlpha!==e,this._fillColor=t,this._fillAlpha=e,this}get lineWidth(){return this._lineWidth}set lineWidth(t){this.setStrokeStyle(t,this._strokeColor,this._strokeAlpha)}get strokeColor(){return this._strokeColor}set strokeColor(t){this.setStrokeStyle(this._lineWidth,t,this._strokeAlpha)}get strokeAlpha(){return this._strokeAlpha}set strokeAlpha(t){this.setStrokeStyle(this._lineWidth,this._strokeColor,t)}setStrokeStyle(t,e,f){return f===void 0&&(f=1),this.dirty=this.dirty||this.lineWidth!==t||this.strokeColor!==e||this.strokeAlpha!==f,this._lineWidth=t,this._strokeColor=e,this._strokeAlpha=f,this}updateShapes(){}updateData(){if(!this.dirty)return this;this.updateShapes();for(var t=this.geom,e=0,f=t.length;e<f;e++){var i=t[e];i.dirty&&i.updateData()}return this.isSizeChanged=!1,this.dirty=!1,this}clear(){return this.geom.length=0,Ls(this.shapes),this}getShape(t){return this.shapes[t]}getShapes(){return this.geom}addShape(t){this.geom.push(t);var e=t.name;return e&&(this.shapes[e]=t),this.dirty=!0,this}deleteShape(t){var e=this.getShape(t);return e&&(delete this.shapes[t],i3(this.geom,e)),this}}Object.assign(Oc.prototype,t3);var n3=function(s,t){return s===void 0?this.isFilled=!1:(t===void 0&&(t=1),this.isFilled=!0,this.fillColor=s,this.fillAlpha=t),this},s3=function(s,t,e){return s===void 0||t===void 0?this.isStroked=!1:(e===void 0&&(e=1),this.isStroked=!0,this.lineWidth=s,this.strokeColor=t,this.strokeAlpha=e),this},r3={fillStyle:n3,lineStyle:s3};class Fl{constructor(){this.name=void 0,this.dirty=!0,this.data=void 0,this.isFilled=!1,this.fillColor=void 0,this.fillAlpha=1,this.isStroked=!1,this.lineWidth=1,this.strokeColor=void 0,this.strokeAlpha=1}setName(t){return this.name=t,this}reset(){return this.fillStyle().lineStyle(),this}webglRender(t,e,f,i,n){}canvasRender(t,e,f){}updateData(){this.dirty=!1}}Object.assign(Fl.prototype,r3,xl);const a3=Phaser.Geom.Polygon.Earcut;class wl extends Fl{constructor(){super(),this.pathData=[],this.pathIndexes=[],this.closePath=!1}updateData(){return this.pathIndexes=a3(this.pathData),super.updateData(),this}webglRender(t,e,f,i,n){this.isFilled&&Xy(t,e,this,f,i,n),this.isStroked&&Tl(t,this,f,i,n)}canvasRender(t,e,f){var i=this.pathData,n=i.length-1,h=i[0]-e,r=i[1]-f;t.beginPath(),t.moveTo(h,r),this.closePath||(n-=2);for(var a=2;a<n;a+=2){var l=i[a]-e,o=i[a+1]-f;t.lineTo(l,o)}this.closePath&&t.closePath(),this.isFilled&&(go(t,this),t.fill()),this.isStroked&&(mo(t,this),t.stroke())}}const Rm=Phaser.Math.DegToRad;class Il extends wl{constructor(t,e,f,i,n,h,r,a){t===void 0&&(t=0),e===void 0&&(e=0),f===void 0&&(f=0),i===void 0&&(i=0),n===void 0&&(n=0),h===void 0&&(h=360),r===void 0&&(r=!1),a===void 0&&(a=!1),super(),this.setCenterPosition(t,e),this.setRadius(f,i),this.setAngle(n,h,r),this.setPie(a),this.setIterations(32)}get x(){return this._x}set x(t){this.dirty=this.dirty||this._x!==t,this._x=t}get y(){return this._y}set y(t){this.dirty=this.dirty||this._y!==t,this._y=t}setCenterPosition(t,e){return e===void 0&&(e=t),this.x=t,this.y=e,this}get radiusX(){return this._radiusX}set radiusX(t){this.dirty=this.dirty||this._radiusX!==t,this._radiusX=t}get radiusY(){return this._radiusY}set radiusY(t){this.dirty=this.dirty||this._radiusY!==t,this._radiusY=t}setRadius(t,e){return e===void 0&&(e=t),this.radiusX=t,this.radiusY=e,this}get startAngle(){return this._startAngle}set startAngle(t){this.dirty=this.dirty||this._startAngle!==t,this._startAngle=t}get endAngle(){return this._endAngle}set endAngle(t){this.dirty=this.dirty||this._endAngle!==t,this._endAngle=t}get anticlockwise(){return this._anticlockwise}set anticlockwise(t){this.dirty=this.dirty||this._anticlockwise!==t,this._anticlockwise=t}setAngle(t,e,f){return f===void 0&&(f=!1),this.startAngle=t,this.endAngle=e,this.anticlockwise=f,this}get pie(){return this._pie}set pie(t){this.dirty=this.dirty||this._pie!==t,this._pie=t}setPie(t){return t===void 0&&(t=!0),this.pie=t,this}get iterations(){return this._iterations}set iterations(t){this.dirty=this.dirty||this._iterations!==t,this._iterations=t}setIterations(t){return this.iterations=t,this}updateData(){return this.pathData.length=0,this.pie&&this.pathData.push(this.x,this.y),Jr(this.x,this.y,this.radiusX,this.radiusY,this.startAngle,this.endAngle,this.anticlockwise,this.iterations,this.pathData),this.pie&&this.pathData.push(this.x,this.y),this.pathData.push(this.pathData[0],this.pathData[1]),super.updateData(),this}canvasRender(t,e,f){t.beginPath();var i=this.x-e,n=this.y-f,h=Rm(this.startAngle),r=Rm(this.endAngle);this.pie&&(t.moveTo(i,n),t.lineTo(i+Math.cos(h)*this.radiusX,n+Math.sin(h)*this.radiusY)),t.ellipse(i,n,this.radiusX,this.radiusY,0,h,r,this.anticlockwise),this.pie&&t.lineTo(i,n),this.isFilled&&(go(t,this),t.fill()),this.isStroked&&(mo(t,this),t.stroke())}}class Ud extends Il{constructor(t,e,f){super(t,e,f,f,0,360)}}class o3 extends wl{constructor(t){super(),this.setCurve(t),this.setIterations(32)}get curve(){return this._curve}set curve(t){this.dirty=this.dirty||this._curve!==t,this._curve=t}setCurve(t){return this.curve=t,this}get iterations(){return this._iterations}set iterations(t){this.dirty=this.dirty||this._iterations!==t,this._iterations=t}setIterations(t){return this.iterations=t,this}updateData(){this.pathData.length=0;for(var t=this.curve.getPoints(this.iterations),e=0,f=t.length;e<f;e++)this.pathData.push(t[e].x,t[e].y);return this.pathData.push(t[0].x,t[0].y),super.updateData(),this}}class h3 extends Il{constructor(t,e,f,i){super(t,e,f,i,0,360)}}class l3 extends wl{constructor(t,e,f,i){t===void 0&&(t=0),e===void 0&&(e=0),f===void 0&&(f=0),i===void 0&&(i=0),super(),this.setP0(t,e),this.setP1(f,i)}get x0(){return this._x0}set x0(t){this.dirty=this.dirty||this._x0!==t,this._x0=t}get y0(){return this._y0}set y0(t){this.dirty=this.dirty||this._y0!==t,this._y0=t}setP0(t,e){return this.x0=t,this.y0=e,this}get x1(){return this._x1}set x1(t){this.dirty=this.dirty||this._x1!==t,this._x1=t}get y1(){return this._y1}set y1(t){this.dirty=this.dirty||this._y1!==t,this._y1=t}setP1(t,e){return this.x1=t,this.y1=e,this}updateData(){return this.pathData.length=0,this.pathData.push(this.x0,this.y0),this.pathData.push(this.x1,this.y1),this.pathData.push(this.x0,this.y0),super.updateData(),this}}var u3=function(s,t,e){return e.length=0,s!=null&&e.push(s,t),e};const Lm=Phaser.Math.Interpolation.QuadraticBezier;var Fm=function(s,t,e,f,i,n){for(var h=n.length,r=n[h-2],a=n[h-1],l=1,o=i-1;l<=o;l++){var u=l/o;n.push(Lm(u,r,s,e),Lm(u,a,t,f))}return n};const f3=Phaser.Math.RotateAround;var d3=function(s,t,e,f){for(var i={x:0,y:0},n=0,h=f.length-1;n<h;n+=2)i.x=f[n],i.y=f[n+1],f3(i,s,t,e),f[n]=i.x,f[n+1]=i.y;return f},c3=function(s,t,e){for(var f=0,i=e.length-1;f<i;f+=2)e[f]+=s,e[f+1]+=t;return e},v3=function(s,t){t===void 0&&(t=[]);for(var e=0,f=s.length-1;e<f;e+=2)t.push({x:s[e],y:s[e+1]});return t};const p3=Phaser.Geom.Polygon;var g3=function(s,t){return t===void 0&&(t=new p3),t.setTo(s),t};const m3=Phaser.Math.DegToRad;class x3{constructor(t){t===void 0&&(t=[]),this.pathData=t,this.closePath=!1,this.setIterations(32),this.lastPointX=void 0,this.lastPointY=void 0}setIterations(t){return this.iterations=t,this}start(){return this.startAt(),this}startAt(t,e){return u3(t,e,this.pathData),this.lastPointX=t,this.lastPointY=e,this}lineTo(t,e,f){return f===void 0&&(f=!1),f&&(t+=this.lastPointX,e+=this.lastPointY),Zr(t,e,this.pathData),this.lastPointX=t,this.lastPointY=e,this}verticalLineTo(t,e){return this.lineTo(t,this.lastPointY,e),this}horizontalLineTo(t,e){return this.lineTo(this.lastPointX,t,e),this}ellipticalArc(t,e,f,i,n,h,r){r===void 0&&(r=!1),Jr(t,e,f,i,n,h,r,this.iterations,this.pathData);var a=this.pathData.length;return this.lastPointX=this.pathData[a-2],this.lastPointY=this.pathData[a-1],this}arc(t,e,f,i,n,h){return this.ellipticalArc(t,e,f,f,i,n,h),this}quadraticBezierTo(t,e,f,i){return Fm(t,e,f,i,this.iterations,this.pathData),this.lastPointX=f,this.lastPointY=i,this.lastCX=t,this.lastCY=e,this}smoothQuadraticBezierTo(t,e){var f=this.lastPointX*2-this.lastCX,i=this.lastPointY*2-this.lastCY;return this.quadraticBezierTo(f,i,t,e),this}cubicBezierCurveTo(t,e,f,i,n,h){return Fm(t,e,f,i,n,h,this.iterations,this.pathData),this.lastPointX=n,this.lastPointY=h,this.lastCX=f,this.lastCY=i,this}smoothCubicBezierCurveTo(t,e,f,i){var n=this.lastPointX*2-this.lastCX,h=this.lastPointY*2-this.lastCY;return this.cubicBezierCurveTo(n,h,t,e,f,i),this}close(){return this.closePath=!0,this}end(){return this.pathData.push(this.lastPointX,this.lastPointY),this}rotateAround(t,e,f){if(this.pathData.length===0)return this;f=m3(f),d3(t,e,f,this.pathData);var i=this.pathData.length;if(this.lastPointX=this.pathData[i-2],this.lastPointY=this.pathData[i-1],this.lastCX!==void 0){var n={x:this.lastCX,y:this.lastCY};PointRotateAround(n,t,e,f),this.lastCX=n.x,this.lastCY=n.y}return this}offset(t,e){return c3(t,e,this.pathData),this}toPoints(){return v3(this.pathData)}toPolygon(t){return g3(this.pathData,t)}draw(t,e,f){var i=this.toPoints();return e&&t.fillPoints(i,this.closePath,this.closePath),f&&t.strokePoints(i,this.closePath,this.closePath),this}}class y3 extends wl{constructor(){super(),this.builder=new x3(this.pathData)}get iterations(){return this.builder.iterations}set iterations(t){this.dirty=this.dirty||this.builder.iterations!==t,this.builder.setIterations(t)}setIterations(t){return this.iterations=t,this}get lastPointX(){return this.builder.lastPointX}get lastPointY(){return this.builder.lastPointY}start(){return this.builder.start(),this.dirty=!0,this}startAt(t,e){return this.builder.startAt(t,e),this.dirty=!0,this}lineTo(t,e,f){return this.builder.lineTo(t,e,f),this.dirty=!0,this}verticalLineTo(t,e){return this.builder.verticalLineTo(t,e),this.dirty=!0,this}horizontalLineTo(t,e){return this.builder.horizontalLineTo(t,e),this.dirty=!0,this}ellipticalArc(t,e,f,i,n,h,r){return this.builder.ellipticalArc(t,e,f,i,n,h,r),this.dirty=!0,this}arc(t,e,f,i,n,h){return this.builder.arc(t,e,f,i,n,h),this.dirty=!0,this}quadraticBezierTo(t,e,f,i){return this.builder.quadraticBezierTo(t,e,f,i),this.dirty=!0,this}smoothQuadraticBezierTo(t,e){return this.builder.smoothQuadraticBezierTo(t,e),this.dirty=!0,this}cubicBezierCurveTo(t,e,f,i,n,h){return this.builder.cubicBezierCurveTo(t,e,f,i,n,h),this.dirty=!0,this}smoothCubicBezierCurveTo(t,e,f,i){return this.builder.smoothCubicBezierCurveTo(t,e,f,i),this.dirty=!0,this}close(){return this.builder.close(),this.closePath=this.builder.closePath,this.dirty=!0,this}end(){return this.builder.end(),this.dirty=!0,this}rotateAround(t,e,f){return this.builder.rotateAround(t,e,f),this.dirty=!0,this}offset(t,e){return this.builder.offset(t,e),this.dirty=!0,this}toPolygon(t){return this.builder.toPolygon(t)}}const T3=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha;class C3 extends Fl{constructor(t,e,f,i){t===void 0&&(t=0),e===void 0&&(e=0),f===void 0&&(f=0),i===void 0&&(i=f),super(),this.pathData=[],this.closePath=!0,this.setTopLeftPosition(t,e),this.setSize(f,i)}get x(){return this._x}set x(t){this.dirty=this.dirty||this._x!==t,this._x=t}get y(){return this._y}set y(t){this.dirty=this.dirty||this._y!==t,this._y=t}setTopLeftPosition(t,e){return this.x=t,this.y=e,this}get width(){return this._width}set width(t){this.dirty=this.dirty||this._width!==t,this._width=t}get height(){return this._height}set height(t){this.dirty=this.dirty||this._height!==t,this._height=t}setSize(t,e){return this.width=t,this.height=e,this}updateData(){this.pathData.length=0;var t=this.x,e=t+this.width,f=this.y,i=f+this.height;return this.pathData.push(t,f),this.pathData.push(e,f),this.pathData.push(e,i),this.pathData.push(t,i),this.pathData.push(t,f),super.updateData(),this}webglRender(t,e,f,i,n){if(this.isFilled){var h=t.fillTint,r=T3(this.fillColor,this.fillAlpha*f);h.TL=r,h.TR=r,h.BL=r,h.BR=r,t.batchFillRect(-i+this.x,-n+this.y,this.width,this.height)}this.isStroked&&Tl(t,this,f,i,n)}canvasRender(t,e,f){this.isFilled&&(go(t,this),t.fillRect(-e,-f,this.width,this.height)),this.isStroked&&(mo(t,this),t.beginPath(),t.rect(-e,-f,this.width,this.height),t.stroke())}}const S3=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha;class E3 extends Fl{constructor(t,e,f,i,n,h){t===void 0&&(t=0),e===void 0&&(e=0),f===void 0&&(f=0),i===void 0&&(i=0),n===void 0&&(n=0),h===void 0&&(h=0),super(),this.pathData=[],this.closePath=!0,this.setP0(t,e),this.setP1(f,i),this.setP2(n,h)}get x0(){return this._x0}set x0(t){this.dirty=this.dirty||this._x0!==t,this._x0=t}get y0(){return this._y0}set y0(t){this.dirty=this.dirty||this._y0!==t,this._y0=t}setP0(t,e){return this.x0=t,this.y0=e,this}get x1(){return this._x1}set x1(t){this.dirty=this.dirty||this._x1!==t,this._x1=t}get y1(){return this._y1}set y1(t){this.dirty=this.dirty||this._y1!==t,this._y1=t}setP1(t,e){return this.x1=t,this.y1=e,this}get x2(){return this._x2}set x2(t){this.dirty=this.dirty||this._x2!==t,this._x2=t}get y2(){return this._y2}set y2(t){this.dirty=this.dirty||this._y2!==t,this._y2=t}setP2(t,e){return this.dirty=this.dirty||this.x2!==t||this.y2!==e,this.x2=t,this.y2=e,this}updateData(){return this.pathData.length=0,this.pathData.push(this.x0,this.y0),this.pathData.push(this.x1,this.y1),this.pathData.push(this.x2,this.y2),this.pathData.push(this.x0,this.y0),super.updateData(),this}webglRender(t,e,f,i,n){if(this.isFilled){var h=S3(this.fillColor,this.fillAlpha*f),r=this.x0-i,a=this.y0-n,l=this.x1-i,o=this.y1-n,u=this.x2-i,v=this.y2-n,d=e.getX(r,a),c=e.getY(r,a),p=e.getX(l,o),g=e.getY(l,o),m=e.getX(u,v),x=e.getY(u,v);t.batchTri(d,c,p,g,m,x,h,h,h)}this.isStroked&&Tl(t,this,f,i,n)}canvasRender(t,e,f){var i=this.x1-e,n=this.y1-f,h=this.x2-e,r=this.y2-f,a=this.x3-e,l=this.y3-f;t.beginPath(),t.moveTo(i,n),t.lineTo(h,r),t.lineTo(a,l),t.closePath(),this.isFilled&&(go(t,this),t.fill()),this.isStroked&&(mo(t,this),t.stroke())}}const si=Phaser.Utils.Objects.GetValue,P3=Phaser.Utils.Objects.IsPlainObject,wm=Phaser.Math.Clamp,M3=Phaser.Math.Linear,Im=Phaser.Math.Percent,A3=Phaser.Math.DegToRad(270),O3=Phaser.Math.RadToDeg;class Dl extends Oc{constructor(t,e,f,i,n,h,r){P3(e)&&(r=e,e=si(r,"x",0),f=si(r,"y",0),i=si(r,"radius",1),n=si(r,"barColor",void 0),h=si(r,"value",0));var a=i*2;super(t,e,f,a,a),this.type="rexCircularProgress",this.eventEmitter=si(r,"eventEmitter",this),this.addShape(new Ud().setName("track")).addShape(new Il().setName("bar")).addShape(new Ud().setName("center")),this.setRadius(i),this.setTrackColor(si(r,"trackColor",void 0)),this.setBarColor(n),this.setCenterColor(si(r,"centerColor",void 0)),this.setThickness(si(r,"thickness",.2)),this.setStartAngle(si(r,"startAngle",A3)),this.setAnticlockwise(si(r,"anticlockwise",!1));var l=si(r,"valuechangeCallback",null);if(l!==null){var o=si(r,"valuechangeCallbackScope",void 0);this.eventEmitter.on("valuechange",l,o)}this.setEaseValuePropName("value").setEaseValueDuration(si(r,"easeValue.duration",0)).setEaseValueFunction(si(r,"easeValue.ease","Linear")),this.setValue(h)}resize(t,e){return t=Math.floor(Math.min(t,e)),t===this.width?this:(super.resize(t,t),this.setRadius(t/2),this)}get value(){return this._value}set value(t){t=wm(t,0,1);var e=this._value,f=e!=t;this.dirty=this.dirty||f,this._value=t,f&&this.eventEmitter.emit("valuechange",this._value,e,this.eventEmitter)}setValue(t,e,f){return t==null?this:(e!==void 0&&(t=Im(t,e,f)),this.value=t,this)}addValue(t,e,f){return e!==void 0&&(t=Im(t,e,f)),this.value+=t,this}getValue(t,e){var f=this.value;return t!==void 0&&(f=M3(t,e,f)),f}get radius(){return this._radius}set radius(t){this.dirty=this.dirty||this._radius!=t,this._radius=t;var e=t*2;this.resize(e,e)}setRadius(t){return this.radius=t,this}get trackColor(){return this._trackColor}set trackColor(t){this.dirty=this.dirty||this._trackColor!=t,this._trackColor=t}setTrackColor(t){return this.trackColor=t,this}get barColor(){return this._barColor}set barColor(t){this.dirty=this.dirty||this._barColor!=t,this._barColor=t}setBarColor(t){return this.barColor=t,this}get startAngle(){return this._startAngle}set startAngle(t){this.dirty=this.dirty||this._startAngle!=t,this._startAngle=t}setStartAngle(t){return this.startAngle=t,this}get anticlockwise(){return this._anticlockwise}set anticlockwise(t){this.dirty=this.dirty||this._anticlockwise!=t,this._anticlockwise=t}setAnticlockwise(t){return t===void 0&&(t=!0),this.anticlockwise=t,this}get thickness(){return this._thickness}set thickness(t){t=wm(t,0,1),this.dirty=this.dirty||this._thickness!=t,this._thickness=t}setThickness(t){return this.thickness=t,this}get centerColor(){return this._centerColor}set centerColor(t){this.dirty=this.dirty||this._centerColor!=t,this._centerColor=t}setCenterColor(t){return this.centerColor=t,this}updateShapes(){var t=this.radius,e=this.thickness*this.radius,f=this.radius-e/2,i=this.radius-e,n=this.getShape("track");this.trackColor!=null&&e>0?n.setCenterPosition(t,t).setRadius(f).lineStyle(e,this.trackColor):n.reset();var h=this.getShape("bar");if(this.barColor!=null&&f>0){var r,a,l;if(this.value===1)r=!1,a=0,l=361;else{r=this.anticlockwise,a=O3(this.startAngle);var o=360*(r?1-this.value:this.value);l=o+a}h.setCenterPosition(t,t).setRadius(f).setAngle(a,l,r).lineStyle(e,this.barColor)}else h.reset();var u=this.getShape("center");this.centerColor&&i>0?u.setCenterPosition(t,t).setRadius(i).fillStyle(this.centerColor):u.reset()}}Object.assign(Dl.prototype,To);xt.register("circularProgress",function(s,t,e,f,i,n){var h=new Dl(this.scene,s,t,e,f,i,n);return this.scene.add.existing(h),h});Ct(window,"RexPlugins.UI.CircularProgress",Dl);var Bl=function(s){return s.hasOwnProperty("rexSizer")||(s.rexSizer={}),s.rexSizer},R3=function(s){var t=Bl(s);return t.hasOwnProperty("prevState")||(t.prevState={}),t.prevState},L3=function(s){return s===void 0&&(s=ra(this.scene)),this.left=Math.max(this.left,s.left),this.right=Math.min(this.right,s.right),this.top=Math.max(this.top,s.top),this.bottom=Math.min(this.bottom,s.bottom),this};const di=Phaser.Display.Align;var bl={center:di.CENTER,left:di.LEFT_CENTER,right:di.RIGHT_CENTER,top:di.TOP_CENTER,bottom:di.BOTTOM_CENTER,"left-top":di.TOP_LEFT,"left-center":di.LEFT_CENTER,"left-bottom":di.BOTTOM_LEFT,"center-top":di.TOP_CENTER,"center-center":di.CENTER,"center-bottom":di.BOTTOM_CENTER,"right-top":di.TOP_RIGHT,"right-center":di.RIGHT_CENTER,"right-bottom":di.BOTTOM_RIGHT},Wd=new Phaser.GameObjects.Zone({sys:{queueDepthSort:gi,events:{once:gi}}},0,0,1,1);Wd.setOrigin(0);var os={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12},Rc=function(s){var t=Qt(s);return s.y+t-t*s.originY},Lc=function(s){var t=ne(s);return s.x-t*s.originX+t*.5},Fc=function(s,t){var e=Qt(s);return s.y=t-e+e*s.originY,s},wc=function(s,t){var e=ne(s),f=e*s.originX;return s.x=t+f-e*.5,s},F3=function(s,t,e,f){return e===void 0&&(e=0),f===void 0&&(f=0),wc(s,Lc(t)+e),Fc(s,Rc(t)+f),s},Ic=function(s){var t=ne(s);return s.x-t*s.originX},Dc=function(s,t){var e=ne(s);return s.x=t+e*s.originX,s},w3=function(s,t,e,f){return e===void 0&&(e=0),f===void 0&&(f=0),Dc(s,Ic(t)-e),Fc(s,Rc(t)+f),s},Bc=function(s){var t=ne(s);return s.x+t-t*s.originX},bc=function(s,t){var e=ne(s);return s.x=t-e+e*s.originX,s},I3=function(s,t,e,f){return e===void 0&&(e=0),f===void 0&&(f=0),bc(s,Bc(t)+e),Fc(s,Rc(t)+f),s},Gc=function(s,t){var e=Qt(s),f=e*s.originY;return s.y=t+f-e*.5,s},D3=function(s,t,e){return wc(s,t),Gc(s,e)},Nc=function(s){var t=Qt(s);return s.y-t*s.originY+t*.5},B3=function(s,t,e,f){return e===void 0&&(e=0),f===void 0&&(f=0),D3(s,Lc(t)+e,Nc(t)+f),s},b3=function(s,t,e,f){return e===void 0&&(e=0),f===void 0&&(f=0),Dc(s,Ic(t)-e),Gc(s,Nc(t)+f),s},G3=function(s,t,e,f){return e===void 0&&(e=0),f===void 0&&(f=0),bc(s,Bc(t)+e),Gc(s,Nc(t)+f),s},Yc=function(s){var t=Qt(s);return s.y-t*s.originY},zc=function(s,t){var e=Qt(s);return s.y=t+e*s.originY,s},N3=function(s,t,e,f){return e===void 0&&(e=0),f===void 0&&(f=0),wc(s,Lc(t)+e),zc(s,Yc(t)-f),s},Y3=function(s,t,e,f){return e===void 0&&(e=0),f===void 0&&(f=0),Dc(s,Ic(t)-e),zc(s,Yc(t)-f),s},z3=function(s,t,e,f){return e===void 0&&(e=0),f===void 0&&(f=0),bc(s,Bc(t)+e),zc(s,Yc(t)-f),s},Nn=[];Nn[os.BOTTOM_CENTER]=F3;Nn[os.BOTTOM_LEFT]=w3;Nn[os.BOTTOM_RIGHT]=I3;Nn[os.CENTER]=B3;Nn[os.LEFT_CENTER]=b3;Nn[os.RIGHT_CENTER]=G3;Nn[os.TOP_CENTER]=N3;Nn[os.TOP_LEFT]=Y3;Nn[os.TOP_RIGHT]=z3;var gT=function(s,t,e,f,i){return Nn[e](s,t,f,i)},Gl=function(s,t,e,f,i,n){Wd.setPosition(t,e).setSize(f,i),gT(s,Wd,n)};const Ga=Phaser.Utils.Objects.GetValue,V3=Phaser.GameObjects.Group;var U3=function(s,t){var e=s.scene,f,i,n,h,r;if(typeof t=="number")f=t;else{f=Ga(t,"color"),i=rl(t,"lineWidth");var a=Ga(t,"name",!1);a&&(n=Ga(a,"createTextCallback",W3),h=Ga(a,"createTextCallbackScope",void 0),r=Ga(a,"align","left-top"),typeof r=="string"&&(r=bl[r]))}if(f===void 0&&(f=16777215),i===void 0&&(i=1),n&&!s.children){s.children=new V3(e),s.once("destroy",function(p,g){p.children.destroy(!g),p.children=void 0});var l=s.clear.bind(s);s.clear=function(){l(),s.children.clear(!1,!0)}}for(var o=this.getAllShownChildren([this]),u,v,d=0,c=o.length;d<c;d++){if(u=o[d],u.getBounds||u.width!==void 0&&u.height!==void 0)tr=rl(u,tr);else continue;f!=null&&s.lineStyle(i,f).strokeRectShape(tr),u.name&&n&&(h?v=n.call(h,e):v=n(e),v&&(v.setText(u.name),s.children.add(v),Gl(v,tr.x,tr.y,tr.width,tr.height,r)))}return this},W3=function(s,t,e){return s.add.text(0,0,"")},tr=void 0;const Lh=Phaser.Utils.Objects.GetValue;var aa=function(s,t){return t===void 0&&(t={}),typeof s=="number"?(t.left=s,t.right=s,t.top=s,t.bottom=s):(t.left=Lh(s,"left",0),t.right=Lh(s,"right",0),t.top=Lh(s,"top",0),t.bottom=Lh(s,"bottom",0)),t};const X3=_i.prototype.add;var Co=function(s){return X3.call(this,s),this.sizerEventsEnable&&(s.emit("sizer.add",s,this),this.emit("add",s,this)),this},H3={addBackground(s,t,e){this.backgroundChildren===void 0&&(this.backgroundChildren=[]),typeof t=="string"&&(e=t,t=void 0),t===void 0&&(t=0),Co.call(this,s),this.backgroundChildren.push(s);var f=this.getSizerConfig(s);return f.padding=aa(t),e!==void 0&&this.addChildrenMap(e,s),this},isBackground(s){return this.backgroundChildren===void 0?!1:this.backgroundChildren.indexOf(s)!==-1}},$3={removeFromParentSizer(){var s=this.getParentSizer();return s&&s.remove(this),this}},Dm=function(s,t){return this.childrenMap[s]=t,this},K3=function(s){if(typeof s=="object"){var t=s;for(var s in this.childrenMap)if(this.childrenMap[s]===t)return delete this.childrenMap[s],this}return delete this.childrenMap[s],this},k3=function(s,t){if(typeof s=="string"&&(s=s.split(".")),s.length!==0){var e=s.shift(),f=null;if(e.charAt(0)==="#")e=e.substring(1),f=this.getByName(e,t);else if(e.indexOf("[")===-1)this.childrenMap&&(f=this.childrenMap[e]);else{var i=e.match(Z3);if(i!=null&&this.childrenMap){var n=this.childrenMap[i[1]];n&&(f=n[i[2]])}}return s.length===0?f:f&&f.childrenMap?f.getElement(s):null}};const Z3=/(\S+)\[(\d+)\]/i;var J3={getInnerPadding(s){return qh(this.space,s)},setInnerPadding(s,t){return Fs(this.space,s,t),this},getOuterPadding(s){return qh(this.getSizerConfig(this).padding,s)},setOuterPadding(s,t){return Fs(this.getSizerConfig(this).padding,s,t),this},getChildOuterPadding(s,t){return typeof s=="string"&&(s=this.getElement(s)),qh(this.getSizerConfig(s).padding,t)},setChildOuterPadding(s,t,e){return typeof s=="string"&&(s=this.getElement(s)),Fs(this.getSizerConfig(s).padding,t,e),this}},Vc=function(s){return s===void 0&&(s=Math.max(this.childrenWidth,this.minWidth)),s},Q3=function(s){var t,e;for(var f in this.sizerChildren)t=this.sizerChildren[f],t&&t.isRexSizer&&!t.ignoreLayout&&(e=this.getExpandedChildWidth(t,s),e=t.resolveWidth(e),t.resolveChildrenWidth(e))},Uc=function(s){var t=Math.max(this.childrenHeight,this.minHeight);return s===void 0&&(s=t),s},j3=function(s){var t;return s.isRexSizer?t=Math.max(s.minWidth,s.childrenWidth):s.minWidth!==void 0?t=s.minWidth:t=ne(s),t},q3=function(s){var t;return s.isRexSizer?t=Math.max(s.minHeight,s.childrenHeight):s.minHeight!==void 0?t=s.minHeight:t=Qt(s),t},_3=function(s,t){return t},tN=function(s,t){return t},eN=function(){return 0},iN=function(){return 0},nN=function(s){s===void 0&&(s=[]);for(var t=s.length,e=this.getChildrenSizers(s),f=s.length,i=t;i<f;i++)e[i].getAllChildrenSizers(s);return s},sN=function(s){return s===void 0&&(s=[]),s},rN={getShownChildren(s){s===void 0&&(s=[]);for(var t=this.children,e,f=0,i=t.length;f<i;f++)e=t[f],!(e.rexSizer&&e.rexSizer.hidden)&&s.push(e);return s},getAllShownChildren(s){s===void 0&&(s=[]);for(var t=this.children,e,f=0,i=t.length;f<i;f++)e=t[f],!(e.rexSizer&&e.rexSizer.hidden)&&(s.push(e),e.hasOwnProperty("isRexContainerLite")&&s.push(...e.getAllShownChildren()));return s}},So=function(){this._childrenWidth=void 0,this._childrenHeight=void 0;for(var s=this.getChildrenSizers(),t,e=0,f=s.length;e<f;e++)t=s[e],!t.ignoreLayout&&t.preLayout()},aN=function(){var s=this.scaleX,t=this.scaleY,e=s===1&&t===1;return e||this.setScale(1),this.runLayout(),e||this.setScale(s,t),this},oN=function(s,t,e){if(this.ignoreLayout)return this;var f=!s;return f&&this.preLayout(),t=this.resolveWidth(t),f&&(this.resolveChildrenWidth(t),this.runWidthWrap(t)),e=this.resolveHeight(e),this.resize(t,e),this.sizerEventsEnable&&this.layoutedChildren===void 0&&(this.layoutedChildren=[]),this.layoutChildren(),this.layoutBackgrounds(),this.sizerEventsEnable&&(this.emit("postlayout",this.layoutedChildren,this),this.layoutedChildren.length=0),this.postLayout()},hN=function(){},lN=function(s,t,e){return this._anchor&&this._anchor.updatePosition(),this},mT=function(s){var t,e;for(var f in this.sizerChildren)t=this.sizerChildren[f],!(!t||t.isRexSizer&&t.ignoreLayout||!t.runWidthWrap)&&(e=this.getExpandedChildWidth(t,s),t.isRexSizer&&(e=t.resolveWidth(e)),t.runWidthWrap(e));return this};class Wc extends He{constructor(t,e){super(t,{eventEmitter:!1}),this.viewport=void 0,this.resetFromJSON(e)}shutdown(t){this.isShutdown||(this.autoAnchor(!1),this.viewport=void 0,this.onUpdateViewportCallback=void 0,this.onUpdateViewportCallbackScope=void 0,this.onResizeCallback=void 0,this.onResizeCallbackScope=void 0,super.shutdown(t))}resetFromJSON(t){t===void 0&&(t={});var e,f;t.x!==void 0?(e=null,f=t.x):t.left!==void 0?(e=0,f=t.left):t.right!==void 0?(e=1,f=t.right):t.centerX!==void 0&&(e=.5,f=t.centerX);var i,n;t.y!==void 0?(i=null,n=t.y):t.top!==void 0?(i=0,n=t.top):t.bottom!==void 0?(i=1,n=t.bottom):t.centerY!==void 0&&(i=.5,n=t.centerY);var h,r;f!==void 0&&(f=f.replace("left","0%").replace("right","100%").replace("center","50%").split("%"),h=parseFloat(f[0])/100,r=f[1]===""?0:parseFloat(f[1]));var a,l;n!==void 0&&(n=n.replace("top","0%").replace("bottom","100%").replace("center","50%").split("%"),a=parseFloat(n[0])/100,l=n[1]===""?0:parseFloat(n[1]));var o=t.width,u,v;o!==void 0&&(o=o.split("%"),u=parseFloat(o[0])/100,v=o[1]===""?0:parseFloat(o[1]));var d=t.height,c,p;d!==void 0&&(d=d.split("%"),c=parseFloat(d[0])/100,p=d[1]===""?0:parseFloat(d[1])),this.setAlign(e,i),this.setPercentage(h,a),this.setOffset(r,l),this.setSizePercentage(u,c),this.setSizePadding(v,p);var g=t.onResizeCallback,m=t.onResizeCallbackScope;g!==void 0&&this.setResizeCallback(g,m);var x=t.onUpdateViewportCallback,y=t.onUpdateViewportCallbackScope;return x!==void 0&&this.setUpdateViewportCallback(x,y),this.autoAnchor(t.enable),this}autoAnchor(t){return t===void 0&&(t=!0),t=!!t,this.autoAnchorEnable===t?this:(t?(this.scene.sys.scale.on("resize",this.anchor,this),this.anchor()):this.scene.sys.scale.off("resize",this.anchor,this),this.autoAnchorEnable=t,this)}setAlign(t,e){return this.alignX=t,this.alignY=e,this}setPercentage(t,e){return this.percentageX=t,this.percentageY=e,this}setOffset(t,e){return this.offsetX=t,this.offsetY=e,this}setSizePercentage(t,e){return this.percentageWidth=t,this.percentageHeight=e,this}setSizePadding(t,e){return this.paddingWidth=t,this.paddingHeight=e,this}setResizeCallback(t,e){return this.onResizeCallback=t,this.onResizeCallbackScope=e,this}setUpdateViewportCallback(t,e){return this.onUpdateViewportCallback=t,this.onUpdateViewportCallbackScope=e,this}anchor(){return this.updateViewport(),this.updateSize(),this.updatePosition(),this}updateSize(){var t=this.onResizeCallback,e=this.onResizeCallbackScope,f=this.anchorWidth,i=this.anchorHeight;if(!(f===void 0&&i===void 0||!t)){var n=this.parent;f===void 0&&(f=n.width),i===void 0&&(i=n.height),e?t.call(e,f,i,n,this):t(f,i,n,this)}}updatePosition(){var t=this.parent;return this.alignX===null?t.x=this.anchorX:this.alignX!==void 0&&(t.x=this.anchorX+t.displayWidth*(t.originX-this.alignX)),this.alignY===null?t.y=this.anchorY:this.alignY!==void 0&&(t.y=this.anchorY+t.displayHeight*(t.originY-this.alignY)),this}get anchorX(){return this.viewport.x+this.viewport.width*this.percentageX+this.offsetX}get anchorY(){return this.viewport.y+this.viewport.height*this.percentageY+this.offsetY}get anchorWidth(){if(this.percentageWidth!==void 0)return this.viewport.width*this.percentageWidth+this.paddingWidth}get anchorHeight(){if(this.percentageHeight!==void 0)return this.viewport.height*this.percentageHeight+this.paddingHeight}updateViewport(){var t=this.parent.scene.cameras.main;this.viewport=ra(this.scene,t,this.viewport);var e=this.viewport,f=this.onUpdateViewportCallback,i=this.onUpdateViewportCallbackScope;f&&(i?f.call(i,e,this.parent,this):f(e,this.parent,this))}}var uN=function(s){s===void 0&&(s={});var t=s.hasOwnProperty("width"),e=s.hasOwnProperty("height"),f=s.hasOwnProperty("onResizeCallback");return(t||e)&&!f&&(s.onResizeCallback=function(i,n,h){t&&h.setMinWidth(i),e&&h.setMinHeight(n),h.layout()}),this._anchor===void 0?this._anchor=new Wc(this,s):this._anchor.resetFromJSON(s),this};const fN=Phaser.Utils.Objects.GetValue,Dr=Phaser.Utils.Objects.GetAdvancedValue,Bm=Phaser.Math.Linear;class al extends ur{constructor(t,e){super(t,e),this.scaleStart={},this.scaleEnd={},this.resetFromJSON(e),this.boot()}resetFromJSON(t){return super.resetFromJSON(t),this.setMode(fN(t,"mode",0)),this.setScaleRange(Dr(t,"start",void 0),Dr(t,"end",0)),this}setMode(t){return typeof t=="string"&&(t=dN[t]),this.mode=t,this}setScaleRange(t,e){return typeof t=="number"?(this.startX=t,this.startY=t):(this.startX=Dr(t,"x",this.parent.scaleX),this.startY=Dr(t,"y",this.parent.scaleY)),typeof e=="number"?(this.endX=e,this.endY=e):(this.endX=Dr(e,"x",void 0),this.endY=Dr(e,"y",void 0)),this.hasScaleX=this.startX!==void 0&&this.endX!==void 0,this.hasScaleY=this.startY!==void 0&&this.endY!==void 0,this}start(){if(this.timer.isRunning)return this;var t=this.parent;this.hasScaleX&&(t.scaleX=this.startX),this.hasScaleY&&(t.scaleY=this.startY);var e=this.repeat;return this.mode===2&&e!==-1&&(e=(e+1)*2-1),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(e),super.start(),this}updateGameObject(t,e){var f=e.t;e.isOddIteration&&(f=1-f),f=this.easeFn(f),this.hasScaleX&&(t.scaleX=Bm(this.startX,this.endX,f)),this.hasScaleY&&(t.scaleY=Bm(this.startY,this.endY,f))}complete(){return super.complete(),this.mode===1&&this.parent.destroy(),this}}const dN={stop:0,destroy:1,yoyo:2};var xT=function(s,t,e,f,i){f===void 0&&(f="Cubic");var n,h;switch(e){case 0:case"x":n={x:0},h={x:s.scaleX};break;case 1:case"y":n={y:0},h={y:s.scaleY};break;default:n=0,h=s.scale;break}var r={mode:0,start:n,end:h,duration:t,ease:f};return i===void 0?i=new al(s,r):i.resetFromJSON(r),i.restart(),i},yT=function(s,t,e,f,i,n){f===void 0&&(f="Linear"),i instanceof al&&(n=i,i=void 0),i===void 0&&(i=!0);var h={};switch(h.mode=i?1:0,e){case 0:case"x":h.end={x:0};break;case 1:case"y":h.end={y:0};break;default:h.end=0;break}return h.duration=t,h.ease=f,n===void 0?n=new al(s,h):n.resetFromJSON(h),n.restart(),n},cN=function(s,t,e,f,i,n,h){e===void 0&&(e=1.2),f===void 0&&(f=0),n===void 0&&(n="Cubic");var r,a;switch(i){case 0:case"x":r={x:s.scaleX},a={x:e};break;case 1:case"y":r={y:s.scaleX},a={y:e};break;default:r=s.scaleX,a=e;break}var l={mode:2,start:r,end:a,duration:t/2,ease:n,repeat:f};return h===void 0?h=new al(s,l):h.resetFromJSON(l),h.restart(),h};const zf=Phaser.Utils.Objects.IsPlainObject;var Vf=function(s,t){t.completeEventName=void 0,t.on("complete",function(){t.completeEventName&&(s.emit(t.completeEventName,s),t.completeEventName=void 0)}),t.on("update",function(){var e=s.getParentSizer();e&&e.resetChildPositionState(s)})},vN={popUp(s,t,e){if(zf(s)){var f=s;s=f.duration,t=f.orientation,e=f.ease}var i=this._scale===void 0;return this._scale=xT(this,s,t,e,this._scale),i&&Vf(this,this._scale),this._scale.completeEventName="popup.complete",this},popUpPromise(s,t,e){return this.popUp(s,t,e),We(this._scale)},scaleDownDestroy(s,t,e,f){if(zf(s)){var i=s;s=i.duration,t=i.orientation,e=i.ease,f=i.destroy}var n=this._scale===void 0;return this._scale=yT(this,s,t,e,f,this._scale),n&&Vf(this,this._scale),this._scale.completeEventName="scaledown.complete",this},scaleDownDestroyPromise(s,t,e,f){return this.scaleDownDestroy(s,t,e,f),We(this._scale)},scaleDown(s,t,e){return this.scaleDownDestroy(s,t,e,!1),this},scaleDownPromise(s,t,e){return this.scaleDown(s,t,e),We(this._scale)},scaleYoyo(s,t,e,f,i){if(zf(s)){var n=s;s=n.duration,t=n.peakValue,e=n.repeat,f=n.orientation,i=n.ease}var h=this._scale===void 0;return this._scale=cN(this,s,t,e,f,i,this._scale),h&&Vf(this,this._scale),this._scale.completeEventName="scaleyoyo.complete",this},scaleYoyoPromise(s,t,e,f,i){return this.scaleYoyo(s,t,e,f,i),We(this._scale)}};const pN=Phaser.Utils.Objects.GetValue,bm=Phaser.Utils.Objects.GetAdvancedValue,gN=Phaser.Math.Linear;class Xd extends ur{constructor(t,e){super(t,e),this.resetFromJSON(e),this.boot()}resetFromJSON(t){return super.resetFromJSON(t),this.setMode(pN(t,"mode",0)),this.setAlphaRange(bm(t,"start",this.parent.alpha),bm(t,"end",0)),this}setMode(t){return typeof t=="string"&&(t=mN[t]),this.mode=t,this}setAlphaRange(t,e){return this.alphaStart=t,this.alphaEnd=e,this}start(){if(this.timer.isRunning)return this;var t=this.parent;return t.setAlpha(this.alphaStart),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(this.mode===2?-1:0),super.start(),this}updateGameObject(t,e){var f=e.t;e.isOddIteration&&(f=1-f),t.alpha=gN(this.alphaStart,this.alphaEnd,f)}complete(){return super.complete(),this.mode===1&&this.parent.destroy(),this}}const mN={stop:0,destroy:1,yoyo:2},xN=Phaser.Utils.Objects.IsPlainObject;var Nl=function(s,t,e,f){var i,n;xN(e)?(i=e.start,n=e.end):n=e,i===void 0&&(i=0),n===void 0&&(n=1);var h={mode:0,start:i,end:n,duration:t};return f===void 0?f=new Xd(s,h):f.resetFromJSON(h),f.restart(),f},Yl=function(s,t,e,f){e instanceof Xd&&(f=e,e=void 0),e===void 0&&(e=!0);var i={mode:e?1:0,end:0,duration:t};return f===void 0?f=new Xd(s,i):f.resetFromJSON(i),f.restart(),f};const Gm=Phaser.Utils.Objects.IsPlainObject;var Nm=function(s,t){t.completeEventName=void 0,t.on("complete",function(){t.completeEventName&&(s.emit(t.completeEventName,s),t.completeEventName=void 0)}),t.on("update",function(){var e=s.getParentSizer();e&&e.resetChildAlphaState(s)})},yN={fadeIn(s,t){if(Gm(s)){var e=s;s=e.duration,t=e.alpha}var f=this._fade===void 0;return this._fade=Nl(this,s,t,this._fade),f&&Nm(this,this._fade),this._fade.completeEventName="fadein.complete",this},fadeInPromise(s,t){return this.fadeIn(s,t),We(this._fade)},fadeOutDestroy(s,t){if(Gm(s)){var e=s;s=e.duration,t=e.destroy}var f=this._fade===void 0;return this._fade=Yl(this,s,t,this._fade),f&&Nm(this,this._fade),this._fade.completeEventName="fadeout.complete",this},fadeOutDestroyPromise(s,t){return this.fadeOutDestroy(s,t),We(this._fade)},fadeOut(s){return this.fadeOutDestroy(s,!1),this},fadeOutPromise(s){return this.fadeOut(s),We(this._fade)}};const TN=Phaser.Utils.Objects.GetValue,Br=Phaser.Utils.Objects.GetAdvancedValue,Ym=Phaser.Math.Linear;class ol extends ur{constructor(t,e){super(t,e),this.resetFromJSON(e),this.boot()}resetFromJSON(t){if(super.resetFromJSON(t),this.setMode(TN(t,"mode",0)),t&&(t.hasOwnProperty("x")||t.hasOwnProperty("y"))){var e=Br(t,"x",void 0),f=Br(t,"y",void 0);this.setTargetPosition(e,f)}else this.setTargetPosition(t);return this}setMode(t){return typeof t=="string"&&(t=CN[t]),this.mode=t,this}setTargetPosition(t,e){if(typeof t=="number"||typeof e=="number")this.startX=this.parent.x,this.startY=this.parent.y,this.endX=t,this.endY=e;else{var f=t;this.startX=Br(f,"startX",void 0),this.startY=Br(f,"startY",void 0),this.endX=Br(f,"endX",void 0),this.endY=Br(f,"endY",void 0)}return this.hasMoveX=this.startX!==void 0&&this.endX!==void 0,this.hasMoveY=this.startY!==void 0&&this.endY!==void 0,this}start(){if(this.timer.isRunning)return this;var t=this.parent;return this.hasMoveX&&(t.x=this.startX),this.hasMoveY&&(t.y=this.startY),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(this.mode===2?-1:0),super.start(),this}updateGameObject(t,e){var f=e.t;e.isOddIteration&&(f=1-f),f=this.easeFn(f),this.hasMoveX&&(t.x=Ym(this.startX,this.endX,f)),this.hasMoveY&&(t.y=Ym(this.startY,this.endY,f))}complete(){return super.complete(),this.mode===1&&this.parent.destroy(),this}}const CN={stop:0,destroy:1,yoyo:2};var hl=function(s,t){if(typeof s=="number")return s;var e=s[0],f=parseFloat(s.substr(2));switch(e){case"+":return t+f;case"-":return t-f;case"*":return t*f;case"/":return t/f}},TT=function(s,t,e,f,i,n,h){n instanceof ol&&(h=n,n=void 0),n===void 0&&(n=!1);var r={};return r.mode=n?1:0,e!==void 0&&(r.startX=s.x,r.endX=hl(e,s.x)),f!==void 0&&(r.startY=s.y,r.endY=hl(f,s.y)),r.duration=t,r.ease=i===void 0?"Linear":i,h===void 0?h=new ol(s,r):h.resetFromJSON(r),h.restart(),h},CT=function(s,t,e,f,i,n,h){n instanceof ol&&(h=n,n=void 0),n===void 0&&(n=!1);var r={};return r.mode=n?1:0,e!==void 0&&(r.startX=hl(e,s.x),r.endX=s.x),f!==void 0&&(r.startY=hl(f,s.y),r.endY=s.y),r.duration=t,r.ease=i===void 0?"Linear":i,h===void 0?h=new ol(s,r):h.resetFromJSON(r),h.restart(),h};const zm=Phaser.Utils.Objects.IsPlainObject,Vm=Phaser.Math.Distance.Between;var Um=function(s,t){t.completeEventName=void 0,t.on("complete",function(){t.completeEventName&&(s.emit(t.completeEventName,s),t.completeEventName=void 0)}),t.on("update",function(){var e=s.getParentSizer();e&&e.resetChildPositionState(s)})},SN={moveFrom(s,t,e,f,i){if(zm(s)){var n=s;t=n.x,e=n.y,n.hasOwnProperty("speed")?s=Vm(t,e,this.x,this.y)*1e3/n.speed:s=n.duration,f=n.ease}var h=this._easeMove===void 0;return this._easeMove=CT(this,s,t,e,f,i,this._easeMove),h&&Um(this,this._easeMove),this._easeMove.completeEventName="movefrom.complete",this},moveFromPromise(s,t,e,f,i){return this.moveFrom(s,t,e,f,i),We(this._easeMove)},moveFromDestroy(s,t,e,f){return this.moveFrom(s,t,e,f,!0),this},moveFromDestroyPromise(s,t,e,f){return this.moveFromDestroy(s,t,e,f),We(this._easeMove)},moveTo(s,t,e,f,i){if(zm(s)){var n=s;t=n.x,e=n.y,n.hasOwnProperty("speed")?s=Vm(t,e,this.x,this.y)*1e3/n.speed:s=n.duration,f=n.ease}var h=this._easeMove===void 0;return this._easeMove=TT(this,s,t,e,f,i,this._easeMove),h&&Um(this,this._easeMove),this._easeMove.completeEventName="moveto.complete",this},moveToPromise(s,t,e,f,i){return this.moveTo(s,t,e,f,i),We(this._easeMove)},moveToDestroy(s,t,e,f){return this.moveTo(s,t,e,f,!0),this},moveToDestroyPromise(s,t,e,f){return this.moveToDestroy(s,t,e,f,!0),We(this._easeMove)},moveStop(s){return this._easeMove?(this._easeMove.stop(s),this):this}};const ln=Phaser.Utils.Objects.GetValue;class Xc extends Ol{constructor(t,e){super(t,e),this.timer=new eT,this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.timer.resetFromJSON(ln(t,"timer")),this.setEnable(ln(t,"enable",!0)),this.setMode(ln(t,"mode",1)),this.isRunning=ln(t,"isRunning",!1),this.setMagnitudeMode(ln(t,"magnitudeMode",1)),this.setDuration(ln(t,"duration",500)),this.setMagnitude(ln(t,"magnitude",10)),this.ox=ln(t,"ox",void 0),this.oy=ln(t,"oy",void 0),this}toJSON(){return{timer:this.timer.toJSON(),enable:this.enable,mode:this.mode,isRunning:this.isRunning,magnitudeMode,duration:this.duration,magnitude:this.magnitude,ox:this.ox,oy:this.oy}}shutdown(t){this.isShutdown||(super.shutdown(t),this.timer.destroy(),this.timer=void 0)}startTicking(){super.startTicking(),this.mode===0?(this.scene.game.events.on("poststep",this.update,this),this.scene.game.events.on("prestep",this.backToOrigin,this)):this.scene.sys.events.on("preupdate",this.update,this)}stopTicking(){super.stopTicking(),this.scene&&(this.mode===0?(this.scene.game.events.off("poststep",this.update,this),this.scene.game.events.off("prestep",this.backToOrigin,this)):this.scene.sys.events.off("preupdate",this.update,this))}setEnable(t){return t==null&&(t=!0),this.enable=t,this}setMode(t){return typeof t=="string"&&(t=EN[t]),this.mode=t,this}setMagnitudeMode(t){return typeof t=="string"&&(t=PN[t]),this.magnitudeMode=t,this}setDuration(t){return this.duration=t,this}setMagnitude(t){return this.magnitude=t,this}start(t,e){if(typeof t!="number"){var f=t;e=ln(f,"magnitude",void 0),t=ln(f,"duration",void 0)}return e!==void 0&&this.setMagnitude(e),t!==void 0&&this.setDuration(t),this.timer.setDuration(this.duration).start(),super.start(),this}shake(t,e){return this.start(t,e),this}update(t,e){if(!this.isRunning||!this.enable)return this;var f=this.parent;if(!f.active)return this;if(this.timer.update(t,e),this.timer.isDone)this.backToOrigin(),this.complete();else{this.ox===void 0&&(this.ox=f.x,this.oy=f.y);var i=this.magnitude;this.magnitudeMode===1&&(i*=1-this.timer.t);var n=Math.random()*Math.PI*2,h=Math.cos(n)*i,r=Math.sin(n)*i;f.setPosition(this.ox+h,this.oy+r)}return this}backToOrigin(){if(!this.isRunning||!this.enable)return this;if(this.ox===void 0)return this;var t=this.parent;return this.ox===t.x&&this.oy===t.y?this:(t.setPosition(this.ox,this.oy),this.ox=void 0,this.oy=void 0,this)}}const EN={effect:0,behavior:1},PN={constant:0,decay:1},MN=Phaser.Utils.Objects.IsPlainObject;var AN=function(s,t){t.on("complete",function(){s.emit("shake.complete",s)})},ON={shake(s,t,e){if(MN(s)){var f=s;s=f.duration,t=f.magnitude,e=f.magnitudeMode}return this._shake===void 0&&(this._shake=new Xc(this,{mode:0,magnitudeMode:1}),AN(this,this._shake)),s!==void 0&&this._shake.setDuration(s),t!==void 0&&this._shake.setMagnitude(t),e!==void 0&&this._shake.setMagnitudeMode(e),this._shake.shake(),this},shakePromise(s,t){return this.shake(s,t),We(this._shake)}};const Wm=Phaser.Utils.Objects.IsPlainObject;class RN extends He{constructor(t,e){super(t,e),this.parent.setDataEnabled(),this.easeTasks={}}complete(t){this.emit(`complete-${t}`,this.parent,this),this.emit("complete",t,this.parent,this)}getEaseTask(t){var e=this.easeTasks[t];return e===void 0&&(e=new Ll(this.parent),this.easeTasks[t]=e,e.setTarget(this.parent.data.values).on("complete",function(){this.complete(t)},this)),e}easeTo(t,e,f,i){if(Wm(t)){var n=t;t=n.key,e=n.value,f=n.duration,i=n.ease;var h=n.speed;f===void 0&&h!==void 0&&(f=Math.abs(e-this.parent.data.values[t])/h*1e3)}f===void 0&&(f=1e3),i===void 0&&(i="Linear");var r=this.getEaseTask(t);return r.restart({key:t,to:e,duration:f,ease:i}),this}easeFrom(t,e,f,i){if(Wm(t)){var n=t;t=n.key,e=n.value,f=n.duration,i=n.ease;var h=n.speed;f===void 0&&h!==void 0&&(f=Math.abs(e-this.parent.data.values[t])/h*1e3)}f===void 0&&(f=1e3),i===void 0&&(i="Linear");var r=this.getEaseTask(t);return r.restart({key:t,from:e,duration:f,ease:i}),this}stopEase(t,e){e===void 0&&(e=!0);var f=this.easeTasks[t];return f&&f.stop(e),this}stopAll(t){t===void 0&&(t=!0);for(var e in this.easeTasks)this.stopEase(e,t);return this}}var LN=function(s,t){t.on("complete",function(e){s.emit(`easedata.${e}.complete`,s),s.emit("easedata.complete",e,s)})},FN={easeDataTo(s,t,e,f){return this._easeData||(this._easeData=new RN(this),LN(this,this._easeData)),this._easeData.easeTo(s,t,e,f),this},easeDataToPromise(s,t,e,f){return this.easeDataTo(s,t,e,f),Pc(this._easeData,`complete-${s}`)},stopEaseData(s,t){return this._easeData?(this._easeData.stopEase(s,t),this):this},stopAllEaseData(s){return this._easeData?(this._easeData.stopAll(s),this):this}},Ms=function(s){ST(s,!1)},As=function(s){ST(s,!0)},Hc=function(s){if(!s)return!1;var t=Bl(s);return!t.hidden},ST=function(s,t){if(!!s){var e=Bl(s);e.hidden=t;var f=mn(s);f?f.setChildVisible(s,!t):s.setVisible(!t)}},wN={show(s){return s===void 0&&(s=this),Ms(s),this},hide(s){return s===void 0&&(s=this),As(s),this},isShow(s){return s===void 0&&(s=this),Hc(s)}},Hd=function(s,t,e,f,i){if(!s||!s.getBounds||f&&!f(s,t,e))return!1;var n=rl(s,!0);return!(!n.contains(t,e)||i&&!i(s,t,e))},$c=function(s,t,e,f){if(t)return Hd(s,t.worldX,t.worldY,e,f);for(var i=s.scene.input.manager,n=i.pointersTotal,h=i.pointers,r=0;r<n;r++)if(t=h[r],Hd(s,t.worldX,t.worldY,e,f))return!0;return!1},IN=function(s,t){return t===void 0&&(t=this),$c(t,s)},Kc=function(s){return s&&typeof s=="function"},xn=function(s){return Object.prototype.toString.call(s)==="[object Array]"},$d=function(s,t,e,f,i){return Hd(s,t,e,DN(f),BN(i))},Xm=function(s){var t=s.rexSizer&&s.rexSizer.hidden;return!t},DN=function(s){return s?function(t,e,f){return Xm(t)?(s(t,e,f),!0):!1}:Xm},BN=function(s){return s},bN=function(s,t,e,f,i){if(Kc(e)||(i=e,e=void 0,f=void 0),i===void 0&&(this.sizerChildren?i=this.sizerChildren:i=this.children),xn(i)){for(var n,h=0,r=i.length;h<r;h++)if(n=i[h],$d(n,s,t,e,f))return n}else{var n;for(var a in i)if(n=i[a],$d(n,s,t,e,f))return n}return null},ao=function(s,t){var e;if(t===void 0)s.hasOwnProperty("rexContainer")&&(e=s.rexContainer.parent,e.isRexSizer||(e=null));else for(e=ao(s);e&&e.name!==t;)e=ao(e);return e},GN=function(s){for(var t=ao(s);t;)s=t,t=ao(t);return s},NN={getParentSizer(s,t){return typeof s=="string"&&(t=s,s=void 0),s===void 0&&(s=this),ao(s,t)},getTopmostSizer(s){return s===void 0&&(s=this),GN(s)}},bs=function(s,t,e){!s||t===void 0&&e===void 0||(s.resize?(t===void 0&&(t=s.width),e===void 0&&(e=s.height),s.resize(t,e)):(t!==void 0&&(s.displayWidth=t),e!==void 0&&(s.displayHeight=e)))},YN=function(s,t){return t===void 0?t={}:t===!0&&(t=zN),t.x=s.x,t.y=s.y,t.scaleX=s.scaleX,t.scaleY=s.scaleY,t.width=s.width,t.height=s.height,t.displayWidth=s.displayWidth,t.displayHeight=s.displayHeight,t},zN={},Eo=function(s){this.sizerEventsEnable&&(YN(s,this.getChildPrevState(s)),this.layoutedChildren.push(s))},Po=function(s,t,e,f,i,n,h,r){Gl(s,t,e,f,i,n),h!==void 0&&(s.x+=h),r!==void 0&&(s.y+=r),this.resetChildPositionState(s),this.sizerEventsEnable&&s.emit("sizer.postlayout",s,this)};const VN=Phaser.Display.Align.CENTER;var UN=function(){if(this.backgroundChildren!==void 0)for(var s=this.backgroundChildren,t=this.left,e=this.top,f=this.width,i=this.height,n,h,r,a,l,o,u,v=0,d=s.length;v<d;v++)n=s[v],h=n.rexSizer,!h.hidden&&(r=h.padding,Eo.call(this,n),a=t+r.left,l=e+r.top,o=f-r.left-r.right,u=i-r.top-r.bottom,bs(n,o,u),Po.call(this,n,a,l,o,u,VN))},WN=function(s,t){var e=typeof s;return e==="string"?s=this.getElement(s):(s===void 0||e!="object")&&(t=s,s=this),t===void 0&&(t=!0),s.input&&s.input.hasOwnProperty("draggable")?s.input.draggable=t:t&&(s.setInteractive(),s.scene.input.setDraggable(s),s.on("drag",function(f,i,n){var h=this.getTopmostSizer();h.x+=i-s.x,h.y+=n-s.y,h.emit("sizer.drag",f,i,n)},this).on("dragstart",function(f,i,n){var h=this.getTopmostSizer();h.emit("sizer.dragstart",f,i,n)},this).on("dragend",function(f,i,n,h){var r=this.getTopmostSizer();r.emit("sizer.dragend",f,i,n,h)},this)),this};const Na=Phaser.Utils.Objects.GetValue;class oa extends He{constructor(t,e){super(t,e),this._enable=void 0,t.setInteractive(Na(e,"inputConfig",void 0)),this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.lastClickTime=void 0,this.setEnable(Na(t,"enable",!0)),this.setMode(Na(t,"mode",1)),this.setClickInterval(Na(t,"clickInterval",100)),this.setDragThreshold(Na(t,"threshold",void 0)),this}boot(){var t=this.parent;t.on("pointerdown",this.onPress,this),t.on("pointerup",this.onRelease,this),t.on("pointerout",this.onPointOut,this),t.on("pointermove",this.onMove,this),t.on("pointerover",this.onOver,this),t.on("pointeroutr",this.onOut,this)}shutdown(t){this.isShutdown||(this.pointer=null,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t){t||this.cancel(),this._enable=t;var e=t?"enable":"disable";this.emit(e,this,this.parent)}}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setMode(t){return typeof t=="string"&&(t=XN[t]),this.mode=t,this}setClickInterval(t){return this.clickInterval=t,this}setDragThreshold(t){return this.dragThreshold=t,this}onPress(t,e,f,i){this.pointer===void 0&&(this.pointer=t,this.mode===0&&this.click(t.downTime,t,i))}onRelease(t,e,f,i){this.pointer===t&&(this.mode===1&&this.click(t.upTime,t,i),this.pointer=void 0)}onPointOut(t,e){this.pointer===t&&this.cancel()}onMove(t,e,f,i){this.pointer===t&&this.dragThreshold!==void 0&&t.getDistance()>=this.dragThreshold&&this.cancel()}click(t,e,f){if(!this.enable)return this;if(t===void 0)return this.emit("click",this,this.parent,e,f),this;this.pointer=void 0;var i=this.lastClickTime;return i!==void 0&&t-i<=this.clickInterval?this:(this.lastClickTime=t,this.emit("click",this,this.parent,e,f),this)}cancel(){return this.pointer=void 0,this}onOver(t,e,f,i){return this.enable?(this.emit("over",this,this.parent,t,i),this):this}onOut(t,e){return this.enable?(this.emit("out",this,this.parent,t,e),this):this}}const XN={press:0,pointerdown:0,release:1,pointerup:1};var HN={onClick(s,t,e){return s?(this._click===void 0&&(this._click=new oa(this,e)),this._click.on("click",s,t),this):this},offClick(s,t){return this._click===void 0?this:(this._click.off("click",s,t),this)},enableClick(s){return this._click===void 0?this:(this._click.setEnable(s),this)},disableClick(){return this._click===void 0?this:(this._click.setEnable(!1),this)}};const Fh=Phaser.Utils.Objects.GetValue;class kc extends He{constructor(t,e){super(t,e),this._enable=void 0;var f=Fh(e,"inputConfig",void 0);f&&t.setInteractive(f),this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.setEnable(Fh(t,"enable",!0)),this.setMode(Fh(t,"mode",1)),this.setClickInterval(Fh(t,"clickInterval",100)),this}boot(){var t=this.parent.scene;t.input.on("pointerdown",this.onPress,this),t.input.on("pointerup",this.onRelease,this)}shutdown(t){if(!this.isShutdown){var e=this.parent.scene;e.input.off("pointerdown",this.onPress,this),e.input.off("pointerup",this.onRelease,this),super.shutdown(t)}}get enable(){return this._enable}set enable(t){if(this._enable!==t){this._enable=t;var e=t?"enable":"disable";this.emit(e,this,this.parent)}}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setMode(t){return typeof t=="string"&&(t=$N[t]),this.mode=t,this}setClickInterval(t){return this.clickInterval=t,this}isPointerInside(t){var e=this.parent,f=e.input?pc:$c;return f(e,t)}onPress(t){if(this.mode===0){if(!this.parent.willRender(t.camera))return;this.isPointerInside(t)||this.click(t.downTime,t)}}onRelease(t){if(this.mode===1){if(!this.parent.willRender(t.camera))return;this.isPointerInside(t)||this.click(t.upTime,t)}}click(t,e){if(!this.enable)return this;if(t===void 0)return this.emit("clickoutside",this,this.parent,e),this;var f=this.lastClickTime;return f!==void 0&&t-f<=this.clickInterval?this:(this.lastClickTime=t,this.emit("clickoutside",this,this.parent,e),this)}}const $N={press:0,pointerdown:0,release:1,pointerup:1};var KN={onClickOutside(s,t,e){return s?(this._clickOutside===void 0&&(this._clickOutside=new kc(this,e)),this._clickOutside.on("clickoutside",s,t),this):this},offClickOutside(s,t){return this._clickOutside===void 0?this:(this._clickOutside.off("clickoutside",s,t),this)},enableClickOutside(s){return this._clickOutside===void 0?this:(this._clickOutside.setEnable(s),this)},disableClickOutside(){return this._clickOutside===void 0?this:(this._clickOutside.setEnable(!1),this)}};class Yn{constructor(t){var e=pi(t,"states",void 0);e&&this.addStates(e);var f=pi(t,"extend",void 0);if(f)for(var i in f)(!this.hasOwnProperty(i)||this[i]===void 0)&&(this[i]=f[i]);var n=pi(t,"eventEmitter",void 0),h=pi(t,"EventEmitterClass",void 0);this.setEventEmitter(n,h),this._stateLock=!1,this.resetFromJSON(t)}shutdown(){this.destroyEventEmitter()}destroy(){this.shutdown()}resetFromJSON(t){this.setEnable(pi(t,"enable",!0)),this.start(pi(t,"start",void 0));var e=pi(t,"init",void 0);return e&&e.call(this),this}toJSON(){return{curState:this.state,prevState:this.prevState,enable:this.enable,start:this._start}}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}set state(t){if(!(!this.enable||this._stateLock)&&this._state!==t){if(this._prevState=this._state,this._state=t,this._stateLock=!0,this.emit("statechange",this),this._prevState!=null){var e="exit_"+this._prevState,f=this[e];f&&f.call(this),this.emit(e,this)}if(this._stateLock=!1,this._state!=null){var i="enter_"+this._state,n=this[i];n&&n.call(this),this.emit(i,this)}}}get state(){return this._state}get prevState(){return this._prevState}start(t){return this._start=t,this._prevState=void 0,this._state=t,this}goto(t){return t!=null&&(this.state=t),this}next(){var t,e=this["next_"+this.state];return e&&(typeof e=="string"?t=e:t=e.call(this)),this.goto(t),this}addState(t,e){typeof t!="string"&&(e=t,t=e.name);var f=e.next;f&&(this["next_"+t]=f);var i=e.exit;i&&(this["exit_"+t]=i);var n=e.enter;return n&&(this["enter_"+t]=n),this}addStates(t){if(Array.isArray(t))for(var e=0,f=t.length;e<f;e++)this.addState(t[e]);else for(var i in t)this.addState(i,t[i]);return this}runMethod(t,e,f,i,n,h){var r=this[t+"_"+this.state];if(!!r){var a=arguments.length;switch(a){case 1:return r.call(this);case 2:return r.call(this,e);case 3:return r.call(this,e,f);case 4:return r.call(this,e,f,i);case 5:return r.call(this,e,f,i,n);case 6:return r.call(this,e,f,i,n,h)}for(var l=new Array(a-1),o=1;o<a;o++)l[o-1]=arguments[o];return r.apply(this,l)}}update(t,e){this.runMethod("update",t,e)}preupdate(t,e){this.runMethod("preupdate",t,e)}postupdate(t,e){this.runMethod("postupdate",t,e)}}Object.assign(Yn.prototype,sa);class kN extends Yn{constructor(){super({eventEmitter:!1}),this.goto("IDLE")}setCooldownTime(t){return this.cooldownTime=t,this.cooldownMode=t!==void 0,this}request(){return this.runMethod("request")}update_IDLE(){this.compensationTime=0}request_IDLE(){return this.next(),!0}next_IDLE(){if(this.cooldownMode)return"COOLDOWN"}enter_COOLDOWN(){this.remainderTime=this.cooldownTime+this.compensationTime}update_COOLDOWN(t,e){this.remainderTime-=e,this.remainderTime<0&&(this.compensationTime=this.cooldownTime>e?-this.remainderTime:0,this.goto("IDLE"))}request_COOLDOWN(){return!1}}const Uf=Phaser.Utils.Objects.GetValue;class oo extends He{constructor(t,e){super(t,e),this._enable=void 0,this.cooldown=new kN,this.parent.setInteractive(Uf(e,"inputConfig",void 0)),this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.isInTouching=!1,this.setEnable(Uf(t,"enable",!0)),this.setCooldown(Uf(t,"cooldown",void 0)),this}boot(){var t=this.parent;t.on("pointerdown",this.onPointIn,this),t.on("pointerover",this.onPointIn,this),t.on("pointerup",this.onPointOut,this),t.on("pointerout",this.onPointOut,this),this.scene.sys.events.on("preupdate",this.preupdate,this)}shutdown(t){this.isShutdown||(this.scene.sys.events.off("preupdate",this.preupdate,this),this.pointer=void 0,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||(this.isInTouching=!1,this.pointer=void 0),this._enable=t,this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}get cooldownTime(){return this.cooldown.cooldownTime}set cooldownTime(t){this.cooldown.setCooldownTime(t)}setCooldown(t){return this.cooldownTime=t,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointIn(t,e,f){!this.enable||!t.isDown||this.pointer!==void 0||(this.pointer=t,this.isInTouching=!0)}onPointOut(t){!this.enable||this.pointer!==t||(this.pointer=void 0,this.isInTouching=!1)}preupdate(t,e){this.cooldown.update(t,e),this.isInTouching&&this.cooldown.request()&&this.emit("intouch",this,this.parent,this.pointer)}}var ZN={onTouching(s,t,e){return s?(this._inTouching===void 0&&(this._inTouching=new oo(this,e)),this._inTouching.on("intouch",s,t),this):this},offTouching(s,t){return this._inTouching===void 0?this:(this._inTouching.off("intouch",s,t),this)},enableTouching(s){return this._inTouching===void 0?this:(this._inTouching.setEnable(s),this)},disableTouching(){return this._inTouching===void 0?this:(this._inTouching.setEnable(!1),this)}},ET=function(s,t,e){for(var f,i=0,n=s.length;i<n;i++)if(f=s[i],!!$d(f,t,e))return f.pointToChild(t,e);return null},Bn=function(s,t,e,f,i,n,h){var r;i===void 0?r=f:r=ET(e,f,i),r&&s.emit(t,r,n,h)};const JN=Phaser.Utils.Objects.GetValue;var QN=function(s){var t=JN(s,"down",void 0);t!==!1&&this.on("pointerdown",jN,this)},jN=function(s,t,e,f){var i=this._childrenInteractive;Bn(i.eventEmitter,`${i.eventNamePrefix}down`,i.targetSizers,s.worldX,s.worldY,s,f)};const qN=Phaser.Utils.Objects.GetValue;var _N=function(s){var t=qN(s,"up",void 0);t!==!1&&this.on("pointerup",t5,this)},t5=function(s,t,e,f){var i=this._childrenInteractive;Bn(i.eventEmitter,`${i.eventNamePrefix}up`,i.targetSizers,s.worldX,s.worldY,s,f)};const e5=Phaser.Utils.Objects.GetValue;var i5=function(s){var t=e5(s,"over",void 0);t!==!1&&this.on("pointermove",Hm,this).on("pointerover",Hm,this).on("pointerout",n5,this)},Hm=function(s,t,e,f){var i=this._childrenInteractive,n=ET(i.targetSizers,s.worldX,s.worldY),h=i.lastOverChild;n&&h&&n===h||(i.lastOverChild=n,Bn(i.eventEmitter,`${i.eventNamePrefix}out`,i.targetSizers,h,void 0,s,f),Bn(i.eventEmitter,`${i.eventNamePrefix}over`,i.targetSizers,n,void 0,s,f))},n5=function(s,t){var e=this._childrenInteractive,f=e.lastOverChild;e.lastOverChild=null,Bn(e.eventEmitter,`${e.eventNamePrefix}out`,e.targetSizers,f,void 0,s,t)};const s5=Phaser.Utils.Objects.GetValue;var r5=function(s){var t=s5(s,"click",void 0);if(t!==!1){t===void 0&&(t={}),t.hasOwnProperty("threshold")||(t.threshold=10);var e=this._childrenInteractive;this._click=new oa(this,t),this._click.on("click",function(f,i,n,h){Bn(e.eventEmitter,`${e.eventNamePrefix}click`,e.targetSizers,n.worldX,n.worldY,n,h)},this)}};const Wf=Phaser.Utils.Objects.GetValue;class zl extends Ol{constructor(t,e){var f=tT(t);f===t&&(t=void 0),super(f,e),this.gameObject=t,t&&t.setInteractive(Wf(e,"inputConfig",void 0)),this._enable=void 0,this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.setEnable(Wf(t,"enable",!0)),this.setDetectBounds(),this.gameObject===void 0?this.setDetectBounds(Wf(t,"bounds",void 0)):this.setDetectBounds(),this.tracerState=Xf,this.pointer=void 0,this.lastPointer=void 0,this.movedState=!1,this.isTouchingAnyObject=!1,this}boot(){super.boot(),this.gameObject?this.gameObject.on("pointerdown",this.onPointerDown,this):this.scene.input.on("pointerdown",this.onPointerDown,this),this.scene.input.on("pointerup",this.onPointerUp,this),this.scene.input.on("gameout",this.dragCancel,this),this.scene.input.on("pointermove",this.onPointerMove,this),this.scene.sys.events.once("shutdown",this.destroy,this)}shutdown(t){!this.scene||(this.gameObject||this.scene.input.off("pointerdown",this.onPointerDown,this),this.scene.input.off("pointerup",this.onPointerUp,this),this.scene.input.off("gameout",this.dragCancel,this),this.scene.input.off("pointermove",this.onPointerMove,this),this.scene.sys.events.off("shutdown",this.destroy,this),this.gameObject=void 0,this.bounds=void 0,this.pointer=void 0,this.lastPointer=void 0,this.movedState=!1,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||this.dragCancel(),this._enable=t,this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}setDetectBounds(t){return this.bounds=t,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointerDown(t,e){if(!!this.enable&&this.pointer===void 0){var f=this.bounds?this.bounds.contains(t.x,t.y):!0;!f||this.pointer!==t&&(this.pointer=t,this.lastPointer=t,this.movedState=!1,this.tracerState=$m,this.gameObject===void 0&&(this.isTouchingAnyObject=e.length>0),this.onDragStart())}}onPointerUp(t){if(!!this.enable){var e=this.bounds?this.bounds.contains(t.x,t.y):!0;!e||this.pointer===t&&(this.pointer=void 0,this.movedState=!1,this.tracerState=Xf,this.onDragEnd())}}onPointerMove(t){if(!!this.enable&&t.isDown){var e=this.bounds?this.bounds.contains(t.x,t.y):!0,f=this.pointer===t;!f&&e||(f&&!e?this.onPointerUp(t):(this.movedState||(this.movedState=t.x!==t.downX||t.y!==t.downY),this.movedState&&this.onDrag()))}}dragCancel(){return this.tracerState===$m&&this.onDragEnd(),this.pointer=void 0,this.tracerState=Xf,this}onDragStart(){this.emit("dragstart",this)}onDragEnd(){this.emit("dragend",this)}onDrag(){this.emit("drag",this)}preUpdate(t,e){}postUpdate(t,e){}startTicking(){super.startTicking(),this.scene.sys.events.on("preupdate",this.preUpdate,this),this.scene.sys.events.on("postupdate",this.postUpdate,this)}stopTicking(){super.stopTicking(),this.scene&&(this.scene.sys.events.off("preupdate",this.preUpdate,this),this.scene.sys.events.off("postupdate",this.postUpdate,this))}setRecongizedStateObject(t){return this.recongizedState=t,this}get state(){return this.recongizedState.state}set state(t){this.recongizedState.state=t}cancel(){return this.state=a5,this}}const Xf=0,$m=1,a5="IDLE",er=Phaser.Utils.Objects.GetValue,o5=Phaser.Math.Distance.Between;class Vl extends zl{constructor(t,e){super(t,e);var f=this,i={states:{IDLE:{enter:function(){f.stop(),f.tapsCount=0,f.x=0,f.y=0,f.worldX=0,f.worldY=0},exit:function(){var n=f.lastPointer;f.x=n.x,f.y=n.y,f.worldX=n.worldX,f.worldY=n.worldY}},BEGIN:{enter:function(){f.start(),f.tapsCount=0,f.emit("tappingstart",f,f.gameObject,f.lastPointer)}},RECOGNIZED:{enter:function(){f.start(),f.emit("tap",f,f.gameObject,f.lastPointer),f.emit(`${f.tapsCount}tap`,f,f.gameObject,f.lastPointer)}}},init:function(){this.state=ir},eventEmitter:!1};this.setRecongizedStateObject(new Yn(i))}resetFromJSON(t){super.resetFromJSON(t),this.setHoldTime(er(t,"time",250)),this.setTapInterval(er(t,"tapInterval",200)),this.setDragThreshold(er(t,"threshold",9)),this.setTapOffset(er(t,"tapOffset",10));var e=er(t,"taps",void 0);return e!==void 0?this.setTaps(e):(this.setMaxTaps(er(t,"maxTaps",void 0)),this.setMinTaps(er(t,"minTaps",void 0))),this}onDragStart(){switch(this.state){case ir:this.state=br;break;case br:var t=this.lastPointer,e=o5(t.upX,t.upY,t.x,t.y);e>this.tapOffset&&(this.state=Gr,this.state=br);break;case Gr:this.state=br;break}}onDragEnd(){this.state===br&&(this.tapsCount++,this.emit("tapping",this,this.gameObject,this.lastPointer),this.maxTaps!==void 0&&this.tapsCount===this.maxTaps&&(this.state=Gr))}onDrag(){this.state!==ir&&this.pointer.getDistance()>this.dragThreshold&&(this.state=ir)}preUpdate(t,e){if(!(!this.isRunning||!this.enable)&&this.state===br){var f=this.lastPointer;if(f.isDown){var i=t-f.downTime;i>this.holdTime&&(this.state=ir)}else{var n=t-f.upTime;n>this.tapInterval&&(this.minTaps===void 0||this.tapsCount>=this.minTaps?this.state=Gr:this.state=ir)}}}postUpdate(t,e){!this.isRunning||!this.enable||this.state===Gr&&(this.state=ir)}get isTapped(){return this.state===Gr}setHoldTime(t){return this.holdTime=t,this}setTapInterval(t){return this.tapInterval=t,this}setDragThreshold(t){return this.dragThreshold=t,this}setTapOffset(t){return this.tapOffset=t,this}setMaxTaps(t){return this.maxTaps=t,this}setMinTaps(t){return this.minTaps=t,this}setTaps(t,e){return e===void 0&&(e=t),this.setMinTaps(t).setMaxTaps(e),this}}const ir="IDLE",br="BEGIN",Gr="RECOGNIZED",Km=Phaser.Utils.Objects.GetValue;class Ul extends zl{constructor(t,e){super(t,e);var f=this,i={states:{IDLE:{enter:function(){f.x=0,f.y=0,f.worldX=0,f.worldY=0},exit:function(){var n=f.lastPointer;f.x=n.x,f.y=n.y,f.worldX=n.worldX,f.worldY=n.worldY}},BEGIN:{enter:function(){f.start()},exit:function(){f.stop()}},RECOGNIZED:{enter:function(){f.emit("pressstart",f,f.gameObject,f.lastPointer)},exit:function(){f.emit("pressend",f,f.gameObject,f.lastPointer)}}},init:function(){this.state=wh},eventEmitter:!1};this.setRecongizedStateObject(new Yn(i))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(Km(t,"threshold",9)),this.setHoldTime(Km(t,"time",251)),this}onDragStart(){this.state=km,this.holdTime===0&&(this.state=Hf)}onDragEnd(){this.state=wh}onDrag(){this.state!==wh&&this.pointer.getDistance()>this.dragThreshold&&(this.state=wh)}preUpdate(t,e){if(!(!this.isRunning||!this.enable)&&this.state===km){var f=t-this.pointer.downTime;f>=this.holdTime&&(this.state=Hf)}}get isPressed(){return this.state===Hf}setHoldTime(t){return this.holdTime=t,this}setDragThreshold(t){return this.dragThreshold=t,this}}const wh="IDLE",km="BEGIN",Hf="RECOGNIZED",h5=Phaser.Utils.Objects.GetValue;class PT extends zl{constructor(t,e){super(t,e);var f=this,i={states:{IDLE:{},BEGIN:{enter:function(){var n=f.pointer;f.startX=n.x,f.startY=n.y,f.startWorldX=n.worldX,f.startWorldY=n.worldY}},RECOGNIZED:{enter:function(){f.emit("panstart",f,f.gameObject,f.lastPointer)},exit:function(){var n=f.lastPointer;f.endX=n.x,f.endY=n.y,f.endWorldX=n.worldX,f.endWorldY=n.worldY,f.emit("panend",f,f.gameObject,f.lastPointer)}}},init:function(){this.state=Zm},eventEmitter:!1};this.setRecongizedStateObject(new Yn(i))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(h5(t,"threshold",10)),this}onDragStart(){this.state=Jm,this.dragThreshold===0&&(this.state=Ih)}onDragEnd(){this.state=Zm}onDrag(){switch(this.state){case Jm:this.pointer.getDistance()>=this.dragThreshold&&(this.state=Ih);break;case Ih:var t=this.pointer.position,e=this.pointer.prevPosition;this.dx=t.x-e.x,this.dy=t.y-e.y;var f=this.pointer;this.x=f.x,this.y=f.y,this.worldX=f.worldX,this.worldY=f.worldY,this.emit("pan",this,this.gameObject,this.lastPointer);break}}get isPanned(){return this.state===Ih}setDragThreshold(t){return this.dragThreshold=t,this}}const Zm="IDLE",Jm="BEGIN",Ih="RECOGNIZED",l5=Phaser.Math.Distance.Between,u5=Phaser.Math.Angle.Between;var f5={getDt:function(){var s=gc(this.scene);return s},getVelocity:function(){var s=this.pointer.position,t=this.pointer.prevPosition,e=l5(t.x,t.y,s.x,s.y),f=e/(this.getDt()*.001);return f},getVelocityX:function(){var s=this.pointer.position,t=this.pointer.prevPosition,e=Math.abs(s.x-t.x),f=e/(this.getDt()*.001);return f},getVelocityY:function(){var s=this.pointer.position,t=this.pointer.prevPosition,e=Math.abs(s.y-t.y),f=e/(this.getDt()*.001);return f},getVelocityAngle:function(){var s=this.pointer.position,t=this.pointer.prevPosition,e=u5(t.x,t.y,s.x,s.y);return e}},d5={"up&down":0,"left&right":1,"4dir":2,"8dir":3},c5=function(s,t,e){switch(e===void 0?e={}:e===!0&&(e=v5),e.left=!1,e.right=!1,e.up=!1,e.down=!1,s=(s+360)%360,t){case 0:s<180?e.down=!0:e.up=!0;break;case 1:s>90&&s<=270?e.left=!0:e.right=!0;break;case 2:s>45&&s<=135?e.down=!0:s>135&&s<=225?e.left=!0:s>225&&s<=315?e.up=!0:e.right=!0;break;case 3:s>22.5&&s<=67.5?(e.down=!0,e.right=!0):s>67.5&&s<=112.5?e.down=!0:s>112.5&&s<=157.5?(e.down=!0,e.left=!0):s>157.5&&s<=202.5?e.left=!0:s>202.5&&s<=247.5?(e.left=!0,e.up=!0):s>247.5&&s<=292.5?e.up=!0:(s>292.5&&s<=337.5&&(e.up=!0),e.right=!0);break}return e},v5={};const $f=Phaser.Utils.Objects.GetValue,p5=Phaser.Math.RadToDeg;class Mo extends zl{constructor(t,e){super(t,e);var f=this,i={states:{IDLE:{enter:function(){f.x=0,f.y=0,f.worldX=0,f.worldY=0},exit:function(){var n=f.lastPointer;f.x=n.x,f.y=n.y,f.worldX=n.worldX,f.worldY=n.worldY}},BEGIN:{enter:function(){f.validDrag=!1}},RECOGNIZED:{enter:function(){f.start(),f.updateDirectionStates(),f.emit("swipe",f,f.gameObject,f.lastPointer)},exit:function(){f.stop(),f.clearDirectionStates()}}},init:function(){this.state=Kf},eventEmitter:!1};this.setRecongizedStateObject(new Yn(i)),this.clearDirectionStates()}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold($f(t,"threshold",10)),this.setVelocityThreshold($f(t,"velocityThreshold",1e3)),this.setDirectionMode($f(t,"dir","8dir")),this}onDragStart(){this.state=Qm}onDragEnd(){this.state=Kf}onDrag(){this.state===Qm&&(this.validDrag||(this.validDrag=this.dragThreshold===0||this.pointer.getDistance()>=this.dragThreshold),this.validDrag&&this.dragVelocity>this.velocityThreshold&&(this.state=kf))}postUpdate(t,e){!this.isRunning||!this.enable||this.state===kf&&(this.state=Kf)}get isSwiped(){return this.state===kf}get dragVelocity(){var t;switch(this.dirMode){case 0:t=this.getVelocityY();break;case 1:t=this.getVelocityX();break;default:t=this.getVelocity();break}return t}setDragThreshold(t){return this.dragThreshold=t,this}setVelocityThreshold(t){return this.velocityThreshold=t,this}setDirectionMode(t){return typeof t=="string"&&(t=d5[t]),this.dirMode=t,this}updateDirectionStates(){var t=p5(this.getVelocityAngle());return c5(t,this.dirMode,this),this}clearDirectionStates(){return this.left=!1,this.right=!1,this.up=!1,this.down=!1,this}}Object.assign(Mo.prototype,f5);const Kf="IDLE",Qm="BEGIN",kf="RECOGNIZED",Zf=Phaser.Utils.Objects.GetValue,g5=Phaser.Utils.Array.SpliceOne,m5=Phaser.Math.Distance.Between,x5=Phaser.Math.Angle.Between;class Zc{constructor(t,e){var f=t.input.manager.pointersTotal-1;f<2&&t.input.addPointer(2-f),this.scene=t,this.setEventEmitter(Zf(e,"eventEmitter",void 0)),this._enable=void 0,this.pointers=[],this.movedState={},this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.setEnable(Zf(t,"enable",!0)),this.bounds=Zf(t,"bounds",void 0),this.tracerState=Dh,this.pointers.length=0,Ls(this.movedState),this}boot(){this.scene.input.on("pointerdown",this.onPointerDown,this),this.scene.input.on("pointerup",this.onPointerUp,this),this.scene.input.on("gameout",this.dragCancel,this),this.scene.input.on("pointermove",this.onPointerMove,this),this.scene.sys.events.once("shutdown",this.destroy,this)}shutdown(){!this.scene||(this.destroyEventEmitter(),this.pointers.length=0,Ls(this.movedState),this.scene.input.off("pointerdown",this.onPointerDown,this),this.scene.input.off("pointerup",this.onPointerUp,this),this.scene.input.off("gameout",this.dragCancel,this),this.scene.input.off("pointermove",this.onPointerMove,this),this.scene.sys.events.off("shutdown",this.destroy,this),this.scene=void 0)}destroy(){this.shutdown()}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||this.dragCancel(),this._enable=t,this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointerDown(t){if(!!this.enable&&this.pointers.length!==2){var e=this.bounds?this.bounds.contains(t.x,t.y):!0;if(!!e){var f=this.pointers.indexOf(t);if(f===-1)switch(this.movedState[t.id]=!1,this.pointers.push(t),this.tracerState){case Dh:this.tracerState=za,this.onDrag1Start();break;case za:this.tracerState=Pn,this.onDrag2Start();break}}}}onPointerUp(t){if(!!this.enable){var e=this.bounds?this.bounds.contains(t.x,t.y):!0;if(!!e){var f=this.pointers.indexOf(t);if(f!==-1)switch(delete this.movedState[t.id],g5(this.pointers,f),this.tracerState){case za:this.tracerState=Dh,this.onDrag1End();break;case Pn:this.tracerState=za,this.onDrag2End(),this.onDrag1Start();break}}}}onPointerMove(t){if(!!this.enable&&t.isDown){var e=this.bounds?this.bounds.contains(t.x,t.y):!0,f=this.pointers.indexOf(t)!==-1;if(!(!f&&e)){if(f&&!e)this.onPointerUp(t);else if(this.movedState[t.id]||(this.movedState[t.id]=t.x!==t.downX||t.y!==t.downY),this.movedState[t.id])switch(this.tracerState){case za:this.onDrag1();break;case Pn:this.onDrag2();break}}}}dragCancel(){return this.tracerState===Pn&&this.onDrag2End(),this.pointers.length=0,Ls(this.movedState),this.tracerState=Dh,this}onDrag1Start(){this.emit("drag1start",this)}onDrag1End(){this.emit("drag1end",this)}onDrag1(){this.emit("drag1",this)}onDrag2Start(){this.emit("drag2start",this)}onDrag2End(){this.emit("drag2end",this)}onDrag2(){this.emit("drag2",this)}get distanceBetween(){if(this.tracerState!==Pn)return 0;var t=this.pointers[0],e=this.pointers[1];return m5(t.x,t.y,e.x,e.y)}get angleBetween(){if(this.tracerState!==Pn)return 0;var t=this.pointers[0],e=this.pointers[1];return x5(t.x,t.y,e.x,e.y)}get drag1Vector(){var t=this.pointers[0];if(t&&this.movedState[t.id]){var e=t.position,f=t.prevPosition;Ya.x=e.x-f.x,Ya.y=e.y-f.y}else Ya.x=0,Ya.y=0;return Ya}get centerX(){if(this.tracerState!==Pn)return 0;var t=this.pointers[0].position,e=this.pointers[1].position;return(t.x+e.x)/2}get centerY(){if(this.tracerState!==Pn)return 0;var t=this.pointers[0].position,e=this.pointers[1].position;return(t.y+e.y)/2}get prevCenterX(){if(this.tracerState!==Pn)return 0;var t=this.movedState[this.pointers[0].id]?this.pointers[0].prevPosition:this.pointers[0].position,e=this.movedState[this.pointers[1].id]?this.pointers[1].prevPosition:this.pointers[1].position;return(t.x+e.x)/2}get prevCenterY(){if(this.tracerState!==Pn)return 0;var t=this.movedState[this.pointers[0].id]?this.pointers[0].prevPosition:this.pointers[0].position,e=this.movedState[this.pointers[1].id]?this.pointers[1].prevPosition:this.pointers[1].position;return(t.y+e.y)/2}get movementCenterX(){return this.centerX-this.prevCenterX}get movementCenterY(){return this.centerY-this.prevCenterY}setRecongizedStateObject(t){return this.recongizedState=t,this}get state(){return this.recongizedState.state}set state(t){this.recongizedState.state=t}cancel(){return this.state=y5,this}}Object.assign(Zc.prototype,sa);var Ya={};const Dh=0,za=1,Pn=2,y5="IDLE",T5=Phaser.Utils.Objects.GetValue;class MT extends Zc{constructor(t,e){super(t,e);var f=this,i={states:{IDLE:{enter:function(){f.prevDistance=void 0,f.scaleFactor=1}},BEGIN:{},RECOGNIZED:{enter:function(){f.emit("pinchstart",f)},exit:function(){f.emit("pinchend",f)}}},init:function(){this.state=jm},eventEmitter:!1};this.setRecongizedStateObject(new Yn(i))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(T5(t,"threshold",0)),this}onDrag2Start(){this.scaleFactor=1,this.prevDistance=this.distanceBetween,this.state=qm,this.dragThreshold===0&&(this.state=Bh)}onDrag2End(){this.state=jm}onDrag2(){switch(this.state){case qm:if(this.pointers[0].getDistance()>=this.dragThreshold&&this.pointers[1].getDistance()>=this.dragThreshold){var t=this.distanceBetween;this.scaleFactor=t/this.prevDistance,this.prevDistance=t,this.state=Bh}break;case Bh:var t=this.distanceBetween;this.scaleFactor=t/this.prevDistance,this.emit("pinch",this),this.prevDistance=t;break}}get isPinched(){return this.state===Bh}setDragThreshold(t){return this.dragThreshold=t,this}}const jm="IDLE",qm="BEGIN",Bh="RECOGNIZED",C5=Phaser.Math.RotateAround;var _m=function(s,t,e,f){return C5(s,t,e,f),s.rotation+=f,s},S5=function(s,t,e,f){return f===void 0?f={}:f===!0&&(f=E5),e.getWorldPoint(s,t,f),f},E5={},P5=function(s,t){if(!this.isRotation)return this;t===void 0&&(t=this.pointers[0].camera);var e=this.movementCenterX,f=this.movementCenterY,i=S5(this.centerX,this.centerY,t,!0),n=i.x,h=i.y,r=this.rotation;if(Array.isArray(s))for(var a=s,l=0,o=a.length;l<o;l++)s=a[l],s.x+=e,s.y+=f,_m(s,n,h,r);else s.x+=e,s.y+=f,_m(s,n,h,r);return this};const M5=Phaser.Utils.Objects.GetValue,Jf=Phaser.Math.Angle.WrapDegrees,tx=Phaser.Math.Angle.ShortestBetween,Qf=Phaser.Math.RadToDeg,A5=Phaser.Math.DegToRad;class Jc extends Zc{constructor(t,e){super(t,e);var f=this,i={states:{IDLE:{enter:function(){f.prevAngle=void 0,f.angle=0}},BEGIN:{},RECOGNIZED:{enter:function(){f.emit("rotatestart",f)},exit:function(){f.emit("rotateend",f)}}},init:function(){this.state=ex},eventEmitter:!1};this.setRecongizedStateObject(new Yn(i))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(M5(t,"threshold",0)),this}onDrag2Start(){this.prevAngle=Jf(Qf(this.angleBetween)),this.state=ix,this.dragThreshold===0&&(this.state=bh)}onDrag2End(){this.state=ex}onDrag2(){switch(this.state){case ix:if(this.pointers[0].getDistance()>=this.dragThreshold&&this.pointers[1].getDistance()>=this.dragThreshold){var t=Jf(Qf(this.angleBetween));this.angle=tx(this.prevAngle,t),this.prevAngle=t,this.state=bh}break;case bh:var t=Jf(Qf(this.angleBetween));this.angle=tx(this.prevAngle,t),this.prevAngle=t,this.emit("rotate",this);break}}get isRotated(){return this.state===bh}get rotation(){return A5(this.angle)}setDragThreshold(t){return this.dragThreshold=t,this}}var O5={spinObject:P5};Object.assign(Jc.prototype,O5);const ex="IDLE",ix="BEGIN",bh="RECOGNIZED",R5=Phaser.Utils.Objects.GetValue;var L5=function(s){var t=R5(s,"tap",void 0);if(t!==!1){var e=this._childrenInteractive;this._tap=new Vl(this,t),this._tap.on("tap",function(f,i,n){Bn(e.eventEmitter,`${e.eventNamePrefix}${f.tapsCount}tap`,e.targetSizers,f.worldX,f.worldY,n)},this)}};const F5=Phaser.Utils.Objects.GetValue;var w5=function(s){var t=F5(s,"press",void 0);if(t!==!1){var e=this._childrenInteractive;this._press=new Ul(this,t),this._press.on("pressstart",function(f,i,n){Bn(e.eventEmitter,`${e.eventNamePrefix}pressstart`,e.targetSizers,f.worldX,f.worldY,n)},this).on("pressend",function(f,i,n){Bn(e.eventEmitter,`${e.eventNamePrefix}pressend`,e.targetSizers,f.worldX,f.worldY,n)},this)}};const I5=Phaser.Utils.Objects.GetValue;var D5=function(s){var t=I5(s,"swipe",void 0);if(t!==!1){t===void 0&&(t={}),t.hasOwnProperty("dir")||(t.dir="4dir");var e=this._childrenInteractive;this._swipe=new Mo(this,t),this._swipe.on("swipe",function(f,i,n){var h=f.left?"left":f.right?"right":f.up?"up":"down";Bn(e.eventEmitter,`${e.eventNamePrefix}swipe${h}`,e.targetSizers,f.worldX,f.worldY,n)},this)}};const jf=Phaser.Utils.Objects.GetValue;var Qc=function(s,t){return s.setInteractive(),s._childrenInteractive={targetSizers:jf(t,"targets",[s]),eventEmitter:jf(t,"eventEmitter",s),eventNamePrefix:jf(t,"inputEventPrefix","child.")},QN.call(s,t),_N.call(s,t),i5.call(s,t),r5.call(s,t),L5.call(s,t),w5.call(s,t),D5.call(s,t),s},B5=function(s){return Qc(this,s),this},b5=function(){for(var s=this.getAllChildren([this]),t=0,e=s.length;t<e;t++){var f=s[t];f.emit.apply(f,arguments)}return this},AT={getSizerConfig:Bl,getChildPrevState:R3,pushIntoBounds:L3,drawBounds:U3,resolveWidth:Vc,resolveChildrenWidth:Q3,resolveHeight:Uc,getChildWidth:j3,getChildHeight:q3,getExpandedChildWidth:_3,getExpandedChildHeight:tN,getChildrenWidth:eN,getChildrenHeight:iN,addChildrenMap:Dm,addElement:Dm,removeChildrenMap:K3,getElement:k3,getAllChildrenSizers:nN,getChildrenSizers:sN,preLayout:So,layout:aN,runLayout:oN,layoutChildren:hN,runWidthWrap:mT,layoutBackgrounds:UN,postLayout:lN,setAnchor:uN,isInTouching:IN,pointToChild:bN,setDraggable:WN,setChildrenInteractive:B5,broadcastEvent:b5};Object.assign(AT,J3,H3,$3,NN,vN,yN,SN,ON,FN,HN,KN,ZN,wN,rN);const Nr=Phaser.Utils.Objects.GetValue;class fr extends _i{constructor(t,e,f,i,n,h){super(t,e,f,2,2),this.isRexSizer=!0,this.setMinSize(i,n),this.setName(Nr(h,"name","")),this.rexSizer={},this.space={},this.backgroundChildren=void 0,this.sizerChildren=void 0,this.childrenMap={},this.layoutedChildren=void 0;var r=Nr(h,"anchor",void 0);r&&this.setAnchor(r),this.setInnerPadding(Nr(h,"space",0)),this.setDraggable(Nr(h,"draggable",!1)),this.setSizerEventsEnable(Nr(h,"sizerEvents",!1)),this.setDirty(!0),Nr(h,"enableLayer",!1)&&this.enableLayer()}destroy(t){if(!!this.scene){if(t)for(var e=this.getAllChildrenSizers([this]),f=0,i=e.length;f<i;f++)e[f].sizerEventsEnable=!1;super.destroy(t),Ls(this.backgroundChildren),Ls(this.sizerChildren),this.childrenMap=void 0,this.space=void 0,this.rexSizer=void 0,this.layoutedChildren=void 0}}setMinSize(t,e){return this.setMinWidth(t).setMinHeight(e),this}setMinWidth(t){return t==null&&(t=0),this.minWidth=t,this}setMinHeight(t){return t==null&&(t=0),this.minHeight=t,this}setDirty(t){return t===void 0&&(t=!0),this.dirty=t,this}setSizerEventsEnable(t){return t===void 0&&(t=!0),this.sizerEventsEnable=t,this}get ignoreLayout(){return this.rexSizer.hidden||!this.dirty}get childrenWidth(){return this._childrenWidth===void 0&&(this._childrenWidth=this.getChildrenWidth()),this._childrenWidth}get childrenHeight(){return this._childrenHeight===void 0&&(this._childrenHeight=this.getChildrenHeight()),this._childrenHeight}get left(){return this.x-ne(this)*this.originX}set left(t){this.x+=t-this.left}alignLeft(t){return this.left=t,this}get right(){return this.left+ne(this)}set right(t){this.x+=t-this.right}alignRight(t){return this.right=t,this}get centerX(){return this.left+ne(this)/2}set centerX(t){this.x+=t-this.centerX}alignCenterX(t){return this.centerX=t,this}get top(){return this.y-Qt(this)*this.originY}set top(t){this.y+=t-this.top}alignTop(t){return this.top=t,this}get bottom(){return this.top+Qt(this)}set bottom(t){this.y+=t-this.bottom}alignBottom(t){return this.bottom=t,this}get centerY(){return this.top+Qt(this)/2}set centerY(t){this.y+=t-this.centerY}alignCenterY(t){return this.centerY=t,this}get innerLeft(){return this.left+this.space.left}get innerRight(){return this.right-this.space.right}get innerTop(){return this.top+this.space.top}get innerBottom(){return this.bottom-this.space.bottom}get innerWidth(){return this.width-this.space.left-this.space.right}get innerHeight(){return this.height-this.space.top-this.space.bottom}get minInnerWidth(){var t=this.minWidth-this.space.left-this.space.right;return Math.max(t,0)}get minInnerHeight(){var t=this.minHeight-this.space.top-this.space.bottom;return Math.max(t,0)}}Object.assign(fr.prototype,AT);var G5=function(){if(this.rexSizer.hidden)return 0;var s=0,t=this.sizerChildren,e,f,i;for(var n in t)e=t[n],f=e.rexSizer.padding,i=this.getChildWidth(e)+f.left+f.right,s=Math.max(i,s);return s+this.space.left+this.space.right},N5=function(){if(this.rexSizer.hidden)return 0;var s=0,t=this.sizerChildren,e,f,i;for(var n in t)e=t[n],i=e.isRexSizer?Math.max(e.minHeight,e.childrenHeight):e.minHeight!==void 0?e.minHeight:Qt(e),f=e.rexSizer.padding,i+=f.top+f.bottom,s=Math.max(i,s);return s+this.space.top+this.space.bottom},Y5=function(s,t){t===void 0&&(t=this.width);var e,f=s.rexSizer;if(f.expandWidth){var i=t-this.space.left-this.space.right,n=f.padding;e=i-n.left-n.right}return e},z5=function(s,t){t===void 0&&(t=this.height);var e,f=s.rexSizer;if(f.expandHeight){var i=t-this.space.top-this.space.bottom,n=f.padding;e=i-n.top-n.bottom}return e},V5=function(s){s===void 0&&(s=[]);var t=this.sizerChildren,e;for(var f in t)e=t[f],e.isRexSizer&&s.push(e);return s},jc=function(s,t){s.width<s.childrenWidth&&console.warn(`Layout width error: Parent=${t.constructor.name}, Child=${s.constructor.name}`),s.height<s.childrenHeight&&console.warn(`Layout height error: Parent=${t.constructor.name}, Child=${s.constructor.name}`)},U5=function(){var s,t,e,f=this.innerLeft,i=this.innerTop,n=this.innerWidth,h=this.innerHeight,r,a,l,o,u,v,d=this.sizerChildren;for(var c in d)s=d[c],!s.rexSizer.hidden&&(t=s.rexSizer,e=t.padding,Eo.call(this,s),s.isRexSizer?(s.runLayout(this,this.getExpandedChildWidth(s),this.getExpandedChildHeight(s)),jc(s,this)):(u=void 0,v=void 0,t.expandWidth&&(u=n-e.left-e.right),t.expandHeight&&(v=h-e.top-e.bottom),bs(s,u,v)),r=f+e.left,l=n-e.left-e.right,a=i+e.top,o=h-e.top-e.bottom,Po.call(this,s,r,a,l,o,t.align,t.alignOffsetX,t.alignOffsetY))};const nx=Phaser.Utils.Objects.IsPlainObject,Mn=Phaser.Utils.Objects.GetValue,sx=Phaser.Display.Align.CENTER,W5=Phaser.Utils.String.UUID;var X5=function(s,t,e,f,i,n,h,r,a){if(Co.call(this,s),nx(t)){var o=t;t=Mn(o,"key",void 0),e=Mn(o,"align",sx),r=Mn(o,"offsetX",0),a=Mn(o,"offsetY",0),f=Mn(o,"padding",0),i=Mn(o,"expand",!0),s.isRexSizer||(n=Mn(o,"minWidth",s._minWidth),h=Mn(o,"minHeight",s._minHeighted))}var l=t!==void 0;l||(t=W5()),typeof e=="string"&&(e=bl[e]),e===void 0&&(e=sx),r===void 0&&(r=0),a===void 0&&(a=0),f===void 0&&(f=0),i===void 0&&(i=!0),s.isRexSizer||(n===void 0&&(n=s._minWidth),h===void 0&&(h=s._minHeight));var o=this.getSizerConfig(s);return o.align=e,o.alignOffsetX=r,o.alignOffsetY=a,o.padding=aa(f),nx(i)?(o.expandWidth=Mn(i,"width",!1),o.expandHeight=Mn(i,"height",!1)):(o.expandWidth=i,o.expandHeight=i),s.isRexSizer||(o.expandWidth&&(s.minWidth=n===void 0?ne(s):n),o.expandHeight&&(s.minHeight=h===void 0?Qt(s):h)),this.sizerChildren.hasOwnProperty(t)&&this.sizerChildren[t].destroy(),this.sizerChildren[t]=s,l&&this.addChildrenMap(t,s),this},H5={add:X5};const $5=Phaser.Utils.Array.Remove,K5=_i.prototype.remove;var Wl=function(s,t){return this.isBackground(s)&&$5(this.backgroundChildren,s),K5.call(this,s,t),!t&&this.sizerEventsEnable&&(s.emit("sizer.remove",s,this),this.emit("remove",s,this)),this};const k5=_i.prototype.clear;var Xl=function(s){this.backgroundChildren&&(this.backgroundChildren.length=0);var t=!s&&this.sizerEventsEnable,e;if(t&&(e=this.getChildren([])),k5.call(this,s),t)for(var f,i=0,n=e.length;i<n;i++)f=e[i],f.emit("sizer.remove",f,this),this.emit("remove",f,this);return this},Z5={remove(s,t){var e;if(typeof s=="string"){if(e=s,s=this.sizerChildren[e],!s)return this}else{if(this.getParentSizer(s)!==this)return this;e=this.childToKey(s)}return e&&(delete this.sizerChildren[e],this.childrenMap.hasOwnProperty(e)&&delete this.childrenMap[e]),Wl.call(this,s,t),this},removeAll(s){for(var t in this.sizerChildren)this.remove(t,s);return this},clear(s){for(var t in this.sizerChildren)delete this.sizerChildren[t],this.childrenMap.hasOwnProperty(t)&&delete this.childrenMap[t];return Xl.call(this,s),this}},OT={getChildrenWidth:G5,getChildrenHeight:N5,getExpandedChildWidth:Y5,getExpandedChildHeight:z5,getChildrenSizers:V5,layoutChildren:U5};Object.assign(OT,H5,Z5);var Hl=function(s,t){if(Array.isArray(s))return s.indexOf(t);for(var e in s)if(s[e]===t)return e;return null};const rx=Phaser.Utils.Objects.IsPlainObject,Yr=Phaser.Utils.Objects.GetValue;class yn extends fr{constructor(t,e,f,i,n,h){rx(e)?(h=e,e=Yr(h,"x",0),f=Yr(h,"y",0),i=Yr(h,"width",void 0),n=Yr(h,"height",void 0)):rx(i)&&(h=i,i=Yr(h,"width",void 0),n=Yr(h,"height",void 0)),super(t,e,f,i,n,h),this.type="rexOverlapSizer",this.sizerChildren={},this.addChildrenMap("items",this.sizerChildren)}childToKey(t){if(typeof t=="string"){var e=t;if(this.sizerChildren.hasOwnPropery(e))return e}else return Hl(this.sizerChildren,t);return null}}Object.assign(yn.prototype,OT);var J5=Phaser.Math.Distance.Between,ll=function(s,t,e){var f=s.width/2;return J5(f,f,t,e)<=f};const Q5=Phaser.Math.Angle.Between,j5=Phaser.Math.Angle.Normalize;var ax=function(s,t,e){if(!!this.enable&&!!s.isDown){var f=this.sizerChildren.knob;if(!!ll(f,t,e)){var i=f.width/2,n=f.startAngle,h=Q5(i,i,t,e),r=f.anticlockwise?n-h:h-n,a=j5(r)/(2*Math.PI);this.stopEaseValue(),this.easeValueDuration===0||Math.abs(this.value-a)<.1?this.value=a:this.easeValueTo(a)}}},q5=function(){var s=this.sizerChildren.knob;s.setInteractive().on("pointerdown",ax,this).on("pointermove",ax,this)};const ox=Phaser.Math.Angle.Between,_5=Phaser.Math.Angle.Wrap;var tY=function(s,t,e){if(!(!this.enable||this.panPointer)){var f=this.sizerChildren.knob;!ll(f,t,e)||RT.call(this,s)}},eY=function(s,t,e){if(!!this.enable&&!!s.isDown){var f=this.sizerChildren.knob;switch(this.panState){case qc:ll(f,t,e)&&RT.call(this,s);break;case FT:ll(f,t,e)?nY.call(this):LT.call(this);break}}},iY=function(s,t,e){!this.enable||this.panPointer!==s||LT.call(this)},RT=function(s){this.panPointer=s,this.panState=FT},LT=function(){this.panPointer=void 0,this.panState=qc},nY=function(){var s=this.panPointer.prevPosition,t=this.panPointer.position,e=this.sizerChildren.knob,f=ox(e.x,e.y,s.x,s.y),i=ox(e.x,e.y,t.x,t.y),n=e.anticlockwise?f-i:i-f,h=_5(n)/(Math.PI*2);this.stopEaseValue(),this.value+=h};const qc=0,FT=1;var sY=function(){var s=this.sizerChildren.knob;s.setInteractive().on("pointerdown",tY,this).on("pointermove",eY,this).on("pointerup",iY,this),this.panPointer=void 0,this.panState=qc},rY=function(s,t){return this.textFormatCallback=s,this.textFormatCallbackScope=t,this},wT=function(s){s===void 0&&(s=this.value);var t;return this.textFormatCallbackScope?t=this.textFormatCallback(s):t=this.textFormatCallback.call(this.textFormatCallbackScope,s),t},aY=function(){var s=this.sizerChildren.text;return s&&this.textFormatCallback&&(s.setText(wT.call(this)),s.layout&&s.layout()),this},oY={setTextFormatCallback:rY,getFormatText:wT,updateText:aY};const Je=Phaser.Utils.Objects.GetValue,hY=Phaser.Math.Linear,hx=Phaser.Math.Percent,lY=Phaser.Math.Snap.To;class $l extends yn{constructor(t,e){e===void 0&&(e={}),super(t,e),this.type="rexKnob",this.eventEmitter=Je(e,"eventEmitter",this);var f=Je(e,"background",void 0),i=Je(e,"text",void 0);f&&this.addBackground(f),i&&(e.textColor=void 0,e.textStrokeColor=void 0,this.setTextFormatCallback(Je(e,"textFormatCallback",void 0),Je(e,"textFormatCallbackScope",void 0)));var n=new Dl(t,e);n.setDepth(Je(e,"knobDepth",0)),n._value=-1,t.add.existing(n),this.add(n,"knob"),i&&(this.add(i,"text","center",0,!1),t.children.moveBelow(n,i)),this.addChildrenMap("background",f),this.addChildrenMap("knob",n),this.addChildrenMap("text",i);var h=Je(e,"valuechangeCallback",null);if(h!==null){var r=Je(e,"valuechangeCallbackScope",void 0);this.eventEmitter.on("valuechange",h,r)}this.setEnable(Je(e,"enable",void 0)),this.setEaseValuePropName("value").setEaseValueDuration(Je(e,"easeValue.duration",0)).setEaseValueFunction(Je(e,"easeValue.ease","Linear")),this.setGap(Je(e,"gap",void 0)),this.setValue(Je(e,"value",0),Je(e,"min",void 0),Je(e,"max",void 0));var a=Je(e,"input",0);switch(typeof a=="string"&&(a=uY[a]),a){case 0:sY.call(this);break;case 1:q5.call(this);break}}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}setGap(t){return this.gap=t,this}get value(){return this.sizerChildren.knob.value}set value(t){this.gap!==void 0&&(t=lY(t,this.gap));var e=this.value;this.sizerChildren.knob.value=t;var f=this.value;e!==f&&(this.updateText(),this.eventEmitter.emit("valuechange",f,e,this.eventEmitter))}setValue(t,e,f){return t==null?this:(e!==void 0&&(t=hx(t,e,f)),this.value=t,this)}addValue(t,e,f){return e!==void 0&&(t=hx(t,e,f)),this.value+=t,this}getValue(t,e){var f=this.value;return t!==void 0&&(f=hY(t,e,f)),f}}const uY={pan:0,drag:0,click:1,none:-1};Object.assign($l.prototype,oY,To);xt.register("knob",function(s){var t=new $l(this.scene,s);return this.scene.add.existing(t),t});Ct(window,"RexPlugins.UI.Knob",$l);const fY={arc:Il,circle:Ud,curve:o3,ellipse:h3,line:l3,lines:y3,rectangle:C3,triangle:E3},lx=Phaser.Utils.Objects.GetValue,dY=Phaser.Utils.Objects.IsPlainObject,cY=function(){for(var s=this.getShapes(),t=0,e=s.length;t<e;t++)s[t].lineStyle().fillStyle()};var vY={createShape(s,t){var e=fY[s],f=new e;return t&&f.setName(t),f},buildShapes(s){var t=lx(s,"create",void 0);if(dY(t)){var e=t;for(var f in e){var i=e[f];switch(typeof i){case"number":for(var n=0;n<i;n++)this.addShape(this.createShape(f));break;case"string":this.addShape(this.createShape(f,i));break;default:for(var h=i,n=0,r=h.length;n<r;n++)this.addShape(this.createShape(f,h[n]));break}}}else if(Array.isArray(t))for(var e=t,n=0,r=e.length;n<r;n++){var a=e[n];this.addShape(this.createShape(a.type,a.name))}else typeof t=="function"&&t.call(this);this.setUpdateShapesCallback(lx(s,"update"))},setUpdateShapesCallback(s){return s===void 0&&(s=cY),this.dirty=this.dirty||this.updateCallback!==s,this.updateCallback=s,this},updateShapes(){this.updateCallback.call(this)}};const Va=Phaser.Utils.Objects.GetValue,pY=Phaser.Utils.Objects.IsPlainObject;class Kl extends Oc{constructor(t,e,f,i,n,h){pY(e)&&(h=e,e=Va(h,"x",0),f=Va(h,"y",0),i=Va(h,"width",2),n=Va(h,"height",2)),super(t,e,f,i,n),this.type=Va(h,"type","rexCustomShapes"),this.buildShapes(h)}}Object.assign(Kl.prototype,vY);xt.register("customShapes",function(s,t,e,f,i){var n=new Kl(this.scene,s,t,e,f,i);return this.scene.add.existing(n),n});Ct(window,"RexPlugins.UI.CustomShapes",Kl);const An=Phaser.Utils.Objects.GetValue,gY=Phaser.Utils.Objects.IsPlainObject,mY=Phaser.Math.Clamp,xY=Phaser.Math.Linear,ux=Phaser.Math.Percent;class _c extends Kl{constructor(t,e,f,i,n,h){gY(e)&&(h=e,e=An(h,"x",0),f=An(h,"y",0),i=An(h,"width",2),n=An(h,"height",2)),h===void 0&&(h={}),h.type||(h.type="rexCustomProgress"),super(t,e,f,i,n,h),this.eventEmitter=An(h,"eventEmitter",this);var r=An(h,"valuechangeCallback",null);if(r!==null){var a=An(h,"valuechangeCallbackScope",void 0);this.eventEmitter.on("valuechange",r,a)}this.setEaseValuePropName("value").setEaseValueDuration(An(h,"easeValue.duration",0)).setEaseValueFunction(An(h,"easeValue.ease","Linear")),this.setValue(An(h,"value",0))}get centerX(){return this.width/2}get centerY(){return this.height/2}get radius(){return Math.min(this.centerX,this.centerY)}get value(){return this._value}set value(t){t=mY(t,0,1);var e=this._value,f=e!=t;this.dirty=this.dirty||f,this._value=t,f&&this.eventEmitter.emit("valuechange",this._value,e,this.eventEmitter)}setValue(t,e,f){return t==null?this:(e!==void 0&&(t=ux(t,e,f)),this.value=t,this)}addValue(t,e,f){return e!==void 0&&(t=ux(t,e,f)),this.value+=t,this}getValue(t,e){var f=this.value;return t!==void 0&&(f=xY(t,e,f)),f}}Object.assign(_c.prototype,To);xt.register("customProgress",function(s,t,e,f,i){var n=new _c(this.scene,s,t,e,f,i);return this.scene.add.existing(n),n});Ct(window,"RexPlugins.UI.CustomProgress",_c);var yY={setTransitionStartCallback(s,t){return this.onStartCallback=s,this.onStartCallbackScope=t,this},setTransitionProgressCallback(s,t){return this.onProgressCallback=s,this.onProgressCallbackScope=t,this},setTransitionCompleteCallback(s,t){return this.onCompleteCallback=s,this.onCompleteCallbackScope=t,this}};const TY=Phaser.Utils.Objects.IsPlainObject,Ki=Phaser.Utils.Objects.GetValue;var CY={out:0,in:1},SY={setTransitionDirection(s){return typeof s=="string"&&(s=CY[s]),this.dir=s,this},setDuration(s){return this.duration=s,this},setEaseFunction(s){return this.easeFunction=s,this},setNextTexture(s,t){return this.nextImage.setTexture(s,t),this},transit(s,t){if(this.isRunning&&(this.ignoreCompleteEvent=!0,this.stop(),this.ignoreCompleteEvent=!1),TY(s)){var e=s;s=Ki(e,"key",void 0),t=Ki(e,"frame",void 0),this.setDuration(Ki(e,"duration",this.duration)).setEaseFunction(Ki(e,"ease",this.easeFunction)).setTransitionDirection(Ki(e,"dir",this.dir));var f=Ki(e,"mask",void 0);f&&this.setMaskGameObject(f),this.setMaskEnable(f===!0);var i=Ki(e,"onStart",void 0),n=Ki(e,"onProgress",void 0),h=Ki(e,"onComplete",void 0);(i!==void 0||n!==void 0||h!==void 0)&&this.setTransitionStartCallback(i,Ki(e,"onStartScope",void 0)).setTransitionProgressCallback(n,Ki(e,"onProgressScope",void 0)).setTransitionCompleteCallback(h,Ki(e,"onCompleteScope",void 0))}return this.setNextTexture(s,t),this.start(),this},start(){return this.easeValueTask===void 0&&(this.easeValueTask=new Ll(this,{eventEmitter:null})),this.easeValueTask.restart({key:"t",from:0,to:1,duration:this.duration,ease:this.easeFunction}),this},pause(){return this.easeValueTask&&this.easeValueTask.pause(),this},resume(){return this.easeValueTask&&this.easeValueTask.resume(),this},stop(){return this.easeValueTask&&this.easeValueTask.stop(),this.setT(1),this}},fx=function(s,t,e,f,i){switch(this.clear().fillStyle(16777215),this.shape){case 1:var n=Math.min(s,t)/2;this.fillCircle(-s*(f-.5),-t*(i-.5),n+e);break;default:this.fillRect(-(s*f)-e,-(t*i)-e,s+2*e,t+2*e);break}};const EY=Phaser.GameObjects.Graphics;class Kd extends EY{constructor(t,e,f){e===void 0&&(e=0),typeof e=="string"&&(e=PY[e]),f===void 0&&(f=0),super(t.scene),this.parent=t,this.shape=e,this.padding=f,this.setPosition().resize().setVisible(!1)}destroy(){return this.parent=void 0,super.destroy(),this}setPosition(t,e){var f=this.parent;return t===void 0&&(t=f.x),e===void 0&&(e=f.y),super.setPosition(t,e),this}resize(t,e,f){var i=this.parent;return t===void 0&&(t=i.width),e===void 0&&(e=i.height),f===void 0&&(f=this.padding),this.widthSave===t&&this.heightSave===e&&this.paddingSave===f?this:(this.widthSave=t,this.heightSave=e,this.paddingSave=f,this.originXSave=i.originX,this.originYSave=i.originY,fx.call(this,t,e,f,i.originX,i.originY),this)}setOrigin(t,e){e===void 0&&(e=t);var f=this.parent;return t===void 0&&(t=f.originX),e===void 0&&(e=f.originY),this.originXSave===t&&this.originYSave===e?this:(this.originXSave=t,this.originYSave=e,fx.call(this,this.widthSave,this.heightSave,this.paddingSave,t,e),this)}}const PY={rectangle:0,circle:1};var MY={setMaskGameObject(s){if(!s)return this.removeMaskGameObject(),this;if(this.maskGameObject){if(s===!0&&this.maskGameObject instanceof Kd)return this;if(this.maskGameObject===s)return this;this.removeMaskGameObject()}return s===!0&&(s=new Kd(this)),this.maskGameObject=s,this.maskGameObject.resize(this.width,this.height).setOrigin(this.originX,this.originY).setPosition(0,0).setScale(1).setVisible(!1),this.addLocal(this.maskGameObject),this.childrenMask=this.maskGameObject.createGeometryMask(),this},removeMaskGameObject(){return this.backImage.clearMask(),this.frontImage.clearMask(),this.childrenMask=void 0,this.remove(this.maskGameObject,!0),this.maskGameObject=void 0,this},setImageMaskEnable(s,t,e){return t===void 0&&(t=!0),this.childrenMask||this.setMaskGameObject(!0),t?(s.setMask(this.childrenMask),e&&this.childrenMask.setInvertAlpha()):s.clearMask(),this},setCurrentImageMaskEnable(s,t){return this.setImageMaskEnable(this.currentImage,s,t),this},setNextImageMaskEnable(s,t){return this.setImageMaskEnable(this.nextImage,s,t),this},setCellImagesMaskEnable(s,t){for(var e=this.getCellImages(),f=0,i=e.length;f<i;f++)this.setImageMaskEnable(e[f],s,t);return this},setMaskEnable(s,t){return this.setImageMaskEnable(this.backImage,s,t),this.setImageMaskEnable(this.frontImage,s,t),this.setCellImagesMaskEnable(s,t),this}},AY=function(s,t){t===void 0&&(t=",");var e;return s==="__BASE"?e=function(f,i){return`${f}${t}${i}`}:e=function(f,i){return`${s}_${f}${t}${i}`},e},OY=function(s,t,e,f,i,n){e==null&&(e="__BASE"),n||(n=AY(e,n));for(var h=s.sys.textures.get(t),r=h.source[0].isRenderTexture,a=typeof e=="object"?e:h.get(e),l=a.width,o=a.height,u,v,d,c=l/f,p=o/i,g=0,m=0,x=0;x<i;x++){g=0;for(var y=0;y<f;y++)d=n(y,x),u=g+a.cutX,r?v=o-m-p+a.cutY:v=m+a.cutY,h.add(d,0,u,v,c,p),g+=c;m+=p}return{getFrameNameCallback:n,cellWidth:c,cellHeight:p,columns:f,rows:i}};const ts=Phaser.Utils.Objects.GetValue,RY=Phaser.GameObjects.Image,LY=Phaser.Utils.Objects.IsPlainObject,FY=Phaser.Math.RotateAround;var wY=function(s,t,e,f){LY(t)&&(f=t,t=ts(f,"columns",1),e=ts(f,"rows",1));var i=ts(f,"onCreateImage");if(!i){var n=ts(f,"ImageClass",RY);i=function(X,K,k){return new n(X,0,0,K,k)}}for(var h=ts(f,"originX",.5),r=ts(f,"originY",.5),a=ts(f,"add",!0),l=ts(f,"align",a),o=ts(f,"objectPool",void 0),u=s.scene,v=s.texture,d=s.frame,c=OY(u,v,d,t,e),p=c.getFrameNameCallback,g=s.scaleX,m=s.scaleY,x=s.rotation,y=s.getTopLeft(),T=y.x,C=y.y,S=[],E=c.cellWidth*g,M=c.cellHeight*m,O=0;O<e;O++)for(var L=0;L<t;L++){var R,F=p(L,O);o&&o.length>0?R=o.pop().setTexture(v,F):R=i(u,v,F),a&&u.add.existing(R);var D=T+E*L,B=C+M*O,N=D+h*E,U=B+r*M;l&&(R.setOrigin(h,r).setPosition(N,U).setScale(g,m).setRotation(x),FY(R,T,C,x)),S.push(R)}return S},IY={gridCutImage(s,t,e,f){f===void 0&&(f={}),f.objectPool=this.imagesPool;for(var i=wY(s,t,e,f),n,h=0,r=i.length;h<r;h++)n=i[h],n.setVisible(!0),this.add(n);return this.cellImages=i,this.setChildLocalVisible(s,!1),i},gridCutCurrentImage(s,t,e){return this.gridCutImage(this.currentImage,s,t,e)},gridCutNextImage(s,t,e){return this.gridCutImage(this.nextImage,s,t,e)},getCellImages(){return this.cellImages},freeCellImages(){if(this.cellImages.length===0)return this;for(var s=this.cellImages[0].texture,t=this.cellImages,e,f,i=0,n=t.length;i<n;i++)e=t[i],this.setChildLocalAlpha(e,1).setChildLocalScale(e,1).setChildLocalVisible(e,!1),e.clearMask(),f=e.frame.name,e.setTexture(),s.remove(f);return this.imagesPool.push(...t),t.length=0,this}},DY={setFlipX(s){return this.flipX=s,this},setFlipY(s){return this.flipY=s,this},toggleFlipX(){return this.flipX=!this.flipX,this},toggleFlipY(){return this.flipY=!this.flipY,this},setFlip(s,t){return this.flipX=s,this.flipY=t,this},resetFlip(){return this.flipX=!1,this.flipY=!1,this}},IT={};Object.assign(IT,yY,SY,MY,IY,DY);var BY=function(s,t,e,f){},bY=function(s,t,e,f){s.setChildLocalAlpha(t,1-f).setChildLocalAlpha(e,f)},GY=function(s,t,e,f){s.setChildLocalAlpha(t,1)};const dx=Phaser.Utils.Objects.IsPlainObject,Be=Phaser.Utils.Objects.GetValue,NY=Phaser.Math.Clamp;class tv extends _i{constructor(t,e,f,i,n,h){dx(e)?(h=e,e=Be(h,"x",0),f=Be(h,"y",0),i=Be(h,"key",void 0),n=Be(h,"frame",void 0)):dx(n)&&(h=n,n=void 0);var r=Be(h,"back",void 0),a=Be(h,"front",void 0);r||(r=t.add.image(e,f,i,n)),a||(a=t.add.image(e,f,i,n));var l=Be(h,"width",a.width),o=Be(h,"height",a.height);super(t,e,f,l,o),r.setVisible(!1),this.addMultiple([r,a]),this.type="rexTransitionImage",this.backImage=r,this.frontImage=a,this.maskGameObject=void 0,this.cellImages=[],this.imagesPool=[];var u=Be(h,"onStart",void 0),v=Be(h,"onProgress",void 0),d=Be(h,"onComplete",void 0),c=Be(h,"dir",0);u===void 0&&v===void 0&&d===void 0&&(u=BY,v=bY,d=GY,c=0),this.setTransitionStartCallback(u,Be(h,"onStartScope",void 0)).setTransitionProgressCallback(v,Be(h,"onProgressScope",void 0)).setTransitionCompleteCallback(d,Be(h,"onCompleteScope",void 0)).setTransitionDirection(c).setDuration(Be(h,"duration",1e3)).setEaseFunction(Be(h,"ease","Linear"));var p=Be(h,"mask",void 0);p&&this.setMaskGameObject(p),this.setMaskEnable(!1),this.ignoreCompleteEvent=!1}destroy(t){!this.scene||(this.childrenMask&&(this.childrenMask.destroy(),this.childrenMask=void 0),this.backImage=void 0,this.frontImage=void 0,this.maskGameObject=void 0,this.cellImages.length=0,this.imagesPool.length=0,super.destroy(t),this.onStartCallback=void 0,this.onStartCallbackScope=void 0,this.onProgressCallback=void 0,this.onProgressCallbackScope=void 0,this.onCompleteCallback=void 0,this.onCompleteCallbackScope=void 0,this.easeValueTask=void 0)}get currentImage(){return this.dir===0?this.frontImage:this.backImage}get nextImage(){return this.dir===0?this.backImage:this.frontImage}get texture(){return this.nextImage.texture}get frame(){return this.nextImage.frame}get flipX(){return this._flipX}set flipX(t){this._flipX!==t&&(this._flipX=t,this.backImage.setFlipX(t),this.frontImage.setFlipX(t))}get flipY(){return this._flipY}set flipY(t){this._flipY!==t&&(this._flipY=t,this.backImage.setFlipY(t),this.frontImage.setFlipY(t))}get t(){return this._t}set t(t){if(t=NY(t,0,1),this._t!==t){this._t=t;var e=this.currentImage,f=this.nextImage;if(t===0&&(this.setChildVisible(this.frontImage,!0).setChildVisible(this.backImage,!0),qf(this.onStartCallback,this.onStartCallbackScope,this,e,f,t)),qf(this.onProgressCallback,this.onProgressCallbackScope,this,e,f,t),t===1){qf(this.onCompleteCallback,this.onCompleteCallbackScope,this,e,f,t);var i=f.texture.key,n=f.frame.name;this.frontImage.setTexture(i,n),this.backImage.setTexture(i,n),this.setChildVisible(this.frontImage,!0).setChildVisible(this.backImage,!1).setMaskEnable(!1).freeCellImages()}t===1&&!this.ignoreCompleteEvent&&this.emit("complete")}}setT(t){return this.t=t,this}get isRunning(){return this.easeValueTask?this.easeValueTask.isRunning:!1}setOrigin(t,e){return super.setOrigin(t,e),this.backImage.setOrigin(t,e),this.frontImage.setOrigin(t,e),this.maskGameObject&&this.maskGameObject.setOrigin(t,e),this}setTexture(t,e){return this.frontImage.setTexture(t,e),this.backImage.setTexture(t,e).setVisible(!1),this}}var qf=function(s,t,e,f,i,n){!s||(t?s.call(t,e,f,i,n):s(e,f,i,n))};Object.assign(tv.prototype,IT);xt.register("transitionImage",function(s,t,e,f,i){var n=new tv(this.scene,s,t,e,f,i);return this.scene.add.existing(n),n});Ct(window,"RexPlugins.UI.TransitionImage",tv);const YY=Phaser.GameObjects.Rectangle;class ev extends YY{constructor(t,e,f){super(t,0,0,2,2,e,1),this.setAlpha(f),this.setScrollFactor(0),this.boot()}boot(){var t=this.scene;t.sys.events.on("prerender",this.resize,this)}destroy(t){!this.scene||(this.scene.sys.events.off("prerender",this.resize,this),super.destroy(t))}get tint(){return this.fillColor}set tint(t){this.setFillStyle(t,this.fillAlpha)}resize(){var t=this.scene,e=t.sys.scale.gameSize,f=t.sys.cameras.main,i=e.width,n=e.height,h=1/f.zoom,r=i/2,a=n/2,l=i*h,o=n*h;(this.x!==r||this.y!==a)&&this.setPosition(r,a),(this.width!==l||this.height!==o)&&this.setSize(l,o).setOrigin(.5)}}xt.register("fullWindowRectangle",function(s,t){var e=new ev(this.scene,s,t);return this.scene.add.existing(e),e});Ct(window,"RexPlugins.UI.FullWindowRectangle",ev);const cx=Phaser.Utils.Objects.GetValue;class iv extends He{constructor(t,e){super(t,{eventEmitter:!1}),this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.setHitAreaMode(cx(t,"hitAreaMode",0)),this.setEnable(cx(t,"enable",!0)),this}boot(){this.parent.on("pointerdown",function(t,e,f,i){i.stopPropagation()}).on("pointerup",function(t,e,f,i){i.stopPropagation()}).on("pointermove",function(t,e,f,i){i.stopPropagation()}).on("pointerover",function(t,e,f,i){i.stopPropagation()}).on("pointerout",function(t,e){e.stopPropagation()})}setHitAreaMode(t){typeof t=="string"&&(t=zY[t]);var e=this.parent;return e.input&&e.removeInteractive(),t===0?e.setInteractive():e.setInteractive({hitArea:{},hitAreaCallback:function(){return!0}}),this}setEnable(t){return t===void 0&&(t=!0),t?this.parent.setInteractive():this.parent.disableInteractive(),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}}var zY={default:0,fullWindow:1};const vx=Phaser.Utils.Objects.GetValue;class nv extends ev{constructor(t,e){var f=vx(e,"color",0),i=vx(e,"alpha",.8);super(t,f,i),this.touchEventStop=new iv(this,{hitAreaMode:1})}}xt.register("cover",function(s){var t=new nv(this.scene,s);return this.scene.add.existing(t),t});Ct(window,"RexPlugins.UI.Cover",nv);var VY=function(s){if(!window.Chart){var t=`Can not find chartjs! Load chartjs in preload stage.
scene.load.script('chartjs', 'https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.8.0/Chart.min.js');`;return console.error(t),this}return this.chart&&this.chart.destroy(),this.chart=new Chart(this.context,UY(this,s)),this},UY=function(s,t){t===void 0&&(t={}),t.options===void 0&&(t.options={});var e=t.options;e.responsive=!1,e.maintainAspectRatio=!1,e.hasOwnProperty("devicePixelRatio")||(e.devicePixelRatio=1);var f=!1;e.animation===void 0?e.animation={}:e.animation===!1&&(f=!0,e.animation={});var i=e.animation;f&&(i.duration=0);var n=i.onProgress;i.onProgress=function(r){n&&n(r),s.needRedraw()};var h=i.onComplete;return i.onComplete=function(r){h&&h(r),s.needRedraw()},t},WY=function(s){if(this.chart!==void 0)if(typeof s=="string"){for(var t=this.chart.data.datasets,e,f=0,i=t.length;f<i;f++)if(e=t[f],e.label===s)return e}else return this.chart.data.datasets[s]},XY=function(s,t){var e=this.getChartDataset(s);if(e!==void 0){if(typeof t=="string"){var f=this.chart.data.labels;if(t=f.indexOf(t),t===-1)return}return e.data[t]}},HY=function(s,t,e){if(this.chart===void 0)return this;var f=this.getChartDataset(s);if(typeof t=="string"){var i=this.chart.data.labels;if(t=i.indexOf(t),t===-1)return this}return f.data[t]=e,this},$Y=function(){return this.chart===void 0?this:(this.chart.update(),this)};class sv extends Gn{constructor(t,e,f,i,n,h){super(t,e,f,i,n),this.type="rexChart",this.chart=void 0,h!==void 0&&this.setChart(h)}destroy(t){!this.scene||(this.chart&&(this.chart.destroy(),this.chart=void 0),super.destroy(t))}resize(t,e){if(t===this.width&&e===this.height)return this;if(super.resize(t,e),this.chart){var f=this.chart;f.height=this.canvas.height,f.width=this.canvas.width,f.aspectRatio=f.height?f.width/f.height:null,f.update()}return this}}var KY={setChart:VY,getChartDataset:WY,getChartData:XY,setChartData:HY,updateChart:$Y};Object.assign(sv.prototype,KY);xt.register("chart",function(s,t,e,f,i){var n=new sv(this.scene,s,t,e,f,i);return this.scene.add.existing(n),n});Ct(window,"RexPlugins.UI.Chart",sv);var kY=function(s){if(this.rexSizer.hidden)return 0;s===void 0&&(s=!0);var t=0,e=this.sizerChildren,f,i,n;if(this.orientation===0)for(var h=0,r=e.length;h<r;h++)f=e[h],!f.rexSizer.hidden&&(f.rexSizer.proportion===0||s?n=this.getChildWidth(f):n=0,i=f.rexSizer.padding,n+=i.left+i.right,h>0&&(n+=this.space.item),t+=n);else for(var h=0,r=e.length;h<r;h++)f=e[h],f.hasOwnProperty("rexSizer")&&(f.rexSizer.hidden||(i=f.rexSizer.padding,n=this.getChildWidth(f)+i.left+i.right,t=Math.max(n,t)));return t+this.space.left+this.space.right},ZY=function(s){if(this.rexSizer.hidden)return 0;s===void 0&&(s=!0);var t=0,e=this.sizerChildren,f,i,n;if(this.orientation===0)for(var h=0,r=e.length;h<r;h++)f=e[h],!f.rexSizer.hidden&&(i=f.rexSizer.padding,n=this.getChildHeight(f)+i.top+i.bottom,t=Math.max(n,t));else for(var h=0,r=e.length;h<r;h++)f=e[h],f.hasOwnProperty("rexSizer")&&(f.rexSizer.hidden||(f.rexSizer.proportion===0||s?n=this.getChildHeight(f):n=0,i=f.rexSizer.padding,n+=i.top+i.bottom,h>0&&(n+=this.space.item),t+=n));return t+this.space.top+this.space.bottom},JY=function(s,t){t===void 0&&(t=this.width);var e,f=s.rexSizer,i=f.padding;if(this.orientation===0)f.proportion>0&&this.proportionLength>0&&(e=f.proportion*this.proportionLength);else if(f.expand){var n=t-this.space.left-this.space.right;e=n-i.left-i.right}return e},QY=function(s,t){t===void 0&&(t=this.height);var e,f=s.rexSizer,i=f.padding;if(this.orientation===0){if(f.expand){var n=t-this.space.top-this.space.bottom;e=n-i.top-i.bottom}}else f.proportion>0&&this.proportionLength>0&&(e=f.proportion*this.proportionLength);return e},jY=function(s){s===void 0&&(s=[]);for(var t=this.sizerChildren,e,f=0,i=t.length;f<i;f++)e=t[f],e.isRexSizer&&s.push(e);return s},qY=function(){return this._childrenProportion=void 0,this.proportionLength=void 0,So.call(this),this};const _Y=Phaser.Math.Wrap;var tz=function(){for(var s=this.sizerChildren,t,e,f,i=this.innerLeft,n=this.innerTop,h=this.innerWidth,r=this.innerHeight,a=i,l=n,o,u,v,d,c,p,g,m=this.startChildIndex,x=0,y=s.length;x<y;x++)m===0?g=x:g=_Y(x+m,0,y),this.rtl&&(g=y-g-1),t=s[g],!t.rexSizer.hidden&&(e=t.rexSizer,f=e.padding,Eo.call(this,t),t.isRexSpace?(c=0,p=0):(c=this.getExpandedChildWidth(t),p=this.getExpandedChildHeight(t)),t.isRexSizer?(t.runLayout(this,c,p),jc(t,this)):bs(t,c,p),c===void 0&&(c=ne(t)),p===void 0&&(p=Qt(t)),this.orientation===0?(o=a+f.left,e.proportion===0||this.proportionLength===0?v=c:v=e.proportion*this.proportionLength,u=l+f.top,d=r-f.top-f.bottom):(o=a+f.left,v=h-f.left-f.right,u=l+f.top,e.proportion===0||this.proportionLength===0?d=p:d=e.proportion*this.proportionLength),Po.call(this,t,o,u,v,d,e.align),this.orientation===0?a+=v+f.left+f.right+this.space.item:l+=d+f.top+f.bottom+this.space.item)},ez=function(t){var t=Vc.call(this,t);if(this.proportionLength===void 0&&this.orientation===0){var e=t-this.childrenWidth;e>0?(e=t-this.getChildrenWidth(!1),this.proportionLength=e/this.childrenProportion):this.proportionLength=0}return t},iz=function(s,e){var e=Uc.call(this,s,e);if(this.proportionLength===void 0&&this.orientation===1){var f=e-this.childrenHeight;f>0?(f=e-this.getChildrenHeight(!1),this.proportionLength=f/this.childrenProportion):this.proportionLength=0}return e};const nz=Phaser.GameObjects.Zone;class kl extends nz{constructor(t){super(t,0,0,1,1),this.isRexSpace=!0}}var sz=function(s,t){var e=this.sizerChildren;if(e.length===0)return-1;for(var f=-1,i=1/0,n=0,h=e.length;n<h;n++){var r=e[n],a;this.orientation===0?a=Math.abs(r.left-s):a=Math.abs(r.top-t),i>a&&(i=a,f=n)}var r=e[e.length-1],a;return this.orientation===0?a=Math.abs(r.right-s):a=Math.abs(r.bottom-t),i>a&&(i=a,f=n+1),f};const DT=Phaser.Utils.Objects.IsPlainObject,Ts=Phaser.Utils.Objects.GetValue,px=Phaser.Display.Align.CENTER,rz={min:0,full:-1};var _f=function(s,t,e,f,i,n,h,r,a){Co.call(this,s);var l=s.isRexSpace,o=typeof t;if(t===null)return this;if(o!=="number"){if(o==="string")t=rz[t];else if(DT(t)){var u=t;t=Ts(u,"proportion",void 0),e=Ts(u,"align",px),f=Ts(u,"padding",0),i=Ts(u,"expand",!1),n=Ts(u,"key",void 0),h=Ts(u,"index",void 0),s.isRexSizer||(r=Ts(u,"minWidth",void 0),a=Ts(u,"minHeight",void 0))}}typeof e=="string"&&(e=bl[e]),t===void 0&&(t=l?1:0),e===void 0&&(e=px),f===void 0&&(f=0),i===void 0&&(i=!1),r===void 0&&(l?r=0:s.isRexSizer||(r=s._minWidth)),a===void 0&&(l?a=0:s.isRexSizer||(a=s._minHeight));var u=this.getSizerConfig(s);return u.proportion=t,u.align=e,u.padding=aa(f),u.expand=i,h===void 0||h>=this.sizerChildren.length?this.sizerChildren.push(s):this.sizerChildren.splice(h,0,s),s.isRexSizer||(t>0&&(this.orientation===0?s.minWidth=r===void 0?ne(s):r:s.minHeight=a===void 0?Qt(s):a),i&&(this.orientation===0?s.minHeight=a:s.minWidth=r)),n!==void 0&&this.addChildrenMap(n,s),this},az={add:_f,addSpace(s){return this.insertSpace(void 0,s),this},insertSpace(s,t){return t===void 0&&(t=1),_f.call(this,new kl(this.scene),{proportion:t,minWidth:0,minHeight:0,index:s}),this},insert(s,t,e,f,i,n,h,r){return DT(e)&&(e.index=s),_f.call(this,t,e,f,i,n,h,s,r),this},insertAtPosition(s,t,e,f,i,n,h,r,a){var l=sz.call(this,s,t);return l===-1&&(l=void 0),this.insert(l,e,f,i,n,h,r,a),this}};const oz=Phaser.Utils.Array.Remove;var hz={remove(s,t){return this.getParentSizer(s)!==this?this:(oz(this.sizerChildren,s),Wl.call(this,s,t),this)},removeAll(s){for(var t=this.sizerChildren.length-1;t>=0;t--)this.remove(this.sizerChildren[t],s);return this},clear(s){return this.sizerChildren.length=0,Xl.call(this,s),this}},BT={getChildrenWidth:kY,getChildrenHeight:ZY,getExpandedChildWidth:JY,getExpandedChildHeight:QY,getChildrenSizers:jY,preLayout:qY,layoutChildren:tz,resolveWidth:ez,resolveHeight:iz};Object.assign(BT,az,hz);var lz=function(){for(var s=0,t=this.sizerChildren,e,f,i=0,n=t.length;i<n;i++)e=t[i],!e.rexSizer.hidden&&(f=e.rexSizer.proportion,f>0&&(s+=f));return s},uz={x:0,h:0,horizontal:0,"left-to-right":0,y:1,v:1,vertical:1,"top-to-bottom":1},rv=function(s){return typeof s=="string"&&(s=uz[s]),s};const td=Phaser.Utils.Objects.IsPlainObject,ki=Phaser.Utils.Objects.GetValue;class Te extends fr{constructor(t,e,f,i,n,h,r){td(e)?(r=e,e=ki(r,"x",0),f=ki(r,"y",0),i=ki(r,"width",void 0),n=ki(r,"height",void 0),h=ki(r,"orientation",0)):td(i)?(r=i,i=ki(r,"width",void 0),n=ki(r,"height",void 0),h=ki(r,"orientation",0)):td(h)&&(r=h,h=ki(r,"orientation",0)),h===void 0&&(h=0),super(t,e,f,i,n,r),this.type="rexSizer",this.sizerChildren=[],this.setOrientation(h),this.setItemSpacing(ki(r,"space.item",0)),this.setStartChildIndex(ki(r,"startChildIndex",0)),this.setRTL(ki(r,"rtl",!1)),this.addChildrenMap("items",this.sizerChildren)}setOrientation(t){return this.orientation=rv(t),this}setItemSpacing(t){return this.space.item=t,this}setStartChildIndex(t){return this.startChildIndex=t,this}setRTL(t){return t===void 0&&(t=!0),this.rtl=t,this}get childrenProportion(){return this._childrenProportion===void 0&&(this._childrenProportion=lz.call(this)),this._childrenProportion}}Object.assign(Te.prototype,BT);xt.register("sizer",function(s,t,e,f,i,n){var h=new Te(this.scene,s,t,e,f,i,n);return this.scene.add.existing(h),h});Ct(window,"RexPlugins.UI.Sizer",Te);var bT=function(){return Array.prototype.reduce.call(arguments,fz,0)},fz=function(s,t){return s+t},dz=function(s){if(this.rexSizer.hidden)return 0;s===void 0&&(s=!0);for(var t=0,e,f=this.sizerChildren,i,n,h,r,a=0;a<this.columnCount;a++){if(r=this.columnProportions[a],e=0,r===0||s){for(var l=0;l<this.rowCount;l++)i=f[l*this.columnCount+a],i&&(i.rexSizer.hidden||(n=i.rexSizer.padding,h=this.getChildWidth(i)+n.left+n.right,e=Math.max(e,h)));t+=e}this.columnWidth[a]=e}var o=this.space,u=Math.max(o.indentLeftOdd,o.indentLeftEven);return t+bT(o.left,u,...o.column,o.right)},cz=function(s){if(this.rexSizer.hidden)return 0;s===void 0&&(s=!0);for(var t=0,e,f=this.sizerChildren,i,n,h,r,a=0;a<this.rowCount;a++){if(r=this.rowProportions[a],e=0,r===0||s){for(var l=0;l<this.columnCount;l++)i=f[a*this.columnCount+l],i&&(i.rexSizer.hidden||(h=i.isRexSizer?Math.max(i.minHeight,i.childrenHeight):i.hasOwnProperty("minHeight")?i.minHeight:Qt(i),n=i.rexSizer.padding,h+=n.top+n.bottom,e=Math.max(e,h)));t+=e}this.rowHeight[a]=e}var o=this.space,u=Math.max(o.indentTopOdd,o.indentTopEven);return t+bT(o.top,u,...o.row,o.bottom)},vz=function(s,t){var e,f=s.rexSizer;if(f.expand){var i=f.padding;e=t-i.left-i.right}return e},pz=function(s,t){var e,f=s.rexSizer;if(f.expand){var i=f.padding;e=t-i.top-i.bottom}return e},gz=function(s){s===void 0&&(s=[]);for(var t=this.sizerChildren,e,f=0,i=t.length;f<i;f++)e=t[f],e&&e.isRexSizer&&s.push(e);return s},mz=function(){return this._totalColumnProportions=void 0,this._totalRowProportions=void 0,this.proportionWidthLength=void 0,this.proportionHeightLength=void 0,So.call(this),this},xz=function(){for(var s,t,e,f=this.innerLeft,i=this.innerTop,n,h=i,r,a,l,o,u,v,d=this.space.column,c=this.space.row,p=this.space.indentLeftOdd,g=this.space.indentLeftEven,m=this.space.indentTopOdd,x=this.space.indentTopEven,y,T,C,S,E=0;E<this.rowCount;E++){T=this.getRowHeight(E),C=E%2?g:p,n=f+C;for(var M=0;M<this.columnCount;M++){if(y=this.getColumnWidth(M),s=this.getChildAt(M,E),!s||s.rexSizer.hidden){n+=y+d[M];continue}Eo.call(this,s),u=this.getExpandedChildWidth(s,y),v=this.getExpandedChildHeight(s,T),s.isRexSizer?(s.runLayout(this,u,v),jc(s,this)):bs(s,u,v),t=s.rexSizer,e=t.padding,r=n+e.left,l=y-e.left-e.right,S=M%2?x:m,a=h+S+e.top,o=T-e.top-e.bottom,Po.call(this,s,r,a,l,o,t.align),n+=y+d[M]}h+=T+c[E]}},yz=function(t){var t=Vc.call(this,t);if(this.proportionWidthLength===void 0){var e=this.totalColumnProportions;if(e>0){var f=t-this.getChildrenWidth(!1);f>=0&&(this.proportionWidthLength=f/e)}else this.proportionWidthLength=0}return t},Tz=function(s,e){var e=Uc.call(this,s,e);if(this.proportionHeightLength===void 0){var f=this.totalRowProportions;if(f>0){var i=e-this.getChildrenHeight(!1);i>=0&&(this.proportionHeightLength=i/f)}else this.proportionHeightLength=0}return e},Cz=function(s){var t,e,f;for(var i in this.sizerChildren)t=this.sizerChildren[i],t&&t.isRexSizer&&!t.ignoreLayout&&(f=this.getColumnWidth(parseInt(i)%this.columnCount),e=this.getExpandedChildWidth(t,f),e=t.resolveWidth(e),t.resolveChildrenWidth(e))},Sz=function(s){var t,e,f;for(var i in this.sizerChildren)t=this.sizerChildren[i],!(!t||t.isRexSizer&&t.ignoreLayout||!t.runWidthWrap)&&(f=this.getColumnWidth(parseInt(i)%this.columnCount),e=this.getExpandedChildWidth(t,f),t.isRexSizer&&(e=t.resolveWidth(e)),t.runWidthWrap(e));return this};const Ez=Phaser.Utils.Objects.IsPlainObject,zr=Phaser.Utils.Objects.GetValue,gx=Phaser.Display.Align.CENTER;var mx=function(s,t,e,f,i){if(typeof s=="number"||typeof t=="number")if(s===void 0){for(var n,h=0;h<f;h++)if(n=t*f+h,!e[n])return n}else if(t===void 0){for(var n,h=0;h<i;h++)if(n=h*f+s,!e[n])return n}else{var n=t*f+s;if(!e[n])return n}else if(t===!0){for(var n,h=0;h<f;h++)for(var r=0;r<i;r++)if(n=r*f+h,!e[n])return n}else for(var h=0,a=e.length;h<a;h++)if(!e[h])return h;return null},Pz=function(s,t,e,f,i,n,h){if(Co.call(this,s),Ez(t)){var a=t;t=zr(a,"column",void 0),e=zr(a,"row",void 0),f=zr(a,"align",gx),i=zr(a,"padding",0),n=zr(a,"expand",!1),h=zr(a,"key",void 0)}var r=mx(t,e,this.sizerChildren,this.columnCount,this.rowCount);if(r===null){if(typeof t=="number"&&typeof e=="number")return this;e===!0||typeof e=="number"?this.addEmptyColumn():this.addEmptyRow(),r=mx(t,e,this.sizerChildren,this.columnCount,this.rowCount)}typeof f=="string"&&(f=bl[f]),f===void 0&&(f=gx),i===void 0&&(i=0),n===void 0&&(n=!0);var a=this.getSizerConfig(s);return a.align=f,a.padding=aa(i),a.expand=n,this.sizerChildren[r]=s,h!==void 0&&this.addChildrenMap(h,s),this},Mz={add:Pz},$r=function(s,t,e,f){e===void 0&&(e=0),f===void 0&&(f=s.length-1);for(var i=e;i<=f;i++)s[i]=t;return s},Az={remove(s,t){if(this.getParentSizer(s)!==this)return this;var e=this.sizerChildren.indexOf(s);return e!==-1&&(this.sizerChildren[e]=null),Wl.call(this,s,t),this},removeAt(s,t,e){var f=this.getChildAt(s,t);return f&&this.remove(f,e),this},removeAll(s){for(var t=this.sizerChildren.length-1;t>=0;t--){var e=this.sizerChildren[t];!e||this.remove(e,s)}return this},clear(s){return $r(this.sizerChildren,null),Xl.call(this,s),this}};const xx=Phaser.Utils.Objects.GetValue;var Oz=function(s,t,e,f,i){if(e===void 0&&(e=0),f===void 0&&(f=0),this.columnCount=s,this.rowCount=t,this.gridCount=s*t,this.sizerChildren===void 0?this.sizerChildren=[]:this.removeAll(),this.sizerChildren.length=s*t,$r(this.sizerChildren,null),this.columnProportions=[],this.columnProportions.length=s,typeof e=="number")$r(this.columnProportions,e);else for(var n=0;n<s;n++)this.columnProportions[n]=e[n]||0;if(this.rowProportions=[],this.rowProportions.length=t,typeof f=="number")$r(this.rowProportions,f);else for(var n=0;n<t;n++)this.rowProportions[n]=f[n]||0;this.columnWidth=[],this.columnWidth.length=s,this.rowHeight=[],this.rowHeight.length=t,this.space.column=[],this.space.column.length=s-1;var h=xx(i,"column",0);if(typeof h=="number")$r(this.space.column,h);else for(var n=0,r=this.space.column.length;n<r;n++)this.space.column[n]=h[n]||0;this.space.row=[],this.space.row.length=t-1;var a=xx(i,"row",0);if(typeof a=="number")$r(this.space.row,a);else for(var n=0,r=this.space.row.length;n<r;n++)this.space.row[n]=a[n]||0;return this},GT=function(s,t,e){t===void 0&&(t=this.rowProportions[0]||0),e===void 0&&(e=this.space.row[0]||0),this.rowCount+=1,this.gridCount+=this.columnCount;for(var f=[s*this.columnCount,0],i=0;i<this.columnCount;i++)f.push(null);return this.sizerChildren.splice.apply(this.sizerChildren,f),this.rowProportions.push(t),this.rowHeight.length+=1,this.space.row.splice(s,0,e),this},Rz=function(s,t){return GT.call(this,this.rowCount,s,t),this},NT=function(s,t,e){t===void 0&&(t=this.columnProportions[0]||0),e===void 0&&(e=this.space.column[0]||0),this.columnCount+=1,this.gridCount+=this.rowCount;for(var f=this.rowCount-1;f>=0;f--){var i=f*this.columnCount+s;this.sizerChildren.splice(i,0,null)}return this.columnProportions.push(t),this.columnWidth.length+=1,this.space.column.splice(s,0,e),this},Lz=function(s,t){return NT.call(this,this.columnCount,s,t),this},YT={getChildrenWidth:dz,getChildrenHeight:cz,getExpandedChildWidth:vz,getExpandedChildHeight:pz,getChildrenSizers:gz,preLayout:mz,layoutChildren:xz,resolveWidth:yz,resolveHeight:Tz,resolveChildrenWidth:Cz,runWidthWrap:Sz,resetGrid:Oz,inseryEmptyRow:GT,addEmptyRow:Rz,insertEmptyColumn:NT,addEmptyColumn:Lz};Object.assign(YT,Mz,Az);var Fz=function(){for(var s=0,t,e=0;e<this.columnCount;e++)t=this.columnProportions[e],t>0&&(s+=t);return s},wz=function(){for(var s=0,t,e=0;e<this.rowCount;e++)t=this.rowProportions[e],t>0&&(s+=t);return s};const Gh=Phaser.Utils.Objects.IsPlainObject,oe=Phaser.Utils.Objects.GetValue;class hs extends fr{constructor(t,e,f,i,n,h,r,a,l,o){Gh(e)?(o=e,e=oe(o,"x",0),f=oe(o,"y",0),i=oe(o,"width",void 0),n=oe(o,"height",void 0),h=oe(o,"column",o.col||0),r=oe(o,"row",0),a=oe(o,"columnProportions",0),l=oe(o,"rowProportions",0)):Gh(i)?(o=i,i=oe(o,"width",void 0),n=oe(o,"height",void 0),h=oe(o,"column",o.col||0),r=oe(o,"row",0),a=oe(o,"columnProportions",0),l=oe(o,"rowProportions",0)):Gh(h)?(o=h,h=oe(o,"column",o.col||0),r=oe(o,"row",0),a=oe(o,"columnProportions",0),l=oe(o,"rowProportions",0)):Gh(a)&&(o=a,a=oe(o,"columnProportions",0),l=oe(o,"rowProportions",0)),super(t,e,f,i,n,o),this.type="rexGridSizer",this.resetGrid(h,r,a,l,oe(o,"space",void 0)),this.setIndentLeft(oe(o,"space.indentLeftOdd",0),oe(o,"space.indentLeftEven",0)),this.setIndentTop(oe(o,"space.indentTopOdd",0),oe(o,"space.indentTopEven",0)),this.addChildrenMap("items",this.sizerChildren);var u=oe(o,"createCellContainerCallback");if(u)for(var f=0,v=this.rowCount;f<v;f++)for(var e=0,d=this.columnCount;e<d;e++){var c={column:e,row:f},p=u(t,e,f,c);p&&this.add(p,c)}}destroy(t){!this.scene||(super.destroy(t),this.columnProportions=void 0,this.rowProportions=void 0,this.columnWidth=void 0,this.rowHeight=void 0)}setIndentLeft(t,e){return this.space.indentLeftOdd=t,this.space.indentLeftEven=e,this}setIndentTop(t,e){return this.space.indentTopOdd=t,this.space.indentTopEven=e,this}setColumnProportion(t,e){return t>=this.columnProportions.length?this:(this.columnProportions[t]=e,this)}setRowProportion(t,e){return t>=this.rowProportions.length?this:(this.rowProportions[t]=e,this)}get totalColumnProportions(){return this._totalColumnProportions===void 0&&(this._totalColumnProportions=Fz.call(this)),this._totalColumnProportions}get totalRowProportions(){return this._totalRowProportions===void 0&&(this._totalRowProportions=wz.call(this)),this._totalRowProportions}getChildAt(t,e){return this.sizerChildren[e*this.columnCount+t]}childToGridIndex(t,e){if(!t)return null;var f=this.sizerChildren.indexOf(t);return f===-1?null:(e===void 0&&(e={}),e.x=f%this.columnCount,e.y=Math.floor(f/this.columnCount),e)}getColumnWidth(t){var e=this.columnProportions[t],f=e===0?this.columnWidth[t]:e*this.proportionWidthLength;return f}getRowHeight(t){var e=this.rowProportions[t],f=e===0?this.rowHeight[t]:e*this.proportionHeightLength;return f}}Object.assign(hs.prototype,YT);xt.register("gridSizer",function(s,t,e,f,i,n,h,r,a){var l=new hs(this.scene,s,t,e,f,i,n,h,r,a);return this.scene.add.existing(l),l});Ct(window,"RexPlugins.UI.GridSizer",hs);var Iz=function(){return this.rexSizer.hidden?0:this.maxChildWidth+this.space.left+this.space.right},Dz=function(){return this.rexSizer.hidden?0:this.widthWrapResult.height+this.space.top+this.space.bottom},Bz=function(s){s===void 0&&(s=[]);for(var t=this.sizerChildren,e,f=0,i=t.length;f<i;f++)e=t[f],e!==`
`&&e.isRexSizer&&s.push(e);return s},bz=function(){return this._maxChildWidth=void 0,this._maxChildHeight=void 0,So.call(this),this},Gz=function(){for(var s=this.innerWidth,t=this.justifyPercentage,e=this.space.item,f=this.space.line,i=this.space.indentLeftOdd,n=this.space.indentLeftEven,h=this.space.indentTopOdd,r=this.space.indentTopEven,a,l,o,u=0,v,d,c=this.innerLeft,p=this.innerTop,g,m,x,y,T=this.widthWrapResult.lines,C,S,E,M,O=p,L=0,R=T.length;L<R;L++){switch(C=T[L],S=C.children,this.rtl&&S.reverse(),v=L%2?n:i,M=c+v,E=s-C.width,this.align){case 0:break;case 1:M+=E;break;case 2:M+=E/2;break;case 3:u=ed(s,E,t,S.length);break;case 4:u=ed(s,E,t,S.length),u===0&&(M+=E);break;case 5:u=ed(s,E,t,S.length),u===0&&(M+=E/2);break}for(var F=0,D=S.length;F<D;F++)a=S[F],!a.rexSizer.hidden&&(l=a.rexSizer,o=l.padding,Eo.call(this,a),g=M+o.left,F>0&&(g+=e),d=F%2?r:h,m=O+d+o.top,x=ne(a),y=Qt(a),M=g+x+o.right+u,Po.call(this,a,g,m,x,y,l.align));O+=C.height+f}},ed=function(s,t,e,f){return t/s<=e?t/(f-1):0},Nz=function(s,t){t===void 0?t={lines:[],width:0,height:0}:(t.lines.length=0,t.width=0,t.height=0);for(var e=this.sizerChildren,f=this.space.item,i=this.space.line,n=this.space.indentLeftOdd,h=this.space.indentLeftEven,r=this.space.indentTopOdd,a=this.space.indentTopEven,l,o,u,v=0,d,c=t.lines,p=void 0,g,m=0,x=e.length;m<x;m++){if(l=e[m],l===`
`)l=void 0,o=0,g=!0;else{if(l.rexSizer.hidden)continue;l.isRexSizer&&l.layout(),o=Yz(l),g=v<o||p===void 0}if(g){p&&(p.width=s-(v+f),t.width=Math.max(t.width,p.width),t.height+=p.height+i),p={children:[],height:0},c.push(p);var d=c.length%2?n:h;v=s-d}v-=o+f,l&&(p.children.push(l),u=zz(l),p.height=Math.max(p.height,u))}return p&&(p.width=s-(v+f),t.width=Math.max(t.width,p.width),t.height+=p.height),t.height+=Math.max(r,a),t},Yz=function(s){var t=s.rexSizer.padding;return ne(s)+t.left+t.right},zz=function(s){var t=s.rexSizer.padding;return Qt(s)+t.top+t.bottom},Vz=function(s){var t=s-this.space.left-this.space.right;this.widthWrapResult=Nz.call(this,t,this.widthWrapResult),mT.call(this,s)};const yx=Phaser.Math.Distance.Between;var Uz=function(s,t){var e=this.sizerChildren;if(e.length===0)return-1;for(var f=-1,i=1/0,n=0,h=e.length;n<h;n++){var r=e[n];if(!(Math.abs(r.centerY-t)>r.height/2)){var l=yx(r.left,r.centerY,s,t);i>l&&(i=l,f=n);var a=e[n+1];if(!(a&&a.y===r.y)){var l=yx(r.right,r.centerY,s,t);i>l&&(i=l,f=n+1)}}}return f};const Wz=Phaser.Utils.Objects.IsPlainObject,id=Phaser.Utils.Objects.GetValue,Xz=Phaser.Display.Align.CENTER;var nd=function(s,t,e,f){if(s===`
`)return this.addNewLine(),this;if(Co.call(this,s),Wz(t)){var i=t;t=id(i,"padding",0),e=id(i,"key",void 0),f=id(i,"index",void 0)}t===void 0&&(t=0);var i=this.getSizerConfig(s);return i.align=Xz,i.padding=aa(t),f===void 0||f>=this.sizerChildren.length?this.sizerChildren.push(s):this.sizerChildren.splice(f,0,s),e!==void 0&&this.addChildrenMap(e,s),this},Hz={add(s,t,e){if(xn(s))for(var f=s,i=0,n=f.length;i<n;i++)nd.call(this,f[i],t);else nd.call(this,s,t,e);return this},addNewLine(){return this.sizerChildren.push(`
`),this},insert(s,t,e,f){return nd.call(this,t,e,f,s),this},insertAtPosition(s,t,e,f,i){var n=Uz.call(this,s,t);return n===-1&&(n=void 0),this.insert(n,e,f,i),this}};const $z=Phaser.Utils.Array.Remove;var Kz={remove(s,t){return this.getParentSizer(s)!==this?this:($z(this.sizerChildren,s),Wl.call(this,s,t),this)},removeAll(s){for(var t=this.sizerChildren.length-1;t>=0;t--)this.remove(this.sizerChildren[t],s);return this},clear(s){return this.sizerChildren.length=0,Xl.call(this,s),this}},zT={getChildrenWidth:Iz,getChildrenHeight:Dz,getChildrenSizers:Bz,preLayout:bz,layoutChildren:Gz,runWidthWrap:Vz};Object.assign(zT,Hz,Kz);var kz=function(s){s===void 0&&(s=this.sizerChildren);for(var t=0,e,f,i=0,n=s.length;i<n;i++)e=s[i],e!==`
`&&(f=this.getChildWidth(e),t=Math.max(f,t));return t},Zz=function(s){s===void 0&&(s=this.sizerChildren);for(var t=0,e,f,i=0,n=s.length;i<n;i++)e=s[i],e!==`
`&&(f=e.isRexSizer?Math.max(e.minHeight,e.childrenHeight):e.hasOwnProperty("minHeight")?e.minHeight:Qt(e),t=Math.max(f,t));return t};const Tx=Phaser.Utils.Objects.IsPlainObject,Qe=Phaser.Utils.Objects.GetValue;class zs extends fr{constructor(t,e,f,i,n,h){Tx(e)?(h=e,e=Qe(h,"x",0),f=Qe(h,"y",0),i=Qe(h,"width",void 0),n=Qe(h,"height",void 0)):Tx(i)&&(h=i,i=Qe(h,"width",void 0),n=Qe(h,"height",void 0)),super(t,e,f,i,n,h),this.type="rexFixWidthSizer",this.sizerChildren=[],this.setOrientation(Qe(h,"orientation",0)),this.setItemSpacing(Qe(h,"space.item",0)),this.setLineSpacing(Qe(h,"space.line",0)),this.setIntentLeft(Qe(h,"space.indentLeftOdd",0),Qe(h,"space.indentLeftEven",0)),this.setIntentTop(Qe(h,"space.indentTopOdd",0),Qe(h,"space.indentTopEven",0)),this.setAlign(Qe(h,"align",0)),this.setJustifyPercentage(Qe(h,"justifyPercentage",.25)),this.setRTL(Qe(h,"rtl",!1)),this.addChildrenMap("items",this.sizerChildren)}setOrientation(t){return this.orientation=rv(t),this}setItemSpacing(t){return this.space.item=t,this}setLineSpacing(t){return this.space.line=t,this}setIntentLeft(t,e){return this.space.indentLeftOdd=t,this.space.indentLeftEven=e,this}setIntentTop(t,e){return this.space.indentTopOdd=t,this.space.indentTopEven=e,this}setAlign(t){return typeof t=="string"&&(t=Jz[t]),this.align=t,this}setJustifyPercentage(t){return this.justifyPercentage=t,this}setRTL(t){return t===void 0&&(t=!0),this.rtl=t,this}get maxChildWidth(){return this._maxChildWidth===void 0&&(this._maxChildWidth=kz.call(this)),this._maxChildWidth}get maxChildHeight(){return this._maxChildHeight===void 0&&(this._maxChildHeight=Zz.call(this)),this._maxChildHeight}}const Jz={left:0,top:0,right:1,bottom:1,center:2,justify:3,"justify-left":3,"justify-top":3,"justify-right":4,"justify-bottom":4,"justify-center":5};Object.assign(zs.prototype,zT);xt.register("fixWidthSizer",function(s,t,e,f,i){var n=new zs(this.scene,s,t,e,f,i);return this.scene.add.existing(n),n});Ct(window,"RexPlugins.UI.FixWidthSizer",zs);xt.register("overlapSizer",function(s,t,e,f,i){var n=new yn(this.scene,s,t,e,f,i);return this.scene.add.existing(n),n});Ct(window,"RexPlugins.UI.OverlapSizer",yn);xt.register("space",function(){var s=new kl(this.scene);return s});Ct(window,"RexPlugins.UI.Space",kl);var ho=function(s,t,e,f){var i=new Kd(t,e,f);if(s&&!s.isRexSizer){var n=i.createGeometryMask();s.setMask(n),this.once("destroy",function(){s.setMask(),n.destroy()})}return this.pin(i),i};const un=Phaser.Utils.Objects.GetValue;class ha extends Te{constructor(t,e){super(t,e),this.type="rexLabel";var f=un(e,"background",void 0),i=un(e,"icon",void 0),n=un(e,"iconMask",void 0),h=un(e,"text",void 0),r=un(e,"action",void 0),a=un(e,"actionMask",void 0),l=un(e,"align",void 0),o=un(e,"space.icon",0),u=un(e,"space.text",0);if(f&&this.addBackground(f),(l==="right"||l==="bottom"||l==="center")&&this.addSpace(),i){var v;this.orientation===0?(h||r)&&(v={right:o}):(h||r)&&(v={bottom:o}),this.add(i,{proportion:0,padding:v}),n&&(n=ho.call(this,i,i,1))}if(h){var d=un(e,"expandTextWidth",!1),c=un(e,"expandTextHeight",!1),p,v,g;this.orientation===0?(p=d?1:0,r&&(v={right:u}),g=c):(p=c?1:0,r&&(v={bottom:u}),g=d),this.add(h,{proportion:p,expand:g,padding:v})}r&&(this.add(r),a&&(a=ho.call(this,r,r,1))),l==="center"&&this.addSpace(),this.addChildrenMap("background",f),this.addChildrenMap("icon",i),this.addChildrenMap("iconMask",n),this.addChildrenMap("text",h),this.addChildrenMap("action",r),this.addChildrenMap("actionMask",a)}get text(){var t=this.childrenMap.text;return t===void 0?"":t.text}set text(t){var e=this.childrenMap.text;e!==void 0&&e.setText(t)}setText(t){return this.text=t,this}appendText(t){return this.text+=t,this}setTexture(t,e){var f=this.childrenMap.icon;if(f!==void 0)return f.setTexture(t,e),this}get texture(){var t=this.childrenMap.icon;if(t!==void 0)return t.texture}get frame(){var t=this.childrenMap.icon;if(t!==void 0)return t.frame}runLayout(t,e,f){if(this.ignoreLayout)return this;super.runLayout(t,e,f);var i=this.childrenMap.iconMask;i&&(i.setPosition(),this.resetChildPositionState(i));var n=this.childrenMap.actionMask;return n&&(n.setPosition(),this.resetChildPositionState(n)),this}resize(t,e){super.resize(t,e);var f=this.childrenMap.iconMask;f&&f.resize();var i=this.childrenMap.actionMask;return i&&i.resize(),this}}xt.register("label",function(s){var t=new ha(this.scene,s);return this.scene.add.existing(t),t});Ct(window,"RexPlugins.UI.Label",ha);const Nh=Te.prototype.add,Cx=Te.prototype.addSpace;var sd=function(s){var t=!s.isRexSpace,e=!t||this.buttonsExpand?1:0;if(this.sizerChildren.length===0)if(t){var f=!this.buttonsExpand&&(this.buttonsAlign==="right"||this.buttonsAlign==="center"||this.buttonsAlign==="bottom");f&&Cx.call(this),Nh.call(this,s,{proportion:e,expand:!0});var i=!this.buttonsExpand&&this.buttonsAlign==="center";i&&Cx.call(this),this.hasTailSpace=i}else Nh.call(this,s,{proportion:e,expand:!0}),this.hasTailSpace=!1;else if(this.hasTailSpace){var n=this.sizerChildren.length-1;Nh.call(this,s,{index:n,proportion:e,expand:!0})}else Nh.call(this,s,{proportion:e,expand:!0});return t&&this.buttonGroup.add(s),this},Qz={addButton(s){if(xn(s))for(var t=s,e=0,f=t.length;e<f;e++)sd.call(this,t[e]);else sd.call(this,s);return this},addButtons(s){for(var t=0,e=s.length;t<e;t++)sd.call(this,s[t]);return this}};const jz=Te.prototype.remove,qz=Te.prototype.clear;var rd=function(s,t){return this.getParentSizer(s)!==this?this:(this.buttonGroup.remove(s),jz.call(this,s,t),this)},_z={remove(s,t){if(xn(s))for(var e=s,f=0,i=e.length;f<i;f++)rd.call(this,e[f],t);else rd.call(this,s,t);return this},clear(s){var t=this.buttonGroup.buttons;return t.length=0,qz.call(this,s),this},removeButton(e,t){var e=this.getButton(e);return e?(this.remove(e,t),this):this},clearButtons(s){for(var t=this.buttonGroup.buttons,e=t.length-1;e>=0;e--)rd.call(this,t[e],s);return this}},tV={add(s){if(this.buttons.push(s),this.buttonsType){var t=s.name;t===""?console.error(`${this.parent.constructor.name}: Button key is an empty string`):this.buttonMap.hasOwnProperty(t)&&console.error(`${this.parent.constructor.name}: Duplicate button key '${t}'`),this.buttonMap[t]=s,this.dataManager.set(t,void 0).set(t,!1)}return s._buttonBehavior=new oa(s,this.clickConfig),s._buttonBehavior.on("click",function(e,f,i,n){this.fireEvent("button.click",f,i,n)},this).on("enable",function(e,f){this.fireEvent("button.enable",f)},this).on("disable",function(e,f){this.fireEvent("button.disable",f)},this),s.on("pointerover",function(e,f,i,n){this.fireEvent("button.over",s,e,n)},this).on("pointerout",function(e,f){this.fireEvent("button.out",s,e,f)},this),this},addMultiple(s){for(var t=0,e=s.length;t<e;t++)this.add(gameObject[t]);return this}};const eV=Phaser.Utils.Array.Remove;var iV={remove(s){if(eV(this.buttons,s),this.buttonsType){var t=s.name;delete this.buttonMap[t],this.dataManager.remove(t)}return this},clear(){if(this.buttons.length=0,this.buttonsType)for(var s in this.buttonMap)delete this.buttonMap[s],this.dataManager.remove(s);return this}},nV=function(s,t,...e){var f;if(typeof t=="number"){if(f=t,t=this.buttons[f],!t)return}else if(f=this.buttons.indexOf(t),f===-1)return;this.eventEmitter!==this.parent&&this.parent.emit(s,t,f,...e),this.groupName!==void 0?this.eventEmitter.emit(s,t,this.groupName,f,...e):this.eventEmitter.emit(s,t,f,...e)};const Kr=Phaser.Utils.Objects.GetValue;var Sx=function(s){var t=Kr(s,"dataManager",void 0);if(t===void 0){var e=this.parent;e.setDataEnabled(),t=e.data}this.dataManager=t;var f,i;f=Kr(s,"setValueCallback",void 0),i=Kr(s,"setValueCallbackScope",void 0),f===void 0&&(f=Kr(s,"setButtonStateCallback",void 0),i=Kr(s,"setButtonStateCallbackScope",void 0)),this.setValueCallback=f,this.setValueCallbackScope=i,t.events.on("changedata",function(n,h,r,a){var l=this.buttonMap[h];if(!!l){var o=this.setValueCallback,u=this.setValueCallbackScope;o&&(u?o.call(u,l,r,a):o(l,r,a)),this.fireEvent("button.statechange",l,r,a)}},this)},sV={setButtonsType(s){s===void 0&&(s={});var t=Kr(s,"buttonsType",s.type);switch(this.buttonsType=t,t){case"radio":this.setRadioType(s);break;case"checkboxes":this.setCheckboxesType(s);break}return this},setRadioType(s){Sx.call(this,s);var t=void 0,e=this.parent,f=this.buttons,i=this.dataManager;return Object.defineProperty(e,"value",{get:function(){return t},set:function(n){n!==t&&(t=n,f.forEach(function(h){var r=h.name,a=i.get(r);r===n?a||i.set(r,!0):a&&i.set(r,!1)}))},enumerable:!0,configurable:!0}),e.on("button.click",function(n){e.value=n.name}),this},setCheckboxesType(s){Sx.call(this,s);var t=this.parent,e=this.dataManager;return t.on("button.click",function(f){e.toggle(f.name)}),this},clearAllButtonsState(){for(var s in this.buttonMap)this.dataManager.set(s,!1);return this},getAllButtonsState(){var s={};for(var t in this.buttonMap)s[t]=this.dataManager.get(t);return s},setSelectedButtonName(s){return this.parent.value=s,this},getSelectedButtonName(){return this.parent.value},setButtonState(s,t){return t===void 0&&(t=!0),this.dataManager.set(s,t),this},getButtonState(s){return this.dataManager.get(s)}},rV=function(s,t){if(s)if(xn(s)){for(var e,f=0,i=s.length;f<i;f++)if(e=Ex(s[f],t),e)return e}else{var e;for(var n in s)if(e=Ex(s[n],t),e)return e}else return null},Ex=function(s,t){return s?s.hasOwnProperty("name")?s.name===t?s:null:GetElementByName(s,t):null},Zl={getButton(s){var t=this.buttons,e,f=typeof s;switch(f){case"number":e=t[s];break;case"string":e=rV(t,s);break;default:e=s,t.indexOf(e)===-1&&(e=void 0);break}return e},setButtonEnable(s,t){var e=this.buttons;if(s===void 0||typeof s=="boolean"){t=s;for(var f=0,i=e.length;f<i;f++)e[f]._buttonBehavior.setEnable(t)}else this.getButton(s)._buttonBehavior.setEnable(t);return this},toggleButtonEnable(s){var t=this.buttons;if(s===void 0||typeof s=="boolean")for(var e=0,f=t.length;e<f;e++)t[e]._buttonBehavior.toggleEnable();else this.getButton(s)._buttonBehavior.toggleEnable();return this},getButtonEnable(s){return s===void 0&&(s=0),this.getButton(s)._buttonBehavior.enable},emitButtonClick(s){var t=this.buttonGroup?this.buttonGroup:this;return t.fireEvent("button.click",s),this},showButton(s){return Ms(this.getButton(s)),this},hideButton(s){return As(this.getButton(s)),this},isButtonShown(s){return Hc(this.getButton(s)),this},forEachButtton(s,t){for(var e=this.buttons,f=0,i=e.length;f<i;f++)t?s.call(t,e[f],f,e):s(e[f],f,e);return this}};class Jl{constructor(t){this.parent=t.parent,this.eventEmitter=t.eventEmitter,this.groupName=t.groupName,this.clickConfig=t.clickConfig,this.buttonsType=void 0,this.buttons=[],this.buttonMap={}}destroy(){this.parent=void 0,this.eventEmitter=void 0,this.clickConfig=void 0,this.buttons=void 0}}var aV={fireEvent:nV};Object.assign(Jl.prototype,tV,iV,sV,Zl,aV);var av={clearAllButtonsState(){return this.buttonGroup.clearAllButtonsState(),this},getAllButtonsState(){return this.buttonGroup.getAllButtonsState()},setSelectedButtonName(s){return this.buttonGroup.setSelectedButtonName(s),this},getSelectedButtonName(){return this.buttonGroup.getSelectedButtonName()},setButtonState(s,t){return this.buttonGroup.setButtonState(s,t),this},getButtonState(s){return this.buttonGroup.getButtonState(s)}};const nr=Phaser.Utils.Objects.GetValue;class Ve extends Te{constructor(t,e){e===void 0&&(e={});var f=e.space;typeof f=="number"&&(e.space={item:f}),super(t,e),this.type="rexButtons",this.buttonGroup=new Jl({parent:this,eventEmitter:nr(e,"eventEmitter",this),groupName:nr(e,"groupName",void 0),clickConfig:nr(e,"click",void 0)}).setButtonsType(e);var i=nr(e,"background",void 0),n=nr(e,"buttons",void 0);this.buttonsExpand=nr(e,"expand",!1),this.buttonsAlign=nr(e,"align",void 0),i&&this.addBackground(i),n&&this.addButtons(n),this.addChildrenMap("background",i),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(t){!this.scene||(super.destroy(t),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(t){this.buttonGroup.groupName=t}get eventEmitter(){return this.buttonGroup.eventEmitter}}Object.assign(Ve.prototype,Qz,_z,Zl,av);xt.register("buttons",function(s){var t=new Ve(this.scene,s);return this.scene.add.existing(t),t});Ct(window,"RexPlugins.UI.Buttons",Ve);const oV=hs.prototype.add;var hV={addButton(s,t,e){return oV.call(this,s,t,e,void 0,0,this.buttonsExpand),this.buttonGroup.add(s),this},addButtons(s,t){for(var e=0,f=s;e<f;e++)this.addButton(s[e],void 0,t);return this}};const lV=hs.prototype.remove,uV=hs.prototype.clear;var ad=function(e,t){var e=this.getButton(e);return e?(this.buttonGroup.remove(e),lV.call(this,e,t),this):this},fV={remove(s,t){if(xn(s))for(var e=s,f=0,i=e.length;f<i;f++)ad.call(this,e[f],t);else ad.call(this,s,t);return this},clear(s){var t=this.buttonGroup.buttons;return t.length=0,uV.call(this,s),this},removeButton(s,t){return this.remove(s,t),this},clearButtons(s){for(var t=this.buttonGroup.buttons,e=t.length-1;e>=0;e--)ad.call(this,t[e],s);return this}};const On=Phaser.Utils.Objects.GetValue;class Ao extends hs{constructor(t,e){e===void 0&&(e={});var f=On(e,"row",0),i=On(e,"column",e.col||0),n=On(e,"createCellContainerCallback"),h=On(e,"buttons",void 0),r=On(e,"expand",!0),a=r?1:0;if(n&&(e.createCellContainerCallback=void 0),h!==void 0){f=Math.max(f,h.length);for(var l=0,o=h.length;l<o;l++)i=Math.max(i,h[l].length)}e.row=f,e.column=i,e.columnProportions=a,e.rowProportions=a,super(t,e),this.type="rexGridButtons",this.buttonGroup=new Jl({parent:this,eventEmitter:On(e,"eventEmitter",this),groupName:On(e,"groupName",void 0),clickConfig:On(e,"click",void 0)}).setButtonsType(e);var u=On(e,"background",void 0);if(this.buttonsExpand=r,On(e,"space",void 0),u&&this.addBackground(u),h)for(var v,d,c=0,p=h.length;c<p;c++){v=h[c];for(var g=0,m=v.length;g<m;g++)d=v[g],d&&this.addButton(d,g,c)}else if(n)for(var x=0;x<f;x++)for(var y=0;y<i;y++){var d=n(t,y,x);d&&this.addButton(d,y,x)}this.addChildrenMap("background",u),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(t){!this.scene||(super.destroy(t),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(t){this.buttonGroup.groupName=t}get eventEmitter(){return this.buttonGroup.eventEmitter}}Object.assign(Ao.prototype,hV,fV,Zl,av);xt.register("gridButtons",function(s){var t=new Ao(this.scene,s);return this.scene.add.existing(t),t});Ct(window,"RexPlugins.UI.GridButtons",Ao);const VT=zs.prototype.add;var Yh=function(s){return VT.call(this,s),this.buttonGroup.add(s),this},dV={addButton(s){if(xn(s))for(var t=s,e=0,f=t.length;e<f;e++)Yh.call(this,t[e]);else Yh.call(this,s);return this},addButtons(s){if(xn(s[0]))for(var t=s,e,f=0,i=t.length-1;f<=i;f++){e=t[f];for(var n=0,h=e.length;n<h;n++)Yh.call(this,e[n]);f>i&&VT.addNewLine(this)}else for(var n=0,h=s.length;n<h;n++)Yh.call(this,s[n]);return this}};const cV=zs.prototype.remove,vV=zs.prototype.clear;var od=function(e,t){var e=this.getButton(e);return e?(this.buttonGroup.remove(e),cV.call(this,e,t),this):this},pV={remove(s,t){if(xn(s))for(var e=s,f=0,i=e.length;f<i;f++)od.call(this,e[f],t);else od.call(this,s,t);return this},clear(s){var t=this.buttonGroup.buttons;return t.length=0,vV.call(this,s),this},removeButton(s,t){return this.remove(s,t),this},clearButtons(s){for(var t=this.buttonGroup.buttons,e=t.length-1;e>=0;e--)od.call(this,t[e],s);return this}};const Vr=Phaser.Utils.Objects.GetValue;class Gs extends zs{constructor(t,e){e===void 0&&(e={});var f=e.space;typeof f=="number"&&(e.space={item:f,line:f}),super(t,e),this.type="rexFixWidthButtons",this.buttonGroup=new Jl({parent:this,eventEmitter:Vr(e,"eventEmitter",this),groupName:Vr(e,"groupName",void 0),clickConfig:Vr(e,"click",void 0)}).setButtonsType(e);var i=Vr(e,"background",void 0),n=Vr(e,"buttons",void 0);this.buttonsAlign=Vr(e,"align",void 0),i&&this.addBackground(i),n&&this.addButtons(n),this.addChildrenMap("background",i),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(t){!this.scene||(super.destroy(t),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(t){this.buttonGroup.groupName=t}get eventEmitter(){return this.buttonGroup.eventEmitter}}Object.assign(Gs.prototype,dV,pV,Zl,av);xt.register("fixWidthButtons",function(s){var t=new Gs(this.scene,s);return this.scene.add.existing(t),t});Ct(window,"RexPlugins.UI.FixWidthButtons",Gs);var gV={getChoice(s){var t=this.childrenMap.choicesSizer;if(t)return t.getButton(s)},getAction(s){return this.childrenMap.actionsSizer.getButton(s)},getToolbar(s){return this.childrenMap.toolbarSizer.getButton(s)},getLeftToolbar(s){return this.childrenMap.leftToolbarSizer.getButton(s)},setChoiceEnable(s,t){var e=this.childrenMap.choicesSizer;return e&&e.setButtonEnable(s,t),this},setActionEnable(s,t){return this.childrenMap.actionsSizer.setButtonEnable(s,t),this},setToolbarEnable(s,t){return this.childrenMap.toolbarSizer.setButtonEnable(s,t),this},setLeftToolbarEnable(s,t){return this.childrenMap.leftToolbarSizer.setButtonEnable(s,t),this},toggleChoiceEnable(s){var t=this.childrenMap.choicesSizer;return t&&t.toggleButtonEnable(s),this},toggleActionEnable(s){return this.childrenMap.actionsSizer.toggleButtonEnable(s),this},toggleToolbarEnable(s){return this.childrenMap.toolbarSizer.toggleButtonEnable(s),this},toggleLeftToolbarEnable(s){return this.childrenMap.leftToolbarSizer.toggleButtonEnable(s),this},getChoiceEnable(s){var t=this.childrenMap.choicesSizer;return t?t.getButtonEnable(s):!1},getActionEnable(s){return this.childrenMap.actionsSizer.getButtonEnable(s)},getToolbarEnable(s){return this.childrenMap.toolbarSizer.getButtonEnable(s)},getLeftToolbarEnable(s){return this.childrenMap.leftToolbarSizer.getButtonEnable(s)},emitChoiceClick(s){var t=this.childrenMap.choicesSizer;return t&&t.emitButtonClick(s),this},emitActionClick(s){return this.childrenMap.actionsSizer.emitButtonClick(s),this},emitToolbarClick(s){return this.childrenMap.toolbarSizer.emitButtonClick(s),this},emitLeftToolbarClick(s){return this.childrenMap.leftToolbarSizer.emitButtonClick(s),this},showChoice(s){var t=this.childrenMap.choicesSizer;return t&&t.showButton(s),this},showAction(s){return this.childrenMap.actionsSizer.showButton(s),this},showToolbar(s){return this.childrenMap.toolbarSizer.showButton(s),this},showLeftToolbar(s){return this.childrenMap.leftToolbarSizer.showButton(s),this},hideChoice(s){var t=this.childrenMap.choicesSizer;return t&&t.hideButton(s),this},hideAction(s){return this.childrenMap.actionsSizer.hideButton(s),this},hideToolbar(s){return this.childrenMap.toolbarSizer.hideButton(s),this},hideLeftToolbar(s){return this.childrenMap.leftToolbarSizer.hideButton(s),this},addChoice(s){var t=this.childrenMap.choicesSizer;return t&&t.addButton(s),this},addAction(s){return this.childrenMap.actionsSizer.addButton(s),this},addToolbar(s){return this.childrenMap.toolbarSizer.addButton(s),this},addLeftToolbar(s){return this.childrenMap.leftToolbarSizer.addButton(s),this},removeChoice(s,t){var e=this.childrenMap.choicesSizer;return e&&e.removeButton(s,t),this},removeAction(s,t){return this.childrenMap.actionsSizer.removeButton(s,t),this},removeToolbar(s,t){return this.childrenMap.toolbarSizer.removeButton(s,t),this},removeLeftToolbar(s,t){return this.childrenMap.leftToolbarSizer.removeButton(s,t),this},clearChoices(s){var t=this.childrenMap.choicesSizer;return t&&t.clearButtons(s),this},clearActions(s){return this.childrenMap.actionsSizer.clearButtons(s),this},clearToolbar(s){return this.childrenMap.toolbarSizer.clearButtons(s),this},clearLeftToolbar(s){return this.childrenMap.leftToolbarSizer.clearButtons(s),this},forEachChoice(s,t){var e=this.childrenMap.choicesSizer;return e&&e.forEachButtton(s,t),this},forEachAction(s,t){return this.childrenMap.actionsSizer.forEachButtton(s,t),this},forEachToolbar(s,t){return this.childrenMap.toolbarSizer.forEachButtton(s,t),this},forEachLeftToolbar(s,t){return this.childrenMap.leftToolbarSizer.forEachButtton(s,t),this},setAllButtonsEnable(s){return s===void 0&&(s=!0),this.childrenMap.toolbarSizer&&this.setToolbarEnable(s),this.childrenMap.leftToolbarSizer&&this.setLeftToolbarEnable(s),this.childrenMap.actionsSizer&&this.setActionEnable(s),this.childrenMap.choicesSizer&&this.setChoiceEnable(s),this},getChoicesButtonStates(){var s=this.childrenMap.choicesSizer;return s?s.getAllButtonsState():{}},getChoicesButtonState(s){var t=this.childrenMap.choicesSizer;return s===void 0?t?t.getAllButtonsState():{}:t?t.getButtonState(s):!1},setChoicesButtonState(s,t){var e=this.childrenMap.choicesSizer;return e&&e.setButtonState(s,t),this},clearChoicesButtonStates(){var s=this.childrenMap.choicesSizer;return s&&s.clearAllButtonsState(),this},getChoicesSelectedButtonName(){var s=this.childrenMap.choicesSizer;return s?s.getSelectedButtonName():""},setChoicesSelectedButtonName(s){var t=this.childrenMap.choicesSizer;return t&&t.setSelectedButtonName(s),this}};const Rt=Phaser.Utils.Objects.GetValue;class Ql extends Te{constructor(t,e){e===void 0&&(e={}),e.orientation=1,super(t,e),this.type="rexDialog",this.eventEmitter=Rt(e,"eventEmitter",this);var f=Rt(e,"background",void 0),i=Rt(e,"title",void 0),n=Rt(e,"toolbar",void 0),h=Rt(e,"toolbarBackground",void 0),r=Rt(e,"leftToolbar",void 0),a=Rt(e,"leftToolbarBackground",void 0),l=Rt(e,"content",void 0),o=Rt(e,"description",void 0),u,v=Rt(e,"choices",void 0),d=Rt(e,"choicesBackground",void 0),c,p=Rt(e,"actions",void 0),g=Rt(e,"actionsBackground",void 0),m=Rt(e,"click",void 0);f&&this.addBackground(f);var x;n&&(x=new Ve(t,{groupName:"toolbar",background:h,buttons:n,orientation:0,space:{item:Rt(e,"space.toolbarItem",0)},click:m,eventEmitter:this.eventEmitter}));var y;if(r&&(y=new Ve(t,{groupName:"leftToolbar",background:a,buttons:r,orientation:0,space:{item:Rt(e,"space.leftToolbarItem",0)},click:m,eventEmitter:this.eventEmitter})),i||n||r){var T=!!i&&Rt(e,"expand.title",!0),C=Rt(e,"align.title","center"),S=i&&!T&&C==="center"||!i&&(n||r),E=!S,M;E?M=new Te(t,{orientation:0}):M=new yn(t);var O=E?!0:{height:!0};if(y&&M.add(y,{align:"left",expand:O}),i){E&&!T&&C==="right"&&M.addSpace();var F={left:Rt(e,"space.titleLeft",0),right:Rt(e,"space.titleRight",0)},L=T?1:0;M.add(i,{align:C,proportion:L,expand:O,padding:F}),E&&!T&&C==="left"&&M.addSpace()}x&&(E&&!i&&M.addSpace(),M.add(x,{align:"right",expand:O}));var R=Rt(e,"space.title",0),F;(l||o||v||p)&&(F={bottom:R}),this.add(M,{padding:F,expand:!0})}if(l){var D=Rt(e,"align.content","center"),B=Rt(e,"space.content",0),F={left:Rt(e,"space.contentLeft",0),right:Rt(e,"space.contentRight",0),bottom:o||v||p?B:0},N=Rt(e,"expand.content",!0);this.add(l,{align:D,padding:F,expand:N})}if(o){var D=Rt(e,"align.description","center"),U=Rt(e,"space.description",0),F={left:Rt(e,"space.descriptionLeft",0),right:Rt(e,"space.descriptionRight",0),bottom:v||p?U:0},N=Rt(e,"expand.description",!0);this.add(o,{align:D,padding:F,expand:N})}if(v){var X=Rt(e,"choicesType","").split("-"),K=Ua(X,"wrap")?Gs:Ua(X,"grid")?Ao:Ve,k=Ua(X,"radio")?"radio":Ua(X,"checkboxes")?"checkboxes":void 0,b={left:Rt(e,"space.choicesBackgroundLeft",0),right:Rt(e,"space.choicesBackgroundRight",0),top:Rt(e,"space.choicesBackgroundTop",0),bottom:Rt(e,"space.choicesBackgroundBottom",0)},I=Rt(e,"space.choice",0);K===Ve?b.item=I:K===Gs?(b.item=I,b.line=Rt(e,"space.choiceLine",I)):(b.column=Rt(e,"space.choiceColumn",I),b.row=Rt(e,"space.choiceRow",I));var G={width:Rt(e,"choicesWidth",void 0),height:Rt(e,"choicesHeight",void 0),groupName:"choices",buttonsType:k,background:d,buttons:v,space:b,click:m,eventEmitter:this.eventEmitter,setValueCallback:Rt(e,"choicesSetValueCallback",void 0),setValueCallbackScope:Rt(e,"choicesSetValueCallbackScope",void 0)};K===Ve&&(G.orientation=Ua(X,"x")?0:1),u=new K(t,G);var Y=Rt(e,"space.choices",0),F={left:Rt(e,"space.choicesLeft",0),right:Rt(e,"space.choicesRight",0),bottom:p?Y:0},D=Rt(e,"align.choices","center"),N=Rt(e,"expand.choices",!0);this.add(u,{align:D,padding:F,expand:N})}if(p){c=new Ve(t,{groupName:"actions",background:g,buttons:p,orientation:0,space:{item:Rt(e,"space.action",0)},expand:Rt(e,"expand.actions",!1),align:Rt(e,"align.actions","center"),click:m,eventEmitter:this.eventEmitter});var F={left:Rt(e,"space.actionsLeft",0),right:Rt(e,"space.actionsRight",0)};this.add(c,{align:"center",padding:F,expand:!0})}this.addChildrenMap("background",f),this.addChildrenMap("title",i),this.addChildrenMap("toolbar",n),this.addChildrenMap("leftToolbar",r),this.addChildrenMap("content",l),this.addChildrenMap("description",o),this.addChildrenMap("choices",v),this.addChildrenMap("actions",p),this.addChildrenMap("choicesSizer",u),this.addChildrenMap("actionsSizer",c),this.addChildrenMap("toolbarSizer",x),this.addChildrenMap("leftToolbarSizer",y)}}var Ua=function(s,t){return s.indexOf(t)!==-1};Object.assign(Ql.prototype,gV);xt.register("dialog",function(s){var t=new Ql(this.scene,s);return this.scene.add.existing(t),t});Ct(window,"RexPlugins.UI.Dialog",Ql);const he=Phaser.Utils.Objects.GetValue;class ov extends Te{constructor(t,e){e===void 0&&(e={}),e.orientation=1,super(t,e),this.type="rexHolyGrail";var f=he(e,"background",void 0);f&&this.addBackground(f);var i=he(e,"header",void 0);if(i){var n=he(e,"proportion.header",0),h=he(e,"align.header","center"),r=he(e,"space.header",void 0);typeof r=="number"&&(r={bottom:r});var a=he(e,"expand.header",!0);this.add(i,{proportion:n,align:h,padding:r,expand:a})}var l=new Te(t,{orientation:0});this.add(l,{proportion:1,align:"center",padding:0,expand:!0});var o=he(e,"leftSide",void 0);if(o){var n=he(e,"proportion.leftSide",0),h=he(e,"align.leftSide","center"),r=he(e,"space.leftSide",void 0);typeof r=="number"&&(r={right:r});var a=he(e,"expand.leftSide",!0);l.add(o,{proportion:n,align:h,padding:r,expand:a})}var u=he(e,"content",void 0);if(u){var n=he(e,"proportion.content",1),h=he(e,"align.content","center"),r=he(e,"space.content",void 0),a=he(e,"expand.content",!0);l.add(u,{proportion:n,align:h,padding:r,expand:a})}var v=he(e,"rightSide",void 0);if(v){var n=he(e,"proportion.rightSide",0),h=he(e,"align.rightSide","center"),r=he(e,"space.rightSide",void 0);typeof r=="number"&&(r={left:r});var a=he(e,"expand.rightSide",!0);l.add(v,{proportion:n,align:h,padding:r,expand:a})}var d=he(e,"footer",void 0);if(d){var n=he(e,"proportion.footer",0),h=he(e,"align.footer","center"),r=he(e,"space.footer",void 0);typeof r=="number"&&(r={top:r});var a=he(e,"expand.footer",!0);this.add(d,{proportion:n,align:h,padding:r,expand:a})}this.addChildrenMap("background",f),this.addChildrenMap("header",i),this.addChildrenMap("leftSide",o),this.addChildrenMap("content",u),this.addChildrenMap("rightSide",v),this.addChildrenMap("footer",d)}}xt.register("holyGrail",function(s){var t=new ov(this.scene,s);return this.scene.add.existing(t),t});Ct(window,"RexPlugins.UI.HolyGrail",ov);var mV={getButtonsSizer(s){return this.childrenMap[`${s}ButtonsSizer`]},getButton(s,t){var e=this.getButtonsSizer(s);return e?e.getButton(t):void 0},setButtonEnable(s,t,e){return this.getButtonsSizer(s).setButtonEnable(t,e),this},setLeftButtonEnable(s,t){return this.childrenMap.leftButtonsSizer.setButtonEnable(s,t),this},setRightButtonEnable(s,t){return this.childrenMap.rightButtonsSizer.setButtonEnable(s,t),this},setTopButtonEnable(s,t){return this.childrenMap.topButtonsSizer.setButtonEnable(s,t),this},setBottomButtonEnable(s,t){return this.childrenMap.bottomButtonsSizer.setButtonEnable(s,t),this},toggleButtonEnable(s,t){return this.getButtonsSizer(s).toggleButtonEnable(t),this},toggleLeftButtonEnable(s){return this.childrenMap.leftButtonsSizer.toggleButtonEnable(s),this},toggleRightButtonEnable(s){return this.childrenMap.rightButtonsSizer.toggleButtonEnable(s),this},toggleTopButtonEnable(s){return this.childrenMap.topButtonsSizer.toggleButtonEnable(s),this},toggleBottomButtonEnable(s){return this.childrenMap.bottomButtonsSizer.toggleButtonEnable(s),this},getButtonEnable(s,t){return this.getButtonsSizer(s).getButtonEnable(t)},getLeftButtonEnable(s){return this.childrenMap.leftButtonsSizer.getButtonEnable(s)},getRightButtonEnable(s){return this.childrenMap.rightButtonsSizer.getButtonEnable(s)},getTopButtonEnable(s){return this.childrenMap.topButtonsSizer.getButtonEnable(s)},getBottomButtonEnable(s){return this.childrenMap.bottomButtonsSizer.getButtonEnable(s)},emitButtonClick(s,t){var e=this.getButtonsSizer(s);return e?(e.emitButtonClick(t),this):this},emitLeftButtonClick(s){return this.childrenMap.leftButtonsSizer.emitButtonClick(s),this},emitRightButtonClick(s){return this.childrenMap.rightButtonsSizer.emitButtonClick(s),this},emitTopButtonClick(s){return this.childrenMap.topButtonsSizer.emitButtonClick(s),this},emitBottomButtonClick(s){return this.childrenMap.bottomButtonsSizer.emitButtonClick(s),this},getLeftButton(s){return this.childrenMap.leftButtonsSizer.getButton(s)},getRightButton(s){return this.childrenMap.rightButtonsSizer.getButton(s)},getTopButton(s){return this.childrenMap.topButtonsSizer.getButton(s)},getBottomButton(s){return this.childrenMap.bottomButtonsSizer.getButton(s)},showButton(s,t){return Ms(this.getButton(s,t)),this},showLeftButton(s){return Ms(this.getLeftButton(s)),this},showRightButton(s){return Ms(this.getRightButton(s)),this},showTopButton(s){return Ms(this.getTopButton(s)),this},showBottomButton(s){return Ms(this.getBottomButton(s)),this},hideButton(s,t){return As(this.getButton(s,t)),this},hideLeftButton(s){return As(this.getLeftButton(s)),this},hideRightButton(s){return As(this.getRightButton(s)),this},hideTopButton(s){return As(this.getTopButton(s)),this},hideBottomButton(s){return As(this.getBottomButton(s)),this},addButton(s,t){return this.getButtonsSizer(s).addButton(t),this},addLeftButton(s){return this.addButton("left",s),this},addRightButton(s){return this.addButton("right",s),this},addTopButton(s){return this.addButton("top",s),this},removeButton(s,t,e){return this.getButtonsSizer(s).removeButton(t,e),this},removeLeftButton(s,t){return this.removeButton("left",s,t),this},removeRightButton(s,t){return this.removeButton("right",s,t),this},removeTopButton(s,t){return this.removeButton("top",s,t),this},removeBottomButton(s,t){return this.removeButton("bottom",s,t),this},clearButtons(s,t){return this.getButtonsSizer(s).clearButtons(t),this},clearLeftButtons(s){return this.clearButtons("left",s),this},clearRightButtons(s){return this.clearButtons("right",s),this},clearTopButtons(s){return this.clearButtons("top",s),this},clearBottomButtonss(s){return this.clearButtons("bottom",s),this},forEachButton(s,t,e){return this.getButtonsSizer(s).forEachButtton(t,e),this},forEachLeftButton(s,t){return this.childrenMap.leftButtonsSizer.forEachButtton(s,t),this},forEachRightButton(s,t){return this.childrenMap.rightButtonsSizer.forEachButtton(s,t),this},forEachTopButton(s,t){return this.childrenMap.topButtonsSizer.forEachButtton(s,t),this},forEachBottomButton(s,t){return this.childrenMap.bottomButtonsSizer.forEachButtton(s,t),this}};const ce=Phaser.Utils.Objects.GetValue;class hv extends hs{constructor(t,e){e===void 0&&(e={}),e.column=3,e.row=3,super(t,e),this.type="rexTabs",this.eventEmitter=ce(e,"eventEmitter",this);var f=ce(e,"background",void 0),i=ce(e,"panel",void 0),n=ce(e,"leftButtons",void 0),h=ce(e,"leftButtonsBackground",void 0),r,a=ce(e,"rightButtons",void 0),l=ce(e,"rightButtonsBackground",void 0),o,u=ce(e,"topButtons",void 0),v=ce(e,"topButtonsBackground",void 0),d,c=ce(e,"bottomButtons",void 0),p=ce(e,"bottomButtonsBackground",void 0),g,m=ce(e,"click",void 0);if(f&&this.addBackground(f),i&&this.add(i,1,1,"center",0,!0),n){var x=ce(e,"space.leftButtonsOffset",0),y=ce(e,"space.leftButton",0);r=new Ve(t,{groupName:"left",background:h,buttons:n,orientation:1,space:{item:y},align:ce(e,"align.leftButtons",void 0),click:m,eventEmitter:this.eventEmitter});var T={top:x};this.add(r,0,1,"top",T,!1)}if(a){var C=ce(e,"space.rightButtonsOffset",0),S=ce(e,"space.rightButton",0);o=new Ve(t,{groupName:"right",background:l,buttons:a,orientation:1,space:{item:S},align:ce(e,"align.rightButtons",void 0),click:m,eventEmitter:this.eventEmitter});var T={top:C};this.add(o,2,1,"top",T,!1)}if(u){var E=ce(e,"space.topButtonsOffset",0),M=ce(e,"space.topButton",0);d=new Ve(t,{groupName:"top",background:v,buttons:u,orientation:0,space:{item:M},align:ce(e,"align.topButtons",void 0),click:m,eventEmitter:this.eventEmitter});var T={left:E};this.add(d,1,0,"left",T,!1)}if(c){var O=ce(e,"space.bottomButtonsOffset",0),L=ce(e,"space.bottomButton",0);g=new Ve(t,{groupName:"bottom",background:p,buttons:c,orientation:0,space:{item:L},align:ce(e,"align.bottomButtons",void 0),click:m,eventEmitter:this.eventEmitter});var T={left:O};this.add(g,1,2,"left",T,!1)}this.addChildrenMap("background",f),this.addChildrenMap("panel",i),this.addChildrenMap("leftButtons",n),this.addChildrenMap("rightButtons",a),this.addChildrenMap("topButtons",u),this.addChildrenMap("bottomButtons",c),this.addChildrenMap("leftButtonsSizer",r),this.addChildrenMap("rightButtonsSizer",o),this.addChildrenMap("topButtonsSizer",d),this.addChildrenMap("bottomButtonsSizer",g)}}Object.assign(hv.prototype,mV);xt.register("tabs",function(s){var t=new hv(this.scene,s);return this.scene.add.existing(t),t});Ct(window,"RexPlugins.UI.Tabs",hv);const Px=Phaser.Math.Percent;var UT=function(s,t,e){var f;return s.y===t.y?f=Px(e.x,s.x,t.x):s.x===t.x&&(f=Px(e.y,s.y,t.y)),f},xV=function(s,t,e){if(!!this.enable){hd.x=t,hd.y=e;var f,i;this.reverseAxis?(f=this.getEndPoint(),i=this.getStartPoint()):(f=this.getStartPoint(),i=this.getEndPoint()),this.value=UT(f,i,hd)}},hd={},Mx=function(s,t,e){if(!!this.enable&&!!s.isDown){ld.x=s.worldX,ld.y=s.worldY;var f,i;this.reverseAxis?(f=this.getEndPoint(),i=this.getStartPoint()):(f=this.getStartPoint(),i=this.getEndPoint());var n=UT(f,i,ld);this.stopEaseValue(),this.easeValueDuration===0||Math.abs(this.value-n)<.1?this.value=n:this.easeValueTo(n)}},ld={},WT=function(s,t){t===void 0&&(t=yV);var e=this.childrenMap.thumb,f=e.x,i=e.y;return Gl(e,this.innerLeft,this.innerTop,this.innerWidth,this.innerHeight,s),t.x=e.x,t.y=e.y,e.x=f,e.y=i,t},yV={};const TV=Phaser.Display.Align.LEFT_CENTER,CV=Phaser.Display.Align.TOP_CENTER;var SV=function(s){if(s===void 0&&(s=EV),this.childrenMap.thumb){var t=this.orientation===0?TV:CV;WT.call(this,t,s)}else this.orientation===0?(s.x=this.innerLeft+1,s.y=this.centerY):(s.x=this.centerX,s.y=this.innerTop+1);return s},EV={};const PV=Phaser.Display.Align.RIGHT_CENTER,MV=Phaser.Display.Align.BOTTOM_CENTER;var AV=function(s){if(s===void 0&&(s=OV),this.childrenMap.thumb){var t=this.orientation===0?PV:MV;WT.call(this,t,s)}else this.orientation===0?(s.x=this.innerRight-1,s.y=this.centerY):(s.x=this.centerX,s.y=this.innerBottom-1);return s},OV={};const Ax=Phaser.Math.Linear;var RV=function(s,t,e,f){return f===void 0&&(f=LV),f.x=Ax(t.x,e.x,s),f.y=Ax(t.y,e.y,s),f},LV={},FV=function(s){var t=this.childrenMap.thumb;if(t===void 0)return this;s===void 0&&(s=this.value);var e,f;return this.reverseAxis?(e=this.getEndPoint(),f=this.getStartPoint()):(e=this.getStartPoint(),f=this.getEndPoint()),RV(s,e,f,t),this.resetChildPositionState(t),this};const wV=Phaser.Display.Align.LEFT_CENTER,IV=Phaser.Display.Align.TOP_CENTER,DV=Phaser.Display.Align.RIGHT_CENTER,BV=Phaser.Display.Align.BOTTOM_CENTER;var bV=function(s){var t=this.childrenMap.indicator;if(t===void 0)return this;s===void 0&&(s=this.value);var e=this.reverseAxis,f,i,n=this.childrenMap.thumb;if(n)if(this.orientation===0){var h=ne(n);if(e){var r=n.x-h*n.originX;f=this.right-r}else{var r=n.x-h*n.originX,a=r+h;f=a-this.left}}else{var l=Qt(n);if(e){var o=n.y-l*n.originY;i=this.bottom-o}else{var o=n.y-l*n.originY,u=o+l;i=u-this.top}}else this.orientation===0?f=this.width*s:i=this.height*s;bs(t,f,i);var v;e?v=this.orientation===0?DV:BV:v=this.orientation===0?wV:IV,gT(t,this,v),this.resetChildPositionState(t)};const je=Phaser.Utils.Objects.GetValue,GV=Phaser.Math.Clamp,NV=Phaser.Math.Linear,Ox=Phaser.Math.Percent,YV=Phaser.Math.Snap.To;class la extends Te{constructor(t,e){super(t,e),this.type="rexSlider",this.eventEmitter=je(e,"eventEmitter",this),this.reverseAxis=je(e,"reverseAxis",!1);var f=je(e,"background",void 0),i=je(e,"track",void 0),n=je(e,"indicator",void 0),h=je(e,"thumb",void 0);f&&this.addBackground(f),i&&this.add(i,{proportion:1,expand:!0,minWidth:this.orientation===0?0:void 0,minHeight:this.orientation===1?0:void 0}),n&&this.pin(n),h&&this.pin(h);var r=je(e,"input",0);switch(typeof r=="string"&&(r=zV[r]),r){case 0:h&&(h.setInteractive(),this.scene.input.setDraggable(h),h.on("drag",xV,this).on("dragstart",function(o){this.eventEmitter.emit("inputstart",o)},this).on("dragend",function(o){this.eventEmitter.emit("inputend",o)},this));break;case 1:this.setInteractive().on("pointerdown",Mx,this).on("pointermove",Mx,this).on("pointerdown",function(o){this.eventEmitter.emit("inputstart",o)},this).on("pointerup",function(o){this.eventEmitter.emit("inputend",o)},this).on("pointerover",function(o){o.isDown&&this.eventEmitter.emit("inputstart",o)},this).on("pointerout",function(o){o.isDown&&this.eventEmitter.emit("inputend",o)},this);break}this.addChildrenMap("background",f),this.addChildrenMap("track",i),this.addChildrenMap("indicator",n),this.addChildrenMap("thumb",h);var a=je(e,"valuechangeCallback",null);if(a!==null){var l=je(e,"valuechangeCallbackScope",void 0);this.eventEmitter.on("valuechange",a,l)}this.setEnable(je(e,"enable",void 0)),this.setGap(je(e,"gap",void 0)),this.setValue(je(e,"value",0),je(e,"min",void 0),je(e,"max",void 0)),this.setEaseValuePropName("value").setEaseValueDuration(je(e,"easeValue.duration",0)).setEaseValueFunction(je(e,"easeValue.ease","Linear"))}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}setGap(t){return this.gap=t,this}get value(){return this._value}set value(t){this.gap!==void 0&&(t=YV(t,this.gap));var e=this._value;this._value=GV(t,0,1),e!==this._value&&(this.updateThumb(this._value),this.updateIndicator(this._value),this.eventEmitter.emit("valuechange",this._value,e,this.eventEmitter))}setValue(t,e,f){return t==null?this:(e!==void 0&&(t=Ox(t,e,f)),this.value=t,this)}addValue(t,e,f){return e!==void 0&&(t=Ox(t,e,f)),this.value+=t,this}getValue(t,e){var f=this.value;return t!==void 0&&(f=NV(t,e,f)),f}runLayout(t,e,f){return this.ignoreLayout?this:(super.runLayout(t,e,f),this.updateThumb(),this.updateIndicator(),this)}}const zV={pan:0,drag:0,click:1,none:-1};var VV={getStartPoint:SV,getEndPoint:AV,updateThumb:FV,updateIndicator:bV};Object.assign(la.prototype,VV,To);xt.register("slider",function(s){var t=new la(this.scene,s);return this.scene.add.existing(t),t});Ct(window,"RexPlugins.UI.Slider",la);var XT={v:0,vertical:0,h:1,horizontal:1};const UV=Phaser.Utils.Objects.GetValue;var jl=function(s,t){var e=UV(s,"scrollMode",0);return typeof e=="string"&&(e=XT[e]),e};const ci=Phaser.Utils.Objects.GetValue;class ql extends Te{constructor(t,e){super(t,e),this.type="rexScrollBar";var f=ci(e,"background",void 0),i=ci(e,"buttons",void 0),n=ci(i,"top",ci(i,"left",void 0)),h=ci(i,"bottom",ci(i,"right",void 0)),r,a=ci(e,"slider",void 0);if(f&&this.addBackground(f),n){this.add(n);var l=new oo(n);l.on("intouch",function(){if(!!this.enable){var g=r.reverseAxis?this.scrollStep:-this.scrollStep;this.value+=g}},this)}if(a){a.orientation=this.orientation,a.eventEmitter=this,a.value=null;var o;if(this.orientation===0){var u=ci(a,"width",void 0);o=u===void 0?1:0}else{var v=ci(a,"height",void 0);o=v===void 0?1:0}r=new la(t,a),t.add.existing(r),this.add(r,{proportion:o})}if(h){this.add(h);var l=new oo(h);l.on("intouch",function(){if(!!this.enable){var m=r.reverseAxis?-this.scrollStep:this.scrollStep;this.value+=m}},this)}var d=[n,h];this.addChildrenMap("background",f),this.addChildrenMap("slider",r),this.addChildrenMap("buttons",d);var c=ci(e,"valuechangeCallback",null);if(c!==null){var p=ci(e,"valuechangeCallbackScope",void 0);this.on("valuechange",c,p)}this.setEnable(ci(e,"enable",void 0)),this.setValue(ci(e,"value",0)),this.setScrollStep(ci(i,"step",.01))}setScrollStep(t){return this.scrollStep=t,this}get enable(){return this.childrenMap.slider?this.childrenMap.slider.enable:!1}set enable(t){this.childrenMap.slider&&this.childrenMap.slider.setEnable(t)}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}get value(){return this.childrenMap.slider?this.childrenMap.slider.value:0}set value(t){!this.childrenMap.slider||(this.childrenMap.slider.value=t)}setValue(t,e,f){return this.childrenMap.slider&&this.childrenMap.slider.setValue(t,e,f),this}addValue(t,e,f){return this.childrenMap.slider&&this.childrenMap.slider.addValue(t,e,f),this}getValue(t,e){return this.childrenMap.slider?this.childrenMap.slider.getValue(t,e):0}easeValueTo(t,e,f){return this.childrenMap.slider&&this.childrenMap.slider.easeValueTo(t,e,f),this}stopEaseValue(){return this.childrenMap.slider&&this.childrenMap.slider.stopEaseValue(),this}setEaseValueDuration(t){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueDuration(t),this}setEaseValueFunction(t){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueFunction(t),this}}class WV extends ql{constructor(t,e){e===void 0&&(e={});var f=lr(e);e={slider:f},e.orientation=f.orientation,delete f.orientation,e.background=f.background,delete f.background,e.buttons=f.buttons,delete f.buttons,super(t,e);var i=this.childrenMap.slider;this.addChildrenMap("track",i.childrenMap.track),this.addChildrenMap("indicator",i.childrenMap.indicator),this.addChildrenMap("thumb",i.childrenMap.thumb)}}class XV extends Yn{constructor(t,e){super(e),this.parent=t,this.init()}init(){this.start("IDLE")}next_IDLE(){var t,e=this.parent,f=e.dragState;return f.isDown&&(t=e.dragThreshold===0?"DRAG":"DRAGBEGIN"),t}update_IDLE(t,e){this.next()}next_DRAGBEGIN(){var t,e=this.parent,f=e.dragState;return f.isDown?t=f.pointer.getDistance()>=e.dragThreshold?"DRAG":"DRAGBEGIN":t="IDLE",t}update_DRAGBEGIN(t,e){this.next()}next_DRAG(){var t,e=this.parent,f=e.dragState;return f.isUp&&(e.outOfBounds?t="BACK":e.slidingEnable?t="SLIDE":t="IDLE"),t}update_DRAG(t,e){var f=this.parent,i=f.dragState;i.justMoved&&f.dragging(),this.next()}enter_DRAG(){this.parent.onDragStart()}exit_DRAG(){this.parent.onDragEnd()}next_SLIDE(){var t,e=this.parent,f=e.dragState;return f.isDown?t="DRAG":e.isSliding||(t="IDLE"),t}enter_SLIDE(){this.parent.onSliding()}exit_SLIDE(){this.parent.stop()}update_SLIDE(t,e){this.parent.sliding(t,e),this.next()}next_BACK(){var t,e=this.parent,f=e.dragState;return f.isDown?t="DRAG":e.isPullBack||(t="IDLE"),t}enter_BACK(){this.parent.onPullBack()}exit_BACK(){this.parent.stop()}update_BACK(t,e){this.parent.pullBack(t,e),this.next()}}const zh=Phaser.Utils.Objects.GetValue,HV=Phaser.Math.Distance.Between;class $V extends He{constructor(t,e){super(t,e),this._enable=void 0,t.setInteractive(zh(e,"inputConfig",void 0)),this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.isInTouched=!1,this.holdStartTime=void 0,this.x=void 0,this.y=void 0,this.preX=void 0,this.preY=void 0,this.localX=void 0,this.localY=void 0,this.justMoved=!1,this.setEnable(zh(t,"enable",!0)),this.holdThreshold=zh(t,"holdThreshold",50),this.pointerOutReleaseEnable=zh(t,"pointerOutRelease",!0),this}boot(){this.parent.on("pointerdown",this.onPointIn,this),this.parent.on("pointerup",this.onPointOut,this),this.pointerOutReleaseEnable&&this.parent.on("pointerout",this.onPointOut,this),this.parent.on("pointermove",this.onPointerMove,this),this.scene.sys.events.on("preupdate",this.preupdate,this)}shutdown(t){this.isShutdown||(this.scene.sys.events.off("preupdate",this.preupdate,this),this.pointer=void 0,super.shutdown(t))}get enable(){return this._enable}set enable(t){this._enable!==t&&(t||(this.isInTouched=!1,this.pointer=void 0),this._enable=t)}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setPointerOutReleaseEnable(t){return t===void 0&&(t=!0),this.pointerOutReleaseEnable=t,this}get isDown(){return this.pointer&&this.pointer.isDown}get isUp(){return!this.isDown}get dx(){return this.x-this.preX}get dy(){return this.y-this.preY}get dt(){var t=gc(this.scene);return t}get speed(){if(this.x===this.preX&&this.y===this.preY)return 0;var t=HV(this.preX,this.preY,this.x,this.y),e=t/(this.dt*.001);return e}get speedX(){return this.dx/(this.dt*.001)}get speedY(){return this.dy/(this.dt*.001)}onPointIn(t,e,f){!this.enable||!t.isDown||this.pointer!==void 0||(this.pointer=t,this.localX=e,this.localY=f)}onPointOut(t){!this.enable||this.pointer!==t||(this.pointer=void 0)}onPointerMove(t,e,f){!this.enable||!t.isDown||this.pointer!==t||(this.localX=e,this.localY=f)}preupdate(t,e){if(!!this.enable){var f=this.pointer;this.justMoved=!1,f&&!this.isInTouched?(this.x=f.worldX,this.y=f.worldY,this.preX=f.worldX,this.preY=f.worldY,this.isInTouched=!0,this.holdStartTime=void 0,this.emit("touchstart",f,this.localX,this.localY)):f&&this.isInTouched?this.x===f.x&&this.y===f.y?this.holdStartTime===void 0?this.holdStartTime=t:t-this.holdStartTime>this.holdThreshold&&(this.preX=this.x,this.preY=this.y):(this.preX=this.x,this.preY=this.y,this.x=f.worldX,this.y=f.worldY,this.holdStartTime=void 0,this.justMoved=!0,this.emit("touchmove",f,this.localX,this.localY)):!f&&this.isInTouched&&(this.isInTouched=!1,this.holdStartTime=void 0,this.emit("touchend",f))}}}const ud=Phaser.Utils.Objects.GetValue;class KV{constructor(t){this.resetFromJSON(t)}resetFromJSON(t){return this.setValue(ud(t,"value",0)),this.setSpeed(ud(t,"speed",0)),this.setAcceleration(ud(t,"acceleration",0)),this}reset(){this.setValue(0),this.setSpeed(0),this.setAcceleration(0)}setValue(t){return this.value=t,this}setSpeed(t){return this.speed=t,this}setAcceleration(t){return this.acceleration=t,this}updateSpeed(t){return this.acceleration!==0&&(this.speed+=this.acceleration*t,this.speed<0&&(this.speed=0)),this}getDeltaValue(t){return this.updateSpeed(t),this.speed<=0?0:this.speed*t}update(t){return this.updateSpeed(t),this.speed>0&&(this.value+=this.getDeltaValue(t)),this}get isMoving(){return this.speed>0}}class kV{constructor(){this.value,this.dir,this.movement=new KV}init(t,e,f,i,n){return this.value=t,this.end=n,n!==void 0?this.dir=t<n:this.dir=e,this.movement.setSpeed(f).setAcceleration(-i),this}stop(){this.movement.reset()}update(t){var e=this.movement.getDeltaValue(t);return this.dir||(e=-e),this.end===void 0?this.value+=e:e===0?this.value=this.end:(this.value+=e,this.dir?this.value>this.end&&(this.value=this.end):this.value<this.end&&(this.value=this.end)),this}get isMoving(){return this.movement.isMoving}}const be=Phaser.Utils.Objects.GetValue,ZV=Phaser.Math.Clamp;class JV extends He{constructor(t,e){super(t,e);var f=be(e,"enable",!0);this._state=new XV(this,{enable:f,eventEmitter:!1});var i={inputConfig:be(e,"inputConfig",void 0),enable:f,pointerOutRelease:be(e,"pointerOutRelease",!0),eventEmitter:!1};this.dragState=new $V(t,i),this._enable=void 0,this._value=void 0,this._slowDown=new kV;var n=be(e,"valuechangeCallback",null);if(n!==null){var h=be(e,"valuechangeCallbackScope",void 0);this.on("valuechange",n,h)}if(n=be(e,"overmaxCallback",null),n!==null){var h=be(e,"overmaxCallbackScope",void 0);this.on("overmax",n,h)}if(n=be(e,"overminCallback",null),n!==null){var h=be(e,"overminCallbackScope",void 0);this.on("overmin",n,h)}this.resetFromJSON(e),this.boot()}resetFromJSON(t){this.setOrientationMode(be(t,"orientation",0)),this.setDragThreshold(be(t,"threshold",10)),this.setSlidingDeceleration(be(t,"slidingDeceleration",5e3)),this.setBackDeceleration(be(t,"backDeceleration",2e3));var e=be(t,"bounds",void 0);return e?this.setBounds(e):this.setBounds(be(t,"max",0),be(t,"min",0)),this.setValue(be(t,"value",this.maxValue||0)),this.setEnable(be(t,"enable",!0)),this}boot(){this.scene.sys.events.on("preupdate",this._state.update,this._state)}shutdown(t){this.isShutdown||(this.scene.sys.events.off("preupdate",this._state.update,this._state),this._state.destroy(t),this.dragState.destroy(t),this._state=void 0,this.dragState=void 0,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return this._enable=t,this._state.setEnable(t),this.dragState.setEnable(t),this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setOrientationMode(t){return typeof t=="string"&&(t=QV[t]),this.orientationMode=t,this}setDragThreshold(t){return this.dragThreshold=t,this}setSlidingDeceleration(t){return this.slidingDeceleration=t,this}setBackDeceleration(t){return this.backDeceleration=t,this}setBounds(t,e){if(Array.isArray(t)){var f=t;t=f[0],e=f[1]}return t<e?(this.minValue=t,this.maxValue=e):(this.minValue=e,this.maxValue=t),this}get value(){return this._value}set value(t){if(t!==this._value){var e=this._value,f=this.overMax(t),i=this.overMin(t);f&&this.emit("overmax",t,e),i&&this.emit("overmin",t,e),this.backEnable||(f&&(t=this.maxValue),i&&(t=this.minValue)),this._value=t,this.emit("valuechange",t,e)}}setValue(t,e){return e===void 0&&(e=!1),e&&(t=ZV(t,this.minValue,this.maxValue)),this.value=t,this}addValue(t,e){return this.setValue(this.value+t,e),this}get state(){return this._state.state}get isDragging(){return this.dragState.isInTouched}get outOfMaxBound(){return this.overMax(this.value)}get outOfMinBound(){return this.overMin(this.value)}get outOfBounds(){return this.outOfMinBound||this.outOfMaxBound}overMax(t){return this.maxValue!=null&&t>this.maxValue}overMin(t){return this.minValue!=null&&t<this.minValue}get backEnable(){return typeof this.backDeceleration=="number"}get isPullBack(){return this._slowDown.isMoving}get slidingEnable(){return typeof this.slidingDeceleration=="number"}get isSliding(){return this._slowDown.isMoving}get dragDelta(){return this.orientationMode===0?this.dragState.dy:this.orientationMode===1?this.dragState.dx:0}get dragSpeed(){return this.orientationMode===0?this.dragState.speedY:this.orientationMode===1?this.dragState.speedX:0}onDragStart(){this.emit("dragstart")}onDragEnd(){this.emit("dragend")}dragging(){this.value+=this.dragDelta}onSliding(){var t=this.value,e=this.dragSpeed;if(e===0){this._slowDown.stop(),this._state.next();return}var f=this.slidingDeceleration;this._slowDown.init(t,e>0,Math.abs(e),f)}sliding(t,e){e*=.001;var f=this._slowDown.update(e).value;this.overMax(f)?(this.value=this.maxValue,this._slowDown.stop()):this.overMin(f)?(this.value=this.minValue,this._slowDown.stop()):this.value=f}onPullBack(){var t=this.value,e=this.outOfMinBound?this.minValue:this.maxValue,f=Math.abs(e-t),i=this.backDeceleration,n=Math.sqrt(2*i*f);this._slowDown.init(t,void 0,n,i,e)}pullBack(t,e){e*=.001,this.value=this._slowDown.update(e).value,this._slowDown.isMoving||this._state.next()}stop(){this._slowDown.stop()}}const QV={y:0,v:0,vertical:0,x:1,h:1,horizontal:1},Vh=Phaser.Utils.Objects.GetValue;class jV extends He{constructor(t,e){if(super(t,e),this.parent!==this.scene?this.focusMode=Vh(e,"focus",!1):this.focusMode=!1,this.setSpeed(Vh(e,"speed",.1)),this.setEnable(Vh(e,"enable",!0)),!this.focusMode)this.scene.input.on("wheel",this.onSceneScroll,this);else{var t=this.parent;t.setInteractive(Vh(e,"inputConfig",void 0)).on("wheel",function(i,n,h,r,a){!this.enable||this.scroll(h)},this)}}destroy(){this.focusMode||this.scene.input.off("wheel",this.onSceneScroll,this)}onSceneScroll(t,e,f,i,n,h){!this.enable||this.scroll(i)}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}setSpeed(t){return this.speed=t,this}scroll(t){t*=this.speed,this.emit("scroll",t,this.parent,this)}}const Le=Phaser.Utils.Objects.GetValue;var qV=function(s,t){var e=s.scene,f=jl(t),i=new Te(e,{orientation:f}),n=Le(t,"child.gameObject",void 0),h=0,r=Le(t,"slider",void 0),a,l=0,o=Le(r,"position",0);typeof o=="string"&&(o=_V[o]);var u=o===0,v=Le(t,"scroller",!0),d,c=Le(t,"mouseWheelScroller",!1),p;if(n){var g=Le(t,"space.child",0);if(s.childMargin={},typeof g!="number"){var m=g;f===0?(h={left:Le(m,"left",0),right:Le(m,"right",0)},s.childMargin.top=Le(m,"top",0),s.childMargin.bottom=Le(m,"bottom",0)):(h={top:Le(m,"top",0),bottom:Le(m,"bottom",0)},s.childMargin.top=Le(m,"left",0),s.childMargin.bottom=Le(m,"right",0))}else r&&(f===0?h=u?{right:g}:{left:g}:h=u?{bottom:g}:{top:g}),s.childMargin.top=0,s.childMargin.bottom=0;r?(r===!0&&(r={}),r.orientation=i.orientation===0?1:0,a=new WV(e,r),l=Le(t,"space.slider",0),s.adaptThumbSizeMode=Le(r,"adaptThumbSize",!1),s.minThumbSize=Le(r,"minThumbSize",void 0)):(s.adaptThumbSizeMode=!1,s.minThumbSize=void 0),v&&(v===!0&&(v={}),v.orientation=f,d=new JV(n,v)),c&&(p=new jV(n,c)),a&&!u&&i.add(a,{proportion:0,align:"center",padding:l,expand:!0});var x=Le(t,"child.proportion",1),y=Le(t,"child.expand",!0);i.add(n,{proportion:x,align:"center",padding:h,expand:y}),a&&u&&i.add(a,{proportion:0,align:"center",padding:l,expand:!0})}return a&&a.on("valuechange",function(T){s.t=T,s.emit("scroll",s)}),d&&d.on("valuechange",function(T){s.childOY=T,s.emit("scroll",s)}),p&&p.on("scroll",function(T){s.addChildOY(-T,!0)}),s.addChildrenMap("child",n),s.addChildrenMap("slider",a),s.addChildrenMap("scroller",d),s.addChildrenMap("mouseWheelScroller",p),i},_V={right:0,left:1,bottom:0,top:1};Te.prototype.runLayout;var tU=function(){var s=this.topChildOY,t=this.bottomChildOY,e=this.childrenMap.scroller,f=this.childrenMap.slider;return e&&e.setBounds(t,s),f&&f.setEnable(t!==s),this.updateController(),this.adaptThumbSizeMode&&eU.call(this),this},eU=function(){var s=Math.min(this.childVisibleHeight/this.childHeight,1),t=this.childrenMap.slider,e=t.childrenMap.track,f=t.childrenMap.thumb,i=this.minThumbSize;if(this.scrollMode===0){var n=e.displayHeight*s;i!==void 0&&n<i&&(n=i),bs(f,void 0,n)}else{var h=e.displayWidth*s;i!==void 0&&h<i&&(h=i),bs(f,h,void 0)}iU.call(this)},iU=function(){var s=this.childrenMap.slider,t=s.minWidth,e=s.minHeight;s.minWidth=s.width,s.minHeight=s.height,s.layout(),s.minWidth=t,s.minHeight=e},nU=function(){var s=this.childrenMap.scroller,t=this.childrenMap.slider;s&&s.setValue(this.childOY),t&&t.setValue(this.t)};const Rn=Phaser.Utils.Objects.GetValue,Rx=Phaser.Math.Clamp;class _l extends Te{constructor(t,e){e===void 0&&(e={});var f=jl(e);e.orientation=f===0?1:0,super(t,e),this.type=Rn(e,"type","rexScrollable");var i=Rn(e,"background",void 0),n=qV(this,e),h=Rn(e,"header",void 0),r=Rn(e,"footer",void 0);if(i&&this.addBackground(i),h){var a=Rn(e,"align.header","center"),l=Rn(e,"space.header",0),o;f===0?o={bottom:l}:o={right:l};var u=Rn(e,"expand.header",!0);this.add(h,{proportion:0,align:a,padding:o,expand:u})}if(n&&this.add(n,{proportion:1,align:"center",padding:0,expand:!0}),r){var a=Rn(e,"align.footer","center"),v=Rn(e,"space.footer",0),o;f===0?o={top:v}:o={left:v};var u=Rn(e,"expand.footer",!0);this.add(r,{proportion:0,align:a,padding:o,expand:u})}this.addChildrenMap("background",i),this.addChildrenMap("header",h),this.addChildrenMap("footer",r),this.runLayoutFlag=!1}runLayout(t,e,f){return this.ignoreLayout?this:(super.runLayout(t,e,f),this.resizeController(),this.runLayoutFlag||(this.runLayoutFlag=!0,this.setT(0)),this)}set t(t){var e=this.childMargin;if(e.top!==0||e.bottom!==0){var f=this.childrenMap.child,i=f.topChildOY-f.bottomChildOY,n=i+e.top+e.bottom,h=n*t-e.top;t=h/i}this.childrenMap.child.t=t,this.updateController()}get t(){var t=this.childrenMap.child.t,e=this.childMargin;if(e.top!==0||e.bottom!==0){var f=this.childrenMap.child,i=f.topChildOY-f.bottomChildOY,n=i+e.top+e.bottom,h=i*t+e.top;t=h/n}return t}set childOY(t){this.childrenMap.child.childOY=t,this.updateController()}get childOY(){return this.childrenMap.child.childOY}get topChildOY(){return this.childrenMap.child.topChildOY+this.childMargin.top}get bottomChildOY(){return this.childrenMap.child.bottomChildOY-this.childMargin.bottom}get childVisibleHeight(){return this.childrenMap.child.childVisibleHeight}get childHeight(){return this.childrenMap.child.childHeight}get isOverflow(){var t=this.childrenMap.child;return t.topChildOY!==t.bottomChildOY}get scrollMode(){return this.orientation===0?1:0}setChildOY(t,e){return e===void 0&&(e=!1),e&&(t=Rx(t,this.bottomChildOY,this.topChildOY)),this.childOY=t,this}addChildOY(t,e){return this.setChildOY(this.childOY+t,e),this}setT(t,e){return e===void 0&&(e=!1),e&&(t=Rx(t,0,1)),this.t=t,this}addT(t,e){return this.setT(this.t+t,e),this}scrollToTop(){return this.t=0,this}scrollToBottom(){return this.t=1,this}get sliderEnable(){var t=this.childrenMap.slider;return t?t.enable:!1}set sliderEnable(t){var e=this.childrenMap.slider;!e||e.setEnable(t)}setSliderEnable(t){return t===void 0&&(t=!0),this.sliderEnable=t,this}get scrollerEnable(){var t=this.childrenMap.scroller;return t?t.enable:!1}set scrollerEnable(t){var e=this.childrenMap.scroller;!e||e.setEnable(t)}setScrollerEnable(t){return t===void 0&&(t=!0),this.scrollerEnable=t,this}get mouseWheelScrollerEnable(){var t=this.childrenMap.mouseWheelScroller;return t?t.enable:!1}set mouseWheelScrollerEnable(t){var e=this.childrenMap.mouseWheelScrollerEnable;!e||e.setEnable(t)}setMouseWheelScrollerEnable(t){return t===void 0&&(t=!0),this.mouseWheelScrollerEnable=t,this}setDropZoneEnable(t){t===void 0&&(t=!0);var e=this.childrenMap.child;return e.setInteractive(),e.input.dropZone=t,this}}var sU={resizeController:tU,updateController:nU};Object.assign(_l.prototype,sU);class HT{constructor(t,e){this.container=null,this._deltaHeight=0,this.setParent(t)}setParent(t){this.parent=t,this.parentContainer=t.getParentContainer()}destroy(t){t===void 0&&(t=!1),t||this.destroyContainer(),this.deltaHeight=0,this.data=void 0,this.container=null,this.parent=void 0,this.parentContainer=void 0}get table(){return this.parent}get scrollMode(){return this.parentContainer.scrollMode}get colIndx(){return this.parent.cellIndxeToColIndex(this.index)}get rowIndx(){return this.parent.cellIndxeToRowIndex(this.index)}getContainer(){return this.container}setContainer(t){return t?(this.container&&this.container.destroy(),this.container=t,this.parentContainer.add(t),this):(this.destroyContainer(),this)}destroyContainer(){return this.container&&(this.container.destroy(),this.container=null),this}popContainer(){if(this.container){var t=this.container;return this.container=null,this.parentContainer.remove(t),t}else return null}setXY(t,e){return this.container&&this.parentContainer.setChildLocalPosition(this.container,t,e),this}get deltaHeight(){return this._deltaHeight}set deltaHeight(t){t==null&&(t=0);var e=this.parent;this._deltaHeight===0&&t!==0?e.nonZeroDeltaHeightCount++:this._deltaHeight!==0&&t===0&&e.nonZeroDeltaHeightCount--;var f=this._deltaHeight!==t;if(this._deltaHeight=t,f){e.resetTotalRowsHeight();var i=this.scrollMode===0?"cellheightchange":"cellwidthchange";this.parentContainer.emit(i,this,this.container,this.parentContainer)}}get deltaWidth(){return this.deltaHeight}set deltaWidth(t){this.deltaHeight=t}setDeltaHeight(t){return this.deltaHeight=t,this}setDeltaWidth(t){return this.deltaHeight=t,this}get height(){return this.scrollMode===0?this.deltaHeight+this.parent.defaultCellHeight:this.parent.defaultCellWidth}set height(t){this.scrollMode!==1&&this.setDeltaHeight(t-this.parent.defaultCellHeight)}setHeight(t){return this.height=t,this}get width(){return this.scrollMode===0?this.parent.defaultCellWidth:this.deltaHeight+this.parent.defaultCellHeight}set width(t){this.scrollMode!==0&&this.setDeltaHeight(t-this.parent.defaultCellHeight)}setWidth(t){return this.width=t,this}get scene(){return this.parentContainer.scene}}Object.assign(HT.prototype,xl);const Uh=Phaser.Utils.Objects.GetValue,rU=Phaser.Utils.Array.SpliceOne;class aU{constructor(t,e){this.parent=t,this.cells=[],this.cellPool=new Is,this.resetFromJSON(e)}resetFromJSON(t){return this.colCount=void 0,this.nonZeroDeltaHeightCount=0,this.resetTotalRowsHeight(),this.setDefaultCellHeight(Uh(t,"cellHeight",30)),this.setDefaultCellWidth(Uh(t,"cellWidth",30)),this.initCells(Uh(t,"cellsCount",0)),this.setColumnCount(Uh(t,"columns",1)),this}destroy(t){this.cellPool.destroy(),this.cells=void 0,this.parent=void 0}get defaultCellHeightMode(){return this.nonZeroDeltaHeightCount===0}setDefaultCellHeight(t){return this.defaultCellHeight=t,this}setDefaultCellWidth(t){return this.defaultCellWidth=t,this}initCells(t){var e=this.cells;e.length=t;for(var f=0;f<t;f++)e[f]=null;return this}insertNewCells(t,e){var f=this.cells;if(t===f.length){var i=t+e;f.legth=i;for(var n=t;n<i;n++)f[n]=null}else{var h=[];h.length=e;for(var n=0;n<e;n++)h[n]=null;this.cells.splice(t,0,...h)}return this.resetTotalRowsHeight(),this}removeCells(t,e){for(var f=t+e,i=t;i<f;i++)this.freeCell(i);return f===this.cells.length?this.cells.length=t:(e===1?rU(this.cells,t):this.cells.splice(t,e),this.buildCellIndex(t)),this.resetTotalRowsHeight(),this}setColumnCount(t){return this.colCount=t,this.resetTotalRowsHeight(),this}get rowCount(){return Math.ceil(this.cells.length/this.colCount)}get cellsCount(){return this.cells.length}isValidCellIdx(t){return t>=0&&t<this.cells.length}heightToRowIndex(t,e){if(this.defaultCellHeightMode){var r=t/this.defaultCellHeight;return e?r=Math.ceil(r):r=Math.floor(r),r}for(var f=this.rowCount,i=t,n,h,r=0;;)if(h=this.getRowHeight(r),i-=h,n=r>=0&&r<f,i>0&&n)r+=1;else{if(i===0)return r;if(e){var a=r;r+=1,n=r>=0&&r<f,n||(r=a)}return r}}widthToColIndex(t,e){var f=t/this.defaultCellWidth;return e?f=Math.ceil(f):f=Math.floor(f),f}colRowToCellIndex(t,e){return t>=this.colCount?null:e*this.colCount+t}rowIndexToHeight(t,e){if(this.defaultCellHeightMode)return(e-t+1)*this.defaultCellHeight;for(var f,i=0,n=t;n<=e;n++)f=this.getRowHeight(n),i+=f;return i}colIndexToWidth(t,e){return(e-t+1)*this.defaultCellWidth}getRowHeight(t){var e=this.colCount;if(e<=1)return this.getCellHeight(this.colRowToCellIndex(0,t));for(var f=0,i,n=0;n<e;n++)i=this.getCellHeight(this.colRowToCellIndex(n,t)),f<i&&(f=i);return f}getColWidth(t){return this.defaultCellWidth}getCellHeight(t){if(!this.isValidCellIdx(t))return 0;var e;if(this.defaultCellHeightMode)e=this.defaultCellHeight;else{var f=this.getCell(t,!1),i=f?f.deltaHeight:0;e=this.defaultCellHeight+i}return e}resetTotalRowsHeight(){this._totalRowsHeight=null}get totalRowsHeight(){return this._totalRowsHeight===null&&(this._totalRowsHeight=this.rowIndexToHeight(0,this.rowCount-1)),this._totalRowsHeight}get totalColumnWidth(){return this.colCount*this.defaultCellWidth}cellIndxeToColIndex(t){return t%this.colCount}cellIndxeToRowIndex(t){return Math.floor(t/this.colCount)}getCell(t,e){if(!this.isValidCellIdx(t))return null;if(e===void 0&&(e=!0),this.cells[t]===null&&e){var f=this.newCell(t);this.cells[t]=f}return this.cells[t]}newCell(t){var e=this.cellPool.pop();return e===null?e=new HT(this):e.setParent(this),e.index=t,e}buildCellIndex(t){t===void 0&&(t=0);for(var e=this.cells,f,i=t,n=e.length;i<n;i++)f=e[i],f&&(f.index=i);return this}getParentContainer(){return this.parent}freeCell(t){return typeof t=="number"&&(t=this.cells[t]),t?(t.destroy(),this.cellPool.push(t),this):this}}var oU=function(s){var t=this.table,e=this.topTableOY,f=this.bottomTableOY,i=s>this.topTableOY,n=s<this.bottomTableOY;if(this.clampTableOXY){var h=t.rowCount,r=t.heightToRowIndex(this.instHeight,!0);h<r?s=0:i?s=e:n&&(s=f)}return this._tableOY!==s&&(this._tableOY=s),i&&(this.execeedTopState||this.emit("execeedtop",this,s,e)),this.execeedTopState=i,n&&(this.execeedBottomState||this.emit("execeedbottom",this,s,f)),this.execeedBottomState=n,this},hU=function(s){var t=this.table,e=this.leftTableOX,f=this.rightTableOX,i=s>this.leftTableOX,n=s<this.rightTableOX;if(this.clampTableOXY){var h=t.colCount,r=t.widthToColIndex(this.instWidth,!0);h<r?s=0:i?s=e:n&&(s=f)}return this._tableOX!==s&&(this._tableOX=s),i&&(this.execeedLeftState||this.emit("execeedleft",this,s,e)),this.execeedLeftState=i,n&&(this.execeedRightState||this.emit("execeedright",this,s,f)),this.execeedRightState=n,this},$T=function(s){return s.hasOwnProperty("geometryMask")?s.geometryMask:s.bitmapMask};const lU=Phaser.Geom.Intersects.RectangleToRectangle,uU=Phaser.Geom.Rectangle.Overlaps;var fU=function(s,t,e){if(!!t){e===void 0&&(e=s.getAllChildren());for(var f=s.getBounds(),i=$T(t),n,h,r,a=0,l=e.length;a<l;a++)if(n=e[a],!n.hasOwnProperty("isRexContainerLite")&&n!==i&&!!dU(n))if(n.getBounds)switch(h=n.getBounds(h),r=cU(f,h),r){case 4:vU(s,n);break;case 0:lU(f,h)||uU(f,h)?fd(s,n,t):pU(s,n);break;default:fd(s,n,t);break}else fd(s,n,t)}},dU=function(s){if(!s.displayList)return!1;for(;;){var t=s.rexContainer;if(t)if(t.visible){var e=t.parent;if(e){s=e;continue}else return!0}else return!1;else return s.visible}},cU=function(s,t){var e=0,f=t.top,i=t.bottom,n=t.left,h=t.right;return e+=s.contains(n,f)?1:0,e+=s.contains(n,i)?1:0,e+=s.contains(h,f)?1:0,e+=s.contains(h,i)?1:0,e},vU=function(s,t,e){s.setChildMaskVisible(t,!0),t.clearMask&&t.clearMask()},fd=function(s,t,e){s.setChildMaskVisible(t,!0),t.setMask&&t.setMask(e)},pU=function(s,t,e){s.setChildMaskVisible(t,!1),t.clearMask&&t.clearMask()};const dd=Phaser.Utils.Objects.GetValue,gU={update:0,everyTick:1};var KT={setupChildrenMask(s){return s===!1?this:(this.setMaskUpdateMode(dd(s,"updateMode",0)),this.enableChildrenMask(dd(s,"padding",0)),this.setMaskLayer(dd(s,"layer",void 0)),this.startMaskUpdate(),this)},destroyChildrenMask(){return this.childrenMask?(this.stopMaskUpdate(),this.childrenMask.destroy(),this.childrenMask=void 0,this):this},setMaskUpdateMode(s){return typeof s=="string"&&(s=gU[s]),this.maskUpdateMode=s,this},startMaskUpdate(){this.scene.game.events.on("poststep",this.maskChildren,this)},stopMaskUpdate(){this.scene.game.events.off("poststep",this.maskChildren,this)},enableChildrenMask(s){var t=ho.call(this,null,this,0,s);return this.childrenMask=t.createGeometryMask(),this},setMaskChildrenFlag(s){return s===void 0&&(s=!0),this.maskChildrenFlag=s,this},setMaskLayer(s){return this.maskLayer=s,this},maskChildren(){return!this.childrenMask||!this.maskChildrenFlag||this.alpha===0||!this.visible?this:(this.layer?this.layer.setMask(this.childrenMask):this.maskLayer?(this.addToLayer(this.maskLayer),this.maskLayer.setMask(this.childrenMask)):fU(this,this.childrenMask),this.maskUpdateMode===0&&(this.maskChildrenFlag=!1),this)},layoutChildrenMask(){if(!this.childrenMask)return this;var s=$T(this.childrenMask);return s.setPosition().resize(),this.resetChildPositionState(s),this}},mU=function(){if(this.cellsCount!==0){var s=this.table,t=s.heightToRowIndex(-this.tableOY);t<=0&&(t=0);var e=t,f=s.widthToColIndex(-this.tableOX);f<=0&&(f=0);for(var i=f,n=s.colRowToCellIndex(i,e),h=this.bottomBound,r=this.rightBound,a=s.cellsCount-1,l=s.colCount-1,o=this.getCellTLX(i),u=o,v=this.getCellTLY(e);v<h&&n<=a;){if(this.table.isValidCellIdx(n)){var d=s.getCell(n,!0);this.visibleCells.set(d),this.preVisibleCells.contains(d)||this.showCell(d),this.scrollMode===0?d.setXY(u,v):d.setXY(v,u)}u<r&&i<l?(u+=s.getColWidth(i),i+=1):(u=o,v+=s.getRowHeight(e),i=f,e+=1),n=s.colRowToCellIndex(i,e)}}},kT=function(s){var t=null,e=s.getContainer();if(e?(t=e,s.popContainer()):this.cellContainersPool&&(t=this.cellContainersPool.getFirstDead(),t!==null&&t.setActive(!0).setVisible(!0)),this.emit("cellvisible",s,t,this),this.cellContainersPool){var e=s.getContainer();e?t===null?this.cellContainersPool.add(e):t!==e&&(this.cellContainersPool.add(e),this.cellContainersPool.killAndHide(t)):t!==null&&this.cellContainersPool.killAndHide(t)}},xU=function(s){var t=this.scrollMode===0?this.topLeftX:this.topLeftY,e=this.tableOX+this.table.colIndexToWidth(0,s-1)+t;return e},yU=function(s){var t=this.scrollMode===0?this.topLeftY:this.topLeftX,e=this.tableOY+this.table.rowIndexToHeight(0,s-1)+t;return e},TU=function(){var s=this.preVisibleCells,t=this.visibleCells;s.iterate(function(e){t.contains(e)||this.hideCell(e)},this)},ZT=function(s){if(this.emit("cellinvisible",s),this.cellContainersPool){var t=s.popContainer();t&&this.cellContainersPool.killAndHide(t)}s.destroyContainer()},CU=function(s){return s===void 0&&(s=!1),s&&(Lx.call(this),this.hideCells()),Lx.call(this),this.showCells(),this.hideCells(),this.setMaskChildrenFlag(),this},Lx=function(){var s=this.preVisibleCells;this.preVisibleCells=this.visibleCells,this.visibleCells=s,this.visibleCells.clear()},SU=function(s){var t=this.table.getCell(s,!1);return t&&this.visibleCells.contains(t)},JT=function(s,t){t-=this.y+this.topLeftY,s-=this.x+this.topLeftX;var e=this.tableOY-(this.scrollMode===0?t:s),f=this.tableOX-(this.scrollMode===0?s:t),i=this.table,n=i.heightToRowIndex(-e),h=i.widthToColIndex(-f),r=i.colRowToCellIndex(h,n);return r===null||!this.isCellVisible(r)?null:r},EU=function(s,t){var e=JT.call(this,s,t);if(e!==null)return this.getCellContainer(e)},PU=function(s,t){return this.visibleCells.each(s,t),this},MU=function(s,t){return this.visibleCells.iterate(s,t),this},AU=function(s,t){return this.table.cells.slice().forEach(s,t),this},OU=function(s,t){return this.table.cells.forEach(s,t),this},RU=function(s){var t=this.cellsCount;return t===s?this:(t>s?this.removeCells(s,t-s):this.insertNewCells(t,s-t),this)};const LU=Phaser.Math.Clamp;var FU=function(s,t){return typeof s=="object"&&(s=s.index),t===void 0&&(t=1),t<=0?this:(s=LU(s,0,this.cellsCount),this.table.insertNewCells(s,t),this)},wU=function(s,t){if(typeof s=="object"&&(s=s.index),t===void 0&&(t=1),s<0&&(t+=s,s=0),t<=0)return this;if(s>this.cellsCount)return this;for(var e,f=s,i=s+t;f<i;f++)e=this.getCell(f,!1),e&&(this.visibleCells.contains(e)&&(ZT.call(this,e),this.visibleCells.delete(e)),this.preVisibleCells.delete(e));return this.table.removeCells(s,t),this},IU=function(s){return this.table.colCount===s?this:(this.table.setColumnCount(s),this)},DU=function(s,t){return this.setCellsCount(s*t),this.table.setColumnCount(s),this},BU=function(s){var t=this.table.getCell(s,!1);return!t||!t.container?this:(kT.call(this,t),this)},QT={setTableOY:oU,setTableOX:hU,showCells:mU,showCell:kT,getCellTLX:xU,getCellTLY:yU,hideCells:TU,hideCell:ZT,updateTable:CU,isCellVisible:SU,pointToCellIndex:JT,pointToCellContainer:EU,eachVisibleCell:PU,iterateVisibleCell:MU,eachCell:AU,iterateCell:OU,setCellsCount:RU,insertNewCells:FU,removeCells:wU,setColumnCount:IU,setGridSize:DU,updateVisibleCell:BU};Object.assign(QT,KT);const bU=Phaser.GameObjects.Group,Fx=Phaser.Structs.Set,Ln=Phaser.Utils.Objects.GetValue;class jT extends _i{constructor(t,e,f,i,n,h){h===void 0&&(h={}),super(t,e,f,i,n),this.type="rexGridTable",this._tableOX=0,this._tableOY=0,this.visibleCells=new Fx,this.preVisibleCells=new Fx,this.execeedTopState=!1,this.execeedBottomState=!1,this.execeedLeftState=!1,this.execeedRightState=!1;var r=Ln(h,"reuseCellContainer",!1);r&&(this.cellContainersPool=new bU(t));var a=Ln(h,"cellVisibleCallback",null);if(a!==null){var l=Ln(h,"cellVisibleCallbackScope",void 0);this.on("cellvisible",a,l)}if(a=Ln(h,"cellInvisibleCallback",null),a!==null){var l=Ln(h,"cellInvisibleCallbackScope",void 0);this.on("cellinvisible",a,l)}Ln(h,"enableLayer",!1)&&this.enableLayer(),this.setupChildrenMask(Ln(h,"mask",void 0)),this.setScrollMode(Ln(h,"scrollMode",0)),this.setClampMode(Ln(h,"clamplTableOXY",!0));var o,u,v,d=this.scrollMode===0;if(d?(o=h.cellWidth,u=h.cellHeight,v=h.columns):(o=h.cellHeight,u=h.cellWidth,v=Ln(h,"rows",h.columns)),this.expandCellSize=o===void 0,this.expandCellSize){var i=d?this.width:this.height;o=i/v}h.cellWidth=o,h.cellHeight=u,h.columns=v,this.table=new aU(this,h),this.updateTable()}destroy(t){!this.scene||(this.destroyChildrenMask(),this.table.destroy(t),this.table=void 0,this.cellContainersPool&&(this.cellContainersPool.destroy(!0),this.cellContainersPool=void 0),super.destroy(t))}setScrollMode(t){return typeof t=="string"&&(t=GU[t.toLowerCase()]),this.scrollMode=t,this}setClampMode(t){return t===void 0&&(t=!0),this.clampTableOXY=t,this}get tableOY(){return this._tableOY}get tableOX(){return this._tableOX}set tableOY(t){this.setTableOY(t).updateTable()}set tableOX(t){this.setTableOX(t).updateTable()}setTableOXY(t,e){return this.setTableOY(e).setTableOX(t),this}addTableOY(t){return this.setTableOY(this.tableOY+t),this}addTableOX(t){return this.setTableOX(this.tableOX+t),this}addTableOXY(t,e){return this.addTableOY(e).addTableOX(t),this}setTableOYByPercentage(t){return this.setTableOY(-this.tableVisibleHeight*t),this}getTableOYPercentage(){var t=this.tableVisibleHeight;return t===0?0:this.tableOY/-t}set t(t){this.setTableOYByPercentage(t).updateTable()}get t(){return this.getTableOYPercentage()}getCell(t){return this.table.getCell(t,!0)}getCellContainer(t){var e=this.table.getCell(t,!1),f;return e&&(f=e.getContainer()),f}get cellsCount(){return this.table.cellsCount}get columnCount(){return this.table.colCount}setCellHeight(t,e){var f;return typeof t=="number"?f=this.table.getCell(t,!0):f=t,f.height=e,this}setCellWidth(t,e){var f;return typeof t=="number"?f=this.table.getCell(t,!0):f=t,f.width=e,this}get instHeight(){return this.scrollMode===0?this.height:this.width}get instWidth(){return this.scrollMode===0?this.width:this.height}get tableHeight(){return this.table.totalRowsHeight}get tableWidth(){return this.table.totalColumnWidth}get topTableOY(){return 0}get bottomTableOY(){return-this.tableVisibleHeight}get leftTableOX(){return 0}get rightTableOX(){return-this.tableVisibleWidth}get tableVisibleHeight(){var t=this.tableHeight-this.instHeight;return t<0&&(t=0),t}get tableVisibleWidth(){var t,e=this.tableWidth,f=this.instWidth;return e>f?t=e-f:t=0,t}get bottomLeftY(){return-(this.displayHeight*this.originY)+this.displayHeight}get topRightX(){return-(this.displayWidth*this.originX)+this.displayWidth}get topLeftX(){return-(this.displayWidth*this.originX)}get topLeftY(){return-(this.displayHeight*this.originY)}get bottomBound(){return this.scrollMode===0?this.bottomLeftY:this.topRightX}get rightBound(){return this.scrollMode===0?this.topRightX:this.bottomLeftY}resize(t,e){return this.width===t&&this.height===e?this:(super.resize(t,e),this.expandCellSize&&this.table.setDefaultCellWidth(this.instWidth/this.table.colCount),this.updateTable(!0),this.layoutChildrenMask(),this.maskChildren(),this)}}Object.assign(jT.prototype,QT);const GU={v:0,vertical:0,h:1,horizontal:1};var NU=function(s){Object.defineProperty(s,"childOY",{configurable:!0,get:function(){return s.tableOY},set:function(t){s.tableOY=t}}),Object.defineProperty(s,"topChildOY",{get:function(){return s.topTableOY}}),Object.defineProperty(s,"bottomChildOY",{get:function(){return s.bottomTableOY}}),Object.defineProperty(s,"childVisibleHeight",{get:function(){return s.instHeight}}),Object.defineProperty(s,"childHeight",{get:function(){return s.tableHeight}})},YU=function(s){s.on("cellvisible",function(t,h,f){var i=this.createCellContainerCallback,n=this.createCellContainerCallbackScope;t.item=this.items[t.index];var h;n?h=i.call(n,t,h,f):h=i(t,h,f),h&&(h.setOrigin&&h.setOrigin(0),h.isRexSizer&&h.layout()),t.item=void 0,t.setContainer(h)},this)},bn=function(s,t,e,f,i,n,h){var r;if(i===void 0?r=f:r=e.pointToCellIndex(f,i),r!=null){var a=e.getCellContainer(r);a&&s.emit(t,a,r,n,h)}},zU=function(s,t){s.on("pointerdown",function(e,f,i,n){bn(this.eventEmitter,"cell.down",s,e.x,e.y,e,n)},this).on("pointerup",function(e,f,i,n){bn(this.eventEmitter,"cell.up",s,e.x,e.y,e,n)},this)},VU=function(s,t){s.on("pointermove",wx,this).on("pointerover",wx,this).on("pointerout",UU,this)},wx=function(s,t,e,f){var i=this.childrenMap.child,n=i.pointToCellIndex(s.x,s.y);if(n!==i.input.lastOverCellIndex){var h=i.input.lastOverCellIndex;i.input.lastOverCellIndex=n,bn(this.eventEmitter,"cell.out",i,h,void 0,s,f),bn(this.eventEmitter,"cell.over",i,n,void 0,s,f)}},UU=function(s,t){var e=this.childrenMap.child,f=e.input.lastOverCellIndex;e.input.lastOverCellIndex=void 0,bn(this.eventEmitter,"cell.out",e,f,void 0,s,t)};const WU=Phaser.Utils.Objects.GetValue;var XU=function(s,t){var e=WU(t,"click",void 0);e!==!1&&(e===void 0&&(e={}),e.threshold=10,s._click=new oa(s,e),s._click.on("click",function(f,i,n,h){bn(this.eventEmitter,"cell.click",i,n.x,n.y,n,h)},this))};const HU=Phaser.Utils.Objects.GetValue;var $U=function(s,t){var e=HU(t,"tap",void 0);e!==!1&&(s._tap=new Vl(s,e),s._tap.on("tap",function(f,i,n){var h=`cell.${f.tapsCount}tap`;bn(this.eventEmitter,h,f.gameObject,f.x,f.y,n)},this))};const KU=Phaser.Utils.Objects.GetValue;var kU=function(s,t){var e=KU(t,"press",void 0);e!==!1&&(s._press=new Ul(s,e),s._press.on("pressstart",function(f,i,n){bn(this.eventEmitter,"cell.pressstart",s,f.x,f.y,n)},this).on("pressend",function(f,i,n){bn(this.eventEmitter,"cell.pressend",s,f.x,f.y,n)},this))};const ZU=Phaser.Utils.Objects.GetValue;var JU=function(s,t){var e=ZU(t,"swipe",void 0);e!==!1&&(e===void 0&&(e={}),e.dir="4dir",s._swipe=new Mo(s,e),s._swipe.on("swipe",function(f,i,n){var h=f.left?"left":f.right?"right":f.up?"up":"down";bn(this.eventEmitter,`cell.swipe${h}`,s,f.x,f.y,n)},this))},QU=function(s,t){s.setInteractive(),zU.call(this,s,t),VU.call(this,s,t),XU.call(this,s,t),$U.call(this,s,t),kU.call(this,s,t),JU.call(this,s,t)},jU=function(s){s===void 0?this.items.length=0:this.items=s;var t=this.childrenMap.child;return t.setCellsCount(this.items.length),t.updateTable(!0),this.resizeController(),this};const Fn=Phaser.Utils.Objects.GetValue;class lv extends _l{constructor(t,e){e===void 0&&(e={});var f=jl(e),i=Fn(e,"table",void 0);i===void 0&&(i={}),i.scrollMode=f,i.clamplTableOXY=Fn(e,"clamplChildOY",!1);var n=Fn(i,"width",void 0),h=Fn(i,"height",void 0),r=new jT(t,0,0,n,h,i);t.add.existing(r);var a,l;f===0?(a=n===void 0?1:0,l=h===void 0):(a=h===void 0?1:0,l=n===void 0),NU(r),r.minWidth=n===void 0?0:void 0,r.minHeight=h===void 0?0:void 0,e.type="rexGridTable",e.child={gameObject:r,proportion:a,expand:l};var o=Fn(e,"space",void 0);o&&(o.child=o.table),super(t,e),this.addChildrenMap("table",r),this.addChildrenMap("tableLayer",r.maskLayer),this.eventEmitter=Fn(e,"eventEmitter",this);var u=Fn(e,"createCellContainerCallback",gi),v=Fn(e,"createCellContainerCallbackScope",void 0);this.setCreateCellContainerCallback(u,v),YU.call(this,r),this.resizeControllerFlag=!1;var d=f===0?"cellheightchange":"cellwidthchange";r.on(d,function(){this.resizeControllerFlag=!0},this),Fn(i,"interactive",!0)&&QU.call(this,r,i),this.setItems(Fn(e,"items",[])),t.game.events.on("poststep",this.onPostStep,this)}destroy(t){!this.scene||(this.scene.game.events.off("poststep",this.onPostStep,this),super.destroy(t))}setCreateCellContainerCallback(t,e){return this.createCellContainerCallback=t,this.createCellContainerCallbackScope=e,this}refresh(){return this.setItems(this.items),this}getCell(t){var e=this.childrenMap.child;return e.getCell(t)}getCellContainer(t){var e=this.childrenMap.child;return e.getCellContainer(t)}updateVisibleCell(t){var e=this.childrenMap.child;return e.updateVisibleCell(t)}onPostStep(){this.resizeControllerFlag&&(this.resizeController(),this.resizeControllerFlag=!1)}}var qU={setItems:jU};Object.assign(lv.prototype,qU);xt.register("gridTable",function(s){var t=new lv(this.scene,s);return this.scene.add.existing(t),t});Ct(window,"RexPlugins.UI.GridTable",lv);var uv=function(s,t){return s.sameOrientation?s.orientation=t.orientation:s.orientation=t.orientation===0?1:0,s},_U=function(s,t){s.popUp(uv(s.root.easeIn,s))},t4=function(s,t){s.scaleDown(uv(s.root.easeOut,s))},e4={setTransitInCallback(s){return s===void 0&&(s=_U),this.transitInCallback=s,this},setTransitOutCallback(s){return s===void 0&&(s=t4),this.transitOutCallback=s,this}},fv=function(s,t,e,f,i){var n=s.scene,h=n.sys.events,r=n.time.delayedCall(t,h.once,["postupdate",function(){e.call(f,i)}],h);return r},i4={delayCall(s,t,e){return this.timer=fv(this,s,t,e),this},removeDelayCall(){return this.timer&&(this.timer.remove(!1),this.timer=void 0),this}},n4=function(s,t){var f=this.childrenMap.subMenu;if(f&&f.parentButton===s)return this;this.collapseSubMenu();var e;this.root.toggleOrientation?e=this.orientation===0?1:0:e=this.orientation;var f=new this.constructor(this.scene,{items:t,orientation:e,space:this.space,createBackgroundCallback:this.root.createBackgroundCallback,createBackgroundCallbackScope:this.root.createBackgroundCallbackScope,createButtonCallback:this.root.createButtonCallback,createButtonCallbackScope:this.root.createButtonCallbackScope,easeIn:this.root.easeIn,easeOut:this.root.easeOut,_rootMenu:this.root,_parentMenu:this,_parentButton:s});return this.pin(f),this.childrenMap.subMenu=f,this.root.emit("expand",f,s,this),this},s4=function(){var s=this.root;s.emit("collapse",this,this.parentButton,s);var t=s.easeOut.duration;return s.transitOutCallback(this,t),this.collapseSubMenu(),this.delayCall(t,this.destroy,this),this},r4=function(){var s=this.childrenMap.subMenu;return s===void 0?this:(this.childrenMap.subMenu=void 0,this.remove(s),s.collapse(),this)},qT={expandSubMenu:n4,collapse:s4,collapseSubMenu:r4};Object.assign(qT,e4,i4);var a4=function(s,t,e,f){var i;return e&&(t.scene=s,f?i=e.call(f,t):i=e(t),t.scene=void 0),i},o4=function(s,t,e,f){var i,n=[],h;if(t&&e)for(var r=0,a=t.length;r<a;r++)i=t[r],i.scene=s,f?h=e.call(f,i,r,t):h=e(i,r,t),i.scene=void 0,n.push(h);return n},h4=function(s){s.on(s.root.expandEventName,function(t,e){if(!this._isPassedEvent){var f=this.root.childrenKey,i=this.items[e][f];i&&this.expandSubMenu(t,i)}},s).on("button.click",function(t,e,f,i){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.click",t,e,f,i),this.root._isPassedEvent=!1)},s).on("button.over",function(t,e,f,i){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.over",t,e,f,i),this.root._isPassedEvent=!1)},s).on("button.out",function(t,e,f,i){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.out",t,e,f,i),this.root._isPassedEvent=!1)},s)},Ix=function(s,t){return typeof t=="number"&&(t={duration:t}),t.hasOwnProperty("orientation")&&t.orientation!==void 0?t.sameOrientation=rv(t.orientation)===s.orientation:t.sameOrientation=!0,t.destroy=!1,t},l4=function(){var s=this.root,t=s.easeIn.duration;s.transitInCallback(this,t),this!==this.root&&this.delayCall(t,function(){this.root.emit("popup.complete",this)},this)};const ri=Phaser.Utils.Objects.GetValue;class tu extends Ve{constructor(t,e){e===void 0&&(e={}),e.hasOwnProperty("orientation")||(e.orientation=1);var f=e._rootMenu,i=e._parentMenu,n=e._parentButton,h=ri(e,"popup",!0),r=ri(e,"items",void 0),a=ri(e,"createBackgroundCallback",void 0),l=ri(e,"createBackgroundCallbackScope",void 0);e.background=a4(t,r,a,l);var o=ri(e,"createButtonCallback",void 0),u=ri(e,"createButtonCallbackScope",void 0);if(e.buttons=o4(t,r,o,u),super(t,e),this.type="rexMenu",this.items=r,this.root=f===void 0?this:f,this.isRoot=this.root===this,this.parentMenu=i,this.parentButton=n,this.timer=void 0,this.isRoot){this.isPopUpMode=h;var v=e.bounds;v===void 0&&(v=ra(t)),this.bounds=v,this.subMenuSide=[this.y<v.centerY?Zd:tl,this.x<v.centerX?kd:_h];var d=ri(e,"subMenuSide",void 0);d!==void 0&&(typeof d=="string"&&(d=u4[d]),this.subMenuSide[this.orientation]=d),this.toggleOrientation=ri(e,"toggleOrientation",!1),this.expandEventName=ri(e,"expandEvent","button.click"),this.easeIn=Ix(this,ri(e,"easeIn",0)),this.easeOut=Ix(this,ri(e,"easeOut",0)),this.setTransitInCallback(ri(e,"transitIn")),this.setTransitOutCallback(ri(e,"transitOut")),this.createBackgroundCallback=a,this.createBackgroundCallbackScope=l,this.createButtonCallback=o,this.createButtonCallbackScope=u,this.childrenKey=ri(e,"childrenKey","children"),this._isPassedEvent=!1,this.pointerDownOutsideCollapsing=ri(e,"pointerDownOutsideCollapsing",!0),this.pointerDownOutsideCollapsing&&t.input.on("pointerdown",this.onPointerDownOutside,this)}var c=0,p=0;if(!this.root.easeIn.sameOrientation){var g=uv(this.root.easeIn,this).orientation,m=i?i.orientation:this.orientation,d=this.root.subMenuSide[m];g===0&&d===_h&&(c=1),g===1&&d===tl&&(p=1)}if(h&&this.setOrigin(c,p).layout(),!this.isRoot){this.setScale(this.root.scaleX,this.root.scaleY);var d=this.root.subMenuSide[i.orientation];switch(d){case _h:this.alignTop(n.top).alignRight(n.left);break;case kd:this.alignTop(n.top).alignLeft(n.right);break;case tl:this.alignLeft(n.left).alignBottom(n.top);break;case Zd:this.alignLeft(n.left).alignTop(n.bottom);break}}h4(this),h&&(this.pushIntoBounds(this.root.bounds),l4.call(this))}destroy(t){!this.scene||(this.isRoot&&this.pointerDownOutsideCollapsing&&this.scene.input.off("pointerdown",this.onPointerDownOutside,this),super.destroy(t),this.removeDelayCall())}isInTouching(t){return super.isInTouching(t)?!0:this.childrenMap.subMenu?this.childrenMap.subMenu.isInTouching(t):!1}onPointerDownOutside(t){this.isInTouching(t)||(this.isPopUpMode?this.collapse():this.collapseSubMenu())}}const _h=2,kd=0,tl=3,Zd=1,u4={up:tl,down:Zd,left:_h,right:kd};Object.assign(tu.prototype,qT);xt.register("menu",function(s){var t=new tu(this.scene,s);return this.scene.add.existing(t),t});Ct(window,"RexPlugins.UI.Menu",tu);var f4=function(s,t){s.popUp(this.listEaseInDuration,"y","Cubic")},d4=function(s,t){s.scaleDown(this.listEaseOutDuration,"y","Linear")},c4={setWrapEnable(s){return s===void 0&&(s=!0),this.listWrapEnable=s,this},setCreateButtonCallback(s){return this.listCreateButtonCallback=s,this},setCreateBackgroundCallback(s){return this.listCreateBackgroundCallback=s,this},setButtonClickCallback(s){return this.listOnButtonClick=s,this},setButtonOverCallback(s){return this.listOnButtonOver=s,this},setButtonOutCallback(s){return this.listOnButtonOut=s,this},setListEaseInDuration(s){return s===void 0&&(s=0),this.listEaseInDuration=s,this},setListEaseOutDuration(s){return s===void 0&&(s=0),this.listEaseOutDuration=s,this},setListTransitInCallback(s){return s===void 0&&(s=f4),this.listTransitInCallback=s,this},settListTTransitOutCallback(s){return s===void 0&&(s=d4),this.listTransitOutCallback=s,this},setListBounds(s){return this.listBounds=s,this},setListWidth(s){return this.listWidth=s,this},setListHeight(s){return this.listHeight=s,this},setListSize(s,t){return this.setListWidth(s).setListHeight(t),this},setListAlignmentMode(s){return this.listAlignMode=s,this},setListSpace(s){return s===void 0&&(s={}),this.listSpace=s,this},setListDraggable(s){return s===void 0&&(s=!0),this.listDraggable=s,this}},v4=function(s){var t,e=this.listCreateBackgroundCallback;e&&(t=e.call(this,s),s.add.existing(t));var f=[],i=this.listCreateButtonCallback;if(i)for(var n=this.options,h=0,r=n.length;h<r;h++){var a=i.call(this,s,n[h],h,n);s.add.existing(a),f.push(a)}var l=this.listWidth;l===void 0&&(this.listAlignMode==="text"?l=this.getElement("text").width:l=this.width);var o=this.listHeight,u;return this.listWrapEnable?u=new Gs(s,{width:l,height:o,background:t,buttons:f,space:this.listSpace,draggable:this.listDraggable}):u=new Ve(s,{width:l,height:o,orientation:"y",background:t,buttons:f,space:this.listSpace,draggable:this.listDraggable}),s.add.existing(u),u},p4=function(){if(this.listPanel)return this;var s=this.scene,t=v4.call(this,s).setOrigin(0,0).layout(),e=this.getElement(this.listAlignMode).getTopLeft().x;t.setPosition(e,this.bottom);var f=this.listBounds;f||(f=ra(s)),t.bottom>f.bottom&&t.changeOrigin(0,1).setPosition(e,this.top),t.on("button.over",function(n,h,r,a){this.listOnButtonOver&&this.listOnButtonOver.call(this,n,h,r,a),this.emit("button.over",this,t,n,h,r,a)},this).on("button.out",function(n,h,r,a){this.listOnButtonOut&&this.listOnButtonOut.call(this,n,h,r,a),this.emit("button.out",this,t,n,h,r,a)},this);var i=this.listEaseInDuration;return this.listTransitInCallback(t,i),this.delayCall(i,function(){var n=this.listOnButtonClick;n&&t.on("button.click",function(h,r,a,l){n.call(this,h,r,a,l),this.emit("button.click",this,t,h,r,a,l)},this),s.input.once("pointerup",this.closeListPanel,this),this.emit("list.open",this,t)},this),this.pin(t),this.listPanel=t,this},g4=function(){if(!this.listPanel)return this;var s=this.listPanel;this.listPanel=void 0;var t=this.listEaseOutDuration;return this.listTransitOutCallback(s,t),this.delayCall(t,function(){this.emit("list.close",this,s),s.destroy()},this),this},m4=function(){return this.listPanel?this.closeListPanel():this.openListPanel(),this},x4={delayCall(s,t,e){return this.timer=fv(this,s,t,e),this},removeDelayCall(){return this.timer&&(this.timer.remove(!1),this.timer=void 0),this}},_T={openListPanel:p4,closeListPanel:g4,toggleListPanel:m4};Object.assign(_T,c4,x4);const Ee=Phaser.Utils.Objects.GetValue;class dv extends ha{constructor(t,e){super(t,e),this.type="rexDropDownList",this.timer=void 0,this.setOptions(Ee(e,"options"));var f=Ee(e,"list");this.setWrapEnable(Ee(f,"wrap",!1)),this.setCreateButtonCallback(Ee(f,"createButtonCallback")),this.setCreateBackgroundCallback(Ee(f,"createBackgroundCallback")),this.setButtonClickCallback(Ee(f,"onButtonClick")),this.setButtonOverCallback(Ee(f,"onButtonOver")),this.setButtonOutCallback(Ee(f,"onButtonOut")),this.setListEaseInDuration(Ee(f,"easeIn",500)),this.setListEaseOutDuration(Ee(f,"easeOut",100)),this.setListTransitInCallback(Ee(f,"transitIn")),this.settListTTransitOutCallback(Ee(f,"transitOut")),this.setListSize(Ee(f,"width"),Ee(f,"height")),this.setListAlignmentMode(Ee(f,"alignParent","text")),this.setListBounds(Ee(f,"bounds")),this.setListSpace(Ee(f,"space")),this.setListDraggable(Ee(f,"draggable",!1)),this.setValueChangeCallback(Ee(e,"setValueCallback"),Ee(e,"setValueCallbackScope")),this.setValue(Ee(e,"value")),this.onClick(this.toggleListPanel,this)}destroy(t){!this.scene||(this.listPanel&&(this.listPanel.destroy(t),this.listPanel=void 0),super.destroy(t),this.removeDelayCall())}setOptions(t){return t===void 0&&(t=[]),this.options=t,this}setValueChangeCallback(t,e){return this.valueChangeCallback=t,this.valueChangeCallbackScope=e,this}setValue(t){return this.value=t,this}get value(){return this._value}set value(t){if(this._value!==t){var e=this._value;this._value=t;var f=this.valueChangeCallback,i=this.valueChangeCallbackScope;f&&(i?f.call(i,this,t,e):f(this,t,e))}}}Object.assign(dv.prototype,_T);xt.register("dropDownList",function(s){var t=new dv(this.scene,s);return this.scene.add.existing(t),t});Ct(window,"RexPlugins.UI.DropDownList",dv);const y4=Phaser.GameObjects.Text;var cv=function(s){return s instanceof y4};const T4=Phaser.GameObjects.BitmapText;var tC=function(s){return s instanceof T4};const Gi=0,ji=1,qi=2;var Oo=function(s){var t;return tC(s)?t=qi:cv(s)?t=Gi:t=ji,t},vv=function(s,t,e){var f=Oo(s);switch(f){case Gi:e=s.getWrappedText(t);break;case ji:e=s.getPenManager(t,e);break;case qi:s.maxWidth>0?e=s.setText(t).getTextBounds().wrappedText.split(`
`):e=t.split(`
`);break}return e},C4=function(s,t){s===void 0&&(s=this.startLineIndex),t===void 0&&(t=s+this.pageLinesCount);var e;switch(this.textObjectType){case Gi:case qi:e=this.lines.slice(s,t).join(`
`);break;case ji:var f=this.lines.getLineStartIndex(s),i=this.lines.getLineEndIndex(t-1);e=this.lines.getSliceTagText(f,i,!0);break}return e},cd=function(s){return Array.isArray(s)?s=s.join(`
`):typeof s=="number"&&(s=s.toString()),s},S4={clearText(){return this.sections.length=0,this.pageStartIndexes.length=0,this.lines.length=0,this},appendPage(e){var t=this.totalLinesCount;this.sections.push(cd(e));var e=this.sections.join(`
`);this.lines=vv(this.parent,e,this.lines);for(var f=this.totalLinesCount-t,i=Math.ceil(f/this.pageLinesCount),n=0;n<i;n++)this.pageStartIndexes.push(t+n*this.pageLinesCount);return this},setText(s,t){t===void 0&&(t=!0),t&&this.resetPageIdx(),this.clearText();for(var e=cd(s).split(this.pageBreak),f=0,i=e.length;f<i;f++)this.appendPage(e[f]);return this},appendText(s){var t=this.content+cd(s);return this.setText(t,!1),this}};const E4=Phaser.Math.Clamp;var P4={getPage(s){return s===void 0&&(s=this.pageIndex),this.setPageIndex(s).getLines(this.startLineIndex,this.endLineIndex)},getNextPage(){return this.getPage(this.pageIndex+1)},getPreviousPage(){return this.getPage(this.pageIndex-1)},resetPageIdx(){return this.pageIndex=-1,this},setPageIndex(s){return s=E4(s,0,this.pageCount-1),this.pageIndex=s,this.startLineIndex=this.pageStartIndexes[s],this.endLineIndex=this.pageStartIndexes[s+1],this}},pv=function(s,t){var e=Oo(s);switch(e){case Gi:var n=s.style,f=n.wordWrapWidth,i=n.wordWrapCallback;n.wordWrapWidth=0,n.wordWrapCallback=void 0,s.setText(t),n.wordWrapWidth=f,n.wordWrapCallback=i;break;case ji:var n=s.style,h=n.wrapMode;n.wrapMode=0,s.setText(t),n.wrapMode=h;break;case qi:var r=s._maxWidth;s._maxWidth=0,s.setText(t),s._maxWidth=r;break}},M4={showPage(s){return this.displayText(this.getPage(s)),this},showNextPage(){return this.displayText(this.getNextPage()),this},showPreviousPage(){return this.displayText(this.getPreviousPage()),this},show(){return this.displayText(this.getLines()),this},showNextLine(){return this.displayText(this.setStartLineIndex(this.startLineIndex+1).getLines()),this},showPreviousLine(){return this.displayText(this.setStartLineIndex(this.startLineIndex-1).getLines()),this},displayText(s){pv(this.parent,s)}},eC={getLines:C4};Object.assign(eC,S4,P4,M4);const Wa=Phaser.Utils.Objects.GetValue,A4=Phaser.Math.Clamp;class iC extends He{constructor(t,e){super(t,{eventEmitter:!1}),this.textObjectType=Oo(this.parent),this.pageStartIndexes=[],this.lines=vv(this.parent,""),this.sections=[],this.resetFromJSON(e)}resetFromJSON(t){return this.setMaxLines(Wa(t,"maxLines",void 0)),this.setPageBreak(Wa(t,"pageBreak",`\f
`)),this.setText(Wa(t,"text","")),this.setStartLineIndex(Wa(t,"start",0)),this.setPageIndex(Wa(t,"page",-1)),this}toJSON(){return{maxLines:this.maxLines,text:this.content,start:this.startLineIndex,page:this.pageIndex,pageBreak:this.pageBreak}}shutdown(t){if(!this.isShutdown){switch(this.textObjectType){case Gi:this.lines.length=0;break;case ji:this.lines.destroy();break;case qi:this.lines.length=0;break}this.pageStartIndexes.length=0,this.sections.length=0,this.lines=void 0,this.pageStartIndexes=void 0,this.sections=void 0,super.shutdown(t)}}setMaxLines(t){return this.maxLines=t,this}setPageBreak(t){return this.pageBreak=t,this}get pageCount(){return this.pageStartIndexes.length}get isFirstPage(){return this.pageIndex<=0}get isLastPage(){return this.pageIndex>=this.pageCount-1}get totalLinesCount(){return this.lines?this.lines.length:0}get startLineIndex(){return this._startLineIndex}set startLineIndex(t){t=A4(t,0,this.totalLinesCount-1),this._startLineIndex=t}setStartLineIndex(t){return this.startLineIndex=t,this}get pageLinesCount(){if(this.maxLines!==void 0)return this.maxLines;var t;switch(this.textObjectType){case Gi:case ji:var e=this.parent.style.maxLines;e>0?t=e:t=this.totalLinesCount;break;case qi:t=this.totalLinesCount;break}return t}get content(){return this.sections.join(this.pageBreak)}}Object.assign(iC.prototype,eC);var O4=function(s,t){var e=Oo(s);switch(e){case Gi:s.style.syncFont(s.canvas,s.context),t=s.runWordWrap(t);break;case ji:t=s.getText(t,void 0,void 0,!0);break;case qi:t=s.setText(t).getTextBounds().wrappedText;break}return t};const Ur=Phaser.Utils.Objects.GetFastValue,vd=Phaser.Utils.Objects.GetValue;class R4 extends He{constructor(t,e){super(t,e),this.timer=null,this.resetFromJSON(e)}resetFromJSON(t){this.setTextWrapEnable(vd(t,"wrap",!1)),this.setTypeMode(vd(t,"typeMode",0)),this.setTypeSpeed(vd(t,"speed",333)),this.setTextCallback=Ur(t,"setTextCallback",null),this.setTextCallbackScope=Ur(t,"setTextCallbackScope",null),this.setTypingContent(Ur(t,"text","")),this.typingIdx=Ur(t,"typingIdx",0),this.insertIdx=Ur(t,"insertIdx",null);var e=Ur(t,"elapsed",null);return e!==null&&this.start(void 0,void 0,this.typingIdx,e),this}shutdown(t){this.isShutdown||(this.freeTimer(),super.shutdown(t))}setTypeMode(t){return typeof t=="string"&&(t=L4[t]),this.typeMode=t,this}setTypeSpeed(t){return this.speed=t,this}setTextWrapEnable(t){return t===void 0&&(t=!0),this.textWrapEnable=t,this}set text(t){var e=Dx(t);this.textWrapEnable&&(e=O4(this.parent,e)),this._text=e}get text(){return this._text}get isTyping(){return this.getTimer()!==null}get isLastChar(){return this.typingIdx===this.textLen}start(t,e,f,i){return t!==void 0&&this.setTypingContent(t),e!==void 0&&(this.speed=e),f===void 0&&(f=0),this.typingIdx=f+1,this.speed===0?this.stop(!0):(this.setText(""),this.startTimer(i)),this}appendText(t){var e=this.text.concat(Dx(t));return this.isTyping?this.setTypingContent(e):this.start(e,void 0,this.textLen),this}stop(t){var e=this.getTimer();return e&&this.freeTimer(),t&&(this.typingIdx=this.textLen,this.setText(this.text),this.emit("type"),this.emit("complete",this,this.parent)),this}pause(){var t=this.getTimer();return t&&(t.paused=!0),this}resume(){var t=this.getTimer();return t&&(t.paused=!1),this}setTypingContent(t){return this.text=t,this.textLen=this.getTextLength(this.text),this}onTyping(){var t=this.getTypingString(this.text,this.typingIdx,this.textLen,this.typeMode);this.setText(t),this.emit("type"),this.isLastChar?(this.freeTimer(),this.emit("complete",this,this.parent)):(this.timer.delay=this.speed,this.typingIdx++)}getTypingString(t,e,f,i){var n;if(i===0){var h=0,r=e;this.insertIdx=r,n=this.getSubString(t,h,r)}else if(i===1){var r=f,h=r-e;this.insertIdx=0,n=this.getSubString(t,h,r)}else if(i===2){var a=f/2,h=Math.floor(a-e/2),r=h+e;this.insertIdx=e%2?e:0,n=this.getSubString(t,h,r)}else if(i===3){var l=Math.floor(e/2),o;if(l>0){var r=f,h=r-l;o=this.getSubString(t,h,r)}else o="";var u=e-l,v;if(u>0){var h=0,r=h+u;this.insertIdx=r,v=this.getSubString(t,h,r)}else v="",this.insertIdx=0;n=v+o}return n}startTimer(t){this.timer&&this.freeTimer();var e;return t===void 0?e=0:(this.speed,e=t),this.timer=this.scene.time.addEvent({delay:0,startAt:e,loop:!0,callback:this.onTyping,callbackScope:this}),this}getTimer(){return this.timer}freeTimer(){return this.timer&&(this.timer.remove(),this.timer=null),this}setText(t){this.setTextCallback&&(this.setTextCallbackScope?t=this.setTextCallback.call(this.setTextCallbackScope,t,this.isLastChar,this.insertIdx):t=this.setTextCallback(t,this.isLastChar,this.insertIdx)),this.textWrapEnable?pv(this.parent,t):this.parent.setText(t)}getTextLength(t){var e=this.parent,f;return e.getPlainText?f=e.getPlainText(t).length:f=t.length,f}getSubString(t,e,f){var i=this.parent,n;return i.getSubString?n=i.getSubString(t,e,f):n=t.slice(e,f),n}}var Dx=function(s){return Array.isArray(s)?s=s.join(`
`):typeof s=="number"&&(s=s.toString()),s};const L4={"left-to-right":0,"right-to-left":1,"middle-to-sides":2,"sides-to-middle":3},Bx=Phaser.Utils.Objects.GetValue;class gv extends ha{constructor(t,e){e===void 0&&(e={text:F4(t)}),super(t,e),this.type="rexTextBox";var f=this.childrenMap.text;this.page=new iC(f,Bx(e,"page",void 0)),this.typing=new R4(f,Bx(e,"typing",e.type)),this.typing.on("complete",this.onPageEnd,this).on("type",this.onType,this),this.textWidth=f.width,this.textHeight=f.height}start(t,e){return this.page.setText(t),e!==void 0&&this.setTypeSpeed(e),this.typeNextPage(),this}typeNextPage(){if(this.isLastPage)this.emit("complete");else{var t=this.page.getNextPage();this.typing.start(t)}return this}pause(){return this.typing.pause(),this}resume(){return this.typing.resume(),this}stop(t){return this.typing.stop(t),this}setTypeSpeed(t){return this.typing.setTypeSpeed(t),this}get isTyping(){return this.typing.isTyping}get isLastPage(){return this.page.isLastPage}get isFirstPage(){return this.page.isFirstPage}get pageCount(){return this.page.pageCount}get pageIndex(){return this.page.pageIndex}onType(){var t=this.childrenMap.text;(this.textWidth!==t.width||this.textHeight!==t.height)&&(this.textWidth=t.width,this.textHeight=t.height,this.getTopmostSizer().layout()),this.emit("type")}onPageEnd(){this.emit("pageend"),this.isLastPage&&this.emit("complete")}}var F4=function(s){return s.add.text(0,0,"",{wordWrap:{width:200},maxLines:5})};xt.register("textBox",function(s){var t=new gv(this.scene,s);return this.scene.add.existing(t),t});Ct(window,"RexPlugins.UI.TextBox",gv);const Bi=Phaser.Utils.Objects.GetValue;class mv extends Te{constructor(t,e){super(t,e),this.type="rexNumberBar";var f=Bi(e,"background",void 0),i=Bi(e,"icon",void 0),n=Bi(e,"iconMask",void 0),h=Bi(e,"slider",void 0),r=Bi(e,"text",void 0),a=Bi(e,"space.icon",0),l=Bi(e,"space.slider",0);if(f&&this.addBackground(f),i){var o;this.orientation===0?(h||r)&&(o={right:a}):(h||r)&&(o={bottom:a}),this.add(i,{proportion:0,align:"center",padding:o}),n&&(n=ho.call(this,i,i,1))}var u;if(h){h.orientation=this.orientation,h.eventEmitter=this,h.value=null,h.hasOwnProperty("input")||(h.input=-1),u=new la(t,h),t.add.existing(u);var o;this.orientation===0?r&&(o={right:l}):r&&(o={bottom:l});var v;if(this.orientation===0){var d=Bi(h,"width",void 0);v=d===void 0?1:0}else{var c=Bi(h,"height",void 0);v=c===void 0?1:0}this.add(u,{proportion:v,align:"center",padding:o})}r&&this.add(r),this.addChildrenMap("background",f),this.addChildrenMap("icon",i),this.addChildrenMap("iconMask",n),this.addChildrenMap("slider",u),this.addChildrenMap("text",r);var p=Bi(e,"valuechangeCallback",null);if(p!==null){var g=Bi(e,"valuechangeCallbackScope",void 0);this.on("valuechange",p,g)}this.setEnable(Bi(e,"enable",void 0)),this.setValue(Bi(e,"value",0))}get enable(){return this.childrenMap.slider?this.childrenMap.slider.enable:!1}set enable(t){this.childrenMap.slider&&this.childrenMap.slider.setEnable(t)}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}get value(){return this.childrenMap.slider?this.childrenMap.slider.value:0}set value(t){!this.childrenMap.slider||(this.childrenMap.slider.value=t)}setValue(t,e,f){return this.childrenMap.slider&&this.childrenMap.slider.setValue(t,e,f),this}addValue(t,e,f){return this.childrenMap.slider&&this.childrenMap.slider.addValue(t,e,f),this}getValue(t,e){return this.childrenMap.slider?this.childrenMap.slider.getValue(t,e):0}easeValueTo(t,e,f){return this.childrenMap.slider&&this.childrenMap.slider.easeValueTo(t,e,f),this}stopEaseValue(){return this.childrenMap.slider&&this.childrenMap.slider.stopEaseValue(),this}setEaseValueDuration(t){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueDuration(t),this}setEaseValueFunction(t){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueFunction(t),this}get text(){var t=this.childrenMap.text;if(t===void 0)return"";var e;return t.text?e=t.text:e=t.getData("text"),e}set text(t){var e=this.childrenMap.text;e!==void 0&&(e.setText?e.setText(t):e.setData("text",t))}setText(t){return this.text=t,this}}xt.register("numberBar",function(s){var t=new mv(this.scene,s);return this.scene.add.existing(t),t});Ct(window,"RexPlugins.UI.NumberBar",mv);xt.register("scrollBar",function(s){var t=new ql(this.scene,s);return this.scene.add.existing(t),t});Ct(window,"RexPlugins.UI.ScrollBar",ql);const pd=Phaser.Utils.Objects.GetValue,bx={leftTop:"left-top",centerTop:"center-top",rightTop:"right-top",leftCenter:"left-center",center:"center",rightCenter:"right-center",leftBottom:"left-bottom",centerBottom:"center-bottom",rightBottom:"right-bottom"};class xv extends yn{constructor(t,e){super(t,e),this.type="rexBadge";var f=pd(e,"background",void 0);f&&this.addBackground(f),this.addChildrenMap("background",f);var i=pd(e,"main",void 0);i&&this.add(i,{key:"main",align:"center",expand:!1}),this.addChildrenMap("main",i);for(var n in bx){var h=pd(e,n,void 0);h&&(this.add(h,{key:n,align:bx[n],expand:!1}),this.addChildrenMap(n,h))}}}xt.register("badgeLabel",function(s){var t=new xv(this.scene,s);return this.scene.add.existing(t),t});Ct(window,"RexPlugins.UI.BadgeLabel",xv);const w4=yn.prototype.add;var Gx=function(s,t,e,f,i,n,h,r,a){return s.setVisible(!1),w4.call(this,s,t,e,f,i,n,h,r,a),this},I4={add:Gx,addPage:Gx},D4=function(s){return s===void 0?null:this.sizerChildren.hasOwnProperty(s)?this.sizerChildren[s]:null};const Nx=_i.prototype.setChildVisible;var B4=function(s){this._previousKey=this._currentKey;var t=this.previousPage;t&&(this.swapMode===0?(Nx.call(this,t,!1),this.emit("pageinvisible",t,this._previousKey,this)):t.destroy()),s&&!this.sizerChildren.hasOwnProperty(s)&&this.emit("createpage",s,this),this._currentKey=s;var e=this.currentPage;return e&&(Nx.call(this,e,!0),this.emit("pagevisible",e,this._currentKey,this),this.fadeInDuration>0&&e.setAlpha(0).fadeIn(this.fadeInDuration,1)),this},b4=function(s){return this.sizerChildren.hasOwnProperty(s)},nC={getPage:D4,swapPage:B4,hasPage:b4};Object.assign(nC,I4);const Yx=Phaser.Utils.Objects.GetValue;class Ro extends yn{constructor(t,e){super(t,e),this.type="rexPages",this.childrenMap=this.sizerChildren,this._previousKey=void 0,this._currentKey=void 0,this.setSwapMode(Yx(e,"swapMode",0)),this.setFadeInDuration(Yx(e,"fadeIn",0))}setSwapMode(t){return typeof t=="string"&&(t=G4[t]),this.swapMode=t,this}setFadeInDuration(t){return this.fadeInDuration=t,this}get previousKey(){return this._previousKey}get currentKey(){return this._currentKey}set currentKey(t){this.swapPage(t)}get currentPage(){return this.getPage(this.currentKey)}get previousPage(){return this.getPage(this.previousKey)}get keys(){return Object.keys(this.sizerChildren)}}Object.assign(Ro.prototype,nC);const G4={invisible:0,destroy:1};xt.register("pages",function(s){var t=new Ro(this.scene,s);return this.scene.add.existing(t),t});Ct(window,"RexPlugins.UI.Pages",Ro);const sC=Phaser.Math.Vector3,N4=Phaser.Math.Matrix4;var zx=new sC,Vx=new sC,Ux=new N4,Y4=function(s,t,e,f,i,n,h){t===void 0&&(t=0),e===void 0&&(e=0),f===void 0&&(f=0),i===void 0&&(i=0),n===void 0&&(n=0),h===void 0&&(h=0),zx.set(t,e,f),Vx.set(i,n,h),Ux.fromRotationXYTranslation(Vx,zx,!0);for(var r=0,a=s.vertices.length;r<a;r++)s.vertices[r].transformMat4(Ux)};const z4=Phaser.GameObjects.Mesh,V4=Phaser.Utils.Objects.IsPlainObject,sr=Phaser.Utils.Objects.GetValue,U4=Phaser.Geom.Mesh.GenerateGridVerts,gd=Phaser.Math.RadToDeg,el=Phaser.Math.DegToRad,rC=45,W4=1+1/Math.sin(el(rC));class aC extends z4{constructor(t,e,f,i,n,h){V4(e)&&(h=e,e=sr(h,"x",0),f=sr(h,"y",0),i=sr(h,"key",null),n=sr(h,"frame",null)),super(t,e,f,i,n),this.type="rexPerspectiveImage",this.setSizeToFrame(),this.resetPerspective(),this.panZ(W4),this.hideCCW=sr(h,"hideCCW",!0);var r=sr(h,"gridWidth",32),a=sr(h,"gridHeight",r);this.resetVerts(r,a)}resetPerspective(){return this.setPerspective(this.width,this.height,rC),this}resetVerts(t,e){if(t!==void 0&&(this.gridWidth=t),e!==void 0&&(this.gridHeight=e),this.clear(),this.dirtyCache[9]=-1,this.width===0||this.height===0)return this;var f=this.frame.cutWidth,i=this.frame.cutHeight;U4({mesh:this,texture:this.texture.key,frame:this.frame.name,width:f/this.height,height:i/this.height,widthSegments:Math.ceil(f/this.gridWidth),heightSegments:Math.ceil(i/this.gridHeight),flipY:this.frame.source.isRenderTexture});var n=this.transformInfo;return n&&this.transformVerts(n.x,n.y,n.z,n.rotateX,n.rotateY,n.rotateZ),this}syncSize(){return this.setSizeToFrame(),this.resetPerspective(),this.resetVerts(),this}get rotationX(){return this.modelRotation.x}set rotationX(t){this.modelRotation.x=t}get angleX(){return gd(this.rotationX)}set angleX(t){this.rotationX=el(t)}get rotationY(){return this.modelRotation.y}set rotationY(t){this.modelRotation.y=t}get angleY(){return gd(this.rotationY)}set angleY(t){this.rotationY=el(t)}get rotationZ(){return this.modelRotation.z}set rotationZ(t){this.modelRotation.z=t}get angleZ(){return gd(this.rotationZ)}set angleZ(t){this.rotationZ=el(t)}transformVerts(t,e,f,i,n,h){return t===void 0&&(t=0),e===void 0&&(e=0),f===void 0&&(f=0),i===void 0&&(i=0),n===void 0&&(n=0),h===void 0&&(h=0),this.transformInfo||(this.transformInfo={}),this.transformInfo.x=t,this.transformInfo.y=e,this.transformInfo.rotateX=i,this.transformInfo.rotateY=n,this.transformInfo.rotateZ=h,Y4(this,t,e,f,i,n,h),this}forceUpdate(){return this.dirtyCache[10]=1,this}get tint(){return this.vertices.length===0?16777215:this.vertices[0].color}set tint(t){for(var e=this.vertices,f=0,i=e.length;f<i;f++)e[f].color=t}setTint(t){return this.tint=t,this}}const X4=Phaser.GameObjects.RenderTexture,H4=Phaser.Utils.Objects.IsPlainObject,Wh=Phaser.Utils.Objects.GetValue;class oC extends aC{constructor(t,e,f,i,n,h){H4(e)&&(h=e,e=Wh(h,"x",0),f=Wh(h,"y",0),i=Wh(h,"width",32),n=Wh(h,"height",32));var r=new X4(t,e,f,i,n).setOrigin(.5);super(t,e,f,r.texture.key,null,h),this.type="rexPerspectiveRenderTexture",this.rt=r}destroy(t){super.destroy(t),this.rt.destroy(),this.rt=null}snapshot(t,e){return e===void 0&&(e={}),e.gameObjects=t,e.renderTexture=this.rt,mc(e),(this.width!==this.frame.realWidth||this.height!==this.frame.realHeight)&&this.syncSize(),this}}Phaser.Animations.AnimationState;Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;var cn=function(s,t,e,f){if(Array.isArray(s))for(var i=!1,n=0,h=s.length;n<h;n++){var r=s[n];if(!(f&&!r)&&(e?i=t.call(e,r,n,s):i=t(r,n,s),i))return}else{var i=!1;for(var a in s){var r=s[a];if(!(f&&!r)&&(e?i=t.call(e,r,a,s):i=t(r,a,s),i))return}}};const md=Phaser.Math.RadToDeg,xd=Phaser.Math.DegToRad;class $4 extends _i{constructor(t,e,f,i,n,h){super(t,e,f,i,n),this.faces=h,cn(h,function(r){r.setPosition(e,f),this.add(r)},this,!0)}get rotationX(){return 0}set rotationX(t){}get angleX(){return md(this.rotationX)}set angleX(t){this.rotationX=xd(t)}get rotationY(){return 0}set rotationY(t){}get angleY(){return md(this.rotationY)}set angleY(t){this.rotationY=xd(t)}get rotationZ(){return 0}set rotationZ(t){}get angleZ(){return md(this.rotationZ)}set angleZ(t){this.rotationZ=xd(t)}setDebug(t,e){return cn(this.faces,function(f){f.setDebug(t,e)},null,!0),this}panX(t){return cn(this.faces,function(e){e.panX(t)},null,!0),this}panY(t){return cn(this.faces,function(e){e.panY(t)},null,!0),this}panZ(t){return cn(this.faces,function(e){e.panZ(t)},null,!0),this}transformVerts(t,e,f,i,n,h){return cn(this.faces,function(r){r.transformVerts(t,e,f,i,n,h)},null,!0),this}forEachFace(t,e,f){return cn(this.faces,t,e,f),this}}const K4=Phaser.Utils.Objects.IsPlainObject,k4={key:"__WHITE"},Z4={image:aC,rendertexture:oC};var Wx=function(s,t){t===void 0&&(t=k4);var e;return K4(t)?(t.hasOwnProperty("type")||(t.hasOwnProperty("key")?t.type="image":t.hasOwnProperty("width")&&(t.type="rendertexture")),e=new Z4[t.type](s,t),s.add.existing(e)):e=t,e},J4=function(s,t,e){var f;if(e===void 0){f=[];for(var i,n,h=0,r=t.length;h<r;h++)n=t[h],n?i=Wx(s,n):i=null,f.push(i)}else{f={};for(var i,a,h=0,r=e.length;h<r;h++)a=e[h],t.hasOwnProperty(a)?i=Wx(s,t[a]):i=null,f[a]=i}return f};const Q4=Phaser.Math.DegToRad,Xx=Q4(180);var j4=function(s,t){var e=t.back;e&&(s.orientation===0?e.transformVerts(0,0,0,0,Xx,0):e.transformVerts(0,0,0,Xx,0,0))};const yd=Phaser.Utils.Objects.GetValue,q4=Phaser.Math.Linear;class _4 extends ur{constructor(t,e){super(t,e),this.resetFromJSON(e),this.boot()}resetFromJSON(t){return super.resetFromJSON(t),this.setEase(yd(t,"ease","Cubic")),this.setFrontToBackDirection(yd(t,"frontToBack",0)),this.setBackToFrontDirection(yd(t,"backToFront",1)),this}setFrontToBackDirection(t){return typeof t=="string"&&(t=Hx[t]),this.endAngleFB=t===0?180:-180,this}setBackToFrontDirection(t){return typeof t=="string"&&(t=Hx[t]),this.endAngleBF=t===0?-180:180,this}start(t,e){if(this.timer.isRunning)return this;this.timer.setDelay(this.delay).setDuration(t);var f=e+1,i=this.parent;return i.face===0?(this.startAngle=0,this.endAngle=this.endAngleFB*f):(this.startAngle=this.endAngleBF,this.endAngle=this.startAngle-this.endAngleBF*f),super.start(),this}flip(t,e){return this.isRunning?this:(t===void 0&&(t=this.duration),e===void 0&&(e=0),this.start(t,e),this.emit("start",this.parent,this),this.parent.currentFaceIndex=(this.parent.currentFaceIndex+e+1)%2,this)}flipRight(t,e){return this.parent.currentFaceIndex===0?this.setFrontToBackDirection(0):this.setBackToFrontDirection(0),this.flip(t,e),this}flipLeft(t,e){return this.parent.currentFaceIndex===0?this.setFrontToBackDirection(1):this.setBackToFrontDirection(1),this.flip(t,e),this}updateGameObject(t,e){var f=this.easeFn(e.t),i=q4(this.startAngle,this.endAngle,f);t.orientation===0?t.angleY=i:t.angleX=i}}const Hx={right:0,"left-to-right":0,left:1,"right-to-left":1},tW=Phaser.Utils.Objects.IsPlainObject,rr=Phaser.Utils.Objects.GetValue,eW=["back","front"];class iW extends $4{constructor(t,e,f,i){tW(e)&&(i=e,e=rr(i,"x",0),f=rr(i,"y",0));var n=J4(t,i,eW),h=n.back,r=n.front,a=rr(i,"width"),l=rr(i,"height");if(a===void 0||l===void 0){if(a===void 0){var o=r?r.width:0,u=h?h.width:0;a=Math.max(o,u)}if(l===void 0){var v=r?r.height:0,d=h?h.height:0;l=Math.max(v,d)}}super(t,e,f,a,l,n),this.type="rexPerspectiveCard",this.frontFaceRotationX=0,this.frontFaceRotationY=0,this.frontFaceRotationZ=0,cn(n,function(p,g){this[`${g}Face`]=p},this);var c=rr(i,"flip",void 0);c!==!1&&(this.flip=new _4(this,c)),this.setOrientation(rr(i,"orientation",0)),j4(this,n),this.setFace(rr(i,"face",0))}get rotationX(){return this.frontFaceRotationX}set rotationX(t){this.frontFaceRotationX!==t&&(this.frontFaceRotationX=t,cn(this.faces,function(e){e.rotationX=t},null,!0))}get rotationY(){return this.frontFaceRotationY}set rotationY(t){this.frontFaceRotationY!==t&&(this.frontFaceRotationY=t,cn(this.faces,function(e){e.rotationY=t},null,!0))}get rotationZ(){return this.frontFaceRotationZ}set rotationZ(t){this.frontFaceRotationZ!==t&&(this.frontFaceRotationZ=t,cn(this.faces,function(e){e.rotationZ=t},null,!0))}setOrientation(t){return typeof t=="string"&&(t=nW[t]),this.orientation=t,this}get face(){return this.currentFaceIndex}set face(t){typeof t=="string"&&(t=sW[t]),this.currentFaceIndex=t;var e=t===1,f=e?180:0;this.orientation===0?this.angleY=f:this.angleX=f}setFace(t){return this.face=t,this}toggleFace(){var t=this.face===0?1:0;return this.setFace(t),this}}const nW={x:0,horizontal:0,h:0,y:1,vertical:1,v:1},sW={front:0,back:1};Phaser.Utils.Objects.GetValue;Phaser.Math.RadToDeg;Phaser.Math.DegToRad;Phaser.Math.Angle.WrapDegrees;Phaser.Math.Angle.ShortestBetween;Phaser.Math.Wrap;Phaser.Math.Linear;Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;Phaser.Math.DegToRad;Phaser.Math.RadToDeg;Phaser.Math.Angle.WrapDegrees;Phaser.Math.Linear;Phaser.Math.Wrap;Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;Phaser.Math.Wrap;const rW=Phaser.Utils.Objects.GetValue;var aW=function(s,t,e){t.visibleSibling=[],t.isRunning=!1,t.useParentBounds=rW(e,"useParentBounds",!1),t.setPosition(s.x,s.y).setVisible(!1),s.pin(t)},hC=function(s,t){if(!s)return!1;for(var e=t.visibleSibling,f=0,i=e.length;f<i;f++)s.setChildVisible(e[f],!0);return e.length=0,s.setChildVisible(t,!1),t.isRunning=!1,!0},oW=function(s,t){if(!s)return!1;hC(s,t);var e=t.useParentBounds;mc({gameObjects:s.getAllVisibleChildren(),renderTexture:t.rt,x:t.x,y:t.y,width:e?s.displayWidth:void 0,height:e?s.displayHeighth:void 0,originX:e?s.originX:void 0,originY:e?s.originY:void 0}),s.setChildVisible(t,!0);for(var f=t.visibleSibling,i=s.children,n=0,h=i.length;n<h;n++){var r=i[n];r.visible&&r!==t&&(s.setChildVisible(r,!1),f.push(r))}return t.isRunning=!0,!0},lC=function(s){return class extends s{constructor(e,f){var i=e.scene;super(i,0,0,1,1,f),i.add.existing(this),aW(e,this,f)}destroy(e){!this.scene||(this.exit(),super.destroy(e))}enter(){var e=oW(this.rexContainer.parent,this);return e&&this.syncSize(),this}exit(){return hC(this.rexContainer.parent,this),this}}};class uC extends lC(oC){get perspectiveState(){return this.isRunning}}const hW=Phaser.Utils.Objects.GetValue;var lW=function(s){var t=this.scene;this.setSnapshotPadding(hW(s,"snapshotPadding",0)),s=lr(s),delete s.width,delete s.height,s.front={width:1,height:1},s.back={width:1,height:1};var e=new iW(t,s);t.add.existing(e);var f=e.flip;if(f){var i=this;f.on("start",function(){i.enterPerspectiveMode()}).on("complete",function(){i.exitPerspectiveMode()})}return e};const uW=["front","back"];var fW={enterPerspectiveMode(){return this.isInPerspectiveMode?this:(this.setChildVisible(this.perspectiveCard,!0),this.snapshotFace(0),this.snapshotFace(1),this.setChildVisible(this.childrenMap.front,!1),this.setChildVisible(this.childrenMap.back,!1),this.perspectiveCard.setSize(this.width,this.height),this)},exitPerspectiveMode(){if(!this.isInPerspectiveMode)return this;this.setChildVisible(this.perspectiveCard,!1);var s=this.perspectiveCard.face===0;return this.setChildVisible(this.childrenMap.front,s),this.setChildVisible(this.childrenMap.back,!s),this},setSnapshotPadding(s){return this.snapshotPadding=s,this},snapshotFace(s){typeof s=="number"&&(s=uW[s]);var t=this.perspectiveCard.faces[s],e=this.childrenMap[s];t.rt.clear();var f=e.visible;e.visible=!0;var i=e.isRexContainerLite?e.getAllVisibleChildren():e;return t.snapshot(i,{padding:this.snapshotPadding}),e.visible=f,this}};const $x=Phaser.Utils.Objects.GetValue;class yv extends yn{constructor(t,e){super(t,e),this.type="rexPerspectiveCard";var f=e.back,i=$x(e,"expand.back",!0);this.add(f,{key:"back",expand:i});var n=e.front,h=$x(e,"expand.front",!0);this.add(n,{key:"front",expand:h}),this.perspectiveCard=lW.call(this,e),this.pin(this.perspectiveCard),this.exitPerspectiveMode(!1)}get flip(){return this.perspectiveCard.flip}get face(){return this.perspectiveCard.face}set face(t){if(!(this.flip&&this.flip.isRunning)){this.perspectiveCard.face=t;var e=t===0,f=this.childrenMap.front,i=this.childrenMap.back;this.setChildVisible(f,e),this.setChildVisible(i,!e)}}setFace(t){return this.face=t,this}toggleFace(){var t=this.face===0?1:0;return this.setFace(t),this}get isInPerspectiveMode(){return this.perspectiveCard.visible}get rotationX(){return this.perspectiveCard.rotationX}set rotationX(t){this.enterPerspectiveMode(),this.perspectiveCard.rotationX=t}get angleX(){return this.perspectiveCard.angleX}set angleX(t){this.enterPerspectiveMode(),this.perspectiveCard.angleX=t}get rotationY(){return this.perspectiveCard.rotationY}set rotationY(t){this.enterPerspectiveMode(),this.perspectiveCard.rotationY=t}get angleY(){return this.perspectiveCard.angleY}set angleY(t){this.enterPerspectiveMode(),this.perspectiveCard.angleY=t}get rotationZ(){return this.perspectiveCard.rotationZ}set rotationZ(t){this.enterPerspectiveMode(),this.perspectiveCard.rotationZ=t}get angleZ(){return this.perspectiveCard.angleZ}set angleZ(t){this.enterPerspectiveMode(),this.perspectiveCard.angleZ=t}panX(t){return this.enterPerspectiveMode(),this.perspectiveCard.panX(t),this}panY(t){return this.enterPerspectiveMode(),this.perspectiveCard.panY(t),this}panZ(t){return this.enterPerspectiveMode(),this.perspectiveCard.panZ(t),this}transformVerts(t,e,f,i,n,h){return this.enterPerspectiveMode(),this.perspectiveCard.transformVerts(t,e,f,i,n,h),this}forEachFace(t,e,f){return this.enterPerspectiveMode(),this.perspectiveCard.forEachFace(t,e,f),this}}Object.assign(yv.prototype,fW);xt.register("perspectiveCard",function(s){var t=new yv(this.scene,s);return this.scene.add.existing(t),t});Ct(window,"RexPlugins.UI.PerspectiveCard",yv);var dW=function(s){var t=this.getElement("tabs.buttons");if(!(s>=t.length))return t[s].name},cW=function(s){for(var t=this.getElement("tabs.buttons"),e=0,f=t.length;e<f;e++)if(t[e].name===s)return e};const vW=Phaser.Utils.Objects.IsPlainObject,Td=Phaser.Utils.Objects.GetValue,pW=Phaser.Utils.String.UUID;var gW=function(s,t,e){if(vW(s)){var f=s;s=Td(f,"key"),t=Td(f,"tab"),e=Td(f,"page")}return s||(s=pW()),t.name=s,this.childrenMap.tabs.addButton(t),this.childrenMap.pages.addPage(e,{key:s}),this},mW=function(s){var t;return typeof s=="number"?t=s:t=this.getPageIndex(s),t!=null&&this.childrenMap.tabs.emitButtonClick(t),this},xW=function(){return this.swapPage(0),this},yW=function(){return this.swapPage(this.getElement("tabs.buttons").length-1),this},TW={swapPage:mW,swapFirstPage:xW,swapLastPage:yW},CW=function(s,t){typeof s=="number"&&(s=this.getPageKey(s));var e=this.childrenMap.tabs,f=e.getByName(s),i=this.childrenMap.pages,n=i.getElement(s);return!f||!n?this:(i.removeChildrenMap(s),e.removeButton(f,t),i.remove(n,t),this)},SW={removePage:CW},EW=function(s){return typeof s=="number"&&(s=this.getPageKey(s)),this.childrenMap.pages.getPage(s)},PW=function(s){var t;return typeof s=="number"?t=s:t=this.getPageIndex(s),this.getElement("tabs.buttons")[t]},fC={getPageKey:dW,getPageIndex:cW,addPage:gW,getPage:EW,getTab:PW};Object.assign(fC,TW,SW);const ar=Phaser.Utils.Objects.GetValue,Xh=Te.prototype.add;class Tv extends Te{constructor(t,e){e===void 0&&(e={});var f=ar(e,"tabPosition","top"),i=f==="left"||f==="right"?"x":"y";e.orientation=i,super(t,e),this.type="rexTabPages";var n=ar(e,"background",void 0);n&&this.addBackground(n);var h=ar(e,"pages"),r=new Ro(t,h);t.add.existing(r);var a=i==="y",l=a?ar(e,"wrapTabs",!1):!1,o=ar(e,"tabs",void 0);o===void 0&&(o={});var u=l?Gs:Ve;o.orientation=a?"x":"y",o.buttonsType="radio";var v=new u(t,o);t.add.existing(v);var d=l?!0:ar(e,"expand.tabs",!1),c=ar(e,"align.tabs","left");switch(f){case"top":case"left":Xh.call(this,v,{proportion:0,expand:d,align:c}),Xh.call(this,r,{proportion:1,expand:!0});break;case"bottom":case"right":Xh.call(this,r,{proportion:1,expand:!0}),Xh.call(this,v,{proportion:0,expand:d,align:c});break}this.addChildrenMap("background",n),this.addChildrenMap("tabs",v),this.addChildrenMap("pages",r),v.on("button.click",function(p){var g=p.name;r.hasPage(g)&&r.swapPage(g)}),v.on("button.statechange",function(p,g,m,x){var y=m?"tab.focus":"tab.blur";this.emit(y,p,p.name)},this),r.on("pagevisible",function(p,g,m){this.emit("page.focus",p,g)}),r.on("pageinvisible",function(p,g,m){this.emit("page.blur",p,g)})}get currentKey(){return this.getElement("pages").currentKey}set currentKey(t){this.showPage(t)}get keys(){return this.getElement("pages").keys}get currentPage(){return this.getElement("pages").currentPage}get previousPage(){return this.getElement("pages").previousPage}}Object.assign(Tv.prototype,fC);xt.register("tabPages",function(s){var t=new Tv(this.scene,s);return this.scene.add.existing(t),t});Ct(window,"RexPlugins.UI.TabPages",Tv);var MW=function(s){return s!==void 0&&(this.text=s),this.lines=vv(this.textObject,this.text,this.lines),this.linesCount=this.lines.length,this._textHeight=void 0,this._textVisibleHeight=void 0,this.updateTextObject(),this},dC=function(s){return(s-this.textLineSpacing)/(this.textLineHeight+this.textLineSpacing)},cC=function(s){return s*(this.textLineHeight+this.textLineSpacing)-this.textLineSpacing},AW=function(s){var t=s+this.visibleLinesCount+1,e;switch(this.textObjectType){case Gi:e=this.lines.slice(s,t).join(`
`);break;case ji:var f=this.lines.getLineStartIndex(s),i=this.lines.getLineEndIndex(t-1);e=this.lines.getSliceTagText(f,i,!0);break;case qi:e=this.lines.slice(s,t).join(`
`);break}return e},vC=function(){var s=this.textObject.rexSizer;this.textObject.y+=s.offsetY-s.preOffsetY,s.preOffsetY=s.offsetY,this.resetChildPositionState(this.textObject),this.textCropEnable&&OW.call(this)},OW=function(){if(!!this.textObject.setCrop){var s=this.textObject.rexSizer.offsetY,t,e;s<=0?(t=-s,e=this.height):(t=0,e=this.height-s),this.textObject.setCrop(0,t,this.width,e)}},RW=function(){var s=Math.max(Math.floor(dC.call(this,-this.textOY)),0),t=cC.call(this,s)+this.textOY,e=AW.call(this,s);return pv(this.textObject,e),this.textObject.rexSizer.offsetY=t,vC.call(this),this},LW=function(){return this._textLineHeight=void 0,this._textLineSpacing=void 0,this._visibleLinesCount=void 0,this._textHeight=void 0,this._textVisibleHeight=void 0,So.call(this),this},FW=function(s,t,e){if(e+=this.textLineHeight+this.textLineSpacing,!(this.textObjectWidth===t&&this._textObjectRealHeight===e)){switch(this.textObjectWidth=t,this._textObjectRealHeight=e,this.textObjectType){case Gi:case ji:s.setFixedSize(t,e);var f=s.style,i=Math.max(t,0);this.textObjectType===Gi?f.wordWrapWidth=i:(f.wrapMode===0&&(f.wrapMode=1),f.wrapWidth=i);break;case qi:s.setMaxWidth(t);break}this.setText()}},wW=function(){var s,t,e,f=this.left,i=this.top,n,h,r,a;s=this.textObject,s.rexSizer.hidden||(t=s.rexSizer,e=t.padding,n=f+e.left,h=i+e.top,r=this.width-e.left-e.right,a=this.height-e.top-e.bottom,FW.call(this,s,r,a),Gl(s,n,h,r,a,t.align),t.preOffsetY=0,vC.call(this),this.textMask&&(this.textMask.setPosition().resize(),this.resetChildPositionState(this.textMask)))},IW={setText:MW,updateTextObject:RW,preLayout:LW,layoutChildren:wW};const Kx=Phaser.Utils.Objects.IsPlainObject,bi=Phaser.Utils.Objects.GetValue,DW=Phaser.Display.Align.TOP_LEFT;class pC extends fr{constructor(t,e,f,i,n,h){Kx(e)?(h=e,e=bi(h,"x",0),f=bi(h,"y",0),i=bi(h,"width",void 0),n=bi(h,"height",void 0)):Kx(i)&&(h=i,i=bi(h,"width",void 0),n=bi(h,"height",void 0)),super(t,e,f,i,n,h),this.type="rexTextBlock",this.textObject=void 0,this.linesCount=0,this.textMask=void 0,this.textObjectType=void 0,this._textLineHeight=void 0,this._textLineSpacing=void 0,this._visibleLinesCount=void 0,this._textHeight=void 0,this._textVisibleHeight=void 0,this.lines=void 0,this.text=bi(h,"content",""),this._textOY=0,this.execeedTopState=!1,this.execeedBottomState=!1,this.setClampMode(bi(h,"clamplTextOY",!0)),this.alwaysScrollable=bi(h,"alwaysScrollable",!1);var r=bi(h,"background",void 0),a=bi(h,"text",void 0);a===void 0&&(a=BW(t)),this.textCropEnable=bi(h,"textCrop",!!a.setCrop);var l=bi(h,"textMask",!this.textCropEnable);r&&this.addBackground(r),this.add(a),this.sizerChildren=[a];var o=this.getSizerConfig(a);o.align=DW,o.padding=aa(0),o.expand=!0,this.textObject=a,this.textObjectType=Oo(a),o.preOffsetY=0,o.offsetY=0,l&&(this.textMask=ho.call(this,this.textObject,this)),this.addChildrenMap("background",r),this.addChildrenMap("text",a)}destroy(t){if(!!this.scene){if(this.textObject=void 0,this.textMask=void 0,this.lines){switch(this.textObjectType){case Gi:this.lines.length=0;break;case ji:this.lines.destroy();break;case qi:this.lines.length=0;break}this.lines=void 0}super.destroy(t)}}setClampMode(t){return t===void 0&&(t=!0),this.clampTextOY=t,this}get textLineHeight(){if(this._textLineHeight===void 0){var t;switch(this.textObjectType){case Gi:case ji:var e=this.textObject.style;t=e.metrics.fontSize+e.strokeThickness;break;case qi:var f=this.textObject.fontSize/this.textObject.fontData.size;t=this.textObject.fontData.lineHeight*f;break}this._textLineHeight=t}return this._textLineHeight}get textLineSpacing(){if(this._textLineSpacing===void 0){var t;switch(this.textObjectType){case Gi:case ji:t=this.textObject.lineSpacing;break;case qi:t=0;break}this._textLineSpacing=t}return this._textLineSpacing}get visibleLinesCount(){return this._visibleLinesCount===void 0&&(this._visibleLinesCount=Math.floor(dC.call(this,this._textObjectRealHeight))),this._visibleLinesCount}get topTextOY(){return 0}get bottomTextOY(){return-this.textVisibleHeight}get textHeight(){return this._textHeight===void 0&&(this._textHeight=cC.call(this,this.linesCount)),this._textHeight}get textObjectHeight(){return this._textObjectRealHeight-(this.textLineHeight+this.textLineSpacing)}get textVisibleHeight(){if(this._textVisibleHeight===void 0){var t=this.textHeight-this.textObjectHeight;!this.alwaysScrollable&&t<0&&(t=0),this._textVisibleHeight=t}return this._textVisibleHeight}textOYExceedTop(t){return t===void 0&&(t=this.textOY),t>this.topTextOY}textOYExeceedBottom(t){return t===void 0&&(t=this.textOY),t<this.bottomTextOY}get textOY(){return this._textOY}set textOY(t){var e=this.topTextOY,f=this.bottomTextOY,i=this.textOYExceedTop(t),n=this.textOYExeceedBottom(t);this.clampTextOY&&(this.visibleLinesCount>this.linesCount?t=0:i?t=e:n&&(t=f)),this._textOY!==t&&(this._textOY=t,this.updateTextObject()),i&&(this.execeedTopState||this.emit("execeedtop",this,t,e)),this.execeedTopState=i,n&&(this.execeedBottomState||this.emit("execeedbottom",this,t,f)),this.execeedBottomState=n}setTextOY(t){return this.textOY=t,this}set t(t){this.textOY=-this.textVisibleHeight*t}get t(){var t=this.textVisibleHeight;return t===0?0:this.textOY/-t}setTextOYByPercentage(t){return this.t=t,this}}var BW=function(s){return s.add.text(0,0,"")};Object.assign(pC.prototype,IW);var bW=function(s){Object.defineProperty(s,"childOY",{configurable:!0,get:function(){return s.textOY},set:function(t){s.textOY=t}}),Object.defineProperty(s,"topChildOY",{get:function(){return s.topTextOY}}),Object.defineProperty(s,"bottomChildOY",{get:function(){return s.bottomTextOY}}),Object.defineProperty(s,"childVisibleHeight",{get:function(){return s.textObjectHeight}}),Object.defineProperty(s,"childHeight",{get:function(){return s.textHeight}})},GW=function(s){var t=this.childrenMap.child;return t.setText(s),this.resizeController(),this},NW=function(s){return this.setText(this.text+s),this};const es=Phaser.Utils.Objects.GetValue;class eu extends _l{constructor(t,e){e===void 0&&(e={});var f=es(e,"text",void 0),i=es(e,"textWidth",void 0),n=es(e,"textHeight",void 0),h=es(e,"textCrop",!!f.setCrop),r=es(e,"textMask",!h),a=es(e,"content",""),l=new pC(t,{width:i,height:n,text:f,textMask:r,textCrop:h&&!r,content:a,clamplTextOY:es(e,"clamplChildOY",!1),alwaysScrollable:es(e,"alwaysScrollable",!1)});t.add.existing(l);var o=i===void 0?1:0,u=n===void 0;bW(l),e.scrollMode=0,e.type="rexTextArea",e.child={gameObject:l,proportion:o,expand:u};var v=es(e,"space",void 0);v&&(v.child=v.text),super(t,e),this.addChildrenMap("text",f)}get text(){return this.childrenMap.child.text}get linesCount(){return this.childrenMap.child.linesCount}get contentHeight(){return this.childrenMap.child.textHeight}}var YW={setText:GW,appendText:NW};Object.assign(eu.prototype,YW);xt.register("textArea",function(s){var t=new eu(this.scene,s);return this.scene.add.existing(t),t});Ct(window,"RexPlugins.UI.TextArea",eu);var zW=function(){if(this.rexSizer.hidden)return 0;var s,t=this.child,e=t.rexSizer;return e.hidden?s=0:this.scrollMode===0?s=this.getChildWidth(t):s=0,s},VW=function(){if(this.rexSizer.hidden)return 0;var s,t=this.child,e=t.rexSizer;return e.hidden||this.scrollMode===0?s=0:s=t.isRexSizer?Math.max(t.minHeight,t.childrenHeight):t.hasOwnProperty("minHeight")?t.minHeight:Qt(t),s},UW=function(s){return s===void 0&&(s=[]),this.child&&this.child.isRexSizer&&s.push(this.child),s},WW=function(){var s=this.left,t=this.top;this.scrollMode===0?t+=this.childOY:s+=this.childOY,this.child.setPosition(s,t),this.resetChildPositionState(this.child),this.setMaskChildrenFlag()},XW=function(){var s=this.child,t,e;s.rexSizer.hidden||(this.scrollMode===0?t=this.width:e=this.height,s.isRexSizer?s.runLayout(this,t,e):bs(s,t,e),this.resetChildPosition(),this.layoutChildrenMask(),this.maskChildren())},gC={getChildrenWidth:zW,getChildrenHeight:VW,getChildrenSizers:UW,resetChildPosition:WW,layoutChildren:XW};Object.assign(gC,KT);const kx=Phaser.Utils.Objects.IsPlainObject,fn=Phaser.Utils.Objects.GetValue,HW=Phaser.Display.Align.TOP_LEFT;class mC extends fr{constructor(t,e,f,i,n,h){kx(e)?(h=e,e=fn(h,"x",0),f=fn(h,"y",0),i=fn(h,"width",void 0),n=fn(h,"height",void 0)):kx(i)&&(h=i,i=fn(h,"width",void 0),n=fn(h,"height",void 0)),super(t,e,f,i,n,h),this.type="rexScrollableBlock",this.child=void 0,this.childrenMask=void 0,this._childOY=0,this.execeedTopState=!1,this.execeedBottomState=!1,this.setScrollMode(fn(h,"scrollMode",!0)),this.setClampMode(fn(h,"clamplChildOY",!0));var r=fn(h,"child",void 0),a=fn(h,"expand",!0);r.setOrigin&&r.setOrigin(0),this.add(r),this.sizerChildren=[r];var l=this.getSizerConfig(r);l.align=HW,l.expand=a,this.child=r,this.setupChildrenMask(fn(h,"mask",void 0))}destroy(t){!this.scene||(this.destroyChildrenMask(),this.child=void 0,super.destroy(t))}setScrollMode(t){return typeof t=="string"&&(t=XT[t.toLowerCase()]),this.scrollMode=t,this}setClampMode(t){return t===void 0&&(t=!0),this.clampChildOY=t,this}get instHeight(){return this.scrollMode===0?this.height:this.width}get instWidth(){return this.scrollMode===0?this.width:this.height}get childHeight(){return this.scrollMode===0?Qt(this.child):ne(this.child)}get childWidth(){return this.scrollMode===0?ne(this.child):Qt(this.child)}get topChildOY(){return 0}get bottomChildOY(){return-this.visibleHeight}get childVisibleHeight(){return this.instHeight}get visibleHeight(){var t=this.childHeight-this.childVisibleHeight;return t<0&&(t=0),t}childOYExceedTop(t){return t===void 0&&(t=this.childOY),t>this.topChildOY}childOYExeceedBottom(t){return t===void 0&&(t=this.childOY),t<this.bottomChildOY}get childOY(){return this._childOY}set childOY(t){var e=this.topChildOY,f=this.bottomChildOY,i=this.childOYExceedTop(t),n=this.childOYExeceedBottom(t);this.clampChildOY&&(this.childVisibleHeight>this.childHeight?t=0:i?t=e:n&&(t=f)),this._childOY!==t&&(this._childOY=t,this.resetChildPosition()),i&&(this.execeedTopState||this.emit("execeedtop",this,t,e)),this.execeedTopState=i,n&&(this.execeedBottomState||this.emit("execeedbottom",this,t,f)),this.execeedBottomState=n}setChildOY(t){return this.childOY=t,this}set t(t){this.childOY=-this.visibleHeight*t}get t(){var t=this.visibleHeight;return t===0?0:this.childOY/-t}setChildOYByPercentage(t){return this.t=t,this}}Object.assign(mC.prototype,gC);const Xa=Phaser.Utils.Objects.GetValue;class xC extends _l{constructor(t,e){e===void 0&&(e={});var f=jl(e),i=Xa(e,"panel",void 0);i===void 0&&(i={}),i.scrollMode=f,i.clamplChildOY=Xa(e,"clamplChildOY",!1);var n=new mC(t,i);t.add.existing(n);var h=Xa(i,"width",void 0),r=Xa(i,"height",void 0),a,l;f===0?(a=h===void 0?1:0,l=r===void 0):(a=r===void 0?1:0,l=h===void 0),e.type="rexScrollablePanel",e.child={gameObject:n,proportion:a,expand:l};var o=Xa(e,"space",void 0);o&&(o.child=o.panel),super(t,e),this.addChildrenMap("panel",n.child),this.addChildrenMap("panelLayer",n.maskLayer)}setChildrenInteractive(t){return t===void 0&&(t={}),t.hasOwnProperty("eventEmitter")||(t.eventEmitter=this),t.hasOwnProperty("targets")||(t.targets=[this.childrenMap.panel]),Qc(this.childrenMap.child,t),this}}xt.register("scrollablePanel",function(s){var t=new xC(this.scene,s);return this.scene.add.existing(t),t});Ct(window,"RexPlugins.UI.ScrollablePanel",xC);var Hh={popUp:function(s,t){s.popUp(t)},scaleDown:function(s,t){s.scaleDown(t)},fadeIn:function(s,t){s.fadeIn(t)},fadeOut:function(s,t){s.fadeOut(t)}},yC=function(s,t,e,f){e===void 0&&(e=0),f===void 0&&(f=t.length),s.length=f-e;for(var i=0,n=s.length;i<n;i++)s[i]=t[i+e];return s};const il=Phaser.Utils.Objects.GetValue;var Jd=function(s,t,e){var f=il(e,"reverse",!1),i;if(xn(s[0]))if(f)for(var h=s.length,n=h-1;n>=0;n--)i=Jd(s[n],t,e);else for(var n=0,h=s.length;n<h;n++)i=Jd(s[n],t,e);else i=$W(s,t,e);return i},$W=function(s,t,e){var f=il(e,"argsConvert",void 0),i=il(e,"argsConvertScope",void 0),n=s[0];if(Cs=yC(Cs,s,1),f){f===!0&&(f=aT,i=void 0);for(var h=0,r=Cs.length;h<r;h++)i?Cs[h]=f.call(i,Cs[h],s):Cs[h]=f(Cs[h],s)}var a;typeof n=="string"?(a=t[n],a==null&&(a=il(t,n,null))):a=n;var l=a.apply(t,Cs);return l},Cs=[];const dn=Phaser.Utils.Objects.GetValue;class KW extends He{constructor(t,e){super(t,e);var f=dn(e,"clock",void 0);f||(f=new nT(t)),this.clock=f,this.clock.on("update",this.update,this),this.resetFromJSON(e)}resetFromJSON(t){return this.clock.resetFromJSON(dn(t,"clock",void 0)),this.state=dn(t,"state",0),this.commands=dn(t,"commands",[]),this.scope=dn(t,"scope",void 0),this.setTimeUnit(dn(t,"timeUnit",0)),this.setDtMode(dn(t,"dtMode",0)),this.index=dn(t,"index",0),this.nextTime=dn(t,"nextTime",0),this}toJSON(){return{clock:this.clock.toJSON(),state:this.state,commands:this.commands,scope:this.scope,timeUnit:this.timeUnit,dtMode:this.dtMode,index:this.index,nextTime:this.nextTime}}shutdown(t){this.isShutdown||(this.clock.shutdown(t),this.commands=void 0,super.shutdown(t))}load(t,e,f){this.stop();var i=dn(f,"timeUnit",void 0);i!==void 0&&this.setTimeUnit(i);var n=dn(f,"dtMode",void 0);return n!==void 0&&this.setDtMode(n),t=t.filter(function(h){var r=h[0];return!isNaN(r)}).map(function(h){var r=h[0];return typeof r=="string"&&(h[0]=parseFloat(h[0])),h}),this.dtMode===0&&t.sort(function(h,r){var a=h[0],l=r[0];return a>l?1:a<l?-1:0}),this.commands=t,this.scope=e,this}start(t){return t===void 0&&(t=0),this.stop(),this.index=0,this.state=1,this.nextTime=this.getNextDt(0),this.clock.start(t),this.update(t),this.emit("start",this.parent,this),this}pause(){return this.clock.pause(),this.emit("pause",this.parent,this),this}resume(){return this.clock.resume(),this.emit("resume",this.parent,this),this}stop(){return this.clock.stop(),this.state=0,this.emit("stop",this.parent,this),this}seek(t){return this.clock.seek(t),this}seekToNext(){return this.seek(this.nextTime),this}get isPlaying(){return this.clock.isRunning}get completed(){return this.state===2}get timeScale(){return this.clock.timeScale}set timeScale(t){this.clock.timeScale=t}setTimeScale(t){return this.timeScale=t,this}get now(){return this.clock.now}update(t){if(this.nextTime>t)return this;for(var e=this.commands.length-1;;){var f=this.commands[this.index],i=f[1];if(xn(i)||(i=yC(kW,f,1)),Jd(i,this.scope),this.emit("runcommand",i,this.scope),this.index===e)return this.complete(),this;if(this.index++,this.nextTime=this.getNextDt(this.nextTime),this.nextTime>t)return this}}complete(){this.clock.stop(),this.state=2,this.emit("complete",this.parent,this)}getNextDt(t){var e=this.commands[this.index][0];return this.timeUnit===1&&(e=e*1e3),this.dtMode===1&&(e+=t),e}setDtMode(t){return typeof t=="string"&&(t=JW[t]),this.dtMode=t,this}setTimeUnit(t){return typeof t=="string"&&(t=ZW[t]),this.timeUnit=t,this}}var kW=[];const ZW={ms:0,s:1,sec:1},JW={abs:0,absolute:0,inc:1,increment:1},Ha=Phaser.Utils.Objects.GetValue;class Cv extends ha{constructor(t,e){e===void 0&&(e={text:createDefaultTextObject(t)}),super(t,e),this.type="rexToast",this.setTransitInTime(Ha(e,"duration.in",200)),this.setDisplayTime(Ha(e,"duration.hold",1200)),this.setTransitOutTime(Ha(e,"duration.out",200)),this.setTransitInCallback(Ha(e,"transitIn",Ss.popUp)),this.setTransitOutCallback(Ha(e,"transitOut",Ss.scaleDown)),this.player=new KW(this,{dtMode:1}),this.messages=[],this.scaleX0=void 0,this.scaleY0=void 0,this.setVisible(!1)}destroy(t){!this.scene||(this.player.destroy(),this.player=void 0,this.messages=void 0,super.destroy(t))}setDisplayTime(t){return this.displayTime=t,this}setTransitOutTime(t){return this.transitOutTime=t,this}setTransitInTime(t){return this.transitInTime=t,this}setTransitInCallback(t){switch(typeof t=="string"&&(t=Ss[t]),t){case Ss.popUp:t=Hh.popUp;break;case Ss.fadeIn:t=Hh.fadeIn;break}return t||(t=gi),this.transitInCallback=t,this}setTransitOutCallback(t){switch(typeof t=="string"&&(t=Ss[t]),t){case Ss.scaleDown:t=Hh.scaleDown;break;case Ss.fadeOut:t=Hh.fadeOut;break}return t||(t=gi),this.transitOutCallback=t,this}setScale(t,e){return e===void 0&&(e=t),this.scaleX0=t,this.scaleY0=e,super.setScale(t,e),this}showMessage(t){if(this.scaleX0===void 0&&(this.scaleX0=this.scaleX),this.scaleY0===void 0&&(this.scaleY0=this.scaleY),t===void 0){if(this.messages.length===0)return this;t=this.messages.shift()}if(this.player.isPlaying)return this.messages.push(t),this;this.setScale(this.scaleX0,this.scaleY0).setVisible(!0),typeof t=="string"?this.setText(t):t(this),this.layout();var e=[[0,[this.transitInCallback,this,this.transitInTime]],[this.transitInTime,[gi]],[this.displayTime,[this.transitOutCallback,this,this.transitOutTime]],[this.transitOutTime,[this.setVisible,!1]],[30,[gi]]];return this.player.load(e,this).once("complete",function(){this.showMessage()},this).start(),this}}const Ss={popUp:0,fadeIn:1,scaleDown:0,fadeOut:1};xt.register("toast",function(s){var t=new Cv(this.scene,s);return this.scene.add.existing(t),t});Ct(window,"RexPlugins.UI.Toast",Cv);var QW=function(){return function(s,t,e,f){t!=="panel"&&e.setChildVisible(s,!0)}},jW=function(){return function(s,t,e,f){t!=="panel"&&e.setChildVisible(s,!1)}},qW={show:QW,hide:jW},_W=function(s,t){return t===void 0&&(t=1),function(e,f,i,n){f!=="panel"&&i.fadeChild(e,n?0:s,t)}},tX=function(s,t){return t===void 0&&(t=0),function(e,f,i,n){f!=="panel"&&i.fadeChild(e,n?0:s,t)}},eX={show:_W,hide:tX},Zx=function(s,t){return function(e,f,i,n){f!=="panel"&&i.moveChild(e,n?0:s,t)}},iX={show:Zx,hide:Zx},Jx=function(s,t){return function(e,f,i,n){f==="panel"&&i.moveChild(e,n?0:s,t)}},nX={show:Jx,hide:Jx};const Cd={visible:qW,fade:eX,move:iX,"move-panel":nX};var sX=function(s){var t,e;[t,...e]=typeof s=="string"?[s]:s;var f,i;return Cd.hasOwnProperty(t)?(f=Cd[t].show.apply(null,e),i=Cd[t].hide.apply(null,e)):(f=gi,i=gi),{show:f,hide:i}},rX={showChild(s,t){var e=this.sizerChildren[s];return e&&(this.emit("showchild",e,s,this,t),this.resetChildState(e)),this},hideChild(s,t){var e=this.sizerChildren[s];return e&&(this.emit("hidechild",e,s,this,t),this.resetChildState(e)),this},swapChild(s,t){return this.currentChildKey===s||(this.currentChildKey==="panel"||s==="panel"?(this.previousChildKey=this.currentChildKey,this.currentChildKey=s,this.hideChild(this.previousChildKey,t),this.showChild(this.currentChildKey,t)):(this.swapChild("panel",t),this.swapChild(s,t))),this},showPanel(s){return this.swapChild("panel",s),this},showLeftSide(){return this.swapChild("leftSide"),this},showRightSide(){return this.swapChild("rightSide"),this},showTopSide(){return this.swapChild("topSide"),this},showBottomSide(){return this.swapChild("bottomSide"),this},hideLeftSide(){return this.currentChildKey=="leftSide"&&this.showPanel(),this},hideRightSide(){return this.currentChildKey=="rightSide"&&this.showPanel(),this},hideTopSide(){return this.currentChildKey=="topSide"&&this.showPanel(),this},hideBottomSide(){return this.currentChildKey=="bottomSide"&&this.showPanel(),this},toggleLeftSide(){var s=this.currentChildKey!=="panel"?"panel":"leftSide";return this.swapChild(s),this},toggleRightSide(){var s=this.currentChildKey!=="panel"?"panel":"rightSide";return this.swapChild(s),this},toggleTopSide(){var s=this.currentChildKey!=="panel"?"panel":"topSide";return this.swapChild(s),this},toggleBottomSide(){var s=this.currentChildKey!=="panel"?"panel":"bottomSide";return this.swapChild(s),this}};const aX=_i.prototype.setChildVisible;var oX={setChildVisible(s,t){var e;if(typeof s=="string"){var e=s;s=this.sizerChildren[e]}else e=Hl(this.sizerChildren,s);return t===void 0&&(t=this.currentChildKey===e),aX.call(this,s,t),this}},hX={fadeChild(s,t,e){var f;return typeof s=="string"?(f=s,s=this.sizerChildren[f]):f=Hl(this.sizerChildren,s),t===void 0&&(t=500),e===void 0&&(e=this.currentChildKey===f?1:0),s.fadeIn(t,{start:s.alpha,end:e}),this},fadeChildPromise(s,t,e){return typeof s=="string"&&(s=this.sizerChildren[key]),this.fadeChild(s,t,e),s._fade?We(s._fade):Promise.resolve()}},lX={moveChild(s,t,e,f){var i;typeof s=="string"?(i=s,s=this.sizerChildren[i]):i=Hl(this.sizerChildren,s),t===void 0&&(t=500);var n=this.currentChildKey===i;if(f===void 0)switch(i){case"leftSide":case"rightSide":f=ne(s);break;case"topSide":case"bottomSide":f=Qt(s);break;default:if(n)switch(this.previousChildKey){case"leftSide":case"rightSide":f=ne(this.sizerChildren[this.previousChildKey]);break;case"topSide":case"bottomSide":f=Qt(this.sizerChildren[this.previousChildKey]);break;default:f=0;break}else switch(this.currentChildKey){case"leftSide":case"rightSide":f=ne(this.sizerChildren[this.currentChildKey]);break;case"topSide":case"bottomSide":f=Qt(this.sizerChildren[this.currentChildKey]);break;default:f=0;break}break}var h,r,a,l;if(n)switch(i){case"panel":switch(this.previousChildKey){case"leftSide":h=!0;break;case"rightSide":r=!0;break;case"topSide":a=!0;break;case"bottomSide":l=!0;break}break;case"leftSide":r=!0;break;case"rightSide":h=!0;break;case"topSide":l=!0;break;case"bottomSide":a=!0;break}else switch(i){case"panel":switch(this.currentChildKey){case"leftSide":r=!0;break;case"rightSide":h=!0;break;case"topSide":l=!0;break;case"bottomSide":a=!0;break}break;case"leftSide":h=!0;break;case"rightSide":r=!0;break;case"topSide":a=!0;break;case"bottomSide":l=!0;break}return h?s.moveTo(t,`-=${f}`,void 0,e):r?s.moveTo(t,`+=${f}`,void 0,e):a?s.moveTo(t,void 0,`-=${f}`,e):l?s.moveTo(t,void 0,`+=${f}`,e):s.moveTo(0),this},moveChildPromise(s,t,e,f){return typeof s=="string"&&(s=this.sizerChildren[key]),this.moveChild(s,t,e,f),s._easeMove?We(s._easeMove):Promise.resolve()}},TC={};Object.assign(TC,oX,hX,lX);const vi=Phaser.Utils.Objects.GetValue;class Sv extends yn{constructor(t,e){super(t,e),this.type="rexSides",this.childrenMap=this.sizerChildren,this.previousChildKey=void 0,this.currentChildKey=void 0;var f=vi(e,"showChildCallback",void 0);if(f)if(Kc(f)){var i=vi(e,"showChildCallbackScope",void 0);this.on("showchild",f,i);var n=vi(e,"hideChildCallback",void 0),h=vi(e,"hideChildCallbackScope",void 0);this.on("hidechild",n,h)}else{var r=sX(f);this.on("showchild",r.show),this.on("hidechild",r.hide)}var a=vi(e,"background",void 0),l=vi(e,"panel",void 0),o=vi(e,"leftSide",void 0),u=vi(e,"rightSide",void 0),v=vi(e,"topSide",void 0),d=vi(e,"bottomSide",void 0);if(a&&this.addBackground(a),l&&this.add(l,"panel","center",0,!0),o){var c=vi(e,"expand.left",!0);this.add(o,"leftSide","left-top",0,{height:c})}if(u){var c=vi(e,"expand.right",!0);this.add(u,"rightSide","right-top",0,{height:c})}if(v){var c=vi(e,"expand.top",!0);this.add(v,"topSide","left-top",0,{width:c})}if(d){var c=vi(e,"expand.bottom",!0);this.add(d,"bottomSide","left-bottom",0,{width:c})}}reset(){return this.previousChildKey=void 0,this.currentChildKey="panel",this.showChild("panel",!0),this.hideChild("leftSide",!0),this.hideChild("rightSide",!0),this.hideChild("topSide",!0),this.hideChild("bottomSide",!0),this}}Object.assign(Sv.prototype,rX,TC);xt.register("sides",function(s){var t=new Sv(this.scene,s);return this.scene.add.existing(t),t});Ct(window,"RexPlugins.UI.Sides",Sv);xt.register("click",function(s,t){return new oa(s,t)});Ct(window,"RexPlugins.UI.Click",oa);xt.register("clickOutside",function(s,t){return new kc(s,t)});Ct(window,"RexPlugins.UI.ClickOutside",kc);xt.register("inTouching",function(s,t){return new oo(s,t)});Ct(window,"RexPlugins.UI.InTouching",oo);const uX=Phaser.GameObjects.GameObject;var iu=function(s){return s instanceof uX};xt.register("tap",function(s,t){return iu(s)||(t=s,s=this.scene),new Vl(s,t)});Ct(window,"RexPlugins.UI.Tap",Vl);xt.register("press",function(s,t){return iu(s)||(t=s,s=this.scene),new Ul(s,t)});Ct(window,"RexPlugins.UI.Press",Ul);xt.register("swipe",function(s,t){return iu(s)||(t=s,s=this.scene),new Mo(s,t)});Ct(window,"RexPlugins.UI.Swipe",Mo);xt.register("pan",function(s,t){return iu(s)||(t=s,s=this.scene),new PT(s,t)});Ct(window,"RexPlugins.UI.Pan",PT);var CC=function(s){for(var t=s.scene.input,e=t.manager,f=e.pointersTotal,i=e.pointers,n,h=0;h<f;h++)if(n=i[h],!(!n.primaryDown||t.getDragState(n)!==0||!pc(s,n)))return t.setDragState(n,1),t._drag[n.id]=[s],t.dragDistanceThreshold===0||t.dragTimeThreshold===0?(t.setDragState(n,3),t.processDragStartList(n)):t.setDragState(n,2),!0;return!1};const $h=Phaser.Utils.Objects.GetValue,Qx=Phaser.Math.Distance.Between,jx=Phaser.Math.RotateAroundDistance;class SC extends He{constructor(t,e){super(t,{eventEmitter:!1}),this._enable=void 0,t.setInteractive($h(e,"inputConfig",void 0)),this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.setEnable($h(t,"enable",!0)),this.setAxisMode($h(t,"axis",0)),this.setAxisRotation($h(t,"rotation",0)),this}toJSON(){return{enable:this.enable,axis:this.axisMode,rotation:this.axisRotation}}boot(){var t=this.parent;t.on("dragstart",this.onDragStart,this),t.on("drag",this.onDrag,this),t.on("dragend",this.onDragEnd,this)}shutdown(t){this.isShutdown||(this.pointer=void 0,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||this.dragend(),this._enable=t,this.scene.input.setDraggable(this.parent,t),this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setAxisMode(t){return typeof t=="string"&&(t=fX[t]),this.axisMode=t,this}setAxisRotation(t){return this.axisRotation=t,this}drag(){return CC(this.parent),this}dragend(){if(!!this.isDragging)return this.scene.input.setDragState(this.pointer,5),this}onDragStart(t,e,f){this.isDragging||(this.pointer=t)}onDrag(t,e,f){if(this.pointer===t){var i=this.parent;if(this.axisMode===0)i.x=e,i.y=f;else if(this.axisRotation===0)this.axisMode===1?i.x=e:this.axisMode===2&&(i.y=f);else{var n,h={x:e,y:f};n=Qx(h.x,h.y,i.x,i.y),h=jx(h,i.x,i.y,-this.axisRotation,n),this.axisMode===1?h.y=i.y:this.axisMode===2&&(h.x=i.x),n=Qx(h.x,h.y,i.x,i.y),h=jx(h,i.x,i.y,this.axisRotation,n),i.x=h.x,i.y=h.y}}}onDragEnd(t,e,f,i){this.pointer===t&&(this.pointer=void 0)}get isDragging(){return this.pointer!==void 0}}const fX={both:0,"h&v":0,"x&y":0,horizontal:1,h:1,x:1,vertical:2,v:2,y:2};xt.register("drag",function(s,t){return new SC(s,t)});Ct(window,"RexPlugins.UI.Drag",SC);xt.register("pinch",function(s){return new MT(this.scene,s)});Ct(window,"RexPlugins.UI.Pinch",MT);xt.register("rotate",function(s){return new Jc(this.scene,s)});Ct(window,"RexPlugins.UI.Rotate",Jc);const dX=Phaser.Utils.Objects.IsPlainObject,qx=Phaser.Utils.Objects.GetValue;var _x=function(s,t,e){var f;if(s===void 0)s=e.texture.key,t=e.frame.name;else if(dX(s)){var i=s;s=qx(i,"key",e.texture.key),t=qx(i,"frame",e.frame.name)}else typeof s=="string"||(f=s);return f===void 0&&(f=function(n){n.setTexture(s,t)}),f};const $a=Phaser.Utils.Objects.GetValue,cX=Phaser.Utils.Objects.GetAdvancedValue,vX=Phaser.Math.Linear;class EC extends ur{constructor(t,e){super(t,e),this.resetFromJSON(e),this.boot()}resetFromJSON(t){return super.resetFromJSON(t),this.setDuration(cX(t,"duration",500)),this.setEase($a(t,"ease","Sine")),this.setOrientation($a(t,"orientation",0)),this.setFrontFace($a(t,"front",void 0)),this.setBackFace($a(t,"back",void 0)),this.setFace($a(t,"face",0)),this}setOrientation(t){return typeof t=="string"&&(t=pX[t]),this.orientation=t,this}get face(){return this._face}set face(t){typeof t=="string"&&(t=gX[t]),this._face=t,t===0&&this.frontFaceCallback?this.frontFaceCallback(this.parent):t===1&&this.backFaceCallback&&this.backFaceCallback(this.parent)}setFace(t){return this.face=t,this}toggleFace(){var t=this.face===0?1:0;return this.setFace(t),this}setFrontFace(t,e){return this.frontFaceCallback=_x(t,e,this.parent),this}setBackFace(t,e){return this.backFaceCallback=_x(t,e,this.parent),this}start(){if(this.timer.isRunning)return this;var t=this.parent;return this.orientation===0?this.scale0=t.scaleX:this.scale0=t.scaleY,this.timer.setDelay(this.delay).setDuration(this.duration/2).setRepeat(1),super.start(),this}flip(t){return this.isRunning?this:(t!==void 0&&this.setDuration(t),this.start(),this)}updateGameObject(t,e){e.justRestart&&this.toggleFace();var f=e.t;e.isOddIteration&&(f=1-f),f=this.easeFn(f);var i=vX(this.scale0,0,f);this.orientation===0?t.scaleX=i:t.scaleY=i}}const pX={x:0,horizontal:0,y:1,vertical:1},gX={front:0,back:1};xt.register("flip",function(s,t){return new EC(s,t)});Ct(window,"RexPlugins.UI.Flip",EC);xt.register("shake",function(s,t){return new Xc(s,t)});Ct(window,"RexPlugins.UI.Shake",Xc);xt.register("touchEventStop",function(s,t){return new iv(s,t)});Ct(window,"RexPlugins.UI.TouchEventStop",iv);xt.register("perspective",function(s,t){return new uC(s,t)});Ct(window,"RexPlugins.UI.Perspective",uC);const PC=Phaser.Math.RotateAround;var Sd=function(s,t,e){var f=s.width/2,i=s.height/2;return qe.x=t-f,qe.y=e-i,PC(qe,0,0,s.rotation),qe.x*=s.scaleX,qe.y*=s.scaleY,qe.x+=s.x,qe.y+=s.y,qe},mX=function(s,t,e){var f=s.width/2,i=s.height/2;return qe.x=t-s.x,qe.y=e-s.y,qe.x/=s.scaleX,qe.y/=s.scaleY,PC(qe,0,0,-s.rotation),qe.x+=f,qe.y+=i,qe},qe={x:0,y:0};class xX{constructor(t,e){this.parent=t,this.vertex=e,this._localX=void 0,this._localY=void 0}destroy(){this.parent=void 0,this.vertex=void 0}updateVertexPosition(t,e){var f=this.parent,i=f.height,n=f.frame.cutWidth/i/2,h=f.frame.cutHeight/i/2,r=t/i-n,a=e/i-h,l=this.vertex;return l.x=r,l.y=-a,f.forceUpdate(),this}get localX(){return this._localX}set localX(t){this.setLocalXY(t,this._localY)}get localY(){return this._localY}set localY(t){this.setLocalXY(this._localX,t)}get localXOrigin(){return this._localXOrigin}get localYOrigin(){return this._localYOrigin}resetLocalXY(t,e){return this._localXOrigin=t,this._localYOrigin=e,this._localX=t,this._localY=e,this}setLocalXY(t,e,f){return this._localX===t&&this._localY===e?this:(this._localX=t,this._localY=e,f||this.updateVertexPosition(t,e),this)}setWorldXY(t,e){if(this._worldX===t&&this._worldY===e)return this;var f=mX(this.parent,t,e);return this.setLocalXY(f.x,f.y),this}setPosition(t,e){return this.setWorldXY(t,e),this}getWorldXY(){return Sd(this.parent,this._localX,this._localY)}get x(){var t=Sd(this.parent,this._localX,this._localY);return t.x}set x(t){this.setWorldXY(t,this.y)}get y(){var t=Sd(this.parent,this._localX,this._localY);return t.y}set y(t){this.setWorldXY(this.x,t)}}const yX=Phaser.Geom.Mesh.Vertex,TX=Phaser.Geom.Mesh.Face;var CX=function(s){for(var t=s.isNinePointMode,e=t?9:4,f=s.vertices,i=s.faces,n=s.controlPoints,h=0;h<e;h++){var r=new yX;f.push(r),n.push(new xX(s,r))}for(var a=t?EX:SX,h=0,l=a.length;h<l;h+=3){var o=f[a[h+0]],u=f[a[h+1]],v=f[a[h+2]];i.push(new TX(o,u,v))}t?(s.topLeft=n[0],s.topCenter=n[1],s.topRight=n[2],s.centerLeft=n[3],s.center=n[4],s.centerRight=n[5],s.bottomLeft=n[6],s.bottomCenter=n[7],s.bottomRight=n[8]):(s.topLeft=n[0],s.topRight=n[1],s.bottomLeft=n[2],s.bottomRight=n[3])};const SX=[0,2,3,0,3,1],EX=[0,3,4,0,4,1,1,4,2,4,5,2,3,6,4,6,7,4,4,7,8,4,8,5];var PX=function(s){var t,e=0,f=s.height,i=0,n=s.width;if(s.isNinePointMode){var h=(i+n)/2,r=(e+f)/2;t=[i,e,h,e,n,e,i,r,h,r,n,r,i,f,h,f,n,f]}else t=[i,e,n,e,i,f,n,f];return t};const MX=Phaser.GameObjects.Mesh,AX=Phaser.Utils.Objects.IsPlainObject,Ka=Phaser.Utils.Objects.GetValue;class OX extends MX{constructor(t,e,f,i,n,h){AX(e)&&(h=e,e=Ka(h,"x",0),f=Ka(h,"y",0),i=Ka(h,"key",null),n=Ka(h,"frame",null)),super(t,e,f,i,n),this.type="rexQuadImage",this.isNinePointMode=Ka(h,"ninePointMode",!1),this.controlPoints=[],CX(this),this.hideCCW=!1,this.syncSize()}preDestroy(){for(var t=0,e=this.controlPoints.length;t<e;t++)this.controlPoints[t].destroy();this.controlPoints=void 0,super.preDestroy()}resetVerts(){this.dirtyCache[9]=-1;for(var t=PX(this),e=this.width,f=this.height,i=this.frame.cutWidth/f/2,n=this.frame.cutHeight/f/2,h=this.frame.source.isRenderTexture,r=this.frame.u0,a=this.frame.u1,l=h?this.frame.v1:this.frame.v0,o=h?this.frame.v0:this.frame.v1,u=a-r,v=o-l,d=this.controlPoints,c=0,p=t.length;c<p;c+=2){var g=t[c+0],m=t[c+1],x=c/2,y=g/f-i,T=m/f-n,C=r+u*(g/e),S=l+v*(m/f);this.vertices[x].set(y,-T,0).setUVs(C,S),d[x].resetLocalXY(g,m)}return this}syncSize(){return this.setSizeToFrame(),this.setOrtho(this.width/this.height,1),this.resetVerts(),this}forceUpdate(){return this.dirtyCache[10]=1,this}get tint(){return this.vertices.length===0?16777215:this.vertices[0].color}set tint(t){for(var e=this.vertices,f=0,i=e.length;f<i;f++)e[f].color=t}setTint(t){return this.tint=t,this}}Phaser.GameObjects.RenderTexture;Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;var ty=function(s,t,e){t===void 0&&(t=0),e===void 0&&(e=0);for(var f=s.width,i=s.height,n=f*.5,h=i*.5,r=Math.tan(t)*h,a=Math.tan(e)*n,l=s.controlPoints,o=0,u=l.length;o<u;o++){var v=l[o],d=v.localXOrigin,c=v.localYOrigin;v.localX=d+(c>h?r:-r),v.localY=c+(d>n?a:-a)}};const RX=Phaser.Utils.Objects.IsPlainObject,Kh=Phaser.Utils.Objects.GetValue,ey=Phaser.Math.DegToRad,iy=Phaser.Math.RadToDeg;class LX extends OX{constructor(t,e,f,i,n){if(RX(e)){var h=e;e=Kh(h,"x",0),f=Kh(h,"y",0),i=Kh(h,"key",null),n=Kh(h,"frame",null)}super(t,e,f,i,n),this.type="rexSkewmage",this._skewX=0,this._skewY=0}get skewX(){return this._skewX}set skewX(t){this._skewX=t,ty(this,this._skewX,this._skewY)}get skewXDeg(){return iy(this._skewX)}set skewXDeg(t){this.skewX=ey(t)}get skewY(){return this._skewY}set skewY(t){this._skewY=t,ty(this,this._skewX,this._skewY)}get skewYDeg(){return iy(this._skewY)}set skewYDeg(t){this.skewY=ey(t)}setSkewX(t){return this.skewX=t,this}setSkewY(t){return this.skewY=t,this}setSkew(t,e){return e===void 0&&(e=t),this.skewX=t,this.skewY=e,this}setSkewXDeg(t){return this.skewXDeg=t,this}setSkewYDeg(t){return this.skewYDeg=t,this}setSkewDeg(t,e){return e===void 0&&(e=t),this.skewXDeg=t,this.skewYDeg=e,this}}const FX=Phaser.GameObjects.RenderTexture,wX=Phaser.Utils.Objects.IsPlainObject,kh=Phaser.Utils.Objects.GetValue;class IX extends LX{constructor(t,e,f,i,n){if(wX(e)){var h=e;e=kh(h,"x",0),f=kh(h,"y",0),i=kh(h,"width",32),n=kh(h,"height",32)}var r=new FX(t,e,f,i,n).setOrigin(.5);super(t,e,f,r.texture.key,null),this.type="rexSkewRenderTexture",this.rt=r}destroy(t){super.destroy(t),this.rt.destroy(),this.rt=null}}class MC extends lC(IX){get skewState(){return this.isRunning}}xt.register("skew",function(s,t){return new MC(s,t)});Ct(window,"RexPlugins.UI.Skew",MC);xt.register("anchor",function(s,t){return new Wc(s,t)});Ct(window,"RexPlugins.UI.Anchor",Wc);/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function AC(s){return typeof s=="undefined"||s===null}function DX(s){return typeof s=="object"&&s!==null}function BX(s){return Array.isArray(s)?s:AC(s)?[]:[s]}function bX(s,t){var e,f,i,n;if(t)for(n=Object.keys(t),e=0,f=n.length;e<f;e+=1)i=n[e],s[i]=t[i];return s}function GX(s,t){var e="",f;for(f=0;f<t;f+=1)e+=s;return e}function NX(s){return s===0&&Number.NEGATIVE_INFINITY===1/s}var YX=AC,zX=DX,VX=BX,UX=GX,WX=NX,XX=bX,Fe={isNothing:YX,isObject:zX,toArray:VX,repeat:UX,isNegativeZero:WX,extend:XX};function OC(s,t){var e="",f=s.reason||"(unknown reason)";return s.mark?(s.mark.name&&(e+='in "'+s.mark.name+'" '),e+="("+(s.mark.line+1)+":"+(s.mark.column+1)+")",!t&&s.mark.snippet&&(e+=`

`+s.mark.snippet),f+" "+e):f}function lo(s,t){Error.call(this),this.name="YAMLException",this.reason=s,this.mark=t,this.message=OC(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}lo.prototype=Object.create(Error.prototype);lo.prototype.constructor=lo;lo.prototype.toString=function(t){return this.name+": "+OC(this,t)};var ai=lo;function Ed(s,t,e,f,i){var n="",h="",r=Math.floor(i/2)-1;return f-t>r&&(n=" ... ",t=f-r+n.length),e-f>r&&(h=" ...",e=f+r-h.length),{str:n+s.slice(t,e).replace(/\t/g,"\u2192")+h,pos:f-t+n.length}}function Pd(s,t){return Fe.repeat(" ",t-s.length)+s}function HX(s,t){if(t=Object.create(t||null),!s.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var e=/\r?\n|\r|\0/g,f=[0],i=[],n,h=-1;n=e.exec(s.buffer);)i.push(n.index),f.push(n.index+n[0].length),s.position<=n.index&&h<0&&(h=f.length-2);h<0&&(h=f.length-1);var r="",a,l,o=Math.min(s.line+t.linesAfter,i.length).toString().length,u=t.maxLength-(t.indent+o+3);for(a=1;a<=t.linesBefore&&!(h-a<0);a++)l=Ed(s.buffer,f[h-a],i[h-a],s.position-(f[h]-f[h-a]),u),r=Fe.repeat(" ",t.indent)+Pd((s.line-a+1).toString(),o)+" | "+l.str+`
`+r;for(l=Ed(s.buffer,f[h],i[h],s.position,u),r+=Fe.repeat(" ",t.indent)+Pd((s.line+1).toString(),o)+" | "+l.str+`
`,r+=Fe.repeat("-",t.indent+o+3+l.pos)+`^
`,a=1;a<=t.linesAfter&&!(h+a>=i.length);a++)l=Ed(s.buffer,f[h+a],i[h+a],s.position-(f[h]-f[h+a]),u),r+=Fe.repeat(" ",t.indent)+Pd((s.line+a+1).toString(),o)+" | "+l.str+`
`;return r.replace(/\n$/,"")}var $X=HX,KX=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],kX=["scalar","sequence","mapping"];function ZX(s){var t={};return s!==null&&Object.keys(s).forEach(function(e){s[e].forEach(function(f){t[String(f)]=e})}),t}function JX(s,t){if(t=t||{},Object.keys(t).forEach(function(e){if(KX.indexOf(e)===-1)throw new ai('Unknown option "'+e+'" is met in definition of "'+s+'" YAML type.')}),this.options=t,this.tag=s,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(e){return e},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=ZX(t.styleAliases||null),kX.indexOf(this.kind)===-1)throw new ai('Unknown kind "'+this.kind+'" is specified for "'+s+'" YAML type.')}var Xe=JX;function ny(s,t){var e=[];return s[t].forEach(function(f){var i=e.length;e.forEach(function(n,h){n.tag===f.tag&&n.kind===f.kind&&n.multi===f.multi&&(i=h)}),e[i]=f}),e}function QX(){var s={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,e;function f(i){i.multi?(s.multi[i.kind].push(i),s.multi.fallback.push(i)):s[i.kind][i.tag]=s.fallback[i.tag]=i}for(t=0,e=arguments.length;t<e;t+=1)arguments[t].forEach(f);return s}function Qd(s){return this.extend(s)}Qd.prototype.extend=function(t){var e=[],f=[];if(t instanceof Xe)f.push(t);else if(Array.isArray(t))f=f.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(e=e.concat(t.implicit)),t.explicit&&(f=f.concat(t.explicit));else throw new ai("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");e.forEach(function(n){if(!(n instanceof Xe))throw new ai("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(n.loadKind&&n.loadKind!=="scalar")throw new ai("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(n.multi)throw new ai("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),f.forEach(function(n){if(!(n instanceof Xe))throw new ai("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(Qd.prototype);return i.implicit=(this.implicit||[]).concat(e),i.explicit=(this.explicit||[]).concat(f),i.compiledImplicit=ny(i,"implicit"),i.compiledExplicit=ny(i,"explicit"),i.compiledTypeMap=QX(i.compiledImplicit,i.compiledExplicit),i};var RC=Qd,LC=new Xe("tag:yaml.org,2002:str",{kind:"scalar",construct:function(s){return s!==null?s:""}}),FC=new Xe("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(s){return s!==null?s:[]}}),wC=new Xe("tag:yaml.org,2002:map",{kind:"mapping",construct:function(s){return s!==null?s:{}}}),IC=new RC({explicit:[LC,FC,wC]});function jX(s){if(s===null)return!0;var t=s.length;return t===1&&s==="~"||t===4&&(s==="null"||s==="Null"||s==="NULL")}function qX(){return null}function _X(s){return s===null}var DC=new Xe("tag:yaml.org,2002:null",{kind:"scalar",resolve:jX,construct:qX,predicate:_X,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function t6(s){if(s===null)return!1;var t=s.length;return t===4&&(s==="true"||s==="True"||s==="TRUE")||t===5&&(s==="false"||s==="False"||s==="FALSE")}function e6(s){return s==="true"||s==="True"||s==="TRUE"}function i6(s){return Object.prototype.toString.call(s)==="[object Boolean]"}var BC=new Xe("tag:yaml.org,2002:bool",{kind:"scalar",resolve:t6,construct:e6,predicate:i6,represent:{lowercase:function(s){return s?"true":"false"},uppercase:function(s){return s?"TRUE":"FALSE"},camelcase:function(s){return s?"True":"False"}},defaultStyle:"lowercase"});function n6(s){return 48<=s&&s<=57||65<=s&&s<=70||97<=s&&s<=102}function s6(s){return 48<=s&&s<=55}function r6(s){return 48<=s&&s<=57}function a6(s){if(s===null)return!1;var t=s.length,e=0,f=!1,i;if(!t)return!1;if(i=s[e],(i==="-"||i==="+")&&(i=s[++e]),i==="0"){if(e+1===t)return!0;if(i=s[++e],i==="b"){for(e++;e<t;e++)if(i=s[e],i!=="_"){if(i!=="0"&&i!=="1")return!1;f=!0}return f&&i!=="_"}if(i==="x"){for(e++;e<t;e++)if(i=s[e],i!=="_"){if(!n6(s.charCodeAt(e)))return!1;f=!0}return f&&i!=="_"}if(i==="o"){for(e++;e<t;e++)if(i=s[e],i!=="_"){if(!s6(s.charCodeAt(e)))return!1;f=!0}return f&&i!=="_"}}if(i==="_")return!1;for(;e<t;e++)if(i=s[e],i!=="_"){if(!r6(s.charCodeAt(e)))return!1;f=!0}return!(!f||i==="_")}function o6(s){var t=s,e=1,f;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),f=t[0],(f==="-"||f==="+")&&(f==="-"&&(e=-1),t=t.slice(1),f=t[0]),t==="0")return 0;if(f==="0"){if(t[1]==="b")return e*parseInt(t.slice(2),2);if(t[1]==="x")return e*parseInt(t.slice(2),16);if(t[1]==="o")return e*parseInt(t.slice(2),8)}return e*parseInt(t,10)}function h6(s){return Object.prototype.toString.call(s)==="[object Number]"&&s%1===0&&!Fe.isNegativeZero(s)}var bC=new Xe("tag:yaml.org,2002:int",{kind:"scalar",resolve:a6,construct:o6,predicate:h6,represent:{binary:function(s){return s>=0?"0b"+s.toString(2):"-0b"+s.toString(2).slice(1)},octal:function(s){return s>=0?"0o"+s.toString(8):"-0o"+s.toString(8).slice(1)},decimal:function(s){return s.toString(10)},hexadecimal:function(s){return s>=0?"0x"+s.toString(16).toUpperCase():"-0x"+s.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),l6=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function u6(s){return!(s===null||!l6.test(s)||s[s.length-1]==="_")}function f6(s){var t,e;return t=s.replace(/_/g,"").toLowerCase(),e=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?e===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:e*parseFloat(t,10)}var d6=/^[-+]?[0-9]+e/;function c6(s,t){var e;if(isNaN(s))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===s)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===s)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Fe.isNegativeZero(s))return"-0.0";return e=s.toString(10),d6.test(e)?e.replace("e",".e"):e}function v6(s){return Object.prototype.toString.call(s)==="[object Number]"&&(s%1!==0||Fe.isNegativeZero(s))}var GC=new Xe("tag:yaml.org,2002:float",{kind:"scalar",resolve:u6,construct:f6,predicate:v6,represent:c6,defaultStyle:"lowercase"}),NC=IC.extend({implicit:[DC,BC,bC,GC]}),YC=NC,zC=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),VC=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function p6(s){return s===null?!1:zC.exec(s)!==null||VC.exec(s)!==null}function g6(s){var t,e,f,i,n,h,r,a=0,l=null,o,u,v;if(t=zC.exec(s),t===null&&(t=VC.exec(s)),t===null)throw new Error("Date resolve error");if(e=+t[1],f=+t[2]-1,i=+t[3],!t[4])return new Date(Date.UTC(e,f,i));if(n=+t[4],h=+t[5],r=+t[6],t[7]){for(a=t[7].slice(0,3);a.length<3;)a+="0";a=+a}return t[9]&&(o=+t[10],u=+(t[11]||0),l=(o*60+u)*6e4,t[9]==="-"&&(l=-l)),v=new Date(Date.UTC(e,f,i,n,h,r,a)),l&&v.setTime(v.getTime()-l),v}function m6(s){return s.toISOString()}var UC=new Xe("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:p6,construct:g6,instanceOf:Date,represent:m6});function x6(s){return s==="<<"||s===null}var WC=new Xe("tag:yaml.org,2002:merge",{kind:"scalar",resolve:x6}),Ev=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function y6(s){if(s===null)return!1;var t,e,f=0,i=s.length,n=Ev;for(e=0;e<i;e++)if(t=n.indexOf(s.charAt(e)),!(t>64)){if(t<0)return!1;f+=6}return f%8===0}function T6(s){var t,e,f=s.replace(/[\r\n=]/g,""),i=f.length,n=Ev,h=0,r=[];for(t=0;t<i;t++)t%4===0&&t&&(r.push(h>>16&255),r.push(h>>8&255),r.push(h&255)),h=h<<6|n.indexOf(f.charAt(t));return e=i%4*6,e===0?(r.push(h>>16&255),r.push(h>>8&255),r.push(h&255)):e===18?(r.push(h>>10&255),r.push(h>>2&255)):e===12&&r.push(h>>4&255),new Uint8Array(r)}function C6(s){var t="",e=0,f,i,n=s.length,h=Ev;for(f=0;f<n;f++)f%3===0&&f&&(t+=h[e>>18&63],t+=h[e>>12&63],t+=h[e>>6&63],t+=h[e&63]),e=(e<<8)+s[f];return i=n%3,i===0?(t+=h[e>>18&63],t+=h[e>>12&63],t+=h[e>>6&63],t+=h[e&63]):i===2?(t+=h[e>>10&63],t+=h[e>>4&63],t+=h[e<<2&63],t+=h[64]):i===1&&(t+=h[e>>2&63],t+=h[e<<4&63],t+=h[64],t+=h[64]),t}function S6(s){return Object.prototype.toString.call(s)==="[object Uint8Array]"}var XC=new Xe("tag:yaml.org,2002:binary",{kind:"scalar",resolve:y6,construct:T6,predicate:S6,represent:C6}),E6=Object.prototype.hasOwnProperty,P6=Object.prototype.toString;function M6(s){if(s===null)return!0;var t=[],e,f,i,n,h,r=s;for(e=0,f=r.length;e<f;e+=1){if(i=r[e],h=!1,P6.call(i)!=="[object Object]")return!1;for(n in i)if(E6.call(i,n))if(!h)h=!0;else return!1;if(!h)return!1;if(t.indexOf(n)===-1)t.push(n);else return!1}return!0}function A6(s){return s!==null?s:[]}var HC=new Xe("tag:yaml.org,2002:omap",{kind:"sequence",resolve:M6,construct:A6}),O6=Object.prototype.toString;function R6(s){if(s===null)return!0;var t,e,f,i,n,h=s;for(n=new Array(h.length),t=0,e=h.length;t<e;t+=1){if(f=h[t],O6.call(f)!=="[object Object]"||(i=Object.keys(f),i.length!==1))return!1;n[t]=[i[0],f[i[0]]]}return!0}function L6(s){if(s===null)return[];var t,e,f,i,n,h=s;for(n=new Array(h.length),t=0,e=h.length;t<e;t+=1)f=h[t],i=Object.keys(f),n[t]=[i[0],f[i[0]]];return n}var $C=new Xe("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:R6,construct:L6}),F6=Object.prototype.hasOwnProperty;function w6(s){if(s===null)return!0;var t,e=s;for(t in e)if(F6.call(e,t)&&e[t]!==null)return!1;return!0}function I6(s){return s!==null?s:{}}var KC=new Xe("tag:yaml.org,2002:set",{kind:"mapping",resolve:w6,construct:I6}),Pv=YC.extend({implicit:[UC,WC],explicit:[XC,HC,$C,KC]}),Ns=Object.prototype.hasOwnProperty,ul=1,kC=2,ZC=3,fl=4,Md=1,D6=2,sy=3,B6=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,b6=/[\x85\u2028\u2029]/,G6=/[,\[\]\{\}]/,JC=/^(?:!|!!|![a-z\-]+!)$/i,QC=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function ry(s){return Object.prototype.toString.call(s)}function Dn(s){return s===10||s===13}function hr(s){return s===9||s===32}function mi(s){return s===9||s===32||s===10||s===13}function Qr(s){return s===44||s===91||s===93||s===123||s===125}function N6(s){var t;return 48<=s&&s<=57?s-48:(t=s|32,97<=t&&t<=102?t-97+10:-1)}function Y6(s){return s===120?2:s===117?4:s===85?8:0}function z6(s){return 48<=s&&s<=57?s-48:-1}function ay(s){return s===48?"\0":s===97?"\x07":s===98?"\b":s===116||s===9?"	":s===110?`
`:s===118?"\v":s===102?"\f":s===114?"\r":s===101?"\x1B":s===32?" ":s===34?'"':s===47?"/":s===92?"\\":s===78?"\x85":s===95?"\xA0":s===76?"\u2028":s===80?"\u2029":""}function V6(s){return s<=65535?String.fromCharCode(s):String.fromCharCode((s-65536>>10)+55296,(s-65536&1023)+56320)}var jC=new Array(256),qC=new Array(256);for(var Wr=0;Wr<256;Wr++)jC[Wr]=ay(Wr)?1:0,qC[Wr]=ay(Wr);function U6(s,t){this.input=s,this.filename=t.filename||null,this.schema=t.schema||Pv,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=s.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function _C(s,t){var e={name:s.filename,buffer:s.input.slice(0,-1),position:s.position,line:s.line,column:s.position-s.lineStart};return e.snippet=$X(e),new ai(t,e)}function Ot(s,t){throw _C(s,t)}function dl(s,t){s.onWarning&&s.onWarning.call(null,_C(s,t))}var oy={YAML:function(t,e,f){var i,n,h;t.version!==null&&Ot(t,"duplication of %YAML directive"),f.length!==1&&Ot(t,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(f[0]),i===null&&Ot(t,"ill-formed argument of the YAML directive"),n=parseInt(i[1],10),h=parseInt(i[2],10),n!==1&&Ot(t,"unacceptable YAML version of the document"),t.version=f[0],t.checkLineBreaks=h<2,h!==1&&h!==2&&dl(t,"unsupported YAML version of the document")},TAG:function(t,e,f){var i,n;f.length!==2&&Ot(t,"TAG directive accepts exactly two arguments"),i=f[0],n=f[1],JC.test(i)||Ot(t,"ill-formed tag handle (first argument) of the TAG directive"),Ns.call(t.tagMap,i)&&Ot(t,'there is a previously declared suffix for "'+i+'" tag handle'),QC.test(n)||Ot(t,"ill-formed tag prefix (second argument) of the TAG directive");try{n=decodeURIComponent(n)}catch{Ot(t,"tag prefix is malformed: "+n)}t.tagMap[i]=n}};function ws(s,t,e,f){var i,n,h,r;if(t<e){if(r=s.input.slice(t,e),f)for(i=0,n=r.length;i<n;i+=1)h=r.charCodeAt(i),h===9||32<=h&&h<=1114111||Ot(s,"expected valid JSON character");else B6.test(r)&&Ot(s,"the stream contains non-printable characters");s.result+=r}}function hy(s,t,e,f){var i,n,h,r;for(Fe.isObject(e)||Ot(s,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(e),h=0,r=i.length;h<r;h+=1)n=i[h],Ns.call(t,n)||(t[n]=e[n],f[n]=!0)}function jr(s,t,e,f,i,n,h,r,a){var l,o;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),l=0,o=i.length;l<o;l+=1)Array.isArray(i[l])&&Ot(s,"nested arrays are not supported inside keys"),typeof i=="object"&&ry(i[l])==="[object Object]"&&(i[l]="[object Object]");if(typeof i=="object"&&ry(i)==="[object Object]"&&(i="[object Object]"),i=String(i),t===null&&(t={}),f==="tag:yaml.org,2002:merge")if(Array.isArray(n))for(l=0,o=n.length;l<o;l+=1)hy(s,t,n[l],e);else hy(s,t,n,e);else!s.json&&!Ns.call(e,i)&&Ns.call(t,i)&&(s.line=h||s.line,s.lineStart=r||s.lineStart,s.position=a||s.position,Ot(s,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(t,i,{configurable:!0,enumerable:!0,writable:!0,value:n}):t[i]=n,delete e[i];return t}function Mv(s){var t;t=s.input.charCodeAt(s.position),t===10?s.position++:t===13?(s.position++,s.input.charCodeAt(s.position)===10&&s.position++):Ot(s,"a line break is expected"),s.line+=1,s.lineStart=s.position,s.firstTabInLine=-1}function Me(s,t,e){for(var f=0,i=s.input.charCodeAt(s.position);i!==0;){for(;hr(i);)i===9&&s.firstTabInLine===-1&&(s.firstTabInLine=s.position),i=s.input.charCodeAt(++s.position);if(t&&i===35)do i=s.input.charCodeAt(++s.position);while(i!==10&&i!==13&&i!==0);if(Dn(i))for(Mv(s),i=s.input.charCodeAt(s.position),f++,s.lineIndent=0;i===32;)s.lineIndent++,i=s.input.charCodeAt(++s.position);else break}return e!==-1&&f!==0&&s.lineIndent<e&&dl(s,"deficient indentation"),f}function nu(s){var t=s.position,e;return e=s.input.charCodeAt(t),!!((e===45||e===46)&&e===s.input.charCodeAt(t+1)&&e===s.input.charCodeAt(t+2)&&(t+=3,e=s.input.charCodeAt(t),e===0||mi(e)))}function Av(s,t){t===1?s.result+=" ":t>1&&(s.result+=Fe.repeat(`
`,t-1))}function W6(s,t,e){var f,i,n,h,r,a,l,o,u=s.kind,v=s.result,d;if(d=s.input.charCodeAt(s.position),mi(d)||Qr(d)||d===35||d===38||d===42||d===33||d===124||d===62||d===39||d===34||d===37||d===64||d===96||(d===63||d===45)&&(i=s.input.charCodeAt(s.position+1),mi(i)||e&&Qr(i)))return!1;for(s.kind="scalar",s.result="",n=h=s.position,r=!1;d!==0;){if(d===58){if(i=s.input.charCodeAt(s.position+1),mi(i)||e&&Qr(i))break}else if(d===35){if(f=s.input.charCodeAt(s.position-1),mi(f))break}else{if(s.position===s.lineStart&&nu(s)||e&&Qr(d))break;if(Dn(d))if(a=s.line,l=s.lineStart,o=s.lineIndent,Me(s,!1,-1),s.lineIndent>=t){r=!0,d=s.input.charCodeAt(s.position);continue}else{s.position=h,s.line=a,s.lineStart=l,s.lineIndent=o;break}}r&&(ws(s,n,h,!1),Av(s,s.line-a),n=h=s.position,r=!1),hr(d)||(h=s.position+1),d=s.input.charCodeAt(++s.position)}return ws(s,n,h,!1),s.result?!0:(s.kind=u,s.result=v,!1)}function X6(s,t){var e,f,i;if(e=s.input.charCodeAt(s.position),e!==39)return!1;for(s.kind="scalar",s.result="",s.position++,f=i=s.position;(e=s.input.charCodeAt(s.position))!==0;)if(e===39)if(ws(s,f,s.position,!0),e=s.input.charCodeAt(++s.position),e===39)f=s.position,s.position++,i=s.position;else return!0;else Dn(e)?(ws(s,f,i,!0),Av(s,Me(s,!1,t)),f=i=s.position):s.position===s.lineStart&&nu(s)?Ot(s,"unexpected end of the document within a single quoted scalar"):(s.position++,i=s.position);Ot(s,"unexpected end of the stream within a single quoted scalar")}function H6(s,t){var e,f,i,n,h,r;if(r=s.input.charCodeAt(s.position),r!==34)return!1;for(s.kind="scalar",s.result="",s.position++,e=f=s.position;(r=s.input.charCodeAt(s.position))!==0;){if(r===34)return ws(s,e,s.position,!0),s.position++,!0;if(r===92){if(ws(s,e,s.position,!0),r=s.input.charCodeAt(++s.position),Dn(r))Me(s,!1,t);else if(r<256&&jC[r])s.result+=qC[r],s.position++;else if((h=Y6(r))>0){for(i=h,n=0;i>0;i--)r=s.input.charCodeAt(++s.position),(h=N6(r))>=0?n=(n<<4)+h:Ot(s,"expected hexadecimal character");s.result+=V6(n),s.position++}else Ot(s,"unknown escape sequence");e=f=s.position}else Dn(r)?(ws(s,e,f,!0),Av(s,Me(s,!1,t)),e=f=s.position):s.position===s.lineStart&&nu(s)?Ot(s,"unexpected end of the document within a double quoted scalar"):(s.position++,f=s.position)}Ot(s,"unexpected end of the stream within a double quoted scalar")}function $6(s,t){var e=!0,f,i,n,h=s.tag,r,a=s.anchor,l,o,u,v,d,c=Object.create(null),p,g,m,x;if(x=s.input.charCodeAt(s.position),x===91)o=93,d=!1,r=[];else if(x===123)o=125,d=!0,r={};else return!1;for(s.anchor!==null&&(s.anchorMap[s.anchor]=r),x=s.input.charCodeAt(++s.position);x!==0;){if(Me(s,!0,t),x=s.input.charCodeAt(s.position),x===o)return s.position++,s.tag=h,s.anchor=a,s.kind=d?"mapping":"sequence",s.result=r,!0;e?x===44&&Ot(s,"expected the node content, but found ','"):Ot(s,"missed comma between flow collection entries"),g=p=m=null,u=v=!1,x===63&&(l=s.input.charCodeAt(s.position+1),mi(l)&&(u=v=!0,s.position++,Me(s,!0,t))),f=s.line,i=s.lineStart,n=s.position,ea(s,t,ul,!1,!0),g=s.tag,p=s.result,Me(s,!0,t),x=s.input.charCodeAt(s.position),(v||s.line===f)&&x===58&&(u=!0,x=s.input.charCodeAt(++s.position),Me(s,!0,t),ea(s,t,ul,!1,!0),m=s.result),d?jr(s,r,c,g,p,m,f,i,n):u?r.push(jr(s,null,c,g,p,m,f,i,n)):r.push(p),Me(s,!0,t),x=s.input.charCodeAt(s.position),x===44?(e=!0,x=s.input.charCodeAt(++s.position)):e=!1}Ot(s,"unexpected end of the stream within a flow collection")}function K6(s,t){var e,f,i=Md,n=!1,h=!1,r=t,a=0,l=!1,o,u;if(u=s.input.charCodeAt(s.position),u===124)f=!1;else if(u===62)f=!0;else return!1;for(s.kind="scalar",s.result="";u!==0;)if(u=s.input.charCodeAt(++s.position),u===43||u===45)Md===i?i=u===43?sy:D6:Ot(s,"repeat of a chomping mode identifier");else if((o=z6(u))>=0)o===0?Ot(s,"bad explicit indentation width of a block scalar; it cannot be less than one"):h?Ot(s,"repeat of an indentation width identifier"):(r=t+o-1,h=!0);else break;if(hr(u)){do u=s.input.charCodeAt(++s.position);while(hr(u));if(u===35)do u=s.input.charCodeAt(++s.position);while(!Dn(u)&&u!==0)}for(;u!==0;){for(Mv(s),s.lineIndent=0,u=s.input.charCodeAt(s.position);(!h||s.lineIndent<r)&&u===32;)s.lineIndent++,u=s.input.charCodeAt(++s.position);if(!h&&s.lineIndent>r&&(r=s.lineIndent),Dn(u)){a++;continue}if(s.lineIndent<r){i===sy?s.result+=Fe.repeat(`
`,n?1+a:a):i===Md&&n&&(s.result+=`
`);break}for(f?hr(u)?(l=!0,s.result+=Fe.repeat(`
`,n?1+a:a)):l?(l=!1,s.result+=Fe.repeat(`
`,a+1)):a===0?n&&(s.result+=" "):s.result+=Fe.repeat(`
`,a):s.result+=Fe.repeat(`
`,n?1+a:a),n=!0,h=!0,a=0,e=s.position;!Dn(u)&&u!==0;)u=s.input.charCodeAt(++s.position);ws(s,e,s.position,!1)}return!0}function ly(s,t){var e,f=s.tag,i=s.anchor,n=[],h,r=!1,a;if(s.firstTabInLine!==-1)return!1;for(s.anchor!==null&&(s.anchorMap[s.anchor]=n),a=s.input.charCodeAt(s.position);a!==0&&(s.firstTabInLine!==-1&&(s.position=s.firstTabInLine,Ot(s,"tab characters must not be used in indentation")),!(a!==45||(h=s.input.charCodeAt(s.position+1),!mi(h))));){if(r=!0,s.position++,Me(s,!0,-1)&&s.lineIndent<=t){n.push(null),a=s.input.charCodeAt(s.position);continue}if(e=s.line,ea(s,t,ZC,!1,!0),n.push(s.result),Me(s,!0,-1),a=s.input.charCodeAt(s.position),(s.line===e||s.lineIndent>t)&&a!==0)Ot(s,"bad indentation of a sequence entry");else if(s.lineIndent<t)break}return r?(s.tag=f,s.anchor=i,s.kind="sequence",s.result=n,!0):!1}function k6(s,t,e){var f,i,n,h,r,a,l=s.tag,o=s.anchor,u={},v=Object.create(null),d=null,c=null,p=null,g=!1,m=!1,x;if(s.firstTabInLine!==-1)return!1;for(s.anchor!==null&&(s.anchorMap[s.anchor]=u),x=s.input.charCodeAt(s.position);x!==0;){if(!g&&s.firstTabInLine!==-1&&(s.position=s.firstTabInLine,Ot(s,"tab characters must not be used in indentation")),f=s.input.charCodeAt(s.position+1),n=s.line,(x===63||x===58)&&mi(f))x===63?(g&&(jr(s,u,v,d,c,null,h,r,a),d=c=p=null),m=!0,g=!0,i=!0):g?(g=!1,i=!0):Ot(s,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),s.position+=1,x=f;else{if(h=s.line,r=s.lineStart,a=s.position,!ea(s,e,kC,!1,!0))break;if(s.line===n){for(x=s.input.charCodeAt(s.position);hr(x);)x=s.input.charCodeAt(++s.position);if(x===58)x=s.input.charCodeAt(++s.position),mi(x)||Ot(s,"a whitespace character is expected after the key-value separator within a block mapping"),g&&(jr(s,u,v,d,c,null,h,r,a),d=c=p=null),m=!0,g=!1,i=!1,d=s.tag,c=s.result;else if(m)Ot(s,"can not read an implicit mapping pair; a colon is missed");else return s.tag=l,s.anchor=o,!0}else if(m)Ot(s,"can not read a block mapping entry; a multiline key may not be an implicit key");else return s.tag=l,s.anchor=o,!0}if((s.line===n||s.lineIndent>t)&&(g&&(h=s.line,r=s.lineStart,a=s.position),ea(s,t,fl,!0,i)&&(g?c=s.result:p=s.result),g||(jr(s,u,v,d,c,p,h,r,a),d=c=p=null),Me(s,!0,-1),x=s.input.charCodeAt(s.position)),(s.line===n||s.lineIndent>t)&&x!==0)Ot(s,"bad indentation of a mapping entry");else if(s.lineIndent<t)break}return g&&jr(s,u,v,d,c,null,h,r,a),m&&(s.tag=l,s.anchor=o,s.kind="mapping",s.result=u),m}function Z6(s){var t,e=!1,f=!1,i,n,h;if(h=s.input.charCodeAt(s.position),h!==33)return!1;if(s.tag!==null&&Ot(s,"duplication of a tag property"),h=s.input.charCodeAt(++s.position),h===60?(e=!0,h=s.input.charCodeAt(++s.position)):h===33?(f=!0,i="!!",h=s.input.charCodeAt(++s.position)):i="!",t=s.position,e){do h=s.input.charCodeAt(++s.position);while(h!==0&&h!==62);s.position<s.length?(n=s.input.slice(t,s.position),h=s.input.charCodeAt(++s.position)):Ot(s,"unexpected end of the stream within a verbatim tag")}else{for(;h!==0&&!mi(h);)h===33&&(f?Ot(s,"tag suffix cannot contain exclamation marks"):(i=s.input.slice(t-1,s.position+1),JC.test(i)||Ot(s,"named tag handle cannot contain such characters"),f=!0,t=s.position+1)),h=s.input.charCodeAt(++s.position);n=s.input.slice(t,s.position),G6.test(n)&&Ot(s,"tag suffix cannot contain flow indicator characters")}n&&!QC.test(n)&&Ot(s,"tag name cannot contain such characters: "+n);try{n=decodeURIComponent(n)}catch{Ot(s,"tag name is malformed: "+n)}return e?s.tag=n:Ns.call(s.tagMap,i)?s.tag=s.tagMap[i]+n:i==="!"?s.tag="!"+n:i==="!!"?s.tag="tag:yaml.org,2002:"+n:Ot(s,'undeclared tag handle "'+i+'"'),!0}function J6(s){var t,e;if(e=s.input.charCodeAt(s.position),e!==38)return!1;for(s.anchor!==null&&Ot(s,"duplication of an anchor property"),e=s.input.charCodeAt(++s.position),t=s.position;e!==0&&!mi(e)&&!Qr(e);)e=s.input.charCodeAt(++s.position);return s.position===t&&Ot(s,"name of an anchor node must contain at least one character"),s.anchor=s.input.slice(t,s.position),!0}function Q6(s){var t,e,f;if(f=s.input.charCodeAt(s.position),f!==42)return!1;for(f=s.input.charCodeAt(++s.position),t=s.position;f!==0&&!mi(f)&&!Qr(f);)f=s.input.charCodeAt(++s.position);return s.position===t&&Ot(s,"name of an alias node must contain at least one character"),e=s.input.slice(t,s.position),Ns.call(s.anchorMap,e)||Ot(s,'unidentified alias "'+e+'"'),s.result=s.anchorMap[e],Me(s,!0,-1),!0}function ea(s,t,e,f,i){var n,h,r,a=1,l=!1,o=!1,u,v,d,c,p,g;if(s.listener!==null&&s.listener("open",s),s.tag=null,s.anchor=null,s.kind=null,s.result=null,n=h=r=fl===e||ZC===e,f&&Me(s,!0,-1)&&(l=!0,s.lineIndent>t?a=1:s.lineIndent===t?a=0:s.lineIndent<t&&(a=-1)),a===1)for(;Z6(s)||J6(s);)Me(s,!0,-1)?(l=!0,r=n,s.lineIndent>t?a=1:s.lineIndent===t?a=0:s.lineIndent<t&&(a=-1)):r=!1;if(r&&(r=l||i),(a===1||fl===e)&&(ul===e||kC===e?p=t:p=t+1,g=s.position-s.lineStart,a===1?r&&(ly(s,g)||k6(s,g,p))||$6(s,p)?o=!0:(h&&K6(s,p)||X6(s,p)||H6(s,p)?o=!0:Q6(s)?(o=!0,(s.tag!==null||s.anchor!==null)&&Ot(s,"alias node should not have any properties")):W6(s,p,ul===e)&&(o=!0,s.tag===null&&(s.tag="?")),s.anchor!==null&&(s.anchorMap[s.anchor]=s.result)):a===0&&(o=r&&ly(s,g))),s.tag===null)s.anchor!==null&&(s.anchorMap[s.anchor]=s.result);else if(s.tag==="?"){for(s.result!==null&&s.kind!=="scalar"&&Ot(s,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+s.kind+'"'),u=0,v=s.implicitTypes.length;u<v;u+=1)if(c=s.implicitTypes[u],c.resolve(s.result)){s.result=c.construct(s.result),s.tag=c.tag,s.anchor!==null&&(s.anchorMap[s.anchor]=s.result);break}}else if(s.tag!=="!"){if(Ns.call(s.typeMap[s.kind||"fallback"],s.tag))c=s.typeMap[s.kind||"fallback"][s.tag];else for(c=null,d=s.typeMap.multi[s.kind||"fallback"],u=0,v=d.length;u<v;u+=1)if(s.tag.slice(0,d[u].tag.length)===d[u].tag){c=d[u];break}c||Ot(s,"unknown tag !<"+s.tag+">"),s.result!==null&&c.kind!==s.kind&&Ot(s,"unacceptable node kind for !<"+s.tag+'> tag; it should be "'+c.kind+'", not "'+s.kind+'"'),c.resolve(s.result,s.tag)?(s.result=c.construct(s.result,s.tag),s.anchor!==null&&(s.anchorMap[s.anchor]=s.result)):Ot(s,"cannot resolve a node with !<"+s.tag+"> explicit tag")}return s.listener!==null&&s.listener("close",s),s.tag!==null||s.anchor!==null||o}function j6(s){var t=s.position,e,f,i,n=!1,h;for(s.version=null,s.checkLineBreaks=s.legacy,s.tagMap=Object.create(null),s.anchorMap=Object.create(null);(h=s.input.charCodeAt(s.position))!==0&&(Me(s,!0,-1),h=s.input.charCodeAt(s.position),!(s.lineIndent>0||h!==37));){for(n=!0,h=s.input.charCodeAt(++s.position),e=s.position;h!==0&&!mi(h);)h=s.input.charCodeAt(++s.position);for(f=s.input.slice(e,s.position),i=[],f.length<1&&Ot(s,"directive name must not be less than one character in length");h!==0;){for(;hr(h);)h=s.input.charCodeAt(++s.position);if(h===35){do h=s.input.charCodeAt(++s.position);while(h!==0&&!Dn(h));break}if(Dn(h))break;for(e=s.position;h!==0&&!mi(h);)h=s.input.charCodeAt(++s.position);i.push(s.input.slice(e,s.position))}h!==0&&Mv(s),Ns.call(oy,f)?oy[f](s,f,i):dl(s,'unknown document directive "'+f+'"')}if(Me(s,!0,-1),s.lineIndent===0&&s.input.charCodeAt(s.position)===45&&s.input.charCodeAt(s.position+1)===45&&s.input.charCodeAt(s.position+2)===45?(s.position+=3,Me(s,!0,-1)):n&&Ot(s,"directives end mark is expected"),ea(s,s.lineIndent-1,fl,!1,!0),Me(s,!0,-1),s.checkLineBreaks&&b6.test(s.input.slice(t,s.position))&&dl(s,"non-ASCII line breaks are interpreted as content"),s.documents.push(s.result),s.position===s.lineStart&&nu(s)){s.input.charCodeAt(s.position)===46&&(s.position+=3,Me(s,!0,-1));return}if(s.position<s.length-1)Ot(s,"end of the stream or a document separator is expected");else return}function tS(s,t){s=String(s),t=t||{},s.length!==0&&(s.charCodeAt(s.length-1)!==10&&s.charCodeAt(s.length-1)!==13&&(s+=`
`),s.charCodeAt(0)===65279&&(s=s.slice(1)));var e=new U6(s,t),f=s.indexOf("\0");for(f!==-1&&(e.position=f,Ot(e,"null byte is not allowed in input")),e.input+="\0";e.input.charCodeAt(e.position)===32;)e.lineIndent+=1,e.position+=1;for(;e.position<e.length-1;)j6(e);return e.documents}function q6(s,t,e){t!==null&&typeof t=="object"&&typeof e=="undefined"&&(e=t,t=null);var f=tS(s,e);if(typeof t!="function")return f;for(var i=0,n=f.length;i<n;i+=1)t(f[i])}function _6(s,t){var e=tS(s,t);if(e.length!==0){if(e.length===1)return e[0];throw new ai("expected a single document in the stream, but found more")}}var tH=q6,eH=_6,eS={loadAll:tH,load:eH},iS=Object.prototype.toString,nS=Object.prototype.hasOwnProperty,Ov=65279,iH=9,uo=10,nH=13,sH=32,rH=33,aH=34,jd=35,oH=37,hH=38,lH=39,uH=42,sS=44,fH=45,cl=58,dH=61,cH=62,vH=63,pH=64,rS=91,aS=93,gH=96,oS=123,mH=124,hS=125,ti={};ti[0]="\\0";ti[7]="\\a";ti[8]="\\b";ti[9]="\\t";ti[10]="\\n";ti[11]="\\v";ti[12]="\\f";ti[13]="\\r";ti[27]="\\e";ti[34]='\\"';ti[92]="\\\\";ti[133]="\\N";ti[160]="\\_";ti[8232]="\\L";ti[8233]="\\P";var xH=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],yH=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function TH(s,t){var e,f,i,n,h,r,a;if(t===null)return{};for(e={},f=Object.keys(t),i=0,n=f.length;i<n;i+=1)h=f[i],r=String(t[h]),h.slice(0,2)==="!!"&&(h="tag:yaml.org,2002:"+h.slice(2)),a=s.compiledTypeMap.fallback[h],a&&nS.call(a.styleAliases,r)&&(r=a.styleAliases[r]),e[h]=r;return e}function CH(s){var t,e,f;if(t=s.toString(16).toUpperCase(),s<=255)e="x",f=2;else if(s<=65535)e="u",f=4;else if(s<=4294967295)e="U",f=8;else throw new ai("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+e+Fe.repeat("0",f-t.length)+t}var SH=1,fo=2;function EH(s){this.schema=s.schema||Pv,this.indent=Math.max(1,s.indent||2),this.noArrayIndent=s.noArrayIndent||!1,this.skipInvalid=s.skipInvalid||!1,this.flowLevel=Fe.isNothing(s.flowLevel)?-1:s.flowLevel,this.styleMap=TH(this.schema,s.styles||null),this.sortKeys=s.sortKeys||!1,this.lineWidth=s.lineWidth||80,this.noRefs=s.noRefs||!1,this.noCompatMode=s.noCompatMode||!1,this.condenseFlow=s.condenseFlow||!1,this.quotingType=s.quotingType==='"'?fo:SH,this.forceQuotes=s.forceQuotes||!1,this.replacer=typeof s.replacer=="function"?s.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function uy(s,t){for(var e=Fe.repeat(" ",t),f=0,i=-1,n="",h,r=s.length;f<r;)i=s.indexOf(`
`,f),i===-1?(h=s.slice(f),f=r):(h=s.slice(f,i+1),f=i+1),h.length&&h!==`
`&&(n+=e),n+=h;return n}function qd(s,t){return`
`+Fe.repeat(" ",s.indent*t)}function PH(s,t){var e,f,i;for(e=0,f=s.implicitTypes.length;e<f;e+=1)if(i=s.implicitTypes[e],i.resolve(t))return!0;return!1}function vl(s){return s===sH||s===iH}function co(s){return 32<=s&&s<=126||161<=s&&s<=55295&&s!==8232&&s!==8233||57344<=s&&s<=65533&&s!==Ov||65536<=s&&s<=1114111}function fy(s){return co(s)&&s!==Ov&&s!==nH&&s!==uo}function dy(s,t,e){var f=fy(s),i=f&&!vl(s);return(e?f:f&&s!==sS&&s!==rS&&s!==aS&&s!==oS&&s!==hS)&&s!==jd&&!(t===cl&&!i)||fy(t)&&!vl(t)&&s===jd||t===cl&&i}function MH(s){return co(s)&&s!==Ov&&!vl(s)&&s!==fH&&s!==vH&&s!==cl&&s!==sS&&s!==rS&&s!==aS&&s!==oS&&s!==hS&&s!==jd&&s!==hH&&s!==uH&&s!==rH&&s!==mH&&s!==dH&&s!==cH&&s!==lH&&s!==aH&&s!==oH&&s!==pH&&s!==gH}function AH(s){return!vl(s)&&s!==cl}function Qa(s,t){var e=s.charCodeAt(t),f;return e>=55296&&e<=56319&&t+1<s.length&&(f=s.charCodeAt(t+1),f>=56320&&f<=57343)?(e-55296)*1024+f-56320+65536:e}function lS(s){var t=/^\n* /;return t.test(s)}var uS=1,_d=2,fS=3,dS=4,kr=5;function OH(s,t,e,f,i,n,h,r){var a,l=0,o=null,u=!1,v=!1,d=f!==-1,c=-1,p=MH(Qa(s,0))&&AH(Qa(s,s.length-1));if(t||h)for(a=0;a<s.length;l>=65536?a+=2:a++){if(l=Qa(s,a),!co(l))return kr;p=p&&dy(l,o,r),o=l}else{for(a=0;a<s.length;l>=65536?a+=2:a++){if(l=Qa(s,a),l===uo)u=!0,d&&(v=v||a-c-1>f&&s[c+1]!==" ",c=a);else if(!co(l))return kr;p=p&&dy(l,o,r),o=l}v=v||d&&a-c-1>f&&s[c+1]!==" "}return!u&&!v?p&&!h&&!i(s)?uS:n===fo?kr:_d:e>9&&lS(s)?kr:h?n===fo?kr:_d:v?dS:fS}function RH(s,t,e,f,i){s.dump=function(){if(t.length===0)return s.quotingType===fo?'""':"''";if(!s.noCompatMode&&(xH.indexOf(t)!==-1||yH.test(t)))return s.quotingType===fo?'"'+t+'"':"'"+t+"'";var n=s.indent*Math.max(1,e),h=s.lineWidth===-1?-1:Math.max(Math.min(s.lineWidth,40),s.lineWidth-n),r=f||s.flowLevel>-1&&e>=s.flowLevel;function a(l){return PH(s,l)}switch(OH(t,r,s.indent,h,a,s.quotingType,s.forceQuotes&&!f,i)){case uS:return t;case _d:return"'"+t.replace(/'/g,"''")+"'";case fS:return"|"+cy(t,s.indent)+vy(uy(t,n));case dS:return">"+cy(t,s.indent)+vy(uy(LH(t,h),n));case kr:return'"'+FH(t)+'"';default:throw new ai("impossible error: invalid scalar style")}}()}function cy(s,t){var e=lS(s)?String(t):"",f=s[s.length-1]===`
`,i=f&&(s[s.length-2]===`
`||s===`
`),n=i?"+":f?"":"-";return e+n+`
`}function vy(s){return s[s.length-1]===`
`?s.slice(0,-1):s}function LH(s,t){for(var e=/(\n+)([^\n]*)/g,f=function(){var l=s.indexOf(`
`);return l=l!==-1?l:s.length,e.lastIndex=l,py(s.slice(0,l),t)}(),i=s[0]===`
`||s[0]===" ",n,h;h=e.exec(s);){var r=h[1],a=h[2];n=a[0]===" ",f+=r+(!i&&!n&&a!==""?`
`:"")+py(a,t),i=n}return f}function py(s,t){if(s===""||s[0]===" ")return s;for(var e=/ [^ ]/g,f,i=0,n,h=0,r=0,a="";f=e.exec(s);)r=f.index,r-i>t&&(n=h>i?h:r,a+=`
`+s.slice(i,n),i=n+1),h=r;return a+=`
`,s.length-i>t&&h>i?a+=s.slice(i,h)+`
`+s.slice(h+1):a+=s.slice(i),a.slice(1)}function FH(s){for(var t="",e=0,f,i=0;i<s.length;e>=65536?i+=2:i++)e=Qa(s,i),f=ti[e],!f&&co(e)?(t+=s[i],e>=65536&&(t+=s[i+1])):t+=f||CH(e);return t}function wH(s,t,e){var f="",i=s.tag,n,h,r;for(n=0,h=e.length;n<h;n+=1)r=e[n],s.replacer&&(r=s.replacer.call(e,String(n),r)),(ss(s,t,r,!1,!1)||typeof r=="undefined"&&ss(s,t,null,!1,!1))&&(f!==""&&(f+=","+(s.condenseFlow?"":" ")),f+=s.dump);s.tag=i,s.dump="["+f+"]"}function gy(s,t,e,f){var i="",n=s.tag,h,r,a;for(h=0,r=e.length;h<r;h+=1)a=e[h],s.replacer&&(a=s.replacer.call(e,String(h),a)),(ss(s,t+1,a,!0,!0,!1,!0)||typeof a=="undefined"&&ss(s,t+1,null,!0,!0,!1,!0))&&((!f||i!=="")&&(i+=qd(s,t)),s.dump&&uo===s.dump.charCodeAt(0)?i+="-":i+="- ",i+=s.dump);s.tag=n,s.dump=i||"[]"}function IH(s,t,e){var f="",i=s.tag,n=Object.keys(e),h,r,a,l,o;for(h=0,r=n.length;h<r;h+=1)o="",f!==""&&(o+=", "),s.condenseFlow&&(o+='"'),a=n[h],l=e[a],s.replacer&&(l=s.replacer.call(e,a,l)),ss(s,t,a,!1,!1)&&(s.dump.length>1024&&(o+="? "),o+=s.dump+(s.condenseFlow?'"':"")+":"+(s.condenseFlow?"":" "),ss(s,t,l,!1,!1)&&(o+=s.dump,f+=o));s.tag=i,s.dump="{"+f+"}"}function DH(s,t,e,f){var i="",n=s.tag,h=Object.keys(e),r,a,l,o,u,v;if(s.sortKeys===!0)h.sort();else if(typeof s.sortKeys=="function")h.sort(s.sortKeys);else if(s.sortKeys)throw new ai("sortKeys must be a boolean or a function");for(r=0,a=h.length;r<a;r+=1)v="",(!f||i!=="")&&(v+=qd(s,t)),l=h[r],o=e[l],s.replacer&&(o=s.replacer.call(e,l,o)),ss(s,t+1,l,!0,!0,!0)&&(u=s.tag!==null&&s.tag!=="?"||s.dump&&s.dump.length>1024,u&&(s.dump&&uo===s.dump.charCodeAt(0)?v+="?":v+="? "),v+=s.dump,u&&(v+=qd(s,t)),ss(s,t+1,o,!0,u)&&(s.dump&&uo===s.dump.charCodeAt(0)?v+=":":v+=": ",v+=s.dump,i+=v));s.tag=n,s.dump=i||"{}"}function my(s,t,e){var f,i,n,h,r,a;for(i=e?s.explicitTypes:s.implicitTypes,n=0,h=i.length;n<h;n+=1)if(r=i[n],(r.instanceOf||r.predicate)&&(!r.instanceOf||typeof t=="object"&&t instanceof r.instanceOf)&&(!r.predicate||r.predicate(t))){if(e?r.multi&&r.representName?s.tag=r.representName(t):s.tag=r.tag:s.tag="?",r.represent){if(a=s.styleMap[r.tag]||r.defaultStyle,iS.call(r.represent)==="[object Function]")f=r.represent(t,a);else if(nS.call(r.represent,a))f=r.represent[a](t,a);else throw new ai("!<"+r.tag+'> tag resolver accepts not "'+a+'" style');s.dump=f}return!0}return!1}function ss(s,t,e,f,i,n,h){s.tag=null,s.dump=e,my(s,e,!1)||my(s,e,!0);var r=iS.call(s.dump),a=f,l;f&&(f=s.flowLevel<0||s.flowLevel>t);var o=r==="[object Object]"||r==="[object Array]",u,v;if(o&&(u=s.duplicates.indexOf(e),v=u!==-1),(s.tag!==null&&s.tag!=="?"||v||s.indent!==2&&t>0)&&(i=!1),v&&s.usedDuplicates[u])s.dump="*ref_"+u;else{if(o&&v&&!s.usedDuplicates[u]&&(s.usedDuplicates[u]=!0),r==="[object Object]")f&&Object.keys(s.dump).length!==0?(DH(s,t,s.dump,i),v&&(s.dump="&ref_"+u+s.dump)):(IH(s,t,s.dump),v&&(s.dump="&ref_"+u+" "+s.dump));else if(r==="[object Array]")f&&s.dump.length!==0?(s.noArrayIndent&&!h&&t>0?gy(s,t-1,s.dump,i):gy(s,t,s.dump,i),v&&(s.dump="&ref_"+u+s.dump)):(wH(s,t,s.dump),v&&(s.dump="&ref_"+u+" "+s.dump));else if(r==="[object String]")s.tag!=="?"&&RH(s,s.dump,t,n,a);else{if(r==="[object Undefined]")return!1;if(s.skipInvalid)return!1;throw new ai("unacceptable kind of an object to dump "+r)}s.tag!==null&&s.tag!=="?"&&(l=encodeURI(s.tag[0]==="!"?s.tag.slice(1):s.tag).replace(/!/g,"%21"),s.tag[0]==="!"?l="!"+l:l.slice(0,18)==="tag:yaml.org,2002:"?l="!!"+l.slice(18):l="!<"+l+">",s.dump=l+" "+s.dump)}return!0}function BH(s,t){var e=[],f=[],i,n;for(tc(s,e,f),i=0,n=f.length;i<n;i+=1)t.duplicates.push(e[f[i]]);t.usedDuplicates=new Array(n)}function tc(s,t,e){var f,i,n;if(s!==null&&typeof s=="object")if(i=t.indexOf(s),i!==-1)e.indexOf(i)===-1&&e.push(i);else if(t.push(s),Array.isArray(s))for(i=0,n=s.length;i<n;i+=1)tc(s[i],t,e);else for(f=Object.keys(s),i=0,n=f.length;i<n;i+=1)tc(s[f[i]],t,e)}function bH(s,t){t=t||{};var e=new EH(t);e.noRefs||BH(s,e);var f=s;return e.replacer&&(f=e.replacer.call({"":f},"",f)),ss(e,0,f,!0,!0)?e.dump+`
`:""}var GH=bH,NH={dump:GH};function Rv(s,t){return function(){throw new Error("Function yaml."+s+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}var YH=Xe,zH=RC,VH=IC,UH=NC,WH=YC,XH=Pv,HH=eS.load,$H=eS.loadAll,KH=NH.dump,kH=ai,ZH={binary:XC,float:GC,map:wC,null:DC,pairs:$C,set:KC,timestamp:UC,bool:BC,int:bC,merge:WC,omap:HC,seq:FC,str:LC},JH=Rv("safeLoad","load"),QH=Rv("safeLoadAll","loadAll"),jH=Rv("safeDump","dump"),cS={Type:YH,Schema:zH,FAILSAFE_SCHEMA:VH,JSON_SCHEMA:UH,CORE_SCHEMA:WH,DEFAULT_SCHEMA:XH,load:HH,loadAll:$H,dump:KH,YAMLException:kH,types:ZH,safeLoad:JH,safeLoadAll:QH,safeDump:jH},to=function(s){if(typeof s=="string")try{return cS.load(s)}catch(t){console.log(t);return}return s},qH=function(s,t){if(s.hasOwnProperty("$type"))return s.$type;if(s.hasOwnProperty("name")){var e=t[`#${s.name}`];if(e&&e.hasOwnProperty("$type"))return e.$type}if(s.hasOwnProperty("$class"))for(var f=s.$class.split(" "),i=0,n=f.length;i<n;i++){var e=t[`.${f[i]}`];if(e&&e.hasOwnProperty("$type"))return e.$type}},ge=function(s,t){if(t===void 0)return s;if(s.hasOwnProperty("name")&&nl(s,t[`#${s.name}`]),s.hasOwnProperty("$class"))for(var e=s.$class.split(" "),f=0,i=e.length;f<i;f++)nl(s,t[`.${e[f]}`]);return s.hasOwnProperty("$type")&&nl(s,t[s.$type]),s},nl=function(s,t){if(t===void 0)return s;for(var e in t)if(!s.hasOwnProperty(e))s[e]=ta(t[e]);else{var f=s[e];f&&typeof f=="object"&&nl(f,t[e])}return s};const xy=["tint","alpha","visible","flipX","flipY"];var dr=function(s,t){for(var e=0,f=xy.length;e<f;e++){var i=xy[e],n=t[i];n!==void 0&&(s[i]=n)}return t.cropResize&&!s.resize&&(s.resize=function(h,r){return s.setCrop(0,0,h,r),s}),s},vS=function(s,t,e,f,i,n){t=ge(t,f);var h=new n(s,0,0,t.key,t.frame);return t.width!==void 0&&h.setDisplayWidth(t.width),t.height!==void 0&&h.setDisplayHeight(t.height),dr(h,t),s.add.existing(h),h};const _H=Phaser.GameObjects.Image;var t9=function(s,t,e,f,i){return vS(s,t,e,f,i,_H)};const e9=Phaser.GameObjects.Sprite;var i9=function(s,t,e,f,i){return vS(s,t,e,f,i,e9)};const n9=Phaser.GameObjects.Video;var s9=function(s,t,e,f,i){t=ge(t,f);var n=new n9(s,0,0,t.key);return t.width!==void 0&&n.setDisplayWidth(t.width),t.height!==void 0&&n.setDisplayHeight(t.height),dr(n,t),s.add.existing(n),n};const r9=Phaser.GameObjects.Text;var a9=function(s,t,e,f,i){t=ge(t,f);var n=new r9(s,0,0,t.text,t);return dr(n,t),s.add.existing(n),n},o9=function(s,t,e,f,i){t=ge(t,f);var n=new cc(s,0,0,t.text,t);return dr(n,t),s.add.existing(n),n},h9=function(s,t,e,f,i){t=ge(t,f);var n=new Cl(s,t);return s.add.existing(n),n},l9=function(s,t,e,f,i){t=ge(t,f);var n=new ml(s,t);return dr(n,t),s.add.existing(n),n},u9=function(s,t,e,f,i){t=ge(t,f);var n=new yl(s,t);return s.add.existing(n),n},f9=function(s,t,e,f,i){t=ge(t,f);var n=t.width||1,h=t.height||1,r=new Gn(s,0,0,n,h);return t.fill!==void 0&&r.fill(t.fill),dr(r,t),s.add.existing(r),r},d9=function(s,t,e,f,i){t=ge(t,f);var n=new xc(s,0,0,t.key,t.frame,t);return t.width!==void 0&&n.setDisplayWidth(t.width),t.height!==void 0&&n.setDisplayHeight(t.height),dr(n,t),s.add.existing(n),n},c9=function(s,t,e,f,i){var n=new kl(s);return n},Mt=function(s,t,e,f,i,n){var h=t[e];if(!!h){var r;return r=ia(s,h,f,i,n),t[e]=r,r}},yy=function(s,t,e,f,i){if(t){Array.isArray(t)||(t=[t]);for(var n=0,h=t.length;n<h;n++){var r=t[n];r.$child||(r={$child:r},t[n]=r),Mt(s,r,"$child",e,f,i)}}return t},Lo=function(s,t,e,f,i,n){t=ge(t,f);var h=yy(s,t.background,e,f,i),r=yy(s,t.children,e,f,i),a=new n(s,t);if(s.add.existing(a),h)for(var l=0,o=h.length;l<o;l++){var u=h[l];a.addBackground(u.$child,u.padding)}if(r)for(var l=0,o=r.length;l<o;l++){var u=r[l];a.add(u.$child,u)}return a},v9=function(s,t,e,f,i){return Lo(s,t,e,f,i,Te)},p9=function(s,t,e,f,i){return Lo(s,t,e,f,i,zs)},g9=function(s,t,e,f,i){var n=t.createCellContainerCallback;if(n){var h=n.$child;delete n.$child,t.createCellContainerCallback=function(r,a,l,o){var u=ia(r,h,e,f,i);for(var v in n)o[v]=n[v];return u}}return Lo(s,t,e,f,i,hs)},m9=function(s,t,e,f,i){return Lo(s,t,e,f,i,yn)},Os=function(s,t,e,f,i,n){var h=t[e];if(!!h){if(Array.isArray(h))for(var r=0,a=h.length;r<a;r++)Array.isArray(h[r])?Os(s,h,r,f,i,n):Mt(s,h,r,f,i,n);else for(var l in h)Mt(s,h,l,f,i,n);return h}},x9=function(s,t,e,f,i){t=ge(t,f),Mt(s,t,"background",e,f,i),Os(s,t,"buttons",e,f,i);var n=new Ve(s,t);return s.add.existing(n),n},y9=function(s,t,e,f,i){t=ge(t,f),Mt(s,t,"background",e,f,i),Os(s,t,"buttons",e,f,i);var n=new Gs(s,t);return s.add.existing(n),n},T9=function(s,t,e,f,i){t=ge(t,f),Mt(s,t,"background",e,f,i);var n=t.buttons;if(n)for(var h=0,r=n.length;h<r;h++)Os(s,n,h,e,f,i);var a=t.createCellContainerCallback;if(a){var l=a.$child;delete a.$child,t.createCellContainerCallback=function(u,v,d,c){var p=ia(u,l,e,f,i);for(var g in a)c[g]=a[g];return p}}var o=new Ao(s,t);return s.add.existing(o),o},Lv=function(s,t,e,f,i,n){t=ge(t,f),Mt(s,t,"background",e,f,i),Mt(s,t,"icon",e,f,i),Mt(s,t,"text",e,f,i),Mt(s,t,"action",e,f,i);var h=new n(s,t);return s.add.existing(h),h},C9=function(s,t,e,f,i){return Lv(s,t,e,f,i,ha)},S9=function(s,t,e,f,i){t=ge(t,f),Mt(s,t,"background",e,f,i),Mt(s,t,"main",e,f,i),Mt(s,t,"leftTop",e,f,i),Mt(s,t,"centerTop",e,f,i),Mt(s,t,"rightTop",e,f,i),Mt(s,t,"leftCenter",e,f,i),Mt(s,t,"center",e,f,i),Mt(s,t,"rightCenter",e,f,i),Mt(s,t,"leftBottom",e,f,i),Mt(s,t,"centerBottom",e,f,i),Mt(s,t,"rightBottom",e,f,i);var n=new xv(s,t);return s.add.existing(n),n},E9=function(s,t,e,f,i){t=ge(t,f),Mt(s,t,"background",e,f,i),Mt(s,t,"toolbarBackground",e,f,i),Mt(s,t,"leftToolbarBackground",e,f,i),Mt(s,t,"choicesBackground",e,f,i),Mt(s,t,"actionsBackground",e,f,i),Mt(s,t,"title",e,f,i),Os(s,t,"toolbar",e,f,i),Os(s,t,"leftToolbar",e,f,i),Mt(s,t,"content",e,f,i),Mt(s,t,"description",e,f,i),Os(s,t,"choices",e,f,i),Os(s,t,"actions",e,f,i);var n=new Ql(s,t);return s.add.existing(n),n},P9=function(s,t,e,f,i){return Lv(s,t,e,f,i,gv)},M9=function(s,t,e,f,i){t=ge(t,f),Mt(s,t,"background",e,f,i),Mt(s,t,"track",e,f,i),Mt(s,t,"indicator",e,f,i),Mt(s,t,"thumb",e,f,i);var n=new la(s,t);return s.add.existing(n),n},Fv=function(s,t,e,f,i){return t&&(Mt(s,t,"background",e,f,i),Mt(s,t,"track",e,f,i),Mt(s,t,"indicator",e,f,i),Mt(s,t,"thumb",e,f,i)),t},A9=function(s,t,e,f,i){t=ge(t,f),Mt(s,t,"background",e,f,i),Mt(s,t,"icon",e,f,i),Fv(s,t.slider,e,f,i),Mt(s,t,"text",e,f,i);var n=new mv(s,t);return s.add.existing(n),n},O9=function(s,t,e,f,i){t=ge(t,f),Mt(s,t,"background",e,f,i),Fv(s,t.slider,e,f,i);var n=t.buttons;n&&(Mt(s,n,"top",e,f,i),Mt(s,n,"bottom",e,f,i),Mt(s,n,"left",e,f,i),Mt(s,n,"right",e,f,i));var h=new ql(s,t);return s.add.existing(h),h},R9=function(s,t,e,f,i){t=ge(t,f),Mt(s,t,"background",e,f,i),Mt(s,t,"text",e,f,i),Fv(s,t.slider,e,f,i),Mt(s,t,"header",e,f,i),Mt(s,t,"footer",e,f,i);var n=new eu(s,t);return s.add.existing(n),n},L9=function(s,t,e,f,i){return Lo(s,t,e,f,i,Ro)},F9=function(s,t,e,f,i){return Lv(s,t,e,f,i,Cv)},w9=function(s,t,e,f,i){t=ge(t,f),Mt(s,t,"background",e,f,i),Mt(s,t,"text",e,f,i);var n=new $l(s,t);return s.add.existing(n),n},I9=function(s,t,e,f,i){t=ge(t,f),Mt(s,t,"background",e,f,i),Mt(s,t,"content",e,f,i),Mt(s,t,"leftSide",e,f,i),Mt(s,t,"rightSide",e,f,i),Mt(s,t,"header",e,f,i),Mt(s,t,"footer",e,f,i);var n=new ov(s,t);return s.add.existing(n),n},D9=function(s,t,e,f,i){t=ge(t,f);var n=t.background;delete t.background,n&&(t.createBackgroundCallback=function(r){var a=r.scene,l=ia(a,ta(n),e,f,i);return l}),t.createButtonCallback=function(r,a,l){var o=r.scene,u=r.$next;delete r.scene,delete r.$next;var v=ia(o,ta(r),e,f,i);return r.scene=o,r.$next=u,v},t.childrenKey="$next";var h=new tu(s,t);return s.add.existing(h),h},B9={Image:t9,Sprite:i9,Video:s9,Text:a9,BBCodeText:o9,RoundRectangle:h9,Ninepatch:l9,Ninepatch2:u9,Canvas:f9,CircleMaskImage:d9,Space:c9,Sizer:v9,FixWidthSizer:p9,GridSizer:g9,OverlapSizer:m9,Buttons:x9,FixWidthButtons:y9,GridButtons:T9,Label:C9,BadgeLabel:S9,Dialog:E9,TextBox:P9,Slider:M9,NumberBar:A9,ScrollBar:O9,TextArea:R9,Pages:L9,Toast:F9,Knob:w9,HolyGrail:I9,Menu:D9},ia=function(s,t,e,f,i){var n=qH(t,f);if(!n){console.warn(`rexUI.Make: Can't get type name in ${JSON.stringify(t)}`);return}var h;if(i&&(h=i[n]),h||(h=B9[n]),!h){console.warn(`rexUI.Make: Can't create ${n} game object.`);return}var r=h(s,t,e,f,i);return t.name&&r.setName(t.name),r},pS=function(s,t,e,f,i){if(t=to(t),Array.isArray(t))t=t[t.length-1];else if(t.$root){var n=t;if(t=t.$root,delete n.$root,f===void 0)f=n;else for(var h in n)f[h]||(f[h]=n[h])}f=to(f);var r=ia(s,t,e,f,i);return r};const Ty=Phaser.Utils.Objects.IsPlainObject;class wv{constructor(t,e,f){this.setScene(t),this.setStyles(e),this.setBuilders(f)}setScene(t){return this.scene=t,this}setStyles(t){return this.styles=to(t),this}addStyle(t,e){if(this.styles===void 0&&(this.styles={}),typeof t=="string"&&e===void 0&&(t=to(t)),Ty(t)){var f=t;for(t in f)this.styles[t]=f[t]}else this.styles[t]=to(e);return this}clearStyles(){return this.setStyles(),this}setBuilders(t){return this.customBuilders=t,this}addBuilder(t,e){if(this.customBuilders===void 0&&(this.customBuilders={}),Ty(t)){var f=t;for(t in f)this.customBuilders[t]=f[t]}else this.customBuilders[t]=e;return this}clearBuilder(){return this.setBuilders(),this}make(t,e){return pS(this.scene,t,e,this.styles,this.customBuilders)}}xt.register("maker",function(s,t){return new wv(this.scene,s,t)});Ct(window,"RexPlugins.UI.Maker",wv);const is=Phaser.Utils.Objects.GetValue;var b9=function(s,t){t===void 0&&(t={});var e=s.scene,f=s.style,i=is(t,"backgroundColor",f.backgroundColor);i===null&&(i="transparent"),t.text=is(t,"text",s.text),t.fontFamily=is(t,"fontFamily",f.fontFamily),t.fontSize=is(t,"fontSize",f.fontSize),t.color=is(t,"color",f.color),t.backgroundColor=i,t.direction=is(t,"rtl",f.rtl)?"rtl":"ltr",t.align=is(t,"align",G9(f)),t.direction==="rtl"&&cv(s)&&(t.align="right");var n=new vc(e,s.x,s.y,is(t,"width",s.width),is(t,"height",s.height),t);return n.setOrigin(s.originX,s.originY),e.add.existing(n),n},G9=function(s){return s.hasOwnProperty("align")?s.align:s.hasOwnProperty("halign")?s.halign:"left"};const Zh=Phaser.Utils.Objects.GetValue;var Xr=void 0;class N9 extends He{constructor(t){super(t,{eventEmitter:!1}),this.inputText=void 0,this.onClose=void 0,this.delayCall=void 0}shutdown(t){this.isShutdown||(this.close(),Xr===this&&(Xr=void 0),super.shutdown(t))}open(t,e){Xr!==void 0&&Xr.close(),Xr=this,Kc(t)&&(e=t,t=void 0),e===void 0&&(e=Zh(t,"onClose",void 0));var f=Zh(t,"onOpen",void 0),i=Zh(t,"onTextChanged",void 0);return this.inputText=b9(this.parent,t).on("textchange",function(n){var h=n.text;i?i(this.parent,h):this.parent.text=h},this).setFocus(),this.parent.setVisible(!1),this.onClose=e,Zh(t,"enterClose",!0)&&this.scene.input.keyboard.once("keydown-ENTER",this.close,this),this.delayCall=this.scene.time.delayedCall(0,function(){this.scene.input.once("pointerdown",this.close,this),f&&f(this.parent)},[],this),this}close(){return Xr=void 0,this.inputText?(this.parent.setVisible(!0),this.inputText.destroy(),this.inputText=void 0,this.delayCall&&(this.delayCall.remove(),this.delayCall=void 0),this.scene.input.keyboard.off("keydown-ENTER",this.close,this),this.scene.input.off("pointerdown",this.close,this),this.onClose&&this.onClose(this.parent),this):this}get isOpened(){return this.inputText!==void 0}get text(){return this.isOpened?this.inputText.text:this.parent.text}}var Y9=function(s,t,e){return s._edit||(s._edit=new N9(s)),s._edit.open(t,e),s._edit},z9=function(s){var t=function(e){var f=s.padding,i=e-f.left-f.right,n=s.style;return cv(s)?(n.wordWrapWidth=i,n.maxLines=0):(n.wrapMode===0&&(n.wrapMode=1),n.wrapWidth=i,n.maxLines=0),s.setFixedSize(e,0),s.minHeight=s.height,s};return t},V9=function(s){var t=function(e){return s.setFixedSize(e,0).runWordWrap(),s.minHeight=s.height,s};return t},U9=function(s){var t=function(e){return s.setMaxWidth(e),s.minHeight=s.height,s};return t},W9=function(s){return s instanceof yo},X9=function(s,t){return t===void 0&&(t=0),s._minWidth=t,s.runWidthWrap=W9(s)?V9(s):tC(s)?U9(s):z9(s),s};const Ad=65535;var gS=function(s,t,e){if(t==null)return s;if(t===0)return Od(s,0,e),s;var f=s.text.length;if(f===0)return Od(s,t,e),s;for(var i=Math.floor(t*1.5/f),n={},h=Sy(s,i,t,e,n),r=0;r<=Ad&&h!==0;r++){if(i+=h,i<0){i=0;break}h=Sy(s,i,t,e,n)}return r===Ad&&console.warn(`FontSizeResize: Test count exceeds ${Ad}`),s.setFontSize(i),Od(s,t,e),s},Cy=function(s,t,e){return e[t]===void 0&&(s.setFontSize(t),e[t]={width:s.width,height:s.height}),e[t]},Sy=function(s,t,e,f,i){var n=Cy(s,t,i),h=Cy(s,t+1,i);if(f!==void 0){if(n.height<=f&&h.height>f)return 0;if(n.height>f)return-1}return n.width<=e&&h.width>e?0:n.width>e?-1:Math.floor(e-n.width)},Od=function(s,t,e){var f=s.style;f.fixedWidth=t,f.parent.width=t,e!==void 0&&(f.fixedHeight=e,f.parent.height=e),f.update(!1)},H9=function(s,t){return t===void 0&&(t=0),s._minWidth=t,s.runWidthWrap=function(e,f){return gS(s,e,f),s},s.resize=function(e,f){return s.width===e&&s.height===f||s.setFixedSize(e,f),s},s},$9=function(s,t){return s===void 0&&(s=0),new Promise(function(e,f){setTimeout(function(){e(t)},s)})};class K9 extends Yn{constructor(t,e){super(e),this.parent=t,this.init()}init(){this.start("IDLE")}next_IDLE(){return"TRANS_OPNE"}next_TRANS_OPNE(){return"OPEN"}enter_TRANS_OPNE(){var t=this.parent;t.transitionIn(),t.delayCall(t.transitInTime,this.next,this)}exit_TRANS_OPNE(){var t=this.parent;t.removeDelayCall()}next_OPEN(){return"TRANS_CLOSE"}enter_OPEN(){var t=this.parent;t.onOpen()}exit_OPEN(){var t=this.parent;t.removeDelayCall()}next_TRANS_CLOSE(){return"CLOSE"}enter_TRANS_CLOSE(){var t=this.parent;t.transitionOut(),t.delayCall(t.transitOutTime,this.next,this)}exit_TRANS_CLOSE(){var t=this.parent;t.removeDelayCall()}next_CLOSE(){}enter_CLOSE(){var t=this.parent;t.onClose()}exit_CLOSE(){}}const ka=Phaser.Utils.Objects.GetValue;class k9 extends He{constructor(t,e){super(t,e),this.setTransitInTime(ka(e,"duration.in",200)),this.setTransitOutTime(ka(e,"duration.out",200)),this.setTransitInCallback(ka(e,"transitIn")),this.setTransitOutCallback(ka(e,"transitOut")),this.destroyParent=ka(e,"destroy",!0),this.timer=void 0,this._state=new K9(this,{eventEmitter:!1}),this.closeEventData=void 0}start(){this._state.next()}get state(){return this._state.state}shutdown(t){this.isShutdown||(this.transitInCallback=void 0,this.transitOutCallback=void 0,this.closeEventData=void 0,this.removeDelayCall(),super.shutdown(t))}transitionIn(){var t=this.transitInTime;return this.transitInCallback(this.parent,t),this}transitionOut(){var t=this.transitOutTime;return this.transitOutCallback(this.parent,t),this}onOpen(){}onClose(){this.destroyParent?this.parent.destroy():this.destroy()}delayCall(t,e,f){return this.timer=fv(this,t,e,f),this}removeDelayCall(){return this.timer&&(this.timer.remove(!1),this.timer=void 0),this}setTransitInTime(t){return this.transitInTime=t,this}setTransitOutTime(t){return this.transitOutTime=t,this}setTransitInCallback(t){return t||(t=gi),this.transitInCallback=t,this}setTransitOutCallback(t){return t||(t=gi),this.transitOutCallback=t,this}requestClose(t){return this._state.state==="OPEN"&&(this.closeEventData=arguments.length>0?t:this.parent,this._state.next()),this}}var Z9=function(s,t){var e=s.scene,f=new nv(e,t);return e.add.existing(f),s.isRexContainerLite?s.moveDepthBelow(f):e.children.moveBelow(f,s),f},Jh={popUp:xT,scaleDown:function(s,t){yT(s,t,void 0,void 0,!1)},fadeIn:Nl,fadeOut:function(s,t){Yl(s,t,!1)}};const Qh=Phaser.Utils.Objects.GetValue;class J9 extends k9{constructor(t,e){e===void 0&&(e={}),e.hasOwnProperty("transitIn")||(e.transitIn=Es.popUp),e.hasOwnProperty("transitOut")||(e.transitOut=Es.scaleDown),super(t,e);var f=Qh(e,"cover");this.cover=f!==!1?Z9(t,f):void 0;var i=Qh(e,"manualClose",!0);if(i)this.setDisplayTime(-1);else{this.setDisplayTime(Qh(e,"duration.hold",2e3));var n=Qh(e,"anyTouchClose",!0);n&&this.anyTouchClose()}this.start()}shutdown(t){this.isShutdown||(this.cover||this.scene.input.off("pointerup",this.requestClose,this),this.cover&&!t&&(this.cover.destroy(),this.cover=void 0),super.shutdown(t))}anyTouchClose(){return this.cover?this.cover.once("pointerup",this.requestClose,this):this.scene.input.once("pointerup",this.requestClose,this),this}transitionIn(){super.transitionIn();var t=this.transitInTime,e=this.cover;return e&&Nl(e,t,e.alpha),this}transitionOut(){super.transitionOut();var t=this.transitOutTime,e=this.cover;return e&&Yl(e,t,!1),this}onOpen(){var t=this.displayTime;t>=0&&this.delayCall(t,this.requestClose,this),this.emit("open",this.parent,this),super.onOpen()}onClose(){this.emit("close",this.closeEventData),super.onClose()}setDisplayTime(t){return this.displayTime=t,this}setTransitInCallback(t){switch(typeof t=="string"&&(t=Es[t]),t){case Es.popUp:t=Jh.popUp;break;case Es.fadeIn:t=Jh.fadeIn;break}return super.setTransitInCallback(t),this}setTransitOutCallback(t){switch(typeof t=="string"&&(t=Es[t]),t){case Es.scaleDown:t=Jh.scaleDown;break;case Es.fadeOut:t=Jh.fadeOut;break}return super.setTransitOutCallback(t),this}}const Es={popUp:0,fadeIn:1,scaleDown:0,fadeOut:1};var mS=function(s,t){var e=new J9(s,t);return e.on("open",function(){s.emit("modal.open",e)}),e.on("close",function(f){s.emit("modal.close",f,e)}),s.on("modal.requestClose",e.requestClose,e),e.on("close",function(){s.off("modal.requestClose",e.requestClose,e)}),e},Q9=function(s,t){var e=mS(s,t);return new Promise(function(f,i){e.once("close",function(n){f(n)})})},j9=function(s,t){s.emit("modal.requestClose",t)};class xS extends Phaser.Plugins.ScenePlugin{constructor(t,e){super(t,e),this.add=new xt(t)}start(){var t=this.scene.events;t.on("destroy",this.destroy,this)}isInTouching(t,e,f,i){return t.visible?$c(t,e,f,i):!1}get viewport(){return ra(this.scene,this.scene.cameras.main,!0)}make(t,e,f,i){return pS(this.scene,t,e,f,i)}get maker(){return this._maker||(this._maker=new wv(this.scene)),this._maker}}var q9={getParentSizer:mn,getTopmostSizer:H1,hide:As,show:Ms,isShown:Hc,edit:Y9,wrapExpandText:X9,fontSizeExpandText:H9,fontSizeResize:gS,waitEvent:Pc,waitComplete:We,delayPromise:$9,setChildrenInteractive:Qc,fadeIn:Nl,fadeOutDestroy:Yl,easeMoveTo:TT,easeMoveFrom:CT,modal:mS,modalPromise:Q9,modalClose:j9,requestDrag:CC,yaml:cS};Object.assign(xS.prototype,q9);var _9={type:qa.AUTO,parent:"game",pixelArt:!1,backgroundColor:"#55547A",scale:{width:window.innerWidth,height:window.innerHeight,mode:qa.Scale.NONE,autoCenter:qa.Scale.CENTER_BOTH},scene:"Game_Scene",plugins:{scene:[{key:"rexUI",plugin:xS,mapping:"rexUI"}]}},ye={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(s,t){(function(){var e,f="4.17.21",i=200,n="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",h="Expected a function",r="Invalid `variable` option passed into `_.template`",a="__lodash_hash_undefined__",l=500,o="__lodash_placeholder__",u=1,v=2,d=4,c=1,p=2,g=1,m=2,x=4,y=8,T=16,C=32,S=64,E=128,M=256,O=512,L=30,R="...",F=800,D=16,B=1,N=2,U=3,X=1/0,K=9007199254740991,k=17976931348623157e292,b=0/0,I=4294967295,G=I-1,Y=I>>>1,V=[["ary",E],["bind",g],["bindKey",m],["curry",y],["curryRight",T],["flip",O],["partial",C],["partialRight",S],["rearg",M]],W="[object Arguments]",H="[object Array]",Z="[object AsyncFunction]",q="[object Boolean]",_="[object Date]",nt="[object DOMException]",rt="[object Error]",at="[object Function]",ct="[object GeneratorFunction]",ut="[object Map]",vt="[object Number]",It="[object Null]",St="[object Object]",Et="[object Promise]",dt="[object Proxy]",Bt="[object RegExp]",mt="[object Set]",At="[object String]",Ae="[object Symbol]",$e="[object Undefined]",Zt="[object WeakMap]",Xt="[object WeakSet]",se="[object ArrayBuffer]",ee="[object DataView]",re="[object Float32Array]",Ie="[object Float64Array]",yi="[object Int8Array]",Ti="[object Int16Array]",Ci="[object Int32Array]",Si="[object Uint8Array]",Ei="[object Uint8ClampedArray]",Pi="[object Uint16Array]",da="[object Uint32Array]",CS=/\b__p \+= '';/g,SS=/\b(__p \+=) '' \+/g,ES=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Dv=/&(?:amp|lt|gt|quot|#39);/g,Bv=/[&<>"']/g,PS=RegExp(Dv.source),MS=RegExp(Bv.source),AS=/<%-([\s\S]+?)%>/g,OS=/<%([\s\S]+?)%>/g,bv=/<%=([\s\S]+?)%>/g,RS=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,LS=/^\w*$/,FS=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,au=/[\\^$.*+?()[\]{}|]/g,wS=RegExp(au.source),ou=/^\s+/,IS=/\s/,DS=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,BS=/\{\n\/\* \[wrapped with (.+)\] \*/,bS=/,? & /,GS=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,NS=/[()=,{}\[\]\/\s]/,YS=/\\(\\)?/g,zS=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Gv=/\w*$/,VS=/^[-+]0x[0-9a-f]+$/i,US=/^0b[01]+$/i,WS=/^\[object .+?Constructor\]$/,XS=/^0o[0-7]+$/i,HS=/^(?:0|[1-9]\d*)$/,$S=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Fo=/($^)/,KS=/['\n\r\u2028\u2029\\]/g,wo="\\ud800-\\udfff",kS="\\u0300-\\u036f",ZS="\\ufe20-\\ufe2f",JS="\\u20d0-\\u20ff",Nv=kS+ZS+JS,Yv="\\u2700-\\u27bf",zv="a-z\\xdf-\\xf6\\xf8-\\xff",QS="\\xac\\xb1\\xd7\\xf7",jS="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",qS="\\u2000-\\u206f",_S=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Vv="A-Z\\xc0-\\xd6\\xd8-\\xde",Uv="\\ufe0e\\ufe0f",Wv=QS+jS+qS+_S,hu="['\u2019]",tE="["+wo+"]",Xv="["+Wv+"]",Io="["+Nv+"]",Hv="\\d+",eE="["+Yv+"]",$v="["+zv+"]",Kv="[^"+wo+Wv+Hv+Yv+zv+Vv+"]",lu="\\ud83c[\\udffb-\\udfff]",iE="(?:"+Io+"|"+lu+")",kv="[^"+wo+"]",uu="(?:\\ud83c[\\udde6-\\uddff]){2}",fu="[\\ud800-\\udbff][\\udc00-\\udfff]",cr="["+Vv+"]",Zv="\\u200d",Jv="(?:"+$v+"|"+Kv+")",nE="(?:"+cr+"|"+Kv+")",Qv="(?:"+hu+"(?:d|ll|m|re|s|t|ve))?",jv="(?:"+hu+"(?:D|LL|M|RE|S|T|VE))?",qv=iE+"?",_v="["+Uv+"]?",sE="(?:"+Zv+"(?:"+[kv,uu,fu].join("|")+")"+_v+qv+")*",rE="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",aE="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",tp=_v+qv+sE,oE="(?:"+[eE,uu,fu].join("|")+")"+tp,hE="(?:"+[kv+Io+"?",Io,uu,fu,tE].join("|")+")",lE=RegExp(hu,"g"),uE=RegExp(Io,"g"),du=RegExp(lu+"(?="+lu+")|"+hE+tp,"g"),fE=RegExp([cr+"?"+$v+"+"+Qv+"(?="+[Xv,cr,"$"].join("|")+")",nE+"+"+jv+"(?="+[Xv,cr+Jv,"$"].join("|")+")",cr+"?"+Jv+"+"+Qv,cr+"+"+jv,aE,rE,Hv,oE].join("|"),"g"),dE=RegExp("["+Zv+wo+Nv+Uv+"]"),cE=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,vE=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],pE=-1,ue={};ue[re]=ue[Ie]=ue[yi]=ue[Ti]=ue[Ci]=ue[Si]=ue[Ei]=ue[Pi]=ue[da]=!0,ue[W]=ue[H]=ue[se]=ue[q]=ue[ee]=ue[_]=ue[rt]=ue[at]=ue[ut]=ue[vt]=ue[St]=ue[Bt]=ue[mt]=ue[At]=ue[Zt]=!1;var ae={};ae[W]=ae[H]=ae[se]=ae[ee]=ae[q]=ae[_]=ae[re]=ae[Ie]=ae[yi]=ae[Ti]=ae[Ci]=ae[ut]=ae[vt]=ae[St]=ae[Bt]=ae[mt]=ae[At]=ae[Ae]=ae[Si]=ae[Ei]=ae[Pi]=ae[da]=!0,ae[rt]=ae[at]=ae[Zt]=!1;var gE={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},mE={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},xE={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},yE={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},TE=parseFloat,CE=parseInt,ep=typeof Hr=="object"&&Hr&&Hr.Object===Object&&Hr,SE=typeof self=="object"&&self&&self.Object===Object&&self,Ge=ep||SE||Function("return this")(),cu=t&&!t.nodeType&&t,Vs=cu&&!0&&s&&!s.nodeType&&s,ip=Vs&&Vs.exports===cu,vu=ip&&ep.process,Ni=function(){try{var et=Vs&&Vs.require&&Vs.require("util").types;return et||vu&&vu.binding&&vu.binding("util")}catch{}}(),np=Ni&&Ni.isArrayBuffer,sp=Ni&&Ni.isDate,rp=Ni&&Ni.isMap,ap=Ni&&Ni.isRegExp,op=Ni&&Ni.isSet,hp=Ni&&Ni.isTypedArray;function Mi(et,ot,st){switch(st.length){case 0:return et.call(ot);case 1:return et.call(ot,st[0]);case 2:return et.call(ot,st[0],st[1]);case 3:return et.call(ot,st[0],st[1],st[2])}return et.apply(ot,st)}function EE(et,ot,st,yt){for(var bt=-1,Jt=et==null?0:et.length;++bt<Jt;){var Oe=et[bt];ot(yt,Oe,st(Oe),et)}return yt}function Yi(et,ot){for(var st=-1,yt=et==null?0:et.length;++st<yt&&ot(et[st],st,et)!==!1;);return et}function PE(et,ot){for(var st=et==null?0:et.length;st--&&ot(et[st],st,et)!==!1;);return et}function lp(et,ot){for(var st=-1,yt=et==null?0:et.length;++st<yt;)if(!ot(et[st],st,et))return!1;return!0}function ls(et,ot){for(var st=-1,yt=et==null?0:et.length,bt=0,Jt=[];++st<yt;){var Oe=et[st];ot(Oe,st,et)&&(Jt[bt++]=Oe)}return Jt}function Do(et,ot){var st=et==null?0:et.length;return!!st&&vr(et,ot,0)>-1}function pu(et,ot,st){for(var yt=-1,bt=et==null?0:et.length;++yt<bt;)if(st(ot,et[yt]))return!0;return!1}function fe(et,ot){for(var st=-1,yt=et==null?0:et.length,bt=Array(yt);++st<yt;)bt[st]=ot(et[st],st,et);return bt}function us(et,ot){for(var st=-1,yt=ot.length,bt=et.length;++st<yt;)et[bt+st]=ot[st];return et}function gu(et,ot,st,yt){var bt=-1,Jt=et==null?0:et.length;for(yt&&Jt&&(st=et[++bt]);++bt<Jt;)st=ot(st,et[bt],bt,et);return st}function ME(et,ot,st,yt){var bt=et==null?0:et.length;for(yt&&bt&&(st=et[--bt]);bt--;)st=ot(st,et[bt],bt,et);return st}function mu(et,ot){for(var st=-1,yt=et==null?0:et.length;++st<yt;)if(ot(et[st],st,et))return!0;return!1}var AE=xu("length");function OE(et){return et.split("")}function RE(et){return et.match(GS)||[]}function up(et,ot,st){var yt;return st(et,function(bt,Jt,Oe){if(ot(bt,Jt,Oe))return yt=Jt,!1}),yt}function Bo(et,ot,st,yt){for(var bt=et.length,Jt=st+(yt?1:-1);yt?Jt--:++Jt<bt;)if(ot(et[Jt],Jt,et))return Jt;return-1}function vr(et,ot,st){return ot===ot?VE(et,ot,st):Bo(et,fp,st)}function LE(et,ot,st,yt){for(var bt=st-1,Jt=et.length;++bt<Jt;)if(yt(et[bt],ot))return bt;return-1}function fp(et){return et!==et}function dp(et,ot){var st=et==null?0:et.length;return st?Tu(et,ot)/st:b}function xu(et){return function(ot){return ot==null?e:ot[et]}}function yu(et){return function(ot){return et==null?e:et[ot]}}function cp(et,ot,st,yt,bt){return bt(et,function(Jt,Oe,ie){st=yt?(yt=!1,Jt):ot(st,Jt,Oe,ie)}),st}function FE(et,ot){var st=et.length;for(et.sort(ot);st--;)et[st]=et[st].value;return et}function Tu(et,ot){for(var st,yt=-1,bt=et.length;++yt<bt;){var Jt=ot(et[yt]);Jt!==e&&(st=st===e?Jt:st+Jt)}return st}function Cu(et,ot){for(var st=-1,yt=Array(et);++st<et;)yt[st]=ot(st);return yt}function wE(et,ot){return fe(ot,function(st){return[st,et[st]]})}function vp(et){return et&&et.slice(0,xp(et)+1).replace(ou,"")}function Ai(et){return function(ot){return et(ot)}}function Su(et,ot){return fe(ot,function(st){return et[st]})}function ca(et,ot){return et.has(ot)}function pp(et,ot){for(var st=-1,yt=et.length;++st<yt&&vr(ot,et[st],0)>-1;);return st}function gp(et,ot){for(var st=et.length;st--&&vr(ot,et[st],0)>-1;);return st}function IE(et,ot){for(var st=et.length,yt=0;st--;)et[st]===ot&&++yt;return yt}var DE=yu(gE),BE=yu(mE);function bE(et){return"\\"+yE[et]}function GE(et,ot){return et==null?e:et[ot]}function pr(et){return dE.test(et)}function NE(et){return cE.test(et)}function YE(et){for(var ot,st=[];!(ot=et.next()).done;)st.push(ot.value);return st}function Eu(et){var ot=-1,st=Array(et.size);return et.forEach(function(yt,bt){st[++ot]=[bt,yt]}),st}function mp(et,ot){return function(st){return et(ot(st))}}function fs(et,ot){for(var st=-1,yt=et.length,bt=0,Jt=[];++st<yt;){var Oe=et[st];(Oe===ot||Oe===o)&&(et[st]=o,Jt[bt++]=st)}return Jt}function bo(et){var ot=-1,st=Array(et.size);return et.forEach(function(yt){st[++ot]=yt}),st}function zE(et){var ot=-1,st=Array(et.size);return et.forEach(function(yt){st[++ot]=[yt,yt]}),st}function VE(et,ot,st){for(var yt=st-1,bt=et.length;++yt<bt;)if(et[yt]===ot)return yt;return-1}function UE(et,ot,st){for(var yt=st+1;yt--;)if(et[yt]===ot)return yt;return yt}function gr(et){return pr(et)?XE(et):AE(et)}function tn(et){return pr(et)?HE(et):OE(et)}function xp(et){for(var ot=et.length;ot--&&IS.test(et.charAt(ot)););return ot}var WE=yu(xE);function XE(et){for(var ot=du.lastIndex=0;du.test(et);)++ot;return ot}function HE(et){return et.match(du)||[]}function $E(et){return et.match(fE)||[]}var KE=function et(ot){ot=ot==null?Ge:mr.defaults(Ge.Object(),ot,mr.pick(Ge,vE));var st=ot.Array,yt=ot.Date,bt=ot.Error,Jt=ot.Function,Oe=ot.Math,ie=ot.Object,Pu=ot.RegExp,kE=ot.String,zi=ot.TypeError,Go=st.prototype,ZE=Jt.prototype,xr=ie.prototype,No=ot["__core-js_shared__"],Yo=ZE.toString,_t=xr.hasOwnProperty,JE=0,yp=function(){var P=/[^.]+$/.exec(No&&No.keys&&No.keys.IE_PROTO||"");return P?"Symbol(src)_1."+P:""}(),zo=xr.toString,QE=Yo.call(ie),jE=Ge._,qE=Pu("^"+Yo.call(_t).replace(au,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Vo=ip?ot.Buffer:e,ds=ot.Symbol,Uo=ot.Uint8Array,Tp=Vo?Vo.allocUnsafe:e,Wo=mp(ie.getPrototypeOf,ie),Cp=ie.create,Sp=xr.propertyIsEnumerable,Xo=Go.splice,Ep=ds?ds.isConcatSpreadable:e,va=ds?ds.iterator:e,Us=ds?ds.toStringTag:e,Ho=function(){try{var P=Ks(ie,"defineProperty");return P({},"",{}),P}catch{}}(),_E=ot.clearTimeout!==Ge.clearTimeout&&ot.clearTimeout,tP=yt&&yt.now!==Ge.Date.now&&yt.now,eP=ot.setTimeout!==Ge.setTimeout&&ot.setTimeout,$o=Oe.ceil,Ko=Oe.floor,Mu=ie.getOwnPropertySymbols,iP=Vo?Vo.isBuffer:e,Pp=ot.isFinite,nP=Go.join,sP=mp(ie.keys,ie),Re=Oe.max,Ke=Oe.min,rP=yt.now,aP=ot.parseInt,Mp=Oe.random,oP=Go.reverse,Au=Ks(ot,"DataView"),pa=Ks(ot,"Map"),Ou=Ks(ot,"Promise"),yr=Ks(ot,"Set"),ga=Ks(ot,"WeakMap"),ma=Ks(ie,"create"),ko=ga&&new ga,Tr={},hP=ks(Au),lP=ks(pa),uP=ks(Ou),fP=ks(yr),dP=ks(ga),Zo=ds?ds.prototype:e,xa=Zo?Zo.valueOf:e,Ap=Zo?Zo.toString:e;function J(P){if(me(P)&&!Gt(P)&&!(P instanceof Ut)){if(P instanceof Vi)return P;if(_t.call(P,"__wrapped__"))return Og(P)}return new Vi(P)}var Cr=function(){function P(){}return function(A){if(!ve(A))return{};if(Cp)return Cp(A);P.prototype=A;var w=new P;return P.prototype=e,w}}();function Jo(){}function Vi(P,A){this.__wrapped__=P,this.__actions__=[],this.__chain__=!!A,this.__index__=0,this.__values__=e}J.templateSettings={escape:AS,evaluate:OS,interpolate:bv,variable:"",imports:{_:J}},J.prototype=Jo.prototype,J.prototype.constructor=J,Vi.prototype=Cr(Jo.prototype),Vi.prototype.constructor=Vi;function Ut(P){this.__wrapped__=P,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=I,this.__views__=[]}function cP(){var P=new Ut(this.__wrapped__);return P.__actions__=oi(this.__actions__),P.__dir__=this.__dir__,P.__filtered__=this.__filtered__,P.__iteratees__=oi(this.__iteratees__),P.__takeCount__=this.__takeCount__,P.__views__=oi(this.__views__),P}function vP(){if(this.__filtered__){var P=new Ut(this);P.__dir__=-1,P.__filtered__=!0}else P=this.clone(),P.__dir__*=-1;return P}function pP(){var P=this.__wrapped__.value(),A=this.__dir__,w=Gt(P),z=A<0,$=w?P.length:0,Q=OM(0,$,this.__views__),j=Q.start,tt=Q.end,it=tt-j,ht=z?tt:j-1,lt=this.__iteratees__,ft=lt.length,gt=0,Pt=Ke(it,this.__takeCount__);if(!w||!z&&$==it&&Pt==it)return Qp(P,this.__actions__);var Ft=[];t:for(;it--&&gt<Pt;){ht+=A;for(var Yt=-1,wt=P[ht];++Yt<ft;){var Vt=lt[Yt],Ht=Vt.iteratee,Li=Vt.type,ni=Ht(wt);if(Li==N)wt=ni;else if(!ni){if(Li==B)continue t;break t}}Ft[gt++]=wt}return Ft}Ut.prototype=Cr(Jo.prototype),Ut.prototype.constructor=Ut;function Ws(P){var A=-1,w=P==null?0:P.length;for(this.clear();++A<w;){var z=P[A];this.set(z[0],z[1])}}function gP(){this.__data__=ma?ma(null):{},this.size=0}function mP(P){var A=this.has(P)&&delete this.__data__[P];return this.size-=A?1:0,A}function xP(P){var A=this.__data__;if(ma){var w=A[P];return w===a?e:w}return _t.call(A,P)?A[P]:e}function yP(P){var A=this.__data__;return ma?A[P]!==e:_t.call(A,P)}function TP(P,A){var w=this.__data__;return this.size+=this.has(P)?0:1,w[P]=ma&&A===e?a:A,this}Ws.prototype.clear=gP,Ws.prototype.delete=mP,Ws.prototype.get=xP,Ws.prototype.has=yP,Ws.prototype.set=TP;function Wn(P){var A=-1,w=P==null?0:P.length;for(this.clear();++A<w;){var z=P[A];this.set(z[0],z[1])}}function CP(){this.__data__=[],this.size=0}function SP(P){var A=this.__data__,w=Qo(A,P);if(w<0)return!1;var z=A.length-1;return w==z?A.pop():Xo.call(A,w,1),--this.size,!0}function EP(P){var A=this.__data__,w=Qo(A,P);return w<0?e:A[w][1]}function PP(P){return Qo(this.__data__,P)>-1}function MP(P,A){var w=this.__data__,z=Qo(w,P);return z<0?(++this.size,w.push([P,A])):w[z][1]=A,this}Wn.prototype.clear=CP,Wn.prototype.delete=SP,Wn.prototype.get=EP,Wn.prototype.has=PP,Wn.prototype.set=MP;function Xn(P){var A=-1,w=P==null?0:P.length;for(this.clear();++A<w;){var z=P[A];this.set(z[0],z[1])}}function AP(){this.size=0,this.__data__={hash:new Ws,map:new(pa||Wn),string:new Ws}}function OP(P){var A=hh(this,P).delete(P);return this.size-=A?1:0,A}function RP(P){return hh(this,P).get(P)}function LP(P){return hh(this,P).has(P)}function FP(P,A){var w=hh(this,P),z=w.size;return w.set(P,A),this.size+=w.size==z?0:1,this}Xn.prototype.clear=AP,Xn.prototype.delete=OP,Xn.prototype.get=RP,Xn.prototype.has=LP,Xn.prototype.set=FP;function Xs(P){var A=-1,w=P==null?0:P.length;for(this.__data__=new Xn;++A<w;)this.add(P[A])}function wP(P){return this.__data__.set(P,a),this}function IP(P){return this.__data__.has(P)}Xs.prototype.add=Xs.prototype.push=wP,Xs.prototype.has=IP;function en(P){var A=this.__data__=new Wn(P);this.size=A.size}function DP(){this.__data__=new Wn,this.size=0}function BP(P){var A=this.__data__,w=A.delete(P);return this.size=A.size,w}function bP(P){return this.__data__.get(P)}function GP(P){return this.__data__.has(P)}function NP(P,A){var w=this.__data__;if(w instanceof Wn){var z=w.__data__;if(!pa||z.length<i-1)return z.push([P,A]),this.size=++w.size,this;w=this.__data__=new Xn(z)}return w.set(P,A),this.size=w.size,this}en.prototype.clear=DP,en.prototype.delete=BP,en.prototype.get=bP,en.prototype.has=GP,en.prototype.set=NP;function Op(P,A){var w=Gt(P),z=!w&&Zs(P),$=!w&&!z&&ms(P),Q=!w&&!z&&!$&&Mr(P),j=w||z||$||Q,tt=j?Cu(P.length,kE):[],it=tt.length;for(var ht in P)(A||_t.call(P,ht))&&!(j&&(ht=="length"||$&&(ht=="offset"||ht=="parent")||Q&&(ht=="buffer"||ht=="byteLength"||ht=="byteOffset")||kn(ht,it)))&&tt.push(ht);return tt}function Rp(P){var A=P.length;return A?P[Yu(0,A-1)]:e}function YP(P,A){return lh(oi(P),Hs(A,0,P.length))}function zP(P){return lh(oi(P))}function Ru(P,A,w){(w!==e&&!nn(P[A],w)||w===e&&!(A in P))&&Hn(P,A,w)}function ya(P,A,w){var z=P[A];(!(_t.call(P,A)&&nn(z,w))||w===e&&!(A in P))&&Hn(P,A,w)}function Qo(P,A){for(var w=P.length;w--;)if(nn(P[w][0],A))return w;return-1}function VP(P,A,w,z){return cs(P,function($,Q,j){A(z,$,w($),j)}),z}function Lp(P,A){return P&&Cn(A,De(A),P)}function UP(P,A){return P&&Cn(A,li(A),P)}function Hn(P,A,w){A=="__proto__"&&Ho?Ho(P,A,{configurable:!0,enumerable:!0,value:w,writable:!0}):P[A]=w}function Lu(P,A){for(var w=-1,z=A.length,$=st(z),Q=P==null;++w<z;)$[w]=Q?e:uf(P,A[w]);return $}function Hs(P,A,w){return P===P&&(w!==e&&(P=P<=w?P:w),A!==e&&(P=P>=A?P:A)),P}function Ui(P,A,w,z,$,Q){var j,tt=A&u,it=A&v,ht=A&d;if(w&&(j=$?w(P,z,$,Q):w(P)),j!==e)return j;if(!ve(P))return P;var lt=Gt(P);if(lt){if(j=LM(P),!tt)return oi(P,j)}else{var ft=ke(P),gt=ft==at||ft==ct;if(ms(P))return _p(P,tt);if(ft==St||ft==W||gt&&!$){if(j=it||gt?{}:xg(P),!tt)return it?xM(P,UP(j,P)):mM(P,Lp(j,P))}else{if(!ae[ft])return $?P:{};j=FM(P,ft,tt)}}Q||(Q=new en);var Pt=Q.get(P);if(Pt)return Pt;Q.set(P,j),kg(P)?P.forEach(function(wt){j.add(Ui(wt,A,w,wt,P,Q))}):$g(P)&&P.forEach(function(wt,Vt){j.set(Vt,Ui(wt,A,w,Vt,P,Q))});var Ft=ht?it?Ju:Zu:it?li:De,Yt=lt?e:Ft(P);return Yi(Yt||P,function(wt,Vt){Yt&&(Vt=wt,wt=P[Vt]),ya(j,Vt,Ui(wt,A,w,Vt,P,Q))}),j}function WP(P){var A=De(P);return function(w){return Fp(w,P,A)}}function Fp(P,A,w){var z=w.length;if(P==null)return!z;for(P=ie(P);z--;){var $=w[z],Q=A[$],j=P[$];if(j===e&&!($ in P)||!Q(j))return!1}return!0}function wp(P,A,w){if(typeof P!="function")throw new zi(h);return Aa(function(){P.apply(e,w)},A)}function Ta(P,A,w,z){var $=-1,Q=Do,j=!0,tt=P.length,it=[],ht=A.length;if(!tt)return it;w&&(A=fe(A,Ai(w))),z?(Q=pu,j=!1):A.length>=i&&(Q=ca,j=!1,A=new Xs(A));t:for(;++$<tt;){var lt=P[$],ft=w==null?lt:w(lt);if(lt=z||lt!==0?lt:0,j&&ft===ft){for(var gt=ht;gt--;)if(A[gt]===ft)continue t;it.push(lt)}else Q(A,ft,z)||it.push(lt)}return it}var cs=sg(Tn),Ip=sg(wu,!0);function XP(P,A){var w=!0;return cs(P,function(z,$,Q){return w=!!A(z,$,Q),w}),w}function jo(P,A,w){for(var z=-1,$=P.length;++z<$;){var Q=P[z],j=A(Q);if(j!=null&&(tt===e?j===j&&!Ri(j):w(j,tt)))var tt=j,it=Q}return it}function HP(P,A,w,z){var $=P.length;for(w=Nt(w),w<0&&(w=-w>$?0:$+w),z=z===e||z>$?$:Nt(z),z<0&&(z+=$),z=w>z?0:Jg(z);w<z;)P[w++]=A;return P}function Dp(P,A){var w=[];return cs(P,function(z,$,Q){A(z,$,Q)&&w.push(z)}),w}function Ne(P,A,w,z,$){var Q=-1,j=P.length;for(w||(w=IM),$||($=[]);++Q<j;){var tt=P[Q];A>0&&w(tt)?A>1?Ne(tt,A-1,w,z,$):us($,tt):z||($[$.length]=tt)}return $}var Fu=rg(),Bp=rg(!0);function Tn(P,A){return P&&Fu(P,A,De)}function wu(P,A){return P&&Bp(P,A,De)}function qo(P,A){return ls(A,function(w){return Zn(P[w])})}function $s(P,A){A=ps(A,P);for(var w=0,z=A.length;P!=null&&w<z;)P=P[Sn(A[w++])];return w&&w==z?P:e}function bp(P,A,w){var z=A(P);return Gt(P)?z:us(z,w(P))}function ei(P){return P==null?P===e?$e:It:Us&&Us in ie(P)?AM(P):zM(P)}function Iu(P,A){return P>A}function $P(P,A){return P!=null&&_t.call(P,A)}function KP(P,A){return P!=null&&A in ie(P)}function kP(P,A,w){return P>=Ke(A,w)&&P<Re(A,w)}function Du(P,A,w){for(var z=w?pu:Do,$=P[0].length,Q=P.length,j=Q,tt=st(Q),it=1/0,ht=[];j--;){var lt=P[j];j&&A&&(lt=fe(lt,Ai(A))),it=Ke(lt.length,it),tt[j]=!w&&(A||$>=120&&lt.length>=120)?new Xs(j&&lt):e}lt=P[0];var ft=-1,gt=tt[0];t:for(;++ft<$&&ht.length<it;){var Pt=lt[ft],Ft=A?A(Pt):Pt;if(Pt=w||Pt!==0?Pt:0,!(gt?ca(gt,Ft):z(ht,Ft,w))){for(j=Q;--j;){var Yt=tt[j];if(!(Yt?ca(Yt,Ft):z(P[j],Ft,w)))continue t}gt&&gt.push(Ft),ht.push(Pt)}}return ht}function ZP(P,A,w,z){return Tn(P,function($,Q,j){A(z,w($),Q,j)}),z}function Ca(P,A,w){A=ps(A,P),P=Sg(P,A);var z=P==null?P:P[Sn(Xi(A))];return z==null?e:Mi(z,P,w)}function Gp(P){return me(P)&&ei(P)==W}function JP(P){return me(P)&&ei(P)==se}function QP(P){return me(P)&&ei(P)==_}function Sa(P,A,w,z,$){return P===A?!0:P==null||A==null||!me(P)&&!me(A)?P!==P&&A!==A:jP(P,A,w,z,Sa,$)}function jP(P,A,w,z,$,Q){var j=Gt(P),tt=Gt(A),it=j?H:ke(P),ht=tt?H:ke(A);it=it==W?St:it,ht=ht==W?St:ht;var lt=it==St,ft=ht==St,gt=it==ht;if(gt&&ms(P)){if(!ms(A))return!1;j=!0,lt=!1}if(gt&&!lt)return Q||(Q=new en),j||Mr(P)?pg(P,A,w,z,$,Q):PM(P,A,it,w,z,$,Q);if(!(w&c)){var Pt=lt&&_t.call(P,"__wrapped__"),Ft=ft&&_t.call(A,"__wrapped__");if(Pt||Ft){var Yt=Pt?P.value():P,wt=Ft?A.value():A;return Q||(Q=new en),$(Yt,wt,w,z,Q)}}return gt?(Q||(Q=new en),MM(P,A,w,z,$,Q)):!1}function qP(P){return me(P)&&ke(P)==ut}function Bu(P,A,w,z){var $=w.length,Q=$,j=!z;if(P==null)return!Q;for(P=ie(P);$--;){var tt=w[$];if(j&&tt[2]?tt[1]!==P[tt[0]]:!(tt[0]in P))return!1}for(;++$<Q;){tt=w[$];var it=tt[0],ht=P[it],lt=tt[1];if(j&&tt[2]){if(ht===e&&!(it in P))return!1}else{var ft=new en;if(z)var gt=z(ht,lt,it,P,A,ft);if(!(gt===e?Sa(lt,ht,c|p,z,ft):gt))return!1}}return!0}function Np(P){if(!ve(P)||BM(P))return!1;var A=Zn(P)?qE:WS;return A.test(ks(P))}function _P(P){return me(P)&&ei(P)==Bt}function tM(P){return me(P)&&ke(P)==mt}function eM(P){return me(P)&&ph(P.length)&&!!ue[ei(P)]}function Yp(P){return typeof P=="function"?P:P==null?ui:typeof P=="object"?Gt(P)?Up(P[0],P[1]):Vp(P):a0(P)}function bu(P){if(!Ma(P))return sP(P);var A=[];for(var w in ie(P))_t.call(P,w)&&w!="constructor"&&A.push(w);return A}function iM(P){if(!ve(P))return YM(P);var A=Ma(P),w=[];for(var z in P)z=="constructor"&&(A||!_t.call(P,z))||w.push(z);return w}function Gu(P,A){return P<A}function zp(P,A){var w=-1,z=hi(P)?st(P.length):[];return cs(P,function($,Q,j){z[++w]=A($,Q,j)}),z}function Vp(P){var A=ju(P);return A.length==1&&A[0][2]?Tg(A[0][0],A[0][1]):function(w){return w===P||Bu(w,P,A)}}function Up(P,A){return _u(P)&&yg(A)?Tg(Sn(P),A):function(w){var z=uf(w,P);return z===e&&z===A?ff(w,P):Sa(A,z,c|p)}}function _o(P,A,w,z,$){P!==A&&Fu(A,function(Q,j){if($||($=new en),ve(Q))nM(P,A,j,w,_o,z,$);else{var tt=z?z(ef(P,j),Q,j+"",P,A,$):e;tt===e&&(tt=Q),Ru(P,j,tt)}},li)}function nM(P,A,w,z,$,Q,j){var tt=ef(P,w),it=ef(A,w),ht=j.get(it);if(ht){Ru(P,w,ht);return}var lt=Q?Q(tt,it,w+"",P,A,j):e,ft=lt===e;if(ft){var gt=Gt(it),Pt=!gt&&ms(it),Ft=!gt&&!Pt&&Mr(it);lt=it,gt||Pt||Ft?Gt(tt)?lt=tt:Ce(tt)?lt=oi(tt):Pt?(ft=!1,lt=_p(it,!0)):Ft?(ft=!1,lt=tg(it,!0)):lt=[]:Oa(it)||Zs(it)?(lt=tt,Zs(tt)?lt=Qg(tt):(!ve(tt)||Zn(tt))&&(lt=xg(it))):ft=!1}ft&&(j.set(it,lt),$(lt,it,z,Q,j),j.delete(it)),Ru(P,w,lt)}function Wp(P,A){var w=P.length;if(!!w)return A+=A<0?w:0,kn(A,w)?P[A]:e}function Xp(P,A,w){A.length?A=fe(A,function(Q){return Gt(Q)?function(j){return $s(j,Q.length===1?Q[0]:Q)}:Q}):A=[ui];var z=-1;A=fe(A,Ai(Lt()));var $=zp(P,function(Q,j,tt){var it=fe(A,function(ht){return ht(Q)});return{criteria:it,index:++z,value:Q}});return FE($,function(Q,j){return gM(Q,j,w)})}function sM(P,A){return Hp(P,A,function(w,z){return ff(P,z)})}function Hp(P,A,w){for(var z=-1,$=A.length,Q={};++z<$;){var j=A[z],tt=$s(P,j);w(tt,j)&&Ea(Q,ps(j,P),tt)}return Q}function rM(P){return function(A){return $s(A,P)}}function Nu(P,A,w,z){var $=z?LE:vr,Q=-1,j=A.length,tt=P;for(P===A&&(A=oi(A)),w&&(tt=fe(P,Ai(w)));++Q<j;)for(var it=0,ht=A[Q],lt=w?w(ht):ht;(it=$(tt,lt,it,z))>-1;)tt!==P&&Xo.call(tt,it,1),Xo.call(P,it,1);return P}function $p(P,A){for(var w=P?A.length:0,z=w-1;w--;){var $=A[w];if(w==z||$!==Q){var Q=$;kn($)?Xo.call(P,$,1):Uu(P,$)}}return P}function Yu(P,A){return P+Ko(Mp()*(A-P+1))}function aM(P,A,w,z){for(var $=-1,Q=Re($o((A-P)/(w||1)),0),j=st(Q);Q--;)j[z?Q:++$]=P,P+=w;return j}function zu(P,A){var w="";if(!P||A<1||A>K)return w;do A%2&&(w+=P),A=Ko(A/2),A&&(P+=P);while(A);return w}function zt(P,A){return nf(Cg(P,A,ui),P+"")}function oM(P){return Rp(Ar(P))}function hM(P,A){var w=Ar(P);return lh(w,Hs(A,0,w.length))}function Ea(P,A,w,z){if(!ve(P))return P;A=ps(A,P);for(var $=-1,Q=A.length,j=Q-1,tt=P;tt!=null&&++$<Q;){var it=Sn(A[$]),ht=w;if(it==="__proto__"||it==="constructor"||it==="prototype")return P;if($!=j){var lt=tt[it];ht=z?z(lt,it,tt):e,ht===e&&(ht=ve(lt)?lt:kn(A[$+1])?[]:{})}ya(tt,it,ht),tt=tt[it]}return P}var Kp=ko?function(P,A){return ko.set(P,A),P}:ui,lM=Ho?function(P,A){return Ho(P,"toString",{configurable:!0,enumerable:!1,value:cf(A),writable:!0})}:ui;function uM(P){return lh(Ar(P))}function Wi(P,A,w){var z=-1,$=P.length;A<0&&(A=-A>$?0:$+A),w=w>$?$:w,w<0&&(w+=$),$=A>w?0:w-A>>>0,A>>>=0;for(var Q=st($);++z<$;)Q[z]=P[z+A];return Q}function fM(P,A){var w;return cs(P,function(z,$,Q){return w=A(z,$,Q),!w}),!!w}function th(P,A,w){var z=0,$=P==null?z:P.length;if(typeof A=="number"&&A===A&&$<=Y){for(;z<$;){var Q=z+$>>>1,j=P[Q];j!==null&&!Ri(j)&&(w?j<=A:j<A)?z=Q+1:$=Q}return $}return Vu(P,A,ui,w)}function Vu(P,A,w,z){var $=0,Q=P==null?0:P.length;if(Q===0)return 0;A=w(A);for(var j=A!==A,tt=A===null,it=Ri(A),ht=A===e;$<Q;){var lt=Ko(($+Q)/2),ft=w(P[lt]),gt=ft!==e,Pt=ft===null,Ft=ft===ft,Yt=Ri(ft);if(j)var wt=z||Ft;else ht?wt=Ft&&(z||gt):tt?wt=Ft&&gt&&(z||!Pt):it?wt=Ft&&gt&&!Pt&&(z||!Yt):Pt||Yt?wt=!1:wt=z?ft<=A:ft<A;wt?$=lt+1:Q=lt}return Ke(Q,G)}function kp(P,A){for(var w=-1,z=P.length,$=0,Q=[];++w<z;){var j=P[w],tt=A?A(j):j;if(!w||!nn(tt,it)){var it=tt;Q[$++]=j===0?0:j}}return Q}function Zp(P){return typeof P=="number"?P:Ri(P)?b:+P}function Oi(P){if(typeof P=="string")return P;if(Gt(P))return fe(P,Oi)+"";if(Ri(P))return Ap?Ap.call(P):"";var A=P+"";return A=="0"&&1/P==-X?"-0":A}function vs(P,A,w){var z=-1,$=Do,Q=P.length,j=!0,tt=[],it=tt;if(w)j=!1,$=pu;else if(Q>=i){var ht=A?null:SM(P);if(ht)return bo(ht);j=!1,$=ca,it=new Xs}else it=A?[]:tt;t:for(;++z<Q;){var lt=P[z],ft=A?A(lt):lt;if(lt=w||lt!==0?lt:0,j&&ft===ft){for(var gt=it.length;gt--;)if(it[gt]===ft)continue t;A&&it.push(ft),tt.push(lt)}else $(it,ft,w)||(it!==tt&&it.push(ft),tt.push(lt))}return tt}function Uu(P,A){return A=ps(A,P),P=Sg(P,A),P==null||delete P[Sn(Xi(A))]}function Jp(P,A,w,z){return Ea(P,A,w($s(P,A)),z)}function eh(P,A,w,z){for(var $=P.length,Q=z?$:-1;(z?Q--:++Q<$)&&A(P[Q],Q,P););return w?Wi(P,z?0:Q,z?Q+1:$):Wi(P,z?Q+1:0,z?$:Q)}function Qp(P,A){var w=P;return w instanceof Ut&&(w=w.value()),gu(A,function(z,$){return $.func.apply($.thisArg,us([z],$.args))},w)}function Wu(P,A,w){var z=P.length;if(z<2)return z?vs(P[0]):[];for(var $=-1,Q=st(z);++$<z;)for(var j=P[$],tt=-1;++tt<z;)tt!=$&&(Q[$]=Ta(Q[$]||j,P[tt],A,w));return vs(Ne(Q,1),A,w)}function jp(P,A,w){for(var z=-1,$=P.length,Q=A.length,j={};++z<$;){var tt=z<Q?A[z]:e;w(j,P[z],tt)}return j}function Xu(P){return Ce(P)?P:[]}function Hu(P){return typeof P=="function"?P:ui}function ps(P,A){return Gt(P)?P:_u(P,A)?[P]:Ag(jt(P))}var dM=zt;function gs(P,A,w){var z=P.length;return w=w===e?z:w,!A&&w>=z?P:Wi(P,A,w)}var qp=_E||function(P){return Ge.clearTimeout(P)};function _p(P,A){if(A)return P.slice();var w=P.length,z=Tp?Tp(w):new P.constructor(w);return P.copy(z),z}function $u(P){var A=new P.constructor(P.byteLength);return new Uo(A).set(new Uo(P)),A}function cM(P,A){var w=A?$u(P.buffer):P.buffer;return new P.constructor(w,P.byteOffset,P.byteLength)}function vM(P){var A=new P.constructor(P.source,Gv.exec(P));return A.lastIndex=P.lastIndex,A}function pM(P){return xa?ie(xa.call(P)):{}}function tg(P,A){var w=A?$u(P.buffer):P.buffer;return new P.constructor(w,P.byteOffset,P.length)}function eg(P,A){if(P!==A){var w=P!==e,z=P===null,$=P===P,Q=Ri(P),j=A!==e,tt=A===null,it=A===A,ht=Ri(A);if(!tt&&!ht&&!Q&&P>A||Q&&j&&it&&!tt&&!ht||z&&j&&it||!w&&it||!$)return 1;if(!z&&!Q&&!ht&&P<A||ht&&w&&$&&!z&&!Q||tt&&w&&$||!j&&$||!it)return-1}return 0}function gM(P,A,w){for(var z=-1,$=P.criteria,Q=A.criteria,j=$.length,tt=w.length;++z<j;){var it=eg($[z],Q[z]);if(it){if(z>=tt)return it;var ht=w[z];return it*(ht=="desc"?-1:1)}}return P.index-A.index}function ig(P,A,w,z){for(var $=-1,Q=P.length,j=w.length,tt=-1,it=A.length,ht=Re(Q-j,0),lt=st(it+ht),ft=!z;++tt<it;)lt[tt]=A[tt];for(;++$<j;)(ft||$<Q)&&(lt[w[$]]=P[$]);for(;ht--;)lt[tt++]=P[$++];return lt}function ng(P,A,w,z){for(var $=-1,Q=P.length,j=-1,tt=w.length,it=-1,ht=A.length,lt=Re(Q-tt,0),ft=st(lt+ht),gt=!z;++$<lt;)ft[$]=P[$];for(var Pt=$;++it<ht;)ft[Pt+it]=A[it];for(;++j<tt;)(gt||$<Q)&&(ft[Pt+w[j]]=P[$++]);return ft}function oi(P,A){var w=-1,z=P.length;for(A||(A=st(z));++w<z;)A[w]=P[w];return A}function Cn(P,A,w,z){var $=!w;w||(w={});for(var Q=-1,j=A.length;++Q<j;){var tt=A[Q],it=z?z(w[tt],P[tt],tt,w,P):e;it===e&&(it=P[tt]),$?Hn(w,tt,it):ya(w,tt,it)}return w}function mM(P,A){return Cn(P,qu(P),A)}function xM(P,A){return Cn(P,gg(P),A)}function ih(P,A){return function(w,z){var $=Gt(w)?EE:VP,Q=A?A():{};return $(w,P,Lt(z,2),Q)}}function Sr(P){return zt(function(A,w){var z=-1,$=w.length,Q=$>1?w[$-1]:e,j=$>2?w[2]:e;for(Q=P.length>3&&typeof Q=="function"?($--,Q):e,j&&ii(w[0],w[1],j)&&(Q=$<3?e:Q,$=1),A=ie(A);++z<$;){var tt=w[z];tt&&P(A,tt,z,Q)}return A})}function sg(P,A){return function(w,z){if(w==null)return w;if(!hi(w))return P(w,z);for(var $=w.length,Q=A?$:-1,j=ie(w);(A?Q--:++Q<$)&&z(j[Q],Q,j)!==!1;);return w}}function rg(P){return function(A,w,z){for(var $=-1,Q=ie(A),j=z(A),tt=j.length;tt--;){var it=j[P?tt:++$];if(w(Q[it],it,Q)===!1)break}return A}}function yM(P,A,w){var z=A&g,$=Pa(P);function Q(){var j=this&&this!==Ge&&this instanceof Q?$:P;return j.apply(z?w:this,arguments)}return Q}function ag(P){return function(A){A=jt(A);var w=pr(A)?tn(A):e,z=w?w[0]:A.charAt(0),$=w?gs(w,1).join(""):A.slice(1);return z[P]()+$}}function Er(P){return function(A){return gu(s0(n0(A).replace(lE,"")),P,"")}}function Pa(P){return function(){var A=arguments;switch(A.length){case 0:return new P;case 1:return new P(A[0]);case 2:return new P(A[0],A[1]);case 3:return new P(A[0],A[1],A[2]);case 4:return new P(A[0],A[1],A[2],A[3]);case 5:return new P(A[0],A[1],A[2],A[3],A[4]);case 6:return new P(A[0],A[1],A[2],A[3],A[4],A[5]);case 7:return new P(A[0],A[1],A[2],A[3],A[4],A[5],A[6])}var w=Cr(P.prototype),z=P.apply(w,A);return ve(z)?z:w}}function TM(P,A,w){var z=Pa(P);function $(){for(var Q=arguments.length,j=st(Q),tt=Q,it=Pr($);tt--;)j[tt]=arguments[tt];var ht=Q<3&&j[0]!==it&&j[Q-1]!==it?[]:fs(j,it);if(Q-=ht.length,Q<w)return fg(P,A,nh,$.placeholder,e,j,ht,e,e,w-Q);var lt=this&&this!==Ge&&this instanceof $?z:P;return Mi(lt,this,j)}return $}function og(P){return function(A,w,z){var $=ie(A);if(!hi(A)){var Q=Lt(w,3);A=De(A),w=function(tt){return Q($[tt],tt,$)}}var j=P(A,w,z);return j>-1?$[Q?A[j]:j]:e}}function hg(P){return Kn(function(A){var w=A.length,z=w,$=Vi.prototype.thru;for(P&&A.reverse();z--;){var Q=A[z];if(typeof Q!="function")throw new zi(h);if($&&!j&&oh(Q)=="wrapper")var j=new Vi([],!0)}for(z=j?z:w;++z<w;){Q=A[z];var tt=oh(Q),it=tt=="wrapper"?Qu(Q):e;it&&tf(it[0])&&it[1]==(E|y|C|M)&&!it[4].length&&it[9]==1?j=j[oh(it[0])].apply(j,it[3]):j=Q.length==1&&tf(Q)?j[tt]():j.thru(Q)}return function(){var ht=arguments,lt=ht[0];if(j&&ht.length==1&&Gt(lt))return j.plant(lt).value();for(var ft=0,gt=w?A[ft].apply(this,ht):lt;++ft<w;)gt=A[ft].call(this,gt);return gt}})}function nh(P,A,w,z,$,Q,j,tt,it,ht){var lt=A&E,ft=A&g,gt=A&m,Pt=A&(y|T),Ft=A&O,Yt=gt?e:Pa(P);function wt(){for(var Vt=arguments.length,Ht=st(Vt),Li=Vt;Li--;)Ht[Li]=arguments[Li];if(Pt)var ni=Pr(wt),Fi=IE(Ht,ni);if(z&&(Ht=ig(Ht,z,$,Pt)),Q&&(Ht=ng(Ht,Q,j,Pt)),Vt-=Fi,Pt&&Vt<ht){var Se=fs(Ht,ni);return fg(P,A,nh,wt.placeholder,w,Ht,Se,tt,it,ht-Vt)}var sn=ft?w:this,Qn=gt?sn[P]:P;return Vt=Ht.length,tt?Ht=VM(Ht,tt):Ft&&Vt>1&&Ht.reverse(),lt&&it<Vt&&(Ht.length=it),this&&this!==Ge&&this instanceof wt&&(Qn=Yt||Pa(Qn)),Qn.apply(sn,Ht)}return wt}function lg(P,A){return function(w,z){return ZP(w,P,A(z),{})}}function sh(P,A){return function(w,z){var $;if(w===e&&z===e)return A;if(w!==e&&($=w),z!==e){if($===e)return z;typeof w=="string"||typeof z=="string"?(w=Oi(w),z=Oi(z)):(w=Zp(w),z=Zp(z)),$=P(w,z)}return $}}function Ku(P){return Kn(function(A){return A=fe(A,Ai(Lt())),zt(function(w){var z=this;return P(A,function($){return Mi($,z,w)})})})}function rh(P,A){A=A===e?" ":Oi(A);var w=A.length;if(w<2)return w?zu(A,P):A;var z=zu(A,$o(P/gr(A)));return pr(A)?gs(tn(z),0,P).join(""):z.slice(0,P)}function CM(P,A,w,z){var $=A&g,Q=Pa(P);function j(){for(var tt=-1,it=arguments.length,ht=-1,lt=z.length,ft=st(lt+it),gt=this&&this!==Ge&&this instanceof j?Q:P;++ht<lt;)ft[ht]=z[ht];for(;it--;)ft[ht++]=arguments[++tt];return Mi(gt,$?w:this,ft)}return j}function ug(P){return function(A,w,z){return z&&typeof z!="number"&&ii(A,w,z)&&(w=z=e),A=Jn(A),w===e?(w=A,A=0):w=Jn(w),z=z===e?A<w?1:-1:Jn(z),aM(A,w,z,P)}}function ah(P){return function(A,w){return typeof A=="string"&&typeof w=="string"||(A=Hi(A),w=Hi(w)),P(A,w)}}function fg(P,A,w,z,$,Q,j,tt,it,ht){var lt=A&y,ft=lt?j:e,gt=lt?e:j,Pt=lt?Q:e,Ft=lt?e:Q;A|=lt?C:S,A&=~(lt?S:C),A&x||(A&=~(g|m));var Yt=[P,A,$,Pt,ft,Ft,gt,tt,it,ht],wt=w.apply(e,Yt);return tf(P)&&Eg(wt,Yt),wt.placeholder=z,Pg(wt,P,A)}function ku(P){var A=Oe[P];return function(w,z){if(w=Hi(w),z=z==null?0:Ke(Nt(z),292),z&&Pp(w)){var $=(jt(w)+"e").split("e"),Q=A($[0]+"e"+(+$[1]+z));return $=(jt(Q)+"e").split("e"),+($[0]+"e"+(+$[1]-z))}return A(w)}}var SM=yr&&1/bo(new yr([,-0]))[1]==X?function(P){return new yr(P)}:gf;function dg(P){return function(A){var w=ke(A);return w==ut?Eu(A):w==mt?zE(A):wE(A,P(A))}}function $n(P,A,w,z,$,Q,j,tt){var it=A&m;if(!it&&typeof P!="function")throw new zi(h);var ht=z?z.length:0;if(ht||(A&=~(C|S),z=$=e),j=j===e?j:Re(Nt(j),0),tt=tt===e?tt:Nt(tt),ht-=$?$.length:0,A&S){var lt=z,ft=$;z=$=e}var gt=it?e:Qu(P),Pt=[P,A,w,z,$,lt,ft,Q,j,tt];if(gt&&NM(Pt,gt),P=Pt[0],A=Pt[1],w=Pt[2],z=Pt[3],$=Pt[4],tt=Pt[9]=Pt[9]===e?it?0:P.length:Re(Pt[9]-ht,0),!tt&&A&(y|T)&&(A&=~(y|T)),!A||A==g)var Ft=yM(P,A,w);else A==y||A==T?Ft=TM(P,A,tt):(A==C||A==(g|C))&&!$.length?Ft=CM(P,A,w,z):Ft=nh.apply(e,Pt);var Yt=gt?Kp:Eg;return Pg(Yt(Ft,Pt),P,A)}function cg(P,A,w,z){return P===e||nn(P,xr[w])&&!_t.call(z,w)?A:P}function vg(P,A,w,z,$,Q){return ve(P)&&ve(A)&&(Q.set(A,P),_o(P,A,e,vg,Q),Q.delete(A)),P}function EM(P){return Oa(P)?e:P}function pg(P,A,w,z,$,Q){var j=w&c,tt=P.length,it=A.length;if(tt!=it&&!(j&&it>tt))return!1;var ht=Q.get(P),lt=Q.get(A);if(ht&&lt)return ht==A&&lt==P;var ft=-1,gt=!0,Pt=w&p?new Xs:e;for(Q.set(P,A),Q.set(A,P);++ft<tt;){var Ft=P[ft],Yt=A[ft];if(z)var wt=j?z(Yt,Ft,ft,A,P,Q):z(Ft,Yt,ft,P,A,Q);if(wt!==e){if(wt)continue;gt=!1;break}if(Pt){if(!mu(A,function(Vt,Ht){if(!ca(Pt,Ht)&&(Ft===Vt||$(Ft,Vt,w,z,Q)))return Pt.push(Ht)})){gt=!1;break}}else if(!(Ft===Yt||$(Ft,Yt,w,z,Q))){gt=!1;break}}return Q.delete(P),Q.delete(A),gt}function PM(P,A,w,z,$,Q,j){switch(w){case ee:if(P.byteLength!=A.byteLength||P.byteOffset!=A.byteOffset)return!1;P=P.buffer,A=A.buffer;case se:return!(P.byteLength!=A.byteLength||!Q(new Uo(P),new Uo(A)));case q:case _:case vt:return nn(+P,+A);case rt:return P.name==A.name&&P.message==A.message;case Bt:case At:return P==A+"";case ut:var tt=Eu;case mt:var it=z&c;if(tt||(tt=bo),P.size!=A.size&&!it)return!1;var ht=j.get(P);if(ht)return ht==A;z|=p,j.set(P,A);var lt=pg(tt(P),tt(A),z,$,Q,j);return j.delete(P),lt;case Ae:if(xa)return xa.call(P)==xa.call(A)}return!1}function MM(P,A,w,z,$,Q){var j=w&c,tt=Zu(P),it=tt.length,ht=Zu(A),lt=ht.length;if(it!=lt&&!j)return!1;for(var ft=it;ft--;){var gt=tt[ft];if(!(j?gt in A:_t.call(A,gt)))return!1}var Pt=Q.get(P),Ft=Q.get(A);if(Pt&&Ft)return Pt==A&&Ft==P;var Yt=!0;Q.set(P,A),Q.set(A,P);for(var wt=j;++ft<it;){gt=tt[ft];var Vt=P[gt],Ht=A[gt];if(z)var Li=j?z(Ht,Vt,gt,A,P,Q):z(Vt,Ht,gt,P,A,Q);if(!(Li===e?Vt===Ht||$(Vt,Ht,w,z,Q):Li)){Yt=!1;break}wt||(wt=gt=="constructor")}if(Yt&&!wt){var ni=P.constructor,Fi=A.constructor;ni!=Fi&&"constructor"in P&&"constructor"in A&&!(typeof ni=="function"&&ni instanceof ni&&typeof Fi=="function"&&Fi instanceof Fi)&&(Yt=!1)}return Q.delete(P),Q.delete(A),Yt}function Kn(P){return nf(Cg(P,e,Fg),P+"")}function Zu(P){return bp(P,De,qu)}function Ju(P){return bp(P,li,gg)}var Qu=ko?function(P){return ko.get(P)}:gf;function oh(P){for(var A=P.name+"",w=Tr[A],z=_t.call(Tr,A)?w.length:0;z--;){var $=w[z],Q=$.func;if(Q==null||Q==P)return $.name}return A}function Pr(P){var A=_t.call(J,"placeholder")?J:P;return A.placeholder}function Lt(){var P=J.iteratee||vf;return P=P===vf?Yp:P,arguments.length?P(arguments[0],arguments[1]):P}function hh(P,A){var w=P.__data__;return DM(A)?w[typeof A=="string"?"string":"hash"]:w.map}function ju(P){for(var A=De(P),w=A.length;w--;){var z=A[w],$=P[z];A[w]=[z,$,yg($)]}return A}function Ks(P,A){var w=GE(P,A);return Np(w)?w:e}function AM(P){var A=_t.call(P,Us),w=P[Us];try{P[Us]=e;var z=!0}catch{}var $=zo.call(P);return z&&(A?P[Us]=w:delete P[Us]),$}var qu=Mu?function(P){return P==null?[]:(P=ie(P),ls(Mu(P),function(A){return Sp.call(P,A)}))}:mf,gg=Mu?function(P){for(var A=[];P;)us(A,qu(P)),P=Wo(P);return A}:mf,ke=ei;(Au&&ke(new Au(new ArrayBuffer(1)))!=ee||pa&&ke(new pa)!=ut||Ou&&ke(Ou.resolve())!=Et||yr&&ke(new yr)!=mt||ga&&ke(new ga)!=Zt)&&(ke=function(P){var A=ei(P),w=A==St?P.constructor:e,z=w?ks(w):"";if(z)switch(z){case hP:return ee;case lP:return ut;case uP:return Et;case fP:return mt;case dP:return Zt}return A});function OM(P,A,w){for(var z=-1,$=w.length;++z<$;){var Q=w[z],j=Q.size;switch(Q.type){case"drop":P+=j;break;case"dropRight":A-=j;break;case"take":A=Ke(A,P+j);break;case"takeRight":P=Re(P,A-j);break}}return{start:P,end:A}}function RM(P){var A=P.match(BS);return A?A[1].split(bS):[]}function mg(P,A,w){A=ps(A,P);for(var z=-1,$=A.length,Q=!1;++z<$;){var j=Sn(A[z]);if(!(Q=P!=null&&w(P,j)))break;P=P[j]}return Q||++z!=$?Q:($=P==null?0:P.length,!!$&&ph($)&&kn(j,$)&&(Gt(P)||Zs(P)))}function LM(P){var A=P.length,w=new P.constructor(A);return A&&typeof P[0]=="string"&&_t.call(P,"index")&&(w.index=P.index,w.input=P.input),w}function xg(P){return typeof P.constructor=="function"&&!Ma(P)?Cr(Wo(P)):{}}function FM(P,A,w){var z=P.constructor;switch(A){case se:return $u(P);case q:case _:return new z(+P);case ee:return cM(P,w);case re:case Ie:case yi:case Ti:case Ci:case Si:case Ei:case Pi:case da:return tg(P,w);case ut:return new z;case vt:case At:return new z(P);case Bt:return vM(P);case mt:return new z;case Ae:return pM(P)}}function wM(P,A){var w=A.length;if(!w)return P;var z=w-1;return A[z]=(w>1?"& ":"")+A[z],A=A.join(w>2?", ":" "),P.replace(DS,`{
/* [wrapped with `+A+`] */
`)}function IM(P){return Gt(P)||Zs(P)||!!(Ep&&P&&P[Ep])}function kn(P,A){var w=typeof P;return A=A==null?K:A,!!A&&(w=="number"||w!="symbol"&&HS.test(P))&&P>-1&&P%1==0&&P<A}function ii(P,A,w){if(!ve(w))return!1;var z=typeof A;return(z=="number"?hi(w)&&kn(A,w.length):z=="string"&&A in w)?nn(w[A],P):!1}function _u(P,A){if(Gt(P))return!1;var w=typeof P;return w=="number"||w=="symbol"||w=="boolean"||P==null||Ri(P)?!0:LS.test(P)||!RS.test(P)||A!=null&&P in ie(A)}function DM(P){var A=typeof P;return A=="string"||A=="number"||A=="symbol"||A=="boolean"?P!=="__proto__":P===null}function tf(P){var A=oh(P),w=J[A];if(typeof w!="function"||!(A in Ut.prototype))return!1;if(P===w)return!0;var z=Qu(w);return!!z&&P===z[0]}function BM(P){return!!yp&&yp in P}var bM=No?Zn:xf;function Ma(P){var A=P&&P.constructor,w=typeof A=="function"&&A.prototype||xr;return P===w}function yg(P){return P===P&&!ve(P)}function Tg(P,A){return function(w){return w==null?!1:w[P]===A&&(A!==e||P in ie(w))}}function GM(P){var A=ch(P,function(z){return w.size===l&&w.clear(),z}),w=A.cache;return A}function NM(P,A){var w=P[1],z=A[1],$=w|z,Q=$<(g|m|E),j=z==E&&w==y||z==E&&w==M&&P[7].length<=A[8]||z==(E|M)&&A[7].length<=A[8]&&w==y;if(!(Q||j))return P;z&g&&(P[2]=A[2],$|=w&g?0:x);var tt=A[3];if(tt){var it=P[3];P[3]=it?ig(it,tt,A[4]):tt,P[4]=it?fs(P[3],o):A[4]}return tt=A[5],tt&&(it=P[5],P[5]=it?ng(it,tt,A[6]):tt,P[6]=it?fs(P[5],o):A[6]),tt=A[7],tt&&(P[7]=tt),z&E&&(P[8]=P[8]==null?A[8]:Ke(P[8],A[8])),P[9]==null&&(P[9]=A[9]),P[0]=A[0],P[1]=$,P}function YM(P){var A=[];if(P!=null)for(var w in ie(P))A.push(w);return A}function zM(P){return zo.call(P)}function Cg(P,A,w){return A=Re(A===e?P.length-1:A,0),function(){for(var z=arguments,$=-1,Q=Re(z.length-A,0),j=st(Q);++$<Q;)j[$]=z[A+$];$=-1;for(var tt=st(A+1);++$<A;)tt[$]=z[$];return tt[A]=w(j),Mi(P,this,tt)}}function Sg(P,A){return A.length<2?P:$s(P,Wi(A,0,-1))}function VM(P,A){for(var w=P.length,z=Ke(A.length,w),$=oi(P);z--;){var Q=A[z];P[z]=kn(Q,w)?$[Q]:e}return P}function ef(P,A){if(!(A==="constructor"&&typeof P[A]=="function")&&A!="__proto__")return P[A]}var Eg=Mg(Kp),Aa=eP||function(P,A){return Ge.setTimeout(P,A)},nf=Mg(lM);function Pg(P,A,w){var z=A+"";return nf(P,wM(z,UM(RM(z),w)))}function Mg(P){var A=0,w=0;return function(){var z=rP(),$=D-(z-w);if(w=z,$>0){if(++A>=F)return arguments[0]}else A=0;return P.apply(e,arguments)}}function lh(P,A){var w=-1,z=P.length,$=z-1;for(A=A===e?z:A;++w<A;){var Q=Yu(w,$),j=P[Q];P[Q]=P[w],P[w]=j}return P.length=A,P}var Ag=GM(function(P){var A=[];return P.charCodeAt(0)===46&&A.push(""),P.replace(FS,function(w,z,$,Q){A.push($?Q.replace(YS,"$1"):z||w)}),A});function Sn(P){if(typeof P=="string"||Ri(P))return P;var A=P+"";return A=="0"&&1/P==-X?"-0":A}function ks(P){if(P!=null){try{return Yo.call(P)}catch{}try{return P+""}catch{}}return""}function UM(P,A){return Yi(V,function(w){var z="_."+w[0];A&w[1]&&!Do(P,z)&&P.push(z)}),P.sort()}function Og(P){if(P instanceof Ut)return P.clone();var A=new Vi(P.__wrapped__,P.__chain__);return A.__actions__=oi(P.__actions__),A.__index__=P.__index__,A.__values__=P.__values__,A}function WM(P,A,w){(w?ii(P,A,w):A===e)?A=1:A=Re(Nt(A),0);var z=P==null?0:P.length;if(!z||A<1)return[];for(var $=0,Q=0,j=st($o(z/A));$<z;)j[Q++]=Wi(P,$,$+=A);return j}function XM(P){for(var A=-1,w=P==null?0:P.length,z=0,$=[];++A<w;){var Q=P[A];Q&&($[z++]=Q)}return $}function HM(){var P=arguments.length;if(!P)return[];for(var A=st(P-1),w=arguments[0],z=P;z--;)A[z-1]=arguments[z];return us(Gt(w)?oi(w):[w],Ne(A,1))}var $M=zt(function(P,A){return Ce(P)?Ta(P,Ne(A,1,Ce,!0)):[]}),KM=zt(function(P,A){var w=Xi(A);return Ce(w)&&(w=e),Ce(P)?Ta(P,Ne(A,1,Ce,!0),Lt(w,2)):[]}),kM=zt(function(P,A){var w=Xi(A);return Ce(w)&&(w=e),Ce(P)?Ta(P,Ne(A,1,Ce,!0),e,w):[]});function ZM(P,A,w){var z=P==null?0:P.length;return z?(A=w||A===e?1:Nt(A),Wi(P,A<0?0:A,z)):[]}function JM(P,A,w){var z=P==null?0:P.length;return z?(A=w||A===e?1:Nt(A),A=z-A,Wi(P,0,A<0?0:A)):[]}function QM(P,A){return P&&P.length?eh(P,Lt(A,3),!0,!0):[]}function jM(P,A){return P&&P.length?eh(P,Lt(A,3),!0):[]}function qM(P,A,w,z){var $=P==null?0:P.length;return $?(w&&typeof w!="number"&&ii(P,A,w)&&(w=0,z=$),HP(P,A,w,z)):[]}function Rg(P,A,w){var z=P==null?0:P.length;if(!z)return-1;var $=w==null?0:Nt(w);return $<0&&($=Re(z+$,0)),Bo(P,Lt(A,3),$)}function Lg(P,A,w){var z=P==null?0:P.length;if(!z)return-1;var $=z-1;return w!==e&&($=Nt(w),$=w<0?Re(z+$,0):Ke($,z-1)),Bo(P,Lt(A,3),$,!0)}function Fg(P){var A=P==null?0:P.length;return A?Ne(P,1):[]}function _M(P){var A=P==null?0:P.length;return A?Ne(P,X):[]}function tA(P,A){var w=P==null?0:P.length;return w?(A=A===e?1:Nt(A),Ne(P,A)):[]}function eA(P){for(var A=-1,w=P==null?0:P.length,z={};++A<w;){var $=P[A];z[$[0]]=$[1]}return z}function wg(P){return P&&P.length?P[0]:e}function iA(P,A,w){var z=P==null?0:P.length;if(!z)return-1;var $=w==null?0:Nt(w);return $<0&&($=Re(z+$,0)),vr(P,A,$)}function nA(P){var A=P==null?0:P.length;return A?Wi(P,0,-1):[]}var sA=zt(function(P){var A=fe(P,Xu);return A.length&&A[0]===P[0]?Du(A):[]}),rA=zt(function(P){var A=Xi(P),w=fe(P,Xu);return A===Xi(w)?A=e:w.pop(),w.length&&w[0]===P[0]?Du(w,Lt(A,2)):[]}),aA=zt(function(P){var A=Xi(P),w=fe(P,Xu);return A=typeof A=="function"?A:e,A&&w.pop(),w.length&&w[0]===P[0]?Du(w,e,A):[]});function oA(P,A){return P==null?"":nP.call(P,A)}function Xi(P){var A=P==null?0:P.length;return A?P[A-1]:e}function hA(P,A,w){var z=P==null?0:P.length;if(!z)return-1;var $=z;return w!==e&&($=Nt(w),$=$<0?Re(z+$,0):Ke($,z-1)),A===A?UE(P,A,$):Bo(P,fp,$,!0)}function lA(P,A){return P&&P.length?Wp(P,Nt(A)):e}var uA=zt(Ig);function Ig(P,A){return P&&P.length&&A&&A.length?Nu(P,A):P}function fA(P,A,w){return P&&P.length&&A&&A.length?Nu(P,A,Lt(w,2)):P}function dA(P,A,w){return P&&P.length&&A&&A.length?Nu(P,A,e,w):P}var cA=Kn(function(P,A){var w=P==null?0:P.length,z=Lu(P,A);return $p(P,fe(A,function($){return kn($,w)?+$:$}).sort(eg)),z});function vA(P,A){var w=[];if(!(P&&P.length))return w;var z=-1,$=[],Q=P.length;for(A=Lt(A,3);++z<Q;){var j=P[z];A(j,z,P)&&(w.push(j),$.push(z))}return $p(P,$),w}function sf(P){return P==null?P:oP.call(P)}function pA(P,A,w){var z=P==null?0:P.length;return z?(w&&typeof w!="number"&&ii(P,A,w)?(A=0,w=z):(A=A==null?0:Nt(A),w=w===e?z:Nt(w)),Wi(P,A,w)):[]}function gA(P,A){return th(P,A)}function mA(P,A,w){return Vu(P,A,Lt(w,2))}function xA(P,A){var w=P==null?0:P.length;if(w){var z=th(P,A);if(z<w&&nn(P[z],A))return z}return-1}function yA(P,A){return th(P,A,!0)}function TA(P,A,w){return Vu(P,A,Lt(w,2),!0)}function CA(P,A){var w=P==null?0:P.length;if(w){var z=th(P,A,!0)-1;if(nn(P[z],A))return z}return-1}function SA(P){return P&&P.length?kp(P):[]}function EA(P,A){return P&&P.length?kp(P,Lt(A,2)):[]}function PA(P){var A=P==null?0:P.length;return A?Wi(P,1,A):[]}function MA(P,A,w){return P&&P.length?(A=w||A===e?1:Nt(A),Wi(P,0,A<0?0:A)):[]}function AA(P,A,w){var z=P==null?0:P.length;return z?(A=w||A===e?1:Nt(A),A=z-A,Wi(P,A<0?0:A,z)):[]}function OA(P,A){return P&&P.length?eh(P,Lt(A,3),!1,!0):[]}function RA(P,A){return P&&P.length?eh(P,Lt(A,3)):[]}var LA=zt(function(P){return vs(Ne(P,1,Ce,!0))}),FA=zt(function(P){var A=Xi(P);return Ce(A)&&(A=e),vs(Ne(P,1,Ce,!0),Lt(A,2))}),wA=zt(function(P){var A=Xi(P);return A=typeof A=="function"?A:e,vs(Ne(P,1,Ce,!0),e,A)});function IA(P){return P&&P.length?vs(P):[]}function DA(P,A){return P&&P.length?vs(P,Lt(A,2)):[]}function BA(P,A){return A=typeof A=="function"?A:e,P&&P.length?vs(P,e,A):[]}function rf(P){if(!(P&&P.length))return[];var A=0;return P=ls(P,function(w){if(Ce(w))return A=Re(w.length,A),!0}),Cu(A,function(w){return fe(P,xu(w))})}function Dg(P,A){if(!(P&&P.length))return[];var w=rf(P);return A==null?w:fe(w,function(z){return Mi(A,e,z)})}var bA=zt(function(P,A){return Ce(P)?Ta(P,A):[]}),GA=zt(function(P){return Wu(ls(P,Ce))}),NA=zt(function(P){var A=Xi(P);return Ce(A)&&(A=e),Wu(ls(P,Ce),Lt(A,2))}),YA=zt(function(P){var A=Xi(P);return A=typeof A=="function"?A:e,Wu(ls(P,Ce),e,A)}),zA=zt(rf);function VA(P,A){return jp(P||[],A||[],ya)}function UA(P,A){return jp(P||[],A||[],Ea)}var WA=zt(function(P){var A=P.length,w=A>1?P[A-1]:e;return w=typeof w=="function"?(P.pop(),w):e,Dg(P,w)});function Bg(P){var A=J(P);return A.__chain__=!0,A}function XA(P,A){return A(P),P}function uh(P,A){return A(P)}var HA=Kn(function(P){var A=P.length,w=A?P[0]:0,z=this.__wrapped__,$=function(Q){return Lu(Q,P)};return A>1||this.__actions__.length||!(z instanceof Ut)||!kn(w)?this.thru($):(z=z.slice(w,+w+(A?1:0)),z.__actions__.push({func:uh,args:[$],thisArg:e}),new Vi(z,this.__chain__).thru(function(Q){return A&&!Q.length&&Q.push(e),Q}))});function $A(){return Bg(this)}function KA(){return new Vi(this.value(),this.__chain__)}function kA(){this.__values__===e&&(this.__values__=Zg(this.value()));var P=this.__index__>=this.__values__.length,A=P?e:this.__values__[this.__index__++];return{done:P,value:A}}function ZA(){return this}function JA(P){for(var A,w=this;w instanceof Jo;){var z=Og(w);z.__index__=0,z.__values__=e,A?$.__wrapped__=z:A=z;var $=z;w=w.__wrapped__}return $.__wrapped__=P,A}function QA(){var P=this.__wrapped__;if(P instanceof Ut){var A=P;return this.__actions__.length&&(A=new Ut(this)),A=A.reverse(),A.__actions__.push({func:uh,args:[sf],thisArg:e}),new Vi(A,this.__chain__)}return this.thru(sf)}function jA(){return Qp(this.__wrapped__,this.__actions__)}var qA=ih(function(P,A,w){_t.call(P,w)?++P[w]:Hn(P,w,1)});function _A(P,A,w){var z=Gt(P)?lp:XP;return w&&ii(P,A,w)&&(A=e),z(P,Lt(A,3))}function t2(P,A){var w=Gt(P)?ls:Dp;return w(P,Lt(A,3))}var e2=og(Rg),i2=og(Lg);function n2(P,A){return Ne(fh(P,A),1)}function s2(P,A){return Ne(fh(P,A),X)}function r2(P,A,w){return w=w===e?1:Nt(w),Ne(fh(P,A),w)}function bg(P,A){var w=Gt(P)?Yi:cs;return w(P,Lt(A,3))}function Gg(P,A){var w=Gt(P)?PE:Ip;return w(P,Lt(A,3))}var a2=ih(function(P,A,w){_t.call(P,w)?P[w].push(A):Hn(P,w,[A])});function o2(P,A,w,z){P=hi(P)?P:Ar(P),w=w&&!z?Nt(w):0;var $=P.length;return w<0&&(w=Re($+w,0)),gh(P)?w<=$&&P.indexOf(A,w)>-1:!!$&&vr(P,A,w)>-1}var h2=zt(function(P,A,w){var z=-1,$=typeof A=="function",Q=hi(P)?st(P.length):[];return cs(P,function(j){Q[++z]=$?Mi(A,j,w):Ca(j,A,w)}),Q}),l2=ih(function(P,A,w){Hn(P,w,A)});function fh(P,A){var w=Gt(P)?fe:zp;return w(P,Lt(A,3))}function u2(P,A,w,z){return P==null?[]:(Gt(A)||(A=A==null?[]:[A]),w=z?e:w,Gt(w)||(w=w==null?[]:[w]),Xp(P,A,w))}var f2=ih(function(P,A,w){P[w?0:1].push(A)},function(){return[[],[]]});function d2(P,A,w){var z=Gt(P)?gu:cp,$=arguments.length<3;return z(P,Lt(A,4),w,$,cs)}function c2(P,A,w){var z=Gt(P)?ME:cp,$=arguments.length<3;return z(P,Lt(A,4),w,$,Ip)}function v2(P,A){var w=Gt(P)?ls:Dp;return w(P,vh(Lt(A,3)))}function p2(P){var A=Gt(P)?Rp:oM;return A(P)}function g2(P,A,w){(w?ii(P,A,w):A===e)?A=1:A=Nt(A);var z=Gt(P)?YP:hM;return z(P,A)}function m2(P){var A=Gt(P)?zP:uM;return A(P)}function x2(P){if(P==null)return 0;if(hi(P))return gh(P)?gr(P):P.length;var A=ke(P);return A==ut||A==mt?P.size:bu(P).length}function y2(P,A,w){var z=Gt(P)?mu:fM;return w&&ii(P,A,w)&&(A=e),z(P,Lt(A,3))}var T2=zt(function(P,A){if(P==null)return[];var w=A.length;return w>1&&ii(P,A[0],A[1])?A=[]:w>2&&ii(A[0],A[1],A[2])&&(A=[A[0]]),Xp(P,Ne(A,1),[])}),dh=tP||function(){return Ge.Date.now()};function C2(P,A){if(typeof A!="function")throw new zi(h);return P=Nt(P),function(){if(--P<1)return A.apply(this,arguments)}}function Ng(P,A,w){return A=w?e:A,A=P&&A==null?P.length:A,$n(P,E,e,e,e,e,A)}function Yg(P,A){var w;if(typeof A!="function")throw new zi(h);return P=Nt(P),function(){return--P>0&&(w=A.apply(this,arguments)),P<=1&&(A=e),w}}var af=zt(function(P,A,w){var z=g;if(w.length){var $=fs(w,Pr(af));z|=C}return $n(P,z,A,w,$)}),zg=zt(function(P,A,w){var z=g|m;if(w.length){var $=fs(w,Pr(zg));z|=C}return $n(A,z,P,w,$)});function Vg(P,A,w){A=w?e:A;var z=$n(P,y,e,e,e,e,e,A);return z.placeholder=Vg.placeholder,z}function Ug(P,A,w){A=w?e:A;var z=$n(P,T,e,e,e,e,e,A);return z.placeholder=Ug.placeholder,z}function Wg(P,A,w){var z,$,Q,j,tt,it,ht=0,lt=!1,ft=!1,gt=!0;if(typeof P!="function")throw new zi(h);A=Hi(A)||0,ve(w)&&(lt=!!w.leading,ft="maxWait"in w,Q=ft?Re(Hi(w.maxWait)||0,A):Q,gt="trailing"in w?!!w.trailing:gt);function Pt(Se){var sn=z,Qn=$;return z=$=e,ht=Se,j=P.apply(Qn,sn),j}function Ft(Se){return ht=Se,tt=Aa(Vt,A),lt?Pt(Se):j}function Yt(Se){var sn=Se-it,Qn=Se-ht,o0=A-sn;return ft?Ke(o0,Q-Qn):o0}function wt(Se){var sn=Se-it,Qn=Se-ht;return it===e||sn>=A||sn<0||ft&&Qn>=Q}function Vt(){var Se=dh();if(wt(Se))return Ht(Se);tt=Aa(Vt,Yt(Se))}function Ht(Se){return tt=e,gt&&z?Pt(Se):(z=$=e,j)}function Li(){tt!==e&&qp(tt),ht=0,z=it=$=tt=e}function ni(){return tt===e?j:Ht(dh())}function Fi(){var Se=dh(),sn=wt(Se);if(z=arguments,$=this,it=Se,sn){if(tt===e)return Ft(it);if(ft)return qp(tt),tt=Aa(Vt,A),Pt(it)}return tt===e&&(tt=Aa(Vt,A)),j}return Fi.cancel=Li,Fi.flush=ni,Fi}var S2=zt(function(P,A){return wp(P,1,A)}),E2=zt(function(P,A,w){return wp(P,Hi(A)||0,w)});function P2(P){return $n(P,O)}function ch(P,A){if(typeof P!="function"||A!=null&&typeof A!="function")throw new zi(h);var w=function(){var z=arguments,$=A?A.apply(this,z):z[0],Q=w.cache;if(Q.has($))return Q.get($);var j=P.apply(this,z);return w.cache=Q.set($,j)||Q,j};return w.cache=new(ch.Cache||Xn),w}ch.Cache=Xn;function vh(P){if(typeof P!="function")throw new zi(h);return function(){var A=arguments;switch(A.length){case 0:return!P.call(this);case 1:return!P.call(this,A[0]);case 2:return!P.call(this,A[0],A[1]);case 3:return!P.call(this,A[0],A[1],A[2])}return!P.apply(this,A)}}function M2(P){return Yg(2,P)}var A2=dM(function(P,A){A=A.length==1&&Gt(A[0])?fe(A[0],Ai(Lt())):fe(Ne(A,1),Ai(Lt()));var w=A.length;return zt(function(z){for(var $=-1,Q=Ke(z.length,w);++$<Q;)z[$]=A[$].call(this,z[$]);return Mi(P,this,z)})}),of=zt(function(P,A){var w=fs(A,Pr(of));return $n(P,C,e,A,w)}),Xg=zt(function(P,A){var w=fs(A,Pr(Xg));return $n(P,S,e,A,w)}),O2=Kn(function(P,A){return $n(P,M,e,e,e,A)});function R2(P,A){if(typeof P!="function")throw new zi(h);return A=A===e?A:Nt(A),zt(P,A)}function L2(P,A){if(typeof P!="function")throw new zi(h);return A=A==null?0:Re(Nt(A),0),zt(function(w){var z=w[A],$=gs(w,0,A);return z&&us($,z),Mi(P,this,$)})}function F2(P,A,w){var z=!0,$=!0;if(typeof P!="function")throw new zi(h);return ve(w)&&(z="leading"in w?!!w.leading:z,$="trailing"in w?!!w.trailing:$),Wg(P,A,{leading:z,maxWait:A,trailing:$})}function w2(P){return Ng(P,1)}function I2(P,A){return of(Hu(A),P)}function D2(){if(!arguments.length)return[];var P=arguments[0];return Gt(P)?P:[P]}function B2(P){return Ui(P,d)}function b2(P,A){return A=typeof A=="function"?A:e,Ui(P,d,A)}function G2(P){return Ui(P,u|d)}function N2(P,A){return A=typeof A=="function"?A:e,Ui(P,u|d,A)}function Y2(P,A){return A==null||Fp(P,A,De(A))}function nn(P,A){return P===A||P!==P&&A!==A}var z2=ah(Iu),V2=ah(function(P,A){return P>=A}),Zs=Gp(function(){return arguments}())?Gp:function(P){return me(P)&&_t.call(P,"callee")&&!Sp.call(P,"callee")},Gt=st.isArray,U2=np?Ai(np):JP;function hi(P){return P!=null&&ph(P.length)&&!Zn(P)}function Ce(P){return me(P)&&hi(P)}function W2(P){return P===!0||P===!1||me(P)&&ei(P)==q}var ms=iP||xf,X2=sp?Ai(sp):QP;function H2(P){return me(P)&&P.nodeType===1&&!Oa(P)}function $2(P){if(P==null)return!0;if(hi(P)&&(Gt(P)||typeof P=="string"||typeof P.splice=="function"||ms(P)||Mr(P)||Zs(P)))return!P.length;var A=ke(P);if(A==ut||A==mt)return!P.size;if(Ma(P))return!bu(P).length;for(var w in P)if(_t.call(P,w))return!1;return!0}function K2(P,A){return Sa(P,A)}function k2(P,A,w){w=typeof w=="function"?w:e;var z=w?w(P,A):e;return z===e?Sa(P,A,e,w):!!z}function hf(P){if(!me(P))return!1;var A=ei(P);return A==rt||A==nt||typeof P.message=="string"&&typeof P.name=="string"&&!Oa(P)}function Z2(P){return typeof P=="number"&&Pp(P)}function Zn(P){if(!ve(P))return!1;var A=ei(P);return A==at||A==ct||A==Z||A==dt}function Hg(P){return typeof P=="number"&&P==Nt(P)}function ph(P){return typeof P=="number"&&P>-1&&P%1==0&&P<=K}function ve(P){var A=typeof P;return P!=null&&(A=="object"||A=="function")}function me(P){return P!=null&&typeof P=="object"}var $g=rp?Ai(rp):qP;function J2(P,A){return P===A||Bu(P,A,ju(A))}function Q2(P,A,w){return w=typeof w=="function"?w:e,Bu(P,A,ju(A),w)}function j2(P){return Kg(P)&&P!=+P}function q2(P){if(bM(P))throw new bt(n);return Np(P)}function _2(P){return P===null}function tO(P){return P==null}function Kg(P){return typeof P=="number"||me(P)&&ei(P)==vt}function Oa(P){if(!me(P)||ei(P)!=St)return!1;var A=Wo(P);if(A===null)return!0;var w=_t.call(A,"constructor")&&A.constructor;return typeof w=="function"&&w instanceof w&&Yo.call(w)==QE}var lf=ap?Ai(ap):_P;function eO(P){return Hg(P)&&P>=-K&&P<=K}var kg=op?Ai(op):tM;function gh(P){return typeof P=="string"||!Gt(P)&&me(P)&&ei(P)==At}function Ri(P){return typeof P=="symbol"||me(P)&&ei(P)==Ae}var Mr=hp?Ai(hp):eM;function iO(P){return P===e}function nO(P){return me(P)&&ke(P)==Zt}function sO(P){return me(P)&&ei(P)==Xt}var rO=ah(Gu),aO=ah(function(P,A){return P<=A});function Zg(P){if(!P)return[];if(hi(P))return gh(P)?tn(P):oi(P);if(va&&P[va])return YE(P[va]());var A=ke(P),w=A==ut?Eu:A==mt?bo:Ar;return w(P)}function Jn(P){if(!P)return P===0?P:0;if(P=Hi(P),P===X||P===-X){var A=P<0?-1:1;return A*k}return P===P?P:0}function Nt(P){var A=Jn(P),w=A%1;return A===A?w?A-w:A:0}function Jg(P){return P?Hs(Nt(P),0,I):0}function Hi(P){if(typeof P=="number")return P;if(Ri(P))return b;if(ve(P)){var A=typeof P.valueOf=="function"?P.valueOf():P;P=ve(A)?A+"":A}if(typeof P!="string")return P===0?P:+P;P=vp(P);var w=US.test(P);return w||XS.test(P)?CE(P.slice(2),w?2:8):VS.test(P)?b:+P}function Qg(P){return Cn(P,li(P))}function oO(P){return P?Hs(Nt(P),-K,K):P===0?P:0}function jt(P){return P==null?"":Oi(P)}var hO=Sr(function(P,A){if(Ma(A)||hi(A)){Cn(A,De(A),P);return}for(var w in A)_t.call(A,w)&&ya(P,w,A[w])}),jg=Sr(function(P,A){Cn(A,li(A),P)}),mh=Sr(function(P,A,w,z){Cn(A,li(A),P,z)}),lO=Sr(function(P,A,w,z){Cn(A,De(A),P,z)}),uO=Kn(Lu);function fO(P,A){var w=Cr(P);return A==null?w:Lp(w,A)}var dO=zt(function(P,A){P=ie(P);var w=-1,z=A.length,$=z>2?A[2]:e;for($&&ii(A[0],A[1],$)&&(z=1);++w<z;)for(var Q=A[w],j=li(Q),tt=-1,it=j.length;++tt<it;){var ht=j[tt],lt=P[ht];(lt===e||nn(lt,xr[ht])&&!_t.call(P,ht))&&(P[ht]=Q[ht])}return P}),cO=zt(function(P){return P.push(e,vg),Mi(qg,e,P)});function vO(P,A){return up(P,Lt(A,3),Tn)}function pO(P,A){return up(P,Lt(A,3),wu)}function gO(P,A){return P==null?P:Fu(P,Lt(A,3),li)}function mO(P,A){return P==null?P:Bp(P,Lt(A,3),li)}function xO(P,A){return P&&Tn(P,Lt(A,3))}function yO(P,A){return P&&wu(P,Lt(A,3))}function TO(P){return P==null?[]:qo(P,De(P))}function CO(P){return P==null?[]:qo(P,li(P))}function uf(P,A,w){var z=P==null?e:$s(P,A);return z===e?w:z}function SO(P,A){return P!=null&&mg(P,A,$P)}function ff(P,A){return P!=null&&mg(P,A,KP)}var EO=lg(function(P,A,w){A!=null&&typeof A.toString!="function"&&(A=zo.call(A)),P[A]=w},cf(ui)),PO=lg(function(P,A,w){A!=null&&typeof A.toString!="function"&&(A=zo.call(A)),_t.call(P,A)?P[A].push(w):P[A]=[w]},Lt),MO=zt(Ca);function De(P){return hi(P)?Op(P):bu(P)}function li(P){return hi(P)?Op(P,!0):iM(P)}function AO(P,A){var w={};return A=Lt(A,3),Tn(P,function(z,$,Q){Hn(w,A(z,$,Q),z)}),w}function OO(P,A){var w={};return A=Lt(A,3),Tn(P,function(z,$,Q){Hn(w,$,A(z,$,Q))}),w}var RO=Sr(function(P,A,w){_o(P,A,w)}),qg=Sr(function(P,A,w,z){_o(P,A,w,z)}),LO=Kn(function(P,A){var w={};if(P==null)return w;var z=!1;A=fe(A,function(Q){return Q=ps(Q,P),z||(z=Q.length>1),Q}),Cn(P,Ju(P),w),z&&(w=Ui(w,u|v|d,EM));for(var $=A.length;$--;)Uu(w,A[$]);return w});function FO(P,A){return _g(P,vh(Lt(A)))}var wO=Kn(function(P,A){return P==null?{}:sM(P,A)});function _g(P,A){if(P==null)return{};var w=fe(Ju(P),function(z){return[z]});return A=Lt(A),Hp(P,w,function(z,$){return A(z,$[0])})}function IO(P,A,w){A=ps(A,P);var z=-1,$=A.length;for($||($=1,P=e);++z<$;){var Q=P==null?e:P[Sn(A[z])];Q===e&&(z=$,Q=w),P=Zn(Q)?Q.call(P):Q}return P}function DO(P,A,w){return P==null?P:Ea(P,A,w)}function BO(P,A,w,z){return z=typeof z=="function"?z:e,P==null?P:Ea(P,A,w,z)}var t0=dg(De),e0=dg(li);function bO(P,A,w){var z=Gt(P),$=z||ms(P)||Mr(P);if(A=Lt(A,4),w==null){var Q=P&&P.constructor;$?w=z?new Q:[]:ve(P)?w=Zn(Q)?Cr(Wo(P)):{}:w={}}return($?Yi:Tn)(P,function(j,tt,it){return A(w,j,tt,it)}),w}function GO(P,A){return P==null?!0:Uu(P,A)}function NO(P,A,w){return P==null?P:Jp(P,A,Hu(w))}function YO(P,A,w,z){return z=typeof z=="function"?z:e,P==null?P:Jp(P,A,Hu(w),z)}function Ar(P){return P==null?[]:Su(P,De(P))}function zO(P){return P==null?[]:Su(P,li(P))}function VO(P,A,w){return w===e&&(w=A,A=e),w!==e&&(w=Hi(w),w=w===w?w:0),A!==e&&(A=Hi(A),A=A===A?A:0),Hs(Hi(P),A,w)}function UO(P,A,w){return A=Jn(A),w===e?(w=A,A=0):w=Jn(w),P=Hi(P),kP(P,A,w)}function WO(P,A,w){if(w&&typeof w!="boolean"&&ii(P,A,w)&&(A=w=e),w===e&&(typeof A=="boolean"?(w=A,A=e):typeof P=="boolean"&&(w=P,P=e)),P===e&&A===e?(P=0,A=1):(P=Jn(P),A===e?(A=P,P=0):A=Jn(A)),P>A){var z=P;P=A,A=z}if(w||P%1||A%1){var $=Mp();return Ke(P+$*(A-P+TE("1e-"+(($+"").length-1))),A)}return Yu(P,A)}var XO=Er(function(P,A,w){return A=A.toLowerCase(),P+(w?i0(A):A)});function i0(P){return df(jt(P).toLowerCase())}function n0(P){return P=jt(P),P&&P.replace($S,DE).replace(uE,"")}function HO(P,A,w){P=jt(P),A=Oi(A);var z=P.length;w=w===e?z:Hs(Nt(w),0,z);var $=w;return w-=A.length,w>=0&&P.slice(w,$)==A}function $O(P){return P=jt(P),P&&MS.test(P)?P.replace(Bv,BE):P}function KO(P){return P=jt(P),P&&wS.test(P)?P.replace(au,"\\$&"):P}var kO=Er(function(P,A,w){return P+(w?"-":"")+A.toLowerCase()}),ZO=Er(function(P,A,w){return P+(w?" ":"")+A.toLowerCase()}),JO=ag("toLowerCase");function QO(P,A,w){P=jt(P),A=Nt(A);var z=A?gr(P):0;if(!A||z>=A)return P;var $=(A-z)/2;return rh(Ko($),w)+P+rh($o($),w)}function jO(P,A,w){P=jt(P),A=Nt(A);var z=A?gr(P):0;return A&&z<A?P+rh(A-z,w):P}function qO(P,A,w){P=jt(P),A=Nt(A);var z=A?gr(P):0;return A&&z<A?rh(A-z,w)+P:P}function _O(P,A,w){return w||A==null?A=0:A&&(A=+A),aP(jt(P).replace(ou,""),A||0)}function tR(P,A,w){return(w?ii(P,A,w):A===e)?A=1:A=Nt(A),zu(jt(P),A)}function eR(){var P=arguments,A=jt(P[0]);return P.length<3?A:A.replace(P[1],P[2])}var iR=Er(function(P,A,w){return P+(w?"_":"")+A.toLowerCase()});function nR(P,A,w){return w&&typeof w!="number"&&ii(P,A,w)&&(A=w=e),w=w===e?I:w>>>0,w?(P=jt(P),P&&(typeof A=="string"||A!=null&&!lf(A))&&(A=Oi(A),!A&&pr(P))?gs(tn(P),0,w):P.split(A,w)):[]}var sR=Er(function(P,A,w){return P+(w?" ":"")+df(A)});function rR(P,A,w){return P=jt(P),w=w==null?0:Hs(Nt(w),0,P.length),A=Oi(A),P.slice(w,w+A.length)==A}function aR(P,A,w){var z=J.templateSettings;w&&ii(P,A,w)&&(A=e),P=jt(P),A=mh({},A,z,cg);var $=mh({},A.imports,z.imports,cg),Q=De($),j=Su($,Q),tt,it,ht=0,lt=A.interpolate||Fo,ft="__p += '",gt=Pu((A.escape||Fo).source+"|"+lt.source+"|"+(lt===bv?zS:Fo).source+"|"+(A.evaluate||Fo).source+"|$","g"),Pt="//# sourceURL="+(_t.call(A,"sourceURL")?(A.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++pE+"]")+`
`;P.replace(gt,function(wt,Vt,Ht,Li,ni,Fi){return Ht||(Ht=Li),ft+=P.slice(ht,Fi).replace(KS,bE),Vt&&(tt=!0,ft+=`' +
__e(`+Vt+`) +
'`),ni&&(it=!0,ft+=`';
`+ni+`;
__p += '`),Ht&&(ft+=`' +
((__t = (`+Ht+`)) == null ? '' : __t) +
'`),ht=Fi+wt.length,wt}),ft+=`';
`;var Ft=_t.call(A,"variable")&&A.variable;if(!Ft)ft=`with (obj) {
`+ft+`
}
`;else if(NS.test(Ft))throw new bt(r);ft=(it?ft.replace(CS,""):ft).replace(SS,"$1").replace(ES,"$1;"),ft="function("+(Ft||"obj")+`) {
`+(Ft?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(tt?", __e = _.escape":"")+(it?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ft+`return __p
}`;var Yt=r0(function(){return Jt(Q,Pt+"return "+ft).apply(e,j)});if(Yt.source=ft,hf(Yt))throw Yt;return Yt}function oR(P){return jt(P).toLowerCase()}function hR(P){return jt(P).toUpperCase()}function lR(P,A,w){if(P=jt(P),P&&(w||A===e))return vp(P);if(!P||!(A=Oi(A)))return P;var z=tn(P),$=tn(A),Q=pp(z,$),j=gp(z,$)+1;return gs(z,Q,j).join("")}function uR(P,A,w){if(P=jt(P),P&&(w||A===e))return P.slice(0,xp(P)+1);if(!P||!(A=Oi(A)))return P;var z=tn(P),$=gp(z,tn(A))+1;return gs(z,0,$).join("")}function fR(P,A,w){if(P=jt(P),P&&(w||A===e))return P.replace(ou,"");if(!P||!(A=Oi(A)))return P;var z=tn(P),$=pp(z,tn(A));return gs(z,$).join("")}function dR(P,A){var w=L,z=R;if(ve(A)){var $="separator"in A?A.separator:$;w="length"in A?Nt(A.length):w,z="omission"in A?Oi(A.omission):z}P=jt(P);var Q=P.length;if(pr(P)){var j=tn(P);Q=j.length}if(w>=Q)return P;var tt=w-gr(z);if(tt<1)return z;var it=j?gs(j,0,tt).join(""):P.slice(0,tt);if($===e)return it+z;if(j&&(tt+=it.length-tt),lf($)){if(P.slice(tt).search($)){var ht,lt=it;for($.global||($=Pu($.source,jt(Gv.exec($))+"g")),$.lastIndex=0;ht=$.exec(lt);)var ft=ht.index;it=it.slice(0,ft===e?tt:ft)}}else if(P.indexOf(Oi($),tt)!=tt){var gt=it.lastIndexOf($);gt>-1&&(it=it.slice(0,gt))}return it+z}function cR(P){return P=jt(P),P&&PS.test(P)?P.replace(Dv,WE):P}var vR=Er(function(P,A,w){return P+(w?" ":"")+A.toUpperCase()}),df=ag("toUpperCase");function s0(P,A,w){return P=jt(P),A=w?e:A,A===e?NE(P)?$E(P):RE(P):P.match(A)||[]}var r0=zt(function(P,A){try{return Mi(P,e,A)}catch(w){return hf(w)?w:new bt(w)}}),pR=Kn(function(P,A){return Yi(A,function(w){w=Sn(w),Hn(P,w,af(P[w],P))}),P});function gR(P){var A=P==null?0:P.length,w=Lt();return P=A?fe(P,function(z){if(typeof z[1]!="function")throw new zi(h);return[w(z[0]),z[1]]}):[],zt(function(z){for(var $=-1;++$<A;){var Q=P[$];if(Mi(Q[0],this,z))return Mi(Q[1],this,z)}})}function mR(P){return WP(Ui(P,u))}function cf(P){return function(){return P}}function xR(P,A){return P==null||P!==P?A:P}var yR=hg(),TR=hg(!0);function ui(P){return P}function vf(P){return Yp(typeof P=="function"?P:Ui(P,u))}function CR(P){return Vp(Ui(P,u))}function SR(P,A){return Up(P,Ui(A,u))}var ER=zt(function(P,A){return function(w){return Ca(w,P,A)}}),PR=zt(function(P,A){return function(w){return Ca(P,w,A)}});function pf(P,A,w){var z=De(A),$=qo(A,z);w==null&&!(ve(A)&&($.length||!z.length))&&(w=A,A=P,P=this,$=qo(A,De(A)));var Q=!(ve(w)&&"chain"in w)||!!w.chain,j=Zn(P);return Yi($,function(tt){var it=A[tt];P[tt]=it,j&&(P.prototype[tt]=function(){var ht=this.__chain__;if(Q||ht){var lt=P(this.__wrapped__),ft=lt.__actions__=oi(this.__actions__);return ft.push({func:it,args:arguments,thisArg:P}),lt.__chain__=ht,lt}return it.apply(P,us([this.value()],arguments))})}),P}function MR(){return Ge._===this&&(Ge._=jE),this}function gf(){}function AR(P){return P=Nt(P),zt(function(A){return Wp(A,P)})}var OR=Ku(fe),RR=Ku(lp),LR=Ku(mu);function a0(P){return _u(P)?xu(Sn(P)):rM(P)}function FR(P){return function(A){return P==null?e:$s(P,A)}}var wR=ug(),IR=ug(!0);function mf(){return[]}function xf(){return!1}function DR(){return{}}function BR(){return""}function bR(){return!0}function GR(P,A){if(P=Nt(P),P<1||P>K)return[];var w=I,z=Ke(P,I);A=Lt(A),P-=I;for(var $=Cu(z,A);++w<P;)A(w);return $}function NR(P){return Gt(P)?fe(P,Sn):Ri(P)?[P]:oi(Ag(jt(P)))}function YR(P){var A=++JE;return jt(P)+A}var zR=sh(function(P,A){return P+A},0),VR=ku("ceil"),UR=sh(function(P,A){return P/A},1),WR=ku("floor");function XR(P){return P&&P.length?jo(P,ui,Iu):e}function HR(P,A){return P&&P.length?jo(P,Lt(A,2),Iu):e}function $R(P){return dp(P,ui)}function KR(P,A){return dp(P,Lt(A,2))}function kR(P){return P&&P.length?jo(P,ui,Gu):e}function ZR(P,A){return P&&P.length?jo(P,Lt(A,2),Gu):e}var JR=sh(function(P,A){return P*A},1),QR=ku("round"),jR=sh(function(P,A){return P-A},0);function qR(P){return P&&P.length?Tu(P,ui):0}function _R(P,A){return P&&P.length?Tu(P,Lt(A,2)):0}return J.after=C2,J.ary=Ng,J.assign=hO,J.assignIn=jg,J.assignInWith=mh,J.assignWith=lO,J.at=uO,J.before=Yg,J.bind=af,J.bindAll=pR,J.bindKey=zg,J.castArray=D2,J.chain=Bg,J.chunk=WM,J.compact=XM,J.concat=HM,J.cond=gR,J.conforms=mR,J.constant=cf,J.countBy=qA,J.create=fO,J.curry=Vg,J.curryRight=Ug,J.debounce=Wg,J.defaults=dO,J.defaultsDeep=cO,J.defer=S2,J.delay=E2,J.difference=$M,J.differenceBy=KM,J.differenceWith=kM,J.drop=ZM,J.dropRight=JM,J.dropRightWhile=QM,J.dropWhile=jM,J.fill=qM,J.filter=t2,J.flatMap=n2,J.flatMapDeep=s2,J.flatMapDepth=r2,J.flatten=Fg,J.flattenDeep=_M,J.flattenDepth=tA,J.flip=P2,J.flow=yR,J.flowRight=TR,J.fromPairs=eA,J.functions=TO,J.functionsIn=CO,J.groupBy=a2,J.initial=nA,J.intersection=sA,J.intersectionBy=rA,J.intersectionWith=aA,J.invert=EO,J.invertBy=PO,J.invokeMap=h2,J.iteratee=vf,J.keyBy=l2,J.keys=De,J.keysIn=li,J.map=fh,J.mapKeys=AO,J.mapValues=OO,J.matches=CR,J.matchesProperty=SR,J.memoize=ch,J.merge=RO,J.mergeWith=qg,J.method=ER,J.methodOf=PR,J.mixin=pf,J.negate=vh,J.nthArg=AR,J.omit=LO,J.omitBy=FO,J.once=M2,J.orderBy=u2,J.over=OR,J.overArgs=A2,J.overEvery=RR,J.overSome=LR,J.partial=of,J.partialRight=Xg,J.partition=f2,J.pick=wO,J.pickBy=_g,J.property=a0,J.propertyOf=FR,J.pull=uA,J.pullAll=Ig,J.pullAllBy=fA,J.pullAllWith=dA,J.pullAt=cA,J.range=wR,J.rangeRight=IR,J.rearg=O2,J.reject=v2,J.remove=vA,J.rest=R2,J.reverse=sf,J.sampleSize=g2,J.set=DO,J.setWith=BO,J.shuffle=m2,J.slice=pA,J.sortBy=T2,J.sortedUniq=SA,J.sortedUniqBy=EA,J.split=nR,J.spread=L2,J.tail=PA,J.take=MA,J.takeRight=AA,J.takeRightWhile=OA,J.takeWhile=RA,J.tap=XA,J.throttle=F2,J.thru=uh,J.toArray=Zg,J.toPairs=t0,J.toPairsIn=e0,J.toPath=NR,J.toPlainObject=Qg,J.transform=bO,J.unary=w2,J.union=LA,J.unionBy=FA,J.unionWith=wA,J.uniq=IA,J.uniqBy=DA,J.uniqWith=BA,J.unset=GO,J.unzip=rf,J.unzipWith=Dg,J.update=NO,J.updateWith=YO,J.values=Ar,J.valuesIn=zO,J.without=bA,J.words=s0,J.wrap=I2,J.xor=GA,J.xorBy=NA,J.xorWith=YA,J.zip=zA,J.zipObject=VA,J.zipObjectDeep=UA,J.zipWith=WA,J.entries=t0,J.entriesIn=e0,J.extend=jg,J.extendWith=mh,pf(J,J),J.add=zR,J.attempt=r0,J.camelCase=XO,J.capitalize=i0,J.ceil=VR,J.clamp=VO,J.clone=B2,J.cloneDeep=G2,J.cloneDeepWith=N2,J.cloneWith=b2,J.conformsTo=Y2,J.deburr=n0,J.defaultTo=xR,J.divide=UR,J.endsWith=HO,J.eq=nn,J.escape=$O,J.escapeRegExp=KO,J.every=_A,J.find=e2,J.findIndex=Rg,J.findKey=vO,J.findLast=i2,J.findLastIndex=Lg,J.findLastKey=pO,J.floor=WR,J.forEach=bg,J.forEachRight=Gg,J.forIn=gO,J.forInRight=mO,J.forOwn=xO,J.forOwnRight=yO,J.get=uf,J.gt=z2,J.gte=V2,J.has=SO,J.hasIn=ff,J.head=wg,J.identity=ui,J.includes=o2,J.indexOf=iA,J.inRange=UO,J.invoke=MO,J.isArguments=Zs,J.isArray=Gt,J.isArrayBuffer=U2,J.isArrayLike=hi,J.isArrayLikeObject=Ce,J.isBoolean=W2,J.isBuffer=ms,J.isDate=X2,J.isElement=H2,J.isEmpty=$2,J.isEqual=K2,J.isEqualWith=k2,J.isError=hf,J.isFinite=Z2,J.isFunction=Zn,J.isInteger=Hg,J.isLength=ph,J.isMap=$g,J.isMatch=J2,J.isMatchWith=Q2,J.isNaN=j2,J.isNative=q2,J.isNil=tO,J.isNull=_2,J.isNumber=Kg,J.isObject=ve,J.isObjectLike=me,J.isPlainObject=Oa,J.isRegExp=lf,J.isSafeInteger=eO,J.isSet=kg,J.isString=gh,J.isSymbol=Ri,J.isTypedArray=Mr,J.isUndefined=iO,J.isWeakMap=nO,J.isWeakSet=sO,J.join=oA,J.kebabCase=kO,J.last=Xi,J.lastIndexOf=hA,J.lowerCase=ZO,J.lowerFirst=JO,J.lt=rO,J.lte=aO,J.max=XR,J.maxBy=HR,J.mean=$R,J.meanBy=KR,J.min=kR,J.minBy=ZR,J.stubArray=mf,J.stubFalse=xf,J.stubObject=DR,J.stubString=BR,J.stubTrue=bR,J.multiply=JR,J.nth=lA,J.noConflict=MR,J.noop=gf,J.now=dh,J.pad=QO,J.padEnd=jO,J.padStart=qO,J.parseInt=_O,J.random=WO,J.reduce=d2,J.reduceRight=c2,J.repeat=tR,J.replace=eR,J.result=IO,J.round=QR,J.runInContext=et,J.sample=p2,J.size=x2,J.snakeCase=iR,J.some=y2,J.sortedIndex=gA,J.sortedIndexBy=mA,J.sortedIndexOf=xA,J.sortedLastIndex=yA,J.sortedLastIndexBy=TA,J.sortedLastIndexOf=CA,J.startCase=sR,J.startsWith=rR,J.subtract=jR,J.sum=qR,J.sumBy=_R,J.template=aR,J.times=GR,J.toFinite=Jn,J.toInteger=Nt,J.toLength=Jg,J.toLower=oR,J.toNumber=Hi,J.toSafeInteger=oO,J.toString=jt,J.toUpper=hR,J.trim=lR,J.trimEnd=uR,J.trimStart=fR,J.truncate=dR,J.unescape=cR,J.uniqueId=YR,J.upperCase=vR,J.upperFirst=df,J.each=bg,J.eachRight=Gg,J.first=wg,pf(J,function(){var P={};return Tn(J,function(A,w){_t.call(J.prototype,w)||(P[w]=A)}),P}(),{chain:!1}),J.VERSION=f,Yi(["bind","bindKey","curry","curryRight","partial","partialRight"],function(P){J[P].placeholder=J}),Yi(["drop","take"],function(P,A){Ut.prototype[P]=function(w){w=w===e?1:Re(Nt(w),0);var z=this.__filtered__&&!A?new Ut(this):this.clone();return z.__filtered__?z.__takeCount__=Ke(w,z.__takeCount__):z.__views__.push({size:Ke(w,I),type:P+(z.__dir__<0?"Right":"")}),z},Ut.prototype[P+"Right"]=function(w){return this.reverse()[P](w).reverse()}}),Yi(["filter","map","takeWhile"],function(P,A){var w=A+1,z=w==B||w==U;Ut.prototype[P]=function($){var Q=this.clone();return Q.__iteratees__.push({iteratee:Lt($,3),type:w}),Q.__filtered__=Q.__filtered__||z,Q}}),Yi(["head","last"],function(P,A){var w="take"+(A?"Right":"");Ut.prototype[P]=function(){return this[w](1).value()[0]}}),Yi(["initial","tail"],function(P,A){var w="drop"+(A?"":"Right");Ut.prototype[P]=function(){return this.__filtered__?new Ut(this):this[w](1)}}),Ut.prototype.compact=function(){return this.filter(ui)},Ut.prototype.find=function(P){return this.filter(P).head()},Ut.prototype.findLast=function(P){return this.reverse().find(P)},Ut.prototype.invokeMap=zt(function(P,A){return typeof P=="function"?new Ut(this):this.map(function(w){return Ca(w,P,A)})}),Ut.prototype.reject=function(P){return this.filter(vh(Lt(P)))},Ut.prototype.slice=function(P,A){P=Nt(P);var w=this;return w.__filtered__&&(P>0||A<0)?new Ut(w):(P<0?w=w.takeRight(-P):P&&(w=w.drop(P)),A!==e&&(A=Nt(A),w=A<0?w.dropRight(-A):w.take(A-P)),w)},Ut.prototype.takeRightWhile=function(P){return this.reverse().takeWhile(P).reverse()},Ut.prototype.toArray=function(){return this.take(I)},Tn(Ut.prototype,function(P,A){var w=/^(?:filter|find|map|reject)|While$/.test(A),z=/^(?:head|last)$/.test(A),$=J[z?"take"+(A=="last"?"Right":""):A],Q=z||/^find/.test(A);!$||(J.prototype[A]=function(){var j=this.__wrapped__,tt=z?[1]:arguments,it=j instanceof Ut,ht=tt[0],lt=it||Gt(j),ft=function(Vt){var Ht=$.apply(J,us([Vt],tt));return z&&gt?Ht[0]:Ht};lt&&w&&typeof ht=="function"&&ht.length!=1&&(it=lt=!1);var gt=this.__chain__,Pt=!!this.__actions__.length,Ft=Q&&!gt,Yt=it&&!Pt;if(!Q&&lt){j=Yt?j:new Ut(this);var wt=P.apply(j,tt);return wt.__actions__.push({func:uh,args:[ft],thisArg:e}),new Vi(wt,gt)}return Ft&&Yt?P.apply(this,tt):(wt=this.thru(ft),Ft?z?wt.value()[0]:wt.value():wt)})}),Yi(["pop","push","shift","sort","splice","unshift"],function(P){var A=Go[P],w=/^(?:push|sort|unshift)$/.test(P)?"tap":"thru",z=/^(?:pop|shift)$/.test(P);J.prototype[P]=function(){var $=arguments;if(z&&!this.__chain__){var Q=this.value();return A.apply(Gt(Q)?Q:[],$)}return this[w](function(j){return A.apply(Gt(j)?j:[],$)})}}),Tn(Ut.prototype,function(P,A){var w=J[A];if(w){var z=w.name+"";_t.call(Tr,z)||(Tr[z]=[]),Tr[z].push({name:A,func:w})}}),Tr[nh(e,m).name]=[{name:"wrapper",func:e}],Ut.prototype.clone=cP,Ut.prototype.reverse=vP,Ut.prototype.value=pP,J.prototype.at=HA,J.prototype.chain=$A,J.prototype.commit=KA,J.prototype.next=kA,J.prototype.plant=JA,J.prototype.reverse=QA,J.prototype.toJSON=J.prototype.valueOf=J.prototype.value=jA,J.prototype.first=J.prototype.head,va&&(J.prototype[va]=ZA),J},mr=KE();Vs?((Vs.exports=mr)._=mr,cu._=mr):Ge._=mr}).call(Hr)})(ye,ye.exports);class xe{static parse(t,e=[]){let f=0;for(let n=0;n<t.length;n++){let h=t[n],r=t[f];switch(!0){case(t.length>=n+5&&t.slice(n,n+5)=="|_|->"):f=r!="|"?n:f;break;case h=="v":f=r!="|"&&r!="v"?n:f;break;case h=="~":f=r!="|"&&r!="v"&&r!="~"?n:f;break;case h=="(":f=r!="|"&&r!="v"&&r!="~"&&r!="~"?n:f;let a=1;for(;n<t.length&&a>0;)n++,t[n]=="("&&a++,t[n]==")"&&a--;break;case(h>="A"&&h<="Z"):f=r!="|"&&r!="v"&&r!="~"&&r!="~"&&(r<"A"||r>"Z")?n:f;break;case(t.length>=n+3&&t.slice(n,n+3)=="_|_"):f=r!="|"&&r!="v"&&r!="~"&&r!="~"&&(r<"A"||r>"Z")&&r!="_"?n:f;break;case h=="?":f=r!="|"&&r!="v"&&r!="~"&&r!="~"&&(r<"A"||r>"Z")&&r!="_"&&r!="?"?n:f;break}}let i=t[f];switch(!0){case i=="|":return new rs(xe.parse(t.slice(0,f),e),xe.parse(t.slice(f+5,t.length),e));case i=="v":return new as(xe.parse(t.slice(0,f),e),xe.parse(t.slice(f+1,t.length),e));case i=="~":return new vn(xe.parse(t.slice(f+1,t.length),e));case i=="(":let n=f,h=1;for(;n<t.length&&h>0;)n++,t[n]=="("&&h++,t[n]==")"&&h--;return xe.parse(t.slice(f+1,n),e);case(i>="A"&&i<="Z"):return new vo(e[i.charCodeAt(0)-65]);case i=="_":return new su;case i=="?":return new ua}throw new Error("Failed to parse formula string: "+t)}}class rs extends xe{constructor(t,e){super(),this.antecedent=t,this.consequent=e}generate_atom_list(t){let e=this.antecedent.generate_atom_list(t);return e=this.consequent.generate_atom_list(e),e}to_string(t){t=t!=null?t:[];let e=n=>n instanceof rs||n instanceof as,f=this.antecedent.to_string(t),i=this.consequent.to_string(t);return(e(this.antecedent)?"("+f+")":f)+" |_|-> "+(e(this.consequent)?"("+i+")":i)}compare(t){return t instanceof rs&&this.antecedent.compare(t.antecedent)&&this.consequent.compare(t.consequent)||t instanceof ua}get_child(t){if(t.length==0)return this;switch(t[0]){case"l":return this.antecedent.get_child(t.slice(1,t.length));case"r":return this.consequent.get_child(t.slice(1,t.length));default:throw new Error("path string may only contain the letters 'l' and 'r'")}}}class as extends xe{constructor(t,e){super(),this.subject1=t,this.subject2=e}generate_atom_list(t){let e=this.subject1.generate_atom_list(t);return e=this.subject2.generate_atom_list(e),e}to_string(t){t=t!=null?t:[];let e=n=>n instanceof rs||n instanceof as,f=this.subject1.to_string(t),i=this.subject2.to_string(t);return(e(this.subject1)?"("+f+")":f)+" v "+(e(this.subject2)?"("+i+")":i)}compare(t){return t instanceof as&&(this.subject1.compare(t.subject1)&&this.subject2.compare(t.subject2)||this.subject1.compare(t.subject2)&&this.subject2.compare(t.subject1))||t instanceof ua}get_child(t){if(t.length==0)return this;switch(t[0]){case"l":return this.subject1.get_child(t.slice(1,t.length));case"r":return this.subject2.get_child(t.slice(1,t.length));default:throw new Error("path string may only contain the letters 'l' and 'r'")}}}class vn extends xe{constructor(t){super(),this.subject=t}generate_atom_list(t){return this.subject.generate_atom_list(t)}to_string(t){let e=i=>i instanceof rs||i instanceof as,f=this.subject.to_string(t);return"~"+(e(this.subject)?"("+f+")":f)}compare(t){return t instanceof vn&&this.subject.compare(t.subject)||t instanceof ua}get_child(t){if(t.length==0)return this;switch(t[0]){case"l":return this.subject.get_child(t.slice(1,t.length));default:throw new Error("Negation only has left child")}}}class vo extends xe{constructor(t){super(),this.value=t}generate_atom_list(t){let e=t!=null?t:[];return e.includes(this.value)||(e=e.concat([this.value])),e}to_string(t){if(t==null)return"A";let e=t==null?void 0:t.findIndex(f=>f==this.value);return e==-1?(t==null||t.push(this.value),String.fromCharCode(t.length-1+65)):String.fromCharCode(e+65)}compare(t){return t instanceof vo&&this.value==t.value||t instanceof vo&&(this.value==null||t.value==null)||t instanceof ua}get_child(t){if(t.length==0)return this;throw new Error("Cannot traverse any further")}}class su extends xe{constructor(){super()}generate_atom_list(t){return t!=null?t:[]}to_string(){return"_|_"}compare(t){return t instanceof su||t instanceof ua}get_child(t){if(t.length==0)return this;throw new Error("Cannot traverse any further")}}class ua extends xe{constructor(){super()}generate_atom_list(t){return t!=null?t:[]}to_string(){return"?"}compare(t){return!0}get_child(t){if(t.length==0)return this;throw new Error("Cannot traverse any further")}}var or=(s=>(s[s.Attacker=0]="Attacker",s[s.Defender=1]="Defender",s[s.Either=2]="Either",s))(or||{}),pn=(s=>(s[s.Resolve=0]="Resolve",s[s.Vacuous=1]="Vacuous",s[s.Counterfactual=2]="Counterfactual",s))(pn||{}),Pe=(s=>(s[s.Defenders_Resolution=0]="Defenders_Resolution",s[s.Attackers_Resolution=1]="Attackers_Resolution",s[s.Defenders_Choice=2]="Defenders_Choice",s[s.Attackers_Choice=3]="Attackers_Choice",s[s.No_Moves=4]="No_Moves",s))(Pe||{});let ec=new Map([["a",0],["d",1],["a/d",2],["d/a",2]]),ic=new Map([["Res",0],["Cf",2],["Vac",1]]);class t8{constructor(){this.rules=[],this.initialize_rules()}initialize_rules(){let t=L=>L.get_current_world().is_atom_known_true(L.get_formula().value),e=L=>!L.get_current_world().is_atom_known_true(L.get_formula().value),f=L=>L.get_current_world().is_atom_known_true(L.get_formula().get_child("l").value),i=L=>!L.get_current_world().is_atom_known_true(L.get_formula().get_child("l").value),n=L=>L.get_current_world().get_edge_count()>0,h=L=>L.get_current_world().get_edge_count()>0&&L.get_current_world().get_edge_list().some(R=>R[1]<=L.get_radius());this.rules.push(pe.create("Attacker_Victory","Res","a","_|_")),this.rules.push(pe.create("Defender_Victory","Res","a","~_|_"));let r=L=>L.configure("Res",xe.parse("~_|_"),"a/d");this.rules.push(pe.create("Known_Fact","Res","a","A",r,t));let a=L=>L.configure("Res",xe.parse("_|_"),"a/d");this.rules.push(pe.create("Unknown_Fact","Res","a","A",a,e));let l=L=>L.configure("Res",xe.parse("_|_"),"a/d");this.rules.push(pe.create("Negated_Known_Fact","Res","a","~A",l,f));let o=L=>L.configure("Res",xe.parse("~_|_"),"a/d");this.rules.push(pe.create("Negated_Unknown_Fact","Res","a","~A",o,i));let u=L=>L.configure("Res",L.get_formula().get_child("ll"),"a/d");this.rules.push(pe.create("Double_Negation","Res","a","~~?",u));let v=L=>L.configure("Res",L.get_formula().get_child("l"),"a/d");this.rules.push(pe.create("Left_OR","Res","d","?v?",v));let d=L=>L.configure("Res",L.get_formula().get_child("r"),"a/d");this.rules.push(pe.create("Right_OR","Res","d","?v?",d));let c=L=>L.configure("Res",new vn(L.get_formula().get_child("ll")),"a/d");this.rules.push(pe.create("Negated_Left_OR","Res","a","~(?v?)",c));let p=L=>L.configure("Res",new vn(L.get_formula().get_child("lr")),"a/d");this.rules.push(pe.create("Negated_Right_OR","Res","a","~(?v?)",p));let g=(L,R)=>L.configure("Cf",L.get_formula(),"a",void 0,R);this.rules.push(pe.create("Defender_Sphere_Selection","Res","d","? |_|-> ?",g,n,!0));let m=L=>L.configure("Res",L.get_formula().get_child("l"),"a/d",L.get_delim_world().index);this.rules.push(pe.create("Attacker_Phi_Evaluation","Cf","a","? |_|-> ?",m));let x=(L,R)=>L.configure("Res",new as(new vn(L.get_formula().get_child("l")),L.get_formula().get_child("r")),"d",R);this.rules.push(pe.create("Attacker_World_Choice","Cf","a","? |_|-> ?",x,h,!0));let y=L=>L.configure("Vac",L.get_formula().get_child("l"),"a");this.rules.push(pe.create("Defender_Vacuous_Truth_Claim","Res","d","? |_|-> ?",y));let T=(L,R)=>L.configure("Res",new vn(L.get_formula()),"a/d",R);this.rules.push(pe.create("Attacker_Vacuous_World_Choice","Vac","a","?",T,n,!0));let C=(L,R)=>L.configure("Cf",L.get_formula(),"d",void 0,R);this.rules.push(pe.create("Attacker_Sphere_Selection","Res","a","~(? |_|-> ?)",C,n,!0));let S=L=>L.configure("Res",new vn(L.get_formula().get_child("ll")),"a/d",L.get_delim_world().index);this.rules.push(pe.create("Defender_Phi_Evaluation","Cf","d","~(? |_|-> ?)",S));let E=(L,R)=>L.configure("Res",new vn(new as(new vn(L.get_formula().get_child("ll")),L.get_formula().get_child("lr"))),"a",R);this.rules.push(pe.create("Defender_World_Choice","Cf","d","~(? |_|-> ?)",E,h,!0));let M=L=>L.configure("Vac",L.get_formula().get_child("ll"),"d");this.rules.push(pe.create("Attacker_Vacuous_Truth_Claim","Res","a","~(? |_|-> ?)",M));let O=(L,R)=>L.configure("Res",L.get_formula(),"a/d",R);this.rules.push(pe.create("Defender_Vacuous_World_Choice","Vac","d","?",O,n,!0))}applicable(t){let e=[];for(let f=0;f<this.rules.length;f++){let i=this.rules[f];i.is_applicable(t)&&e.push(ye.exports.cloneDeep(i))}return e}defender_moves(t){return this.applicable(t).filter(e=>e.get_player()==or.Defender||e.get_player()==or.Either)}attacker_moves(t){return this.applicable(t).filter(e=>e.get_player()==or.Attacker||e.get_player()==or.Either)}next_game_states(t,e){e=e!=null?e:this.defender_moves(t),e=e==null||e.length==0?this.attacker_moves(t):e;let f=[],i,n;for(let h=0;h<e.length;h++)if(i=e[h],i.get_world_input_requirement()){let a=t.get_graph().get_V();for(let l=0;l<a;l++){let o=!1;switch(!0){case i.get_name()==Dt.Defender_Sphere_Selection:case i.get_name()==Dt.Attacker_Sphere_Selection:case i.get_name()==Dt.Defender_Vacuous_World_Choice:case i.get_name()==Dt.Attacker_Vacuous_World_Choice:o=t.get_current_world().is_adj(l);break;case i.get_name()==Dt.Defender_World_Choice:case i.get_name()==Dt.Attacker_World_Choice:o=t.get_current_world().is_adj(l)&&t.get_current_world().get_edge(l)[1]<=t.get_radius();break}o&&(n=i.apply(ye.exports.cloneDeep(t),l),f.push(n))}}else n=i.apply(ye.exports.cloneDeep(t)),f.push(n);return f}}class pe{constructor(t,e,f,i,n,h,r){this.requires_world_input=!1,this.name=t,this.state_mode=e,this.active_player=f,this.structure=i,this.special=h!=null?h:()=>!0,this.apply=n!=null?n:a=>a,this.requires_world_input=r!=null?r:this.requires_world_input}static create(t,e,f,i,n,h,r){let a=Dt[t],l=ic.get(e),o=ec.get(f);if(a==null||l==null||o==null)throw new Error("Passed incorrect rule name or precondition abbreviation");return new pe(a,l,o,xe.parse(i),n,h,r)}get_name(){return this.name}get_player(){return this.active_player}get_world_input_requirement(){return this.requires_world_input}get_special_condition(){return this.special}is_applicable(t){return!(t.get_mode()!=this.state_mode||t.get_active_player()!=or.Either&&t.get_active_player()!=this.active_player||!this.structure.compare(t.get_formula())||!this.special(t))}}var Dt=(s=>(s[s.Attacker_Victory=0]="Attacker_Victory",s[s.Defender_Victory=1]="Defender_Victory",s[s.Known_Fact=2]="Known_Fact",s[s.Unknown_Fact=3]="Unknown_Fact",s[s.Negated_Known_Fact=4]="Negated_Known_Fact",s[s.Negated_Unknown_Fact=5]="Negated_Unknown_Fact",s[s.Double_Negation=6]="Double_Negation",s[s.Left_OR=7]="Left_OR",s[s.Right_OR=8]="Right_OR",s[s.Negated_Left_OR=9]="Negated_Left_OR",s[s.Negated_Right_OR=10]="Negated_Right_OR",s[s.Defender_Sphere_Selection=11]="Defender_Sphere_Selection",s[s.Attacker_Phi_Evaluation=12]="Attacker_Phi_Evaluation",s[s.Attacker_World_Choice=13]="Attacker_World_Choice",s[s.Defender_Vacuous_Truth_Claim=14]="Defender_Vacuous_Truth_Claim",s[s.Attacker_Vacuous_World_Choice=15]="Attacker_Vacuous_World_Choice",s[s.Attacker_Sphere_Selection=16]="Attacker_Sphere_Selection",s[s.Defender_Phi_Evaluation=17]="Defender_Phi_Evaluation",s[s.Defender_World_Choice=18]="Defender_World_Choice",s[s.Attacker_Vacuous_Truth_Claim=19]="Attacker_Vacuous_Truth_Claim",s[s.Defender_Vacuous_World_Choice=20]="Defender_Vacuous_World_Choice",s[s.No_Transition=21]="No_Transition",s))(Dt||{});class pl{static choose_move(t,e){let f=this.choose_random_move(e),i=t.get_mode()==pn.Counterfactual?t.get_radius():1/0,n=f.get_world_input_requirement()?pl.choose_random_reachable_world(t,f,i):-1;return[f,n]}static choose_random_move(t){let e=Math.ceil(0),f=Math.floor(t.length),i=Math.floor(Math.random()*(f-e)+e);return t[i]}static choose_random_reachable_world(t,e,f=1/0){if(!e.get_world_input_requirement())throw new Error("Passed move doesnt require world input!");let n=t.get_current_world().get_edges().filter(l=>l[1]<=f),h=Math.ceil(0),r=Math.floor(n.length),a=Math.floor(Math.random()*(r-h)+h);return console.log("AI chose world "+n[a][0].index),n[a][0].index}static choose_blunderscore_move(t,e,f){let i=[t],n=[],h=[];for(;i.length>0;){let v=i[i.length-1],d=!1,c=f.next_game_states(v),p;if(!n.some(g=>g.equals(v))){n.push(v),d=!0;for(let g=0;g<c.length;g++)p=c[g],!n.some(m=>m.equals(p))&&!i.some(m=>m.equals(p))&&i.push(p)}if(!d){let g=f.attacker_moves(v),m=f.defender_moves(v);switch(!0){case g.some(S=>S.get_name()==Dt.Defender_Victory):h.push([v,1,0]);break;case g.some(S=>S.get_name()==Dt.Attacker_Victory):h.push([v,0,0]);break;case m.length>0:let x=0,y=0;for(let S=0;S<c.length;S++){p=c[S];let E=h.find(M=>M[0].equals(p));x+=E[1],y+=E[2]}h.push([v,x/c.length,y/c.length+1]);break;case g.length>0:let T=1/0,C=0;for(let S=0;S<c.length;S++){p=c[S];let E=h.find(O=>O[0].equals(p)),M=E[1];(M<T||M==T&&C<E[2])&&(T=M,C=E[2])}h.push([v,T,C]);break}i.pop()}}let r,a=-1,l=1/0,o=-1,u;for(let v=0;v<e.length;v++){let d=e[v];u=f.next_game_states(t,[d]);for(let c=0;c<u.length;c++){let p=h.find(g=>g[0].equals(u[c]));p!=null&&(p[1]<l||p[1]==l&&p[2]>o)&&(r=d,a=d.get_name()==Dt.Attacker_Sphere_Selection||d.get_name()==Dt.Defender_Sphere_Selection?u[c].get_delim_world():u[c].get_current_world(),l=p[1],o=p[2])}}return[r,a.index]}}class e8{constructor(t){this.rules_controller=new t8,this.state=t,console.log("Setup Game with Formula: "+this.state.get_formula().to_string())}determine_next_moves(){let t=this.rules_controller.defender_moves(this.state),e=this.rules_controller.attacker_moves(this.state),f;switch(!0){case t.length>1:return[Pe.Defenders_Choice,t];case t.length==1:return[Pe.Defenders_Resolution,t];case(t.length==0&&e.length>1):return f=pl.choose_blunderscore_move(ye.exports.cloneDeep(this.state),e,this.rules_controller),[Pe.Attackers_Resolution,[f[0]],f[1]];case(t.length==0&&e.length==1):return f=pl.choose_blunderscore_move(ye.exports.cloneDeep(this.state),e,this.rules_controller),[Pe.Attackers_Resolution,[f[0]],f[1]];case(t.length==0&&e.length==0):return[Pe.No_Moves,[]]}return[Pe.No_Moves,[]]}execute_move(t,e){switch(this.state=t.apply(this.state,e),this.state.get_mode()){case pn.Resolve:console.log("---> "+this.state.get_formula().to_string()+" at world "+this.state.get_current_world().index);break;case pn.Counterfactual:console.log("---> Prove counterfactual "+this.state.get_formula().to_string()+`
within sphere centered on world `+this.state.get_current_world().index+" delimited by world "+this.state.get_delim_world().index);break}}does_require_delim(t){return t.get_world_input_requirement()}get_state(){return ye.exports.cloneDeep(this.state)}}const yS=class extends Phaser.GameObjects.Container{constructor(s,t,e,f){super(s,t,e),this.contents=[],this.contents=this.contents.concat(f||this.contents);let i=s.get_width();this.scene.get_height(),new Phaser.GameObjects.Rectangle(s,0,0,i*.75,200,7902125).setAlpha(.8),new Phaser.GameObjects.Rectangle(s,0,5,i*.75-20,190,3094851).setAlpha(.8);let n=new Phaser.GameObjects.Sprite(s,0,5,"sup_panel");this.add(n)}discard(){}embed(s){this.contents.push(s)}resize(){let s=this.scene.get_width(),t=this.scene.get_height();this.setX(s/2),this.setY(t-100)}static create(s,t,e,f){let i=s.get_width(),n=s.get_height(),h=s.add.image(0,0,"sup_panel"),r=s.add.image(0,0,"sup_panel_knob");s.add.image(t,e,"sup_panel_mask").setVisible(!1).createBitmapMask();let a=s.add.image(0,0,"atom");new yc(s,i/2,n-200,"world",s.textures.get("world").firstFrame,{mask:{key:"sup_panel_mask",frame:s.textures.get("sup_panel_mask").firstFrame,scale:.25}}),s.add.existing(a);var l=s.rexUI.add.scrollablePanel({x:t,y:e,width:900,height:200,scrollMode:1,background:h,panel:{child:yS.createPanel(s,f),mask:{mask:!1,padding:1,updateMode:0}},slider:{thumb:r},mouseWheelScroller:{focus:!1,speed:.1},space:{left:60,right:60,top:35,bottom:0,panel:10,slider:{left:83,right:83,top:0,bottom:28}}}).layout();return l}static load_sprites(s){s.load.image("sup_panel","assets/Banner.png"),s.load.image("sup_panel_light","assets/Banner_Holo_Light.png"),s.load.image("sup_panel_trans","assets/Banner_Holo_Trans.png"),s.load.image("sup_panel_white","assets/Banner_Holo_White.png"),s.load.image("sup_panel1","assets/Banner1.png"),s.load.image("sup_panel2","assets/Banner2.png"),s.load.image("sup_panel3","assets/Banner3.png"),s.load.image("sup_panel4","assets/Banner4.png"),s.load.image("sup_panel5","assets/Banner5.png"),s.load.image("sup_panel_knob","assets/Banner_Knob.png"),s.load.image("sup_panel_mask","assets/Banner_Clip_Mask.png"),s.load.image("styles","assets/UI_Styles.png"),s.load.image("styles_mod","assets/UI_Styles_Mod.png"),s.load.image("styles_modd","assets/UI_Styles_Modd.png"),s.load.image("styles_moddd","assets/UI_Styles_Moddd.png"),s.load.image("styles_op","assets/UI_Styles_Opacity.png"),s.load.image("styles_fill","assets/UI_Styles_Fill.png")}};let nc=yS;nc.createPanel=function(s,t){var e=s.rexUI.add.sizer({orientation:"x",anchor:{centerX:"center",centerY:"bottom-110"},space:{item:10}});for(let f=0;f<t.length;f++)e.add(t[f]);return e};class Zi{constructor(t,e,f){this.x=t,this.y=e,this.z=f}dot2(t,e){return this.x*t+this.y*e}dot3(t,e,f){return this.x*t+this.y*e+this.z*f}}const i8=[new Zi(1,1,0),new Zi(-1,1,0),new Zi(1,-1,0),new Zi(-1,-1,0),new Zi(1,0,1),new Zi(-1,0,1),new Zi(1,0,-1),new Zi(-1,0,-1),new Zi(0,1,1),new Zi(0,-1,1),new Zi(0,1,-1),new Zi(0,-1,-1)],Ey=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],n8=.5*(Math.sqrt(3)-1),Za=(3-Math.sqrt(3))/6,s8=1/3,wn=1/6;var Ja=function(s){return s*s*s*(s*(s*6-15)+10)},In=function(s,t,e){return(1-e)*s+e*t};class TS{constructor(t){t===void 0&&(t=0),this.perm=new Array(512),this.gradP=new Array(512),this.setSeed(t)}setSeed(t){var e=this.perm,f=this.gradP;t>0&&t<1&&(t*=65536),t=Math.floor(t),t<256&&(t|=t<<8);for(var i=0;i<256;i++){var n;i&1?n=Ey[i]^t&255:n=Ey[i]^t>>8&255,e[i]=e[i+256]=n,f[i]=f[i+256]=i8[n%12]}}simplex2(t,e){var f=this.perm,i=this.gradP,n,h,r,a=(t+e)*n8,l=Math.floor(t+a),o=Math.floor(e+a),u=(l+o)*Za,v=t-l+u,d=e-o+u,c,p;v>d?(c=1,p=0):(c=0,p=1);var g=v-c+Za,m=d-p+Za,x=v-1+2*Za,y=d-1+2*Za;l&=255,o&=255;var T=i[l+f[o]],C=i[l+c+f[o+p]],S=i[l+1+f[o+1]],E=.5-v*v-d*d;E<0?n=0:(E*=E,n=E*E*T.dot2(v,d));var M=.5-g*g-m*m;M<0?h=0:(M*=M,h=M*M*C.dot2(g,m));var O=.5-x*x-y*y;return O<0?r=0:(O*=O,r=O*O*S.dot2(x,y)),70*(n+h+r)}simplex3(t,e,f){var i=this.perm,n=this.gradP,h,r,a,l,o=(t+e+f)*s8,u=Math.floor(t+o),v=Math.floor(e+o),d=Math.floor(f+o),c=(u+v+d)*wn,p=t-u+c,g=e-v+c,m=f-d+c,x,y,T,C,S,E;p>=g?g>=m?(x=1,y=0,T=0,C=1,S=1,E=0):p>=m?(x=1,y=0,T=0,C=1,S=0,E=1):(x=0,y=0,T=1,C=1,S=0,E=1):g<m?(x=0,y=0,T=1,C=0,S=1,E=1):p<m?(x=0,y=1,T=0,C=0,S=1,E=1):(x=0,y=1,T=0,C=1,S=1,E=0);var M=p-x+wn,O=g-y+wn,L=m-T+wn,R=p-C+2*wn,F=g-S+2*wn,D=m-E+2*wn,B=p-1+3*wn,N=g-1+3*wn,U=m-1+3*wn;u&=255,v&=255,d&=255;var X=n[u+i[v+i[d]]],K=n[u+x+i[v+y+i[d+T]]],k=n[u+C+i[v+S+i[d+E]]],b=n[u+1+i[v+1+i[d+1]]],I=.6-p*p-g*g-m*m;I<0?h=0:(I*=I,h=I*I*X.dot3(p,g,m));var G=.6-M*M-O*O-L*L;G<0?r=0:(G*=G,r=G*G*K.dot3(M,O,L));var Y=.6-R*R-F*F-D*D;Y<0?a=0:(Y*=Y,a=Y*Y*k.dot3(R,F,D));var V=.6-B*B-N*N-U*U;return V<0?l=0:(V*=V,l=V*V*b.dot3(B,N,U)),32*(h+r+a+l)}perlin2(t,e){var f=this.perm,i=this.gradP,n=Math.floor(t),h=Math.floor(e);t=t-n,e=e-h,n=n&255,h=h&255;var r=i[n+f[h]].dot2(t,e),a=i[n+f[h+1]].dot2(t,e-1),l=i[n+1+f[h]].dot2(t-1,e),o=i[n+1+f[h+1]].dot2(t-1,e-1),u=Ja(t);return In(In(r,l,u),In(a,o,u),Ja(e))}perlin3(t,e,f){var i=this.perm,n=this.gradP,h=Math.floor(t),r=Math.floor(e),a=Math.floor(f);t=t-h,e=e-r,f=f-a,h=h&255,r=r&255,a=a&255;var l=n[h+i[r+i[a]]].dot3(t,e,f),o=n[h+i[r+i[a+1]]].dot3(t,e,f-1),u=n[h+i[r+1+i[a]]].dot3(t,e-1,f),v=n[h+i[r+1+i[a+1]]].dot3(t,e-1,f-1),d=n[h+1+i[r+i[a]]].dot3(t-1,e,f),c=n[h+1+i[r+i[a+1]]].dot3(t-1,e,f-1),p=n[h+1+i[r+1+i[a]]].dot3(t-1,e-1,f),g=n[h+1+i[r+1+i[a+1]]].dot3(t-1,e-1,f-1),m=Ja(t),x=Ja(e),y=Ja(f);return In(In(In(l,d,m),In(o,c,m),y),In(In(u,p,m),In(v,g,m),y),x)}}let Iv={fontFamily:'Georgia, "Goudy Bookletter 1911", Times, serif'};var pt=(s=>(s[s.Formula=0]="Formula",s[s.Formula_Choice=1]="Formula_Choice",s[s.Counterfactual_Choice=2]="Counterfactual_Choice",s[s.Negated_Counterfactual_Choice=3]="Negated_Counterfactual_Choice",s[s.World_Choice=4]="World_Choice",s[s.Transition=5]="Transition",s))(pt||{}),ns=(s=>(s[s.Display=0]="Display",s[s.World_Choice=1]="World_Choice",s))(ns||{});function Rs(s,t,e){let i=s.game.textures.get(t).getSourceImage(t),n=s.game.textures.createCanvas(e,i.width,i.height);n.getSourceImage().getContext("2d").drawImage(i,0,0),n.refresh()}function r8(s,t,e){let f=s.game.textures.get(t),i=f.getSourceImage(t),n=i.getContext("2d"),h=n.getImageData(0,0,i.width,i.height),r=h.data;for(let a=0;a<r.length/4;a++){let l=a*4,o=r,u=(e&16711680)>>16,v=(e&65280)>>8,d=e&255;o[l]=u,o[l+1]=v,o[l+2]=d}n.putImageData(h,0,0),f.refresh()}function eo(s,t,e){let f=s.game.textures.get(t),i=f.getSourceImage(t),n=i.getContext("2d"),h=n.getImageData(0,0,i.width,i.height),r=h.data,a=r;for(let l=0;l<r.length/4;l++){let o=l*4,u=(e&16711680)>>16,v=(e&65280)>>8,d=e&255,c=Phaser.Display.Color.RGBToHSV(u,v,d),p=Phaser.Display.Color.RGBToHSV(a[o],a[o+1],a[o+2]),g=Phaser.Display.Color.HSVToRGB(c.h,c.s,p.v);a[o]=(g.color&16711680)>>16,a[o+1]=(g.color&65280)>>8,a[o+2]=g.color&255}n.putImageData(h,0,0),f.refresh()}function Rd(s,t,e){let f=s.game.textures.get(t),i=f.getSourceImage(t),n=i.getContext("2d"),h=n.getImageData(0,0,i.width,i.height),r=h.data;for(let a=0;a<r.length/4;a++){let l=a*4,o=r,u=o[l],v=o[l+1],d=o[l+2],c=a8(u,v,d,e);o[l]=c[0],o[l+1]=c[1],o[l+2]=c[2]}n.putImageData(h,0,0),f.refresh()}const Py=Math.PI/180;function a8(s,t,e,f){const i=Math.cos(f*Py),n=Math.sin(f*Py),h=[i+(1-i)/3,(1-i)/3-Math.sqrt(1/3)*n,(1-i)/3+Math.sqrt(1/3)*n];return[s*h[0]+t*h[1]+e*h[2],s*h[2]+t*h[0]+e*h[1],s*h[1]+t*h[2]+e*h[0]].map(a=>o8(a))}function o8(s){return 0>s?0:255<s?255:Math.round(s)}function h8(s,t,e,f){let i=s.game.textures.createCanvas(f,t,e),n=i.getSourceImage(),h=n.getContext("2d"),r=h.getImageData(0,0,n.width,n.height),a=r.data,l=new TS(Math.random());for(let o=0;o<e;o++)for(let u=0;u<t;u++){let v=u*4,d=o*t*4,c=v+d,p=a,g=0,m=0,x=0,y=Math.abs(t/2-u),T=Math.abs(e/2-o),C=Math.sqrt(y*y/4+T*T/4);C=Math.sqrt(y*y/4+T*T/4)/Math.sqrt(t/2*(t/2)/4+e/2*(e/2)/4),C=(y*y+T*T)/4/((t/2*(t/2)+e/2*(e/2))/4),C=1-(y*y+T*T)/4/((t/3*(t/3)+e/3*(e/3))/4),g=64+(l.perlin2(u/t,o/e)+1)*63+64*C,m=64+(l.perlin2((u+25)/t,o/e)+1)*64+64*C,x=64+(l.perlin2((u-25)/t,o/e)+1)*64+64*C,p[c]=g,p[c+1]=m,p[c+2]=x,p[c+3]=255}h.putImageData(r,0,0),i.refresh()}let My=["You lose!","You win!","The atom is true at the current world","The atom is false at the current world","The negation of the atom is false at the current world","The negation of the atom is true at the current world","Eliminating double negation...","You chose the left formula","You chose the right formula","The attacker chose the left formula","The attacker chose the right formula","You chose to choose a sphere of accessibility","The attacker chose to evaluate the antecedent at the sphere-delimiting world","The attacker chose a world to evaluate the counterfactual at","You claimed that the counterfactual is vacuously true","The attacker chose a world to disprove your vacuous truth claim","The attacker chose a sphere of accessibility","You chose to evaluate the antecedent at the sphere-delimiting world","You chose to evaluate the counterfactual at a world","The attacker claimed that the counterfactual is vacuously true","You chose a world to disprove the attackers vacuous truth claim",""];class Ld{static fill_transition_animation_timeline(t,e,f){switch(!0){case(e[0]==pt.Formula_Choice&&e[1]==pt.Formula):return t.add({targets:[f.get_or(),f.get_not_chosen_graphics(),f.get_option_boxes()[0],f.get_option_boxes()[1]],alpha:0,duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:f.get_chosen_graphic(),x:f.get_x(),duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),1500;case(e[0]==pt.Counterfactual_Choice&&e[1]==pt.Formula):return t.add({targets:[f.get_or(),f.get_not_chosen_graphics(),f.get_option_boxes()[0],f.get_option_boxes()[1]],alpha:0,duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:f.get_chosen_graphic(),x:f.get_x(),duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),1500;case(e[0]==pt.Negated_Counterfactual_Choice&&e[1]==pt.Formula):return t.add({targets:[f.get_or(),f.get_not_chosen_graphics(),f.get_option_boxes()[0],f.get_option_boxes()[1]],alpha:0,duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:f.get_chosen_graphic(),x:f.get_x(),duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),1500;case(e[0]==pt.Counterfactual_Choice&&e[1]==pt.World_Choice):return t.add({targets:[f.get_or(),f.get_not_chosen_graphics(),f.get_option_boxes()[0],f.get_option_boxes()[1]],alpha:0,duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:f.get_chosen_graphic(),x:f.get_x(),duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),1500;case(e[0]==pt.Negated_Counterfactual_Choice&&e[1]==pt.World_Choice):return t.add({targets:[f.get_or(),f.get_not_chosen_graphics(),f.get_option_boxes()[0],f.get_option_boxes()[1]],alpha:0,duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:f.get_chosen_graphic(),x:f.get_x(),duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),1500;case(e[0]==pt.World_Choice&&e[1]==pt.Formula):return 1500;default:return 1500}}static fill_popup_animation_timeline(t,e){return t.add({targets:e.get_option_boxes(),alpha:qr,duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:e.get_or(),alpha:1,duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:e.get_option_boxes()[0],displayWidth:e.get_option_graphic(0).get_width(),duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:e.get_option_boxes()[1],displayWidth:e.get_option_graphic(1).get_width(),duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:e.get_or(),scale:1,duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),1500}static fill_cf_popup_animation_timeline(t,e){return t.add({targets:e.get_option_boxes(),alpha:qr,duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:[e.get_option_graphic(0),e.get_or()],alpha:1,duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:e.get_option_boxes()[0],displayWidth:e.get_option_graphic(0).get_width(),duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:e.get_option_boxes()[1],displayWidth:e.get_option_graphic(1).get_width(),duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:e.get_or(),scale:1,duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),1500}}class Ay{static fill_animation_timeline(t,e,f){let i=f.get_formula(),n,h,r,a,l,o,u,v,d,c;switch(e){case Dt.Attacker_Victory:return 1500;case Dt.Defender_Victory:return n=f.add_temporary_formula("_|_"),n.setTexture("true"),n.setAlpha(1),n.setX(0),h=i.get_child("l"),i.setAlpha(0),h.setAlpha(0),1500;case Dt.Known_Fact:return n=f.add_temporary_formula("_|_"),n.setTexture("true"),n.setAlpha(0),n.setX(0),t.add({targets:i,alpha:0,duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:n,alpha:1,duration:1500,ease:"Quart.In",yoyo:!1,repeat:0,offset:0}),1500;case Dt.Unknown_Fact:return h=f.add_temporary_formula("_|_"),h.setAlpha(0),h.setX(0),t.add({targets:i,alpha:0,duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:h,alpha:1,duration:1500,ease:"Quart.In",yoyo:!1,repeat:0,offset:0}),1500;case Dt.Negated_Known_Fact:return h=f.add_temporary_formula("_|_"),h.setAlpha(0),h.setX(0),r=i.get_child("l"),t.add({targets:[i,r],alpha:0,duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:i,x:0,duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:r,x:0,duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:h,alpha:1,duration:1500,ease:"Quart.In",yoyo:!1,repeat:0,offset:0}),1500;case Dt.Negated_Unknown_Fact:return n=f.add_temporary_formula("_|_"),n.setTexture("true"),n.setAlpha(0),n.setX(0),h=f.add_temporary_formula("_|_"),h.setAlpha(0),h.setX(Tt/2),r=i.get_child("l"),t.add({targets:r,alpha:0,duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:h,alpha:1,duration:1500,ease:"Quart.In",yoyo:!1,repeat:0,offset:0}),t.add({targets:[i,h],alpha:0,duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:1500}),t.add({targets:i,x:0,duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:1500}),t.add({targets:h,x:0,duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:1500}),t.add({targets:n,alpha:1,duration:1500,ease:"Quart.In",yoyo:!1,repeat:0,offset:1500}),3e3;case Dt.Double_Negation:return a=i.get_child("l"),t.add({targets:i,x:i.x+Tt/2,duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:a,x:a.x-Tt/2,duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:[i,a],alpha:0,duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:a.get_children(),x:"-="+Tt.toString(),duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:1500}),t.add({targets:a.get_child("l").get_embedding(!0),x:"-="+Tt.toString(),duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:1500}),3e3;case Dt.Left_OR:return 1500;case Dt.Right_OR:return 1500;case Dt.Negated_Left_OR:return l=i.get_child("l"),u=i.get_child("ll"),v=i.get_child("lr"),t.add({targets:v.get_children([l,v]),alpha:0,duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:l.get_embedding().concat(v.get_embedding(!0)),alpha:0,duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:i,x:"+="+((l.get_width()-u.get_width())/2).toString(),duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:1500}),t.add({targets:u.get_children([u]),x:"+="+((l.get_width()-u.get_width())/2-le).toString(),duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:1500}),t.add({targets:u.get_embedding(!0),x:"+="+((l.get_width()-u.get_width())/2-le).toString(),duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:1500}),3e3;case Dt.Negated_Right_OR:return l=i.get_child("l"),u=i.get_child("ll"),v=i.get_child("lr"),t.add({targets:u.get_children([l,u]),alpha:0,duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:l.get_embedding().concat(u.get_embedding(!0)),alpha:0,duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:i,x:"+="+((i.get_width()-Tt)/2-v.get_width()/2).toString(),duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:1500}),t.add({targets:v.get_children([v]),x:"+="+((-i.get_width()+v.get_width())/2+le+Tt/2).toString(),duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:1500}),t.add({targets:v.get_embedding(!0),x:"+="+((-i.get_width()+v.get_width())/2+le+Tt/2).toString(),duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:1500}),3e3;case Dt.Attacker_Phi_Evaluation:return d=i.get_child("l"),c=i.get_child("r"),t.add({targets:c.get_children([i,c]),alpha:0,duration:3e3,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:c.get_embedding(!0).concat(i.get_embedding()),alpha:0,duration:3e3,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:d.get_children([d]),x:"+="+((i.get_width()-d.get_width())/2-le).toString(),duration:3e3,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:d.get_embedding(!0),x:"+="+((i.get_width()-d.get_width())/2-le).toString(),duration:3e3,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),3e3;case Dt.Attacker_World_Choice:return d=i.get_child("l"),c=i.get_child("r"),a=f.add_temporary_formula("~(A v B)"),a.setX(-(Tt+d.get_width()+c.get_width())/2+le),a.setAlpha(0),l=a.get_child("l"),l.setX((Tt+d.get_width()-c.get_width())/2+le),l.setAlpha(0),l.get_embedding()[0].setAlpha(0),l.get_embedding()[1].setAlpha(0),l.get_embedding()[2].setAlpha(0),l.get_child("l").setAlpha(0),l.get_child("r").setAlpha(0),t.add({targets:i,alpha:0,duration:3e3,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:i.get_embedding(),alpha:0,duration:3e3,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:[a,l],alpha:1,duration:3e3,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:d.get_children([d]),x:"+="+((c.get_width()+Tt)/2+-c.get_width()/2+le).toString(),duration:3e3,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:d.get_embedding(!0),x:"+="+((c.get_width()+Tt)/2+-c.get_width()/2+le).toString(),duration:3e3,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:c.get_children([c]),x:"+="+((-d.get_width()-Tt)/2+(Tt*2+d.get_width())/2+le).toString(),duration:3e3,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:c.get_embedding(!0),x:"+="+((-d.get_width()-Tt)/2+(Tt*2+d.get_width())/2+le).toString(),duration:3e3,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),3e3;case Dt.Attacker_Vacuous_World_Choice:return a=f.add_temporary_formula("~A"),a.setX(-i.get_width()/2),a.setAlpha(0),r=a.get_child("l").setAlpha(0),t.add({targets:i.get_children([i]),x:"+="+(Tt/2).toString(),duration:3e3,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:i.get_embedding(!0),x:"+="+(Tt/2).toString(),duration:3e3,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:a,alpha:1,duration:3e3,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),3e3;case Dt.Attacker_Sphere_Selection:return 3e3;case Dt.Attacker_Vacuous_Truth_Claim:return o=i.get_child("l"),d=i.get_child("ll"),c=i.get_child("lr"),t.add({targets:[i,o].concat(c.get_children([c])),alpha:0,duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:c.get_embedding(!0).concat(o.get_embedding()),alpha:0,duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:d.get_children([d]),x:"+="+(c.get_width()/2).toString(),duration:3e3,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:d.get_embedding(!0),x:"+="+(c.get_width()/2).toString(),duration:3e3,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),3e3;case Dt.Defender_Vacuous_World_Choice:return 3e3;default:return 3e3}}static fill_transition_animation_timeline(t,e,f){let i=f.get_formula(),n,h,r,a,l;switch(!0){case(e[0]==pt.Formula&&e[1]==pt.Formula_Choice):return t.add({targets:i,alpha:0,duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:i.get_embedding(),alpha:0,duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:i.get_children([i]),x:"+="+(-i.x).toString(),duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:i.get_embedding(!0),x:"+="+(-i.x).toString(),duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),1500;case(e[0]==pt.Formula&&e[1]==pt.Counterfactual_Choice):return t.add({targets:i.get_children([i]),x:"+="+(i.get_width()/2+Tt/2).toString(),duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:i.get_embedding(!0),x:"+="+(i.get_width()/2+Tt/2).toString(),duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),1500;case(e[0]==pt.Formula&&e[1]==pt.Negated_Counterfactual_Choice):r=i.get_child("l"),a=i.get_child("ll"),l=i.get_child("lr"),n=f.add_temporary_formula("~(A v B)"),n.setX(+Tt*2+le),n.setAlpha(0),h=n.get_child("l"),h.setX(+Tt*3+a.get_width()+le),h.setAlpha(0);let o=h.get_embedding();return o[0].setX(+Tt*3+a.get_width()+le-a.get_width()-Tt-le),o[1].setX(+r.get_width()/2+Tt*2),o[2].setX(+Tt*3+a.get_width()+le+l.get_width()+le),o[1].setScale((r.get_width()-Tt)/Tt,1),o[0].setAlpha(0),o[1].setAlpha(0),o[2].setAlpha(0),f.sendToBack(o[0]),f.sendToBack(o[1]),f.sendToBack(o[2]),h.get_child("l").setAlpha(0),h.get_child("r").setAlpha(0),t.add({targets:r,alpha:0,duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:i,x:"+="+((i.get_width()-Tt)/2+Tt).toString(),duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:r.get_children(),x:"+="+(-Tt/2+r.get_width()/2+Tt*2.5).toString(),duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:r.get_embedding(!0),x:"+="+(-Tt/2+r.get_width()/2+Tt*2.5).toString(),duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:r.get_embedding(),alpha:0,duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:[n,h],alpha:1,duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:1500}),t.add({targets:h.get_embedding(),alpha:1,duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:1500}),3e3;default:return 1500}}}const Tt=60,le=10,ja=8;class io extends Phaser.GameObjects.Container{constructor(t,e,f,i,n,h=0){super(t,e,f),this.embedding_depth=0,this.atoms=ye.exports.cloneDeep(n),this.embedding_depth=h,this.formula=Ue.parse(t,i,0,0,this.atoms),this.formula.add_to_container(this)}static load_sprites(t){t.load.image("false","assets/False.png"),t.load.image("true","assets/True.png"),t.load.image("atom","assets/Atom.png"),t.load.image("glow","assets/Glow.png"),t.load.image("negation","assets/Negation.png"),t.load.image("disjunction","assets/Disjunction.png"),t.load.image("cf_would","assets/Cf_Would.png"),t.load.image("fill_open","assets/Fill_Open.png"),t.load.image("fill_connect","assets/Fill_Connect.png"),t.load.image("fill_closed","assets/Fill_Closed.png")}static configure_sprites(t){let e=[16763714,4359515,5452931,12931840,10663355,16748465,4699647,5647112,8671549];for(let f=0;f<ja;f++)Rs(t,"fill_open","fill_open_"+f.toString()),Rs(t,"fill_connect","fill_connect_"+f.toString()),Rs(t,"fill_closed","fill_closed_"+f.toString()),Rd(t,"fill_open_"+f.toString(),f*(360/ja)),Rd(t,"fill_connect_"+f.toString(),f*(360/ja)),Rd(t,"fill_closed_"+f.toString(),f*(360/ja)),Rs(t,"atom","atom_"+f.toString()),eo(t,"atom_"+f.toString(),e[f])}animate_transition(t){let e=this.scene.tweens.createTimeline(),f=Ay.fill_transition_animation_timeline(e,t,this);return e.play(),f}animate(t,e){return this.next_formula=t,(e==Dt.Defender_Victory||e==Dt.Attacker_Victory)&&(this.next_formula=void 0),[Dt.Negated_Left_OR,Dt.Negated_Right_OR,Dt.Attacker_Vacuous_Truth_Claim].includes(e)&&this.embedding_depth++,this.start_animation(e)}end_animation(){this.next_formula!=null&&(this.removeAll(!0),this.formula=Ue.parse(this.scene,this.next_formula,0,0,this.atoms,this.embedding_depth),this.formula.add_to_container(this))}add_temporary_formula(t){let e=Ue.parse(this.scene,xe.parse(t),0,0,this.atoms,this.embedding_depth);return e.add_to_container(this),e}set_atoms(t){this.atoms=t}set_formula(t){this.removeAll(!0),this.next_formula=void 0,this.formula=Ue.parse(this.scene,t,0,0,this.atoms,this.embedding_depth),this.formula.add_to_container(this)}set_embedding_depth(t){this.embedding_depth=t}start_animation(t){let e=this.scene.tweens.createTimeline(),f=Ay.fill_animation_timeline(e,t,this);return e.play(),f}get_formula(){return this.formula}get_embedding_depth(){return this.embedding_depth}get_width(){return this.formula.get_width()}}class Ue extends Phaser.GameObjects.Sprite{static parse(t,e,f,i,n=[],h=0){switch(!0){case e instanceof rs:let r=Ue.parse(t,e.get_child("l"),f,i,n,h+1),a=Ue.parse(t,e.get_child("r"),f,i,n,h+1);return r.offset(-Tt/2-a.get_width()/2),a.offset(+Tt/2+r.get_width()/2),new l8(t,f+(r.get_width()-a.get_width())/2,i,r,a,h);case e instanceof as:let l=Ue.parse(t,e.get_child("l"),f,i,n,h+1),o=Ue.parse(t,e.get_child("r"),f,i,n,h+1);return l.offset(-Tt/2-o.get_width()/2),o.offset(+Tt/2+l.get_width()/2),new u8(t,f+(l.get_width()-o.get_width())/2,i,l,o,h);case e instanceof vn:let u=Ue.parse(t,e.get_child("l"),f+Tt/2,i,n,h);return new f8(t,f-u.get_width()/2,i,u);case e instanceof vo:return new d8(t,f,i,e.value,n);case e instanceof su:return new c8(t,f,i);default:throw new Error("Cannot parse invalid formula")}}static get_embedding_sprite_key(t){return"_"+(t%ja).toString()}}class l8 extends Ue{constructor(t,e,f,i,n,h){super(t,e,f,"cf_would"),this.brackets=[],this.antecedent=i,this.consequent=n;let r=this.antecedent.get_width(),a=this.consequent.get_width();if(h>=0){let l=Ue.get_embedding_sprite_key(h);this.brackets.push(new Phaser.GameObjects.Sprite(this.scene,this.x-r-le,this.y,"fill_open"+l).setDisplaySize(Tt,Tt)),this.brackets.push(new Phaser.GameObjects.Sprite(this.scene,this.x+(-r+a)/2,this.y,"fill_connect"+l).setDisplaySize(-Tt+r+a+le*2,Tt)),this.brackets.push(new Phaser.GameObjects.Sprite(this.scene,this.x+a+le,this.y,"fill_closed"+l).setDisplaySize(Tt,Tt))}this.setDisplaySize(Tt,Tt)}get_child(t){if(t.length==0)return this;switch(t[0]){case"l":return this.antecedent.get_child(t.slice(1,t.length));case"r":return this.consequent.get_child(t.slice(1,t.length));default:throw new Error("path string may only contain the letters 'l' and 'r'")}}offset(t){this.setX(this.x+t),this.antecedent.offset(t),this.consequent.offset(t);for(let e=0;e<this.brackets.length;e++)this.brackets[e].setX(this.brackets[e].x+t)}scale_recursive(t){this.setScale(this.scaleX*t,this.scaleY*t);for(let e=0;e<this.brackets.length;e++)this.brackets[e].setScale(this.brackets[e].texture.key=="bracket_compact"?this.brackets[e].scaleX*t:this.brackets[e].scaleX,this.brackets[e].scaleY*t);this.antecedent.scale_recursive(t),this.consequent.scale_recursive(t)}set_depth(t){this.setDepth(t),this.antecedent.set_depth(t),this.consequent.set_depth(t)}get_width(){return Tt+this.antecedent.get_width()+this.consequent.get_width()+2*le}get_children(t=[]){return t.concat([this.antecedent,this.consequent]).concat(this.antecedent.get_children()).concat(this.consequent.get_children())}get_embedding(t){return t?this.brackets.concat(this.antecedent.get_embedding(!0)).concat(this.consequent.get_embedding(!0)):this.brackets}add_to_container(t){for(let e=0;e<this.brackets.length;e++)t.add(this.brackets[e]);t.add(this),this.antecedent.add_to_container(t),this.consequent.add_to_container(t)}}class u8 extends Ue{constructor(t,e,f,i,n,h){super(t,e,f,"disjunction"),this.brackets=[],this.subject1=i,this.subject2=n;let r=this.subject1.get_width(),a=this.subject2.get_width();if(h>=0){let l=Ue.get_embedding_sprite_key(h);this.brackets.push(new Phaser.GameObjects.Sprite(this.scene,this.x-r-le,this.y,"fill_open"+l).setDisplaySize(Tt,Tt)),this.brackets.push(new Phaser.GameObjects.Sprite(this.scene,this.x+(-r+a)/2,this.y,"fill_connect"+l).setDisplaySize(-Tt+r+a+le*2,Tt)),this.brackets.push(new Phaser.GameObjects.Sprite(this.scene,this.x+a+le,this.y,"fill_closed"+l).setDisplaySize(Tt,Tt))}this.setDisplaySize(Tt,Tt)}get_child(t){if(t.length==0)return this;switch(t[0]){case"l":return this.subject1.get_child(t.slice(1,t.length));case"r":return this.subject2.get_child(t.slice(1,t.length));default:throw new Error("path string may only contain the letters 'l' and 'r'")}}offset(t){this.setX(this.x+t),this.subject1.offset(t),this.subject2.offset(t);for(let e=0;e<this.brackets.length;e++)this.brackets[e].setX(this.brackets[e].x+t)}scale_recursive(t){this.setScale(this.scaleX*t,this.scaleY*t);for(let e=0;e<this.brackets.length;e++)this.brackets[e].setScale(this.brackets[e].texture.key=="bracket_compact"?this.brackets[e].scaleX*t:this.brackets[e].scaleX,this.brackets[e].scaleY*t);this.subject1.scale_recursive(t),this.subject2.scale_recursive(t)}set_depth(t){this.setDepth(t),this.subject1.set_depth(t),this.subject2.set_depth(t)}get_width(){return Tt+this.subject1.get_width()+this.subject2.get_width()+2*le}get_children(t=[]){return t.concat([this.subject1,this.subject2]).concat(this.subject1.get_children()).concat(this.subject2.get_children())}get_embedding(t){return t?this.brackets.concat(this.subject1.get_embedding(!0)).concat(this.subject2.get_embedding(!0)):this.brackets}add_to_container(t){for(let e=0;e<this.brackets.length;e++)t.add(this.brackets[e]);t.add(this),this.subject1.add_to_container(t),this.subject2.add_to_container(t)}}class f8 extends Ue{constructor(t,e,f,i){super(t,e,f,"negation"),this.subject=i,this.setDisplaySize(Tt,Tt)}get_child(t){if(t.length==0)return this;switch(t[0]){case"l":return this.subject.get_child(t.slice(1,t.length));default:throw new Error("Negation only has left child")}}offset(t){this.setX(this.x+t),this.subject.offset(t)}scale_recursive(t){this.setScale(this.scaleX*t,this.scaleY*t),this.subject.scale_recursive(t)}set_depth(t){this.setDepth(t),this.subject.set_depth(t)}get_width(){return Tt+this.subject.get_width()}get_children(t=[]){return t.concat([this.subject]).concat(this.subject.get_children())}get_embedding(t){return t?this.subject.get_embedding(!0):[]}add_to_container(t){t.add(this),this.subject.add_to_container(t)}}class d8 extends Ue{constructor(t,e,f,i,n){let h=n.findIndex(r=>r==i);super(t,e,f,h!=-1?"atom_"+h:"atom"),this.value=i,this.setDisplaySize(Tt,Tt)}get_child(t){if(t.length==0)return this;throw new Error("Cannot traverse any further")}offset(t){this.setX(this.x+t)}scale_recursive(t){this.setScale(this.scaleX*t,this.scaleY*t)}set_depth(t){this.setDepth(t)}get_width(){return Tt}get_children(t=[]){return t}get_embedding(){return[]}add_to_container(t){t.add(this)}}class c8 extends Ue{constructor(t,e,f){super(t,e,f,"false"),this.setDisplaySize(Tt,Tt)}get_child(t){if(t.length==0)return this;throw new Error("Cannot traverse any further")}offset(t){this.setX(this.x+t)}scale_recursive(t){this.setScale(this.scaleX*t,this.scaleY*t)}set_depth(t){this.setDepth(t)}get_width(){return Tt}get_children(t=[]){return t}get_embedding(){return[]}add_to_container(t){t.add(this)}}const Ji=60,Oy=130/255,qr=30/255;class v8{constructor(t,e,f,i,n=0){this.choice_made=!1,this.cf_choice=!1,this.scene=t,this.x=t.get_width()/2,this.y=t.get_height()-105;let h=this.x,r=this.y,a=xe.parse("_|_"),l=xe.parse("~_|_"),o=[];e!=null&&f!=null&&i!=null&&(a=f.apply(e).get_formula(),l=i.apply(e).get_formula(),o=e.get_atoms(),this.state=e,this.rule1=f,this.rule2=i),this.or=new Phaser.GameObjects.Text(t,h,r,"OR",Iv),this.option1=new io(t,h,r,a,o,n).setDepth(1),this.option2=new io(t,h,r,l,o,n).setDepth(1),this.option1.setX(this.option1.x-25-this.option1.get_width()/2),this.option2.setX(this.option2.x+25+this.option2.get_width()/2),this.option1_box=new Phaser.GameObjects.Rectangle(t,h-25-this.option1.get_width()/2,r,250,100,16777215),this.option2_box=new Phaser.GameObjects.Rectangle(t,h+25+this.option2.get_width()/2,r,250,100,16777215),this.option1_box.setAlpha(qr),this.option2_box.setAlpha(qr),this.option1_box.setInteractive(),this.option1_box.on("pointerup",()=>{this.choice_made=!0,this.choice=0,this.option1_box.disableInteractive(),this.option2_box.disableInteractive()}),this.option1_box.on("pointerover",()=>{this.option1_box.setAlpha(Oy)}),this.option1_box.on("pointerout",()=>{this.option1_box.setAlpha(qr)}),this.option2_box.setInteractive(),this.option2_box.on("pointerup",()=>{this.choice_made=!0,this.choice=1,this.option1_box.disableInteractive(),this.option2_box.disableInteractive()}),this.option2_box.on("pointerover",()=>{this.option2_box.setAlpha(Oy)}),this.option2_box.on("pointerout",()=>{this.option2_box.setAlpha(qr)})}add_to_scene(){this.scene.children.add(this.or),this.or.setOrigin(.5,.5),this.scene.children.add(this.option1),this.scene.children.add(this.option2),this.scene.children.add(this.option1_box),this.scene.children.add(this.option2_box)}set(t,e,f,i=0){this.cf_choice=!1,this.choice_made=!1,this.set_visible(!0),this.state=t,this.rule1=e,this.rule2=f;let n=t.get_atoms();this.option1.set_atoms(n),this.option2.set_atoms(n),this.option1.set_embedding_depth(i+1),this.option2.set_embedding_depth(i+1),this.option1.set_formula(e.apply(this.state).get_formula()),this.option2.set_formula(f.apply(this.state).get_formula());let h=this.option1.get_width(),r=this.option2.get_width();this.option1.setX(this.x-Ji/2-h/2),this.option2.setX(this.x+Ji/2+r/2),this.option1_box.setX(this.x-Ji/2-h/2),this.option2_box.setX(this.x+Ji/2+r/2),this.option1_box.displayWidth=1,this.option2_box.displayWidth=1,this.or.setScale(.1,.1),this.or.setAlpha(0),this.option1.setAlpha(1),this.option2.setAlpha(1),this.option1_box.setAlpha(0),this.option2_box.setAlpha(0);let a=this.scene.tweens.createTimeline();Ld.fill_popup_animation_timeline(a,this),a.play(),this.option1_box.setInteractive(),this.option2_box.setInteractive()}set_cf(t,e,f,i=0,n){this.cf_choice=!0,this.choice_made=!1,this.set_visible(!0),this.state=t,this.rule1=e,this.rule2=f;let h=t.get_atoms();this.option1.set_atoms(h),this.option2.set_atoms(h),this.option1.set_embedding_depth(i+1),this.option2.set_embedding_depth(i),this.option1.set_formula(e.apply(this.state).get_formula()),this.option2.set_formula(f.apply(this.state,n).get_formula());let r=this.option1.get_width(),a=this.option2.get_width();this.option1.setX(this.x-Ji/2-r/2),this.option2.setX(this.x+Ji/2+a/2),this.option1_box.setX(this.x-Ji/2-r/2),this.option2_box.setX(this.x+Ji/2+a/2),this.option1_box.displayWidth=1,this.option2_box.displayWidth=1,this.or.setScale(.1,.1),this.or.setAlpha(0),this.option1.setAlpha(0),this.option2.setAlpha(1),this.option1_box.setAlpha(0),this.option2_box.setAlpha(0);let l=this.scene.tweens.createTimeline();Ld.fill_cf_popup_animation_timeline(l,this),l.play(),this.option1_box.setInteractive(),this.option2_box.setInteractive()}animate_transition(t){let e=this.scene.tweens.createTimeline(),f=Ld.fill_transition_animation_timeline(e,t,this);return e.play(),f}resize(){let t=this.scene.get_width(),e=this.scene.get_height(),f=this.option1.get_width(),i=this.option2.get_width();this.or.setX(t/2),this.option1.setX(t/2-Ji/2-f/2),this.option1_box.setX(t/2-Ji/2-f/2),this.option2.setX(t/2+Ji/2+i/2),this.option2_box.setX(t/2+Ji/2+i/2),this.or.setY(e-100),this.option1.setY(e-100),this.option1_box.setY(e-100),this.option2.setY(e-100),this.option2_box.setY(e-100)}set_visible(t){this.option1.setVisible(t),this.option2.setVisible(t),this.option1_box.setVisible(t),this.option2_box.setVisible(t),this.or.setVisible(t)}destroy(){this.option1.destroy(!0),this.option2.destroy(!0),this.option1_box.destroy(!0),this.option2_box.destroy(!0),this.or.destroy()}get_x(){return this.x}get_y(){return this.y}get_or(){return this.or}get_option_boxes(){return[this.option1_box,this.option2_box]}get_option_graphic(t){return t==0?this.option1:this.option2}get_choice(){if(!this.is_choice_made)throw new Error("Cannot get Choice, when nothing has been chosen");return this.choice==0?this.rule1:this.rule2}get_chosen_graphic(){if(!this.is_choice_made)throw new Error("Cannot get Choice, when nothing has been chosen");return this.choice==0?this.option1:this.option2}get_not_chosen_graphics(){if(!this.is_choice_made)throw new Error("Cannot get what hasnt been chosen, when nothing has been chosen");return this.choice==0?this.option2:this.option1}is_choice_made(){return this.choice_made}is_cf_choice(){return this.cf_choice}}const po=60,jh=20,no=10207200,sl=11326714,Ry=14723961,Ly=16498823,p8=10263520,g8=11447546;class Fd extends Phaser.GameObjects.Container{constructor(t,e,f,i,n,h,r){super(t,e,f),this.worlds=[],this.delim_world=-1,this.mode=ns.Display,this.chosen_world=-1,this.choice_made=!1,this.game_state=i,this.graph=this.game_state.get_graph(),this.current_world=n;let a=this.graph.get_V();if(h.length!=a)throw new Error("Passed too many or too few positions!");for(let u=0;u<a;u++){let v=new m8(t,h[u][0],h[u][1],u,this);this.worlds.push(v),this.add(v),this.add(new Phaser.GameObjects.Sprite(t,h[u][0],h[u][1],"world").setAlpha(.8))}let l=h;for(let u=0;u<r.length;u++){let v=r[u][0],d=r[u][1],c=r[u][2];if(v==d)continue;new x8(t,new Phaser.Math.Vector2(l[v][0],l[v][1]),new Phaser.Math.Vector2(l[d][0],l[d][1]),c).add_to_container(this)}this.rocket=new Phaser.GameObjects.Sprite(t,l[this.current_world][0],l[this.current_world][1],"rocket").setDisplaySize(po+30,po+30),this.add(this.rocket),this.worlds[n].set_color(Ry,Ly);let o=this.graph.get_worlds();for(let u=0;u<o.length;u++){let d=o[u].get_atoms().filter(m=>i.get_atoms().includes(m)),c=h[u][0],p=h[u][1],g=40;for(let m=0;m<d.length;m++){let y=m/d.length*2*Math.PI;this.add(new Phaser.GameObjects.Sprite(t,c+Math.cos(y)*g,p+Math.sin(y)*g,"glow").setDisplaySize(jh,jh)),this.add(new Phaser.GameObjects.Sprite(t,c+Math.cos(y)*g,p+Math.sin(y)*g,"atom_"+i.get_atoms().findIndex(T=>T==d[m])).setDisplaySize(jh,jh))}}}set_mode(t){switch(t){case ns.Display:break;case ns.World_Choice:this.choice_made=!1,this.chosen_world=-1;break}this.mode=t}resize(){let t=this.scene.get_width(),e=this.scene.get_height();this.setX(t/2),this.setY((e-200)/2)}world_clicked(t){switch(this.mode){case ns.Display:break;case ns.World_Choice:let e=this.game_state.get_graph().get_world(this.current_world).get_edges().find(n=>n[0].get_index()==t),f=this.game_state.get_graph().get_world(this.current_world).get_edges().find(n=>n[0].get_index()==this.delim_world),i=f!=null?f[1]:1/0;if(e==null||e[1]>i)return;this.chosen_world=t,this.choice_made=!0,console.log("Chose world: "+t);break}}set_current_world(t){this.current_world!=-1&&this.worlds[this.current_world].set_color(no,sl),this.current_world=t,this.worlds[t].set_color(Ry,Ly),this.rocket.setPosition(this.worlds[this.current_world].x,this.worlds[this.current_world].y)}set_delim_world(t){this.delim_world!=-1&&this.worlds[this.delim_world].set_color(no,sl),this.delim_world=t,this.worlds[t].set_color(p8,g8)}clear_delim_world(){this.delim_world!=-1&&this.worlds[this.delim_world].set_color(no,sl),this.delim_world=-1}get_delim_world(){return this.delim_world}get_current_world(){return this.current_world}get_chosen_world(){if(!this.choice_made)throw new Error("No world choice has yet been made");return this.chosen_world}is_choice_made(){return this.choice_made}static load_sprites(t){t.load.image("arrowhead_10","assets/arrows/Arrowhead_10.png"),t.load.image("arrowbody_10","assets/arrows/Arrowbody_10.png"),t.load.image("arrowtail_10","assets/arrows/Arrowtail_10.png"),t.load.image("marker","assets/arrows/Ruler_Marker_3.png"),t.load.image("bat1c","assets/Battery_1C.png"),t.load.image("bat2c","assets/Battery_2C.png"),t.load.image("bat3c","assets/Battery_3C.png"),t.load.image("arrowwave","assets/Arrowwave.png"),t.load.image("rocket","assets/Rocket_Icon_Wide_Glow.png"),t.load.image("world_shadow","assets/Earth_Small.png")}static configure_sprites(t){Rs(t,"world_shadow","world"),r8(t,"world",791332)}}class m8 extends Phaser.GameObjects.Ellipse{constructor(t,e,f,i,n){super(t,e,f,po,po,no),this.base_color=no,this.highlight_color=sl,this.setup_listeners(),this.index=i,this.graph_graphics=n}set_color(t,e){this.fillColor=t,this.base_color=t,this.highlight_color=e}setup_listeners(){this.setInteractive(),this.on("pointerup",()=>{this.graph_graphics.world_clicked(this.index)}),this.on("pointerover",()=>{this.fillColor=this.highlight_color}),this.on("pointerout",()=>{this.fillColor=this.base_color})}}class x8{constructor(t,e,f,i){this.stars=[],this.markers=[];let n=new Phaser.Math.Vector2(f.x-e.x,f.y-e.y),h=e.lerp(f,.5),r=n.length()-po,a=r-50,l=n.setLength(r/2-12.5);this.arrowhead=new Phaser.GameObjects.Sprite(t,h.x+l.x,h.y+l.y,"arrowhead_10"),this.arrowbody=new Phaser.GameObjects.Sprite(t,h.x,h.y,"arrowbody_10"),this.arrowtail=new Phaser.GameObjects.Sprite(t,h.x-l.x,h.y-l.y,"arrowtail_10"),this.arrowhead.setRotation(n.angle()),this.arrowbody.setScale(a/this.arrowbody.width,1),this.arrowbody.setRotation(n.angle()),this.arrowtail.setRotation(n.angle());let o=.55;this.arrowhead.setAlpha(o),this.arrowbody.setAlpha(o),this.arrowtail.setAlpha(o);let u=10,v=11,d=n.angle()>Math.PI/2&&n.angle()<=Math.PI*3/2?new Phaser.Math.Vector2(-n.y,n.x):new Phaser.Math.Vector2(n.y,-n.x),c=d.angle(),p=Math.atan(v/u),g=Math.PI/2-p,m;switch(!0){case(c>=0&&c<p):m=u;break;case(c>=p&&c<Math.PI/2):m=v,c=c-p;break;case(c>=Math.PI/2&&c<Math.PI/2+g):m=v,c=Math.PI/2+g-c;break;case(c>=Math.PI/2+g&&c<Math.PI):m=u,c=c-(Math.PI/2+g);break;case(c>=Math.PI&&c<Math.PI+p):m=u,c=Math.PI+p-c;break;case(c>=Math.PI+p&&c<Math.PI*3/2):m=v,c=c-(Math.PI+p);break;case(c>=Math.PI*3/2&&c<Math.PI*3/2+g):m=v,c=Math.PI*3/2+g-c;break;case(c>=Math.PI*3/2+g&&c<Math.PI*2):m=u,c=c-(Math.PI*3/2+g);break}let x=m/Math.cos(c);d.setLength(x);let y=h.clone().add(d);this.label=new Phaser.GameObjects.Text(t,y.x,y.y-2.5,i.toString(),Iv),this.label.setOrigin(.5,.5);let T=h.clone().subtract(n.clone().setLength(r/2-12.5)),C=n.clone().setLength(a/i),S=Math.ceil(i/3);T=h.clone().add(d).subtract(n.clone().setLength((S-1)/2*20)),C=new Phaser.Math.Vector2(1,0).setLength(20);for(let E=0;E<S;E++){switch(!0){case i-E*3>=3:this.markers.push(new Phaser.GameObjects.Sprite(t,T.x,T.y,"bat3c"));break;case i-E*3==2:this.markers.push(new Phaser.GameObjects.Sprite(t,T.x,T.y,"bat2c"));break;case i-E*3==1:this.markers.push(new Phaser.GameObjects.Sprite(t,T.x,T.y,"bat1c"));break}T.add(C)}}add_to_container(t){t.add(this.arrowhead),t.add(this.arrowbody),t.add(this.arrowtail);for(let e=0;e<this.stars.length;e++)this.stars[e].add_to_container(t);for(let e=0;e<this.markers.length;e++)t.add(this.markers[e])}}const Fy=["red_glow","blue_glow","yellow_glow"];class wd{constructor(t,e,f,i=1){this.inc=0,this.scene=t,this.x=e,this.y=f,this.size=i,this.core=new Phaser.GameObjects.Sprite(t,e,f,"star").setDisplaySize(7.5,7.5).setAlpha(.5),this.glow=new Phaser.GameObjects.Sprite(t,e,f,Fy[Math.floor(Math.random()*Fy.length)]).setDisplaySize(8.5,8.5).setAlpha(.25),this.noise=new TS(Math.random());let n=t.tweens.createTimeline({loop:-1});this.fill_flicker_timeline(n),n.play()}add_to_container(t){t.add(this.glow),t.add(this.core)}fill_flicker_timeline(t){let e=Math.ceil(Math.random()*4)+1,f=Math.random()*500;for(let i=0;i<e;i++){let n=(.2+.15*Math.random())*this.size,h=400+Math.random()*100;t.add({targets:[this.core,this.glow],scale:n,duration:h,ease:"Back.easeInOut",yoyo:!1,repeat:0,offset:f}),f+=h}t.add({targets:[this.core,this.glow],scale:.25*this.size,duration:400+Math.random()*100,ease:"Back.easeInOut",yoyo:!1,repeat:0,offset:f})}static load_sprites(t){t.load.image("star","assets/Star.png")}static configure_sprites(t){Rs(t,"star","red_glow"),eo(t,"red_glow",16742263),Rs(t,"star","blue_glow"),eo(t,"blue_glow",2587584),Rs(t,"star","yellow_glow"),eo(t,"yellow_glow",16774847)}}class Id{constructor(t,e,f){this.mode=pt.Formula,this.next_mode=pt.Formula,this.next_animate=!1,this.ready=!1,this.idle_since=Date.now(),this.idle_time=2e3,this.scene=t;let i=t.get_width(),n=t.get_height();this.background=new Phaser.GameObjects.Sprite(t,i/2,n/2,"space").setDisplaySize(i,n).setDepth(-1),this.stars=this.create_stars(t,i,n),this.sup_panel=new nc(t,i/2,n-110),this.graph_graphics=new Fd(t,i/2,(n-200)/2,e,e.get_current_world().index,f,e.get_graph().get_edge_list()),this.formula=new io(t,i/2,n-105,e.get_formula(),e.get_atoms()),this.choice=new v8(t,e),this.caption=new Phaser.GameObjects.Text(t,i/2,n-175,"",Iv),this.caption.setOrigin(.5,.5),this.caption.setVisible(!1),t.add.existing(this.background),t.add.existing(this.stars),t.children.add(this.sup_panel),t.children.add(this.graph_graphics),t.children.add(this.formula),this.choice.add_to_scene(),t.children.add(this.caption),this.set_mode(pt.Formula),this.choice.set_visible(!1)}update(t){switch(this.mode){case pt.Formula:t>=this.idle_since+this.idle_time&&(this.formula.end_animation(),this.ready=!0,this.idle_time=0);break;case pt.Formula_Choice:case pt.Counterfactual_Choice:case pt.Negated_Counterfactual_Choice:this.choice.is_choice_made()&&(this.caption.text=My[this.choice.get_choice().get_name()],this.ready=!0);break;case pt.World_Choice:this.graph_graphics.is_choice_made()&&(this.ready=!0);break;case pt.Transition:if(t>=this.idle_since+this.idle_time&&this.next_mode!=null)switch(console.log("> ending transition to "+pt[this.next_mode]),this.set_mode(this.next_mode),this.next_mode){case pt.Formula:this.next_animate?this.animate_move(this.next_state,this.next_move):this.set_formula(this.next_state,this.next_formula);break;case pt.Formula_Choice:case pt.Counterfactual_Choice:case pt.Negated_Counterfactual_Choice:this.set_choice(this.next_state,this.next_option1,this.next_option2);break;case pt.World_Choice:this.set_world_choice();break}break}this.sup_panel.update()}set_world_choice(){this.mode!=pt.World_Choice&&(console.log("> transitioning to World_Choice"),this.transition_mode(pt.World_Choice),this.mode==pt.Transition)||(this.caption.text="Choose a reachable world:",this.ready=!1)}set_choice(t,e,f){let i=t.get_formula()instanceof rs,n=t.get_formula().get_child("l")instanceof rs,h=i?pt.Counterfactual_Choice:pt.Formula_Choice;if(h=n?pt.Negated_Counterfactual_Choice:h,!(this.mode!=h&&(console.log("> transitioning to "+pt[h]),this.transition_mode(h),this.next_option1=e,this.next_option2=f,this.next_state=t,this.mode==pt.Transition))){switch(h){case pt.Formula_Choice:this.caption.text="Choose a formula:",this.choice.set(t,e,f,this.formula.get_embedding_depth());break;case pt.Counterfactual_Choice:this.caption.text="Claim vacuous truth (left) or choose a sphere of accessibility (right)",this.choice.set_cf(t,f,e,this.formula.get_embedding_depth(),t.get_current_world().get_edges()[0][0].index);break;case pt.Negated_Counterfactual_Choice:this.caption.text="Evaluate the sphere delimiting world (left) or choose a reachable world to disprove the counterfactual (right)",this.choice.set_cf(t,e,f,this.formula.get_embedding_depth(),t.get_current_world().get_edges()[0][0].index);break}this.ready=!1}}set_formula(t,e){if(this.mode!=pt.Formula&&(console.log("> transitioning to Formula"),this.transition_mode(pt.Formula),this.next_formula=e,this.next_state=t,this.next_animate=!1,this.mode==pt.Transition))return;console.log("> setting formula "+e.to_string());let f=this.choice.is_choice_made()?this.choice.get_choice().get_name():void 0;this.formula.set_embedding_depth(this.formula.get_embedding_depth()+(f==Dt.Defender_Sphere_Selection||f==Dt.Defender_World_Choice?0:1)),this.formula.set_formula(e),t.get_mode()==pn.Counterfactual?this.graph_graphics.set_delim_world(t.get_delim_world().index):this.graph_graphics.clear_delim_world(),this.graph_graphics.set_current_world(t.get_current_world().index)}animate_move(t,e,f){if(this.mode!=pt.Formula&&(console.log("> transitioning to Formula"),this.transition_mode(pt.Formula),this.next_move=e,this.next_state=t,this.next_animate=!0,this.mode==pt.Transition))return;this.caption.text=My[e.get_name()];let i=e.apply(t,f);console.log("> animating move "+Dt[e.get_name()]+" => "+i.get_formula().to_string()),this.idle(this.formula.animate(i.get_formula(),e.get_name())),i.get_mode()==pn.Counterfactual?this.graph_graphics.set_delim_world(i.get_delim_world().index):this.graph_graphics.clear_delim_world(),this.graph_graphics.set_current_world(i.get_current_world().index)}transition_mode(t){let e=this.mode;switch(this.mode=pt.Transition,this.next_mode=t,!0){case(e==pt.Formula&&this.next_mode==pt.Negated_Counterfactual_Choice):console.log("> animating transition Formula -> Negated_Counterfactual_Choice"),this.idle(this.formula.animate_transition([e,this.next_mode]));return;case(e==pt.Formula&&this.next_mode==pt.Counterfactual_Choice):console.log("> animating transition Formula -> Counterfactual_Choice"),this.idle(this.formula.animate_transition([e,this.next_mode]));return;case(e==pt.Formula&&this.next_mode==pt.Formula_Choice):console.log("> animating transition Formula -> Formula_Choice"),this.idle(this.formula.animate_transition([e,this.next_mode]));return;case(e==pt.Formula_Choice&&this.next_mode==pt.Formula):console.log("> animating transition Formula_Choice -> Formula"),this.idle(this.choice.animate_transition([e,this.next_mode]));return;case(e==pt.Counterfactual_Choice&&this.next_mode==pt.Formula):console.log("> animating transition Counterfactual_Choice -> Formula"),this.idle(this.choice.animate_transition([e,this.next_mode]));return;case(e==pt.Negated_Counterfactual_Choice&&this.next_mode==pt.Formula):console.log("> animating transition Negated_Counterfactual_Choice -> Formula"),this.idle(this.choice.animate_transition([e,this.next_mode]));return;case(e==pt.Counterfactual_Choice&&this.next_mode==pt.World_Choice):console.log("> animating transition Counterfactual_Choice -> World_Choice"),this.idle(this.choice.animate_transition([e,this.next_mode]));return;case(e==pt.Negated_Counterfactual_Choice&&this.next_mode==pt.World_Choice):console.log("> animating transition Negated_Counterfactual_Choice -> World_Choice"),this.idle(this.choice.animate_transition([e,this.next_mode]));return;case(e==pt.World_Choice&&this.next_mode==pt.Formula):console.log("> animating transition World_Choice -> Formula"),this.idle(this.choice.animate_transition([e,this.next_mode]));return;default:console.log("> skipping transition"),this.set_mode(this.next_mode);return}}set_mode(t){switch(this.mode=t,t){case pt.Formula:this.formula.setVisible(!0),this.choice.set_visible(!1),this.caption.setVisible(!0),this.graph_graphics.set_mode(ns.Display);break;case pt.Formula_Choice:case pt.Counterfactual_Choice:case pt.Negated_Counterfactual_Choice:this.formula.setVisible(!1),this.choice.set_visible(!0),this.caption.setVisible(!0),this.graph_graphics.set_mode(ns.Display);break;case pt.World_Choice:this.caption.setVisible(!0),this.graph_graphics.set_mode(ns.World_Choice);break}}resize_graphics(){this.background.setDisplaySize(this.scene.get_width(),this.scene.get_height()),this.background.setPosition(this.scene.get_width()/2,this.scene.get_height()/2),this.sup_panel.resize(),this.choice.resize(),this.graph_graphics.resize(),this.caption.setX(this.scene.get_width()/2),this.caption.setY(this.scene.get_height()-165),this.formula.setX(this.scene.get_width()/2),this.formula.setY(this.scene.get_height()-100)}get_mode(){return this.mode}get_choice(){return this.choice.get_choice()}get_world_choice(){return this.graph_graphics.get_chosen_world()}is_ready(){return this.ready}idle(t){this.ready=!1,this.idle_since=Date.now(),this.idle_time=t}create_stars(t,e,f){let i=new Phaser.GameObjects.Container(t,e/2,f/2),n=e*f/2100;for(let h=0;h<n;h++)new wd(t,Math.random()*e-e/2,Math.random()*f-f/2).add_to_container(i);return i}static load_sprites(t){Fd.load_sprites(t),io.load_sprites(t),nc.load_sprites(t),wd.load_sprites(t),h8(t,1600,1600,"space"),eo(t,"space",5007251)}static configure_sprites(t){io.configure_sprites(t),Fd.configure_sprites(t),wd.configure_sprites(t)}}class y8 extends qa.Scene{constructor(t){super(t)}setup(){this.canvas=this.sys.game.canvas,window.addEventListener("resize",()=>{this.game.scale.resize(window.innerWidth,window.innerHeight),this.on_resize()},!1)}get_canvas(){return this.canvas}get_width(){return window.innerWidth}get_height(){return window.innerHeight}}class T8{constructor(t,e){this.worlds=[];for(let f=0;t!=null&&f<t.length;f++)this.add_world(ye.exports.cloneDeep(t[f]));for(let f=0;e!=null&&f<e.length;f++)this.add_edge(e[f][0],e[f][1],e[f][2])}add_world(t){this.worlds=this.worlds.concat([new C8(this.worlds.length,t!=null?t:[])])}add_edge(t,e,f){this.worlds[t].add_edge(this.worlds[e],f)}clear(){this.worlds=[]}equals(t){if(this.get_V()!=t.get_V()||this.get_E()!=t.get_E())return!1;for(let e=0;e<this.get_V();e++){let f=t.worlds[e].get_edges(),i=this.worlds[e].get_edges();if(f.length!=i.length)return!1;for(let n=0;n<f.length;n++)if(f[n][0].index!=i[n][0].index||f[n][1]!=i[n][1])return!1}return!0}get_world(t){return ye.exports.cloneDeep(this.worlds[t])}get_worlds(){return ye.exports.cloneDeep(this.worlds)}get_edges(t){return ye.exports.cloneDeep(this.worlds[t].get_edges())}get_edge_list(){let t=[];for(let e=0;e<this.worlds.length;e++){let f=this.worlds[e];t=t.concat(f.get_edge_list())}return t}get_V(){return this.worlds.length}get_E(){return this.worlds.reduce((t,e)=>t+e.get_edge_count(),0)}print(){console.log(this.get_V()+" vertices"),console.log(this.get_E()+" edges");for(let t=0;t<this.worlds.length;t++){let e="Vertex "+t+": ";const f=this.worlds[t].get_edge_count();for(let i=0;i<f;i++){let n=this.worlds[t].get_edges();e=e.concat("["+t+", "+n[i][0].get_index()+"] ")}console.log(e+`
`)}}}class C8{constructor(t,e){this.index=t,this.adj=[],this.atoms=e}add_edge(t,e){this.adj=this.adj.concat([[t,e]])}get_index(){return this.index}get_atoms(){return this.atoms}get_edges(){return ye.exports.cloneDeep(this.adj)}get_edge_list(){let t=[],e;for(let f=0;f<this.adj.length;f++)e=[this.index,this.adj[f][0].index,this.adj[f][1]],t=t.concat([e]);return t}get_edge_count(){return this.adj.length}get_edge(t){let e=this.adj.find(f=>f[0].get_index()==t);if(e==null)throw new Error("No edge to passed world");return e}is_adj(t){return this.adj.map(e=>e[0].get_index()).includes(t)}is_atom_known_true(t){return this.atoms.some(e=>t==e)}}class gl{constructor(t,e,f,i,n,h,r){this.delim_world=0,this.r=1/0,this.mode=t,this.similarity_graph=e,this.active_player=n,this.supposition=f,this.current_world=i,this.atoms=h;let a=e.get_world(i);if(t==pn.Counterfactual){if(r==null||!a.is_adj(r))throw new Error("Counterfactual Mode requires you to pass a valid delim_world");this.delim_world=r,this.r=a.get_edge(r)[1]}}static create(t,e,f,i,n,h,r){let a=ic.get(t),l=ec.get(h),o=xe.parse(f,i);if(a==null||o==null||l==null)throw new Error("Passed incorrect State_Mode, Formula or Player string abbreviation");return new gl(a,e,o,n,l,i,r)}configure(t,e,f,i,n){var u,v;let h=(u=ic.get(t))!=null?u:this.mode,r=ye.exports.cloneDeep(e),a=(v=ec.get(f))!=null?v:this.active_player,l=i||this.current_world,o=n||this.delim_world;return new gl(h,this.get_graph(),r,l,a,this.atoms,o)}equals(t){return!(this.mode!=t.get_mode()||!this.similarity_graph.equals(t.get_graph())||!this.supposition.compare(t.get_formula())||this.current_world!=t.get_current_world().index||this.active_player!=t.get_active_player()||JSON.stringify(this.atoms)!=JSON.stringify(t.get_atoms())||this.mode==pn.Counterfactual&&this.delim_world!=t.get_delim_world().index)}get_mode(){return this.mode}get_formula(){return ye.exports.cloneDeep(this.supposition)}get_current_world(){return this.similarity_graph.get_world(this.current_world)}get_graph(){return ye.exports.cloneDeep(this.similarity_graph)}get_active_player(){return this.active_player}get_atoms(){return ye.exports.cloneDeep(this.atoms)}get_delim_world(){if(this.mode!=pn.Counterfactual)throw new Error("Game_State has no property delim_world in the current mode");return this.similarity_graph.get_world(this.delim_world)}get_radius(){if(this.mode!=pn.Counterfactual)throw new Error("Game_State has no property radius in the current mode");return this.r}to_string(){return"("+pn[this.mode]+", "+this.supposition.to_string()+", "+this.current_world+", "+or[this.active_player]+", "+this.delim_world+")"}}class fa{static create(t,e,f,i,n,h,r,a,l){return{state_mode:t,supposition:e,atoms:ye.exports.cloneDeep(f),player_turn:i,current_world:n,delim_world:h,graph:{worlds:ye.exports.cloneDeep(r),world_positions:ye.exports.cloneDeep(a),edges:ye.exports.cloneDeep(l)}}}static to_state(t){let e=new T8(t.graph.worlds,t.graph.edges),f=t.state_mode,i=t.supposition,n=t.atoms,h=t.player_turn,r=t.current_world,a=t.delim_world;return gl.create(f,e,i,n,r,h,a)}}let te,zn,Vn,Un;te=["Es gibt Weltfrieden","Es gibt Ananas auf Pizza","Die Erde ist flach","Es gibt Insekten","Tempo-Taschent\xFCcher sind gelb"];zn=[ru(te,[1,2,4])];Vn=[[0,0]];Un=[[0,0,0]];let S8=fa.create("Res","A v B",te,"a/d",0,-1,zn,Vn,Un);te=["Menschen leben unterirdisch","Eisen ist teurer als Gold","Kompasse funktionieren","Die Erde hat ein Magnetfeld","Die Produktion von Lippenstift ist verboten"];zn=[ru(te,[0,1,2,4])];Vn=[[0,0]];Un=[[0,0,0]];let E8=fa.create("Res","~(~D v ~C) v A",te,"a/d",0,-1,zn,Vn,Un);te=["K\xE4se ist ein pflanzliches Produkt","K\xFChe sind vom Aussterben bedroht","Milch ist ein Gift","Erd\xF6l ist ein Gift","Die Zugspitze ist der h\xF6chste Berg der Welt","Milch kann zu einem Bioplastik verarbeitet werden","Laktose-intolerante Menschen k\xF6nnen Milch verdauen"];zn=[ru(te,[0,1,2,3,4,5])];Vn=[[0,0]];Un=[[0,0,0]];let P8=fa.create("Res","~(~C v ~D) v ~(~G v ~F)",te,"a/d",0,-1,zn,Vn,Un);te=["Es gibt den Weihnachtsmann","Jedes Kind wird beschenkt"];zn=[[],[te[1]],ru(te,[0,1]),[te[0]]];Vn=[[0,0],[-50,-150],[-100,100],[200,50]];Un=[[0,0,0],[1,1,0],[2,2,0],[3,3,0],[0,1,1],[0,2,2],[0,3,5]];let M8=fa.create("Res","A |_|-> B",te,"a/d",0,-1,zn,Vn,Un);te=["Alexander the Great died at the age of 32","Alexander the Great attacked europe","The romans defeated Alexander the Great","The romans built aqueducts","The greek gods became revered throughout europe","The toga became a fashion staple"];zn=[[te[0],te[3],te[5]],[te[0],te[2]],[te[4]],[te[1],te[2],te[3]],[te[1],te[4]],te.slice(0,5),[]];Vn=[[0,0],[-150,0],[0,-150],[150,0],[0,150],[300,-150],[237,203]];Un=[[0,0,0],[1,1,0],[2,2,0],[3,3,0],[4,4,0],[5,5,0],[6,6,0],[0,1,2],[0,2,4],[0,3,5],[0,4,6],[0,6,6],[1,2,3],[2,5,1],[3,5,4],[4,6,5]];let A8=fa.create("Res","~(A v ~B) |_|-> C",te,"a/d",0,-1,zn,Vn,Un),O8=[S8,E8,P8,M8,A8];te=["Milch ist ein Gift","Erd\xF6l ist ein Gift","Laktose-intolerante Menschen k\xF6nnen Milch nicht verdauen","Milch kann zu Bioplastik verarbeitet werden"];function ru(s,t){let e=[];for(let f=0;f<t.length;f++)e.push(s[t[f]]);return e}class R8 extends y8{constructor(){super("Game_Scene"),this.game_over=!1}preload(){this.setup(),Id.load_sprites(this)}create(){Id.configure_sprites(this),this.load_level(O8[4])}update(t,e){let f=Date.now();if(this.graphics_controller.update(f),!this.game_over&&this.graphics_controller.is_ready()){let i=this.game_controller.get_state(),n=this.game_controller.determine_next_moves(),h=n[0],r=n[1],a=this.graphics_controller.get_mode();console.log("-----------------------------New Round!------------------------------------"),console.log(Pe[h]+" => "+(r[0]==null?"":r.map(p=>Dt[p.get_name()]).reduce((p,g)=>p+" or "+g)));let l,o,u;switch(!0){case(h==Pe.Defenders_Choice&&a==pt.Formula):this.graphics_controller.set_choice(i,r[0],r[1]);return;case(h==Pe.Defenders_Choice&&a==pt.Formula_Choice):case(h==Pe.Defenders_Choice&&a==pt.Counterfactual_Choice):case(h==Pe.Defenders_Choice&&a==pt.Negated_Counterfactual_Choice):l=this.graphics_controller.get_choice(),l.get_world_input_requirement()||(o=l.apply(i).get_formula());break;case(h==Pe.Defenders_Choice&&a==pt.World_Choice):l=this.graphics_controller.get_choice(),u=this.graphics_controller.get_world_choice(),o=l.apply(i,u).get_formula();break;case(h==Pe.Defenders_Resolution&&a==pt.World_Choice):l=r[0],u=this.graphics_controller.get_world_choice(),o=l.apply(i,u).get_formula();break;case(h==Pe.Defenders_Resolution&&a==pt.Formula):l=r[0];break;case(h==Pe.Attackers_Resolution&&a==pt.Formula):l=r[0];break;case h==Pe.No_Moves:console.log("Cannot play any move! Game ended."),this.game_over=!0;return}let v=this.game_controller.does_require_delim(l),d=a==pt.World_Choice,c=h!=Pe.Attackers_Resolution&&h!=Pe.Attackers_Choice;if(v&&!d&&c){this.graphics_controller.set_world_choice();return}else v&&!d&&!c&&(u=n[2]);this.game_over||(this.game_controller.execute_move(l,u),h!=Pe.Defenders_Choice?this.graphics_controller.animate_move(i,l,u):this.graphics_controller.set_formula(this.game_controller.get_state(),o)),this.game_over=this.did_game_end(l)}}load_level(t){let e=fa.to_state(t);this.starting_state=e,this.game_controller=new e8(e),this.graphics_controller=new Id(this,e,t.graph.world_positions),this.game_over=!1}on_resize(){this.graphics_controller.resize_graphics()}did_game_end(t){let e=t.get_name();return(e==Dt.Attacker_Victory||e==Dt.Defender_Victory)&&console.log(Dt[e]+"! Game ended."),e==Dt.Attacker_Victory||e==Dt.Defender_Victory}}new qa.Game(Object.assign(_9,{scene:[R8]}));

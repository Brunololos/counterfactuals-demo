const cL=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))f(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&f(o)}).observe(document,{childList:!0,subtree:!0});function e(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerpolicy&&(n.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?n.credentials="include":i.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function f(i){if(i.ep)return;i.ep=!0;const n=e(i);fetch(i.href,n)}};cL();var jr=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function vL(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Vy={exports:{}};(function(s,t){(function(f,i){s.exports=i()})(jr,function(){return function(e){var f={};function i(n){if(f[n])return f[n].exports;var o=f[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=e,i.c=f,i.d=function(n,o,r){i.o(n,o)||Object.defineProperty(n,o,{enumerable:!0,get:r})},i.r=function(n){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},i.t=function(n,o){if(o&1&&(n=i(n)),o&8||o&4&&typeof n=="object"&&n&&n.__esModule)return n;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:n}),o&2&&typeof n!="string")for(var a in n)i.d(r,a,function(l){return n[l]}.bind(null,a));return r},i.n=function(n){var o=n&&n.__esModule?function(){return n.default}:function(){return n};return i.d(o,"a",o),o},i.o=function(n,o){return Object.prototype.hasOwnProperty.call(n,o)},i.p="",i(i.s=1528)}([function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function i(h){return!!h.get&&typeof h.get=="function"||!!h.set&&typeof h.set=="function"}function n(h,u,v){var d=v?h[u]:Object.getOwnPropertyDescriptor(h,u);return!v&&d.value&&typeof d.value=="object"&&(d=d.value),d&&i(d)?(typeof d.enumerable=="undefined"&&(d.enumerable=!0),typeof d.configurable=="undefined"&&(d.configurable=!0),d):!1}function o(h,u){var v=Object.getOwnPropertyDescriptor(h,u);return v?(v.value&&typeof v.value=="object"&&(v=v.value),v.configurable===!1):!1}function r(h,u,v,d){for(var c in u)if(!!u.hasOwnProperty(c)){var p=n(u,c,v);if(p!==!1){var g=d||h;if(o(g.prototype,c)){if(l.ignoreFinals)continue;throw new Error("cannot override final property '"+c+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(h.prototype,c,p)}else h.prototype[c]=u[c]}}function a(h,u){if(!!u){Array.isArray(u)||(u=[u]);for(var v=0;v<u.length;v++)r(h,u[v].prototype||u[v])}}function l(h){h||(h={});var u,v;if(h.initialize){if(typeof h.initialize!="function")throw new Error("initialize must be a function");u=h.initialize,delete h.initialize}else if(h.Extends){var d=h.Extends;u=function(){d.apply(this,arguments)}}else u=function(){};h.Extends?(u.prototype=Object.create(h.Extends.prototype),u.prototype.constructor=u,v=h.Extends,delete h.Extends):u.prototype.constructor=u;var c=null;return h.Mixins&&(c=h.Mixins,delete h.Mixins),a(u,c),r(u,h,!0,v),u}l.extend=r,l.mixin=a,l.ignoreFinals=!1,e.exports=l},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(){};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r){var a=typeof n;return!n||a==="number"||a==="string"?r:n.hasOwnProperty(o)&&n[o]!==void 0?n[o]:r};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(124),r=new n({initialize:function(l,h){this.x=0,this.y=0,typeof l=="object"?(this.x=l.x||0,this.y=l.y||0):(h===void 0&&(h=l),this.x=l||0,this.y=h||0)},clone:function(){return new r(this.x,this.y)},copy:function(a){return this.x=a.x||0,this.y=a.y||0,this},setFromObject:function(a){return this.x=a.x||0,this.y=a.y||0,this},set:function(a,l){return l===void 0&&(l=a),this.x=a,this.y=l,this},setTo:function(a,l){return this.set(a,l)},setToPolar:function(a,l){return l==null&&(l=1),this.x=Math.cos(a)*l,this.y=Math.sin(a)*l,this},equals:function(a){return this.x===a.x&&this.y===a.y},fuzzyEquals:function(a,l){return o(this.x,a.x,l)&&o(this.y,a.y,l)},angle:function(){var a=Math.atan2(this.y,this.x);return a<0&&(a+=2*Math.PI),a},setAngle:function(a){return this.setToPolar(a,this.length())},add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(a){return this.x-=a.x,this.y-=a.y,this},multiply:function(a){return this.x*=a.x,this.y*=a.y,this},scale:function(a){return isFinite(a)?(this.x*=a,this.y*=a):(this.x=0,this.y=0),this},divide:function(a){return this.x/=a.x,this.y/=a.y,this},negate:function(){return this.x=-this.x,this.y=-this.y,this},distance:function(a){var l=a.x-this.x,h=a.y-this.y;return Math.sqrt(l*l+h*h)},distanceSq:function(a){var l=a.x-this.x,h=a.y-this.y;return l*l+h*h},length:function(){var a=this.x,l=this.y;return Math.sqrt(a*a+l*l)},setLength:function(a){return this.normalize().scale(a)},lengthSq:function(){var a=this.x,l=this.y;return a*a+l*l},normalize:function(){var a=this.x,l=this.y,h=a*a+l*l;return h>0&&(h=1/Math.sqrt(h),this.x=a*h,this.y=l*h),this},normalizeRightHand:function(){var a=this.x;return this.x=this.y*-1,this.y=a,this},normalizeLeftHand:function(){var a=this.x;return this.x=this.y,this.y=a*-1,this},dot:function(a){return this.x*a.x+this.y*a.y},cross:function(a){return this.x*a.y-this.y*a.x},lerp:function(a,l){l===void 0&&(l=0);var h=this.x,u=this.y;return this.x=h+l*(a.x-h),this.y=u+l*(a.y-u),this},transformMat3:function(a){var l=this.x,h=this.y,u=a.val;return this.x=u[0]*l+u[3]*h+u[6],this.y=u[1]*l+u[4]*h+u[7],this},transformMat4:function(a){var l=this.x,h=this.y,u=a.val;return this.x=u[0]*l+u[4]*h+u[12],this.y=u[1]*l+u[5]*h+u[13],this},reset:function(){return this.x=0,this.y=0,this},limit:function(a){var l=this.length();return l&&l>a&&this.scale(a/l),this},reflect:function(a){return a=a.clone().normalize(),this.subtract(a.scale(2*this.dot(a)))},mirror:function(a){return this.reflect(a).negate()},rotate:function(a){var l=Math.cos(a),h=Math.sin(a);return this.set(l*this.x-h*this.y,h*this.x+l*this.y)}});r.ZERO=new r,r.RIGHT=new r(1,0),r.LEFT=new r(-1,0),r.UP=new r(0,-1),r.DOWN=new r(0,1),r.ONE=new r(1,1),e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(56),r=new n({initialize:function(l,h){l===void 0&&(l=0),h===void 0&&(h=l),this.type=o.POINT,this.x=l,this.y=h},setTo:function(a,l){return a===void 0&&(a=0),l===void 0&&(l=a),this.x=a,this.y=l,this}});e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(24),r=i(20),a=new n({initialize:function(h){this.scene=h,this.systems=h.sys,this.events=h.sys.events,this.displayList,this.updateList,this.events.once(r.BOOT,this.boot,this),this.events.on(r.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(r.DESTROY,this.destroy,this)},start:function(){this.events.once(r.SHUTDOWN,this.shutdown,this)},existing:function(l){return(l.renderCanvas||l.renderWebGL)&&this.displayList.add(l),l.preUpdate&&this.updateList.add(l),l},shutdown:function(){this.events.off(r.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(r.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});a.register=function(l,h){a.prototype.hasOwnProperty(l)||(a.prototype[l]=h)},a.remove=function(l){a.prototype.hasOwnProperty(l)&&delete a.prototype[l]},o.register("GameObjectFactory",a,"add"),e.exports=a},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r){if(!n||typeof n=="number")return r;if(n.hasOwnProperty(o))return n[o];if(o.indexOf(".")!==-1){for(var a=o.split("."),l=n,h=r,u=0;u<a.length;u++)if(l.hasOwnProperty(a[u]))h=l[a[u]],l=l[a[u]];else{h=r;break}return h}else return r};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){if(typeof n!="object"||n.nodeType||n===n.window)return!1;try{if(n.constructor&&!{}.hasOwnProperty.call(n.constructor.prototype,"isPrototypeOf"))return!1}catch{return!1}return!0};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={},n={install:function(o){for(var r in i)o[r]=i[r]},register:function(o,r){i[o]=r},destroy:function(){i={}}};e.exports=n},function(e,f,i){var n=Object.prototype.hasOwnProperty,o="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(o=!1));function a(v,d,c){this.fn=v,this.context=d,this.once=c||!1}function l(v,d,c,p,g){if(typeof c!="function")throw new TypeError("The listener must be a function");var m=new a(c,p||v,g),x=o?o+d:d;return v._events[x]?v._events[x].fn?v._events[x]=[v._events[x],m]:v._events[x].push(m):(v._events[x]=m,v._eventsCount++),v}function h(v,d){--v._eventsCount===0?v._events=new r:delete v._events[d]}function u(){this._events=new r,this._eventsCount=0}u.prototype.eventNames=function(){var d=[],c,p;if(this._eventsCount===0)return d;for(p in c=this._events)n.call(c,p)&&d.push(o?p.slice(1):p);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(c)):d},u.prototype.listeners=function(d){var c=o?o+d:d,p=this._events[c];if(!p)return[];if(p.fn)return[p.fn];for(var g=0,m=p.length,x=new Array(m);g<m;g++)x[g]=p[g].fn;return x},u.prototype.listenerCount=function(d){var c=o?o+d:d,p=this._events[c];return p?p.fn?1:p.length:0},u.prototype.emit=function(d,c,p,g,m,x){var y=o?o+d:d;if(!this._events[y])return!1;var T=this._events[y],C=arguments.length,S,E;if(T.fn){switch(T.once&&this.removeListener(d,T.fn,void 0,!0),C){case 1:return T.fn.call(T.context),!0;case 2:return T.fn.call(T.context,c),!0;case 3:return T.fn.call(T.context,c,p),!0;case 4:return T.fn.call(T.context,c,p,g),!0;case 5:return T.fn.call(T.context,c,p,g,m),!0;case 6:return T.fn.call(T.context,c,p,g,m,x),!0}for(E=1,S=new Array(C-1);E<C;E++)S[E-1]=arguments[E];T.fn.apply(T.context,S)}else{var M=T.length,O;for(E=0;E<M;E++)switch(T[E].once&&this.removeListener(d,T[E].fn,void 0,!0),C){case 1:T[E].fn.call(T[E].context);break;case 2:T[E].fn.call(T[E].context,c);break;case 3:T[E].fn.call(T[E].context,c,p);break;case 4:T[E].fn.call(T[E].context,c,p,g);break;default:if(!S)for(O=1,S=new Array(C-1);O<C;O++)S[O-1]=arguments[O];T[E].fn.apply(T[E].context,S)}}return!0},u.prototype.on=function(d,c,p){return l(this,d,c,p,!1)},u.prototype.once=function(d,c,p){return l(this,d,c,p,!0)},u.prototype.removeListener=function(d,c,p,g){var m=o?o+d:d;if(!this._events[m])return this;if(!c)return h(this,m),this;var x=this._events[m];if(x.fn)x.fn===c&&(!g||x.once)&&(!p||x.context===p)&&h(this,m);else{for(var y=0,T=[],C=x.length;y<C;y++)(x[y].fn!==c||g&&!x[y].once||p&&x[y].context!==p)&&T.push(x[y]);T.length?this._events[m]=T.length===1?T[0]:T:h(this,m)}return this},u.prototype.removeAllListeners=function(d){var c;return d?(c=o?o+d:d,this._events[c]&&h(this,c)):(this._events=new r,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=o,u.EventEmitter=u,e.exports=u},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(57),r=i(171),a=i(306),l=i(56),h=i(47),u=i(174),v=new n({initialize:function(c,p,g,m){c===void 0&&(c=0),p===void 0&&(p=0),g===void 0&&(g=0),m===void 0&&(m=0),this.type=l.RECTANGLE,this.x=c,this.y=p,this.width=g,this.height=m},contains:function(d,c){return o(this,d,c)},getPoint:function(d,c){return r(this,d,c)},getPoints:function(d,c,p){return a(this,d,c,p)},getRandomPoint:function(d){return u(this,d)},setTo:function(d,c,p,g){return this.x=d,this.y=c,this.width=p,this.height=g,this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(d,c){return c===void 0&&(c=d),this.x=d,this.y=c,this},setSize:function(d,c){return c===void 0&&(c=d),this.width=d,this.height=c,this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(d){return d===void 0&&(d=new h),d.setTo(this.x,this.y,this.right,this.y),d},getLineB:function(d){return d===void 0&&(d=new h),d.setTo(this.right,this.y,this.right,this.bottom),d},getLineC:function(d){return d===void 0&&(d=new h),d.setTo(this.right,this.bottom,this.x,this.bottom),d},getLineD:function(d){return d===void 0&&(d=new h),d.setTo(this.x,this.bottom,this.x,this.y),d},left:{get:function(){return this.x},set:function(d){d>=this.right?this.width=0:this.width=this.right-d,this.x=d}},right:{get:function(){return this.x+this.width},set:function(d){d<=this.x?this.width=0:this.width=d-this.x}},top:{get:function(){return this.y},set:function(d){d>=this.bottom?this.height=0:this.height=this.bottom-d,this.y=d}},bottom:{get:function(){return this.y+this.height},set:function(d){d<=this.y?this.height=0:this.height=d-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(d){this.x=d-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(d){this.y=d-this.height/2}}});e.exports=v},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Alpha:i(607),AlphaSingle:i(303),BlendMode:i(304),ComputedSize:i(608),Crop:i(609),Depth:i(305),Flip:i(610),GetBounds:i(611),Mask:i(309),Origin:i(632),PathFollower:i(633),Pipeline:i(167),ScrollFactor:i(312),Size:i(634),Texture:i(635),TextureCrop:i(636),Tint:i(637),ToJSON:i(176),Transform:i(313),TransformMatrix:i(25),Visible:i(314)}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @author       Matthew Groves <@doormat>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function i(n){for(var o="",r=0;r<n;++r)r>0&&(o+=`
else `),r<n-1&&(o+="if(test == "+r+".0){}");return o}e.exports={getTintFromFloats:function(n,o,r,a){var l=(n*255|0)&255,h=(o*255|0)&255,u=(r*255|0)&255,v=(a*255|0)&255;return(v<<24|l<<16|h<<8|u)>>>0},getTintAppendFloatAlpha:function(n,o){var r=(o*255|0)&255;return(r<<24|n)>>>0},getTintAppendFloatAlphaAndSwap:function(n,o){var r=(n>>16|0)&255,a=(n>>8|0)&255,l=(n|0)&255,h=(o*255|0)&255;return(h<<24|l<<16|a<<8|r)>>>0},getFloatsFromUintRGB:function(n){var o=(n>>16|0)&255,r=(n>>8|0)&255,a=(n|0)&255;return[o/255,r/255,a/255]},checkShaderMax:function(n,o){(!o||o===-1)&&(o=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS));for(var r=n.createShader(n.FRAGMENT_SHADER),a=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);;){var l=a.replace(/%forloop%/gi,i(o));if(n.shaderSource(r,l),n.compileShader(r),!n.getShaderParameter(r,n.COMPILE_STATUS))o=o/2|0;else break}return o},parseFragmentShaderMaxTextures:function(n,o){if(!n)return"";for(var r="",a=0;a<o;a++)a>0&&(r+=`
	else `),a<o-1&&(r+="if (outTexId < "+a+".5)"),r+=`
	{`,r+=`
		texture = texture2D(uMainSampler[`+a+"], outTexCoord);",r+=`
	}`;return n=n.replace(/%count%/gi,o.toString()),n.replace(/%forloop%/gi,r)}}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(193),o=i(6),r=function(a,l,h){var u=o(a,l,null);if(u===null)return h;if(Array.isArray(u))return n.RND.pick(u);if(typeof u=="object"){if(u.hasOwnProperty("randInt"))return n.RND.integerInRange(u.randInt[0],u.randInt[1]);if(u.hasOwnProperty("randFloat"))return n.RND.realInRange(u.randFloat[0],u.randFloat[1])}else if(typeof u=="function")return u(l);return u};e.exports=r},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={PI2:Math.PI*2,TAU:Math.PI*.5,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(176),r=i(101),a=i(9),l=i(75),h=i(20),u=new n({Extends:a,initialize:function(d,c){a.call(this),this.scene=d,this.displayList=null,this.type=c,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.on(l.ADDED_TO_SCENE,this.addedToScene,this),this.on(l.REMOVED_FROM_SCENE,this.removedFromScene,this),d.sys.queueDepthSort()},setActive:function(v){return this.active=v,this},setName:function(v){return this.name=v,this},setState:function(v){return this.state=v,this},setDataEnabled:function(){return this.data||(this.data=new r(this)),this},setData:function(v,d){return this.data||(this.data=new r(this)),this.data.set(v,d),this},incData:function(v,d){return this.data||(this.data=new r(this)),this.data.inc(v,d),this},toggleData:function(v){return this.data||(this.data=new r(this)),this.data.toggle(v),this},getData:function(v){return this.data||(this.data=new r(this)),this.data.get(v)},setInteractive:function(v,d,c){return this.scene.sys.input.enable(this,v,d,c),this},disableInteractive:function(){return this.input&&(this.input.enabled=!1),this},removeInteractive:function(){return this.scene.sys.input.clear(this),this.input=void 0,this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return o(this)},willRender:function(v){return!(u.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&v.id)},getIndexList:function(){for(var v=this,d=this.parentContainer,c=[];d&&(c.unshift(d.getIndex(v)),v=d,d.parentContainer);)d=d.parentContainer;return this.displayList?c.unshift(this.displayList.getIndex(v)):c.unshift(this.scene.sys.displayList.getIndex(v)),c},addToDisplayList:function(v){return v===void 0&&(v=this.scene.sys.displayList),this.displayList&&this.displayList!==v&&this.removeFromDisplayList(),v.exists(this)||(this.displayList=v,v.add(this,!0),v.queueDepthSort(),this.emit(l.ADDED_TO_SCENE,this,this.scene),v.events.emit(h.ADDED_TO_SCENE,this,this.scene)),this},addToUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.add(this),this},removeFromDisplayList:function(){var v=this.displayList||this.scene.sys.displayList;return v.exists(this)&&(v.remove(this,!0),v.queueDepthSort(),this.displayList=null,this.emit(l.REMOVED_FROM_SCENE,this,this.scene),v.events.emit(h.REMOVED_FROM_SCENE,this,this.scene)),this},removeFromUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.remove(this),this},destroy:function(v){!this.scene||this.ignoreDestroy||(v===void 0&&(v=!1),this.preDestroy&&this.preDestroy.call(this),this.emit(l.DESTROY,this,v),this.removeAllListeners(),this.postPipelines&&this.resetPostPipeline(!0),this.removeFromDisplayList(),this.removeFromUpdateList(),this.input&&(this.scene.sys.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),this.active=!1,this.visible=!1,this.scene=void 0,this.parentContainer=void 0)}});u.RENDER_MASK=15,e.exports=u},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(24),r=i(20),a=new n({initialize:function(h){this.scene=h,this.systems=h.sys,this.events=h.sys.events,this.displayList,this.updateList,this.events.once(r.BOOT,this.boot,this),this.events.on(r.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(r.DESTROY,this.destroy,this)},start:function(){this.events.once(r.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.events.off(r.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(r.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});a.register=function(l,h){a.prototype.hasOwnProperty(l)||(a.prototype[l]=h)},a.remove=function(l){a.prototype.hasOwnProperty(l)&&delete a.prototype[l]},o.register("GameObjectCreator",a,"make"),e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(7),o=function(){var r,a,l,h,u,v,d=arguments[0]||{},c=1,p=arguments.length,g=!1;for(typeof d=="boolean"&&(g=d,d=arguments[1]||{},c=2),p===c&&(d=this,--c);c<p;c++)if((r=arguments[c])!=null)for(a in r)l=d[a],h=r[a],d!==h&&(g&&h&&(n(h)||(u=Array.isArray(h)))?(u?(u=!1,v=l&&Array.isArray(l)?l:[]):v=l&&n(l)?l:{},d[a]=o(g,v,h)):h!==void 0&&(d[a]=h));return d};e.exports=o},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r){return Math.max(o,Math.min(r,n))};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(25),o=new n,r=new n,a=new n,l={camera:o,sprite:r,calc:a},h=function(u,v,d){var c=o,p=r,g=a;return p.applyITRS(u.x,u.y,u.rotation,u.scaleX,u.scaleY),c.copyFrom(v.matrix),d?(c.multiplyWithOffset(d,-v.scrollX*u.scrollFactorX,-v.scrollY*u.scrollFactorY),p.e=u.x,p.f=u.y):(p.e-=v.scrollX*u.scrollFactorX,p.f-=v.scrollY*u.scrollFactorY),c.multiply(p,g),l};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ADDED_TO_SCENE:i(656),BOOT:i(657),CREATE:i(658),DESTROY:i(659),PAUSE:i(660),POST_UPDATE:i(661),PRE_RENDER:i(662),PRE_UPDATE:i(663),READY:i(664),REMOVED_FROM_SCENE:i(665),RENDER:i(666),RESUME:i(667),SHUTDOWN:i(668),SLEEP:i(669),START:i(670),TRANSITION_COMPLETE:i(671),TRANSITION_INIT:i(672),TRANSITION_OUT:i(673),TRANSITION_START:i(674),TRANSITION_WAKE:i(675),UPDATE:i(676),WAKE:i(677)}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={BLUR:i(612),BOOT:i(613),CONTEXT_LOST:i(614),CONTEXT_RESTORED:i(615),DESTROY:i(616),FOCUS:i(617),HIDDEN:i(618),PAUSE:i(619),POST_RENDER:i(620),POST_STEP:i(621),PRE_RENDER:i(622),PRE_STEP:i(623),READY:i(624),RESUME:i(625),STEP:i(626),VISIBLE:i(627)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(21),r=i(95),a=i(2),l=i(155),h=i(240),u=i(517),v=i(156),d=new n({initialize:function(p,g){this.loader=p,this.cache=a(g,"cache",!1),this.type=a(g,"type",!1),this.key=a(g,"key",!1);var m=this.key;if(p.prefix&&p.prefix!==""&&(this.key=p.prefix+m),!this.type||!this.key)throw new Error("Invalid Loader."+this.type+" key");var x=a(g,"url");x===void 0?x=p.path+m+"."+a(g,"extension",""):typeof x=="string"&&!x.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)&&(x=p.path+x),this.url=x,this.src="",this.xhrSettings=v(a(g,"responseType",void 0)),a(g,"xhrSettings",!1)&&(this.xhrSettings=h(this.xhrSettings,a(g,"xhrSettings",{}))),this.xhrLoader=null,this.state=typeof this.url=="function"?o.FILE_POPULATED:o.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=a(g,"config",{}),this.multiFile,this.linkFile},setLink:function(c){this.linkFile=c,c.linkFile=this},resetXHR:function(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function(){this.state===o.FILE_POPULATED?this.loader.nextFile(this,!0):(this.state=o.FILE_LOADING,this.src=l(this,this.loader.baseURL),this.src.indexOf("data:")===0?console.warn("Local data URIs are not supported: "+this.key):this.xhrLoader=u(this,this.loader.xhr))},onLoad:function(c,p){var g=c.responseURL&&(c.responseURL.indexOf("file://")===0||c.responseURL.indexOf("capacitor://")===0),m=g&&p.target.status===0,x=!(p.target&&p.target.status!==200)||m;c.readyState===4&&c.status>=400&&c.status<=599&&(x=!1),this.state=o.FILE_LOADED,this.resetXHR(),this.loader.nextFile(this,x)},onError:function(){this.resetXHR(),this.loader.nextFile(this,!1)},onProgress:function(c){c.lengthComputable&&(this.bytesLoaded=c.loaded,this.bytesTotal=c.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(r.FILE_PROGRESS,this,this.percentComplete))},onProcess:function(){this.state=o.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function(){this.state=o.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function(){this.state=o.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function(){return this.cache&&this.cache.exists(this.key)},addToCache:function(){this.cache&&this.cache.add(this.key,this.data),this.pendingDestroy()},pendingDestroy:function(c){c===void 0&&(c=this.data);var p=this.key,g=this.type;this.loader.emit(r.FILE_COMPLETE,p,g,c),this.loader.emit(r.FILE_KEY_COMPLETE+g+"-"+p,p,g,c),this.loader.flagForRemoval(this)},destroy:function(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});d.createObjectURL=function(c,p,g){if(typeof URL=="function")c.src=URL.createObjectURL(p);else{var m=new FileReader;m.onload=function(){c.removeAttribute("crossOrigin"),c.src="data:"+(p.type||g)+";base64,"+m.result.split(",")[1]},m.onerror=c.onerror,m.readAsDataURL(p)}},d.revokeObjectURL=function(c){typeof URL=="function"&&URL.revokeObjectURL(c.src)},e.exports=d},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={},n={},o={};o.register=function(r,a,l,h){h===void 0&&(h=!1),i[r]={plugin:a,mapping:l,custom:h}},o.registerCustom=function(r,a,l,h){n[r]={plugin:a,mapping:l,data:h}},o.hasCore=function(r){return i.hasOwnProperty(r)},o.hasCustom=function(r){return n.hasOwnProperty(r)},o.getCore=function(r){return i[r]},o.getCustom=function(r){return n[r]},o.getCustomClass=function(r){return n.hasOwnProperty(r)?n[r].plugin:null},o.remove=function(r){i.hasOwnProperty(r)&&delete i[r]},o.removeCustom=function(r){n.hasOwnProperty(r)&&delete n[r]},o.destroyCorePlugins=function(){for(var r in i)i.hasOwnProperty(r)&&delete i[r]},o.destroyCustomPlugins=function(){for(var r in n)n.hasOwnProperty(r)&&delete n[r]},e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(14),r=i(3),a=new n({initialize:function(h,u,v,d,c,p){h===void 0&&(h=1),u===void 0&&(u=0),v===void 0&&(v=0),d===void 0&&(d=1),c===void 0&&(c=0),p===void 0&&(p=0),this.matrix=new Float32Array([h,u,v,d,c,p,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0}},a:{get:function(){return this.matrix[0]},set:function(l){this.matrix[0]=l}},b:{get:function(){return this.matrix[1]},set:function(l){this.matrix[1]=l}},c:{get:function(){return this.matrix[2]},set:function(l){this.matrix[2]=l}},d:{get:function(){return this.matrix[3]},set:function(l){this.matrix[3]=l}},e:{get:function(){return this.matrix[4]},set:function(l){this.matrix[4]=l}},f:{get:function(){return this.matrix[5]},set:function(l){this.matrix[5]=l}},tx:{get:function(){return this.matrix[4]},set:function(l){this.matrix[4]=l}},ty:{get:function(){return this.matrix[5]},set:function(l){this.matrix[5]=l}},rotation:{get:function(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},rotationNormalized:{get:function(){var l=this.matrix,h=l[0],u=l[1],v=l[2],d=l[3];return h||u?u>0?Math.acos(h/this.scaleX):-Math.acos(h/this.scaleX):v||d?o.TAU-(d>0?Math.acos(-v/this.scaleY):-Math.acos(v/this.scaleY)):0}},scaleX:{get:function(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function(){var l=this.matrix;return l[0]=1,l[1]=0,l[2]=0,l[3]=1,l[4]=0,l[5]=0,this},translate:function(l,h){var u=this.matrix;return u[4]=u[0]*l+u[2]*h+u[4],u[5]=u[1]*l+u[3]*h+u[5],this},scale:function(l,h){var u=this.matrix;return u[0]*=l,u[1]*=l,u[2]*=h,u[3]*=h,this},rotate:function(l){var h=Math.sin(l),u=Math.cos(l),v=this.matrix,d=v[0],c=v[1],p=v[2],g=v[3];return v[0]=d*u+p*h,v[1]=c*u+g*h,v[2]=d*-h+p*u,v[3]=c*-h+g*u,this},multiply:function(l,h){var u=this.matrix,v=l.matrix,d=u[0],c=u[1],p=u[2],g=u[3],m=u[4],x=u[5],y=v[0],T=v[1],C=v[2],S=v[3],E=v[4],M=v[5],O=h===void 0?this:h;return O.a=y*d+T*p,O.b=y*c+T*g,O.c=C*d+S*p,O.d=C*c+S*g,O.e=E*d+M*p+m,O.f=E*c+M*g+x,O},multiplyWithOffset:function(l,h,u){var v=this.matrix,d=l.matrix,c=v[0],p=v[1],g=v[2],m=v[3],x=v[4],y=v[5],T=h*c+u*g+x,C=h*p+u*m+y,S=d[0],E=d[1],M=d[2],O=d[3],L=d[4],R=d[5];return v[0]=S*c+E*g,v[1]=S*p+E*m,v[2]=M*c+O*g,v[3]=M*p+O*m,v[4]=L*c+R*g+T,v[5]=L*p+R*m+C,this},transform:function(l,h,u,v,d,c){var p=this.matrix,g=p[0],m=p[1],x=p[2],y=p[3],T=p[4],C=p[5];return p[0]=l*g+h*x,p[1]=l*m+h*y,p[2]=u*g+v*x,p[3]=u*m+v*y,p[4]=d*g+c*x+T,p[5]=d*m+c*y+C,this},transformPoint:function(l,h,u){u===void 0&&(u={x:0,y:0});var v=this.matrix,d=v[0],c=v[1],p=v[2],g=v[3],m=v[4],x=v[5];return u.x=l*d+h*p+m,u.y=l*c+h*g+x,u},invert:function(){var l=this.matrix,h=l[0],u=l[1],v=l[2],d=l[3],c=l[4],p=l[5],g=h*d-u*v;return l[0]=d/g,l[1]=-u/g,l[2]=-v/g,l[3]=h/g,l[4]=(v*p-d*c)/g,l[5]=-(h*p-u*c)/g,this},copyFrom:function(l){var h=this.matrix;return h[0]=l.a,h[1]=l.b,h[2]=l.c,h[3]=l.d,h[4]=l.e,h[5]=l.f,this},copyFromArray:function(l){var h=this.matrix;return h[0]=l[0],h[1]=l[1],h[2]=l[2],h[3]=l[3],h[4]=l[4],h[5]=l[5],this},copyToContext:function(l){var h=this.matrix;return l.transform(h[0],h[1],h[2],h[3],h[4],h[5]),l},setToContext:function(l){var h=this.matrix;return l.setTransform(h[0],h[1],h[2],h[3],h[4],h[5]),l},copyToArray:function(l){var h=this.matrix;return l===void 0?l=[h[0],h[1],h[2],h[3],h[4],h[5]]:(l[0]=h[0],l[1]=h[1],l[2]=h[2],l[3]=h[3],l[4]=h[4],l[5]=h[5]),l},setTransform:function(l,h,u,v,d,c){var p=this.matrix;return p[0]=l,p[1]=h,p[2]=u,p[3]=v,p[4]=d,p[5]=c,this},decomposeMatrix:function(){var l=this.decomposedMatrix,h=this.matrix,u=h[0],v=h[1],d=h[2],c=h[3],p=u*c-v*d;if(l.translateX=h[4],l.translateY=h[5],u||v){var g=Math.sqrt(u*u+v*v);l.rotation=v>0?Math.acos(u/g):-Math.acos(u/g),l.scaleX=g,l.scaleY=p/g}else if(d||c){var m=Math.sqrt(d*d+c*c);l.rotation=Math.PI*.5-(c>0?Math.acos(-d/m):-Math.acos(d/m)),l.scaleX=p/m,l.scaleY=m}else l.rotation=0,l.scaleX=0,l.scaleY=0;return l},applyITRS:function(l,h,u,v,d){var c=this.matrix,p=Math.sin(u),g=Math.cos(u);return c[4]=l,c[5]=h,c[0]=g*v,c[1]=p*v,c[2]=-p*d,c[3]=g*d,this},applyInverse:function(l,h,u){u===void 0&&(u=new r);var v=this.matrix,d=v[0],c=v[1],p=v[2],g=v[3],m=v[4],x=v[5],y=1/(d*g+p*-c);return u.x=g*y*l+-p*y*h+(x*p-m*g)*y,u.y=d*y*h+-c*y*l+(-x*d+m*c)*y,u},getX:function(l,h){return l*this.a+h*this.c+this.e},getY:function(l,h){return l*this.b+h*this.d+this.f},getXRound:function(l,h,u){var v=this.getX(l,h);return u&&(v=Math.round(v)),v},getYRound:function(l,h,u){var v=this.getY(l,h);return u&&(v=Math.round(v)),v},getCSSMatrix:function(){var l=this.matrix;return"matrix("+l[0]+","+l[1]+","+l[2]+","+l[3]+","+l[4]+","+l[5]+")"},destroy:function(){this.matrix=null,this.decomposedMatrix=null}});e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(2),o=function(r,a,l,h,u,v){r===void 0&&(r=0),a===void 0&&(a=0),l===void 0&&(l=v.width),h===void 0&&(h=v.height),u||(u={});var d=n(u,"isNotEmpty",!1),c=n(u,"isColliding",!1),p=n(u,"hasInterestingFace",!1);r<0&&(l+=r,r=0),a<0&&(h+=a,a=0),r+l>v.width&&(l=Math.max(v.width-r,0)),a+h>v.height&&(h=Math.max(v.height-a,0));for(var g=[],m=a;m<a+h;m++)for(var x=r;x<r+l;x++){var y=v.data[m][x];if(y!==null){if(d&&y.index===-1||c&&!y.collides||p&&!y.hasInterestingFace)continue;g.push(y)}}return g};e.exports=o},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r,a,l,h){a===void 0&&(a=0),l===void 0&&(l=0),h===void 0&&(h=1);var u,v=0,d=n.length;if(h===1)for(u=l;u<d;u++)n[u][o]=r+v*a,v++;else for(u=l;u>=0;u--)n[u][o]=r+v*a,v++;return n};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(35),o=i(13),r=function(a,l,h){l.x=o(h,"x",0),l.y=o(h,"y",0),l.depth=o(h,"depth",0),l.flipX=o(h,"flipX",!1),l.flipY=o(h,"flipY",!1);var u=o(h,"scale",null);typeof u=="number"?l.setScale(u):u!==null&&(l.scaleX=o(u,"x",1),l.scaleY=o(u,"y",1));var v=o(h,"scrollFactor",null);typeof v=="number"?l.setScrollFactor(v):v!==null&&(l.scrollFactorX=o(v,"x",1),l.scrollFactorY=o(v,"y",1)),l.rotation=o(h,"rotation",0);var d=o(h,"angle",null);d!==null&&(l.angle=d),l.alpha=o(h,"alpha",1);var c=o(h,"origin",null);if(typeof c=="number")l.setOrigin(c);else if(c!==null){var p=o(c,"x",.5),g=o(c,"y",.5);l.setOrigin(p,g)}l.blendMode=o(h,"blendMode",n.NORMAL),l.visible=o(h,"visible",!0);var m=o(h,"add",!0);return m&&a.sys.displayList.add(l),l.preUpdate&&a.sys.updateList.add(l),l};e.exports=r},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ORTHOGONAL:0,ISOMETRIC:1,STAGGERED:2,HEXAGONAL:3}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(19),o=function(r,a,l,h,u){var v=h.alpha*l.alpha;if(v<=0)return!1;var d=n(l,h,u).calc;return a.globalCompositeOperation=r.blendModes[l.blendMode],a.globalAlpha=v,a.save(),d.setToContext(a),a.imageSmoothingEnabled=!(!r.antialias||l.frame&&l.frame.source.scaleMode),!0};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(33),o=i(192),r=[],a=!1,l=function(){var h=function(y,T,C,S,E){T===void 0&&(T=1),C===void 0&&(C=1),S===void 0&&(S=n.CANVAS),E===void 0&&(E=!1);var M,O=d(S);return O===null?(O={parent:y,canvas:document.createElement("canvas"),type:S},S===n.CANVAS&&r.push(O),M=O.canvas):(O.parent=y,M=O.canvas),E&&(O.parent=M),M.width=T,M.height=C,a&&S===n.CANVAS&&o.disable(M.getContext("2d")),M},u=function(y,T,C){return h(y,T,C,n.CANVAS)},v=function(y,T,C){return h(y,T,C,n.WEBGL)},d=function(y){if(y===void 0&&(y=n.CANVAS),y===n.WEBGL)return null;for(var T=0;T<r.length;T++){var C=r[T];if(!C.parent&&C.type===y)return C}return null},c=function(y){var T=y instanceof HTMLCanvasElement;r.forEach(function(C){(T&&C.canvas===y||!T&&C.parent===y)&&(C.parent=null,C.canvas.width=1,C.canvas.height=1)})},p=function(){var y=0;return r.forEach(function(T){T.parent&&y++}),y},g=function(){return r.length-p()},m=function(){a=!0},x=function(){a=!1};return{create2D:u,create:h,createWebGL:v,disableSmoothing:m,enableSmoothing:x,first:d,free:g,pool:r,remove:c,total:p}};e.exports=l()},function(e,f){var i={};e.exports=i,function(){i._nextId=0,i._seed=0,i._nowStartTime=+new Date,i.extend=function(o,r){var a,l;typeof r=="boolean"?(a=2,l=r):(a=1,l=!0);for(var h=a;h<arguments.length;h++){var u=arguments[h];if(u)for(var v in u)l&&u[v]&&u[v].constructor===Object&&(!o[v]||o[v].constructor===Object)?(o[v]=o[v]||{},i.extend(o[v],l,u[v])):o[v]=u[v]}return o},i.clone=function(o,r){return i.extend({},r,o)},i.keys=function(o){if(Object.keys)return Object.keys(o);var r=[];for(var a in o)r.push(a);return r},i.values=function(o){var r=[];if(Object.keys){for(var a=Object.keys(o),l=0;l<a.length;l++)r.push(o[a[l]]);return r}for(var h in o)r.push(o[h]);return r},i.get=function(o,r,a,l){r=r.split(".").slice(a,l);for(var h=0;h<r.length;h+=1)o=o[r[h]];return o},i.set=function(o,r,a,l,h){var u=r.split(".").slice(l,h);return i.get(o,r,0,-1)[u[u.length-1]]=a,a},i.shuffle=function(o){for(var r=o.length-1;r>0;r--){var a=Math.floor(i.random()*(r+1)),l=o[r];o[r]=o[a],o[a]=l}return o},i.choose=function(o){return o[Math.floor(i.random()*o.length)]},i.isElement=function(o){return typeof HTMLElement!="undefined"?o instanceof HTMLElement:!!(o&&o.nodeType&&o.nodeName)},i.isArray=function(o){return Object.prototype.toString.call(o)==="[object Array]"},i.isFunction=function(o){return typeof o=="function"},i.isPlainObject=function(o){return typeof o=="object"&&o.constructor===Object},i.isString=function(o){return Object.prototype.toString.call(o)==="[object String]"},i.clamp=function(o,r,a){return o<r?r:o>a?a:o},i.sign=function(o){return o<0?-1:1},i.now=function(){if(typeof window!="undefined"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return new Date-i._nowStartTime},i.random=function(o,r){return o=typeof o!="undefined"?o:0,r=typeof r!="undefined"?r:1,o+n()*(r-o)};var n=function(){return i._seed=(i._seed*9301+49297)%233280,i._seed/233280};i.colorToNumber=function(o){return o=o.replace("#",""),o.length==3&&(o=o.charAt(0)+o.charAt(0)+o.charAt(1)+o.charAt(1)+o.charAt(2)+o.charAt(2)),parseInt(o,16)},i.logLevel=1,i.log=function(){console&&i.logLevel>0&&i.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},i.info=function(){console&&i.logLevel>0&&i.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},i.warn=function(){console&&i.logLevel>0&&i.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},i.nextId=function(){return i._nextId++},i.indexOf=function(o,r){if(o.indexOf)return o.indexOf(r);for(var a=0;a<o.length;a++)if(o[a]===r)return a;return-1},i.map=function(o,r){if(o.map)return o.map(r);for(var a=[],l=0;l<o.length;l+=1)a.push(r(o[l]));return a},i.topologicalSort=function(o){var r=[],a=[],l=[];for(var h in o)!a[h]&&!l[h]&&i._topologicalSort(h,a,l,o,r);return r},i._topologicalSort=function(o,r,a,l,h){var u=l[o]||[];a[o]=!0;for(var v=0;v<u.length;v+=1){var d=u[v];a[d]||r[d]||i._topologicalSort(d,r,a,l,h)}a[o]=!1,r[o]=!0,h.push(o)},i.chain=function(){for(var o=[],r=0;r<arguments.length;r+=1){var a=arguments[r];a._chained?o.push.apply(o,a._chained):o.push(a)}var l=function(){for(var h,u=new Array(arguments.length),v=0,d=arguments.length;v<d;v++)u[v]=arguments[v];for(v=0;v<o.length;v+=1){var c=o[v].apply(h,u);typeof c!="undefined"&&(h=c)}return h};return l._chained=o,l},i.chainPathBefore=function(o,r,a){return i.set(o,r,i.chain(a,i.get(o,r)))},i.chainPathAfter=function(o,r,a){return i.set(o,r,i.chain(i.get(o,r),a))}}()},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n={VERSION:"3.55.2",BlendModes:i(35),ScaleModes:i(168),AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,FOREVER:-1,NONE:4,UP:5,DOWN:6,LEFT:7,RIGHT:8};e.exports=n},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(11),r=i(15),a=i(47),l=new n({Extends:r,Mixins:[o.AlphaSingle,o.BlendMode,o.Depth,o.GetBounds,o.Mask,o.Origin,o.Pipeline,o.ScrollFactor,o.Transform,o.Visible],initialize:function(u,v,d){v===void 0&&(v="Shape"),r.call(this,u,v),this.geom=d,this.pathData=[],this.pathIndexes=[],this.fillColor=16777215,this.fillAlpha=1,this.strokeColor=16777215,this.strokeAlpha=1,this.lineWidth=1,this.isFilled=!1,this.isStroked=!1,this.closePath=!0,this._tempLine=new a,this.width=0,this.height=0,this.initPipeline()},setFillStyle:function(h,u){return u===void 0&&(u=1),h===void 0?this.isFilled=!1:(this.fillColor=h,this.fillAlpha=u,this.isFilled=!0),this},setStrokeStyle:function(h,u,v){return v===void 0&&(v=1),h===void 0?this.isStroked=!1:(this.lineWidth=h,this.strokeColor=u,this.strokeAlpha=v,this.isStroked=!0),this},setClosePath:function(h){return this.closePath=h,this},setSize:function(h,u){return this.width=h,this.height=u,this},setDisplaySize:function(h,u){return this.displayWidth=h,this.displayHeight=u,this},preDestroy:function(){this.geom=null,this._tempLine=null,this.pathData=[],this.pathIndexes=[]},displayWidth:{get:function(){return this.scaleX*this.width},set:function(h){this.scaleX=h/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(h){this.scaleY=h/this.height}}});e.exports=l},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(14),o=function(r){return r*n.DEG_TO_RAD};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={DESTROY:i(743),FADE_IN_COMPLETE:i(744),FADE_IN_START:i(745),FADE_OUT_COMPLETE:i(746),FADE_OUT_START:i(747),FLASH_COMPLETE:i(748),FLASH_START:i(749),FOLLOW_UPDATE:i(750),PAN_COMPLETE:i(751),PAN_START:i(752),POST_RENDER:i(753),PRE_RENDER:i(754),ROTATE_COMPLETE:i(755),ROTATE_START:i(756),SHAKE_COMPLETE:i(757),SHAKE_START:i(758),ZOOM_COMPLETE:i(759),ZOOM_START:i(760)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(103),r=i(328),a=i(188),l=i(329),h=new n({initialize:function(v,d,c,p){v===void 0&&(v=0),d===void 0&&(d=0),c===void 0&&(c=0),p===void 0&&(p=255),this.r=0,this.g=0,this.b=0,this.a=255,this._h=0,this._s=0,this._v=0,this._locked=!1,this.gl=[0,0,0,1],this._color=0,this._color32=0,this._rgba="",this.setTo(v,d,c,p)},transparent:function(){return this._locked=!0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this._locked=!1,this.update(!0)},setTo:function(u,v,d,c,p){return c===void 0&&(c=255),p===void 0&&(p=!0),this._locked=!0,this.red=u,this.green=v,this.blue=d,this.alpha=c,this._locked=!1,this.update(p)},setGLTo:function(u,v,d,c){return c===void 0&&(c=1),this._locked=!0,this.redGL=u,this.greenGL=v,this.blueGL=d,this.alphaGL=c,this._locked=!1,this.update(!0)},setFromRGB:function(u){return this._locked=!0,this.red=u.r,this.green=u.g,this.blue=u.b,u.hasOwnProperty("a")&&(this.alpha=u.a),this._locked=!1,this.update(!0)},setFromHSV:function(u,v,d){return a(u,v,d,this)},update:function(u){if(u===void 0&&(u=!1),this._locked)return this;var v=this.r,d=this.g,c=this.b,p=this.a;return this._color=o(v,d,c),this._color32=r(v,d,c,p),this._rgba="rgba("+v+","+d+","+c+","+p/255+")",u&&l(v,d,c,this),this},updateHSV:function(){var u=this.r,v=this.g,d=this.b;return l(u,v,d,this),this},clone:function(){return new h(this.r,this.g,this.b,this.a)},gray:function(u){return this.setTo(u,u,u)},random:function(u,v){u===void 0&&(u=0),v===void 0&&(v=255);var d=Math.floor(u+Math.random()*(v-u)),c=Math.floor(u+Math.random()*(v-u)),p=Math.floor(u+Math.random()*(v-u));return this.setTo(d,c,p)},randomGray:function(u,v){u===void 0&&(u=0),v===void 0&&(v=255);var d=Math.floor(u+Math.random()*(v-u));return this.setTo(d,d,d)},saturate:function(u){return this.s+=u/100,this},desaturate:function(u){return this.s-=u/100,this},lighten:function(u){return this.v+=u/100,this},darken:function(u){return this.v-=u/100,this},brighten:function(u){var v=this.r,d=this.g,c=this.b;return v=Math.max(0,Math.min(255,v-Math.round(255*-(u/100)))),d=Math.max(0,Math.min(255,d-Math.round(255*-(u/100)))),c=Math.max(0,Math.min(255,c-Math.round(255*-(u/100)))),this.setTo(v,d,c)},color:{get:function(){return this._color}},color32:{get:function(){return this._color32}},rgba:{get:function(){return this._rgba}},redGL:{get:function(){return this.gl[0]},set:function(u){this.gl[0]=Math.min(Math.abs(u),1),this.r=Math.floor(this.gl[0]*255),this.update(!0)}},greenGL:{get:function(){return this.gl[1]},set:function(u){this.gl[1]=Math.min(Math.abs(u),1),this.g=Math.floor(this.gl[1]*255),this.update(!0)}},blueGL:{get:function(){return this.gl[2]},set:function(u){this.gl[2]=Math.min(Math.abs(u),1),this.b=Math.floor(this.gl[2]*255),this.update(!0)}},alphaGL:{get:function(){return this.gl[3]},set:function(u){this.gl[3]=Math.min(Math.abs(u),1),this.a=Math.floor(this.gl[3]*255),this.update()}},red:{get:function(){return this.r},set:function(u){u=Math.floor(Math.abs(u)),this.r=Math.min(u,255),this.gl[0]=u/255,this.update(!0)}},green:{get:function(){return this.g},set:function(u){u=Math.floor(Math.abs(u)),this.g=Math.min(u,255),this.gl[1]=u/255,this.update(!0)}},blue:{get:function(){return this.b},set:function(u){u=Math.floor(Math.abs(u)),this.b=Math.min(u,255),this.gl[2]=u/255,this.update(!0)}},alpha:{get:function(){return this.a},set:function(u){u=Math.floor(Math.abs(u)),this.a=Math.min(u,255),this.gl[3]=u/255,this.update()}},h:{get:function(){return this._h},set:function(u){this._h=u,a(u,this._s,this._v,this)}},s:{get:function(){return this._s},set:function(u){this._s=u,a(this._h,u,this._v,this)}},v:{get:function(){return this._v},set:function(u){this._v=u,a(this._h,this._s,u,this)}}});e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=new n({initialize:function(a,l,h){this.x=0,this.y=0,this.z=0,typeof a=="object"?(this.x=a.x||0,this.y=a.y||0,this.z=a.z||0):(this.x=a||0,this.y=l||0,this.z=h||0)},up:function(){return this.x=0,this.y=1,this.z=0,this},min:function(r){return this.x=Math.min(this.x,r.x),this.y=Math.min(this.y,r.y),this.z=Math.min(this.z,r.z),this},max:function(r){return this.x=Math.max(this.x,r.x),this.y=Math.max(this.y,r.y),this.z=Math.max(this.z,r.z),this},clone:function(){return new o(this.x,this.y,this.z)},addVectors:function(r,a){return this.x=r.x+a.x,this.y=r.y+a.y,this.z=r.z+a.z,this},crossVectors:function(r,a){var l=r.x,h=r.y,u=r.z,v=a.x,d=a.y,c=a.z;return this.x=h*c-u*d,this.y=u*v-l*c,this.z=l*d-h*v,this},equals:function(r){return this.x===r.x&&this.y===r.y&&this.z===r.z},copy:function(r){return this.x=r.x,this.y=r.y,this.z=r.z||0,this},set:function(r,a,l){return typeof r=="object"?(this.x=r.x||0,this.y=r.y||0,this.z=r.z||0):(this.x=r||0,this.y=a||0,this.z=l||0),this},setFromMatrixPosition:function(r){return this.fromArray(r.val,12)},setFromMatrixColumn:function(r,a){return this.fromArray(r.val,a*4)},fromArray:function(r,a){return a===void 0&&(a=0),this.x=r[a],this.y=r[a+1],this.z=r[a+2],this},add:function(r){return this.x+=r.x,this.y+=r.y,this.z+=r.z||0,this},addScalar:function(r){return this.x+=r,this.y+=r,this.z+=r,this},addScale:function(r,a){return this.x+=r.x*a,this.y+=r.y*a,this.z+=r.z*a||0,this},subtract:function(r){return this.x-=r.x,this.y-=r.y,this.z-=r.z||0,this},multiply:function(r){return this.x*=r.x,this.y*=r.y,this.z*=r.z||1,this},scale:function(r){return isFinite(r)?(this.x*=r,this.y*=r,this.z*=r):(this.x=0,this.y=0,this.z=0),this},divide:function(r){return this.x/=r.x,this.y/=r.y,this.z/=r.z||1,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function(r){var a=r.x-this.x,l=r.y-this.y,h=r.z-this.z||0;return Math.sqrt(a*a+l*l+h*h)},distanceSq:function(r){var a=r.x-this.x,l=r.y-this.y,h=r.z-this.z||0;return a*a+l*l+h*h},length:function(){var r=this.x,a=this.y,l=this.z;return Math.sqrt(r*r+a*a+l*l)},lengthSq:function(){var r=this.x,a=this.y,l=this.z;return r*r+a*a+l*l},normalize:function(){var r=this.x,a=this.y,l=this.z,h=r*r+a*a+l*l;return h>0&&(h=1/Math.sqrt(h),this.x=r*h,this.y=a*h,this.z=l*h),this},dot:function(r){return this.x*r.x+this.y*r.y+this.z*r.z},cross:function(r){var a=this.x,l=this.y,h=this.z,u=r.x,v=r.y,d=r.z;return this.x=l*d-h*v,this.y=h*u-a*d,this.z=a*v-l*u,this},lerp:function(r,a){a===void 0&&(a=0);var l=this.x,h=this.y,u=this.z;return this.x=l+a*(r.x-l),this.y=h+a*(r.y-h),this.z=u+a*(r.z-u),this},applyMatrix3:function(r){var a=this.x,l=this.y,h=this.z,u=r.val;return this.x=u[0]*a+u[3]*l+u[6]*h,this.y=u[1]*a+u[4]*l+u[7]*h,this.z=u[2]*a+u[5]*l+u[8]*h,this},applyMatrix4:function(r){var a=this.x,l=this.y,h=this.z,u=r.val,v=1/(u[3]*a+u[7]*l+u[11]*h+u[15]);return this.x=(u[0]*a+u[4]*l+u[8]*h+u[12])*v,this.y=(u[1]*a+u[5]*l+u[9]*h+u[13])*v,this.z=(u[2]*a+u[6]*l+u[10]*h+u[14])*v,this},transformMat3:function(r){var a=this.x,l=this.y,h=this.z,u=r.val;return this.x=a*u[0]+l*u[3]+h*u[6],this.y=a*u[1]+l*u[4]+h*u[7],this.z=a*u[2]+l*u[5]+h*u[8],this},transformMat4:function(r){var a=this.x,l=this.y,h=this.z,u=r.val;return this.x=u[0]*a+u[4]*l+u[8]*h+u[12],this.y=u[1]*a+u[5]*l+u[9]*h+u[13],this.z=u[2]*a+u[6]*l+u[10]*h+u[14],this},transformCoordinates:function(r){var a=this.x,l=this.y,h=this.z,u=r.val,v=a*u[0]+l*u[4]+h*u[8]+u[12],d=a*u[1]+l*u[5]+h*u[9]+u[13],c=a*u[2]+l*u[6]+h*u[10]+u[14],p=a*u[3]+l*u[7]+h*u[11]+u[15];return this.x=v/p,this.y=d/p,this.z=c/p,this},transformQuat:function(r){var a=this.x,l=this.y,h=this.z,u=r.x,v=r.y,d=r.z,c=r.w,p=c*a+v*h-d*l,g=c*l+d*a-u*h,m=c*h+u*l-v*a,x=-u*a-v*l-d*h;return this.x=p*c+x*-u+g*-d-m*-v,this.y=g*c+x*-v+m*-u-p*-d,this.z=m*c+x*-d+p*-v-g*-u,this},project:function(r){var a=this.x,l=this.y,h=this.z,u=r.val,v=u[0],d=u[1],c=u[2],p=u[3],g=u[4],m=u[5],x=u[6],y=u[7],T=u[8],C=u[9],S=u[10],E=u[11],M=u[12],O=u[13],L=u[14],R=u[15],w=1/(a*p+l*y+h*E+R);return this.x=(a*v+l*g+h*T+M)*w,this.y=(a*d+l*m+h*C+O)*w,this.z=(a*c+l*x+h*S+L)*w,this},projectViewMatrix:function(r,a){return this.applyMatrix4(r).applyMatrix4(a)},unprojectViewMatrix:function(r,a){return this.applyMatrix4(r).applyMatrix4(a)},unproject:function(r,a){var l=r.x,h=r.y,u=r.z,v=r.w,d=this.x-l,c=v-this.y-1-h,p=this.z;return this.x=2*d/u-1,this.y=2*c/v-1,this.z=2*p-1,this.project(a)},reset:function(){return this.x=0,this.y=0,this.z=0,this}});o.ZERO=new o,o.RIGHT=new o(1,0,0),o.LEFT=new o(-1,0,0),o.UP=new o(0,-1,0),o.DOWN=new o(0,1,0),o.FORWARD=new o(0,0,1),o.BACK=new o(0,0,-1),o.ONE=new o(1,1,1),e.exports=o},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={CSV:0,TILED_JSON:1,ARRAY_2D:2,WELTMEISTER:3}},function(e,f,i){var n={};e.exports=n;var o=i(64),r=i(83),a=i(165),l=i(32),h=i(84),u=i(271);(function(){n._inertiaScale=4,n._nextCollidingGroupId=1,n._nextNonCollidingGroupId=-1,n._nextCategory=1,n.create=function(d){var c={id:l.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:null,position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},previousPositionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inverseMass:0,inertia:0,inverseInertia:0,_original:null,render:{visible:!0,opacity:1,sprite:{xOffset:0,yOffset:0},fillColor:null,fillOpacity:null,lineColor:null,lineOpacity:null,lineThickness:null},gameObject:null,scale:{x:1,y:1},centerOfMass:{x:0,y:0},centerOffset:{x:0,y:0},gravityScale:{x:1,y:1},ignoreGravity:!1,ignorePointer:!1,onCollideCallback:null,onCollideEndCallback:null,onCollideActiveCallback:null,onCollideWith:{}};!d.hasOwnProperty("position")&&d.hasOwnProperty("vertices")?d.position=o.centre(d.vertices):d.hasOwnProperty("vertices")||(c.vertices=o.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"));var p=l.extend(c,d);return v(p,d),p.setOnCollideWith=function(g,m){return m?this.onCollideWith[g.id]=m:delete this.onCollideWith[g.id],this},p},n.nextGroup=function(d){return d?n._nextNonCollidingGroupId--:n._nextCollidingGroupId++},n.nextCategory=function(){return n._nextCategory=n._nextCategory<<1,n._nextCategory};var v=function(d,c){c=c||{},n.set(d,{bounds:d.bounds||h.create(d.vertices),positionPrev:d.positionPrev||r.clone(d.position),anglePrev:d.anglePrev||d.angle,vertices:d.vertices,parts:d.parts||[d],isStatic:d.isStatic,isSleeping:d.isSleeping,parent:d.parent||d});var p=d.bounds;if(o.rotate(d.vertices,d.angle,d.position),u.rotate(d.axes,d.angle),h.update(p,d.vertices,d.velocity),n.set(d,{axes:c.axes||d.axes,area:c.area||d.area,mass:c.mass||d.mass,inertia:c.inertia||d.inertia}),d.parts.length===1){var g=d.centerOfMass,m=d.centerOffset,x=p.max.x-p.min.x,y=p.max.y-p.min.y;g.x=-(p.min.x-d.position.x)/x,g.y=-(p.min.y-d.position.y)/y,m.x=x*g.x,m.y=y*g.y}};n.set=function(d,c,p){var g;typeof c=="string"&&(g=c,c={},c[g]=p);for(g in c)if(!!Object.prototype.hasOwnProperty.call(c,g))switch(p=c[g],g){case"isStatic":n.setStatic(d,p);break;case"isSleeping":a.set(d,p);break;case"mass":n.setMass(d,p);break;case"density":n.setDensity(d,p);break;case"inertia":n.setInertia(d,p);break;case"vertices":n.setVertices(d,p);break;case"position":n.setPosition(d,p);break;case"angle":n.setAngle(d,p);break;case"velocity":n.setVelocity(d,p);break;case"angularVelocity":n.setAngularVelocity(d,p);break;case"parts":n.setParts(d,p);break;case"centre":n.setCentre(d,p);break;default:d[g]=p}},n.setStatic=function(d,c){for(var p=0;p<d.parts.length;p++){var g=d.parts[p];g.isStatic=c,c?(g._original={restitution:g.restitution,friction:g.friction,mass:g.mass,inertia:g.inertia,density:g.density,inverseMass:g.inverseMass,inverseInertia:g.inverseInertia},g.restitution=0,g.friction=1,g.mass=g.inertia=g.density=1/0,g.inverseMass=g.inverseInertia=0,g.positionPrev.x=g.position.x,g.positionPrev.y=g.position.y,g.anglePrev=g.angle,g.angularVelocity=0,g.speed=0,g.angularSpeed=0,g.motion=0):g._original&&(g.restitution=g._original.restitution,g.friction=g._original.friction,g.mass=g._original.mass,g.inertia=g._original.inertia,g.density=g._original.density,g.inverseMass=g._original.inverseMass,g.inverseInertia=g._original.inverseInertia,g._original=null)}},n.setMass=function(d,c){var p=d.inertia/(d.mass/6);d.inertia=p*(c/6),d.inverseInertia=1/d.inertia,d.mass=c,d.inverseMass=1/d.mass,d.density=d.mass/d.area},n.setDensity=function(d,c){n.setMass(d,c*d.area),d.density=c},n.setInertia=function(d,c){d.inertia=c,d.inverseInertia=1/d.inertia},n.setVertices=function(d,c){c[0].body===d?d.vertices=c:d.vertices=o.create(c,d),d.axes=u.fromVertices(d.vertices),d.area=o.area(d.vertices),n.setMass(d,d.density*d.area);var p=o.centre(d.vertices);o.translate(d.vertices,p,-1),n.setInertia(d,n._inertiaScale*o.inertia(d.vertices,d.mass)),o.translate(d.vertices,d.position),h.update(d.bounds,d.vertices,d.velocity)},n.setParts=function(d,c,p){var g;for(c=c.slice(0),d.parts.length=0,d.parts.push(d),d.parent=d,g=0;g<c.length;g++){var m=c[g];m!==d&&(m.parent=d,d.parts.push(m))}if(d.parts.length!==1){if(p=typeof p!="undefined"?p:!0,p){var x=[];for(g=0;g<c.length;g++)x=x.concat(c[g].vertices);o.clockwiseSort(x);var y=o.hull(x),T=o.centre(y);n.setVertices(d,y),o.translate(d.vertices,T)}var C=n._totalProperties(d),S=C.centre.x,E=C.centre.y,M=d.bounds,O=d.centerOfMass,L=d.centerOffset;h.update(M,d.vertices,d.velocity),O.x=-(M.min.x-S)/(M.max.x-M.min.x),O.y=-(M.min.y-E)/(M.max.y-M.min.y),L.x=S,L.y=E,d.area=C.area,d.parent=d,d.position.x=S,d.position.y=E,d.positionPrev.x=S,d.positionPrev.y=E,n.setMass(d,C.mass),n.setInertia(d,C.inertia),n.setPosition(d,C.centre)}},n.setCentre=function(d,c,p){p?(d.positionPrev.x+=c.x,d.positionPrev.y+=c.y,d.position.x+=c.x,d.position.y+=c.y):(d.positionPrev.x=c.x-(d.position.x-d.positionPrev.x),d.positionPrev.y=c.y-(d.position.y-d.positionPrev.y),d.position.x=c.x,d.position.y=c.y)},n.setPosition=function(d,c){var p=r.sub(c,d.position);d.positionPrev.x+=p.x,d.positionPrev.y+=p.y;for(var g=0;g<d.parts.length;g++){var m=d.parts[g];m.position.x+=p.x,m.position.y+=p.y,o.translate(m.vertices,p),h.update(m.bounds,m.vertices,d.velocity)}},n.setAngle=function(d,c){var p=c-d.angle;d.anglePrev+=p;for(var g=0;g<d.parts.length;g++){var m=d.parts[g];m.angle+=p,o.rotate(m.vertices,p,d.position),u.rotate(m.axes,p),h.update(m.bounds,m.vertices,d.velocity),g>0&&r.rotateAbout(m.position,p,d.position,m.position)}},n.setVelocity=function(d,c){d.positionPrev.x=d.position.x-c.x,d.positionPrev.y=d.position.y-c.y,d.velocity.x=c.x,d.velocity.y=c.y,d.speed=r.magnitude(d.velocity)},n.setAngularVelocity=function(d,c){d.anglePrev=d.angle-c,d.angularVelocity=c,d.angularSpeed=Math.abs(d.angularVelocity)},n.translate=function(d,c){n.setPosition(d,r.add(d.position,c))},n.rotate=function(d,c,p){if(!p)n.setAngle(d,d.angle+c);else{var g=Math.cos(c),m=Math.sin(c),x=d.position.x-p.x,y=d.position.y-p.y;n.setPosition(d,{x:p.x+(x*g-y*m),y:p.y+(x*m+y*g)}),n.setAngle(d,d.angle+c)}},n.scale=function(d,c,p,g){var m=0,x=0;g=g||d.position;for(var y=0;y<d.parts.length;y++){var T=d.parts[y];T.scale.x=c,T.scale.y=p,o.scale(T.vertices,c,p,g),T.axes=u.fromVertices(T.vertices),T.area=o.area(T.vertices),n.setMass(T,d.density*T.area),o.translate(T.vertices,{x:-T.position.x,y:-T.position.y}),n.setInertia(T,n._inertiaScale*o.inertia(T.vertices,T.mass)),o.translate(T.vertices,{x:T.position.x,y:T.position.y}),y>0&&(m+=T.area,x+=T.inertia),T.position.x=g.x+(T.position.x-g.x)*c,T.position.y=g.y+(T.position.y-g.y)*p,h.update(T.bounds,T.vertices,d.velocity)}d.parts.length>1&&(d.area=m,d.isStatic||(n.setMass(d,d.density*m),n.setInertia(d,x))),d.circleRadius&&(c===p?d.circleRadius*=c:d.circleRadius=null)},n.update=function(d,c,p,g){var m=Math.pow(c*p*d.timeScale,2),x=1-d.frictionAir*p*d.timeScale,y=d.position.x-d.positionPrev.x,T=d.position.y-d.positionPrev.y;d.velocity.x=y*x*g+d.force.x/d.mass*m,d.velocity.y=T*x*g+d.force.y/d.mass*m,d.positionPrev.x=d.position.x,d.positionPrev.y=d.position.y,d.position.x+=d.velocity.x,d.position.y+=d.velocity.y,d.angularVelocity=(d.angle-d.anglePrev)*x*g+d.torque/d.inertia*m,d.anglePrev=d.angle,d.angle+=d.angularVelocity,d.speed=r.magnitude(d.velocity),d.angularSpeed=Math.abs(d.angularVelocity);for(var C=0;C<d.parts.length;C++){var S=d.parts[C];o.translate(S.vertices,d.velocity),C>0&&(S.position.x+=d.velocity.x,S.position.y+=d.velocity.y),d.angularVelocity!==0&&(o.rotate(S.vertices,d.angularVelocity,d.position),u.rotate(S.axes,d.angularVelocity),C>0&&r.rotateAbout(S.position,d.angularVelocity,d.position,S.position)),h.update(S.bounds,S.vertices,d.velocity)}},n.applyForce=function(d,c,p){d.force.x+=p.x,d.force.y+=p.y;var g={x:c.x-d.position.x,y:c.y-d.position.y};d.torque+=g.x*p.y-g.y*p.x},n._totalProperties=function(d){for(var c={mass:0,area:0,inertia:0,centre:{x:0,y:0}},p=d.parts.length===1?0:1;p<d.parts.length;p++){var g=d.parts[p],m=g.mass!==1/0?g.mass:1;c.mass+=m,c.area+=g.area,c.inertia+=g.inertia,c.centre=r.add(c.centre,r.mult(g.position,m))}return c.centre=r.div(c.centre,c.mass),c}})()},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n.y+n.height-n.height*n.originY};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n.x-n.width*n.originX};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n.x+n.width-n.width*n.originX};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n.y-n.height*n.originY};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r,a,l,h){a===void 0&&(a=0),l===void 0&&(l=0),h===void 0&&(h=1);var u,v=0,d=n.length;if(h===1)for(u=l;u<d;u++)n[u][o]+=r+v*a,v++;else for(u=l;u>=0;u--)n[u][o]+=r+v*a,v++;return n};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(307),r=i(172),a=i(56),l=i(173),h=i(3),u=new n({initialize:function(d,c,p,g){d===void 0&&(d=0),c===void 0&&(c=0),p===void 0&&(p=0),g===void 0&&(g=0),this.type=a.LINE,this.x1=d,this.y1=c,this.x2=p,this.y2=g},getPoint:function(v,d){return o(this,v,d)},getPoints:function(v,d,c){return r(this,v,d,c)},getRandomPoint:function(v){return l(this,v)},setTo:function(v,d,c,p){return v===void 0&&(v=0),d===void 0&&(d=0),c===void 0&&(c=0),p===void 0&&(p=0),this.x1=v,this.y1=d,this.x2=c,this.y2=p,this},getPointA:function(v){return v===void 0&&(v=new h),v.set(this.x1,this.y1),v},getPointB:function(v){return v===void 0&&(v=new h),v.set(this.x2,this.y2),v},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(v){this.x1<=this.x2?this.x1=v:this.x2=v}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(v){this.x1>this.x2?this.x1=v:this.x2=v}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(v){this.y1<=this.y2?this.y1=v:this.y2=v}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(v){this.y1>this.y2?this.y1=v:this.y2=v}}});e.exports=u},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r,a){var l=r||o.fillColor,h=a||o.fillAlpha,u=(l&16711680)>>>16,v=(l&65280)>>>8,d=l&255;n.fillStyle="rgba("+u+","+v+","+d+","+h+")"};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=new n({initialize:function(a,l,h,u){var v=[];u.forEach(function(c){c&&v.push(c)}),this.loader=a,this.type=l,this.key=h,this.multiKeyIndex=a.multiKeyIndex++,this.files=v,this.complete=!1,this.pending=v.length,this.failed=0,this.config={},this.baseURL=a.baseURL,this.path=a.path,this.prefix=a.prefix;for(var d=0;d<v.length;d++)v[d].multiFile=this},isReadyToProcess:function(){return this.pending===0&&this.failed===0&&!this.complete},addToMultiFile:function(r){return this.files.push(r),r.multiFile=this,this.pending++,this.complete=!1,this},onFileComplete:function(r){var a=this.files.indexOf(r);a!==-1&&this.pending--},onFileFailed:function(r){var a=this.files.indexOf(r);a!==-1&&this.failed++}});e.exports=o},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r,a){var l=n-r,h=o-a;return Math.sqrt(l*l+h*h)};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={BOOT:i(922),DESTROY:i(923),DRAG_END:i(924),DRAG_ENTER:i(925),DRAG:i(926),DRAG_LEAVE:i(927),DRAG_OVER:i(928),DRAG_START:i(929),DROP:i(930),GAME_OUT:i(931),GAME_OVER:i(932),GAMEOBJECT_DOWN:i(933),GAMEOBJECT_DRAG_END:i(934),GAMEOBJECT_DRAG_ENTER:i(935),GAMEOBJECT_DRAG:i(936),GAMEOBJECT_DRAG_LEAVE:i(937),GAMEOBJECT_DRAG_OVER:i(938),GAMEOBJECT_DRAG_START:i(939),GAMEOBJECT_DROP:i(940),GAMEOBJECT_MOVE:i(941),GAMEOBJECT_OUT:i(942),GAMEOBJECT_OVER:i(943),GAMEOBJECT_POINTER_DOWN:i(944),GAMEOBJECT_POINTER_MOVE:i(945),GAMEOBJECT_POINTER_OUT:i(946),GAMEOBJECT_POINTER_OVER:i(947),GAMEOBJECT_POINTER_UP:i(948),GAMEOBJECT_POINTER_WHEEL:i(949),GAMEOBJECT_UP:i(950),GAMEOBJECT_WHEEL:i(951),MANAGER_BOOT:i(952),MANAGER_PROCESS:i(953),MANAGER_UPDATE:i(954),POINTER_DOWN:i(955),POINTER_DOWN_OUTSIDE:i(956),POINTER_MOVE:i(957),POINTER_OUT:i(958),POINTER_OVER:i(959),POINTER_UP:i(960),POINTER_UP_OUTSIDE:i(961),POINTER_WHEEL:i(962),POINTERLOCK_CHANGE:i(963),PRE_UPDATE:i(964),SHUTDOWN:i(965),START:i(966),UPDATE:i(967)}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return n.y=o+n.height*n.originY,n};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return n.x=o+n.width*n.originX,n};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return n.x=o-n.width+n.width*n.originX,n};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return n.y=o-n.height+n.height*n.originY,n};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r){return n.width<=0||n.height<=0?!1:n.x<=o&&n.x+n.width>=o&&n.y<=r&&n.y+n.height>=r};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(175),r=i(9),a=i(374),l=i(2),h=i(69),u=i(91),v=i(141),d=i(12),c=i(375),p=new n({Extends:r,initialize:function(m){r.call(this);var x=m.game,y=x.renderer,T=y.gl;this.name=l(m,"name","WebGLPipeline"),this.game=x,this.renderer=y,this.manager,this.gl=T,this.view=x.canvas,this.width=0,this.height=0,this.vertexCount=0,this.vertexCapacity=0,this.vertexData,this.vertexBuffer,this.topology=l(m,"topology",T.TRIANGLES),this.bytes,this.vertexViewF32,this.vertexViewU32,this.active=!0,this.currentUnit=0,this.forceZero=l(m,"forceZero",!1),this.hasBooted=!1,this.isPostFX=!1,this.renderTargets=[],this.currentRenderTarget,this.shaders=[],this.currentShader,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.config=m,this.glReset=!1},boot:function(){var g,m=this.gl,x=this.config,y=this.renderer;this.isPostFX||(this.projectionMatrix=new h().identity());var T=this.renderTargets,C=l(x,"renderTarget",!1);typeof C=="boolean"&&C&&(C=1);var S=y.width,E=y.height;if(typeof C=="number")for(g=0;g<C;g++)T.push(new v(y,S,E,1,0,!0));else if(Array.isArray(C))for(g=0;g<C.length;g++){var M=l(C[g],"scale",1),O=l(C[g],"minFilter",0),L=l(C[g],"autoClear",1);T.push(new v(y,S,E,M,O,L))}T.length&&(this.currentRenderTarget=T[0]),this.setShadersFromConfig(x);var R=this.shaders,w=0;for(g=0;g<R.length;g++)R[g].vertexSize>w&&(w=R[g].vertexSize);var D=l(x,"batchSize",y.config.batchSize);this.vertexCapacity=D*6;var B=new ArrayBuffer(this.vertexCapacity*w);this.vertexData=B,this.bytes=new Uint8Array(B),this.vertexViewF32=new Float32Array(B),this.vertexViewU32=new Uint32Array(B);var N=l(x,"vertices",null);for(N?(this.vertexViewF32.set(N),this.vertexBuffer=y.createVertexBuffer(B,m.STATIC_DRAW)):this.vertexBuffer=y.createVertexBuffer(B.byteLength,m.DYNAMIC_DRAW),this.setVertexBuffer(),g=R.length-1;g>=0;g--)R[g].rebind();this.hasBooted=!0,y.on(u.RESIZE,this.resize,this),y.on(u.PRE_RENDER,this.onPreRender,this),y.on(u.RENDER,this.onRender,this),y.on(u.POST_RENDER,this.onPostRender,this),this.emit(a.BOOT,this),this.onBoot()},onBoot:function(){},onResize:function(){},setShader:function(g,m){var x=this.renderer;if(g!==this.currentShader||x.currentProgram!==this.currentShader.program){this.flush(),x.resetTextures();var y=this.setVertexBuffer();y&&!m&&(m=!0),g.bind(m,!1),this.currentShader=g}return this},getShaderByName:function(g){for(var m=this.shaders,x=0;x<m.length;x++)if(m[x].name===g)return m[x]},setShadersFromConfig:function(g){var m,x=this.shaders,y=this.renderer;for(m=0;m<x.length;m++)x[m].destroy();var T="vertShader",C="fragShader",S="attributes",E=l(g,T,null),M=d.parseFragmentShaderMaxTextures(l(g,C,null),y.maxTextures),O=l(g,S,null),L=l(g,"shaders",[]),R=L.length;if(R===0)E&&M&&(this.shaders=[new c(this,"default",E,M,o(O))]);else{var w=[];for(m=0;m<R;m++){var D=L[m],B=l(D,"name","default"),N=l(D,T,E),z=d.parseFragmentShaderMaxTextures(l(D,C,M),y.maxTextures),X=l(D,S,O);N&&z&&w.push(new c(this,B,N,z,o(X)))}this.shaders=w}return this.shaders.length===0?console.warn("Pipeline: "+this.name+" - Invalid shader config"):this.currentShader=this.shaders[0],this},setGameObject:function(g,m){return m===void 0&&(m=g.frame),this.currentUnit=this.renderer.setTextureSource(m.source),this.currentUnit},shouldFlush:function(g){return g===void 0&&(g=0),this.vertexCount+g>this.vertexCapacity},resize:function(g,m){(g!==this.width||m!==this.height)&&this.flush(),this.width=g,this.height=m;for(var x=this.renderTargets,y=0;y<x.length;y++)x[y].resize(g,m);return this.setProjectionMatrix(g,m),this.emit(a.RESIZE,g,m,this),this.onResize(g,m),this},setProjectionMatrix:function(g,m){var x=this.projectionMatrix;if(!x)return this;this.projectionWidth=g,this.projectionHeight=m,x.ortho(0,g,m,0,-1e3,1e3);for(var y=this.shaders,T="uProjectionMatrix",C=0;C<y.length;C++){var S=y[C];S.hasUniform(T)&&(S.resetUniform(T),S.setMatrix4fv(T,!1,x.val,S))}return this},updateProjectionMatrix:function(){if(this.projectionMatrix){var g=this.renderer.projectionWidth,m=this.renderer.projectionHeight;(this.projectionWidth!==g||this.projectionHeight!==m)&&this.setProjectionMatrix(g,m)}},bind:function(g){if(g===void 0&&(g=this.currentShader),this.glReset)return this.rebind(g);var m=this.setVertexBuffer();return g.bind(m),this.currentShader=g,this.emit(a.BIND,this,g),this.onActive(g),this},rebind:function(g){this.setVertexBuffer();for(var m=this.shaders,x=m.length-1;x>=0;x--){var y=m[x].rebind();(!g||y===g)&&(this.currentShader=y)}return this.emit(a.REBIND,this.currentShader),this.onActive(this.currentShader),this.onRebind(),this.glReset=!1,this},setVertexBuffer:function(){var g=this.gl,m=this.vertexBuffer;return g.getParameter(g.ARRAY_BUFFER_BINDING)!==m?(g.bindBuffer(g.ARRAY_BUFFER,m),!0):!1},preBatch:function(g){return this.currentRenderTarget&&this.currentRenderTarget.bind(),this.onPreBatch(g),this},postBatch:function(g){return this.onDraw(this.currentRenderTarget),this.onPostBatch(g),this},onDraw:function(){},unbind:function(){this.currentRenderTarget&&this.currentRenderTarget.unbind()},flush:function(g){if(g===void 0&&(g=!1),this.vertexCount>0){this.emit(a.BEFORE_FLUSH,this,g),this.onBeforeFlush(g);var m=this.gl,x=this.vertexCount,y=this.currentShader.vertexSize;this.active&&(this.setVertexBuffer(),x===this.vertexCapacity?m.bufferData(m.ARRAY_BUFFER,this.vertexData,m.DYNAMIC_DRAW):m.bufferSubData(m.ARRAY_BUFFER,0,this.bytes.subarray(0,x*y)),m.drawArrays(this.topology,0,x)),this.vertexCount=0,this.emit(a.AFTER_FLUSH,this,g),this.onAfterFlush(g)}return this},onActive:function(){},onBind:function(){},onRebind:function(){},onBatch:function(){},onPreBatch:function(){},onPostBatch:function(){},onPreRender:function(){},onRender:function(){},onPostRender:function(){},onBeforeFlush:function(){},onAfterFlush:function(){},batchVert:function(g,m,x,y,T,C,S){var E=this.vertexViewF32,M=this.vertexViewU32,O=this.vertexCount*this.currentShader.vertexComponentCount-1;E[++O]=g,E[++O]=m,E[++O]=x,E[++O]=y,E[++O]=T,E[++O]=C,M[++O]=S,this.vertexCount++},batchQuad:function(g,m,x,y,T,C,S,E,M,O,L,R,w,D,B,N,z,X,k,K){K===void 0&&(K=this.currentUnit);var b=!1;return this.shouldFlush(6)&&(this.flush(),b=!0,K=this.setTexture2D(k)),this.batchVert(m,x,O,L,K,X,D),this.batchVert(y,T,O,w,K,X,N),this.batchVert(C,S,R,w,K,X,z),this.batchVert(m,x,O,L,K,X,D),this.batchVert(C,S,R,w,K,X,z),this.batchVert(E,M,R,L,K,X,B),this.onBatch(g),b},batchTri:function(g,m,x,y,T,C,S,E,M,O,L,R,w,D,B,N,z){z===void 0&&(z=this.currentUnit);var X=!1;return this.shouldFlush(3)&&(this.flush(),X=!0,z=this.setTexture2D(N)),this.batchVert(m,x,E,M,z,B,R),this.batchVert(y,T,E,L,z,B,w),this.batchVert(C,S,O,L,z,B,D),this.onBatch(g),X},drawFillRect:function(g,m,x,y,T,C,S,E){S===void 0&&(S=this.renderer.whiteTexture.glTexture),E===void 0&&(E=!0),g=Math.floor(g),m=Math.floor(m);var M=Math.floor(g+x),O=Math.floor(m+y),L=this.setTexture2D(S),R=d.getTintAppendFloatAlphaAndSwap(T,C),w=0,D=0,B=1,N=1;E&&(D=1,N=0),this.batchQuad(null,g,m,g,O,M,O,M,m,w,D,B,N,R,R,R,R,0,S,L)},setTexture2D:function(g){return g===void 0&&(g=this.renderer.whiteTexture.glTexture),this.currentUnit=this.renderer.setTexture2D(g),this.currentUnit},bindTexture:function(g,m){m===void 0&&(m=0);var x=this.gl;return x.activeTexture(x.TEXTURE0+m),x.bindTexture(x.TEXTURE_2D,g),this},bindRenderTarget:function(g,m){return this.bindTexture(g.texture,m)},setTime:function(g){return this.set1f(g,this.game.loop.getDuration()),this},set1f:function(g,m,x){return x===void 0&&(x=this.currentShader),x.set1f(g,m),this},set2f:function(g,m,x,y){return y===void 0&&(y=this.currentShader),y.set2f(g,m,x),this},set3f:function(g,m,x,y,T){return T===void 0&&(T=this.currentShader),T.set3f(g,m,x,y),this},set4f:function(g,m,x,y,T,C){return C===void 0&&(C=this.currentShader),C.set4f(g,m,x,y,T),this},set1fv:function(g,m,x){return x===void 0&&(x=this.currentShader),x.set1fv(g,m),this},set2fv:function(g,m,x){return x===void 0&&(x=this.currentShader),x.set2fv(g,m),this},set3fv:function(g,m,x){return x===void 0&&(x=this.currentShader),x.set3fv(g,m),this},set4fv:function(g,m,x){return x===void 0&&(x=this.currentShader),x.set4fv(g,m),this},set1iv:function(g,m,x){return x===void 0&&(x=this.currentShader),x.set1iv(g,m),this},set2iv:function(g,m,x){return x===void 0&&(x=this.currentShader),x.set2iv(g,m),this},set3iv:function(g,m,x){return x===void 0&&(x=this.currentShader),x.set3iv(g,m),this},set4iv:function(g,m,x){return x===void 0&&(x=this.currentShader),x.set4iv(g,m),this},set1i:function(g,m,x){return x===void 0&&(x=this.currentShader),x.set1i(g,m),this},set2i:function(g,m,x,y){return y===void 0&&(y=this.currentShader),y.set2i(g,m,x),this},set3i:function(g,m,x,y,T){return T===void 0&&(T=this.currentShader),T.set3i(g,m,x,y),this},set4i:function(g,m,x,y,T,C){return C===void 0&&(C=this.currentShader),C.set4i(g,m,x,y,T),this},setMatrix2fv:function(g,m,x,y){return y===void 0&&(y=this.currentShader),y.setMatrix2fv(g,m,x),this},setMatrix3fv:function(g,m,x,y){return y===void 0&&(y=this.currentShader),y.setMatrix3fv(g,m,x),this},setMatrix4fv:function(g,m,x,y){return y===void 0&&(y=this.currentShader),y.setMatrix4fv(g,m,x),this},destroy:function(){this.emit(a.DESTROY,this);var g,m=this.shaders;for(g=0;g<m.length;g++)m[g].destroy();var x=this.renderTargets;for(g=0;g<x.length;g++)x[g].destroy();this.gl.deleteBuffer(this.vertexBuffer);var y=this.renderer;return y.off(u.RESIZE,this.resize,this),y.off(u.PRE_RENDER,this.onPreRender,this),y.off(u.RENDER,this.onRender,this),y.off(u.POST_RENDER,this.onPostRender,this),this.removeAllListeners(),this.game=null,this.renderer=null,this.manager=null,this.gl=null,this.view=null,this.shaders=null,this.renderTargets=null,this.bytes=null,this.vertexViewF32=null,this.vertexViewU32=null,this.vertexData=null,this.vertexBuffer=null,this.currentShader=null,this.currentRenderTarget=null,this}});e.exports=p},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function n(I,G,Y){Y=Y||2;var U=G&&G.length,W=U?G[0]*Y:I.length,H=o(I,0,W,Y,!0),Z=[];if(!H||H.next===H.prev)return Z;var q,_,nt,rt,at,ct,ut;if(U&&(H=d(I,G,H,Y)),I.length>80*Y){q=nt=I[0],_=rt=I[1];for(var pt=Y;pt<W;pt+=Y)at=I[pt],ct=I[pt+1],at<q&&(q=at),ct<_&&(_=ct),at>nt&&(nt=at),ct>rt&&(rt=ct);ut=Math.max(nt-q,rt-_),ut=ut!==0?1/ut:0}return a(H,Z,Y,q,_,ut),Z}function o(I,G,Y,U,W){var H,Z;if(W===b(I,G,Y,U)>0)for(H=G;H<Y;H+=U)Z=X(H,I[H],I[H+1],Z);else for(H=Y-U;H>=G;H-=U)Z=X(H,I[H],I[H+1],Z);return Z&&O(Z,Z.next)&&(k(Z),Z=Z.next),Z}function r(I,G){if(!I)return I;G||(G=I);var Y=I,U;do if(U=!1,!Y.steiner&&(O(Y,Y.next)||M(Y.prev,Y,Y.next)===0)){if(k(Y),Y=G=Y.prev,Y===Y.next)break;U=!0}else Y=Y.next;while(U||Y!==G);return G}function a(I,G,Y,U,W,H,Z){if(!!I){!Z&&H&&x(I,U,W,H);for(var q=I,_,nt;I.prev!==I.next;){if(_=I.prev,nt=I.next,H?h(I,U,W,H):l(I)){G.push(_.i/Y),G.push(I.i/Y),G.push(nt.i/Y),k(I),I=nt.next,q=nt.next;continue}if(I=nt,I===q){Z?Z===1?(I=u(r(I),G,Y),a(I,G,Y,U,W,H,2)):Z===2&&v(I,G,Y,U,W,H):a(r(I),G,Y,U,W,H,1);break}}}}function l(I){var G=I.prev,Y=I,U=I.next;if(M(G,Y,U)>=0)return!1;for(var W=I.next.next;W!==I.prev;){if(S(G.x,G.y,Y.x,Y.y,U.x,U.y,W.x,W.y)&&M(W.prev,W,W.next)>=0)return!1;W=W.next}return!0}function h(I,G,Y,U){var W=I.prev,H=I,Z=I.next;if(M(W,H,Z)>=0)return!1;for(var q=W.x<H.x?W.x<Z.x?W.x:Z.x:H.x<Z.x?H.x:Z.x,_=W.y<H.y?W.y<Z.y?W.y:Z.y:H.y<Z.y?H.y:Z.y,nt=W.x>H.x?W.x>Z.x?W.x:Z.x:H.x>Z.x?H.x:Z.x,rt=W.y>H.y?W.y>Z.y?W.y:Z.y:H.y>Z.y?H.y:Z.y,at=T(q,_,G,Y,U),ct=T(nt,rt,G,Y,U),ut=I.prevZ,pt=I.nextZ;ut&&ut.z>=at&&pt&&pt.z<=ct;){if(ut!==I.prev&&ut!==I.next&&S(W.x,W.y,H.x,H.y,Z.x,Z.y,ut.x,ut.y)&&M(ut.prev,ut,ut.next)>=0||(ut=ut.prevZ,pt!==I.prev&&pt!==I.next&&S(W.x,W.y,H.x,H.y,Z.x,Z.y,pt.x,pt.y)&&M(pt.prev,pt,pt.next)>=0))return!1;pt=pt.nextZ}for(;ut&&ut.z>=at;){if(ut!==I.prev&&ut!==I.next&&S(W.x,W.y,H.x,H.y,Z.x,Z.y,ut.x,ut.y)&&M(ut.prev,ut,ut.next)>=0)return!1;ut=ut.prevZ}for(;pt&&pt.z<=ct;){if(pt!==I.prev&&pt!==I.next&&S(W.x,W.y,H.x,H.y,Z.x,Z.y,pt.x,pt.y)&&M(pt.prev,pt,pt.next)>=0)return!1;pt=pt.nextZ}return!0}function u(I,G,Y){var U=I;do{var W=U.prev,H=U.next.next;!O(W,H)&&L(W,U,U.next,H)&&B(W,H)&&B(H,W)&&(G.push(W.i/Y),G.push(U.i/Y),G.push(H.i/Y),k(U),k(U.next),U=I=H),U=U.next}while(U!==I);return r(U)}function v(I,G,Y,U,W,H){var Z=I;do{for(var q=Z.next.next;q!==Z.prev;){if(Z.i!==q.i&&E(Z,q)){var _=z(Z,q);Z=r(Z,Z.next),_=r(_,_.next),a(Z,G,Y,U,W,H),a(_,G,Y,U,W,H);return}q=q.next}Z=Z.next}while(Z!==I)}function d(I,G,Y,U){var W=[],H,Z,q,_,nt;for(H=0,Z=G.length;H<Z;H++)q=G[H]*U,_=H<Z-1?G[H+1]*U:I.length,nt=o(I,q,_,U,!1),nt===nt.next&&(nt.steiner=!0),W.push(C(nt));for(W.sort(c),H=0;H<W.length;H++)p(W[H],Y),Y=r(Y,Y.next);return Y}function c(I,G){return I.x-G.x}function p(I,G){if(G=g(I,G),G){var Y=z(G,I);r(G,G.next),r(Y,Y.next)}}function g(I,G){var Y=G,U=I.x,W=I.y,H=-1/0,Z;do{if(W<=Y.y&&W>=Y.next.y&&Y.next.y!==Y.y){var q=Y.x+(W-Y.y)*(Y.next.x-Y.x)/(Y.next.y-Y.y);if(q<=U&&q>H){if(H=q,q===U){if(W===Y.y)return Y;if(W===Y.next.y)return Y.next}Z=Y.x<Y.next.x?Y:Y.next}}Y=Y.next}while(Y!==G);if(!Z)return null;if(U===H)return Z;var _=Z,nt=Z.x,rt=Z.y,at=1/0,ct;Y=Z;do U>=Y.x&&Y.x>=nt&&U!==Y.x&&S(W<rt?U:H,W,nt,rt,W<rt?H:U,W,Y.x,Y.y)&&(ct=Math.abs(W-Y.y)/(U-Y.x),B(Y,I)&&(ct<at||ct===at&&(Y.x>Z.x||Y.x===Z.x&&m(Z,Y)))&&(Z=Y,at=ct)),Y=Y.next;while(Y!==_);return Z}function m(I,G){return M(I.prev,I,G.prev)<0&&M(G.next,I,I.next)<0}function x(I,G,Y,U){var W=I;do W.z===null&&(W.z=T(W.x,W.y,G,Y,U)),W.prevZ=W.prev,W.nextZ=W.next,W=W.next;while(W!==I);W.prevZ.nextZ=null,W.prevZ=null,y(W)}function y(I){var G,Y,U,W,H,Z,q,_,nt=1;do{for(Y=I,I=null,H=null,Z=0;Y;){for(Z++,U=Y,q=0,G=0;G<nt&&(q++,U=U.nextZ,!!U);G++);for(_=nt;q>0||_>0&&U;)q!==0&&(_===0||!U||Y.z<=U.z)?(W=Y,Y=Y.nextZ,q--):(W=U,U=U.nextZ,_--),H?H.nextZ=W:I=W,W.prevZ=H,H=W;Y=U}H.nextZ=null,nt*=2}while(Z>1);return I}function T(I,G,Y,U,W){return I=32767*(I-Y)*W,G=32767*(G-U)*W,I=(I|I<<8)&16711935,I=(I|I<<4)&252645135,I=(I|I<<2)&858993459,I=(I|I<<1)&1431655765,G=(G|G<<8)&16711935,G=(G|G<<4)&252645135,G=(G|G<<2)&858993459,G=(G|G<<1)&1431655765,I|G<<1}function C(I){var G=I,Y=I;do(G.x<Y.x||G.x===Y.x&&G.y<Y.y)&&(Y=G),G=G.next;while(G!==I);return Y}function S(I,G,Y,U,W,H,Z,q){return(W-Z)*(G-q)-(I-Z)*(H-q)>=0&&(I-Z)*(U-q)-(Y-Z)*(G-q)>=0&&(Y-Z)*(H-q)-(W-Z)*(U-q)>=0}function E(I,G){return I.next.i!==G.i&&I.prev.i!==G.i&&!D(I,G)&&(B(I,G)&&B(G,I)&&N(I,G)&&(M(I.prev,I,G.prev)||M(I,G.prev,G))||O(I,G)&&M(I.prev,I,I.next)>0&&M(G.prev,G,G.next)>0)}function M(I,G,Y){return(G.y-I.y)*(Y.x-G.x)-(G.x-I.x)*(Y.y-G.y)}function O(I,G){return I.x===G.x&&I.y===G.y}function L(I,G,Y,U){var W=w(M(I,G,Y)),H=w(M(I,G,U)),Z=w(M(Y,U,I)),q=w(M(Y,U,G));return!!(W!==H&&Z!==q||W===0&&R(I,Y,G)||H===0&&R(I,U,G)||Z===0&&R(Y,I,U)||q===0&&R(Y,G,U))}function R(I,G,Y){return G.x<=Math.max(I.x,Y.x)&&G.x>=Math.min(I.x,Y.x)&&G.y<=Math.max(I.y,Y.y)&&G.y>=Math.min(I.y,Y.y)}function w(I){return I>0?1:I<0?-1:0}function D(I,G){var Y=I;do{if(Y.i!==I.i&&Y.next.i!==I.i&&Y.i!==G.i&&Y.next.i!==G.i&&L(Y,Y.next,I,G))return!0;Y=Y.next}while(Y!==I);return!1}function B(I,G){return M(I.prev,I,I.next)<0?M(I,G,I.next)>=0&&M(I,I.prev,G)>=0:M(I,G,I.prev)<0||M(I,I.next,G)<0}function N(I,G){var Y=I,U=!1,W=(I.x+G.x)/2,H=(I.y+G.y)/2;do Y.y>H!=Y.next.y>H&&Y.next.y!==Y.y&&W<(Y.next.x-Y.x)*(H-Y.y)/(Y.next.y-Y.y)+Y.x&&(U=!U),Y=Y.next;while(Y!==I);return U}function z(I,G){var Y=new K(I.i,I.x,I.y),U=new K(G.i,G.x,G.y),W=I.next,H=G.prev;return I.next=G,G.prev=I,Y.next=W,W.prev=Y,U.next=Y,Y.prev=U,H.next=U,U.prev=H,U}function X(I,G,Y,U){var W=new K(I,G,Y);return U?(W.next=U.next,W.prev=U,U.next.prev=W,U.next=W):(W.prev=W,W.next=W),W}function k(I){I.next.prev=I.prev,I.prev.next=I.next,I.prevZ&&(I.prevZ.nextZ=I.nextZ),I.nextZ&&(I.nextZ.prevZ=I.prevZ)}function K(I,G,Y){this.i=I,this.x=G,this.y=Y,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}n.deviation=function(I,G,Y,U){var W=G&&G.length,H=W?G[0]*Y:I.length,Z=Math.abs(b(I,0,H,Y));if(W)for(var q=0,_=G.length;q<_;q++){var nt=G[q]*Y,rt=q<_-1?G[q+1]*Y:I.length;Z-=Math.abs(b(I,nt,rt,Y))}var at=0;for(q=0;q<U.length;q+=3){var ct=U[q]*Y,ut=U[q+1]*Y,pt=U[q+2]*Y;at+=Math.abs((I[ct]-I[pt])*(I[ut+1]-I[ct+1])-(I[ct]-I[ut])*(I[pt+1]-I[ct+1]))}return Z===0&&at===0?0:Math.abs((at-Z)/Z)};function b(I,G,Y,U){for(var W=0,H=G,Z=Y-U;H<Y;H+=U)W+=(I[Z]-I[H])*(I[H+1]+I[Z+1]),Z=H;return W}n.flatten=function(I){for(var G=I[0][0].length,Y={vertices:[],holes:[],dimensions:G},U=0,W=0;W<I.length;W++){for(var H=0;H<I[W].length;H++)for(var Z=0;Z<G;Z++)Y.vertices.push(I[W][H][Z]);W>0&&(U+=I[W-1].length,Y.holes.push(U))}return Y},e.exports=n},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r,a){var l=r||o.strokeColor,h=a||o.strokeAlpha,u=(l&16711680)>>>16,v=(l&65280)>>>8,d=l&255;n.strokeStyle="rgba("+u+","+v+","+d+","+h+")",n.lineWidth=o.lineWidth};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(21),r=i(23),a=i(8),l=i(2),h=i(6),u=i(7),v=new n({Extends:r,initialize:function(c,p,g,m,x){var y="json";if(u(p)){var T=p;p=l(T,"key"),g=l(T,"url"),m=l(T,"xhrSettings"),y=l(T,"extension",y),x=l(T,"dataKey",x)}var C={type:"json",cache:c.cacheManager.json,extension:y,responseType:"text",key:p,url:g,xhrSettings:m,config:x};r.call(this,c,C),u(g)&&(x?this.data=h(g,x):this.data=g,this.state=o.FILE_POPULATED)},onProcess:function(){if(this.state!==o.FILE_POPULATED){this.state=o.FILE_PROCESSING;try{var d=JSON.parse(this.xhrLoader.responseText)}catch(p){throw console.warn("Invalid JSON: "+this.key),this.onProcessError(),p}var c=this.config;typeof c=="string"?this.data=h(d,c,d):this.data=d}this.onProcessComplete()}});a.register("json",function(d,c,p,g){if(Array.isArray(d))for(var m=0;m<d.length;m++)this.addFile(new v(this,d[m]));else this.addFile(new v(this,d,c,g,p));return this}),e.exports=v},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={DYNAMIC_BODY:0,STATIC_BODY:1,GROUP:2,TILEMAPLAYER:3,FACING_NONE:10,FACING_UP:11,FACING_DOWN:12,FACING_LEFT:13,FACING_RIGHT:14};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(158),o=i(26),r=function(a,l,h,u,v){for(var d=null,c=null,p=null,g=null,m=o(a,l,h,u,null,v),x=0;x<m.length;x++){var y=m[x];y&&(y.collides?(d=n(y.x,y.y-1,!0,v),c=n(y.x,y.y+1,!0,v),p=n(y.x-1,y.y,!0,v),g=n(y.x+1,y.y,!0,v),y.faceTop=!(d&&d.collides),y.faceBottom=!(c&&c.collides),y.faceLeft=!(p&&p.collides),y.faceRight=!(g&&g.collides)):y.resetFaces())}};e.exports=r},function(e,f,i){var n={};e.exports=n;var o=i(83),r=i(32);(function(){n.create=function(a,l){for(var h=[],u=0;u<a.length;u++){var v=a[u],d={x:v.x,y:v.y,index:u,body:l,isInternal:!1,contact:null,offset:null};d.contact={vertex:d,normalImpulse:0,tangentImpulse:0},h.push(d)}return h},n.fromPath=function(a,l){var h=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,u=[];return a.replace(h,function(v,d,c){u.push({x:parseFloat(d),y:parseFloat(c)})}),n.create(u,l)},n.centre=function(a){for(var l=n.area(a,!0),h={x:0,y:0},u,v,d,c=0;c<a.length;c++)d=(c+1)%a.length,u=o.cross(a[c],a[d]),v=o.mult(o.add(a[c],a[d]),u),h=o.add(h,v);return o.div(h,6*l)},n.mean=function(a){for(var l={x:0,y:0},h=0;h<a.length;h++)l.x+=a[h].x,l.y+=a[h].y;return o.div(l,a.length)},n.area=function(a,l){for(var h=0,u=a.length-1,v=0;v<a.length;v++)h+=(a[u].x-a[v].x)*(a[u].y+a[v].y),u=v;return l?h/2:Math.abs(h)/2},n.inertia=function(a,l){for(var h=0,u=0,v=a,d,c,p=0;p<v.length;p++)c=(p+1)%v.length,d=Math.abs(o.cross(v[c],v[p])),h+=d*(o.dot(v[c],v[c])+o.dot(v[c],v[p])+o.dot(v[p],v[p])),u+=d;return l/6*(h/u)},n.translate=function(a,l,h){var u;if(h)for(u=0;u<a.length;u++)a[u].x+=l.x*h,a[u].y+=l.y*h;else for(u=0;u<a.length;u++)a[u].x+=l.x,a[u].y+=l.y;return a},n.rotate=function(a,l,h){if(l!==0){for(var u=Math.cos(l),v=Math.sin(l),d=0;d<a.length;d++){var c=a[d],p=c.x-h.x,g=c.y-h.y;c.x=h.x+(p*u-g*v),c.y=h.y+(p*v+g*u)}return a}},n.contains=function(a,l){for(var h=0;h<a.length;h++){var u=a[h],v=a[(h+1)%a.length];if((l.x-u.x)*(v.y-u.y)+(l.y-u.y)*(u.x-v.x)>0)return!1}return!0},n.scale=function(a,l,h,u){if(l===1&&h===1)return a;u=u||n.centre(a);for(var v,d,c=0;c<a.length;c++)v=a[c],d=o.sub(v,u),a[c].x=u.x+d.x*l,a[c].y=u.y+d.y*h;return a},n.chamfer=function(a,l,h,u,v){typeof l=="number"?l=[l]:l=l||[8],h=typeof h!="undefined"?h:-1,u=u||2,v=v||14;for(var d=[],c=0;c<a.length;c++){var p=a[c-1>=0?c-1:a.length-1],g=a[c],m=a[(c+1)%a.length],x=l[c<l.length?c:l.length-1];if(x===0){d.push(g);continue}var y=o.normalise({x:g.y-p.y,y:p.x-g.x}),T=o.normalise({x:m.y-g.y,y:g.x-m.x}),C=Math.sqrt(2*Math.pow(x,2)),S=o.mult(r.clone(y),x),E=o.normalise(o.mult(o.add(y,T),.5)),M=o.sub(g,o.mult(E,C)),O=h;h===-1&&(O=Math.pow(x,.32)*1.75),O=r.clamp(O,u,v),O%2===1&&(O+=1);for(var L=Math.acos(o.dot(y,T)),R=L/O,w=0;w<O;w++)d.push(o.add(o.rotate(S,R*w),M))}return d},n.clockwiseSort=function(a){var l=n.mean(a);return a.sort(function(h,u){return o.angle(l,h)-o.angle(l,u)}),a},n.isConvex=function(a){var l=0,h=a.length,u,v,d,c;if(h<3)return null;for(u=0;u<h;u++)if(v=(u+1)%h,d=(u+2)%h,c=(a[v].x-a[u].x)*(a[d].y-a[v].y),c-=(a[v].y-a[u].y)*(a[d].x-a[v].x),c<0?l|=1:c>0&&(l|=2),l===3)return!1;return l!==0?!0:null},n.hull=function(a){var l=[],h=[],u,v;for(a=a.slice(0),a.sort(function(d,c){var p=d.x-c.x;return p!==0?p:d.y-c.y}),v=0;v<a.length;v+=1){for(u=a[v];h.length>=2&&o.cross3(h[h.length-2],h[h.length-1],u)<=0;)h.pop();h.push(u)}for(v=a.length-1;v>=0;v-=1){for(u=a[v];l.length>=2&&o.cross3(l[l.length-2],l[l.length-1],u)<=0;)l.pop();l.push(u)}return l.pop(),h.pop(),l.concat(h)}})()},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(66),r=i(300),a=i(301),l=i(56),h=i(170),u=new n({initialize:function(d,c,p){d===void 0&&(d=0),c===void 0&&(c=0),p===void 0&&(p=0),this.type=l.CIRCLE,this.x=d,this.y=c,this._radius=p,this._diameter=p*2},contains:function(v,d){return o(this,v,d)},getPoint:function(v,d){return r(this,v,d)},getPoints:function(v,d,c){return a(this,v,d,c)},getRandomPoint:function(v){return h(this,v)},setTo:function(v,d,c){return this.x=v,this.y=d,this._radius=c,this._diameter=c*2,this},setEmpty:function(){return this._radius=0,this._diameter=0,this},setPosition:function(v,d){return d===void 0&&(d=v),this.x=v,this.y=d,this},isEmpty:function(){return this._radius<=0},radius:{get:function(){return this._radius},set:function(v){this._radius=v,this._diameter=v*2}},diameter:{get:function(){return this._diameter},set:function(v){this._diameter=v,this._radius=v*.5}},left:{get:function(){return this.x-this._radius},set:function(v){this.x=v+this._radius}},right:{get:function(){return this.x+this._radius},set:function(v){this.x=v-this._radius}},top:{get:function(){return this.y-this._radius},set:function(v){this.y=v+this._radius}},bottom:{get:function(){return this.y+this._radius},set:function(v){this.y=v-this._radius}}});e.exports=u},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r){if(n.radius>0&&o>=n.left&&o<=n.right&&r>=n.top&&r<=n.bottom){var a=(n.x-o)*(n.x-o),l=(n.y-r)*(n.y-r);return a+l<=n.radius*n.radius}else return!1};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return Math.sqrt((n.x2-n.x1)*(n.x2-n.x1)+(n.y2-n.y1)*(n.y2-n.y1))};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r){var a=r-o;return o+((n-o)%a+a)%a};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(39),r=1e-6,a=new n({initialize:function(p){this.val=new Float32Array(16),p?this.copy(p):this.identity()},clone:function(){return new a(this)},set:function(c){return this.copy(c)},setValues:function(c,p,g,m,x,y,T,C,S,E,M,O,L,R,w,D){var B=this.val;return B[0]=c,B[1]=p,B[2]=g,B[3]=m,B[4]=x,B[5]=y,B[6]=T,B[7]=C,B[8]=S,B[9]=E,B[10]=M,B[11]=O,B[12]=L,B[13]=R,B[14]=w,B[15]=D,this},copy:function(c){var p=c.val;return this.setValues(p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],p[8],p[9],p[10],p[11],p[12],p[13],p[14],p[15])},fromArray:function(c){return this.setValues(c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],c[8],c[9],c[10],c[11],c[12],c[13],c[14],c[15])},zero:function(){return this.setValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},transform:function(c,p,g){var m=l.fromQuat(g),x=m.val,y=p.x,T=p.y,C=p.z;return this.setValues(x[0]*y,x[1]*y,x[2]*y,0,x[4]*T,x[5]*T,x[6]*T,0,x[8]*C,x[9]*C,x[10]*C,0,c.x,c.y,c.z,1)},xyz:function(c,p,g){this.identity();var m=this.val;return m[12]=c,m[13]=p,m[14]=g,this},scaling:function(c,p,g){this.zero();var m=this.val;return m[0]=c,m[5]=p,m[10]=g,m[15]=1,this},identity:function(){return this.setValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transpose:function(){var c=this.val,p=c[1],g=c[2],m=c[3],x=c[6],y=c[7],T=c[11];return c[1]=c[4],c[2]=c[8],c[3]=c[12],c[4]=p,c[6]=c[9],c[7]=c[13],c[8]=g,c[9]=x,c[11]=c[14],c[12]=m,c[13]=y,c[14]=T,this},getInverse:function(c){return this.copy(c),this.invert()},invert:function(){var c=this.val,p=c[0],g=c[1],m=c[2],x=c[3],y=c[4],T=c[5],C=c[6],S=c[7],E=c[8],M=c[9],O=c[10],L=c[11],R=c[12],w=c[13],D=c[14],B=c[15],N=p*T-g*y,z=p*C-m*y,X=p*S-x*y,k=g*C-m*T,K=g*S-x*T,b=m*S-x*C,I=E*w-M*R,G=E*D-O*R,Y=E*B-L*R,U=M*D-O*w,W=M*B-L*w,H=O*B-L*D,Z=N*H-z*W+X*U+k*Y-K*G+b*I;return Z?(Z=1/Z,this.setValues((T*H-C*W+S*U)*Z,(m*W-g*H-x*U)*Z,(w*b-D*K+B*k)*Z,(O*K-M*b-L*k)*Z,(C*Y-y*H-S*G)*Z,(p*H-m*Y+x*G)*Z,(D*X-R*b-B*z)*Z,(E*b-O*X+L*z)*Z,(y*W-T*Y+S*I)*Z,(g*Y-p*W-x*I)*Z,(R*K-w*X+B*N)*Z,(M*X-E*K-L*N)*Z,(T*G-y*U-C*I)*Z,(p*U-g*G+m*I)*Z,(w*z-R*k-D*N)*Z,(E*k-M*z+O*N)*Z)):this},adjoint:function(){var c=this.val,p=c[0],g=c[1],m=c[2],x=c[3],y=c[4],T=c[5],C=c[6],S=c[7],E=c[8],M=c[9],O=c[10],L=c[11],R=c[12],w=c[13],D=c[14],B=c[15];return this.setValues(T*(O*B-L*D)-M*(C*B-S*D)+w*(C*L-S*O),-(g*(O*B-L*D)-M*(m*B-x*D)+w*(m*L-x*O)),g*(C*B-S*D)-T*(m*B-x*D)+w*(m*S-x*C),-(g*(C*L-S*O)-T*(m*L-x*O)+M*(m*S-x*C)),-(y*(O*B-L*D)-E*(C*B-S*D)+R*(C*L-S*O)),p*(O*B-L*D)-E*(m*B-x*D)+R*(m*L-x*O),-(p*(C*B-S*D)-y*(m*B-x*D)+R*(m*S-x*C)),p*(C*L-S*O)-y*(m*L-x*O)+E*(m*S-x*C),y*(M*B-L*w)-E*(T*B-S*w)+R*(T*L-S*M),-(p*(M*B-L*w)-E*(g*B-x*w)+R*(g*L-x*M)),p*(T*B-S*w)-y*(g*B-x*w)+R*(g*S-x*T),-(p*(T*L-S*M)-y*(g*L-x*M)+E*(g*S-x*T)),-(y*(M*D-O*w)-E*(T*D-C*w)+R*(T*O-C*M)),p*(M*D-O*w)-E*(g*D-m*w)+R*(g*O-m*M),-(p*(T*D-C*w)-y*(g*D-m*w)+R*(g*C-m*T)),p*(T*O-C*M)-y*(g*O-m*M)+E*(g*C-m*T))},determinant:function(){var c=this.val,p=c[0],g=c[1],m=c[2],x=c[3],y=c[4],T=c[5],C=c[6],S=c[7],E=c[8],M=c[9],O=c[10],L=c[11],R=c[12],w=c[13],D=c[14],B=c[15],N=p*T-g*y,z=p*C-m*y,X=p*S-x*y,k=g*C-m*T,K=g*S-x*T,b=m*S-x*C,I=E*w-M*R,G=E*D-O*R,Y=E*B-L*R,U=M*D-O*w,W=M*B-L*w,H=O*B-L*D;return N*H-z*W+X*U+k*Y-K*G+b*I},multiply:function(c){var p=this.val,g=p[0],m=p[1],x=p[2],y=p[3],T=p[4],C=p[5],S=p[6],E=p[7],M=p[8],O=p[9],L=p[10],R=p[11],w=p[12],D=p[13],B=p[14],N=p[15],z=c.val,X=z[0],k=z[1],K=z[2],b=z[3];return p[0]=X*g+k*T+K*M+b*w,p[1]=X*m+k*C+K*O+b*D,p[2]=X*x+k*S+K*L+b*B,p[3]=X*y+k*E+K*R+b*N,X=z[4],k=z[5],K=z[6],b=z[7],p[4]=X*g+k*T+K*M+b*w,p[5]=X*m+k*C+K*O+b*D,p[6]=X*x+k*S+K*L+b*B,p[7]=X*y+k*E+K*R+b*N,X=z[8],k=z[9],K=z[10],b=z[11],p[8]=X*g+k*T+K*M+b*w,p[9]=X*m+k*C+K*O+b*D,p[10]=X*x+k*S+K*L+b*B,p[11]=X*y+k*E+K*R+b*N,X=z[12],k=z[13],K=z[14],b=z[15],p[12]=X*g+k*T+K*M+b*w,p[13]=X*m+k*C+K*O+b*D,p[14]=X*x+k*S+K*L+b*B,p[15]=X*y+k*E+K*R+b*N,this},multiplyLocal:function(c){var p=this.val,g=c.val;return this.setValues(p[0]*g[0]+p[1]*g[4]+p[2]*g[8]+p[3]*g[12],p[0]*g[1]+p[1]*g[5]+p[2]*g[9]+p[3]*g[13],p[0]*g[2]+p[1]*g[6]+p[2]*g[10]+p[3]*g[14],p[0]*g[3]+p[1]*g[7]+p[2]*g[11]+p[3]*g[15],p[4]*g[0]+p[5]*g[4]+p[6]*g[8]+p[7]*g[12],p[4]*g[1]+p[5]*g[5]+p[6]*g[9]+p[7]*g[13],p[4]*g[2]+p[5]*g[6]+p[6]*g[10]+p[7]*g[14],p[4]*g[3]+p[5]*g[7]+p[6]*g[11]+p[7]*g[15],p[8]*g[0]+p[9]*g[4]+p[10]*g[8]+p[11]*g[12],p[8]*g[1]+p[9]*g[5]+p[10]*g[9]+p[11]*g[13],p[8]*g[2]+p[9]*g[6]+p[10]*g[10]+p[11]*g[14],p[8]*g[3]+p[9]*g[7]+p[10]*g[11]+p[11]*g[15],p[12]*g[0]+p[13]*g[4]+p[14]*g[8]+p[15]*g[12],p[12]*g[1]+p[13]*g[5]+p[14]*g[9]+p[15]*g[13],p[12]*g[2]+p[13]*g[6]+p[14]*g[10]+p[15]*g[14],p[12]*g[3]+p[13]*g[7]+p[14]*g[11]+p[15]*g[15])},premultiply:function(c){return this.multiplyMatrices(c,this)},multiplyMatrices:function(c,p){var g=c.val,m=p.val,x=g[0],y=g[4],T=g[8],C=g[12],S=g[1],E=g[5],M=g[9],O=g[13],L=g[2],R=g[6],w=g[10],D=g[14],B=g[3],N=g[7],z=g[11],X=g[15],k=m[0],K=m[4],b=m[8],I=m[12],G=m[1],Y=m[5],U=m[9],W=m[13],H=m[2],Z=m[6],q=m[10],_=m[14],nt=m[3],rt=m[7],at=m[11],ct=m[15];return this.setValues(x*k+y*G+T*H+C*nt,S*k+E*G+M*H+O*nt,L*k+R*G+w*H+D*nt,B*k+N*G+z*H+X*nt,x*K+y*Y+T*Z+C*rt,S*K+E*Y+M*Z+O*rt,L*K+R*Y+w*Z+D*rt,B*K+N*Y+z*Z+X*rt,x*b+y*U+T*q+C*at,S*b+E*U+M*q+O*at,L*b+R*U+w*q+D*at,B*b+N*U+z*q+X*at,x*I+y*W+T*_+C*ct,S*I+E*W+M*_+O*ct,L*I+R*W+w*_+D*ct,B*I+N*W+z*_+X*ct)},translate:function(c){return this.translateXYZ(c.x,c.y,c.z)},translateXYZ:function(c,p,g){var m=this.val;return m[12]=m[0]*c+m[4]*p+m[8]*g+m[12],m[13]=m[1]*c+m[5]*p+m[9]*g+m[13],m[14]=m[2]*c+m[6]*p+m[10]*g+m[14],m[15]=m[3]*c+m[7]*p+m[11]*g+m[15],this},scale:function(c){return this.scaleXYZ(c.x,c.y,c.z)},scaleXYZ:function(c,p,g){var m=this.val;return m[0]=m[0]*c,m[1]=m[1]*c,m[2]=m[2]*c,m[3]=m[3]*c,m[4]=m[4]*p,m[5]=m[5]*p,m[6]=m[6]*p,m[7]=m[7]*p,m[8]=m[8]*g,m[9]=m[9]*g,m[10]=m[10]*g,m[11]=m[11]*g,this},makeRotationAxis:function(c,p){var g=Math.cos(p),m=Math.sin(p),x=1-g,y=c.x,T=c.y,C=c.z,S=x*y,E=x*T;return this.setValues(S*y+g,S*T-m*C,S*C+m*T,0,S*T+m*C,E*T+g,E*C-m*y,0,S*C-m*T,E*C+m*y,x*C*C+g,0,0,0,0,1)},rotate:function(c,p){var g=this.val,m=p.x,x=p.y,y=p.z,T=Math.sqrt(m*m+x*x+y*y);if(Math.abs(T)<r)return this;T=1/T,m*=T,x*=T,y*=T;var C=Math.sin(c),S=Math.cos(c),E=1-S,M=g[0],O=g[1],L=g[2],R=g[3],w=g[4],D=g[5],B=g[6],N=g[7],z=g[8],X=g[9],k=g[10],K=g[11],b=g[12],I=g[13],G=g[14],Y=g[15],U=m*m*E+S,W=x*m*E+y*C,H=y*m*E-x*C,Z=m*x*E-y*C,q=x*x*E+S,_=y*x*E+m*C,nt=m*y*E+x*C,rt=x*y*E-m*C,at=y*y*E+S;return this.setValues(M*U+w*W+z*H,O*U+D*W+X*H,L*U+B*W+k*H,R*U+N*W+K*H,M*Z+w*q+z*_,O*Z+D*q+X*_,L*Z+B*q+k*_,R*Z+N*q+K*_,M*nt+w*rt+z*at,O*nt+D*rt+X*at,L*nt+B*rt+k*at,R*nt+N*rt+K*at,b,I,G,Y)},rotateX:function(c){var p=this.val,g=Math.sin(c),m=Math.cos(c),x=p[4],y=p[5],T=p[6],C=p[7],S=p[8],E=p[9],M=p[10],O=p[11];return p[4]=x*m+S*g,p[5]=y*m+E*g,p[6]=T*m+M*g,p[7]=C*m+O*g,p[8]=S*m-x*g,p[9]=E*m-y*g,p[10]=M*m-T*g,p[11]=O*m-C*g,this},rotateY:function(c){var p=this.val,g=Math.sin(c),m=Math.cos(c),x=p[0],y=p[1],T=p[2],C=p[3],S=p[8],E=p[9],M=p[10],O=p[11];return p[0]=x*m-S*g,p[1]=y*m-E*g,p[2]=T*m-M*g,p[3]=C*m-O*g,p[8]=x*g+S*m,p[9]=y*g+E*m,p[10]=T*g+M*m,p[11]=C*g+O*m,this},rotateZ:function(c){var p=this.val,g=Math.sin(c),m=Math.cos(c),x=p[0],y=p[1],T=p[2],C=p[3],S=p[4],E=p[5],M=p[6],O=p[7];return p[0]=x*m+S*g,p[1]=y*m+E*g,p[2]=T*m+M*g,p[3]=C*m+O*g,p[4]=S*m-x*g,p[5]=E*m-y*g,p[6]=M*m-T*g,p[7]=O*m-C*g,this},fromRotationTranslation:function(c,p){var g=c.x,m=c.y,x=c.z,y=c.w,T=g+g,C=m+m,S=x+x,E=g*T,M=g*C,O=g*S,L=m*C,R=m*S,w=x*S,D=y*T,B=y*C,N=y*S;return this.setValues(1-(L+w),M+N,O-B,0,M-N,1-(E+w),R+D,0,O+B,R-D,1-(E+L),0,p.x,p.y,p.z,1)},fromQuat:function(c){var p=c.x,g=c.y,m=c.z,x=c.w,y=p+p,T=g+g,C=m+m,S=p*y,E=p*T,M=p*C,O=g*T,L=g*C,R=m*C,w=x*y,D=x*T,B=x*C;return this.setValues(1-(O+R),E+B,M-D,0,E-B,1-(S+R),L+w,0,M+D,L-w,1-(S+O),0,0,0,0,1)},frustum:function(c,p,g,m,x,y){var T=1/(p-c),C=1/(m-g),S=1/(x-y);return this.setValues(x*2*T,0,0,0,0,x*2*C,0,0,(p+c)*T,(m+g)*C,(y+x)*S,-1,0,0,y*x*2*S,0)},perspective:function(c,p,g,m){var x=1/Math.tan(c/2),y=1/(g-m);return this.setValues(x/p,0,0,0,0,x,0,0,0,0,(m+g)*y,-1,0,0,2*m*g*y,0)},perspectiveLH:function(c,p,g,m){return this.setValues(2*g/c,0,0,0,0,2*g/p,0,0,0,0,-m/(g-m),1,0,0,g*m/(g-m),0)},ortho:function(c,p,g,m,x,y){var T=c-p,C=g-m,S=x-y;return T=T===0?T:1/T,C=C===0?C:1/C,S=S===0?S:1/S,this.setValues(-2*T,0,0,0,0,-2*C,0,0,0,0,2*S,0,(c+p)*T,(m+g)*C,(y+x)*S,1)},lookAtRH:function(c,p,g){var m=this.val;return d.subVectors(c,p),d.getLengthSquared()===0&&(d.z=1),d.normalize(),u.crossVectors(g,d),u.getLengthSquared()===0&&(Math.abs(g.z)===1?d.x+=1e-4:d.z+=1e-4,d.normalize(),u.crossVectors(g,d)),u.normalize(),v.crossVectors(d,u),m[0]=u.x,m[1]=u.y,m[2]=u.z,m[4]=v.x,m[5]=v.y,m[6]=v.z,m[8]=d.x,m[9]=d.y,m[10]=d.z,this},lookAt:function(c,p,g){var m=c.x,x=c.y,y=c.z,T=g.x,C=g.y,S=g.z,E=p.x,M=p.y,O=p.z;if(Math.abs(m-E)<r&&Math.abs(x-M)<r&&Math.abs(y-O)<r)return this.identity();var L=m-E,R=x-M,w=y-O,D=1/Math.sqrt(L*L+R*R+w*w);L*=D,R*=D,w*=D;var B=C*w-S*R,N=S*L-T*w,z=T*R-C*L;D=Math.sqrt(B*B+N*N+z*z),D?(D=1/D,B*=D,N*=D,z*=D):(B=0,N=0,z=0);var X=R*z-w*N,k=w*B-L*z,K=L*N-R*B;return D=Math.sqrt(X*X+k*k+K*K),D?(D=1/D,X*=D,k*=D,K*=D):(X=0,k=0,K=0),this.setValues(B,X,L,0,N,k,R,0,z,K,w,0,-(B*m+N*x+z*y),-(X*m+k*x+K*y),-(L*m+R*x+w*y),1)},yawPitchRoll:function(c,p,g){this.zero(),l.zero(),h.zero();var m=this.val,x=l.val,y=h.val,T=Math.sin(g),C=Math.cos(g);return m[10]=1,m[15]=1,m[0]=C,m[1]=T,m[4]=-T,m[5]=C,T=Math.sin(p),C=Math.cos(p),x[0]=1,x[15]=1,x[5]=C,x[10]=C,x[9]=-T,x[6]=T,T=Math.sin(c),C=Math.cos(c),y[5]=1,y[15]=1,y[0]=C,y[2]=-T,y[8]=T,y[10]=C,this.multiplyLocal(l),this.multiplyLocal(h),this},setWorldMatrix:function(c,p,g,m,x){return this.yawPitchRoll(c.y,c.x,c.z),l.scaling(g.x,g.y,g.z),h.xyz(p.x,p.y,p.z),this.multiplyLocal(l),this.multiplyLocal(h),m&&this.multiplyLocal(m),x&&this.multiplyLocal(x),this},multiplyToMat4:function(c,p){var g=this.val,m=c.val,x=g[0],y=g[1],T=g[2],C=g[3],S=g[4],E=g[5],M=g[6],O=g[7],L=g[8],R=g[9],w=g[10],D=g[11],B=g[12],N=g[13],z=g[14],X=g[15],k=m[0],K=m[1],b=m[2],I=m[3],G=m[4],Y=m[5],U=m[6],W=m[7],H=m[8],Z=m[9],q=m[10],_=m[11],nt=m[12],rt=m[13],at=m[14],ct=m[15];return p.setValues(k*x+K*S+b*L+I*B,K*y+K*E+b*R+I*N,b*T+K*M+b*w+I*z,I*C+K*O+b*D+I*X,G*x+Y*S+U*L+W*B,G*y+Y*E+U*R+W*N,G*T+Y*M+U*w+W*z,G*C+Y*O+U*D+W*X,H*x+Z*S+q*L+_*B,H*y+Z*E+q*R+_*N,H*T+Z*M+q*w+_*z,H*C+Z*O+q*D+_*X,nt*x+rt*S+at*L+ct*B,nt*y+rt*E+at*R+ct*N,nt*T+rt*M+at*w+ct*z,nt*C+rt*O+at*D+ct*X)},fromRotationXYTranslation:function(c,p,g){var m=p.x,x=p.y,y=p.z,T=Math.sin(c.x),C=Math.cos(c.x),S=Math.sin(c.y),E=Math.cos(c.y),M=m,O=x,L=y,R=-T,w=0-R*S,D=0-C*S,B=R*E,N=C*E;return g||(M=E*m+S*y,O=w*m+C*x+B*y,L=D*m+T*x+N*y),this.setValues(E,w,D,0,0,C,T,0,S,B,N,0,M,O,L,1)},getMaxScaleOnAxis:function(){var c=this.val,p=c[0]*c[0]+c[1]*c[1]+c[2]*c[2],g=c[4]*c[4]+c[5]*c[5]+c[6]*c[6],m=c[8]*c[8]+c[9]*c[9]+c[10]*c[10];return Math.sqrt(Math.max(p,g,m))}}),l=new a,h=new a,u=new o,v=new o,d=new o;e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={COMPLETE:i(987),DECODED:i(988),DECODED_ALL:i(989),DESTROY:i(990),DETUNE:i(991),GLOBAL_DETUNE:i(992),GLOBAL_MUTE:i(993),GLOBAL_RATE:i(994),GLOBAL_VOLUME:i(995),LOOP:i(996),LOOPED:i(997),MUTE:i(998),PAN:i(999),PAUSE_ALL:i(1e3),PAUSE:i(1001),PLAY:i(1002),RATE:i(1003),RESUME_ALL:i(1004),RESUME:i(1005),SEEK:i(1006),STOP_ALL:i(1007),STOP:i(1008),UNLOCKED:i(1009),VOLUME:i(1010)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(21),r=i(23),a=i(8),l=i(2),h=i(7),u=new n({Extends:r,initialize:function v(d,c,p,g,m){var x="png",y;if(h(c)){var T=c;c=l(T,"key"),p=l(T,"url"),y=l(T,"normalMap"),g=l(T,"xhrSettings"),x=l(T,"extension",x),m=l(T,"frameConfig")}Array.isArray(p)&&(y=p[1],p=p[0]);var C={type:"image",cache:d.textureManager,extension:x,responseType:"blob",key:c,url:p,xhrSettings:g,config:m};if(r.call(this,d,C),y){var S=new v(d,this.key,y,g,m);S.type="normalMap",this.setLink(S),d.addFile(S)}},onProcess:function(){this.state=o.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var v=this;this.data.onload=function(){r.revokeObjectURL(v.data),v.onProcessComplete()},this.data.onerror=function(){r.revokeObjectURL(v.data),v.onProcessError()},r.createObjectURL(this.data,this.xhrLoader.response,"image/png")},addToCache:function(){var v,d=this.linkFile;d&&d.state===o.FILE_COMPLETE?(this.type==="image"?v=this.cache.addImage(this.key,this.data,d.data):v=this.cache.addImage(d.key,d.data,this.data),this.pendingDestroy(v),d.pendingDestroy(v)):d||(v=this.cache.addImage(this.key,this.data),this.pendingDestroy(v))}});a.register("image",function(v,d,c){if(Array.isArray(v))for(var p=0;p<v.length;p++)this.addFile(new u(this,v[p]));else this.addFile(new u(this,v,d,c));return this}),e.exports=u},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){o?n.setCollision(!0,!0,!0,!0,!1):n.resetCollision(!1)};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(164),o=i(0),r=i(11),a=i(15),l=i(1065),h=new o({Extends:a,Mixins:[r.Alpha,r.BlendMode,r.Depth,r.Flip,r.GetBounds,r.Mask,r.Origin,r.Pipeline,r.ScrollFactor,r.Size,r.TextureCrop,r.Tint,r.Transform,r.Visible,l],initialize:function(v,d,c,p,g){a.call(this,v,"Sprite"),this._crop=this.resetCropObject(),this.anims=new n(this),this.setTexture(p,g),this.setPosition(d,c),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(u,v){this.anims.update(u,v)},play:function(u,v){return this.anims.play(u,v)},playReverse:function(u,v){return this.anims.playReverse(u,v)},playAfterDelay:function(u,v){return this.anims.playAfterDelay(u,v)},playAfterRepeat:function(u,v){return this.anims.playAfterRepeat(u,v)},chain:function(u){return this.anims.chain(u)},stop:function(){return this.anims.stop()},stopAfterDelay:function(u){return this.anims.stopAfterDelay(u)},stopAfterRepeat:function(u){return this.anims.stopAfterRepeat(u)},stopOnFrame:function(u){return this.anims.stopOnFrame(u)},toJSON:function(){return r.ToJSON(this)},preDestroy:function(){this.anims.destroy(),this.anims=void 0}});e.exports=h},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){if(!(o>=n.length)){for(var r=n.length-1,a=n[o],l=o;l<r;l++)n[l]=n[l+1];return n.length=r,a}};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ADDED_TO_SCENE:i(643),DESTROY:i(644),REMOVED_FROM_SCENE:i(645),VIDEO_COMPLETE:i(646),VIDEO_CREATED:i(647),VIDEO_ERROR:i(648),VIDEO_LOOP:i(649),VIDEO_PLAY:i(650),VIDEO_SEEKED:i(651),VIDEO_SEEKING:i(652),VIDEO_STOP:i(653),VIDEO_TIMEOUT:i(654),VIDEO_UNLOCKED:i(655)}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r,a){return r===void 0&&(r=0),o===0?n:(n-=r,n=o*Math.floor(n/o),a?(r+n)/o:r+n)};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){var o={};for(var r in n)Array.isArray(n[r])?o[r]=n[r].slice(0):o[r]=n[r];return o};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r,a){var l=n.length;if(o<0||o>l||o>=r||r>l||o+r>l){if(a)throw new Error("Range Error: Values outside acceptable range");return!1}else return!0};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Angry Bytes (and contributors)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function i(a,l){return String(a).localeCompare(l)}function n(a,l){var h=a.length;if(h<=1)return a;for(var u=new Array(h),v=1;v<h;v*=2){o(a,l,v,u);var d=a;a=u,u=d}return a}function o(a,l,h,u){var v=a.length,d=0,c=h*2,p,g,m,x,y;for(p=0;p<v;p+=c)for(g=p+h,m=g+h,g>v&&(g=v),m>v&&(m=v),x=p,y=g;;)if(x<g&&y<m)l(a[x],a[y])<=0?u[d++]=a[x++]:u[d++]=a[y++];else if(x<g)u[d++]=a[x++];else if(y<m)u[d++]=a[y++];else break}var r=function(a,l){l===void 0&&(l=i);var h=n(a,l);return h!==a&&o(h,null,a.length,a),a};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(134),o=i(205),r=function(a,l){var h=n.Power0;if(typeof a=="string")if(n.hasOwnProperty(a))h=n[a];else{var u="";a.indexOf(".")&&(u=a.substr(a.indexOf(".")+1),u.toLowerCase()==="in"?u="easeIn":u.toLowerCase()==="out"?u="easeOut":u.toLowerCase()==="inout"&&(u="easeInOut")),a=o(a.substr(0,a.indexOf(".")+1)+u),n.hasOwnProperty(a)&&(h=n[a])}else typeof a=="function"?h=a:Array.isArray(a)&&a.length;if(!l)return h;var v=l.slice(0);return v.unshift(0),function(d){return v[0]=d,h.apply(this,v)}};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(12),o=function(r,a,l,h,u){var v=r.strokeTint,d=n.getTintAppendFloatAlpha(a.strokeColor,a.strokeAlpha*l);v.TL=d,v.TR=d,v.BL=d,v.BR=d;var c=a.pathData,p=c.length-1,g=a.lineWidth,m=g/2,x=c[0]-h,y=c[1]-u;a.closePath||(p-=2);for(var T=2;T<p;T+=2){var C=c[T]-h,S=c[T+1]-u;r.batchLine(x,y,C,S,m,m,g,T-2,a.closePath?T===p-1:!1),x=C,y=S}};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(115),r=i(476),a=i(477),l=i(56),h=i(47),u=i(181),v=new n({initialize:function(c,p,g,m,x,y){c===void 0&&(c=0),p===void 0&&(p=0),g===void 0&&(g=0),m===void 0&&(m=0),x===void 0&&(x=0),y===void 0&&(y=0),this.type=l.TRIANGLE,this.x1=c,this.y1=p,this.x2=g,this.y2=m,this.x3=x,this.y3=y},contains:function(d,c){return o(this,d,c)},getPoint:function(d,c){return r(this,d,c)},getPoints:function(d,c,p){return a(this,d,c,p)},getRandomPoint:function(d){return u(this,d)},setTo:function(d,c,p,g,m,x){return d===void 0&&(d=0),c===void 0&&(c=0),p===void 0&&(p=0),g===void 0&&(g=0),m===void 0&&(m=0),x===void 0&&(x=0),this.x1=d,this.y1=c,this.x2=p,this.y2=g,this.x3=m,this.y3=x,this},getLineA:function(d){return d===void 0&&(d=new h),d.setTo(this.x1,this.y1,this.x2,this.y2),d},getLineB:function(d){return d===void 0&&(d=new h),d.setTo(this.x2,this.y2,this.x3,this.y3),d},getLineC:function(d){return d===void 0&&(d=new h),d.setTo(this.x3,this.y3,this.x1,this.y1),d},left:{get:function(){return Math.min(this.x1,this.x2,this.x3)},set:function(d){var c=0;this.x1<=this.x2&&this.x1<=this.x3?c=this.x1-d:this.x2<=this.x1&&this.x2<=this.x3?c=this.x2-d:c=this.x3-d,this.x1-=c,this.x2-=c,this.x3-=c}},right:{get:function(){return Math.max(this.x1,this.x2,this.x3)},set:function(d){var c=0;this.x1>=this.x2&&this.x1>=this.x3?c=this.x1-d:this.x2>=this.x1&&this.x2>=this.x3?c=this.x2-d:c=this.x3-d,this.x1-=c,this.x2-=c,this.x3-=c}},top:{get:function(){return Math.min(this.y1,this.y2,this.y3)},set:function(d){var c=0;this.y1<=this.y2&&this.y1<=this.y3?c=this.y1-d:this.y2<=this.y1&&this.y2<=this.y3?c=this.y2-d:c=this.y3-d,this.y1-=c,this.y2-=c,this.y3-=c}},bottom:{get:function(){return Math.max(this.y1,this.y2,this.y3)},set:function(d){var c=0;this.y1>=this.y2&&this.y1>=this.y3?c=this.y1-d:this.y2>=this.y1&&this.y2>=this.y3?c=this.y2-d:c=this.y3-d,this.y1-=c,this.y2-=c,this.y3-=c}}});e.exports=v},function(e,f){var i={};e.exports=i,function(){i.create=function(n,o){return{x:n||0,y:o||0}},i.clone=function(n){return{x:n.x,y:n.y}},i.magnitude=function(n){return Math.sqrt(n.x*n.x+n.y*n.y)},i.magnitudeSquared=function(n){return n.x*n.x+n.y*n.y},i.rotate=function(n,o,r){var a=Math.cos(o),l=Math.sin(o);r||(r={});var h=n.x*a-n.y*l;return r.y=n.x*l+n.y*a,r.x=h,r},i.rotateAbout=function(n,o,r,a){var l=Math.cos(o),h=Math.sin(o);a||(a={});var u=r.x+((n.x-r.x)*l-(n.y-r.y)*h);return a.y=r.y+((n.x-r.x)*h+(n.y-r.y)*l),a.x=u,a},i.normalise=function(n){var o=i.magnitude(n);return o===0?{x:0,y:0}:{x:n.x/o,y:n.y/o}},i.dot=function(n,o){return n.x*o.x+n.y*o.y},i.cross=function(n,o){return n.x*o.y-n.y*o.x},i.cross3=function(n,o,r){return(o.x-n.x)*(r.y-n.y)-(o.y-n.y)*(r.x-n.x)},i.add=function(n,o,r){return r||(r={}),r.x=n.x+o.x,r.y=n.y+o.y,r},i.sub=function(n,o,r){return r||(r={}),r.x=n.x-o.x,r.y=n.y-o.y,r},i.mult=function(n,o){return{x:n.x*o,y:n.y*o}},i.div=function(n,o){return{x:n.x/o,y:n.y/o}},i.perp=function(n,o){return o=o===!0?-1:1,{x:o*-n.y,y:o*n.x}},i.neg=function(n){return{x:-n.x,y:-n.y}},i.angle=function(n,o){return Math.atan2(o.y-n.y,o.x-n.x)},i._temp=[i.create(),i.create(),i.create(),i.create(),i.create(),i.create()]}()},function(e,f){var i={};e.exports=i,function(){i.create=function(n){var o={min:{x:0,y:0},max:{x:0,y:0}};return n&&i.update(o,n),o},i.update=function(n,o,r){n.min.x=1/0,n.max.x=-1/0,n.min.y=1/0,n.max.y=-1/0;for(var a=0;a<o.length;a++){var l=o[a];l.x>n.max.x&&(n.max.x=l.x),l.x<n.min.x&&(n.min.x=l.x),l.y>n.max.y&&(n.max.y=l.y),l.y<n.min.y&&(n.min.y=l.y)}r&&(r.x>0?n.max.x+=r.x:n.min.x+=r.x,r.y>0?n.max.y+=r.y:n.min.y+=r.y)},i.contains=function(n,o){return o.x>=n.min.x&&o.x<=n.max.x&&o.y>=n.min.y&&o.y<=n.max.y},i.overlaps=function(n,o){return n.min.x<=o.max.x&&n.max.x>=o.min.x&&n.max.y>=o.min.y&&n.min.y<=o.max.y},i.translate=function(n,o){n.min.x+=o.x,n.max.x+=o.x,n.min.y+=o.y,n.max.y+=o.y},i.shift=function(n,o){var r=n.max.x-n.min.x,a=n.max.y-n.min.y;n.min.x=o.x,n.max.x=o.x+r,n.min.y=o.y,n.max.y=o.y+a}}()},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(29),o=i(0),r=i(11),a=i(502),l=new o({Mixins:[r.Alpha,r.Flip,r.Visible],initialize:function(u,v,d,c,p,g,m,x){this.layer=u,this.index=v,this.x=d,this.y=c,this.width=p,this.height=g,this.right,this.bottom,this.baseWidth=m!==void 0?m:p,this.baseHeight=x!==void 0?x:g,this.pixelX=0,this.pixelY=0,this.updatePixelXY(),this.properties={},this.rotation=0,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceLeft=!1,this.faceRight=!1,this.faceTop=!1,this.faceBottom=!1,this.collisionCallback=void 0,this.collisionCallbackContext=this,this.tint=16777215,this.physics={}},containsPoint:function(h,u){return!(h<this.pixelX||u<this.pixelY||h>this.right||u>this.bottom)},copy:function(h){return this.index=h.index,this.alpha=h.alpha,this.properties=h.properties,this.visible=h.visible,this.setFlip(h.flipX,h.flipY),this.tint=h.tint,this.rotation=h.rotation,this.collideUp=h.collideUp,this.collideDown=h.collideDown,this.collideLeft=h.collideLeft,this.collideRight=h.collideRight,this.collisionCallback=h.collisionCallback,this.collisionCallbackContext=h.collisionCallbackContext,this},getCollisionGroup:function(){return this.tileset?this.tileset.getTileCollisionGroup(this.index):null},getTileData:function(){return this.tileset?this.tileset.getTileData(this.index):null},getLeft:function(h){var u=this.tilemapLayer;return u?u.tileToWorldX(this.x,h):this.x*this.baseWidth},getRight:function(h){var u=this.tilemapLayer;return u?this.getLeft(h)+this.width*u.scaleX:this.getLeft(h)+this.width},getTop:function(h){var u=this.tilemapLayer;return u?u.tileToWorldY(this.y,h)-(this.height-this.baseHeight)*u.scaleY:this.y*this.baseHeight-(this.height-this.baseHeight)},getBottom:function(h){var u=this.tilemapLayer;return u?this.getTop(h)+this.height*u.scaleY:this.getTop(h)+this.height},getBounds:function(h,u){return u===void 0&&(u=new a),u.x=this.getLeft(),u.y=this.getTop(),u.width=this.getRight()-u.x,u.height=this.getBottom()-u.y,u},getCenterX:function(h){return(this.getLeft(h)+this.getRight(h))/2},getCenterY:function(h){return(this.getTop(h)+this.getBottom(h))/2},intersects:function(h,u,v,d){return!(v<=this.pixelX||d<=this.pixelY||h>=this.right||u>=this.bottom)},isInteresting:function(h,u){return h&&u?this.canCollide||this.hasInterestingFace:h?this.collides:u?this.hasInterestingFace:!1},resetCollision:function(h){if(h===void 0&&(h=!0),this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,h){var u=this.tilemapLayer;u&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},resetFaces:function(){return this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,this},setCollision:function(h,u,v,d,c){if(u===void 0&&(u=h),v===void 0&&(v=h),d===void 0&&(d=h),c===void 0&&(c=!0),this.collideLeft=h,this.collideRight=u,this.collideUp=v,this.collideDown=d,this.faceLeft=h,this.faceRight=u,this.faceTop=v,this.faceBottom=d,c){var p=this.tilemapLayer;p&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},setCollisionCallback:function(h,u){return h===null?(this.collisionCallback=void 0,this.collisionCallbackContext=void 0):(this.collisionCallback=h,this.collisionCallbackContext=u),this},setSize:function(h,u,v,d){return h!==void 0&&(this.width=h),u!==void 0&&(this.height=u),v!==void 0&&(this.baseWidth=v),d!==void 0&&(this.baseHeight=d),this.updatePixelXY(),this},updatePixelXY:function(){var h=this.layer.orientation;if(h===n.ORTHOGONAL)this.pixelX=this.x*this.baseWidth,this.pixelY=this.y*this.baseHeight;else if(h===n.ISOMETRIC)this.pixelX=(this.x-this.y)*this.baseWidth*.5,this.pixelY=(this.x+this.y)*this.baseHeight*.5;else if(h===n.STAGGERED)this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*(this.baseHeight/2);else if(h===n.HEXAGONAL){var u=this.layer.hexSideLength,v=(this.baseHeight-u)/2+u;this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*v}return this.right=this.pixelX+this.baseWidth,this.bottom=this.pixelY+this.baseHeight,this},destroy:function(){this.collisionCallback=void 0,this.collisionCallbackContext=void 0,this.properties=void 0},canCollide:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||this.collisionCallback!==void 0}},collides:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown}},hasInterestingFace:{get:function(){return this.faceTop||this.faceBottom||this.faceLeft||this.faceRight}},tileset:{get:function(){var h=this.layer.tilemapLayer;if(h){var u=h.gidMap[this.index];if(u)return u}return null}},tilemapLayer:{get:function(){return this.layer.tilemapLayer}},tilemap:{get:function(){var h=this.tilemapLayer;return h?h.tilemap:null}}});e.exports=l},function(e,f,i){var n={};e.exports=n;var o=i(64),r=i(32),a=i(41),l=i(84),h=i(83),u=i(1393);(function(){n.rectangle=function(v,d,c,p,g){g=g||{};var m={label:"Rectangle Body",position:{x:v,y:d},vertices:o.fromPath("L 0 0 L "+c+" 0 L "+c+" "+p+" L 0 "+p)};if(g.chamfer){var x=g.chamfer;m.vertices=o.chamfer(m.vertices,x.radius,x.quality,x.qualityMin,x.qualityMax),delete g.chamfer}return a.create(r.extend({},m,g))},n.trapezoid=function(v,d,c,p,g,m){m=m||{},g*=.5;var x=(1-g*2)*c,y=c*g,T=y+x,C=T+y,S;g<.5?S="L 0 0 L "+y+" "+-p+" L "+T+" "+-p+" L "+C+" 0":S="L 0 0 L "+T+" "+-p+" L "+C+" 0";var E={label:"Trapezoid Body",position:{x:v,y:d},vertices:o.fromPath(S)};if(m.chamfer){var M=m.chamfer;E.vertices=o.chamfer(E.vertices,M.radius,M.quality,M.qualityMin,M.qualityMax),delete m.chamfer}return a.create(r.extend({},E,m))},n.circle=function(v,d,c,p,g){p=p||{};var m={label:"Circle Body",circleRadius:c};g=g||25;var x=Math.ceil(Math.max(10,Math.min(g,c)));return x%2===1&&(x+=1),n.polygon(v,d,x,c,r.extend({},m,p))},n.polygon=function(v,d,c,p,g){if(g=g||{},c<3)return n.circle(v,d,p,g);for(var m=2*Math.PI/c,x="",y=m*.5,T=0;T<c;T+=1){var C=y+T*m,S=Math.cos(C)*p,E=Math.sin(C)*p;x+="L "+S.toFixed(3)+" "+E.toFixed(3)+" "}var M={label:"Polygon Body",position:{x:v,y:d},vertices:o.fromPath(x)};if(g.chamfer){var O=g.chamfer;M.vertices=o.chamfer(M.vertices,O.radius,O.quality,O.qualityMin,O.qualityMax),delete g.chamfer}return a.create(r.extend({},M,g))},n.fromVertices=function(v,d,c,p,g,m,x){var y,T,C,S,E,M;for(p=p||{},T=[],g=typeof g!="undefined"?g:!1,m=typeof m!="undefined"?m:.01,x=typeof x!="undefined"?x:10,u||r.warn("Bodies.fromVertices: poly-decomp.js required. Could not decompose vertices. Fallback to convex hull."),r.isArray(c[0])||(c=[c]),M=0;M<c.length;M+=1)if(S=c[M],C=o.isConvex(S),C||!u)C?S=o.clockwiseSort(S):S=o.hull(S),T.push({position:{x:v,y:d},vertices:S});else{var O=S.map(function(D){return[D.x,D.y]});u.makeCCW(O),m!==!1&&u.removeCollinearPoints(O,m);var L=u.quickDecomp(O);for(E=0;E<L.length;E++){var R=L[E],w=R.map(function(D){return{x:D[0],y:D[1]}});x>0&&o.area(w)<x||T.push({position:o.centre(w),vertices:w})}}for(E=0;E<T.length;E++)T[E]=a.create(r.extend(T[E],p));return g&&n.flagCoincidentParts(T,5),T.length>1?(y=a.create(r.extend({parts:T.slice(0)},p)),a.setPosition(y,{x:v,y:d}),y):T[0]},n.flagCoincidentParts=function(v,d){d===void 0&&(d=5);for(var c=0;c<v.length;c++)for(var p=v[c],g=c+1;g<v.length;g++){var m=v[g];if(l.overlaps(p.bounds,m.bounds))for(var x=p.vertices,y=m.vertices,T=0;T<p.vertices.length;T++)for(var C=0;C<m.vertices.length;C++){var S=h.magnitudeSquared(h.sub(x[(T+1)%x.length],y[C])),E=h.magnitudeSquared(h.sub(x[T],y[(C+1)%y.length]));S<d&&E<d&&(x[T].isInternal=!0,y[C].isInternal=!0)}}return v}})()},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n.x-n.width*n.originX+n.width*.5};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){var r=n.width*n.originX;return n.x=o+r-n.width*.5,n};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n.y-n.height*n.originY+n.height*.5};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){var r=n.height*n.originY;return n.y=o+r-n.height*.5,n};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={POST_RENDER:i(628),PRE_RENDER:i(629),RENDER:i(630),RESIZE:i(631)}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={BITMAPMASK_PIPELINE:"BitmapMaskPipeline",LIGHT_PIPELINE:"Light2D",POINTLIGHT_PIPELINE:"PointLightPipeline",SINGLE_PIPELINE:"SinglePipeline",MULTI_PIPELINE:"MultiPipeline",ROPE_PIPELINE:"RopePipeline",GRAPHICS_PIPELINE:"GraphicsPipeline",POSTFX_PIPELINE:"PostFXPipeline",UTILITY_PIPELINE:"UtilityPipeline"};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(74),o=function(r,a,l,h){h===void 0&&(h=r);var u;if(!Array.isArray(a))return u=r.indexOf(a),u!==-1?(n(r,u),l&&l.call(h,a),a):null;for(var v=a.length-1,d=[];v>=0;){var c=a[v];u=r.indexOf(c),u!==-1&&(n(r,u),d.push(c),l&&l.call(h,c)),v--}return d};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(199),r=i(10),a=i(3),l=new n({initialize:function(u){this.type=u,this.defaultDivisions=5,this.arcLengthDivisions=100,this.cacheArcLengths=[],this.needsUpdate=!0,this.active=!0,this._tmpVec2A=new a,this._tmpVec2B=new a},draw:function(h,u){return u===void 0&&(u=32),h.strokePoints(this.getPoints(u))},getBounds:function(h,u){h||(h=new r),u===void 0&&(u=16);var v=this.getLength();u>v&&(u=v/2);var d=Math.max(1,Math.round(v/u));return o(this.getSpacedPoints(d),h)},getDistancePoints:function(h){var u=this.getLength(),v=Math.max(1,u/h);return this.getSpacedPoints(v)},getEndPoint:function(h){return h===void 0&&(h=new a),this.getPointAt(1,h)},getLength:function(){var h=this.getLengths();return h[h.length-1]},getLengths:function(h){if(h===void 0&&(h=this.arcLengthDivisions),this.cacheArcLengths.length===h+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var u=[],v,d=this.getPoint(0,this._tmpVec2A),c=0;u.push(0);for(var p=1;p<=h;p++)v=this.getPoint(p/h,this._tmpVec2B),c+=v.distance(d),u.push(c),d.copy(v);return this.cacheArcLengths=u,u},getPointAt:function(h,u){var v=this.getUtoTmapping(h);return this.getPoint(v,u)},getPoints:function(h,u,v){v===void 0&&(v=[]),h||(u?h=this.getLength()/u:h=this.defaultDivisions);for(var d=0;d<=h;d++)v.push(this.getPoint(d/h));return v},getRandomPoint:function(h){return h===void 0&&(h=new a),this.getPoint(Math.random(),h)},getSpacedPoints:function(h,u,v){v===void 0&&(v=[]),h||(u?h=this.getLength()/u:h=this.defaultDivisions);for(var d=0;d<=h;d++){var c=this.getUtoTmapping(d/h,null,h);v.push(this.getPoint(c))}return v},getStartPoint:function(h){return h===void 0&&(h=new a),this.getPointAt(0,h)},getTangent:function(h,u){u===void 0&&(u=new a);var v=1e-4,d=h-v,c=h+v;return d<0&&(d=0),c>1&&(c=1),this.getPoint(d,this._tmpVec2A),this.getPoint(c,u),u.subtract(this._tmpVec2A).normalize()},getTangentAt:function(h,u){var v=this.getUtoTmapping(h);return this.getTangent(v,u)},getTFromDistance:function(h,u){return h<=0?0:this.getUtoTmapping(0,h,u)},getUtoTmapping:function(h,u,v){var d=this.getLengths(v),c=0,p=d.length,g;u?g=Math.min(u,d[p-1]):g=h*d[p-1];for(var m=0,x=p-1,y;m<=x;)if(c=Math.floor(m+(x-m)/2),y=d[c]-g,y<0)m=c+1;else if(y>0)x=c-1;else{x=c;break}if(c=x,d[c]===g)return c/(p-1);var T=d[c],C=d[c+1],S=C-T,E=(g-T)/S;return(c+E)/(p-1)},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()}});e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ADD:i(968),COMPLETE:i(969),FILE_COMPLETE:i(970),FILE_KEY_COMPLETE:i(971),FILE_LOAD_ERROR:i(972),FILE_LOAD:i(973),FILE_PROGRESS:i(974),POST_PROCESS:i(975),PROGRESS:i(976),START:i(977)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4),o=function(r,a,l){l===void 0&&(l=new n);var h=r.x1,u=r.y1,v=r.x2,d=r.y2,c=a.x1,p=a.y1,g=a.x2,m=a.y2,x=(g-c)*(u-p)-(m-p)*(h-c),y=(v-h)*(u-p)-(d-u)*(h-c),T=(m-p)*(v-h)-(g-c)*(d-u);if(T===0)return!1;var C=x/T,S=y/T;return C>=0&&C<=1&&S>=0&&S<=1?(l.x=h+C*(v-h),l.y=u+C*(d-u),!0):!1};e.exports=o},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return Math.atan2(n.y2-n.y1,n.x2-n.x1)};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(18),o=function(r,a,l){return r=n(r,0,1),(l-a)*r+a};e.exports=o},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r){return n&&n.hasOwnProperty(o)?n[o]:r};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={CREATED:0,INIT:1,DELAY:2,OFFSET_DELAY:3,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING_ADD:20,PAUSED:21,LOOP_DELAY:22,ACTIVE:23,COMPLETE_DELAY:24,PENDING_REMOVE:25,REMOVED:26};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(315),r=new n({initialize:function(l,h){this.parent=l,this.events=h,h||(this.events=l.events?l.events:l),this.list={},this.values={},this._frozen=!1,!l.hasOwnProperty("sys")&&this.events&&this.events.once(o.DESTROY,this.destroy,this)},get:function(a){var l=this.list;if(Array.isArray(a)){for(var h=[],u=0;u<a.length;u++)h.push(l[a[u]]);return h}else return l[a]},getAll:function(){var a={};for(var l in this.list)this.list.hasOwnProperty(l)&&(a[l]=this.list[l]);return a},query:function(a){var l={};for(var h in this.list)this.list.hasOwnProperty(h)&&h.match(a)&&(l[h]=this.list[h]);return l},set:function(a,l){if(this._frozen)return this;if(typeof a=="string")return this.setValue(a,l);for(var h in a)this.setValue(h,a[h]);return this},inc:function(a,l){if(this._frozen)return this;l===void 0&&(l=1);var h=this.get(a);return h===void 0&&(h=0),this.set(a,h+l),this},toggle:function(a){return this._frozen?this:(this.set(a,!this.get(a)),this)},setValue:function(a,l){if(this._frozen)return this;if(this.has(a))this.values[a]=l;else{var h=this,u=this.list,v=this.events,d=this.parent;Object.defineProperty(this.values,a,{enumerable:!0,configurable:!0,get:function(){return u[a]},set:function(c){if(!h._frozen){var p=u[a];u[a]=c,v.emit(o.CHANGE_DATA,d,a,c,p),v.emit(o.CHANGE_DATA_KEY+a,d,c,p)}}}),u[a]=l,v.emit(o.SET_DATA,d,a,l)}return this},each:function(a,l){for(var h=[this.parent,null,void 0],u=1;u<arguments.length;u++)h.push(arguments[u]);for(var v in this.list)h[1]=v,h[2]=this.list[v],a.apply(l,h);return this},merge:function(a,l){l===void 0&&(l=!0);for(var h in a)a.hasOwnProperty(h)&&(l||!l&&!this.has(h))&&this.setValue(h,a[h]);return this},remove:function(a){if(this._frozen)return this;if(Array.isArray(a))for(var l=0;l<a.length;l++)this.removeValue(a[l]);else return this.removeValue(a);return this},removeValue:function(a){if(this.has(a)){var l=this.list[a];delete this.list[a],delete this.values[a],this.events.emit(o.REMOVE_DATA,this.parent,a,l)}return this},pop:function(a){var l=void 0;return!this._frozen&&this.has(a)&&(l=this.list[a],delete this.list[a],delete this.values[a],this.events.emit(o.REMOVE_DATA,this.parent,a,l)),l},has:function(a){return this.list.hasOwnProperty(a)},setFreeze:function(a){return this._frozen=a,this},reset:function(){for(var a in this.list)delete this.list[a],delete this.values[a];return this._frozen=!1,this},destroy:function(){this.reset(),this.events.off(o.CHANGE_DATA),this.events.off(o.SET_DATA),this.events.off(o.REMOVE_DATA),this.parent=null},freeze:{get:function(){return this._frozen},set:function(a){this._frozen=!!a}},count:{get:function(){var a=0;for(var l in this.list)this.list[l]!==void 0&&a++;return a}}});e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=new n({initialize:function(a){if(this.entries={},this.size=0,Array.isArray(a))for(var l=0;l<a.length;l++)this.set(a[l][0],a[l][1])},set:function(r,a){return this.has(r)||this.size++,this.entries[r]=a,this},get:function(r){if(this.has(r))return this.entries[r]},getArray:function(){var r=[],a=this.entries;for(var l in a)r.push(a[l]);return r},has:function(r){return this.entries.hasOwnProperty(r)},delete:function(r){return this.has(r)&&(delete this.entries[r],this.size--),this},clear:function(){return Object.keys(this.entries).forEach(function(r){delete this.entries[r]},this),this.size=0,this},keys:function(){return Object.keys(this.entries)},values:function(){var r=[],a=this.entries;for(var l in a)r.push(a[l]);return r},dump:function(){var r=this.entries;console.group("Map");for(var a in r)console.log(a,r[a]);console.groupEnd()},each:function(r){var a=this.entries;for(var l in a)if(r(l,a[l])===!1)break;return this},contains:function(r){var a=this.entries;for(var l in a)if(a[l]===r)return!0;return!1},merge:function(r,a){a===void 0&&(a=!1);var l=this.entries,h=r.entries;for(var u in h)l.hasOwnProperty(u)&&a?l[u]=h[u]:this.set(u,h[u]);return this}});e.exports=o},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r){return n<<16|o<<8|r};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ENTER_FULLSCREEN:i(800),FULLSCREEN_FAILED:i(801),FULLSCREEN_UNSUPPORTED:i(802),LEAVE_FULLSCREEN:i(803),ORIENTATION_CHANGE:i(804),RESIZE:i(805)}},function(e,f,i){(function(n){/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2020 Photon Storm Ltd.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var o={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1};function r(){if(typeof importScripts=="function")return o;var a=navigator.userAgent;/Windows/.test(a)?o.windows=!0:/Mac OS/.test(a)&&!/like Mac OS/.test(a)?navigator.maxTouchPoints&&navigator.maxTouchPoints>2?(o.iOS=!0,o.iPad=!0,navigator.appVersion.match(/Version\/(\d+)/),o.iOSVersion=parseInt(RegExp.$1,10)):o.macOS=!0:/Android/.test(a)?o.android=!0:/Linux/.test(a)?o.linux=!0:/iP[ao]d|iPhone/i.test(a)?(o.iOS=!0,navigator.appVersion.match(/OS (\d+)/),o.iOSVersion=parseInt(RegExp.$1,10),o.iPhone=a.toLowerCase().indexOf("iphone")!==-1,o.iPad=a.toLowerCase().indexOf("ipad")!==-1):/Kindle/.test(a)||/\bKF[A-Z][A-Z]+/.test(a)||/Silk.*Mobile Safari/.test(a)?o.kindle=!0:/CrOS/.test(a)&&(o.chromeOS=!0),(/Windows Phone/i.test(a)||/IEMobile/i.test(a))&&(o.android=!1,o.iOS=!1,o.macOS=!1,o.windows=!0,o.windowsPhone=!0);var l=/Silk/.test(a);return(o.windows||o.macOS||o.linux&&!l||o.chromeOS)&&(o.desktop=!0),(o.windowsPhone||/Windows NT/i.test(a)&&/Touch/i.test(a))&&(o.desktop=!1),navigator.standalone&&(o.webApp=!0),typeof importScripts!="function"&&(window.cordova!==void 0&&(o.cordova=!0),window.ejecta!==void 0&&(o.ejecta=!0)),typeof n!="undefined"&&n.versions&&n.versions.node&&(o.node=!0),o.node&&typeof n.versions=="object"&&(o.nodeWebkit=!!n.versions["node-webkit"],o.electron=!!n.versions.electron),/Crosswalk/.test(a)&&(o.crosswalk=!0),o.pixelRatio=window.devicePixelRatio||1,o}e.exports=r()}).call(this,i(807))},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ADD:i(861),ERROR:i(862),LOAD:i(863),READY:i(864),REMOVE:i(865)}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={BYTE:{enum:5120,size:1},UNSIGNED_BYTE:{enum:5121,size:1},SHORT:{enum:5122,size:2},UNSIGNED_SHORT:{enum:5123,size:2},INT:{enum:5124,size:4},UNSIGNED_INT:{enum:5125,size:4},FLOAT:{enum:5126,size:4}};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(59),r=i(2),a=i(878),l=i(879),h=i(25),u=i(12),v=i(107),d=i(58),c=new n({Extends:d,initialize:function(g){var m=g.game.renderer,x=r(g,"fragShader",a);g.fragShader=u.parseFragmentShaderMaxTextures(x,m.maxTextures),g.vertShader=r(g,"vertShader",l),g.attributes=r(g,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:v.UNSIGNED_BYTE,normalized:!0}]),d.call(this,g),this._tempMatrix1=new h,this._tempMatrix2=new h,this._tempMatrix3=new h,this.calcMatrix=new h,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},boot:function(){d.prototype.boot.call(this),this.currentShader.set1iv("uMainSampler",this.renderer.textureIndexes)},batchSprite:function(p,g,m){this.manager.set(this,p);var x=this._tempMatrix1,y=this._tempMatrix2,T=this._tempMatrix3,C=p.frame,S=C.glTexture,E=C.u0,M=C.v0,O=C.u1,L=C.v1,R=C.x,w=C.y,D=C.cutWidth,B=C.cutHeight,N=C.customPivot,z=p.displayOriginX,X=p.displayOriginY,k=-z+R,K=-X+w;if(p.isCropped){var b=p._crop;(b.flipX!==p.flipX||b.flipY!==p.flipY)&&C.updateCropUVs(b,p.flipX,p.flipY),E=b.u0,M=b.v0,O=b.u1,L=b.v1,D=b.width,B=b.height,R=b.x,w=b.y,k=-z+R,K=-X+w}var I=1,G=1;p.flipX&&(N||(k+=-C.realWidth+z*2),I=-1),(p.flipY||C.source.isGLTexture&&!S.flipY)&&(N||(K+=-C.realHeight+X*2),G=-1),y.applyITRS(p.x,p.y,p.rotation,p.scaleX*I,p.scaleY*G),x.copyFrom(g.matrix),m?(x.multiplyWithOffset(m,-g.scrollX*p.scrollFactorX,-g.scrollY*p.scrollFactorY),y.e=p.x,y.f=p.y):(y.e-=g.scrollX*p.scrollFactorX,y.f-=g.scrollY*p.scrollFactorY),x.multiply(y,T);var Y=k+D,U=K+B,W=g.roundPixels,H=T.getXRound(k,K,W),Z=T.getYRound(k,K,W),q=T.getXRound(k,U,W),_=T.getYRound(k,U,W),nt=T.getXRound(Y,U,W),rt=T.getYRound(Y,U,W),at=T.getXRound(Y,K,W),ct=T.getYRound(Y,K,W),ut=u.getTintAppendFloatAlpha,pt=g.alpha,Dt=ut(p.tintTopLeft,pt*p._alphaTL),St=ut(p.tintTopRight,pt*p._alphaTR),Et=ut(p.tintBottomLeft,pt*p._alphaBL),dt=ut(p.tintBottomRight,pt*p._alphaBR);this.shouldFlush(6)&&this.flush();var Bt=this.setGameObject(p,C);this.manager.preBatch(p),this.batchQuad(p,H,Z,q,_,nt,rt,at,ct,E,M,O,L,Dt,St,Et,dt,p.tintFill,S,Bt),this.manager.postBatch(p)},batchTexture:function(p,g,m,x,y,T,C,S,E,M,O,L,R,w,D,B,N,z,X,k,K,b,I,G,Y,U,W,H,Z,q,_,nt){this.manager.set(this,p);var rt=this._tempMatrix1,at=this._tempMatrix2,ct=this._tempMatrix3,ut=z/m+W,pt=X/x+H,Dt=(z+k)/m+W,St=(X+K)/x+H,Et=C,dt=S,Bt=-B,mt=-N;if(p.isCropped){var Ot=p._crop,Oe=Ot.width,$e=Ot.height;Et=Oe,dt=$e,C=Oe,S=$e,z=Ot.x,X=Ot.y;var Qt=z,Ht=X;L&&(Qt=k-Ot.x-Oe),R&&(Ht=K-Ot.y-$e),ut=Qt/m+W,pt=Ht/x+H,Dt=(Qt+Oe)/m+W,St=(Ht+$e)/x+H,Bt=-B+z,mt=-N+X}R=R^(!_&&g.isRenderTexture?1:0),L&&(Et*=-1,Bt+=C),R&&(dt*=-1,mt+=S);var oe=Bt+Et,ne=mt+dt;at.applyITRS(y,T,O,E,M),rt.copyFrom(Z.matrix),q?(rt.multiplyWithOffset(q,-Z.scrollX*w,-Z.scrollY*D),at.e=y,at.f=T):(at.e-=Z.scrollX*w,at.f-=Z.scrollY*D),rt.multiply(at,ct);var he=Z.roundPixels,De=ct.getXRound(Bt,mt,he),Ci=ct.getYRound(Bt,mt,he),Si=ct.getXRound(Bt,ne,he),Ei=ct.getYRound(Bt,ne,he),Pi=ct.getXRound(oe,ne,he),Mi=ct.getYRound(oe,ne,he),Ai=ct.getXRound(oe,mt,he),ma=ct.getYRound(oe,mt,he);nt===void 0&&(nt=this.renderer.setTexture2D(g)),p&&this.manager.preBatch(p),this.batchQuad(p,De,Ci,Si,Ei,Pi,Mi,Ai,ma,ut,pt,Dt,St,b,I,G,Y,U,g,nt),p&&this.manager.postBatch(p)},batchTextureFrame:function(p,g,m,x,y,T,C){this.manager.set(this);var S=this._tempMatrix1.copyFrom(T),E=this._tempMatrix2,M=g+p.width,O=m+p.height;C?S.multiply(C,E):E=S;var L=E.getX(g,m),R=E.getY(g,m),w=E.getX(g,O),D=E.getY(g,O),B=E.getX(M,O),N=E.getY(M,O),z=E.getX(M,m),X=E.getY(M,m),k=this.renderer.setTextureSource(p.source);x=u.getTintAppendFloatAlpha(x,y),this.batchQuad(null,L,R,w,D,B,N,z,X,p.u0,p.v0,p.u1,p.v1,x,x,x,x,0,p.glTexture,k)},batchFillRect:function(p,g,m,x,y,T){this.renderer.pipelines.set(this);var C=this.calcMatrix;T&&T.multiply(y,C);var S=p+m,E=g+x,M=C.getX(p,g),O=C.getY(p,g),L=C.getX(p,E),R=C.getY(p,E),w=C.getX(S,E),D=C.getY(S,E),B=C.getX(S,g),N=C.getY(S,g),z=this.fillTint;this.batchQuad(null,M,O,L,R,w,D,B,N,0,0,1,1,z.TL,z.TR,z.BL,z.BR,2)},batchFillTriangle:function(p,g,m,x,y,T,C,S){this.renderer.pipelines.set(this);var E=this.calcMatrix;S&&S.multiply(C,E);var M=E.getX(p,g),O=E.getY(p,g),L=E.getX(m,x),R=E.getY(m,x),w=E.getX(y,T),D=E.getY(y,T),B=this.fillTint;this.batchTri(null,M,O,L,R,w,D,0,0,1,1,B.TL,B.TR,B.BL,2)},batchStrokeTriangle:function(p,g,m,x,y,T,C,S,E){var M=this.tempTriangle;M[0].x=p,M[0].y=g,M[0].width=C,M[1].x=m,M[1].y=x,M[1].width=C,M[2].x=y,M[2].y=T,M[2].width=C,M[3].x=p,M[3].y=g,M[3].width=C,this.batchStrokePath(M,C,!1,S,E)},batchFillPath:function(p,g,m){this.renderer.pipelines.set(this);var x=this.calcMatrix;m&&m.multiply(g,x);for(var y=p.length,T=this.polygonCache,C,S,E=this.fillTint.TL,M=this.fillTint.TR,O=this.fillTint.BL,L=0;L<y;++L)S=p[L],T.push(S.x,S.y);C=o(T),y=C.length;for(var R=0;R<y;R+=3){var w=C[R+0]*2,D=C[R+1]*2,B=C[R+2]*2,N=T[w+0],z=T[w+1],X=T[D+0],k=T[D+1],K=T[B+0],b=T[B+1],I=x.getX(N,z),G=x.getY(N,z),Y=x.getX(X,k),U=x.getY(X,k),W=x.getX(K,b),H=x.getY(K,b);this.batchTri(null,I,G,Y,U,W,H,0,0,1,1,E,M,O,2)}T.length=0},batchStrokePath:function(p,g,m,x,y){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var T=p.length-1,C=0;C<T;C++){var S=p[C],E=p[C+1];this.batchLine(S.x,S.y,E.x,E.y,S.width/2,E.width/2,g,C,!m&&C===T-1,x,y)}},batchLine:function(p,g,m,x,y,T,C,S,E,M,O){this.renderer.pipelines.set(this);var L=this.calcMatrix;O&&O.multiply(M,L);var R=m-p,w=x-g,D=Math.sqrt(R*R+w*w),B=y*(x-g)/D,N=y*(p-m)/D,z=T*(x-g)/D,X=T*(p-m)/D,k=m-z,K=x-X,b=p-B,I=g-N,G=m+z,Y=x+X,U=p+B,W=g+N,H=L.getX(k,K),Z=L.getY(k,K),q=L.getX(b,I),_=L.getY(b,I),nt=L.getX(G,Y),rt=L.getY(G,Y),at=L.getX(U,W),ct=L.getY(U,W),ut=this.strokeTint,pt=ut.TL,Dt=ut.TR,St=ut.BL,Et=ut.BR;if(this.batchQuad(null,at,ct,q,_,H,Z,nt,rt,0,0,1,1,pt,Dt,St,Et,2),!(C<=2)){var dt=this.prevQuad,Bt=this.firstQuad;S>0&&dt[4]?this.batchQuad(null,at,ct,q,_,dt[0],dt[1],dt[2],dt[3],0,0,1,1,pt,Dt,St,Et,2):(Bt[0]=at,Bt[1]=ct,Bt[2]=q,Bt[3]=_,Bt[4]=1),E&&Bt[4]?this.batchQuad(null,H,Z,nt,rt,Bt[0],Bt[1],Bt[2],Bt[3],0,0,1,1,pt,Dt,St,Et,2):(dt[0]=H,dt[1]=Z,dt[2]=nt,dt[3]=rt,dt[4]=1)}}});e.exports=c},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(18),r=i(17),a=new n({initialize:function(h,u,v,d,c,p,g){this.texture=h,this.name=u,this.source=h.source[v],this.sourceIndex=v,this.glTexture=this.source.glTexture,this.cutX,this.cutY,this.cutWidth,this.cutHeight,this.x=0,this.y=0,this.width,this.height,this.halfWidth,this.halfHeight,this.centerX,this.centerY,this.pivotX=0,this.pivotY=0,this.customPivot=!1,this.rotated=!1,this.autoRound=-1,this.customData={},this.u0=0,this.v0=0,this.u1=0,this.v1=0,this.data={cut:{x:0,y:0,w:0,h:0,r:0,b:0},trim:!1,sourceSize:{w:0,h:0},spriteSourceSize:{x:0,y:0,w:0,h:0,r:0,b:0},radius:0,drawImage:{x:0,y:0,width:0,height:0}},this.setSize(p,g,d,c)},setSize:function(l,h,u,v){u===void 0&&(u=0),v===void 0&&(v=0),this.cutX=u,this.cutY=v,this.cutWidth=l,this.cutHeight=h,this.width=l,this.height=h,this.halfWidth=Math.floor(l*.5),this.halfHeight=Math.floor(h*.5),this.centerX=Math.floor(l/2),this.centerY=Math.floor(h/2);var d=this.data,c=d.cut;c.x=u,c.y=v,c.w=l,c.h=h,c.r=u+l,c.b=v+h,d.sourceSize.w=l,d.sourceSize.h=h,d.spriteSourceSize.w=l,d.spriteSourceSize.h=h,d.radius=.5*Math.sqrt(l*l+h*h);var p=d.drawImage;return p.x=u,p.y=v,p.width=l,p.height=h,this.updateUVs()},setTrim:function(l,h,u,v,d,c){var p=this.data,g=p.spriteSourceSize;return p.trim=!0,p.sourceSize.w=l,p.sourceSize.h=h,g.x=u,g.y=v,g.w=d,g.h=c,g.r=u+d,g.b=v+c,this.x=u,this.y=v,this.width=d,this.height=c,this.halfWidth=d*.5,this.halfHeight=c*.5,this.centerX=Math.floor(d/2),this.centerY=Math.floor(c/2),this.updateUVs()},setCropUVs:function(l,h,u,v,d,c,p){var g=this.cutX,m=this.cutY,x=this.cutWidth,y=this.cutHeight,T=this.realWidth,C=this.realHeight;h=o(h,0,T),u=o(u,0,C),v=o(v,0,T-h),d=o(d,0,C-u);var S=g+h,E=m+u,M=v,O=d,L=this.data;if(L.trim){var R=L.spriteSourceSize;v=o(v,0,x-h),d=o(d,0,y-u);var w=h+v,D=u+d,B=!(R.r<h||R.b<u||R.x>w||R.y>D);if(B){var N=Math.max(R.x,h),z=Math.max(R.y,u),X=Math.min(R.r,w)-N,k=Math.min(R.b,D)-z;M=X,O=k,c?S=g+(x-(N-R.x)-X):S=g+(N-R.x),p?E=m+(y-(z-R.y)-k):E=m+(z-R.y),h=N,u=z,v=X,d=k}else S=0,E=0,M=0,O=0}else c&&(S=g+(x-h-v)),p&&(E=m+(y-u-d));var K=this.source.width,b=this.source.height;return l.u0=Math.max(0,S/K),l.v0=Math.max(0,E/b),l.u1=Math.min(1,(S+M)/K),l.v1=Math.min(1,(E+O)/b),l.x=h,l.y=u,l.cx=S,l.cy=E,l.cw=M,l.ch=O,l.width=v,l.height=d,l.flipX=c,l.flipY=p,l},updateCropUVs:function(l,h,u){return this.setCropUVs(l,l.x,l.y,l.width,l.height,h,u)},setUVs:function(l,h,u,v,d,c){var p=this.data.drawImage;return p.width=l,p.height=h,this.u0=u,this.v0=v,this.u1=d,this.v1=c,this},updateUVs:function(){var l=this.cutX,h=this.cutY,u=this.cutWidth,v=this.cutHeight,d=this.data.drawImage;d.width=u,d.height=v;var c=this.source.width,p=this.source.height;return this.u0=l/c,this.v0=h/p,this.u1=(l+u)/c,this.v1=(h+v)/p,this},updateUVsInverted:function(){var l=this.source.width,h=this.source.height;return this.u0=(this.cutX+this.cutHeight)/l,this.v0=this.cutY/h,this.u1=this.cutX/l,this.v1=(this.cutY+this.cutWidth)/h,this},clone:function(){var l=new a(this.texture,this.name,this.sourceIndex);return l.cutX=this.cutX,l.cutY=this.cutY,l.cutWidth=this.cutWidth,l.cutHeight=this.cutHeight,l.x=this.x,l.y=this.y,l.width=this.width,l.height=this.height,l.halfWidth=this.halfWidth,l.halfHeight=this.halfHeight,l.centerX=this.centerX,l.centerY=this.centerY,l.rotated=this.rotated,l.data=r(!0,l.data,this.data),l.updateUVs(),l},destroy:function(){this.source=null,this.texture=null,this.glTexture=null,this.customData=null,this.data=null},realWidth:{get:function(){return this.data.sourceSize.w}},realHeight:{get:function(){return this.data.sourceSize.h}},radius:{get:function(){return this.data.radius}},trimmed:{get:function(){return this.data.trim}},canvasData:{get:function(){return this.data.drawImage}}});e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(208),o=i(0),r=i(1),a=i(79),l=new o({initialize:function(u){this.parent=u,this.list=[],this.position=0,this.addCallback=r,this.removeCallback=r,this._sortKey=""},add:function(h,u){return u?n.Add(this.list,h):n.Add(this.list,h,0,this.addCallback,this)},addAt:function(h,u,v){return v?n.AddAt(this.list,h,u):n.AddAt(this.list,h,u,0,this.addCallback,this)},getAt:function(h){return this.list[h]},getIndex:function(h){return this.list.indexOf(h)},sort:function(h,u){return h?(u===void 0&&(u=function(v,d){return v[h]-d[h]}),a(this.list,u),this):this},getByName:function(h){return n.GetFirst(this.list,"name",h)},getRandom:function(h,u){return n.GetRandom(this.list,h,u)},getFirst:function(h,u,v,d){return n.GetFirst(this.list,h,u,v,d)},getAll:function(h,u,v,d){return n.GetAll(this.list,h,u,v,d)},count:function(h,u){return n.CountAllMatching(this.list,h,u)},swap:function(h,u){n.Swap(this.list,h,u)},moveTo:function(h,u){return n.MoveTo(this.list,h,u)},moveAbove:function(h,u){return n.MoveAbove(this.list,h,u)},moveBelow:function(h,u){return n.MoveBelow(this.list,h,u)},remove:function(h,u){return u?n.Remove(this.list,h):n.Remove(this.list,h,this.removeCallback,this)},removeAt:function(h,u){return u?n.RemoveAt(this.list,h):n.RemoveAt(this.list,h,this.removeCallback,this)},removeBetween:function(h,u,v){return v?n.RemoveBetween(this.list,h,u):n.RemoveBetween(this.list,h,u,this.removeCallback,this)},removeAll:function(h){for(var u=this.list.length;u--;)this.remove(this.list[u],h);return this},bringToTop:function(h){return n.BringToTop(this.list,h)},sendToBack:function(h){return n.SendToBack(this.list,h)},moveUp:function(h){return n.MoveUp(this.list,h),h},moveDown:function(h){return n.MoveDown(this.list,h),h},reverse:function(){return this.list.reverse(),this},shuffle:function(){return n.Shuffle(this.list),this},replace:function(h,u){return n.Replace(this.list,h,u)},exists:function(h){return this.list.indexOf(h)>-1},setAll:function(h,u,v,d){return n.SetAll(this.list,h,u,v,d),this},each:function(h,u){for(var v=[null],d=2;d<arguments.length;d++)v.push(arguments[d]);for(d=0;d<this.list.length;d++)v[0]=this.list[d],h.apply(u,v)},shutdown:function(){this.removeAll(),this.list=[]},destroy:function(){this.removeAll(),this.parent=null,this.addCallback=null,this.removeCallback=null},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}}});e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(112),r=i(445),a=i(446),l=i(56),h=i(180),u=new n({initialize:function(d,c,p,g){d===void 0&&(d=0),c===void 0&&(c=0),p===void 0&&(p=0),g===void 0&&(g=0),this.type=l.ELLIPSE,this.x=d,this.y=c,this.width=p,this.height=g},contains:function(v,d){return o(this,v,d)},getPoint:function(v,d){return r(this,v,d)},getPoints:function(v,d,c){return a(this,v,d,c)},getRandomPoint:function(v){return h(this,v)},setTo:function(v,d,c,p){return this.x=v,this.y=d,this.width=c,this.height=p,this},setEmpty:function(){return this.width=0,this.height=0,this},setPosition:function(v,d){return d===void 0&&(d=v),this.x=v,this.y=d,this},setSize:function(v,d){return d===void 0&&(d=v),this.width=v,this.height=d,this},isEmpty:function(){return this.width<=0||this.height<=0},getMinorRadius:function(){return Math.min(this.width,this.height)/2},getMajorRadius:function(){return Math.max(this.width,this.height)/2},left:{get:function(){return this.x-this.width/2},set:function(v){this.x=v+this.width/2}},right:{get:function(){return this.x+this.width/2},set:function(v){this.x=v-this.width/2}},top:{get:function(){return this.y-this.height/2},set:function(v){this.y=v+this.height/2}},bottom:{get:function(){return this.y+this.height/2},set:function(v){this.y=v-this.height/2}}});e.exports=u},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r){if(n.width<=0||n.height<=0)return!1;var a=(o-n.x)/n.width,l=(r-n.y)/n.height;return a*=a,l*=l,a+l<.25};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(275),o=i(0),r=i(75),a=i(9),l=i(207),h=i(2),u=i(6),v=i(7),d=i(437),c=i(149),p=i(73),g=new o({Extends:a,initialize:function(x,y,T){a.call(this),T?y&&!Array.isArray(y)&&(y=[y]):Array.isArray(y)?v(y[0])&&(T=y,y=null):v(y)&&(T=y,y=null),this.scene=x,this.children=new c,this.isParent=!0,this.type="Group",this.classType=h(T,"classType",p),this.name=h(T,"name",""),this.active=h(T,"active",!0),this.maxSize=h(T,"maxSize",-1),this.defaultKey=h(T,"defaultKey",null),this.defaultFrame=h(T,"defaultFrame",null),this.runChildUpdate=h(T,"runChildUpdate",!1),this.createCallback=h(T,"createCallback",null),this.removeCallback=h(T,"removeCallback",null),this.createMultipleCallback=h(T,"createMultipleCallback",null),this.internalCreateCallback=h(T,"internalCreateCallback",null),this.internalRemoveCallback=h(T,"internalRemoveCallback",null),y&&this.addMultiple(y),T&&this.createMultiple(T),this.on(r.ADDED_TO_SCENE,this.addedToScene,this),this.on(r.REMOVED_FROM_SCENE,this.removedFromScene,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},create:function(m,x,y,T,C,S){if(m===void 0&&(m=0),x===void 0&&(x=0),y===void 0&&(y=this.defaultKey),T===void 0&&(T=this.defaultFrame),C===void 0&&(C=!0),S===void 0&&(S=!0),this.isFull())return null;var E=new this.classType(this.scene,m,x,y,T);return E.addToDisplayList(this.scene.sys.displayList),E.addToUpdateList(),E.visible=C,E.setActive(S),this.add(E),E},createMultiple:function(m){if(this.isFull())return[];Array.isArray(m)||(m=[m]);var x=[];if(m[0].key)for(var y=0;y<m.length;y++){var T=this.createFromConfig(m[y]);x=x.concat(T)}return x},createFromConfig:function(m){if(this.isFull())return[];this.classType=h(m,"classType",this.classType);var x=h(m,"key",void 0),y=h(m,"frame",null),T=h(m,"visible",!0),C=h(m,"active",!0),S=[];if(x===void 0)return S;Array.isArray(x)||(x=[x]),Array.isArray(y)||(y=[y]);var E=h(m,"repeat",0),M=h(m,"randomKey",!1),O=h(m,"randomFrame",!1),L=h(m,"yoyo",!1),R=h(m,"quantity",!1),w=h(m,"frameQuantity",1),D=h(m,"max",0),B=d(x,y,{max:D,qty:R||w,random:M,randomB:O,repeat:E,yoyo:L});m.createCallback&&(this.createCallback=m.createCallback),m.removeCallback&&(this.removeCallback=m.removeCallback);for(var N=0;N<B.length;N++){var z=this.create(0,0,B[N].a,B[N].b,T,C);if(!z)break;S.push(z)}var X=u(m,"setXY.x",0),k=u(m,"setXY.y",0),K=u(m,"setXY.stepX",0),b=u(m,"setXY.stepY",0);n.SetXY(S,X,k,K,b);var I=u(m,"setRotation.value",0),G=u(m,"setRotation.step",0);n.SetRotation(S,I,G);var Y=u(m,"setScale.x",1),U=u(m,"setScale.y",Y),W=u(m,"setScale.stepX",0),H=u(m,"setScale.stepY",0);n.SetScale(S,Y,U,W,H);var Z=u(m,"setOrigin.x",.5),q=u(m,"setOrigin.y",Z),_=u(m,"setOrigin.stepX",0),nt=u(m,"setOrigin.stepY",0);n.SetOrigin(S,Z,q,_,nt);var rt=u(m,"setAlpha.value",1),at=u(m,"setAlpha.step",0);n.SetAlpha(S,rt,at);var ct=u(m,"setDepth.value",0),ut=u(m,"setDepth.step",0);n.SetDepth(S,ct,ut);var pt=u(m,"setScrollFactor.x",1),Dt=u(m,"setScrollFactor.y",pt),St=u(m,"setScrollFactor.stepX",0),Et=u(m,"setScrollFactor.stepY",0);n.SetScrollFactor(S,pt,Dt,St,Et);var dt=h(m,"hitArea",null),Bt=h(m,"hitAreaCallback",null);dt&&n.SetHitArea(S,dt,Bt);var mt=h(m,"gridAlign",!1);return mt&&n.GridAlign(S,mt),this.createMultipleCallback&&this.createMultipleCallback.call(this,S),S},preUpdate:function(m,x){if(!(!this.runChildUpdate||this.children.size===0))for(var y=this.children.entries.slice(),T=0;T<y.length;T++){var C=y[T];C.active&&C.update(m,x)}},add:function(m,x){return x===void 0&&(x=!1),this.isFull()?this:(this.children.set(m),this.internalCreateCallback&&this.internalCreateCallback.call(this,m),this.createCallback&&this.createCallback.call(this,m),x&&(m.addToDisplayList(this.scene.sys.displayList),m.addToUpdateList()),m.on(r.DESTROY,this.remove,this),this)},addMultiple:function(m,x){if(x===void 0&&(x=!1),Array.isArray(m))for(var y=0;y<m.length;y++)this.add(m[y],x);return this},remove:function(m,x,y){return x===void 0&&(x=!1),y===void 0&&(y=!1),this.children.contains(m)?(this.children.delete(m),this.internalRemoveCallback&&this.internalRemoveCallback.call(this,m),this.removeCallback&&this.removeCallback.call(this,m),m.off(r.DESTROY,this.remove,this),y?m.destroy():x&&(m.removeFromDisplayList(),m.removeFromUpdateList()),this):this},clear:function(m,x){m===void 0&&(m=!1),x===void 0&&(x=!1);for(var y=this.children,T=0;T<y.size;T++){var C=y.entries[T];C.off(r.DESTROY,this.remove,this),x?C.destroy():m&&(C.removeFromDisplayList(),C.removeFromUpdateList())}return this.children.clear(),this},contains:function(m){return this.children.contains(m)},getChildren:function(){return this.children.entries},getLength:function(){return this.children.size},getMatching:function(m,x,y,T){return l(this.children.entries,m,x,y,T)},getFirst:function(m,x,y,T,C,S,E){return this.getHandler(!0,1,m,x,y,T,C,S,E)},getFirstNth:function(m,x,y,T,C,S,E,M){return this.getHandler(!0,m,x,y,T,C,S,E,M)},getLast:function(m,x,y,T,C,S,E){return this.getHandler(!1,1,m,x,y,T,C,S,E)},getLastNth:function(m,x,y,T,C,S,E,M){return this.getHandler(!1,m,x,y,T,C,S,E,M)},getHandler:function(m,x,y,T,C,S,E,M,O){y===void 0&&(y=!1),T===void 0&&(T=!1);var L,R,w=0,D=this.children.entries;if(m)for(R=0;R<D.length;R++)if(L=D[R],L.active===y){if(w++,w===x)break}else L=null;else for(R=D.length-1;R>=0;R--)if(L=D[R],L.active===y){if(w++,w===x)break}else L=null;return L?(typeof C=="number"&&(L.x=C),typeof S=="number"&&(L.y=S),L):T?this.create(C,S,E,M,O):null},get:function(m,x,y,T,C){return this.getFirst(!1,!0,m,x,y,T,C)},getFirstAlive:function(m,x,y,T,C,S){return this.getFirst(!0,m,x,y,T,C,S)},getFirstDead:function(m,x,y,T,C,S){return this.getFirst(!1,m,x,y,T,C,S)},playAnimation:function(m,x){return n.PlayAnimation(this.children.entries,m,x),this},isFull:function(){return this.maxSize===-1?!1:this.children.size>=this.maxSize},countActive:function(m){m===void 0&&(m=!0);for(var x=0,y=0;y<this.children.size;y++)this.children.entries[y].active===m&&x++;return x},getTotalUsed:function(){return this.countActive()},getTotalFree:function(){var m=this.getTotalUsed(),x=this.maxSize===-1?999999999999:this.maxSize;return x-m},setActive:function(m){return this.active=m,this},setName:function(m){return this.name=m,this},propertyValueSet:function(m,x,y,T,C){return n.PropertyValueSet(this.children.entries,m,x,y,T,C),this},propertyValueInc:function(m,x,y,T,C){return n.PropertyValueInc(this.children.entries,m,x,y,T,C),this},setX:function(m,x){return n.SetX(this.children.entries,m,x),this},setY:function(m,x){return n.SetY(this.children.entries,m,x),this},setXY:function(m,x,y,T){return n.SetXY(this.children.entries,m,x,y,T),this},incX:function(m,x){return n.IncX(this.children.entries,m,x),this},incY:function(m,x){return n.IncY(this.children.entries,m,x),this},incXY:function(m,x,y,T){return n.IncXY(this.children.entries,m,x,y,T),this},shiftPosition:function(m,x,y){return n.ShiftPosition(this.children.entries,m,x,y),this},angle:function(m,x){return n.Angle(this.children.entries,m,x),this},rotate:function(m,x){return n.Rotate(this.children.entries,m,x),this},rotateAround:function(m,x){return n.RotateAround(this.children.entries,m,x),this},rotateAroundDistance:function(m,x,y){return n.RotateAroundDistance(this.children.entries,m,x,y),this},setAlpha:function(m,x){return n.SetAlpha(this.children.entries,m,x),this},setTint:function(m,x,y,T){return n.SetTint(this.children.entries,m,x,y,T),this},setOrigin:function(m,x,y,T){return n.SetOrigin(this.children.entries,m,x,y,T),this},scaleX:function(m,x){return n.ScaleX(this.children.entries,m,x),this},scaleY:function(m,x){return n.ScaleY(this.children.entries,m,x),this},scaleXY:function(m,x,y,T){return n.ScaleXY(this.children.entries,m,x,y,T),this},setDepth:function(m,x){return n.SetDepth(this.children.entries,m,x),this},setBlendMode:function(m){return n.SetBlendMode(this.children.entries,m),this},setHitArea:function(m,x){return n.SetHitArea(this.children.entries,m,x),this},shuffle:function(){return n.Shuffle(this.children.entries),this},kill:function(m){this.children.contains(m)&&m.setActive(!1)},killAndHide:function(m){this.children.contains(m)&&(m.setActive(!1),m.setVisible(!1))},setVisible:function(m,x,y){return n.SetVisible(this.children.entries,m,x,y),this},toggleVisible:function(){return n.ToggleVisible(this.children.entries),this},destroy:function(m,x){m===void 0&&(m=!1),x===void 0&&(x=!1),!(!this.scene||this.ignoreDestroy)&&(this.emit(r.DESTROY,this),this.removeAllListeners(),this.scene.sys.updateList.remove(this),this.clear(x,m),this.scene=void 0,this.children=void 0)}});e.exports=g},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(12),o=function(r,a,l,h,u,v){for(var d=n.getTintAppendFloatAlpha(l.fillColor,l.fillAlpha*h),c=l.pathData,p=l.pathIndexes,g=0;g<p.length;g+=3){var m=p[g]*2,x=p[g+1]*2,y=p[g+2]*2,T=c[m+0]-u,C=c[m+1]-v,S=c[x+0]-u,E=c[x+1]-v,M=c[y+0]-u,O=c[y+1]-v,L=a.getX(T,C),R=a.getY(T,C),w=a.getX(S,E),D=a.getY(S,E),B=a.getX(M,O),N=a.getY(M,O);r.batchTri(l,L,R,w,D,B,N,0,0,1,1,d,d,d,2)}};e.exports=o},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r){var a=n.x3-n.x1,l=n.y3-n.y1,h=n.x2-n.x1,u=n.y2-n.y1,v=o-n.x1,d=r-n.y1,c=a*a+l*l,p=a*h+l*u,g=a*v+l*d,m=h*h+u*u,x=h*v+u*d,y=c*m-p*p,T=y===0?0:1/y,C=(m*g-p*x)*T,S=(c*x-p*g)*T;return C>=0&&S>=0&&C+S<1};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(10),r=i(3);function a(h,u,v,d){var c=h-v,p=u-d,g=c*c+p*p;return Math.sqrt(g)}var l=new n({initialize:function(u,v,d){this.vertex1=u,this.vertex2=v,this.vertex3=d,this.bounds=new o,this._inCenter=new r},getInCenter:function(h){h===void 0&&(h=!0);var u=this.vertex1,v=this.vertex2,d=this.vertex3,c,p,g,m,x,y;h?(c=u.x,p=u.y,g=v.x,m=v.y,x=d.x,y=d.y):(c=u.vx,p=u.vy,g=v.vx,m=v.vy,x=d.vx,y=d.vy);var T=a(x,y,g,m),C=a(c,p,x,y),S=a(g,m,c,p),E=T+C+S;return this._inCenter.set((c*T+g*C+x*S)/E,(p*T+m*C+y*S)/E)},contains:function(h,u,v){var d=this.vertex1,c=this.vertex2,p=this.vertex3,g=d.vx,m=d.vy,x=c.vx,y=c.vy,T=p.vx,C=p.vy;if(v){var S=v.a,E=v.b,M=v.c,O=v.d,L=v.e,R=v.f;g=d.vx*S+d.vy*M+L,m=d.vx*E+d.vy*O+R,x=c.vx*S+c.vy*M+L,y=c.vx*E+c.vy*O+R,T=p.vx*S+p.vy*M+L,C=p.vx*E+p.vy*O+R}var w=T-g,D=C-m,B=x-g,N=y-m,z=h-g,X=u-m,k=w*w+D*D,K=w*B+D*N,b=w*z+D*X,I=B*B+N*N,G=B*z+N*X,Y=k*I-K*K,U=Y===0?0:1/Y,W=(I*b-K*G)*U,H=(k*G-K*b)*U;return W>=0&&H>=0&&W+H<1},isCounterClockwise:function(h){var u=this.vertex1,v=this.vertex2,d=this.vertex3,c=(v.vx-u.vx)*(d.vy-u.vy)-(v.vy-u.vy)*(d.vx-u.vx);return h<=0?c>=0:c<0},load:function(h,u,v,d,c){return v=this.vertex1.load(h,u,v,d,c),v=this.vertex2.load(h,u,v,d,c),v=this.vertex3.load(h,u,v,d,c),v},transformCoordinatesLocal:function(h,u,v,d){return this.vertex1.transformCoordinatesLocal(h,u,v,d),this.vertex2.transformCoordinatesLocal(h,u,v,d),this.vertex3.transformCoordinatesLocal(h,u,v,d),this},updateBounds:function(){var h=this.vertex1,u=this.vertex2,v=this.vertex3,d=this.bounds;return d.x=Math.min(h.vx,u.vx,v.vx),d.y=Math.min(h.vy,u.vy,v.vy),d.width=Math.max(h.vx,u.vx,v.vx)-d.x,d.height=Math.max(h.vy,u.vy,v.vy)-d.y,this},isInView:function(h,u,v,d,c,p,g,m,x,y,T){var C=this.vertex1.update(c,p,g,m,x,y,T,d),S=this.vertex2.update(c,p,g,m,x,y,T,d),E=this.vertex3.update(c,p,g,m,x,y,T,d);if(C.ta<=0&&S.ta<=0&&E.ta<=0||u&&!this.isCounterClockwise(v))return!1;var M=this.bounds;M.x=Math.min(C.tx,S.tx,E.tx),M.y=Math.min(C.ty,S.ty,E.ty),M.width=Math.max(C.tx,S.tx,E.tx)-M.x,M.height=Math.max(C.ty,S.ty,E.ty)-M.y;var O=h.x+h.width,L=h.y+h.height;return M.width<=0||M.height<=0||h.width<=0||h.height<=0?!1:!(M.right<h.x||M.bottom<h.y||M.x>O||M.y>L)},translate:function(h,u){u===void 0&&(u=0);var v=this.vertex1,d=this.vertex2,c=this.vertex3;return v.x+=h,v.y+=u,d.x+=h,d.y+=u,c.x+=h,c.y+=u,this},x:{get:function(){return this.getInCenter().x},set:function(h){var u=this.getInCenter();this.translate(h-u.x,0)}},y:{get:function(){return this.getInCenter().y},set:function(h){var u=this.getInCenter();this.translate(0,h-u.y)}},alpha:{get:function(){var h=this.vertex1,u=this.vertex2,v=this.vertex3;return(h.alpha+u.alpha+v.alpha)/3},set:function(h){this.vertex1.alpha=h,this.vertex2.alpha=h,this.vertex3.alpha=h}},depth:{get:function(){var h=this.vertex1,u=this.vertex2,v=this.vertex3;return(h.vz+u.vz+v.vz)/3}},destroy:function(){this.vertex1=null,this.vertex2=null,this.vertex3=null}});e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(12),r=i(39),a=new n({Extends:r,initialize:function(h,u,v,d,c,p,g,m,x,y){p===void 0&&(p=16777215),g===void 0&&(g=1),m===void 0&&(m=0),x===void 0&&(x=0),y===void 0&&(y=0),r.call(this,h,u,v),this.vx=0,this.vy=0,this.vz=0,this.nx=m,this.ny=x,this.nz=y,this.u=d,this.v=c,this.color=p,this.alpha=g,this.tx=0,this.ty=0,this.ta=0},setUVs:function(l,h){return this.u=l,this.v=h,this},transformCoordinatesLocal:function(l,h,u,v){var d=this.x,c=this.y,p=this.z,g=l.val,m=d*g[0]+c*g[4]+p*g[8]+g[12],x=d*g[1]+c*g[5]+p*g[9]+g[13],y=d*g[2]+c*g[6]+p*g[10]+g[14],T=d*g[3]+c*g[7]+p*g[11]+g[15];this.vx=m/T*h,this.vy=-(x/T)*u,v<=0?this.vz=y/T:this.vz=-(y/T)},update:function(l,h,u,v,d,c,p,g){var m=this.vx*l+this.vy*u+d,x=this.vx*h+this.vy*v+c;return p&&(m=Math.round(m),x=Math.round(x)),this.tx=m,this.ty=x,this.ta=this.alpha*g,this},load:function(l,h,u,v,d){return l[++u]=this.tx,l[++u]=this.ty,l[++u]=this.u,l[++u]=this.v,l[++u]=v,l[++u]=d,h[++u]=o.getTintAppendFloatAlpha(this.color,this.ta),u}});e.exports=a},function(e,f,i){var n={};e.exports=n;var o=i(166),r=i(32),a=i(84),l=i(41);(function(){n.create=function(h){return r.extend({id:r.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{}},h)},n.setModified=function(h,u,v,d){if(o.trigger(h,"compositeModified",h),h.isModified=u,v&&h.parent&&n.setModified(h.parent,u,v,d),d)for(var c=0;c<h.composites.length;c++){var p=h.composites[c];n.setModified(p,u,v,d)}},n.add=function(h,u){var v=[].concat(u);o.trigger(h,"beforeAdd",{object:u});for(var d=0;d<v.length;d++){var c=v[d];switch(c.type){case"body":if(c.parent!==c){r.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}n.addBody(h,c);break;case"constraint":n.addConstraint(h,c);break;case"composite":n.addComposite(h,c);break;case"mouseConstraint":n.addConstraint(h,c.constraint);break}}return o.trigger(h,"afterAdd",{object:u}),h},n.remove=function(h,u,v){var d=[].concat(u);o.trigger(h,"beforeRemove",{object:u});for(var c=0;c<d.length;c++){var p=d[c];switch(p.type){case"body":n.removeBody(h,p,v);break;case"constraint":n.removeConstraint(h,p,v);break;case"composite":n.removeComposite(h,p,v);break;case"mouseConstraint":n.removeConstraint(h,p.constraint);break}}return o.trigger(h,"afterRemove",{object:u}),h},n.addComposite=function(h,u){return h.composites.push(u),u.parent=h,n.setModified(h,!0,!0,!1),h},n.removeComposite=function(h,u,v){var d=h.composites.indexOf(u);if(d!==-1&&(n.removeCompositeAt(h,d),n.setModified(h,!0,!0,!1)),v)for(var c=0;c<h.composites.length;c++)n.removeComposite(h.composites[c],u,!0);return h},n.removeCompositeAt=function(h,u){return h.composites.splice(u,1),n.setModified(h,!0,!0,!1),h},n.addBody=function(h,u){return h.bodies.push(u),n.setModified(h,!0,!0,!1),h},n.removeBody=function(h,u,v){var d=h.bodies.indexOf(u);if(d!==-1&&(n.removeBodyAt(h,d),n.setModified(h,!0,!0,!1)),v)for(var c=0;c<h.composites.length;c++)n.removeBody(h.composites[c],u,!0);return h},n.removeBodyAt=function(h,u){return h.bodies.splice(u,1),n.setModified(h,!0,!0,!1),h},n.addConstraint=function(h,u){return h.constraints.push(u),n.setModified(h,!0,!0,!1),h},n.removeConstraint=function(h,u,v){var d=h.constraints.indexOf(u);if(d!==-1&&n.removeConstraintAt(h,d),v)for(var c=0;c<h.composites.length;c++)n.removeConstraint(h.composites[c],u,!0);return h},n.removeConstraintAt=function(h,u){return h.constraints.splice(u,1),n.setModified(h,!0,!0,!1),h},n.clear=function(h,u,v){if(v)for(var d=0;d<h.composites.length;d++)n.clear(h.composites[d],u,!0);return u?h.bodies=h.bodies.filter(function(c){return c.isStatic}):h.bodies.length=0,h.constraints.length=0,h.composites.length=0,n.setModified(h,!0,!0,!1),h},n.allBodies=function(h){for(var u=[].concat(h.bodies),v=0;v<h.composites.length;v++)u=u.concat(n.allBodies(h.composites[v]));return u},n.allConstraints=function(h){for(var u=[].concat(h.constraints),v=0;v<h.composites.length;v++)u=u.concat(n.allConstraints(h.composites[v]));return u},n.allComposites=function(h){for(var u=[].concat(h.composites),v=0;v<h.composites.length;v++)u=u.concat(n.allComposites(h.composites[v]));return u},n.get=function(h,u,v){var d,c;switch(v){case"body":d=n.allBodies(h);break;case"constraint":d=n.allConstraints(h);break;case"composite":d=n.allComposites(h).concat(h);break}return d?(c=d.filter(function(p){return p.id.toString()===u.toString()}),c.length===0?null:c[0]):null},n.move=function(h,u,v){return n.remove(h,u),n.add(v,u),h},n.rebase=function(h){for(var u=n.allBodies(h).concat(n.allConstraints(h)).concat(n.allComposites(h)),v=0;v<u.length;v++)u[v].id=r.nextId();return n.setModified(h,!0,!0,!1),h},n.translate=function(h,u,v){for(var d=v?n.allBodies(h):h.bodies,c=0;c<d.length;c++)l.translate(d[c],u);return n.setModified(h,!0,!0,!1),h},n.rotate=function(h,u,v,d){for(var c=Math.cos(u),p=Math.sin(u),g=d?n.allBodies(h):h.bodies,m=0;m<g.length;m++){var x=g[m],y=x.position.x-v.x,T=x.position.y-v.y;l.setPosition(x,{x:v.x+(y*c-T*p),y:v.y+(y*p+T*c)}),l.rotate(x,u)}return n.setModified(h,!0,!0,!1),h},n.scale=function(h,u,v,d,c){for(var p=c?n.allBodies(h):h.bodies,g=0;g<p.length;g++){var m=p[g],x=m.position.x-d.x,y=m.position.y-d.y;l.setPosition(m,{x:d.x+x*u,y:d.y+y*v}),l.scale(m,u,v)}return n.setModified(h,!0,!0,!1),h},n.bounds=function(h){for(var u=n.allBodies(h),v=[],d=0;d<u.length;d+=1){var c=u[d];v.push(c.bounds.min,c.bounds.max)}return a.create(v)}})()},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r){return n>=0&&n<r.width&&o>=0&&o<r.height};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(29),r=i(2),a=new n({initialize:function(h){h===void 0&&(h={}),this.name=r(h,"name","layer"),this.x=r(h,"x",0),this.y=r(h,"y",0),this.width=r(h,"width",0),this.height=r(h,"height",0),this.tileWidth=r(h,"tileWidth",0),this.tileHeight=r(h,"tileHeight",0),this.baseTileWidth=r(h,"baseTileWidth",this.tileWidth),this.baseTileHeight=r(h,"baseTileHeight",this.tileHeight),this.orientation=r(h,"orientation",o.ORTHOGONAL),this.widthInPixels=r(h,"widthInPixels",this.width*this.baseTileWidth),this.heightInPixels=r(h,"heightInPixels",this.height*this.baseTileHeight),this.alpha=r(h,"alpha",1),this.visible=r(h,"visible",!0),this.properties=r(h,"properties",[]),this.indexes=r(h,"indexes",[]),this.collideIndexes=r(h,"collideIndexes",[]),this.callbacks=r(h,"callbacks",[]),this.bodies=r(h,"bodies",[]),this.data=r(h,"data",[]),this.tilemapLayer=r(h,"tilemapLayer",null),this.hexSideLength=r(h,"hexSideLength",0)}});e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(29),r=i(2),a=new n({initialize:function(h){h===void 0&&(h={}),this.name=r(h,"name","map"),this.width=r(h,"width",0),this.height=r(h,"height",0),this.infinite=r(h,"infinite",!1),this.tileWidth=r(h,"tileWidth",0),this.tileHeight=r(h,"tileHeight",0),this.widthInPixels=r(h,"widthInPixels",this.width*this.tileWidth),this.heightInPixels=r(h,"heightInPixels",this.height*this.tileHeight),this.format=r(h,"format",null),this.orientation=r(h,"orientation",o.ORTHOGONAL),this.renderOrder=r(h,"renderOrder","right-down"),this.version=r(h,"version","1"),this.properties=r(h,"properties",{}),this.layers=r(h,"layers",[]),this.images=r(h,"images",[]),this.objects=r(h,"objects",{}),this.collision=r(h,"collision",{}),this.tilesets=r(h,"tilesets",[]),this.imageCollections=r(h,"imageCollections",[]),this.tiles=r(h,"tiles",[]),this.hexSideLength=r(h,"hexSideLength",0)}});e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=new n({initialize:function(a,l,h,u,v,d,c,p){(h===void 0||h<=0)&&(h=32),(u===void 0||u<=0)&&(u=32),v===void 0&&(v=0),d===void 0&&(d=0),c===void 0&&(c={}),p===void 0&&(p={}),this.name=a,this.firstgid=l,this.tileWidth=h,this.tileHeight=u,this.tileMargin=v,this.tileSpacing=d,this.tileProperties=c,this.tileData=p,this.image=null,this.glTexture=null,this.rows=0,this.columns=0,this.total=0,this.texCoordinates=[]},getTileProperties:function(r){return this.containsTileIndex(r)?this.tileProperties[r-this.firstgid]:null},getTileData:function(r){return this.containsTileIndex(r)?this.tileData[r-this.firstgid]:null},getTileCollisionGroup:function(r){var a=this.getTileData(r);return a&&a.objectgroup?a.objectgroup:null},containsTileIndex:function(r){return r>=this.firstgid&&r<this.firstgid+this.total},getTileTextureCoordinates:function(r){return this.containsTileIndex(r)?this.texCoordinates[r-this.firstgid]:null},setImage:function(r){return this.image=r,this.glTexture=r.get().source.glTexture,this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setTileSize:function(r,a){return r!==void 0&&(this.tileWidth=r),a!==void 0&&(this.tileHeight=a),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setSpacing:function(r,a){return r!==void 0&&(this.tileMargin=r),a!==void 0&&(this.tileSpacing=a),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},updateTileData:function(r,a){var l=(a-this.tileMargin*2+this.tileSpacing)/(this.tileHeight+this.tileSpacing),h=(r-this.tileMargin*2+this.tileSpacing)/(this.tileWidth+this.tileSpacing);(l%1!==0||h%1!==0)&&console.warn("Image tile area not tile size multiple in: "+this.name),l=Math.floor(l),h=Math.floor(h),this.rows=l,this.columns=h,this.total=l*h,this.texCoordinates.length=0;for(var u=this.tileMargin,v=this.tileMargin,d=0;d<this.rows;d++){for(var c=0;c<this.columns;c++)this.texCoordinates.push({x:u,y:v}),u+=this.tileWidth+this.tileSpacing;u=this.tileMargin,v+=this.tileHeight+this.tileSpacing}return this}});e.exports=o},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r){return r===void 0&&(r=1e-4),Math.abs(n-o)<r};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(11),r=i(15),a=i(1068),l=new n({Extends:r,Mixins:[o.Alpha,o.BlendMode,o.Depth,o.Flip,o.GetBounds,o.Mask,o.Origin,o.Pipeline,o.ScrollFactor,o.Size,o.TextureCrop,o.Tint,o.Transform,o.Visible,a],initialize:function(u,v,d,c,p){r.call(this,u,"Image"),this._crop=this.resetCropObject(),this.setTexture(c,p),this.setPosition(v,d),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline()}});e.exports=l},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return n.hasOwnProperty(o)};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(77),o=function(r,a){var l=n(r);for(var h in a)l.hasOwnProperty(h)||(l[h]=a[h]);return l};e.exports=o},function(e,f,i){var n={};e.exports=n;var o=i(64),r=i(83),a=i(165),l=i(84),h=i(271),u=i(32);(function(){n._warming=.4,n._torqueDampen=1,n._minLength=1e-6,n.create=function(v){var d=v;d.bodyA&&!d.pointA&&(d.pointA={x:0,y:0}),d.bodyB&&!d.pointB&&(d.pointB={x:0,y:0});var c=d.bodyA?r.add(d.bodyA.position,d.pointA):d.pointA,p=d.bodyB?r.add(d.bodyB.position,d.pointB):d.pointB,g=r.magnitude(r.sub(c,p));d.length=typeof d.length!="undefined"?d.length:g,d.id=d.id||u.nextId(),d.label=d.label||"Constraint",d.type="constraint",d.stiffness=d.stiffness||(d.length>0?1:.7),d.damping=d.damping||0,d.angularStiffness=d.angularStiffness||0,d.angleA=d.bodyA?d.bodyA.angle:d.angleA,d.angleB=d.bodyB?d.bodyB.angle:d.angleB,d.plugin={};var m={visible:!0,type:"line",anchors:!0,lineColor:null,lineOpacity:null,lineThickness:null,pinSize:null,anchorColor:null,anchorSize:null};return d.length===0&&d.stiffness>.1?(m.type="pin",m.anchors=!1):d.stiffness<.9&&(m.type="spring"),d.render=u.extend(m,d.render),d},n.preSolveAll=function(v){for(var d=0;d<v.length;d+=1){var c=v[d],p=c.constraintImpulse;c.isStatic||p.x===0&&p.y===0&&p.angle===0||(c.position.x+=p.x,c.position.y+=p.y,c.angle+=p.angle)}},n.solveAll=function(v,d){for(var c=0;c<v.length;c+=1){var p=v[c],g=!p.bodyA||p.bodyA&&p.bodyA.isStatic,m=!p.bodyB||p.bodyB&&p.bodyB.isStatic;(g||m)&&n.solve(v[c],d)}for(c=0;c<v.length;c+=1)p=v[c],g=!p.bodyA||p.bodyA&&p.bodyA.isStatic,m=!p.bodyB||p.bodyB&&p.bodyB.isStatic,!g&&!m&&n.solve(v[c],d)},n.solve=function(v,d){var c=v.bodyA,p=v.bodyB,g=v.pointA,m=v.pointB;if(!(!c&&!p)){c&&!c.isStatic&&(r.rotate(g,c.angle-v.angleA,g),v.angleA=c.angle),p&&!p.isStatic&&(r.rotate(m,p.angle-v.angleB,m),v.angleB=p.angle);var x=g,y=m;if(c&&(x=r.add(c.position,g)),p&&(y=r.add(p.position,m)),!(!x||!y)){var T=r.sub(x,y),C=r.magnitude(T);C<n._minLength&&(C=n._minLength);var S=(C-v.length)/C,E=v.stiffness<1?v.stiffness*d:v.stiffness,M=r.mult(T,S*E),O=(c?c.inverseMass:0)+(p?p.inverseMass:0),L=(c?c.inverseInertia:0)+(p?p.inverseInertia:0),R=O+L,w,D,B,N,z;if(v.damping){var X=r.create();B=r.div(T,C),z=r.sub(p&&r.sub(p.position,p.positionPrev)||X,c&&r.sub(c.position,c.positionPrev)||X),N=r.dot(B,z)}c&&!c.isStatic&&(D=c.inverseMass/O,c.constraintImpulse.x-=M.x*D,c.constraintImpulse.y-=M.y*D,c.position.x-=M.x*D,c.position.y-=M.y*D,v.damping&&(c.positionPrev.x-=v.damping*B.x*N*D,c.positionPrev.y-=v.damping*B.y*N*D),w=r.cross(g,M)/R*n._torqueDampen*c.inverseInertia*(1-v.angularStiffness),c.constraintImpulse.angle-=w,c.angle-=w),p&&!p.isStatic&&(D=p.inverseMass/O,p.constraintImpulse.x+=M.x*D,p.constraintImpulse.y+=M.y*D,p.position.x+=M.x*D,p.position.y+=M.y*D,v.damping&&(p.positionPrev.x+=v.damping*B.x*N*D,p.positionPrev.y+=v.damping*B.y*N*D),w=r.cross(m,M)/R*n._torqueDampen*p.inverseInertia*(1-v.angularStiffness),p.constraintImpulse.angle+=w,p.angle+=w)}}},n.postSolveAll=function(v){for(var d=0;d<v.length;d++){var c=v[d],p=c.constraintImpulse;if(!(c.isStatic||p.x===0&&p.y===0&&p.angle===0)){a.set(c,!1);for(var g=0;g<c.parts.length;g++){var m=c.parts[g];o.translate(m.vertices,p),g>0&&(m.position.x+=p.x,m.position.y+=p.y),p.angle!==0&&(o.rotate(m.vertices,p.angle,c.position),h.rotate(m.axes,p.angle),g>0&&r.rotateAbout(m.position,p.angle,c.position,m.position)),l.update(m.bounds,m.vertices,c.velocity)}p.angle*=n._warming,p.x*=n._warming,p.y*=n._warming}}},n.pointAWorld=function(v){return{x:(v.bodyA?v.bodyA.position.x:0)+v.pointA.x,y:(v.bodyA?v.bodyA.position.y:0)+v.pointA.y}},n.pointBWorld=function(v){return{x:(v.bodyB?v.bodyB.position.x:0)+v.pointB.x,y:(v.bodyB?v.bodyB.position.y:0)+v.pointB.y}}})()},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(35),o=i(65),r=i(66),a=i(0),l=i(11),h=i(15),u=i(10),v=i(57),d=new a({Extends:h,Mixins:[l.Depth,l.GetBounds,l.Origin,l.Transform,l.ScrollFactor,l.Visible],initialize:function(p,g,m,x,y){x===void 0&&(x=1),y===void 0&&(y=x),h.call(this,p,"Zone"),this.setPosition(g,m),this.width=x,this.height=y,this.blendMode=n.NORMAL,this.updateDisplayOrigin()},displayWidth:{get:function(){return this.scaleX*this.width},set:function(c){this.scaleX=c/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(c){this.scaleY=c/this.height}},setSize:function(c,p,g){g===void 0&&(g=!0),this.width=c,this.height=p,this.updateDisplayOrigin();var m=this.input;return g&&m&&!m.customHitArea&&(m.hitArea.width=c,m.hitArea.height=p),this},setDisplaySize:function(c,p){return this.displayWidth=c,this.displayHeight=p,this},setCircleDropZone:function(c){return this.setDropZone(new o(0,0,c),r)},setRectangleDropZone:function(c,p){return this.setDropZone(new u(0,0,c,p),v)},setDropZone:function(c,p){return c===void 0?this.setRectangleDropZone(this.width,this.height):this.input||this.setInteractive(c,p,!0),this},setAlpha:function(){},setBlendMode:function(){},renderCanvas:function(c,p,g){g.addToRenderList(p)},renderWebGL:function(c,p,g){g.addToRenderList(p)}});e.exports=d},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return 2*(n.width+n.height)};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){for(var o=n.length-1;o>0;o--){var r=Math.floor(Math.random()*(o+1)),a=n[o];n[o]=n[r],n[r]=a}return n};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ADD_ANIMATION:i(724),ANIMATION_COMPLETE:i(725),ANIMATION_COMPLETE_KEY:i(726),ANIMATION_REPEAT:i(727),ANIMATION_RESTART:i(728),ANIMATION_START:i(729),ANIMATION_STOP:i(730),ANIMATION_UPDATE:i(731),PAUSE_ALL:i(732),REMOVE_ANIMATION:i(733),RESUME_ALL:i(734)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(11),r=i(36),a=i(9),l=i(37),h=i(10),u=i(25),v=i(187),d=i(3),c=new n({Extends:a,Mixins:[o.Alpha,o.Visible],initialize:function(g,m,x,y){g===void 0&&(g=0),m===void 0&&(m=0),x===void 0&&(x=0),y===void 0&&(y=0),a.call(this),this.scene,this.sceneManager,this.scaleManager,this.cameraManager,this.id=0,this.name="",this.roundPixels=!1,this.useBounds=!1,this.worldView=new h,this.dirty=!0,this._x=g,this._y=m,this._width=x,this._height=y,this._bounds=new h,this._scrollX=0,this._scrollY=0,this._zoomX=1,this._zoomY=1,this._rotation=0,this.matrix=new u,this.transparent=!0,this.backgroundColor=v("rgba(0,0,0,0)"),this.disableCull=!1,this.culledObjects=[],this.midPoint=new d(x/2,y/2),this.originX=.5,this.originY=.5,this._customViewport=!1,this.mask=null,this._maskCamera=null,this.renderList=[]},addToRenderList:function(p){this.renderList.push(p)},setOrigin:function(p,g){return p===void 0&&(p=.5),g===void 0&&(g=p),this.originX=p,this.originY=g,this},getScroll:function(p,g,m){m===void 0&&(m=new d);var x=this.width*.5,y=this.height*.5;return m.x=p-x,m.y=g-y,this.useBounds&&(m.x=this.clampX(m.x),m.y=this.clampY(m.y)),m},centerOnX:function(p){var g=this.width*.5;return this.midPoint.x=p,this.scrollX=p-g,this.useBounds&&(this.scrollX=this.clampX(this.scrollX)),this},centerOnY:function(p){var g=this.height*.5;return this.midPoint.y=p,this.scrollY=p-g,this.useBounds&&(this.scrollY=this.clampY(this.scrollY)),this},centerOn:function(p,g){return this.centerOnX(p),this.centerOnY(g),this},centerToBounds:function(){if(this.useBounds){var p=this._bounds,g=this.width*.5,m=this.height*.5;this.midPoint.set(p.centerX,p.centerY),this.scrollX=p.centerX-g,this.scrollY=p.centerY-m}return this},centerToSize:function(){return this.scrollX=this.width*.5,this.scrollY=this.height*.5,this},cull:function(p){if(this.disableCull)return p;var g=this.matrix.matrix,m=g[0],x=g[1],y=g[2],T=g[3],C=m*T-x*y;if(!C)return p;var S=g[4],E=g[5],M=this.scrollX,O=this.scrollY,L=this.width,R=this.height,w=this.y,D=w+R,B=this.x,N=B+L,z=this.culledObjects,X=p.length;C=1/C,z.length=0;for(var k=0;k<X;++k){var K=p[k];if(!K.hasOwnProperty("width")||K.parentContainer){z.push(K);continue}var b=K.width,I=K.height,G=K.x-M*K.scrollFactorX-b*K.originX,Y=K.y-O*K.scrollFactorY-I*K.originY,U=G*m+Y*y+S,W=G*x+Y*T+E,H=(G+b)*m+(Y+I)*y+S,Z=(G+b)*x+(Y+I)*T+E;H>B&&U<N&&Z>w&&W<D&&z.push(K)}return z},getWorldPoint:function(p,g,m){m===void 0&&(m=new d);var x=this.matrix.matrix,y=x[0],T=x[1],C=x[2],S=x[3],E=x[4],M=x[5],O=y*S-T*C;if(!O)return m.x=p,m.y=g,m;O=1/O;var L=S*O,R=-T*O,w=-C*O,D=y*O,B=(C*M-S*E)*O,N=(T*E-y*M)*O,z=Math.cos(this.rotation),X=Math.sin(this.rotation),k=this.zoomX,K=this.zoomY,b=this.scrollX,I=this.scrollY,G=p+(b*z-I*X)*k,Y=g+(b*X+I*z)*K;return m.x=G*L+Y*w+B,m.y=G*R+Y*D+N,m},ignore:function(p){var g=this.id;Array.isArray(p)||(p=[p]);for(var m=0;m<p.length;m++){var x=p[m];Array.isArray(x)?this.ignore(x):x.isParent?this.ignore(x.getChildren()):x.cameraFilter|=g}return this},preRender:function(){this.renderList.length=0;var p=this.width,g=this.height,m=p*.5,x=g*.5,y=this.zoomX,T=this.zoomY,C=this.matrix,S=p*this.originX,E=g*this.originY,M=this.scrollX,O=this.scrollY;this.useBounds&&(M=this.clampX(M),O=this.clampY(O)),this.roundPixels&&(S=Math.round(S),E=Math.round(E)),this.scrollX=M,this.scrollY=O;var L=M+m,R=O+x;this.midPoint.set(L,R);var w=p/y,D=g/T;this.worldView.setTo(L-w/2,R-D/2,w,D),C.applyITRS(this.x+S,this.y+E,this.rotation,y,T),C.translate(-S,-E)},clampX:function(p){var g=this._bounds,m=this.displayWidth,x=g.x+(m-this.width)/2,y=Math.max(x,x+g.width-m);return p<x?p=x:p>y&&(p=y),p},clampY:function(p){var g=this._bounds,m=this.displayHeight,x=g.y+(m-this.height)/2,y=Math.max(x,x+g.height-m);return p<x?p=x:p>y&&(p=y),p},removeBounds:function(){return this.useBounds=!1,this.dirty=!0,this._bounds.setEmpty(),this},setAngle:function(p){return p===void 0&&(p=0),this.rotation=r(p),this},setBackgroundColor:function(p){return p===void 0&&(p="rgba(0,0,0,0)"),this.backgroundColor=v(p),this.transparent=this.backgroundColor.alpha===0,this},setBounds:function(p,g,m,x,y){return y===void 0&&(y=!1),this._bounds.setTo(p,g,m,x),this.dirty=!0,this.useBounds=!0,y?this.centerToBounds():(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},getBounds:function(p){p===void 0&&(p=new h);var g=this._bounds;return p.setTo(g.x,g.y,g.width,g.height),p},setName:function(p){return p===void 0&&(p=""),this.name=p,this},setPosition:function(p,g){return g===void 0&&(g=p),this.x=p,this.y=g,this},setRotation:function(p){return p===void 0&&(p=0),this.rotation=p,this},setRoundPixels:function(p){return this.roundPixels=p,this},setScene:function(p){this.scene&&this._customViewport&&this.sceneManager.customViewports--,this.scene=p;var g=p.sys;return this.sceneManager=g.game.scene,this.scaleManager=g.scale,this.cameraManager=g.cameras,this.updateSystem(),this},setScroll:function(p,g){return g===void 0&&(g=p),this.scrollX=p,this.scrollY=g,this},setSize:function(p,g){return g===void 0&&(g=p),this.width=p,this.height=g,this},setViewport:function(p,g,m,x){return this.x=p,this.y=g,this.width=m,this.height=x,this},setZoom:function(p,g){return p===void 0&&(p=1),g===void 0&&(g=p),p===0&&(p=.001),g===0&&(g=.001),this.zoomX=p,this.zoomY=g,this},setMask:function(p,g){return g===void 0&&(g=!0),this.mask=p,this._maskCamera=g?this.cameraManager.default:this,this},clearMask:function(p){return p===void 0&&(p=!1),p&&this.mask&&this.mask.destroy(),this.mask=null,this},toJSON:function(){var p={name:this.name,x:this.x,y:this.y,width:this.width,height:this.height,zoom:this.zoom,rotation:this.rotation,roundPixels:this.roundPixels,scrollX:this.scrollX,scrollY:this.scrollY,backgroundColor:this.backgroundColor.rgba};return this.useBounds&&(p.bounds={x:this._bounds.x,y:this._bounds.y,width:this._bounds.width,height:this._bounds.height}),p},update:function(){},updateSystem:function(){if(!!this.scaleManager){var p=this._x!==0||this._y!==0||this.scaleManager.width!==this._width||this.scaleManager.height!==this._height,g=this.sceneManager;p&&!this._customViewport?g.customViewports++:!p&&this._customViewport&&g.customViewports--,this.dirty=!0,this._customViewport=p}},destroy:function(){this.emit(l.DESTROY,this),this.removeAllListeners(),this.matrix.destroy(),this.culledObjects=[],this._customViewport&&this.sceneManager.customViewports--,this.renderList=[],this._bounds=null,this.scene=null,this.scaleManager=null,this.sceneManager=null,this.cameraManager=null},x:{get:function(){return this._x},set:function(p){this._x=p,this.updateSystem()}},y:{get:function(){return this._y},set:function(p){this._y=p,this.updateSystem()}},width:{get:function(){return this._width},set:function(p){this._width=p,this.updateSystem()}},height:{get:function(){return this._height},set:function(p){this._height=p,this.updateSystem()}},scrollX:{get:function(){return this._scrollX},set:function(p){this._scrollX=p,this.dirty=!0}},scrollY:{get:function(){return this._scrollY},set:function(p){this._scrollY=p,this.dirty=!0}},zoom:{get:function(){return(this._zoomX+this._zoomY)/2},set:function(p){this._zoomX=p,this._zoomY=p,this.dirty=!0}},zoomX:{get:function(){return this._zoomX},set:function(p){this._zoomX=p,this.dirty=!0}},zoomY:{get:function(){return this._zoomY},set:function(p){this._zoomY=p,this.dirty=!0}},rotation:{get:function(){return this._rotation},set:function(p){this._rotation=p,this.dirty=!0}},centerX:{get:function(){return this.x+.5*this.width}},centerY:{get:function(){return this.y+.5*this.height}},displayWidth:{get:function(){return this.width/this.zoomX}},displayHeight:{get:function(){return this.height/this.zoomY}}});e.exports=c},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(334),o=i(335),r=i(336),a=i(337),l=i(338),h=i(339),u=i(340),v=i(341),d=i(342),c=i(343),p=i(344),g=i(345);e.exports={Power0:u,Power1:v.Out,Power2:a.Out,Power3:d.Out,Power4:c.Out,Linear:u,Quad:v.Out,Cubic:a.Out,Quart:d.Out,Quint:c.Out,Sine:p.Out,Expo:h.Out,Circ:r.Out,Elastic:l.Out,Back:n.Out,Bounce:o.Out,Stepped:g,"Quad.easeIn":v.In,"Cubic.easeIn":a.In,"Quart.easeIn":d.In,"Quint.easeIn":c.In,"Sine.easeIn":p.In,"Expo.easeIn":h.In,"Circ.easeIn":r.In,"Elastic.easeIn":l.In,"Back.easeIn":n.In,"Bounce.easeIn":o.In,"Quad.easeOut":v.Out,"Cubic.easeOut":a.Out,"Quart.easeOut":d.Out,"Quint.easeOut":c.Out,"Sine.easeOut":p.Out,"Expo.easeOut":h.Out,"Circ.easeOut":r.Out,"Elastic.easeOut":l.Out,"Back.easeOut":n.Out,"Bounce.easeOut":o.Out,"Quad.easeInOut":v.InOut,"Cubic.easeInOut":a.InOut,"Quart.easeInOut":d.InOut,"Quint.easeInOut":c.InOut,"Sine.easeInOut":p.InOut,"Expo.easeInOut":h.InOut,"Circ.easeInOut":r.InOut,"Elastic.easeInOut":l.InOut,"Back.easeInOut":n.InOut,"Bounce.easeInOut":o.InOut}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r){return(o-n)*r+n};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(105),o={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0};function r(){var a=navigator.userAgent;return/Edge\/\d+/.test(a)?o.edge=!0:/Chrome\/(\d+)/.test(a)&&!n.windowsPhone?(o.chrome=!0,o.chromeVersion=parseInt(RegExp.$1,10)):/Firefox\D+(\d+)/.test(a)?(o.firefox=!0,o.firefoxVersion=parseInt(RegExp.$1,10)):/AppleWebKit/.test(a)&&n.iOS?o.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(a)?(o.ie=!0,o.ieVersion=parseInt(RegExp.$1,10)):/Opera/.test(a)?o.opera=!0:/Safari/.test(a)&&!n.windowsPhone?o.safari=!0:/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(a)&&(o.ie=!0,o.trident=!0,o.tridentVersion=parseInt(RegExp.$1,10),o.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(a)&&(o.silk=!0),o}e.exports=r()},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return Math.random()*(o-n)+n};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return n>0&&(n&n-1)===0&&o>0&&(o&o-1)===0};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r,a){return r===void 0&&(r=0),o===0?n:(n-=r,n=o*Math.ceil(n/o),a?(r+n)/o:r+n)};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=new n({initialize:function(a,l,h,u){this.x=0,this.y=0,this.z=0,this.w=0,typeof a=="object"?(this.x=a.x||0,this.y=a.y||0,this.z=a.z||0,this.w=a.w||0):(this.x=a||0,this.y=l||0,this.z=h||0,this.w=u||0)},clone:function(){return new o(this.x,this.y,this.z,this.w)},copy:function(r){return this.x=r.x,this.y=r.y,this.z=r.z||0,this.w=r.w||0,this},equals:function(r){return this.x===r.x&&this.y===r.y&&this.z===r.z&&this.w===r.w},set:function(r,a,l,h){return typeof r=="object"?(this.x=r.x||0,this.y=r.y||0,this.z=r.z||0,this.w=r.w||0):(this.x=r||0,this.y=a||0,this.z=l||0,this.w=h||0),this},add:function(r){return this.x+=r.x,this.y+=r.y,this.z+=r.z||0,this.w+=r.w||0,this},subtract:function(r){return this.x-=r.x,this.y-=r.y,this.z-=r.z||0,this.w-=r.w||0,this},scale:function(r){return this.x*=r,this.y*=r,this.z*=r,this.w*=r,this},length:function(){var r=this.x,a=this.y,l=this.z,h=this.w;return Math.sqrt(r*r+a*a+l*l+h*h)},lengthSq:function(){var r=this.x,a=this.y,l=this.z,h=this.w;return r*r+a*a+l*l+h*h},normalize:function(){var r=this.x,a=this.y,l=this.z,h=this.w,u=r*r+a*a+l*l+h*h;return u>0&&(u=1/Math.sqrt(u),this.x=r*u,this.y=a*u,this.z=l*u,this.w=h*u),this},dot:function(r){return this.x*r.x+this.y*r.y+this.z*r.z+this.w*r.w},lerp:function(r,a){a===void 0&&(a=0);var l=this.x,h=this.y,u=this.z,v=this.w;return this.x=l+a*(r.x-l),this.y=h+a*(r.y-h),this.z=u+a*(r.z-u),this.w=v+a*(r.w-v),this},multiply:function(r){return this.x*=r.x,this.y*=r.y,this.z*=r.z||1,this.w*=r.w||1,this},divide:function(r){return this.x/=r.x,this.y/=r.y,this.z/=r.z||1,this.w/=r.w||1,this},distance:function(r){var a=r.x-this.x,l=r.y-this.y,h=r.z-this.z||0,u=r.w-this.w||0;return Math.sqrt(a*a+l*l+h*h+u*u)},distanceSq:function(r){var a=r.x-this.x,l=r.y-this.y,h=r.z-this.z||0,u=r.w-this.w||0;return a*a+l*l+h*h+u*u},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function(r){var a=this.x,l=this.y,h=this.z,u=this.w,v=r.val;return this.x=v[0]*a+v[4]*l+v[8]*h+v[12]*u,this.y=v[1]*a+v[5]*l+v[9]*h+v[13]*u,this.z=v[2]*a+v[6]*l+v[10]*h+v[14]*u,this.w=v[3]*a+v[7]*l+v[11]*h+v[15]*u,this},transformQuat:function(r){var a=this.x,l=this.y,h=this.z,u=r.x,v=r.y,d=r.z,c=r.w,p=c*a+v*h-d*l,g=c*l+d*a-u*h,m=c*h+u*l-v*a,x=-u*a-v*l-d*h;return this.x=p*c+x*-u+g*-d-m*-v,this.y=g*c+x*-v+m*-u-p*-d,this.z=m*c+x*-d+p*-v-g*-u,this},reset:function(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});o.prototype.sub=o.prototype.subtract,o.prototype.mul=o.prototype.multiply,o.prototype.div=o.prototype.divide,o.prototype.dist=o.prototype.distance,o.prototype.distSq=o.prototype.distanceSq,o.prototype.len=o.prototype.length,o.prototype.lenSq=o.prototype.lengthSq,e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(91),r=new n({initialize:function(l,h,u,v,d,c,p){v===void 0&&(v=1),d===void 0&&(d=0),c===void 0&&(c=!0),p===void 0&&(p=!1),this.renderer=l,this.framebuffer=null,this.texture=null,this.width=0,this.height=0,this.scale=v,this.minFilter=d,this.autoClear=c,this.autoResize=!1,this.resize(h,u),p&&this.setAutoResize(!0)},setAutoResize:function(a){return a&&!this.autoResize?(this.renderer.on(o.RESIZE,this.resize,this),this.autoResize=!0):!a&&this.autoResize&&(this.renderer.off(o.RESIZE,this.resize,this),this.autoResize=!1),this},resize:function(a,l){var h=a*this.scale,u=l*this.scale;if(h!==this.width||u!==this.height){var v=this.renderer;v.deleteFramebuffer(this.framebuffer),v.deleteTexture(this.texture),a*=this.scale,l*=this.scale,a=Math.round(a),l=Math.round(l),a<=0&&(a=1),l<=0&&(l=1),this.texture=v.createTextureFromSource(null,a,l,this.minFilter),this.framebuffer=v.createFramebuffer(a,l,this.texture,!1),this.width=a,this.height=l}return this},bind:function(a,l,h){if(a===void 0&&(a=!1),a&&this.renderer.flush(),l&&h&&this.resize(l,h),this.renderer.pushFramebuffer(this.framebuffer,!1,!1,!1),a&&this.adjustViewport(),this.autoClear){var u=this.renderer.gl;u.clearColor(0,0,0,0),u.clear(u.COLOR_BUFFER_BIT)}},adjustViewport:function(){var a=this.renderer.gl;a.viewport(0,0,this.width,this.height),a.disable(a.SCISSOR_TEST)},clear:function(){var a=this.renderer,l=a.gl;a.pushFramebuffer(this.framebuffer),l.disable(l.SCISSOR_TEST),l.clearColor(0,0,0,0),l.clear(l.COLOR_BUFFER_BIT),a.popFramebuffer(),a.resetScissor()},unbind:function(a){a===void 0&&(a=!1);var l=this.renderer;return a&&l.flush(),l.popFramebuffer()},destroy:function(){var a=this.renderer;a.deleteFramebuffer(this.framebuffer),a.deleteTexture(this.texture),a.off(o.RESIZE,this.resize,this),this.renderer=null,this.framebuffer=null,this.texture=null}});e.exports=r},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){var r;if(o)typeof o=="string"?r=document.getElementById(o):typeof o=="object"&&o.nodeType===1&&(r=o);else if(n.parentElement||o===null)return n;return r||(r=document.body),r.appendChild(n),n};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:42,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ADD:107,NUMPAD_SUBTRACT:109,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SEMICOLON:186,PLUS:187,COMMA:188,MINUS:189,PERIOD:190,FORWARD_SLASH:191,BACK_SLASH:220,QUOTES:222,BACKTICK:192,OPEN_BRACKET:219,CLOSED_BRACKET:221,SEMICOLON_FIREFOX:59,COLON:58,COMMA_FIREFOX_WINDOWS:60,COMMA_FIREFOX:62,BRACKET_RIGHT_FIREFOX:174,BRACKET_LEFT_FIREFOX:175};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={PENDING:0,INIT:1,START:2,LOADING:3,CREATING:4,RUNNING:5,PAUSED:6,SLEEPING:7,SHUTDOWN:8,DESTROYED:9};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(77),r=i(9),a=i(70),l=i(22),h=i(1),u=i(207),v=i(428),d=new n({Extends:r,initialize:function(p){r.call(this),this.game=p,this.jsonCache=p.cache.json,this.sounds=[],this.mute=!1,this.volume=1,this.pauseOnBlur=!0,this._rate=1,this._detune=0,this.locked=this.locked||!1,this.unlocked=!1,p.events.on(l.BLUR,this.onGameBlur,this),p.events.on(l.FOCUS,this.onGameFocus,this),p.events.on(l.PRE_STEP,this.update,this),p.events.once(l.DESTROY,this.destroy,this)},add:h,addAudioSprite:function(c,p){p===void 0&&(p={});var g=this.add(c,p);g.spritemap=this.jsonCache.get(c).spritemap;for(var m in g.spritemap)if(!!g.spritemap.hasOwnProperty(m)){var x=o(p),y=g.spritemap[m];x.loop=y.hasOwnProperty("loop")?y.loop:!1,g.addMarker({name:m,start:y.start,duration:y.end-y.start,config:x})}return g},get:function(c){return v(this.sounds,"key",c)},getAll:function(c){return u(this.sounds,"key",c)},play:function(c,p){var g=this.add(c);return g.once(a.COMPLETE,g.destroy,g),p?p.name?(g.addMarker(p),g.play(p.name)):g.play(p):g.play()},playAudioSprite:function(c,p,g){var m=this.addAudioSprite(c);return m.once(a.COMPLETE,m.destroy,m),m.play(p,g)},remove:function(c){var p=this.sounds.indexOf(c);return p!==-1?(c.destroy(),this.sounds.splice(p,1),!0):!1},removeAll:function(){this.sounds.forEach(function(c){c.destroy()}),this.sounds.length=0},removeByKey:function(c){for(var p=0,g=this.sounds.length-1;g>=0;g--){var m=this.sounds[g];m.key===c&&(m.destroy(),this.sounds.splice(g,1),p++)}return p},pauseAll:function(){this.forEachActiveSound(function(c){c.pause()}),this.emit(a.PAUSE_ALL,this)},resumeAll:function(){this.forEachActiveSound(function(c){c.resume()}),this.emit(a.RESUME_ALL,this)},stopAll:function(){this.forEachActiveSound(function(c){c.stop()}),this.emit(a.STOP_ALL,this)},stopByKey:function(c){var p=0;return this.getAll(c).forEach(function(g){g.stop()&&p++}),p},unlock:h,onBlur:h,onFocus:h,onGameBlur:function(){this.pauseOnBlur&&this.onBlur()},onGameFocus:function(){this.pauseOnBlur&&this.onFocus()},update:function(c,p){this.unlocked&&(this.unlocked=!1,this.locked=!1,this.emit(a.UNLOCKED,this));for(var g=this.sounds.length-1;g>=0;g--)this.sounds[g].pendingRemove&&this.sounds.splice(g,1);this.sounds.forEach(function(m){m.update(c,p)})},destroy:function(){this.game.events.off(l.BLUR,this.onGameBlur,this),this.game.events.off(l.FOCUS,this.onGameFocus,this),this.game.events.off(l.PRE_STEP,this.update,this),this.removeAllListeners(),this.removeAll(),this.sounds.length=0,this.sounds=null,this.game=null},forEachActiveSound:function(c,p){var g=this;this.sounds.forEach(function(m,x){m&&!m.pendingRemove&&c.call(p||g,m,x,g.sounds)})},setRate:function(c){return this.rate=c,this},rate:{get:function(){return this._rate},set:function(c){this._rate=c,this.forEachActiveSound(function(p){p.calculateRate()}),this.emit(a.GLOBAL_RATE,this,c)}},setDetune:function(c){return this.detune=c,this},detune:{get:function(){return this._detune},set:function(c){this._detune=c,this.forEachActiveSound(function(p){p.calculateRate()}),this.emit(a.GLOBAL_DETUNE,this,c)}}});e.exports=d},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(9),r=i(70),a=i(17),l=i(1),h=new n({Extends:o,initialize:function(v,d,c){o.call(this),this.manager=v,this.key=d,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=this.duration||0,this.totalDuration=this.totalDuration||0,this.config={mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},this.currentConfig=this.config,this.config=a(this.config,c),this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:function(u){return!u||!u.name||typeof u.name!="string"?!1:this.markers[u.name]?(console.error("addMarker "+u.name+" already exists in Sound"),!1):(u=a(!0,{name:"",start:0,duration:this.totalDuration-(u.start||0),config:{mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0}},u),this.markers[u.name]=u,!0)},updateMarker:function(u){return!u||!u.name||typeof u.name!="string"?!1:this.markers[u.name]?(this.markers[u.name]=a(!0,this.markers[u.name],u),!0):(console.warn("Audio Marker: "+u.name+" missing in Sound: "+this.key),!1)},removeMarker:function(u){var v=this.markers[u];return v?(this.markers[u]=null,v):null},play:function(u,v){if(u===void 0&&(u=""),typeof u=="object"&&(v=u,u=""),typeof u!="string")return!1;if(!u)this.currentMarker=null,this.currentConfig=this.config,this.duration=this.totalDuration;else{if(!this.markers[u])return console.warn("Marker: "+u+" missing in Sound: "+this.key),!1;this.currentMarker=this.markers[u],this.currentConfig=this.currentMarker.config,this.duration=this.currentMarker.duration}return this.resetConfig(),this.currentConfig=a(this.currentConfig,v),this.isPlaying=!0,this.isPaused=!1,!0},pause:function(){return this.isPaused||!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!0,!0)},resume:function(){return!this.isPaused||this.isPlaying?!1:(this.isPlaying=!0,this.isPaused=!1,!0)},stop:function(){return!this.isPaused&&!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!1,this.resetConfig(),!0)},applyConfig:function(){this.mute=this.currentConfig.mute,this.volume=this.currentConfig.volume,this.rate=this.currentConfig.rate,this.detune=this.currentConfig.detune,this.loop=this.currentConfig.loop,this.pan=this.currentConfig.pan},resetConfig:function(){this.currentConfig.seek=0,this.currentConfig.delay=0},update:l,calculateRate:function(){var u=1.0005777895065548,v=this.currentConfig.detune+this.manager.detune,d=Math.pow(u,v);this.totalRate=this.currentConfig.rate*this.manager.rate*d},destroy:function(){this.pendingRemove||(this.emit(r.DESTROY,this),this.pendingRemove=!0,this.manager=null,this.key="",this.removeAllListeners(),this.isPlaying=!1,this.isPaused=!1,this.config=null,this.currentConfig=null,this.markers=null,this.currentMarker=null)}});e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(209),o=i(435),r=function(a,l){if(l===void 0&&(l=90),!n(a))return null;if(typeof l!="string"&&(l=(l%360+360)%360),l===90||l===-270||l==="rotateLeft")a=o(a),a.reverse();else if(l===-90||l===270||l==="rotateRight")a.reverse(),a=o(a);else if(Math.abs(l)===180||l==="rotate180"){for(var h=0;h<a.length;h++)a[h].reverse();a.reverse()}return a};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(18),r=i(11),a=i(15),l=i(1043),h=i(1044),u=i(212),v=i(10),d=i(1045),c=new n({Extends:a,Mixins:[r.Alpha,r.BlendMode,r.Depth,r.Mask,r.Origin,r.Pipeline,r.ScrollFactor,r.Texture,r.Tint,r.Transform,r.Visible,d],initialize:function(g,m,x,y,T,C,S){T===void 0&&(T=""),S===void 0&&(S=0),a.call(this,g,"BitmapText"),this.font=y;var E=this.scene.sys.cache.bitmapFont.get(y);E||console.warn("Invalid BitmapText key: "+y),this.fontData=E.data,this._text="",this._fontSize=C||this.fontData.size,this._letterSpacing=0,this._align=S,this._bounds=l(),this._dirty=!0,this._maxWidth=0,this.wordWrapCharCode=32,this.charColors=[],this.dropShadowX=0,this.dropShadowY=0,this.dropShadowColor=0,this.dropShadowAlpha=.5,this.fromAtlas=E.fromAtlas,this.setTexture(E.texture,E.frame),this.setPosition(m,x),this.setOrigin(0,0),this.initPipeline(),this.setText(T)},setLeftAlign:function(){return this._align=c.ALIGN_LEFT,this._dirty=!0,this},setCenterAlign:function(){return this._align=c.ALIGN_CENTER,this._dirty=!0,this},setRightAlign:function(){return this._align=c.ALIGN_RIGHT,this._dirty=!0,this},setFontSize:function(p){return this._fontSize=p,this._dirty=!0,this},setLetterSpacing:function(p){return p===void 0&&(p=0),this._letterSpacing=p,this._dirty=!0,this},setText:function(p){return!p&&p!==0&&(p=""),Array.isArray(p)&&(p=p.join(`
`)),p!==this.text&&(this._text=p.toString(),this._dirty=!0,this.updateDisplayOrigin()),this},setDropShadow:function(p,g,m,x){return p===void 0&&(p=0),g===void 0&&(g=0),m===void 0&&(m=0),x===void 0&&(x=.5),this.dropShadowX=p,this.dropShadowY=g,this.dropShadowColor=m,this.dropShadowAlpha=x,this},setCharacterTint:function(p,g,m,x,y,T,C){p===void 0&&(p=0),g===void 0&&(g=1),m===void 0&&(m=!1),x===void 0&&(x=-1),y===void 0&&(y=x,T=x,C=x);var S=this.text.length;g===-1&&(g=S),p<0&&(p=S+p),p=o(p,0,S-1);for(var E=o(p+g,p,S),M=this.charColors,O=p;O<E;O++){var L=M[O];if(x===-1)M[O]=null;else{var R=m?1:0;L?(L.tintEffect=R,L.tintTL=x,L.tintTR=y,L.tintBL=T,L.tintBR=C):M[O]={tintEffect:R,tintTL:x,tintTR:y,tintBL:T,tintBR:C}}}return this},setWordTint:function(p,g,m,x,y,T,C){g===void 0&&(g=1);for(var S=this.getTextBounds(),E=S.words,M=typeof p=="number",O=0,L=0;L<E.length;L++){var R=E[L];if((M&&L===p||!M&&R.word===p)&&(this.setCharacterTint(R.i,R.word.length,m,x,y,T,C),O++,O===g))return this}return this},getTextBounds:function(p){var g=this._bounds;return(this._dirty||p||this.scaleX!==g.scaleX||this.scaleY!==g.scaleY)&&(l(this,p,!0,g),this._dirty=!1),g},getCharacterAt:function(p,g,m){for(var x=this.getLocalPoint(p,g,null,m),y=this.getTextBounds(),T=y.characters,C=new v,S=0;S<T.length;S++){var E=T[S];if(C.setTo(E.x,E.t,E.r-E.x,E.b),C.contains(x.x,x.y))return E}return null},updateDisplayOrigin:function(){return this._dirty=!0,this.getTextBounds(!1),this},setFont:function(p,g,m){if(g===void 0&&(g=this._fontSize),m===void 0&&(m=this._align),p!==this.font){var x=this.scene.sys.cache.bitmapFont.get(p);x&&(this.font=p,this.fontData=x.data,this._fontSize=g,this._align=m,this.fromAtlas=x.fromAtlas===!0,this.setTexture(x.texture,x.frame),l(this,!1,!0,this._bounds))}return this},setMaxWidth:function(p,g){return this._maxWidth=p,this._dirty=!0,g!==void 0&&(this.wordWrapCharCode=g),this},align:{set:function(p){this._align=p,this._dirty=!0},get:function(){return this._align}},text:{set:function(p){this.setText(p)},get:function(){return this._text}},fontSize:{set:function(p){this._fontSize=p,this._dirty=!0},get:function(){return this._fontSize}},letterSpacing:{set:function(p){this._letterSpacing=p,this._dirty=!0},get:function(){return this._letterSpacing}},maxWidth:{set:function(p){this._maxWidth=p,this._dirty=!0},get:function(){return this._maxWidth}},width:{get:function(){return this.getTextBounds(!1),this._bounds.global.width}},height:{get:function(){return this.getTextBounds(!1),this._bounds.global.height}},toJSON:function(){var p=r.ToJSON(this),g={font:this.font,text:this.text,fontSize:this.fontSize,letterSpacing:this.letterSpacing,align:this.align};return p.data=g,p},preDestroy:function(){this.charColors.length=0,this._bounds=null,this.fontData=null}});c.ALIGN_LEFT=0,c.ALIGN_CENTER=1,c.ALIGN_RIGHT=2,c.ParseFromAtlas=h,c.ParseXMLBitmapFont=u,e.exports=c},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=new n({initialize:function(a){if(this.entries=[],Array.isArray(a))for(var l=0;l<a.length;l++)this.set(a[l])},set:function(r){return this.entries.indexOf(r)===-1&&this.entries.push(r),this},get:function(r,a){for(var l=0;l<this.entries.length;l++){var h=this.entries[l];if(h[r]===a)return h}},getArray:function(){return this.entries.slice(0)},delete:function(r){var a=this.entries.indexOf(r);return a>-1&&this.entries.splice(a,1),this},dump:function(){console.group("Set");for(var r=0;r<this.entries.length;r++){var a=this.entries[r];console.log(a)}console.groupEnd()},each:function(r,a){var l,h=this.entries.slice(),u=h.length;if(a)for(l=0;l<u&&r.call(a,h[l],l)!==!1;l++);else for(l=0;l<u&&r(h[l],l)!==!1;l++);return this},iterate:function(r,a){var l,h=this.entries.length;if(a)for(l=0;l<h&&r.call(a,this.entries[l],l)!==!1;l++);else for(l=0;l<h&&r(this.entries[l],l)!==!1;l++);return this},iterateLocal:function(r){var a,l=[];for(a=1;a<arguments.length;a++)l.push(arguments[a]);var h=this.entries.length;for(a=0;a<h;a++){var u=this.entries[a];u[r].apply(u,l)}return this},clear:function(){return this.entries.length=0,this},contains:function(r){return this.entries.indexOf(r)>-1},union:function(r){var a=new o;return r.entries.forEach(function(l){a.set(l)}),this.entries.forEach(function(l){a.set(l)}),a},intersect:function(r){var a=new o;return this.entries.forEach(function(l){r.contains(l)&&a.set(l)}),a},difference:function(r){var a=new o;return this.entries.forEach(function(l){r.contains(l)||a.set(l)}),a},size:{get:function(){return this.entries.length},set:function(r){return r<this.entries.length?this.entries.length=r:this.entries.length}}});e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(11),r=i(15),a=i(189),l=i(92),h=i(1182),u=new n({Extends:r,Mixins:[o.AlphaSingle,o.BlendMode,o.Depth,o.GetBounds,o.Mask,o.Pipeline,o.ScrollFactor,o.Transform,o.Visible,h],initialize:function(d,c,p,g,m,x,y){g===void 0&&(g=16777215),m===void 0&&(m=128),x===void 0&&(x=1),y===void 0&&(y=.1),r.call(this,d,"PointLight"),this.initPipeline(l.POINTLIGHT_PIPELINE),this.setPosition(c,p),this.color=a(g),this.intensity=x,this.attenuation=y,this.width=m*2,this.height=m*2,this._radius=m},radius:{get:function(){return this._radius},set:function(v){this._radius=v,this.width=v*2,this.height=v*2}},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this._radius}},displayOriginY:{get:function(){return this._radius}}});e.exports=u},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){var r=o.width/2,a=o.height/2,l=Math.abs(n.x-o.x-r),h=Math.abs(n.y-o.y-a),u=r+n.radius,v=a+n.radius;if(l>u||h>v)return!1;if(l<=r||h<=a)return!0;var d=l-r,c=h-a,p=d*d,g=c*c,m=n.radius*n.radius;return p+g<=m};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return n.width<=0||n.height<=0||o.width<=0||o.height<=0?!1:!(n.right<o.x||n.bottom<o.y||n.x>o.right||n.y>o.bottom)};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(6),o={},r={};r.register=function(a,l,h,u,v){o[a]={plugin:l,mapping:h,settingsKey:u,configKey:v}},r.getPlugin=function(a){return o[a]},r.install=function(a){var l=a.scene.sys,h=l.settings.input,u=l.game.config;for(var v in o){var d=o[v].plugin,c=o[v].mapping,p=o[v].settingsKey,g=o[v].configKey;n(h,p,u[g])&&(a[c]=new d(a))}},r.remove=function(a){o.hasOwnProperty(a)&&delete o[a]},e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ANY_KEY_DOWN:i(1323),ANY_KEY_UP:i(1324),COMBO_MATCH:i(1325),DOWN:i(1326),KEY_DOWN:i(1327),KEY_UP:i(1328),UP:i(1329)}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return n.url?n.url.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)?n.url:o+n.url:!1};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r,a,l,h){return n===void 0&&(n=""),o===void 0&&(o=!0),r===void 0&&(r=""),a===void 0&&(a=""),l===void 0&&(l=0),h===void 0&&(h=!1),{responseType:n,async:o,user:r,password:a,timeout:l,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:h}};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(243),r=i(73),a=new n({Extends:r,Mixins:[o.Acceleration,o.Angular,o.Bounce,o.Debug,o.Drag,o.Enable,o.Friction,o.Gravity,o.Immovable,o.Mass,o.Pushable,o.Size,o.Velocity],initialize:function(h,u,v,d,c){r.call(this,h,u,v,d,c),this.body=null}});e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(119),o=function(r,a,l,h){if(l===void 0&&(l=!1),n(r,a,h)){var u=h.data[a][r]||null;return u?u.index===-1?l?u:null:u:null}else return null};e.exports=o},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r,a){var l=n.data,h=n.width,u=n.height,v=n.tilemapLayer,d=Math.max(0,o.left),c=Math.min(h,o.right),p=Math.max(0,o.top),g=Math.min(u,o.bottom),m,x,y;if(r===0)for(x=p;x<g;x++)for(m=d;l[x]&&m<c;m++)y=l[x][m],!(!y||y.index===-1||!y.visible||y.alpha===0)&&a.push(y);else if(r===1)for(x=p;x<g;x++)for(m=c;l[x]&&m>=d;m--)y=l[x][m],!(!y||y.index===-1||!y.visible||y.alpha===0)&&a.push(y);else if(r===2)for(x=g;x>=p;x--)for(m=d;l[x]&&m<c;m++)y=l[x][m],!(!y||y.index===-1||!y.visible||y.alpha===0)&&a.push(y);else if(r===3)for(x=g;x>=p;x--)for(m=c;l[x]&&m>=d;m--)y=l[x][m],!(!y||y.index===-1||!y.visible||y.alpha===0)&&a.push(y);return v.tilesDrawn=a.length,v.tilesTotal=h*u,a};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r){var a=r.collideIndexes.indexOf(n);o&&a===-1?r.collideIndexes.push(n):!o&&a!==-1&&r.collideIndexes.splice(a,1)};e.exports=i},function(e,f,i){/**
 * @author       Seth Berrier <berriers@uwstout.edu>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(2),o=function(r,a,l){if(!a)return{i:0,layers:r.layers,name:"",opacity:1,visible:!0,x:0,y:0};var h=a.x+n(a,"startx",0)*r.tilewidth+n(a,"offsetx",0),u=a.y+n(a,"starty",0)*r.tileheight+n(a,"offsety",0);return{i:0,layers:a.layers,name:l.name+a.name+"/",opacity:l.opacity*a.opacity,visible:l.visible&&a.visible,x:l.x+h,y:l.y+u}};e.exports=o},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r){var a;if(n.hasOwnProperty(o)){var l=typeof n[o];l==="function"?a=function(h,u,v,d,c,p){return n[o](h,u,v,d,c,p)}:a=function(){return n[o]}}else typeof r=="function"?a=r:a=function(){return r};return a};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(265),o=i(13),r=i(99),a=i(80),l=i(162),h=i(583),u=i(263),v=i(6),d=i(264),c=i(266),p=i(268),g=function(m,x,y){y===void 0&&(y=n);for(var T=y.targets?y.targets:u(x),C=h(x),S=l(x,"delay",y.delay),E=l(x,"duration",y.duration),M=v(x,"easeParams",y.easeParams),O=a(v(x,"ease",y.ease),M),L=l(x,"hold",y.hold),R=l(x,"repeat",y.repeat),w=l(x,"repeatDelay",y.repeatDelay),D=r(x,"yoyo",y.yoyo),B=r(x,"flipX",y.flipX),N=r(x,"flipY",y.flipY),z=[],X=0;X<C.length;X++)for(var k=C[X].key,K=C[X].value,b=0;b<T.length;b++){var I=d(k,K),G=p(T[b],b,k,I.getEnd,I.getStart,I.getActive,a(v(K,"ease",O),v(K,"easeParams",M)),l(K,"delay",S),l(K,"duration",E),r(K,"yoyo",D),l(K,"hold",L),l(K,"repeat",R),l(K,"repeatDelay",w),r(K,"flipX",B),r(K,"flipY",N));z.push(G)}var Y=new c(m,z,T);Y.offset=o(x,"offset",null),Y.completeDelay=o(x,"completeDelay",0),Y.loop=Math.round(o(x,"loop",0)),Y.loopDelay=Math.round(o(x,"loopDelay",0)),Y.paused=r(x,"paused",!1),Y.useFrames=r(x,"useFrames",!1);for(var U=v(x,"callbackScope",Y),W=[Y,null],H=c.TYPES,Z=0;Z<H.length;Z++){var q=H[Z],_=v(x,q,!1);if(_){var nt=v(x,q+"Scope",U),rt=v(x,q+"Params",[]);Y.setCallback(q,_,W.concat(rt),nt)}}return Y};e.exports=g},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(102),r=i(2),a=i(132),l=i(185),h=new n({initialize:function(v){this.parent=v,this.animationManager=v.scene.sys.anims,this.animationManager.on(a.REMOVE_ANIMATION,this.globalRemove,this),this.textureManager=this.animationManager.textureManager,this.anims=null,this.isPlaying=!1,this.hasStarted=!1,this.currentAnim=null,this.currentFrame=null,this.nextAnim=null,this.nextAnimsQueue=[],this.timeScale=1,this.frameRate=0,this.duration=0,this.msPerFrame=0,this.skipMissedFrames=!0,this.delay=0,this.repeat=0,this.repeatDelay=0,this.yoyo=!1,this.showOnStart=!1,this.hideOnComplete=!1,this.forward=!0,this.inReverse=!1,this.accumulator=0,this.nextTick=0,this.delayCounter=0,this.repeatCounter=0,this.pendingRepeat=!1,this._paused=!1,this._wasPlaying=!1,this._pendingStop=0,this._pendingStopValue},chain:function(u){var v=this.parent;if(u===void 0)return this.nextAnimsQueue.length=0,this.nextAnim=null,v;Array.isArray(u)||(u=[u]);for(var d=0;d<u.length;d++){var c=u[d];this.nextAnim===null?this.nextAnim=c:this.nextAnimsQueue.push(c)}return this.parent},getName:function(){return this.currentAnim?this.currentAnim.key:""},getFrameName:function(){return this.currentFrame?this.currentFrame.textureFrame:""},load:function(u){this.isPlaying&&this.stop();var v=this.animationManager,d=typeof u=="string"?u:r(u,"key",null),c=this.exists(d)?this.get(d):v.get(d);if(!c)console.warn("Missing animation: "+d);else{this.currentAnim=c;var p=c.getTotalFrames(),g=r(u,"frameRate",c.frameRate),m=r(u,"duration",c.duration);c.calculateDuration(this,p,m,g),this.delay=r(u,"delay",c.delay),this.repeat=r(u,"repeat",c.repeat),this.repeatDelay=r(u,"repeatDelay",c.repeatDelay),this.yoyo=r(u,"yoyo",c.yoyo),this.showOnStart=r(u,"showOnStart",c.showOnStart),this.hideOnComplete=r(u,"hideOnComplete",c.hideOnComplete),this.skipMissedFrames=r(u,"skipMissedFrames",c.skipMissedFrames),this.timeScale=r(u,"timeScale",this.timeScale);var x=r(u,"startFrame",0);x>c.getTotalFrames()&&(x=0);var y=c.frames[x];x===0&&!this.forward&&(y=c.getLastFrame()),this.currentFrame=y}return this.parent},pause:function(u){return this._paused||(this._paused=!0,this._wasPlaying=this.isPlaying,this.isPlaying=!1),u!==void 0&&this.setCurrentFrame(u),this.parent},resume:function(u){return this._paused&&(this._paused=!1,this.isPlaying=this._wasPlaying),u!==void 0&&this.setCurrentFrame(u),this.parent},playAfterDelay:function(u,v){if(!this.isPlaying)this.delayCounter=v,this.play(u,!0);else{var d=this.nextAnim,c=this.nextAnimsQueue;d&&c.unshift(d),this.nextAnim=u,this._pendingStop=1,this._pendingStopValue=v}return this.parent},playAfterRepeat:function(u,v){if(v===void 0&&(v=1),!this.isPlaying)this.play(u);else{var d=this.nextAnim,c=this.nextAnimsQueue;d&&c.unshift(d),this.repeatCounter!==-1&&v>this.repeatCounter&&(v=this.repeatCounter),this.nextAnim=u,this._pendingStop=2,this._pendingStopValue=v}return this.parent},play:function(u,v){v===void 0&&(v=!1);var d=this.currentAnim,c=this.parent,p=typeof u=="string"?u:u.key;if(v&&this.isPlaying&&d.key===p)return c;if(d&&this.isPlaying){var g=this.animationManager.getMix(d.key,u);if(g>0)return this.playAfterDelay(u,g)}return this.forward=!0,this.inReverse=!1,this._paused=!1,this._wasPlaying=!0,this.startAnimation(u)},playReverse:function(u,v){v===void 0&&(v=!1);var d=typeof u=="string"?u:u.key;return v&&this.isPlaying&&this.currentAnim.key===d?this.parent:(this.forward=!1,this.inReverse=!0,this._paused=!1,this._wasPlaying=!0,this.startAnimation(u))},startAnimation:function(u){this.load(u);var v=this.currentAnim,d=this.parent;return v&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat,v.getFirstTick(this),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!1,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.delayCounter+=this.delay,this.delayCounter===0&&this.handleStart()),d},handleStart:function(){this.showOnStart&&this.parent.setVisible(!0),this.setCurrentFrame(this.currentFrame),this.hasStarted=!0,this.emitEvents(a.ANIMATION_START)},handleRepeat:function(){this.pendingRepeat=!1,this.emitEvents(a.ANIMATION_REPEAT)},handleStop:function(){this._pendingStop=0,this.isPlaying=!1,this.emitEvents(a.ANIMATION_STOP)},handleComplete:function(){this._pendingStop=0,this.isPlaying=!1,this.hideOnComplete&&this.parent.setVisible(!1),this.emitEvents(a.ANIMATION_COMPLETE,a.ANIMATION_COMPLETE_KEY)},emitEvents:function(u,v){var d=this.currentAnim,c=this.currentFrame,p=this.parent,g=c.textureFrame;p.emit(u,d,c,p,g),v&&p.emit(v+d.key,d,c,p,g)},reverse:function(){return this.isPlaying&&(this.inReverse=!this.inReverse,this.forward=!this.forward),this.parent},getProgress:function(){var u=this.currentFrame;if(!u)return 0;var v=u.progress;return this.inReverse&&(v*=-1),v},setProgress:function(u){return this.forward||(u=1-u),this.setCurrentFrame(this.currentAnim.getFrameByProgress(u)),this.parent},setRepeat:function(u){return this.repeatCounter=u===-1?Number.MAX_VALUE:u,this.parent},globalRemove:function(u,v){v===void 0&&(v=this.currentAnim),this.isPlaying&&v.key===this.currentAnim.key&&(this.stop(),this.setCurrentFrame(this.currentAnim.frames[0]))},restart:function(u,v){u===void 0&&(u=!1),v===void 0&&(v=!1);var d=this.currentAnim,c=this.parent;return d?(v&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat),d.getFirstTick(this),this.emitEvents(a.ANIMATION_RESTART),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!u,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.setCurrentFrame(d.frames[0]),this.parent):c},complete:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleComplete(),this.nextAnim){var u=this.nextAnim;this.nextAnim=this.nextAnimsQueue.length>0?this.nextAnimsQueue.shift():null,this.play(u)}return this.parent},stop:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleStop(),this.nextAnim){var u=this.nextAnim;this.nextAnim=this.nextAnimsQueue.shift(),this.play(u)}return this.parent},stopAfterDelay:function(u){return this._pendingStop=1,this._pendingStopValue=u,this.parent},stopAfterRepeat:function(u){return u===void 0&&(u=1),this.repeatCounter!==-1&&u>this.repeatCounter&&(u=this.repeatCounter),this._pendingStop=2,this._pendingStopValue=u,this.parent},stopOnFrame:function(u){return this._pendingStop=3,this._pendingStopValue=u,this.parent},getTotalFrames:function(){return this.currentAnim?this.currentAnim.getTotalFrames():0},update:function(u,v){var d=this.currentAnim;if(!(!this.isPlaying||!d||d.paused)){if(this.accumulator+=v*this.timeScale,this._pendingStop===1&&(this._pendingStopValue-=v,this._pendingStopValue<=0))return this.stop();if(!this.hasStarted)this.accumulator>=this.delayCounter&&(this.accumulator-=this.delayCounter,this.handleStart());else if(this.accumulator>=this.nextTick&&(this.forward?d.nextFrame(this):d.previousFrame(this),this.isPlaying&&this._pendingStop===0&&this.skipMissedFrames&&this.accumulator>this.nextTick)){var c=0;do this.forward?d.nextFrame(this):d.previousFrame(this),c++;while(this.isPlaying&&this.accumulator>this.nextTick&&c<60)}}},setCurrentFrame:function(u){var v=this.parent;return this.currentFrame=u,v.texture=u.frame.texture,v.frame=u.frame,v.isCropped&&v.frame.updateCropUVs(v._crop,v.flipX,v.flipY),u.setAlpha&&(v.alpha=u.alpha),v.setSizeToFrame(),v._originComponent&&(u.frame.customPivot?v.setOrigin(u.frame.pivotX,u.frame.pivotY):v.updateDisplayOrigin()),this.isPlaying&&this.hasStarted&&(this.emitEvents(a.ANIMATION_UPDATE),this._pendingStop===3&&this._pendingStopValue===u&&this.stop()),v},nextFrame:function(){return this.currentAnim&&this.currentAnim.nextFrame(this),this.parent},previousFrame:function(){return this.currentAnim&&this.currentAnim.previousFrame(this),this.parent},get:function(u){return this.anims?this.anims.get(u):null},exists:function(u){return this.anims?this.anims.has(u):!1},create:function(u){var v=u.key,d=!1;return v&&(d=this.get(v),d||(d=new l(this,v,u),this.anims||(this.anims=new o),this.anims.set(v,d))),d},generateFrameNames:function(u,v){return this.animationManager.generateFrameNames(u,v)},generateFrameNumbers:function(u,v){return this.animationManager.generateFrameNumbers(u,v)},remove:function(u){var v=this.get(u);return v&&(this.currentAnim===v&&this.stop(),this.anims.delete(u)),v},destroy:function(){this.animationManager.off(a.REMOVE_ANIMATION,this.globalRemove,this),this.anims&&this.anims.clear(),this.animationManager=null,this.parent=null,this.nextAnim=null,this.nextAnimsQueue.length=0,this.currentAnim=null,this.currentFrame=null},isPaused:{get:function(){return this._paused}}});e.exports=h},function(e,f,i){var n={};e.exports=n;var o=i(166);(function(){n._motionWakeThreshold=.18,n._motionSleepThreshold=.08,n._minBias=.9,n.update=function(r,a){for(var l=a*a*a,h=0;h<r.length;h++){var u=r[h],v=u.speed*u.speed+u.angularSpeed*u.angularSpeed;if(u.force.x!==0||u.force.y!==0){n.set(u,!1);continue}var d=Math.min(u.motion,v),c=Math.max(u.motion,v);u.motion=n._minBias*d+(1-n._minBias)*c,u.sleepThreshold>0&&u.motion<n._motionSleepThreshold*l?(u.sleepCounter+=1,u.sleepCounter>=u.sleepThreshold&&n.set(u,!0)):u.sleepCounter>0&&(u.sleepCounter-=1)}},n.afterCollisions=function(r,a){for(var l=a*a*a,h=0;h<r.length;h++){var u=r[h];if(!!u.isActive){var v=u.collision,d=v.bodyA.parent,c=v.bodyB.parent;if(!(d.isSleeping&&c.isSleeping||d.isStatic||c.isStatic)&&(d.isSleeping||c.isSleeping)){var p=d.isSleeping&&!d.isStatic?d:c,g=p===d?c:d;!p.isStatic&&g.motion>n._motionWakeThreshold*l&&n.set(p,!1)}}}},n.set=function(r,a){var l=r.isSleeping;a?(r.isSleeping=!0,r.sleepCounter=r.sleepThreshold,r.positionImpulse.x=0,r.positionImpulse.y=0,r.positionPrev.x=r.position.x,r.positionPrev.y=r.position.y,r.anglePrev=r.angle,r.speed=0,r.angularSpeed=0,r.motion=0,l||o.trigger(r,"sleepStart")):(r.isSleeping=!1,r.sleepCounter=0,l&&o.trigger(r,"sleepEnd"))}})()},function(e,f,i){var n={};e.exports=n;var o=i(32);(function(){n.on=function(r,a,l){for(var h=a.split(" "),u,v=0;v<h.length;v++)u=h[v],r.events=r.events||{},r.events[u]=r.events[u]||[],r.events[u].push(l);return l},n.off=function(r,a,l){if(!a){r.events={};return}typeof a=="function"&&(l=a,a=o.keys(r.events).join(" "));for(var h=a.split(" "),u=0;u<h.length;u++){var v=r.events[h[u]],d=[];if(l&&v)for(var c=0;c<v.length;c++)v[c]!==l&&d.push(v[c]);r.events[h[u]]=d}},n.trigger=function(r,a,l){var h,u,v,d,c=r.events;if(c&&o.keys(c).length>0){l||(l={}),h=a.split(" ");for(var p=0;p<h.length;p++)if(u=h[p],v=c[u],v){d=o.clone(l,!1),d.name=u,d.source=r;for(var g=0;g<v.length;g++)v[g].apply(r,[d])}}}})()},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(175),o=i(92),r=i(74),a={defaultPipeline:null,pipeline:null,hasPostPipeline:!1,postPipelines:null,pipelineData:null,initPipeline:function(l){l===void 0&&(l=o.MULTI_PIPELINE);var h=this.scene.sys.renderer;if(!h)return!1;var u=h.pipelines;if(this.postPipelines=[],this.pipelineData={},u){var v=u.get(l);if(v)return this.defaultPipeline=v,this.pipeline=v,!0}return!1},setPipeline:function(l,h,u){var v=this.scene.sys.renderer;if(!v)return this;var d=v.pipelines;if(d){var c=d.get(l);c&&(this.pipeline=c),h&&(this.pipelineData=u?n(h):h)}return this},setPostPipeline:function(l,h,u){var v=this.scene.sys.renderer;if(!v)return this;var d=v.pipelines;if(d){Array.isArray(l)||(l=[l]);for(var c=0;c<l.length;c++){var p=d.getPostPipeline(l[c],this);p&&this.postPipelines.push(p)}h&&(this.pipelineData=u?n(h):h)}return this.hasPostPipeline=this.postPipelines.length>0,this},setPipelineData:function(l,h){var u=this.pipelineData;return h===void 0?delete u[l]:u[l]=h,this},getPostPipeline:function(l){for(var h=this.postPipelines,u=[],v=0;v<h.length;v++){var d=h[v];(typeof l=="string"&&d.name===l||d instanceof l)&&u.push(d)}return u.length===1?u[0]:u},resetPipeline:function(l,h){return l===void 0&&(l=!1),h===void 0&&(h=!1),this.pipeline=this.defaultPipeline,l&&(this.postPipelines=[],this.hasPostPipeline=!1),h&&(this.pipelineData={}),this.pipeline!==null},resetPostPipeline:function(l){l===void 0&&(l=!1);for(var h=this.postPipelines,u=0;u<h.length;u++)h[u].destroy();this.postPipelines=[],this.hasPostPipeline=!1,l&&(this.pipelineData={})},removePostPipeline:function(l){for(var h=this.postPipelines,u=h.length-1;u>=0;u--){var v=h[u];(typeof l=="string"&&v.name===l||typeof l!="string"&&v instanceof l)&&(v.destroy(),r(h,u))}return this.hasPostPipeline=this.postPipelines.length>0,this},getPipelineName:function(){return this.pipeline.name}};e.exports=a},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={DEFAULT:0,LINEAR:0,NEAREST:1};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4),o=function(r,a,l){return l===void 0&&(l=new n),l.x=r.x+r.radius*Math.cos(a),l.y=r.y+r.radius*Math.sin(a),l};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4),o=function(r,a){a===void 0&&(a=new n);var l=2*Math.PI*Math.random(),h=Math.random()+Math.random(),u=h>1?2-h:h,v=u*Math.cos(l),d=u*Math.sin(l);return a.x=r.x+v*r.radius,a.y=r.y+d*r.radius,a};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(130),o=i(4),r=function(a,l,h){if(h===void 0&&(h=new o),l<=0||l>=1)return h.x=a.x,h.y=a.y,h;var u=n(a)*l;return l>.5?(u-=a.width+a.height,u<=a.width?(h.x=a.right-u,h.y=a.bottom):(h.x=a.x,h.y=a.bottom-(u-a.width))):u<=a.width?(h.x=a.x+u,h.y=a.y):(h.x=a.right,h.y=a.y+(u-a.width)),h};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(67),o=i(4),r=function(a,l,h,u){u===void 0&&(u=[]),!l&&h>0&&(l=n(a)/h);for(var v=a.x1,d=a.y1,c=a.x2,p=a.y2,g=0;g<l;g++){var m=g/l,x=v+(c-v)*m,y=d+(p-d)*m;u.push(new o(x,y))}return u};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4),o=function(r,a){a===void 0&&(a=new n);var l=Math.random();return a.x=r.x1+l*(r.x2-r.x1),a.y=r.y1+l*(r.y2-r.y1),a};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4),o=function(r,a){return a===void 0&&(a=new n),a.x=r.x+Math.random()*r.width,a.y=r.y+Math.random()*r.height,a};e.exports=o},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){var o,r,a;if(typeof n!="object"||n===null)return n;o=Array.isArray(n)?[]:{};for(a in n)r=n[a],o[a]=i(r);return o};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){var o={name:n.name,type:n.type,x:n.x,y:n.y,depth:n.depth,scale:{x:n.scaleX,y:n.scaleY},origin:{x:n.originX,y:n.originY},flipX:n.flipX,flipY:n.flipY,rotation:n.rotation,alpha:n.alpha,visible:n.visible,blendMode:n.blendMode,textureKey:"",frameKey:"",data:{}};return n.texture&&(o.textureKey=n.texture.key,o.frameKey=n.frame.name),o};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(3),o=function(r,a,l,h,u,v,d,c){c===void 0&&(c=new n);var p=Math.sin(u),g=Math.cos(u),m=g*v,x=p*v,y=-p*d,T=g*d,C=1/(m*T+y*-x);return c.x=T*C*r+-y*C*a+(h*y-l*T)*C,c.y=m*C*a+-x*C*r+(-h*m+l*x)*C,c};e.exports=o},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){o===void 0&&(o=1);for(var r=null,a=0;a<o;a++)r=n.shift(),n.push(r);return r};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){o===void 0&&(o=1);for(var r=null,a=0;a<o;a++)r=n.pop(),n.unshift(r);return r};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4),o=function(r,a){a===void 0&&(a=new n);var l=Math.random()*Math.PI*2,h=Math.sqrt(Math.random());return a.x=r.x+h*Math.cos(l)*r.width/2,a.y=r.y+h*Math.sin(l)*r.height/2,a};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4),o=function(r,a){a===void 0&&(a=new n);var l=r.x2-r.x1,h=r.y2-r.y1,u=r.x3-r.x1,v=r.y3-r.y1,d=Math.random(),c=Math.random();return d+c>=1&&(d=1-d,c=1-c),a.x=r.x1+(l*d+u*c),a.y=r.y1+(h*d+v*c),a};e.exports=o},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r,a,l){var h=a+Math.atan2(n.y-r,n.x-o);return n.x=o+l*Math.cos(h),n.y=r+l*Math.sin(h),n};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r){return n=Math.max(0,Math.min(1,(n-o)/(r-o))),n*n*n*(n*(n*6-15)+10)};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r){return n<=o?0:n>=r?1:(n=(n-o)/(r-o),n*n*(3-2*n))};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(18),o=i(0),r=i(132),a=i(318),l=i(319),h=i(6),u=i(320),v=new o({initialize:function(c,p,g){this.manager=c,this.key=p,this.type="frame",this.frames=this.getFrames(c.textureManager,h(g,"frames",[]),h(g,"defaultTextureKey",null),h(g,"sortFrames",!0)),this.frameRate=h(g,"frameRate",null),this.duration=h(g,"duration",null),this.msPerFrame,this.skipMissedFrames=h(g,"skipMissedFrames",!0),this.delay=h(g,"delay",0),this.repeat=h(g,"repeat",0),this.repeatDelay=h(g,"repeatDelay",0),this.yoyo=h(g,"yoyo",!1),this.showOnStart=h(g,"showOnStart",!1),this.hideOnComplete=h(g,"hideOnComplete",!1),this.paused=!1,this.calculateDuration(this,this.getTotalFrames(),this.duration,this.frameRate),this.manager.on&&(this.manager.on(r.PAUSE_ALL,this.pause,this),this.manager.on(r.RESUME_ALL,this.resume,this))},getTotalFrames:function(){return this.frames.length},calculateDuration:function(d,c,p,g){p===null&&g===null?(d.frameRate=24,d.duration=24/c*1e3):p&&g===null?(d.duration=p,d.frameRate=c/(p/1e3)):(d.frameRate=g,d.duration=c/g*1e3),d.msPerFrame=1e3/d.frameRate},addFrame:function(d){return this.addFrameAt(this.frames.length,d)},addFrameAt:function(d,c){var p=this.getFrames(this.manager.textureManager,c);if(p.length>0){if(d===0)this.frames=p.concat(this.frames);else if(d===this.frames.length)this.frames=this.frames.concat(p);else{var g=this.frames.slice(0,d),m=this.frames.slice(d);this.frames=g.concat(p,m)}this.updateFrameSequence()}return this},checkFrame:function(d){return d>=0&&d<this.frames.length},getFirstTick:function(d){d.accumulator=0,d.nextTick=d.msPerFrame+d.currentFrame.duration},getFrameAt:function(d){return this.frames[d]},getFrames:function(d,c,p,g){g===void 0&&(g=!0);var m=[],x,y,T=1,C,S;if(typeof c=="string"){S=c;var E=d.get(S),M=E.getFrameNames();g&&u(M),c=[],M.forEach(function(B){c.push({key:S,frame:B})})}if(!Array.isArray(c)||c.length===0)return m;for(C=0;C<c.length;C++){var O=c[C],L=h(O,"key",p);if(!!L){var R=h(O,"frame",0),w=d.getFrame(L,R);y=new l(L,R,T,w),y.duration=h(O,"duration",0),y.isFirst=!x,x&&(x.nextFrame=y,y.prevFrame=x),m.push(y),x=y,T++}}if(m.length>0){y.isLast=!0,y.nextFrame=m[0],m[0].prevFrame=y;var D=1/(m.length-1);for(C=0;C<m.length;C++)m[C].progress=C*D}return m},getNextTick:function(d){d.accumulator-=d.nextTick,d.nextTick=d.msPerFrame+d.currentFrame.duration},getFrameByProgress:function(d){return d=n(d,0,1),a(d,this.frames,"progress")},nextFrame:function(d){var c=d.currentFrame;c.isLast?d.yoyo?this.handleYoyoFrame(d,!1):d.repeatCounter>0?d.inReverse&&d.forward?d.forward=!1:this.repeatAnimation(d):d.complete():this.updateAndGetNextTick(d,c.nextFrame)},handleYoyoFrame:function(d,c){if(c||(c=!1),d.inReverse===!c&&d.repeatCounter>0){(d.repeatDelay===0||d.pendingRepeat)&&(d.forward=c),this.repeatAnimation(d);return}if(d.inReverse!==c&&d.repeatCounter===0){d.complete();return}d.forward=c;var p=c?d.currentFrame.nextFrame:d.currentFrame.prevFrame;this.updateAndGetNextTick(d,p)},getLastFrame:function(){return this.frames[this.frames.length-1]},previousFrame:function(d){var c=d.currentFrame;c.isFirst?d.yoyo?this.handleYoyoFrame(d,!0):d.repeatCounter>0?d.inReverse&&!d.forward?this.repeatAnimation(d):(d.forward=!0,this.repeatAnimation(d)):d.complete():this.updateAndGetNextTick(d,c.prevFrame)},updateAndGetNextTick:function(d,c){d.setCurrentFrame(c),this.getNextTick(d)},removeFrame:function(d){var c=this.frames.indexOf(d);return c!==-1&&this.removeFrameAt(c),this},removeFrameAt:function(d){return this.frames.splice(d,1),this.updateFrameSequence(),this},repeatAnimation:function(d){if(d._pendingStop===2){if(d._pendingStopValue===0)return d.stop();d._pendingStopValue--}d.repeatDelay>0&&!d.pendingRepeat?(d.pendingRepeat=!0,d.accumulator-=d.nextTick,d.nextTick+=d.repeatDelay):(d.repeatCounter--,d.forward?d.setCurrentFrame(d.currentFrame.nextFrame):d.setCurrentFrame(d.currentFrame.prevFrame),d.isPlaying&&(this.getNextTick(d),d.handleRepeat()))},toJSON:function(){var d={key:this.key,type:this.type,frames:[],frameRate:this.frameRate,duration:this.duration,skipMissedFrames:this.skipMissedFrames,delay:this.delay,repeat:this.repeat,repeatDelay:this.repeatDelay,yoyo:this.yoyo,showOnStart:this.showOnStart,hideOnComplete:this.hideOnComplete};return this.frames.forEach(function(c){d.frames.push(c.toJSON())}),d},updateFrameSequence:function(){for(var d=this.frames.length,c=1/(d-1),p,g=0;g<d;g++)p=this.frames[g],p.index=g+1,p.isFirst=!1,p.isLast=!1,p.progress=g*c,g===0?(p.isFirst=!0,d===1?(p.isLast=!0,p.nextFrame=p,p.prevFrame=p):(p.isLast=!1,p.prevFrame=this.frames[d-1],p.nextFrame=this.frames[g+1])):g===d-1&&d>1?(p.isLast=!0,p.prevFrame=this.frames[d-2],p.nextFrame=this.frames[0]):d>1&&(p.prevFrame=this.frames[g-1],p.nextFrame=this.frames[g+1]);return this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},destroy:function(){this.manager.off&&(this.manager.off(r.PAUSE_ALL,this.pause,this),this.manager.off(r.RESUME_ALL,this.resume,this)),this.manager.remove(this.key);for(var d=0;d<this.frames.length;d++)this.frames[d].destroy();this.frames=[],this.manager=null}});e.exports=v},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r,a){o===void 0&&(o=0),r===void 0&&(r=" "),a===void 0&&(a=3),n=n.toString();var l=0;if(o+1>=n.length)switch(a){case 1:n=new Array(o+1-n.length).join(r)+n;break;case 3:var h=Math.ceil((l=o-n.length)/2),u=l-h;n=new Array(u+1).join(r)+n+new Array(h+1).join(r);break;default:n=n+new Array(o+1-n.length).join(r);break}return n};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(327),o=i(189),r=i(331),a=i(332),l=function(h){var u=typeof h;switch(u){case"string":return h.substr(0,3).toLowerCase()==="rgb"?a(h):n(h);case"number":return o(h);case"object":return r(h)}};e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(103);function o(a,l,h,u){var v=(a+l*6)%6,d=Math.min(v,4-v,1);return Math.round(255*(u-u*h*Math.max(0,d)))}var r=function(a,l,h,u){l===void 0&&(l=1),h===void 0&&(h=1);var v=o(5,a,l,h),d=o(3,a,l,h),c=o(1,a,l,h);return u?u.setTo?u.setTo(v,d,c,u.alpha,!1):(u.r=v,u.g=d,u.b=c,u.color=n(v,d,c),u):{r:v,g:d,b:c,color:n(v,d,c)}};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(38),o=i(330),r=function(a){var l=o(a);return new n(l.r,l.g,l.b,l.a)};e.exports=r},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r){return n.x=o-n.width/2,n.y=r-n.height/2,n};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(105),o=i(136),r=i(31),a={canvas:!1,canvasBitBltShift:null,file:!1,fileSystem:!1,getUserMedia:!0,littleEndian:!1,localStorage:!1,pointerLock:!1,support32bit:!1,vibration:!1,webGL:!1,worker:!1};function l(){var u=new ArrayBuffer(4),v=new Uint8Array(u),d=new Uint32Array(u);return v[0]=161,v[1]=178,v[2]=195,v[3]=212,d[0]===3569595041?!0:d[0]===2712847316?!1:null}function h(){if(typeof importScripts=="function")return a;a.canvas=!!window.CanvasRenderingContext2D;try{a.localStorage=!!localStorage.getItem}catch{a.localStorage=!1}a.file=!!window.File&&!!window.FileReader&&!!window.FileList&&!!window.Blob,a.fileSystem=!!window.requestFileSystem;var u=!1,v=function(){if(window.WebGLRenderingContext)try{var d=r.createWebGL(this),c=d.getContext("webgl")||d.getContext("experimental-webgl"),p=r.create2D(this),g=p.getContext("2d"),m=g.createImageData(1,1);return u=m.data instanceof Uint8ClampedArray,r.remove(d),r.remove(p),!!c}catch{return!1}return!1};return a.webGL=v(),a.worker=!!window.Worker,a.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,a.getUserMedia=a.getUserMedia&&!!navigator.getUserMedia&&!!window.URL,o.firefox&&o.firefoxVersion<21&&(a.getUserMedia=!1),!n.iOS&&(o.ie||o.firefox||o.chrome)&&(a.canvasBitBltShift=!0),(o.safari||o.mobileSafari)&&(a.canvasBitBltShift=!1),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(a.vibration=!0),typeof ArrayBuffer!="undefined"&&typeof Uint8Array!="undefined"&&typeof Uint32Array!="undefined"&&(a.littleEndian=l()),a.support32bit=typeof ArrayBuffer!="undefined"&&typeof Uint8ClampedArray!="undefined"&&typeof Int32Array!="undefined"&&a.littleEndian!==null&&u,a}e.exports=h()},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i="",n=function(){var o=function(h){for(var u=["i","webkitI","msI","mozI","oI"],v=0;v<u.length;v++){var d=u[v]+"mageSmoothingEnabled";if(d in h)return d}return null},r=function(h){return i===""&&(i=o(h)),i&&(h[i]=!0),h},a=function(h){return i===""&&(i=o(h)),i&&(h[i]=!1),h},l=function(h){return i!==null?h[i]:null};return{disable:a,enable:r,getPrefix:o,isEnabled:l}};e.exports=n()},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(14),o=i(17),r={Angle:i(812),Distance:i(821),Easing:i(826),Fuzzy:i(827),Interpolation:i(830),Pow2:i(835),Snap:i(837),RandomDataGenerator:i(839),Average:i(840),Bernstein:i(356),Between:i(195),CatmullRom:i(194),CeilTo:i(841),Clamp:i(18),DegToRad:i(36),Difference:i(842),Euler:i(843),Factorial:i(357),FloatBetween:i(137),FloorTo:i(844),FromPercent:i(98),GetSpeed:i(845),IsEven:i(846),IsEvenStrict:i(847),Linear:i(135),MaxAdd:i(848),Median:i(849),MinSub:i(850),Percent:i(851),RadToDeg:i(196),RandomXY:i(852),RandomXYZ:i(853),RandomXYZW:i(854),Rotate:i(362),RotateAround:i(308),RotateAroundDistance:i(182),RotateTo:i(855),RoundAwayFromZero:i(363),RoundTo:i(856),SinCosTableGenerator:i(857),SmootherStep:i(183),SmoothStep:i(184),ToXY:i(858),TransformXY:i(177),Within:i(859),Wrap:i(68),Vector2:i(3),Vector3:i(39),Vector4:i(140),Matrix3:i(364),Matrix4:i(69),Quaternion:i(365),RotateVec3:i(860)};r=o(!1,r,n),e.exports=r},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r,a,l){var h=(a-o)*.5,u=(l-r)*.5,v=n*n,d=n*v;return(2*r-2*a+h+u)*d+(-3*r+3*a-2*h-u)*v+h*n+r};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return Math.floor(Math.random()*(o-n+1)+n)};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(14),o=function(r){return r*n.RAD_TO_DEG};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n={Global:["game","anims","cache","plugins","registry","scale","sound","textures","renderer"],CoreScene:["EventEmitter","CameraManager","GameObjectCreator","GameObjectFactory","ScenePlugin","DisplayList","UpdateList"],DefaultScene:["Clock","DataManagerPlugin","InputPlugin","Loader","TweenManager","LightsPlugin"]};e.exports=n},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=new n({initialize:function(){this._matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.alpha=1,this._dirty=!0,this._data},set:function(r){return this._matrix=r,this._dirty=!0,this},reset:function(){var r=this._matrix;return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=0,r[6]=1,r[7]=0,r[8]=0,r[9]=0,r[10]=0,r[11]=0,r[12]=1,r[13]=0,r[14]=0,r[15]=0,r[16]=0,r[17]=0,r[18]=1,r[19]=0,this._dirty=!0,this},getData:function(){if(this._dirty){var r=new Float32Array(this._matrix);r[4]/=255,r[9]/=255,r[14]/=255,r[19]/=255,this._data=r,this._dirty=!1}return this._data},brightness:function(r,a){r===void 0&&(r=0),a===void 0&&(a=!1);var l=r;return this.multiply([l,0,0,0,0,0,l,0,0,0,0,0,l,0,0,0,0,0,1,0],a)},saturate:function(r,a){r===void 0&&(r=0),a===void 0&&(a=!1);var l=r*2/3+1,h=(l-1)*-.5;return this.multiply([l,h,h,0,0,h,l,h,0,0,h,h,l,0,0,0,0,0,1,0],a)},desaturate:function(r){return r===void 0&&(r=!1),this.saturate(-1,r)},hue:function(r,a){r===void 0&&(r=0),a===void 0&&(a=!1),r=r/180*Math.PI;var l=Math.cos(r),h=Math.sin(r),u=.213,v=.715,d=.072;return this.multiply([u+l*(1-u)+h*-u,v+l*-v+h*-v,d+l*-d+h*(1-d),0,0,u+l*-u+h*.143,v+l*(1-v)+h*.14,d+l*-d+h*-.283,0,0,u+l*-u+h*-(1-u),v+l*-v+h*v,d+l*(1-d)+h*d,0,0,0,0,0,1,0],a)},grayscale:function(r,a){return r===void 0&&(r=1),a===void 0&&(a=!1),this.saturate(-r,a)},blackWhite:function(r){return r===void 0&&(r=!1),this.multiply([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],r)},contrast:function(r,a){r===void 0&&(r=0),a===void 0&&(a=!1);var l=r+1,h=-.5*(l-1);return this.multiply([l,0,0,0,h,0,l,0,0,h,0,0,l,0,h,0,0,0,1,0],a)},negative:function(r){return r===void 0&&(r=!1),this.multiply([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],r)},desaturateLuminance:function(r){return r===void 0&&(r=!1),this.multiply([.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,0,0,0,1,0],r)},sepia:function(r){return r===void 0&&(r=!1),this.multiply([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],r)},night:function(r,a){return r===void 0&&(r=.1),a===void 0&&(a=!1),this.multiply([r*-2,-r,0,0,0,-r,0,r,0,0,0,r,r*2,0,0,0,0,0,1,0],a)},lsd:function(r){return r===void 0&&(r=!1),this.multiply([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],r)},brown:function(r){return r===void 0&&(r=!1),this.multiply([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],r)},vintagePinhole:function(r){return r===void 0&&(r=!1),this.multiply([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],r)},kodachrome:function(r){return r===void 0&&(r=!1),this.multiply([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],r)},technicolor:function(r){return r===void 0&&(r=!1),this.multiply([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],r)},polaroid:function(r){return r===void 0&&(r=!1),this.multiply([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],r)},shiftToBGR:function(r){return r===void 0&&(r=!1),this.multiply([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],r)},multiply:function(r,a){a||this.reset();for(var l=this._matrix,h=[],u=0;u<20;u++)h[u]=l[u];return l[0]=h[0]*r[0]+h[1]*r[5]+h[2]*r[10]+h[3]*r[15],l[1]=h[0]*r[1]+h[1]*r[6]+h[2]*r[11]+h[3]*r[16],l[2]=h[0]*r[2]+h[1]*r[7]+h[2]*r[12]+h[3]*r[17],l[3]=h[0]*r[3]+h[1]*r[8]+h[2]*r[13]+h[3]*r[18],l[4]=h[0]*r[4]+h[1]*r[9]+h[2]*r[14]+h[3]*r[19]+h[4],l[5]=h[5]*r[0]+h[6]*r[5]+h[7]*r[10]+h[8]*r[15],l[6]=h[5]*r[1]+h[6]*r[6]+h[7]*r[11]+h[8]*r[16],l[7]=h[5]*r[2]+h[6]*r[7]+h[7]*r[12]+h[8]*r[17],l[8]=h[5]*r[3]+h[6]*r[8]+h[7]*r[13]+h[8]*r[18],l[9]=h[5]*r[4]+h[6]*r[9]+h[7]*r[14]+h[8]*r[19]+h[9],l[10]=h[10]*r[0]+h[11]*r[5]+h[12]*r[10]+h[13]*r[15],l[11]=h[10]*r[1]+h[11]*r[6]+h[12]*r[11]+h[13]*r[16],l[12]=h[10]*r[2]+h[11]*r[7]+h[12]*r[12]+h[13]*r[17],l[13]=h[10]*r[3]+h[11]*r[8]+h[12]*r[13]+h[13]*r[18],l[14]=h[10]*r[4]+h[11]*r[9]+h[12]*r[14]+h[13]*r[19]+h[14],l[15]=h[15]*r[0]+h[16]*r[5]+h[17]*r[10]+h[18]*r[15],l[16]=h[15]*r[1]+h[16]*r[6]+h[17]*r[11]+h[18]*r[16],l[17]=h[15]*r[2]+h[16]*r[7]+h[17]*r[12]+h[18]*r[17],l[18]=h[15]*r[3]+h[16]*r[8]+h[17]*r[13]+h[18]*r[18],l[19]=h[15]*r[4]+h[16]*r[9]+h[17]*r[14]+h[18]*r[19]+h[19],this._dirty=!0,this}});e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(10),o=i(14),r=function(a,l){if(l===void 0&&(l=new n),a.length===0)return l;for(var h=Number.MAX_VALUE,u=Number.MAX_VALUE,v=o.MIN_SAFE_INTEGER,d=o.MIN_SAFE_INTEGER,c,p,g,m=0;m<a.length;m++)c=a[m],Array.isArray(c)?(p=c[0],g=c[1]):(p=c.x,g=c.y),h=Math.min(h,p),u=Math.min(u,g),v=Math.max(v,p),d=Math.max(d,g);return l.x=h,l.y=u,l.width=v-h,l.height=d-u,l};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(1),r=new n({initialize:function(l,h,u){this._rgb=[0,0,0],this.onChangeCallback=o,this.dirty=!1,this.set(l,h,u)},set:function(a,l,h){return a===void 0&&(a=0),l===void 0&&(l=0),h===void 0&&(h=0),this._rgb=[a,l,h],this.onChange(),this},equals:function(a,l,h){var u=this._rgb;return u.r===a&&u.g===l&&u.b===h},onChange:function(){this.dirty=!0;var a=this._rgb;this.onChangeCallback.call(this,a[0],a[1],a[2])},r:{get:function(){return this._rgb[0]},set:function(a){this._rgb[0]=a,this.onChange()}},g:{get:function(){return this._rgb[1]},set:function(a){this._rgb[1]=a,this.onChange()}},b:{get:function(){return this._rgb[2]},set:function(a){this._rgb[2]=a,this.onChange()}},destroy:function(){this.onChangeCallback=null}});e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n={CENTER:i(403),ORIENTATION:i(404),SCALE_MODE:i(405),ZOOM:i(406)};e.exports=n},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){n.parentNode&&n.parentNode.removeChild(n)};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={MOUSE_DOWN:0,MOUSE_MOVE:1,MOUSE_UP:2,TOUCH_START:3,TOUCH_MOVE:4,TOUCH_END:5,POINTER_LOCK_CHANGE:6,TOUCH_CANCEL:7,MOUSE_WHEEL:8};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(144),r=i(197),a=i(20),l=i(419),h=i(420),u=i(33),v=i(1),d=i(421),c=new n({initialize:function(g,m){this.scene=g,this.game,this.renderer,this.config=m,this.settings=d.create(m),this.canvas,this.context,this.anims,this.cache,this.plugins,this.registry,this.scale,this.sound,this.textures,this.add,this.cameras,this.displayList,this.events,this.make,this.scenePlugin,this.updateList,this.sceneUpdate=v},init:function(p){this.settings.status=o.INIT,this.sceneUpdate=v,this.game=p,this.renderer=p.renderer,this.canvas=p.canvas,this.context=p.context;var g=p.plugins;this.plugins=g,g.addToScene(this,r.Global,[r.CoreScene,h(this),l(this)]),this.events.emit(a.BOOT,this),this.settings.isBooted=!0},step:function(p,g){var m=this.events;m.emit(a.PRE_UPDATE,p,g),m.emit(a.UPDATE,p,g),this.sceneUpdate.call(this.scene,p,g),m.emit(a.POST_UPDATE,p,g)},render:function(p){var g=this.displayList;g.depthSort(),this.events.emit(a.PRE_RENDER,p),this.cameras.render(p,g),this.events.emit(a.RENDER,p)},queueDepthSort:function(){this.displayList.queueDepthSort()},depthSort:function(){this.displayList.depthSort()},pause:function(p){var g=this.events,m=this.settings;return this.settings.active&&(m.status=o.PAUSED,m.active=!1,g.emit(a.PAUSE,this,p)),this},resume:function(p){var g=this.events,m=this.settings;return this.settings.active||(m.status=o.RUNNING,m.active=!0,g.emit(a.RESUME,this,p)),this},sleep:function(p){var g=this.events,m=this.settings;return m.status=o.SLEEPING,m.active=!1,m.visible=!1,g.emit(a.SLEEP,this,p),this},wake:function(p){var g=this.events,m=this.settings;return m.status=o.RUNNING,m.active=!0,m.visible=!0,g.emit(a.WAKE,this,p),m.isTransition&&g.emit(a.TRANSITION_WAKE,m.transitionFrom,m.transitionDuration),this},getData:function(){return this.settings.data},isSleeping:function(){return this.settings.status===o.SLEEPING},isActive:function(){return this.settings.status===o.RUNNING},isPaused:function(){return this.settings.status===o.PAUSED},isTransitioning:function(){return this.settings.isTransition||this.scenePlugin._target!==null},isTransitionOut:function(){return this.scenePlugin._target!==null&&this.scenePlugin._duration>0},isTransitionIn:function(){return this.settings.isTransition},isVisible:function(){return this.settings.visible},setVisible:function(p){return this.settings.visible=p,this},setActive:function(p,g){return p?this.resume(g):this.pause(g)},start:function(p){var g=this.events,m=this.settings;p&&(m.data=p),m.status=o.START,m.active=!0,m.visible=!0,g.emit(a.START,this),g.emit(a.READY,this,p)},shutdown:function(p){var g=this.events,m=this.settings;g.off(a.TRANSITION_INIT),g.off(a.TRANSITION_START),g.off(a.TRANSITION_COMPLETE),g.off(a.TRANSITION_OUT),m.status=o.SHUTDOWN,m.active=!1,m.visible=!1,this.renderer===u.WEBGL&&this.renderer.resetTextures(!0),g.emit(a.SHUTDOWN,this,p)},destroy:function(){var p=this.events,g=this.settings;g.status=o.DESTROYED,g.active=!1,g.visible=!1,p.emit(a.DESTROY,this),p.removeAllListeners();for(var m=["scene","game","anims","cache","plugins","registry","sound","textures","add","camera","displayList","events","make","scenePlugin","updateList"],x=0;x<m.length;x++)this[m[x]]=null}});e.exports=c},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n&&n[0].toUpperCase()+n.slice(1)};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(33),o=i(0),r=i(109),a=i(424),l="Texture.frame missing: ",h=new o({initialize:function(v,d,c,p,g){Array.isArray(c)||(c=[c]),this.manager=v,this.key=d,this.source=[],this.dataSource=[],this.frames={},this.customData={},this.firstFrame="__BASE",this.frameTotal=0;for(var m=0;m<c.length;m++)this.source.push(new a(this,c[m],p,g))},add:function(u,v,d,c,p,g){if(this.has(u))return null;var m=new r(this,u,v,d,c,p,g);return this.frames[u]=m,this.firstFrame==="__BASE"&&(this.firstFrame=u),this.frameTotal++,m},remove:function(u){if(this.has(u)){var v=this.get(u);return v.destroy(),delete this.frames[u],!0}return!1},has:function(u){return this.frames[u]},get:function(u){u||(u=this.firstFrame);var v=this.frames[u];return v||(console.warn(l+u),v=this.frames[this.firstFrame]),v},getTextureSourceIndex:function(u){for(var v=0;v<this.source.length;v++)if(this.source[v]===u)return v;return-1},getFramesFromTextureSource:function(u,v){v===void 0&&(v=!1);var d=[];for(var c in this.frames)if(!(c==="__BASE"&&!v)){var p=this.frames[c];p.sourceIndex===u&&d.push(p)}return d},getFrameNames:function(u){u===void 0&&(u=!1);var v=Object.keys(this.frames);if(!u){var d=v.indexOf("__BASE");d!==-1&&v.splice(d,1)}return v},getSourceImage:function(u){(u==null||this.frameTotal===1)&&(u="__BASE");var v=this.frames[u];return v?v.source.image:(console.warn(l+u),this.frames.__BASE.source.image)},getDataSourceImage:function(u){(u==null||this.frameTotal===1)&&(u="__BASE");var v=this.frames[u],d;return v?d=v.sourceIndex:(console.warn(l+u),d=this.frames.__BASE.sourceIndex),this.dataSource[d].image},setDataSource:function(u){Array.isArray(u)||(u=[u]);for(var v=0;v<u.length;v++){var d=this.source[v];this.dataSource.push(new a(this,u[v],d.width,d.height))}},setFilter:function(u){var v;for(v=0;v<this.source.length;v++)this.source[v].setFilter(u);for(v=0;v<this.dataSource.length;v++)this.dataSource[v].setFilter(u)},destroy:function(){var u;for(u=0;u<this.source.length;u++)this.source[u].destroy();for(u=0;u<this.dataSource.length;u++)this.dataSource[u].destroy();for(var v in this.frames){var d=this.frames[v];d.destroy()}this.source=[],this.dataSource=[],this.frames={},this.manager.removeKey(this.key);var c=this.manager.game.renderer;c&&c.type===n.WEBGL&&c.resetTextures(!0),this.manager=null}});e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(78),o=function(r,a,l,h,u){h===void 0&&(h=0),u===void 0&&(u=r.length);var v=[];if(n(r,h,u))for(var d=h;d<u;d++){var c=r[d];(!a||a&&l===void 0&&c.hasOwnProperty(a)||a&&l!==void 0&&c[a]===l)&&v.push(c)}return v};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Matrix:i(1013),Add:i(1021),AddAt:i(1022),BringToTop:i(1023),CountAllMatching:i(1024),Each:i(1025),EachInRange:i(1026),FindClosestInSorted:i(318),GetAll:i(207),GetFirst:i(428),GetRandom:i(210),MoveDown:i(1027),MoveTo:i(1028),MoveUp:i(1029),MoveAbove:i(1030),MoveBelow:i(1031),NumberArray:i(322),NumberArrayStep:i(1032),QuickSelect:i(436),Range:i(437),Remove:i(93),RemoveAt:i(1033),RemoveBetween:i(1034),RemoveRandomElement:i(1035),Replace:i(1036),RotateLeft:i(178),RotateRight:i(179),SafeRange:i(78),SendToBack:i(1037),SetAll:i(1038),Shuffle:i(131),SortByDigits:i(320),SpliceOne:i(74),StableSort:i(79),Swap:i(1039)}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){if(!Array.isArray(n)||n.length<2||!Array.isArray(n[0]))return!1;for(var o=n[0].length,r=1;r<n.length;r++)if(n[r].length!==o)return!1;return!0};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r){o===void 0&&(o=0),r===void 0&&(r=n.length);var a=o+Math.floor(Math.random()*r);return n[a]===void 0?null:n[a]};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(9),r=i(438),a=new n({Extends:o,initialize:function(){o.call(this),this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,this.checkQueue=!1},add:function(l){return this._pending.push(l),this._toProcess++,l},remove:function(l){return this._destroy.push(l),this._toProcess++,l},removeAll:function(){for(var l=this._active,h=this._destroy,u=l.length;u--;)h.push(l[u]),this._toProcess++;return this},update:function(){if(this._toProcess===0)return this._active;var l=this._destroy,h=this._active,u,v;for(u=0;u<l.length;u++){v=l[u];var d=h.indexOf(v);d!==-1&&(h.splice(d,1),this.emit(r.PROCESS_QUEUE_REMOVE,v))}for(l.length=0,l=this._pending,u=0;u<l.length;u++)v=l[u],(!this.checkQueue||this.checkQueue&&h.indexOf(v)===-1)&&(h.push(v),this.emit(r.PROCESS_QUEUE_ADD,v));return l.length=0,this._toProcess=0,h},getActive:function(){return this._active},length:{get:function(){return this._active.length}},destroy:function(){this._toProcess=0,this._pending=[],this._active=[],this._destroy=[]}});e.exports=a},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function i(o,r){return parseInt(o.getAttribute(r),10)}var n=function(o,r,a,l,h){a===void 0&&(a=0),l===void 0&&(l=0);var u=r.cutX,v=r.cutY,d=r.source.width,c=r.source.height,p=r.sourceIndex,g={},m=o.getElementsByTagName("info")[0],x=o.getElementsByTagName("common")[0];g.font=m.getAttribute("face"),g.size=i(m,"size"),g.lineHeight=i(x,"lineHeight")+l,g.chars={};var y=o.getElementsByTagName("char"),T=r!==void 0&&r.trimmed;if(T)var C=r.height,S=r.width;for(var E=0;E<y.length;E++){var M=y[E],O=i(M,"id"),L=String.fromCharCode(O),R=i(M,"x"),w=i(M,"y"),D=i(M,"width"),B=i(M,"height");T&&(R<S&&(S=R),w<C&&(C=w)),T&&C!==0&&S!==0&&(R-=r.x,w-=r.y);var N=(u+R)/d,z=(v+w)/c,X=(u+R+D)/d,k=(v+w+B)/c;if(g.chars[O]={x:R,y:w,width:D,height:B,centerX:Math.floor(D/2),centerY:Math.floor(B/2),xOffset:i(M,"xoffset"),yOffset:i(M,"yoffset"),xAdvance:i(M,"xadvance")+a,data:{},kerning:{},u0:N,v0:z,u1:X,v1:k},h&&D!==0&&B!==0){var K=h.add(L,p,R,w,D,B);K&&K.setUVs(D,B,N,z,X,k)}}var b=o.getElementsByTagName("kerning");for(E=0;E<b.length;E++){var I=b[E],G=i(I,"first"),Y=i(I,"second"),U=i(I,"amount");g.chars[Y].kerning[G]=U}return g};e.exports=n},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1049),o=i(440),r=i(0),a=i(11),l=i(109),h=i(15),u=i(110),v=new r({Extends:h,Mixins:[a.Alpha,a.BlendMode,a.Depth,a.Mask,a.Pipeline,a.ScrollFactor,a.Size,a.Texture,a.Transform,a.Visible,n],initialize:function(c,p,g,m,x){h.call(this,c,"Blitter"),this.setTexture(m,x),this.setPosition(p,g),this.initPipeline(),this.children=new u,this.renderList=[],this.dirty=!1},create:function(d,c,p,g,m){g===void 0&&(g=!0),m===void 0&&(m=this.children.length),p===void 0?p=this.frame:p instanceof l||(p=this.texture.get(p));var x=new o(this,d,c,p,g);return this.children.addAt(x,m,!1),this.dirty=!0,x},createFromCallback:function(d,c,p,g){for(var m=this.createMultiple(c,p,g),x=0;x<m.length;x++){var y=m[x];d.call(this,y,x)}return m},createMultiple:function(d,c,p){c===void 0&&(c=this.frame.name),p===void 0&&(p=!0),Array.isArray(c)||(c=[c]);var g=[],m=this;return c.forEach(function(x){for(var y=0;y<d;y++)g.push(m.create(0,0,x,p))}),g},childCanRender:function(d){return d.visible&&d.alpha>0},getRenderList:function(){return this.dirty&&(this.renderList=this.children.list.filter(this.childCanRender,this),this.dirty=!1),this.renderList},clear:function(){this.children.removeAll(),this.dirty=!0},preDestroy:function(){this.children.destroy(),this.renderList=[]}});e.exports=v},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(208),o=i(35),r=i(0),a=i(11),l=i(75),h=i(15),u=i(10),v=i(1052),d=i(441),c=i(3),p=new r({Extends:h,Mixins:[a.AlphaSingle,a.BlendMode,a.ComputedSize,a.Depth,a.Mask,a.Pipeline,a.Transform,a.Visible,v],initialize:function(m,x,y,T){h.call(this,m,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new a.TransformMatrix,this.tempTransformMatrix=new a.TransformMatrix,this._sortKey="",this._sysEvents=m.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.initPipeline(),this.setPosition(x,y),this.clearAlpha(),this.setBlendMode(o.SKIP_CHECK),T&&this.add(T)},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this.width*.5}},displayOriginY:{get:function(){return this.height*.5}},setExclusive:function(g){return g===void 0&&(g=!0),this.exclusive=g,this},getBounds:function(g){if(g===void 0&&(g=new u),g.setTo(this.x,this.y,0,0),this.parentContainer){var m=this.parentContainer.getBoundsTransformMatrix(),x=m.transformPoint(this.x,this.y);g.setTo(x.x,x.y,0,0)}if(this.list.length>0){var y=this.list,T=new u,C=!1;g.setEmpty();for(var S=0;S<y.length;S++){var E=y[S];E.getBounds&&(E.getBounds(T),C?d(T,g,g):(g.setTo(T.x,T.y,T.width,T.height),C=!0))}}return g},addHandler:function(g){g.once(l.DESTROY,this.remove,this),this.exclusive&&(g.parentContainer&&g.parentContainer.remove(g),g.removeFromDisplayList(),g.parentContainer=this)},removeHandler:function(g){g.off(l.DESTROY,this.remove),this.exclusive&&(g.parentContainer=null,g.addToDisplayList())},pointToContainer:function(g,m){m===void 0&&(m=new c),this.parentContainer?this.parentContainer.pointToContainer(g,m):m=new c(g.x,g.y);var x=this.tempTransformMatrix;return x.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),x.invert(),x.transformPoint(g.x,g.y,m),m},getBoundsTransformMatrix:function(){return this.getWorldTransformMatrix(this.tempTransformMatrix,this.localTransform)},add:function(g){return n.Add(this.list,g,this.maxSize,this.addHandler,this),this},addAt:function(g,m){return n.AddAt(this.list,g,m,this.maxSize,this.addHandler,this),this},getAt:function(g){return this.list[g]},getIndex:function(g){return this.list.indexOf(g)},sort:function(g,m){return g?(m===void 0&&(m=function(x,y){return x[g]-y[g]}),n.StableSort(this.list,m),this):this},getByName:function(g){return n.GetFirst(this.list,"name",g)},getRandom:function(g,m){return n.GetRandom(this.list,g,m)},getFirst:function(g,m,x,y){return n.GetFirst(this.list,g,m,x,y)},getAll:function(g,m,x,y){return n.GetAll(this.list,g,m,x,y)},count:function(g,m,x,y){return n.CountAllMatching(this.list,g,m,x,y)},swap:function(g,m){return n.Swap(this.list,g,m),this},moveTo:function(g,m){return n.MoveTo(this.list,g,m),this},moveAbove:function(g,m){return n.MoveAbove(this.list,g,m),this},moveBelow:function(g,m){return n.MoveBelow(this.list,g,m),this},remove:function(g,m){var x=n.Remove(this.list,g,this.removeHandler,this);if(m&&x){Array.isArray(x)||(x=[x]);for(var y=0;y<x.length;y++)x[y].destroy()}return this},removeAt:function(g,m){var x=n.RemoveAt(this.list,g,this.removeHandler,this);return m&&x&&x.destroy(),this},removeBetween:function(g,m,x){var y=n.RemoveBetween(this.list,g,m,this.removeHandler,this);if(x)for(var T=0;T<y.length;T++)y[T].destroy();return this},removeAll:function(g){var m=n.RemoveBetween(this.list,0,this.list.length,this.removeHandler,this);if(g)for(var x=0;x<m.length;x++)m[x].destroy();return this},bringToTop:function(g){return n.BringToTop(this.list,g),this},sendToBack:function(g){return n.SendToBack(this.list,g),this},moveUp:function(g){return n.MoveUp(this.list,g),this},moveDown:function(g){return n.MoveDown(this.list,g),this},reverse:function(){return this.list.reverse(),this},shuffle:function(){return n.Shuffle(this.list),this},replace:function(g,m,x){var y=n.Replace(this.list,g,m);return y&&(this.addHandler(m),this.removeHandler(g),x&&g.destroy()),this},exists:function(g){return this.list.indexOf(g)>-1},setAll:function(g,m,x,y){return n.SetAll(this.list,g,m,x,y),this},each:function(g,m){var x=[null],y,T=this.list.slice(),C=T.length;for(y=2;y<arguments.length;y++)x.push(arguments[y]);for(y=0;y<C;y++)x[0]=T[y],g.apply(m,x);return this},iterate:function(g,m){var x=[null],y;for(y=2;y<arguments.length;y++)x.push(arguments[y]);for(y=0;y<this.list.length;y++)x[0]=this.list[y],g.apply(m,x);return this},setScrollFactor:function(g,m,x){return m===void 0&&(m=g),x===void 0&&(x=!1),this.scrollFactorX=g,this.scrollFactorY=m,x&&(n.SetAll(this.list,"scrollFactorX",g),n.SetAll(this.list,"scrollFactorY",m)),this},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.tempTransformMatrix.destroy(),this.list=[]}});e.exports=p},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(148),o=i(0),r=i(1057),a=new o({Extends:n,Mixins:[r],initialize:function(h,u,v,d,c,p,g){n.call(this,h,u,v,d,c,p,g),this.type="DynamicBitmapText",this.scrollX=0,this.scrollY=0,this.cropWidth=0,this.cropHeight=0,this.displayCallback,this.callbackData={parent:this,color:0,tint:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},index:0,charCode:0,x:0,y:0,scale:0,rotation:0,data:0}},setSize:function(l,h){return this.cropWidth=l,this.cropHeight=h,this},setDisplayCallback:function(l){return this.displayCallback=l,this},setScrollX:function(l){return this.scrollX=l,this},setScrollY:function(l){return this.scrollY=l,this}});e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(133),o=i(0),r=i(217),a=i(303),l=i(304),h=i(305),u=i(309),v=i(167),d=i(312),c=i(313),p=i(314),g=i(111),m=i(15),x=i(2),y=i(6),T=i(14),C=i(1063),S=new o({Extends:m,Mixins:[a,l,h,u,v,c,p,d,C],initialize:function(M,O){var L=y(O,"x",0),R=y(O,"y",0);m.call(this,M,"Graphics"),this.setPosition(L,R),this.initPipeline(),this.displayOriginX=0,this.displayOriginY=0,this.commandBuffer=[],this.defaultFillColor=-1,this.defaultFillAlpha=1,this.defaultStrokeWidth=1,this.defaultStrokeColor=-1,this.defaultStrokeAlpha=1,this._lineWidth=1,this.setDefaultStyles(O)},setDefaultStyles:function(E){return y(E,"lineStyle",null)&&(this.defaultStrokeWidth=y(E,"lineStyle.width",1),this.defaultStrokeColor=y(E,"lineStyle.color",16777215),this.defaultStrokeAlpha=y(E,"lineStyle.alpha",1),this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha)),y(E,"fillStyle",null)&&(this.defaultFillColor=y(E,"fillStyle.color",16777215),this.defaultFillAlpha=y(E,"fillStyle.alpha",1),this.fillStyle(this.defaultFillColor,this.defaultFillAlpha)),this},lineStyle:function(E,M,O){return O===void 0&&(O=1),this.commandBuffer.push(r.LINE_STYLE,E,M,O),this._lineWidth=E,this},fillStyle:function(E,M){return M===void 0&&(M=1),this.commandBuffer.push(r.FILL_STYLE,E,M),this},fillGradientStyle:function(E,M,O,L,R,w,D,B){return R===void 0&&(R=1),w===void 0&&(w=R),D===void 0&&(D=R),B===void 0&&(B=R),this.commandBuffer.push(r.GRADIENT_FILL_STYLE,R,w,D,B,E,M,O,L),this},lineGradientStyle:function(E,M,O,L,R,w){return w===void 0&&(w=1),this.commandBuffer.push(r.GRADIENT_LINE_STYLE,E,w,M,O,L,R),this},beginPath:function(){return this.commandBuffer.push(r.BEGIN_PATH),this},closePath:function(){return this.commandBuffer.push(r.CLOSE_PATH),this},fillPath:function(){return this.commandBuffer.push(r.FILL_PATH),this},fill:function(){return this.commandBuffer.push(r.FILL_PATH),this},strokePath:function(){return this.commandBuffer.push(r.STROKE_PATH),this},stroke:function(){return this.commandBuffer.push(r.STROKE_PATH),this},fillCircleShape:function(E){return this.fillCircle(E.x,E.y,E.radius)},strokeCircleShape:function(E){return this.strokeCircle(E.x,E.y,E.radius)},fillCircle:function(E,M,O){return this.beginPath(),this.arc(E,M,O,0,T.PI2),this.fillPath(),this},strokeCircle:function(E,M,O){return this.beginPath(),this.arc(E,M,O,0,T.PI2),this.strokePath(),this},fillRectShape:function(E){return this.fillRect(E.x,E.y,E.width,E.height)},strokeRectShape:function(E){return this.strokeRect(E.x,E.y,E.width,E.height)},fillRect:function(E,M,O,L){return this.commandBuffer.push(r.FILL_RECT,E,M,O,L),this},strokeRect:function(E,M,O,L){var R=this._lineWidth/2,w=E-R,D=E+R;return this.beginPath(),this.moveTo(E,M),this.lineTo(E,M+L),this.strokePath(),this.beginPath(),this.moveTo(E+O,M),this.lineTo(E+O,M+L),this.strokePath(),this.beginPath(),this.moveTo(w,M),this.lineTo(D+O,M),this.strokePath(),this.beginPath(),this.moveTo(w,M+L),this.lineTo(D+O,M+L),this.strokePath(),this},fillRoundedRect:function(E,M,O,L,R){R===void 0&&(R=20);var w=R,D=R,B=R,N=R;return typeof R!="number"&&(w=x(R,"tl",20),D=x(R,"tr",20),B=x(R,"bl",20),N=x(R,"br",20)),this.beginPath(),this.moveTo(E+w,M),this.lineTo(E+O-D,M),this.arc(E+O-D,M+D,D,-T.TAU,0),this.lineTo(E+O,M+L-N),this.arc(E+O-N,M+L-N,N,0,T.TAU),this.lineTo(E+B,M+L),this.arc(E+B,M+L-B,B,T.TAU,Math.PI),this.lineTo(E,M+w),this.arc(E+w,M+w,w,-Math.PI,-T.TAU),this.fillPath(),this},strokeRoundedRect:function(E,M,O,L,R){R===void 0&&(R=20);var w=R,D=R,B=R,N=R;return typeof R!="number"&&(w=x(R,"tl",20),D=x(R,"tr",20),B=x(R,"bl",20),N=x(R,"br",20)),this.beginPath(),this.moveTo(E+w,M),this.lineTo(E+O-D,M),this.moveTo(E+O-D,M),this.arc(E+O-D,M+D,D,-T.TAU,0),this.lineTo(E+O,M+L-N),this.moveTo(E+O,M+L-N),this.arc(E+O-N,M+L-N,N,0,T.TAU),this.lineTo(E+B,M+L),this.moveTo(E+B,M+L),this.arc(E+B,M+L-B,B,T.TAU,Math.PI),this.lineTo(E,M+w),this.moveTo(E,M+w),this.arc(E+w,M+w,w,-Math.PI,-T.TAU),this.strokePath(),this},fillPointShape:function(E,M){return this.fillPoint(E.x,E.y,M)},fillPoint:function(E,M,O){return!O||O<1?O=1:(E-=O/2,M-=O/2),this.commandBuffer.push(r.FILL_RECT,E,M,O,O),this},fillTriangleShape:function(E){return this.fillTriangle(E.x1,E.y1,E.x2,E.y2,E.x3,E.y3)},strokeTriangleShape:function(E){return this.strokeTriangle(E.x1,E.y1,E.x2,E.y2,E.x3,E.y3)},fillTriangle:function(E,M,O,L,R,w){return this.commandBuffer.push(r.FILL_TRIANGLE,E,M,O,L,R,w),this},strokeTriangle:function(E,M,O,L,R,w){return this.commandBuffer.push(r.STROKE_TRIANGLE,E,M,O,L,R,w),this},strokeLineShape:function(E){return this.lineBetween(E.x1,E.y1,E.x2,E.y2)},lineBetween:function(E,M,O,L){return this.beginPath(),this.moveTo(E,M),this.lineTo(O,L),this.strokePath(),this},lineTo:function(E,M){return this.commandBuffer.push(r.LINE_TO,E,M),this},moveTo:function(E,M){return this.commandBuffer.push(r.MOVE_TO,E,M),this},strokePoints:function(E,M,O,L){M===void 0&&(M=!1),O===void 0&&(O=!1),L===void 0&&(L=E.length),this.beginPath(),this.moveTo(E[0].x,E[0].y);for(var R=1;R<L;R++)this.lineTo(E[R].x,E[R].y);return M&&this.lineTo(E[0].x,E[0].y),O&&this.closePath(),this.strokePath(),this},fillPoints:function(E,M,O,L){M===void 0&&(M=!1),O===void 0&&(O=!1),L===void 0&&(L=E.length),this.beginPath(),this.moveTo(E[0].x,E[0].y);for(var R=1;R<L;R++)this.lineTo(E[R].x,E[R].y);return M&&this.lineTo(E[0].x,E[0].y),O&&this.closePath(),this.fillPath(),this},strokeEllipseShape:function(E,M){M===void 0&&(M=32);var O=E.getPoints(M);return this.strokePoints(O,!0)},strokeEllipse:function(E,M,O,L,R){R===void 0&&(R=32);var w=new g(E,M,O,L),D=w.getPoints(R);return this.strokePoints(D,!0)},fillEllipseShape:function(E,M){M===void 0&&(M=32);var O=E.getPoints(M);return this.fillPoints(O,!0)},fillEllipse:function(E,M,O,L,R){R===void 0&&(R=32);var w=new g(E,M,O,L),D=w.getPoints(R);return this.fillPoints(D,!0)},arc:function(E,M,O,L,R,w,D){return w===void 0&&(w=!1),D===void 0&&(D=0),this.commandBuffer.push(r.ARC,E,M,O,L,R,w,D),this},slice:function(E,M,O,L,R,w,D){return w===void 0&&(w=!1),D===void 0&&(D=0),this.commandBuffer.push(r.BEGIN_PATH),this.commandBuffer.push(r.MOVE_TO,E,M),this.commandBuffer.push(r.ARC,E,M,O,L,R,w,D),this.commandBuffer.push(r.CLOSE_PATH),this},save:function(){return this.commandBuffer.push(r.SAVE),this},restore:function(){return this.commandBuffer.push(r.RESTORE),this},translateCanvas:function(E,M){return this.commandBuffer.push(r.TRANSLATE,E,M),this},scaleCanvas:function(E,M){return this.commandBuffer.push(r.SCALE,E,M),this},rotateCanvas:function(E){return this.commandBuffer.push(r.ROTATE,E),this},clear:function(){return this.commandBuffer.length=0,this.defaultFillColor>-1&&this.fillStyle(this.defaultFillColor,this.defaultFillAlpha),this.defaultStrokeColor>-1&&this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha),this},generateTexture:function(E,M,O){var L=this.scene.sys,R=L.game.renderer;M===void 0&&(M=L.scale.width),O===void 0&&(O=L.scale.height),S.TargetCamera.setScene(this.scene),S.TargetCamera.setViewport(0,0,M,O),S.TargetCamera.scrollX=this.x,S.TargetCamera.scrollY=this.y;var w,D;if(typeof E=="string")if(L.textures.exists(E)){w=L.textures.get(E);var B=w.getSourceImage();B instanceof HTMLCanvasElement&&(D=B.getContext("2d"))}else w=L.textures.createCanvas(E,M,O),D=w.getSourceImage().getContext("2d");else E instanceof HTMLCanvasElement&&(D=E.getContext("2d"));return D&&(this.renderCanvas(R,this,S.TargetCamera,null,D,!1),w&&w.refresh()),this},preDestroy:function(){this.commandBuffer=[]}});S.TargetCamera=new n,e.exports=S},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ARC:0,BEGIN_PATH:1,CLOSE_PATH:2,FILL_RECT:3,LINE_TO:4,MOVE_TO:5,LINE_STYLE:6,FILL_STYLE:7,FILL_PATH:8,STROKE_PATH:9,FILL_TRIANGLE:10,STROKE_TRIANGLE:11,SAVE:14,RESTORE:15,TRANSLATE:16,SCALE:17,ROTATE:18,GRADIENT_FILL_STYLE:21,GRADIENT_LINE_STYLE:22}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4),o=function(r,a,l){l===void 0&&(l=new n);var h=r.width/2,u=r.height/2;return l.x=r.x+h*Math.cos(a),l.y=r.y+u*Math.sin(a),l};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(35),o=i(0),r=i(11),a=i(176),l=i(101),h=i(9),u=i(75),v=i(110),d=i(1071),c=i(20),p=i(79),g=new o({Extends:v,Mixins:[r.AlphaSingle,r.BlendMode,r.Depth,r.Mask,r.Pipeline,r.Visible,h,d],initialize:function(x,y){v.call(this,x),h.call(this),this.scene=x,this.displayList=null,this.type="Layer",this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.systems=x.sys,this.events=x.sys.events,this.sortChildrenFlag=!1,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.initPipeline(),this.clearAlpha(),this.setBlendMode(n.SKIP_CHECK),y&&this.add(y),x.sys.queueDepthSort()},setActive:function(m){return this.active=m,this},setName:function(m){return this.name=m,this},setState:function(m){return this.state=m,this},setDataEnabled:function(){return this.data||(this.data=new l(this)),this},setData:function(m,x){return this.data||(this.data=new l(this)),this.data.set(m,x),this},incData:function(m,x){return this.data||(this.data=new l(this)),this.data.inc(m,x),this},toggleData:function(m){return this.data||(this.data=new l(this)),this.data.toggle(m),this},getData:function(m){return this.data||(this.data=new l(this)),this.data.get(m)},setInteractive:function(){return this},disableInteractive:function(){return this},removeInteractive:function(){return this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return a(this)},willRender:function(m){return!(this.renderFlags!==15||this.list.length===0||this.cameraFilter!==0&&this.cameraFilter&m.id)},getIndexList:function(){for(var m=this,x=this.parentContainer,y=[];x&&(y.unshift(x.getIndex(m)),m=x,x.parentContainer);)x=x.parentContainer;return y.unshift(this.displayList.getIndex(m)),y},addChildCallback:function(m){m.displayList&&m.displayList!==this&&m.removeFromDisplayList(),m.displayList||(this.queueDepthSort(),m.displayList=this,m.emit(u.ADDED_TO_SCENE,m,this.scene),this.events.emit(c.ADDED_TO_SCENE,m,this.scene))},removeChildCallback:function(m){this.queueDepthSort(),m.displayList=null,m.emit(u.REMOVED_FROM_SCENE,m,this.scene),this.events.emit(c.REMOVED_FROM_SCENE,m,this.scene)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(p(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(m,x){return m._depth-x._depth},getChildren:function(){return this.list},destroy:function(){if(!(!this.scene||this.ignoreDestroy)){this.emit(u.DESTROY,this);for(var m=this.list.length;m--;)this.list[m].destroy();this.removeAllListeners(),this.resetPostPipeline(!0),this.displayList&&(this.displayList.remove(this,!0),this.displayList.queueDepthSort()),this.data&&(this.data.destroy(),this.data=void 0),this.active=!1,this.visible=!1,this.list=void 0,this.scene=void 0,this.displayList=void 0,this.systems=void 0,this.events=void 0}}});e.exports=g},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(11),r=i(15),a=i(450),l=i(110),h=i(452),u=i(1075),v=new n({Extends:r,Mixins:[o.Depth,o.Mask,o.Pipeline,o.Transform,o.Visible,u],initialize:function(c,p,g,m){if(r.call(this,c,"ParticleEmitterManager"),this.blendMode=-1,this.timeScale=1,this.texture=null,this.frame=null,this.frameNames=[],g!==null&&(typeof g=="object"||Array.isArray(g))&&(m=g,g=null),this.setTexture(p,g),this.initPipeline(),this.emitters=new l(this),this.wells=new l(this),m){Array.isArray(m)||(m=[m]);for(var x=0;x<m.length;x++)this.createEmitter(m[x])}},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},setTexture:function(d,c){return this.texture=this.scene.sys.textures.get(d),this.setFrame(c)},setFrame:function(d){this.frame=this.texture.get(d);var c=this.texture.getFramesFromTextureSource(this.frame.sourceIndex),p=[];return c.forEach(function(g){p.push(g.name)}),this.frameNames=p,this.defaultFrame=this.frame,this},setEmitterFrames:function(d,c){Array.isArray(d)||(d=[d]);var p=c.frames;p.length=0;for(var g=0;g<d.length;g++){var m=d[g];this.frameNames.indexOf(m)!==-1&&p.push(this.texture.get(m))}return p.length>0?c.defaultFrame=p[0]:c.defaultFrame=this.defaultFrame,this},addEmitter:function(d){return this.emitters.add(d)},createEmitter:function(d){return this.addEmitter(new h(this,d))},removeEmitter:function(d){return this.emitters.remove(d,!0)},addGravityWell:function(d){return this.wells.add(d)},createGravityWell:function(d){return this.addGravityWell(new a(d))},emitParticle:function(d,c,p){for(var g=this.emitters.list,m=0;m<g.length;m++){var x=g[m];x.active&&x.emitParticle(d,c,p)}return this},emitParticleAt:function(d,c,p){return this.emitParticle(p,d,c)},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},getProcessors:function(){return this.wells.getAll("active",!0)},preUpdate:function(d,c){c*=this.timeScale;for(var p=this.emitters.list,g=0;g<p.length;g++){var m=p[g];m.active&&m.preUpdate(d,c)}},setAlpha:function(){},setScrollFactor:function(){},setBlendMode:function(){}});e.exports=v},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(35),o=i(133),r=i(31),a=i(0),l=i(11),h=i(33),u=i(109),v=i(15),d=i(1),c=i(92),p=i(1079),g=i(141),m=i(12),x=i(222),y=new a({Extends:v,Mixins:[l.Alpha,l.BlendMode,l.ComputedSize,l.Crop,l.Depth,l.Flip,l.GetBounds,l.Mask,l.Origin,l.Pipeline,l.ScrollFactor,l.Tint,l.Transform,l.Visible,p],initialize:function(C,S,E,M,O,L,R){S===void 0&&(S=0),E===void 0&&(E=0),M===void 0&&(M=32),O===void 0&&(O=32),v.call(this,C,"RenderTexture"),this.renderer=C.sys.renderer,this.textureManager=C.sys.textures,this.globalTint=16777215,this.globalAlpha=1,this.canvas=null,this.dirty=!1,this._crop=this.resetCropObject(),this.texture=null,this.frame=null,this._saved=!1,L===void 0?(this.canvas=r.create2D(this,M,O),this.texture=C.sys.textures.addCanvas(x(),this.canvas),this.frame=this.texture.get()):(this.texture=C.sys.textures.get(L),this.frame=this.texture.get(R),this.canvas=this.frame.source.image,this._saved=!0,this.dirty=!0,this.width=this.frame.cutWidth,this.height=this.frame.cutHeight),this.context=this.canvas.getContext("2d"),this._eraseMode=!1,this.camera=new o(0,0,M,O),this.renderTarget=null;var w=this.renderer;w?w.type===h.WEBGL?(this.drawGameObject=this.batchGameObjectWebGL,this.renderTarget=new g(w,M,O,1,0,!1)):w.type===h.CANVAS&&(this.drawGameObject=this.batchGameObjectCanvas):this.drawGameObject=d,this.camera.setScene(C),this.setPosition(S,E),L===void 0&&this.setSize(M,O),this.setOrigin(0,0),this.initPipeline(c.SINGLE_PIPELINE)},setSize:function(T,C){return this.resize(T,C)},resize:function(T,C){C===void 0&&(C=T);var S=this.frame;if(T!==this.width||C!==this.height){if(S.name==="__BASE"){this.canvas.width=T,this.canvas.height=C,this.texture.width=T,this.texture.height=C;var E=this.renderTarget;E&&(E.resize(T,C),S.glTexture=E.texture,S.source.isRenderTexture=!0,S.source.isGLTexture=!0,S.source.glTexture=E.texture),this.camera.setSize(T,C),S.source.width=T,S.source.height=C,S.setSize(T,C),this.width=T,this.height=C}}else{var M=this.texture.getSourceImage();S.cutX+T>M.width&&(T=M.width-S.cutX),S.cutY+C>M.height&&(C=M.height-S.cutY),S.setSize(T,C,S.cutX,S.cutY)}this.updateDisplayOrigin();var O=this.input;return O&&!O.customHitArea&&(O.hitArea.width=T,O.hitArea.height=C),this},setGlobalTint:function(T){return this.globalTint=T,this},setGlobalAlpha:function(T){return this.globalAlpha=T,this},saveTexture:function(T){return this.textureManager.renameTexture(this.texture.key,T),this._saved=!0,this.texture},fill:function(T,C,S,E,M,O){var L=this.frame,R=this.camera,w=this.renderer;C===void 0&&(C=1),S===void 0&&(S=0),E===void 0&&(E=0),M===void 0&&(M=L.cutWidth),O===void 0&&(O=L.cutHeight);var D=(T>>16&255)/255,B=(T>>8&255)/255,N=(T&255)/255,z=this.renderTarget;if(R.preRender(),z){z.bind(!0);var X=this.pipeline;X.manager.set(X);var k=z.width,K=z.height,b=w.width,I=w.height,G=b/k,Y=I/K;X.drawFillRect(S*G,E*Y,M*G,O*Y,m.getTintFromFloats(N,B,D,1),C),z.unbind(!0)}else{var U=this.context;w.setContext(U),U.fillStyle="rgba("+D+","+B+","+N+","+C+")",U.fillRect(S+L.cutX,E+L.cutY,M,O),w.setContext()}return this.dirty=!0,this},clear:function(){if(this.dirty){var T=this.renderTarget;if(T)T.clear();else{var C=this.context;C.save(),C.setTransform(1,0,0,1,0,0),C.clearRect(this.frame.cutX,this.frame.cutY,this.frame.cutWidth,this.frame.cutHeight),C.restore()}this.dirty=!1}return this},erase:function(T,C,S){return this._eraseMode=!0,this.draw(T,C,S,1,16777215),this._eraseMode=!1,this},draw:function(T,C,S,E,M){return this.beginDraw(),this.batchDraw(T,C,S,E,M),this.endDraw(),this},drawFrame:function(T,C,S,E,M,O){return this.beginDraw(),this.batchDrawFrame(T,C,S,E,M,O),this.endDraw(),this},beginDraw:function(){var T=this.camera,C=this.renderer,S=this.renderTarget;return T.preRender(),S?C.beginCapture(S.width,S.height):C.setContext(this.context),this},batchDraw:function(T,C,S,E,M){return E===void 0&&(E=this.globalAlpha),M===void 0?M=(this.globalTint>>16)+(this.globalTint&65280)+((this.globalTint&255)<<16):M=(M>>16)+(M&65280)+((M&255)<<16),Array.isArray(T)||(T=[T]),this.batchList(T,C,S,E,M),this},batchDrawFrame:function(T,C,S,E,M,O){S===void 0&&(S=0),E===void 0&&(E=0),M===void 0&&(M=this.globalAlpha),O===void 0?O=(this.globalTint>>16)+(this.globalTint&65280)+((this.globalTint&255)<<16):O=(O>>16)+(O&65280)+((O&255)<<16);var L=this.textureManager.getFrame(T,C);return L&&(this.renderTarget?this.pipeline.batchTextureFrame(L,S,E,O,M,this.camera.matrix,null):this.batchTextureFrame(L,S+this.frame.cutX,E+this.frame.cutY,M,O)),this},endDraw:function(T){T===void 0&&(T=this._eraseMode);var C=this.renderer,S=this.renderTarget;if(S){var E=C.endCapture(),M=C.pipelines.setUtility();M.blitFrame(E,S,1,!1,!1,T),C.resetScissor(),C.resetViewport()}else C.setContext();return this.dirty=!0,this},batchList:function(T,C,S,E,M){for(var O=0;O<T.length;O++){var L=T[O];!L||L===this||(L.renderWebGL||L.renderCanvas?this.drawGameObject(L,C,S):L.isParent||L.list?this.batchGroup(L.getChildren(),C,S):typeof L=="string"?this.batchTextureFrameKey(L,null,C,S,E,M):L instanceof u?this.batchTextureFrame(L,C,S,E,M):Array.isArray(L)&&this.batchList(L,C,S,E,M))}},batchGroup:function(T,C,S){C===void 0&&(C=0),S===void 0&&(S=0),C+=this.frame.cutX,S+=this.frame.cutY;for(var E=0;E<T.length;E++){var M=T[E];if(M.willRender(this.camera)){var O=M.x+C,L=M.y+S;this.drawGameObject(M,O,L)}}},batchGameObjectWebGL:function(T,C,S){C===void 0&&(C=T.x),S===void 0&&(S=T.y);var E=T.x,M=T.y;T.setPosition(C+this.frame.cutX,S+this.frame.cutY),T.renderDirect?T.renderDirect(this.renderer,T,this.camera):T.renderWebGL(this.renderer,T,this.camera),T.setPosition(E,M)},batchGameObjectCanvas:function(T,C,S){C===void 0&&(C=T.x),S===void 0&&(S=T.y);var E=T.x,M=T.y;if(this._eraseMode){var O=T.blendMode;T.blendMode=n.ERASE}T.setPosition(C+this.frame.cutX,S+this.frame.cutY),T.renderCanvas(this.renderer,T,this.camera,null),T.setPosition(E,M),this._eraseMode&&(T.blendMode=O)},batchTextureFrameKey:function(T,C,S,E,M,O){var L=this.textureManager.getFrame(T,C);L&&this.batchTextureFrame(L,S,E,M,O)},batchTextureFrame:function(T,C,S,E,M){C===void 0&&(C=0),S===void 0&&(S=0),C+=this.frame.cutX,S+=this.frame.cutY;var O=this.renderTarget;if(O)this.pipeline.batchTextureFrame(T,C,S,M,E,this.camera.matrix,null);else{var L=this.context,R=T.canvasData,w=T.source.image,D=this.camera.matrix;L.save(),L.globalCompositeOperation=this._eraseMode?"destination-out":"source-over",L.globalAlpha=E,D.setToContext(L),L.drawImage(w,R.x,R.y,R.width,R.height,C,S,R.width,R.height),L.restore()}},snapshotArea:function(T,C,S,E,M,O,L){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,M,!1,T,C,S,E,O,L):this.renderer.snapshotCanvas(this.canvas,M,!1,T,C,S,E,O,L),this},snapshot:function(T,C,S){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,T,!1,0,0,this.width,this.height,C,S):this.renderer.snapshotCanvas(this.canvas,T,!1,0,0,this.width,this.height,C,S),this},snapshotPixel:function(T,C,S){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,S,!0,T,C):this.renderer.snapshotCanvas(this.canvas,S,!0,T,C),this},preDestroy:function(){this._saved||(r.remove(this.canvas),this.renderTarget&&this.renderTarget.destroy(),this.texture.destroy(),this.camera.destroy(),this.canvas=null,this.context=null,this.texture=null)}});e.exports=y},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var o=Math.random()*16|0,r=n==="x"?o:o&3|8;return r.toString(16)})};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(164),o=i(0),r=i(11),a=i(15),l=i(92),h=i(1085),u=i(3),v=new o({Extends:a,Mixins:[r.AlphaSingle,r.BlendMode,r.Depth,r.Flip,r.Mask,r.Pipeline,r.Size,r.Texture,r.Transform,r.Visible,r.ScrollFactor,h],initialize:function(c,p,g,m,x,y,T,C,S){m===void 0&&(m="__DEFAULT"),y===void 0&&(y=2),T===void 0&&(T=!0),a.call(this,c,"Rope"),this.anims=new n(this),this.points=y,this.vertices,this.uv,this.colors,this.alphas,this.tintFill=m==="__DEFAULT",this.dirty=!1,this.horizontal=T,this._flipX=!1,this._flipY=!1,this._perp=new u,this.debugCallback=null,this.debugGraphic=null,this.setTexture(m,x),this.setPosition(p,g),this.setSizeToFrame(),this.initPipeline(l.ROPE_PIPELINE),Array.isArray(y)&&this.resizeArrays(y.length),this.setPoints(y,C,S),this.updateVertices()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(d,c){var p=this.anims.currentFrame;this.anims.update(d,c),this.anims.currentFrame!==p&&(this.updateUVs(),this.updateVertices())},play:function(d,c,p){return this.anims.play(d,c,p),this},setDirty:function(){return this.dirty=!0,this},setHorizontal:function(d,c,p){return d===void 0&&(d=this.points.length),this.horizontal?this:(this.horizontal=!0,this.setPoints(d,c,p))},setVertical:function(d,c,p){return d===void 0&&(d=this.points.length),this.horizontal?(this.horizontal=!1,this.setPoints(d,c,p)):this},setTintFill:function(d){return d===void 0&&(d=!1),this.tintFill=d,this},setAlphas:function(d,c){var p=this.points.length;if(p<1)return this;var g=this.alphas;d===void 0?d=[1]:!Array.isArray(d)&&c===void 0&&(d=[d]);var m,x=0;if(c!==void 0)for(m=0;m<p;m++)x=m*2,g[x]=d,g[x+1]=c;else if(d.length===p)for(m=0;m<p;m++)x=m*2,g[x]=d[m],g[x+1]=d[m];else{var y=d[0];for(m=0;m<p;m++)x=m*2,d.length>x&&(y=d[x]),g[x]=y,d.length>x+1&&(y=d[x+1]),g[x+1]=y}return this},setColors:function(d){var c=this.points.length;if(c<1)return this;var p=this.colors;d===void 0?d=[16777215]:Array.isArray(d)||(d=[d]);var g,m=0;if(d.length===c)for(g=0;g<c;g++)m=g*2,p[m]=d[g],p[m+1]=d[g];else{var x=d[0];for(g=0;g<c;g++)m=g*2,d.length>m&&(x=d[m]),p[m]=x,d.length>m+1&&(x=d[m+1]),p[m+1]=x}return this},setPoints:function(d,c,p){if(d===void 0&&(d=2),typeof d=="number"){var g=d;g<2&&(g=2),d=[];var m,x,y;if(this.horizontal)for(y=-this.frame.halfWidth,x=this.frame.width/(g-1),m=0;m<g;m++)d.push({x:y+m*x,y:0});else for(y=-this.frame.halfHeight,x=this.frame.height/(g-1),m=0;m<g;m++)d.push({x:0,y:y+m*x})}var T=d.length,C=this.points.length;return T<1?(console.warn("Rope: Not enough points given"),this):(T===1&&(d.unshift({x:0,y:0}),T++),C!==T&&this.resizeArrays(T),this.points=d,this.updateUVs(),c!=null&&this.setColors(c),p!=null&&this.setAlphas(p),this)},updateUVs:function(){for(var d=this.uv,c=this.points.length,p=this.frame.u0,g=this.frame.v0,m=this.frame.u1,x=this.frame.v1,y=(m-p)/(c-1),T=(x-g)/(c-1),C=0;C<c;C++){var S=C*4,E,M,O,L;this.horizontal?(this._flipX?(E=m-C*y,O=m-C*y):(E=p+C*y,O=p+C*y),this._flipY?(M=x,L=g):(M=g,L=x)):(this._flipX?(E=p,O=m):(E=m,O=p),this._flipY?(M=x-C*T,L=x-C*T):(M=g+C*T,L=g+C*T)),d[S+0]=E,d[S+1]=M,d[S+2]=O,d[S+3]=L}return this},resizeArrays:function(d){var c=this.colors,p=this.alphas;this.vertices=new Float32Array(d*4),this.uv=new Float32Array(d*4),c=new Uint32Array(d*2),p=new Float32Array(d*2);for(var g=0;g<d*2;g++)c[g]=16777215,p[g]=1;return this.colors=c,this.alphas=p,this.dirty=!0,this},updateVertices:function(){var d=this._perp,c=this.points,p=this.vertices,g=c.length;if(this.dirty=!1,!(g<1)){for(var m,x=c[0],y=this.horizontal?this.frame.halfHeight:this.frame.halfWidth,T=0;T<g;T++){var C=c[T],S=T*4;T<g-1?m=c[T+1]:m=C,d.x=m.y-x.y,d.y=-(m.x-x.x);var E=d.length();d.x/=E,d.y/=E,d.x*=y,d.y*=y,p[S]=C.x+d.x,p[S+1]=C.y+d.y,p[S+2]=C.x-d.x,p[S+3]=C.y-d.y,x=C}return this}},setDebug:function(d,c){return this.debugGraphic=d,!d&&!c?this.debugCallback=null:c?this.debugCallback=c:this.debugCallback=this.renderDebugVerts,this},renderDebugVerts:function(d,c,p){var g=d.debugGraphic,m=p[0],x=p[1],y=p[2],T=p[3];g.lineBetween(m,x,y,T);for(var C=4;C<c;C+=4){var S=p[C+0],E=p[C+1],M=p[C+2],O=p[C+3];g.lineBetween(m,x,S,E),g.lineBetween(y,T,M,O),g.lineBetween(y,T,S,E),g.lineBetween(S,E,M,O),m=S,x=E,y=M,T=O}},preDestroy:function(){this.anims.destroy(),this.anims=void 0,this.points=null,this.vertices=null,this.uv=null,this.colors=null,this.alphas=null,this.debugCallback=null,this.debugGraphic=null},flipX:{get:function(){return this._flipX},set:function(d){return this._flipX=d,this.updateUVs()}},flipY:{get:function(){return this._flipY},set:function(d){return this._flipY=d,this.updateUVs()}}});e.exports=v},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(142),o=i(31),r=i(0),a=i(11),l=i(22),h=i(15),u=i(458),v=i(6),d=i(202),c=i(1088),p=i(459),g=new r({Extends:h,Mixins:[a.Alpha,a.BlendMode,a.ComputedSize,a.Crop,a.Depth,a.Flip,a.GetBounds,a.Mask,a.Origin,a.Pipeline,a.ScrollFactor,a.Tint,a.Transform,a.Visible,c],initialize:function(x,y,T,C,S){y===void 0&&(y=0),T===void 0&&(T=0),h.call(this,x,"Text"),this.renderer=x.sys.renderer,this.setPosition(y,T),this.setOrigin(0,0),this.initPipeline(),this.canvas=o.create(this),this.context=this.canvas.getContext("2d"),this.style=new p(this,S),this.autoRound=!0,this.splitRegExp=/(?:\r\n|\r|\n)/,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.lineSpacing=0,this.dirty=!1,this.style.resolution===0&&(this.style.resolution=1),this._crop=this.resetCropObject(),this.texture=x.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.initRTL(),this.setText(C),S&&S.padding&&this.setPadding(S.padding),S&&S.lineSpacing&&this.setLineSpacing(S.lineSpacing),x.sys.game.events.on(l.CONTEXT_RESTORED,function(){this.dirty=!0},this)},initRTL:function(){!this.style.rtl||(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",n(this.canvas,this.scene.sys.canvas),this.originX=1)},runWordWrap:function(m){var x=this.style;if(x.wordWrapCallback){var y=x.wordWrapCallback.call(x.wordWrapCallbackScope,m,this);return Array.isArray(y)&&(y=y.join(`
`)),y}else return x.wordWrapWidth?x.wordWrapUseAdvanced?this.advancedWordWrap(m,this.context,this.style.wordWrapWidth):this.basicWordWrap(m,this.context,this.style.wordWrapWidth):m},advancedWordWrap:function(m,x,y){for(var T="",C=m.replace(/ +/gi," ").split(this.splitRegExp),S=C.length,E=0;E<S;E++){var M=C[E],O="";M=M.replace(/^ *|\s*$/gi,"");var L=x.measureText(M).width;if(L<y){T+=M+`
`;continue}for(var R=y,w=M.split(" "),D=0;D<w.length;D++){var B=w[D],N=B+" ",z=x.measureText(N).width;if(z>R){if(D===0){for(var X=N;X.length&&(X=X.slice(0,-1),z=x.measureText(X).width,!(z<=R)););if(!X.length)throw new Error("This text's wordWrapWidth setting is less than a single character!");var k=B.substr(X.length);w[D]=k,O+=X}var K=w[D].length?D:D+1,b=w.slice(K).join(" ").replace(/[ \n]*$/gi,"");C[E+1]=b+" "+(C[E+1]||""),S=C.length;break}else O+=N,R-=z}T+=O.replace(/[ \n]*$/gi,"")+`
`}return T=T.replace(/[\s|\n]*$/gi,""),T},basicWordWrap:function(m,x,y){for(var T="",C=m.split(this.splitRegExp),S=C.length-1,E=x.measureText(" ").width,M=0;M<=S;M++){for(var O=y,L=C[M].split(" "),R=L.length-1,w=0;w<=R;w++){var D=L[w],B=x.measureText(D).width,N=B;w<R&&(N+=E),N>O&&w>0&&(T+=`
`,O=y),T+=D,w<R?(T+=" ",O-=N):O-=B}M<S&&(T+=`
`)}return T},getWrappedText:function(m){m===void 0&&(m=this._text),this.style.syncFont(this.canvas,this.context);var x=this.runWordWrap(m);return x.split(this.splitRegExp)},setText:function(m){return!m&&m!==0&&(m=""),Array.isArray(m)&&(m=m.join(`
`)),m!==this._text&&(this._text=m.toString(),this.updateText()),this},setStyle:function(m){return this.style.setStyle(m)},setFont:function(m){return this.style.setFont(m)},setFontFamily:function(m){return this.style.setFontFamily(m)},setFontSize:function(m){return this.style.setFontSize(m)},setFontStyle:function(m){return this.style.setFontStyle(m)},setFixedSize:function(m,x){return this.style.setFixedSize(m,x)},setBackgroundColor:function(m){return this.style.setBackgroundColor(m)},setFill:function(m){return this.style.setFill(m)},setColor:function(m){return this.style.setColor(m)},setStroke:function(m,x){return this.style.setStroke(m,x)},setShadow:function(m,x,y,T,C,S){return this.style.setShadow(m,x,y,T,C,S)},setShadowOffset:function(m,x){return this.style.setShadowOffset(m,x)},setShadowColor:function(m){return this.style.setShadowColor(m)},setShadowBlur:function(m){return this.style.setShadowBlur(m)},setShadowStroke:function(m){return this.style.setShadowStroke(m)},setShadowFill:function(m){return this.style.setShadowFill(m)},setWordWrapWidth:function(m,x){return this.style.setWordWrapWidth(m,x)},setWordWrapCallback:function(m,x){return this.style.setWordWrapCallback(m,x)},setAlign:function(m){return this.style.setAlign(m)},setResolution:function(m){return this.style.setResolution(m)},setLineSpacing:function(m){return this.lineSpacing=m,this.updateText()},setPadding:function(m,x,y,T){if(typeof m=="object"){var C=m,S=v(C,"x",null);S!==null?(m=S,y=S):(m=v(C,"left",0),y=v(C,"right",m));var E=v(C,"y",null);E!==null?(x=E,T=E):(x=v(C,"top",0),T=v(C,"bottom",x))}else m===void 0&&(m=0),x===void 0&&(x=m),y===void 0&&(y=m),T===void 0&&(T=x);return this.padding.left=m,this.padding.top=x,this.padding.right=y,this.padding.bottom=T,this.updateText()},setMaxLines:function(m){return this.style.setMaxLines(m)},updateText:function(){var m=this.canvas,x=this.context,y=this.style,T=y.resolution,C=y.metrics;y.syncFont(m,x);var S=this._text;(y.wordWrapWidth||y.wordWrapCallback)&&(S=this.runWordWrap(this._text));var E=S.split(this.splitRegExp),M=u(this,C,E),O=this.padding,L;y.fixedWidth===0?(this.width=M.width+O.left+O.right,L=M.width):(this.width=y.fixedWidth,L=this.width-O.left-O.right,L<M.width&&(L=M.width)),y.fixedHeight===0?this.height=M.height+O.top+O.bottom:this.height=y.fixedHeight;var R=this.width,w=this.height;this.updateDisplayOrigin(),R*=T,w*=T,R=Math.max(R,1),w=Math.max(w,1),m.width!==R||m.height!==w?(m.width=R,m.height=w,this.frame.setSize(R,w),y.syncFont(m,x)):x.clearRect(0,0,R,w),x.save(),x.scale(T,T),y.backgroundColor&&(x.fillStyle=y.backgroundColor,x.fillRect(0,0,R,w)),y.syncStyle(m,x),x.textBaseline="alphabetic",x.translate(O.left,O.top);for(var D,B,N=0;N<M.lines;N++){if(D=y.strokeThickness/2,B=y.strokeThickness/2+N*M.lineHeight+C.ascent,N>0&&(B+=M.lineSpacing*N),y.rtl)D=R-D;else if(y.align==="right")D+=L-M.lineWidths[N];else if(y.align==="center")D+=(L-M.lineWidths[N])/2;else if(y.align==="justify"){var z=.85;if(M.lineWidths[N]/M.width>=z){var X=M.width-M.lineWidths[N],k=x.measureText(" ").width,K=E[N].trim(),b=K.split(" ");X+=(E[N].length-K.length)*k;for(var I=Math.floor(X/k),G=0;I>0;)b[G]+=" ",G=(G+1)%(b.length-1||1),--I;E[N]=b.join(" ")}}this.autoRound&&(D=Math.round(D),B=Math.round(B)),y.strokeThickness&&(this.style.syncShadow(x,y.shadowStroke),x.strokeText(E[N],D,B)),y.color&&(this.style.syncShadow(x,y.shadowFill),x.fillText(E[N],D,B))}x.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(m,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!0;var Y=this.input;return Y&&!Y.customHitArea&&(Y.hitArea.width=this.width,Y.hitArea.height=this.height),this},getTextMetrics:function(){return this.style.getTextMetrics()},text:{get:function(){return this._text},set:function(m){this.setText(m)}},toJSON:function(){var m=a.ToJSON(this),x={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return m.data=x,m},preDestroy:function(){this.style.rtl&&d(this.canvas),o.remove(this.canvas),this.texture.destroy()}});e.exports=g},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(31),o=i(0),r=i(11),a=i(22),l=i(15),h=i(361),u=i(192),v=i(1091),d=i(3),c=8,p=new o({Extends:l,Mixins:[r.Alpha,r.BlendMode,r.ComputedSize,r.Crop,r.Depth,r.Flip,r.GetBounds,r.Mask,r.Origin,r.Pipeline,r.ScrollFactor,r.Tint,r.Transform,r.Visible,v],initialize:function(m,x,y,T,C,S,E){var M=m.sys.renderer;l.call(this,m,"TileSprite");var O=m.sys.textures.get(S),L=O.get(E);!T||!C?(T=L.width,C=L.height):(T=Math.floor(T),C=Math.floor(C)),this._tilePosition=new d,this._tileScale=new d(1,1),this.dirty=!1,this.renderer=M,this.canvas=n.create(this,T,C),this.context=this.canvas.getContext("2d"),this.displayTexture=O,this.displayFrame=L,this._crop=this.resetCropObject(),this.texture=m.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.potWidth=h(L.width),this.potHeight=h(L.height),this.fillCanvas=n.create2D(this,this.potWidth,this.potHeight),this.fillContext=this.fillCanvas.getContext("2d"),this.fillPattern=null,this.setPosition(x,y),this.setSize(T,C),this.setFrame(E),this.setOriginFromFrame(),this.initPipeline(),m.sys.game.events.on(a.CONTEXT_RESTORED,function(R){if(!!R){var w=R.gl;this.dirty=!0,this.fillPattern=null,this.fillPattern=R.createTexture2D(0,w.LINEAR,w.LINEAR,w.REPEAT,w.REPEAT,w.RGBA,this.fillCanvas,this.potWidth,this.potHeight)}},this)},setTexture:function(g,m){return this.displayTexture=this.scene.sys.textures.get(g),this.setFrame(m)},setFrame:function(g){var m=this.displayTexture.get(g);return this.potWidth=h(m.width),this.potHeight=h(m.height),this.canvas.width=0,!m.cutWidth||!m.cutHeight?this.renderFlags&=~c:this.renderFlags|=c,this.displayFrame=m,this.dirty=!0,this.updateTileTexture(),this},setTilePosition:function(g,m){return g!==void 0&&(this.tilePositionX=g),m!==void 0&&(this.tilePositionY=m),this},setTileScale:function(g,m){return g===void 0&&(g=this.tileScaleX),m===void 0&&(m=g),this.tileScaleX=g,this.tileScaleY=m,this},updateTileTexture:function(){if(!(!this.dirty||!this.renderer)){var g=this.displayFrame;if(g.source.isRenderTexture||g.source.isGLTexture){console.warn("TileSprites can only use Image or Canvas based textures"),this.dirty=!1;return}var m=this.fillContext,x=this.fillCanvas,y=this.potWidth,T=this.potHeight;(!this.renderer||!this.renderer.gl)&&(y=g.cutWidth,T=g.cutHeight),m.clearRect(0,0,y,T),x.width=y,x.height=T,m.drawImage(g.source.image,g.cutX,g.cutY,g.cutWidth,g.cutHeight,0,0,y,T),this.renderer&&this.renderer.gl?this.fillPattern=this.renderer.canvasToTexture(x,this.fillPattern):this.fillPattern=m.createPattern(x,"repeat"),this.updateCanvas(),this.dirty=!1}},updateCanvas:function(){var g=this.canvas;if((g.width!==this.width||g.height!==this.height)&&(g.width=this.width,g.height=this.height,this.frame.setSize(this.width,this.height),this.updateDisplayOrigin(),this.dirty=!0),!this.dirty||this.renderer&&this.renderer.gl){this.dirty=!1;return}var m=this.context;this.scene.sys.game.config.antialias||u.disable(m);var x=this._tileScale.x,y=this._tileScale.y,T=this._tilePosition.x,C=this._tilePosition.y;m.clearRect(0,0,this.width,this.height),m.save(),m.scale(x,y),m.translate(-T,-C),m.fillStyle=this.fillPattern,m.fillRect(T,C,this.width/x,this.height/y),m.restore(),this.dirty=!1},preDestroy:function(){this.renderer&&this.renderer.gl&&this.renderer.deleteTexture(this.fillPattern),n.remove(this.canvas),n.remove(this.fillCanvas),this.fillPattern=null,this.fillContext=null,this.fillCanvas=null,this.displayTexture=null,this.displayFrame=null,this.texture.destroy(),this.renderer=null},tilePositionX:{get:function(){return this._tilePosition.x},set:function(g){this._tilePosition.x=g,this.dirty=!0}},tilePositionY:{get:function(){return this._tilePosition.y},set:function(g){this._tilePosition.y=g,this.dirty=!0}},tileScaleX:{get:function(){return this._tileScale.x},set:function(g){this._tileScale.x=g,this.dirty=!0}},tileScaleY:{get:function(){return this._tileScale.y},set:function(g){this._tileScale.y=g,this.dirty=!0}}});e.exports=p},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(18),r=i(11),a=i(75),l=i(22),h=i(51),u=i(15),v=i(70),d=i(222),c=i(1094),p=i(14),g=new n({Extends:u,Mixins:[r.Alpha,r.BlendMode,r.Depth,r.Flip,r.GetBounds,r.Mask,r.Origin,r.Pipeline,r.ScrollFactor,r.Size,r.TextureCrop,r.Tint,r.Transform,r.Visible,c],initialize:function(x,y,T,C){u.call(this,x,"Video"),this.video=null,this.videoTexture=null,this.videoTextureSource=null,this.snapshotTexture=null,this.flipY=!1,this._key=d(),this.touchLocked=!0,this.playWhenUnlocked=!1,this.retryLimit=20,this.retry=0,this.retryInterval=500,this._retryID=null,this._systemMuted=!1,this._codeMuted=!1,this._systemPaused=!1,this._codePaused=!1,this._callbacks={play:this.playHandler.bind(this),error:this.loadErrorHandler.bind(this),end:this.completeHandler.bind(this),time:this.timeUpdateHandler.bind(this),seeking:this.seekingHandler.bind(this),seeked:this.seekedHandler.bind(this)},this._crop=this.resetCropObject(),this.markers={},this._markerIn=-1,this._markerOut=p.MAX_SAFE_INTEGER,this._lastUpdate=0,this._cacheKey="",this._isSeeking=!1,this.removeVideoElementOnDestroy=!1,this.setPosition(y,T),this.initPipeline(),C&&this.changeSource(C,!1);var S=x.sys.game.events;S.on(l.PAUSE,this.globalPause,this),S.on(l.RESUME,this.globalResume,this);var E=x.sys.sound;E&&E.on(v.GLOBAL_MUTE,this.globalMute,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},play:function(m,x,y){if(this.touchLocked&&this.playWhenUnlocked||this.isPlaying())return this;var T=this.video;if(!T)return console.warn("Video not loaded"),this;m===void 0&&(m=T.loop);var C=this.scene.sys.sound;C&&C.mute&&this.setMute(!0),isNaN(x)||(this._markerIn=x),!isNaN(y)&&y>x&&(this._markerOut=y),T.loop=m;var S=this._callbacks,E=T.play();return E!==void 0?E.then(this.playPromiseSuccessHandler.bind(this)).catch(this.playPromiseErrorHandler.bind(this)):(T.addEventListener("playing",S.play,!0),T.readyState<2&&(this.retry=this.retryLimit,this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval))),T.addEventListener("ended",S.end,!0),T.addEventListener("timeupdate",S.time,!0),T.addEventListener("seeking",S.seeking,!0),T.addEventListener("seeked",S.seeked,!0),this},changeSource:function(m,x,y,T,C){x===void 0&&(x=!0);var S=this.video;S&&this.stop();var E=this.scene.sys.cache.video.get(m);return E?(this.video=E,this._cacheKey=m,this._codePaused=E.paused,this._codeMuted=E.muted,this.videoTexture?(this.scene.sys.textures.remove(this._key),this.videoTexture=this.scene.sys.textures.create(this._key,E,E.videoWidth,E.videoHeight),this.videoTextureSource=this.videoTexture.source[0],this.videoTexture.add("__BASE",0,0,0,E.videoWidth,E.videoHeight),this.setTexture(this.videoTexture),this.setSizeToFrame(),this.updateDisplayOrigin(),this.emit(a.VIDEO_CREATED,this,E.videoWidth,E.videoHeight)):this.updateTexture(),E.currentTime=0,this._lastUpdate=0,x&&this.play(y,T,C)):this.video=null,this},addMarker:function(m,x,y){return!isNaN(x)&&x>=0&&!isNaN(y)&&(this.markers[m]=[x,y]),this},playMarker:function(m,x){var y=this.markers[m];return y&&this.play(x,y[0],y[1]),this},removeMarker:function(m){return delete this.markers[m],this},snapshot:function(m,x){return m===void 0&&(m=this.width),x===void 0&&(x=this.height),this.snapshotArea(0,0,this.width,this.height,m,x)},snapshotArea:function(m,x,y,T,C,S){m===void 0&&(m=0),x===void 0&&(x=0),y===void 0&&(y=this.width),T===void 0&&(T=this.height),C===void 0&&(C=y),S===void 0&&(S=T);var E=this.video,M=this.snapshotTexture;return M?(M.setSize(C,S),E&&M.context.drawImage(E,m,x,y,T,0,0,C,S)):(M=this.scene.sys.textures.createCanvas(d(),C,S),this.snapshotTexture=M,E&&M.context.drawImage(E,m,x,y,T,0,0,C,S)),M.update()},saveSnapshotTexture:function(m){return this.snapshotTexture?this.scene.sys.textures.renameTexture(this.snapshotTexture.key,m):this.snapshotTexture=this.scene.sys.textures.createCanvas(m,this.width,this.height),this.snapshotTexture},loadURL:function(m,x,y){y===void 0&&(y=!1),this.video&&this.stop(),this.videoTexture&&this.scene.sys.textures.remove(this._key);var T=document.createElement("video");return T.controls=!1,y&&(T.muted=!0,T.defaultMuted=!0,T.setAttribute("autoplay","autoplay")),T.setAttribute("playsinline","playsinline"),T.setAttribute("preload","auto"),T.addEventListener("error",this._callbacks.error,!0),T.src=m,T.load(),this.video=T,this},loadMediaStream:function(m,x,y){y===void 0&&(y=!1),this.video&&this.stop(),this.videoTexture&&this.scene.sys.textures.remove(this._key);var T=document.createElement("video");T.controls=!1,y&&(T.muted=!0,T.defaultMuted=!0,T.setAttribute("autoplay","autoplay")),T.setAttribute("playsinline","playsinline"),T.setAttribute("preload","auto"),T.addEventListener("error",this._callbacks.error,!0);try{T.srcObject=m}catch{T.src=window.URL.createObjectURL(m)}return T.load(),this.video=T,this},playPromiseSuccessHandler:function(){this._codePaused=!1,this.touchLocked=!1,this.emit(a.VIDEO_PLAY,this),this._markerIn>-1&&(this.video.currentTime=this._markerIn)},playPromiseErrorHandler:function(m){this.scene.sys.input.once(h.POINTER_DOWN,this.unlockHandler,this),this.touchLocked=!0,this.playWhenUnlocked=!0,this.emit(a.VIDEO_ERROR,this,m)},playHandler:function(){this._codePaused=!1,this.touchLocked=!1,this.emit(a.VIDEO_PLAY,this),this.video.removeEventListener("playing",this._callbacks.play,!0)},loadErrorHandler:function(m){this.stop(),this.emit(a.VIDEO_ERROR,this,m)},unlockHandler:function(){this.touchLocked=!1,this.playWhenUnlocked=!1,this.emit(a.VIDEO_UNLOCKED,this),this._markerIn>-1&&(this.video.currentTime=this._markerIn),this.video.play(),this.emit(a.VIDEO_PLAY,this)},completeHandler:function(){this.emit(a.VIDEO_COMPLETE,this)},timeUpdateHandler:function(){this.video&&this.video.currentTime<this._lastUpdate&&(this.emit(a.VIDEO_LOOP,this),this._lastUpdate=0)},preUpdate:function(){var m=this.video;if(m){var x=m.currentTime;x!==this._lastUpdate&&(this._lastUpdate=x,this.updateTexture(),x>=this._markerOut&&(m.loop?(m.currentTime=this._markerIn,this.updateTexture(),this._lastUpdate=x,this.emit(a.VIDEO_LOOP,this)):(this.emit(a.VIDEO_COMPLETE,this),this.stop())))}},checkVideoProgress:function(){this.video.readyState>=2?this.updateTexture():(this.retry--,this.retry>0?this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval):this.emit(a.VIDEO_TIMEOUT,this))},updateTexture:function(){var m=this.video,x=m.videoWidth,y=m.videoHeight;if(!this.videoTexture)this.videoTexture=this.scene.sys.textures.create(this._key,m,x,y),this.videoTextureSource=this.videoTexture.source[0],this.videoTexture.add("__BASE",0,0,0,x,y),this.setTexture(this.videoTexture),this.setSizeToFrame(),this.updateDisplayOrigin(),this.emit(a.VIDEO_CREATED,this,x,y);else{var T=this.videoTextureSource;T.source!==m&&(T.source=m,T.width=x,T.height=y),T.update()}},getVideoKey:function(){return this._cacheKey},seekTo:function(m){var x=this.video;if(x){var y=x.duration;if(y!==1/0&&!isNaN(y)){var T=y*m;this.setCurrentTime(T)}}return this},getCurrentTime:function(){return this.video?this.video.currentTime:0},setCurrentTime:function(m){var x=this.video;if(x){if(typeof m=="string"){var y=m[0],T=parseFloat(m.substr(1));y==="+"?m=x.currentTime+T:y==="-"&&(m=x.currentTime-T)}x.currentTime=m,this._lastUpdate=m}return this},isSeeking:function(){return this._isSeeking},seekingHandler:function(){this._isSeeking=!0,this.emit(a.VIDEO_SEEKING,this)},seekedHandler:function(){this._isSeeking=!1,this.emit(a.VIDEO_SEEKED,this);var m=this.video;m&&this.updateTexture()},getProgress:function(){var m=this.video;if(m){var x=m.currentTime,y=m.duration;if(y!==1/0&&!isNaN(y))return x/y}return 0},getDuration:function(){return this.video?this.video.duration:0},setMute:function(m){m===void 0&&(m=!0),this._codeMuted=m;var x=this.video;return x&&(x.muted=this._systemMuted?!0:m),this},isMuted:function(){return this._codeMuted},globalMute:function(m,x){this._systemMuted=x;var y=this.video;y&&(y.muted=this._codeMuted?!0:x)},globalPause:function(){this._systemPaused=!0,this.video&&this.video.pause()},globalResume:function(){this._systemPaused=!1,this.video&&!this._codePaused&&this.video.play()},setPaused:function(m){m===void 0&&(m=!0);var x=this.video;return this._codePaused=m,x&&(m?x.paused||x.pause():m||x.paused&&!this._systemPaused&&x.play()),this},getVolume:function(){return this.video?this.video.volume:1},setVolume:function(m){return m===void 0&&(m=1),this.video&&(this.video.volume=o(m,0,1)),this},getPlaybackRate:function(){return this.video?this.video.playbackRate:1},setPlaybackRate:function(m){return this.video&&(this.video.playbackRate=m),this},getLoop:function(){return this.video?this.video.loop:!1},setLoop:function(m){return m===void 0&&(m=!0),this.video&&(this.video.loop=m),this},isPlaying:function(){return this.video?!(this.video.paused||this.video.ended):!1},isPaused:function(){return this.video&&this.video.paused||this._codePaused||this._systemPaused},saveTexture:function(m,x){return x===void 0&&(x=!1),this.videoTexture&&this.scene.sys.textures.renameTexture(this._key,m),this._key=m,this.flipY=x,this.videoTextureSource&&this.videoTextureSource.setFlipY(x),this.videoTexture},stop:function(){var m=this.video;if(m){var x=this._callbacks;for(var y in x)m.removeEventListener(y,x[y],!0);m.pause()}return this._retryID&&window.clearTimeout(this._retryID),this.emit(a.VIDEO_STOP,this),this},removeVideoElement:function(){var m=this.video;if(!!m){for(m.parentNode&&m.parentNode.removeChild(m);m.hasChildNodes();)m.removeChild(m.firstChild);m.removeAttribute("autoplay"),m.removeAttribute("src"),this.video=null}},preDestroy:function(){this.stop(),this.removeVideoElementOnDestroy&&this.removeVideoElement();var m=this.scene.sys.game.events;m.off(l.PAUSE,this.globalPause,this),m.off(l.RESUME,this.globalResume,this);var x=this.scene.sys.sound;x&&x.off(v.GLOBAL_MUTE,this.globalMute,this),this._retryID&&window.clearTimeout(this._retryID)}});e.exports=g},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(228),r=i(470),a=i(56),l=new n({initialize:function(u){this.type=a.POLYGON,this.area=0,this.points=[],u&&this.setTo(u)},contains:function(h,u){return o(this,h,u)},setTo:function(h){if(this.area=0,this.points=[],typeof h=="string"&&(h=h.split(" ")),!Array.isArray(h))return this;for(var u,v=Number.MAX_VALUE,d=0;d<h.length;d++)u={x:0,y:0},typeof h[d]=="number"||typeof h[d]=="string"?(u.x=parseFloat(h[d]),u.y=parseFloat(h[d+1]),d++):Array.isArray(h[d])?(u.x=h[d][0],u.y=h[d][1]):(u.x=h[d].x,u.y=h[d].y),this.points.push(u),u.y<v&&(v=u.y);return this.calculateArea(v),this},calculateArea:function(){if(this.points.length<3)return this.area=0,this.area;for(var h=0,u,v,d=0;d<this.points.length-1;d++)u=this.points[d],v=this.points[d+1],h+=(v.x-u.x)*(u.y+v.y);return u=this.points[0],v=this.points[this.points.length-1],h+=(u.x-v.x)*(v.y+u.y),this.area=-h*.5,this.area},getPoints:function(h,u,v){return r(this,h,u,v)}});e.exports=l},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r){for(var a=!1,l=-1,h=n.points.length-1;++l<n.points.length;h=l){var u=n.points[l].x,v=n.points[l].y,d=n.points[h].x,c=n.points[h].y;(v<=r&&r<c||c<=r&&r<v)&&o<(d-u)*(r-v)/(c-v)+u&&(a=!a)}return a};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(11),r=i(15),a=i(2),l=i(17),h=i(478),u=i(1176),v=i(25),d=new n({Extends:r,Mixins:[o.ComputedSize,o.Depth,o.GetBounds,o.Mask,o.Origin,o.ScrollFactor,o.Transform,o.Visible,u],initialize:function(p,g,m,x,y,T,C,S){m===void 0&&(m=0),x===void 0&&(x=0),y===void 0&&(y=128),T===void 0&&(T=128),r.call(this,p,"Shader"),this.blendMode=-1,this.shader;var E=p.sys.renderer;this.renderer=E,this.gl=E.gl,this.vertexData=new ArrayBuffer(6*(Float32Array.BYTES_PER_ELEMENT*2)),this.vertexBuffer=E.createVertexBuffer(this.vertexData.byteLength,this.gl.STREAM_DRAW),this.program=null,this.bytes=new Uint8Array(this.vertexData),this.vertexViewF32=new Float32Array(this.vertexData),this._tempMatrix1=new v,this._tempMatrix2=new v,this._tempMatrix3=new v,this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.uniforms={},this.pointer=null,this._rendererWidth=E.width,this._rendererHeight=E.height,this._textureCount=0,this.framebuffer=null,this.glTexture=null,this.renderToTexture=!1,this.texture=null,this.setPosition(m,x),this.setSize(y,T),this.setOrigin(.5,.5),this.setShader(g,C,S)},willRender:function(c){return this.renderToTexture?!0:!(r.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&c.id)},setRenderToTexture:function(c,p){if(p===void 0&&(p=!1),!this.renderToTexture){var g=this.width,m=this.height,x=this.renderer;this.glTexture=x.createTextureFromSource(null,g,m,0),this.glTexture.flipY=p,this.framebuffer=x.createFramebuffer(g,m,this.glTexture,!1),this._rendererWidth=g,this._rendererHeight=m,this.renderToTexture=!0,this.projOrtho(0,this.width,this.height,0),c&&(this.texture=this.scene.sys.textures.addGLTexture(c,this.glTexture,g,m))}return this.shader&&(x.pipelines.clear(),this.load(),this.flush(),x.pipelines.rebind()),this},setShader:function(c,p,g){if(p===void 0&&(p=[]),typeof c=="string"){var m=this.scene.sys.cache.shader;if(!m.has(c))return console.warn("Shader missing: "+c),this;this.shader=m.get(c)}else this.shader=c;var x=this.gl,y=this.renderer;this.program&&x.deleteProgram(this.program);var T=y.createProgram(this.shader.vertexSrc,this.shader.fragmentSrc);x.uniformMatrix4fv(x.getUniformLocation(T,"uViewMatrix"),!1,this.viewMatrix),x.uniformMatrix4fv(x.getUniformLocation(T,"uProjectionMatrix"),!1,this.projectionMatrix),x.uniform2f(x.getUniformLocation(T,"uResolution"),this.width,this.height),this.program=T;var C=new Date,S={resolution:{type:"2f",value:{x:this.width,y:this.height}},time:{type:"1f",value:0},mouse:{type:"2f",value:{x:this.width/2,y:this.height/2}},date:{type:"4fv",value:[C.getFullYear(),C.getMonth(),C.getDate(),C.getHours()*60*60+C.getMinutes()*60+C.getSeconds()]},sampleRate:{type:"1f",value:44100},iChannel0:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel1:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel2:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel3:{type:"sampler2D",value:null,textureData:{repeat:!0}}};this.shader.uniforms?this.uniforms=l(!0,{},this.shader.uniforms,S):this.uniforms=S;for(var E=0;E<4;E++)p[E]&&this.setSampler2D("iChannel"+E,p[E],E,g);return this.initUniforms(),this.projOrtho(0,this._rendererWidth,this._rendererHeight,0),this},setPointer:function(c){return this.pointer=c,this},projOrtho:function(c,p,g,m){var x=-1e3,y=1e3,T=1/(c-p),C=1/(g-m),S=1/(x-y),E=this.projectionMatrix;E[0]=-2*T,E[5]=-2*C,E[10]=2*S,E[12]=(c+p)*T,E[13]=(m+g)*C,E[14]=(y+x)*S;var M=this.program,O=this.gl,L=this.renderer;L.setProgram(M),O.uniformMatrix4fv(O.getUniformLocation(M,"uProjectionMatrix"),!1,this.projectionMatrix),this._rendererWidth=p,this._rendererHeight=g},initUniforms:function(){var c=this.gl,p=this.renderer.glFuncMap,g=this.program;this._textureCount=0;for(var m in this.uniforms){var x=this.uniforms[m],y=x.type,T=p[y];x.uniformLocation=c.getUniformLocation(g,m),y!=="sampler2D"&&(x.glMatrix=T.matrix,x.glValueLength=T.length,x.glFunc=T.func)}},setSampler2DBuffer:function(c,p,g,m,x,y){x===void 0&&(x=0),y===void 0&&(y={});var T=this.uniforms[c];return T.value=p,y.width=g,y.height=m,T.textureData=y,this._textureCount=x,this.initSampler2D(T),this},setSampler2D:function(c,p,g,m){g===void 0&&(g=0);var x=this.scene.sys.textures;if(x.exists(p)){var y=x.getFrame(p);if(y.glTexture&&y.glTexture.isRenderTexture)return this.setSampler2DBuffer(c,y.glTexture,y.width,y.height,g,m);var T=this.uniforms[c],C=y.source;T.textureKey=p,T.source=C.image,T.value=y.glTexture,C.isGLTexture&&(m||(m={}),m.width=C.width,m.height=C.height),m&&(T.textureData=m),this._textureCount=g,this.initSampler2D(T)}return this},setUniform:function(c,p){return h(this.uniforms,c,p),this},getUniform:function(c){return a(this.uniforms,c,null)},setChannel0:function(c,p){return this.setSampler2D("iChannel0",c,0,p)},setChannel1:function(c,p){return this.setSampler2D("iChannel1",c,1,p)},setChannel2:function(c,p){return this.setSampler2D("iChannel2",c,2,p)},setChannel3:function(c,p){return this.setSampler2D("iChannel3",c,3,p)},initSampler2D:function(c){if(!!c.value){var p=this.gl;p.activeTexture(p.TEXTURE0+this._textureCount),p.bindTexture(p.TEXTURE_2D,c.value);var g=c.textureData;if(g&&!c.value.isRenderTexture){var m=p[a(g,"magFilter","linear").toUpperCase()],x=p[a(g,"minFilter","linear").toUpperCase()],y=p[a(g,"wrapS","repeat").toUpperCase()],T=p[a(g,"wrapT","repeat").toUpperCase()],C=p[a(g,"format","rgba").toUpperCase()];if(g.repeat&&(y=p.REPEAT,T=p.REPEAT),p.pixelStorei(p.UNPACK_FLIP_Y_WEBGL,!!g.flipY),g.width){var S=a(g,"width",512),E=a(g,"height",2),M=a(g,"border",0);p.texImage2D(p.TEXTURE_2D,0,C,S,E,M,C,p.UNSIGNED_BYTE,null)}else p.texImage2D(p.TEXTURE_2D,0,C,p.RGBA,p.UNSIGNED_BYTE,c.source);p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,m),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,x),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,y),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,T)}this.renderer.setProgram(this.program),p.uniform1i(c.uniformLocation,this._textureCount),this._textureCount++}},syncUniforms:function(){var c=this.gl,p=this.uniforms,g,m,x,y,T,C=0;for(var S in p)g=p[S],x=g.glFunc,m=g.glValueLength,y=g.uniformLocation,T=g.value,T!==null&&(m===1?g.glMatrix?x.call(c,y,g.transpose,T):x.call(c,y,T):m===2?x.call(c,y,T.x,T.y):m===3?x.call(c,y,T.x,T.y,T.z):m===4?x.call(c,y,T.x,T.y,T.z,T.w):g.type==="sampler2D"&&(c.activeTexture(c.TEXTURE0+C),c.bindTexture(c.TEXTURE_2D,T),c.uniform1i(y,C),C++))},load:function(c){var p=this.gl,g=this.width,m=this.height,x=this.renderer,y=this.program,T=this.viewMatrix;if(!this.renderToTexture){var C=-this._displayOriginX,S=-this._displayOriginY;T[0]=c[0],T[1]=c[1],T[4]=c[2],T[5]=c[3],T[8]=c[4],T[9]=c[5],T[12]=T[0]*C+T[4]*S,T[13]=T[1]*C+T[5]*S}p.useProgram(y),p.uniformMatrix4fv(p.getUniformLocation(y,"uViewMatrix"),!1,T),p.uniform2f(p.getUniformLocation(y,"uResolution"),this.width,this.height);var E=this.uniforms,M=E.resolution;M.value.x=g,M.value.y=m,E.time.value=x.game.loop.getDuration();var O=this.pointer;if(O){var L=E.mouse,R=O.x/g,w=1-O.y/m;L.value.x=R.toFixed(2),L.value.y=w.toFixed(2)}this.syncUniforms()},flush:function(){var c=this.width,p=this.height,g=this.program,m=this.gl,x=this.vertexBuffer,y=this.renderer,T=Float32Array.BYTES_PER_ELEMENT*2;this.renderToTexture&&(y.setFramebuffer(this.framebuffer),m.clearColor(0,0,0,0),m.clear(m.COLOR_BUFFER_BIT)),m.bindBuffer(m.ARRAY_BUFFER,x);var C=m.getAttribLocation(g,"inPosition");C!==-1&&(m.enableVertexAttribArray(C),m.vertexAttribPointer(C,2,m.FLOAT,!1,T,0));var S=this.vertexViewF32;S[3]=p,S[4]=c,S[5]=p,S[8]=c,S[9]=p,S[10]=c;var E=6;m.bufferSubData(m.ARRAY_BUFFER,0,this.bytes.subarray(0,E*T)),m.drawArrays(m.TRIANGLES,0,E),this.renderToTexture&&y.setFramebuffer(null,!1)},setAlpha:function(){},setBlendMode:function(){},preDestroy:function(){var c=this.gl;c.deleteProgram(this.program),c.deleteBuffer(this.vertexBuffer),this.renderToTexture&&(this.renderer.deleteFramebuffer(this.framebuffer),this.texture.destroy(),this.framebuffer=null,this.glTexture=null,this.texture=null)}});e.exports=d},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(11),r=i(36),a=i(116),l=i(15),h=i(479),u=i(480),v=i(19),d=i(69),c=i(1179),p=i(79),g=i(39),m=i(117),x=new n({Extends:l,Mixins:[o.AlphaSingle,o.BlendMode,o.Depth,o.Mask,o.Pipeline,o.Size,o.Texture,o.Transform,o.Visible,o.ScrollFactor,c],initialize:function(T,C,S,E,M,O,L,R,w,D,B,N){C===void 0&&(C=0),S===void 0&&(S=0),E===void 0&&(E="__WHITE"),l.call(this,T,"Mesh"),this.faces=[],this.vertices=[],this.tintFill=!1,this.debugCallback=null,this.debugGraphic=null,this.hideCCW=!0,this.modelPosition=new g,this.modelScale=new g(1,1,1),this.modelRotation=new g,this.dirtyCache=[0,0,0,0,0,0,0,0,0,0,0,0],this.transformMatrix=new d,this.viewPosition=new g,this.viewMatrix=new d,this.projectionMatrix=new d,this.totalRendered=0,this.totalFrame=0,this.ignoreDirtyCache=!1;var z=T.sys.renderer;this.setPosition(C,S),this.setTexture(E,M),this.setSize(z.width,z.height),this.initPipeline(),this.setPerspective(z.width,z.height),O&&this.addVertices(O,L,R,w,D,B,N)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},panX:function(y){return this.viewPosition.addScale(g.LEFT,y),this.dirtyCache[10]=1,this},panY:function(y){return this.viewPosition.y+=g.DOWN.y*y,this.dirtyCache[10]=1,this},panZ:function(y){return this.viewPosition.z+=y,this.dirtyCache[10]=1,this},setPerspective:function(y,T,C,S,E){return C===void 0&&(C=45),S===void 0&&(S=.01),E===void 0&&(E=1e3),this.projectionMatrix.perspective(r(C),y/T,S,E),this.dirtyCache[10]=1,this.dirtyCache[11]=0,this},setOrtho:function(y,T,C,S){return y===void 0&&(y=this.scene.sys.renderer.getAspectRatio()),T===void 0&&(T=1),C===void 0&&(C=-1e3),S===void 0&&(S=1e3),this.projectionMatrix.ortho(-y,y,-T,T,C,S),this.dirtyCache[10]=1,this.dirtyCache[11]=1,this},clear:function(){return this.faces.forEach(function(y){y.destroy()}),this.faces=[],this.vertices=[],this},addVerticesFromObj:function(y,T,C,S,E,M,O,L,R){var w=this.scene.sys.cache.obj.get(y);return w&&u(w,this,T,C,S,E,M,O,L,R),this},sortByDepth:function(y,T){return y.depth-T.depth},depthSort:function(){return p(this.faces,this.sortByDepth),this},addVertex:function(y,T,C,S,E,M,O){var L=new m(y,T,C,S,E,M,O);return this.vertices.push(L),L},addFace:function(y,T,C){var S=new a(y,T,C);return this.faces.push(S),this.dirtyCache[9]=-1,S},addVertices:function(y,T,C,S,E,M,O){var L=h(y,T,C,S,E,M,O);return L&&(this.faces=this.faces.concat(L.faces),this.vertices=this.vertices.concat(L.vertices)),this.dirtyCache[9]=-1,this},getFaceCount:function(){return this.faces.length},getVertexCount:function(){return this.vertices.length},getFace:function(y){return this.faces[y]},getFaceAt:function(y,T,C){C===void 0&&(C=this.scene.sys.cameras.main);for(var S=v(this,C).calc,E=this.faces,M=[],O=0;O<E.length;O++){var L=E[O];L.contains(y,T,S)&&M.push(L)}return p(M,this.sortByDepth)},setDebug:function(y,T){return this.debugGraphic=y,!y&&!T?this.debugCallback=null:T?this.debugCallback=T:this.debugCallback=this.renderDebug,this},isDirty:function(){var y=this.modelPosition,T=this.modelRotation,C=this.modelScale,S=this.dirtyCache,E=y.x,M=y.y,O=y.z,L=T.x,R=T.y,w=T.z,D=C.x,B=C.y,N=C.z,z=this.getFaceCount(),X=S[0],k=S[1],K=S[2],b=S[3],I=S[4],G=S[5],Y=S[6],U=S[7],W=S[8],H=S[9];return S[0]=E,S[1]=M,S[2]=O,S[3]=L,S[4]=R,S[5]=w,S[6]=D,S[7]=B,S[8]=N,S[9]=z,X!==E||k!==M||K!==O||b!==L||I!==R||G!==w||Y!==D||U!==B||W!==N||H!==z},preUpdate:function(){this.totalRendered=this.totalFrame,this.totalFrame=0;var y=this.dirtyCache;if(!(!this.ignoreDirtyCache&&!y[10]&&!this.isDirty())){var T=this.width,C=this.height,S=this.viewMatrix,E=this.viewPosition;y[10]&&(S.identity(),S.translate(E),S.invert(),y[10]=0);var M=this.transformMatrix;M.setWorldMatrix(this.modelRotation,this.modelPosition,this.modelScale,this.viewMatrix,this.projectionMatrix);for(var O=E.z,L=this.faces,R=0;R<L.length;R++)L[R].transformCoordinatesLocal(M,T,C,O);this.depthSort()}},renderDebug:function(y,T){for(var C=y.debugGraphic,S=0;S<T.length;S++){var E=T[S],M=E.vertex1.tx,O=E.vertex1.ty,L=E.vertex2.tx,R=E.vertex2.ty,w=E.vertex3.tx,D=E.vertex3.ty;C.strokeTriangle(M,O,L,R,w,D)}},preDestroy:function(){this.clear(),this.debugCallback=null,this.debugGraphic=null}});e.exports=x},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(50),o=function(r,a){return n(r.x,r.y,a.x,a.y)<=r.radius+a.radius};e.exports=o},function(e,f,i){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4),o=i(233),r=function(a,l,h){if(h===void 0&&(h=[]),o(a,l)){var u=a.x1,v=a.y1,d=a.x2,c=a.y2,p=l.x,g=l.y,m=l.radius,x=d-u,y=c-v,T=u-p,C=v-g,S=x*x+y*y,E=2*(x*T+y*C),M=T*T+C*C-m*m,O=E*E-4*S*M,L,R;if(O===0){var w=-E/(2*S);L=u+w*x,R=v+w*y,w>=0&&w<=1&&h.push(new n(L,R))}else if(O>0){var D=(-E-Math.sqrt(O))/(2*S);L=u+D*x,R=v+D*y,D>=0&&D<=1&&h.push(new n(L,R));var B=(-E+Math.sqrt(O))/(2*S);L=u+B*x,R=v+B*y,B>=0&&B<=1&&h.push(new n(L,R))}}return h};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(66),o=i(4),r=new o,a=function(l,h,u){if(u===void 0&&(u=r),n(h,l.x1,l.y1))return u.x=l.x1,u.y=l.y1,!0;if(n(h,l.x2,l.y2))return u.x=l.x2,u.y=l.y2,!0;var v=l.x2-l.x1,d=l.y2-l.y1,c=h.x-l.x1,p=h.y-l.y1,g=v*v+d*d,m=v,x=d;if(g>0){var y=(c*v+p*d)/g;m*=y,x*=y}u.x=l.x1+m,u.y=l.y1+x;var T=m*m+x*x;return T<=g&&m*v+x*d>=0&&n(h,u.x,u.y)};e.exports=a},function(e,f,i){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4),o=i(96),r=i(488),a=function(l,h,u){if(u===void 0&&(u=[]),r(l,h))for(var v=h.getLineA(),d=h.getLineB(),c=h.getLineC(),p=h.getLineD(),g=[new n,new n,new n,new n],m=[o(v,l,g[0]),o(d,l,g[1]),o(c,l,g[2]),o(p,l,g[3])],x=0;x<4;x++)m[x]&&u.push(g[x]);return u};e.exports=a},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r,a){r===void 0&&(r=!1),a===void 0&&(a=[]);for(var l=n.x3-n.x1,h=n.y3-n.y1,u=n.x2-n.x1,v=n.y2-n.y1,d=l*l+h*h,c=l*u+h*v,p=u*u+v*v,g=d*p-c*c,m=g===0?0:1/g,x,y,T,C,S,E,M=n.x1,O=n.y1,L=0;L<o.length&&(T=o[L].x-M,C=o[L].y-O,S=l*T+h*C,E=u*T+v*C,x=(p*S-c*E)*m,y=(d*E-c*S)*m,!(x>=0&&y>=0&&x+y<1&&(a.push({x:o[L].x,y:o[L].y}),r)));L++);return a};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r,a){var l=Math.cos(a),h=Math.sin(a),u=n.x1-o,v=n.y1-r;return n.x1=u*l-v*h+o,n.y1=u*h+v*l+r,u=n.x2-o,v=n.y2-r,n.x2=u*l-v*h+o,n.y2=u*h+v*l+r,n};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n.height===0?NaN:n.width/n.height};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r,a){var l=Math.cos(a),h=Math.sin(a),u=n.x1-o,v=n.y1-r;return n.x1=u*l-v*h+o,n.y1=u*h+v*l+r,u=n.x2-o,v=n.y2-r,n.x2=u*l-v*h+o,n.y2=u*h+v*l+r,u=n.x3-o,v=n.y3-r,n.x3=u*l-v*h+o,n.y3=u*h+v*l+r,n};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={BUTTON_DOWN:i(1310),BUTTON_UP:i(1311),CONNECTED:i(1312),DISCONNECTED:i(1313),GAMEPAD_BUTTON_DOWN:i(1314),GAMEPAD_BUTTON_UP:i(1315)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(17),o=i(156),r=function(a,l){var h=a===void 0?o():n({},a);if(l)for(var u in l)l[u]!==void 0&&(h[u]=l[u]);return h};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(21),r=i(23),a=i(8),l=i(2),h=i(7),u=i(408),v=new n({Extends:r,initialize:function(c,p,g,m){var x="xml";if(h(p)){var y=p;p=l(y,"key"),g=l(y,"url"),m=l(y,"xhrSettings"),x=l(y,"extension",x)}var T={type:"xml",cache:c.cacheManager.xml,extension:x,responseType:"text",key:p,url:g,xhrSettings:m};r.call(this,c,T)},onProcess:function(){this.state=o.FILE_PROCESSING,this.data=u(this.xhrLoader.responseText),this.data?this.onProcessComplete():(console.warn("Invalid XMLFile: "+this.key),this.onProcessError())}});a.register("xml",function(d,c,p){if(Array.isArray(d))for(var g=0;g<d.length;g++)this.addFile(new v(this,d[g]));else this.addFile(new v(this,d,c,p));return this}),e.exports=v},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(21),r=i(23),a=i(8),l=i(2),h=i(7),u=new n({Extends:r,initialize:function(d,c,p,g){var m="text",x="txt",y=d.cacheManager.text;if(h(c)){var T=c;c=l(T,"key"),p=l(T,"url"),g=l(T,"xhrSettings"),x=l(T,"extension",x),m=l(T,"type",m),y=l(T,"cache",y)}var C={type:m,cache:y,extension:x,responseType:"text",key:c,url:p,xhrSettings:g};r.call(this,d,C)},onProcess:function(){this.state=o.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});a.register("text",function(v,d,c){if(Array.isArray(v))for(var p=0;p<v.length;p++)this.addFile(new u(this,v[p]));else this.addFile(new u(this,v,d,c));return this}),e.exports=u},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Acceleration:i(1368),Angular:i(1369),Bounce:i(1370),Debug:i(1371),Drag:i(1372),Enable:i(1373),Friction:i(1374),Gravity:i(1375),Immovable:i(1376),Mass:i(1377),OverlapCirc:i(523),OverlapRect:i(244),Pushable:i(1378),Size:i(1379),Velocity:i(1380)}},function(e,f){var i=function(n,o,r,a,l,h,u){h===void 0&&(h=!0),u===void 0&&(u=!1);var v=[],d=[],c=n.treeMinMax;if(c.minX=o,c.minY=r,c.maxX=o+a,c.maxY=r+l,u&&(d=n.staticTree.search(c)),h&&n.useTree)v=n.tree.search(c);else if(h){var p=n.bodies,g={position:{x:o,y:r},left:o,top:r,right:o+a,bottom:r+l,isCircle:!1},m=n.intersects;p.iterate(function(x){m(x,g)&&v.push(x)})}return d.concat(v)};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={COLLIDE:i(1381),OVERLAP:i(1382),PAUSE:i(1383),RESUME:i(1384),TILE_COLLIDE:i(1385),TILE_OVERLAP:i(1386),WORLD_BOUNDS:i(1387),WORLD_STEP:i(1388)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(62),o=function(r,a,l,h){var u=0,v=r.deltaAbsX()+a.deltaAbsX()+h;return r._dx===0&&a._dx===0?(r.embedded=!0,a.embedded=!0):r._dx>a._dx?(u=r.right-a.x,u>v&&!l||r.checkCollision.right===!1||a.checkCollision.left===!1?u=0:(r.touching.none=!1,r.touching.right=!0,a.touching.none=!1,a.touching.left=!0,a.physicsType===n.STATIC_BODY&&!l&&(r.blocked.none=!1,r.blocked.right=!0),r.physicsType===n.STATIC_BODY&&!l&&(a.blocked.none=!1,a.blocked.left=!0))):r._dx<a._dx&&(u=r.x-a.width-a.x,-u>v&&!l||r.checkCollision.left===!1||a.checkCollision.right===!1?u=0:(r.touching.none=!1,r.touching.left=!0,a.touching.none=!1,a.touching.right=!0,a.physicsType===n.STATIC_BODY&&!l&&(r.blocked.none=!1,r.blocked.left=!0),r.physicsType===n.STATIC_BODY&&!l&&(a.blocked.none=!1,a.blocked.right=!0))),r.overlapX=u,a.overlapX=u,u};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(62),o=function(r,a,l,h){var u=0,v=r.deltaAbsY()+a.deltaAbsY()+h;return r._dy===0&&a._dy===0?(r.embedded=!0,a.embedded=!0):r._dy>a._dy?(u=r.bottom-a.y,u>v&&!l||r.checkCollision.down===!1||a.checkCollision.up===!1?u=0:(r.touching.none=!1,r.touching.down=!0,a.touching.none=!1,a.touching.up=!0,a.physicsType===n.STATIC_BODY&&!l&&(r.blocked.none=!1,r.blocked.down=!0),r.physicsType===n.STATIC_BODY&&!l&&(a.blocked.none=!1,a.blocked.up=!0))):r._dy<a._dy&&(u=r.y-a.bottom,-u>v&&!l||r.checkCollision.up===!1||a.checkCollision.down===!1?u=0:(r.touching.none=!1,r.touching.up=!0,a.touching.none=!1,a.touching.down=!0,a.physicsType===n.STATIC_BODY&&!l&&(r.blocked.none=!1,r.blocked.up=!0),r.physicsType===n.STATIC_BODY&&!l&&(a.blocked.none=!1,a.blocked.down=!0))),r.overlapY=u,a.overlapY=u,u};e.exports=o},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return!(o.right<=n.left||o.bottom<=n.top||o.position.x>=n.right||o.position.y>=n.bottom)};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Bounce:i(1495),Collision:i(1496),Force:i(1497),Friction:i(1498),Gravity:i(1499),Mass:i(1500),Sensor:i(1501),SetBody:i(1502),Sleep:i(1503),Static:i(1520),Transform:i(1521),Velocity:i(1522)}},function(e,f){var i={};e.exports=i,function(){i.create=function(n,o){var r=n.bodyA,a=n.bodyB,l={id:i.id(r,a),bodyA:r,bodyB:a,activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:r.isSensor||a.isSensor,timeCreated:o,timeUpdated:o,collision:null,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return i.update(l,n,o),l},i.update=function(n,o,r){if(n.collision=o,o.collided){var a=o.supports,l=n.activeContacts,h=o.parentA,u=o.parentB;n.inverseMass=h.inverseMass+u.inverseMass,n.friction=Math.min(h.friction,u.friction),n.frictionStatic=Math.max(h.frictionStatic,u.frictionStatic),n.restitution=Math.max(h.restitution,u.restitution),n.slop=Math.max(h.slop,u.slop);for(var v=0;v<a.length;v++)l[v]=a[v].contact;var d=a.length;d<l.length&&(l.length=d),n.separation=o.depth,i.setActive(n,!0,r)}else n.isActive===!0&&i.setActive(n,!1,r)},i.setActive=function(n,o,r){o?(n.isActive=!0,n.timeUpdated=r):(n.isActive=!1,n.activeContacts.length=0)},i.id=function(n,o){return n.id<o.id?"A"+n.id+"B"+o.id:"A"+o.id+"B"+n.id}}()},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={CalculateFacesAt:i(252),CalculateFacesWithin:i(63),CheckIsoBounds:i(541),Copy:i(1420),CreateFromTiles:i(1421),CullBounds:i(543),CullTiles:i(544),Fill:i(1422),FilterTiles:i(1423),FindByIndex:i(1424),FindTile:i(1425),ForEachTile:i(1426),GetCullTilesFunction:i(1427),GetTileAt:i(158),GetTileAtWorldXY:i(1428),GetTilesWithin:i(26),GetTilesWithinShape:i(1429),GetTilesWithinWorldXY:i(529),GetTileToWorldXFunction:i(1430),GetTileToWorldXYFunction:i(1431),GetTileToWorldYFunction:i(1432),GetWorldToTileXFunction:i(1433),GetWorldToTileXYFunction:i(1434),GetWorldToTileYFunction:i(1435),HasTileAt:i(562),HasTileAtWorldXY:i(1436),HexagonalCullBounds:i(546),HexagonalCullTiles:i(545),HexagonalTileToWorldXY:i(550),HexagonalTileToWorldY:i(554),HexagonalWorldToTileXY:i(556),HexagonalWorldToTileY:i(560),IsInLayerBounds:i(119),IsometricCullTiles:i(547),IsometricTileToWorldXY:i(551),IsometricWorldToTileXY:i(557),PutTileAt:i(257),PutTileAtWorldXY:i(1437),PutTilesAt:i(1438),Randomize:i(1439),RemoveTileAt:i(563),RemoveTileAtWorldXY:i(1440),RenderDebug:i(1441),ReplaceByIndex:i(542),RunCull:i(159),SetCollision:i(1442),SetCollisionBetween:i(1443),SetCollisionByExclusion:i(1444),SetCollisionByProperty:i(1445),SetCollisionFromCollisionGroup:i(1446),SetLayerCollisionIndex:i(160),SetTileCollision:i(72),SetTileIndexCallback:i(1447),SetTileLocationCallback:i(1448),Shuffle:i(1449),StaggeredCullBounds:i(549),StaggeredCullTiles:i(548),StaggeredTileToWorldXY:i(552),StaggeredTileToWorldY:i(555),StaggeredWorldToTileXY:i(558),StaggeredWorldToTileY:i(561),SwapByIndex:i(1450),TileToWorldX:i(253),TileToWorldXY:i(553),TileToWorldY:i(254),WeightedRandomize:i(1451),WorldToTileX:i(255),WorldToTileXY:i(559),WorldToTileY:i(256)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(158),o=function(r,a,l){var h=n(r,a,!0,l),u=n(r,a-1,!0,l),v=n(r,a+1,!0,l),d=n(r-1,a,!0,l),c=n(r+1,a,!0,l),p=h&&h.collides;return p&&(h.faceTop=!0,h.faceBottom=!0,h.faceLeft=!0,h.faceRight=!0),u&&u.collides&&(p&&(h.faceTop=!1),u.faceBottom=!p),v&&v.collides&&(p&&(h.faceBottom=!1),v.faceTop=!p),d&&d.collides&&(p&&(h.faceLeft=!1),d.faceRight=!p),c&&c.collides&&(p&&(h.faceRight=!1),c.faceLeft=!p),h&&!h.collides&&h.resetFaces(),h};e.exports=o},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r){var a=r.baseTileWidth,l=r.tilemapLayer,h=0;return l&&(o||(o=l.scene.cameras.main),h=l.x+o.scrollX*(1-l.scrollFactorX),a*=l.scaleX),h+n*a};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r){var a=r.baseTileHeight,l=r.tilemapLayer,h=0;return l&&(o||(o=l.scene.cameras.main),h=l.y+o.scrollY*(1-l.scrollFactorY),a*=l.scaleY),h+n*a};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r,a){o===void 0&&(o=!0);var l=a.baseTileWidth,h=a.tilemapLayer;return h&&(r||(r=h.scene.cameras.main),n=n-(h.x+r.scrollX*(1-h.scrollFactorX)),l*=h.scaleX),o?Math.floor(n/l):n/l};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r,a){o===void 0&&(o=!0);var l=a.baseTileHeight,h=a.tilemapLayer;return h&&(r||(r=h.scene.cameras.main),n=n-(h.y+r.scrollY*(1-h.scrollFactorY)),l*=h.scaleY),o?Math.floor(n/l):n/l};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(85),o=i(119),r=i(252),a=i(72),l=function(h,u,v,d,c){if(d===void 0&&(d=!0),!o(u,v,c))return null;var p=c.data[v][u],g=p&&p.collides;if(h instanceof n)c.data[v][u]===null&&(c.data[v][u]=new n(c,h.index,u,v,c.tileWidth,c.tileHeight)),c.data[v][u].copy(h);else{var m=h;c.data[v][u]===null?c.data[v][u]=new n(c,m,u,v,c.tileWidth,c.tileHeight):c.data[v][u].index=m}var x=c.data[v][u],y=c.collideIndexes.indexOf(x.index)!==-1;return a(x,y),d&&g!==x.collides&&r(u,v,c),x};e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(29),o=function(r){return r=r.toLowerCase(),r==="isometric"?n.ISOMETRIC:r==="staggered"?n.STAGGERED:r==="hexagonal"?n.HEXAGONAL:n.ORTHOGONAL};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(40),o=i(120),r=i(121),a=i(85),l=function(h,u,v,d,c){for(var p=new o({tileWidth:v,tileHeight:d}),g=new r({name:h,tileWidth:v,tileHeight:d,format:n.ARRAY_2D,layers:[p]}),m=[],x=u.length,y=0,T=0;T<u.length;T++){m[T]=[];for(var C=u[T],S=0;S<C.length;S++){var E=parseInt(C[S],10);isNaN(E)||E===-1?m[T][S]=c?null:new a(p,-1,S,T,v,d):m[T][S]=new a(p,E,S,T,v,d)}y===0&&(y=C.length)}return g.width=p.width=y,g.height=p.height=x,g.widthInPixels=p.widthInPixels=y*v,g.heightInPixels=p.heightInPixels=x*d,p.data=m,g};e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(571),o=i(261),r=function(h){return{x:h.x,y:h.y}},a=["id","name","type","rotation","properties","visible","x","y","width","height"],l=function(h,u,v){u===void 0&&(u=0),v===void 0&&(v=0);var d=n(h,a);if(d.x+=u,d.y+=v,h.gid){var c=o(h.gid);d.gid=c.gid,d.flippedHorizontal=c.flippedHorizontal,d.flippedVertical=c.flippedVertical,d.flippedAntiDiagonal=c.flippedAntiDiagonal}else h.polyline?d.polyline=h.polyline.map(r):h.polygon?d.polygon=h.polygon.map(r):h.ellipse?d.ellipse=h.ellipse:h.text?d.text=h.text:h.point?d.point=!0:d.rectangle=!0;return d};e.exports=l},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=2147483648,n=1073741824,o=536870912,r=function(a){var l=Boolean(a&i),h=Boolean(a&n),u=Boolean(a&o);a=a&~(i|n|o);var v=0,d=!1;return l&&h&&u?(v=Math.PI/2,d=!0):l&&h&&!u?(v=Math.PI,d=!1):l&&!h&&u?(v=Math.PI/2,d=!1):l&&!h&&!u?(v=0,d=!0):!l&&h&&u?(v=3*Math.PI/2,d=!1):!l&&h&&!u?(v=Math.PI,d=!0):!l&&!h&&u?(v=3*Math.PI/2,d=!0):!l&&!h&&!u&&(v=0,d=!1),{gid:a,flippedHorizontal:l,flippedVertical:h,flippedAntiDiagonal:u,rotation:v,flipped:d}};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(40),o=i(121),r=i(564),a=i(580),l=function(h,u,v,d,c,p,g,m){v===void 0&&(v=32),d===void 0&&(d=32),c===void 0&&(c=10),p===void 0&&(p=10),m===void 0&&(m=!1);var x=null;if(Array.isArray(g)){var y=u!==void 0?u:"map";x=r(y,n.ARRAY_2D,g,v,d,m)}else if(u!==void 0){var T=h.cache.tilemap.get(u);T?x=r(u,T.format,T.data,v,d,m):console.warn("No map data found for key "+u)}return x===null&&(x=new o({tileWidth:v,tileHeight:d,width:c,height:p})),new a(h,x)};e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(6),o=function(r){var a=n(r,"targets",null);return a===null||(typeof a=="function"&&(a=a.call()),Array.isArray(a)||(a=[a])),a};e.exports=o},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function i(l){return!!l.getActive&&typeof l.getActive=="function"}function n(l){return!!l.getStart&&typeof l.getStart=="function"}function o(l){return!!l.getEnd&&typeof l.getEnd=="function"}function r(l){return n(l)||o(l)||i(l)}var a=function(l,h){var u,v=function(E,M,O){return O},d=function(E,M,O){return O},c=null,p=typeof h;if(p==="number")v=function(){return h};else if(p==="string"){var g=h[0],m=parseFloat(h.substr(2));switch(g){case"+":v=function(E,M,O){return O+m};break;case"-":v=function(E,M,O){return O-m};break;case"*":v=function(E,M,O){return O*m};break;case"/":v=function(E,M,O){return O/m};break;default:v=function(){return parseFloat(h)}}}else if(p==="function")v=h;else if(p==="object")if(r(h))i(h)&&(c=h.getActive),o(h)&&(v=h.getEnd),n(h)&&(d=h.getStart);else if(h.hasOwnProperty("value"))u=a(l,h.value);else{var x=h.hasOwnProperty("to"),y=h.hasOwnProperty("from"),T=h.hasOwnProperty("start");if(x&&(y||T)){if(u=a(l,h.to),T){var C=a(l,h.start);u.getActive=C.getEnd}if(y){var S=a(l,h.from);u.getStart=S.getEnd}}}return u||(u={getActive:c,getEnd:v,getStart:d}),u};e.exports=a},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={targets:null,delay:0,duration:1e3,ease:"Power0",easeParams:null,hold:0,repeat:0,repeatDelay:0,yoyo:!1,flipX:!1,flipY:!1};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(9),r=i(267),a=i(16),l=i(5),h=i(100),u=i(14),v=new n({Extends:o,initialize:function(c,p,g){o.call(this),this.parent=c,this.parentIsTimeline=c.hasOwnProperty("isTimeline"),this.data=p,this.totalData=p.length,this.targets=g,this.totalTargets=g.length,this.useFrames=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.startDelay=0,this.hasStarted=!1,this.isSeeking=!1,this.completeDelay=0,this.countdown=0,this.offset=0,this.calculatedOffset=0,this.state=h.PENDING_ADD,this._pausedState=h.INIT,this.paused=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.callbacks={onActive:null,onComplete:null,onLoop:null,onRepeat:null,onStart:null,onStop:null,onUpdate:null,onYoyo:null},this.callbackScope},getValue:function(d){return d===void 0&&(d=0),this.data[d].current},setTimeScale:function(d){return this.timeScale=d,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return this.state===h.ACTIVE},isPaused:function(){return this.state===h.PAUSED},hasTarget:function(d){return this.targets.indexOf(d)!==-1},updateTo:function(d,c,p){p===void 0&&(p=!1);for(var g=0;g<this.totalData;g++){var m=this.data[g];m.key===d&&(m.end=c,p&&(m.start=m.current))}return this},restart:function(){return this.elapsed=0,this.progress=0,this.totalElapsed=0,this.totalProgress=0,this.state===h.ACTIVE?this.seek(0):this.state===h.REMOVED?(this.seek(0),this.parent.makeActive(this),this):this.state===h.PENDING_ADD?this:this.play()},calcDuration:function(){for(var d=0,c=u.MAX_SAFE_INTEGER,p=this.data,g=0;g<this.totalData;g++){var m=p[g];m.t1=m.duration+m.hold,m.yoyo&&(m.t1+=m.duration),m.t2=m.t1+m.repeatDelay,m.totalDuration=m.delay+m.t1,m.repeat===-1?m.totalDuration+=m.t2*999999999999:m.repeat>0&&(m.totalDuration+=m.t2*m.repeat),m.totalDuration>d&&(d=m.totalDuration),m.delay<c&&(c=m.delay)}this.duration=Math.max(d,.001),this.loopCounter=this.loop===-1?999999999999:this.loop,this.loopCounter>0?this.totalDuration=this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.totalDuration=this.duration+this.completeDelay,this.startDelay=c},init:function(){if(this.paused&&!this.parentIsTimeline)return this.state=h.PENDING_ADD,this._pausedState=h.INIT,!1;for(var d=this.data,c=this.totalTargets,p=0;p<this.totalData;p++){var g=d[p],m=g.target,x=g.gen,y=g.key,T=g.index;g.delay=x.delay(m,y,0,T,c,this),g.duration=Math.max(x.duration(m,y,0,T,c,this),.001),g.hold=x.hold(m,y,0,T,c,this),g.repeat=x.repeat(m,y,0,T,c,this),g.repeatDelay=x.repeatDelay(m,y,0,T,c,this)}return this.calcDuration(),this.progress=0,this.totalProgress=0,this.elapsed=0,this.totalElapsed=0,this.state=h.INIT,!0},makeActive:function(){this.parent.makeActive(this),this.dispatchTweenEvent(r.TWEEN_ACTIVE,this.callbacks.onActive)},nextState:function(){this.loopCounter>0?(this.elapsed=0,this.progress=0,this.loopCounter--,this.resetTweenData(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.state=h.LOOP_DELAY):(this.state=h.ACTIVE,this.dispatchTweenEvent(r.TWEEN_LOOP,this.callbacks.onLoop))):this.completeDelay>0?(this.state=h.COMPLETE_DELAY,this.countdown=this.completeDelay):(this.state=h.PENDING_REMOVE,this.dispatchTweenEvent(r.TWEEN_COMPLETE,this.callbacks.onComplete))},pause:function(){return this.state===h.PAUSED?this:(this.paused=!0,this._pausedState=this.state,this.state=h.PAUSED,this)},play:function(d){d===void 0&&(d=!1);var c=this.state;return c===h.INIT&&!this.parentIsTimeline?(this.resetTweenData(!1),this.state=h.ACTIVE,this):c===h.ACTIVE||c===h.PENDING_ADD&&this._pausedState===h.PENDING_ADD?this:!this.parentIsTimeline&&(c===h.PENDING_REMOVE||c===h.REMOVED)?(this.seek(0),this.parent.makeActive(this),this):(this.parentIsTimeline?(this.resetTweenData(d),this.calculatedOffset===0?this.state=h.ACTIVE:(this.countdown=this.calculatedOffset,this.state=h.OFFSET_DELAY)):this.paused?(this.paused=!1,this.makeActive()):(this.resetTweenData(d),this.state=h.ACTIVE,this.makeActive()),this)},resetTweenData:function(d){for(var c=this.data,p=this.totalData,g=this.totalTargets,m=0;m<p;m++){var x=c[m],y=x.target,T=x.key,C=x.index;x.progress=0,x.elapsed=0,x.repeatCounter=x.repeat===-1?999999999999:x.repeat,d?(x.start=x.getStartValue(y,T,x.start,C,g,this),x.end=x.getEndValue(y,T,x.end,C,g,this),x.current=x.start,x.state=h.PLAYING_FORWARD):x.state=h.PENDING_RENDER,x.delay>0&&(x.elapsed=x.delay,x.state=h.DELAY),x.getActiveValue&&(y[T]=x.getActiveValue(x.target,x.key,x.start))}},resume:function(){return this.state===h.PAUSED?(this.paused=!1,this.state=this._pausedState):this.play(),this},seek:function(d,c){c===void 0&&(c=16.6),this.state===h.REMOVED&&this.makeActive(),this.elapsed=0,this.progress=0,this.totalElapsed=0,this.totalProgress=0;for(var p=this.data,g=this.totalTargets,m=0;m<this.totalData;m++){var x=p[m],y=x.target,T=x.gen,C=x.key,S=x.index;x.progress=0,x.elapsed=0,x.repeatCounter=x.repeat===-1?999999999999:x.repeat,x.delay=T.delay(y,C,0,S,g,this),x.duration=Math.max(T.duration(y,C,0,S,g,this),.001),x.hold=T.hold(y,C,0,S,g,this),x.repeat=T.repeat(y,C,0,S,g,this),x.repeatDelay=T.repeatDelay(y,C,0,S,g,this),x.current=x.start,x.state=h.PLAYING_FORWARD,this.updateTweenData(this,x,0,S,g),x.delay>0&&(x.elapsed=x.delay,x.state=h.DELAY)}this.calcDuration();var E=!1;this.state===h.PAUSED&&(E=!0,this.state=h.ACTIVE),this.isSeeking=!0;do this.update(0,c);while(this.totalProgress<d);return this.isSeeking=!1,E&&(this.state=h.PAUSED),this},setCallback:function(d,c,p,g){return this.callbacks[d]={func:c,scope:g,params:p},this},complete:function(d){return d===void 0&&(d=0),d?(this.state=h.COMPLETE_DELAY,this.countdown=d):(this.state=h.PENDING_REMOVE,this.dispatchTweenEvent(r.TWEEN_COMPLETE,this.callbacks.onComplete)),this},remove:function(){return this.parent.remove(this),this},stop:function(d){return this.state===h.ACTIVE&&d!==void 0&&this.seek(d),this.state!==h.REMOVED&&((this.state===h.PAUSED||this.state===h.PENDING_ADD)&&(this.parentIsTimeline?(this.parent.manager._destroy.push(this),this.parent.manager._toProcess++):(this.parent._destroy.push(this),this.parent._toProcess++)),this.dispatchTweenEvent(r.TWEEN_STOP,this.callbacks.onStop),this.removeAllListeners(),this.state=h.PENDING_REMOVE),this},update:function(d,c){if(this.state===h.PAUSED)return!1;switch(this.useFrames&&(c=1*this.parent.timeScale),c*=this.timeScale,this.elapsed+=c,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=c,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),this.state){case h.ACTIVE:!this.hasStarted&&!this.isSeeking&&(this.startDelay-=c,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchTweenEvent(r.TWEEN_START,this.callbacks.onStart)));for(var p=!1,g=0;g<this.totalData;g++){var m=this.data[g];this.updateTweenData(this,m,c)&&(p=!0)}p||this.nextState();break;case h.LOOP_DELAY:this.countdown-=c,this.countdown<=0&&(this.state=h.ACTIVE,this.dispatchTweenEvent(r.TWEEN_LOOP,this.callbacks.onLoop));break;case h.OFFSET_DELAY:this.countdown-=c,this.countdown<=0&&(this.state=h.ACTIVE);break;case h.COMPLETE_DELAY:this.countdown-=c,this.countdown<=0&&(this.state=h.PENDING_REMOVE,this.dispatchTweenEvent(r.TWEEN_COMPLETE,this.callbacks.onComplete));break}return this.state===h.PENDING_REMOVE},dispatchTweenDataEvent:function(d,c,p){this.isSeeking||(this.emit(d,this,p.key,p.target,p.current,p.previous),c&&(c.params[1]=p.target,c.func.apply(c.scope,c.params)))},dispatchTweenEvent:function(d,c){this.isSeeking||(this.emit(d,this,this.targets),c&&(c.params[1]=this.targets,c.func.apply(c.scope,c.params)))},setStateFromEnd:function(d,c,p){return c.yoyo?(c.elapsed=p,c.progress=p/c.duration,c.flipX&&c.target.toggleFlipX(),c.flipY&&c.target.toggleFlipY(),this.dispatchTweenDataEvent(r.TWEEN_YOYO,d.callbacks.onYoyo,c),c.start=c.getStartValue(c.target,c.key,c.start,c.index,d.totalTargets,d),h.PLAYING_BACKWARD):c.repeatCounter>0?(c.repeatCounter--,c.elapsed=p,c.progress=p/c.duration,c.flipX&&c.target.toggleFlipX(),c.flipY&&c.target.toggleFlipY(),c.start=c.getStartValue(c.target,c.key,c.start,c.index,d.totalTargets,d),c.end=c.getEndValue(c.target,c.key,c.start,c.index,d.totalTargets,d),c.repeatDelay>0?(c.elapsed=c.repeatDelay-p,c.current=c.start,c.target[c.key]=c.current,h.REPEAT_DELAY):(this.dispatchTweenDataEvent(r.TWEEN_REPEAT,d.callbacks.onRepeat,c),h.PLAYING_FORWARD)):h.COMPLETE},setStateFromStart:function(d,c,p){return c.repeatCounter>0?(c.repeatCounter--,c.elapsed=p,c.progress=p/c.duration,c.flipX&&c.target.toggleFlipX(),c.flipY&&c.target.toggleFlipY(),c.end=c.getEndValue(c.target,c.key,c.start,c.index,d.totalTargets,d),c.repeatDelay>0?(c.elapsed=c.repeatDelay-p,c.current=c.start,c.target[c.key]=c.current,h.REPEAT_DELAY):(this.dispatchTweenDataEvent(r.TWEEN_REPEAT,d.callbacks.onRepeat,c),h.PLAYING_FORWARD)):h.COMPLETE},updateTweenData:function(d,c,p){var g=c.target;switch(c.state){case h.PLAYING_FORWARD:case h.PLAYING_BACKWARD:if(!g){c.state=h.COMPLETE;break}var m=c.elapsed,x=c.duration,y=0;m+=p,m>x&&(y=m-x,m=x);var T=c.state===h.PLAYING_FORWARD,C=m/x;if(c.elapsed=m,c.progress=C,c.previous=c.current,C===1)T?(c.current=c.end,g[c.key]=c.end,c.hold>0?(c.elapsed=c.hold-y,c.state=h.HOLD_DELAY):c.state=this.setStateFromEnd(d,c,y)):(c.current=c.start,g[c.key]=c.start,c.state=this.setStateFromStart(d,c,y));else{var S=T?c.ease(C):c.ease(1-C);c.current=c.start+(c.end-c.start)*S,g[c.key]=c.current}this.dispatchTweenDataEvent(r.TWEEN_UPDATE,d.callbacks.onUpdate,c);break;case h.DELAY:c.elapsed-=p,c.elapsed<=0&&(c.elapsed=Math.abs(c.elapsed),c.state=h.PENDING_RENDER);break;case h.REPEAT_DELAY:c.elapsed-=p,c.elapsed<=0&&(c.elapsed=Math.abs(c.elapsed),c.state=h.PLAYING_FORWARD,this.dispatchTweenDataEvent(r.TWEEN_REPEAT,d.callbacks.onRepeat,c));break;case h.HOLD_DELAY:c.elapsed-=p,c.elapsed<=0&&(c.state=this.setStateFromEnd(d,c,Math.abs(c.elapsed)));break;case h.PENDING_RENDER:g?(c.start=c.getStartValue(g,c.key,g[c.key],c.index,d.totalTargets,d),c.end=c.getEndValue(g,c.key,c.start,c.index,d.totalTargets,d),c.current=c.start,g[c.key]=c.start,c.state=h.PLAYING_FORWARD):c.state=h.COMPLETE;break}return c.state!==h.COMPLETE}});v.TYPES=["onActive","onComplete","onLoop","onRepeat","onStart","onStop","onUpdate","onYoyo"],l.register("tween",function(d){return this.scene.sys.tweens.add(d)}),a.register("tween",function(d){return this.scene.sys.tweens.create(d)}),e.exports=v},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={TIMELINE_COMPLETE:i(1466),TIMELINE_LOOP:i(1467),TIMELINE_PAUSE:i(1468),TIMELINE_RESUME:i(1469),TIMELINE_START:i(1470),TIMELINE_UPDATE:i(1471),TWEEN_ACTIVE:i(1472),TWEEN_COMPLETE:i(1473),TWEEN_LOOP:i(1474),TWEEN_REPEAT:i(1475),TWEEN_START:i(1476),TWEEN_STOP:i(1477),TWEEN_UPDATE:i(1478),TWEEN_YOYO:i(1479)}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r,a,l,h,u,v,d,c,p,g,m,x,y){return{target:n,index:o,key:r,getActiveValue:h,getEndValue:a,getStartValue:l,ease:u,duration:0,totalDuration:0,delay:0,yoyo:c,hold:0,repeat:0,repeatDelay:0,flipX:x,flipY:y,progress:0,elapsed:0,repeatCounter:0,start:0,previous:0,current:0,end:0,t1:0,t2:0,gen:{delay:v,duration:d,hold:p,repeat:g,repeatDelay:m},state:0}};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(68),o=function(r){return n(r,-Math.PI,Math.PI)};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(68),o=function(r){return n(r,-180,180)};e.exports=o},function(e,f,i){var n={};e.exports=n;var o=i(83),r=i(32);(function(){n.fromVertices=function(a){for(var l={},h=0;h<a.length;h++){var u=(h+1)%a.length,v=o.normalise({x:a[u].y-a[h].y,y:a[h].x-a[u].x}),d=v.y===0?1/0:v.x/v.y;d=d.toFixed(3).toString(),l[d]=v}return r.values(l)},n.rotate=function(a,l){if(l!==0)for(var h=Math.cos(l),u=Math.sin(l),v=0;v<a.length;v++){var d=a[v],c;c=d.x*h-d.y*u,d.y=d.x*u+d.y*h,d.x=c}}})()},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={AFTER_ADD:i(1504),AFTER_REMOVE:i(1505),AFTER_UPDATE:i(1506),BEFORE_ADD:i(1507),BEFORE_REMOVE:i(1508),BEFORE_UPDATE:i(1509),COLLISION_ACTIVE:i(1510),COLLISION_END:i(1511),COLLISION_START:i(1512),DRAG_END:i(1513),DRAG:i(1514),DRAG_START:i(1515),PAUSE:i(1516),RESUME:i(1517),SLEEP_END:i(1518),SLEEP_START:i(1519)}},function(e,f,i){var n={};e.exports=n;var o=i(274),r=i(250),a=i(84);(function(){n.collisions=function(l,h){for(var u=[],v=h.pairs.table,d=h.metrics,c=0;c<l.length;c++){var p=l[c][0],g=l[c][1];if(!((p.isStatic||p.isSleeping)&&(g.isStatic||g.isSleeping))&&!!n.canCollide(p.collisionFilter,g.collisionFilter)&&(d.midphaseTests+=1,a.overlaps(p.bounds,g.bounds)))for(var m=p.parts.length>1?1:0;m<p.parts.length;m++)for(var x=p.parts[m],y=g.parts.length>1?1:0;y<g.parts.length;y++){var T=g.parts[y];if(x===p&&T===g||a.overlaps(x.bounds,T.bounds)){var C=r.id(x,T),S=v[C],E;S&&S.isActive?E=S.collision:E=null;var M=o.collides(x,T,E);d.narrowphaseTests+=1,M.reused&&(d.narrowReuseCount+=1),M.collided&&(u.push(M),d.narrowDetections+=1)}}}return u},n.canCollide=function(l,h){return l.group===h.group&&l.group!==0?l.group>0:(l.mask&h.category)!==0&&(h.mask&l.category)!==0}})()},function(e,f,i){var n={};e.exports=n;var o=i(64),r=i(83);(function(){n.collides=function(a,l,h){var u,v,d,c,p=!1;if(h){var g=a.parent,m=l.parent,x=g.speed*g.speed+g.angularSpeed*g.angularSpeed+m.speed*m.speed+m.angularSpeed*m.angularSpeed;p=h&&h.collided&&x<.2,c=h}else c={collided:!1,bodyA:a,bodyB:l};if(h&&p){var y=c.axisBody,T=y===a?l:a,C=[y.axes[h.axisNumber]];if(d=n._overlapAxes(y.vertices,T.vertices,C),c.reused=!0,d.overlap<=0)return c.collided=!1,c}else{if(u=n._overlapAxes(a.vertices,l.vertices,a.axes),u.overlap<=0||(v=n._overlapAxes(l.vertices,a.vertices,l.axes),v.overlap<=0))return c.collided=!1,c;u.overlap<v.overlap?(d=u,c.axisBody=a):(d=v,c.axisBody=l),c.axisNumber=d.axisNumber}c.bodyA=a.id<l.id?a:l,c.bodyB=a.id<l.id?l:a,c.collided=!0,c.depth=d.overlap,c.parentA=c.bodyA.parent,c.parentB=c.bodyB.parent,a=c.bodyA,l=c.bodyB,r.dot(d.axis,r.sub(l.position,a.position))<0?c.normal={x:d.axis.x,y:d.axis.y}:c.normal={x:-d.axis.x,y:-d.axis.y},c.tangent=r.perp(c.normal),c.penetration=c.penetration||{},c.penetration.x=c.normal.x*c.depth,c.penetration.y=c.normal.y*c.depth;var S=n._findSupports(a,l,c.normal),E=[];if(o.contains(a.vertices,S[0])&&E.push(S[0]),o.contains(a.vertices,S[1])&&E.push(S[1]),E.length<2){var M=n._findSupports(l,a,r.neg(c.normal));o.contains(l.vertices,M[0])&&E.push(M[0]),E.length<2&&o.contains(l.vertices,M[1])&&E.push(M[1])}return E.length<1&&(E=[S[0]]),c.supports=E,c},n._overlapAxes=function(a,l,h){for(var u=r._temp[0],v=r._temp[1],d={overlap:Number.MAX_VALUE},c,p,g=0;g<h.length;g++){if(p=h[g],n._projectToAxis(u,a,p),n._projectToAxis(v,l,p),c=Math.min(u.max-v.min,v.max-u.min),c<=0)return d.overlap=c,d;c<d.overlap&&(d.overlap=c,d.axis=p,d.axisNumber=g)}return d},n._projectToAxis=function(a,l,h){for(var u=r.dot(l[0],h),v=u,d=1;d<l.length;d+=1){var c=r.dot(l[d],h);c>v?v=c:c<u&&(u=c)}a.min=u,a.max=v},n._findSupports=function(a,l,h){for(var u=Number.MAX_VALUE,v=r._temp[0],d=l.vertices,c=a.position,p,g,m,x,y=0;y<d.length;y++)g=d[y],v.x=g.x-c.x,v.y=g.y-c.y,p=-r.dot(h,v),p<u&&(u=p,m=g);var T=m.index-1>=0?m.index-1:d.length-1;g=d[T],v.x=g.x-c.x,v.y=g.y-c.y,u=-r.dot(h,v),x=g;var C=(m.index+1)%d.length;return g=d[C],v.x=g.x-c.x,v.y=g.y-c.y,p=-r.dot(h,v),p<u&&(x=g),[m,x]}})()},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={AlignTo:i(601),Angle:i(602),Call:i(603),GetFirst:i(604),GetLast:i(605),GridAlign:i(606),IncAlpha:i(678),IncX:i(679),IncXY:i(680),IncY:i(681),PlaceOnCircle:i(682),PlaceOnEllipse:i(683),PlaceOnLine:i(684),PlaceOnRectangle:i(685),PlaceOnTriangle:i(686),PlayAnimation:i(687),PropertyValueInc:i(46),PropertyValueSet:i(27),RandomCircle:i(688),RandomEllipse:i(689),RandomLine:i(690),RandomRectangle:i(691),RandomTriangle:i(692),Rotate:i(693),RotateAround:i(694),RotateAroundDistance:i(695),ScaleX:i(696),ScaleXY:i(697),ScaleY:i(698),SetAlpha:i(699),SetBlendMode:i(700),SetDepth:i(701),SetHitArea:i(702),SetOrigin:i(703),SetRotation:i(704),SetScale:i(705),SetScaleX:i(706),SetScaleY:i(707),SetScrollFactor:i(708),SetScrollFactorX:i(709),SetScrollFactorY:i(710),SetTint:i(711),SetVisible:i(712),SetX:i(713),SetXY:i(714),SetY:i(715),ShiftPosition:i(716),Shuffle:i(717),SmootherStep:i(718),SmoothStep:i(719),Spread:i(720),ToggleVisible:i(721),WrapInRectangle:i(722)}},function(e,f,i){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(123),o=[];o[n.BOTTOM_CENTER]=i(277),o[n.BOTTOM_LEFT]=i(278),o[n.BOTTOM_RIGHT]=i(279),o[n.LEFT_BOTTOM]=i(280),o[n.LEFT_CENTER]=i(281),o[n.LEFT_TOP]=i(282),o[n.RIGHT_BOTTOM]=i(283),o[n.RIGHT_CENTER]=i(284),o[n.RIGHT_TOP]=i(285),o[n.TOP_CENTER]=i(286),o[n.TOP_LEFT]=i(287),o[n.TOP_RIGHT]=i(288);var r=function(a,l,h,u,v){return o[h](a,l,u,v)};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(42),o=i(87),r=i(88),a=i(52),l=function(h,u,v,d){return v===void 0&&(v=0),d===void 0&&(d=0),r(h,o(u)+v),a(h,n(u)+d),h};e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(42),o=i(43),r=i(53),a=i(52),l=function(h,u,v,d){return v===void 0&&(v=0),d===void 0&&(d=0),r(h,o(u)-v),a(h,n(u)+d),h};e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(42),o=i(44),r=i(54),a=i(52),l=function(h,u,v,d){return v===void 0&&(v=0),d===void 0&&(d=0),r(h,o(u)+v),a(h,n(u)+d),h};e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(42),o=i(43),r=i(55),a=i(54),l=function(h,u,v,d){return v===void 0&&(v=0),d===void 0&&(d=0),a(h,o(u)-v),r(h,n(u)+d),h};e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(89),o=i(43),r=i(90),a=i(54),l=function(h,u,v,d){return v===void 0&&(v=0),d===void 0&&(d=0),a(h,o(u)-v),r(h,n(u)+d),h};e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(43),o=i(45),r=i(54),a=i(52),l=function(h,u,v,d){return v===void 0&&(v=0),d===void 0&&(d=0),r(h,n(u)-v),a(h,o(u)-d),h};e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(42),o=i(44),r=i(55),a=i(53),l=function(h,u,v,d){return v===void 0&&(v=0),d===void 0&&(d=0),a(h,o(u)+v),r(h,n(u)+d),h};e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(89),o=i(44),r=i(90),a=i(53),l=function(h,u,v,d){return v===void 0&&(v=0),d===void 0&&(d=0),a(h,o(u)+v),r(h,n(u)+d),h};e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(44),o=i(45),r=i(53),a=i(52),l=function(h,u,v,d){return v===void 0&&(v=0),d===void 0&&(d=0),r(h,n(u)+v),a(h,o(u)-d),h};e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(87),o=i(45),r=i(55),a=i(88),l=function(h,u,v,d){return v===void 0&&(v=0),d===void 0&&(d=0),a(h,n(u)+v),r(h,o(u)-d),h};e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(43),o=i(45),r=i(55),a=i(53),l=function(h,u,v,d){return v===void 0&&(v=0),d===void 0&&(d=0),a(h,n(u)-v),r(h,o(u)-d),h};e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(44),o=i(45),r=i(55),a=i(54),l=function(h,u,v,d){return v===void 0&&(v=0),d===void 0&&(d=0),a(h,n(u)+v),r(h,o(u)-d),h};e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(123),o=[];o[n.BOTTOM_CENTER]=i(290),o[n.BOTTOM_LEFT]=i(291),o[n.BOTTOM_RIGHT]=i(292),o[n.CENTER]=i(293),o[n.LEFT_CENTER]=i(295),o[n.RIGHT_CENTER]=i(296),o[n.TOP_CENTER]=i(297),o[n.TOP_LEFT]=i(298),o[n.TOP_RIGHT]=i(299),o[n.LEFT_BOTTOM]=o[n.BOTTOM_LEFT],o[n.LEFT_TOP]=o[n.TOP_LEFT],o[n.RIGHT_BOTTOM]=o[n.BOTTOM_RIGHT],o[n.RIGHT_TOP]=o[n.TOP_RIGHT];var r=function(a,l,h,u,v){return o[h](a,l,u,v)};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(42),o=i(87),r=i(55),a=i(88),l=function(h,u,v,d){return v===void 0&&(v=0),d===void 0&&(d=0),a(h,o(u)+v),r(h,n(u)+d),h};e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(42),o=i(43),r=i(55),a=i(53),l=function(h,u,v,d){return v===void 0&&(v=0),d===void 0&&(d=0),a(h,o(u)-v),r(h,n(u)+d),h};e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(42),o=i(44),r=i(55),a=i(54),l=function(h,u,v,d){return v===void 0&&(v=0),d===void 0&&(d=0),a(h,o(u)+v),r(h,n(u)+d),h};e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(294),o=i(87),r=i(89),a=function(l,h,u,v){return u===void 0&&(u=0),v===void 0&&(v=0),n(l,o(h)+u,r(h)+v),l};e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(88),o=i(90),r=function(a,l,h){return n(a,l),o(a,h)};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(89),o=i(43),r=i(90),a=i(53),l=function(h,u,v,d){return v===void 0&&(v=0),d===void 0&&(d=0),a(h,o(u)-v),r(h,n(u)+d),h};e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(89),o=i(44),r=i(90),a=i(54),l=function(h,u,v,d){return v===void 0&&(v=0),d===void 0&&(d=0),a(h,o(u)+v),r(h,n(u)+d),h};e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(87),o=i(45),r=i(88),a=i(52),l=function(h,u,v,d){return v===void 0&&(v=0),d===void 0&&(d=0),r(h,n(u)+v),a(h,o(u)-d),h};e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(43),o=i(45),r=i(53),a=i(52),l=function(h,u,v,d){return v===void 0&&(v=0),d===void 0&&(d=0),r(h,n(u)-v),a(h,o(u)-d),h};e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(44),o=i(45),r=i(54),a=i(52),l=function(h,u,v,d){return v===void 0&&(v=0),d===void 0&&(d=0),r(h,n(u)+v),a(h,o(u)-d),h};e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(169),o=i(98),r=i(14),a=i(4),l=function(h,u,v){v===void 0&&(v=new a);var d=o(u,0,r.PI2);return n(h,d,v)};e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(302),o=i(169),r=i(98),a=i(14),l=function(h,u,v,d){d===void 0&&(d=[]),!u&&v>0&&(u=n(h)/v);for(var c=0;c<u;c++){var p=r(c/u,0,a.PI2);d.push(o(h,p))}return d};e.exports=l},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return 2*(Math.PI*n.radius)};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(18),o=2,r={_alpha:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(a){return a===void 0&&(a=1),this.alpha=a,this},alpha:{get:function(){return this._alpha},set:function(a){var l=n(a,0,1);this._alpha=l,l===0?this.renderFlags&=~o:this.renderFlags|=o}}};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(35),o={_blendMode:n.NORMAL,blendMode:{get:function(){return this._blendMode},set:function(r){typeof r=="string"&&(r=n[r]),r|=0,r>=-1&&(this._blendMode=r)}},setBlendMode:function(r){return this.blendMode=r,this}};e.exports=o},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={_depth:0,depth:{get:function(){return this._depth},set:function(n){this.displayList&&this.displayList.queueDepthSort(),this._depth=n}},setDepth:function(n){return n===void 0&&(n=0),this.depth=n,this}};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(171),o=i(130),r=function(a,l,h,u){u===void 0&&(u=[]),!l&&h>0&&(l=o(a)/h);for(var v=0;v<l;v++){var d=v/l;u.push(n(a,d))}return u};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4),o=function(r,a,l){return l===void 0&&(l=new n),l.x=r.x1+(r.x2-r.x1)*a,l.y=r.y1+(r.y2-r.y1)*a,l};e.exports=o},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r,a){var l=Math.cos(a),h=Math.sin(a),u=n.x-o,v=n.y-r;return n.x=u*l-v*h+o,n.y=u*h+v*l+r,n};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(310),o=i(311),r={mask:null,setMask:function(a){return this.mask=a,this},clearMask:function(a){return a===void 0&&(a=!1),a&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function(a){return a===void 0&&(this.texture||this.shader)&&(a=this),new n(this.scene,a)},createGeometryMask:function(a){return a===void 0&&this.type==="Graphics"&&(a=this),new o(this.scene,a)}};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(22),r=i(91),a=new n({initialize:function(h,u){var v=h.sys.renderer;this.renderer=v,this.bitmapMask=u,this.maskTexture=null,this.mainTexture=null,this.dirty=!0,this.mainFramebuffer=null,this.maskFramebuffer=null,this.invertAlpha=!1,this.isStencil=!1,this.createMask(),h.sys.game.events.on(o.CONTEXT_RESTORED,this.createMask,this),v&&v.on(r.RESIZE,this.createMask,this)},createMask:function(){var l=this.renderer;if(!(!l||!l.gl)){this.mainTexture&&this.clearMask();var h=l.width,u=l.height,v=(h&h-1)===0&&(u&u-1)===0,d=l.gl,c=v?d.REPEAT:d.CLAMP_TO_EDGE,p=d.LINEAR;this.mainTexture=l.createTexture2D(0,p,p,c,c,d.RGBA,null,h,u),this.maskTexture=l.createTexture2D(0,p,p,c,c,d.RGBA,null,h,u),this.mainFramebuffer=l.createFramebuffer(h,u,this.mainTexture,!0),this.maskFramebuffer=l.createFramebuffer(h,u,this.maskTexture,!0)}},clearMask:function(){var l=this.renderer;!l||!l.gl||!this.mainTexture||(l.deleteTexture(this.mainTexture),l.deleteTexture(this.maskTexture),l.deleteFramebuffer(this.mainFramebuffer),l.deleteFramebuffer(this.maskFramebuffer),this.mainTexture=null,this.maskTexture=null,this.mainFramebuffer=null,this.maskFramebuffer=null)},setBitmap:function(l){this.bitmapMask=l},preRenderWebGL:function(l,h,u){l.pipelines.BITMAPMASK_PIPELINE.beginMask(this,h,u)},postRenderWebGL:function(l,h){l.pipelines.BITMAPMASK_PIPELINE.endMask(this,h)},preRenderCanvas:function(){},postRenderCanvas:function(){},destroy:function(){this.clearMask(),this.renderer&&this.renderer.off(r.RESIZE,this.createMask,this),this.bitmapMask=null,this.prevFramebuffer=null,this.renderer=null}});e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=new n({initialize:function(a,l){this.geometryMask=l,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function(r){return this.geometryMask=r,this},setInvertAlpha:function(r){return r===void 0&&(r=!0),this.invertAlpha=r,this},preRenderWebGL:function(r,a,l){var h=r.gl;r.flush(),r.maskStack.length===0&&(h.enable(h.STENCIL_TEST),h.clear(h.STENCIL_BUFFER_BIT),r.maskCount=0),r.currentCameraMask.mask!==this&&(r.currentMask.mask=this),r.maskStack.push({mask:this,camera:l}),this.applyStencil(r,l,!0),r.maskCount++},applyStencil:function(r,a,l){var h=r.gl,u=this.geometryMask,v=r.maskCount;h.colorMask(!1,!1,!1,!1),l?(h.stencilFunc(h.EQUAL,v,255),h.stencilOp(h.KEEP,h.KEEP,h.INCR)):(h.stencilFunc(h.EQUAL,v+1,255),h.stencilOp(h.KEEP,h.KEEP,h.DECR)),u.renderWebGL(r,u,a),r.flush(),h.colorMask(!0,!0,!0,!0),h.stencilOp(h.KEEP,h.KEEP,h.KEEP),l?this.invertAlpha?h.stencilFunc(h.NOTEQUAL,v+1,255):h.stencilFunc(h.EQUAL,v+1,255):this.invertAlpha?h.stencilFunc(h.NOTEQUAL,v,255):h.stencilFunc(h.EQUAL,v,255)},postRenderWebGL:function(r){var a=r.gl;r.maskStack.pop(),r.maskCount--,r.flush();var l=r.currentMask;if(r.maskStack.length===0)l.mask=null,a.disable(a.STENCIL_TEST);else{var h=r.maskStack[r.maskStack.length-1];h.mask.applyStencil(r,h.camera,!1),r.currentCameraMask.mask!==h.mask?(l.mask=h.mask,l.camera=h.camera):l.mask=null}},preRenderCanvas:function(r,a,l){var h=this.geometryMask;r.currentContext.save(),h.renderCanvas(r,h,l,null,null,!0),r.currentContext.clip()},postRenderCanvas:function(r){r.currentContext.restore()},destroy:function(){this.geometryMask=null}});e.exports=o},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function(n,o){return o===void 0&&(o=n),this.scrollFactorX=n,this.scrollFactorY=o,this}};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(14),o=i(25),r=i(177),a=i(269),l=i(270),h=i(3),u=4,v={_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(d){this._scaleX=d,this._scaleY=d,d===0?this.renderFlags&=~u:this.renderFlags|=u}},scaleX:{get:function(){return this._scaleX},set:function(d){this._scaleX=d,d===0?this.renderFlags&=~u:this.renderFlags|=u}},scaleY:{get:function(){return this._scaleY},set:function(d){this._scaleY=d,d===0?this.renderFlags&=~u:this.renderFlags|=u}},angle:{get:function(){return l(this._rotation*n.RAD_TO_DEG)},set:function(d){this.rotation=l(d)*n.DEG_TO_RAD}},rotation:{get:function(){return this._rotation},set:function(d){this._rotation=a(d)}},setPosition:function(d,c,p,g){return d===void 0&&(d=0),c===void 0&&(c=d),p===void 0&&(p=0),g===void 0&&(g=0),this.x=d,this.y=c,this.z=p,this.w=g,this},copyPosition:function(d){return d.x!==void 0&&(this.x=d.x),d.y!==void 0&&(this.y=d.y),d.z!==void 0&&(this.z=d.z),d.w!==void 0&&(this.w=d.w),this},setRandomPosition:function(d,c,p,g){return d===void 0&&(d=0),c===void 0&&(c=0),p===void 0&&(p=this.scene.sys.scale.width),g===void 0&&(g=this.scene.sys.scale.height),this.x=d+Math.random()*p,this.y=c+Math.random()*g,this},setRotation:function(d){return d===void 0&&(d=0),this.rotation=d,this},setAngle:function(d){return d===void 0&&(d=0),this.angle=d,this},setScale:function(d,c){return d===void 0&&(d=1),c===void 0&&(c=d),this.scaleX=d,this.scaleY=c,this},setX:function(d){return d===void 0&&(d=0),this.x=d,this},setY:function(d){return d===void 0&&(d=0),this.y=d,this},setZ:function(d){return d===void 0&&(d=0),this.z=d,this},setW:function(d){return d===void 0&&(d=0),this.w=d,this},getLocalTransformMatrix:function(d){return d===void 0&&(d=new o),d.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function(d,c){d===void 0&&(d=new o),c===void 0&&(c=new o);var p=this.parentContainer;if(!p)return this.getLocalTransformMatrix(d);for(d.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);p;)c.applyITRS(p.x,p.y,p._rotation,p._scaleX,p._scaleY),c.multiply(d,d),p=p.parentContainer;return d},getLocalPoint:function(d,c,p,g){p||(p=new h),g||(g=this.scene.sys.cameras.main);var m=g.scrollX,x=g.scrollY,y=d+m*this.scrollFactorX-m,T=c+x*this.scrollFactorY-x;return this.parentContainer?this.getWorldTransformMatrix().applyInverse(y,T,p):r(y,T,this.x,this.y,this.rotation,this.scaleX,this.scaleY,p),this._originComponent&&(p.x+=this._displayOriginX,p.y+=this._displayOriginY),p},getParentRotation:function(){for(var d=0,c=this.parentContainer;c;)d+=c.rotation,c=c.parentContainer;return d}};e.exports=v},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=1,n={_visible:!0,visible:{get:function(){return this._visible},set:function(o){o?(this._visible=!0,this.renderFlags|=i):(this._visible=!1,this.renderFlags&=~i)}},setVisible:function(o){return this.visible=o,this}};e.exports=n},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={CHANGE_DATA:i(638),CHANGE_DATA_KEY:i(639),DESTROY:i(640),REMOVE_DATA:i(641),SET_DATA:i(642)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(130),o=i(4),r=function(a,l,h,u){if(u===void 0&&(u=[]),!l&&!h)return u;l?h=Math.round(n(a)/l):l=n(a)/h;for(var v=a.x,d=a.y,c=0,p=0;p<h;p++)switch(u.push(new o(v,d)),c){case 0:v+=l,v>=a.right&&(c=1,d+=v-a.right,v=a.right);break;case 1:d+=l,d>=a.bottom&&(c=2,v-=d-a.bottom,d=a.bottom);break;case 2:v-=l,v<=a.left&&(c=3,d-=a.left-v,v=a.left);break;case 3:d-=l,d<=a.top&&(c=0,d=a.top);break}return u};e.exports=r},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r){o===void 0&&(o=1),r===void 0&&(r=[]);var a=Math.round(n.x1),l=Math.round(n.y1),h=Math.round(n.x2),u=Math.round(n.y2),v=Math.abs(h-a),d=Math.abs(u-l),c=a<h?1:-1,p=l<u?1:-1,g=v-d;r.push({x:a,y:l});for(var m=1;!(a===h&&l===u);){var x=g<<1;x>-d&&(g-=d,a+=c),x<v&&(g+=v,l+=p),m%o===0&&r.push({x:a,y:l}),m++}return r};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r){if(o.length){if(o.length===1)return o[0]}else return NaN;var a=1,l,h;if(r){if(n<o[0][r])return o[0];for(;o[a][r]<n;)a++}else for(;o[a]<n;)a++;return a>o.length&&(a=o.length),r?(l=o[a-1][r],h=o[a][r],h-n<=n-l?o[a]:o[a-1]):(l=o[a-1],h=o[a],h-n<=n-l?h:l)};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=new n({initialize:function(a,l,h,u,v){v===void 0&&(v=!1),this.textureKey=a,this.textureFrame=l,this.index=h,this.frame=u,this.isFirst=!1,this.isLast=!1,this.prevFrame=null,this.nextFrame=null,this.duration=0,this.progress=0,this.isKeyFrame=v},toJSON:function(){return{key:this.textureKey,frame:this.textureFrame,duration:this.duration,keyframe:this.isKeyFrame}},destroy:function(){this.frame=void 0}});e.exports=o},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){var o=/\D/g;return n.sort(function(r,a){return parseInt(r.replace(o,""),10)-parseInt(a.replace(o,""),10)}),n};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(185),o=i(0),r=i(102),a=i(9),l=i(132),h=i(22),u=i(2),v=i(6),d=i(186),c=i(322),p=new o({Extends:a,initialize:function(m){a.call(this),this.game=m,this.textureManager=null,this.globalTimeScale=1,this.anims=new r,this.mixes=new r,this.paused=!1,this.name="AnimationManager",m.events.once(h.BOOT,this.boot,this)},boot:function(){this.textureManager=this.game.textures,this.game.events.once(h.DESTROY,this.destroy,this)},addMix:function(g,m,x){var y=this.anims,T=this.mixes,C=typeof g=="string"?g:g.key,S=typeof m=="string"?m:m.key;if(y.has(C)&&y.has(S)){var E=T.get(C);E||(E={}),E[S]=x,T.set(C,E)}return this},removeMix:function(g,m){var x=this.mixes,y=typeof g=="string"?g:g.key,T=x.get(y);if(T)if(m){var C=typeof m=="string"?m:m.key;T.hasOwnProperty(C)&&delete T[C]}else m||x.delete(y);return this},getMix:function(g,m){var x=this.mixes,y=typeof g=="string"?g:g.key,T=typeof m=="string"?m:m.key,C=x.get(y);return C&&C.hasOwnProperty(T)?C[T]:0},add:function(g,m){return this.anims.has(g)?(console.warn("Animation key exists: "+g),this):(m.key=g,this.anims.set(g,m),this.emit(l.ADD_ANIMATION,g,m),this)},exists:function(g){return this.anims.has(g)},createFromAseprite:function(g,m){var x=[],y=this.game.cache.json.get(g);if(!y)return x;var T=this,C=v(y,"meta",null),S=v(y,"frames",null);if(C&&S){var E=v(C,"frameTags",[]);E.forEach(function(M){var O=[],L=u(M,"name",null),R=u(M,"from",0),w=u(M,"to",0),D=u(M,"direction","forward");if(!!L&&(!m||m&&m.indexOf(L)>-1)){for(var B=[],N=Number.MAX_SAFE_INTEGER,z=R;z<=w;z++){var X=z.toString(),k=S[X];if(k){var K=u(k,"duration",Number.MAX_SAFE_INTEGER);K<N&&(N=K),B.push({frame:X,duration:K})}}B.forEach(function(Y){O.push({key:g,frame:Y.frame,duration:N-Y.duration})});var b=N*O.length;D==="reverse"&&(O=O.reverse());var I={key:L,frames:O,duration:b,yoyo:D==="pingpong"},G=T.create(I);G&&x.push(G)}})}return x},create:function(g){var m=g.key,x=!1;return m&&(x=this.get(m),x||(x=new n(this,m,g),this.anims.set(m,x),this.emit(l.ADD_ANIMATION,m,x))),x},fromJSON:function(g,m){m===void 0&&(m=!1),m&&this.anims.clear(),typeof g=="string"&&(g=JSON.parse(g));var x=[];if(g.hasOwnProperty("anims")&&Array.isArray(g.anims)){for(var y=0;y<g.anims.length;y++)x.push(this.create(g.anims[y]));g.hasOwnProperty("globalTimeScale")&&(this.globalTimeScale=g.globalTimeScale)}else g.hasOwnProperty("key")&&g.type==="frame"&&x.push(this.create(g));return x},generateFrameNames:function(g,m){var x=v(m,"prefix",""),y=v(m,"start",0),T=v(m,"end",0),C=v(m,"suffix",""),S=v(m,"zeroPad",0),E=v(m,"outputArray",[]),M=v(m,"frames",!1),O=this.textureManager.get(g);if(!O)return E;var L;if(m)for(M||(M=c(y,T)),L=0;L<M.length;L++){var R=x+d(M[L],S,"0",1)+C;O.has(R)?E.push({key:g,frame:R}):console.warn("generateFrameNames: Frame missing: "+R+" from texture: "+g)}else for(M=O.getFrameNames(),L=0;L<M.length;L++)E.push({key:g,frame:M[L]});return E},generateFrameNumbers:function(g,m){var x=v(m,"start",0),y=v(m,"end",-1),T=v(m,"first",!1),C=v(m,"outputArray",[]),S=v(m,"frames",!1),E=this.textureManager.get(g);if(!E)return C;T&&E.has(T)&&C.push({key:g,frame:T}),S||(y===-1&&(y=E.frameTotal-2),S=c(x,y));for(var M=0;M<S.length;M++)E.has(S[M])?C.push({key:g,frame:S[M]}):console.warn("generateFrameNumbers: Frame "+M+" missing from texture: "+g);return C},get:function(g){return this.anims.get(g)},pauseAll:function(){return this.paused||(this.paused=!0,this.emit(l.PAUSE_ALL)),this},play:function(g,m){Array.isArray(m)||(m=[m]);for(var x=0;x<m.length;x++)m[x].anims.play(g);return this},staggerPlay:function(g,m,x,y){x===void 0&&(x=0),y===void 0&&(y=!0),Array.isArray(m)||(m=[m]);var T=m.length;y||T--;for(var C=0;C<m.length;C++){var S=x<0?Math.abs(x)*(T-C):x*C;m[C].anims.playAfterDelay(g,S)}return this},remove:function(g){var m=this.get(g);return m&&(this.emit(l.REMOVE_ANIMATION,g,m),this.anims.delete(g),this.removeMix(g)),m},resumeAll:function(){return this.paused&&(this.paused=!1,this.emit(l.RESUME_ALL)),this},toJSON:function(g){var m={anims:[],globalTimeScale:this.globalTimeScale};return g!==void 0&&g!==""?m.anims.push(this.anims.get(g).toJSON()):this.anims.each(function(x,y){m.anims.push(y.toJSON())}),m},destroy:function(){this.anims.clear(),this.mixes.clear(),this.textureManager=null,this.game=null}});e.exports=p},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r,a){var l=[],h,u=!1;if((r||a)&&(u=!0,r||(r=""),a||(a="")),o<n)for(h=n;h>=o;h--)u?l.push(r+h.toString()+a):l.push(h);else for(h=n;h<=o;h++)u?l.push(r+h.toString()+a):l.push(h);return l};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(102),r=i(9),a=i(324),l=new n({initialize:function(){this.entries=new o,this.events=new r},add:function(h,u){return this.entries.set(h,u),this.events.emit(a.ADD,this,h,u),this},has:function(h){return this.entries.has(h)},exists:function(h){return this.entries.has(h)},get:function(h){return this.entries.get(h)},remove:function(h){var u=this.get(h);return u&&(this.entries.delete(h),this.events.emit(a.REMOVE,this,h,u.data)),this},getKeys:function(){return this.entries.keys()},destroy:function(){this.entries.clear(),this.events.removeAllListeners(),this.entries=null,this.events=null}});e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ADD:i(736),REMOVE:i(737)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(323),o=i(0),r=i(22),a=new o({initialize:function(h){this.game=h,this.binary=new n,this.bitmapFont=new n,this.json=new n,this.physics=new n,this.shader=new n,this.audio=new n,this.video=new n,this.text=new n,this.html=new n,this.obj=new n,this.tilemap=new n,this.xml=new n,this.custom={},this.game.events.once(r.DESTROY,this.destroy,this)},addCustom:function(l){return this.custom.hasOwnProperty(l)||(this.custom[l]=new n),this.custom[l]},destroy:function(){for(var l=["binary","bitmapFont","json","physics","shader","audio","video","text","html","obj","tilemap","xml"],h=0;h<l.length;h++)this[l[h]].destroy(),this[l[h]]=null;for(var u in this.custom)this.custom[u].destroy();this.custom=null,this.game=null}});e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(133),o=i(190),r=i(18),a=i(0),l=i(11),h=i(333),u=i(37),v=i(135),d=i(10),c=i(3),p=new a({Extends:n,Mixins:[l.Flip,l.Tint,l.Pipeline],initialize:function(m,x,y,T){n.call(this,m,x,y,T),this.postPipelines=[],this.pipelineData={},this.inputEnabled=!0,this.fadeEffect=new h.Fade(this),this.flashEffect=new h.Flash(this),this.shakeEffect=new h.Shake(this),this.panEffect=new h.Pan(this),this.rotateToEffect=new h.RotateTo(this),this.zoomEffect=new h.Zoom(this),this.lerp=new c(1,1),this.followOffset=new c,this.deadzone=null,this._follow=null},setDeadzone:function(g,m){if(g===void 0)this.deadzone=null;else{if(this.deadzone?(this.deadzone.width=g,this.deadzone.height=m):this.deadzone=new d(0,0,g,m),this._follow){var x=this.width/2,y=this.height/2,T=this._follow.x-this.followOffset.x,C=this._follow.y-this.followOffset.y;this.midPoint.set(T,C),this.scrollX=T-x,this.scrollY=C-y}o(this.deadzone,this.midPoint.x,this.midPoint.y)}return this},fadeIn:function(g,m,x,y,T,C){return this.fadeEffect.start(!1,g,m,x,y,!0,T,C)},fadeOut:function(g,m,x,y,T,C){return this.fadeEffect.start(!0,g,m,x,y,!0,T,C)},fadeFrom:function(g,m,x,y,T,C,S){return this.fadeEffect.start(!1,g,m,x,y,T,C,S)},fade:function(g,m,x,y,T,C,S){return this.fadeEffect.start(!0,g,m,x,y,T,C,S)},flash:function(g,m,x,y,T,C,S){return this.flashEffect.start(g,m,x,y,T,C,S)},shake:function(g,m,x,y,T){return this.shakeEffect.start(g,m,x,y,T)},pan:function(g,m,x,y,T,C,S){return this.panEffect.start(g,m,x,y,T,C,S)},rotateTo:function(g,m,x,y,T,C,S){return this.rotateToEffect.start(g,m,x,y,T,C,S)},zoomTo:function(g,m,x,y,T,C){return this.zoomEffect.start(g,m,x,y,T,C)},preRender:function(){this.renderList.length=0;var g=this.width,m=this.height,x=g*.5,y=m*.5,T=this.zoom,C=this.matrix,S=g*this.originX,E=m*this.originY,M=this._follow,O=this.deadzone,L=this.scrollX,R=this.scrollY;O&&o(O,this.midPoint.x,this.midPoint.y);var w=!1;if(M&&!this.panEffect.isRunning){var D=M.x-this.followOffset.x,B=M.y-this.followOffset.y;O?(D<O.x?L=v(L,L-(O.x-D),this.lerp.x):D>O.right&&(L=v(L,L+(D-O.right),this.lerp.x)),B<O.y?R=v(R,R-(O.y-B),this.lerp.y):B>O.bottom&&(R=v(R,R+(B-O.bottom),this.lerp.y))):(L=v(L,D-S,this.lerp.x),R=v(R,B-E,this.lerp.y)),w=!0}this.useBounds&&(L=this.clampX(L),R=this.clampY(R)),this.roundPixels&&(S=Math.round(S),E=Math.round(E),L=Math.round(L),R=Math.round(R)),this.scrollX=L,this.scrollY=R;var N=L+x,z=R+y;this.midPoint.set(N,z);var X=g/T,k=m/T,K=N-X/2,b=z-k/2;this.roundPixels&&(K=Math.round(K),b=Math.round(b)),this.worldView.setTo(K,b,X,k),C.applyITRS(this.x+S,this.y+E,this.rotation,T,T),C.translate(-S,-E),this.shakeEffect.preRender(),w&&this.emit(u.FOLLOW_UPDATE,this,M)},setLerp:function(g,m){return g===void 0&&(g=1),m===void 0&&(m=g),this.lerp.set(g,m),this},setFollowOffset:function(g,m){return g===void 0&&(g=0),m===void 0&&(m=0),this.followOffset.set(g,m),this},startFollow:function(g,m,x,y,T,C){m===void 0&&(m=!1),x===void 0&&(x=1),y===void 0&&(y=x),T===void 0&&(T=0),C===void 0&&(C=T),this._follow=g,this.roundPixels=m,x=r(x,0,1),y=r(y,0,1),this.lerp.set(x,y),this.followOffset.set(T,C);var S=this.width/2,E=this.height/2,M=g.x-T,O=g.y-C;return this.midPoint.set(M,O),this.scrollX=M-S,this.scrollY=O-E,this.useBounds&&(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},stopFollow:function(){return this._follow=null,this},resetFX:function(){return this.rotateToEffect.reset(),this.panEffect.reset(),this.shakeEffect.reset(),this.flashEffect.reset(),this.fadeEffect.reset(),this},update:function(g,m){this.visible&&(this.rotateToEffect.update(g,m),this.panEffect.update(g,m),this.zoomEffect.update(g,m),this.shakeEffect.update(g,m),this.flashEffect.update(g,m),this.fadeEffect.update(g,m))},destroy:function(){this.resetFX(),n.prototype.destroy.call(this),this._follow=null,this.deadzone=null}});e.exports=p},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(38),o=function(r){var a=new n;r=r.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,function(d,c,p,g){return c+c+p+p+g+g});var l=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(r);if(l){var h=parseInt(l[1],16),u=parseInt(l[2],16),v=parseInt(l[3],16);a.setTo(h,u,v)}return a};e.exports=o},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r,a){return a<<24|n<<16|o<<8|r};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r,a){a===void 0&&(a={h:0,s:0,v:0}),n/=255,o/=255,r/=255;var l=Math.min(n,o,r),h=Math.max(n,o,r),u=h-l,v=0,d=h===0?0:u/h,c=h;return h!==l&&(h===n?v=(o-r)/u+(o<r?6:0):h===o?v=(r-n)/u+2:h===r&&(v=(n-o)/u+4),v/=6),a.hasOwnProperty("_h")?(a._h=v,a._s=d,a._v=c):(a.h=v,a.s=d,a.v=c),a};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n>16777215?{a:n>>>24,r:n>>16&255,g:n>>8&255,b:n&255}:{a:255,r:n>>16&255,g:n>>8&255,b:n&255}};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(38),o=function(r){return new n(r.r,r.g,r.b,r.a)};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(38),o=function(r){var a=new n,l=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(r.toLowerCase());if(l){var h=parseInt(l[1],10),u=parseInt(l[2],10),v=parseInt(l[3],10),d=l[4]!==void 0?parseFloat(l[4]):1;a.setTo(h,u,v,d*255)}return a};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Fade:i(761),Flash:i(762),Pan:i(763),Shake:i(796),RotateTo:i(797),Zoom:i(798)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={In:i(764),Out:i(765),InOut:i(766)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={In:i(767),Out:i(768),InOut:i(769)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={In:i(770),Out:i(771),InOut:i(772)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={In:i(773),Out:i(774),InOut:i(775)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={In:i(776),Out:i(777),InOut:i(778)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={In:i(779),Out:i(780),InOut:i(781)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports=i(782)},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={In:i(783),Out:i(784),InOut:i(785)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={In:i(786),Out:i(787),InOut:i(788)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={In:i(789),Out:i(790),InOut:i(791)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={In:i(792),Out:i(793),InOut:i(794)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports=i(795)},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(33),r=i(347),a=i(2),l=i(6),h=i(7),u=i(193),v=i(1),d=i(197),c=i(187),p=new n({initialize:function(m){m===void 0&&(m={});var x=["#ff0000","#ffff00","#00ff00","#00ffff","#000000"],y="#ffffff";this.width=l(m,"width",1024),this.height=l(m,"height",768),this.zoom=l(m,"zoom",1),this.parent=l(m,"parent",void 0),this.scaleMode=l(m,"scaleMode",0),this.expandParent=l(m,"expandParent",!0),this.autoRound=l(m,"autoRound",!1),this.autoCenter=l(m,"autoCenter",0),this.resizeInterval=l(m,"resizeInterval",500),this.fullscreenTarget=l(m,"fullscreenTarget",null),this.minWidth=l(m,"minWidth",0),this.maxWidth=l(m,"maxWidth",0),this.minHeight=l(m,"minHeight",0),this.maxHeight=l(m,"maxHeight",0);var T=l(m,"scale",null);T&&(this.width=l(T,"width",this.width),this.height=l(T,"height",this.height),this.zoom=l(T,"zoom",this.zoom),this.parent=l(T,"parent",this.parent),this.scaleMode=l(T,"mode",this.scaleMode),this.expandParent=l(T,"expandParent",this.expandParent),this.autoRound=l(T,"autoRound",this.autoRound),this.autoCenter=l(T,"autoCenter",this.autoCenter),this.resizeInterval=l(T,"resizeInterval",this.resizeInterval),this.fullscreenTarget=l(T,"fullscreenTarget",this.fullscreenTarget),this.minWidth=l(T,"min.width",this.minWidth),this.maxWidth=l(T,"max.width",this.maxWidth),this.minHeight=l(T,"min.height",this.minHeight),this.maxHeight=l(T,"max.height",this.maxHeight)),this.renderType=l(m,"type",o.AUTO),this.canvas=l(m,"canvas",null),this.context=l(m,"context",null),this.canvasStyle=l(m,"canvasStyle",null),this.customEnvironment=l(m,"customEnvironment",!1),this.sceneConfig=l(m,"scene",null),this.seed=l(m,"seed",[(Date.now()*Math.random()).toString()]),u.RND=new u.RandomDataGenerator(this.seed),this.gameTitle=l(m,"title",""),this.gameURL=l(m,"url","https://phaser.io"),this.gameVersion=l(m,"version",""),this.autoFocus=l(m,"autoFocus",!0),this.domCreateContainer=l(m,"dom.createContainer",!1),this.domBehindCanvas=l(m,"dom.behindCanvas",!1),this.domPointerEvents=l(m,"dom.pointerEvents","none"),this.inputKeyboard=l(m,"input.keyboard",!0),this.inputKeyboardEventTarget=l(m,"input.keyboard.target",window),this.inputKeyboardCapture=l(m,"input.keyboard.capture",[]),this.inputMouse=l(m,"input.mouse",!0),this.inputMouseEventTarget=l(m,"input.mouse.target",null),this.inputMousePreventDefaultDown=l(m,"input.mouse.preventDefaultDown",!0),this.inputMousePreventDefaultUp=l(m,"input.mouse.preventDefaultUp",!0),this.inputMousePreventDefaultMove=l(m,"input.mouse.preventDefaultMove",!0),this.inputMousePreventDefaultWheel=l(m,"input.mouse.preventDefaultWheel",!0),this.inputTouch=l(m,"input.touch",r.input.touch),this.inputTouchEventTarget=l(m,"input.touch.target",null),this.inputTouchCapture=l(m,"input.touch.capture",!0),this.inputActivePointers=l(m,"input.activePointers",1),this.inputSmoothFactor=l(m,"input.smoothFactor",0),this.inputWindowEvents=l(m,"input.windowEvents",!0),this.inputGamepad=l(m,"input.gamepad",!1),this.inputGamepadEventTarget=l(m,"input.gamepad.target",window),this.disableContextMenu=l(m,"disableContextMenu",!1),this.audio=l(m,"audio",{}),this.hideBanner=l(m,"banner",null)===!1,this.hidePhaser=l(m,"banner.hidePhaser",!1),this.bannerTextColor=l(m,"banner.text",y),this.bannerBackgroundColor=l(m,"banner.background",x),this.gameTitle===""&&this.hidePhaser&&(this.hideBanner=!0),this.fps=l(m,"fps",null);var C=l(m,"render",m);this.pipeline=l(C,"pipeline",null),this.antialias=l(C,"antialias",!0),this.antialiasGL=l(C,"antialiasGL",!0),this.mipmapFilter=l(C,"mipmapFilter","LINEAR"),this.desynchronized=l(C,"desynchronized",!1),this.roundPixels=l(C,"roundPixels",!1),this.pixelArt=l(C,"pixelArt",this.zoom!==1),this.pixelArt&&(this.antialias=!1,this.antialiasGL=!1,this.roundPixels=!0),this.transparent=l(C,"transparent",!1),this.clearBeforeRender=l(C,"clearBeforeRender",!0),this.preserveDrawingBuffer=l(C,"preserveDrawingBuffer",!1),this.premultipliedAlpha=l(C,"premultipliedAlpha",!0),this.failIfMajorPerformanceCaveat=l(C,"failIfMajorPerformanceCaveat",!1),this.powerPreference=l(C,"powerPreference","default"),this.batchSize=l(C,"batchSize",4096),this.maxTextures=l(C,"maxTextures",-1),this.maxLights=l(C,"maxLights",10);var S=l(m,"backgroundColor",0);this.backgroundColor=c(S),this.transparent&&(this.backgroundColor=c(0),this.backgroundColor.alpha=0),this.preBoot=l(m,"callbacks.preBoot",v),this.postBoot=l(m,"callbacks.postBoot",v),this.physics=l(m,"physics",{}),this.defaultPhysicsSystem=l(this.physics,"default",!1),this.loaderBaseURL=l(m,"loader.baseURL",""),this.loaderPath=l(m,"loader.path","");var E=r.os.android?6:32;this.loaderMaxParallelDownloads=l(m,"loader.maxParallelDownloads",E),this.loaderCrossOrigin=l(m,"loader.crossOrigin",void 0),this.loaderResponseType=l(m,"loader.responseType",""),this.loaderAsync=l(m,"loader.async",!0),this.loaderUser=l(m,"loader.user",""),this.loaderPassword=l(m,"loader.password",""),this.loaderTimeout=l(m,"loader.timeout",0),this.loaderWithCredentials=l(m,"loader.withCredentials",!1),this.installGlobalPlugins=[],this.installScenePlugins=[];var M=l(m,"plugins",null),O=d.DefaultScene;M&&(Array.isArray(M)?this.defaultPlugins=M:h(M)&&(this.installGlobalPlugins=a(M,"global",[]),this.installScenePlugins=a(M,"scene",[]),Array.isArray(M.default)?O=M.default:Array.isArray(M.defaultMerge)&&(O=O.concat(M.defaultMerge)))),this.defaultPlugins=O;var L="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAg";this.defaultImage=l(m,"images.default",L+"AQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg=="),this.missingImage=l(m,"images.missing",L+"CAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg=="),this.whiteImage=l(m,"images.white","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAIAAAAmkwkpAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABdJREFUeNpi/P//PwMMMDEgAdwcgAADAJZuAwXJYZOzAAAAAElFTkSuQmCC"),window&&(window.FORCE_WEBGL?this.renderType=o.WEBGL:window.FORCE_CANVAS&&(this.renderType=o.CANVAS))}});e.exports=p},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={os:i(105),browser:i(136),features:i(191),input:i(808),audio:i(809),video:i(810),fullscreen:i(811),canvasFeatures:i(348)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(31),o={supportInverseAlpha:!1,supportNewBlendModes:!1};function r(){var h="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",u="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",v=new Image;return v.onload=function(){var d=new Image;d.onload=function(){var c=n.create(d,6,1),p=c.getContext("2d");if(p.globalCompositeOperation="multiply",p.drawImage(v,0,0),p.drawImage(d,2,0),!p.getImageData(2,0,1,1))return!1;var g=p.getImageData(2,0,1,1).data;n.remove(d),o.supportNewBlendModes=g[0]===255&&g[1]===0&&g[2]===0},d.src=h+"/wCKxvRF"+u},v.src=h+"AP804Oa6"+u,!1}function a(){var h=n.create(this,2,1),u=h.getContext("2d");u.fillStyle="rgba(10, 20, 30, 0.5)",u.fillRect(0,0,1,1);var v=u.getImageData(0,0,1,1);if(v===null)return!1;u.putImageData(v,1,0);var d=u.getImageData(1,0,1,1);return d.data[0]===v.data[0]&&d.data[1]===v.data[1]&&d.data[2]===v.data[2]&&d.data[3]===v.data[3]}function l(){return typeof importScripts!="function"&&document!==void 0&&(o.supportNewBlendModes=r(),o.supportInverseAlpha=a()),o}e.exports=l()},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r,a){return Math.atan2(a-o,r-n)};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return Math.atan2(o.y-n.y,o.x-n.x)};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n=n%(2*Math.PI),n>=0?n:n+2*Math.PI};e.exports=i},function(e,f){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){var r=n.x-o.x,a=n.y-o.y;return Math.sqrt(r*r+a*a)};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r,a){var l=n-r,h=o-a;return l*l+h*h};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r){return r===void 0&&(r=1e-4),n>o-r};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r){return r===void 0&&(r=1e-4),n<o+r};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(357),o=function(r,a){return n(r)/n(a)/n(r-a)};e.exports=o},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){if(n===0)return 1;for(var o=n;--n;)o*=n;return o};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function i(l,h){var u=1-l;return u*u*u*h}function n(l,h){var u=1-l;return 3*u*u*l*h}function o(l,h){return 3*(1-l)*l*l*h}function r(l,h){return l*l*l*h}var a=function(l,h,u,v,d){return i(l,h)+n(l,u)+o(l,v)+r(l,d)};e.exports=a},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function i(a,l){var h=1-a;return h*h*l}function n(a,l){return 2*(1-a)*a*l}function o(a,l){return a*a*l}var r=function(a,l,h,u){return i(a,l)+n(a,h)+o(a,u)};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(184),o=function(r,a,l){return a+(l-a)*n(r,0,1)};e.exports=o},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){var o=Math.log(n)/.6931471805599453;return 1<<Math.ceil(o)};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){var r=n.x,a=n.y;return n.x=r*Math.cos(o)-a*Math.sin(o),n.y=r*Math.sin(o)+a*Math.cos(o),n};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n>0?Math.ceil(n):Math.floor(n)};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=new n({initialize:function(a){this.val=new Float32Array(9),a?this.copy(a):this.identity()},clone:function(){return new o(this)},set:function(r){return this.copy(r)},copy:function(r){var a=this.val,l=r.val;return a[0]=l[0],a[1]=l[1],a[2]=l[2],a[3]=l[3],a[4]=l[4],a[5]=l[5],a[6]=l[6],a[7]=l[7],a[8]=l[8],this},fromMat4:function(r){var a=r.val,l=this.val;return l[0]=a[0],l[1]=a[1],l[2]=a[2],l[3]=a[4],l[4]=a[5],l[5]=a[6],l[6]=a[8],l[7]=a[9],l[8]=a[10],this},fromArray:function(r){var a=this.val;return a[0]=r[0],a[1]=r[1],a[2]=r[2],a[3]=r[3],a[4]=r[4],a[5]=r[5],a[6]=r[6],a[7]=r[7],a[8]=r[8],this},identity:function(){var r=this.val;return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=1,r[5]=0,r[6]=0,r[7]=0,r[8]=1,this},transpose:function(){var r=this.val,a=r[1],l=r[2],h=r[5];return r[1]=r[3],r[2]=r[6],r[3]=a,r[5]=r[7],r[6]=l,r[7]=h,this},invert:function(){var r=this.val,a=r[0],l=r[1],h=r[2],u=r[3],v=r[4],d=r[5],c=r[6],p=r[7],g=r[8],m=g*v-d*p,x=-g*u+d*c,y=p*u-v*c,T=a*m+l*x+h*y;return T?(T=1/T,r[0]=m*T,r[1]=(-g*l+h*p)*T,r[2]=(d*l-h*v)*T,r[3]=x*T,r[4]=(g*a-h*c)*T,r[5]=(-d*a+h*u)*T,r[6]=y*T,r[7]=(-p*a+l*c)*T,r[8]=(v*a-l*u)*T,this):null},adjoint:function(){var r=this.val,a=r[0],l=r[1],h=r[2],u=r[3],v=r[4],d=r[5],c=r[6],p=r[7],g=r[8];return r[0]=v*g-d*p,r[1]=h*p-l*g,r[2]=l*d-h*v,r[3]=d*c-u*g,r[4]=a*g-h*c,r[5]=h*u-a*d,r[6]=u*p-v*c,r[7]=l*c-a*p,r[8]=a*v-l*u,this},determinant:function(){var r=this.val,a=r[0],l=r[1],h=r[2],u=r[3],v=r[4],d=r[5],c=r[6],p=r[7],g=r[8];return a*(g*v-d*p)+l*(-g*u+d*c)+h*(p*u-v*c)},multiply:function(r){var a=this.val,l=a[0],h=a[1],u=a[2],v=a[3],d=a[4],c=a[5],p=a[6],g=a[7],m=a[8],x=r.val,y=x[0],T=x[1],C=x[2],S=x[3],E=x[4],M=x[5],O=x[6],L=x[7],R=x[8];return a[0]=y*l+T*v+C*p,a[1]=y*h+T*d+C*g,a[2]=y*u+T*c+C*m,a[3]=S*l+E*v+M*p,a[4]=S*h+E*d+M*g,a[5]=S*u+E*c+M*m,a[6]=O*l+L*v+R*p,a[7]=O*h+L*d+R*g,a[8]=O*u+L*c+R*m,this},translate:function(r){var a=this.val,l=r.x,h=r.y;return a[6]=l*a[0]+h*a[3]+a[6],a[7]=l*a[1]+h*a[4]+a[7],a[8]=l*a[2]+h*a[5]+a[8],this},rotate:function(r){var a=this.val,l=a[0],h=a[1],u=a[2],v=a[3],d=a[4],c=a[5],p=Math.sin(r),g=Math.cos(r);return a[0]=g*l+p*v,a[1]=g*h+p*d,a[2]=g*u+p*c,a[3]=g*v-p*l,a[4]=g*d-p*h,a[5]=g*c-p*u,this},scale:function(r){var a=this.val,l=r.x,h=r.y;return a[0]=l*a[0],a[1]=l*a[1],a[2]=l*a[2],a[3]=h*a[3],a[4]=h*a[4],a[5]=h*a[5],this},fromQuat:function(r){var a=r.x,l=r.y,h=r.z,u=r.w,v=a+a,d=l+l,c=h+h,p=a*v,g=a*d,m=a*c,x=l*d,y=l*c,T=h*c,C=u*v,S=u*d,E=u*c,M=this.val;return M[0]=1-(x+T),M[3]=g+E,M[6]=m-S,M[1]=g-E,M[4]=1-(p+T),M[7]=y+C,M[2]=m+S,M[5]=y-C,M[8]=1-(p+x),this},normalFromMat4:function(r){var a=r.val,l=this.val,h=a[0],u=a[1],v=a[2],d=a[3],c=a[4],p=a[5],g=a[6],m=a[7],x=a[8],y=a[9],T=a[10],C=a[11],S=a[12],E=a[13],M=a[14],O=a[15],L=h*p-u*c,R=h*g-v*c,w=h*m-d*c,D=u*g-v*p,B=u*m-d*p,N=v*m-d*g,z=x*E-y*S,X=x*M-T*S,k=x*O-C*S,K=y*M-T*E,b=y*O-C*E,I=T*O-C*M,G=L*I-R*b+w*K+D*k-B*X+N*z;return G?(G=1/G,l[0]=(p*I-g*b+m*K)*G,l[1]=(g*k-c*I-m*X)*G,l[2]=(c*b-p*k+m*z)*G,l[3]=(v*b-u*I-d*K)*G,l[4]=(h*I-v*k+d*X)*G,l[5]=(u*k-h*b-d*z)*G,l[6]=(E*N-M*B+O*D)*G,l[7]=(M*w-S*N-O*R)*G,l[8]=(S*B-E*w+O*L)*G,this):null}});e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(364),r=i(1),a=i(39),l=1e-6,h=new Int8Array([1,2,0]),u=new Float32Array([0,0,0]),v=new a(1,0,0),d=new a(0,1,0),c=new a,p=new o,g=new n({initialize:function(x,y,T,C){this.onChangeCallback=r,this.set(x,y,T,C)},x:{get:function(){return this._x},set:function(m){this._x=m,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(m){this._y=m,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(m){this._z=m,this.onChangeCallback(this)}},w:{get:function(){return this._w},set:function(m){this._w=m,this.onChangeCallback(this)}},copy:function(m){return this.set(m)},set:function(m,x,y,T,C){return C===void 0&&(C=!0),typeof m=="object"?(this._x=m.x||0,this._y=m.y||0,this._z=m.z||0,this._w=m.w||0):(this._x=m||0,this._y=x||0,this._z=y||0,this._w=T||0),C&&this.onChangeCallback(this),this},add:function(m){return this._x+=m.x,this._y+=m.y,this._z+=m.z,this._w+=m.w,this.onChangeCallback(this),this},subtract:function(m){return this._x-=m.x,this._y-=m.y,this._z-=m.z,this._w-=m.w,this.onChangeCallback(this),this},scale:function(m){return this._x*=m,this._y*=m,this._z*=m,this._w*=m,this.onChangeCallback(this),this},length:function(){var m=this.x,x=this.y,y=this.z,T=this.w;return Math.sqrt(m*m+x*x+y*y+T*T)},lengthSq:function(){var m=this.x,x=this.y,y=this.z,T=this.w;return m*m+x*x+y*y+T*T},normalize:function(){var m=this.x,x=this.y,y=this.z,T=this.w,C=m*m+x*x+y*y+T*T;return C>0&&(C=1/Math.sqrt(C),this._x=m*C,this._y=x*C,this._z=y*C,this._w=T*C),this.onChangeCallback(this),this},dot:function(m){return this.x*m.x+this.y*m.y+this.z*m.z+this.w*m.w},lerp:function(m,x){x===void 0&&(x=0);var y=this.x,T=this.y,C=this.z,S=this.w;return this.set(y+x*(m.x-y),T+x*(m.y-T),C+x*(m.z-C),S+x*(m.w-S))},rotationTo:function(m,x){var y=m.x*x.x+m.y*x.y+m.z*x.z;return y<-.999999?(c.copy(v).cross(m).length()<l&&c.copy(d).cross(m),c.normalize(),this.setAxisAngle(c,Math.PI)):y>.999999?this.set(0,0,0,1):(c.copy(m).cross(x),this._x=c.x,this._y=c.y,this._z=c.z,this._w=1+y,this.normalize())},setAxes:function(m,x,y){var T=p.val;return T[0]=x.x,T[3]=x.y,T[6]=x.z,T[1]=y.x,T[4]=y.y,T[7]=y.z,T[2]=-m.x,T[5]=-m.y,T[8]=-m.z,this.fromMat3(p).normalize()},identity:function(){return this.set(0,0,0,1)},setAxisAngle:function(m,x){x=x*.5;var y=Math.sin(x);return this.set(y*m.x,y*m.y,y*m.z,Math.cos(x))},multiply:function(m){var x=this.x,y=this.y,T=this.z,C=this.w,S=m.x,E=m.y,M=m.z,O=m.w;return this.set(x*O+C*S+y*M-T*E,y*O+C*E+T*S-x*M,T*O+C*M+x*E-y*S,C*O-x*S-y*E-T*M)},slerp:function(m,x){var y=this.x,T=this.y,C=this.z,S=this.w,E=m.x,M=m.y,O=m.z,L=m.w,R=y*E+T*M+C*O+S*L;R<0&&(R=-R,E=-E,M=-M,O=-O,L=-L);var w=1-x,D=x;if(1-R>l){var B=Math.acos(R),N=Math.sin(B);w=Math.sin((1-x)*B)/N,D=Math.sin(x*B)/N}return this.set(w*y+D*E,w*T+D*M,w*C+D*O,w*S+D*L)},invert:function(){var m=this.x,x=this.y,y=this.z,T=this.w,C=m*m+x*x+y*y+T*T,S=C?1/C:0;return this.set(-m*S,-x*S,-y*S,T*S)},conjugate:function(){return this._x=-this.x,this._y=-this.y,this._z=-this.z,this.onChangeCallback(this),this},rotateX:function(m){m*=.5;var x=this.x,y=this.y,T=this.z,C=this.w,S=Math.sin(m),E=Math.cos(m);return this.set(x*E+C*S,y*E+T*S,T*E-y*S,C*E-x*S)},rotateY:function(m){m*=.5;var x=this.x,y=this.y,T=this.z,C=this.w,S=Math.sin(m),E=Math.cos(m);return this.set(x*E-T*S,y*E+C*S,T*E+x*S,C*E-y*S)},rotateZ:function(m){m*=.5;var x=this.x,y=this.y,T=this.z,C=this.w,S=Math.sin(m),E=Math.cos(m);return this.set(x*E+y*S,y*E-x*S,T*E+C*S,C*E-T*S)},calculateW:function(){var m=this.x,x=this.y,y=this.z;return this.w=-Math.sqrt(1-m*m-x*x-y*y),this},setFromEuler:function(m,x){var y=m.x/2,T=m.y/2,C=m.z/2,S=Math.cos(y),E=Math.cos(T),M=Math.cos(C),O=Math.sin(y),L=Math.sin(T),R=Math.sin(C);switch(m.order){case"XYZ":{this.set(O*E*M+S*L*R,S*L*M-O*E*R,S*E*R+O*L*M,S*E*M-O*L*R,x);break}case"YXZ":{this.set(O*E*M+S*L*R,S*L*M-O*E*R,S*E*R-O*L*M,S*E*M+O*L*R,x);break}case"ZXY":{this.set(O*E*M-S*L*R,S*L*M+O*E*R,S*E*R+O*L*M,S*E*M-O*L*R,x);break}case"ZYX":{this.set(O*E*M-S*L*R,S*L*M+O*E*R,S*E*R-O*L*M,S*E*M+O*L*R,x);break}case"YZX":{this.set(O*E*M+S*L*R,S*L*M+O*E*R,S*E*R-O*L*M,S*E*M-O*L*R,x);break}case"XZY":{this.set(O*E*M-S*L*R,S*L*M-O*E*R,S*E*R+O*L*M,S*E*M+O*L*R,x);break}}return this},setFromRotationMatrix:function(m){var x=m.val,y=x[0],T=x[4],C=x[8],S=x[1],E=x[5],M=x[9],O=x[2],L=x[6],R=x[10],w=y+E+R,D;return w>0?(D=.5/Math.sqrt(w+1),this.set((L-M)*D,(C-O)*D,(S-T)*D,.25/D)):y>E&&y>R?(D=2*Math.sqrt(1+y-E-R),this.set(.25*D,(T+S)/D,(C+O)/D,(L-M)/D)):E>R?(D=2*Math.sqrt(1+E-y-R),this.set((T+S)/D,.25*D,(M+L)/D,(C-O)/D)):(D=2*Math.sqrt(1+R-y-E),this.set((C+O)/D,(M+L)/D,.25*D,(S-T)/D)),this},fromMat3:function(m){var x=m.val,y=x[0]+x[4]+x[8],T;if(y>0)T=Math.sqrt(y+1),this.w=.5*T,T=.5/T,this._x=(x[7]-x[5])*T,this._y=(x[2]-x[6])*T,this._z=(x[3]-x[1])*T;else{var C=0;x[4]>x[0]&&(C=1),x[8]>x[C*3+C]&&(C=2);var S=h[C],E=h[S];T=Math.sqrt(x[C*3+C]-x[S*3+S]-x[E*3+E]+1),u[C]=.5*T,T=.5/T,u[S]=(x[S*3+C]+x[C*3+S])*T,u[E]=(x[E*3+C]+x[C*3+E])*T,this._x=u[0],this._y=u[1],this._z=u[2],this._w=(x[E*3+S]-x[S*3+E])*T}return this.onChangeCallback(this),this}});e.exports=g},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(367),o=i(31),r=i(33),a=i(191),l=function(h){var u=h.config;if((u.customEnvironment||u.canvas)&&u.renderType===r.AUTO)throw new Error("Must set explicit renderType in custom environment");if(!u.customEnvironment&&!u.canvas&&u.renderType!==r.HEADLESS)if(u.renderType===r.CANVAS||u.renderType!==r.CANVAS&&!a.webGL)if(a.canvas)u.renderType=r.CANVAS;else throw new Error("Cannot create Canvas or WebGL context, aborting.");else u.renderType=r.WEBGL;u.antialias||o.disableSmoothing();var v=h.scale.baseSize,d=v.width,c=v.height;if(u.canvas?(h.canvas=u.canvas,h.canvas.width=d,h.canvas.height=c):h.canvas=o.create(h,d,c,u.renderType),u.canvasStyle&&(h.canvas.style=u.canvasStyle),u.antialias||n.setCrisp(h.canvas),u.renderType!==r.HEADLESS){var p,g;p=i(368),g=i(371),u.renderType===r.WEBGL?h.renderer=new g(h):(h.renderer=new p(h),h.context=h.renderer.gameContext)}};e.exports=l},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setCrisp:function(n){var o=["optimizeSpeed","-moz-crisp-edges","-o-crisp-edges","-webkit-optimize-contrast","optimize-contrast","crisp-edges","pixelated"];return o.forEach(function(r){n.style["image-rendering"]=r}),n.style.msInterpolationMode="nearest-neighbor",n},setBicubic:function(n){return n.style["image-rendering"]="auto",n.style.msInterpolationMode="bicubic",n}};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(37),o=i(369),r=i(0),a=i(33),l=i(9),h=i(91),u=i(370),v=i(104),d=i(106),c=i(25),p=new r({Extends:l,initialize:function(m){l.call(this);var x=m.config;this.config={clearBeforeRender:x.clearBeforeRender,backgroundColor:x.backgroundColor,antialias:x.antialias,roundPixels:x.roundPixels},this.game=m,this.type=a.CANVAS,this.drawCount=0,this.width=0,this.height=0,this.gameCanvas=m.canvas;var y={alpha:m.config.transparent,desynchronized:m.config.desynchronized};this.gameContext=x.context?x.context:this.gameCanvas.getContext("2d",y),this.currentContext=this.gameContext,this.antialias=m.config.antialias,this.blendModes=u(),this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92},this._tempMatrix1=new c,this._tempMatrix2=new c,this._tempMatrix3=new c,this.isBooted=!1,this.init()},init:function(){this.game.textures.once(d.READY,this.boot,this)},boot:function(){var g=this.game,m=g.scale.baseSize;this.width=m.width,this.height=m.height,this.isBooted=!0,g.scale.on(v.RESIZE,this.onResize,this),this.resize(m.width,m.height)},onResize:function(g,m){(m.width!==this.width||m.height!==this.height)&&this.resize(m.width,m.height)},resize:function(g,m){this.width=g,this.height=m,this.emit(h.RESIZE,g,m)},resetTransform:function(){this.currentContext.setTransform(1,0,0,1,0,0)},setBlendMode:function(g){return this.currentContext.globalCompositeOperation=g,this},setContext:function(g){return this.currentContext=g||this.gameContext,this},setAlpha:function(g){return this.currentContext.globalAlpha=g,this},preRender:function(){var g=this.gameContext,m=this.config,x=this.width,y=this.height;g.globalAlpha=1,g.globalCompositeOperation="source-over",g.setTransform(1,0,0,1,0,0),m.clearBeforeRender&&(g.clearRect(0,0,x,y),m.transparent||(g.fillStyle=m.backgroundColor.rgba,g.fillRect(0,0,x,y))),g.save(),this.drawCount=0,this.emit(h.PRE_RENDER)},render:function(g,m,x){var y=m.length;this.emit(h.RENDER,g,x);var T=x.x,C=x.y,S=x.width,E=x.height,M=x.renderToTexture?x.context:g.sys.context;M.save(),this.game.scene.customViewports&&(M.beginPath(),M.rect(T,C,S,E),M.clip()),this.currentContext=M;var O=x.mask;O&&O.preRenderCanvas(this,null,x._maskCamera),x.transparent||(M.fillStyle=x.backgroundColor.rgba,M.fillRect(T,C,S,E)),M.globalAlpha=x.alpha,M.globalCompositeOperation="source-over",this.drawCount+=y,x.renderToTexture&&x.emit(n.PRE_RENDER,x),x.matrix.copyToContext(M);for(var L=0;L<y;L++){var R=m[L];R.mask&&R.mask.preRenderCanvas(this,R,x),R.renderCanvas(this,R,x),R.mask&&R.mask.postRenderCanvas(this,R,x)}M.setTransform(1,0,0,1,0,0),M.globalCompositeOperation="source-over",M.globalAlpha=1,x.flashEffect.postRenderCanvas(M),x.fadeEffect.postRenderCanvas(M),x.dirty=!1,O&&O.postRenderCanvas(this),M.restore(),x.renderToTexture&&(x.emit(n.POST_RENDER,x),x.renderToGame&&g.sys.context.drawImage(x.canvas,T,C))},postRender:function(){var g=this.gameContext;g.restore(),this.emit(h.POST_RENDER);var m=this.snapshotState;m.callback&&(o(this.gameCanvas,m),m.callback=null)},snapshotCanvas:function(g,m,x,y,T,C,S,E,M){x===void 0&&(x=!1),this.snapshotArea(y,T,C,S,m,E,M);var O=this.snapshotState;return O.getPixel=x,o(this.canvas,O),O.callback=null,this},snapshot:function(g,m,x){return this.snapshotArea(0,0,this.gameCanvas.width,this.gameCanvas.height,g,m,x)},snapshotArea:function(g,m,x,y,T,C,S){var E=this.snapshotState;return E.callback=T,E.type=C,E.encoder=S,E.getPixel=!1,E.x=g,E.y=m,E.width=Math.min(x,this.gameCanvas.width),E.height=Math.min(y,this.gameCanvas.height),this},snapshotPixel:function(g,m,x){return this.snapshotArea(g,m,1,1,x),this.snapshotState.getPixel=!0,this},batchSprite:function(g,m,x,y){var T=x.alpha*g.alpha;if(T!==0){var C=this.currentContext,S=this._tempMatrix1,E=this._tempMatrix2,M=m.canvasData,O=M.x,L=M.y,R=m.cutWidth,w=m.cutHeight,D=m.customPivot,B=m.source.resolution,N=g.displayOriginX,z=g.displayOriginY,X=-N+m.x,k=-z+m.y;if(g.isCropped){var K=g._crop;(K.flipX!==g.flipX||K.flipY!==g.flipY)&&m.updateCropUVs(K,g.flipX,g.flipY),R=K.cw,w=K.ch,O=K.cx,L=K.cy,X=-N+K.x,k=-z+K.y,g.flipX&&(X>=0?X=-(X+R):X<0&&(X=Math.abs(X)-R)),g.flipY&&(k>=0?k=-(k+w):k<0&&(k=Math.abs(k)-w))}var b=1,I=1;g.flipX&&(D||(X+=-m.realWidth+N*2),b=-1),g.flipY&&(D||(k+=-m.realHeight+z*2),I=-1),E.applyITRS(g.x,g.y,g.rotation,g.scaleX*b,g.scaleY*I),S.copyFrom(x.matrix),y?(S.multiplyWithOffset(y,-x.scrollX*g.scrollFactorX,-x.scrollY*g.scrollFactorY),E.e=g.x,E.f=g.y):(E.e-=x.scrollX*g.scrollFactorX,E.f-=x.scrollY*g.scrollFactorY),S.multiply(E),C.save(),S.setToContext(C),C.globalCompositeOperation=this.blendModes[g.blendMode],C.globalAlpha=T,C.imageSmoothingEnabled=!(!this.antialias||m.source.scaleMode),g.mask&&g.mask.preRenderCanvas(this,g,x),C.drawImage(m.source.image,O,L,R,w,X,k,R/B,w/B),g.mask&&g.mask.postRenderCanvas(this,g,x),C.restore()}},destroy:function(){this.removeAllListeners(),this.game=null,this.gameCanvas=null,this.gameContext=null}});e.exports=p},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(31),o=i(38),r=i(2),a=function(l,h){var u=r(h,"callback"),v=r(h,"type","image/png"),d=r(h,"encoder",.92),c=Math.abs(Math.round(r(h,"x",0))),p=Math.abs(Math.round(r(h,"y",0))),g=r(h,"width",l.width),m=r(h,"height",l.height),x=r(h,"getPixel",!1);if(x){var y=l.getContext("2d"),T=y.getImageData(c,p,1,1),C=T.data;u.call(null,new o(C[0],C[1],C[2],C[3]/255))}else if(c!==0||p!==0||g!==l.width||m!==l.height){var S=n.createWebGL(this,g,m),E=S.getContext("2d");E.drawImage(l,c,p,g,m,0,0,g,m);var M=new Image;M.onerror=function(){u.call(null),n.remove(S)},M.onload=function(){u.call(null,M),n.remove(S)},M.src=S.toDataURL(v,d)}else{var O=new Image;O.onerror=function(){u.call(null)},O.onload=function(){u.call(null,O)},O.src=l.toDataURL(v,d)}};e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(35),o=i(348),r=function(){var a=[],l=o.supportNewBlendModes,h="source-over";return a[n.NORMAL]=h,a[n.ADD]="lighter",a[n.MULTIPLY]=l?"multiply":h,a[n.SCREEN]=l?"screen":h,a[n.OVERLAY]=l?"overlay":h,a[n.DARKEN]=l?"darken":h,a[n.LIGHTEN]=l?"lighten":h,a[n.COLOR_DODGE]=l?"color-dodge":h,a[n.COLOR_BURN]=l?"color-burn":h,a[n.HARD_LIGHT]=l?"hard-light":h,a[n.SOFT_LIGHT]=l?"soft-light":h,a[n.DIFFERENCE]=l?"difference":h,a[n.EXCLUSION]=l?"exclusion":h,a[n.HUE]=l?"hue":h,a[n.SATURATION]=l?"saturation":h,a[n.COLOR]=l?"color":h,a[n.LUMINOSITY]=l?"luminosity":h,a[n.ERASE]="destination-out",a[n.SOURCE_IN]="source-in",a[n.SOURCE_OUT]="source-out",a[n.SOURCE_ATOP]="source-atop",a[n.DESTINATION_OVER]="destination-over",a[n.DESTINATION_IN]="destination-in",a[n.DESTINATION_OUT]="destination-out",a[n.DESTINATION_ATOP]="destination-atop",a[n.LIGHTER]="lighter",a[n.COPY]="copy",a[n.XOR]="xor",a};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(93),o=i(37),r=i(0),a=i(33),l=i(9),h=i(91),u=i(22),v=i(138),d=i(69),c=i(1),p=i(372),g=i(141),m=i(104),x=i(106),y=i(12),T=i(383),C=new r({Extends:l,initialize:function(E){l.call(this);var M=E.config,O={alpha:M.transparent,desynchronized:M.desynchronized,depth:!1,antialias:M.antialiasGL,premultipliedAlpha:M.premultipliedAlpha,stencil:!0,failIfMajorPerformanceCaveat:M.failIfMajorPerformanceCaveat,powerPreference:M.powerPreference,preserveDrawingBuffer:M.preserveDrawingBuffer};this.config={clearBeforeRender:M.clearBeforeRender,antialias:M.antialias,backgroundColor:M.backgroundColor,contextCreation:O,roundPixels:M.roundPixels,maxTextures:M.maxTextures,maxTextureSize:M.maxTextureSize,batchSize:M.batchSize,maxLights:M.maxLights,mipmapFilter:M.mipmapFilter},this.game=E,this.type=a.WEBGL,this.pipelines=null,this.width=0,this.height=0,this.canvas=E.canvas,this.blendModes=[],this.contextLost=!1,this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92,isFramebuffer:!1,bufferWidth:0,bufferHeight:0},this.currentActiveTexture=0,this.startActiveTexture=0,this.maxTextures=0,this.textureIndexes,this.tempTextures,this.textureZero,this.normalTexture,this.currentFramebuffer=null,this.fboStack=[],this.currentProgram=null,this.currentBlendMode=1/0,this.currentScissorEnabled=!1,this.currentScissor=null,this.scissorStack=[],this.contextLostHandler=c,this.contextRestoredHandler=c,this.gl=null,this.supportedExtensions=null,this.instancedArraysExtension=null,this.vaoExtension=null,this.extensions={},this.glFormats=[],this.compression={ETC1:!1,PVRTC:!1,S3TC:!1},this.drawingBufferHeight=0,this.blankTexture=null,this.whiteTexture=null,this.maskCount=0,this.maskStack=[],this.currentMask={mask:null,camera:null},this.currentCameraMask={mask:null,camera:null},this.glFuncMap=null,this.currentType="",this.newType=!1,this.nextTypeMatch=!1,this.finalType=!1,this.mipmapFilter=null,this.textureFlush=0,this.isTextureClean=!1,this.defaultScissor=[0,0,0,0],this.isBooted=!1,this.renderTarget=null,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.init(this.config)},init:function(S){var E,M=this.game,O=this.canvas,L=S.backgroundColor;if(M.config.context?E=M.config.context:E=O.getContext("webgl",S.contextCreation)||O.getContext("experimental-webgl",S.contextCreation),!E||E.isContextLost())throw this.contextLost=!0,new Error("WebGL unsupported");this.gl=E;var R=this;this.contextLostHandler=function(G){R.contextLost=!0,R.game.events.emit(u.CONTEXT_LOST,R),G.preventDefault()},this.contextRestoredHandler=function(){R.contextLost=!1,R.init(R.config),R.game.events.emit(u.CONTEXT_RESTORED,R)},O.addEventListener("webglcontextlost",this.contextLostHandler,!1),O.addEventListener("webglcontextrestored",this.contextRestoredHandler,!1),M.context=E;for(var w=0;w<=27;w++)this.blendModes.push({func:[E.ONE,E.ONE_MINUS_SRC_ALPHA],equation:E.FUNC_ADD});this.blendModes[1].func=[E.ONE,E.DST_ALPHA],this.blendModes[2].func=[E.DST_COLOR,E.ONE_MINUS_SRC_ALPHA],this.blendModes[3].func=[E.ONE,E.ONE_MINUS_SRC_COLOR],this.blendModes[17]={func:[E.ZERO,E.ONE_MINUS_SRC_ALPHA],equation:E.FUNC_REVERSE_SUBTRACT},this.glFormats[0]=E.BYTE,this.glFormats[1]=E.SHORT,this.glFormats[2]=E.UNSIGNED_BYTE,this.glFormats[3]=E.UNSIGNED_SHORT,this.glFormats[4]=E.FLOAT,this.glFuncMap={mat2:{func:E.uniformMatrix2fv,length:1,matrix:!0},mat3:{func:E.uniformMatrix3fv,length:1,matrix:!0},mat4:{func:E.uniformMatrix4fv,length:1,matrix:!0},"1f":{func:E.uniform1f,length:1},"1fv":{func:E.uniform1fv,length:1},"1i":{func:E.uniform1i,length:1},"1iv":{func:E.uniform1iv,length:1},"2f":{func:E.uniform2f,length:2},"2fv":{func:E.uniform2fv,length:1},"2i":{func:E.uniform2i,length:2},"2iv":{func:E.uniform2iv,length:1},"3f":{func:E.uniform3f,length:3},"3fv":{func:E.uniform3fv,length:1},"3i":{func:E.uniform3i,length:3},"3iv":{func:E.uniform3iv,length:1},"4f":{func:E.uniform4f,length:4},"4fv":{func:E.uniform4fv,length:1},"4i":{func:E.uniform4i,length:4},"4iv":{func:E.uniform4iv,length:1}};var D=E.getSupportedExtensions();(!S.maxTextures||S.maxTextures===-1)&&(S.maxTextures=E.getParameter(E.MAX_TEXTURE_IMAGE_UNITS)),S.maxTextureSize||(S.maxTextureSize=E.getParameter(E.MAX_TEXTURE_SIZE));var B="WEBGL_compressed_texture_",N="WEBKIT_"+B;this.compression.ETC1=E.getExtension(B+"etc1")||E.getExtension(N+"etc1"),this.compression.PVRTC=E.getExtension(B+"pvrtc")||E.getExtension(N+"pvrtc"),this.compression.S3TC=E.getExtension(B+"s3tc")||E.getExtension(N+"s3tc"),this.supportedExtensions=D;var z="ANGLE_instanced_arrays";this.instancedArraysExtension=D.indexOf(z)>-1?E.getExtension(z):null;var X="OES_vertex_array_object";this.vaoExtension=D.indexOf(X)>-1?E.getExtension(X):null,E.disable(E.DEPTH_TEST),E.disable(E.CULL_FACE),E.enable(E.BLEND),E.clearColor(L.redGL,L.greenGL,L.blueGL,L.alphaGL),this.mipmapFilter=E[S.mipmapFilter],this.maxTextures=y.checkShaderMax(E,S.maxTextures),this.textureIndexes=[];var k=this.tempTextures;if(Array.isArray(k))for(var K=0;w<this.maxTextures;K++)E.deleteTexture(k[K]);else k=new Array(this.maxTextures);for(var b=0;b<this.maxTextures;b++){var I=E.createTexture();E.activeTexture(E.TEXTURE0+b),E.bindTexture(E.TEXTURE_2D,I),E.texImage2D(E.TEXTURE_2D,0,E.RGBA,1,1,0,E.RGBA,E.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),k[b]=I,this.textureIndexes.push(b)}return this.tempTextures=k,this.currentActiveTexture=1,this.startActiveTexture++,E.activeTexture(E.TEXTURE1),this.pipelines=new p(this),this.setBlendMode(a.BlendModes.NORMAL),this.projectionMatrix=new d().identity(),M.textures.once(x.READY,this.boot,this),this},boot:function(){var S=this.game,E=this.pipelines,M=S.scale.baseSize;this.width=M.width,this.height=M.height,this.isBooted=!0,this.renderTarget=new g(this,this.width,this.height,1,0,!0,!0),E.boot(S.config.pipeline),this.blankTexture=S.textures.getFrame("__DEFAULT"),this.whiteTexture=S.textures.getFrame("__WHITE");var O=this.gl;O.bindFramebuffer(O.FRAMEBUFFER,null),O.enable(O.SCISSOR_TEST),S.scale.on(m.RESIZE,this.onResize,this),this.resize(M.width,M.height)},onResize:function(S,E){(E.width!==this.width||E.height!==this.height)&&this.resize(E.width,E.height)},beginCapture:function(S,E){S===void 0&&(S=this.width),E===void 0&&(E=this.height),this.renderTarget.bind(!0,S,E),this.setProjectionMatrix(S,E),this.resetTextures()},endCapture:function(){return this.renderTarget.unbind(!0),this.resetProjectionMatrix(),this.renderTarget},resize:function(S,E){var M=this.gl;return this.width=S,this.height=E,this.setProjectionMatrix(S,E),M.viewport(0,0,S,E),this.drawingBufferHeight=M.drawingBufferHeight,M.scissor(0,M.drawingBufferHeight-E,S,E),this.defaultScissor[2]=S,this.defaultScissor[3]=E,this.emit(h.RESIZE,S,E),this},getAspectRatio:function(){return this.width/this.height},setProjectionMatrix:function(S,E){return(S!==this.projectionWidth||E!==this.projectionHeight)&&(this.projectionWidth=S,this.projectionHeight=E,this.projectionMatrix.ortho(0,S,E,0,-1e3,1e3)),this},resetProjectionMatrix:function(){this.projectionWidth=this.width,this.projectionHeight=this.height,this.projectionMatrix.ortho(0,this.width,this.height,0,-1e3,1e3)},hasExtension:function(S){return this.supportedExtensions?this.supportedExtensions.indexOf(S):!1},getExtension:function(S){return this.hasExtension(S)?(S in this.extensions||(this.extensions[S]=this.gl.getExtension(S)),this.extensions[S]):null},flush:function(){this.pipelines.flush()},pushScissor:function(S,E,M,O,L){L===void 0&&(L=this.drawingBufferHeight);var R=this.scissorStack,w=[S,E,M,O];return R.push(w),this.setScissor(S,E,M,O,L),this.currentScissor=w,w},setScissor:function(S,E,M,O,L){L===void 0&&(L=this.drawingBufferHeight);var R=this.gl,w=this.currentScissor,D=M>0&&O>0;if(w&&D){var B=w[0],N=w[1],z=w[2],X=w[3];D=B!==S||N!==E||z!==M||X!==O}D&&(this.flush(),R.scissor(S,L-E-O,M,O))},resetScissor:function(){var S=this.gl;S.enable(S.SCISSOR_TEST);var E=this.currentScissor;if(E){var M=E[0],O=E[1],L=E[2],R=E[3];L>0&&R>0&&S.scissor(M,this.drawingBufferHeight-O-R,L,R)}},popScissor:function(){var S=this.scissorStack;S.pop();var E=S[S.length-1];E&&this.setScissor(E[0],E[1],E[2],E[3]),this.currentScissor=E},hasActiveStencilMask:function(){var S=this.currentMask.mask,E=this.currentCameraMask.mask;return S&&S.isStencil||E&&E.isStencil},resetViewport:function(){var S=this.gl;S.viewport(0,0,this.width,this.height),this.drawingBufferHeight=S.drawingBufferHeight},setBlendMode:function(S,E){E===void 0&&(E=!1);var M=this.gl,O=this.blendModes[S];return E||S!==a.BlendModes.SKIP_CHECK&&this.currentBlendMode!==S?(this.flush(),M.enable(M.BLEND),M.blendEquation(O.equation),O.func.length>2?M.blendFuncSeparate(O.func[0],O.func[1],O.func[2],O.func[3]):M.blendFunc(O.func[0],O.func[1]),this.currentBlendMode=S,!0):!1},addBlendMode:function(S,E){var M=this.blendModes.push({func:S,equation:E});return M-1},updateBlendMode:function(S,E,M){return this.blendModes[S]&&(this.blendModes[S].func=E,M&&(this.blendModes[S].equation=M)),this},removeBlendMode:function(S){return S>17&&this.blendModes[S]&&this.blendModes.splice(S,1),this},setBlankTexture:function(){this.setTexture2D(this.blankTexture.glTexture)},setTextureSource:function(S){if(this.pipelines.forceZero())return this.setTextureZero(S.glTexture,!0),0;var E=this.gl,M=this.currentActiveTexture;return S.glIndexCounter<this.startActiveTexture&&(S.glIndexCounter=this.startActiveTexture,M<this.maxTextures?(S.glIndex=M,E.activeTexture(E.TEXTURE0+M),E.bindTexture(E.TEXTURE_2D,S.glTexture),this.currentActiveTexture++):(this.flush(),this.startActiveTexture++,this.textureFlush++,S.glIndexCounter=this.startActiveTexture,S.glIndex=1,E.activeTexture(E.TEXTURE1),E.bindTexture(E.TEXTURE_2D,S.glTexture),this.currentActiveTexture=2)),this.isTextureClean=!1,S.glIndex},isNewNormalMap:function(S,E){return this.textureZero!==S||this.normalTexture!==E},setTextureZero:function(S,E){if(this.textureZero!==S){E&&this.flush();var M=this.gl;M.activeTexture(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,S),this.textureZero=S}},clearTextureZero:function(){this.textureZero=null},setNormalMap:function(S){if(this.normalTexture!==S){var E=this.gl;E.activeTexture(E.TEXTURE1),E.bindTexture(E.TEXTURE_2D,S),this.normalTexture=S,this.currentActiveTexture===1&&(this.currentActiveTexture=2)}},clearNormalMap:function(){this.normalTexture=null,this.startActiveTexture++,this.currentActiveTexture=1,this.textureFlush++},unbindTextures:function(){for(var S=this.gl,E=this.tempTextures,M=0;M<E.length;M++)S.activeTexture(S.TEXTURE0+M),S.bindTexture(S.TEXTURE_2D,null);this.normalTexture=null,this.textureZero=null,this.currentActiveTexture=1,this.startActiveTexture++,this.textureFlush++},resetTextures:function(S){if(S===void 0&&(S=!1),!this.isTextureClean){this.flush();var E=this.gl,M=this.tempTextures;if(S){for(var O=0;O<M.length;O++)E.activeTexture(E.TEXTURE0+O),E.bindTexture(E.TEXTURE_2D,M[O]);E.activeTexture(E.TEXTURE1),E.bindTexture(E.TEXTURE_2D,M[1]),this.isTextureClean=!0}else E.activeTexture(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,M[0]),E.activeTexture(E.TEXTURE1),E.bindTexture(E.TEXTURE_2D,M[1]);this.normalTexture=null,this.textureZero=null,this.currentActiveTexture=1,this.startActiveTexture++,this.textureFlush++}},setTexture2D:function(S){if(this.pipelines.forceZero())return this.setTextureZero(S,!0),0;var E=this.gl,M=this.currentActiveTexture;return S.glIndexCounter<this.startActiveTexture&&(S.glIndexCounter=this.startActiveTexture,M<this.maxTextures?(S.glIndex=M,E.activeTexture(E.TEXTURE0+M),E.bindTexture(E.TEXTURE_2D,S),this.currentActiveTexture++):(this.flush(),this.startActiveTexture++,this.textureFlush++,S.glIndexCounter=this.startActiveTexture,S.glIndex=1,E.activeTexture(E.TEXTURE1),E.bindTexture(E.TEXTURE_2D,S),this.currentActiveTexture=2)),this.isTextureClean=!1,S.glIndex},pushFramebuffer:function(S,E,M,O){return S===this.currentFramebuffer?this:(this.fboStack.push(S),this.setFramebuffer(S,E,M,O))},setFramebuffer:function(S,E,M,O){if(E===void 0&&(E=!1),M===void 0&&(M=!1),O===void 0&&(O=!0),S===this.currentFramebuffer)return this;var L=this.gl,R=this.width,w=this.height;return S&&S.renderTexture&&O?(R=S.renderTexture.width,w=S.renderTexture.height):this.flush(),L.bindFramebuffer(L.FRAMEBUFFER,S),O&&L.viewport(0,0,R,w),E&&(S?(this.drawingBufferHeight=w,this.pushScissor(0,0,R,w)):(this.drawingBufferHeight=this.height,this.popScissor())),this.currentFramebuffer=S,M&&this.resetTextures(),this},popFramebuffer:function(S,E,M){S===void 0&&(S=!1),E===void 0&&(E=!1),M===void 0&&(M=!0);var O=this.fboStack;O.pop();var L=O[O.length-1];return L||(L=null),this.setFramebuffer(L,S,E,M),L},setProgram:function(S){return S!==this.currentProgram?(this.flush(),this.gl.useProgram(S),this.currentProgram=S,!0):!1},resetProgram:function(){return this.gl.useProgram(this.currentProgram),this},createTextureFromSource:function(S,E,M,O){var L=this.gl,R=L.NEAREST,w=L.NEAREST,D=L.CLAMP_TO_EDGE,B=null;E=S?S.width:E,M=S?S.height:M;var N=v(E,M);return N&&(D=L.REPEAT),O===a.ScaleModes.LINEAR&&this.config.antialias&&(R=N?this.mipmapFilter:L.LINEAR,w=L.LINEAR),!S&&typeof E=="number"&&typeof M=="number"?B=this.createTexture2D(0,R,w,D,D,L.RGBA,null,E,M):B=this.createTexture2D(0,R,w,D,D,L.RGBA,S),B},createTexture2D:function(S,E,M,O,L,R,w,D,B,N,z,X){N=N==null?!0:N,z===void 0&&(z=!1),X===void 0&&(X=!1);var k=this.gl,K=k.createTexture();k.activeTexture(k.TEXTURE0);var b=k.getParameter(k.TEXTURE_BINDING_2D);return k.bindTexture(k.TEXTURE_2D,K),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MIN_FILTER,E),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MAG_FILTER,M),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_S,L),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_T,O),k.pixelStorei(k.UNPACK_PREMULTIPLY_ALPHA_WEBGL,N),k.pixelStorei(k.UNPACK_FLIP_Y_WEBGL,X),w==null?k.texImage2D(k.TEXTURE_2D,S,R,D,B,0,R,k.UNSIGNED_BYTE,null):(z||(D=w.width,B=w.height),k.texImage2D(k.TEXTURE_2D,S,R,R,k.UNSIGNED_BYTE,w)),v(D,B)&&k.generateMipmap(k.TEXTURE_2D),b&&k.bindTexture(k.TEXTURE_2D,b),K.isAlphaPremultiplied=N,K.isRenderTexture=!1,K.width=D,K.height=B,K.glIndex=0,K.glIndexCounter=-1,K},createFramebuffer:function(S,E,M,O){var L=this.gl,R=L.createFramebuffer(),w=0;if(this.setFramebuffer(R),O){var D=L.createRenderbuffer();L.bindRenderbuffer(L.RENDERBUFFER,D),L.renderbufferStorage(L.RENDERBUFFER,L.DEPTH_STENCIL,S,E),L.framebufferRenderbuffer(L.FRAMEBUFFER,L.DEPTH_STENCIL_ATTACHMENT,L.RENDERBUFFER,D)}if(M.isRenderTexture=!0,M.isAlphaPremultiplied=!1,L.framebufferTexture2D(L.FRAMEBUFFER,L.COLOR_ATTACHMENT0,L.TEXTURE_2D,M,0),w=L.checkFramebufferStatus(L.FRAMEBUFFER),w!==L.FRAMEBUFFER_COMPLETE){var B={36054:"Incomplete Attachment",36055:"Missing Attachment",36057:"Incomplete Dimensions",36061:"Framebuffer Unsupported"};throw new Error("Framebuffer status: "+B[w])}return R.renderTexture=M,this.setFramebuffer(null),this.resetTextures(),R},createProgram:function(S,E){var M=this.gl,O=M.createProgram(),L=M.createShader(M.VERTEX_SHADER),R=M.createShader(M.FRAGMENT_SHADER);if(M.shaderSource(L,S),M.shaderSource(R,E),M.compileShader(L),M.compileShader(R),!M.getShaderParameter(L,M.COMPILE_STATUS))throw new Error(`Vertex Shader failed:
`+M.getShaderInfoLog(L));if(!M.getShaderParameter(R,M.COMPILE_STATUS))throw new Error(`Fragment Shader failed:
`+M.getShaderInfoLog(R));if(M.attachShader(O,L),M.attachShader(O,R),M.linkProgram(O),!M.getProgramParameter(O,M.LINK_STATUS))throw new Error(`Link Program failed:
`+M.getProgramInfoLog(O));return M.useProgram(O),O},createVertexBuffer:function(S,E){var M=this.gl,O=M.createBuffer();return M.bindBuffer(M.ARRAY_BUFFER,O),M.bufferData(M.ARRAY_BUFFER,S,E),M.bindBuffer(M.ARRAY_BUFFER,null),O},createIndexBuffer:function(S,E){var M=this.gl,O=M.createBuffer();return M.bindBuffer(M.ELEMENT_ARRAY_BUFFER,O),M.bufferData(M.ELEMENT_ARRAY_BUFFER,S,E),M.bindBuffer(M.ELEMENT_ARRAY_BUFFER,null),O},deleteTexture:function(S,E){return E&&this.resetTextures(!0),S&&this.gl.deleteTexture(S),this},deleteFramebuffer:function(S){return S&&(this.gl.deleteFramebuffer(S),n(this.fboStack,S),this.currentFramebuffer===S&&(this.currentFramebuffer=null)),this},deleteProgram:function(S){return S&&this.gl.deleteProgram(S),this},deleteBuffer:function(S){return this.gl.deleteBuffer(S),this},preRenderCamera:function(S){var E=S.x,M=S.y,O=S.width,L=S.height,R=S.backgroundColor;if(S.emit(o.PRE_RENDER,S),this.pipelines.preBatchCamera(S),this.pushScissor(E,M,O,L),S.mask&&(this.currentCameraMask.mask=S.mask,this.currentCameraMask.camera=S._maskCamera,S.mask.preRenderWebGL(this,S,S._maskCamera)),R.alphaGL>0){var w=this.pipelines.setMulti();w.drawFillRect(E,M,O,L,y.getTintFromFloats(R.blueGL,R.greenGL,R.redGL,1),R.alphaGL)}},getCurrentStencilMask:function(){var S=null,E=this.maskStack,M=this.currentCameraMask;return E.length>0?S=E[E.length-1]:M.mask&&M.mask.isStencil&&(S=M),S},postRenderCamera:function(S){var E=S.flashEffect,M=S.fadeEffect;if(E.isRunning||M.isRunning||M.isComplete){var O=this.pipelines.setMulti();E.postRenderWebGL(O,y.getTintFromFloats),M.postRenderWebGL(O,y.getTintFromFloats)}S.dirty=!1,this.popScissor(),S.mask&&(this.currentCameraMask.mask=null,S.mask.postRenderWebGL(this,S._maskCamera)),this.pipelines.postBatchCamera(S),S.emit(o.POST_RENDER,S)},preRender:function(){if(!this.contextLost){var S=this.gl;if(S.bindFramebuffer(S.FRAMEBUFFER,null),this.config.clearBeforeRender){var E=this.config.backgroundColor;S.clearColor(E.redGL,E.greenGL,E.blueGL,E.alphaGL),S.clear(S.COLOR_BUFFER_BIT|S.DEPTH_BUFFER_BIT|S.STENCIL_BUFFER_BIT)}S.enable(S.SCISSOR_TEST),this.currentScissor=this.defaultScissor,this.scissorStack.length=0,this.scissorStack.push(this.currentScissor),this.game.scene.customViewports&&S.scissor(0,this.drawingBufferHeight-this.height,this.width,this.height),this.currentMask.mask=null,this.currentCameraMask.mask=null,this.maskStack.length=0,this.textureFlush=0,this.emit(h.PRE_RENDER)}},render:function(S,E,M){if(!this.contextLost){var O=E.length;if(this.emit(h.RENDER,S,M),this.preRenderCamera(M),O===0){this.setBlendMode(a.BlendModes.NORMAL),this.postRenderCamera(M);return}this.currentType="";for(var L=this.currentMask,R=0;R<O;R++){this.finalType=R===O-1;var w=E[R],D=w.mask;L=this.currentMask,L.mask&&L.mask!==D&&L.mask.postRenderWebGL(this,L.camera),D&&L.mask!==D&&D.preRenderWebGL(this,w,M),w.blendMode!==this.currentBlendMode&&this.setBlendMode(w.blendMode);var B=w.type;B!==this.currentType&&(this.newType=!0,this.currentType=B),this.finalType?this.nextTypeMatch=!1:this.nextTypeMatch=E[R+1].type===this.currentType,w.renderWebGL(this,w,M),this.newType=!1}L=this.currentMask,L.mask&&L.mask.postRenderWebGL(this,L.camera),this.setBlendMode(a.BlendModes.NORMAL),this.postRenderCamera(M)}},postRender:function(){if(!this.contextLost){this.flush(),this.emit(h.POST_RENDER);var S=this.snapshotState;S.callback&&(T(this.canvas,S),S.callback=null),this.textureFlush>0&&(this.startActiveTexture++,this.currentActiveTexture=1)}},snapshot:function(S,E,M){return this.snapshotArea(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,S,E,M)},snapshotArea:function(S,E,M,O,L,R,w){var D=this.snapshotState;return D.callback=L,D.type=R,D.encoder=w,D.getPixel=!1,D.x=S,D.y=E,D.width=Math.min(M,this.gl.drawingBufferWidth),D.height=Math.min(O,this.gl.drawingBufferHeight),this},snapshotPixel:function(S,E,M){return this.snapshotArea(S,E,1,1,M),this.snapshotState.getPixel=!0,this},snapshotFramebuffer:function(S,E,M,O,L,R,w,D,B,N,z){L===void 0&&(L=!1),R===void 0&&(R=0),w===void 0&&(w=0),D===void 0&&(D=E),B===void 0&&(B=M);var X=this.currentFramebuffer;this.snapshotArea(R,w,D,B,O,N,z);var k=this.snapshotState;return k.getPixel=L,k.isFramebuffer=!0,k.bufferWidth=E,k.bufferHeight=M,this.setFramebuffer(S),T(this.canvas,k),this.setFramebuffer(X),k.callback=null,k.isFramebuffer=!1,this},canvasToTexture:function(S,E,M,O){return M===void 0&&(M=!1),O===void 0&&(O=!1),E?this.updateCanvasTexture(S,E,O):this.createCanvasTexture(S,M,O)},createCanvasTexture:function(S,E,M){E===void 0&&(E=!1),M===void 0&&(M=!1);var O=this.gl,L=O.NEAREST,R=O.NEAREST,w=S.width,D=S.height,B=O.CLAMP_TO_EDGE,N=v(w,D);return!E&&N&&(B=O.REPEAT),this.config.antialias&&(L=N?this.mipmapFilter:O.LINEAR,R=O.LINEAR),this.createTexture2D(0,L,R,B,B,O.RGBA,S,w,D,!0,!1,M)},updateCanvasTexture:function(S,E,M){M===void 0&&(M=!1);var O=this.gl,L=S.width,R=S.height;if(L>0&&R>0){O.activeTexture(O.TEXTURE0);var w=O.getParameter(O.TEXTURE_BINDING_2D);O.bindTexture(O.TEXTURE_2D,E),O.pixelStorei(O.UNPACK_FLIP_Y_WEBGL,M),O.pixelStorei(O.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),O.texImage2D(O.TEXTURE_2D,0,O.RGBA,O.RGBA,O.UNSIGNED_BYTE,S),E.width=L,E.height=R,w&&O.bindTexture(O.TEXTURE_2D,w)}return E},createVideoTexture:function(S,E,M){E===void 0&&(E=!1),M===void 0&&(M=!1);var O=this.gl,L=O.NEAREST,R=O.NEAREST,w=S.videoWidth,D=S.videoHeight,B=O.CLAMP_TO_EDGE,N=v(w,D);return!E&&N&&(B=O.REPEAT),this.config.antialias&&(L=N?this.mipmapFilter:O.LINEAR,R=O.LINEAR),this.createTexture2D(0,L,R,B,B,O.RGBA,S,w,D,!0,!0,M)},updateVideoTexture:function(S,E,M){M===void 0&&(M=!1);var O=this.gl,L=S.videoWidth,R=S.videoHeight;if(L>0&&R>0){O.activeTexture(O.TEXTURE0);var w=O.getParameter(O.TEXTURE_BINDING_2D);O.bindTexture(O.TEXTURE_2D,E),O.pixelStorei(O.UNPACK_FLIP_Y_WEBGL,M),O.texImage2D(O.TEXTURE_2D,0,O.RGBA,O.RGBA,O.UNSIGNED_BYTE,S),E.width=L,E.height=R,w&&O.bindTexture(O.TEXTURE_2D,w)}return E},setTextureFilter:function(S,E){var M=this.gl,O=[M.LINEAR,M.NEAREST][E];M.activeTexture(M.TEXTURE0);var L=M.getParameter(M.TEXTURE_BINDING_2D);return M.bindTexture(M.TEXTURE_2D,S),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_MIN_FILTER,O),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_MAG_FILTER,O),L&&M.bindTexture(M.TEXTURE_2D,L),this},getMaxTextureSize:function(){return this.config.maxTextureSize},destroy:function(){this.canvas.removeEventListener("webglcontextlost",this.contextLostHandler,!1),this.canvas.removeEventListener("webglcontextrestored",this.contextRestoredHandler,!1);for(var S=this.gl,E=this.tempTextures,M=0;M<E.length;M++)S.deleteTexture(E[M]);this.pipelines.destroy(),this.removeAllListeners(),this.fboStack=[],this.maskStack=[],this.extensions={},this.textureIndexes=[],this.gl=null,this.game=null,this.canvas=null,this.contextLost=!0,this.currentMask=null,this.currentCameraMask=null}});e.exports=C},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(92),r=i(102),a=i(373),l=i(376),h=i(377),u=i(108),v=i(378),d=i(379),c=i(380),p=i(381),g=new n({initialize:function(x){this.game=x.game,this.renderer=x,this.classes=new r([[o.UTILITY_PIPELINE,p],[o.MULTI_PIPELINE,u],[o.BITMAPMASK_PIPELINE,a],[o.SINGLE_PIPELINE,c],[o.ROPE_PIPELINE,d],[o.LIGHT_PIPELINE,h],[o.POINTLIGHT_PIPELINE,v],[o.GRAPHICS_PIPELINE,l]]),this.postPipelineClasses=new r,this.pipelines=new r,this.current=null,this.previous=null,this.MULTI_PIPELINE=null,this.BITMAPMASK_PIPELINE=null,this.UTILITY_PIPELINE=null,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(m){var x,y,T=this,C=this.game;if(this.classes.each(function(E,M){x=T.add(E,new M({game:C})),E===o.UTILITY_PIPELINE&&(T.UTILITY_PIPELINE=x,T.fullFrame1=x.fullFrame1,T.fullFrame2=x.fullFrame2,T.halfFrame1=x.halfFrame1,T.halfFrame2=x.halfFrame2)}),this.MULTI_PIPELINE=this.get(o.MULTI_PIPELINE),this.BITMAPMASK_PIPELINE=this.get(o.BITMAPMASK_PIPELINE),m)for(y in m){var S=m[y];x=new S(C),x.isPostFX?this.postPipelineClasses.set(y,S):this.has(y)||(this.classes.set(y,S),this.add(y,x))}},add:function(m,x){if(x.isPostFX){console.warn(m+" is a Post Pipeline. Use `addPostPipeline` instead");return}var y=this.pipelines,T=this.renderer;return y.has(m)?console.warn("Pipeline exists: "+m):(x.name=m,x.manager=this,y.set(m,x)),x.hasBooted||x.boot(),T.width!==0&&T.height!==0&&x.resize(T.width,T.height),x},addPostPipeline:function(m,x){this.postPipelineClasses.has(m)||this.postPipelineClasses.set(m,x)},flush:function(){this.current&&this.current.flush()},has:function(m){var x=this.pipelines;return typeof m=="string"?x.has(m):!!x.contains(m)},get:function(m){var x=this.pipelines;if(typeof m=="string")return x.get(m);if(x.contains(m))return m},getPostPipeline:function(m,x){var y=this.postPipelineClasses,T;if(typeof m=="string"?T=y.get(m):typeof m=="function"?y.contains(m)&&(T=m):typeof m=="object"&&(T=y.get(m.name)),T){var C=new T(this.game);return x&&(C.gameObject=x),C}},remove:function(m,x,y){x===void 0&&(x=!0),y===void 0&&(y=!0),this.pipelines.delete(m),x&&this.classes.delete(m),y&&this.postPipelineClasses.delete(m)},set:function(m,x,y){if(!m.isPostFX)return this.isCurrent(m,y)||(this.flush(),this.current&&this.current.unbind(),this.current=m,m.bind(y)),m.updateProjectionMatrix(),m.onBind(x),m},preBatch:function(m){if(m.hasPostPipeline){this.flush();for(var x=m.postPipelines,y=x.length-1;y>=0;y--){var T=x[y];T.active&&T.preBatch(m)}}},postBatch:function(m){if(m.hasPostPipeline){this.flush();for(var x=m.postPipelines,y=0;y<x.length;y++){var T=x[y];T.active&&T.postBatch(m)}}},preBatchCamera:function(m){if(m.hasPostPipeline){this.flush();for(var x=m.postPipelines,y=x.length-1;y>=0;y--){var T=x[y];T.active&&T.preBatch(m)}}},postBatchCamera:function(m){if(m.hasPostPipeline){this.flush();for(var x=m.postPipelines,y=0;y<x.length;y++){var T=x[y];T.active&&T.postBatch(m)}}},isCurrent:function(m,x){var y=this.renderer,T=this.current;return T&&!x&&(x=T.currentShader),!(T!==m||x.program!==y.currentProgram)},copyFrame:function(m,x,y,T,C){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyFrame(m,x,y,T,C),this},copyToGame:function(m){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyToGame(m),this},drawFrame:function(m,x,y,T){return this.setUtility(this.UTILITY_PIPELINE.colorMatrixShader).drawFrame(m,x,y,T),this},blendFrames:function(m,x,y,T,C){return this.setUtility(this.UTILITY_PIPELINE.linearShader).blendFrames(m,x,y,T,C),this},blendFramesAdditive:function(m,x,y,T,C){return this.setUtility(this.UTILITY_PIPELINE.addShader).blendFramesAdditive(m,x,y,T,C),this},clearFrame:function(m,x){return this.UTILITY_PIPELINE.clearFrame(m,x),this},blitFrame:function(m,x,y,T,C,S){return this.setUtility(this.UTILITY_PIPELINE.copyShader).blitFrame(m,x,y,T,C,S),this},copyFrameRect:function(m,x,y,T,C,S,E,M){return this.UTILITY_PIPELINE.copyFrameRect(m,x,y,T,C,S,E,M),this},forceZero:function(){return this.current&&this.current.forceZero},setMulti:function(){return this.set(this.MULTI_PIPELINE)},setUtility:function(m){return this.UTILITY_PIPELINE.bind(m)},rebind:function(m){m===void 0&&this.previous&&(m=this.previous);var x=this.renderer,y=x.gl;y.disable(y.DEPTH_TEST),y.disable(y.CULL_FACE),x.hasActiveStencilMask()?y.clear(y.DEPTH_BUFFER_BIT):(y.disable(y.STENCIL_TEST),y.clear(y.DEPTH_BUFFER_BIT|y.STENCIL_BUFFER_BIT)),y.viewport(0,0,x.width,x.height),x.currentProgram=null,x.setBlendMode(0,!0);var T=this.pipelines.entries;for(var C in T)T[C].glReset=!0;m&&(this.current=m,m.rebind()),x.resetTextures()},clear:function(){var m=this.renderer;this.flush(),this.current?(this.current.unbind(),this.previous=this.current,this.current=null):this.previous=null,m.currentProgram=null,m.setBlendMode(0,!0)},destroy:function(){this.flush(),this.classes.clear(),this.postPipelineClasses.clear(),this.pipelines.clear(),this.renderer=null,this.game=null,this.classes=null,this.postPipelineClasses=null,this.pipelines=null,this.current=null,this.previous=null}});e.exports=g},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(2),r=i(866),a=i(867),l=i(107),h=i(58),u=new n({Extends:h,initialize:function(d){d.fragShader=o(d,"fragShader",r),d.vertShader=o(d,"vertShader",a),d.batchSize=o(d,"batchSize",1),d.vertices=o(d,"vertices",[-1,1,-1,-7,7,1]),d.attributes=o(d,"attributes",[{name:"inPosition",size:2,type:l.FLOAT}]),h.call(this,d)},boot:function(){h.prototype.boot.call(this),this.set1i("uMainSampler",0),this.set1i("uMaskSampler",1)},resize:function(v,d){h.prototype.resize.call(this,v,d),this.set2f("uResolution",v,d)},beginMask:function(v,d,c){var p=this.gl;if(v.bitmapMask&&p){var g=this.renderer;g.flush(),g.pushFramebuffer(v.mainFramebuffer),p.disable(p.STENCIL_TEST),p.clearColor(0,0,0,0),p.clear(p.COLOR_BUFFER_BIT),g.currentCameraMask.mask!==v&&(g.currentMask.mask=v,g.currentMask.camera=c)}},endMask:function(v,d){var c=this.gl,p=this.renderer,g=v.bitmapMask;if(g&&c){p.flush(),p.pushFramebuffer(v.maskFramebuffer),c.clearColor(0,0,0,0),c.clear(c.COLOR_BUFFER_BIT),p.setBlendMode(0,!0),g.renderWebGL(p,g,d),p.flush(),p.popFramebuffer(),p.popFramebuffer();var m=p.getCurrentStencilMask();m?(c.enable(c.STENCIL_TEST),m.mask.applyStencil(p,m.camera,!0)):p.currentMask.mask=null,p.pipelines.set(this),c.activeTexture(c.TEXTURE1),c.bindTexture(c.TEXTURE_2D,v.maskTexture),c.activeTexture(c.TEXTURE0),c.bindTexture(c.TEXTURE_2D,v.mainTexture),this.set1i("uInvertMaskAlpha",v.invertAlpha),c.drawArrays(this.topology,0,3),p.resetTextures()}}});e.exports=u},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={AFTER_FLUSH:i(868),BEFORE_FLUSH:i(869),BIND:i(870),BOOT:i(871),DESTROY:i(872),REBIND:i(873),RESIZE:i(874)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(2),r=i(107),a=new n({initialize:function(h,u,v,d,c){this.pipeline=h,this.name=u,this.renderer=h.renderer,this.gl=this.renderer.gl,this.program=this.renderer.createProgram(v,d),this.attributes,this.vertexComponentCount=0,this.vertexSize=0,this.uniforms={},this.createAttributes(c),this.createUniforms()},createAttributes:function(l){var h=0,u=0,v=[];this.vertexComponentCount=0;for(var d=0;d<l.length;d++){var c=l[d],p=c.name,g=o(c,"size",1),m=o(c,"type",r.FLOAT),x=m.enum,y=m.size,T=!!c.normalized;v.push({name:p,size:g,type:x,normalized:T,offset:u,enabled:!1,location:-1}),y===4?h+=g:h++,u+=g*y}this.vertexSize=u,this.vertexComponentCount=h,this.attributes=v},bind:function(l,h){return l===void 0&&(l=!1),h===void 0&&(h=!1),h&&this.pipeline.flush(),this.renderer.setProgram(this.program),l&&this.setAttribPointers(),this},rebind:function(){return this.renderer.setProgram(this.program),this.setAttribPointers(!0),this},setAttribPointers:function(l){l===void 0&&(l=!1);for(var h=this.gl,u=this.vertexSize,v=this.attributes,d=this.program,c=0;c<v.length;c++){var p=v[c],g=p.size,m=p.type,x=p.offset,y=p.enabled,T=p.location,C=!!p.normalized;if(l){var S=h.getAttribLocation(d,p.name);S>=0?(h.enableVertexAttribArray(S),h.vertexAttribPointer(S,g,m,C,u,x),p.enabled=!0,p.location=S):S!==-1&&h.disableVertexAttribArray(S)}else y?h.vertexAttribPointer(T,g,m,C,u,x):!y&&T>-1&&(h.disableVertexAttribArray(T),p.location=-1)}return this},createUniforms:function(){var l=this.gl,h=this.program,u=this.uniforms,v,d,c,p=l.getProgramParameter(h,l.ACTIVE_UNIFORMS);for(v=0;v<p;v++){var g=l.getActiveUniform(h,v);if(g){d=g.name,c=l.getUniformLocation(h,d),c!==null&&(u[d]={name:d,location:c,value1:null,value2:null,value3:null,value4:null});var m=d.indexOf("[");m>0&&(d=d.substr(0,m),u.hasOwnProperty(d)||(c=l.getUniformLocation(h,d),c!==null&&(u[d]={name:d,location:c,value1:null,value2:null,value3:null,value4:null})))}}return this},hasUniform:function(l){return this.uniforms.hasOwnProperty(l)},resetUniform:function(l){var h=this.uniforms[l];return h&&(h.value1=null,h.value2=null,h.value3=null,h.value4=null),this},setUniform1:function(l,h,u,v){var d=this.uniforms[h];return d?((v||d.value1!==u)&&(d.value1=u,this.renderer.setProgram(this.program),l.call(this.gl,d.location,u),this.pipeline.currentShader=this),this):this},setUniform2:function(l,h,u,v,d){var c=this.uniforms[h];return c?((d||c.value1!==u||c.value2!==v)&&(c.value1=u,c.value2=v,this.renderer.setProgram(this.program),l.call(this.gl,c.location,u,v),this.pipeline.currentShader=this),this):this},setUniform3:function(l,h,u,v,d,c){var p=this.uniforms[h];return p?((c||p.value1!==u||p.value2!==v||p.value3!==d)&&(p.value1=u,p.value2=v,p.value3=d,this.renderer.setProgram(this.program),l.call(this.gl,p.location,u,v,d),this.pipeline.currentShader=this),this):this},setUniform4:function(l,h,u,v,d,c,p){var g=this.uniforms[h];return g?((p||g.value1!==u||g.value2!==v||g.value3!==d||g.value4!==c)&&(g.value1=u,g.value2=v,g.value3=d,g.value4=c,this.renderer.setProgram(this.program),l.call(this.gl,g.location,u,v,d,c),this.pipeline.currentShader=this),this):this},set1f:function(l,h){return this.setUniform1(this.gl.uniform1f,l,h)},set2f:function(l,h,u){return this.setUniform2(this.gl.uniform2f,l,h,u)},set3f:function(l,h,u,v){return this.setUniform3(this.gl.uniform3f,l,h,u,v)},set4f:function(l,h,u,v,d){return this.setUniform4(this.gl.uniform4f,l,h,u,v,d)},set1fv:function(l,h){return this.setUniform1(this.gl.uniform1fv,l,h,!0)},set2fv:function(l,h){return this.setUniform1(this.gl.uniform2fv,l,h,!0)},set3fv:function(l,h){return this.setUniform1(this.gl.uniform3fv,l,h,!0)},set4fv:function(l,h){return this.setUniform1(this.gl.uniform4fv,l,h,!0)},set1iv:function(l,h){return this.setUniform1(this.gl.uniform1iv,l,h,!0)},set2iv:function(l,h){return this.setUniform1(this.gl.uniform2iv,l,h,!0)},set3iv:function(l,h){return this.setUniform1(this.gl.uniform3iv,l,h,!0)},set4iv:function(l,h){return this.setUniform1(this.gl.uniform4iv,l,h,!0)},set1i:function(l,h){return this.setUniform1(this.gl.uniform1i,l,h)},set2i:function(l,h,u){return this.setUniform2(this.gl.uniform2i,l,h,u)},set3i:function(l,h,u,v){return this.setUniform3(this.gl.uniform3i,l,h,u,v)},set4i:function(l,h,u,v,d){return this.setUniform4(this.gl.uniform4i,l,h,u,v,d)},setMatrix2fv:function(l,h,u){return this.setUniform2(this.gl.uniformMatrix2fv,l,h,u,!0)},setMatrix3fv:function(l,h,u){return this.setUniform2(this.gl.uniformMatrix3fv,l,h,u,!0)},setMatrix4fv:function(l,h,u){return this.setUniform2(this.gl.uniformMatrix4fv,l,h,u,!0)},destroy:function(){this.gl.deleteProgram(this.program),this.pipeline=null,this.renderer=null,this.gl=null,this.program=null,this.attributes=null,this.uniforms=null}});e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(59),r=i(2),a=i(875),l=i(876),h=i(25),u=i(107),v=i(58),d=new n({Extends:v,initialize:function(p){p.fragShader=r(p,"fragShader",a),p.vertShader=r(p,"vertShader",l),p.attributes=r(p,"attributes",[{name:"inPosition",size:2},{name:"inColor",size:4,type:u.UNSIGNED_BYTE,normalized:!0}]),v.call(this,p),this.calcMatrix=new h,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},batchFillRect:function(c,p,g,m,x,y){this.renderer.pipelines.set(this);var T=this.calcMatrix;y&&y.multiply(x,T);var C=c+g,S=p+m,E=T.getX(c,p),M=T.getY(c,p),O=T.getX(c,S),L=T.getY(c,S),R=T.getX(C,S),w=T.getY(C,S),D=T.getX(C,p),B=T.getY(C,p),N=this.fillTint;this.batchQuad(E,M,O,L,R,w,D,B,N.TL,N.TR,N.BL,N.BR)},batchFillTriangle:function(c,p,g,m,x,y,T,C){this.renderer.pipelines.set(this);var S=this.calcMatrix;C&&C.multiply(T,S);var E=S.getX(c,p),M=S.getY(c,p),O=S.getX(g,m),L=S.getY(g,m),R=S.getX(x,y),w=S.getY(x,y),D=this.fillTint;this.batchTri(E,M,O,L,R,w,D.TL,D.TR,D.BL)},batchStrokeTriangle:function(c,p,g,m,x,y,T,C,S){var E=this.tempTriangle;E[0].x=c,E[0].y=p,E[0].width=T,E[1].x=g,E[1].y=m,E[1].width=T,E[2].x=x,E[2].y=y,E[2].width=T,E[3].x=c,E[3].y=p,E[3].width=T,this.batchStrokePath(E,T,!1,C,S)},batchFillPath:function(c,p,g){this.renderer.pipelines.set(this);var m=this.calcMatrix;g&&g.multiply(p,m);for(var x=c.length,y=this.polygonCache,T,C,S=this.fillTint.TL,E=this.fillTint.TR,M=this.fillTint.BL,O=0;O<x;++O)C=c[O],y.push(C.x,C.y);T=o(y),x=T.length;for(var L=0;L<x;L+=3){var R=T[L+0]*2,w=T[L+1]*2,D=T[L+2]*2,B=y[R+0],N=y[R+1],z=y[w+0],X=y[w+1],k=y[D+0],K=y[D+1],b=m.getX(B,N),I=m.getY(B,N),G=m.getX(z,X),Y=m.getY(z,X),U=m.getX(k,K),W=m.getY(k,K);this.batchTri(b,I,G,Y,U,W,S,E,M)}y.length=0},batchStrokePath:function(c,p,g,m,x){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var y=c.length-1,T=0;T<y;T++){var C=c[T],S=c[T+1];this.batchLine(C.x,C.y,S.x,S.y,C.width/2,S.width/2,p,T,!g&&T===y-1,m,x)}},batchLine:function(c,p,g,m,x,y,T,C,S,E,M){this.renderer.pipelines.set(this);var O=this.calcMatrix;M&&M.multiply(E,O);var L=g-c,R=m-p,w=Math.sqrt(L*L+R*R),D=x*(m-p)/w,B=x*(c-g)/w,N=y*(m-p)/w,z=y*(c-g)/w,X=g-N,k=m-z,K=c-D,b=p-B,I=g+N,G=m+z,Y=c+D,U=p+B,W=O.getX(X,k),H=O.getY(X,k),Z=O.getX(K,b),q=O.getY(K,b),_=O.getX(I,G),nt=O.getY(I,G),rt=O.getX(Y,U),at=O.getY(Y,U),ct=this.strokeTint,ut=ct.TL,pt=ct.TR,Dt=ct.BL,St=ct.BR;if(this.batchQuad(rt,at,Z,q,W,H,_,nt,ut,pt,Dt,St),!(T<=2)){var Et=this.prevQuad,dt=this.firstQuad;C>0&&Et[4]?this.batchQuad(rt,at,Z,q,Et[0],Et[1],Et[2],Et[3],ut,pt,Dt,St):(dt[0]=rt,dt[1]=at,dt[2]=Z,dt[3]=q,dt[4]=1),S&&dt[4]?this.batchQuad(W,H,_,nt,dt[0],dt[1],dt[2],dt[3],ut,pt,Dt,St):(Et[0]=W,Et[1]=H,Et[2]=_,Et[3]=nt,Et[4]=1)}},batchVert:function(c,p,g){var m=this.vertexViewF32,x=this.vertexViewU32,y=this.vertexCount*this.currentShader.vertexComponentCount-1;m[++y]=c,m[++y]=p,x[++y]=g,this.vertexCount++},batchQuad:function(c,p,g,m,x,y,T,C,S,E,M,O){var L=!1;return this.shouldFlush(6)&&(this.flush(),L=!0),this.batchVert(c,p,S),this.batchVert(g,m,M),this.batchVert(x,y,O),this.batchVert(c,p,S),this.batchVert(x,y,O),this.batchVert(T,C,E),L},batchTri:function(c,p,g,m,x,y,T,C,S){var E=!1;return this.shouldFlush(3)&&(this.flush(),E=!0),this.batchVert(c,p,T),this.batchVert(g,m,C),this.batchVert(x,y,S),E},destroy:function(){return v.prototype.destroy.call(this),this.polygonCache=null,this}});e.exports=d},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(2),r=i(877),a=i(108),l=i(3),h=i(58),u=10,v=new l,d=new n({Extends:a,initialize:function(p){u=p.game.renderer.config.maxLights;for(var g=o(p,"fragShader",r),m=[],x=1;x<=u;x++)m.push({name:"lights"+x,fragShader:g.replace("%LIGHT_COUNT%",x.toString())});p.shaders=m,a.call(this,p),this.inverseRotationMatrix=new Float32Array([1,0,0,0,1,0,0,0,1]),this.defaultNormalMap,this.lightsActive=!0},boot:function(){h.prototype.boot.call(this);var c=this.gl,p=c.createTexture();c.activeTexture(c.TEXTURE0),c.bindTexture(c.TEXTURE_2D,p),c.texImage2D(c.TEXTURE_2D,0,c.RGBA,1,1,0,c.RGBA,c.UNSIGNED_BYTE,new Uint8Array([127,127,255,255])),this.defaultNormalMap={glTexture:p};for(var g=0;g<this.shaders.length;g++)this["lightShader"+(g+1)]=this.shaders[g]},onRender:function(c,p){var g=c.sys.lights;if(this.lightsActive=!1,!(!g||!g.active)){var m=g.getLights(p),x=m.length;if(x!==0){this.lightsActive=!0,this.setShader(this["lightShader"+x],!0);var y,T=this.renderer,C=T.height,S=p.matrix;for(this.set1i("uMainSampler",0),this.set1i("uNormSampler",1),this.set2f("uResolution",this.width/2,this.height/2),this.set4f("uCamera",p.x,p.y,p.rotation,p.zoom),this.set3f("uAmbientLightColor",g.ambientColor.r,g.ambientColor.g,g.ambientColor.b),y=0;y<x;y++){var E=m[y].light,M=E.color,O="uLights["+y+"].";S.transformPoint(E.x,E.y,v),this.set2f(O+"position",v.x-p.scrollX*E.scrollFactorX*p.zoom,C-(v.y-p.scrollY*E.scrollFactorY*p.zoom)),this.set3f(O+"color",M.r,M.g,M.b),this.set1f(O+"intensity",E.intensity),this.set1f(O+"radius",E.radius)}this.currentNormalMapRotation=null}}},setNormalMapRotation:function(c){if(c!==this.currentNormalMapRotation||this.vertexCount===0){this.vertexCount>0&&this.flush();var p=this.inverseRotationMatrix;if(c){var g=-c,m=Math.cos(g),x=Math.sin(g);p[1]=x,p[3]=-x,p[0]=p[4]=m}else p[0]=p[4]=1,p[1]=p[3]=0;this.setMatrix3fv("uInverseRotationMatrix",!1,p),this.currentNormalMapRotation=c}},setTexture2D:function(c,p){var g=this.renderer;c===void 0&&(c=g.tempTextures[0]);var m=this.getNormalMap(p);g.isNewNormalMap(c,m)&&(this.flush(),g.setTextureZero(c),g.setNormalMap(m));var x=p?p.rotation:0;return this.setNormalMapRotation(x),this.currentUnit=0,0},setGameObject:function(c,p){p===void 0&&(p=c.frame);var g=this.renderer,m=p.glTexture,x=this.getNormalMap(c);return g.isNewNormalMap()&&(this.flush(),g.setTextureZero(m),g.setNormalMap(x)),this.setNormalMapRotation(c.rotation),this.currentUnit=0,0},getNormalMap:function(c){var p;return c?c.displayTexture?p=c.displayTexture.dataSource[c.displayFrame.sourceIndex]:c.texture?p=c.texture.dataSource[c.frame.sourceIndex]:c.tileset&&(Array.isArray(c.tileset)?p=c.tileset[0].image.dataSource[0]:p=c.tileset.image.dataSource[0]):p=this.defaultNormalMap,p||(p=this.defaultNormalMap),p.glTexture},batchSprite:function(c,p,g){this.lightsActive&&a.prototype.batchSprite.call(this,c,p,g)},batchTexture:function(c,p,g,m,x,y,T,C,S,E,M,O,L,R,w,D,B,N,z,X,k,K,b,I,G,Y,U,W,H,Z,q,_){this.lightsActive&&a.prototype.batchTexture.call(this,c,p,g,m,x,y,T,C,S,E,M,O,L,R,w,D,B,N,z,X,k,K,b,I,G,Y,U,W,H,Z,q,_)},batchTextureFrame:function(c,p,g,m,x,y,T){this.lightsActive&&a.prototype.batchTextureFrame.call(this,c,p,g,m,x,y,T)}});d.LIGHT_COUNT=u,e.exports=d},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(2),r=i(880),a=i(881),l=i(58),h=new n({Extends:l,initialize:function(v){v.vertShader=o(v,"vertShader",a),v.fragShader=o(v,"fragShader",r),v.attributes=o(v,"attributes",[{name:"inPosition",size:2},{name:"inLightPosition",size:2},{name:"inLightRadius"},{name:"inLightAttenuation"},{name:"inLightColor",size:4}]),l.call(this,v)},onRender:function(u,v){this.set2f("uResolution",this.width,this.height),this.set1f("uCameraZoom",v.zoom)},batchPointLight:function(u,v,d,c,p,g,m,x,y,T,C,S){var E=u.color,M=u.intensity,O=u.radius,L=u.attenuation,R=E.r*M,w=E.g*M,D=E.b*M,B=v.alpha*u.alpha;this.shouldFlush(6)&&this.flush(),this.batchLightVert(d,c,C,S,O,L,R,w,D,B),this.batchLightVert(p,g,C,S,O,L,R,w,D,B),this.batchLightVert(m,x,C,S,O,L,R,w,D,B),this.batchLightVert(d,c,C,S,O,L,R,w,D,B),this.batchLightVert(m,x,C,S,O,L,R,w,D,B),this.batchLightVert(y,T,C,S,O,L,R,w,D,B)},batchLightVert:function(u,v,d,c,p,g,m,x,y,T){var C=this.vertexViewF32,S=this.vertexCount*this.currentShader.vertexComponentCount-1;C[++S]=u,C[++S]=v,C[++S]=d,C[++S]=c,C[++S]=p,C[++S]=g,C[++S]=m,C[++S]=x,C[++S]=y,C[++S]=T,this.vertexCount++}});e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(2),r=i(108),a=new n({Extends:r,initialize:function(h){h.topology=5,h.batchSize=o(h,"batchSize",256),r.call(this,h)}});e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(2),r=i(108),a=i(882),l=i(883),h=i(58),u=new n({Extends:r,initialize:function(d){d.fragShader=o(d,"fragShader",a),d.vertShader=o(d,"vertShader",l),d.forceZero=!0,r.call(this,d)},boot:function(){h.prototype.boot.call(this),this.set1i("uMainSampler",0)}});e.exports=u},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(884),o=i(35),r=i(0),a=i(198),l=i(885),h=i(886),u=i(2),v=i(887),d=i(382),c=i(58),p=new r({Extends:c,initialize:function(m){m.renderTarget=u(m,"renderTarget",[{scale:1},{scale:1},{scale:.5},{scale:.5}]),m.vertShader=u(m,"vertShader",d),m.shaders=u(m,"shaders",[{name:"Copy",fragShader:h},{name:"AddBlend",fragShader:n},{name:"LinearBlend",fragShader:v},{name:"ColorMatrix",fragShader:l}]),m.attributes=u(m,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),m.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],m.batchSize=1,c.call(this,m),this.colorMatrix=new a,this.copyShader,this.addShader,this.linearShader,this.colorMatrixShader,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(){c.prototype.boot.call(this);var g=this.shaders,m=this.renderTargets;this.copyShader=g[0],this.addShader=g[1],this.linearShader=g[2],this.colorMatrixShader=g[3],this.fullFrame1=m[0],this.fullFrame2=m[1],this.halfFrame1=m[2],this.halfFrame2=m[3]},copyFrame:function(g,m,x,y,T){x===void 0&&(x=1),y===void 0&&(y=!0),T===void 0&&(T=!0);var C=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",x),C.activeTexture(C.TEXTURE0),C.bindTexture(C.TEXTURE_2D,g.texture),m?(C.viewport(0,0,m.width,m.height),C.bindFramebuffer(C.FRAMEBUFFER,m.framebuffer),C.framebufferTexture2D(C.FRAMEBUFFER,C.COLOR_ATTACHMENT0,C.TEXTURE_2D,m.texture,0)):C.viewport(0,0,g.width,g.height),y&&(T?C.clearColor(0,0,0,0):C.clearColor(0,0,0,1),C.clear(C.COLOR_BUFFER_BIT)),C.bufferData(C.ARRAY_BUFFER,this.vertexData,C.STATIC_DRAW),C.drawArrays(C.TRIANGLES,0,6),C.bindFramebuffer(C.FRAMEBUFFER,null),C.bindTexture(C.TEXTURE_2D,null)},blitFrame:function(g,m,x,y,T,C){x===void 0&&(x=1),y===void 0&&(y=!0),T===void 0&&(T=!0),C===void 0&&(C=!1);var S=this.gl;if(this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",x),S.activeTexture(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,g.texture),g.height>m.height)S.viewport(0,0,g.width,g.height),this.setTargetUVs(g,m);else{var E=m.height-g.height;S.viewport(0,E,g.width,g.height)}if(S.bindFramebuffer(S.FRAMEBUFFER,m.framebuffer),S.framebufferTexture2D(S.FRAMEBUFFER,S.COLOR_ATTACHMENT0,S.TEXTURE_2D,m.texture,0),y&&(T?S.clearColor(0,0,0,0):S.clearColor(0,0,0,1),S.clear(S.COLOR_BUFFER_BIT)),C){var M=this.renderer.currentBlendMode;this.renderer.setBlendMode(o.ERASE)}S.bufferData(S.ARRAY_BUFFER,this.vertexData,S.STATIC_DRAW),S.drawArrays(S.TRIANGLES,0,6),C&&this.renderer.setBlendMode(M),S.bindFramebuffer(S.FRAMEBUFFER,null),S.bindTexture(S.TEXTURE_2D,null),this.resetUVs()},copyFrameRect:function(g,m,x,y,T,C,S,E){S===void 0&&(S=!0),E===void 0&&(E=!0);var M=this.gl;M.bindFramebuffer(M.FRAMEBUFFER,g.framebuffer),M.framebufferTexture2D(M.FRAMEBUFFER,M.COLOR_ATTACHMENT0,M.TEXTURE_2D,g.texture,0),S&&(E?M.clearColor(0,0,0,0):M.clearColor(0,0,0,1),M.clear(M.COLOR_BUFFER_BIT)),M.activeTexture(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,m.texture),M.copyTexSubImage2D(M.TEXTURE_2D,0,0,0,x,y,T,C),M.bindFramebuffer(M.FRAMEBUFFER,null),M.bindTexture(M.TEXTURE_2D,null)},copyToGame:function(g){var m=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",1),this.renderer.popFramebuffer(),m.activeTexture(m.TEXTURE0),m.bindTexture(m.TEXTURE_2D,g.texture),m.bufferData(m.ARRAY_BUFFER,this.vertexData,m.STATIC_DRAW),m.drawArrays(m.TRIANGLES,0,6),this.renderer.resetTextures()},drawFrame:function(g,m,x,y){x===void 0&&(x=!0),y===void 0&&(y=this.colorMatrix);var T=this.gl;this.setShader(this.colorMatrixShader),this.set1i("uMainSampler",0),this.set1fv("uColorMatrix",y.getData()),this.set1f("uAlpha",y.alpha),T.activeTexture(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,g.texture),m?(T.viewport(0,0,m.width,m.height),T.bindFramebuffer(T.FRAMEBUFFER,m.framebuffer),T.framebufferTexture2D(T.FRAMEBUFFER,T.COLOR_ATTACHMENT0,T.TEXTURE_2D,m.texture,0)):T.viewport(0,0,g.width,g.height),x?T.clearColor(0,0,0,0):T.clearColor(0,0,0,1),T.clear(T.COLOR_BUFFER_BIT),T.bufferData(T.ARRAY_BUFFER,this.vertexData,T.STATIC_DRAW),T.drawArrays(T.TRIANGLES,0,6),T.bindFramebuffer(T.FRAMEBUFFER,null),T.bindTexture(T.TEXTURE_2D,null)},blendFrames:function(g,m,x,y,T,C){y===void 0&&(y=1),T===void 0&&(T=!0),C===void 0&&(C=this.linearShader);var S=this.gl;this.setShader(C),this.set1i("uMainSampler1",0),this.set1i("uMainSampler2",1),this.set1f("uStrength",y),S.activeTexture(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,g.texture),S.activeTexture(S.TEXTURE1),S.bindTexture(S.TEXTURE_2D,m.texture),x?(S.bindFramebuffer(S.FRAMEBUFFER,x.framebuffer),S.framebufferTexture2D(S.FRAMEBUFFER,S.COLOR_ATTACHMENT0,S.TEXTURE_2D,x.texture,0),S.viewport(0,0,x.width,x.height)):S.viewport(0,0,g.width,g.height),T?S.clearColor(0,0,0,0):S.clearColor(0,0,0,1),S.clear(S.COLOR_BUFFER_BIT),S.bufferData(S.ARRAY_BUFFER,this.vertexData,S.STATIC_DRAW),S.drawArrays(S.TRIANGLES,0,6),S.bindFramebuffer(S.FRAMEBUFFER,null),S.bindTexture(S.TEXTURE_2D,null)},blendFramesAdditive:function(g,m,x,y,T){this.blendFrames(g,m,x,y,T,this.addShader)},clearFrame:function(g,m){m===void 0&&(m=!0);var x=this.gl;x.viewport(0,0,g.width,g.height),x.bindFramebuffer(x.FRAMEBUFFER,g.framebuffer),m?x.clearColor(0,0,0,0):x.clearColor(0,0,0,1),x.clear(x.COLOR_BUFFER_BIT);var y=this.renderer.currentFramebuffer;x.bindFramebuffer(x.FRAMEBUFFER,y)},setUVs:function(g,m,x,y,T,C,S,E){var M=this.vertexViewF32;M[2]=g,M[3]=m,M[6]=x,M[7]=y,M[10]=T,M[11]=C,M[14]=g,M[15]=m,M[18]=T,M[19]=C,M[22]=S,M[23]=E},setTargetUVs:function(g,m){var x=m.height/g.height;x>.5?x=.5-(x-.5):x=.5+(.5-x),this.setUVs(0,x,0,1+x,1,1+x,1,x)},flipX:function(){this.setUVs(1,0,1,1,0,1,0,0)},flipY:function(){this.setUVs(0,1,0,0,1,0,1,1)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)}});e.exports=p},function(e,f){e.exports=["#define SHADER_NAME PHASER_QUAD_VS","","precision mediump float;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","","varying vec2 outFragCoord;","varying vec2 outTexCoord;","","void main ()","{","    outFragCoord = inPosition.xy * 0.5 + 0.5;","    outTexCoord = inTexCoord;","","    gl_Position = vec4(inPosition, 0, 1);","}",""].join(`
`)},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(31),o=i(38),r=i(2),a=function(l,h){var u=l.getContext("experimental-webgl"),v=r(h,"callback"),d=r(h,"type","image/png"),c=r(h,"encoder",.92),p=r(h,"x",0),g=r(h,"y",0),m=r(h,"getPixel",!1),x=r(h,"isFramebuffer",!1),y=x?r(h,"bufferWidth",1):u.drawingBufferWidth,T=x?r(h,"bufferHeight",1):u.drawingBufferHeight;if(m){var C=new Uint8Array(4),S=x?g:T-g;u.readPixels(p,S,1,1,u.RGBA,u.UNSIGNED_BYTE,C),v.call(null,new o(C[0],C[1],C[2],C[3]/255))}else{var E=r(h,"width",y),M=r(h,"height",T),O=E*M*4,L=new Uint8Array(O);u.readPixels(p,T-g-M,E,M,u.RGBA,u.UNSIGNED_BYTE,L);for(var R=n.createWebGL(this,E,M),w=R.getContext("2d"),D=w.getImageData(0,0,E,M),B=D.data,N=0;N<M;N++)for(var z=0;z<E;z++){var X=((M-N-1)*E+z)*4,k=(N*E+z)*4;B[k+0]=L[X+0],B[k+1]=L[X+1],B[k+2]=L[X+2],B[k+3]=L[X+3]}w.putImageData(D,0,0);var K=new Image;K.onerror=function(){v.call(null),n.remove(R)},K.onload=function(){v.call(null,K),n.remove(R)},K.src=R.toDataURL(d,c)}};e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(33),o=function(r){var a=r.config;if(!a.hideBanner){var l="WebGL";a.renderType===n.CANVAS?l="Canvas":a.renderType===n.HEADLESS&&(l="Headless");var h=a.audio,u=r.device.audio,v;if(u.webAudio&&!h.disableWebAudio?v="Web Audio":h.noAudio||!u.webAudio&&!u.audioData?v="No Audio":v="HTML5 Audio",r.device.browser.ie)window.console&&console.log("Phaser v"+n.VERSION+" / https://phaser.io");else{var d="",c=[d];if(Array.isArray(a.bannerBackgroundColor)){var p;a.bannerBackgroundColor.forEach(function(m){d=d.concat("%c "),c.push("background: "+m),p=m}),c[c.length-1]="color: "+a.bannerTextColor+"; background: "+p}else d=d.concat("%c "),c.push("color: "+a.bannerTextColor+"; background: "+a.bannerBackgroundColor);c.push("background: transparent"),a.gameTitle&&(d=d.concat(a.gameTitle),a.gameVersion&&(d=d.concat(" v"+a.gameVersion)),a.hidePhaser||(d=d.concat(" / ")));var g="";a.hidePhaser||(d=d.concat("Phaser v"+n.VERSION+g+" ("+l+" | "+v+")")),d=d.concat(" %c "+a.gameURL),c[0]=d,console.log.apply(console,c)}}};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(6),r=i(1),a=i(386),l=new n({initialize:function(u,v){this.game=u,this.raf=new a,this.started=!1,this.running=!1,this.minFps=o(v,"min",5),this.targetFps=o(v,"target",60),this._min=1e3/this.minFps,this._target=1e3/this.targetFps,this.actualFps=this.targetFps,this.nextFpsUpdate=0,this.framesThisSecond=0,this.callback=r,this.forceSetTimeOut=o(v,"forceSetTimeOut",!1),this.time=0,this.startTime=0,this.lastTime=0,this.frame=0,this.inFocus=!0,this._pauseTime=0,this._coolDown=0,this.delta=0,this.deltaIndex=0,this.deltaHistory=[],this.deltaSmoothingMax=o(v,"deltaHistory",10),this.panicMax=o(v,"panicMax",120),this.rawDelta=0,this.now=0,this.smoothStep=o(v,"smoothStep",!0)},blur:function(){this.inFocus=!1},focus:function(){this.inFocus=!0,this.resetDelta()},pause:function(){this._pauseTime=window.performance.now()},resume:function(){this.resetDelta(),this.startTime+=this.time-this._pauseTime},resetDelta:function(){var h=window.performance.now();this.time=h,this.lastTime=h,this.nextFpsUpdate=h+1e3,this.framesThisSecond=0;for(var u=0;u<this.deltaSmoothingMax;u++)this.deltaHistory[u]=Math.min(this._target,this.deltaHistory[u]);this.delta=0,this.deltaIndex=0,this._coolDown=this.panicMax},start:function(h){if(this.started)return this;this.started=!0,this.running=!0;for(var u=0;u<this.deltaSmoothingMax;u++)this.deltaHistory[u]=this._target;this.resetDelta(),this.startTime=window.performance.now(),this.callback=h,this.raf.start(this.step.bind(this),this.forceSetTimeOut,this._target)},step:function(){var h=window.performance.now();this.now=h;var u=h-this.lastTime;u<0&&(u=0),this.rawDelta=u;var v=this.deltaIndex,d=this.deltaHistory,c=this.deltaSmoothingMax,p=u,g=u;if(this.smoothStep){(this._coolDown>0||!this.inFocus)&&(this._coolDown--,p=Math.min(p,this._target)),p>this._min&&(p=d[v],p=Math.min(p,this._min)),d[v]=p,this.deltaIndex++,this.deltaIndex>c&&(this.deltaIndex=0),g=0;for(var m=0;m<c;m++)g+=d[m];g/=c}this.delta=g,this.time+=this.rawDelta,h>this.nextFpsUpdate&&(this.actualFps=.25*this.framesThisSecond+.75*this.actualFps,this.nextFpsUpdate=h+1e3,this.framesThisSecond=0),this.framesThisSecond++;var x=g/this._target;this.callback(h,g,x),this.lastTime=h,this.frame++},tick:function(){this.step()},sleep:function(){this.running&&(this.raf.stop(),this.running=!1)},wake:function(h){this.running||(h&&(this.startTime+=-this.lastTime+(this.lastTime+window.performance.now())),this.raf.start(this.step.bind(this),this.useRAF),this.running=!0,this.step())},getDuration:function(){return Math.round(this.lastTime-this.startTime)/1e3},getDurationMS:function(){return Math.round(this.lastTime-this.startTime)},stop:function(){return this.running=!1,this.started=!1,this.raf.stop(),this},destroy:function(){this.stop(),this.callback=r,this.raf=null,this.game=null}});e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(1),r=new n({initialize:function(){this.isRunning=!1,this.callback=o,this.tick=0,this.isSetTimeOut=!1,this.timeOutID=null,this.lastTime=0,this.target=0;var l=this;this.step=function h(){var u=window.performance.now();l.lastTime=l.tick,l.tick=u,l.callback(u),l.timeOutID=window.requestAnimationFrame(h)},this.stepTimeout=function h(){var u=Date.now(),v=Math.min(Math.max(l.target*2+l.tick-u,0),l.target);l.lastTime=l.tick,l.tick=u,l.callback(u),l.timeOutID=window.setTimeout(h,v)}},start:function(a,l,h){this.isRunning||(this.callback=a,this.isSetTimeOut=l,this.target=h,this.isRunning=!0,this.timeOutID=l?window.setTimeout(this.stepTimeout,0):window.requestAnimationFrame(this.step))},stop:function(){this.isRunning=!1,this.isSetTimeOut?clearTimeout(this.timeOutID):window.cancelAnimationFrame(this.timeOutID)},destroy:function(){this.stop(),this.callback=o}});e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(22),o=function(r){var a,l=r.events;if(document.hidden!==void 0)a="visibilitychange";else{var h=["webkit","moz","ms"];h.forEach(function(v){document[v+"Hidden"]!==void 0&&(document.hidden=function(){return document[v+"Hidden"]},a=v+"visibilitychange")})}var u=function(v){document.hidden||v.type==="pause"?l.emit(n.HIDDEN):l.emit(n.VISIBLE)};a&&document.addEventListener(a,u,!1),window.onblur=function(){l.emit(n.BLUR)},window.onfocus=function(){l.emit(n.FOCUS)},window.focus&&r.config.autoFocus&&window.focus()};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(389),o=i(31),r=i(6),a=function(l){var h=r(l,"data",[]),u=r(l,"canvas",null),v=r(l,"palette",n),d=r(l,"pixelWidth",1),c=r(l,"pixelHeight",d),p=r(l,"resizeCanvas",!0),g=r(l,"clearCanvas",!0),m=r(l,"preRender",null),x=r(l,"postRender",null),y=Math.floor(Math.abs(h[0].length*d)),T=Math.floor(Math.abs(h.length*c));u||(u=o.create2D(this,y,T),p=!1,g=!1),p&&(u.width=y,u.height=T);var C=u.getContext("2d");g&&C.clearRect(0,0,y,T),m&&m(u,C);for(var S=0;S<h.length;S++)for(var E=h[S],M=0;M<E.length;M++){var O=E[M];O!=="."&&O!==" "&&(C.fillStyle=v[O],C.fillRect(M*d,S*c,d,c))}return x&&x(u,C),u};e.exports=a},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={0:"#000",1:"#9D9D9D",2:"#FFF",3:"#BE2633",4:"#E06F8B",5:"#493C2B",6:"#A46422",7:"#EB8931",8:"#F7E26B",9:"#2F484E",A:"#44891A",B:"#A3CE27",C:"#1B2632",D:"#005784",E:"#31A2F2",F:"#B2DCEF"}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(358),r=i(94),a=i(3),l=new n({Extends:r,initialize:function(u,v,d,c){r.call(this,"CubicBezierCurve"),Array.isArray(u)&&(c=new a(u[6],u[7]),d=new a(u[4],u[5]),v=new a(u[2],u[3]),u=new a(u[0],u[1])),this.p0=u,this.p1=v,this.p2=d,this.p3=c},getStartPoint:function(h){return h===void 0&&(h=new a),h.copy(this.p0)},getResolution:function(h){return h},getPoint:function(h,u){u===void 0&&(u=new a);var v=this.p0,d=this.p1,c=this.p2,p=this.p3;return u.set(o(h,v.x,d.x,c.x,p.x),o(h,v.y,d.y,c.y,p.y))},draw:function(h,u){u===void 0&&(u=32);var v=this.getPoints(u);h.beginPath(),h.moveTo(this.p0.x,this.p0.y);for(var d=1;d<v.length;d++)h.lineTo(v[d].x,v[d].y);return h.strokePath(),h},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y,this.p3.x,this.p3.y]}}});l.fromJSON=function(h){var u=h.points,v=new a(u[0],u[1]),d=new a(u[2],u[3]),c=new a(u[4],u[5]),p=new a(u[6],u[7]);return new l(v,d,c,p)},e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(94),r=i(36),a=i(6),l=i(196),h=i(3),u=new n({Extends:o,initialize:function(d,c,p,g,m,x,y,T){if(typeof d=="object"){var C=d;d=a(C,"x",0),c=a(C,"y",0),p=a(C,"xRadius",0),g=a(C,"yRadius",p),m=a(C,"startAngle",0),x=a(C,"endAngle",360),y=a(C,"clockwise",!1),T=a(C,"rotation",0)}else g===void 0&&(g=p),m===void 0&&(m=0),x===void 0&&(x=360),y===void 0&&(y=!1),T===void 0&&(T=0);o.call(this,"EllipseCurve"),this.p0=new h(d,c),this._xRadius=p,this._yRadius=g,this._startAngle=r(m),this._endAngle=r(x),this._clockwise=y,this._rotation=r(T)},getStartPoint:function(v){return v===void 0&&(v=new h),this.getPoint(0,v)},getResolution:function(v){return v*2},getPoint:function(v,d){d===void 0&&(d=new h);for(var c=Math.PI*2,p=this._endAngle-this._startAngle,g=Math.abs(p)<Number.EPSILON;p<0;)p+=c;for(;p>c;)p-=c;p<Number.EPSILON&&(g?p=0:p=c),this._clockwise&&!g&&(p===c?p=-c:p=p-c);var m=this._startAngle+v*p,x=this.p0.x+this._xRadius*Math.cos(m),y=this.p0.y+this._yRadius*Math.sin(m);if(this._rotation!==0){var T=Math.cos(this._rotation),C=Math.sin(this._rotation),S=x-this.p0.x,E=y-this.p0.y;x=S*T-E*C+this.p0.x,y=S*C+E*T+this.p0.y}return d.set(x,y)},setXRadius:function(v){return this.xRadius=v,this},setYRadius:function(v){return this.yRadius=v,this},setWidth:function(v){return this.xRadius=v/2,this},setHeight:function(v){return this.yRadius=v/2,this},setStartAngle:function(v){return this.startAngle=v,this},setEndAngle:function(v){return this.endAngle=v,this},setClockwise:function(v){return this.clockwise=v,this},setRotation:function(v){return this.rotation=v,this},x:{get:function(){return this.p0.x},set:function(v){this.p0.x=v}},y:{get:function(){return this.p0.y},set:function(v){this.p0.y=v}},xRadius:{get:function(){return this._xRadius},set:function(v){this._xRadius=v}},yRadius:{get:function(){return this._yRadius},set:function(v){this._yRadius=v}},startAngle:{get:function(){return l(this._startAngle)},set:function(v){this._startAngle=r(v)}},endAngle:{get:function(){return l(this._endAngle)},set:function(v){this._endAngle=r(v)}},clockwise:{get:function(){return this._clockwise},set:function(v){this._clockwise=v}},angle:{get:function(){return l(this._rotation)},set:function(v){this._rotation=r(v)}},rotation:{get:function(){return this._rotation},set:function(v){this._rotation=v}},toJSON:function(){return{type:this.type,x:this.p0.x,y:this.p0.y,xRadius:this._xRadius,yRadius:this._yRadius,startAngle:l(this._startAngle),endAngle:l(this._endAngle),clockwise:this._clockwise,rotation:l(this._rotation)}}});u.fromJSON=function(v){return new u(v)},e.exports=u},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(94),r=i(199),a=i(10),l=i(3),h=new n({Extends:o,initialize:function(v,d){o.call(this,"LineCurve"),Array.isArray(v)&&(d=new l(v[2],v[3]),v=new l(v[0],v[1])),this.p0=v,this.p1=d,this.arcLengthDivisions=1},getBounds:function(u){return u===void 0&&(u=new a),r([this.p0,this.p1],u)},getStartPoint:function(u){return u===void 0&&(u=new l),u.copy(this.p0)},getResolution:function(u){return u===void 0&&(u=1),u},getPoint:function(u,v){return v===void 0&&(v=new l),u===1?v.copy(this.p1):(v.copy(this.p1).subtract(this.p0).scale(u).add(this.p0),v)},getPointAt:function(u,v){return this.getPoint(u,v)},getTangent:function(u,v){return v===void 0&&(v=new l),v.copy(this.p1).subtract(this.p0).normalize(),v},getUtoTmapping:function(u,v,d){var c;if(v){var p=this.getLengths(d),g=p[p.length-1],m=Math.min(v,g);c=m/g}else c=u;return c},draw:function(u){return u.lineBetween(this.p0.x,this.p0.y,this.p1.x,this.p1.y),u},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y]}}});h.fromJSON=function(u){var v=u.points,d=new l(v[0],v[1]),c=new l(v[2],v[3]);return new h(d,c)},e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(3),r=new n({initialize:function(l,h){this.active=!1,this.p0=new o(l,h)},getPoint:function(a,l){return l===void 0&&(l=new o),l.copy(this.p0)},getPointAt:function(a,l){return this.getPoint(a,l)},getResolution:function(){return 1},getLength:function(){return 0},toJSON:function(){return{type:"MoveTo",points:[this.p0.x,this.p0.y]}}});e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(94),r=i(359),a=i(3),l=new n({Extends:o,initialize:function(u,v,d){o.call(this,"QuadraticBezier"),Array.isArray(u)&&(d=new a(u[4],u[5]),v=new a(u[2],u[3]),u=new a(u[0],u[1])),this.p0=u,this.p1=v,this.p2=d},getStartPoint:function(h){return h===void 0&&(h=new a),h.copy(this.p0)},getResolution:function(h){return h},getPoint:function(h,u){u===void 0&&(u=new a);var v=this.p0,d=this.p1,c=this.p2;return u.set(r(h,v.x,d.x,c.x),r(h,v.y,d.y,c.y))},draw:function(h,u){u===void 0&&(u=32);var v=this.getPoints(u);h.beginPath(),h.moveTo(this.p0.x,this.p0.y);for(var d=1;d<v.length;d++)h.lineTo(v[d].x,v[d].y);return h.strokePath(),h},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y]}}});l.fromJSON=function(h){var u=h.points,v=new a(u[0],u[1]),d=new a(u[2],u[3]),c=new a(u[4],u[5]);return new l(v,d,c)},e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(194),o=i(0),r=i(94),a=i(3),l=new o({Extends:r,initialize:function(u){u===void 0&&(u=[]),r.call(this,"SplineCurve"),this.points=[],this.addPoints(u)},addPoints:function(h){for(var u=0;u<h.length;u++){var v=new a;typeof h[u]=="number"?(v.x=h[u],v.y=h[u+1],u++):Array.isArray(h[u])?(v.x=h[u][0],v.y=h[u][1]):(v.x=h[u].x,v.y=h[u].y),this.points.push(v)}return this},addPoint:function(h,u){var v=new a(h,u);return this.points.push(v),v},getStartPoint:function(h){return h===void 0&&(h=new a),h.copy(this.points[0])},getResolution:function(h){return h*this.points.length},getPoint:function(h,u){u===void 0&&(u=new a);var v=this.points,d=(v.length-1)*h,c=Math.floor(d),p=d-c,g=v[c===0?c:c-1],m=v[c],x=v[c>v.length-2?v.length-1:c+1],y=v[c>v.length-3?v.length-1:c+2];return u.set(n(p,g.x,m.x,x.x,y.x),n(p,g.y,m.y,x.y,y.y))},toJSON:function(){for(var h=[],u=0;u<this.points.length;u++)h.push(this.points[u].x),h.push(this.points[u].y);return{type:this.type,points:h}}});l.fromJSON=function(h){return new l(h.points)},e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=new n({initialize:function(a,l,h,u){(!l||l==="")&&(l=["precision mediump float;","uniform vec2 resolution;","varying vec2 fragCoord;","void main () {","    vec2 uv = fragCoord / resolution.xy;","    gl_FragColor = vec4(uv.xyx, 1.0);","}"].join(`
`)),(!h||h==="")&&(h=["precision mediump float;","uniform mat4 uProjectionMatrix;","uniform mat4 uViewMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","varying vec2 fragCoord;","varying vec2 outTexCoord;","void main () {","   gl_Position = uProjectionMatrix * uViewMatrix * vec4(inPosition, 1.0, 1.0);","   fragCoord = vec2(inPosition.x, uResolution.y - inPosition.y);","   outTexCoord = vec2(inPosition.x / uResolution.x, fragCoord.y / uResolution.y);","}"].join(`
`)),u===void 0&&(u=null),this.key=a,this.fragmentSrc=l,this.vertexSrc=h,this.uniforms=u}});e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(38);n.ColorSpectrum=i(909),n.ColorToRGBA=i(910),n.ComponentToHex=i(398),n.GetColor=i(103),n.GetColor32=i(328),n.HexStringToColor=i(327),n.HSLToColor=i(911),n.HSVColorWheel=i(912),n.HSVToRGB=i(188),n.HueToComponent=i(399),n.IntegerToColor=i(189),n.IntegerToRGB=i(330),n.Interpolate=i(913),n.ObjectToColor=i(331),n.RandomRGB=i(914),n.RGBStringToColor=i(332),n.RGBToHSV=i(329),n.RGBToString=i(915),n.ValueToColor=i(187),e.exports=n},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){var o=n.toString(16);return o.length===1?"0"+o:o};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r){return r<0&&(r+=1),r>1&&(r-=1),r<.16666666666666666?n+(o-n)*6*r:r<.5?o:r<.6666666666666666?n+(o-n)*(.6666666666666666-r)*6:n};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(105),o=function(r){if(document.readyState==="complete"||document.readyState==="interactive"){r();return}var a=function(){document.removeEventListener("deviceready",a,!0),document.removeEventListener("DOMContentLoaded",a,!0),window.removeEventListener("load",a,!0),r()};document.body?n.cordova?document.addEventListener("deviceready",a,!1):(document.addEventListener("DOMContentLoaded",a,!0),window.addEventListener("load",a,!0)):window.setTimeout(a,20)};e.exports=o},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){if(!n)return window.innerHeight;var o=Math.abs(window.orientation),r={w:0,h:0},a=document.createElement("div");return a.setAttribute("style","position: fixed; height: 100vh; width: 0; top: 0"),document.documentElement.appendChild(a),r.w=o===90?a.offsetHeight:window.innerWidth,r.h=o===90?window.innerWidth:a.offsetHeight,document.documentElement.removeChild(a),a=null,Math.abs(window.orientation)!==90?r.h:r.w};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(201),o=function(r,a){var l=window.screen,h=l?l.orientation||l.mozOrientation||l.msOrientation:!1;if(h&&typeof h.type=="string")return h.type;if(typeof h=="string")return h;if(typeof window.orientation=="number")return window.orientation===0||window.orientation===180?n.ORIENTATION.PORTRAIT:n.ORIENTATION.LANDSCAPE;if(window.matchMedia){if(window.matchMedia("(orientation: portrait)").matches)return n.ORIENTATION.PORTRAIT;if(window.matchMedia("(orientation: landscape)").matches)return n.ORIENTATION.LANDSCAPE}else return a>r?n.ORIENTATION.PORTRAIT:n.ORIENTATION.LANDSCAPE};e.exports=o},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={NO_CENTER:0,CENTER_BOTH:1,CENTER_HORIZONTALLY:2,CENTER_VERTICALLY:3}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={LANDSCAPE:"landscape-primary",PORTRAIT:"portrait-primary"}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={NONE:0,WIDTH_CONTROLS_HEIGHT:1,HEIGHT_CONTROLS_WIDTH:2,FIT:3,ENVELOP:4,RESIZE:5}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={NO_ZOOM:1,ZOOM_2X:2,ZOOM_4X:4,MAX_ZOOM:-1}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){var o;return n!==""&&(typeof n=="string"?o=document.getElementById(n):n&&n.nodeType===1&&(o=n)),o||(o=document.body),o};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){var o="";try{if(window.DOMParser){var r=new DOMParser;o=r.parseFromString(n,"text/xml")}else o=new ActiveXObject("Microsoft.XMLDOM"),o.loadXML(n)}catch{o=null}return!o||!o.documentElement||o.getElementsByTagName("parsererror").length?null:o};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(203),r=i(9),a=i(51),l=i(22),h=i(410),u=i(411),v=i(412),d=i(413),c=i(25),p=i(177),g=new n({initialize:function(x,y){this.game=x,this.scaleManager,this.canvas,this.config=y,this.enabled=!0,this.events=new r,this.isOver=!0,this.defaultCursor="",this.keyboard=y.inputKeyboard?new h(this):null,this.mouse=y.inputMouse?new u(this):null,this.touch=y.inputTouch?new d(this):null,this.pointers=[],this.pointersTotal=y.inputActivePointers,y.inputTouch&&this.pointersTotal===1&&(this.pointersTotal=2);for(var T=0;T<=this.pointersTotal;T++){var C=new v(this,T);C.smoothFactor=y.inputSmoothFactor,this.pointers.push(C)}this.mousePointer=y.inputMouse?this.pointers[0]:null,this.activePointer=this.pointers[0],this.globalTopOnly=!0,this.time=0,this._tempPoint={x:0,y:0},this._tempHitTest=[],this._tempMatrix=new c,this._tempMatrix2=new c,this._tempSkip=!1,this.mousePointerContainer=[this.mousePointer],x.events.once(l.BOOT,this.boot,this)},boot:function(){this.canvas=this.game.canvas,this.scaleManager=this.game.scale,this.events.emit(a.MANAGER_BOOT),this.game.events.on(l.PRE_RENDER,this.preRender,this),this.game.events.once(l.DESTROY,this.destroy,this)},setCanvasOver:function(m){this.isOver=!0,this.events.emit(a.GAME_OVER,m)},setCanvasOut:function(m){this.isOver=!1,this.events.emit(a.GAME_OUT,m)},preRender:function(){var m=this.game.loop.now,x=this.game.loop.delta,y=this.game.scene.getScenes(!0,!0);this.time=m,this.events.emit(a.MANAGER_UPDATE);for(var T=0;T<y.length;T++){var C=y[T];if(C.sys.input&&C.sys.input.updatePoll(m,x)&&this.globalTopOnly)return}},setDefaultCursor:function(m){this.defaultCursor=m,this.canvas.style.cursor!==m&&(this.canvas.style.cursor=m)},setCursor:function(m){m.cursor&&(this.canvas.style.cursor=m.cursor)},resetCursor:function(m){m.cursor&&this.canvas&&(this.canvas.style.cursor=this.defaultCursor)},addPointer:function(m){m===void 0&&(m=1);var x=[];this.pointersTotal+m>10&&(m=10-this.pointersTotal);for(var y=0;y<m;y++){var T=this.pointers.length,C=new v(this,T);C.smoothFactor=this.config.inputSmoothFactor,this.pointers.push(C),this.pointersTotal++,x.push(C)}return x},updateInputPlugins:function(m,x){var y=this.game.scene.getScenes(!0,!0);this._tempSkip=!1;for(var T=0;T<y.length;T++){var C=y[T];if(C.sys.input){var S=C.sys.input.update(m,x);if(S&&this.globalTopOnly||this._tempSkip)return}}},onTouchStart:function(m){for(var x=this.pointers,y=[],T=0;T<m.changedTouches.length;T++)for(var C=m.changedTouches[T],S=1;S<this.pointersTotal;S++){var E=x[S];if(!E.active){E.touchstart(C,m),this.activePointer=E,y.push(E);break}}this.updateInputPlugins(o.TOUCH_START,y)},onTouchMove:function(m){for(var x=this.pointers,y=[],T=0;T<m.changedTouches.length;T++)for(var C=m.changedTouches[T],S=1;S<this.pointersTotal;S++){var E=x[S];if(E.active&&E.identifier===C.identifier){E.touchmove(C,m),this.activePointer=E,y.push(E);break}}this.updateInputPlugins(o.TOUCH_MOVE,y)},onTouchEnd:function(m){for(var x=this.pointers,y=[],T=0;T<m.changedTouches.length;T++)for(var C=m.changedTouches[T],S=1;S<this.pointersTotal;S++){var E=x[S];if(E.active&&E.identifier===C.identifier){E.touchend(C,m),y.push(E);break}}this.updateInputPlugins(o.TOUCH_END,y)},onTouchCancel:function(m){for(var x=this.pointers,y=[],T=0;T<m.changedTouches.length;T++)for(var C=m.changedTouches[T],S=1;S<this.pointersTotal;S++){var E=x[S];if(E.active&&E.identifier===C.identifier){E.touchcancel(C,m),y.push(E);break}}this.updateInputPlugins(o.TOUCH_CANCEL,y)},onMouseDown:function(m){var x=this.mousePointer;x.down(m),x.updateMotion(),this.activePointer=x,this.updateInputPlugins(o.MOUSE_DOWN,this.mousePointerContainer)},onMouseMove:function(m){var x=this.mousePointer;x.move(m),x.updateMotion(),this.activePointer=x,this.updateInputPlugins(o.MOUSE_MOVE,this.mousePointerContainer)},onMouseUp:function(m){var x=this.mousePointer;x.up(m),x.updateMotion(),this.activePointer=x,this.updateInputPlugins(o.MOUSE_UP,this.mousePointerContainer)},onMouseWheel:function(m){var x=this.mousePointer;x.wheel(m),this.activePointer=x,this.updateInputPlugins(o.MOUSE_WHEEL,this.mousePointerContainer)},onPointerLockChange:function(m){var x=this.mouse.locked;this.mousePointer.locked=x,this.events.emit(a.POINTERLOCK_CHANGE,m,x)},inputCandidate:function(m,x){var y=m.input;if(!y||!y.enabled||!y.alwaysEnabled&&!m.willRender(x))return!1;var T=!0,C=m.parentContainer;if(C)do{if(!C.willRender(x)){T=!1;break}C=C.parentContainer}while(C);return T},hitTest:function(m,x,y,T){T===void 0&&(T=this._tempHitTest);var C=this._tempPoint,S=y.scrollX,E=y.scrollY;T.length=0;var M=m.x,O=m.y;y.getWorldPoint(M,O,C),m.worldX=C.x,m.worldY=C.y;for(var L={x:0,y:0},R=this._tempMatrix,w=this._tempMatrix2,D=0;D<x.length;D++){var B=x[D];if(!!this.inputCandidate(B,y)){var N=C.x+S*B.scrollFactorX-S,z=C.y+E*B.scrollFactorY-E;B.parentContainer?(B.getWorldTransformMatrix(R,w),R.applyInverse(N,z,L)):p(N,z,B.x,B.y,B.rotation,B.scaleX,B.scaleY,L),this.pointWithinHitArea(B,L.x,L.y)&&T.push(B)}}return T},pointWithinHitArea:function(m,x,y){x+=m.displayOriginX,y+=m.displayOriginY;var T=m.input;return T&&T.hitAreaCallback(T.hitArea,x,y,m)?(T.localX=x,T.localY=y,!0):!1},pointWithinInteractiveObject:function(m,x,y){return m.hitArea?(x+=m.gameObject.displayOriginX,y+=m.gameObject.displayOriginY,m.localX=x,m.localY=y,m.hitAreaCallback(m.hitArea,x,y,m)):!1},transformPointer:function(m,x,y,T){var C=m.position,S=m.prevPosition;S.x=C.x,S.y=C.y;var E=this.scaleManager.transformX(x),M=this.scaleManager.transformY(y),O=m.smoothFactor;!T||O===0?(C.x=E,C.y=M):(C.x=E*O+S.x*(1-O),C.y=M*O+S.y*(1-O))},destroy:function(){this.events.removeAllListeners(),this.game.events.off(l.PRE_RENDER),this.keyboard&&this.keyboard.destroy(),this.mouse&&this.mouse.destroy(),this.touch&&this.touch.destroy();for(var m=0;m<this.pointers.length;m++)this.pointers[m].destroy();this.pointers=[],this._tempHitTest=[],this._tempMatrix.destroy(),this.canvas=null,this.game=null}});e.exports=g},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(93),o=i(0),r=i(22),a=i(51),l=i(143),h=i(1),u=new o({initialize:function(d){this.manager=d,this.queue=[],this.preventDefault=!0,this.captures=[],this.enabled=!1,this.target,this.onKeyDown=h,this.onKeyUp=h,d.events.once(a.MANAGER_BOOT,this.boot,this)},boot:function(){var v=this.manager.config;this.enabled=v.inputKeyboard,this.target=v.inputKeyboardEventTarget,this.addCapture(v.inputKeyboardCapture),!this.target&&window&&(this.target=window),this.enabled&&this.target&&this.startListeners(),this.manager.game.events.on(r.POST_STEP,this.postUpdate,this)},startListeners:function(){var v=this;this.onKeyDown=function(c){if(!(c.defaultPrevented||!v.enabled||!v.manager)){v.queue.push(c),v.manager.events.emit(a.MANAGER_PROCESS);var p=c.altKey||c.ctrlKey||c.shiftKey||c.metaKey;v.preventDefault&&!p&&v.captures.indexOf(c.keyCode)>-1&&c.preventDefault()}},this.onKeyUp=function(c){if(!(c.defaultPrevented||!v.enabled||!v.manager)){v.queue.push(c),v.manager.events.emit(a.MANAGER_PROCESS);var p=c.altKey||c.ctrlKey||c.shiftKey||c.metaKey;v.preventDefault&&!p&&v.captures.indexOf(c.keyCode)>-1&&c.preventDefault()}};var d=this.target;d&&(d.addEventListener("keydown",this.onKeyDown,!1),d.addEventListener("keyup",this.onKeyUp,!1),this.enabled=!0)},stopListeners:function(){var v=this.target;v.removeEventListener("keydown",this.onKeyDown,!1),v.removeEventListener("keyup",this.onKeyUp,!1),this.enabled=!1},postUpdate:function(){this.queue=[]},addCapture:function(v){typeof v=="string"&&(v=v.split(",")),Array.isArray(v)||(v=[v]);for(var d=this.captures,c=0;c<v.length;c++){var p=v[c];typeof p=="string"&&(p=l[p.trim().toUpperCase()]),d.indexOf(p)===-1&&d.push(p)}this.preventDefault=d.length>0},removeCapture:function(v){typeof v=="string"&&(v=v.split(",")),Array.isArray(v)||(v=[v]);for(var d=this.captures,c=0;c<v.length;c++){var p=v[c];typeof p=="string"&&(p=l[p.toUpperCase()]),n(d,p)}this.preventDefault=d.length>0},clearCaptures:function(){this.captures=[],this.preventDefault=!1},destroy:function(){this.stopListeners(),this.clearCaptures(),this.queue=[],this.manager.game.events.off(r.POST_RENDER,this.postUpdate,this),this.target=null,this.enabled=!1,this.manager=null}});e.exports=u},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(191),r=i(51),a=i(1),l=new n({initialize:function(u){this.manager=u,this.preventDefaultDown=!0,this.preventDefaultUp=!0,this.preventDefaultMove=!0,this.preventDefaultWheel=!1,this.enabled=!1,this.target,this.locked=!1,this.onMouseMove=a,this.onMouseDown=a,this.onMouseUp=a,this.onMouseDownWindow=a,this.onMouseUpWindow=a,this.onMouseOver=a,this.onMouseOut=a,this.onMouseWheel=a,this.pointerLockChange=a,this.isTop=!0,u.events.once(r.MANAGER_BOOT,this.boot,this)},boot:function(){var h=this.manager.config;this.enabled=h.inputMouse,this.target=h.inputMouseEventTarget,this.passive=h.inputMousePassive,this.preventDefaultDown=h.inputMousePreventDefaultDown,this.preventDefaultUp=h.inputMousePreventDefaultUp,this.preventDefaultMove=h.inputMousePreventDefaultMove,this.preventDefaultWheel=h.inputMousePreventDefaultWheel,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,h.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return document.body.addEventListener("contextmenu",function(h){return h.preventDefault(),!1}),this},requestPointerLock:function(){if(o.pointerLock){var h=this.target;h.requestPointerLock=h.requestPointerLock||h.mozRequestPointerLock||h.webkitRequestPointerLock,h.requestPointerLock()}},releasePointerLock:function(){o.pointerLock&&(document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock())},startListeners:function(){var h=this.target;if(!!h){var u=this,v=this.manager,d=v.canvas,c=window&&window.focus&&v.game.config.autoFocus;this.onMouseMove=function(g){!g.defaultPrevented&&u.enabled&&v&&v.enabled&&(v.onMouseMove(g),u.preventDefaultMove&&g.preventDefault())},this.onMouseDown=function(g){c&&window.focus(),!g.defaultPrevented&&u.enabled&&v&&v.enabled&&(v.onMouseDown(g),u.preventDefaultDown&&g.target===d&&g.preventDefault())},this.onMouseDownWindow=function(g){!g.defaultPrevented&&u.enabled&&v&&v.enabled&&g.target!==d&&v.onMouseDown(g)},this.onMouseUp=function(g){!g.defaultPrevented&&u.enabled&&v&&v.enabled&&(v.onMouseUp(g),u.preventDefaultUp&&g.target===d&&g.preventDefault())},this.onMouseUpWindow=function(g){!g.defaultPrevented&&u.enabled&&v&&v.enabled&&g.target!==d&&v.onMouseUp(g)},this.onMouseOver=function(g){!g.defaultPrevented&&u.enabled&&v&&v.enabled&&v.setCanvasOver(g)},this.onMouseOut=function(g){!g.defaultPrevented&&u.enabled&&v&&v.enabled&&v.setCanvasOut(g)},this.onMouseWheel=function(g){!g.defaultPrevented&&u.enabled&&v&&v.enabled&&v.onMouseWheel(g),u.preventDefaultWheel&&g.target===d&&g.preventDefault()};var p={passive:!0};if(h.addEventListener("mousemove",this.onMouseMove),h.addEventListener("mousedown",this.onMouseDown),h.addEventListener("mouseup",this.onMouseUp),h.addEventListener("mouseover",this.onMouseOver,p),h.addEventListener("mouseout",this.onMouseOut,p),this.preventDefaultWheel?h.addEventListener("wheel",this.onMouseWheel,{passive:!1}):h.addEventListener("wheel",this.onMouseWheel,p),window&&v.game.config.inputWindowEvents)try{window.top.addEventListener("mousedown",this.onMouseDownWindow,p),window.top.addEventListener("mouseup",this.onMouseUpWindow,p)}catch{window.addEventListener("mousedown",this.onMouseDownWindow,p),window.addEventListener("mouseup",this.onMouseUpWindow,p),this.isTop=!1}o.pointerLock&&(this.pointerLockChange=function(g){var m=u.target;u.locked=document.pointerLockElement===m||document.mozPointerLockElement===m||document.webkitPointerLockElement===m,v.onPointerLockChange(g)},document.addEventListener("pointerlockchange",this.pointerLockChange,!0),document.addEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.addEventListener("webkitpointerlockchange",this.pointerLockChange,!0)),this.enabled=!0}},stopListeners:function(){var h=this.target;h.removeEventListener("mousemove",this.onMouseMove),h.removeEventListener("mousedown",this.onMouseDown),h.removeEventListener("mouseup",this.onMouseUp),h.removeEventListener("mouseover",this.onMouseOver),h.removeEventListener("mouseout",this.onMouseOut),window&&(h=this.isTop?window.top:window,h.removeEventListener("mousedown",this.onMouseDownWindow),h.removeEventListener("mouseup",this.onMouseUpWindow)),o.pointerLock&&(document.removeEventListener("pointerlockchange",this.pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this.pointerLockChange,!0))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(349),o=i(0),r=i(50),a=i(124),l=i(360),h=i(3),u=i(105),v=new o({initialize:function(c,p){this.manager=c,this.id=p,this.event,this.downElement,this.upElement,this.camera=null,this.button=0,this.buttons=0,this.position=new h,this.prevPosition=new h,this.midPoint=new h(-1,-1),this.velocity=new h,this.angle=0,this.distance=0,this.smoothFactor=0,this.motionFactor=.2,this.worldX=0,this.worldY=0,this.moveTime=0,this.downX=0,this.downY=0,this.downTime=0,this.upX=0,this.upY=0,this.upTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.active=p===0,this.locked=!1,this.deltaX=0,this.deltaY=0,this.deltaZ=0},updateWorldPoint:function(d){var c=d.getWorldPoint(this.x,this.y);return this.worldX=c.x,this.worldY=c.y,this},positionToCamera:function(d,c){return d.getWorldPoint(this.x,this.y,c)},updateMotion:function(){var d=this.position.x,c=this.position.y,p=this.midPoint.x,g=this.midPoint.y;if(!(d===p&&c===g)){var m=l(this.motionFactor,p,d),x=l(this.motionFactor,g,c);a(m,d,.1)&&(m=d),a(x,c,.1)&&(x=c),this.midPoint.set(m,x);var y=d-m,T=c-x;this.velocity.set(y,T),this.angle=n(m,x,d,c),this.distance=Math.sqrt(y*y+T*T)}},up:function(d){"buttons"in d&&(this.buttons=d.buttons),this.event=d,this.button=d.button,this.upElement=d.target,this.manager.transformPointer(this,d.pageX,d.pageY,!1),d.button===0&&(this.primaryDown=!1,this.upX=this.x,this.upY=this.y),this.buttons===0&&(this.isDown=!1,this.upTime=d.timeStamp,this.wasTouch=!1)},down:function(d){"buttons"in d&&(this.buttons=d.buttons),this.event=d,this.button=d.button,this.downElement=d.target,this.manager.transformPointer(this,d.pageX,d.pageY,!1),d.button===0&&(this.primaryDown=!0,this.downX=this.x,this.downY=this.y),u.macOS&&d.ctrlKey&&(this.buttons=2,this.primaryDown=!1),this.isDown||(this.isDown=!0,this.downTime=d.timeStamp),this.wasTouch=!1},move:function(d){"buttons"in d&&(this.buttons=d.buttons),this.event=d,this.manager.transformPointer(this,d.pageX,d.pageY,!0),this.locked&&(this.movementX=d.movementX||d.mozMovementX||d.webkitMovementX||0,this.movementY=d.movementY||d.mozMovementY||d.webkitMovementY||0),this.moveTime=d.timeStamp,this.wasTouch=!1},wheel:function(d){"buttons"in d&&(this.buttons=d.buttons),this.event=d,this.manager.transformPointer(this,d.pageX,d.pageY,!1),this.deltaX=d.deltaX,this.deltaY=d.deltaY,this.deltaZ=d.deltaZ,this.wasTouch=!1},touchstart:function(d,c){d.pointerId&&(this.pointerId=d.pointerId),this.identifier=d.identifier,this.target=d.target,this.active=!0,this.buttons=1,this.event=c,this.downElement=d.target,this.manager.transformPointer(this,d.pageX,d.pageY,!1),this.primaryDown=!0,this.downX=this.x,this.downY=this.y,this.downTime=c.timeStamp,this.isDown=!0,this.wasTouch=!0,this.wasCanceled=!1,this.updateMotion()},touchmove:function(d,c){this.event=c,this.manager.transformPointer(this,d.pageX,d.pageY,!0),this.moveTime=c.timeStamp,this.wasTouch=!0,this.updateMotion()},touchend:function(d,c){this.buttons=0,this.event=c,this.upElement=d.target,this.manager.transformPointer(this,d.pageX,d.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=c.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!1,this.active=!1,this.updateMotion()},touchcancel:function(d,c){this.buttons=0,this.event=c,this.upElement=d.target,this.manager.transformPointer(this,d.pageX,d.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=c.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!0,this.active=!1},noButtonDown:function(){return this.buttons===0},leftButtonDown:function(){return!!(this.buttons&1)},rightButtonDown:function(){return!!(this.buttons&2)},middleButtonDown:function(){return!!(this.buttons&4)},backButtonDown:function(){return!!(this.buttons&8)},forwardButtonDown:function(){return!!(this.buttons&16)},leftButtonReleased:function(){return this.button===0&&!this.isDown},rightButtonReleased:function(){return this.button===2&&!this.isDown},middleButtonReleased:function(){return this.button===1&&!this.isDown},backButtonReleased:function(){return this.button===3&&!this.isDown},forwardButtonReleased:function(){return this.button===4&&!this.isDown},getDistance:function(){return this.isDown?r(this.downX,this.downY,this.x,this.y):r(this.downX,this.downY,this.upX,this.upY)},getDistanceX:function(){return this.isDown?Math.abs(this.downX-this.x):Math.abs(this.downX-this.upX)},getDistanceY:function(){return this.isDown?Math.abs(this.downY-this.y):Math.abs(this.downY-this.upY)},getDuration:function(){return this.isDown?this.manager.time-this.downTime:this.upTime-this.downTime},getAngle:function(){return this.isDown?n(this.downX,this.downY,this.x,this.y):n(this.downX,this.downY,this.upX,this.upY)},getInterpolatedPosition:function(d,c){d===void 0&&(d=10),c===void 0&&(c=[]);for(var p=this.prevPosition.x,g=this.prevPosition.y,m=this.position.x,x=this.position.y,y=0;y<d;y++){var T=1/d*y;c[y]={x:l(T,p,m),y:l(T,g,x)}}return c},destroy:function(){this.camera=null,this.manager=null,this.position=null},x:{get:function(){return this.position.x},set:function(d){this.position.x=d}},y:{get:function(){return this.position.y},set:function(d){this.position.y=d}},time:{get:function(){return this.event?this.event.timeStamp:0}}});e.exports=v},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(51),r=i(1),a=new n({initialize:function(h){this.manager=h,this.capture=!0,this.enabled=!1,this.target,this.onTouchStart=r,this.onTouchStartWindow=r,this.onTouchMove=r,this.onTouchEnd=r,this.onTouchEndWindow=r,this.onTouchCancel=r,this.onTouchCancelWindow=r,this.onTouchOver=r,this.onTouchOut=r,h.events.once(o.MANAGER_BOOT,this.boot,this)},boot:function(){var l=this.manager.config;this.enabled=l.inputTouch,this.target=l.inputTouchEventTarget,this.capture=l.inputTouchCapture,this.target||(this.target=this.manager.game.canvas),l.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return document.body.addEventListener("contextmenu",function(l){return l.preventDefault(),!1}),this},startListeners:function(){var l=this,h=this.manager.canvas,u=window&&window.focus&&this.manager.game.config.autoFocus;this.onTouchStart=function(p){u&&window.focus(),!p.defaultPrevented&&l.enabled&&l.manager&&l.manager.enabled&&(l.manager.onTouchStart(p),l.capture&&p.cancelable&&p.target===h&&p.preventDefault())},this.onTouchStartWindow=function(p){!p.defaultPrevented&&l.enabled&&l.manager&&l.manager.enabled&&p.target!==h&&l.manager.onTouchStart(p)},this.onTouchMove=function(p){!p.defaultPrevented&&l.enabled&&l.manager&&l.manager.enabled&&(l.manager.onTouchMove(p),l.capture&&p.cancelable&&p.preventDefault())},this.onTouchEnd=function(p){!p.defaultPrevented&&l.enabled&&l.manager&&l.manager.enabled&&(l.manager.onTouchEnd(p),l.capture&&p.cancelable&&p.target===h&&p.preventDefault())},this.onTouchEndWindow=function(p){!p.defaultPrevented&&l.enabled&&l.manager&&l.manager.enabled&&p.target!==h&&l.manager.onTouchEnd(p)},this.onTouchCancel=function(p){!p.defaultPrevented&&l.enabled&&l.manager&&l.manager.enabled&&(l.manager.onTouchCancel(p),l.capture&&p.preventDefault())},this.onTouchCancelWindow=function(p){!p.defaultPrevented&&l.enabled&&l.manager&&l.manager.enabled&&l.manager.onTouchCancel(p)},this.onTouchOver=function(p){!p.defaultPrevented&&l.enabled&&l.manager&&l.manager.enabled&&l.manager.setCanvasOver(p)},this.onTouchOut=function(p){!p.defaultPrevented&&l.enabled&&l.manager&&l.manager.enabled&&l.manager.setCanvasOut(p)};var v=this.target;if(!!v){var d={passive:!0},c={passive:!1};v.addEventListener("touchstart",this.onTouchStart,this.capture?c:d),v.addEventListener("touchmove",this.onTouchMove,this.capture?c:d),v.addEventListener("touchend",this.onTouchEnd,this.capture?c:d),v.addEventListener("touchcancel",this.onTouchCancel,this.capture?c:d),v.addEventListener("touchover",this.onTouchOver,this.capture?c:d),v.addEventListener("touchout",this.onTouchOut,this.capture?c:d),window&&this.manager.game.config.inputWindowEvents&&(window.addEventListener("touchstart",this.onTouchStartWindow,c),window.addEventListener("touchend",this.onTouchEndWindow,c),window.addEventListener("touchcancel",this.onTouchCancelWindow,c)),this.enabled=!0}},stopListeners:function(){var l=this.target;l.removeEventListener("touchstart",this.onTouchStart),l.removeEventListener("touchmove",this.onTouchMove),l.removeEventListener("touchend",this.onTouchEnd),l.removeEventListener("touchcancel",this.onTouchCancel),l.removeEventListener("touchover",this.onTouchOver),l.removeEventListener("touchout",this.onTouchOut),window&&(window.removeEventListener("touchstart",this.onTouchStartWindow),window.removeEventListener("touchend",this.onTouchEndWindow))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(22),r=i(9),a=i(8),l=i(16),h=i(5),u=i(2),v=i(24),d=i(93),c=new n({Extends:r,initialize:function(g){r.call(this),this.game=g,this.plugins=[],this.scenePlugins=[],this._pendingGlobal=[],this._pendingScene=[],g.isBooted?this.boot():g.events.once(o.BOOT,this.boot,this)},boot:function(){var p,g,m,x,y,T,C,S=this.game.config,E=S.installGlobalPlugins;for(E=E.concat(this._pendingGlobal),p=0;p<E.length;p++)g=E[p],m=u(g,"key",null),x=u(g,"plugin",null),y=u(g,"start",!1),T=u(g,"mapping",null),C=u(g,"data",null),m&&(x?this.install(m,x,y,T,C):console.warn("Missing `plugin` for key: "+m));for(E=S.installScenePlugins,E=E.concat(this._pendingScene),p=0;p<E.length;p++)g=E[p],m=u(g,"key",null),x=u(g,"plugin",null),T=u(g,"mapping",null),m&&(x?this.installScenePlugin(m,x,T):console.warn("Missing `plugin` for key: "+m));this._pendingGlobal=[],this._pendingScene=[],this.game.events.once(o.DESTROY,this.destroy,this)},addToScene:function(p,g,m){var x,y,T,C=this.game,S=p.scene,E=p.settings.map,M=p.settings.isBooted;for(x=0;x<g.length;x++)y=g[x],C[y]?(p[y]=C[y],E.hasOwnProperty(y)&&(S[E[y]]=p[y])):y==="game"&&E.hasOwnProperty(y)&&(S[E[y]]=C);for(var O=0;O<m.length;O++)for(T=m[O],x=0;x<T.length;x++)if(y=T[x],!!v.hasCore(y)){var L=v.getCore(y),R=L.mapping,w=new L.plugin(S,this,R);p[R]=w,L.custom?S[R]=w:E.hasOwnProperty(R)&&(S[E[R]]=w),M&&w.boot()}for(T=this.plugins,x=0;x<T.length;x++){var D=T[x];D.mapping&&(S[D.mapping]=D.plugin)}},getDefaultScenePlugins:function(){var p=this.game.config.defaultPlugins;return p=p.concat(this.scenePlugins),p},installScenePlugin:function(p,g,m,x,y){if(y===void 0&&(y=!1),typeof g!="function"){console.warn("Invalid Scene Plugin: "+p);return}if(!v.hasCore(p))v.register(p,g,m,!0),this.scenePlugins.push(p);else if(!y&&v.hasCore(p)){console.warn("Scene Plugin key in use: "+p);return}if(x){var T=new g(x,this,p);x.sys[p]=T,m&&m!==""&&(x[m]=T),T.boot()}},install:function(p,g,m,x,y){if(m===void 0&&(m=!1),x===void 0&&(x=null),y===void 0&&(y=null),typeof g!="function")return console.warn("Invalid Plugin: "+p),null;if(v.hasCustom(p))return console.warn("Plugin key in use: "+p),null;if(x!==null&&(m=!0),!this.game.isBooted)this._pendingGlobal.push({key:p,plugin:g,start:m,mapping:x,data:y});else if(v.registerCustom(p,g,x,y),m)return this.start(p);return null},getIndex:function(p){for(var g=this.plugins,m=0;m<g.length;m++){var x=g[m];if(x.key===p)return m}return-1},getEntry:function(p){var g=this.getIndex(p);if(g!==-1)return this.plugins[g]},isActive:function(p){var g=this.getEntry(p);return g&&g.active},start:function(p,g){g===void 0&&(g=p);var m=this.getEntry(g);return m&&!m.active?(m.active=!0,m.plugin.start()):m||(m=this.createEntry(p,g)),m?m.plugin:null},createEntry:function(p,g){var m=v.getCustom(p);if(m){var x=new m.plugin(this);m={key:g,plugin:x,active:!0,mapping:m.mapping,data:m.data},this.plugins.push(m),x.init(m.data),x.start()}return m},stop:function(p){var g=this.getEntry(p);return g&&g.active&&(g.active=!1,g.plugin.stop()),this},get:function(p,g){g===void 0&&(g=!0);var m=this.getEntry(p);if(m)return m.plugin;var x=this.getClass(p);return x&&g?(m=this.createEntry(p,p),m?m.plugin:null):x||null},getClass:function(p){return v.getCustomClass(p)},removeGlobalPlugin:function(p){var g=this.getEntry(p);g&&d(this.plugins,g),v.removeCustom(p)},removeScenePlugin:function(p){d(this.scenePlugins,p),v.remove(p)},registerGameObject:function(p,g,m){return g&&h.register(p,g),m&&l.register(p,m),this},removeGameObject:function(p,g,m){return g===void 0&&(g=!0),m===void 0&&(m=!0),g&&h.remove(p),m&&l.remove(p),this},registerFileType:function(p,g,m){a.register(p,g),m&&m.sys.load&&(m.sys.load[p]=g)},destroy:function(){for(var p=0;p<this.plugins.length;p++)this.plugins[p].plugin.destroy();v.destroyCustomPlugins(),this.game.noReturn&&v.destroyCorePlugins(),this.game=null,this.plugins=[],this.scenePlugins=[]}});e.exports=c},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(201),o=i(0),r=i(9),a=i(104),l=i(22),h=i(401),u=i(407),v=i(402),d=i(1),c=i(10),p=i(416),g=i(76),m=i(3),x=new o({Extends:r,initialize:function(T){r.call(this),this.game=T,this.canvas,this.canvasBounds=new c,this.parent=null,this.parentIsWindow=!1,this.parentSize=new p,this.gameSize=new p,this.baseSize=new p,this.displaySize=new p,this.scaleMode=n.SCALE_MODE.NONE,this.zoom=1,this._resetZoom=!1,this.displayScale=new m(1,1),this.autoRound=!1,this.autoCenter=n.CENTER.NO_CENTER,this.orientation=n.ORIENTATION.LANDSCAPE,this.fullscreen,this.fullscreenTarget=null,this._createdFullscreenTarget=!1,this.dirty=!1,this.resizeInterval=500,this._lastCheck=0,this._checkOrientation=!1,this.listeners={orientationChange:d,windowResize:d,fullScreenChange:d,fullScreenError:d}},preBoot:function(){this.parseConfig(this.game.config),this.game.events.once(l.BOOT,this.boot,this)},boot:function(){var y=this.game;this.canvas=y.canvas,this.fullscreen=y.device.fullscreen,this.scaleMode!==n.SCALE_MODE.RESIZE&&this.displaySize.setAspectMode(this.scaleMode),this.scaleMode===n.SCALE_MODE.NONE?this.resize(this.width,this.height):(this.getParentBounds(),this.parentSize.width>0&&this.parentSize.height>0&&this.displaySize.setParent(this.parentSize),this.refresh()),y.events.on(l.PRE_STEP,this.step,this),y.events.once(l.READY,this.refresh,this),y.events.once(l.DESTROY,this.destroy,this),this.startListeners()},parseConfig:function(y){this.getParent(y),this.getParentBounds();var T=y.width,C=y.height,S=y.scaleMode,E=y.zoom,M=y.autoRound;if(typeof T=="string"){var O=this.parentSize.width;O===0&&(O=window.innerWidth);var L=parseInt(T,10)/100;T=Math.floor(O*L)}if(typeof C=="string"){var R=this.parentSize.height;R===0&&(R=window.innerHeight);var w=parseInt(C,10)/100;C=Math.floor(R*w)}this.scaleMode=S,this.autoRound=M,this.autoCenter=y.autoCenter,this.resizeInterval=y.resizeInterval,M&&(T=Math.floor(T),C=Math.floor(C)),this.gameSize.setSize(T,C),E===n.ZOOM.MAX_ZOOM&&(E=this.getMaxZoom()),this.zoom=E,E!==1&&(this._resetZoom=!0),this.baseSize.setSize(T,C),M&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),y.minWidth>0&&this.displaySize.setMin(y.minWidth*E,y.minHeight*E),y.maxWidth>0&&this.displaySize.setMax(y.maxWidth*E,y.maxHeight*E),this.displaySize.setSize(T,C),this.orientation=v(T,C)},getParent:function(y){var T=y.parent;if(T!==null){if(this.parent=u(T),this.parentIsWindow=this.parent===document.body,y.expandParent&&y.scaleMode!==n.SCALE_MODE.NONE){var C=this.parent.getBoundingClientRect();(this.parentIsWindow||C.height===0)&&(document.documentElement.style.height="100%",document.body.style.height="100%",C=this.parent.getBoundingClientRect(),!this.parentIsWindow&&C.height===0&&(this.parent.style.overflow="hidden",this.parent.style.width="100%",this.parent.style.height="100%"))}y.fullscreenTarget&&!this.fullscreenTarget&&(this.fullscreenTarget=u(y.fullscreenTarget))}},getParentBounds:function(){if(!this.parent)return!1;var y=this.parentSize,T=this.parent.getBoundingClientRect();this.parentIsWindow&&this.game.device.os.iOS&&(T.height=h(!0));var C=T.width,S=T.height;return y.width!==C||y.height!==S?(y.setSize(C,S),!0):!1},lockOrientation:function(y){var T=screen.lockOrientation||screen.mozLockOrientation||screen.msLockOrientation;return T?T.call(screen,y):!1},setParentSize:function(y,T){return this.parentSize.setSize(y,T),this.refresh()},setGameSize:function(y,T){var C=this.autoRound;C&&(y=Math.floor(y),T=Math.floor(T));var S=this.width,E=this.height;return this.gameSize.resize(y,T),this.baseSize.resize(y,T),C&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setAspectRatio(y/T),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height,this.refresh(S,E)},resize:function(y,T){var C=this.zoom,S=this.autoRound;S&&(y=Math.floor(y),T=Math.floor(T));var E=this.width,M=this.height;this.gameSize.resize(y,T),this.baseSize.resize(y,T),S&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setSize(y*C,T*C),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height;var O=this.canvas.style,L=y*C,R=T*C;return S&&(L=Math.floor(L),R=Math.floor(R)),(L!==y||R!==T)&&(O.width=L+"px",O.height=R+"px"),this.refresh(E,M)},setZoom:function(y){return this.zoom=y,this._resetZoom=!0,this.refresh()},setMaxZoom:function(){return this.zoom=this.getMaxZoom(),this._resetZoom=!0,this.refresh()},refresh:function(y,T){y===void 0&&(y=this.width),T===void 0&&(T=this.height),this.updateScale(),this.updateBounds(),this.updateOrientation(),this.displayScale.set(this.baseSize.width/this.canvasBounds.width,this.baseSize.height/this.canvasBounds.height);var C=this.game.domContainer;if(C){this.baseSize.setCSS(C);var S=this.canvas.style,E=C.style;E.transform="scale("+this.displaySize.width/this.baseSize.width+","+this.displaySize.height/this.baseSize.height+")",E.marginLeft=S.marginLeft,E.marginTop=S.marginTop}return this.emit(a.RESIZE,this.gameSize,this.baseSize,this.displaySize,y,T),this},updateOrientation:function(){if(this._checkOrientation){this._checkOrientation=!1;var y=v(this.width,this.height);y!==this.orientation&&(this.orientation=y,this.emit(a.ORIENTATION_CHANGE,y))}},updateScale:function(){var y=this.canvas.style,T=this.gameSize.width,C=this.gameSize.height,S,E,M=this.zoom,O=this.autoRound;this.scaleMode===n.SCALE_MODE.NONE?(this.displaySize.setSize(T*M,C*M),S=this.displaySize.width,E=this.displaySize.height,O&&(S=Math.floor(S),E=Math.floor(E)),this._resetZoom&&(y.width=S+"px",y.height=E+"px",this._resetZoom=!1)):this.scaleMode===n.SCALE_MODE.RESIZE?(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),this.gameSize.setSize(this.displaySize.width,this.displaySize.height),this.baseSize.setSize(this.displaySize.width,this.displaySize.height),S=this.displaySize.width,E=this.displaySize.height,O&&(S=Math.floor(S),E=Math.floor(E)),this.canvas.width=S,this.canvas.height=E):(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),S=this.displaySize.width,E=this.displaySize.height,O&&(S=Math.floor(S),E=Math.floor(E)),y.width=S+"px",y.height=E+"px"),this.getParentBounds(),this.updateCenter()},getMaxZoom:function(){var y=g(this.parentSize.width,this.gameSize.width,0,!0),T=g(this.parentSize.height,this.gameSize.height,0,!0);return Math.max(Math.min(y,T),1)},updateCenter:function(){var y=this.autoCenter;if(y!==n.CENTER.NO_CENTER){var T=this.canvas,C=T.style,S=T.getBoundingClientRect(),E=S.width,M=S.height,O=Math.floor((this.parentSize.width-E)/2),L=Math.floor((this.parentSize.height-M)/2);y===n.CENTER.CENTER_HORIZONTALLY?L=0:y===n.CENTER.CENTER_VERTICALLY&&(O=0),C.marginLeft=O+"px",C.marginTop=L+"px"}},updateBounds:function(){var y=this.canvasBounds,T=this.canvas.getBoundingClientRect();y.x=T.left+(window.pageXOffset||0)-(document.documentElement.clientLeft||0),y.y=T.top+(window.pageYOffset||0)-(document.documentElement.clientTop||0),y.width=T.width,y.height=T.height},transformX:function(y){return(y-this.canvasBounds.left)*this.displayScale.x},transformY:function(y){return(y-this.canvasBounds.top)*this.displayScale.y},startFullscreen:function(y){y===void 0&&(y={navigationUI:"hide"});var T=this.fullscreen;if(!T.available){this.emit(a.FULLSCREEN_UNSUPPORTED);return}if(!T.active){var C=this.getFullscreenTarget();T.keyboard?C[T.request](Element.ALLOW_KEYBOARD_INPUT):C[T.request](y)}},fullscreenSuccessHandler:function(){this.getParentBounds(),this.refresh(),this.emit(a.ENTER_FULLSCREEN)},fullscreenErrorHandler:function(y){this.removeFullscreenTarget(),this.emit(a.FULLSCREEN_FAILED,y)},getFullscreenTarget:function(){if(!this.fullscreenTarget){var y=document.createElement("div");y.style.margin="0",y.style.padding="0",y.style.width="100%",y.style.height="100%",this.fullscreenTarget=y,this._createdFullscreenTarget=!0}if(this._createdFullscreenTarget){var T=this.canvas.parentNode;T.insertBefore(this.fullscreenTarget,this.canvas),this.fullscreenTarget.appendChild(this.canvas)}return this.fullscreenTarget},removeFullscreenTarget:function(){if(this._createdFullscreenTarget){var y=this.fullscreenTarget;if(y&&y.parentNode){var T=y.parentNode;T.insertBefore(this.canvas,y),T.removeChild(y)}}},stopFullscreen:function(){var y=this.fullscreen;if(!y.available)return this.emit(a.FULLSCREEN_UNSUPPORTED),!1;y.active&&document[y.cancel](),this.removeFullscreenTarget(),this.getParentBounds(),this.emit(a.LEAVE_FULLSCREEN),this.refresh()},toggleFullscreen:function(y){this.fullscreen.active?this.stopFullscreen():this.startFullscreen(y)},startListeners:function(){var y=this,T=this.listeners;if(T.orientationChange=function(){y.updateBounds(),y._checkOrientation=!0,y.dirty=!0},T.windowResize=function(){y.updateBounds(),y.dirty=!0},window.addEventListener("orientationchange",T.orientationChange,!1),window.addEventListener("resize",T.windowResize,!1),this.fullscreen.available){T.fullScreenChange=function(S){return y.onFullScreenChange(S)},T.fullScreenError=function(S){return y.onFullScreenError(S)};var C=["webkit","moz",""];C.forEach(function(S){document.addEventListener(S+"fullscreenchange",T.fullScreenChange,!1),document.addEventListener(S+"fullscreenerror",T.fullScreenError,!1)}),document.addEventListener("MSFullscreenChange",T.fullScreenChange,!1),document.addEventListener("MSFullscreenError",T.fullScreenError,!1)}},onFullScreenChange:function(){document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement?this.fullscreenSuccessHandler():this.stopFullscreen()},onFullScreenError:function(){this.removeFullscreenTarget()},step:function(y,T){!this.parent||(this._lastCheck+=T,(this.dirty||this._lastCheck>this.resizeInterval)&&(this.getParentBounds()&&this.refresh(),this.dirty=!1,this._lastCheck=0))},stopListeners:function(){var y=this.listeners;window.removeEventListener("orientationchange",y.orientationChange,!1),window.removeEventListener("resize",y.windowResize,!1);var T=["webkit","moz",""];T.forEach(function(C){document.removeEventListener(C+"fullscreenchange",y.fullScreenChange,!1),document.removeEventListener(C+"fullscreenerror",y.fullScreenError,!1)}),document.removeEventListener("MSFullscreenChange",y.fullScreenChange,!1),document.removeEventListener("MSFullscreenError",y.fullScreenError,!1)},destroy:function(){this.removeAllListeners(),this.stopListeners(),this.game=null,this.canvas=null,this.canvasBounds=null,this.parent=null,this.fullscreenTarget=null,this.parentSize.destroy(),this.gameSize.destroy(),this.baseSize.destroy(),this.displaySize.destroy()},isFullscreen:{get:function(){return this.fullscreen.active}},width:{get:function(){return this.gameSize.width}},height:{get:function(){return this.gameSize.height}},isPortrait:{get:function(){return this.orientation===n.ORIENTATION.PORTRAIT}},isLandscape:{get:function(){return this.orientation===n.ORIENTATION.LANDSCAPE}},isGamePortrait:{get:function(){return this.height>this.width}},isGameLandscape:{get:function(){return this.width>this.height}}});e.exports=x},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(18),o=i(0),r=i(76),a=i(3),l=new o({initialize:function(u,v,d,c){u===void 0&&(u=0),v===void 0&&(v=u),d===void 0&&(d=0),c===void 0&&(c=null),this._width=u,this._height=v,this._parent=c,this.aspectMode=d,this.aspectRatio=v===0?1:u/v,this.minWidth=0,this.minHeight=0,this.maxWidth=Number.MAX_VALUE,this.maxHeight=Number.MAX_VALUE,this.snapTo=new a},setAspectMode:function(h){return h===void 0&&(h=0),this.aspectMode=h,this.setSize(this._width,this._height)},setSnap:function(h,u){return h===void 0&&(h=0),u===void 0&&(u=h),this.snapTo.set(h,u),this.setSize(this._width,this._height)},setParent:function(h){return this._parent=h,this.setSize(this._width,this._height)},setMin:function(h,u){return h===void 0&&(h=0),u===void 0&&(u=h),this.minWidth=n(h,0,this.maxWidth),this.minHeight=n(u,0,this.maxHeight),this.setSize(this._width,this._height)},setMax:function(h,u){return h===void 0&&(h=Number.MAX_VALUE),u===void 0&&(u=h),this.maxWidth=n(h,this.minWidth,Number.MAX_VALUE),this.maxHeight=n(u,this.minHeight,Number.MAX_VALUE),this.setSize(this._width,this._height)},setSize:function(h,u){switch(h===void 0&&(h=0),u===void 0&&(u=h),this.aspectMode){case l.NONE:this._width=this.getNewWidth(r(h,this.snapTo.x)),this._height=this.getNewHeight(r(u,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height;break;case l.WIDTH_CONTROLS_HEIGHT:this._width=this.getNewWidth(r(h,this.snapTo.x)),this._height=this.getNewHeight(this._width*(1/this.aspectRatio),!1);break;case l.HEIGHT_CONTROLS_WIDTH:this._height=this.getNewHeight(r(u,this.snapTo.y)),this._width=this.getNewWidth(this._height*this.aspectRatio,!1);break;case l.FIT:this.constrain(h,u,!0);break;case l.ENVELOP:this.constrain(h,u,!1);break}return this},setAspectRatio:function(h){return this.aspectRatio=h,this.setSize(this._width,this._height)},resize:function(h,u){return this._width=this.getNewWidth(r(h,this.snapTo.x)),this._height=this.getNewHeight(r(u,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height,this},getNewWidth:function(h,u){return u===void 0&&(u=!0),h=n(h,this.minWidth,this.maxWidth),u&&this._parent&&h>this._parent.width&&(h=Math.max(this.minWidth,this._parent.width)),h},getNewHeight:function(h,u){return u===void 0&&(u=!0),h=n(h,this.minHeight,this.maxHeight),u&&this._parent&&h>this._parent.height&&(h=Math.max(this.minHeight,this._parent.height)),h},constrain:function(h,u,v){h===void 0&&(h=0),u===void 0&&(u=h),v===void 0&&(v=!0),h=this.getNewWidth(h),u=this.getNewHeight(u);var d=this.snapTo,c=u===0?1:h/u;return v&&this.aspectRatio>c||!v&&this.aspectRatio<c?(h=r(h,d.x),u=h/this.aspectRatio,d.y>0&&(u=r(u,d.y),h=u*this.aspectRatio)):(v&&this.aspectRatio<c||!v&&this.aspectRatio>c)&&(u=r(u,d.y),h=u*this.aspectRatio,d.x>0&&(h=r(h,d.x),u=h*(1/this.aspectRatio))),this._width=h,this._height=u,this},fitTo:function(h,u){return this.constrain(h,u,!0)},envelop:function(h,u){return this.constrain(h,u,!1)},setWidth:function(h){return this.setSize(h,this._height)},setHeight:function(h){return this.setSize(this._width,h)},toString:function(){return"[{ Size (width="+this._width+" height="+this._height+" aspectRatio="+this.aspectRatio+" aspectMode="+this.aspectMode+") }]"},setCSS:function(h){h&&h.style&&(h.style.width=this._width+"px",h.style.height=this._height+"px")},copy:function(h){return h.setAspectMode(this.aspectMode),h.aspectRatio=this.aspectRatio,h.setSize(this.width,this.height)},destroy:function(){this._parent=null,this.snapTo=null},width:{get:function(){return this._width},set:function(h){this.setSize(h,this._height)}},height:{get:function(){return this._height},set:function(h){this.setSize(this._width,h)}}});l.NONE=0,l.WIDTH_CONTROLS_HEIGHT=1,l.HEIGHT_CONTROLS_WIDTH=2,l.FIT=3,l.ENVELOP=4,e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(144),r=i(20),a=i(22),l=i(6),h=i(95),u=i(1),v=i(418),d=i(204),c=new n({initialize:function(g,m){if(this.game=g,this.keys={},this.scenes=[],this._pending=[],this._start=[],this._queue=[],this._data={},this.isProcessing=!1,this.isBooted=!1,this.customViewports=0,m){Array.isArray(m)||(m=[m]);for(var x=0;x<m.length;x++)this._pending.push({key:"default",scene:m[x],autoStart:x===0,data:{}})}g.events.once(a.READY,this.bootQueue,this)},bootQueue:function(){if(!this.isBooted){var p,g,m,x;for(p=0;p<this._pending.length;p++){g=this._pending[p],m=g.key,x=g.scene;var y;x instanceof v?y=this.createSceneFromInstance(m,x):typeof x=="object"?y=this.createSceneFromObject(m,x):typeof x=="function"&&(y=this.createSceneFromFunction(m,x)),m=y.sys.settings.key,this.keys[m]=y,this.scenes.push(y),this._data[m]&&(y.sys.settings.data=this._data[m].data,this._data[m].autoStart&&(g.autoStart=!0)),(g.autoStart||y.sys.settings.active)&&this._start.push(m)}for(this._pending.length=0,this._data={},this.isBooted=!0,p=0;p<this._start.length;p++)g=this._start[p],this.start(g);this._start.length=0}},processQueue:function(){var p=this._pending.length,g=this._queue.length;if(!(p===0&&g===0)){var m,x;if(p){for(m=0;m<p;m++)x=this._pending[m],this.add(x.key,x.scene,x.autoStart,x.data);for(m=0;m<this._start.length;m++)x=this._start[m],this.start(x);this._start.length=0,this._pending.length=0;return}for(m=0;m<this._queue.length;m++)x=this._queue[m],this[x.op](x.keyA,x.keyB);this._queue.length=0}},add:function(p,g,m,x){if(m===void 0&&(m=!1),x===void 0&&(x={}),this.isProcessing||!this.isBooted)return this._pending.push({key:p,scene:g,autoStart:m,data:x}),this.isBooted||(this._data[p]={data:x}),null;p=this.getKey(p,g);var y;return g instanceof v?y=this.createSceneFromInstance(p,g):typeof g=="object"?(g.key=p,y=this.createSceneFromObject(p,g)):typeof g=="function"&&(y=this.createSceneFromFunction(p,g)),y.sys.settings.data=x,p=y.sys.settings.key,this.keys[p]=y,this.scenes.push(y),(m||y.sys.settings.active)&&(this._pending.length?this._start.push(p):this.start(p)),y},remove:function(p){if(this.isProcessing)this._queue.push({op:"remove",keyA:p,keyB:null});else{var g=this.getScene(p);if(!g||g.sys.isTransitioning())return this;var m=this.scenes.indexOf(g),x=g.sys.settings.key;m>-1&&(delete this.keys[x],this.scenes.splice(m,1),this._start.indexOf(x)>-1&&(m=this._start.indexOf(x),this._start.splice(m,1)),g.sys.destroy())}return this},bootScene:function(p){var g=p.sys,m=g.settings;g.sceneUpdate=u,p.init&&(p.init.call(p,m.data),m.status=o.INIT,m.isTransition&&g.events.emit(r.TRANSITION_INIT,m.transitionFrom,m.transitionDuration));var x;g.load&&(x=g.load,x.reset()),x&&p.preload?(p.preload.call(p),x.list.size===0?this.create(p):(m.status=o.LOADING,x.once(h.COMPLETE,this.loadComplete,this),x.start())):this.create(p)},loadComplete:function(p){this.create(p.scene)},payloadComplete:function(p){this.bootScene(p.scene)},update:function(p,g){this.processQueue(),this.isProcessing=!0;for(var m=this.scenes.length-1;m>=0;m--){var x=this.scenes[m].sys;x.settings.status>o.START&&x.settings.status<=o.RUNNING&&x.step(p,g)}},render:function(p){for(var g=0;g<this.scenes.length;g++){var m=this.scenes[g].sys;m.settings.visible&&m.settings.status>=o.LOADING&&m.settings.status<o.SLEEPING&&m.render(p)}this.isProcessing=!1},create:function(p){var g=p.sys,m=g.settings;p.create&&(m.status=o.CREATING,p.create.call(p,m.data),m.status===o.DESTROYED)||(m.isTransition&&g.events.emit(r.TRANSITION_START,m.transitionFrom,m.transitionDuration),p.update&&(g.sceneUpdate=p.update),m.status=o.RUNNING,g.events.emit(r.CREATE,p))},createSceneFromFunction:function(p,g){var m=new g;if(m instanceof v){var x=m.sys.settings.key;if(x!==""&&(p=x),this.keys.hasOwnProperty(p))throw new Error("Cannot add a Scene with duplicate key: "+p);return this.createSceneFromInstance(p,m)}else return m.sys=new d(m),m.sys.settings.key=p,m.sys.init(this.game),m},createSceneFromInstance:function(p,g){var m=g.sys.settings.key;return m===""&&(g.sys.settings.key=p),g.sys.init(this.game),g},createSceneFromObject:function(p,g){var m=new v(g),x=m.sys.settings.key;x!==""?p=x:m.sys.settings.key=p,m.sys.init(this.game);for(var y=["init","preload","create","update","render"],T=0;T<y.length;T++){var C=l(g,y[T],null);C&&(m[y[T]]=C)}if(g.hasOwnProperty("extend")){for(var S in g.extend)if(!!g.extend.hasOwnProperty(S)){var E=g.extend[S];S==="data"&&m.hasOwnProperty("data")&&typeof E=="object"?m.data.merge(E):S!=="sys"&&(m[S]=E)}}return m},getKey:function(p,g){if(p||(p="default"),typeof g=="function")return p;if(g instanceof v?p=g.sys.settings.key:typeof g=="object"&&g.hasOwnProperty("key")&&(p=g.key),this.keys.hasOwnProperty(p))throw new Error("Cannot add a Scene with duplicate key: "+p);return p},getScenes:function(p,g){p===void 0&&(p=!0),g===void 0&&(g=!1);for(var m=[],x=this.scenes,y=0;y<x.length;y++){var T=x[y];T&&(!p||p&&T.sys.isActive())&&m.push(T)}return g?m.reverse():m},getScene:function(p){if(typeof p=="string"){if(this.keys[p])return this.keys[p]}else for(var g=0;g<this.scenes.length;g++)if(p===this.scenes[g])return p;return null},isActive:function(p){var g=this.getScene(p);return g?g.sys.isActive():null},isPaused:function(p){var g=this.getScene(p);return g?g.sys.isPaused():null},isVisible:function(p){var g=this.getScene(p);return g?g.sys.isVisible():null},isSleeping:function(p){var g=this.getScene(p);return g?g.sys.isSleeping():null},pause:function(p,g){var m=this.getScene(p);return m&&m.sys.pause(g),this},resume:function(p,g){var m=this.getScene(p);return m&&m.sys.resume(g),this},sleep:function(p,g){var m=this.getScene(p);return m&&!m.sys.isTransitioning()&&m.sys.sleep(g),this},wake:function(p,g){var m=this.getScene(p);return m&&m.sys.wake(g),this},run:function(p,g){var m=this.getScene(p);if(!m){for(var x=0;x<this._pending.length;x++)if(this._pending[x].key===p){this.queueOp("start",p,g);break}return this}m.sys.isSleeping()?m.sys.wake(g):m.sys.isPaused()?m.sys.resume(g):this.start(p,g)},start:function(p,g){if(!this.isBooted)return this._data[p]={autoStart:!0,data:g},this;var m=this.getScene(p);if(m){var x=m.sys;if(x.isActive()||x.isPaused())x.shutdown(),x.sceneUpdate=u,x.start(g);else{x.sceneUpdate=u,x.start(g);var y;if(x.load&&(y=x.load),y&&x.settings.hasOwnProperty("pack")&&(y.reset(),y.addPack({payload:x.settings.pack})))return x.settings.status=o.LOADING,y.once(h.COMPLETE,this.payloadComplete,this),y.start(),this}this.bootScene(m)}return this},stop:function(p,g){var m=this.getScene(p);return m&&!m.sys.isTransitioning()&&m.sys.shutdown(g),this},switch:function(p,g){var m=this.getScene(p),x=this.getScene(g);return m&&x&&m!==x&&(this.sleep(p),this.isSleeping(g)?this.wake(g):this.start(g)),this},getAt:function(p){return this.scenes[p]},getIndex:function(p){var g=this.getScene(p);return this.scenes.indexOf(g)},bringToTop:function(p){if(this.isProcessing)this._queue.push({op:"bringToTop",keyA:p,keyB:null});else{var g=this.getIndex(p);if(g!==-1&&g<this.scenes.length){var m=this.getScene(p);this.scenes.splice(g,1),this.scenes.push(m)}}return this},sendToBack:function(p){if(this.isProcessing)this._queue.push({op:"sendToBack",keyA:p,keyB:null});else{var g=this.getIndex(p);if(g!==-1&&g>0){var m=this.getScene(p);this.scenes.splice(g,1),this.scenes.unshift(m)}}return this},moveDown:function(p){if(this.isProcessing)this._queue.push({op:"moveDown",keyA:p,keyB:null});else{var g=this.getIndex(p);if(g>0){var m=g-1,x=this.getScene(p),y=this.getAt(m);this.scenes[g]=y,this.scenes[m]=x}}return this},moveUp:function(p){if(this.isProcessing)this._queue.push({op:"moveUp",keyA:p,keyB:null});else{var g=this.getIndex(p);if(g<this.scenes.length-1){var m=g+1,x=this.getScene(p),y=this.getAt(m);this.scenes[g]=y,this.scenes[m]=x}}return this},moveAbove:function(p,g){if(p===g)return this;if(this.isProcessing)this._queue.push({op:"moveAbove",keyA:p,keyB:g});else{var m=this.getIndex(p),x=this.getIndex(g);if(m!==-1&&x!==-1){var y=this.getAt(x);this.scenes.splice(x,1),this.scenes.splice(m+1,0,y)}}return this},moveBelow:function(p,g){if(p===g)return this;if(this.isProcessing)this._queue.push({op:"moveBelow",keyA:p,keyB:g});else{var m=this.getIndex(p),x=this.getIndex(g);if(m!==-1&&x!==-1){var y=this.getAt(x);this.scenes.splice(x,1),m===0?this.scenes.unshift(y):this.scenes.splice(m,0,y)}}return this},queueOp:function(p,g,m){return this._queue.push({op:p,keyA:g,keyB:m}),this},swapPosition:function(p,g){if(p===g)return this;if(this.isProcessing)this._queue.push({op:"swapPosition",keyA:p,keyB:g});else{var m=this.getIndex(p),x=this.getIndex(g);if(m!==x&&m!==-1&&x!==-1){var y=this.getAt(m);this.scenes[m]=this.scenes[x],this.scenes[x]=y}}return this},dump:function(){for(var p=[],g=["pending","init","start","loading","creating","running","paused","sleeping","shutdown","destroyed"],m=0;m<this.scenes.length;m++){var x=this.scenes[m].sys,y=x.settings.visible&&(x.settings.status===o.RUNNING||x.settings.status===o.PAUSED)?"[*] ":"[-] ";y+=x.settings.key+" ("+g[x.settings.status]+")",p.push(y)}console.log(p.join(`
`))},destroy:function(){for(var p=0;p<this.scenes.length;p++){var g=this.scenes[p].sys;g.destroy()}this.update=u,this.scenes=[],this._pending=[],this._start=[],this._queue=[],this.game=null}});e.exports=c},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(204),r=new n({initialize:function(l){this.sys=new o(this,l),this.game,this.anims,this.cache,this.registry,this.sound,this.textures,this.events,this.cameras,this.add,this.make,this.scene,this.children,this.lights,this.data,this.input,this.load,this.time,this.tweens,this.physics,this.matter,this.scale,this.plugins,this.renderer},update:function(){}});e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(2),o=i(205),r=function(a){var l=a.game.config.defaultPhysicsSystem,h=n(a.settings,"physics",!1);if(!(!l&&!h)){var u=[];if(l&&u.push(o(l+"Physics")),h)for(var v in h)v=o(v.concat("Physics")),u.indexOf(v)===-1&&u.push(v);return u}};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(2),o=function(r){var a=r.plugins.getDefaultScenePlugins(),l=n(r.settings,"plugins",!1);return Array.isArray(l)?l:a||[]};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(144),o=i(6),r=i(127),a=i(978),l={create:function(h){return typeof h=="string"?h={key:h}:h===void 0&&(h={}),{status:n.PENDING,key:o(h,"key",""),active:o(h,"active",!1),visible:o(h,"visible",!0),isBooted:!1,isTransition:!1,transitionFrom:null,transitionDuration:0,transitionAllowInput:!0,data:{},pack:o(h,"pack",!1),cameras:o(h,"cameras",null),map:o(h,"map",r(a,o(h,"mapAdd",{}))),physics:o(h,"physics",{}),loader:o(h,"loader",{}),plugins:o(h,"plugins",!1),input:o(h,"input",{})}}};e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(31),o=i(423),r=i(0),a=i(38),l=i(33),h=i(9),u=i(106),v=i(22),d=i(388),c=i(6),p=i(425),g=i(206),m=new r({Extends:h,initialize:function(y){h.call(this),this.game=y,this.name="TextureManager",this.list={},this._tempCanvas=n.create2D(this,1,1),this._tempContext=this._tempCanvas.getContext("2d"),this._pending=0,y.events.once(v.BOOT,this.boot,this)},boot:function(){this._pending=3,this.on(u.LOAD,this.updatePending,this),this.on(u.ERROR,this.updatePending,this);var x=this.game.config;this.addBase64("__DEFAULT",x.defaultImage),this.addBase64("__MISSING",x.missingImage),this.addBase64("__WHITE",x.whiteImage),this.game.events.once(v.DESTROY,this.destroy,this)},updatePending:function(){this._pending--,this._pending===0&&(this.off(u.LOAD),this.off(u.ERROR),this.emit(u.READY))},checkKey:function(x){return this.exists(x)?(console.error("Texture key already in use: "+x),!1):!0},remove:function(x){if(typeof x=="string")if(this.exists(x))x=this.get(x);else return console.warn("No texture found matching key: "+x),this;return this.list.hasOwnProperty(x.key)&&(x.destroy(),this.emit(u.REMOVE,x.key)),this},removeKey:function(x){return this.list.hasOwnProperty(x)&&delete this.list[x],this},addBase64:function(x,y){if(this.checkKey(x)){var T=this,C=new Image;C.onerror=function(){T.emit(u.ERROR,x)},C.onload=function(){var S=T.create(x,C);p.Image(S,0),T.emit(u.ADD,x,S),T.emit(u.LOAD,x,S)},C.src=y}return this},getBase64:function(x,y,T,C){T===void 0&&(T="image/png"),C===void 0&&(C=.92);var S="",E=this.getFrame(x,y);if(E&&(E.source.isRenderTexture||E.source.isGLTexture))console.warn("Cannot getBase64 from WebGL Texture");else if(E){var M=E.canvasData,O=n.create2D(this,M.width,M.height),L=O.getContext("2d");L.drawImage(E.source.image,M.x,M.y,M.width,M.height,0,0,M.width,M.height),S=O.toDataURL(T,C),n.remove(O)}return S},addImage:function(x,y,T){var C=null;return this.checkKey(x)&&(C=this.create(x,y),p.Image(C,0),T&&C.setDataSource(T),this.emit(u.ADD,x,C)),C},addGLTexture:function(x,y,T,C){var S=null;return this.checkKey(x)&&(T===void 0&&(T=y.width),C===void 0&&(C=y.height),S=this.create(x,y,T,C),S.add("__BASE",0,0,0,T,C),this.emit(u.ADD,x,S)),S},addRenderTexture:function(x,y){var T=null;return this.checkKey(x)&&(T=this.create(x,y),T.add("__BASE",0,0,0,y.width,y.height),this.emit(u.ADD,x,T)),T},generate:function(x,y){if(this.checkKey(x)){var T=n.create(this,1,1);return y.canvas=T,d(y),this.addCanvas(x,T)}else return null},createCanvas:function(x,y,T){if(y===void 0&&(y=256),T===void 0&&(T=256),this.checkKey(x)){var C=n.create(this,y,T,l.CANVAS,!0);return this.addCanvas(x,C)}return null},addCanvas:function(x,y,T){T===void 0&&(T=!1);var C=null;return T?C=new o(this,x,y,y.width,y.height):this.checkKey(x)&&(C=new o(this,x,y,y.width,y.height),this.list[x]=C,this.emit(u.ADD,x,C)),C},addAtlas:function(x,y,T,C){return Array.isArray(T.textures)||Array.isArray(T.frames)?this.addAtlasJSONArray(x,y,T,C):this.addAtlasJSONHash(x,y,T,C)},addAtlasJSONArray:function(x,y,T,C){var S=null;if(this.checkKey(x)){if(S=this.create(x,y),Array.isArray(T))for(var E=T.length===1,M=0;M<S.source.length;M++){var O=E?T[0]:T[M];p.JSONArray(S,M,O)}else p.JSONArray(S,0,T);C&&S.setDataSource(C),this.emit(u.ADD,x,S)}return S},addAtlasJSONHash:function(x,y,T,C){var S=null;if(this.checkKey(x)){if(S=this.create(x,y),Array.isArray(T))for(var E=0;E<T.length;E++)p.JSONHash(S,E,T[E]);else p.JSONHash(S,0,T);C&&S.setDataSource(C),this.emit(u.ADD,x,S)}return S},addAtlasXML:function(x,y,T,C){var S=null;return this.checkKey(x)&&(S=this.create(x,y),p.AtlasXML(S,0,T),C&&S.setDataSource(C),this.emit(u.ADD,x,S)),S},addUnityAtlas:function(x,y,T,C){var S=null;return this.checkKey(x)&&(S=this.create(x,y),p.UnityYAML(S,0,T),C&&S.setDataSource(C),this.emit(u.ADD,x,S)),S},addSpriteSheet:function(x,y,T){var C=null;if(this.checkKey(x)){C=this.create(x,y);var S=C.source[0].width,E=C.source[0].height;p.SpriteSheet(C,0,0,0,S,E,T),this.emit(u.ADD,x,C)}return C},addSpriteSheetFromAtlas:function(x,y){if(!this.checkKey(x))return null;var T=c(y,"atlas",null),C=c(y,"frame",null);if(!(!T||!C)){var S=this.get(T),E=S.get(C);if(E){var M=this.create(x,E.source.image);return E.trimmed?p.SpriteSheetFromAtlas(M,E,y):p.SpriteSheet(M,0,E.cutX,E.cutY,E.cutWidth,E.cutHeight,y),this.emit(u.ADD,x,M),M}}},create:function(x,y,T,C){var S=null;return this.checkKey(x)&&(S=new g(this,x,y,T,C),this.list[x]=S),S},exists:function(x){return this.list.hasOwnProperty(x)},get:function(x){return x===void 0&&(x="__DEFAULT"),this.list[x]?this.list[x]:x instanceof g?x:this.list.__MISSING},cloneFrame:function(x,y){if(this.list[x])return this.list[x].get(y).clone()},getFrame:function(x,y){if(this.list[x])return this.list[x].get(y)},getTextureKeys:function(){var x=[];for(var y in this.list)y!=="__DEFAULT"&&y!=="__MISSING"&&x.push(y);return x},getPixel:function(x,y,T,C){var S=this.getFrame(T,C);if(S){x-=S.x,y-=S.y;var E=S.data.cut;if(x+=E.x,y+=E.y,x>=E.x&&x<E.r&&y>=E.y&&y<E.b){var M=this._tempContext;M.clearRect(0,0,1,1),M.drawImage(S.source.image,x,y,1,1,0,0,1,1);var O=M.getImageData(0,0,1,1);return new a(O.data[0],O.data[1],O.data[2],O.data[3])}}return null},getPixelAlpha:function(x,y,T,C){var S=this.getFrame(T,C);if(S){x-=S.x,y-=S.y;var E=S.data.cut;if(x+=E.x,y+=E.y,x>=E.x&&x<E.r&&y>=E.y&&y<E.b){var M=this._tempContext;M.clearRect(0,0,1,1),M.drawImage(S.source.image,x,y,1,1,0,0,1,1);var O=M.getImageData(0,0,1,1);return O.data[3]}}return null},setTexture:function(x,y,T){return this.list[y]&&(x.texture=this.list[y],x.frame=x.texture.get(T)),x},renameTexture:function(x,y){var T=this.get(x);return T&&x!==y?(T.key=y,this.list[y]=T,delete this.list[x],!0):!1},each:function(x,y){for(var T=[null],C=1;C<arguments.length;C++)T.push(arguments[C]);for(var S in this.list)T[0]=this.list[S],x.apply(y,T)},destroy:function(){for(var x in this.list)this.list[x].destroy();this.list={},this.game=null,n.remove(this._tempCanvas)}});e.exports=m},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(18),r=i(38),a=i(33),l=i(138),h=i(206),u=new n({Extends:h,initialize:function(d,c,p,g,m){h.call(this,d,c,p,g,m),this.add("__BASE",0,0,0,g,m),this._source=this.frames.__BASE.source,this.canvas=this._source.image,this.context=this.canvas.getContext("2d"),this.width=g,this.height=m,this.imageData=this.context.getImageData(0,0,g,m),this.data=null,this.imageData&&(this.data=this.imageData.data),this.pixels=null,this.buffer,this.data&&(this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data)},update:function(){return this.imageData=this.context.getImageData(0,0,this.width,this.height),this.data=this.imageData.data,this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data,this.manager.game.config.renderType===a.WEBGL&&this.refresh(),this},draw:function(v,d,c){return this.context.drawImage(c,v,d),this.update()},drawFrame:function(v,d,c,p){c===void 0&&(c=0),p===void 0&&(p=0);var g=this.manager.getFrame(v,d);if(g){var m=g.canvasData,x=g.cutWidth,y=g.cutHeight,T=g.source.resolution;return this.context.drawImage(g.source.image,m.x,m.y,x,y,c,p,x/T,y/T),this.update()}else return this},setPixel:function(v,d,c,p,g,m){m===void 0&&(m=255),v=Math.abs(Math.floor(v)),d=Math.abs(Math.floor(d));var x=this.getIndex(v,d);if(x>-1){var y=this.context.getImageData(v,d,1,1);y.data[0]=c,y.data[1]=p,y.data[2]=g,y.data[3]=m,this.context.putImageData(y,v,d)}return this},putData:function(v,d,c,p,g,m,x){return p===void 0&&(p=0),g===void 0&&(g=0),m===void 0&&(m=v.width),x===void 0&&(x=v.height),this.context.putImageData(v,d,c,p,g,m,x),this},getData:function(v,d,c,p){v=o(Math.floor(v),0,this.width-1),d=o(Math.floor(d),0,this.height-1),c=o(c,1,this.width-v),p=o(p,1,this.height-d);var g=this.context.getImageData(v,d,c,p);return g},getPixel:function(v,d,c){c||(c=new r);var p=this.getIndex(v,d);if(p>-1){var g=this.data,m=g[p+0],x=g[p+1],y=g[p+2],T=g[p+3];c.setTo(m,x,y,T)}return c},getPixels:function(v,d,c,p){v===void 0&&(v=0),d===void 0&&(d=0),c===void 0&&(c=this.width),p===void 0&&(p=c),v=Math.abs(Math.round(v)),d=Math.abs(Math.round(d));for(var g=o(v,0,this.width),m=o(v+c,0,this.width),x=o(d,0,this.height),y=o(d+p,0,this.height),T=new r,C=[],S=x;S<y;S++){for(var E=[],M=g;M<m;M++)T=this.getPixel(M,S,T),E.push({x:M,y:S,color:T.color,alpha:T.alphaGL});C.push(E)}return C},getIndex:function(v,d){return v=Math.abs(Math.round(v)),d=Math.abs(Math.round(d)),v<this.width&&d<this.height?(v+d*this.width)*4:-1},refresh:function(){return this._source.update(),this},getCanvas:function(){return this.canvas},getContext:function(){return this.context},clear:function(v,d,c,p){return v===void 0&&(v=0),d===void 0&&(d=0),c===void 0&&(c=this.width),p===void 0&&(p=this.height),this.context.clearRect(v,d,c,p),this.update()},setSize:function(v,d){return d===void 0&&(d=v),(v!==this.width||d!==this.height)&&(this.canvas.width=v,this.canvas.height=d,this._source.width=v,this._source.height=d,this._source.isPowerOf2=l(v,d),this.frames.__BASE.setSize(v,d,0,0),this.width=v,this.height=d,this.refresh()),this},destroy:function(){h.prototype.destroy.call(this),this._source=null,this.canvas=null,this.context=null,this.imageData=null,this.data=null,this.pixels=null,this.buffer=null}});e.exports=u},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(31),o=i(0),r=i(138),a=i(168),l=new o({initialize:function(u,v,d,c,p){p===void 0&&(p=!1);var g=u.manager.game;this.renderer=g.renderer,this.texture=u,this.source=v,this.image=v,this.compressionAlgorithm=null,this.resolution=1,this.width=d||v.naturalWidth||v.videoWidth||v.width||0,this.height=c||v.naturalHeight||v.videoHeight||v.height||0,this.scaleMode=a.DEFAULT,this.isCanvas=v instanceof HTMLCanvasElement,this.isVideo=window.hasOwnProperty("HTMLVideoElement")&&v instanceof HTMLVideoElement,this.isRenderTexture=v.type==="RenderTexture",this.isGLTexture=window.hasOwnProperty("WebGLTexture")&&v instanceof WebGLTexture,this.isPowerOf2=r(this.width,this.height),this.glTexture=null,this.glIndex=0,this.glIndexCounter=-1,this.flipY=p,this.init(g)},init:function(h){var u=this.renderer;u&&(u.gl?this.isCanvas?this.glTexture=u.createCanvasTexture(this.image,!1,this.flipY):this.isVideo?this.glTexture=u.createVideoTexture(this.image,!1,this.flipY):this.isRenderTexture?(this.image=this.source.canvas,this.glTexture=u.createTextureFromSource(null,this.width,this.height,this.scaleMode)):this.isGLTexture?this.glTexture=this.source:this.glTexture=u.createTextureFromSource(this.image,this.width,this.height,this.scaleMode):this.isRenderTexture&&(this.image=this.source.canvas)),h.config.antialias||this.setFilter(1)},setFilter:function(h){this.renderer.gl&&this.renderer.setTextureFilter(this.glTexture,h),this.scaleMode=h},setFlipY:function(h){return h===void 0&&(h=!0),this.flipY=h,this},update:function(){var h=this.renderer.gl;h&&this.isCanvas?this.glTexture=this.renderer.updateCanvasTexture(this.image,this.glTexture,this.flipY):h&&this.isVideo&&(this.glTexture=this.renderer.updateVideoTexture(this.image,this.glTexture,this.flipY))},destroy:function(){this.glTexture&&this.renderer.deleteTexture(this.glTexture,!0),this.isCanvas&&n.remove(this.image),this.renderer=null,this.texture=null,this.source=null,this.image=null,this.glTexture=null}});e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={AtlasXML:i(979),Canvas:i(980),Image:i(981),JSONArray:i(982),JSONHash:i(983),SpriteSheet:i(984),SpriteSheetFromAtlas:i(985),UnityYAML:i(986)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(427),o=i(430),r=i(432),a={create:function(l){var h=l.config.audio,u=l.device.audio;return h.noAudio||!u.webAudio&&!u.audioData?new o(l):u.webAudio&&!h.disableWebAudio?new r(l):new n(l)}};e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(145),o=i(0),r=i(70),a=i(429),l=new o({Extends:n,initialize:function(u){this.override=!0,this.audioPlayDelay=.1,this.loopEndOffset=.05,this.onBlurPausedSounds=[],this.locked="ontouchstart"in window,this.lockedActionsQueue=this.locked?[]:null,this._mute=!1,this._volume=1,n.call(this,u)},add:function(h,u){var v=new a(this,h,u);return this.sounds.push(v),v},unlock:function(){this.locked=!1;var h=this;if(this.game.cache.audio.entries.each(function(c,p){for(var g=0;g<p.length;g++)if(p[g].dataset.locked==="true")return h.locked=!0,!1;return!0}),!!this.locked){var u=!1,v=function(){u=!0},d=function(){if(u){u=!1;return}document.body.removeEventListener("touchmove",v),document.body.removeEventListener("touchend",d);var c=[];if(h.game.cache.audio.entries.each(function(g,m){for(var x=0;x<m.length;x++){var y=m[x];y.dataset.locked==="true"&&c.push(y)}return!0}),c.length!==0){var p=c[c.length-1];p.oncanplaythrough=function(){p.oncanplaythrough=null,c.forEach(function(g){g.dataset.locked="false"}),h.unlocked=!0},c.forEach(function(g){g.load()})}};this.once(r.UNLOCKED,function(){for(this.forEachActiveSound(function(p){p.currentMarker===null&&p.duration===0&&(p.duration=p.tags[0].duration),p.totalDuration=p.tags[0].duration});this.lockedActionsQueue.length;){var c=this.lockedActionsQueue.shift();c.sound[c.prop].apply?c.sound[c.prop].apply(c.sound,c.value||[]):c.sound[c.prop]=c.value}},this),document.body.addEventListener("touchmove",v,!1),document.body.addEventListener("touchend",d,!1)}},onBlur:function(){this.forEachActiveSound(function(h){h.isPlaying&&(this.onBlurPausedSounds.push(h),h.onBlur())})},onFocus:function(){this.onBlurPausedSounds.forEach(function(h){h.onFocus()}),this.onBlurPausedSounds.length=0},destroy:function(){n.prototype.destroy.call(this),this.onBlurPausedSounds.length=0,this.onBlurPausedSounds=null},isLocked:function(h,u,v){return h.tags[0].dataset.locked==="true"?(this.lockedActionsQueue.push({sound:h,prop:u,value:v}),!0):!1},setMute:function(h){return this.mute=h,this},mute:{get:function(){return this._mute},set:function(h){this._mute=h,this.forEachActiveSound(function(u){u.updateMute()}),this.emit(r.GLOBAL_MUTE,this,h)}},setVolume:function(h){return this.volume=h,this},volume:{get:function(){return this._volume},set:function(h){this._volume=h,this.forEachActiveSound(function(u){u.updateVolume()}),this.emit(r.GLOBAL_VOLUME,this,h)}}});e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(78),o=function(r,a,l,h,u){if(h===void 0&&(h=0),u===void 0&&(u=r.length),n(r,h,u))for(var v=h;v<u;v++){var d=r[v];if(!a||a&&l===void 0&&d.hasOwnProperty(a)||a&&l!==void 0&&d[a]===l)return d}return null};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(146),o=i(0),r=i(70),a=i(18),l=new o({Extends:n,initialize:function(u,v,d){if(d===void 0&&(d={}),this.tags=u.game.cache.audio.get(v),!this.tags)throw new Error('There is no audio asset with key "'+v+'" in the audio cache');this.audio=null,this.startTime=0,this.previousTime=0,this.duration=this.tags[0].duration,this.totalDuration=this.tags[0].duration,n.call(this,u,v,d)},play:function(h,u){return this.manager.isLocked(this,"play",[h,u])||!n.prototype.play.call(this,h,u)||!this.pickAndPlayAudioTag()?!1:(this.emit(r.PLAY,this),!0)},pause:function(){return this.manager.isLocked(this,"pause")||this.startTime>0||!n.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.stopAndReleaseAudioTag(),this.emit(r.PAUSE,this),!0)},resume:function(){return this.manager.isLocked(this,"resume")||this.startTime>0||!n.prototype.resume.call(this)||!this.pickAndPlayAudioTag()?!1:(this.emit(r.RESUME,this),!0)},stop:function(){return this.manager.isLocked(this,"stop")||!n.prototype.stop.call(this)?!1:(this.stopAndReleaseAudioTag(),this.emit(r.STOP,this),!0)},pickAndPlayAudioTag:function(){if(!this.pickAudioTag())return this.reset(),!1;var h=this.currentConfig.seek,u=this.currentConfig.delay,v=(this.currentMarker?this.currentMarker.start:0)+h;return this.previousTime=v,this.audio.currentTime=v,this.applyConfig(),u===0?(this.startTime=0,this.audio.paused&&this.playCatchPromise()):(this.startTime=window.performance.now()+u*1e3,this.audio.paused||this.audio.pause()),this.resetConfig(),!0},pickAudioTag:function(){if(this.audio)return!0;for(var h=0;h<this.tags.length;h++){var u=this.tags[h];if(u.dataset.used==="false")return u.dataset.used="true",this.audio=u,!0}if(!this.manager.override)return!1;var v=[];this.manager.forEachActiveSound(function(c){c.key===this.key&&c.audio&&v.push(c)},this),v.sort(function(c,p){return c.loop===p.loop?p.seek/p.duration-c.seek/c.duration:c.loop?1:-1});var d=v[0];return this.audio=d.audio,d.reset(),d.audio=null,d.startTime=0,d.previousTime=0,!0},playCatchPromise:function(){var h=this.audio.play();h&&h.catch(function(u){console.warn(u)})},stopAndReleaseAudioTag:function(){this.startTime=0,this.previousTime=0,this.audio&&(this.audio.pause(),this.audio.dataset.used="false",this.audio=null)},reset:function(){n.prototype.stop.call(this)},onBlur:function(){this.isPlaying=!1,this.isPaused=!0,this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.currentConfig.delay=Math.max(0,(this.startTime-window.performance.now())/1e3),this.stopAndReleaseAudioTag()},onFocus:function(){this.isPlaying=!0,this.isPaused=!1,this.pickAndPlayAudioTag()},update:function(h){if(!!this.isPlaying){if(this.startTime>0){this.startTime<h-this.manager.audioPlayDelay&&(this.audio.currentTime+=Math.max(0,h-this.startTime)/1e3,this.startTime=0,this.previousTime=this.audio.currentTime,this.playCatchPromise());return}var u=this.currentMarker?this.currentMarker.start:0,v=u+this.duration,d=this.audio.currentTime;if(this.currentConfig.loop)d>=v-this.manager.loopEndOffset?(this.audio.currentTime=u+Math.max(0,d-v),d=this.audio.currentTime):d<u&&(this.audio.currentTime+=u,d=this.audio.currentTime),d<this.previousTime&&this.emit(r.LOOPED,this);else if(d>=v){this.reset(),this.stopAndReleaseAudioTag(),this.emit(r.COMPLETE,this);return}this.previousTime=d}},destroy:function(){n.prototype.destroy.call(this),this.tags=null,this.audio&&this.stopAndReleaseAudioTag()},updateMute:function(){this.audio&&(this.audio.muted=this.currentConfig.mute||this.manager.mute)},updateVolume:function(){this.audio&&(this.audio.volume=a(this.currentConfig.volume*this.manager.volume,0,1))},calculateRate:function(){n.prototype.calculateRate.call(this),this.audio&&(this.audio.playbackRate=this.totalRate)},mute:{get:function(){return this.currentConfig.mute},set:function(h){this.currentConfig.mute=h,!this.manager.isLocked(this,"mute",h)&&(this.updateMute(),this.emit(r.MUTE,this,h))}},setMute:function(h){return this.mute=h,this},volume:{get:function(){return this.currentConfig.volume},set:function(h){this.currentConfig.volume=h,!this.manager.isLocked(this,"volume",h)&&(this.updateVolume(),this.emit(r.VOLUME,this,h))}},setVolume:function(h){return this.volume=h,this},rate:{get:function(){return this.currentConfig.rate},set:function(h){this.currentConfig.rate=h,!this.manager.isLocked(this,r.RATE,h)&&(this.calculateRate(),this.emit(r.RATE,this,h))}},setRate:function(h){return this.rate=h,this},detune:{get:function(){return this.currentConfig.detune},set:function(h){this.currentConfig.detune=h,!this.manager.isLocked(this,r.DETUNE,h)&&(this.calculateRate(),this.emit(r.DETUNE,this,h))}},setDetune:function(h){return this.detune=h,this},seek:{get:function(){return this.isPlaying?this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0):this.isPaused?this.currentConfig.seek:0},set:function(h){this.manager.isLocked(this,"seek",h)||this.startTime>0||(this.isPlaying||this.isPaused)&&(h=Math.min(Math.max(0,h),this.duration),this.isPlaying?(this.previousTime=h,this.audio.currentTime=h):this.isPaused&&(this.currentConfig.seek=h),this.emit(r.SEEK,this,h))}},setSeek:function(h){return this.seek=h,this},loop:{get:function(){return this.currentConfig.loop},set:function(h){this.currentConfig.loop=h,!this.manager.isLocked(this,"loop",h)&&(this.audio&&(this.audio.loop=h),this.emit(r.LOOP,this,h))}},setLoop:function(h){return this.loop=h,this},pan:{get:function(){return this.currentConfig.pan},set:function(h){this.currentConfig.pan=h,this.emit(r.PAN,this,h)}},setPan:function(h){return this.pan=h,this}});e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(145),o=i(0),r=i(9),a=i(431),l=i(1),h=new o({Extends:r,initialize:function(v){r.call(this),this.game=v,this.sounds=[],this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.pauseOnBlur=!0,this.locked=!1},add:function(u,v){var d=new a(this,u,v);return this.sounds.push(d),d},addAudioSprite:function(u,v){var d=this.add(u,v);return d.spritemap={},d},play:function(u,v){return!1},playAudioSprite:function(u,v,d){return!1},remove:function(u){return n.prototype.remove.call(this,u)},removeByKey:function(u){return n.prototype.removeByKey.call(this,u)},pauseAll:l,resumeAll:l,stopAll:l,update:l,setRate:l,setDetune:l,setMute:l,setVolume:l,forEachActiveSound:function(u,v){n.prototype.forEachActiveSound.call(this,u,v)},destroy:function(){n.prototype.destroy.call(this)}});e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(146),o=i(0),r=i(9),a=i(17),l=function(){return!1},h=function(){return null},u=function(){return this},v=new o({Extends:r,initialize:function(c,p,g){g===void 0&&(g={}),r.call(this),this.manager=c,this.key=p,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=0,this.totalDuration=0,this.config=a({mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},g),this.currentConfig=this.config,this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.seek=0,this.loop=!1,this.pan=0,this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:l,updateMarker:l,removeMarker:h,play:l,pause:l,resume:l,stop:l,destroy:function(){n.prototype.destroy.call(this)},setMute:u,setVolume:u,setRate:u,setDetune:u,setSeek:u,setLoop:u,setPan:u});e.exports=v},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(433),o=i(145),r=i(0),a=i(70),l=i(22),h=i(434),u=new r({Extends:o,initialize:function(d){this.context=this.createAudioContext(d),this.masterMuteNode=this.context.createGain(),this.masterVolumeNode=this.context.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(this.context.destination),this.destination=this.masterMuteNode,this.locked=this.context.state==="suspended"&&("ontouchstart"in window||"onclick"in window),o.call(this,d),this.locked&&d.isBooted?this.unlock():d.events.once(l.BOOT,this.unlock,this)},createAudioContext:function(v){var d=v.config.audio;if(d.context)return d.context.resume(),d.context;if(window.hasOwnProperty("AudioContext"))return new AudioContext;if(window.hasOwnProperty("webkitAudioContext"))return new window.webkitAudioContext},setAudioContext:function(v){return this.context&&this.context.close(),this.masterMuteNode&&this.masterMuteNode.disconnect(),this.masterVolumeNode&&this.masterVolumeNode.disconnect(),this.context=v,this.masterMuteNode=v.createGain(),this.masterVolumeNode=v.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(v.destination),this.destination=this.masterMuteNode,this},add:function(v,d){var c=new h(this,v,d);return this.sounds.push(c),c},decodeAudio:function(v,d){var c;Array.isArray(v)?c=v:c=[{key:v,data:d}];for(var p=this.game.cache.audio,g=c.length,m=0;m<c.length;m++){var x=c[m],y=x.key,T=x.data;typeof T=="string"&&(T=n(T));var C=function(E,M){p.add(E,M),this.emit(a.DECODED,E),g--,g===0&&this.emit(a.DECODED_ALL)}.bind(this,y),S=function(E,M){console.error("Error decoding audio: "+E+" - ",M?M.message:""),g--,g===0&&this.emit(a.DECODED_ALL)}.bind(this,y);this.context.decodeAudioData(T,C,S)}},unlock:function(){var v=this,d=document.body,c=function p(){if(v.context&&d){var g=d.removeEventListener;v.context.resume().then(function(){g("touchstart",p),g("touchend",p),g("click",p),g("keydown",p),v.unlocked=!0},function(){g("touchstart",p),g("touchend",p),g("click",p),g("keydown",p)})}};d&&(d.addEventListener("touchstart",c,!1),d.addEventListener("touchend",c,!1),d.addEventListener("click",c,!1),d.addEventListener("keydown",c,!1))},onBlur:function(){this.locked||this.context.suspend()},onFocus:function(){var v=this.context;(v.state==="suspended"||v.state==="interrupted")&&!this.locked&&v.resume()},update:function(v,d){o.prototype.update.call(this,v,d);var c=this.context;c&&c.state==="interrupted"&&c.resume()},destroy:function(){if(this.destination=null,this.masterVolumeNode.disconnect(),this.masterVolumeNode=null,this.masterMuteNode.disconnect(),this.masterMuteNode=null,this.game.config.audio.context)this.context.suspend();else{var v=this;this.context.close().then(function(){v.context=null})}o.prototype.destroy.call(this)},setMute:function(v){return this.mute=v,this},mute:{get:function(){return this.masterMuteNode.gain.value===0},set:function(v){this.masterMuteNode.gain.setValueAtTime(v?0:1,0),this.emit(a.GLOBAL_MUTE,this,v)}},setVolume:function(v){return this.volume=v,this},volume:{get:function(){return this.masterVolumeNode.gain.value},set:function(v){this.masterVolumeNode.gain.setValueAtTime(v,0),this.emit(a.GLOBAL_VOLUME,this,v)}}});e.exports=u},function(e,f){/**
 * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */for(var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=new Uint8Array(256),o=0;o<i.length;o++)n[i.charCodeAt(o)]=o;var r=function(a){a=a.substr(a.indexOf(",")+1);var l=a.length,h=l*.75,u=0,v,d,c,p;a[l-1]==="="&&(h--,a[l-2]==="="&&h--);for(var g=new ArrayBuffer(h),m=new Uint8Array(g),x=0;x<l;x+=4)v=n[a.charCodeAt(x)],d=n[a.charCodeAt(x+1)],c=n[a.charCodeAt(x+2)],p=n[a.charCodeAt(x+3)],m[u++]=v<<2|d>>4,m[u++]=(d&15)<<4|c>>2,m[u++]=(c&3)<<6|p&63;return g};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(146),o=i(0),r=i(70),a=new o({Extends:n,initialize:function(h,u,v){if(v===void 0&&(v={}),this.audioBuffer=h.game.cache.audio.get(u),!this.audioBuffer)throw new Error('Audio key "'+u+'" missing from cache');this.source=null,this.loopSource=null,this.muteNode=h.context.createGain(),this.volumeNode=h.context.createGain(),this.pannerNode=null,this.playTime=0,this.startTime=0,this.loopTime=0,this.rateUpdates=[],this.hasEnded=!1,this.hasLooped=!1,this.muteNode.connect(this.volumeNode),h.context.createStereoPanner?(this.pannerNode=h.context.createStereoPanner(),this.volumeNode.connect(this.pannerNode),this.pannerNode.connect(h.destination)):this.volumeNode.connect(h.destination),this.duration=this.audioBuffer.duration,this.totalDuration=this.audioBuffer.duration,n.call(this,h,u,v)},play:function(l,h){return n.prototype.play.call(this,l,h)?(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource(),this.emit(r.PLAY,this),!0):!1},pause:function(){return this.manager.context.currentTime<this.startTime||!n.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.getCurrentTime(),this.stopAndRemoveBufferSource(),this.emit(r.PAUSE,this),!0)},resume:function(){return this.manager.context.currentTime<this.startTime||!n.prototype.resume.call(this)?!1:(this.createAndStartBufferSource(),this.emit(r.RESUME,this),!0)},stop:function(){return n.prototype.stop.call(this)?(this.stopAndRemoveBufferSource(),this.emit(r.STOP,this),!0):!1},createAndStartBufferSource:function(){var l=this.currentConfig.seek,h=this.currentConfig.delay,u=this.manager.context.currentTime+h,v=(this.currentMarker?this.currentMarker.start:0)+l,d=this.duration-l;this.playTime=u-l,this.startTime=u,this.source=this.createBufferSource(),this.applyConfig(),this.source.start(Math.max(0,u),Math.max(0,v),Math.max(0,d)),this.resetConfig()},createAndStartLoopBufferSource:function(){var l=this.getLoopTime(),h=this.currentMarker?this.currentMarker.start:0,u=this.duration;this.loopTime=l,this.loopSource=this.createBufferSource(),this.loopSource.playbackRate.setValueAtTime(this.totalRate,0),this.loopSource.start(Math.max(0,l),Math.max(0,h),Math.max(0,u))},createBufferSource:function(){var l=this,h=this.manager.context.createBufferSource();return h.buffer=this.audioBuffer,h.connect(this.muteNode),h.onended=function(u){u.target===l.source&&(l.currentConfig.loop?l.hasLooped=!0:l.hasEnded=!0)},h},stopAndRemoveBufferSource:function(){this.source&&(this.source.stop(),this.source.disconnect(),this.source=null),this.playTime=0,this.startTime=0,this.stopAndRemoveLoopBufferSource()},stopAndRemoveLoopBufferSource:function(){this.loopSource&&(this.loopSource.stop(),this.loopSource.disconnect(),this.loopSource=null),this.loopTime=0},applyConfig:function(){this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:1}),n.prototype.applyConfig.call(this)},update:function(){this.hasEnded?(this.hasEnded=!1,n.prototype.stop.call(this),this.stopAndRemoveBufferSource(),this.emit(r.COMPLETE,this)):this.hasLooped&&(this.hasLooped=!1,this.source=this.loopSource,this.loopSource=null,this.playTime=this.startTime=this.loopTime,this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:this.totalRate}),this.createAndStartLoopBufferSource(),this.emit(r.LOOPED,this))},destroy:function(){n.prototype.destroy.call(this),this.audioBuffer=null,this.stopAndRemoveBufferSource(),this.muteNode.disconnect(),this.muteNode=null,this.volumeNode.disconnect(),this.volumeNode=null,this.pannerNode&&(this.pannerNode.disconnect(),this.pannerNode=null),this.rateUpdates.length=0,this.rateUpdates=null},calculateRate:function(){n.prototype.calculateRate.call(this);var l=this.manager.context.currentTime;this.source&&typeof this.totalRate=="number"&&this.source.playbackRate.setValueAtTime(this.totalRate,l),this.isPlaying&&(this.rateUpdates.push({time:Math.max(this.startTime,l)-this.playTime,rate:this.totalRate}),this.loopSource&&(this.stopAndRemoveLoopBufferSource(),this.createAndStartLoopBufferSource()))},getCurrentTime:function(){for(var l=0,h=0;h<this.rateUpdates.length;h++){var u=0;h<this.rateUpdates.length-1?u=this.rateUpdates[h+1].time:u=this.manager.context.currentTime-this.playTime,l+=(u-this.rateUpdates[h].time)*this.rateUpdates[h].rate}return l},getLoopTime:function(){for(var l=0,h=0;h<this.rateUpdates.length-1;h++)l+=(this.rateUpdates[h+1].time-this.rateUpdates[h].time)*this.rateUpdates[h].rate;var u=this.rateUpdates[this.rateUpdates.length-1];return this.playTime+u.time+(this.duration-l)/u.rate},rate:{get:function(){return this.currentConfig.rate},set:function(l){this.currentConfig.rate=l,this.calculateRate(),this.emit(r.RATE,this,l)}},setRate:function(l){return this.rate=l,this},detune:{get:function(){return this.currentConfig.detune},set:function(l){this.currentConfig.detune=l,this.calculateRate(),this.emit(r.DETUNE,this,l)}},setDetune:function(l){return this.detune=l,this},mute:{get:function(){return this.muteNode.gain.value===0},set:function(l){this.currentConfig.mute=l,this.muteNode.gain.setValueAtTime(l?0:1,0),this.emit(r.MUTE,this,l)}},setMute:function(l){return this.mute=l,this},volume:{get:function(){return this.volumeNode.gain.value},set:function(l){this.currentConfig.volume=l,this.volumeNode.gain.setValueAtTime(l,0),this.emit(r.VOLUME,this,l)}},setVolume:function(l){return this.volume=l,this},seek:{get:function(){return this.isPlaying?this.manager.context.currentTime<this.startTime?this.startTime-this.playTime:this.getCurrentTime():this.isPaused?this.currentConfig.seek:0},set:function(l){this.manager.context.currentTime<this.startTime||(this.isPlaying||this.isPaused)&&(l=Math.min(Math.max(0,l),this.duration),this.currentConfig.seek=l,this.isPlaying&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource()),this.emit(r.SEEK,this,l))}},setSeek:function(l){return this.seek=l,this},loop:{get:function(){return this.currentConfig.loop},set:function(l){this.currentConfig.loop=l,this.isPlaying&&(this.stopAndRemoveLoopBufferSource(),l&&this.createAndStartLoopBufferSource()),this.emit(r.LOOP,this,l)}},setLoop:function(l){return this.loop=l,this},pan:{get:function(){return this.pannerNode?this.pannerNode.pan.value:0},set:function(l){this.currentConfig.pan=l,this.pannerNode&&this.pannerNode.pan.setValueAtTime(l,this.manager.context.currentTime),this.emit(r.PAN,this,l)}},setPan:function(l){return this.pan=l,this}});e.exports=a},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){for(var o=n.length,r=n[0].length,a=new Array(r),l=0;l<r;l++){a[l]=new Array(o);for(var h=o-1;h>-1;h--)a[l][h]=n[h][l]}return a};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function i(r,a,l){var h=r[a];r[a]=r[l],r[l]=h}function n(r,a){return r<a?-1:r>a?1:0}var o=function(r,a,l,h,u){for(l===void 0&&(l=0),h===void 0&&(h=r.length-1),u===void 0&&(u=n);h>l;){if(h-l>600){var v=h-l+1,d=a-l+1,c=Math.log(v),p=.5*Math.exp(2*c/3),g=.5*Math.sqrt(c*p*(v-p)/v)*(d-v/2<0?-1:1),m=Math.max(l,Math.floor(a-d*p/v+g)),x=Math.min(h,Math.floor(a+(v-d)*p/v+g));o(r,a,m,x,u)}var y=r[a],T=l,C=h;for(i(r,l,a),u(r[h],y)>0&&i(r,l,h);T<C;){for(i(r,T,C),T++,C--;u(r[T],y)<0;)T++;for(;u(r[C],y)>0;)C--}u(r[l],y)===0?i(r,l,C):(C++,i(r,C,h)),C<=a&&(l=C+1),a<=C&&(h=C-1)}};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(6),o=i(131),r=function(l,h,u){for(var v=[],d=0;d<l.length;d++)for(var c=0;c<h.length;c++)for(var p=0;p<u;p++)v.push({a:l[d],b:h[c]});return v},a=function(l,h,u){var v=n(u,"max",0),d=n(u,"qty",1),c=n(u,"random",!1),p=n(u,"randomB",!1),g=n(u,"repeat",0),m=n(u,"yoyo",!1),x=[];if(p&&o(h),g===-1)if(v===0)g=0;else{var y=l.length*h.length*d;m&&(y*=2),g=Math.ceil(v/y)}for(var T=0;T<=g;T++){var C=r(l,h,d);c&&o(C),x=x.concat(C),m&&(C.reverse(),x=x.concat(C))}return v&&x.splice(v),x};e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={PROCESS_QUEUE_ADD:i(1041),PROCESS_QUEUE_REMOVE:i(1042)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(13),o=function(r,a){var l=n(a,"anims",null);if(l===null)return r;if(typeof l=="string")r.anims.play(l);else if(typeof l=="object"){var h=r.anims,u=n(l,"key",void 0);if(u){var v=n(l,"startFrame",void 0),d=n(l,"delay",0),c=n(l,"repeat",0),p=n(l,"repeatDelay",0),g=n(l,"yoyo",!1),m=n(l,"play",!1),x=n(l,"delayedPlay",0),y={key:u,delay:d,repeat:c,repeatDelay:p,yoyo:g,startFrame:v};m?h.play(y):x>0?h.playAfterDelay(y,x):h.load(y)}}return r};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(109),r=new n({initialize:function(l,h,u,v,d){this.parent=l,this.x=h,this.y=u,this.frame=v,this.data={},this.tint=16777215,this._visible=d,this._alpha=1,this.flipX=!1,this.flipY=!1},setFrame:function(a){return a===void 0?this.frame=this.parent.frame:a instanceof o&&a.texture===this.parent.texture?this.frame=a:this.frame=this.parent.texture.get(a),this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this},reset:function(a,l,h){return this.x=a,this.y=l,this.flipX=!1,this.flipY=!1,this._alpha=1,this._visible=!0,this.parent.dirty=!0,h&&this.setFrame(h),this},setPosition:function(a,l){return this.x=a,this.y=l,this},setFlipX:function(a){return this.flipX=a,this},setFlipY:function(a){return this.flipY=a,this},setFlip:function(a,l){return this.flipX=a,this.flipY=l,this},setVisible:function(a){return this.visible=a,this},setAlpha:function(a){return this.alpha=a,this},setTint:function(a){return this.tint=a,this},destroy:function(){this.parent.dirty=!0,this.parent.children.remove(this),this.parent=void 0,this.frame=void 0,this.data=void 0},visible:{get:function(){return this._visible},set:function(a){this.parent.dirty|=this._visible!==a,this._visible=a}},alpha:{get:function(){return this._alpha},set:function(a){this.parent.dirty|=this._alpha>0!=a>0,this._alpha=a}}});e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(10),o=function(r,a,l){l===void 0&&(l=new n);var h=Math.min(r.x,a.x),u=Math.min(r.y,a.y),v=Math.max(r.right,a.right)-h,d=Math.max(r.bottom,a.bottom)-u;return l.setTo(h,u,v,d)};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(11),r=i(1055),a=i(15),l=i(7),h=i(202),u=i(20),v=i(140),d=new n({Extends:a,Mixins:[o.AlphaSingle,o.BlendMode,o.Depth,o.Origin,o.ScrollFactor,o.Transform,o.Visible,r],initialize:function(p,g,m,x,y,T){a.call(this,p,"DOMElement"),this.parent=p.sys.game.domContainer,this.cache=p.sys.cache.html,this.node,this.transformOnly=!1,this.skewX=0,this.skewY=0,this.rotate3d=new v,this.rotate3dAngle="deg",this.pointerEvents="auto",this.width=0,this.height=0,this.displayWidth=0,this.displayHeight=0,this.handler=this.dispatchNativeEvent.bind(this),this.setPosition(g,m),typeof x=="string"?x[0]==="#"?this.setElement(x.substr(1),y,T):this.createElement(x,y,T):x&&this.setElement(x,y,T),p.sys.events.on(u.SLEEP,this.handleSceneEvent,this),p.sys.events.on(u.WAKE,this.handleSceneEvent,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},handleSceneEvent:function(c){var p=this.node,g=p.style;p&&(g.display=c.settings.visible?"block":"none")},setSkew:function(c,p){return c===void 0&&(c=0),p===void 0&&(p=c),this.skewX=c,this.skewY=p,this},setPerspective:function(c){return this.parent.style.perspective=c+"px",this},perspective:{get:function(){return parseFloat(this.parent.style.perspective)},set:function(c){this.parent.style.perspective=c+"px"}},addListener:function(c){if(this.node){c=c.split(" ");for(var p=0;p<c.length;p++)this.node.addEventListener(c[p],this.handler,!1)}return this},removeListener:function(c){if(this.node){c=c.split(" ");for(var p=0;p<c.length;p++)this.node.removeEventListener(c[p],this.handler)}return this},dispatchNativeEvent:function(c){this.emit(c.type,c)},createElement:function(c,p,g){return this.setElement(document.createElement(c),p,g)},setElement:function(c,p,g){this.removeElement();var m;if(typeof c=="string"?(c[0]==="#"&&(c=c.substr(1)),m=document.getElementById(c)):typeof c=="object"&&c.nodeType===1&&(m=c),!m)return this;if(this.node=m,p&&l(p))for(var x in p)m.style[x]=p[x];else typeof p=="string"&&(m.style=p);return m.style.zIndex="0",m.style.display="inline",m.style.position="absolute",m.phaser=this,this.parent&&this.parent.appendChild(m),g&&(m.innerText=g),this.updateSize()},createFromCache:function(c,p){var g=this.cache.get(c);return g&&this.createFromHTML(g,p),this},createFromHTML:function(c,p){p===void 0&&(p="div"),this.removeElement();var g=document.createElement(p);return this.node=g,g.style.zIndex="0",g.style.display="inline",g.style.position="absolute",g.phaser=this,this.parent&&this.parent.appendChild(g),g.innerHTML=c,this.updateSize()},removeElement:function(){return this.node&&(h(this.node),this.node=null),this},updateSize:function(){var c=this.node,p=c.getBoundingClientRect();return this.width=c.clientWidth,this.height=c.clientHeight,this.displayWidth=p.width||0,this.displayHeight=p.height||0,this},getChildByProperty:function(c,p){if(this.node){for(var g=this.node.querySelectorAll("*"),m=0;m<g.length;m++)if(g[m][c]===p)return g[m]}return null},getChildByID:function(c){return this.getChildByProperty("id",c)},getChildByName:function(c){return this.getChildByProperty("name",c)},setClassName:function(c){return this.node&&(this.node.className=c,this.updateSize()),this},setText:function(c){return this.node&&(this.node.innerText=c,this.updateSize()),this},setHTML:function(c){return this.node&&(this.node.innerHTML=c,this.updateSize()),this},preUpdate:function(){var c=this.parentContainer,p=this.node;p&&c&&!c.willRender()&&(p.style.display="none")},willRender:function(){return!0},preDestroy:function(){this.removeElement(),this.scene.sys.events.off(u.SLEEP,this.handleSceneEvent,this),this.scene.sys.events.off(u.WAKE,this.handleSceneEvent,this)}});e.exports=d},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1056),o=i(15),r=i(25),a=new r,l=new r,h=new r,u=function(v,d,c,p){if(!!d.node){var g=d.node.style,m=d.scene.sys.settings;if(!g||!m.visible||o.RENDER_MASK!==d.renderFlags||d.cameraFilter!==0&&d.cameraFilter&c.id||d.parentContainer&&!d.parentContainer.willRender()){g.display="none";return}var x=d.parentContainer,y=c.alpha*d.alpha;x&&(y*=x.alpha);var T=a,C=l,S=h,E=0,M=0,O="0%",L="0%";p?(E=d.width*d.scaleX*d.originX,M=d.height*d.scaleY*d.originY,C.applyITRS(d.x-E,d.y-M,d.rotation,d.scaleX,d.scaleY),T.copyFrom(c.matrix),T.multiplyWithOffset(p,-c.scrollX*d.scrollFactorX,-c.scrollY*d.scrollFactorY),C.e=d.x-E,C.f=d.y-M,T.multiply(C,S)):(E=d.width*d.originX,M=d.height*d.originY,C.applyITRS(d.x-E,d.y-M,d.rotation,d.scaleX,d.scaleY),T.copyFrom(c.matrix),O=100*d.originX+"%",L=100*d.originY+"%",C.e-=c.scrollX*d.scrollFactorX,C.f-=c.scrollY*d.scrollFactorY,T.multiply(C,S)),d.transformOnly||(g.display="block",g.opacity=y,g.zIndex=d._depth,g.pointerEvents=d.pointerEvents,g.mixBlendMode=n[d._blendMode]),g.transform=S.getCSSMatrix()+" skew("+d.skewX+"rad, "+d.skewY+"rad) rotate3d("+d.rotate3d.x+","+d.rotate3d.y+","+d.rotate3d.z+","+d.rotate3d.w+d.rotate3dAngle+")",g.transformOrigin=O+" "+L}};e.exports=u},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(11),r=i(15),a=i(1060),l=new n({Extends:r,Mixins:[o.Alpha,o.BlendMode,o.Depth,o.Flip,o.Origin,o.ScrollFactor,o.Size,o.Texture,o.Tint,o.Transform,o.Visible,a],initialize:function(u){r.call(this,u,"Extern")},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(){},render:function(){}});e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(218),o=i(98),r=i(14),a=i(4),l=function(h,u,v){v===void 0&&(v=new a);var d=o(u,0,r.PI2);return n(h,d,v)};e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(447),o=i(218),r=i(98),a=i(14),l=function(h,u,v,d){d===void 0&&(d=[]),!u&&v>0&&(u=n(h)/v);for(var c=0;c<u;c++){var p=r(c/u,0,a.PI2);d.push(o(h,p))}return d};e.exports=l},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){var o=n.width/2,r=n.height/2,a=Math.pow(o-r,2)/Math.pow(o+r,2);return Math.PI*(o+r)*(1+3*a/(10+Math.sqrt(4-3*a)))};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(217),o=i(30),r=function(a,l,h,u,v,d){var c=l.commandBuffer,p=c.length,g=v||a.currentContext;if(!(p===0||!o(a,g,l,h,u))){h.addToRenderList(l);var m=1,x=1,y=0,T=0,C=1,S=0,E=0,M=0;g.beginPath();for(var O=0;O<p;++O){var L=c[O];switch(L){case n.ARC:g.arc(c[O+1],c[O+2],c[O+3],c[O+4],c[O+5],c[O+6]),O+=7;break;case n.LINE_STYLE:C=c[O+1],y=c[O+2],m=c[O+3],S=(y&16711680)>>>16,E=(y&65280)>>>8,M=y&255,g.strokeStyle="rgba("+S+","+E+","+M+","+m+")",g.lineWidth=C,O+=3;break;case n.FILL_STYLE:T=c[O+1],x=c[O+2],S=(T&16711680)>>>16,E=(T&65280)>>>8,M=T&255,g.fillStyle="rgba("+S+","+E+","+M+","+x+")",O+=2;break;case n.BEGIN_PATH:g.beginPath();break;case n.CLOSE_PATH:g.closePath();break;case n.FILL_PATH:d||g.fill();break;case n.STROKE_PATH:d||g.stroke();break;case n.FILL_RECT:d?g.rect(c[O+1],c[O+2],c[O+3],c[O+4]):g.fillRect(c[O+1],c[O+2],c[O+3],c[O+4]),O+=4;break;case n.FILL_TRIANGLE:g.beginPath(),g.moveTo(c[O+1],c[O+2]),g.lineTo(c[O+3],c[O+4]),g.lineTo(c[O+5],c[O+6]),g.closePath(),d||g.fill(),O+=6;break;case n.STROKE_TRIANGLE:g.beginPath(),g.moveTo(c[O+1],c[O+2]),g.lineTo(c[O+3],c[O+4]),g.lineTo(c[O+5],c[O+6]),g.closePath(),d||g.stroke(),O+=6;break;case n.LINE_TO:g.lineTo(c[O+1],c[O+2]),O+=2;break;case n.MOVE_TO:g.moveTo(c[O+1],c[O+2]),O+=2;break;case n.LINE_FX_TO:g.lineTo(c[O+1],c[O+2]),O+=5;break;case n.MOVE_FX_TO:g.moveTo(c[O+1],c[O+2]),O+=5;break;case n.SAVE:g.save();break;case n.RESTORE:g.restore();break;case n.TRANSLATE:g.translate(c[O+1],c[O+2]),O+=2;break;case n.SCALE:g.scale(c[O+1],c[O+2]),O+=2;break;case n.ROTATE:g.rotate(c[O+1]),O+=1;break;case n.GRADIENT_FILL_STYLE:O+=5;break;case n.GRADIENT_LINE_STYLE:O+=6;break}}g.restore()}};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(137),r=i(80),a=i(2),l=i(68),h=new n({initialize:function(v,d,c,p){p===void 0&&(p=!1),this.propertyKey=d,this.propertyValue=c,this.defaultValue=c,this.steps=0,this.counter=0,this.start=0,this.end=0,this.ease,this.emitOnly=p,this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,this.loadConfig(v)},loadConfig:function(u,v){u===void 0&&(u={}),v&&(this.propertyKey=v),this.propertyValue=a(u,this.propertyKey,this.defaultValue),this.setMethods(),this.emitOnly&&(this.onUpdate=this.defaultUpdate)},toJSON:function(){return this.propertyValue},onChange:function(u){return this.propertyValue=u,this.setMethods()},setMethods:function(){var u=this.propertyValue,v=typeof u;if(this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,v==="number")this.onEmit=this.staticValueEmit,this.onUpdate=this.staticValueUpdate;else if(Array.isArray(u))this.onEmit=this.randomStaticValueEmit;else if(v==="function")this.emitOnly?this.onEmit=u:this.onUpdate=u;else if(v==="object"&&this.hasBoth(u,"start","end")){this.start=u.start,this.end=u.end;var d=this.has(u,"random");if(d&&(this.onEmit=this.randomRangedValueEmit),this.has(u,"steps"))this.steps=u.steps,this.counter=this.start,this.onEmit=this.steppedEmit;else{var c=this.has(u,"ease")?u.ease:"Linear";this.ease=r(c,u.easeParams),d||(this.onEmit=this.easedValueEmit),this.onUpdate=this.easeValueUpdate}}else if(v==="object"&&this.hasBoth(u,"min","max"))this.start=u.min,this.end=u.max,this.onEmit=this.randomRangedValueEmit;else if(v==="object"&&this.has(u,"random")){var p=u.random;Array.isArray(p)&&(this.start=p[0],this.end=p[1]),this.onEmit=this.randomRangedValueEmit}else v==="object"&&this.hasEither(u,"onEmit","onUpdate")&&(this.has(u,"onEmit")&&(this.onEmit=u.onEmit),this.has(u,"onUpdate")&&(this.onUpdate=u.onUpdate));return this},has:function(u,v){return u.hasOwnProperty(v)},hasBoth:function(u,v,d){return u.hasOwnProperty(v)&&u.hasOwnProperty(d)},hasEither:function(u,v,d){return u.hasOwnProperty(v)||u.hasOwnProperty(d)},defaultEmit:function(u,v,d){return d},defaultUpdate:function(u,v,d,c){return c},staticValueEmit:function(){return this.propertyValue},staticValueUpdate:function(){return this.propertyValue},randomStaticValueEmit:function(){var u=Math.floor(Math.random()*this.propertyValue.length);return this.propertyValue[u]},randomRangedValueEmit:function(u,v){var d=o(this.start,this.end);return u&&u.data[v]&&(u.data[v].min=d),d},steppedEmit:function(){var u=this.counter,v=this.counter+(this.end-this.start)/this.steps;return this.counter=l(v,this.start,this.end),u},easedValueEmit:function(u,v){if(u&&u.data[v]){var d=u.data[v];d.min=this.start,d.max=this.end}return this.start},easeValueUpdate:function(u,v,d){var c=u.data[v];return(c.max-c.min)*this.ease(d)+c.min}});e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(2),r=new n({initialize:function(l,h,u,v,d){if(typeof l=="object"){var c=l;l=o(c,"x",0),h=o(c,"y",0),u=o(c,"power",0),v=o(c,"epsilon",100),d=o(c,"gravity",50)}else l===void 0&&(l=0),h===void 0&&(h=0),u===void 0&&(u=0),v===void 0&&(v=100),d===void 0&&(d=50);this.x=l,this.y=h,this.active=!0,this._gravity=d,this._power=0,this._epsilon=0,this.power=u,this.epsilon=v},update:function(a,l){var h=this.x-a.x,u=this.y-a.y,v=h*h+u*u;if(v!==0){var d=Math.sqrt(v);v<this._epsilon&&(v=this._epsilon);var c=this._power*l/(v*d)*100;a.velocityX+=h*c,a.velocityY+=u*c}},epsilon:{get:function(){return Math.sqrt(this._epsilon)},set:function(a){this._epsilon=a*a}},power:{get:function(){return this._power/this._gravity},set:function(a){this._power=a*this._gravity}},gravity:{get:function(){return this._gravity},set:function(a){var l=this.power;this._gravity=a,this.power=l}}});e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(36),r=i(50),a=new n({initialize:function(h){this.emitter=h,this.frame=null,this.x=0,this.y=0,this.velocityX=0,this.velocityY=0,this.accelerationX=0,this.accelerationY=0,this.maxVelocityX=1e4,this.maxVelocityY=1e4,this.bounce=0,this.scaleX=1,this.scaleY=1,this.alpha=1,this.angle=0,this.rotation=0,this.tint=16777215,this.life=1e3,this.lifeCurrent=1e3,this.delayCurrent=0,this.lifeT=0,this.data={tint:{min:16777215,max:16777215,current:16777215},alpha:{min:1,max:1},rotate:{min:0,max:0},scaleX:{min:1,max:1},scaleY:{min:1,max:1}}},isAlive:function(){return this.lifeCurrent>0},resetPosition:function(){this.x=0,this.y=0},fire:function(l,h){var u=this.emitter;this.frame=u.getFrame(),u.emitZone&&u.emitZone.getPoint(this),l===void 0?this.x+=u.x.onEmit(this,"x"):this.x+=l,h===void 0?this.y+=u.y.onEmit(this,"y"):this.y+=h,this.life=u.lifespan.onEmit(this,"lifespan"),this.lifeCurrent=this.life,this.lifeT=0;var v=u.speedX.onEmit(this,"speedX"),d=u.speedY?u.speedY.onEmit(this,"speedY"):v;if(u.radial){var c=o(u.angle.onEmit(this,"angle"));this.velocityX=Math.cos(c)*Math.abs(v),this.velocityY=Math.sin(c)*Math.abs(d)}else if(u.moveTo){var p=u.moveToX.onEmit(this,"moveToX"),g=u.moveToY?u.moveToY.onEmit(this,"moveToY"):p,m=Math.atan2(g-this.y,p-this.x),x=r(this.x,this.y,p,g)/(this.life/1e3);this.velocityX=Math.cos(m)*x,this.velocityY=Math.sin(m)*x}else this.velocityX=v,this.velocityY=d;u.acceleration&&(this.accelerationX=u.accelerationX.onEmit(this,"accelerationX"),this.accelerationY=u.accelerationY.onEmit(this,"accelerationY")),this.maxVelocityX=u.maxVelocityX.onEmit(this,"maxVelocityX"),this.maxVelocityY=u.maxVelocityY.onEmit(this,"maxVelocityY"),this.delayCurrent=u.delay.onEmit(this,"delay"),this.scaleX=u.scaleX.onEmit(this,"scaleX"),this.scaleY=u.scaleY?u.scaleY.onEmit(this,"scaleY"):this.scaleX,this.angle=u.rotate.onEmit(this,"rotate"),this.rotation=o(this.angle),this.bounce=u.bounce.onEmit(this,"bounce"),this.alpha=u.alpha.onEmit(this,"alpha"),this.tint=u.tint.onEmit(this,"tint")},computeVelocity:function(l,h,u,v){var d=this.velocityX,c=this.velocityY,p=this.accelerationX,g=this.accelerationY,m=this.maxVelocityX,x=this.maxVelocityY;d+=l.gravityX*u,c+=l.gravityY*u,p&&(d+=p*u),g&&(c+=g*u),d>m?d=m:d<-m&&(d=-m),c>x?c=x:c<-x&&(c=-x),this.velocityX=d,this.velocityY=c;for(var y=0;y<v.length;y++)v[y].update(this,h,u)},checkBounds:function(l){var h=l.bounds,u=-this.bounce;this.x<h.x&&l.collideLeft?(this.x=h.x,this.velocityX*=u):this.x>h.right&&l.collideRight&&(this.x=h.right,this.velocityX*=u),this.y<h.y&&l.collideTop?(this.y=h.y,this.velocityY*=u):this.y>h.bottom&&l.collideBottom&&(this.y=h.bottom,this.velocityY*=u)},update:function(l,h,u){if(this.delayCurrent>0)return this.delayCurrent-=l,!1;var v=this.emitter,d=1-this.lifeCurrent/this.life;return this.lifeT=d,this.computeVelocity(v,l,h,u),this.x+=this.velocityX*h,this.y+=this.velocityY*h,v.bounds&&this.checkBounds(v),v.deathZone&&v.deathZone.willKill(this)?(this.lifeCurrent=0,!0):(this.scaleX=v.scaleX.onUpdate(this,"scaleX",d,this.scaleX),v.scaleY?this.scaleY=v.scaleY.onUpdate(this,"scaleY",d,this.scaleY):this.scaleY=this.scaleX,this.angle=v.rotate.onUpdate(this,"rotate",d,this.angle),this.rotation=o(this.angle),this.alpha=v.alpha.onUpdate(this,"alpha",d,this.alpha),this.tint=v.tint.onUpdate(this,"tint",d,this.tint),this.lifeCurrent-=l,this.lifeCurrent<=0)}});e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(35),o=i(0),r=i(11),a=i(453),l=i(454),h=i(449),u=i(2),v=i(210),d=i(455),c=i(126),p=i(451),g=i(456),m=i(10),x=i(79),y=i(3),T=i(68),C=new o({Mixins:[r.BlendMode,r.Mask,r.ScrollFactor,r.Visible],initialize:function(E,M){this.manager=E,this.texture=E.texture,this.frames=[E.defaultFrame],this.defaultFrame=E.defaultFrame,this.configFastMap=["active","blendMode","collideBottom","collideLeft","collideRight","collideTop","deathCallback","deathCallbackScope","emitCallback","emitCallbackScope","follow","frequency","gravityX","gravityY","maxParticles","name","on","particleBringToTop","particleClass","radial","timeScale","trackVisible","visible"],this.configOpMap=["accelerationX","accelerationY","angle","alpha","bounce","delay","lifespan","maxVelocityX","maxVelocityY","moveToX","moveToY","quantity","rotate","scaleX","scaleY","speedX","speedY","tint","x","y"],this.name="",this.particleClass=p,this.x=new h(M,"x",0,!0),this.y=new h(M,"y",0,!0),this.radial=!0,this.gravityX=0,this.gravityY=0,this.acceleration=!1,this.accelerationX=new h(M,"accelerationX",0,!0),this.accelerationY=new h(M,"accelerationY",0,!0),this.maxVelocityX=new h(M,"maxVelocityX",1e4,!0),this.maxVelocityY=new h(M,"maxVelocityY",1e4,!0),this.speedX=new h(M,"speedX",0,!0),this.speedY=new h(M,"speedY",0,!0),this.moveTo=!1,this.moveToX=new h(M,"moveToX",0,!0),this.moveToY=new h(M,"moveToY",0,!0),this.bounce=new h(M,"bounce",0,!0),this.scaleX=new h(M,"scaleX",1),this.scaleY=new h(M,"scaleY",1),this.tint=new h(M,"tint",16777215),this.alpha=new h(M,"alpha",1),this.lifespan=new h(M,"lifespan",1e3,!0),this.angle=new h(M,"angle",{min:0,max:360},!0),this.rotate=new h(M,"rotate",0),this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.maxParticles=0,this.quantity=new h(M,"quantity",1,!0),this.delay=new h(M,"delay",0,!0),this.frequency=0,this.on=!0,this.particleBringToTop=!0,this.timeScale=1,this.emitZone=null,this.deathZone=null,this.bounds=null,this.collideLeft=!0,this.collideRight=!0,this.collideTop=!0,this.collideBottom=!0,this.active=!0,this.visible=!0,this.blendMode=n.NORMAL,this.follow=null,this.followOffset=new y,this.trackVisible=!1,this.currentFrame=0,this.randomFrame=!0,this.frameQuantity=1,this.dead=[],this.alive=[],this._counter=0,this._frameCounter=0,M&&this.fromJSON(M)},fromJSON:function(S){if(!S)return this;var E=0,M="";for(E=0;E<this.configFastMap.length;E++)M=this.configFastMap[E],c(S,M)&&(this[M]=u(S,M));for(E=0;E<this.configOpMap.length;E++)M=this.configOpMap[E],c(S,M)&&this[M].loadConfig(S);if(this.acceleration=this.accelerationX.propertyValue!==0||this.accelerationY.propertyValue!==0,this.moveTo=this.moveToX.propertyValue!==0||this.moveToY.propertyValue!==0,c(S,"speed")&&(this.speedX.loadConfig(S,"speed"),this.speedY=null),(d(S,["speedX","speedY"])||this.moveTo)&&(this.radial=!1),c(S,"scale")&&(this.scaleX.loadConfig(S,"scale"),this.scaleY=null),c(S,"callbackScope")){var O=u(S,"callbackScope",null);this.emitCallbackScope=O,this.deathCallbackScope=O}return c(S,"emitZone")&&this.setEmitZone(S.emitZone),c(S,"deathZone")&&this.setDeathZone(S.deathZone),c(S,"bounds")&&this.setBounds(S.bounds),c(S,"followOffset")&&this.followOffset.setFromObject(u(S,"followOffset",0)),c(S,"frame")&&this.setFrame(S.frame),c(S,"reserve")&&this.reserve(S.reserve),this},toJSON:function(S){S===void 0&&(S={});var E=0,M="";for(E=0;E<this.configFastMap.length;E++)M=this.configFastMap[E],S[M]=this[M];for(E=0;E<this.configOpMap.length;E++)M=this.configOpMap[E],this[M]&&(S[M]=this[M].toJSON());return this.speedY||(delete S.speedX,S.speed=this.speedX.toJSON()),this.scaleY||(delete S.scaleX,S.scale=this.scaleX.toJSON()),S},startFollow:function(S,E,M,O){return E===void 0&&(E=0),M===void 0&&(M=0),O===void 0&&(O=!1),this.follow=S,this.followOffset.set(E,M),this.trackVisible=O,this},stopFollow:function(){return this.follow=null,this.followOffset.set(0,0),this.trackVisible=!1,this},getFrame:function(){if(this.frames.length===1)return this.defaultFrame;if(this.randomFrame)return v(this.frames);var S=this.frames[this.currentFrame];return this._frameCounter++,this._frameCounter===this.frameQuantity&&(this._frameCounter=0,this.currentFrame=T(this.currentFrame+1,0,this._frameLength)),S},setFrame:function(S,E,M){E===void 0&&(E=!0),M===void 0&&(M=1),this.randomFrame=E,this.frameQuantity=M,this.currentFrame=0,this._frameCounter=0;var O=typeof S;if(Array.isArray(S)||O==="string"||O==="number")this.manager.setEmitterFrames(S,this);else if(O==="object"){var L=S;S=u(L,"frames",null),S&&this.manager.setEmitterFrames(S,this);var R=u(L,"cycle",!1);this.randomFrame=!R,this.frameQuantity=u(L,"quantity",M)}return this._frameLength=this.frames.length,this._frameLength===1&&(this.frameQuantity=1,this.randomFrame=!1),this},setRadial:function(S){return S===void 0&&(S=!0),this.radial=S,this},setPosition:function(S,E){return this.x.onChange(S),this.y.onChange(E),this},setBounds:function(S,E,M,O){if(typeof S=="object"){var L=S;S=L.x,E=L.y,M=c(L,"w")?L.w:L.width,O=c(L,"h")?L.h:L.height}return this.bounds?this.bounds.setTo(S,E,M,O):this.bounds=new m(S,E,M,O),this},setSpeedX:function(S){return this.speedX.onChange(S),this.radial=!1,this},setSpeedY:function(S){return this.speedY&&(this.speedY.onChange(S),this.radial=!1),this},setSpeed:function(S){return this.speedX.onChange(S),this.speedY=null,this.radial=!0,this},setScaleX:function(S){return this.scaleX.onChange(S),this},setScaleY:function(S){return this.scaleY.onChange(S),this},setScale:function(S){return this.scaleX.onChange(S),this.scaleY=null,this},setGravityX:function(S){return this.gravityX=S,this},setGravityY:function(S){return this.gravityY=S,this},setGravity:function(S,E){return this.gravityX=S,this.gravityY=E,this},setAlpha:function(S){return this.alpha.onChange(S),this},setTint:function(S){return this.tint.onChange(S),this},setEmitterAngle:function(S){return this.angle.onChange(S),this},setAngle:function(S){return this.angle.onChange(S),this},setLifespan:function(S){return this.lifespan.onChange(S),this},setQuantity:function(S){return this.quantity.onChange(S),this},setFrequency:function(S,E){return this.frequency=S,this._counter=0,E&&this.quantity.onChange(E),this},setEmitZone:function(S){if(S===void 0)this.emitZone=null;else{var E=u(S,"type","random"),M=u(S,"source",null);switch(E){case"random":this.emitZone=new g(M);break;case"edge":var O=u(S,"quantity",1),L=u(S,"stepRate",0),R=u(S,"yoyo",!1),w=u(S,"seamless",!0);this.emitZone=new l(M,O,L,R,w);break}}return this},setDeathZone:function(S){if(S===void 0)this.deathZone=null;else{var E=u(S,"type","onEnter"),M=u(S,"source",null);if(M&&typeof M.contains=="function"){var O=E==="onEnter";this.deathZone=new a(M,O)}}return this},reserve:function(S){for(var E=this.dead,M=0;M<S;M++)E.push(new this.particleClass(this));return this},getAliveParticleCount:function(){return this.alive.length},getDeadParticleCount:function(){return this.dead.length},getParticleCount:function(){return this.getAliveParticleCount()+this.getDeadParticleCount()},atLimit:function(){return this.maxParticles>0&&this.getParticleCount()===this.maxParticles},onParticleEmit:function(S,E){return S===void 0?(this.emitCallback=null,this.emitCallbackScope=null):typeof S=="function"&&(this.emitCallback=S,E&&(this.emitCallbackScope=E)),this},onParticleDeath:function(S,E){return S===void 0?(this.deathCallback=null,this.deathCallbackScope=null):typeof S=="function"&&(this.deathCallback=S,E&&(this.deathCallbackScope=E)),this},killAll:function(){for(var S=this.dead,E=this.alive;E.length>0;)S.push(E.pop());return this},forEachAlive:function(S,E){for(var M=this.alive,O=M.length,L=0;L<O;++L)S.call(E,M[L],this);return this},forEachDead:function(S,E){for(var M=this.dead,O=M.length,L=0;L<O;++L)S.call(E,M[L],this);return this},start:function(){return this.on=!0,this._counter=0,this},stop:function(){return this.on=!1,this},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},remove:function(){return this.manager.removeEmitter(this),this},depthSort:function(){return x(this.alive,this.depthSortCallback),this},flow:function(S,E){return E===void 0&&(E=1),this.frequency=S,this.quantity.onChange(E),this.start()},explode:function(S,E,M){return this.frequency=-1,this.emitParticle(S,E,M)},emitParticleAt:function(S,E,M){return this.emitParticle(M,S,E)},emitParticle:function(S,E,M){if(!this.atLimit()){S===void 0&&(S=this.quantity.onEmit());for(var O=this.dead,L=this.follow?this.follow.x+this.followOffset.x:E,R=this.follow?this.follow.y+this.followOffset.y:M,w=0;w<S;w++){var D=O.pop();if(D||(D=new this.particleClass(this)),D.fire(L,R),this.particleBringToTop?this.alive.push(D):this.alive.unshift(D),this.emitCallback&&this.emitCallback.call(this.emitCallbackScope,D,this),this.atLimit())break}return D}},preUpdate:function(S,E){E*=this.timeScale;var M=E/1e3;this.trackVisible&&(this.visible=this.follow.visible);var O=this.manager.getProcessors(),L=this.alive,R=this.dead,w=0,D=[],B=L.length;for(w=0;w<B;w++){var N=L[w];N.update(E,M,O)&&D.push({index:w,particle:N})}if(B=D.length,B>0){var z=this.deathCallback,X=this.deathCallbackScope;for(w=B-1;w>=0;w--){var k=D[w];L.splice(k.index,1),R.push(k.particle),z&&z.call(X,k.particle),k.particle.resetPosition()}}!this.on||(this.frequency===0?this.emitParticle():this.frequency>0&&(this._counter-=E,this._counter<=0&&(this.emitParticle(),this._counter=this.frequency-Math.abs(this._counter))))},depthSortCallback:function(S,E){return S.y-E.y}});e.exports=C},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=new n({initialize:function(a,l){this.source=a,this.killOnEnter=l},willKill:function(r){var a=this.source.contains(r.x,r.y);return a&&this.killOnEnter||!a&&!this.killOnEnter}});e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=new n({initialize:function(a,l,h,u,v){u===void 0&&(u=!1),v===void 0&&(v=!0),this.source=a,this.points=[],this.quantity=l,this.stepRate=h,this.yoyo=u,this.counter=-1,this.seamless=v,this._length=0,this._direction=0,this.updateSource()},updateSource:function(){if(this.points=this.source.getPoints(this.quantity,this.stepRate),this.seamless){var r=this.points[0],a=this.points[this.points.length-1];r.x===a.x&&r.y===a.y&&this.points.pop()}var l=this._length;return this._length=this.points.length,this._length<l&&this.counter>this._length&&(this.counter=this._length-1),this},changeSource:function(r){return this.source=r,this.updateSource()},getPoint:function(r){this._direction===0?(this.counter++,this.counter>=this._length&&(this.yoyo?(this._direction=1,this.counter=this._length-1):this.counter=0)):(this.counter--,this.counter===-1&&(this.yoyo?(this._direction=0,this.counter=0):this.counter=this._length-1));var a=this.points[this.counter];a&&(r.x=a.x,r.y=a.y)}});e.exports=o},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){for(var r=0;r<o.length;r++)if(n.hasOwnProperty(o[r]))return!0;return!1};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(3),r=new n({initialize:function(l){this.source=l,this._tempVec=new o},getPoint:function(a){var l=this._tempVec;this.source.getRandomPoint(l),a.x=l.x,a.y=l.y}});e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(11),r=i(73),a=new n({Extends:r,Mixins:[o.PathFollower],initialize:function(h,u,v,d,c,p){r.call(this,h,v,d,c,p),this.path=u},preUpdate:function(l,h){this.anims.update(l,h),this.pathUpdate(l)}});e.exports=a},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r){var a=n.canvas,l=n.context,h=n.style,u=[],v=0,d=r.length;h.maxLines>0&&h.maxLines<r.length&&(d=h.maxLines),h.syncFont(a,l);for(var c=0;c<d;c++){var p=h.strokeThickness;p+=l.measureText(r[c]).width,h.wordWrap&&(p-=l.measureText(" ").width),u[c]=Math.ceil(p),v=Math.max(v,u[c])}var g=o.fontSize+h.strokeThickness,m=g*d,x=n.lineSpacing;return d>1&&(m+=x*(d-1)),{width:v,height:m,lines:d,lineWidths:u,lineSpacing:x,lineHeight:g}};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(13),r=i(6),a=i(460),l={fontFamily:["fontFamily","Courier"],fontSize:["fontSize","16px"],fontStyle:["fontStyle",""],backgroundColor:["backgroundColor",null],color:["color","#fff"],stroke:["stroke","#fff"],strokeThickness:["strokeThickness",0],shadowOffsetX:["shadow.offsetX",0],shadowOffsetY:["shadow.offsetY",0],shadowColor:["shadow.color","#000"],shadowBlur:["shadow.blur",0],shadowStroke:["shadow.stroke",!1],shadowFill:["shadow.fill",!1],align:["align","left"],maxLines:["maxLines",0],fixedWidth:["fixedWidth",0],fixedHeight:["fixedHeight",0],resolution:["resolution",0],rtl:["rtl",!1],testString:["testString","|M\xC3\u2030qgy"],baselineX:["baselineX",1.2],baselineY:["baselineY",1.4],wordWrapWidth:["wordWrap.width",null],wordWrapCallback:["wordWrap.callback",null],wordWrapCallbackScope:["wordWrap.callbackScope",null],wordWrapUseAdvanced:["wordWrap.useAdvancedWrap",!1]},h=new n({initialize:function(v,d){this.parent=v,this.fontFamily,this.fontSize,this.fontStyle,this.backgroundColor,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.align,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.rtl,this.testString,this.baselineX,this.baselineY,this.wordWrapWidth,this.wordWrapCallback,this.wordWrapCallbackScope,this.wordWrapUseAdvanced,this._font,this.setStyle(d,!1,!0);var c=r(d,"metrics",!1);c?this.metrics={ascent:r(c,"ascent",0),descent:r(c,"descent",0),fontSize:r(c,"fontSize",0)}:this.metrics=a(this)},setStyle:function(u,v,d){v===void 0&&(v=!0),d===void 0&&(d=!1),u&&u.hasOwnProperty("fontSize")&&typeof u.fontSize=="number"&&(u.fontSize=u.fontSize.toString()+"px");for(var c in l){var p=d?l[c][1]:this[c];c==="wordWrapCallback"||c==="wordWrapCallbackScope"?this[c]=r(u,l[c][0],p):this[c]=o(u,l[c][0],p)}var g=r(u,"font",null);g!==null&&this.setFont(g,!1),this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim();var m=r(u,"fill",null);return m!==null&&(this.color=m),v?this.update(!0):this.parent},syncFont:function(u,v){v.font=this._font},syncStyle:function(u,v){v.textBaseline="alphabetic",v.fillStyle=this.color,v.strokeStyle=this.stroke,v.lineWidth=this.strokeThickness,v.lineCap="round",v.lineJoin="round"},syncShadow:function(u,v){v?(u.shadowOffsetX=this.shadowOffsetX,u.shadowOffsetY=this.shadowOffsetY,u.shadowColor=this.shadowColor,u.shadowBlur=this.shadowBlur):(u.shadowOffsetX=0,u.shadowOffsetY=0,u.shadowColor=0,u.shadowBlur=0)},update:function(u){return u&&(this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim(),this.metrics=a(this)),this.parent.updateText()},setFont:function(u,v){v===void 0&&(v=!0);var d=u,c="",p="";if(typeof u!="string")d=r(u,"fontFamily","Courier"),c=r(u,"fontSize","16px"),p=r(u,"fontStyle","");else{var g=u.split(" "),m=0;p=g.length>2?g[m++]:"",c=g[m++]||"16px",d=g[m++]||"Courier"}return(d!==this.fontFamily||c!==this.fontSize||p!==this.fontStyle)&&(this.fontFamily=d,this.fontSize=c,this.fontStyle=p,v&&this.update(!0)),this.parent},setFontFamily:function(u){return this.fontFamily!==u&&(this.fontFamily=u,this.update(!0)),this.parent},setFontStyle:function(u){return this.fontStyle!==u&&(this.fontStyle=u,this.update(!0)),this.parent},setFontSize:function(u){return typeof u=="number"&&(u=u.toString()+"px"),this.fontSize!==u&&(this.fontSize=u,this.update(!0)),this.parent},setTestString:function(u){return this.testString=u,this.update(!0)},setFixedSize:function(u,v){return this.fixedWidth=u,this.fixedHeight=v,u&&(this.parent.width=u),v&&(this.parent.height=v),this.update(!1)},setBackgroundColor:function(u){return this.backgroundColor=u,this.update(!1)},setFill:function(u){return this.color=u,this.update(!1)},setColor:function(u){return this.color=u,this.update(!1)},setResolution:function(u){return this.resolution=u,this.update(!1)},setStroke:function(u,v){return v===void 0&&(v=this.strokeThickness),u===void 0&&this.strokeThickness!==0?(this.strokeThickness=0,this.update(!0)):(this.stroke!==u||this.strokeThickness!==v)&&(this.stroke=u,this.strokeThickness=v,this.update(!0)),this.parent},setShadow:function(u,v,d,c,p,g){return u===void 0&&(u=0),v===void 0&&(v=0),d===void 0&&(d="#000"),c===void 0&&(c=0),p===void 0&&(p=!1),g===void 0&&(g=!0),this.shadowOffsetX=u,this.shadowOffsetY=v,this.shadowColor=d,this.shadowBlur=c,this.shadowStroke=p,this.shadowFill=g,this.update(!1)},setShadowOffset:function(u,v){return u===void 0&&(u=0),v===void 0&&(v=u),this.shadowOffsetX=u,this.shadowOffsetY=v,this.update(!1)},setShadowColor:function(u){return u===void 0&&(u="#000"),this.shadowColor=u,this.update(!1)},setShadowBlur:function(u){return u===void 0&&(u=0),this.shadowBlur=u,this.update(!1)},setShadowStroke:function(u){return this.shadowStroke=u,this.update(!1)},setShadowFill:function(u){return this.shadowFill=u,this.update(!1)},setWordWrapWidth:function(u,v){return v===void 0&&(v=!1),this.wordWrapWidth=u,this.wordWrapUseAdvanced=v,this.update(!1)},setWordWrapCallback:function(u,v){return v===void 0&&(v=null),this.wordWrapCallback=u,this.wordWrapCallbackScope=v,this.update(!1)},setAlign:function(u){return u===void 0&&(u="left"),this.align=u,this.update(!1)},setMaxLines:function(u){return u===void 0&&(u=0),this.maxLines=u,this.update(!1)},getTextMetrics:function(){var u=this.metrics;return{ascent:u.ascent,descent:u.descent,fontSize:u.fontSize}},toJSON:function(){var u={};for(var v in l)u[v]=this[v];return u.metrics=this.getTextMetrics(),u},destroy:function(){this.parent=void 0}});e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(31),o=function(r){var a=n.create(this),l=a.getContext("2d");r.syncFont(a,l);var h=l.measureText(r.testString);if("actualBoundingBoxAscent"in h){var u=h.actualBoundingBoxAscent,v=h.actualBoundingBoxDescent;return n.remove(a),{ascent:u,descent:v,fontSize:u+v}}var d=Math.ceil(h.width*r.baselineX),c=d,p=2*c;c=c*r.baselineY|0,a.width=d,a.height=p,l.fillStyle="#f00",l.fillRect(0,0,d,p),l.font=r._font,l.textBaseline="alphabetic",l.fillStyle="#000",l.fillText(r.testString,0,c);var g={ascent:0,descent:0,fontSize:0},m=l.getImageData(0,0,d,p);if(!m)return g.ascent=c,g.descent=c+6,g.fontSize=g.ascent+g.descent,n.remove(a),g;var x=m.data,y=x.length,T=d*4,C,S,E=0,M=!1;for(C=0;C<c;C++){for(S=0;S<T;S+=4)if(x[E+S]!==255){M=!0;break}if(!M)E+=T;else break}for(g.ascent=c-C,E=y-T,M=!1,C=p;C>c;C--){for(S=0;S<T;S+=4)if(x[E+S]!==255){M=!0;break}if(!M)E-=T;else break}return g.descent=C-c,g.fontSize=g.ascent+g.descent,n.remove(a),g};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1097),o=i(0),r=i(36),a=i(59),l=i(65),h=i(14),u=i(34),v=new o({Extends:u,Mixins:[n],initialize:function(c,p,g,m,x,y,T,C,S){p===void 0&&(p=0),g===void 0&&(g=0),m===void 0&&(m=128),x===void 0&&(x=0),y===void 0&&(y=360),T===void 0&&(T=!1),u.call(this,c,"Arc",new l(0,0,m)),this._startAngle=x,this._endAngle=y,this._anticlockwise=T,this._iterations=.01,this.setPosition(p,g);var E=this.geom.radius*2;this.setSize(E,E),C!==void 0&&this.setFillStyle(C,S),this.updateDisplayOrigin(),this.updateData()},iterations:{get:function(){return this._iterations},set:function(d){this._iterations=d,this.updateData()}},radius:{get:function(){return this.geom.radius},set:function(d){this.geom.radius=d;var c=d*2;this.setSize(c,c),this.updateDisplayOrigin(),this.updateData()}},startAngle:{get:function(){return this._startAngle},set:function(d){this._startAngle=d,this.updateData()}},endAngle:{get:function(){return this._endAngle},set:function(d){this._endAngle=d,this.updateData()}},anticlockwise:{get:function(){return this._anticlockwise},set:function(d){this._anticlockwise=d,this.updateData()}},setRadius:function(d){return this.radius=d,this},setIterations:function(d){return d===void 0&&(d=.01),this.iterations=d,this},setStartAngle:function(d,c){return this._startAngle=d,c!==void 0&&(this._anticlockwise=c),this.updateData()},setEndAngle:function(d,c){return this._endAngle=d,c!==void 0&&(this._anticlockwise=c),this.updateData()},updateData:function(){var d=this._iterations,c=d,p=this.geom.radius,g=r(this._startAngle),m=r(this._endAngle),x=this._anticlockwise,y=p,T=p;m-=g,x?m<-h.PI2?m=-h.PI2:m>0&&(m=-h.PI2+m%h.PI2):m>h.PI2?m=h.PI2:m<0&&(m=h.PI2+m%h.PI2);for(var C=[y+Math.cos(g)*p,T+Math.sin(g)*p],S;c<1;)S=m*c+g,C.push(y+Math.cos(S)*p,T+Math.sin(S)*p),c+=d;return S=m+g,C.push(y+Math.cos(S)*p,T+Math.sin(S)*p),C.push(y+Math.cos(g)*p,T+Math.sin(g)*p),this.pathIndexes=a(C),this.pathData=C,this}});e.exports=v},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(1100),r=i(59),a=i(10),l=i(34),h=new n({Extends:l,Mixins:[o],initialize:function(v,d,c,p,g,m){d===void 0&&(d=0),c===void 0&&(c=0),l.call(this,v,"Curve",p),this._smoothness=32,this._curveBounds=new a,this.closePath=!1,this.setPosition(d,c),g!==void 0&&this.setFillStyle(g,m),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(u){this._smoothness=u,this.updateData()}},setSmoothness:function(u){return this._smoothness=u,this.updateData()},updateData:function(){var u=this._curveBounds,v=this._smoothness;this.geom.getBounds(u,v),this.setSize(u.width,u.height),this.updateDisplayOrigin();for(var d=[],c=this.geom.getPoints(v),p=0;p<c.length;p++)d.push(c[p].x,c[p].y);return d.push(c[0].x,c[0].y),this.pathIndexes=r(d),this.pathData=d,this}});e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(59),r=i(1103),a=i(111),l=i(34),h=new n({Extends:l,Mixins:[r],initialize:function(v,d,c,p,g,m,x){d===void 0&&(d=0),c===void 0&&(c=0),p===void 0&&(p=128),g===void 0&&(g=128),l.call(this,v,"Ellipse",new a(p/2,g/2,p,g)),this._smoothness=64,this.setPosition(d,c),this.width=p,this.height=g,m!==void 0&&this.setFillStyle(m,x),this.updateDisplayOrigin(),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(u){this._smoothness=u,this.updateData()}},setSize:function(u,v){return this.width=u,this.height=v,this.geom.setPosition(u/2,v/2),this.geom.setSize(u,v),this.updateData()},setSmoothness:function(u){return this._smoothness=u,this.updateData()},updateData:function(){for(var u=[],v=this.geom.getPoints(this._smoothness),d=0;d<v.length;d++)u.push(v[d].x,v[d].y);return u.push(v[0].x,v[0].y),this.pathIndexes=o(u),this.pathData=u,this}});e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(34),r=i(1106),a=new n({Extends:o,Mixins:[r],initialize:function(h,u,v,d,c,p,g,m,x,y,T){u===void 0&&(u=0),v===void 0&&(v=0),d===void 0&&(d=128),c===void 0&&(c=128),p===void 0&&(p=32),g===void 0&&(g=32),o.call(this,h,"Grid",null),this.cellWidth=p,this.cellHeight=g,this.showCells=!0,this.outlineFillColor=0,this.outlineFillAlpha=0,this.showOutline=!0,this.showAltCells=!1,this.altFillColor,this.altFillAlpha,this.setPosition(u,v),this.setSize(d,c),this.setFillStyle(m,x),y!==void 0&&this.setOutlineStyle(y,T),this.updateDisplayOrigin()},setFillStyle:function(l,h){return h===void 0&&(h=1),l===void 0?this.showCells=!1:(this.fillColor=l,this.fillAlpha=h,this.showCells=!0),this},setAltFillStyle:function(l,h){return h===void 0&&(h=1),l===void 0?this.showAltCells=!1:(this.altFillColor=l,this.altFillAlpha=h,this.showAltCells=!0),this},setOutlineStyle:function(l,h){return h===void 0&&(h=1),l===void 0?this.showOutline=!1:(this.outlineFillColor=l,this.outlineFillAlpha=h,this.showOutline=!0),this}});e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1109),o=i(0),r=i(34),a=new o({Extends:r,Mixins:[n],initialize:function(h,u,v,d,c,p,g,m){u===void 0&&(u=0),v===void 0&&(v=0),d===void 0&&(d=48),c===void 0&&(c=32),p===void 0&&(p=15658734),g===void 0&&(g=10066329),m===void 0&&(m=13421772),r.call(this,h,"IsoBox",null),this.projection=4,this.fillTop=p,this.fillLeft=g,this.fillRight=m,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isFilled=!0,this.setPosition(u,v),this.setSize(d,c),this.updateDisplayOrigin()},setProjection:function(l){return this.projection=l,this},setFaces:function(l,h,u){return l===void 0&&(l=!0),h===void 0&&(h=!0),u===void 0&&(u=!0),this.showTop=l,this.showLeft=h,this.showRight=u,this},setFillStyle:function(l,h,u){return this.fillTop=l,this.fillLeft=h,this.fillRight=u,this.isFilled=!0,this}});e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(1112),r=i(34),a=new n({Extends:r,Mixins:[o],initialize:function(h,u,v,d,c,p,g,m,x){u===void 0&&(u=0),v===void 0&&(v=0),d===void 0&&(d=48),c===void 0&&(c=32),p===void 0&&(p=!1),g===void 0&&(g=15658734),m===void 0&&(m=10066329),x===void 0&&(x=13421772),r.call(this,h,"IsoTriangle",null),this.projection=4,this.fillTop=g,this.fillLeft=m,this.fillRight=x,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isReversed=p,this.isFilled=!0,this.setPosition(u,v),this.setSize(d,c),this.updateDisplayOrigin()},setProjection:function(l){return this.projection=l,this},setReversed:function(l){return this.isReversed=l,this},setFaces:function(l,h,u){return l===void 0&&(l=!0),h===void 0&&(h=!0),u===void 0&&(u=!0),this.showTop=l,this.showLeft=h,this.showRight=u,this},setFillStyle:function(l,h,u){return this.fillTop=l,this.fillLeft=h,this.fillRight=u,this.isFilled=!0,this}});e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(34),r=i(47),a=i(1115),l=new n({Extends:o,Mixins:[a],initialize:function(u,v,d,c,p,g,m,x,y){v===void 0&&(v=0),d===void 0&&(d=0),c===void 0&&(c=0),p===void 0&&(p=0),g===void 0&&(g=128),m===void 0&&(m=0),o.call(this,u,"Line",new r(c,p,g,m));var T=Math.max(1,this.geom.right-this.geom.left),C=Math.max(1,this.geom.bottom-this.geom.top);this.lineWidth=1,this._startWidth=1,this._endWidth=1,this.setPosition(v,d),this.setSize(T,C),x!==void 0&&this.setStrokeStyle(1,x,y),this.updateDisplayOrigin()},setLineWidth:function(h,u){return u===void 0&&(u=h),this._startWidth=h,this._endWidth=u,this.lineWidth=h,this},setTo:function(h,u,v,d){return this.geom.setTo(h,u,v,d),this}});e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1118),o=i(0),r=i(59),a=i(469),l=i(227),h=i(34),u=i(472),v=new o({Extends:h,Mixins:[n],initialize:function(c,p,g,m,x,y){p===void 0&&(p=0),g===void 0&&(g=0),h.call(this,c,"Polygon",new l(m));var T=a(this.geom);this.setPosition(p,g),this.setSize(T.width,T.height),x!==void 0&&this.setFillStyle(x,y),this.updateDisplayOrigin(),this.updateData()},smooth:function(d){d===void 0&&(d=1);for(var c=0;c<d;c++)u(this.geom);return this.updateData()},updateData:function(){for(var d=[],c=this.geom.points,p=0;p<c.length;p++)d.push(c[p].x,c[p].y);return d.push(c[0].x,c[0].y),this.pathIndexes=r(d),this.pathData=d,this}});e.exports=v},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(10),o=function(r,a){a===void 0&&(a=new n);for(var l=1/0,h=1/0,u=-l,v=-h,d,c=0;c<r.points.length;c++)d=r.points[c],l=Math.min(l,d.x),h=Math.min(h,d.y),u=Math.max(u,d.x),v=Math.max(v,d.y);return a.x=l,a.y=h,a.width=u-l,a.height=v-h,a};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(67),o=i(47),r=i(471),a=function(l,h,u,v){v===void 0&&(v=[]);var d=l.points,c=r(l);!h&&u>0&&(h=c/u);for(var p=0;p<h;p++)for(var g=c*(p/h),m=0,x=0;x<d.length;x++){var y=d[x],T=d[(x+1)%d.length],C=new o(y.x,y.y,T.x,T.y),S=n(C);if(g<m||g>m+S){m+=S;continue}var E=C.getPoint((g-m)/S);v.push(E);break}return v};e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(67),o=i(47),r=function(a){for(var l=a.points,h=0,u=0;u<l.length;u++){var v=l[u],d=l[(u+1)%l.length],c=new o(v.x,v.y,d.x,d.y);h+=n(c)}return h};e.exports=r},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Igor Ognichenko <ognichenko.igor@gmail.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(o,r){return o[0]=r[0],o[1]=r[1],o},n=function(o){var r,a=[],l=o.points;for(r=0;r<l.length;r++)a.push([l[r].x,l[r].y]);var h=[];for(a.length>0&&h.push(i([0,0],a[0])),r=0;r<a.length-1;r++){var u=a[r],v=a[r+1],d=u[0],c=u[1],p=v[0],g=v[1];h.push([.85*d+.15*p,.85*c+.15*g]),h.push([.15*d+.85*p,.15*c+.85*g])}return a.length>1&&h.push(i([0,0],a[a.length-1])),o.setTo(h)};e.exports=n},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(10),r=i(34),a=i(1121),l=new n({Extends:r,Mixins:[a],initialize:function(u,v,d,c,p,g,m){v===void 0&&(v=0),d===void 0&&(d=0),c===void 0&&(c=128),p===void 0&&(p=128),r.call(this,u,"Rectangle",new o(0,0,c,p)),this.setPosition(v,d),this.setSize(c,p),g!==void 0&&this.setFillStyle(g,m),this.updateDisplayOrigin(),this.updateData()},setSize:function(h,u){return this.width=h,this.height=u,this.geom.setSize(h,u),this.updateData(),this},updateData:function(){var h=[],u=this.geom,v=this._tempLine;return u.getLineA(v),h.push(v.x1,v.y1,v.x2,v.y2),u.getLineB(v),h.push(v.x2,v.y2),u.getLineC(v),h.push(v.x2,v.y2),u.getLineD(v),h.push(v.x2,v.y2),this.pathData=h,this}});e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1124),o=i(0),r=i(59),a=i(34),l=new o({Extends:a,Mixins:[n],initialize:function(u,v,d,c,p,g,m,x){v===void 0&&(v=0),d===void 0&&(d=0),c===void 0&&(c=5),p===void 0&&(p=32),g===void 0&&(g=64),a.call(this,u,"Star",null),this._points=c,this._innerRadius=p,this._outerRadius=g,this.setPosition(v,d),this.setSize(g*2,g*2),m!==void 0&&this.setFillStyle(m,x),this.updateDisplayOrigin(),this.updateData()},setPoints:function(h){return this._points=h,this.updateData()},setInnerRadius:function(h){return this._innerRadius=h,this.updateData()},setOuterRadius:function(h){return this._outerRadius=h,this.updateData()},points:{get:function(){return this._points},set:function(h){this._points=h,this.updateData()}},innerRadius:{get:function(){return this._innerRadius},set:function(h){this._innerRadius=h,this.updateData()}},outerRadius:{get:function(){return this._outerRadius},set:function(h){this._outerRadius=h,this.updateData()}},updateData:function(){var h=[],u=this._points,v=this._innerRadius,d=this._outerRadius,c=Math.PI/2*3,p=Math.PI/u,g=d,m=d;h.push(g,m+-d);for(var x=0;x<u;x++)h.push(g+Math.cos(c)*d,m+Math.sin(c)*d),c+=p,h.push(g+Math.cos(c)*v,m+Math.sin(c)*v),c+=p;return h.push(g,m+-d),this.pathIndexes=r(h),this.pathData=h,this}});e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(34),r=i(82),a=i(1127),l=new n({Extends:o,Mixins:[a],initialize:function(u,v,d,c,p,g,m,x,y,T,C){v===void 0&&(v=0),d===void 0&&(d=0),c===void 0&&(c=0),p===void 0&&(p=128),g===void 0&&(g=64),m===void 0&&(m=0),x===void 0&&(x=128),y===void 0&&(y=128),o.call(this,u,"Triangle",new r(c,p,g,m,x,y));var S=this.geom.right-this.geom.left,E=this.geom.bottom-this.geom.top;this.setPosition(v,d),this.setSize(S,E),T!==void 0&&this.setFillStyle(T,C),this.updateDisplayOrigin(),this.updateData()},setTo:function(h,u,v,d,c,p){return this.geom.setTo(h,u,v,d,c,p),this.updateData()},updateData:function(){var h=[],u=this.geom,v=this._tempLine;return u.getLineA(v),h.push(v.x1,v.y1,v.x2,v.y2),u.getLineB(v),h.push(v.x2,v.y2),u.getLineC(v),h.push(v.x2,v.y2),this.pathData=h,this}});e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4),o=i(67),r=function(a,l,h){h===void 0&&(h=new n);var u=a.getLineA(),v=a.getLineB(),d=a.getLineC();if(l<=0||l>=1)return h.x=u.x1,h.y=u.y1,h;var c=o(u),p=o(v),g=o(d),m=c+p+g,x=m*l,y=0;return x<c?(y=x/c,h.x=u.x1+(u.x2-u.x1)*y,h.y=u.y1+(u.y2-u.y1)*y):x>c+p?(x-=c+p,y=x/g,h.x=d.x1+(d.x2-d.x1)*y,h.y=d.y1+(d.y2-d.y1)*y):(x-=c,y=x/p,h.x=v.x1+(v.x2-v.x1)*y,h.y=v.y1+(v.y2-v.y1)*y),h};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(67),o=i(4),r=function(a,l,h,u){u===void 0&&(u=[]);var v=a.getLineA(),d=a.getLineB(),c=a.getLineC(),p=n(v),g=n(d),m=n(c),x=p+g+m;!l&&h>0&&(l=x/h);for(var y=0;y<l;y++){var T=x*(y/l),C=0,S=new o;T<p?(C=T/p,S.x=v.x1+(v.x2-v.x1)*C,S.y=v.y1+(v.y2-v.y1)*C):T>p+g?(T-=p+g,C=T/m,S.x=c.x1+(c.x2-c.x1)*C,S.y=c.y1+(c.y2-c.y1)*C):(T-=p,C=T/g,S.x=d.x1+(d.x2-d.x1)*C,S.y=d.y1+(d.y2-d.y1)*C),u.push(S)}return u};e.exports=r},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r){if(!n||typeof n=="number")return!1;if(n.hasOwnProperty(o))return n[o]=r,!0;if(o.indexOf(".")!==-1){for(var a=o.split("."),l=n,h=n,u=0;u<a.length;u++)if(l.hasOwnProperty(a[u]))h=l,l=l[a[u]];else return!1;return h[a[a.length-1]]=r,!0}return!1};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(116),o=i(117),r=function(a,l,h,u,v,d,c){if(u===void 0&&(u=!1),d===void 0&&(d=16777215),c===void 0&&(c=1),a.length!==l.length){console.warn("GenerateVerts: vertices and uvs count not equal");return}var p={faces:[],vertices:[]},g,m,x,y,T,C,S,E,M,O,L,R=u?3:2,w=Array.isArray(d),D=Array.isArray(c);if(Array.isArray(h)&&h.length>0)for(g=0;g<h.length;g++){var B=h[g],N=h[g]*2,z=h[g]*R;m=a[z],x=a[z+1],y=u?a[z+2]:0,T=l[N],C=l[N+1],S=w?d[B]:d,E=D?c[B]:c,M=0,O=0,L=0,v&&(M=v[z],O=v[z+1],L=u?v[z+2]:0),p.vertices.push(new o(m,x,y,T,C,S,E,M,O,L))}else{var X=0,k=0;for(g=0;g<a.length;g+=R)m=a[g],x=a[g+1],y=u?a[g+2]:0,T=l[X],C=l[X+1],S=w?d[k]:d,E=D?c[k]:c,M=0,O=0,L=0,v&&(M=v[g],O=v[g+1],L=u?v[g+2]:0),p.vertices.push(new o(m,x,y,T,C,S,E,M,O,L)),X+=2,k++}for(g=0;g<p.vertices.length;g+=3){var K=p.vertices[g],b=p.vertices[g+1],I=p.vertices[g+2];p.faces.push(new n(K,b,I))}return p};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(116),o=i(69),r=i(39),a=i(117),l=new r,h=new r,u=new o,v=function(d,c,p,g,m,x,y,T,C,S){p===void 0&&(p=1),g===void 0&&(g=0),m===void 0&&(m=0),x===void 0&&(x=0),y===void 0&&(y=0),T===void 0&&(T=0),C===void 0&&(C=0),S===void 0&&(S=!0);var E={faces:[],verts:[]},M=d.materials;l.set(g,m,x),h.set(y,T,C),u.fromRotationXYTranslation(h,l,S);for(var O=0;O<d.models.length;O++)for(var L=d.models[O],R=L.vertices,w=L.textureCoords,D=L.faces,B=0;B<D.length;B++){var N=D[B],z=N.vertices[0],X=N.vertices[1],k=N.vertices[2],K=R[z.vertexIndex],b=R[X.vertexIndex],I=R[k.vertexIndex],G=z.textureCoordsIndex,Y=X.textureCoordsIndex,U=k.textureCoordsIndex,W=G===-1?{u:0,v:1}:w[G],H=Y===-1?{u:0,v:0}:w[Y],Z=U===-1?{u:1,v:1}:w[U],q=16777215;N.material!==""&&M[N.material]&&(q=M[N.material]);var _=new a(K.x*p,K.y*p,K.z*p,W.u,W.v,q).transformMat4(u),nt=new a(b.x*p,b.y*p,b.z*p,H.u,H.v,q).transformMat4(u),rt=new a(I.x*p,I.y*p,I.z*p,Z.u,Z.v,q).transformMat4(u);E.verts.push(_,nt,rt),E.faces.push(new n(_,nt,rt))}return c&&(c.faces=c.faces.concat(E.faces),c.vertices=c.vertices.concat(E.verts)),E};e.exports=v},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(65),o=i(0),r=i(11),a=i(200),l=i(12),h=new o({Extends:n,Mixins:[r.ScrollFactor,r.Visible],initialize:function(v,d,c,p,g,m,x){n.call(this,v,d,c),this.color=new a(p,g,m),this.intensity=x,this.renderFlags=15,this.cameraFilter=0,this.setScrollFactor(1,1)},willRender:function(u){return!(h.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&u.id)},setColor:function(u){var v=l.getFloatsFromUintRGB(u);return this.color.set(v[0],v[1],v[2]),this},setIntensity:function(u){return this.intensity=u,this},setRadius:function(u){return this.radius=u,this}});h.RENDER_MASK=15,e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(151),o=i(0),r=i(50),a=i(481),l=i(150),h=i(200),u=i(74),v=i(79),d=i(12),c=new o({initialize:function(){this.lights=[],this.ambientColor=new h(.1,.1,.1),this.active=!1,this.maxLights=-1,this.visibleLights=0},addPointLight:function(p,g,m,x,y,T){return this.systems.displayList.add(new l(this.scene,p,g,m,x,y,T))},enable:function(){return this.maxLights===-1&&(this.maxLights=this.systems.renderer.config.maxLights),this.active=!0,this},disable:function(){return this.active=!1,this},getLights:function(p){for(var g=this.lights,m=p.worldView,x=[],y=0;y<g.length;y++){var T=g[y];T.willRender(p)&&n(T,m)&&x.push({light:T,distance:r(T.x,T.y,m.centerX,m.centerY)})}return x.length>this.maxLights&&(v(x,this.sortByDistance),x=x.slice(0,this.maxLights)),this.visibleLights=x.length,x},sortByDistance:function(p,g){return p.distance>=g.distance},setAmbientColor:function(p){var g=d.getFloatsFromUintRGB(p);return this.ambientColor.set(g[0],g[1],g[2]),this},getMaxVisibleLights:function(){return this.maxLights},getLightCount:function(){return this.lights.length},addLight:function(p,g,m,x,y){p===void 0&&(p=0),g===void 0&&(g=0),m===void 0&&(m=128),x===void 0&&(x=16777215),y===void 0&&(y=1);var T=d.getFloatsFromUintRGB(x),C=new a(p,g,m,T[0],T[1],T[2],y);return this.lights.push(C),C},removeLight:function(p){var g=this.lights.indexOf(p);return g>=0&&u(this.lights,g),this},shutdown:function(){this.lights.length=0},destroy:function(){this.shutdown()}});e.exports=c},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(56),o=i(17),r={Circle:i(1191),Ellipse:i(1201),Intersects:i(484),Line:i(1221),Mesh:i(1243),Point:i(1246),Polygon:i(1260),Rectangle:i(502),Triangle:i(1293)};r=o(!1,r,n),e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={CircleToCircle:i(231),CircleToRectangle:i(151),GetCircleToCircle:i(1211),GetCircleToRectangle:i(1212),GetLineToCircle:i(232),GetLineToLine:i(485),GetLineToPoints:i(486),GetLineToPolygon:i(487),GetLineToRectangle:i(234),GetRaysFromPointToPolygon:i(1213),GetRectangleIntersection:i(1214),GetRectangleToRectangle:i(1215),GetRectangleToTriangle:i(1216),GetTriangleToCircle:i(1217),GetTriangleToLine:i(492),GetTriangleToTriangle:i(1218),LineToCircle:i(233),LineToLine:i(96),LineToRectangle:i(488),PointToLine:i(496),PointToLineSegment:i(1219),RectangleToRectangle:i(152),RectangleToTriangle:i(489),RectangleToValues:i(1220),TriangleToCircle:i(491),TriangleToLine:i(493),TriangleToTriangle:i(494)}},function(e,f,i){/**
 * @author       Richard Davey
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(39),o=function(r,a,l){var h=r.x1,u=r.y1,v=r.x2,d=r.y2,c=a.x1,p=a.y1,g=a.x2,m=a.y2,x=v-h,y=d-u,T=g-c,C=m-p,S=C*x-T*y;if(x===0||S===0)return!1;var E=(x*(p-u)+y*(h-c))/(T*y-C*x),M=(c+T*E-h)/x;return M<0||E<0||E>1?null:(l===void 0&&(l=new n),l.set(h+x*M,u+y*M,M))};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(39),o=i(485),r=i(47),a=new r,l=new n,h=function(u,v,d){d===void 0&&(d=new n);var c=!1;d.set(),l.set();for(var p=v[0],g=1;g<v.length;g++){var m=v[g];a.setTo(p.x,p.y,m.x,m.y),p=m,o(u,a,l)&&(!c||l.z<d.z)&&(d.copy(l),c=!0)}return c?d:null};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(39),o=i(140),r=i(486),a=new n,l=function(h,u,v){v===void 0&&(v=new o),Array.isArray(u)||(u=[u]);var d=!1;v.set(),a.set();for(var c=0;c<u.length;c++)r(h,u[c].points,a)&&(!d||a.z<v.z)&&(v.set(a.x,a.y,a.z,c),d=!0);return d?v:null};e.exports=l},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){var r=n.x1,a=n.y1,l=n.x2,h=n.y2,u=o.x,v=o.y,d=o.right,c=o.bottom,p=0;if(r>=u&&r<=d&&a>=v&&a<=c||l>=u&&l<=d&&h>=v&&h<=c)return!0;if(r<u&&l>=u){if(p=a+(h-a)*(u-r)/(l-r),p>v&&p<=c)return!0}else if(r>d&&l<=d&&(p=a+(h-a)*(d-r)/(l-r),p>=v&&p<=c))return!0;if(a<v&&h>=v){if(p=r+(l-r)*(v-a)/(h-a),p>=u&&p<=d)return!0}else if(a>c&&h<=c&&(p=r+(l-r)*(c-a)/(h-a),p>=u&&p<=d))return!0;return!1};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(96),o=i(57),r=i(235),a=i(490),l=function(h,u){if(u.left>h.right||u.right<h.left||u.top>h.bottom||u.bottom<h.top)return!1;var v=u.getLineA(),d=u.getLineB(),c=u.getLineC();if(o(h,v.x1,v.y1)||o(h,v.x2,v.y2)||o(h,d.x1,d.y1)||o(h,d.x2,d.y2)||o(h,c.x1,c.y1)||o(h,c.x2,c.y2))return!0;var p=h.getLineA(),g=h.getLineB(),m=h.getLineC(),x=h.getLineD();if(n(v,p)||n(v,g)||n(v,m)||n(v,x)||n(d,p)||n(d,g)||n(d,m)||n(d,x)||n(c,p)||n(c,g)||n(c,m)||n(c,x))return!0;var y=a(h),T=r(u,y,!0);return T.length>0};e.exports=l},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return o===void 0&&(o=[]),o.push({x:n.x,y:n.y}),o.push({x:n.right,y:n.y}),o.push({x:n.right,y:n.bottom}),o.push({x:n.x,y:n.bottom}),o};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(233),o=i(115),r=function(a,l){return a.left>l.right||a.right<l.left||a.top>l.bottom||a.bottom<l.top?!1:!!(o(a,l.x,l.y)||n(a.getLineA(),l)||n(a.getLineB(),l)||n(a.getLineC(),l))};e.exports=r},function(e,f,i){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4),o=i(493),r=i(96),a=function(l,h,u){if(u===void 0&&(u=[]),o(l,h))for(var v=l.getLineA(),d=l.getLineB(),c=l.getLineC(),p=[new n,new n,new n],g=[r(v,h,p[0]),r(d,h,p[1]),r(c,h,p[2])],m=0;m<3;m++)g[m]&&u.push(p[m]);return u};e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(96),o=function(r,a){return!!(r.contains(a.x1,a.y1)||r.contains(a.x2,a.y2)||n(r.getLineA(),a)||n(r.getLineB(),a)||n(r.getLineC(),a))};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(235),o=i(495),r=i(96),a=function(l,h){if(l.left>h.right||l.right<h.left||l.top>h.bottom||l.bottom<h.top)return!1;var u=l.getLineA(),v=l.getLineB(),d=l.getLineC(),c=h.getLineA(),p=h.getLineB(),g=h.getLineC();if(r(u,c)||r(u,p)||r(u,g)||r(v,c)||r(v,p)||r(v,g)||r(d,c)||r(d,p)||r(d,g))return!0;var m=o(l),x=n(h,m,!0);return x.length>0||(m=o(h),x=n(l,m,!0),x.length>0)};e.exports=a},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return o===void 0&&(o=[]),o.push({x:n.x1,y:n.y1}),o.push({x:n.x2,y:n.y2}),o.push({x:n.x3,y:n.y3}),o};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Florian Mertens
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r){r===void 0&&(r=1);var a=o.x1,l=o.y1,h=o.x2,u=o.y2,v=n.x,d=n.y,c=(h-a)*(h-a)+(u-l)*(u-l);if(c===0)return!1;var p=((v-a)*(h-a)+(d-l)*(u-l))/c;if(p<0)return Math.sqrt((a-v)*(a-v)+(l-d)*(l-d))<=r;if(p>=0&&p<=1){var g=((l-d)*(h-a)-(a-v)*(u-l))/c;return Math.abs(g)*Math.sqrt(c)<=r}else return Math.sqrt((h-v)*(h-v)+(u-d)*(u-d))<=r};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(14),o=i(68),r=i(97),a=function(l){var h=r(l)-n.TAU;return o(h,-Math.PI,Math.PI)};e.exports=a},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=!0,n="untitled",o="",r="";function a(y){var T=y.indexOf("#");return T>-1?y.substring(0,T):y}function l(y){return y.models.length===0&&y.models.push({faces:[],name:n,textureCoords:[],vertexNormals:[],vertices:[]}),o="",y.models[y.models.length-1]}function h(y,T){var C=y.length>=2?y[1]:n;T.models.push({faces:[],name:C,textureCoords:[],vertexNormals:[],vertices:[]}),o=""}function u(y){y.length===2&&(o=y[1])}function v(y,T){var C=y.length,S=C>=2?parseFloat(y[1]):0,E=C>=3?parseFloat(y[2]):0,M=C>=4?parseFloat(y[3]):0;l(T).vertices.push({x:S,y:E,z:M})}function d(y,T){var C=y.length,S=C>=2?parseFloat(y[1]):0,E=C>=3?parseFloat(y[2]):0,M=C>=4?parseFloat(y[3]):0;isNaN(S)&&(S=0),isNaN(E)&&(E=0),isNaN(M)&&(M=0),i&&(E=1-E),l(T).textureCoords.push({u:S,v:E,w:M})}function c(y,T){var C=y.length,S=C>=2?parseFloat(y[1]):0,E=C>=3?parseFloat(y[2]):0,M=C>=4?parseFloat(y[3]):0;l(T).vertexNormals.push({x:S,y:E,z:M})}function p(y,T){var C=y.length-1;if(!(C<3)){for(var S={group:o,material:r,vertices:[]},E=0;E<C;E++){var M=y[E+1],O=M.split("/"),L=O.length;if(!(L<1||L>3)){var R=0,w=0,D=0;R=parseInt(O[0],10),L>1&&O[1]!==""&&(w=parseInt(O[1],10)),L>2&&(D=parseInt(O[2],10)),R!==0&&(R<0&&(R=l(T).vertices.length+1+R),w-=1,R-=1,D-=1,S.vertices.push({textureCoordsIndex:w,vertexIndex:R,vertexNormalIndex:D}))}}l(T).faces.push(S)}}function g(y,T){y.length>=2&&T.materialLibraries.push(y[1])}function m(y){y.length>=2&&(r=y[1])}var x=function(y,T){T===void 0&&(T=!0),i=T;var C={materials:{},materialLibraries:[],models:[]};o="",r="";for(var S=y.split(`
`),E=0;E<S.length;E++){var M=a(S[E]),O=M.replace(/\s\s+/g," ").trim().split(" ");switch(O[0].toLowerCase()){case"o":h(O,C);break;case"g":u(O);break;case"v":v(O,C);break;case"vt":d(O,C);break;case"vn":c(O,C);break;case"f":p(O,C);break;case"mtllib":g(O,C);break;case"usemtl":m(O);break}}return C};e.exports=x},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(103),o=function(r){for(var a={},l=r.split(`
`),h="",u=0;u<l.length;u++){var v=l[u].trim();if(!(v.indexOf("#")===0||v==="")){var d=v.replace(/\s\s+/g," ").trim().split(" ");switch(d[0].toLowerCase()){case"newmtl":{h=d[1];break}case"kd":{var c=Math.floor(d[1]*255),p=d.length>=2?Math.floor(d[2]*255):c,g=d.length>=3?Math.floor(d[3]*255):c;a[h]=n(c,p,g);break}}}}return a};e.exports=o},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return Math.sqrt(n.x*n.x+n.y*n.y)};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n.x*n.x+n.y*n.y};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(10);n.Area=i(1267),n.Ceil=i(1268),n.CeilAll=i(1269),n.CenterOn=i(190),n.Clone=i(1270),n.Contains=i(57),n.ContainsPoint=i(1271),n.ContainsRect=i(503),n.CopyFrom=i(1272),n.Decompose=i(490),n.Equals=i(1273),n.FitInside=i(1274),n.FitOutside=i(1275),n.Floor=i(1276),n.FloorAll=i(1277),n.FromPoints=i(199),n.FromXY=i(1278),n.GetAspectRatio=i(237),n.GetCenter=i(1279),n.GetPoint=i(171),n.GetPoints=i(306),n.GetSize=i(1280),n.Inflate=i(1281),n.Intersection=i(1282),n.MarchingAnts=i(316),n.MergePoints=i(1283),n.MergeRect=i(1284),n.MergeXY=i(1285),n.Offset=i(1286),n.OffsetPoint=i(1287),n.Overlaps=i(1288),n.Perimeter=i(130),n.PerimeterPoint=i(1289),n.Random=i(174),n.RandomOutside=i(1290),n.SameDimensions=i(1291),n.Scale=i(1292),n.Union=i(441),e.exports=n},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return o.width*o.height>n.width*n.height?!1:o.x>n.x&&o.x<n.right&&o.right>n.x&&o.right<n.right&&o.y>n.y&&o.y<n.bottom&&o.bottom>n.y&&o.bottom<n.bottom};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4),o=function(r,a){return a===void 0&&(a=new n),a.x=(r.x1+r.x2+r.x3)/3,a.y=(r.y1+r.y2+r.y3)/3,a};e.exports=o},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r){return n.x1+=o,n.y1+=r,n.x2+=o,n.y2+=r,n.x3+=o,n.y3+=r,n};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4);function o(a,l,h,u){var v=a-h,d=l-u,c=v*v+d*d;return Math.sqrt(c)}var r=function(a,l){l===void 0&&(l=new n);var h=a.x1,u=a.y1,v=a.x2,d=a.y2,c=a.x3,p=a.y3,g=o(c,p,v,d),m=o(h,u,c,p),x=o(v,d,h,u),y=g+m+x;return l.x=(h*g+v*m+c*x)/y,l.y=(u*g+d*m+p*x)/y,l};e.exports=r},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return function(r,a,l,h){var u=n.getPixelAlpha(a,l,h.texture.key,h.frame.name);return u&&u>=o}};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r){return{gameObject:n,enabled:!0,alwaysEnabled:!1,draggable:!1,dropZone:!1,cursor:!1,target:null,camera:null,hitArea:o,hitAreaCallback:r,hitAreaDebug:null,customHitArea:!1,localX:0,localY:0,dragState:0,dragStartX:0,dragStartY:0,dragStartXGlobal:0,dragStartYGlobal:0,dragX:0,dragY:0}};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=new n({initialize:function(a,l){this.pad=a,this.events=a.events,this.index=l,this.value=0,this.threshold=.1},update:function(r){this.value=r},getValue:function(){return Math.abs(this.value)<this.threshold?0:this.value},destroy:function(){this.pad=null,this.events=null}});e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(239),r=new n({initialize:function(l,h){this.pad=l,this.events=l.manager,this.index=h,this.value=0,this.threshold=1,this.pressed=!1},update:function(a){this.value=a;var l=this.pad,h=this.index;a>=this.threshold?this.pressed||(this.pressed=!0,this.events.emit(o.BUTTON_DOWN,l,this,a),this.pad.emit(o.GAMEPAD_BUTTON_DOWN,h,a,this)):this.pressed&&(this.pressed=!1,this.events.emit(o.BUTTON_UP,l,this,a),this.pad.emit(o.GAMEPAD_BUTTON_UP,h,a,this))},destroy:function(){this.pad=null,this.events=null}});e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(509),o=i(510),r=i(0),a=i(9),l=i(3),h=new r({Extends:a,initialize:function(v,d){a.call(this),this.manager=v,this.pad=d,this.id=d.id,this.index=d.index;for(var c=[],p=0;p<d.buttons.length;p++)c.push(new o(this,p));this.buttons=c;var g=[];for(p=0;p<d.axes.length;p++)g.push(new n(this,p));this.axes=g,this.vibration=d.vibrationActuator;var m={value:0,pressed:!1};this._LCLeft=c[14]?c[14]:m,this._LCRight=c[15]?c[15]:m,this._LCTop=c[12]?c[12]:m,this._LCBottom=c[13]?c[13]:m,this._RCLeft=c[2]?c[2]:m,this._RCRight=c[1]?c[1]:m,this._RCTop=c[3]?c[3]:m,this._RCBottom=c[0]?c[0]:m,this._FBLeftTop=c[4]?c[4]:m,this._FBLeftBottom=c[6]?c[6]:m,this._FBRightTop=c[5]?c[5]:m,this._FBRightBottom=c[7]?c[7]:m;var x={value:0};this._HAxisLeft=g[0]?g[0]:x,this._VAxisLeft=g[1]?g[1]:x,this._HAxisRight=g[2]?g[2]:x,this._VAxisRight=g[3]?g[3]:x,this.leftStick=new l,this.rightStick=new l,this._created=performance.now()},getAxisTotal:function(){return this.axes.length},getAxisValue:function(u){return this.axes[u].getValue()},setAxisThreshold:function(u){for(var v=0;v<this.axes.length;v++)this.axes[v].threshold=u},getButtonTotal:function(){return this.buttons.length},getButtonValue:function(u){return this.buttons[u].value},isButtonDown:function(u){return this.buttons[u].pressed},update:function(u){if(!(u.timestamp<this._created)){var v,d=this.buttons,c=u.buttons,p=d.length;for(v=0;v<p;v++)d[v].update(c[v].value);var g=this.axes,m=u.axes;for(p=g.length,v=0;v<p;v++)g[v].update(m[v]);p>=2&&(this.leftStick.set(g[0].getValue(),g[1].getValue()),p>=4&&this.rightStick.set(g[2].getValue(),g[3].getValue()))}},destroy:function(){this.removeAllListeners(),this.manager=null,this.pad=null;var u;for(u=0;u<this.buttons.length;u++)this.buttons[u].destroy();for(u=0;u<this.axes.length;u++)this.axes[u].destroy();this.buttons=[],this.axes=[]},connected:{get:function(){return this.pad.connected}},timestamp:{get:function(){return this.pad.timestamp}},left:{get:function(){return this._LCLeft.pressed}},right:{get:function(){return this._LCRight.pressed}},up:{get:function(){return this._LCTop.pressed}},down:{get:function(){return this._LCBottom.pressed}},A:{get:function(){return this._RCBottom.pressed}},Y:{get:function(){return this._RCTop.pressed}},X:{get:function(){return this._RCLeft.pressed}},B:{get:function(){return this._RCRight.pressed}},L1:{get:function(){return this._FBLeftTop.value}},L2:{get:function(){return this._FBLeftBottom.value}},R1:{get:function(){return this._FBRightTop.value}},R2:{get:function(){return this._FBRightBottom.value}}});e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(9),r=i(154),a=new n({Extends:o,initialize:function(h,u){o.call(this),this.plugin=h,this.keyCode=u,this.originalEvent=void 0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.location=0,this.timeDown=0,this.duration=0,this.timeUp=0,this.emitOnRepeat=!1,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1},setEmitOnRepeat:function(l){return this.emitOnRepeat=l,this},onDown:function(l){this.originalEvent=l,this.enabled&&(this.altKey=l.altKey,this.ctrlKey=l.ctrlKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.location=l.location,this.repeats++,this.isDown?this.emitOnRepeat&&this.emit(r.DOWN,this,l):(this.isDown=!0,this.isUp=!1,this.timeDown=l.timeStamp,this.duration=0,this._justDown=!0,this._justUp=!1,this.emit(r.DOWN,this,l)))},onUp:function(l){this.originalEvent=l,this.enabled&&(this.isDown=!1,this.isUp=!0,this.timeUp=l.timeStamp,this.duration=this.timeUp-this.timeDown,this.repeats=0,this._justDown=!1,this._justUp=!0,this._tick=-1,this.emit(r.UP,this,l))},reset:function(){return this.preventDefault=!0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.timeDown=0,this.duration=0,this.timeUp=0,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1,this},getDuration:function(){return this.isDown?this.plugin.game.loop.time-this.timeDown:0},destroy:function(){this.removeAllListeners(),this.originalEvent=null,this.plugin=null}});e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(154),r=i(2),a=i(514),l=i(516),h=new n({initialize:function(v,d,c){if(c===void 0&&(c={}),d.length<2)return!1;this.manager=v,this.enabled=!0,this.keyCodes=[];for(var p=0;p<d.length;p++){var g=d[p];typeof g=="string"?this.keyCodes.push(g.toUpperCase().charCodeAt(0)):typeof g=="number"?this.keyCodes.push(g):g.hasOwnProperty("keyCode")&&this.keyCodes.push(g.keyCode)}this.current=this.keyCodes[0],this.index=0,this.size=this.keyCodes.length,this.timeLastMatched=0,this.matched=!1,this.timeMatched=0,this.resetOnWrongKey=r(c,"resetOnWrongKey",!0),this.maxKeyDelay=r(c,"maxKeyDelay",0),this.resetOnMatch=r(c,"resetOnMatch",!1),this.deleteOnMatch=r(c,"deleteOnMatch",!1);var m=this,x=function(y){if(!(m.matched||!m.enabled)){var T=a(y,m);T&&(m.manager.emit(o.COMBO_MATCH,m,y),m.resetOnMatch?l(m):m.deleteOnMatch&&m.destroy())}};this.onKeyDown=x,this.manager.on(o.ANY_KEY_DOWN,this.onKeyDown)},progress:{get:function(){return this.index/this.size}},destroy:function(){this.enabled=!1,this.keyCodes=[],this.manager.off(o.ANY_KEY_DOWN,this.onKeyDown),this.manager=null}});e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(515),o=function(r,a){if(a.matched)return!0;var l=!1,h=!1;if(r.keyCode===a.current)if(a.index>0&&a.maxKeyDelay>0){var u=a.timeLastMatched+a.maxKeyDelay;r.timeStamp<=u&&(h=!0,l=n(r,a))}else h=!0,l=n(r,a);return!h&&a.resetOnWrongKey&&(a.index=0,a.current=a.keyCodes[0]),l&&(a.timeLastMatched=r.timeStamp,a.matched=!0,a.timeMatched=r.timeStamp),l};e.exports=o},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return o.timeLastMatched=n.timeStamp,o.index++,o.index===o.size?!0:(o.current=o.keyCodes[o.index],!1)};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n.current=n.keyCodes[0],n.index=0,n.timeLastMatched=0,n.matched=!1,n.timeMatched=0,n};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(240),o=function(r,a){var l=n(a,r.xhrSettings),h=new XMLHttpRequest;if(h.open("GET",r.src,l.async,l.user,l.password),h.responseType=r.xhrSettings.responseType,h.timeout=l.timeout,l.headers)for(var u in l.headers)h.setRequestHeader(u,l.headers[u]);return l.header&&l.headerValue&&h.setRequestHeader(l.header,l.headerValue),l.requestedWith&&h.setRequestHeader("X-Requested-With",l.requestedWith),l.overrideMimeType&&h.overrideMimeType(l.overrideMimeType),l.withCredentials&&(h.withCredentials=!0),h.onload=r.onLoad.bind(r,h),h.onerror=r.onError.bind(r,h),h.onprogress=r.onProgress.bind(r),h.send(),h};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(21),r=i(23),a=i(8),l=i(2),h=i(519),u=i(7),v=new n({Extends:r,initialize:function(c,p,g,m,x){if(u(p)){var y=p;p=l(y,"key"),m=l(y,"xhrSettings"),x=l(y,"context",x)}var T={type:"audio",cache:c.cacheManager.audio,extension:g.type,responseType:"arraybuffer",key:p,url:g.url,xhrSettings:m,config:{context:x}};r.call(this,c,T)},onProcess:function(){this.state=o.FILE_PROCESSING;var d=this;this.config.context.decodeAudioData(this.xhrLoader.response,function(c){d.data=c,d.onProcessComplete()},function(c){console.error("Error decoding audio: "+d.key+" - ",c?c.message:null),d.onProcessError()}),this.config.context=null}});v.create=function(d,c,p,g,m){var x=d.systems.game,y=x.config.audio,T=x.device.audio;u(c)&&(p=l(c,"url",[]),g=l(c,"config",{}));var C=v.getAudioURL(x,p);return C?T.webAudio&&!y.disableWebAudio?new v(d,c,C,m,x.sound.context):new h(d,c,C,g):null},v.getAudioURL=function(d,c){Array.isArray(c)||(c=[c]);for(var p=0;p<c.length;p++){var g=l(c[p],"url",c[p]);if(g.indexOf("blob:")===0||g.indexOf("data:")===0)return{url:g,type:""};var m=g.match(/\.([a-zA-Z0-9]+)($|\?)/);if(m=l(c[p],"type",m?m[1]:"").toLowerCase(),d.device.audio[m])return{url:g,type:m}}return null},a.register("audio",function(d,c,p,g){var m=this.systems.game,x=m.config.audio,y=m.device.audio;if(x.noAudio||!y.webAudio&&!y.audioData)return this;var T;if(Array.isArray(d))for(var C=0;C<d.length;C++)T=v.create(this,d[C]),T&&this.addFile(T);else T=v.create(this,d,c,p,g),T&&this.addFile(T);return this}),e.exports=v},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(95),r=i(23),a=i(2),l=i(155),h=i(7),u=new n({Extends:r,initialize:function(d,c,p,g){if(h(c)){var m=c;c=a(m,"key"),g=a(m,"config",g)}var x={type:"audio",cache:d.cacheManager.audio,extension:p.type,key:c,url:p.url,config:g};r.call(this,d,x),this.locked="ontouchstart"in window,this.loaded=!1,this.filesLoaded=0,this.filesTotal=0},onLoad:function(){this.loaded||(this.loaded=!0,this.loader.nextFile(this,!0))},onError:function(){for(var v=0;v<this.data.length;v++){var d=this.data[v];d.oncanplaythrough=null,d.onerror=null}this.loader.nextFile(this,!1)},onProgress:function(v){var d=v.target;d.oncanplaythrough=null,d.onerror=null,this.filesLoaded++,this.percentComplete=Math.min(this.filesLoaded/this.filesTotal,1),this.loader.emit(o.FILE_PROGRESS,this,this.percentComplete),this.filesLoaded===this.filesTotal&&this.onLoad()},load:function(){this.data=[];var v=this.config&&this.config.instances||1;this.filesTotal=v,this.filesLoaded=0,this.percentComplete=0;for(var d=0;d<v;d++){var c=new Audio;c.dataset||(c.dataset={}),c.dataset.name=this.key+("0"+d).slice(-2),c.dataset.used="false",this.locked?c.dataset.locked="true":(c.dataset.locked="false",c.preload="auto",c.oncanplaythrough=this.onProgress.bind(this),c.onerror=this.onError.bind(this)),this.data.push(c)}for(d=0;d<this.data.length;d++)c=this.data[d],c.src=l(this,this.loader.baseURL),this.locked||c.load();this.locked&&setTimeout(this.onLoad.bind(this))}});e.exports=u},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(21),r=i(23),a=i(8),l=i(2),h=i(7),u=new n({Extends:r,initialize:function(d,c,p,g){var m="js";if(h(c)){var x=c;c=l(x,"key"),p=l(x,"url"),g=l(x,"xhrSettings"),m=l(x,"extension",m)}var y={type:"script",cache:!1,extension:m,responseType:"text",key:c,url:p,xhrSettings:g};r.call(this,d,y)},onProcess:function(){this.state=o.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});a.register("script",function(v,d,c){if(Array.isArray(v))for(var p=0;p<v.length;p++)this.addFile(new u(this,v[p]));else this.addFile(new u(this,v,d,c));return this}),e.exports=u},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(522),o=i(157),r=i(0),a=i(62),l=i(524),h=i(525),u=new r({initialize:function(d){this.world=d,this.scene=d.scene,this.sys=d.scene.sys},collider:function(v,d,c,p,g){return this.world.addCollider(v,d,c,p,g)},overlap:function(v,d,c,p,g){return this.world.addOverlap(v,d,c,p,g)},existing:function(v,d){var c=d?a.STATIC_BODY:a.DYNAMIC_BODY;return this.world.enableBody(v,c),v},staticImage:function(v,d,c,p){var g=new n(this.scene,v,d,c,p);return this.sys.displayList.add(g),this.world.enableBody(g,a.STATIC_BODY),g},image:function(v,d,c,p){var g=new n(this.scene,v,d,c,p);return this.sys.displayList.add(g),this.world.enableBody(g,a.DYNAMIC_BODY),g},staticSprite:function(v,d,c,p){var g=new o(this.scene,v,d,c,p);return this.sys.displayList.add(g),this.sys.updateList.add(g),this.world.enableBody(g,a.STATIC_BODY),g},sprite:function(v,d,c,p){var g=new o(this.scene,v,d,c,p);return this.sys.displayList.add(g),this.sys.updateList.add(g),this.world.enableBody(g,a.DYNAMIC_BODY),g},staticGroup:function(v,d){return this.sys.updateList.add(new h(this.world,this.world.scene,v,d))},group:function(v,d){return this.sys.updateList.add(new l(this.world,this.world.scene,v,d))},destroy:function(){this.world=null,this.scene=null,this.sys=null}});e.exports=u},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(243),r=i(125),a=new n({Extends:r,Mixins:[o.Acceleration,o.Angular,o.Bounce,o.Debug,o.Drag,o.Enable,o.Friction,o.Gravity,o.Immovable,o.Mass,o.Pushable,o.Size,o.Velocity],initialize:function(h,u,v,d,c){r.call(this,h,u,v,d,c),this.body=null}});e.exports=a},function(e,f,i){var n=i(244),o=i(65),r=i(231),a=i(151),l=function(h,u,v,d,c,p){var g=n(h,u-d,v-d,2*d,2*d,c,p);if(g.length===0)return g;for(var m=new o(u,v,d),x=new o,y=[],T=0;T<g.length;T++){var C=g[T];C.isCircle?(x.setTo(C.center.x,C.center.y,C.halfWidth),r(m,x)&&y.push(C)):a(m,C)&&y.push(C)}return y};e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(157),o=i(0),r=i(62),a=i(2),l=i(113),h=i(7),u=new o({Extends:l,initialize:function(d,c,p,g){if(!p&&!g)g={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};else if(h(p))g=p,p=null,g.internalCreateCallback=this.createCallbackHandler,g.internalRemoveCallback=this.removeCallbackHandler;else if(Array.isArray(p)&&h(p[0])){g=p[0];var m=this;p.forEach(function(x){x.internalCreateCallback=m.createCallbackHandler,x.internalRemoveCallback=m.removeCallbackHandler}),p=null}else g={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};this.world=d,g.classType=a(g,"classType",n),this.physicsType=r.DYNAMIC_BODY,this.defaults={setCollideWorldBounds:a(g,"collideWorldBounds",!1),setBoundsRectangle:a(g,"customBoundsRectangle",null),setAccelerationX:a(g,"accelerationX",0),setAccelerationY:a(g,"accelerationY",0),setAllowDrag:a(g,"allowDrag",!0),setAllowGravity:a(g,"allowGravity",!0),setAllowRotation:a(g,"allowRotation",!0),setBounceX:a(g,"bounceX",0),setBounceY:a(g,"bounceY",0),setDragX:a(g,"dragX",0),setDragY:a(g,"dragY",0),setEnable:a(g,"enable",!0),setGravityX:a(g,"gravityX",0),setGravityY:a(g,"gravityY",0),setFrictionX:a(g,"frictionX",0),setFrictionY:a(g,"frictionY",0),setMaxVelocityX:a(g,"maxVelocityX",1e4),setMaxVelocityY:a(g,"maxVelocityY",1e4),setVelocityX:a(g,"velocityX",0),setVelocityY:a(g,"velocityY",0),setAngularVelocity:a(g,"angularVelocity",0),setAngularAcceleration:a(g,"angularAcceleration",0),setAngularDrag:a(g,"angularDrag",0),setMass:a(g,"mass",1),setImmovable:a(g,"immovable",!1)},l.call(this,c,p,g),this.type="PhysicsGroup"},createCallbackHandler:function(v){v.body||this.world.enableBody(v,r.DYNAMIC_BODY);var d=v.body;for(var c in this.defaults)d[c](this.defaults[c])},removeCallbackHandler:function(v){v.body&&this.world.disableBody(v)},setVelocity:function(v,d,c){c===void 0&&(c=0);for(var p=this.getChildren(),g=0;g<p.length;g++)p[g].body.velocity.set(v+g*c,d+g*c);return this},setVelocityX:function(v,d){d===void 0&&(d=0);for(var c=this.getChildren(),p=0;p<c.length;p++)c[p].body.velocity.x=v+p*d;return this},setVelocityY:function(v,d){d===void 0&&(d=0);for(var c=this.getChildren(),p=0;p<c.length;p++)c[p].body.velocity.y=v+p*d;return this}});e.exports=u},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(157),o=i(0),r=i(62),a=i(2),l=i(113),h=i(7),u=new o({Extends:l,initialize:function(d,c,p,g){!p&&!g?g={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler,createMultipleCallback:this.createMultipleCallbackHandler,classType:n}:h(p)?(g=p,p=null,g.internalCreateCallback=this.createCallbackHandler,g.internalRemoveCallback=this.removeCallbackHandler,g.createMultipleCallback=this.createMultipleCallbackHandler,g.classType=a(g,"classType",n)):Array.isArray(p)&&h(p[0])?(g=p,p=null,g.forEach(function(m){m.internalCreateCallback=this.createCallbackHandler,m.internalRemoveCallback=this.removeCallbackHandler,m.createMultipleCallback=this.createMultipleCallbackHandler,m.classType=a(m,"classType",n)})):g={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler},this.world=d,this.physicsType=r.STATIC_BODY,l.call(this,c,p,g),this.type="StaticPhysicsGroup"},createCallbackHandler:function(v){v.body||this.world.enableBody(v,r.STATIC_BODY)},removeCallbackHandler:function(v){v.body&&this.world.disableBody(v)},createMultipleCallbackHandler:function(){this.refresh()},refresh:function(){for(var v=this.children.entries,d=0;d<v.length;d++)v[d].body.reset();return this}});e.exports=u},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(350),o=i(527),r=i(18),a=i(0),l=i(528),h=i(62),u=i(50),v=i(9),d=i(245),c=i(124),p=i(354),g=i(355),m=i(246),x=i(247),y=i(529),T=i(6),C=i(14),S=i(211),E=i(530),M=i(10),O=i(531),L=i(532),R=i(537),w=i(538),D=i(149),B=i(539),N=i(248),z=i(25),X=i(3),k=i(68),K=new a({Extends:v,initialize:function(I,G){v.call(this),this.scene=I,this.bodies=new D,this.staticBodies=new D,this.pendingDestroy=new D,this.colliders=new S,this.gravity=new X(T(G,"gravity.x",0),T(G,"gravity.y",0)),this.bounds=new M(T(G,"x",0),T(G,"y",0),T(G,"width",I.sys.scale.width),T(G,"height",I.sys.scale.height)),this.checkCollision={up:T(G,"checkCollision.up",!0),down:T(G,"checkCollision.down",!0),left:T(G,"checkCollision.left",!0),right:T(G,"checkCollision.right",!0)},this.fps=T(G,"fps",60),this.fixedStep=T(G,"fixedStep",!0),this._elapsed=0,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this.stepsLastFrame=0,this.timeScale=T(G,"timeScale",1),this.OVERLAP_BIAS=T(G,"overlapBias",4),this.TILE_BIAS=T(G,"tileBias",16),this.forceX=T(G,"forceX",!1),this.isPaused=T(G,"isPaused",!1),this._total=0,this.drawDebug=T(G,"debug",!1),this.debugGraphic,this.defaults={debugShowBody:T(G,"debugShowBody",!0),debugShowStaticBody:T(G,"debugShowStaticBody",!0),debugShowVelocity:T(G,"debugShowVelocity",!0),bodyDebugColor:T(G,"debugBodyColor",16711935),staticBodyDebugColor:T(G,"debugStaticBodyColor",255),velocityDebugColor:T(G,"debugVelocityColor",65280)},this.maxEntries=T(G,"maxEntries",16),this.useTree=T(G,"useTree",!0),this.tree=new O(this.maxEntries),this.staticTree=new O(this.maxEntries),this.treeMinMax={minX:0,minY:0,maxX:0,maxY:0},this._tempMatrix=new z,this._tempMatrix2=new z,this.drawDebug&&this.createDebugGraphic()},enable:function(b,I){I===void 0&&(I=h.DYNAMIC_BODY),Array.isArray(b)||(b=[b]);for(var G=0;G<b.length;G++){var Y=b[G];if(Y.isParent)for(var U=Y.getChildren(),W=0;W<U.length;W++){var H=U[W];H.isParent?this.enable(H,I):this.enableBody(H,I)}else this.enableBody(Y,I)}},enableBody:function(b,I){return I===void 0&&(I=h.DYNAMIC_BODY),b.body||(I===h.DYNAMIC_BODY?b.body=new o(this,b):I===h.STATIC_BODY&&(b.body=new B(this,b))),this.add(b.body),b},add:function(b){return b.physicsType===h.DYNAMIC_BODY?this.bodies.set(b):b.physicsType===h.STATIC_BODY&&(this.staticBodies.set(b),this.staticTree.insert(b)),b.enable=!0,b},disable:function(b){Array.isArray(b)||(b=[b]);for(var I=0;I<b.length;I++){var G=b[I];if(G.isParent)for(var Y=G.getChildren(),U=0;U<Y.length;U++){var W=Y[U];W.isParent?this.disable(W):this.disableBody(W.body)}else this.disableBody(G.body)}},disableBody:function(b){this.remove(b),b.enable=!1},remove:function(b){b.physicsType===h.DYNAMIC_BODY?(this.tree.remove(b),this.bodies.delete(b)):b.physicsType===h.STATIC_BODY&&(this.staticBodies.delete(b),this.staticTree.remove(b))},createDebugGraphic:function(){var b=this.scene.sys.add.graphics({x:0,y:0});return b.setDepth(Number.MAX_VALUE),this.debugGraphic=b,this.drawDebug=!0,b},setBounds:function(b,I,G,Y,U,W,H,Z){return this.bounds.setTo(b,I,G,Y),U!==void 0&&this.setBoundsCollision(U,W,H,Z),this},setBoundsCollision:function(b,I,G,Y){return b===void 0&&(b=!0),I===void 0&&(I=!0),G===void 0&&(G=!0),Y===void 0&&(Y=!0),this.checkCollision.left=b,this.checkCollision.right=I,this.checkCollision.up=G,this.checkCollision.down=Y,this},pause:function(){return this.isPaused=!0,this.emit(d.PAUSE),this},resume:function(){return this.isPaused=!1,this.emit(d.RESUME),this},addCollider:function(b,I,G,Y,U){G===void 0&&(G=null),Y===void 0&&(Y=null),U===void 0&&(U=G);var W=new l(this,!1,b,I,G,Y,U);return this.colliders.add(W),W},addOverlap:function(b,I,G,Y,U){G===void 0&&(G=null),Y===void 0&&(Y=null),U===void 0&&(U=G);var W=new l(this,!0,b,I,G,Y,U);return this.colliders.add(W),W},removeCollider:function(b){return this.colliders.remove(b),this},setFPS:function(b){return this.fps=b,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this},update:function(b,I){if(!(this.isPaused||this.bodies.size===0)){var G,Y=this._frameTime,U=this._frameTimeMS*this.timeScale;this._elapsed+=I;var W,H=this.bodies.entries,Z=this._elapsed>=U;for(this.fixedStep||(Y=I*.001,Z=!0,this._elapsed=0),G=0;G<H.length;G++)W=H[G],W.enable&&W.preUpdate(Z,Y);if(Z){this._elapsed-=U,this.stepsLastFrame=1,this.useTree&&(this.tree.clear(),this.tree.load(H));var q=this.colliders.update();for(G=0;G<q.length;G++){var _=q[G];_.active&&_.update()}this.emit(d.WORLD_STEP,Y)}for(;this._elapsed>=U;)this._elapsed-=U,this.step(Y)}},step:function(b){var I,G,Y=this.bodies.entries,U=Y.length;for(I=0;I<U;I++)G=Y[I],G.enable&&G.update(b);this.useTree&&(this.tree.clear(),this.tree.load(Y));var W=this.colliders.update();for(I=0;I<W.length;I++){var H=W[I];H.active&&H.update()}this.emit(d.WORLD_STEP,b),this.stepsLastFrame++},postUpdate:function(){var b,I,G=this.bodies.entries,Y=G.length,U=this.bodies,W=this.staticBodies;if(this.stepsLastFrame)for(this.stepsLastFrame=0,b=0;b<Y;b++)I=G[b],I.enable&&I.postUpdate();if(this.drawDebug){var H=this.debugGraphic;for(H.clear(),b=0;b<Y;b++)I=G[b],I.willDrawDebug()&&I.drawDebug(H);for(G=W.entries,Y=G.length,b=0;b<Y;b++)I=G[b],I.willDrawDebug()&&I.drawDebug(H)}var Z=this.pendingDestroy;if(Z.size>0){var q=this.tree,_=this.staticTree;for(G=Z.entries,Y=G.length,b=0;b<Y;b++)I=G[b],I.physicsType===h.DYNAMIC_BODY?(q.remove(I),U.delete(I)):I.physicsType===h.STATIC_BODY&&(_.remove(I),W.delete(I)),I.world=void 0,I.gameObject=void 0;Z.clear()}},updateMotion:function(b,I){b.allowRotation&&this.computeAngularVelocity(b,I),this.computeVelocity(b,I)},computeAngularVelocity:function(b,I){var G=b.angularVelocity,Y=b.angularAcceleration,U=b.angularDrag,W=b.maxAngular;Y?G+=Y*I:b.allowDrag&&U&&(U*=I,p(G-U,0,.1)?G-=U:g(G+U,0,.1)?G+=U:G=0),G=r(G,-W,W);var H=G-b.angularVelocity;b.angularVelocity+=H,b.rotation+=b.angularVelocity*I},computeVelocity:function(b,I){var G=b.velocity.x,Y=b.acceleration.x,U=b.drag.x,W=b.maxVelocity.x,H=b.velocity.y,Z=b.acceleration.y,q=b.drag.y,_=b.maxVelocity.y,nt=b.speed,rt=b.maxSpeed,at=b.allowDrag,ct=b.useDamping;b.allowGravity&&(G+=(this.gravity.x+b.gravity.x)*I,H+=(this.gravity.y+b.gravity.y)*I),Y?G+=Y*I:at&&U&&(ct?(U=Math.pow(U,I),G*=U,nt=Math.sqrt(G*G+H*H),c(nt,0,.001)&&(G=0)):(U*=I,p(G-U,0,.01)?G-=U:g(G+U,0,.01)?G+=U:G=0)),Z?H+=Z*I:at&&q&&(ct?(q=Math.pow(q,I),H*=q,nt=Math.sqrt(G*G+H*H),c(nt,0,.001)&&(H=0)):(q*=I,p(H-q,0,.01)?H-=q:g(H+q,0,.01)?H+=q:H=0)),G=r(G,-W,W),H=r(H,-_,_),b.velocity.set(G,H),rt>-1&&nt>rt&&(b.velocity.normalize().scale(rt),nt=rt),b.speed=nt},separate:function(b,I,G,Y,U,W){if(!W&&!b.enable||!I.enable||b.checkCollision.none||I.checkCollision.none||!this.intersects(b,I)||G&&G.call(Y,b.gameObject,I.gameObject)===!1)return!1;if(b.isCircle&&I.isCircle)return this.separateCircle(b,I,U);if(b.isCircle!==I.isCircle){var H=b.isCircle?I:b,Z=b.isCircle?b:I,q={x:H.x,y:H.y,right:H.right,bottom:H.bottom},_=Z.center;if((_.y<q.y||_.y>q.bottom)&&(_.x<q.x||_.x>q.right))return this.separateCircle(b,I,U)}var nt=!1,rt=!1;U?(nt=R(b,I,U,this.OVERLAP_BIAS),rt=w(b,I,U,this.OVERLAP_BIAS)):this.forceX||Math.abs(this.gravity.y+b.gravity.y)<Math.abs(this.gravity.x+b.gravity.x)?(nt=R(b,I,U,this.OVERLAP_BIAS),this.intersects(b,I)&&(rt=w(b,I,U,this.OVERLAP_BIAS))):(rt=w(b,I,U,this.OVERLAP_BIAS),this.intersects(b,I)&&(nt=R(b,I,U,this.OVERLAP_BIAS)));var at=nt||rt;return at&&(U?(b.onOverlap||I.onOverlap)&&this.emit(d.OVERLAP,b.gameObject,I.gameObject,b,I):(b.onCollide||I.onCollide)&&this.emit(d.COLLIDE,b.gameObject,I.gameObject,b,I)),at},separateCircle:function(b,I,G,Y){m(b,I,!1,Y),x(b,I,!1,Y);var U=0;if(b.isCircle!==I.isCircle){var W={x:I.isCircle?b.position.x:I.position.x,y:I.isCircle?b.position.y:I.position.y,right:I.isCircle?b.right:I.right,bottom:I.isCircle?b.bottom:I.bottom},H={x:b.isCircle?b.center.x:I.center.x,y:b.isCircle?b.center.y:I.center.y,radius:b.isCircle?b.halfWidth:I.halfWidth};H.y<W.y?H.x<W.x?U=u(H.x,H.y,W.x,W.y)-H.radius:H.x>W.right&&(U=u(H.x,H.y,W.right,W.y)-H.radius):H.y>W.bottom&&(H.x<W.x?U=u(H.x,H.y,W.x,W.bottom)-H.radius:H.x>W.right&&(U=u(H.x,H.y,W.right,W.bottom)-H.radius)),U*=-1}else U=b.halfWidth+I.halfWidth-u(b.center.x,b.center.y,I.center.x,I.center.y);if(b.overlapR=U,I.overlapR=U,G||U===0||b.immovable&&I.immovable||b.customSeparateX||I.customSeparateX)return U!==0&&(b.onOverlap||I.onOverlap)&&this.emit(d.OVERLAP,b.gameObject,I.gameObject,b,I),U!==0;var Z=b.center.x-I.center.x,q=b.center.y-I.center.y,_=Math.sqrt(Math.pow(Z,2)+Math.pow(q,2)),nt=(I.center.x-b.center.x)/_||0,rt=(I.center.y-b.center.y)/_||0,at=2*(b.velocity.x*nt+b.velocity.y*rt-I.velocity.x*nt-I.velocity.y*rt)/(b.mass+I.mass);(b.immovable||I.immovable)&&(at*=2),b.immovable||(b.velocity.x=b.velocity.x-at/b.mass*nt,b.velocity.y=b.velocity.y-at/b.mass*rt),I.immovable||(I.velocity.x=I.velocity.x+at/I.mass*nt,I.velocity.y=I.velocity.y+at/I.mass*rt),!b.immovable&&!I.immovable&&(U/=2);var ct=n(b.center,I.center),ut=(U+C.EPSILON)*Math.cos(ct),pt=(U+C.EPSILON)*Math.sin(ct);return b.immovable||(b.x-=ut,b.y-=pt,b.updateCenter()),I.immovable||(I.x+=ut,I.y+=pt,I.updateCenter()),b.velocity.x*=b.bounce.x,b.velocity.y*=b.bounce.y,I.velocity.x*=I.bounce.x,I.velocity.y*=I.bounce.y,(b.onCollide||I.onCollide)&&this.emit(d.COLLIDE,b.gameObject,I.gameObject,b,I),!0},intersects:function(b,I){return b===I?!1:!b.isCircle&&!I.isCircle?!(b.right<=I.position.x||b.bottom<=I.position.y||b.position.x>=I.right||b.position.y>=I.bottom):b.isCircle?I.isCircle?u(b.center.x,b.center.y,I.center.x,I.center.y)<=b.halfWidth+I.halfWidth:this.circleBodyIntersects(b,I):this.circleBodyIntersects(I,b)},circleBodyIntersects:function(b,I){var G=r(b.center.x,I.left,I.right),Y=r(b.center.y,I.top,I.bottom),U=(b.center.x-G)*(b.center.x-G),W=(b.center.y-Y)*(b.center.y-Y);return U+W<=b.halfWidth*b.halfWidth},overlap:function(b,I,G,Y,U){return G===void 0&&(G=null),Y===void 0&&(Y=null),U===void 0&&(U=G),this.collideObjects(b,I,G,Y,U,!0)},collide:function(b,I,G,Y,U){return G===void 0&&(G=null),Y===void 0&&(Y=null),U===void 0&&(U=G),this.collideObjects(b,I,G,Y,U,!1)},collideObjects:function(b,I,G,Y,U,W){var H,Z;b.isParent&&b.physicsType===void 0&&(b=b.children.entries),I&&I.isParent&&I.physicsType===void 0&&(I=I.children.entries);var q=Array.isArray(b),_=Array.isArray(I);if(this._total=0,!q&&!_)this.collideHandler(b,I,G,Y,U,W);else if(!q&&_)for(H=0;H<I.length;H++)this.collideHandler(b,I[H],G,Y,U,W);else if(q&&!_)if(I)for(H=0;H<b.length;H++)this.collideHandler(b[H],I,G,Y,U,W);else for(H=0;H<b.length;H++){var nt=b[H];for(Z=H+1;Z<b.length;Z++)H!==Z&&this.collideHandler(nt,b[Z],G,Y,U,W)}else for(H=0;H<b.length;H++)for(Z=0;Z<I.length;Z++)this.collideHandler(b[H],I[Z],G,Y,U,W);return this._total>0},collideHandler:function(b,I,G,Y,U,W){if(I===void 0&&b.isParent)return this.collideGroupVsGroup(b,b,G,Y,U,W);if(!b||!I)return!1;if(b.body){if(I.body)return this.collideSpriteVsSprite(b,I,G,Y,U,W);if(I.isParent)return this.collideSpriteVsGroup(b,I,G,Y,U,W);if(I.isTilemap)return this.collideSpriteVsTilemapLayer(b,I,G,Y,U,W)}else if(b.isParent){if(I.body)return this.collideSpriteVsGroup(I,b,G,Y,U,W);if(I.isParent)return this.collideGroupVsGroup(b,I,G,Y,U,W);if(I.isTilemap)return this.collideGroupVsTilemapLayer(b,I,G,Y,U,W)}else if(b.isTilemap){if(I.body)return this.collideSpriteVsTilemapLayer(I,b,G,Y,U,W);if(I.isParent)return this.collideGroupVsTilemapLayer(I,b,G,Y,U,W)}},collideSpriteVsSprite:function(b,I,G,Y,U,W){return!b.body||!I.body?!1:(this.separate(b.body,I.body,Y,U,W)&&(G&&G.call(U,b,I),this._total++),!0)},collideSpriteVsGroup:function(b,I,G,Y,U,W){var H=b.body;if(!(I.length===0||!H||!H.enable||H.checkCollision.none)){var Z,q,_;if(this.useTree||I.physicsType===h.STATIC_BODY){var nt=this.treeMinMax;nt.minX=H.left,nt.minY=H.top,nt.maxX=H.right,nt.maxY=H.bottom;var rt=I.physicsType===h.DYNAMIC_BODY?this.tree.search(nt):this.staticTree.search(nt);for(q=rt.length,Z=0;Z<q;Z++)_=rt[Z],!(H===_||!_.enable||_.checkCollision.none||!I.contains(_.gameObject))&&this.separate(H,_,Y,U,W,!0)&&(G&&G.call(U,H.gameObject,_.gameObject),this._total++)}else{var at=I.getChildren(),ct=I.children.entries.indexOf(b);for(q=at.length,Z=0;Z<q;Z++)_=at[Z].body,!(!_||Z===ct||!_.enable)&&this.separate(H,_,Y,U,W)&&(G&&G.call(U,H.gameObject,_.gameObject),this._total++)}}},collideGroupVsTilemapLayer:function(b,I,G,Y,U,W){var H=b.getChildren();if(H.length===0)return!1;for(var Z=!1,q=0;q<H.length;q++)H[q].body&&this.collideSpriteVsTilemapLayer(H[q],I,G,Y,U,W)&&(Z=!0);return Z},collideTiles:function(b,I,G,Y,U){return!b.body.enable||I.length===0?!1:this.collideSpriteVsTilesHandler(b,I,G,Y,U,!1,!1)},overlapTiles:function(b,I,G,Y,U){return!b.body.enable||I.length===0?!1:this.collideSpriteVsTilesHandler(b,I,G,Y,U,!0,!1)},collideSpriteVsTilemapLayer:function(b,I,G,Y,U,W){var H=b.body;if(!H.enable||H.checkCollision.none)return!1;var Z=H.position.x,q=H.position.y,_=H.width,nt=H.height,rt=I.layer;if(rt.tileWidth>rt.baseTileWidth){var at=(rt.tileWidth-rt.baseTileWidth)*I.scaleX;Z-=at,_+=at}if(rt.tileHeight>rt.baseTileHeight){var ct=(rt.tileHeight-rt.baseTileHeight)*I.scaleY;nt+=ct}var ut=y(Z,q,_,nt,null,I.scene.cameras.main,I.layer);return ut.length===0?!1:this.collideSpriteVsTilesHandler(b,ut,G,Y,U,W,!0)},collideSpriteVsTilesHandler:function(b,I,G,Y,U,W,H){for(var Z=b.body,q,_={left:0,right:0,top:0,bottom:0},nt,rt=!1,at=0;at<I.length;at++){q=I[at],nt=q.tilemapLayer;var ct=nt.tileToWorldXY(q.x,q.y);_.left=ct.x,_.top=ct.y,q.baseHeight!==q.height&&(_.top-=(q.height-q.baseHeight)*nt.scaleY),_.right=_.left+q.width*nt.scaleX,_.bottom=_.top+q.height*nt.scaleY,N(_,Z)&&(!Y||Y.call(U,b,q))&&E(q,b)&&(W||L(at,Z,q,_,nt,this.TILE_BIAS,H))&&(this._total++,rt=!0,G&&G.call(U,b,q),W&&Z.onOverlap?this.emit(d.TILE_OVERLAP,b,q,Z):Z.onCollide&&this.emit(d.TILE_COLLIDE,b,q,Z))}return rt},collideGroupVsGroup:function(b,I,G,Y,U,W){if(!(b.length===0||I.length===0))for(var H=b.getChildren(),Z=0;Z<H.length;Z++)this.collideSpriteVsGroup(H[Z],I,G,Y,U,W)},wrap:function(b,I){b.body?this.wrapObject(b,I):b.getChildren?this.wrapArray(b.getChildren(),I):Array.isArray(b)?this.wrapArray(b,I):this.wrapObject(b,I)},wrapArray:function(b,I){for(var G=0;G<b.length;G++)this.wrapObject(b[G],I)},wrapObject:function(b,I){I===void 0&&(I=0),b.x=k(b.x,this.bounds.left-I,this.bounds.right+I),b.y=k(b.y,this.bounds.top-I,this.bounds.bottom+I)},shutdown:function(){this.tree.clear(),this.staticTree.clear(),this.bodies.clear(),this.staticBodies.clear(),this.colliders.destroy(),this.removeAllListeners()},destroy:function(){this.shutdown(),this.scene=null}});e.exports=K},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(62),r=i(245),a=i(196),l=i(10),h=i(57),u=i(3),v=new n({initialize:function(c,p){var g=p.displayWidth?p.displayWidth:64,m=p.displayHeight?p.displayHeight:64;this.world=c,this.gameObject=p,this.transform={x:p.x,y:p.y,rotation:p.angle,scaleX:p.scaleX,scaleY:p.scaleY,displayOriginX:p.displayOriginX,displayOriginY:p.displayOriginY},this.debugShowBody=c.defaults.debugShowBody,this.debugShowVelocity=c.defaults.debugShowVelocity,this.debugBodyColor=c.defaults.bodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new u,this.position=new u(p.x-p.scaleX*p.displayOriginX,p.y-p.scaleY*p.displayOriginY),this.prev=this.position.clone(),this.prevFrame=this.position.clone(),this.allowRotation=!0,this.rotation=p.angle,this.preRotation=p.angle,this.width=g,this.height=m,this.sourceWidth=g,this.sourceHeight=m,p.frame&&(this.sourceWidth=p.frame.realWidth,this.sourceHeight=p.frame.realHeight),this.halfWidth=Math.abs(g/2),this.halfHeight=Math.abs(m/2),this.center=new u(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=new u,this.newVelocity=new u,this.deltaMax=new u,this.acceleration=new u,this.allowDrag=!0,this.drag=new u,this.allowGravity=!0,this.gravity=new u,this.bounce=new u,this.worldBounce=null,this.customBoundsRectangle=c.bounds,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.maxVelocity=new u(1e4,1e4),this.maxSpeed=-1,this.friction=new u(1,0),this.useDamping=!1,this.angularVelocity=0,this.angularAcceleration=0,this.angularDrag=0,this.maxAngular=1e3,this.mass=1,this.angle=0,this.speed=0,this.facing=o.FACING_NONE,this.immovable=!1,this.pushable=!0,this.moves=!0,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.syncBounds=!1,this.physicsType=o.DYNAMIC_BODY,this._sx=p.scaleX,this._sy=p.scaleY,this._dx=0,this._dy=0,this._tx=0,this._ty=0,this._bounds=new l},updateBounds:function(){var d=this.gameObject,c=this.transform;if(d.parentContainer){var p=d.getWorldTransformMatrix(this.world._tempMatrix,this.world._tempMatrix2);c.x=p.tx,c.y=p.ty,c.rotation=a(p.rotation),c.scaleX=p.scaleX,c.scaleY=p.scaleY,c.displayOriginX=d.displayOriginX,c.displayOriginY=d.displayOriginY}else c.x=d.x,c.y=d.y,c.rotation=d.angle,c.scaleX=d.scaleX,c.scaleY=d.scaleY,c.displayOriginX=d.displayOriginX,c.displayOriginY=d.displayOriginY;var g=!1;if(this.syncBounds){var m=d.getBounds(this._bounds);this.width=m.width,this.height=m.height,g=!0}else{var x=Math.abs(c.scaleX),y=Math.abs(c.scaleY);(this._sx!==x||this._sy!==y)&&(this.width=this.sourceWidth*x,this.height=this.sourceHeight*y,this._sx=x,this._sy=y,g=!0)}g&&(this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter())},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},updateFromGameObject:function(){this.updateBounds();var d=this.transform;this.position.x=d.x+d.scaleX*(this.offset.x-d.displayOriginX),this.position.y=d.y+d.scaleY*(this.offset.y-d.displayOriginY),this.updateCenter()},resetFlags:function(d){d===void 0&&(d=!1);var c=this.wasTouching,p=this.touching,g=this.blocked;d?(c.none=!0,c.up=!1,c.down=!1,c.left=!1,c.right=!1):(c.none=p.none,c.up=p.up,c.down=p.down,c.left=p.left,c.right=p.right),p.none=!0,p.up=!1,p.down=!1,p.left=!1,p.right=!1,g.none=!0,g.up=!1,g.down=!1,g.left=!1,g.right=!1,this.overlapR=0,this.overlapX=0,this.overlapY=0,this.embedded=!1},preUpdate:function(d,c){d&&this.resetFlags(),this.updateFromGameObject(),this.rotation=this.transform.rotation,this.preRotation=this.rotation,this.moves&&(this.prev.x=this.position.x,this.prev.y=this.position.y,this.prevFrame.x=this.position.x,this.prevFrame.y=this.position.y),d&&this.update(c)},update:function(d){if(this.prev.x=this.position.x,this.prev.y=this.position.y,this.moves){this.world.updateMotion(this,d);var c=this.velocity.x,p=this.velocity.y;this.newVelocity.set(c*d,p*d),this.position.add(this.newVelocity),this.updateCenter(),this.angle=Math.atan2(p,c),this.speed=Math.sqrt(c*c+p*p),this.collideWorldBounds&&this.checkWorldBounds()&&this.onWorldBounds&&this.world.emit(r.WORLD_BOUNDS,this,this.blocked.up,this.blocked.down,this.blocked.left,this.blocked.right)}this._dx=this.position.x-this.prev.x,this._dy=this.position.y-this.prev.y},postUpdate:function(){var d=this.position.x-this.prevFrame.x,c=this.position.y-this.prevFrame.y;if(this.moves){var p=this.deltaMax.x,g=this.deltaMax.y;p!==0&&d!==0&&(d<0&&d<-p?d=-p:d>0&&d>p&&(d=p)),g!==0&&c!==0&&(c<0&&c<-g?c=-g:c>0&&c>g&&(c=g)),this.gameObject.x+=d,this.gameObject.y+=c}d<0?this.facing=o.FACING_LEFT:d>0&&(this.facing=o.FACING_RIGHT),c<0?this.facing=o.FACING_UP:c>0&&(this.facing=o.FACING_DOWN),this.allowRotation&&(this.gameObject.angle+=this.deltaZ()),this._tx=d,this._ty=c},setBoundsRectangle:function(d){return this.customBoundsRectangle=d||this.world.bounds,this},checkWorldBounds:function(){var d=this.position,c=this.customBoundsRectangle,p=this.world.checkCollision,g=this.worldBounce?-this.worldBounce.x:-this.bounce.x,m=this.worldBounce?-this.worldBounce.y:-this.bounce.y,x=!1;return d.x<c.x&&p.left?(d.x=c.x,this.velocity.x*=g,this.blocked.left=!0,x=!0):this.right>c.right&&p.right&&(d.x=c.right-this.width,this.velocity.x*=g,this.blocked.right=!0,x=!0),d.y<c.y&&p.up?(d.y=c.y,this.velocity.y*=m,this.blocked.up=!0,x=!0):this.bottom>c.bottom&&p.down&&(d.y=c.bottom-this.height,this.velocity.y*=m,this.blocked.down=!0,x=!0),x&&(this.blocked.none=!1,this.updateCenter()),x},setOffset:function(d,c){return c===void 0&&(c=d),this.offset.set(d,c),this},setSize:function(d,c,p){p===void 0&&(p=!0);var g=this.gameObject;if(!d&&g.frame&&(d=g.frame.realWidth),!c&&g.frame&&(c=g.frame.realHeight),this.sourceWidth=d,this.sourceHeight=c,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter(),p&&g.getCenter){var m=(g.width-d)/2,x=(g.height-c)/2;this.offset.set(m,x)}return this.isCircle=!1,this.radius=0,this},setCircle:function(d,c,p){return c===void 0&&(c=this.offset.x),p===void 0&&(p=this.offset.y),d>0?(this.isCircle=!0,this.radius=d,this.sourceWidth=d*2,this.sourceHeight=d*2,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(c,p),this.updateCenter()):this.isCircle=!1,this},reset:function(d,c){this.stop();var p=this.gameObject;p.setPosition(d,c),p.getTopLeft?p.getTopLeft(this.position):this.position.set(d,c),this.prev.copy(this.position),this.prevFrame.copy(this.position),this.rotation=p.angle,this.preRotation=p.angle,this.updateBounds(),this.updateCenter(),this.resetFlags(!0)},stop:function(){return this.velocity.set(0),this.acceleration.set(0),this.speed=0,this.angularVelocity=0,this.angularAcceleration=0,this},getBounds:function(d){return d.x=this.x,d.y=this.y,d.right=this.right,d.bottom=this.bottom,d},hitTest:function(d,c){if(!this.isCircle)return h(this,d,c);if(this.radius>0&&d>=this.left&&d<=this.right&&c>=this.top&&c<=this.bottom){var p=(this.center.x-d)*(this.center.x-d),g=(this.center.y-c)*(this.center.y-c);return p+g<=this.radius*this.radius}return!1},onFloor:function(){return this.blocked.down},onCeiling:function(){return this.blocked.up},onWall:function(){return this.blocked.left||this.blocked.right},deltaAbsX:function(){return this._dx>0?this._dx:-this._dx},deltaAbsY:function(){return this._dy>0?this._dy:-this._dy},deltaX:function(){return this._dx},deltaY:function(){return this._dy},deltaXFinal:function(){return this._tx},deltaYFinal:function(){return this._ty},deltaZ:function(){return this.rotation-this.preRotation},destroy:function(){this.enable=!1,this.world&&this.world.pendingDestroy.set(this)},drawDebug:function(d){var c=this.position,p=c.x+this.halfWidth,g=c.y+this.halfHeight;this.debugShowBody&&(d.lineStyle(d.defaultStrokeWidth,this.debugBodyColor),this.isCircle?d.strokeCircle(p,g,this.width/2):(this.checkCollision.up&&d.lineBetween(c.x,c.y,c.x+this.width,c.y),this.checkCollision.right&&d.lineBetween(c.x+this.width,c.y,c.x+this.width,c.y+this.height),this.checkCollision.down&&d.lineBetween(c.x,c.y+this.height,c.x+this.width,c.y+this.height),this.checkCollision.left&&d.lineBetween(c.x,c.y,c.x,c.y+this.height))),this.debugShowVelocity&&(d.lineStyle(d.defaultStrokeWidth,this.world.defaults.velocityDebugColor,1),d.lineBetween(p,g,p+this.velocity.x/2,g+this.velocity.y/2))},willDrawDebug:function(){return this.debugShowBody||this.debugShowVelocity},setCollideWorldBounds:function(d,c,p,g){d===void 0&&(d=!0),this.collideWorldBounds=d;var m=c!==void 0,x=p!==void 0;return(m||x)&&(this.worldBounce||(this.worldBounce=new u),m&&(this.worldBounce.x=c),x&&(this.worldBounce.y=p)),g!==void 0&&(this.onWorldBounds=g),this},setVelocity:function(d,c){return this.velocity.set(d,c),d=this.velocity.x,c=this.velocity.y,this.speed=Math.sqrt(d*d+c*c),this},setVelocityX:function(d){this.velocity.x=d;var c=d,p=this.velocity.y;return this.speed=Math.sqrt(c*c+p*p),this},setVelocityY:function(d){this.velocity.y=d;var c=this.velocity.x,p=d;return this.speed=Math.sqrt(c*c+p*p),this},setMaxVelocity:function(d,c){return this.maxVelocity.set(d,c),this},setMaxVelocityX:function(d){return this.maxVelocity.x=d,this},setMaxVelocityY:function(d){return this.maxVelocity.y=d,this},setMaxSpeed:function(d){return this.maxSpeed=d,this},setBounce:function(d,c){return this.bounce.set(d,c),this},setBounceX:function(d){return this.bounce.x=d,this},setBounceY:function(d){return this.bounce.y=d,this},setAcceleration:function(d,c){return this.acceleration.set(d,c),this},setAccelerationX:function(d){return this.acceleration.x=d,this},setAccelerationY:function(d){return this.acceleration.y=d,this},setAllowDrag:function(d){return d===void 0&&(d=!0),this.allowDrag=d,this},setAllowGravity:function(d){return d===void 0&&(d=!0),this.allowGravity=d,this},setAllowRotation:function(d){return d===void 0&&(d=!0),this.allowRotation=d,this},setDrag:function(d,c){return this.drag.set(d,c),this},setDamping:function(d){return this.useDamping=d,this},setDragX:function(d){return this.drag.x=d,this},setDragY:function(d){return this.drag.y=d,this},setGravity:function(d,c){return this.gravity.set(d,c),this},setGravityX:function(d){return this.gravity.x=d,this},setGravityY:function(d){return this.gravity.y=d,this},setFriction:function(d,c){return this.friction.set(d,c),this},setFrictionX:function(d){return this.friction.x=d,this},setFrictionY:function(d){return this.friction.y=d,this},setAngularVelocity:function(d){return this.angularVelocity=d,this},setAngularAcceleration:function(d){return this.angularAcceleration=d,this},setAngularDrag:function(d){return this.angularDrag=d,this},setMass:function(d){return this.mass=d,this},setImmovable:function(d){return d===void 0&&(d=!0),this.immovable=d,this},setEnable:function(d){return d===void 0&&(d=!0),this.enable=d,this},processX:function(d,c,p,g){this.x+=d,this.updateCenter(),c!==null&&(this.velocity.x=c);var m=this.blocked;p&&(m.left=!0),g&&(m.right=!0)},processY:function(d,c,p,g){this.y+=d,this.updateCenter(),c!==null&&(this.velocity.y=c);var m=this.blocked;p&&(m.up=!0),g&&(m.down=!0)},x:{get:function(){return this.position.x},set:function(d){this.position.x=d}},y:{get:function(){return this.position.y},set:function(d){this.position.y=d}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});e.exports=v},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=new n({initialize:function(a,l,h,u,v,d,c){this.world=a,this.name="",this.active=!0,this.overlapOnly=l,this.object1=h,this.object2=u,this.collideCallback=v,this.processCallback=d,this.callbackContext=c},setName:function(r){return this.name=r,this},update:function(){this.world.collideObjects(this.object1,this.object2,this.collideCallback,this.processCallback,this.callbackContext,this.overlapOnly)},destroy:function(){this.world.removeCollider(this),this.active=!1,this.world=null,this.object1=null,this.object2=null,this.collideCallback=null,this.processCallback=null,this.callbackContext=null}});e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(26),o=i(3),r=new o,a=new o,l=function(h,u,v,d,c,p,g){var m=g.tilemapLayer.tilemap._convert.WorldToTileXY;m(h,u,!0,r,p,g);var x=r.x,y=r.y;m(h+v,u+d,!1,a,p,g);var T=Math.ceil(a.x),C=Math.ceil(a.y);return n(x,y,T-x,C-y,c,g)};e.exports=l},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return n.collisionCallback?!n.collisionCallback.call(n.collisionCallbackContext,o,n):n.layer.callbacks[n.index]?!n.layer.callbacks[n.index].callback.call(n.layer.callbacks[n.index].callbackContext,o,n):!0};e.exports=i},function(e,f,i){/**
 * @author       Vladimir Agafonkin
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(436);function o(C){if(!(this instanceof o))return new o(C);this._maxEntries=Math.max(4,C||9),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}o.prototype={all:function(){return this._all(this.data,[])},search:function(C){var S=this.data,E=[],M=this.toBBox;if(!x(C,S))return E;for(var O=[],L,R,w,D;S;){for(L=0,R=S.children.length;L<R;L++)w=S.children[L],D=S.leaf?M(w):w,x(C,D)&&(S.leaf?E.push(w):m(C,D)?this._all(w,E):O.push(w));S=O.pop()}return E},collides:function(C){var S=this.data,E=this.toBBox;if(!x(C,S))return!1;for(var M=[],O,L,R,w;S;){for(O=0,L=S.children.length;O<L;O++)if(R=S.children[O],w=S.leaf?E(R):R,x(C,w)){if(S.leaf||m(C,w))return!0;M.push(R)}S=M.pop()}return!1},load:function(C){if(!(C&&C.length))return this;if(C.length<this._minEntries){for(var S=0,E=C.length;S<E;S++)this.insert(C[S]);return this}var M=this._build(C.slice(),0,C.length-1,0);if(!this.data.children.length)this.data=M;else if(this.data.height===M.height)this._splitRoot(this.data,M);else{if(this.data.height<M.height){var O=this.data;this.data=M,M=O}this._insert(M,this.data.height-M.height-1,!0)}return this},insert:function(C){return C&&this._insert(C,this.data.height-1),this},clear:function(){return this.data=y([]),this},remove:function(C,S){if(!C)return this;for(var E=this.data,M=this.toBBox(C),O=[],L=[],R,w,D,B;E||O.length;){if(E||(E=O.pop(),w=O[O.length-1],R=L.pop(),B=!0),E.leaf&&(D=r(C,E.children,S),D!==-1))return E.children.splice(D,1),O.push(E),this._condense(O),this;!B&&!E.leaf&&m(E,M)?(O.push(E),L.push(R),R=0,w=E,E=E.children[0]):w?(R++,E=w.children[R],B=!1):E=null}return this},toBBox:function(C){return C},compareMinX:u,compareMinY:v,toJSON:function(){return this.data},fromJSON:function(C){return this.data=C,this},_all:function(C,S){for(var E=[];C;)C.leaf?S.push.apply(S,C.children):E.push.apply(E,C.children),C=E.pop();return S},_build:function(C,S,E,M){var O=E-S+1,L=this._maxEntries,R;if(O<=L)return R=y(C.slice(S,E+1)),a(R,this.toBBox),R;M||(M=Math.ceil(Math.log(O)/Math.log(L)),L=Math.ceil(O/Math.pow(L,M-1))),R=y([]),R.leaf=!1,R.height=M;var w=Math.ceil(O/L),D=w*Math.ceil(Math.sqrt(L)),B,N,z,X;for(T(C,S,E,D,this.compareMinX),B=S;B<=E;B+=D)for(z=Math.min(B+D-1,E),T(C,B,z,w,this.compareMinY),N=B;N<=z;N+=w)X=Math.min(N+w-1,z),R.children.push(this._build(C,N,X,M-1));return a(R,this.toBBox),R},_chooseSubtree:function(C,S,E,M){for(var O,L,R,w,D,B,N,z;M.push(S),!(S.leaf||M.length-1===E);){for(N=z=1/0,O=0,L=S.children.length;O<L;O++)R=S.children[O],D=d(R),B=p(C,R)-D,B<z?(z=B,N=D<N?D:N,w=R):B===z&&D<N&&(N=D,w=R);S=w||S.children[0]}return S},_insert:function(C,S,E){var M=this.toBBox,O=E?C:M(C),L=[],R=this._chooseSubtree(O,this.data,S,L);for(R.children.push(C),h(R,O);S>=0&&L[S].children.length>this._maxEntries;)this._split(L,S),S--;this._adjustParentBBoxes(O,L,S)},_split:function(C,S){var E=C[S],M=E.children.length,O=this._minEntries;this._chooseSplitAxis(E,O,M);var L=this._chooseSplitIndex(E,O,M),R=y(E.children.splice(L,E.children.length-L));R.height=E.height,R.leaf=E.leaf,a(E,this.toBBox),a(R,this.toBBox),S?C[S-1].children.push(R):this._splitRoot(E,R)},_splitRoot:function(C,S){this.data=y([C,S]),this.data.height=C.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},_chooseSplitIndex:function(C,S,E){var M,O,L,R,w,D,B,N;for(D=B=1/0,M=S;M<=E-S;M++)O=l(C,0,M,this.toBBox),L=l(C,M,E,this.toBBox),R=g(O,L),w=d(O)+d(L),R<D?(D=R,N=M,B=w<B?w:B):R===D&&w<B&&(B=w,N=M);return N},_chooseSplitAxis:function(C,S,E){var M=C.leaf?this.compareMinX:u,O=C.leaf?this.compareMinY:v,L=this._allDistMargin(C,S,E,M),R=this._allDistMargin(C,S,E,O);L<R&&C.children.sort(M)},_allDistMargin:function(C,S,E,M){C.children.sort(M);var O=this.toBBox,L=l(C,0,S,O),R=l(C,E-S,E,O),w=c(L)+c(R),D,B;for(D=S;D<E-S;D++)B=C.children[D],h(L,C.leaf?O(B):B),w+=c(L);for(D=E-S-1;D>=S;D--)B=C.children[D],h(R,C.leaf?O(B):B),w+=c(R);return w},_adjustParentBBoxes:function(C,S,E){for(var M=E;M>=0;M--)h(S[M],C)},_condense:function(C){for(var S=C.length-1,E;S>=0;S--)C[S].children.length===0?S>0?(E=C[S-1].children,E.splice(E.indexOf(C[S]),1)):this.clear():a(C[S],this.toBBox)},compareMinX:function(C,S){return C.left-S.left},compareMinY:function(C,S){return C.top-S.top},toBBox:function(C){return{minX:C.left,minY:C.top,maxX:C.right,maxY:C.bottom}}};function r(C,S,E){if(!E)return S.indexOf(C);for(var M=0;M<S.length;M++)if(E(C,S[M]))return M;return-1}function a(C,S){l(C,0,C.children.length,S,C)}function l(C,S,E,M,O){O||(O=y(null)),O.minX=1/0,O.minY=1/0,O.maxX=-1/0,O.maxY=-1/0;for(var L=S,R;L<E;L++)R=C.children[L],h(O,C.leaf?M(R):R);return O}function h(C,S){return C.minX=Math.min(C.minX,S.minX),C.minY=Math.min(C.minY,S.minY),C.maxX=Math.max(C.maxX,S.maxX),C.maxY=Math.max(C.maxY,S.maxY),C}function u(C,S){return C.minX-S.minX}function v(C,S){return C.minY-S.minY}function d(C){return(C.maxX-C.minX)*(C.maxY-C.minY)}function c(C){return C.maxX-C.minX+(C.maxY-C.minY)}function p(C,S){return(Math.max(S.maxX,C.maxX)-Math.min(S.minX,C.minX))*(Math.max(S.maxY,C.maxY)-Math.min(S.minY,C.minY))}function g(C,S){var E=Math.max(C.minX,S.minX),M=Math.max(C.minY,S.minY),O=Math.min(C.maxX,S.maxX),L=Math.min(C.maxY,S.maxY);return Math.max(0,O-E)*Math.max(0,L-M)}function m(C,S){return C.minX<=S.minX&&C.minY<=S.minY&&S.maxX<=C.maxX&&S.maxY<=C.maxY}function x(C,S){return S.minX<=C.maxX&&S.minY<=C.maxY&&S.maxX>=C.minX&&S.maxY>=C.minY}function y(C){return{children:C,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function T(C,S,E,M,O){for(var L=[S,E],R;L.length;)E=L.pop(),S=L.pop(),!(E-S<=M)&&(R=S+Math.ceil((E-S)/M/2)*M,n(C,R,S,E,O),L.push(S,R,R,E))}e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(533),o=i(535),r=i(248),a=function(l,h,u,v,d,c,p){var g=v.left,m=v.top,x=v.right,y=v.bottom,T=u.faceLeft||u.faceRight,C=u.faceTop||u.faceBottom;if(p||(T=!0,C=!0),!T&&!C)return!1;var S=0,E=0,M=0,O=1;if(h.deltaAbsX()>h.deltaAbsY()?M=-1:h.deltaAbsX()<h.deltaAbsY()&&(O=-1),h.deltaX()!==0&&h.deltaY()!==0&&T&&C&&(M=Math.min(Math.abs(h.position.x-x),Math.abs(h.right-g)),O=Math.min(Math.abs(h.position.y-y),Math.abs(h.bottom-m))),M<O){if(T&&(S=n(h,u,g,x,c,p),S!==0&&!r(v,h)))return!0;C&&(E=o(h,u,m,y,c,p))}else{if(C&&(E=o(h,u,m,y,c,p),E!==0&&!r(v,h)))return!0;T&&(S=n(h,u,g,x,c,p))}return S!==0||E!==0};e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(534),o=function(r,a,l,h,u,v){var d=0,c=a.faceLeft,p=a.faceRight,g=a.collideLeft,m=a.collideRight;return v||(c=!0,p=!0,g=!0,m=!0),r.deltaX()<0&&m&&r.checkCollision.left?p&&r.x<h&&(d=r.x-h,d<-u&&(d=0)):r.deltaX()>0&&g&&r.checkCollision.right&&c&&r.right>l&&(d=r.right-l,d>u&&(d=0)),d!==0&&(r.customSeparateX?r.overlapX=d:n(r,d)),d};e.exports=o},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){o<0?(n.blocked.none=!1,n.blocked.left=!0):o>0&&(n.blocked.none=!1,n.blocked.right=!0),n.position.x-=o,n.bounce.x===0?n.velocity.x=0:n.velocity.x=-n.velocity.x*n.bounce.x};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(536),o=function(r,a,l,h,u,v){var d=0,c=a.faceTop,p=a.faceBottom,g=a.collideUp,m=a.collideDown;return v||(c=!0,p=!0,g=!0,m=!0),r.deltaY()<0&&m&&r.checkCollision.up?p&&r.y<h&&(d=r.y-h,d<-u&&(d=0)):r.deltaY()>0&&g&&r.checkCollision.down&&c&&r.bottom>l&&(d=r.bottom-l,d>u&&(d=0)),d!==0&&(r.customSeparateY?r.overlapY=d:n(r,d)),d};e.exports=o},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){o<0?(n.blocked.none=!1,n.blocked.up=!0):o>0&&(n.blocked.none=!1,n.blocked.down=!0),n.position.y-=o,n.bounce.y===0?n.velocity.y=0:n.velocity.y=-n.velocity.y*n.bounce.y};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(246),o=i(1389),r=function(a,l,h,u){var v=n(a,l,h,u),d=a.immovable,c=l.immovable;if(h||v===0||d&&c||a.customSeparateX||l.customSeparateX)return v!==0||a.embedded&&l.embedded;var p=o.Set(a,l,v);return!d&&!c?p>0?!0:o.Check():(d?o.RunImmovableBody1(p):c&&o.RunImmovableBody2(p),!0)};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(247),o=i(1390),r=function(a,l,h,u){var v=n(a,l,h,u),d=a.immovable,c=l.immovable;if(h||v===0||d&&c||a.customSeparateY||l.customSeparateY)return v!==0||a.embedded&&l.embedded;var p=o.Set(a,l,v);return!d&&!c?p>0?!0:o.Check():(d?o.RunImmovableBody1(p):c&&o.RunImmovableBody2(p),!0)};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(66),o=i(0),r=i(62),a=i(57),l=i(3),h=new o({initialize:function(v,d){var c=d.displayWidth?d.displayWidth:64,p=d.displayHeight?d.displayHeight:64;this.world=v,this.gameObject=d,this.debugShowBody=v.defaults.debugShowStaticBody,this.debugBodyColor=v.defaults.staticBodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new l,this.position=new l(d.x-c*d.originX,d.y-p*d.originY),this.width=c,this.height=p,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center=new l(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=l.ZERO,this.allowGravity=!1,this.gravity=l.ZERO,this.bounce=l.ZERO,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.mass=1,this.immovable=!0,this.pushable=!1,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.physicsType=r.STATIC_BODY,this._dx=0,this._dy=0},setGameObject:function(u,v){return u&&u!==this.gameObject&&(this.gameObject.body=null,u.body=this,this.gameObject=u),v&&this.updateFromGameObject(),this},updateFromGameObject:function(){this.world.staticTree.remove(this);var u=this.gameObject;return u.getTopLeft(this.position),this.width=u.displayWidth,this.height=u.displayHeight,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.world.staticTree.insert(this),this},setOffset:function(u,v){return v===void 0&&(v=u),this.world.staticTree.remove(this),this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(u,v),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this),this},setSize:function(u,v,d){d===void 0&&(d=!0);var c=this.gameObject;if(!u&&c.frame&&(u=c.frame.realWidth),!v&&c.frame&&(v=c.frame.realHeight),this.world.staticTree.remove(this),this.width=u,this.height=v,this.halfWidth=Math.floor(u/2),this.halfHeight=Math.floor(v/2),d&&c.getCenter){var p=c.displayWidth/2,g=c.displayHeight/2;this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(p-this.halfWidth,g-this.halfHeight),this.position.x+=this.offset.x,this.position.y+=this.offset.y}return this.updateCenter(),this.isCircle=!1,this.radius=0,this.world.staticTree.insert(this),this},setCircle:function(u,v,d){return v===void 0&&(v=this.offset.x),d===void 0&&(d=this.offset.y),u>0?(this.world.staticTree.remove(this),this.isCircle=!0,this.radius=u,this.width=u*2,this.height=u*2,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(v,d),this.updateCenter(),this.world.staticTree.insert(this)):this.isCircle=!1,this},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},reset:function(u,v){var d=this.gameObject;u===void 0&&(u=d.x),v===void 0&&(v=d.y),this.world.staticTree.remove(this),d.setPosition(u,v),d.getTopLeft(this.position),this.updateCenter(),this.world.staticTree.insert(this)},stop:function(){return this},getBounds:function(u){return u.x=this.x,u.y=this.y,u.right=this.right,u.bottom=this.bottom,u},hitTest:function(u,v){return this.isCircle?n(this,u,v):a(this,u,v)},postUpdate:function(){},deltaAbsX:function(){return 0},deltaAbsY:function(){return 0},deltaX:function(){return 0},deltaY:function(){return 0},deltaZ:function(){return 0},destroy:function(){this.enable=!1,this.world.pendingDestroy.set(this)},drawDebug:function(u){var v=this.position,d=v.x+this.halfWidth,c=v.y+this.halfHeight;this.debugShowBody&&(u.lineStyle(u.defaultStrokeWidth,this.debugBodyColor,1),this.isCircle?u.strokeCircle(d,c,this.width/2):u.strokeRect(v.x,v.y,this.width,this.height))},willDrawDebug:function(){return this.debugShowBody},setMass:function(u){return u<=0&&(u=.1),this.mass=u,this},x:{get:function(){return this.position.x},set:function(u){this.world.staticTree.remove(this),this.position.x=u,this.world.staticTree.insert(this)}},y:{get:function(){return this.position.y},set:function(u){this.world.staticTree.remove(this),this.position.y=u,this.world.staticTree.insert(this)}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});e.exports=h},function(e,f,i){/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2020 Photon Storm Ltd.
* @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
*/var n=i(0),o=new n({initialize:function(a){this.pluginManager=a,this.game=a.game},init:function(){},start:function(){},stop:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(3),o=new n,r=function(a,l,h,u){var v=h.tilemapLayer,d=v.cullPaddingX,c=v.cullPaddingY,p=v.tilemap.tileToWorldXY(a,l,o,u,v);return p.x>u.worldView.x+v.scaleX*h.tileWidth*(-d-.5)&&p.x<u.worldView.right+v.scaleX*h.tileWidth*(d-.5)&&p.y>u.worldView.y+v.scaleY*h.tileHeight*(-c-1)&&p.y<u.worldView.bottom+v.scaleY*h.tileHeight*(c-.5)};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(26),o=function(r,a,l,h,u,v,d){for(var c=n(l,h,u,v,null,d),p=0;p<c.length;p++)c[p]&&c[p].index===r&&(c[p].index=a)};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(10),o=i(139),r=i(76),a=new n,l=function(h,u){var v=h.tilemapLayer.tilemap,d=h.tilemapLayer,c=Math.floor(v.tileWidth*d.scaleX),p=Math.floor(v.tileHeight*d.scaleY),g=r(u.worldView.x-d.x,c,0,!0)-d.cullPaddingX,m=o(u.worldView.right-d.x,c,0,!0)+d.cullPaddingX,x=r(u.worldView.y-d.y,p,0,!0)-d.cullPaddingY,y=o(u.worldView.bottom-d.y,p,0,!0)+d.cullPaddingY;return a.setTo(g,x,m-g,y-x)};e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(543),o=i(159),r=function(a,l,h,u){h===void 0&&(h=[]),u===void 0&&(u=0),h.length=0;var v=a.tilemapLayer,d=n(a,l);return(v.skipCull||v.scrollFactorX!==1||v.scrollFactorY!==1)&&(d.left=0,d.right=a.width,d.top=0,d.bottom=a.height),o(a,d,u,h),h};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(546),o=i(159),r=function(a,l,h,u){h===void 0&&(h=[]),u===void 0&&(u=0),h.length=0;var v=a.tilemapLayer;if(!v.skipCull&&v.scrollFactorX===1&&v.scrollFactorY===1){var d=n(a,l);o(a,d,u,h)}return h};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(139),o=i(76),r=function(a,l){var h=a.tilemapLayer.tilemap,u=a.tilemapLayer,v=Math.floor(h.tileWidth*u.scaleX),d=Math.floor(h.tileHeight*u.scaleY),c=a.hexSideLength,p=(d-c)/2+c,g=o(l.worldView.x-u.x,v,0,!0)-u.cullPaddingX,m=n(l.worldView.right-u.x,v,0,!0)+u.cullPaddingX,x=o(l.worldView.y-u.y,p,0,!0)-u.cullPaddingY,y=n(l.worldView.bottom-u.y,p,0,!0)+u.cullPaddingY;return{left:g,right:m,top:x,bottom:y}};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(541),o=function(r,a,l,h){l===void 0&&(l=[]),h===void 0&&(h=0),l.length=0;var u=r.tilemapLayer,v=r.data,d=r.width,c=r.height,p=0,g=d,m=0,x=c;if(!u.skipCull){var y,T,C;if(h===0){for(T=m;T<x;T++)for(y=p;v[T]&&y<g;y++)if(n(y,T,r,a)){if(C=v[T][y],!C||C.index===-1||!C.visible||C.alpha===0)continue;l.push(C)}}else if(h===1){for(T=m;T<x;T++)for(y=g;v[T]&&y>=p;y--)if(n(y,T,r,a)){if(C=v[T][y],!C||C.index===-1||!C.visible||C.alpha===0)continue;l.push(C)}}else if(h===2){for(T=x;T>=m;T--)for(y=p;v[T]&&y<g;y++)if(n(y,T,r,a)){if(C=v[T][y],!C||C.index===-1||!C.visible||C.alpha===0)continue;l.push(C)}}else if(h===3){for(T=x;T>=m;T--)for(y=g;v[T]&&y>=p;y--)if(n(y,T,r,a)){if(C=v[T][y],!C||C.index===-1||!C.visible||C.alpha===0)continue;l.push(C)}}}return u.tilesDrawn=l.length,u.tilesTotal=d*c,l};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(549),o=i(159),r=function(a,l,h,u){h===void 0&&(h=[]),u===void 0&&(u=0),h.length=0;var v=a.tilemapLayer;if(!v.skipCull&&v.scrollFactorX===1&&v.scrollFactorY===1){var d=n(a,l);o(a,d,u,h)}return h};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(139),o=i(76),r=function(a,l){var h=a.tilemapLayer.tilemap,u=a.tilemapLayer,v=Math.floor(h.tileWidth*u.scaleX),d=Math.floor(h.tileHeight*u.scaleY),c=o(l.worldView.x-u.x,v,0,!0)-u.cullPaddingX,p=n(l.worldView.right-u.x,v,0,!0)+u.cullPaddingX,g=o(l.worldView.y-u.y,d/2,0,!0)-u.cullPaddingY,m=n(l.worldView.bottom-u.y,d/2,0,!0)+u.cullPaddingY;return{left:c,right:p,top:g,bottom:m}};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(3),o=function(r,a,l,h,u){l||(l=new n);var v=u.baseTileWidth,d=u.baseTileHeight,c=u.tilemapLayer,p=0,g=0;c&&(h||(h=c.scene.cameras.main),p=c.x+h.scrollX*(1-c.scrollFactorX),v*=c.scaleX,g=c.y+h.scrollY*(1-c.scrollFactorY),d*=c.scaleY);var m=u.hexSideLength,x=(d-m)/2+m,y=p+r*v+a%2*(v/2),T=g+a*x;return l.set(y,T)};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(3),o=function(r,a,l,h,u){l||(l=new n);var v=u.baseTileWidth,d=u.baseTileHeight,c=u.tilemapLayer,p=0,g=0;c&&(h||(h=c.scene.cameras.main),p=c.x+h.scrollX*(1-c.scrollFactorX),v*=c.scaleX,g=c.y+h.scrollY*(1-c.scrollFactorY),d*=c.scaleY);var m=p+(r-a)*(v/2),x=g+(r+a)*(d/2);return l.set(m,x)};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(3),o=function(r,a,l,h,u){l||(l=new n);var v=u.baseTileWidth,d=u.baseTileHeight,c=u.tilemapLayer,p=0,g=0;c&&(h||(h=c.scene.cameras.main),p=c.x+h.scrollX*(1-c.scrollFactorX),v*=c.scaleX,g=c.y+h.scrollY*(1-c.scrollFactorY),d*=c.scaleY);var m=p+r*v+a%2*(v/2),x=g+a*(d/2);return l.set(m,x)};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(253),o=i(254),r=i(3),a=function(l,h,u,v,d){return u||(u=new r(0,0)),u.x=n(l,v,d),u.y=o(h,v,d),u};e.exports=a},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r){var a=r.baseTileHeight,l=r.tilemapLayer,h=0;l&&(o===void 0&&(o=l.scene.cameras.main),h=l.y+o.scrollY*(1-l.scrollFactorY),a*=l.scaleY);var u=l.tilemap.hexSideLength,v=(a-u)/2+u;return h+n*v};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r){var a=r.baseTileHeight,l=r.tilemapLayer,h=0;return l&&(o===void 0&&(o=l.scene.cameras.main),h=l.y+o.scrollY*(1-l.scrollFactorY),a*=l.scaleY),h+n*(a/2)};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(3),o=function(r,a,l,h,u,v){h||(h=new n);var d=v.baseTileWidth,c=v.baseTileHeight,p=v.tilemapLayer;p&&(u||(u=p.scene.cameras.main),a=a-(p.y+u.scrollY*(1-p.scrollFactorY)),c*=p.scaleY,r=r-(p.x+u.scrollX*(1-p.scrollFactorX)),d*=p.scaleX);var g=v.hexSideLength,m=(c-g)/2+g,x=l?Math.floor(a/m):a/m,y=l?Math.floor((r-x%2*.5*d)/d):(r-x%2*.5*d)/d;return h.set(y,x)};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(3),o=function(r,a,l,h,u,v){h||(h=new n);var d=v.baseTileWidth,c=v.baseTileHeight,p=v.tilemapLayer;p&&(u||(u=p.scene.cameras.main),a=a-(p.y+u.scrollY*(1-p.scrollFactorY)),c*=p.scaleY,r=r-(p.x+u.scrollX*(1-p.scrollFactorX)),d*=p.scaleX);var g=l?Math.floor((r/(d/2)+a/(c/2))/2):(r/(d/2)+a/(c/2))/2,m=l?Math.floor((a/(c/2)-r/(d/2))/2):(a/(c/2)-r/(d/2))/2;return h.set(g,m)};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(3),o=function(r,a,l,h,u,v){h||(h=new n);var d=v.baseTileWidth,c=v.baseTileHeight,p=v.tilemapLayer;p&&(u||(u=p.scene.cameras.main),a=a-(p.y+u.scrollY*(1-p.scrollFactorY)),c*=p.scaleY,r=r-(p.x+u.scrollX*(1-p.scrollFactorX)),d*=p.scaleX);var g=l?Math.floor(a/(c/2)):a/(c/2),m=l?Math.floor((r+g%2*.5*d)/d):(r+g%2*.5*d)/d;return h.set(m,g)};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(255),o=i(256),r=i(3),a=function(l,h,u,v,d,c){return u===void 0&&(u=!0),v||(v=new r(0,0)),v.x=n(l,u,d,c),v.y=o(h,u,d,c),v};e.exports=a},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r,a){var l=a.baseTileHeight,h=a.tilemapLayer;h&&(r||(r=h.scene.cameras.main),n=n-(h.y+r.scrollY*(1-h.scrollFactorY)),l*=h.scaleY);var u=a.hexSideLength,v=(l-u)/2+u;return o?Math.floor(n/v):n/v};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r,a){var l=a.baseTileHeight,h=a.tilemapLayer;return h&&(r||(r=h.scene.cameras.main),n=n-(h.y+r.scrollY*(1-h.scrollFactorY)),l*=h.scaleY),o?Math.floor(n/(l/2)):n/(l/2)};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(119),o=function(r,a,l){if(n(r,a,l)){var h=l.data[a][r];return h!==null&&h.index>-1}else return!1};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(85),o=i(119),r=i(252),a=function(l,h,u,v,d){if(u===void 0&&(u=!0),v===void 0&&(v=!0),!o(l,h,d))return null;var c=d.data[h][l];if(c)d.data[h][l]=u?null:new n(d,-1,l,h,d.tileWidth,d.tileHeight);else return null;return v&&c&&c.collides&&r(l,h,d),c};e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(40),o=i(259),r=i(565),a=i(566),l=i(577),h=function(u,v,d,c,p,g){var m;switch(v){case n.ARRAY_2D:m=o(u,d,c,p,g);break;case n.CSV:m=r(u,d,c,p,g);break;case n.TILED_JSON:m=a(u,d,g);break;case n.WELTMEISTER:m=l(u,d,g);break;default:console.warn("Unrecognized tilemap data format: "+v),m=null}return m};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(40),o=i(259),r=function(a,l,h,u,v){var d=l.trim().split(`
`).map(function(p){return p.split(",")}),c=o(a,d,h,u,v);return c.format=n.CSV,c};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(567),o=i(568),r=i(29),a=i(40),l=i(258),h=i(121),u=i(569),v=i(570),d=i(573),c=i(575),p=function(g,m,x){var y=new h({width:m.width,height:m.height,name:g,tileWidth:m.tilewidth,tileHeight:m.tileheight,orientation:l(m.orientation),format:a.TILED_JSON,version:m.version,properties:m.properties,renderOrder:m.renderorder,infinite:m.infinite});y.orientation===r.HEXAGONAL&&(y.hexSideLength=m.hexsidelength),y.layers=d(m,x),y.images=u(m);var T=c(m);return y.tilesets=T.tilesets,y.imageCollections=T.imageCollections,y.objects=v(m),y.tiles=o(y),n(y),y};e.exports=p},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(17),o=function(r){for(var a,l,h,u,v,d=0;d<r.layers.length;d++){a=r.layers[d],u=null;for(var c=0;c<a.data.length;c++){v=a.data[c];for(var p=0;p<v.length;p++)l=v[p],!(l===null||l.index<0)&&(h=r.tiles[l.index][2],u=r.tilesets[h],l.width=u.tileWidth,l.height=u.tileHeight,u.tileProperties&&u.tileProperties[l.index-u.firstgid]&&(l.properties=n(l.properties,u.tileProperties[l.index-u.firstgid])))}}};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(122),o=function(r){var a,l,h=[];for(a=0;a<r.imageCollections.length;a++)for(var u=r.imageCollections[a],v=u.images,d=0;d<v.length;d++){var c=v[d];l=new n(c.image,c.gid,u.imageWidth,u.imageHeight,0,0),l.updateTileData(u.imageWidth,u.imageHeight),r.tilesets.push(l)}for(a=0;a<r.tilesets.length;a++){l=r.tilesets[a];for(var p=l.tileMargin,g=l.tileMargin,m=0,x=0,y=0,T=l.firstgid;T<l.firstgid+l.total&&(h[T]=[p,g,a],p+=l.tileWidth+l.tileSpacing,m++,!(m===l.total||(x++,x===l.columns&&(p=l.tileMargin,g+=l.tileHeight+l.tileSpacing,x=0,y++,y===l.rows))));T++);}return h};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(2),o=i(161),r=function(a){for(var l=[],h=[],u=o(a);u.i<u.layers.length||h.length>0;){if(u.i>=u.layers.length){if(h.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}u=h.pop();continue}var v=u.layers[u.i];if(u.i++,v.type!=="imagelayer"){if(v.type==="group"){var d=o(a,v,u);h.push(u),u=d}continue}var c=n(v,"offsetx",0)+n(v,"startx",0),p=n(v,"offsety",0)+n(v,"starty",0);l.push({name:u.name+v.name,image:v.image,x:u.x+c+v.x,y:u.y+p+v.y,alpha:u.opacity*v.opacity,visible:u.visible&&v.visible,properties:n(v,"properties",{})})}return l};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(2),o=i(260),r=i(572),a=i(161),l=function(h){for(var u=[],v=[],d=a(h);d.i<d.layers.length||v.length>0;){if(d.i>=d.layers.length){if(v.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}d=v.pop();continue}var c=d.layers[d.i];if(d.i++,c.opacity*=d.opacity,c.visible=d.visible&&c.visible,c.type!=="objectgroup"){if(c.type==="group"){var p=a(h,c,d);v.push(d),d=p}continue}c.name=d.name+c.name;for(var g=d.x+n(c,"startx",0)+n(c,"offsetx",0),m=d.y+n(c,"starty",0)+n(c,"offsety",0),x=[],y=0;y<c.objects.length;y++){var T=o(c.objects[y],g,m);x.push(T)}var C=new r(c);C.objects=x,u.push(C)}return u};e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(126),o=function(r,a){for(var l={},h=0;h<a.length;h++){var u=a[h];n(r,u)&&(l[u]=r[u])}return l};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(2),r=new n({initialize:function(l){l===void 0&&(l={}),this.name=o(l,"name","object layer"),this.opacity=o(l,"opacity",1),this.properties=o(l,"properties",{}),this.propertyTypes=o(l,"propertytypes",{}),this.type=o(l,"type","objectgroup"),this.visible=o(l,"visible",!0),this.objects=o(l,"objects",[])}});e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(574),o=i(29),r=i(161),a=i(258),l=i(2),h=i(120),u=i(261),v=i(85),d=function(c,p){for(var g=l(c,"infinite",!1),m=[],x=[],y=r(c);y.i<y.layers.length||x.length>0;){if(y.i>=y.layers.length){if(x.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}y=x.pop();continue}var T=y.layers[y.i];if(y.i++,T.type!=="tilelayer"){if(T.type==="group"){var C=r(c,T,y);x.push(y),y=C}continue}if(T.compression){console.warn("TilemapParser.parseTiledJSON - Layer compression is unsupported, skipping layer '"+T.name+"'");continue}else if(T.encoding&&T.encoding==="base64"){if(T.chunks)for(var S=0;S<T.chunks.length;S++)T.chunks[S].data=n(T.chunks[S].data);T.data&&(T.data=n(T.data)),delete T.encoding}var E,M,O,L,R=[],w=0;if(g){var D=l(T,"startx",0)+T.x,B=l(T,"starty",0)+T.y;E=new h({name:y.name+T.name,x:y.x+l(T,"offsetx",0)+D*c.tilewidth,y:y.y+l(T,"offsety",0)+B*c.tileheight,width:T.width,height:T.height,tileWidth:c.tilewidth,tileHeight:c.tileheight,alpha:y.opacity*T.opacity,visible:y.visible&&T.visible,properties:l(T,"properties",[]),orientation:a(c.orientation)}),E.orientation===o.HEXAGONAL&&(E.hexSideLength=c.hexsidelength);for(var N=0;N<T.height;N++){R.push([null]);for(var z=0;z<T.width;z++)R[N][z]=null}for(N=0,Z=T.chunks.length;N<Z;N++)for(var X=T.chunks[N],k=X.x-D,K=X.y-B,b=0,I=0,G=X.data.length;I<G;I++){var Y=w+k,U=b+K;M=u(X.data[I]),M.gid>0?(O=new v(E,M.gid,Y,U,c.tilewidth,c.tileheight),O.rotation=M.rotation,O.flipX=M.flipped,R[U][Y]=O):(L=p?null:new v(E,-1,Y,U,c.tilewidth,c.tileheight),R[U][Y]=L),w++,w===X.width&&(b++,w=0)}}else{E=new h({name:y.name+T.name,x:y.x+l(T,"offsetx",0)+T.x,y:y.y+l(T,"offsety",0)+T.y,width:T.width,height:T.height,tileWidth:c.tilewidth,tileHeight:c.tileheight,alpha:y.opacity*T.opacity,visible:y.visible&&T.visible,properties:l(T,"properties",[]),orientation:a(c.orientation)}),E.orientation===o.HEXAGONAL&&(E.hexSideLength=c.hexsidelength);for(var W=[],H=0,Z=T.data.length;H<Z;H++)M=u(T.data[H]),M.gid>0?(O=new v(E,M.gid,w,R.length,c.tilewidth,c.tileheight),O.rotation=M.rotation,O.flipX=M.flipped,W.push(O)):(L=p?null:new v(E,-1,w,R.length,c.tilewidth,c.tileheight),W.push(L)),w++,w===T.width&&(R.push(W),w=0,W=[])}E.data=R,m.push(E)}return m};e.exports=d},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){for(var o=window.atob(n),r=o.length,a=new Array(r/4),l=0;l<r;l+=4)a[l/4]=(o.charCodeAt(l)|o.charCodeAt(l+1)<<8|o.charCodeAt(l+2)<<16|o.charCodeAt(l+3)<<24)>>>0;return a};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(122),o=i(576),r=i(260),a=i(1453),l=function(h){for(var u=[],v=[],d=null,c,p=0;p<h.tilesets.length;p++){var g=h.tilesets[p];if(g.source)console.warn("External tilesets unsupported. Use Embed Tileset and re-export");else if(g.image){var m=new n(g.name,g.firstgid,g.tilewidth,g.tileheight,g.margin,g.spacing);if(h.version>1){var x=void 0,y=void 0;if(Array.isArray(g.tiles)){x=x||{},y=y||{};for(var T=0;T<g.tiles.length;T++){var C=g.tiles[T];if(C.properties){var S={};C.properties.forEach(function(N){S[N.name]=N.value}),y[C.id]=S}if(C.objectgroup&&((x[C.id]||(x[C.id]={})).objectgroup=C.objectgroup,C.objectgroup.objects)){var E=C.objectgroup.objects.map(function(N){return r(N)});x[C.id].objectgroup.objects=E}C.animation&&((x[C.id]||(x[C.id]={})).animation=C.animation),C.type&&((x[C.id]||(x[C.id]={})).type=C.type)}}Array.isArray(g.wangsets)&&(x=x||{},y=y||{},a(g.wangsets,x)),x&&(m.tileData=x,m.tileProperties=y)}else if(g.tileproperties&&(m.tileProperties=g.tileproperties),g.tiles){m.tileData=g.tiles;for(c in m.tileData){var M=m.tileData[c].objectgroup;if(M&&M.objects){var O=M.objects.map(function(N){return r(N)});m.tileData[c].objectgroup.objects=O}}}m.updateTileData(g.imagewidth,g.imageheight),u.push(m)}else{var L=new o(g.name,g.firstgid,g.tilewidth,g.tileheight,g.margin,g.spacing,g.properties),R=0;for(T=0;T<g.tiles.length;T++){C=g.tiles[T];var w=C.image,D=parseInt(C.id,10),B=g.firstgid+D;L.addImage(B,w),R=Math.max(D,R)}L.maxId=R,v.push(L)}d&&(d.lastgid=g.firstgid-1),d=g}return{tilesets:u,imageCollections:v}};e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=new n({initialize:function(a,l,h,u,v,d,c){(h===void 0||h<=0)&&(h=32),(u===void 0||u<=0)&&(u=32),v===void 0&&(v=0),d===void 0&&(d=0),this.name=a,this.firstgid=l|0,this.imageWidth=h|0,this.imageHeight=u|0,this.imageMargin=v|0,this.imageSpacing=d|0,this.properties=c||{},this.images=[],this.total=0},containsImageIndex:function(r){return r>=this.firstgid&&r<this.firstgid+this.total},addImage:function(r,a){return this.images.push({gid:r,image:a}),this.total++,this}});e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(40),o=i(121),r=i(578),a=i(579),l=function(h,u,v){if(u.layer.length===0)return console.warn("No layers found in the Weltmeister map: "+h),null;for(var d=0,c=0,p=0;p<u.layer.length;p++)u.layer[p].width>d&&(d=u.layer[p].width),u.layer[p].height>c&&(c=u.layer[p].height);var g=new o({width:d,height:c,name:h,tileWidth:u.layer[0].tilesize,tileHeight:u.layer[0].tilesize,format:n.WELTMEISTER});return g.layers=r(u,v),g.tilesets=a(u),g};e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(120),o=i(85),r=function(a,l){for(var h=[],u=0;u<a.layer.length;u++){for(var v=a.layer[u],d=new n({name:v.name,width:v.width,height:v.height,tileWidth:v.tilesize,tileHeight:v.tilesize,visible:v.visible===1}),c=[],p=[],g=0;g<v.data.length;g++){for(var m=0;m<v.data[g].length;m++){var x=v.data[g][m]-1,y;x>-1?y=new o(d,x,m,g,v.tilesize,v.tilesize):y=l?null:new o(d,-1,m,g,v.tilesize,v.tilesize),c.push(y)}p.push(c),c=[]}d.data=p,h.push(d)}return h};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(122),o=function(r){for(var a=[],l=[],h=0;h<r.layer.length;h++){var u=r.layer[h],v=u.tilesetName;v!==""&&l.indexOf(v)===-1&&(l.push(v),a.push(new n(v,0,u.tilesize,u.tilesize,0,0)))}return a};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(36),r=i(40),a=i(2),l=i(120),h=i(29),u=i(362),v=i(74),d=i(73),c=i(85),p=i(251),g=i(581),m=i(122),x=new n({initialize:function(T,C){this.scene=T,this.tileWidth=C.tileWidth,this.tileHeight=C.tileHeight,this.width=C.width,this.height=C.height,this.orientation=C.orientation,this.renderOrder=C.renderOrder,this.format=C.format,this.version=C.version,this.properties=C.properties,this.widthInPixels=C.widthInPixels,this.heightInPixels=C.heightInPixels,this.imageCollections=C.imageCollections,this.images=C.images,this.layers=C.layers,this.tilesets=C.tilesets,this.objects=C.objects,this.currentLayerIndex=0,this.hexSideLength=C.hexSideLength;var S=this.orientation;this._convert={WorldToTileXY:p.GetWorldToTileXYFunction(S),WorldToTileX:p.GetWorldToTileXFunction(S),WorldToTileY:p.GetWorldToTileYFunction(S),TileToWorldXY:p.GetTileToWorldXYFunction(S),TileToWorldX:p.GetTileToWorldXFunction(S),TileToWorldY:p.GetTileToWorldYFunction(S)}},createBlankDynamicLayer:function(y,T,C,S,E,M,O,L){return console.warn("createBlankDynamicLayer is deprecated. Use createBlankLayer"),this.createBlankLayer(y,T,C,S,E,M,O,L)},createDynamicLayer:function(y,T,C,S){return console.warn("createDynamicLayer is deprecated. Use createLayer"),this.createLayer(y,T,C,S)},createStaticLayer:function(y,T,C,S){return console.warn("createStaticLayer is deprecated. Use createLayer"),this.createLayer(y,T,C,S)},setRenderOrder:function(y){var T=["right-down","left-down","right-up","left-up"];return typeof y=="number"&&(y=T[y]),T.indexOf(y)>-1&&(this.renderOrder=y),this},addTilesetImage:function(y,T,C,S,E,M,O){if(y===void 0)return null;if(T==null&&(T=y),!this.scene.sys.textures.exists(T))return console.warn("Invalid Tileset Image: "+T),null;var L=this.scene.sys.textures.get(T),R=this.getTilesetIndex(y);if(R===null&&this.format===r.TILED_JSON)return console.warn("No data found for Tileset: "+y),null;var w=this.tilesets[R];return w?(w.setTileSize(C,S),w.setSpacing(E,M),w.setImage(L),w):(C===void 0&&(C=this.tileWidth),S===void 0&&(S=this.tileHeight),E===void 0&&(E=0),M===void 0&&(M=0),O===void 0&&(O=0),w=new m(y,O,C,S,E,M),w.setImage(L),this.tilesets.push(w),w)},copy:function(y,T,C,S,E,M,O,L){return L=this.getLayer(L),L!==null?(p.Copy(y,T,C,S,E,M,O,L),this):null},createBlankLayer:function(y,T,C,S,E,M,O,L){C===void 0&&(C=0),S===void 0&&(S=0),E===void 0&&(E=this.width),M===void 0&&(M=this.height),O===void 0&&(O=this.tileWidth),L===void 0&&(L=this.tileHeight);var R=this.getLayerIndex(y);if(R!==null)return console.warn("Invalid Tilemap Layer ID: "+y),null;for(var w=new l({name:y,tileWidth:O,tileHeight:L,width:E,height:M,orientation:this.orientation}),D,B=0;B<M;B++){D=[];for(var N=0;N<E;N++)D.push(new c(w,-1,N,B,O,L,this.tileWidth,this.tileHeight));w.data.push(D)}this.layers.push(w),this.currentLayerIndex=this.layers.length-1;var z=new g(this.scene,this,this.currentLayerIndex,T,C,S);return z.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(z),z},createLayer:function(y,T,C,S){var E=this.getLayerIndex(y);if(E===null)return console.warn("Invalid Tilemap Layer ID: "+y),typeof y=="string"&&console.warn(`Valid tilelayer names:
	`+this.getTileLayerNames().join(`,
	`)),null;var M=this.layers[E];if(M.tilemapLayer)return console.warn("Tilemap Layer ID already exists:"+y),null;this.currentLayerIndex=E,C===void 0&&(C=M.x),S===void 0&&(S=M.y);var O=new g(this.scene,this,E,T,C,S);return O.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(O),O},createFromObjects:function(y,T){var C=[],S=this.getObjectLayer(y);if(!S)return console.warn("createFromObjects: Invalid objectLayerName given: "+y),C;Array.isArray(T)||(T=[T]);for(var E=S.objects,M=0;M<T.length;M++){for(var O=T[M],L=a(O,"id",null),R=a(O,"gid",null),w=a(O,"name",null),D,B=[],N=0;N<E.length;N++)D=E[N],(L===null&&R===null&&w===null||L!==null&&D.id===L||R!==null&&D.gid===R||w!==null&&D.name===w)&&B.push(D);for(var z=a(O,"classType",d),X=a(O,"scene",this.scene),k=a(O,"container",null),K=a(O,"key",null),b=a(O,"frame",null),I=0;I<B.length;I++){D=B[I];var G=new z(X);G.setName(D.name),G.setPosition(D.x,D.y),G.setTexture(K,b),D.width&&(G.displayWidth=D.width),D.height&&(G.displayHeight=D.height);var Y={x:G.originX*D.width,y:(G.originY-1)*D.height};if(D.rotation){var U=o(D.rotation);u(Y,U),G.rotation=U}if(G.x+=Y.x,G.y+=Y.y,(D.flippedHorizontal!==void 0||D.flippedVertical!==void 0)&&G.setFlip(D.flippedHorizontal,D.flippedVertical),D.visible||(G.visible=!1),Array.isArray(D.properties))D.properties.forEach(function(H){var Z=H.name;G[Z]!==void 0?G[Z]=H.value:G.setData(Z,H.value)});else for(var W in D.properties)G[W]!==void 0?G[W]=D.properties[W]:G.setData(W,D.properties[W]);k?k.add(G):X.add.existing(G),C.push(G)}}return C},createFromTiles:function(y,T,C,S,E,M){return M=this.getLayer(M),M===null?null:p.CreateFromTiles(y,T,C,S,E,M)},fill:function(y,T,C,S,E,M,O){return M===void 0&&(M=!0),O=this.getLayer(O),O===null?null:(p.Fill(y,T,C,S,E,M,O),this)},filterObjects:function(y,T,C){if(typeof y=="string"){var S=y;if(y=this.getObjectLayer(y),!y)return console.warn("No object layer found with the name: "+S),null}return y.objects.filter(T,C)},filterTiles:function(y,T,C,S,E,M,O,L){return L=this.getLayer(L),L===null?null:p.FilterTiles(y,T,C,S,E,M,O,L)},findByIndex:function(y,T,C,S){return S=this.getLayer(S),S===null?null:p.FindByIndex(y,T,C,S)},findObject:function(y,T,C){if(typeof y=="string"){var S=y;if(y=this.getObjectLayer(y),!y)return console.warn("No object layer found with the name: "+S),null}return y.objects.find(T,C)||null},findTile:function(y,T,C,S,E,M,O,L){return L=this.getLayer(L),L===null?null:p.FindTile(y,T,C,S,E,M,O,L)},forEachTile:function(y,T,C,S,E,M,O,L){return L=this.getLayer(L),L===null?null:(p.ForEachTile(y,T,C,S,E,M,O,L),this)},getImageIndex:function(y){return this.getIndex(this.images,y)},getImageLayerNames:function(){return!this.images||!Array.isArray(this.images)?[]:this.images.map(function(y){return y.name})},getIndex:function(y,T){for(var C=0;C<y.length;C++)if(y[C].name===T)return C;return null},getLayer:function(y){var T=this.getLayerIndex(y);return T!==null?this.layers[T]:null},getObjectLayer:function(y){var T=this.getIndex(this.objects,y);return T!==null?this.objects[T]:null},getObjectLayerNames:function(){return!this.objects||!Array.isArray(this.objects)?[]:this.objects.map(function(y){return y.name})},getLayerIndex:function(y){return y===void 0?this.currentLayerIndex:typeof y=="string"?this.getLayerIndexByName(y):typeof y=="number"&&y<this.layers.length?y:y instanceof g?y.layerIndex:null},getLayerIndexByName:function(y){return this.getIndex(this.layers,y)},getTileAt:function(y,T,C,S){return S=this.getLayer(S),S===null?null:p.GetTileAt(y,T,C,S)},getTileAtWorldXY:function(y,T,C,S,E){return E=this.getLayer(E),E===null?null:p.GetTileAtWorldXY(y,T,C,S,E)},getTileLayerNames:function(){return!this.layers||!Array.isArray(this.layers)?[]:this.layers.map(function(y){return y.name})},getTilesWithin:function(y,T,C,S,E,M){return M=this.getLayer(M),M===null?null:p.GetTilesWithin(y,T,C,S,E,M)},getTilesWithinShape:function(y,T,C,S){return S=this.getLayer(S),S===null?null:p.GetTilesWithinShape(y,T,C,S)},getTilesWithinWorldXY:function(y,T,C,S,E,M,O){return O=this.getLayer(O),O===null?null:p.GetTilesWithinWorldXY(y,T,C,S,E,M,O)},getTileset:function(y){var T=this.getIndex(this.tilesets,y);return T!==null?this.tilesets[T]:null},getTilesetIndex:function(y){return this.getIndex(this.tilesets,y)},hasTileAt:function(y,T,C){return C=this.getLayer(C),C===null?null:p.HasTileAt(y,T,C)},hasTileAtWorldXY:function(y,T,C,S){return S=this.getLayer(S),S===null?null:p.HasTileAtWorldXY(y,T,C,S)},layer:{get:function(){return this.layers[this.currentLayerIndex]},set:function(y){this.setLayer(y)}},putTileAt:function(y,T,C,S,E){return S===void 0&&(S=!0),E=this.getLayer(E),E===null?null:p.PutTileAt(y,T,C,S,E)},putTileAtWorldXY:function(y,T,C,S,E,M){return S===void 0&&(S=!0),M=this.getLayer(M),M===null?null:p.PutTileAtWorldXY(y,T,C,S,E,M)},putTilesAt:function(y,T,C,S,E){return S===void 0&&(S=!0),E=this.getLayer(E),E===null?null:(p.PutTilesAt(y,T,C,S,E),this)},randomize:function(y,T,C,S,E,M){return M=this.getLayer(M),M===null?null:(p.Randomize(y,T,C,S,E,M),this)},calculateFacesAt:function(y,T,C){return C=this.getLayer(C),C===null?null:(p.CalculateFacesAt(y,T,C),this)},calculateFacesWithin:function(y,T,C,S,E){return E=this.getLayer(E),E===null?null:(p.CalculateFacesWithin(y,T,C,S,E),this)},removeLayer:function(y){var T=this.getLayerIndex(y);if(T!==null){v(this.layers,T);for(var C=T;C<this.layers.length;C++)this.layers[C].tilemapLayer&&this.layers[C].tilemapLayer.layerIndex--;return this.currentLayerIndex===T&&(this.currentLayerIndex=0),this}else return null},destroyLayer:function(y){var T=this.getLayerIndex(y);return T!==null?(y=this.layers[T],y.destroy(),v(this.layers,T),this.currentLayerIndex===T&&(this.currentLayerIndex=0),this):null},removeAllLayers:function(){for(var y=this.layers,T=0;T<y.length;T++)y[T].tilemapLayer&&y[T].tilemapLayer.destroy(!1);return y.length=0,this.currentLayerIndex=0,this},removeTile:function(y,T,C){T===void 0&&(T=-1),C===void 0&&(C=!0);var S=[];Array.isArray(y)||(y=[y]);for(var E=0;E<y.length;E++){var M=y[E];S.push(this.removeTileAt(M.x,M.y,!0,C,M.tilemapLayer)),T>-1&&this.putTileAt(T,M.x,M.y,C,M.tilemapLayer)}return S},removeTileAt:function(y,T,C,S,E){return C===void 0&&(C=!0),S===void 0&&(S=!0),E=this.getLayer(E),E===null?null:p.RemoveTileAt(y,T,C,S,E)},removeTileAtWorldXY:function(y,T,C,S,E,M){return C===void 0&&(C=!0),S===void 0&&(S=!0),M=this.getLayer(M),M===null?null:p.RemoveTileAtWorldXY(y,T,C,S,E,M)},renderDebug:function(y,T,C){return C=this.getLayer(C),C===null?null:(this.orientation===h.ORTHOGONAL&&p.RenderDebug(y,T,C),this)},renderDebugFull:function(y,T){for(var C=this.layers,S=0;S<C.length;S++)p.RenderDebug(y,T,C[S]);return this},replaceByIndex:function(y,T,C,S,E,M,O){return O=this.getLayer(O),O===null?null:(p.ReplaceByIndex(y,T,C,S,E,M,O),this)},setCollision:function(y,T,C,S,E){return T===void 0&&(T=!0),C===void 0&&(C=!0),E===void 0&&(E=!0),S=this.getLayer(S),S===null?null:(p.SetCollision(y,T,C,S,E),this)},setCollisionBetween:function(y,T,C,S,E){return C===void 0&&(C=!0),S===void 0&&(S=!0),E=this.getLayer(E),E===null?null:(p.SetCollisionBetween(y,T,C,S,E),this)},setCollisionByProperty:function(y,T,C,S){return T===void 0&&(T=!0),C===void 0&&(C=!0),S=this.getLayer(S),S===null?null:(p.SetCollisionByProperty(y,T,C,S),this)},setCollisionByExclusion:function(y,T,C,S){return T===void 0&&(T=!0),C===void 0&&(C=!0),S=this.getLayer(S),S===null?null:(p.SetCollisionByExclusion(y,T,C,S),this)},setCollisionFromCollisionGroup:function(y,T,C){return y===void 0&&(y=!0),T===void 0&&(T=!0),C=this.getLayer(C),C===null?null:(p.SetCollisionFromCollisionGroup(y,T,C),this)},setTileIndexCallback:function(y,T,C,S){return S=this.getLayer(S),S===null?null:(p.SetTileIndexCallback(y,T,C,S),this)},setTileLocationCallback:function(y,T,C,S,E,M,O){return O=this.getLayer(O),O===null?null:(p.SetTileLocationCallback(y,T,C,S,E,M,O),this)},setLayer:function(y){var T=this.getLayerIndex(y);return T!==null&&(this.currentLayerIndex=T),this},setBaseTileSize:function(y,T){this.tileWidth=y,this.tileHeight=T,this.widthInPixels=this.width*y,this.heightInPixels=this.height*T;for(var C=0;C<this.layers.length;C++){this.layers[C].baseTileWidth=y,this.layers[C].baseTileHeight=T;for(var S=this.layers[C].data,E=this.layers[C].width,M=this.layers[C].height,O=0;O<M;O++)for(var L=0;L<E;L++){var R=S[O][L];R!==null&&R.setSize(void 0,void 0,y,T)}}return this},setLayerTileSize:function(y,T,C){if(C=this.getLayer(C),C===null)return this;C.tileWidth=y,C.tileHeight=T;for(var S=C.data,E=C.width,M=C.height,O=0;O<M;O++)for(var L=0;L<E;L++){var R=S[O][L];R!==null&&R.setSize(y,T)}return this},shuffle:function(y,T,C,S,E){return E=this.getLayer(E),E===null?null:(p.Shuffle(y,T,C,S,E),this)},swapByIndex:function(y,T,C,S,E,M,O){return O=this.getLayer(O),O===null?null:(p.SwapByIndex(y,T,C,S,E,M,O),this)},tileToWorldX:function(y,T,C){return C=this.getLayer(C),C===null?null:this._convert.TileToWorldX(y,T,C)},tileToWorldY:function(y,T,C){return C=this.getLayer(C),C===null?null:this._convert.TileToWorldY(y,T,C)},tileToWorldXY:function(y,T,C,S,E){return E=this.getLayer(E),E===null?null:this._convert.TileToWorldXY(y,T,C,S,E)},weightedRandomize:function(y,T,C,S,E,M){return M=this.getLayer(M),M===null?null:(p.WeightedRandomize(T,C,S,E,y,M),this)},worldToTileX:function(y,T,C,S){return S=this.getLayer(S),S===null?null:this._convert.WorldToTileX(y,T,C,S)},worldToTileY:function(y,T,C,S){return S=this.getLayer(S),S===null?null:this._convert.WorldToTileY(y,T,C,S)},worldToTileXY:function(y,T,C,S,E,M){return M=this.getLayer(M),M===null?null:this._convert.WorldToTileXY(y,T,C,S,E,M)},destroy:function(){this.removeAllLayers(),this.tilesets.length=0,this.objects.length=0,this.scene=null}});e.exports=x},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(11),r=i(15),a=i(251),l=i(1456),h=new n({Extends:r,Mixins:[o.Alpha,o.BlendMode,o.ComputedSize,o.Depth,o.Flip,o.GetBounds,o.Origin,o.Pipeline,o.Transform,o.Visible,o.ScrollFactor,l],initialize:function(v,d,c,p,g,m){r.call(this,v,"TilemapLayer"),this.isTilemap=!0,this.tilemap=d,this.layerIndex=c,this.layer=d.layers[c],this.layer.tilemapLayer=this,this.tileset=[],this.tilesDrawn=0,this.tilesTotal=this.layer.width*this.layer.height,this.culledTiles=[],this.skipCull=!1,this.cullPaddingX=1,this.cullPaddingY=1,this.cullCallback=a.GetCullTilesFunction(this.layer.orientation),this._renderOrder=0,this.gidMap=[],this.setTilesets(p),this.setAlpha(this.layer.alpha),this.setPosition(g,m),this.setOrigin(),this.setSize(d.tileWidth*this.layer.width,d.tileHeight*this.layer.height),this.initPipeline()},setTilesets:function(u){var v=[],d=[],c=this.tilemap;Array.isArray(u)||(u=[u]);for(var p=0;p<u.length;p++){var g=u[p];if(typeof g=="string"&&(g=c.getTileset(g)),g){d.push(g);for(var m=g.firstgid,x=0;x<g.total;x++)v[m+x]=g}}this.gidMap=v,this.tileset=d},setRenderOrder:function(u){var v=["right-down","left-down","right-up","left-up"];return typeof u=="string"&&(u=v.indexOf(u)),u>=0&&u<4&&(this._renderOrder=u),this},calculateFacesAt:function(u,v){return a.CalculateFacesAt(u,v,this.layer),this},calculateFacesWithin:function(u,v,d,c){return a.CalculateFacesWithin(u,v,d,c,this.layer),this},createFromTiles:function(u,v,d,c,p){return a.CreateFromTiles(u,v,d,c,p,this.layer)},cull:function(u){return this.cullCallback(this.layer,u,this.culledTiles,this._renderOrder)},copy:function(u,v,d,c,p,g,m){return a.Copy(u,v,d,c,p,g,m,this.layer),this},fill:function(u,v,d,c,p,g){return a.Fill(u,v,d,c,p,g,this.layer),this},filterTiles:function(u,v,d,c,p,g,m){return a.FilterTiles(u,v,d,c,p,g,m,this.layer)},findByIndex:function(u,v,d){return a.FindByIndex(u,v,d,this.layer)},findTile:function(u,v,d,c,p,g,m){return a.FindTile(u,v,d,c,p,g,m,this.layer)},forEachTile:function(u,v,d,c,p,g,m){return a.ForEachTile(u,v,d,c,p,g,m,this.layer),this},getTileAt:function(u,v,d){return a.GetTileAt(u,v,d,this.layer)},getTileAtWorldXY:function(u,v,d,c){return a.GetTileAtWorldXY(u,v,d,c,this.layer)},getTilesWithin:function(u,v,d,c,p){return a.GetTilesWithin(u,v,d,c,p,this.layer)},getTilesWithinShape:function(u,v,d){return a.GetTilesWithinShape(u,v,d,this.layer)},getTilesWithinWorldXY:function(u,v,d,c,p,g){return a.GetTilesWithinWorldXY(u,v,d,c,p,g,this.layer)},hasTileAt:function(u,v){return a.HasTileAt(u,v,this.layer)},hasTileAtWorldXY:function(u,v,d){return a.HasTileAtWorldXY(u,v,d,this.layer)},putTileAt:function(u,v,d,c){return a.PutTileAt(u,v,d,c,this.layer)},putTileAtWorldXY:function(u,v,d,c,p){return a.PutTileAtWorldXY(u,v,d,c,p,this.layer)},putTilesAt:function(u,v,d,c){return a.PutTilesAt(u,v,d,c,this.layer),this},randomize:function(u,v,d,c,p){return a.Randomize(u,v,d,c,p,this.layer),this},removeTileAt:function(u,v,d,c){return a.RemoveTileAt(u,v,d,c,this.layer)},removeTileAtWorldXY:function(u,v,d,c,p){return a.RemoveTileAtWorldXY(u,v,d,c,p,this.layer)},renderDebug:function(u,v){return a.RenderDebug(u,v,this.layer),this},replaceByIndex:function(u,v,d,c,p,g){return a.ReplaceByIndex(u,v,d,c,p,g,this.layer),this},setSkipCull:function(u){return u===void 0&&(u=!0),this.skipCull=u,this},setCullPadding:function(u,v){return u===void 0&&(u=1),v===void 0&&(v=1),this.cullPaddingX=u,this.cullPaddingY=v,this},setCollision:function(u,v,d,c){return a.SetCollision(u,v,d,this.layer,c),this},setCollisionBetween:function(u,v,d,c){return a.SetCollisionBetween(u,v,d,c,this.layer),this},setCollisionByProperty:function(u,v,d){return a.SetCollisionByProperty(u,v,d,this.layer),this},setCollisionByExclusion:function(u,v,d){return a.SetCollisionByExclusion(u,v,d,this.layer),this},setCollisionFromCollisionGroup:function(u,v){return a.SetCollisionFromCollisionGroup(u,v,this.layer),this},setTileIndexCallback:function(u,v,d){return a.SetTileIndexCallback(u,v,d,this.layer),this},setTileLocationCallback:function(u,v,d,c,p,g){return a.SetTileLocationCallback(u,v,d,c,p,g,this.layer),this},shuffle:function(u,v,d,c){return a.Shuffle(u,v,d,c,this.layer),this},swapByIndex:function(u,v,d,c,p,g){return a.SwapByIndex(u,v,d,c,p,g,this.layer),this},tileToWorldX:function(u,v){return this.tilemap.tileToWorldX(u,v,this)},tileToWorldY:function(u,v){return this.tilemap.tileToWorldY(u,v,this)},tileToWorldXY:function(u,v,d,c){return this.tilemap.tileToWorldXY(u,v,d,c,this)},weightedRandomize:function(u,v,d,c,p){return a.WeightedRandomize(v,d,c,p,u,this.layer),this},worldToTileX:function(u,v,d){return this.tilemap.worldToTileX(u,v,d,this)},worldToTileY:function(u,v,d){return this.tilemap.worldToTileY(u,v,d,this)},worldToTileXY:function(u,v,d,c,p){return this.tilemap.worldToTileXY(u,v,d,c,p,this)},destroy:function(u){u===void 0&&(u=!0),this.tilemap&&(this.layer.tilemapLayer===this&&(this.layer.tilemapLayer=void 0),u&&this.tilemap.removeLayer(this),this.tilemap=void 0,this.layer=void 0,this.culledTiles.length=0,this.cullCallback=null,this.gidMap=[],this.tileset=[],r.prototype.destroy.call(this))}});e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(2),r=new n({initialize:function(l){this.delay=0,this.repeat=0,this.repeatCount=0,this.loop=!1,this.callback,this.callbackScope,this.args,this.timeScale=1,this.startAt=0,this.elapsed=0,this.paused=!1,this.hasDispatched=!1,this.reset(l)},reset:function(a){return this.delay=o(a,"delay",0),this.repeat=o(a,"repeat",0),this.loop=o(a,"loop",!1),this.callback=o(a,"callback",void 0),this.callbackScope=o(a,"callbackScope",this.callback),this.args=o(a,"args",[]),this.timeScale=o(a,"timeScale",1),this.startAt=o(a,"startAt",0),this.paused=o(a,"paused",!1),this.elapsed=this.startAt,this.hasDispatched=!1,this.repeatCount=this.repeat===-1||this.loop?999999999999:this.repeat,this},getProgress:function(){return this.elapsed/this.delay},getOverallProgress:function(){if(this.repeat>0){var a=this.delay+this.delay*this.repeat,l=this.elapsed+this.delay*(this.repeat-this.repeatCount);return l/a}else return this.getProgress()},getRepeatCount:function(){return this.repeatCount},getElapsed:function(){return this.elapsed},getElapsedSeconds:function(){return this.elapsed*.001},getRemaining:function(){return this.delay-this.elapsed},getRemainingSeconds:function(){return this.getRemaining()*.001},getOverallRemaining:function(){return this.delay*(1+this.repeatCount)-this.elapsed},getOverallRemainingSeconds:function(){return this.getOverallRemaining()*.001},remove:function(a){a===void 0&&(a=!1),this.elapsed=this.delay,this.hasDispatched=!a,this.repeatCount=0},destroy:function(){this.callback=void 0,this.callbackScope=void 0,this.args=[]}});e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1465),o=function(r){var a,l=[];if(r.hasOwnProperty("props"))for(a in r.props)a.substr(0,1)!=="_"&&l.push({key:a,value:r.props[a]});else for(a in r)n.indexOf(a)===-1&&a.substr(0,1)!=="_"&&l.push({key:a,value:r[a]});return l};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(6),o=function(r){var a=n(r,"tweens",null);return a===null?[]:(typeof a=="function"&&(a=a.call()),Array.isArray(a)||(a=[a]),a)};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(265),o=i(13),r=i(99),a=i(80),l=i(162),h=i(6),u=i(264),v=i(266),d=i(268),c=function(p,g,m){m===void 0&&(m=n);var x=h(g,"from",0),y=h(g,"to",1),T=[{value:x}],C=l(g,"delay",m.delay),S=l(g,"duration",m.duration),E=h(g,"easeParams",m.easeParams),M=a(h(g,"ease",m.ease),E),O=l(g,"hold",m.hold),L=l(g,"repeat",m.repeat),R=l(g,"repeatDelay",m.repeatDelay),w=r(g,"yoyo",m.yoyo),D=[],B=u("value",y),N=d(T[0],0,"value",B.getEnd,B.getStart,B.getActive,M,C,S,w,O,L,R,!1,!1);N.start=x,N.current=x,N.to=y,D.push(N);var z=new v(p,D,T);z.offset=o(g,"offset",null),z.completeDelay=o(g,"completeDelay",0),z.loop=Math.round(o(g,"loop",0)),z.loopDelay=Math.round(o(g,"loopDelay",0)),z.paused=r(g,"paused",!1),z.useFrames=r(g,"useFrames",!1);for(var X=h(g,"callbackScope",z),k=[z,null],K=v.TYPES,b=0;b<K.length;b++){var I=K[b],G=h(g,I,!1);if(G){var Y=h(g,I+"Scope",X),U=h(g,I+"Params",[]);z.setCallback(I,G,k.concat(U),Y)}}return z};e.exports=c},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(80),o=i(6),r=i(14),a=function(l,h){h===void 0&&(h={});var u,v=o(h,"start",0),d=o(h,"ease",null),c=o(h,"grid",null),p=o(h,"from",0),g=p==="first",m=p==="center",x=p==="last",y=typeof p=="number",T=Array.isArray(l),C=parseFloat(T?l[0]:l),S=T?parseFloat(l[1]):0,E=Math.max(C,S);if(T&&(v+=C),c){var M=c[0],O=c[1],L=0,R=0,w=0,D=0,B=[];x?(L=M-1,R=O-1):y?(L=p%M,R=Math.floor(p/M)):m&&(L=(M-1)/2,R=(O-1)/2);for(var N=r.MIN_SAFE_INTEGER,z=0;z<O;z++){B[z]=[];for(var X=0;X<M;X++){w=L-X,D=R-z;var k=Math.sqrt(w*w+D*D);k>N&&(N=k),B[z][X]=k}}}var K=d?n(d):null;return c?u=function(b,I,G,Y){var U=0,W=Y%M,H=Math.floor(Y/M);W>=0&&W<M&&H>=0&&H<O&&(U=B[H][W]);var Z;if(T){var q=S-C;K?Z=U/N*q*K(U/N):Z=U/N*q}else K?Z=U*C*K(U/N):Z=U*C;return Z+v}:u=function(b,I,G,Y,U){U--;var W;g?W=Y:m?W=Math.abs(U/2-Y):x?W=U-Y:y&&(W=Math.abs(p-Y));var H;if(T){var Z;m?Z=(S-C)/U*(W*2):Z=(S-C)/U*W,K?H=Z*K(W/U):H=Z}else K?H=U*E*K(W/U):H=W*C;return H+v},u};e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(77),o=i(265),r=i(13),a=i(99),l=i(80),h=i(162),u=i(263),v=i(584),d=i(6),c=i(588),p=i(163),g=function(m,x){var y=new c(m);y.completeDelay=r(x,"completeDelay",0),y.loop=Math.round(r(x,"loop",0)),y.loopDelay=Math.round(r(x,"loopDelay",0)),y.paused=a(x,"paused",!1),y.useFrames=a(x,"useFrames",!1);var T=d(x,"callbackScope",y),C=[y],S=d(x,"onStart",!1);if(S){var E=d(x,"onStartScope",T),M=d(x,"onStartParams",[]);y.setCallback("onStart",S,C.concat(M),E)}var O=d(x,"onUpdate",!1);if(O){var L=d(x,"onUpdateScope",T),R=d(x,"onUpdateParams",[]);y.setCallback("onUpdate",O,C.concat(R),L)}var w=d(x,"onLoop",!1);if(w){var D=d(x,"onLoopScope",T),B=d(x,"onLoopParams",[]);y.setCallback("onLoop",w,C.concat(B),D)}var N=d(x,"onYoyo",!1);if(N){var z=d(x,"onYoyoScope",T),X=d(x,"onYoyoParams",[]);y.setCallback("onYoyo",N,C.concat(null,X),z)}var k=d(x,"onComplete",!1);if(k){var K=d(x,"onCompleteScope",T),b=d(x,"onCompleteParams",[]);y.setCallback("onComplete",k,C.concat(b),K)}var I=v(x);if(I.length===0)return y.paused=!0,y;var G=n(o);G.targets=u(x);var Y=r(x,"totalDuration",0);Y>0?G.duration=Math.floor(Y/I.length):G.duration=h(x,"duration",G.duration),G.delay=h(x,"delay",G.delay),G.easeParams=d(x,"easeParams",G.easeParams),G.ease=l(d(x,"ease",G.ease),G.easeParams),G.hold=h(x,"hold",G.hold),G.repeat=h(x,"repeat",G.repeat),G.repeatDelay=h(x,"repeatDelay",G.repeatDelay),G.yoyo=a(x,"yoyo",G.yoyo),G.flipX=a(x,"flipX",G.flipX),G.flipY=a(x,"flipY",G.flipY);for(var U=0;U<I.length;U++)y.queue(p(y,I[U],G));return y};e.exports=g},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(9),r=i(267),a=i(163),l=i(100),h=new n({Extends:o,initialize:function(v){o.call(this),this.manager=v,this.isTimeline=!0,this.data=[],this.totalData=0,this.useFrames=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.completeDelay=0,this.countdown=0,this.state=l.PENDING_ADD,this._pausedState=l.PENDING_ADD,this.paused=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.callbacks={onComplete:null,onLoop:null,onStart:null,onUpdate:null,onYoyo:null},this.callbackScope},dispatchTimelineEvent:function(u,v){this.emit(u,this),v&&v.func.apply(v.scope,v.params)},setTimeScale:function(u){return this.timeScale=u,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return this.state===l.ACTIVE},add:function(u){return this.queue(a(this,u))},queue:function(u){return this.isPlaying()||(u.parent=this,u.parentIsTimeline=!0,this.data.push(u),this.totalData=this.data.length),this},hasOffset:function(u){return u.offset!==null},isOffsetAbsolute:function(u){return typeof u=="number"},isOffsetRelative:function(u){var v=typeof u;if(v==="string"){var d=u[0];if(d==="-"||d==="+")return!0}return!1},getRelativeOffset:function(u,v){var d=u[0],c=parseFloat(u.substr(2)),p=v;switch(d){case"+":p+=c;break;case"-":p-=c;break}return Math.max(0,p)},calcDuration:function(){for(var u=0,v=0,d=0,c=0;c<this.totalData;c++){var p=this.data[c];p.init(),this.hasOffset(p)?this.isOffsetAbsolute(p.offset)?(p.calculatedOffset=p.offset,p.offset===0&&(d=0)):this.isOffsetRelative(p.offset)&&(p.calculatedOffset=this.getRelativeOffset(p.offset,u)):p.calculatedOffset=d,u=p.totalDuration+p.calculatedOffset,v+=p.totalDuration,d+=p.totalDuration}this.duration=v,this.loopCounter=this.loop===-1?999999999999:this.loop,this.loopCounter>0?this.totalDuration=this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.totalDuration=this.duration+this.completeDelay},init:function(){return this.calcDuration(),this.progress=0,this.totalProgress=0,this.paused?(this.state=l.PAUSED,!1):!0},resetTweens:function(u){for(var v=0;v<this.totalData;v++){var d=this.data[v];d.play(u)}},setCallback:function(u,v,d,c){return h.TYPES.indexOf(u)!==-1&&(this.callbacks[u]={func:v,scope:c,params:d}),this},makeActive:function(u){return this.manager.makeActive(u)},play:function(){if(this.state!==l.ACTIVE){if(this.paused){this.paused=!1,this.manager.makeActive(this);return}else this.resetTweens(!1),this.state=l.ACTIVE;this.dispatchTimelineEvent(r.TIMELINE_START,this.callbacks.onStart)}},nextState:function(){this.loopCounter>0?(this.elapsed=0,this.progress=0,this.loopCounter--,this.resetTweens(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.state=l.LOOP_DELAY):(this.state=l.ACTIVE,this.dispatchTimelineEvent(r.TIMELINE_LOOP,this.callbacks.onLoop))):this.completeDelay>0?(this.state=l.COMPLETE_DELAY,this.countdown=this.completeDelay):(this.state=l.PENDING_REMOVE,this.dispatchTimelineEvent(r.TIMELINE_COMPLETE,this.callbacks.onComplete))},update:function(u,v){if(this.state!==l.PAUSED){switch(this.useFrames&&(v=1*this.manager.timeScale),v*=this.timeScale,this.elapsed+=v,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=v,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),this.state){case l.ACTIVE:for(var d=this.totalData,c=0;c<this.totalData;c++){var p=this.data[c];p.update(u,v)&&d--}this.dispatchTimelineEvent(r.TIMELINE_UPDATE,this.callbacks.onUpdate),d===0&&this.nextState();break;case l.LOOP_DELAY:this.countdown-=v,this.countdown<=0&&(this.state=l.ACTIVE,this.dispatchTimelineEvent(r.TIMELINE_LOOP,this.callbacks.onLoop));break;case l.COMPLETE_DELAY:this.countdown-=v,this.countdown<=0&&(this.state=l.PENDING_REMOVE,this.dispatchTimelineEvent(r.TIMELINE_COMPLETE,this.callbacks.onComplete));break}return this.state===l.PENDING_REMOVE}},stop:function(){this.state=l.PENDING_REMOVE},pause:function(){if(this.state!==l.PAUSED)return this.paused=!0,this._pausedState=this.state,this.state=l.PAUSED,this.emit(r.TIMELINE_PAUSE,this),this},resume:function(){return this.state===l.PAUSED&&(this.paused=!1,this.state=this._pausedState,this.emit(r.TIMELINE_RESUME,this)),this},hasTarget:function(u){for(var v=0;v<this.data.length;v++)if(this.data[v].hasTarget(u))return!0;return!1},destroy:function(){for(var u=0;u<this.data.length;u++)this.data[u].stop()}});h.TYPES=["onStart","onUpdate","onLoop","onComplete","onYoyo"],e.exports=h},function(e,f,i){/**
 * @author       Joachim Grill <joachim@codeandweb.com>
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2018 CodeAndWeb GmbH
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(86),o=i(41),r=i(32),a=i(2),l=i(64),h={parseBody:function(u,v,d,c){c===void 0&&(c={});for(var p=a(d,"fixtures",[]),g=[],m=0;m<p.length;m++)for(var x=this.parseFixture(p[m]),y=0;y<x.length;y++)g.push(x[y]);var T=r.clone(d,!0);r.extend(T,c,!0),delete T.fixtures,delete T.type;var C=o.create(T);return o.setParts(C,g),o.setPosition(C,{x:u,y:v}),C},parseFixture:function(u){var v=r.extend({},!1,u);delete v.circle,delete v.vertices;var d;if(u.circle){var c=a(u.circle,"x"),p=a(u.circle,"y"),g=a(u.circle,"radius");d=[n.circle(c,p,g,v)]}else u.vertices&&(d=this.parseVertices(u.vertices,v));return d},parseVertices:function(u,v){v===void 0&&(v={});for(var d=[],c=0;c<u.length;c++)l.clockwiseSort(u[c]),d.push(o.create(r.extend({position:l.centre(u[c]),vertices:u[c]},v)));return n.flagCoincidentParts(d)}};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(86),o=i(41),r={parseBody:function(a,l,h,u){u===void 0&&(u={});var v,d=h.vertices;if(d.length===1)u.vertices=d[0],v=o.create(u),n.flagCoincidentParts(v.parts);else{for(var c=[],p=0;p<d.length;p++){var g=o.create({vertices:d[p]});c.push(g)}n.flagCoincidentParts(c),u.parts=c,v=o.create(u)}return v.label=h.label,o.setPosition(v,{x:a,y:l}),v}};e.exports=r},function(e,f,i){var n={};e.exports=n;var o=i(118),r=i(128),a=i(32),l=i(41),h=i(86);(function(){n.stack=function(u,v,d,c,p,g,m){for(var x=o.create({label:"Stack"}),y=u,T=v,C,S=0,E=0;E<c;E++){for(var M=0,O=0;O<d;O++){var L=m(y,T,O,E,C,S);if(L){var R=L.bounds.max.y-L.bounds.min.y,w=L.bounds.max.x-L.bounds.min.x;R>M&&(M=R),l.translate(L,{x:w*.5,y:R*.5}),y=L.bounds.max.x+p,o.addBody(x,L),C=L,S+=1}else y+=p}T+=M+g,y=u}return x},n.chain=function(u,v,d,c,p,g){for(var m=u.bodies,x=1;x<m.length;x++){var y=m[x-1],T=m[x],C=y.bounds.max.y-y.bounds.min.y,S=y.bounds.max.x-y.bounds.min.x,E=T.bounds.max.y-T.bounds.min.y,M=T.bounds.max.x-T.bounds.min.x,O={bodyA:y,pointA:{x:S*v,y:C*d},bodyB:T,pointB:{x:M*c,y:E*p}},L=a.extend(O,g);o.addConstraint(u,r.create(L))}return u.label+=" Chain",u},n.mesh=function(u,v,d,c,p){var g=u.bodies,m,x,y,T,C;for(m=0;m<d;m++){for(x=1;x<v;x++)y=g[x-1+m*v],T=g[x+m*v],o.addConstraint(u,r.create(a.extend({bodyA:y,bodyB:T},p)));if(m>0)for(x=0;x<v;x++)y=g[x+(m-1)*v],T=g[x+m*v],o.addConstraint(u,r.create(a.extend({bodyA:y,bodyB:T},p))),c&&x>0&&(C=g[x-1+(m-1)*v],o.addConstraint(u,r.create(a.extend({bodyA:C,bodyB:T},p)))),c&&x<v-1&&(C=g[x+1+(m-1)*v],o.addConstraint(u,r.create(a.extend({bodyA:C,bodyB:T},p))))}return u.label+=" Mesh",u},n.pyramid=function(u,v,d,c,p,g,m){return n.stack(u,v,d,c,p,g,function(x,y,T,C,S,E){var M=Math.min(c,Math.ceil(d/2)),O=S?S.bounds.max.x-S.bounds.min.x:0;if(!(C>M)){C=M-C;var L=C,R=d-1-C;if(!(T<L||T>R)){E===1&&l.translate(S,{x:(T+(d%2===1?1:-1))*O,y:0});var w=S?T*O:0;return m(u+w+T*p,y,T,C,S,E)}}})},n.newtonsCradle=function(u,v,d,c,p){for(var g=o.create({label:"Newtons Cradle"}),m=0;m<d;m++){var x=1.9,y=h.circle(u+m*(c*x),v+p,c,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),T=r.create({pointA:{x:u+m*(c*x),y:v},bodyB:y});o.addBody(g,y),o.addConstraint(g,T)}return g},n.car=function(u,v,d,c,p){var g=l.nextGroup(!0),m=20,x=-d*.5+m,y=d*.5-m,T=0,C=o.create({label:"Car"}),S=h.rectangle(u,v,d,c,{collisionFilter:{group:g},chamfer:{radius:c*.5},density:2e-4}),E=h.circle(u+x,v+T,p,{collisionFilter:{group:g},friction:.8}),M=h.circle(u+y,v+T,p,{collisionFilter:{group:g},friction:.8}),O=r.create({bodyB:S,pointB:{x,y:T},bodyA:E,stiffness:1,length:0}),L=r.create({bodyB:S,pointB:{x:y,y:T},bodyA:M,stiffness:1,length:0});return o.addBody(C,S),o.addBody(C,E),o.addBody(C,M),o.addConstraint(C,O),o.addConstraint(C,L),C},n.softBody=function(u,v,d,c,p,g,m,x,y,T){y=a.extend({inertia:1/0},y),T=a.extend({stiffness:.2,render:{type:"line",anchors:!1}},T);var C=n.stack(u,v,d,c,p,g,function(S,E){return h.circle(S,E,x,y)});return n.mesh(C,d,c,m,T),C.label="Soft Body",C}})()},function(e,f,i){var n={};e.exports=n,i(84);var o=i(32);(function(){n.pathToVertices=function(r,a){typeof window!="undefined"&&!("SVGPathSeg"in window)&&o.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var l,h,u,v,d,c,p,g,m,x,y=[],T,C,S=0,E=0,M=0;a=a||15;var O=function(R,w,D){var B=D%2===1&&D>1;if(!m||R!=m.x||w!=m.y){m&&B?(T=m.x,C=m.y):(T=0,C=0);var N={x:T+R,y:C+w};(B||!m)&&(m=N),y.push(N),E=T+R,M=C+w}},L=function(R){var w=R.pathSegTypeAsLetter.toUpperCase();if(w!=="Z"){switch(w){case"M":case"L":case"T":case"C":case"S":case"Q":E=R.x,M=R.y;break;case"H":E=R.x;break;case"V":M=R.y;break}O(E,M,R.pathSegType)}};for(n._svgPathToAbsolute(r),u=r.getTotalLength(),c=[],l=0;l<r.pathSegList.numberOfItems;l+=1)c.push(r.pathSegList.getItem(l));for(p=c.concat();S<u;){if(x=r.getPathSegAtLength(S),d=c[x],d!=g){for(;p.length&&p[0]!=d;)L(p.shift());g=d}switch(d.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":v=r.getPointAtLength(S),O(v.x,v.y,0);break}S+=a}for(l=0,h=p.length;l<h;++l)L(p[l]);return y},n._svgPathToAbsolute=function(r){for(var a,l,h,u,v,d,c=r.pathSegList,p=0,g=0,m=c.numberOfItems,x=0;x<m;++x){var y=c.getItem(x),T=y.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(T))"x"in y&&(p=y.x),"y"in y&&(g=y.y);else switch("x1"in y&&(h=p+y.x1),"x2"in y&&(v=p+y.x2),"y1"in y&&(u=g+y.y1),"y2"in y&&(d=g+y.y2),"x"in y&&(p+=y.x),"y"in y&&(g+=y.y),T){case"m":c.replaceItem(r.createSVGPathSegMovetoAbs(p,g),x);break;case"l":c.replaceItem(r.createSVGPathSegLinetoAbs(p,g),x);break;case"h":c.replaceItem(r.createSVGPathSegLinetoHorizontalAbs(p),x);break;case"v":c.replaceItem(r.createSVGPathSegLinetoVerticalAbs(g),x);break;case"c":c.replaceItem(r.createSVGPathSegCurvetoCubicAbs(p,g,h,u,v,d),x);break;case"s":c.replaceItem(r.createSVGPathSegCurvetoCubicSmoothAbs(p,g,v,d),x);break;case"q":c.replaceItem(r.createSVGPathSegCurvetoQuadraticAbs(p,g,h,u),x);break;case"t":c.replaceItem(r.createSVGPathSegCurvetoQuadraticSmoothAbs(p,g),x);break;case"a":c.replaceItem(r.createSVGPathSegArcAbs(p,g,y.r1,y.r2,y.angle,y.largeArcFlag,y.sweepFlag),x);break;case"z":case"Z":p=a,g=l;break}(T=="M"||T=="m")&&(a=p,l=g)}}})()},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(86),o=i(41),r=i(0),a=i(249),l=i(9),h=i(2),u=i(126),v=i(64),d=new r({Extends:l,Mixins:[a.Bounce,a.Collision,a.Friction,a.Gravity,a.Mass,a.Sensor,a.Sleep,a.Static],initialize:function(p,g,m){l.call(this),this.tile=g,this.world=p,g.physics.matterBody&&g.physics.matterBody.destroy(),g.physics.matterBody=this;var x=h(m,"body",null),y=h(m,"addToWorld",!0);if(x)this.setBody(x,y);else{var T=g.getCollisionGroup(),C=h(T,"objects",[]);C.length>0?this.setFromTileCollision(m):this.setFromTileRectangle(m)}},setFromTileRectangle:function(c){c===void 0&&(c={}),u(c,"isStatic")||(c.isStatic=!0),u(c,"addToWorld")||(c.addToWorld=!0);var p=this.tile.getBounds(),g=p.x+p.width/2,m=p.y+p.height/2,x=n.rectangle(g,m,p.width,p.height,c);return this.setBody(x,c.addToWorld),this},setFromTileCollision:function(c){c===void 0&&(c={}),u(c,"isStatic")||(c.isStatic=!0),u(c,"addToWorld")||(c.addToWorld=!0);for(var p=this.tile.tilemapLayer.scaleX,g=this.tile.tilemapLayer.scaleY,m=this.tile.getLeft(),x=this.tile.getTop(),y=this.tile.getCollisionGroup(),T=h(y,"objects",[]),C=[],S=0;S<T.length;S++){var E=T[S],M=m+E.x*p,O=x+E.y*g,L=E.width*p,R=E.height*g,w=null;if(E.rectangle)w=n.rectangle(M+L/2,O+R/2,L,R,c);else if(E.ellipse)w=n.circle(M+L/2,O+R/2,L/2,c);else if(E.polygon||E.polyline){var D=E.polygon?E.polygon:E.polyline,B=D.map(function(X){return{x:X.x*p,y:X.y*g}}),N=v.create(B),z=v.centre(N);M+=z.x,O+=z.y,w=n.fromVertices(M,O,N,c)}w&&C.push(w)}return C.length===1?this.setBody(C[0],c.addToWorld):C.length>1&&(c.parts=C,this.setBody(o.create(c),c.addToWorld)),this},setBody:function(c,p){return p===void 0&&(p=!0),this.body&&this.removeBody(),this.body=c,this.body.gameObject=this,p&&this.world.add(this.body),this},removeBody:function(){return this.body&&(this.world.remove(this.body),this.body.gameObject=void 0,this.body=void 0),this},destroy:function(){this.removeBody(),this.tile.physics.matterBody=void 0,this.removeAllListeners()}});e.exports=d},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1399);n.Body=i(41),n.Composite=i(118),n.World=i(596),n.Detector=i(273),n.Grid=i(597),n.Pairs=i(598),n.Pair=i(250),n.Query=i(1400),n.Resolver=i(599),n.SAT=i(274),n.Constraint=i(128),n.Common=i(32),n.Engine=i(1401),n.Events=i(166),n.Sleeping=i(165),n.Plugin=i(595),n.Bodies=i(86),n.Composites=i(591),n.Axes=i(271),n.Bounds=i(84),n.Svg=i(592),n.Vector=i(83),n.Vertices=i(64),n.World.add=n.Composite.add,n.World.remove=n.Composite.remove,n.World.addComposite=n.Composite.addComposite,n.World.addBody=n.Composite.addBody,n.World.addConstraint=n.Composite.addConstraint,n.World.clear=n.Composite.clear,e.exports=n},function(e,f,i){var n={};e.exports=n;var o=i(32);(function(){n._registry={},n.register=function(r){if(n.isPlugin(r)||o.warn("Plugin.register:",n.toString(r),"does not implement all required fields."),r.name in n._registry){var a=n._registry[r.name],l=n.versionParse(r.version).number,h=n.versionParse(a.version).number;l>h?(o.warn("Plugin.register:",n.toString(a),"was upgraded to",n.toString(r)),n._registry[r.name]=r):l<h?o.warn("Plugin.register:",n.toString(a),"can not be downgraded to",n.toString(r)):r!==a&&o.warn("Plugin.register:",n.toString(r),"is already registered to different plugin object")}else n._registry[r.name]=r;return r},n.resolve=function(r){return n._registry[n.dependencyParse(r).name]},n.toString=function(r){return typeof r=="string"?r:(r.name||"anonymous")+"@"+(r.version||r.range||"0.0.0")},n.isPlugin=function(r){return r&&r.name&&r.version&&r.install},n.isUsed=function(r,a){return r.used.indexOf(a)>-1},n.isFor=function(r,a){var l=r.for&&n.dependencyParse(r.for);return!r.for||a.name===l.name&&n.versionSatisfies(a.version,l.range)},n.use=function(r,a){if(r.uses=(r.uses||[]).concat(a||[]),r.uses.length===0){o.warn("Plugin.use:",n.toString(r),"does not specify any dependencies to install.");return}for(var l=n.dependencies(r),h=o.topologicalSort(l),u=[],v=0;v<h.length;v+=1)if(h[v]!==r.name){var d=n.resolve(h[v]);if(!d){u.push("\u274C "+h[v]);continue}n.isUsed(r,d.name)||(n.isFor(d,r)||(o.warn("Plugin.use:",n.toString(d),"is for",d.for,"but installed on",n.toString(r)+"."),d._warned=!0),d.install?d.install(r):(o.warn("Plugin.use:",n.toString(d),"does not specify an install function."),d._warned=!0),d._warned?(u.push("\u{1F536} "+n.toString(d)),delete d._warned):u.push("\u2705 "+n.toString(d)),r.used.push(d.name))}u.length>0&&!d.silent&&o.info(u.join("  "))},n.dependencies=function(r,a){var l=n.dependencyParse(r),h=l.name;if(a=a||{},!(h in a)){r=n.resolve(r)||r,a[h]=o.map(r.uses||[],function(v){n.isPlugin(v)&&n.register(v);var d=n.dependencyParse(v),c=n.resolve(v);return c&&!n.versionSatisfies(c.version,d.range)?(o.warn("Plugin.dependencies:",n.toString(c),"does not satisfy",n.toString(d),"used by",n.toString(l)+"."),c._warned=!0,r._warned=!0):c||(o.warn("Plugin.dependencies:",n.toString(v),"used by",n.toString(l),"could not be resolved."),r._warned=!0),d.name});for(var u=0;u<a[h].length;u+=1)n.dependencies(a[h][u],a);return a}},n.dependencyParse=function(r){if(o.isString(r)){var a=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?))?$/;return a.test(r)||o.warn("Plugin.dependencyParse:",r,"is not a valid dependency string."),{name:r.split("@")[0],range:r.split("@")[1]||"*"}}return{name:r.name,range:r.range||r.version}},n.versionParse=function(r){var a=/^\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?$/;a.test(r)||o.warn("Plugin.versionParse:",r,"is not a valid version or range.");var l=r.split("-");r=l[0];var h=isNaN(Number(r[0])),u=h?r.substr(1):r,v=o.map(u.split("."),function(d){return Number(d)});return{isRange:h,version:u,range:r,operator:h?r[0]:"",parts:v,prerelease:l[1],number:v[0]*1e8+v[1]*1e4+v[2]}},n.versionSatisfies=function(r,a){a=a||"*";var l=n.versionParse(a),h=l.parts,u=n.versionParse(r),v=u.parts;if(l.isRange){if(l.operator==="*"||r==="*")return!0;if(l.operator==="~")return v[0]===h[0]&&v[1]===h[1]&&v[2]>=h[2];if(l.operator==="^")return h[0]>0?v[0]===h[0]&&u.number>=l.number:h[1]>0?v[1]===h[1]&&v[2]>=h[2]:v[2]===h[2]}return r===a||r==="*"}})()},function(e,f,i){var n={};e.exports=n;var o=i(118);i(128);var r=i(32);(function(){n.create=function(a){var l=o.create(),h={label:"World",gravity:{x:0,y:1,scale:.001},bounds:{min:{x:-1/0,y:-1/0},max:{x:1/0,y:1/0}}};return r.extend(l,h,a)}})()},function(e,f,i){var n={};e.exports=n;var o=i(250),r=i(273),a=i(32);(function(){n.create=function(l){var h={controller:n,detector:r.collisions,buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return a.extend(h,l)},n.update=function(l,h,u,v){var d,c,p,g=u.world,m=l.buckets,x,y,T=!1,C=u.metrics;for(C.broadphaseTests=0,d=0;d<h.length;d++){var S=h[d];if(!(S.isSleeping&&!v)&&!(S.bounds.max.x<g.bounds.min.x||S.bounds.min.x>g.bounds.max.x||S.bounds.max.y<g.bounds.min.y||S.bounds.min.y>g.bounds.max.y)){var E=n._getRegion(l,S);if(!S.region||E.id!==S.region.id||v){C.broadphaseTests+=1,(!S.region||v)&&(S.region=E);var M=n._regionUnion(E,S.region);for(c=M.startCol;c<=M.endCol;c++)for(p=M.startRow;p<=M.endRow;p++){y=n._getBucketId(c,p),x=m[y];var O=c>=E.startCol&&c<=E.endCol&&p>=E.startRow&&p<=E.endRow,L=c>=S.region.startCol&&c<=S.region.endCol&&p>=S.region.startRow&&p<=S.region.endRow;!O&&L&&L&&x&&n._bucketRemoveBody(l,x,S),(S.region===E||O&&!L||v)&&(x||(x=n._createBucket(m,y)),n._bucketAddBody(l,x,S))}S.region=E,T=!0}}}T&&(l.pairsList=n._createActivePairsList(l))},n.clear=function(l){l.buckets={},l.pairs={},l.pairsList=[]},n._regionUnion=function(l,h){var u=Math.min(l.startCol,h.startCol),v=Math.max(l.endCol,h.endCol),d=Math.min(l.startRow,h.startRow),c=Math.max(l.endRow,h.endRow);return n._createRegion(u,v,d,c)},n._getRegion=function(l,h){var u=h.bounds,v=Math.floor(u.min.x/l.bucketWidth),d=Math.floor(u.max.x/l.bucketWidth),c=Math.floor(u.min.y/l.bucketHeight),p=Math.floor(u.max.y/l.bucketHeight);return n._createRegion(v,d,c,p)},n._createRegion=function(l,h,u,v){return{id:l+","+h+","+u+","+v,startCol:l,endCol:h,startRow:u,endRow:v}},n._getBucketId=function(l,h){return"C"+l+"R"+h},n._createBucket=function(l,h){var u=l[h]=[];return u},n._bucketAddBody=function(l,h,u){for(var v=0;v<h.length;v++){var d=h[v];if(!(u.id===d.id||u.isStatic&&d.isStatic)){var c=o.id(u,d),p=l.pairs[c];p?p[2]+=1:l.pairs[c]=[u,d,1]}}h.push(u)},n._bucketRemoveBody=function(l,h,u){h.splice(h.indexOf(u),1);for(var v=0;v<h.length;v++){var d=h[v],c=o.id(u,d),p=l.pairs[c];p&&(p[2]-=1)}},n._createActivePairsList=function(l){var h,u,v=[];h=a.keys(l.pairs);for(var d=0;d<h.length;d++)u=l.pairs[h[d]],u[2]>0?v.push(u):delete l.pairs[h[d]];return v}})()},function(e,f,i){var n={};e.exports=n;var o=i(250),r=i(32);(function(){n._pairMaxIdleLife=1e3,n.create=function(a){return r.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},a)},n.update=function(a,l,h){var u=a.list,v=a.table,d=a.collisionStart,c=a.collisionEnd,p=a.collisionActive,g,m,x,y;for(d.length=0,c.length=0,p.length=0,y=0;y<u.length;y++)u[y].confirmedActive=!1;for(y=0;y<l.length;y++)g=l[y],g.collided&&(m=o.id(g.bodyA,g.bodyB),x=v[m],x?(x.isActive?p.push(x):d.push(x),o.update(x,g,h),x.confirmedActive=!0):(x=o.create(g,h),v[m]=x,d.push(x),u.push(x)));for(y=0;y<u.length;y++)x=u[y],x.isActive&&!x.confirmedActive&&(o.setActive(x,!1,h),c.push(x))},n.removeOld=function(a,l){var h=a.list,u=a.table,v=[],d,c,p,g;for(g=0;g<h.length;g++){if(d=h[g],c=d.collision,c.bodyA.isSleeping||c.bodyB.isSleeping){d.timeUpdated=l;continue}l-d.timeUpdated>n._pairMaxIdleLife&&v.push(g)}for(g=0;g<v.length;g++)p=v[g]-g,d=h[p],delete u[d.id],h.splice(p,1)},n.clear=function(a){return a.table={},a.list.length=0,a.collisionStart.length=0,a.collisionActive.length=0,a.collisionEnd.length=0,a}})()},function(e,f,i){var n={};e.exports=n;var o=i(64),r=i(83),a=i(32),l=i(84);(function(){n._restingThresh=4,n._restingThreshTangent=6,n._positionDampen=.9,n._positionWarming=.8,n._frictionNormalMultiplier=5,n.preSolvePosition=function(h){var u,v,d;for(u=0;u<h.length;u++)v=h[u],v.isActive&&(d=v.activeContacts.length,v.collision.parentA.totalContacts+=d,v.collision.parentB.totalContacts+=d)},n.solvePosition=function(h,u,v){var d,c,p,g,m,x,y,T,C,S,E,M,O,L,R,w,D=v*n._positionDampen;for(d=0;d<u.length;d++){var B=u[d];B.previousPositionImpulse.x=B.positionImpulse.x,B.previousPositionImpulse.y=B.positionImpulse.y}for(d=0;d<h.length;d++)g=h[d],!(!g.isActive||g.isSensor)&&(m=g.collision,x=m.parentA,y=m.parentB,T=m.normal,E=x.previousPositionImpulse,M=y.previousPositionImpulse,S=m.penetration,L=M.x-E.x+S.x,R=M.y-E.y+S.y,c=T.x,p=T.y,C=c*L+p*R,g.separation=C,w=(C-g.slop)*D,(x.isStatic||y.isStatic)&&(w*=2),x.isStatic||x.isSleeping||(O=w/x.totalContacts,x.positionImpulse.x+=c*O,x.positionImpulse.y+=p*O),y.isStatic||y.isSleeping||(O=w/y.totalContacts,y.positionImpulse.x-=c*O,y.positionImpulse.y-=p*O))},n.postSolvePosition=function(h){for(var u=0;u<h.length;u++){var v=h[u];if(v.totalContacts=0,v.positionImpulse.x!==0||v.positionImpulse.y!==0){for(var d=0;d<v.parts.length;d++){var c=v.parts[d];o.translate(c.vertices,v.positionImpulse),l.update(c.bounds,c.vertices,v.velocity),c.position.x+=v.positionImpulse.x,c.position.y+=v.positionImpulse.y}v.positionPrev.x+=v.positionImpulse.x,v.positionPrev.y+=v.positionImpulse.y,r.dot(v.positionImpulse,v.velocity)<0?(v.positionImpulse.x=0,v.positionImpulse.y=0):(v.positionImpulse.x*=n._positionWarming,v.positionImpulse.y*=n._positionWarming)}}},n.preSolveVelocity=function(h){var u,v,d,c,p,g,m,x,y,T,C,S,E,M,O=r._temp[0],L=r._temp[1];for(u=0;u<h.length;u++)if(d=h[u],!(!d.isActive||d.isSensor))for(c=d.activeContacts,p=d.collision,g=p.parentA,m=p.parentB,x=p.normal,y=p.tangent,v=0;v<c.length;v++)T=c[v],C=T.vertex,S=T.normalImpulse,E=T.tangentImpulse,(S!==0||E!==0)&&(O.x=x.x*S+y.x*E,O.y=x.y*S+y.y*E,g.isStatic||g.isSleeping||(M=r.sub(C,g.position,L),g.positionPrev.x+=O.x*g.inverseMass,g.positionPrev.y+=O.y*g.inverseMass,g.anglePrev+=r.cross(M,O)*g.inverseInertia),m.isStatic||m.isSleeping||(M=r.sub(C,m.position,L),m.positionPrev.x-=O.x*m.inverseMass,m.positionPrev.y-=O.y*m.inverseMass,m.anglePrev-=r.cross(M,O)*m.inverseInertia))},n.solveVelocity=function(h,u){for(var v=u*u,d=r._temp[0],c=r._temp[1],p=r._temp[2],g=r._temp[3],m=r._temp[4],x=r._temp[5],y=0;y<h.length;y++){var T=h[y];if(!(!T.isActive||T.isSensor)){var C=T.collision,S=C.parentA,E=C.parentB,M=C.normal,O=C.tangent,L=T.activeContacts,R=1/L.length;S.velocity.x=S.position.x-S.positionPrev.x,S.velocity.y=S.position.y-S.positionPrev.y,E.velocity.x=E.position.x-E.positionPrev.x,E.velocity.y=E.position.y-E.positionPrev.y,S.angularVelocity=S.angle-S.anglePrev,E.angularVelocity=E.angle-E.anglePrev;for(var w=0;w<L.length;w++){var D=L[w],B=D.vertex,N=r.sub(B,S.position,c),z=r.sub(B,E.position,p),X=r.add(S.velocity,r.mult(r.perp(N),S.angularVelocity),g),k=r.add(E.velocity,r.mult(r.perp(z),E.angularVelocity),m),K=r.sub(X,k,x),b=r.dot(M,K),I=r.dot(O,K),G=Math.abs(I),Y=a.sign(I),U=(1+T.restitution)*b,W=a.clamp(T.separation+b,0,1)*n._frictionNormalMultiplier,H=I,Z=1/0;G>T.friction*T.frictionStatic*W*v&&(Z=G,H=a.clamp(T.friction*Y*v,-Z,Z));var q=r.cross(N,M),_=r.cross(z,M),nt=R/(S.inverseMass+E.inverseMass+S.inverseInertia*q*q+E.inverseInertia*_*_);if(U*=nt,H*=nt,b<0&&b*b>n._restingThresh*v)D.normalImpulse=0;else{var rt=D.normalImpulse;D.normalImpulse=Math.min(D.normalImpulse+U,0),U=D.normalImpulse-rt}if(I*I>n._restingThreshTangent*v)D.tangentImpulse=0;else{var at=D.tangentImpulse;D.tangentImpulse=a.clamp(D.tangentImpulse+H,-Z,Z),H=D.tangentImpulse-at}d.x=M.x*U+O.x*H,d.y=M.y*U+O.y*H,S.isStatic||S.isSleeping||(S.positionPrev.x+=d.x*S.inverseMass,S.positionPrev.y+=d.y*S.inverseMass,S.anglePrev+=r.cross(N,d)*S.inverseInertia),E.isStatic||E.isSleeping||(E.positionPrev.x-=d.x*E.inverseMass,E.positionPrev.y-=d.y*E.inverseMass,E.anglePrev-=r.cross(z,d)*E.inverseInertia)}}}}})()},function(e,f){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch{typeof window=="object"&&(i=window)}e.exports=i},function(e,f,i){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(276),o=function(r,a,l,h){for(var u=r[0],v=1;v<r.length;v++){var d=r[v];n(d,u,a,l,h),u=d}return r};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(46),o=function(r,a,l,h,u){return n(r,"angle",a,l,h,u)};e.exports=o},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r){for(var a=0;a<n.length;a++){var l=n[a];o.call(r,l)}return n};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r){r===void 0&&(r=0);for(var a=r;a<n.length;a++){var l=n[a],h=!0;for(var u in o)l[u]!==o[u]&&(h=!1);if(h)return l}return null};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r){r===void 0&&(r=0);for(var a=r;a<n.length;a++){var l=n[a],h=!0;for(var u in o)l[u]!==o[u]&&(h=!1);if(h)return l}return null};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(289),o=i(123),r=i(2),a=i(1),l=i(129),h=new l({sys:{queueDepthSort:a,events:{once:a}}},0,0,1,1),u=function(v,d){d===void 0&&(d={});var c=d.hasOwnProperty("width"),p=d.hasOwnProperty("height"),g=r(d,"width",-1),m=r(d,"height",-1),x=r(d,"cellWidth",1),y=r(d,"cellHeight",x),T=r(d,"position",o.TOP_LEFT),C=r(d,"x",0),S=r(d,"y",0),E=0,M=0,O=g*x,L=m*y;h.setPosition(C,S),h.setSize(x,y);for(var R=0;R<v.length;R++)if(n(v[R],h,T),c&&g===-1)h.x+=x;else if(p&&m===-1)h.y+=y;else if(p&&!c){if(M+=y,h.y+=y,M===L&&(M=0,E+=x,h.y=S,h.x+=x,E===O))break}else if(E+=x,h.x+=x,E===O&&(E=0,M+=y,h.x=C,h.y+=y,M===L))break;return v};e.exports=u},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(18),o=2,r={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(a,l,h,u){return a===void 0&&(a=1),l===void 0?this.alpha=a:(this._alphaTL=n(a,0,1),this._alphaTR=n(l,0,1),this._alphaBL=n(h,0,1),this._alphaBR=n(u,0,1)),this},alpha:{get:function(){return this._alpha},set:function(a){var l=n(a,0,1);this._alpha=l,this._alphaTL=l,this._alphaTR=l,this._alphaBL=l,this._alphaBR=l,l===0?this.renderFlags&=~o:this.renderFlags|=o}},alphaTopLeft:{get:function(){return this._alphaTL},set:function(a){var l=n(a,0,1);this._alphaTL=l,l!==0&&(this.renderFlags|=o)}},alphaTopRight:{get:function(){return this._alphaTR},set:function(a){var l=n(a,0,1);this._alphaTR=l,l!==0&&(this.renderFlags|=o)}},alphaBottomLeft:{get:function(){return this._alphaBL},set:function(a){var l=n(a,0,1);this._alphaBL=l,l!==0&&(this.renderFlags|=o)}},alphaBottomRight:{get:function(){return this._alphaBR},set:function(a){var l=n(a,0,1);this._alphaBR=l,l!==0&&(this.renderFlags|=o)}}};e.exports=r},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.width},set:function(n){this.scaleX=n/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(n){this.scaleY=n/this.height}},setSize:function(n,o){return this.width=n,this.height=o,this},setDisplaySize:function(n,o){return this.displayWidth=n,this.displayHeight=o,this}};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={texture:null,frame:null,isCropped:!1,setCrop:function(n,o,r,a){if(n===void 0)this.isCropped=!1;else if(this.frame){if(typeof n=="number")this.frame.setCropUVs(this._crop,n,o,r,a,this.flipX,this.flipY);else{var l=n;this.frame.setCropUVs(this._crop,l.x,l.y,l.width,l.height,this.flipX,this.flipY)}this.isCropped=!0}return this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={flipX:!1,flipY:!1,toggleFlipX:function(){return this.flipX=!this.flipX,this},toggleFlipY:function(){return this.flipY=!this.flipY,this},setFlipX:function(n){return this.flipX=n,this},setFlipY:function(n){return this.flipY=n,this},setFlip:function(n,o){return this.flipX=n,this.flipY=o,this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this}};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(10),o=i(308),r=i(3),a={prepareBoundsOutput:function(l,h){if(h===void 0&&(h=!1),this.rotation!==0&&o(l,this.x,this.y,this.rotation),h&&this.parentContainer){var u=this.parentContainer.getBoundsTransformMatrix();u.transformPoint(l.x,l.y,l)}return l},getCenter:function(l){return l===void 0&&(l=new r),l.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,l.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,l},getTopLeft:function(l,h){return l||(l=new r),l.x=this.x-this.displayWidth*this.originX,l.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(l,h)},getTopCenter:function(l,h){return l||(l=new r),l.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,l.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(l,h)},getTopRight:function(l,h){return l||(l=new r),l.x=this.x-this.displayWidth*this.originX+this.displayWidth,l.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(l,h)},getLeftCenter:function(l,h){return l||(l=new r),l.x=this.x-this.displayWidth*this.originX,l.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(l,h)},getRightCenter:function(l,h){return l||(l=new r),l.x=this.x-this.displayWidth*this.originX+this.displayWidth,l.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(l,h)},getBottomLeft:function(l,h){return l||(l=new r),l.x=this.x-this.displayWidth*this.originX,l.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(l,h)},getBottomCenter:function(l,h){return l||(l=new r),l.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,l.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(l,h)},getBottomRight:function(l,h){return l||(l=new r),l.x=this.x-this.displayWidth*this.originX+this.displayWidth,l.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(l,h)},getBounds:function(l){l===void 0&&(l=new n);var h,u,v,d,c,p,g,m;if(this.parentContainer){var x=this.parentContainer.getBoundsTransformMatrix();this.getTopLeft(l),x.transformPoint(l.x,l.y,l),h=l.x,u=l.y,this.getTopRight(l),x.transformPoint(l.x,l.y,l),v=l.x,d=l.y,this.getBottomLeft(l),x.transformPoint(l.x,l.y,l),c=l.x,p=l.y,this.getBottomRight(l),x.transformPoint(l.x,l.y,l),g=l.x,m=l.y}else this.getTopLeft(l),h=l.x,u=l.y,this.getTopRight(l),v=l.x,d=l.y,this.getBottomLeft(l),c=l.x,p=l.y,this.getBottomRight(l),g=l.x,m=l.y;return l.x=Math.min(h,v,c,g),l.y=Math.min(u,d,p,m),l.width=Math.max(h,v,c,g)-l.x,l.height=Math.max(u,d,p,m)-l.y,l}};e.exports=a},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="blur"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="boot"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="contextlost"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="contextrestored"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="destroy"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="focus"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="hidden"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pause"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="postrender"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="poststep"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="prerender"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="prestep"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="ready"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="resume"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="step"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="visible"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="postrender"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="prerender"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="render"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="resize"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function(){return this._displayOriginX},set:function(n){this._displayOriginX=n,this.originX=n/this.width}},displayOriginY:{get:function(){return this._displayOriginY},set:function(n){this._displayOriginY=n,this.originY=n/this.height}},setOrigin:function(n,o){return n===void 0&&(n=.5),o===void 0&&(o=n),this.originX=n,this.originY=o,this.updateDisplayOrigin()},setOriginFromFrame:function(){return!this.frame||!this.frame.customPivot?this.setOrigin():(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin())},setDisplayOrigin:function(n,o){return n===void 0&&(n=0),o===void 0&&(o=n),this.displayOriginX=n,this.displayOriginY=o,this},updateDisplayOrigin:function(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this}};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(36),o=i(99),r=i(6),a=i(100),l=i(3),h={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathDelta:null,pathTween:null,pathConfig:null,_prevDirection:a.PLAYING_FORWARD,setPath:function(u,v){v===void 0&&(v=this.pathConfig);var d=this.pathTween;return d&&d.isPlaying()&&d.stop(),this.path=u,v&&this.startFollow(v),this},setRotateToPath:function(u,v){return v===void 0&&(v=0),this.rotateToPath=u,this.pathRotationOffset=v,this},isFollowing:function(){var u=this.pathTween;return u&&u.isPlaying()},startFollow:function(u,v){u===void 0&&(u={}),v===void 0&&(v=0);var d=this.pathTween;d&&d.isPlaying()&&d.stop(),typeof u=="number"&&(u={duration:u}),u.from=r(u,"from",0),u.to=r(u,"to",1);var c=o(u,"positionOnPath",!1);this.rotateToPath=o(u,"rotateToPath",!1),this.pathRotationOffset=r(u,"rotationOffset",0);var p=r(u,"startAt",v);if(p&&(u.onStart=function(m){var x=m.data[0];x.progress=p,x.elapsed=x.duration*p;var y=x.ease(x.progress);x.current=x.start+(x.end-x.start)*y,x.target[x.key]=x.current}),this.pathOffset||(this.pathOffset=new l(this.x,this.y)),this.pathVector||(this.pathVector=new l),this.pathDelta||(this.pathDelta=new l),this.pathDelta.reset(),this.pathTween=this.scene.sys.tweens.addCounter(u),this.path.getStartPoint(this.pathOffset),c&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=a.PLAYING_FORWARD,this.rotateToPath){var g=this.path.getPoint(.1);this.rotation=Math.atan2(g.y-this.y,g.x-this.x)+n(this.pathRotationOffset)}return this.pathConfig=u,this},pauseFollow:function(){var u=this.pathTween;return u&&u.isPlaying()&&u.pause(),this},resumeFollow:function(){var u=this.pathTween;return u&&u.isPaused()&&u.resume(),this},stopFollow:function(){var u=this.pathTween;return u&&u.isPlaying()&&u.stop(),this},pathUpdate:function(){var u=this.pathTween;if(u){var v=u.data[0],d=this.pathDelta,c=this.pathVector;if(d.copy(c).negate(),v.state===a.COMPLETE){this.path.getPoint(1,c),d.add(c),c.add(this.pathOffset),this.setPosition(c.x,c.y);return}else if(v.state!==a.PLAYING_FORWARD&&v.state!==a.PLAYING_BACKWARD)return;this.path.getPoint(u.getValue(),c),d.add(c),c.add(this.pathOffset);var p=this.x,g=this.y;this.setPosition(c.x,c.y);var m=this.x-p,x=this.y-g;if(m===0&&x===0)return;if(v.state!==this._prevDirection){this._prevDirection=v.state;return}this.rotateToPath&&(this.rotation=Math.atan2(x,m)+n(this.pathRotationOffset))}}};e.exports=h},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function(n){this.scaleX=n/this.frame.realWidth}},displayHeight:{get:function(){return Math.abs(this.scaleY*this.frame.realHeight)},set:function(n){this.scaleY=n/this.frame.realHeight}},setSizeToFrame:function(n){return n===void 0&&(n=this.frame),this.width=n.realWidth,this.height=n.realHeight,this},setSize:function(n,o){return this.width=n,this.height=o,this},setDisplaySize:function(n,o){return this.displayWidth=n,this.displayHeight=o,this}};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=8,n={texture:null,frame:null,isCropped:!1,setTexture:function(o,r){return this.texture=this.scene.sys.textures.get(o),this.setFrame(r)},setFrame:function(o,r,a){return r===void 0&&(r=!0),a===void 0&&(a=!0),this.frame=this.texture.get(o),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~i:this.renderFlags|=i,this._sizeComponent&&r&&this.setSizeToFrame(),this._originComponent&&a&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}};e.exports=n},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=8,n={texture:null,frame:null,isCropped:!1,setCrop:function(o,r,a,l){if(o===void 0)this.isCropped=!1;else if(this.frame){if(typeof o=="number")this.frame.setCropUVs(this._crop,o,r,a,l,this.flipX,this.flipY);else{var h=o;this.frame.setCropUVs(this._crop,h.x,h.y,h.width,h.height,this.flipX,this.flipY)}this.isCropped=!0}return this},setTexture:function(o,r){return this.texture=this.scene.sys.textures.get(o),this.setFrame(r)},setFrame:function(o,r,a){return r===void 0&&(r=!0),a===void 0&&(a=!0),this.frame=this.texture.get(o),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~i:this.renderFlags|=i,this._sizeComponent&&r&&this.setSizeToFrame(),this._originComponent&&a&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};e.exports=n},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={tintTopLeft:16777215,tintTopRight:16777215,tintBottomLeft:16777215,tintBottomRight:16777215,tintFill:!1,clearTint:function(){return this.setTint(16777215),this},setTint:function(n,o,r,a){return n===void 0&&(n=16777215),o===void 0&&(o=n,r=n,a=n),this.tintTopLeft=n,this.tintTopRight=o,this.tintBottomLeft=r,this.tintBottomRight=a,this.tintFill=!1,this},setTintFill:function(n,o,r,a){return this.setTint(n,o,r,a),this.tintFill=!0,this},tint:{set:function(n){this.setTint(n,n,n,n)}},isTinted:{get:function(){var n=16777215;return this.tintFill||this.tintTopLeft!==n||this.tintTopRight!==n||this.tintBottomLeft!==n||this.tintBottomRight!==n}}};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="changedata"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="changedata-"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="destroy"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="removedata"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="setdata"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="addedtoscene"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="destroy"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="removedfromscene"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="complete"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="created"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="error"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="loop"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="play"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="seeked"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="seeking"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="stop"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="timeout"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="unlocked"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="addedtoscene"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="boot"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="create"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="destroy"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pause"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="postupdate"},function(e,f){/**
 * @author       samme
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="prerender"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="preupdate"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="ready"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="removedfromscene"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="render"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="resume"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="shutdown"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="sleep"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="start"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="transitioncomplete"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="transitioninit"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="transitionout"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="transitionstart"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="transitionwake"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="update"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="wake"},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(46),o=function(r,a,l,h,u){return n(r,"alpha",a,l,h,u)};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(46),o=function(r,a,l,h,u){return n(r,"x",a,l,h,u)};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(46),o=function(r,a,l,h,u,v,d){return l==null&&(l=a),n(r,"x",a,h,v,d),n(r,"y",l,u,v,d)};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(46),o=function(r,a,l,h,u){return n(r,"y",a,l,h,u)};e.exports=o},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r,a){r===void 0&&(r=0),a===void 0&&(a=6.28);for(var l=r,h=(a-r)/n.length,u=0;u<n.length;u++)n[u].x=o.x+o.radius*Math.cos(l),n[u].y=o.y+o.radius*Math.sin(l),l+=h;return n};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r,a){r===void 0&&(r=0),a===void 0&&(a=6.28);for(var l=r,h=(a-r)/n.length,u=o.width/2,v=o.height/2,d=0;d<n.length;d++)n[d].x=o.x+u*Math.cos(l),n[d].y=o.y+v*Math.sin(l),l+=h;return n};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(172),o=function(r,a){for(var l=n(a,r.length),h=0;h<r.length;h++){var u=r[h],v=l[h];u.x=v.x,u.y=v.y}return r};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(316),o=i(178),r=i(179),a=function(l,h,u){u===void 0&&(u=0);var v=n(h,!1,l.length);u>0?o(v,u):u<0&&r(v,Math.abs(u));for(var d=0;d<l.length;d++)l[d].x=v[d].x,l[d].y=v[d].y;return l};e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(317),o=function(r,a,l){var h=n({x1:a.x1,y1:a.y1,x2:a.x2,y2:a.y2},l),u=n({x1:a.x2,y1:a.y2,x2:a.x3,y2:a.y3},l),v=n({x1:a.x3,y1:a.y3,x2:a.x1,y2:a.y1},l);h.pop(),u.pop(),v.pop(),h=h.concat(u,v);for(var d=h.length/r.length,c=0,p=0;p<r.length;p++){var g=r[p],m=h[Math.floor(c)];g.x=m.x,g.y=m.y,c+=d}return r};e.exports=o},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r){for(var a=0;a<n.length;a++){var l=n[a];l.anims&&l.anims.play(o,r)}return n};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(170),o=function(r,a){for(var l=0;l<r.length;l++)n(a,r[l]);return r};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(180),o=function(r,a){for(var l=0;l<r.length;l++)n(a,r[l]);return r};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(173),o=function(r,a){for(var l=0;l<r.length;l++)n(a,r[l]);return r};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(174),o=function(r,a){for(var l=0;l<r.length;l++)n(a,r[l]);return r};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(181),o=function(r,a){for(var l=0;l<r.length;l++)n(a,r[l]);return r};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(46),o=function(r,a,l,h,u){return n(r,"rotation",a,l,h,u)};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(182),o=i(50),r=function(a,l,h){for(var u=l.x,v=l.y,d=0;d<a.length;d++){var c=a[d];n(c,u,v,h,Math.max(1,o(c.x,c.y,u,v)))}return a};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(182),o=function(r,a,l,h){var u=a.x,v=a.y;if(h===0)return r;for(var d=0;d<r.length;d++)n(r[d],u,v,l,h);return r};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(46),o=function(r,a,l,h,u){return n(r,"scaleX",a,l,h,u)};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(46),o=function(r,a,l,h,u,v,d){return l==null&&(l=a),n(r,"scaleX",a,h,v,d),n(r,"scaleY",l,u,v,d)};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(46),o=function(r,a,l,h,u){return n(r,"scaleY",a,l,h,u)};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(27),o=function(r,a,l,h,u){return n(r,"alpha",a,l,h,u)};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(27),o=function(r,a,l,h){return n(r,"blendMode",a,0,l,h)};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(27),o=function(r,a,l,h,u){return n(r,"depth",a,l,h,u)};e.exports=o},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r){for(var a=0;a<n.length;a++)n[a].setInteractive(o,r);return n};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(27),o=function(r,a,l,h,u,v,d){return l==null&&(l=a),n(r,"originX",a,h,v,d),n(r,"originY",l,u,v,d),r.forEach(function(c){c.updateDisplayOrigin()}),r};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(27),o=function(r,a,l,h,u){return n(r,"rotation",a,l,h,u)};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(27),o=function(r,a,l,h,u,v,d){return l==null&&(l=a),n(r,"scaleX",a,h,v,d),n(r,"scaleY",l,u,v,d)};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(27),o=function(r,a,l,h,u){return n(r,"scaleX",a,l,h,u)};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(27),o=function(r,a,l,h,u){return n(r,"scaleY",a,l,h,u)};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(27),o=function(r,a,l,h,u,v,d){return l==null&&(l=a),n(r,"scrollFactorX",a,h,v,d),n(r,"scrollFactorY",l,u,v,d)};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(27),o=function(r,a,l,h,u){return n(r,"scrollFactorX",a,l,h,u)};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(27),o=function(r,a,l,h,u){return n(r,"scrollFactorY",a,l,h,u)};e.exports=o},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r,a,l){for(var h=0;h<n.length;h++)n[h].setTint(o,r,a,l);return n};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(27),o=function(r,a,l,h){return n(r,"visible",a,0,l,h)};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(27),o=function(r,a,l,h,u){return n(r,"x",a,l,h,u)};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(27),o=function(r,a,l,h,u,v,d){return l==null&&(l=a),n(r,"x",a,h,v,d),n(r,"y",l,u,v,d)};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(27),o=function(r,a,l,h,u){return n(r,"y",a,l,h,u)};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(3),o=function(r,a,l,h,u){h===void 0&&(h=0),u===void 0&&(u=new n);var v,d;if(r.length>1){var c,p,g,m;if(h===0){var x=r.length-1;for(v=r[x].x,d=r[x].y,c=x-1;c>=0;c--)m=r[c],p=m.x,g=m.y,m.x=v,m.y=d,v=p,d=g;r[x].x=a,r[x].y=l}else{for(v=r[0].x,d=r[0].y,c=1;c<r.length;c++)m=r[c],p=m.x,g=m.y,m.x=v,m.y=d,v=p,d=g;r[0].x=a,r[0].y=l}}else v=r[0].x,d=r[0].y,r[0].x=a,r[0].y=l;return u.x=v,u.y=d,u};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(131),o=function(r){return n(r)};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(183),o=function(r,a,l,h,u){u===void 0&&(u=!1);var v=Math.abs(h-l)/r.length,d;if(u)for(d=0;d<r.length;d++)r[d][a]+=n(d*v,l,h);else for(d=0;d<r.length;d++)r[d][a]=n(d*v,l,h);return r};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(184),o=function(r,a,l,h,u){u===void 0&&(u=!1);var v=Math.abs(h-l)/r.length,d;if(u)for(d=0;d<r.length;d++)r[d][a]+=n(d*v,l,h);else for(d=0;d<r.length;d++)r[d][a]=n(d*v,l,h);return r};e.exports=o},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r,a,l){l===void 0&&(l=!1);var h=Math.abs(a-r)/n.length,u;if(l)for(u=0;u<n.length;u++)n[u][o]+=u*h+r;else for(u=0;u<n.length;u++)n[u][o]=u*h+r;return n};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){for(var o=0;o<n.length;o++)n[o].visible=!n[o].visible;return n};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       samme <samme.npm@gmail.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(68),o=function(r,a,l){l===void 0&&(l=0);for(var h=0;h<r.length;h++){var u=r[h];u.x=n(u.x,a.left-l,a.right+l),u.y=n(u.y,a.top-l,a.bottom+l)}return r};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Animation:i(185),AnimationFrame:i(319),AnimationManager:i(321),AnimationState:i(164),Events:i(132)}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="add"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="animationcomplete"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="animationcomplete-"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="animationrepeat"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="animationrestart"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="animationstart"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="animationstop"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="animationupdate"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pauseall"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="remove"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="resumeall"},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={BaseCache:i(323),CacheManager:i(325),Events:i(324)}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="add"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="remove"},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Controls:i(739),Scene2D:i(742)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={FixedKeyControl:i(740),SmoothedKeyControl:i(741)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(6),r=new n({initialize:function(l){this.camera=o(l,"camera",null),this.left=o(l,"left",null),this.right=o(l,"right",null),this.up=o(l,"up",null),this.down=o(l,"down",null),this.zoomIn=o(l,"zoomIn",null),this.zoomOut=o(l,"zoomOut",null),this.zoomSpeed=o(l,"zoomSpeed",.01),this.minZoom=o(l,"minZoom",.001),this.maxZoom=o(l,"maxZoom",1e3),this.speedX=0,this.speedY=0;var h=o(l,"speed",null);typeof h=="number"?(this.speedX=h,this.speedY=h):(this.speedX=o(l,"speed.x",0),this.speedY=o(l,"speed.y",0)),this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(a){return this.camera=a,this},update:function(a){if(!!this.active){a===void 0&&(a=1);var l=this.camera;this.up&&this.up.isDown?l.scrollY-=this.speedY*a|0:this.down&&this.down.isDown&&(l.scrollY+=this.speedY*a|0),this.left&&this.left.isDown?l.scrollX-=this.speedX*a|0:this.right&&this.right.isDown&&(l.scrollX+=this.speedX*a|0),this.zoomIn&&this.zoomIn.isDown?(l.zoom-=this.zoomSpeed,l.zoom<this.minZoom&&(l.zoom=this.minZoom)):this.zoomOut&&this.zoomOut.isDown&&(l.zoom+=this.zoomSpeed,l.zoom>this.maxZoom&&(l.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(6),r=new n({initialize:function(l){this.camera=o(l,"camera",null),this.left=o(l,"left",null),this.right=o(l,"right",null),this.up=o(l,"up",null),this.down=o(l,"down",null),this.zoomIn=o(l,"zoomIn",null),this.zoomOut=o(l,"zoomOut",null),this.zoomSpeed=o(l,"zoomSpeed",.01),this.minZoom=o(l,"minZoom",.001),this.maxZoom=o(l,"maxZoom",1e3),this.accelX=0,this.accelY=0;var h=o(l,"acceleration",null);typeof h=="number"?(this.accelX=h,this.accelY=h):(this.accelX=o(l,"acceleration.x",0),this.accelY=o(l,"acceleration.y",0)),this.dragX=0,this.dragY=0;var u=o(l,"drag",null);typeof u=="number"?(this.dragX=u,this.dragY=u):(this.dragX=o(l,"drag.x",0),this.dragY=o(l,"drag.y",0)),this.maxSpeedX=0,this.maxSpeedY=0;var v=o(l,"maxSpeed",null);typeof v=="number"?(this.maxSpeedX=v,this.maxSpeedY=v):(this.maxSpeedX=o(l,"maxSpeed.x",0),this.maxSpeedY=o(l,"maxSpeed.y",0)),this._speedX=0,this._speedY=0,this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(a){return this.camera=a,this},update:function(a){if(!!this.active){a===void 0&&(a=1);var l=this.camera;this._speedX>0?(this._speedX-=this.dragX*a,this._speedX<0&&(this._speedX=0)):this._speedX<0&&(this._speedX+=this.dragX*a,this._speedX>0&&(this._speedX=0)),this._speedY>0?(this._speedY-=this.dragY*a,this._speedY<0&&(this._speedY=0)):this._speedY<0&&(this._speedY+=this.dragY*a,this._speedY>0&&(this._speedY=0)),this.up&&this.up.isDown?(this._speedY+=this.accelY,this._speedY>this.maxSpeedY&&(this._speedY=this.maxSpeedY)):this.down&&this.down.isDown&&(this._speedY-=this.accelY,this._speedY<-this.maxSpeedY&&(this._speedY=-this.maxSpeedY)),this.left&&this.left.isDown?(this._speedX+=this.accelX,this._speedX>this.maxSpeedX&&(this._speedX=this.maxSpeedX)):this.right&&this.right.isDown&&(this._speedX-=this.accelX,this._speedX<-this.maxSpeedX&&(this._speedX=-this.maxSpeedX)),this.zoomIn&&this.zoomIn.isDown?this._zoom=-this.zoomSpeed:this.zoomOut&&this.zoomOut.isDown?this._zoom=this.zoomSpeed:this._zoom=0,this._speedX!==0&&(l.scrollX-=this._speedX*a|0),this._speedY!==0&&(l.scrollY-=this._speedY*a|0),this._zoom!==0&&(l.zoom+=this._zoom,l.zoom<this.minZoom?l.zoom=this.minZoom:l.zoom>this.maxZoom&&(l.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Camera:i(326),BaseCamera:i(133),CameraManager:i(799),Effects:i(333),Events:i(37)}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="cameradestroy"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerafadeincomplete"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerafadeinstart"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerafadeoutcomplete"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerafadeoutstart"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="cameraflashcomplete"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="cameraflashstart"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="followupdate"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerapancomplete"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerapanstart"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="postrender"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="prerender"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerarotatecomplete"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerarotatestart"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerashakecomplete"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerashakestart"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerazoomcomplete"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerazoomstart"},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(18),o=i(0),r=i(37),a=new o({initialize:function(h){this.camera=h,this.isRunning=!1,this.isComplete=!1,this.direction=!0,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(l,h,u,v,d,c,p,g){if(l===void 0&&(l=!0),h===void 0&&(h=1e3),u===void 0&&(u=0),v===void 0&&(v=0),d===void 0&&(d=0),c===void 0&&(c=!1),p===void 0&&(p=null),g===void 0&&(g=this.camera.scene),!c&&this.isRunning)return this.camera;this.isRunning=!0,this.isComplete=!1,this.duration=h,this.direction=l,this.progress=0,this.red=u,this.green=v,this.blue=d,this.alpha=l?Number.MIN_VALUE:1,this._elapsed=0,this._onUpdate=p,this._onUpdateScope=g;var m=l?r.FADE_OUT_START:r.FADE_IN_START;return this.camera.emit(m,this.camera,this,h,u,v,d),this.camera},update:function(l,h){!this.isRunning||(this._elapsed+=h,this.progress=n(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this.direction?this.progress:1-this.progress:(this.alpha=this.direction?1:0,this.effectComplete()))},postRenderCanvas:function(l){if(!this.isRunning&&!this.isComplete)return!1;var h=this.camera;return l.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",l.fillRect(h.x,h.y,h.width,h.height),!0},postRenderWebGL:function(l,h){if(!this.isRunning&&!this.isComplete)return!1;var u=this.camera,v=this.red/255,d=this.green/255,c=this.blue/255;return l.drawFillRect(u.x,u.y,u.width,u.height,h(c,d,v,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.isComplete=!0;var l=this.direction?r.FADE_OUT_COMPLETE:r.FADE_IN_COMPLETE;this.camera.emit(l,this.camera,this)},reset:function(){this.isRunning=!1,this.isComplete=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(18),o=i(0),r=i(37),a=new o({initialize:function(h){this.camera=h,this.isRunning=!1,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(l,h,u,v,d,c,p){return l===void 0&&(l=250),h===void 0&&(h=255),u===void 0&&(u=255),v===void 0&&(v=255),d===void 0&&(d=!1),c===void 0&&(c=null),p===void 0&&(p=this.camera.scene),!d&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=l,this.progress=0,this.red=h,this.green=u,this.blue=v,this.alpha=1,this._elapsed=0,this._onUpdate=c,this._onUpdateScope=p,this.camera.emit(r.FLASH_START,this.camera,this,l,h,u,v),this.camera)},update:function(l,h){!this.isRunning||(this._elapsed+=h,this.progress=n(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=1-this.progress:this.effectComplete())},postRenderCanvas:function(l){if(!this.isRunning)return!1;var h=this.camera;return l.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",l.fillRect(h.x,h.y,h.width,h.height),!0},postRenderWebGL:function(l,h){if(!this.isRunning)return!1;var u=this.camera,v=this.red/255,d=this.green/255,c=this.blue/255;return l.drawFillRect(u.x,u.y,u.width,u.height,h(c,d,v,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(r.FLASH_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(18),o=i(0),r=i(134),a=i(37),l=i(3),h=new o({initialize:function(v){this.camera=v,this.isRunning=!1,this.duration=0,this.source=new l,this.current=new l,this.destination=new l,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(u,v,d,c,p,g,m){d===void 0&&(d=1e3),c===void 0&&(c=r.Linear),p===void 0&&(p=!1),g===void 0&&(g=null),m===void 0&&(m=this.camera.scene);var x=this.camera;return!p&&this.isRunning||(this.isRunning=!0,this.duration=d,this.progress=0,this.source.set(x.scrollX,x.scrollY),this.destination.set(u,v),x.getScroll(u,v,this.current),typeof c=="string"&&r.hasOwnProperty(c)?this.ease=r[c]:typeof c=="function"&&(this.ease=c),this._elapsed=0,this._onUpdate=g,this._onUpdateScope=m,this.camera.emit(a.PAN_START,this.camera,this,d,u,v)),x},update:function(u,v){if(!!this.isRunning){this._elapsed+=v;var d=n(this._elapsed/this.duration,0,1);this.progress=d;var c=this.camera;if(this._elapsed<this.duration){var p=this.ease(d);c.getScroll(this.destination.x,this.destination.y,this.current);var g=this.source.x+(this.current.x-this.source.x)*p,m=this.source.y+(this.current.y-this.source.y)*p;c.setScroll(g,m),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,c,d,g,m)}else c.centerOn(this.destination.x,this.destination.y),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,c,d,c.scrollX,c.scrollY),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(a.PAN_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});e.exports=h},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return o===void 0&&(o=1.70158),n*n*((o+1)*n-o)};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return o===void 0&&(o=1.70158),--n*n*((o+1)*n+o)+1};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){o===void 0&&(o=1.70158);var r=o*1.525;return(n*=2)<1?.5*(n*n*((r+1)*n-r)):.5*((n-=2)*n*((r+1)*n+r)+2)};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n=1-n,n<.36363636363636365?1-7.5625*n*n:n<.7272727272727273?1-(7.5625*(n-=.5454545454545454)*n+.75):n<.9090909090909091?1-(7.5625*(n-=.8181818181818182)*n+.9375):1-(7.5625*(n-=.9545454545454546)*n+.984375)};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n<.36363636363636365?7.5625*n*n:n<.7272727272727273?7.5625*(n-=.5454545454545454)*n+.75:n<.9090909090909091?7.5625*(n-=.8181818181818182)*n+.9375:7.5625*(n-=.9545454545454546)*n+.984375};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){var o=!1;return n<.5?(n=1-n*2,o=!0):n=n*2-1,n<.36363636363636365?n=7.5625*n*n:n<.7272727272727273?n=7.5625*(n-=.5454545454545454)*n+.75:n<.9090909090909091?n=7.5625*(n-=.8181818181818182)*n+.9375:n=7.5625*(n-=.9545454545454546)*n+.984375,o?(1-n)*.5:n*.5+.5};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return 1-Math.sqrt(1-n*n)};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return Math.sqrt(1- --n*n)};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return(n*=2)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1)};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n*n*n};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return--n*n*n+1};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return(n*=2)<1?.5*n*n*n:.5*((n-=2)*n*n+2)};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r){if(o===void 0&&(o=.1),r===void 0&&(r=.1),n===0)return 0;if(n===1)return 1;var a=r/4;return o<1?o=1:a=r*Math.asin(1/o)/(2*Math.PI),-(o*Math.pow(2,10*(n-=1))*Math.sin((n-a)*(2*Math.PI)/r))};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r){if(o===void 0&&(o=.1),r===void 0&&(r=.1),n===0)return 0;if(n===1)return 1;var a=r/4;return o<1?o=1:a=r*Math.asin(1/o)/(2*Math.PI),o*Math.pow(2,-10*n)*Math.sin((n-a)*(2*Math.PI)/r)+1};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r){if(o===void 0&&(o=.1),r===void 0&&(r=.1),n===0)return 0;if(n===1)return 1;var a=r/4;return o<1?o=1:a=r*Math.asin(1/o)/(2*Math.PI),(n*=2)<1?-.5*(o*Math.pow(2,10*(n-=1))*Math.sin((n-a)*(2*Math.PI)/r)):o*Math.pow(2,-10*(n-=1))*Math.sin((n-a)*(2*Math.PI)/r)*.5+1};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return Math.pow(2,10*(n-1))-.001};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return 1-Math.pow(2,-10*n)};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return(n*=2)<1?.5*Math.pow(2,10*(n-1)):.5*(2-Math.pow(2,-10*(n-1)))};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n*n};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n*(2-n)};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return(n*=2)<1?.5*n*n:-.5*(--n*(n-2)-1)};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n*n*n*n};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return 1- --n*n*n*n};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return(n*=2)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2)};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n*n*n*n*n};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return--n*n*n*n*n+1};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return(n*=2)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2)};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n===0?0:n===1?1:1-Math.cos(n*Math.PI/2)};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n===0?0:n===1?1:Math.sin(n*Math.PI/2)};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n===0?0:n===1?1:.5*(1-Math.cos(Math.PI*n))};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return o===void 0&&(o=1),n<=0?0:n>=1?1:((o*n|0)+1)*(1/o)};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(18),o=i(0),r=i(37),a=i(3),l=new o({initialize:function(u){this.camera=u,this.isRunning=!1,this.duration=0,this.intensity=new a,this.progress=0,this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate,this._onUpdateScope},start:function(h,u,v,d,c){return h===void 0&&(h=100),u===void 0&&(u=.05),v===void 0&&(v=!1),d===void 0&&(d=null),c===void 0&&(c=this.camera.scene),!v&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=h,this.progress=0,typeof u=="number"?this.intensity.set(u):this.intensity.set(u.x,u.y),this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate=d,this._onUpdateScope=c,this.camera.emit(r.SHAKE_START,this.camera,this,h,u),this.camera)},preRender:function(){this.isRunning&&this.camera.matrix.translate(this._offsetX,this._offsetY)},update:function(h,u){if(!!this.isRunning)if(this._elapsed+=u,this.progress=n(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration){var v=this.intensity,d=this.camera.width,c=this.camera.height,p=this.camera.zoom;this._offsetX=(Math.random()*v.x*d*2-v.x*d)*p,this._offsetY=(Math.random()*v.y*c*2-v.y*c)*p,this.camera.roundPixels&&(this._offsetX=Math.round(this._offsetX),this._offsetY=Math.round(this._offsetY))}else this.effectComplete()},effectComplete:function(){this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(r.SHAKE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.intensity=null}});e.exports=l},function(e,f,i){/**
 * @author       Jason Nicholls <nicholls.jason@gmail.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var n=i(18),o=i(0),r=i(37),a=i(134),l=new o({initialize:function(u){this.camera=u,this.isRunning=!1,this.duration=0,this.source=0,this.current=0,this.destination=0,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope,this.clockwise=!0,this.shortestPath=!1},start:function(h,u,v,d,c,p,g){v===void 0&&(v=1e3),d===void 0&&(d=a.Linear),c===void 0&&(c=!1),p===void 0&&(p=null),g===void 0&&(g=this.camera.scene),u===void 0&&(u=!1),this.shortestPath=u;var m=h;h<0?(m=-1*h,this.clockwise=!1):this.clockwise=!0;var x=360*Math.PI/180;m=m-Math.floor(m/x)*x;var y=this.camera;if(!c&&this.isRunning)return y;if(this.isRunning=!0,this.duration=v,this.progress=0,this.source=y.rotation,this.destination=m,typeof d=="string"&&a.hasOwnProperty(d)?this.ease=a[d]:typeof d=="function"&&(this.ease=d),this._elapsed=0,this._onUpdate=p,this._onUpdateScope=g,this.shortestPath){var T=0,C=0;this.destination>this.source?T=Math.abs(this.destination-this.source):T=Math.abs(this.destination+x)-this.source,this.source>this.destination?C=Math.abs(this.source-this.destination):C=Math.abs(this.source+x)-this.destination,T<C?this.clockwise=!0:T>C&&(this.clockwise=!1)}return this.camera.emit(r.ROTATE_START,this.camera,this,v,m),y},update:function(h,u){if(!!this.isRunning){this._elapsed+=u;var v=n(this._elapsed/this.duration,0,1);this.progress=v;var d=this.camera;if(this._elapsed<this.duration){var c=this.ease(v);this.current=d.rotation;var p=0,g=360*Math.PI/180,m=this.destination,x=this.current;this.clockwise===!1&&(m=this.current,x=this.destination),m>=x?p=Math.abs(m-x):p=Math.abs(m+g)-x;var y=0;this.clockwise?y=d.rotation+p*c:y=d.rotation-p*c,d.rotation=y,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,d,v,y)}else d.rotation=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,d,v,this.destination),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(r.ROTATE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(18),o=i(0),r=i(134),a=i(37),l=new o({initialize:function(u){this.camera=u,this.isRunning=!1,this.duration=0,this.source=1,this.destination=1,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(h,u,v,d,c,p){u===void 0&&(u=1e3),v===void 0&&(v=r.Linear),d===void 0&&(d=!1),c===void 0&&(c=null),p===void 0&&(p=this.camera.scene);var g=this.camera;return!d&&this.isRunning||(this.isRunning=!0,this.duration=u,this.progress=0,this.source=g.zoom,this.destination=h,typeof v=="string"&&r.hasOwnProperty(v)?this.ease=r[v]:typeof v=="function"&&(this.ease=v),this._elapsed=0,this._onUpdate=c,this._onUpdateScope=p,this.camera.emit(a.ZOOM_START,this.camera,this,u,h)),g},update:function(h,u){!this.isRunning||(this._elapsed+=u,this.progress=n(this._elapsed/this.duration,0,1),this._elapsed<this.duration?(this.camera.zoom=this.source+(this.destination-this.source)*this.ease(this.progress),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.camera.zoom)):(this.camera.zoom=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.destination),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(a.ZOOM_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(326),o=i(0),r=i(2),a=i(24),l=i(57),h=i(104),u=i(20),v=new o({initialize:function(c){this.scene=c,this.systems=c.sys,this.roundPixels=c.sys.game.config.roundPixels,this.cameras=[],this.main,this.default,c.sys.events.once(u.BOOT,this.boot,this),c.sys.events.on(u.START,this.start,this)},boot:function(){var d=this.systems;d.settings.cameras?this.fromJSON(d.settings.cameras):this.add(),this.main=this.cameras[0],this.default=new n(0,0,d.scale.width,d.scale.height).setScene(this.scene),d.game.scale.on(h.RESIZE,this.onResize,this),this.systems.events.once(u.DESTROY,this.destroy,this)},start:function(){if(!this.main){var d=this.systems;d.settings.cameras?this.fromJSON(d.settings.cameras):this.add(),this.main=this.cameras[0]}var c=this.systems.events;c.on(u.UPDATE,this.update,this),c.once(u.SHUTDOWN,this.shutdown,this)},add:function(d,c,p,g,m,x){d===void 0&&(d=0),c===void 0&&(c=0),p===void 0&&(p=this.scene.sys.scale.width),g===void 0&&(g=this.scene.sys.scale.height),m===void 0&&(m=!1),x===void 0&&(x="");var y=new n(d,c,p,g);return y.setName(x),y.setScene(this.scene),y.setRoundPixels(this.roundPixels),y.id=this.getNextID(),this.cameras.push(y),m&&(this.main=y),y},addExisting:function(d,c){c===void 0&&(c=!1);var p=this.cameras.indexOf(d);return p===-1?(d.id=this.getNextID(),d.setRoundPixels(this.roundPixels),this.cameras.push(d),c&&(this.main=d),d):null},getNextID:function(){for(var d=this.cameras,c=1,p=0;p<32;p++){for(var g=!1,m=0;m<d.length;m++){var x=d[m];if(x&&x.id===c){g=!0;continue}}if(g)c=c<<1;else return c}return 0},getTotal:function(d){d===void 0&&(d=!1);for(var c=0,p=this.cameras,g=0;g<p.length;g++){var m=p[g];(!d||d&&m.visible)&&c++}return c},fromJSON:function(d){Array.isArray(d)||(d=[d]);for(var c=this.scene.sys.scale.width,p=this.scene.sys.scale.height,g=0;g<d.length;g++){var m=d[g],x=r(m,"x",0),y=r(m,"y",0),T=r(m,"width",c),C=r(m,"height",p),S=this.add(x,y,T,C);S.name=r(m,"name",""),S.zoom=r(m,"zoom",1),S.rotation=r(m,"rotation",0),S.scrollX=r(m,"scrollX",0),S.scrollY=r(m,"scrollY",0),S.roundPixels=r(m,"roundPixels",!1),S.visible=r(m,"visible",!0);var E=r(m,"backgroundColor",!1);E&&S.setBackgroundColor(E);var M=r(m,"bounds",null);if(M){var O=r(M,"x",0),L=r(M,"y",0),R=r(M,"width",c),w=r(M,"height",p);S.setBounds(O,L,R,w)}}return this},getCamera:function(d){for(var c=this.cameras,p=0;p<c.length;p++)if(c[p].name===d)return c[p];return null},getCamerasBelowPointer:function(d){for(var c=this.cameras,p=d.x,g=d.y,m=[],x=0;x<c.length;x++){var y=c[x];y.visible&&y.inputEnabled&&l(y,p,g)&&m.unshift(y)}return m},remove:function(d,c){c===void 0&&(c=!0),Array.isArray(d)||(d=[d]);for(var p=0,g=this.cameras,m=0;m<d.length;m++){var x=g.indexOf(d[m]);x!==-1&&(c?g[x].destroy():g[x].renderList=[],g.splice(x,1),p++)}return!this.main&&g[0]&&(this.main=g[0]),p},render:function(d,c){for(var p=this.scene,g=this.cameras,m=0;m<this.cameras.length;m++){var x=g[m];if(x.visible&&x.alpha>0){x.preRender();var y=this.getVisibleChildren(c.getChildren(),x);d.render(p,y,x)}}},getVisibleChildren:function(d,c){for(var p=[],g=0;g<d.length;g++){var m=d[g];m.willRender(c)&&p.push(m)}return p},resetAll:function(){for(var d=0;d<this.cameras.length;d++)this.cameras[d].destroy();return this.cameras=[],this.main=this.add(),this.main},update:function(d,c){for(var p=0;p<this.cameras.length;p++)this.cameras[p].update(d,c)},onResize:function(d,c,p,g,m){for(var x=0;x<this.cameras.length;x++){var y=this.cameras[x];y._x===0&&y._y===0&&y._width===g&&y._height===m&&y.setSize(c.width,c.height)}},resize:function(d,c){for(var p=0;p<this.cameras.length;p++)this.cameras[p].setSize(d,c)},shutdown:function(){this.main=void 0;for(var d=0;d<this.cameras.length;d++)this.cameras[d].destroy();this.cameras=[];var c=this.systems.events;c.off(u.UPDATE,this.update,this),c.off(u.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.default.destroy(),this.scene.sys.events.off(u.START,this.start,this),this.scene=null,this.systems=null}});a.register("CameraManager",v,"cameras"),e.exports=v},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="enterfullscreen"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="fullscreenfailed"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="fullscreenunsupported"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="leavefullscreen"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="orientationchange"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="resize"},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Config:i(346),CreateRenderer:i(366),DebugHeader:i(384),Events:i(22),TimeStep:i(385),VisibilityHandler:i(387)}},function(e,f){var i=e.exports={},n,o;function r(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?n=setTimeout:n=r}catch{n=r}try{typeof clearTimeout=="function"?o=clearTimeout:o=a}catch{o=a}})();function l(y){if(n===setTimeout)return setTimeout(y,0);if((n===r||!n)&&setTimeout)return n=setTimeout,setTimeout(y,0);try{return n(y,0)}catch{try{return n.call(null,y,0)}catch{return n.call(this,y,0)}}}function h(y){if(o===clearTimeout)return clearTimeout(y);if((o===a||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(y);try{return o(y)}catch{try{return o.call(null,y)}catch{return o.call(this,y)}}}var u=[],v=!1,d,c=-1;function p(){!v||!d||(v=!1,d.length?u=d.concat(u):c=-1,u.length&&g())}function g(){if(!v){var y=l(p);v=!0;for(var T=u.length;T;){for(d=u,u=[];++c<T;)d&&d[c].run();c=-1,T=u.length}d=null,v=!1,h(y)}}i.nextTick=function(y){var T=new Array(arguments.length-1);if(arguments.length>1)for(var C=1;C<arguments.length;C++)T[C-1]=arguments[C];u.push(new m(y,T)),u.length===1&&!v&&l(g)};function m(y,T){this.fun=y,this.array=T}m.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={};function x(){}i.on=x,i.addListener=x,i.once=x,i.off=x,i.removeListener=x,i.removeAllListeners=x,i.emit=x,i.prependListener=x,i.prependOnceListener=x,i.listeners=function(y){return[]},i.binding=function(y){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(y){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(136),o={gamepads:!1,mspointer:!1,touch:!1,wheelEvent:null};function r(){return typeof importScripts=="function"||(("ontouchstart"in document.documentElement||navigator.maxTouchPoints&&navigator.maxTouchPoints>=1)&&(o.touch=!0),(navigator.msPointerEnabled||navigator.pointerEnabled)&&(o.mspointer=!0),navigator.getGamepads&&(o.gamepads=!0),"onwheel"in window||n.ie&&"WheelEvent"in window?o.wheelEvent="wheel":"onmousewheel"in window?o.wheelEvent="mousewheel":n.firefox&&"MouseScrollEvent"in window&&(o.wheelEvent="DOMMouseScroll")),o}e.exports=r()},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(136),o={audioData:!1,dolby:!1,m4a:!1,mp3:!1,ogg:!1,opus:!1,wav:!1,webAudio:!1,webm:!1};function r(){if(typeof importScripts=="function")return o;o.audioData=!!window.Audio,o.webAudio=!!(window.AudioContext||window.webkitAudioContext);var a=document.createElement("audio"),l=!!a.canPlayType;try{if(l&&(a.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"")&&(o.ogg=!0),(a.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,"")||a.canPlayType("audio/opus;").replace(/^no$/,""))&&(o.opus=!0),a.canPlayType("audio/mpeg;").replace(/^no$/,"")&&(o.mp3=!0),a.canPlayType("audio/wav").replace(/^no$/,"")&&(o.wav=!0),(a.canPlayType("audio/x-m4a;")||a.canPlayType("audio/aac;").replace(/^no$/,""))&&(o.m4a=!0),a.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")&&(o.webm=!0),a.canPlayType('audio/mp4;codecs="ec-3"')!=="")){if(n.edge)o.dolby=!0;else if(n.safari&&n.safariVersion>=9&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)){var h=parseInt(RegExp.$1,10),u=parseInt(RegExp.$2,10);(h===10&&u>=11||h>10)&&(o.dolby=!0)}}}catch{}return o}e.exports=r()},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={h264:!1,hls:!1,mp4:!1,ogg:!1,vp9:!1,webm:!1};function n(){if(typeof importScripts=="function")return i;var o=document.createElement("video"),r=!!o.canPlayType;try{r&&(o.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,"")&&(i.ogg=!0),o.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,"")&&(i.h264=!0,i.mp4=!0),o.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")&&(i.webm=!0),o.canPlayType('video/webm; codecs="vp9"').replace(/^no$/,"")&&(i.vp9=!0),o.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(/^no$/,"")&&(i.hls=!0))}catch{}return i}e.exports=n()},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={available:!1,cancel:"",keyboard:!1,request:""};function n(){if(typeof importScripts=="function")return i;var o,r="Fullscreen",a="FullScreen",l=["request"+r,"request"+a,"webkitRequest"+r,"webkitRequest"+a,"msRequest"+r,"msRequest"+a,"mozRequest"+a,"mozRequest"+r];for(o=0;o<l.length;o++)if(document.documentElement[l[o]]){i.available=!0,i.request=l[o];break}var h=["cancel"+a,"exit"+r,"webkitCancel"+a,"webkitExit"+r,"msCancel"+a,"msExit"+r,"mozCancel"+a,"mozExit"+r];if(i.available){for(o=0;o<h.length;o++)if(document[h[o]]){i.cancel=h[o];break}}return window.Element&&Element.ALLOW_KEYBOARD_INPUT&&!/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)&&(i.keyboard=!0),Object.defineProperty(i,"active",{get:function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}}),i}e.exports=n()},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Between:i(349),BetweenPoints:i(350),BetweenPointsY:i(813),BetweenY:i(814),CounterClockwise:i(815),Normalize:i(351),Random:i(816),RandomDegrees:i(817),Reverse:i(818),RotateTo:i(819),ShortestBetween:i(820),Wrap:i(269),WrapDegrees:i(270)}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return Math.atan2(o.x-n.x,o.y-n.y)};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r,a){return Math.atan2(r-n,a-o)};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(14),o=function(r){return r>Math.PI&&(r-=n.PI2),Math.abs(((r+n.TAU)%n.PI2-n.PI2)%n.PI2)};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       @samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(137),o=function(){return n(-Math.PI,Math.PI)};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       @samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(137),o=function(){return n(-180,180)};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(351),o=function(r){return n(r+Math.PI)};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(14),o=function(r,a,l){return l===void 0&&(l=.05),r===a||(Math.abs(a-r)<=l||Math.abs(a-r)>=n.PI2-l?r=a:(Math.abs(a-r)>Math.PI&&(a<r?a+=n.PI2:a-=n.PI2),a>r?r+=l:a<r&&(r-=l))),r};e.exports=o},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){var r=o-n;if(r===0)return 0;var a=Math.floor((r- -180)/360);return r-a*360};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Between:i(50),BetweenPoints:i(352),BetweenPointsSquared:i(822),Chebyshev:i(823),Power:i(824),Snake:i(825),Squared:i(353)}},function(e,f){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){var r=n.x-o.x,a=n.y-o.y;return r*r+a*a};e.exports=i},function(e,f){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r,a){return Math.max(Math.abs(n-r),Math.abs(o-a))};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r,a,l){return l===void 0&&(l=2),Math.sqrt(Math.pow(r-n,l)+Math.pow(a-o,l))};e.exports=i},function(e,f){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r,a){return Math.abs(n-r)+Math.abs(o-a)};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Back:i(334),Bounce:i(335),Circular:i(336),Cubic:i(337),Elastic:i(338),Expo:i(339),Linear:i(340),Quadratic:i(341),Quartic:i(342),Quintic:i(343),Sine:i(344),Stepped:i(345)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Ceil:i(828),Equal:i(124),Floor:i(829),GreaterThan:i(354),LessThan:i(355)}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return o===void 0&&(o=1e-4),Math.ceil(n-o)};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return o===void 0&&(o=1e-4),Math.floor(n+o)};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Bezier:i(831),CatmullRom:i(832),CubicBezier:i(358),Linear:i(833),QuadraticBezier:i(359),SmoothStep:i(360),SmootherStep:i(834)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(356),o=function(r,a){for(var l=0,h=r.length-1,u=0;u<=h;u++)l+=Math.pow(1-a,h-u)*Math.pow(a,u)*r[u]*n(h,u);return l};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(194),o=function(r,a){var l=r.length-1,h=l*a,u=Math.floor(h);return r[0]===r[l]?(a<0&&(u=Math.floor(h=l*(1+a))),n(h-u,r[(u-1+l)%l],r[u],r[(u+1)%l],r[(u+2)%l])):a<0?r[0]-(n(-h,r[0],r[0],r[1],r[1])-r[0]):a>1?r[l]-(n(h-l,r[l],r[l],r[l-1],r[l-1])-r[l]):n(h-u,r[u?u-1:0],r[u],r[l<u+1?l:u+1],r[l<u+2?l:u+2])};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(135),o=function(r,a){var l=r.length-1,h=l*a,u=Math.floor(h);return a<0?n(r[0],r[1],h):a>1?n(r[l],r[l-1],l-h):n(r[u],r[u+1>l?l:u+1],h-u)};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(183),o=function(r,a,l){return a+(l-a)*n(r,0,1)};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={GetNext:i(361),IsSize:i(138),IsValue:i(836)}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n>0&&(n&n-1)===0};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Ceil:i(139),Floor:i(76),To:i(838)}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r,a){return r===void 0&&(r=0),o===0?n:(n-=r,n=o*Math.round(n/o),a?(r+n)/o:r+n)};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=new n({initialize:function(a){a===void 0&&(a=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],a&&this.init(a)},rnd:function(){var r=2091639*this.s0+this.c*23283064365386963e-26;return this.c=r|0,this.s0=this.s1,this.s1=this.s2,this.s2=r-this.c,this.s2},hash:function(r){var a,l=this.n;r=r.toString();for(var h=0;h<r.length;h++)l+=r.charCodeAt(h),a=.02519603282416938*l,l=a>>>0,a-=l,a*=l,l=a>>>0,a-=l,l+=a*4294967296;return this.n=l,(l>>>0)*23283064365386963e-26},init:function(r){typeof r=="string"?this.state(r):this.sow(r)},sow:function(r){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,!!r)for(var a=0;a<r.length&&r[a]!=null;a++){var l=r[a];this.s0-=this.hash(l),this.s0+=~~(this.s0<0),this.s1-=this.hash(l),this.s1+=~~(this.s1<0),this.s2-=this.hash(l),this.s2+=~~(this.s2<0)}},integer:function(){return this.rnd()*4294967296},frac:function(){return this.rnd()+(this.rnd()*2097152|0)*11102230246251565e-32},real:function(){return this.integer()+this.frac()},integerInRange:function(r,a){return Math.floor(this.realInRange(0,a-r+1)+r)},between:function(r,a){return Math.floor(this.realInRange(0,a-r+1)+r)},realInRange:function(r,a){return this.frac()*(a-r)+r},normal:function(){return 1-2*this.frac()},uuid:function(){var r="",a="";for(a=r="";r++<36;a+=~r%5|r*3&4?(r^15?8^this.frac()*(r^20?16:4):4).toString(16):"-");return a},pick:function(r){return r[this.integerInRange(0,r.length-1)]},sign:function(){return this.pick(this.signs)},weightedPick:function(r){return r[~~(Math.pow(this.frac(),2)*(r.length-1)+.5)]},timestamp:function(r,a){return this.realInRange(r||9466848e5,a||1577862e6)},angle:function(){return this.integerInRange(-180,180)},rotation:function(){return this.realInRange(-3.1415926,3.1415926)},state:function(r){return typeof r=="string"&&r.match(/^!rnd/)&&(r=r.split(","),this.c=parseFloat(r[1]),this.s0=parseFloat(r[2]),this.s1=parseFloat(r[3]),this.s2=parseFloat(r[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function(r){for(var a=r.length-1,l=a;l>0;l--){var h=Math.floor(this.frac()*(l+1)),u=r[h];r[h]=r[l],r[l]=u}return r}});e.exports=o},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){for(var o=0,r=0;r<n.length;r++)o+=+n[r];return o/n.length};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r){o===void 0&&(o=0),r===void 0&&(r=10);var a=Math.pow(r,-o);return Math.ceil(n*a)/a};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return Math.abs(n-o)};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(18),o=i(0),r=i(69),a=i(1),l=new r,h=new o({initialize:function u(v,d,c,p){v===void 0&&(v=0),d===void 0&&(d=0),c===void 0&&(c=0),p===void 0&&(p=u.DefaultOrder),this._x=v,this._y=d,this._z=c,this._order=p,this.onChangeCallback=a},x:{get:function(){return this._x},set:function(u){this._x=u,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(u){this._y=u,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(u){this._z=u,this.onChangeCallback(this)}},order:{get:function(){return this._order},set:function(u){this._order=u,this.onChangeCallback(this)}},set:function(u,v,d,c){return c===void 0&&(c=this._order),this._x=u,this._y=v,this._z=d,this._order=c,this.onChangeCallback(this),this},copy:function(u){return this.set(u.x,u.y,u.z,u.order)},setFromQuaternion:function(u,v,d){return v===void 0&&(v=this._order),d===void 0&&(d=!1),l.fromQuat(u),this.setFromRotationMatrix(l,v,d)},setFromRotationMatrix:function(u,v,d){v===void 0&&(v=this._order),d===void 0&&(d=!1);var c=u.val,p=c[0],g=c[4],m=c[8],x=c[1],y=c[5],T=c[9],C=c[2],S=c[6],E=c[10],M=0,O=0,L=0,R=.99999;switch(v){case"XYZ":{O=Math.asin(n(m,-1,1)),Math.abs(m)<R?(M=Math.atan2(-T,E),L=Math.atan2(-g,p)):M=Math.atan2(S,y);break}case"YXZ":{M=Math.asin(-n(T,-1,1)),Math.abs(T)<R?(O=Math.atan2(m,E),L=Math.atan2(x,y)):O=Math.atan2(-C,p);break}case"ZXY":{M=Math.asin(n(S,-1,1)),Math.abs(S)<R?(O=Math.atan2(-C,E),L=Math.atan2(-g,y)):L=Math.atan2(x,p);break}case"ZYX":{O=Math.asin(-n(C,-1,1)),Math.abs(C)<R?(M=Math.atan2(S,E),L=Math.atan2(x,p)):L=Math.atan2(-g,y);break}case"YZX":{L=Math.asin(n(x,-1,1)),Math.abs(x)<R?(M=Math.atan2(-T,y),O=Math.atan2(-C,p)):O=Math.atan2(m,E);break}case"XZY":{L=Math.asin(-n(g,-1,1)),Math.abs(g)<R?(M=Math.atan2(S,y),O=Math.atan2(m,p)):M=Math.atan2(-T,E);break}}return this._x=M,this._y=O,this._z=L,this._order=v,d&&this.onChangeCallback(this),this}});h.RotationOrders=["XYZ","YXZ","ZXY","ZYX","YZX","XZY"],h.DefaultOrder="XYZ",e.exports=h},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r){o===void 0&&(o=0),r===void 0&&(r=10);var a=Math.pow(r,-o);return Math.floor(n*a)/a};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return n/o/1e3};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n==parseFloat(n)?!(n%2):void 0};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n===parseFloat(n)?!(n%2):void 0};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r){return Math.min(n+o,r)};e.exports=i},function(e,f){/**
 * @author       Vladislav Forsh <vlad@robowhale.com>
 * @copyright    2021 RoboWhale
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){var o=n.length;if(o===0)return 0;n.sort(function(a,l){return a-l});var r=Math.floor(o/2);return o%2===0?(n[r]+n[r-1])/2:n[r]};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r){return Math.max(n-o,r)};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r,a){r===void 0&&(r=o+1);var l=(n-o)/(r-o);return l>1?a!==void 0?(l=(a-n)/(a-r),l<0&&(l=0)):l=1:l<0&&(l=0),l};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){o===void 0&&(o=1);var r=Math.random()*2*Math.PI;return n.x=Math.cos(r)*o,n.y=Math.sin(r)*o,n};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){o===void 0&&(o=1);var r=Math.random()*2*Math.PI,a=Math.random()*2-1,l=Math.sqrt(1-a*a)*o;return n.x=Math.cos(r)*l,n.y=Math.sin(r)*l,n.z=a*o,n};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return o===void 0&&(o=1),n.x=(Math.random()*2-1)*o,n.y=(Math.random()*2-1)*o,n.z=(Math.random()*2-1)*o,n.w=(Math.random()*2-1)*o,n};e.exports=i},function(e,f){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r,a,l){return n.x=o+l*Math.cos(a),n.y=r+l*Math.sin(a),n};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r){o===void 0&&(o=0),r===void 0&&(r=10);var a=Math.pow(r,-o);return Math.round(n*a)/a};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r,a){o===void 0&&(o=1),r===void 0&&(r=1),a===void 0&&(a=1),a*=Math.PI/n;for(var l=[],h=[],u=0;u<n;u++)r-=o*a,o+=r*a,l[u]=r,h[u]=o;return{sin:h,cos:l,length:n}};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(3),o=function(r,a,l,h){h===void 0&&(h=new n);var u=0,v=0,d=a*l;return r>0&&r<=d&&(r>a-1?(v=Math.floor(r/a),u=r-v*a):u=r),h.set(u,v)};e.exports=o},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r){return Math.abs(n-o)<=r};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(39),o=i(69),r=i(365),a=new o,l=new r,h=new n,u=function(v,d,c){return l.setAxisAngle(d,c),a.fromRotationTranslation(l,h.set(0,0,0)),v.transformMat4(a)};e.exports=u},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="addtexture"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="onerror"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="onload"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="ready"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="removetexture"},function(e,f){e.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_FS","","precision mediump float;","","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uMaskSampler;","uniform bool uInvertMaskAlpha;","","void main ()","{","    vec2 uv = gl_FragCoord.xy / uResolution;","    vec4 mainColor = texture2D(uMainSampler, uv);","    vec4 maskColor = texture2D(uMaskSampler, uv);","    float alpha = mainColor.a;","","    if (!uInvertMaskAlpha)","    {","        alpha *= (maskColor.a);","    }","    else","    {","        alpha *= (1.0 - maskColor.a);","    }","","    gl_FragColor = vec4(mainColor.rgb * alpha, alpha);","}",""].join(`
`)},function(e,f){e.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_VS","","precision mediump float;","","attribute vec2 inPosition;","","void main ()","{","    gl_Position = vec4(inPosition, 0.0, 1.0);","}",""].join(`
`)},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pipelineafterflush"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pipelinebeforeflush"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pipelinebind"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pipelineboot"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pipelinedestroy"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pipelinerebind"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pipelineresize"},function(e,f){e.exports=["#define SHADER_NAME PHASER_GRAPHICS_FS","","precision mediump float;","","varying vec4 outColor;","","void main ()","{","    gl_FragColor = vec4(outColor.bgr * outColor.a, outColor.a);","}",""].join(`
`)},function(e,f){e.exports=["#define SHADER_NAME PHASER_GRAPHICS_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec4 inColor;","","varying vec4 outColor;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outColor = inColor;","}",""].join(`
`)},function(e,f){e.exports=["#define SHADER_NAME PHASER_LIGHT_FS","","precision mediump float;","","struct Light","{","    vec2 position;","    vec3 color;","    float intensity;","    float radius;","};","","const int kMaxLights = %LIGHT_COUNT%;","","uniform vec4 uCamera; /* x, y, rotation, zoom */","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uNormSampler;","uniform vec3 uAmbientLightColor;","uniform Light uLights[kMaxLights];","uniform mat3 uInverseRotationMatrix;","","varying vec2 outTexCoord;","varying vec4 outTint;","","void main()","{","    vec3 finalColor = vec3(0.0, 0.0, 0.0);","    vec4 color = texture2D(uMainSampler, outTexCoord) * vec4(outTint.bgr * outTint.a, outTint.a);","    vec3 normalMap = texture2D(uNormSampler, outTexCoord).rgb;","    vec3 normal = normalize(uInverseRotationMatrix * vec3(normalMap * 2.0 - 1.0));","    vec2 res = vec2(min(uResolution.x, uResolution.y)) * uCamera.w;","","    for (int index = 0; index < kMaxLights; ++index)","    {","        Light light = uLights[index];","        vec3 lightDir = vec3((light.position.xy / res) - (gl_FragCoord.xy / res), 0.1);","        vec3 lightNormal = normalize(lightDir);","        float distToSurf = length(lightDir) * uCamera.w;","        float diffuseFactor = max(dot(normal, lightNormal), 0.0);","        float radius = (light.radius / res.x * uCamera.w) * uCamera.w;","        float attenuation = clamp(1.0 - distToSurf * distToSurf / (radius * radius), 0.0, 1.0);","        vec3 diffuse = light.color * diffuseFactor;","        finalColor += (attenuation * diffuse) * light.intensity;","    }","","    vec4 colorOutput = vec4(uAmbientLightColor + finalColor, 1.0);","","    gl_FragColor = color * vec4(colorOutput.rgb * colorOutput.a, colorOutput.a);","}",""].join(`
`)},function(e,f){e.exports=["#define SHADER_NAME PHASER_MULTI_FS","","precision mediump float;","","uniform sampler2D uMainSampler[%count%];","","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    vec4 texture;","","    %forloop%","","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","","    //  Multiply texture tint","    vec4 color = texture * texel;","","    if (outTintEffect == 1.0)","    {","        //  Solid color + texture alpha","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        //  Solid color, no texture","        color = texel;","    }","","    gl_FragColor = color;","}",""].join(`
`)},function(e,f){e.exports=["#define SHADER_NAME PHASER_MULTI_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outTexCoord = inTexCoord;","    outTexId = inTexId;","    outTint = inTint;","    outTintEffect = inTintEffect;","}",""].join(`
`)},function(e,f){e.exports=["#define SHADER_NAME PHASER_POINTLIGHT_FS","","precision mediump float;","","uniform vec2 uResolution;","uniform float uCameraZoom;","","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","","void main ()","{","    vec2 center = (lightPosition.xy + 1.0) * (uResolution.xy * 0.5);","","    float distToSurf = length(center - gl_FragCoord.xy);","","    float radius = 1.0 - distToSurf / (lightRadius * uCameraZoom);","","    float intensity = smoothstep(0.0, 1.0, radius * lightAttenuation);","","    vec4 color = vec4(intensity, intensity, intensity, 0.0) * lightColor;","","    gl_FragColor = vec4(color.rgb * lightColor.a, color.a);","}",""].join(`
`)},function(e,f){e.exports=["#define SHADER_NAME PHASER_POINTLIGHT_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inLightPosition;","attribute vec4 inLightColor;","attribute float inLightRadius;","attribute float inLightAttenuation;","","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","","void main ()","{","    lightColor = inLightColor;","    lightRadius = inLightRadius;","    lightAttenuation = inLightAttenuation;","    lightPosition = uProjectionMatrix * vec4(inLightPosition, 1.0, 1.0);","","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","}",""].join(`
`)},function(e,f){e.exports=["#define SHADER_NAME PHASER_SINGLE_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","","    //  Multiply texture tint","    vec4 color = texture * texel;","","    if (outTintEffect == 1.0)","    {","        //  Solid color + texture alpha","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        //  Solid color, no texture","        color = texel;","    }","","    gl_FragColor = color;","}",""].join(`
`)},function(e,f){e.exports=["#define SHADER_NAME PHASER_SINGLE_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}",""].join(`
`)},function(e,f){e.exports=["#define SHADER_NAME PHASER_ADD_BLEND_FS","","precision mediump float;","","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","","    gl_FragColor = frame1 + frame2 * uStrength;","}",""].join(`
`)},function(e,f){e.exports=["#define SHADER_NAME PHASER_COLORMATRIX_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","uniform float uColorMatrix[20];","uniform float uAlpha;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 c = texture2D(uMainSampler, outTexCoord);","","    if (uAlpha == 0.0)","    {","        gl_FragColor = c;","","        return;","    }","","    if (c.a > 0.0)","    {","        c.rgb /= c.a;","    }","","    vec4 result;","","    result.r = (uColorMatrix[0] * c.r) + (uColorMatrix[1] * c.g) + (uColorMatrix[2] * c.b) + (uColorMatrix[3] * c.a) + uColorMatrix[4];","    result.g = (uColorMatrix[5] * c.r) + (uColorMatrix[6] * c.g) + (uColorMatrix[7] * c.b) + (uColorMatrix[8] * c.a) + uColorMatrix[9];","    result.b = (uColorMatrix[10] * c.r) + (uColorMatrix[11] * c.g) + (uColorMatrix[12] * c.b) + (uColorMatrix[13] * c.a) + uColorMatrix[14];","    result.a = (uColorMatrix[15] * c.r) + (uColorMatrix[16] * c.g) + (uColorMatrix[17] * c.b) + (uColorMatrix[18] * c.a) + uColorMatrix[19];","","    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);","","    rgb *= result.a;","","    gl_FragColor = vec4(rgb, result.a);","}",""].join(`
`)},function(e,f){e.exports=["#define SHADER_NAME PHASER_COPY_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","uniform float uBrightness;","","varying vec2 outTexCoord;","","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord) * uBrightness;","}",""].join(`
`)},function(e,f){e.exports=["#define SHADER_NAME PHASER_LINEAR_BLEND_FS","","precision mediump float;","","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","","    gl_FragColor = mix(frame1, frame2 * uStrength, 0.5);","}",""].join(`
`)},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={GenerateTexture:i(388),Palettes:i(889)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ARNE16:i(389),C64:i(890),CGA:i(891),JMP:i(892),MSX:i(893)}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={0:"#000",1:"#fff",2:"#8b4131",3:"#7bbdc5",4:"#8b41ac",5:"#6aac41",6:"#3931a4",7:"#d5de73",8:"#945a20",9:"#5a4100",A:"#bd736a",B:"#525252",C:"#838383",D:"#acee8b",E:"#7b73de",F:"#acacac"}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={0:"#000",1:"#2234d1",2:"#0c7e45",3:"#44aacc",4:"#8a3622",5:"#5c2e78",6:"#aa5c3d",7:"#b5b5b5",8:"#5e606e",9:"#4c81fb",A:"#6cd947",B:"#7be2f9",C:"#eb8a60",D:"#e23d69",E:"#ffd93f",F:"#fff"}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#f5f4eb"}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#fff"}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Path:i(895),MoveTo:i(393),CubicBezier:i(390),Curve:i(94),Ellipse:i(391),Line:i(392),QuadraticBezier:i(394),Spline:i(395)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(390),r=i(391),a=i(5),l=i(392),h=i(393),u=i(394),v=i(10),d=i(395),c=i(3),p=i(14),g=new n({initialize:function(x,y){x===void 0&&(x=0),y===void 0&&(y=0),this.name="",this.curves=[],this.cacheLengths=[],this.autoClose=!1,this.startPoint=new c,this._tmpVec2A=new c,this._tmpVec2B=new c,typeof x=="object"?this.fromJSON(x):this.startPoint.set(x,y)},add:function(m){return this.curves.push(m),this},circleTo:function(m,x,y){return x===void 0&&(x=!1),this.ellipseTo(m,m,0,360,x,y)},closePath:function(){var m=this.curves[0].getPoint(0),x=this.curves[this.curves.length-1].getPoint(1);return m.equals(x)||this.curves.push(new l(x,m)),this},cubicBezierTo:function(m,x,y,T,C,S){var E=this.getEndPoint(),M,O,L;return m instanceof c?(M=m,O=x,L=y):(M=new c(y,T),O=new c(C,S),L=new c(m,x)),this.add(new o(E,M,O,L))},quadraticBezierTo:function(m,x,y,T){var C=this.getEndPoint(),S,E;return m instanceof c?(S=m,E=x):(S=new c(y,T),E=new c(m,x)),this.add(new u(C,S,E))},draw:function(m,x){for(var y=0;y<this.curves.length;y++){var T=this.curves[y];!T.active||T.draw(m,x)}return m},ellipseTo:function(m,x,y,T,C,S){var E=new r(0,0,m,x,y,T,C,S),M=this.getEndPoint(this._tmpVec2A),O=E.getStartPoint(this._tmpVec2B);return M.subtract(O),E.x=M.x,E.y=M.y,this.add(E)},fromJSON:function(m){this.curves=[],this.cacheLengths=[],this.startPoint.set(m.x,m.y),this.autoClose=m.autoClose;for(var x=0;x<m.curves.length;x++){var y=m.curves[x];switch(y.type){case"LineCurve":this.add(l.fromJSON(y));break;case"EllipseCurve":this.add(r.fromJSON(y));break;case"SplineCurve":this.add(d.fromJSON(y));break;case"CubicBezierCurve":this.add(o.fromJSON(y));break;case"QuadraticBezierCurve":this.add(u.fromJSON(y));break}}return this},getBounds:function(m,x){m===void 0&&(m=new v),x===void 0&&(x=16),m.x=Number.MAX_VALUE,m.y=Number.MAX_VALUE;for(var y=new v,T=p.MIN_SAFE_INTEGER,C=p.MIN_SAFE_INTEGER,S=0;S<this.curves.length;S++){var E=this.curves[S];!E.active||(E.getBounds(y,x),m.x=Math.min(m.x,y.x),m.y=Math.min(m.y,y.y),T=Math.max(T,y.right),C=Math.max(C,y.bottom))}return m.right=T,m.bottom=C,m},getCurveLengths:function(){if(this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var m=[],x=0,y=0;y<this.curves.length;y++)x+=this.curves[y].getLength(),m.push(x);return this.cacheLengths=m,m},getEndPoint:function(m){return m===void 0&&(m=new c),this.curves.length>0?this.curves[this.curves.length-1].getPoint(1,m):m.copy(this.startPoint),m},getLength:function(){var m=this.getCurveLengths();return m[m.length-1]},getPoint:function(m,x){x===void 0&&(x=new c);for(var y=m*this.getLength(),T=this.getCurveLengths(),C=0;C<T.length;){if(T[C]>=y){var S=T[C]-y,E=this.curves[C],M=E.getLength(),O=M===0?0:1-S/M;return E.getPointAt(O,x)}C++}return null},getPoints:function(m){m===void 0&&(m=12);for(var x=[],y,T=0;T<this.curves.length;T++){var C=this.curves[T];if(!!C.active)for(var S=C.getResolution(m),E=C.getPoints(S),M=0;M<E.length;M++){var O=E[M];y&&y.equals(O)||(x.push(O),y=O)}}return this.autoClose&&x.length>1&&!x[x.length-1].equals(x[0])&&x.push(x[0]),x},getRandomPoint:function(m){return m===void 0&&(m=new c),this.getPoint(Math.random(),m)},getSpacedPoints:function(m){m===void 0&&(m=40);for(var x=[],y=0;y<=m;y++)x.push(this.getPoint(y/m));return this.autoClose&&x.push(x[0]),x},getStartPoint:function(m){return m===void 0&&(m=new c),m.copy(this.startPoint)},getTangent:function(m,x){x===void 0&&(x=new c);for(var y=m*this.getLength(),T=this.getCurveLengths(),C=0;C<T.length;){if(T[C]>=y){var S=T[C]-y,E=this.curves[C],M=E.getLength(),O=M===0?0:1-S/M;return E.getTangentAt(O,x)}C++}return null},lineTo:function(m,x){m instanceof c?this._tmpVec2B.copy(m):this._tmpVec2B.set(m,x);var y=this.getEndPoint(this._tmpVec2A);return this.add(new l([y.x,y.y,this._tmpVec2B.x,this._tmpVec2B.y]))},splineTo:function(m){return m.unshift(this.getEndPoint()),this.add(new d(m))},moveTo:function(m,x){return m instanceof c?this.add(new h(m.x,m.y)):this.add(new h(m,x))},toJSON:function(){for(var m=[],x=0;x<this.curves.length;x++)m.push(this.curves[x].toJSON());return{type:"Path",x:this.startPoint.x,y:this.startPoint.y,autoClose:this.autoClose,curves:m}},updateArcLengths:function(){this.cacheLengths=[],this.getCurveLengths()},destroy:function(){this.curves.length=0,this.cacheLengths.length=0,this.startPoint=void 0}});a.register("path",function(m,x){return new g(m,x)}),e.exports=g},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={DataManager:i(101),DataManagerPlugin:i(897),Events:i(315)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(101),r=i(24),a=i(20),l=new n({Extends:o,initialize:function(u){o.call(this,u,u.sys.events),this.scene=u,this.systems=u.sys,u.sys.events.once(a.BOOT,this.boot,this),u.sys.events.on(a.START,this.start,this)},boot:function(){this.events=this.systems.events,this.events.once(a.DESTROY,this.destroy,this)},start:function(){this.events.once(a.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.systems.events.off(a.SHUTDOWN,this.shutdown,this)},destroy:function(){o.prototype.destroy.call(this),this.events.off(a.START,this.start,this),this.scene=null,this.systems=null}});r.register("DataManagerPlugin",l,"data"),e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Align:i(899),BaseShader:i(396),Bounds:i(902),Canvas:i(906),Color:i(397),ColorMatrix:i(198),Masks:i(916),RGB:i(200)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(123),o=i(17),r={In:i(900),To:i(901)};r=o(!1,r,n),e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={BottomCenter:i(290),BottomLeft:i(291),BottomRight:i(292),Center:i(293),LeftCenter:i(295),QuickSet:i(289),RightCenter:i(296),TopCenter:i(297),TopLeft:i(298),TopRight:i(299)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={BottomCenter:i(277),BottomLeft:i(278),BottomRight:i(279),LeftBottom:i(280),LeftCenter:i(281),LeftTop:i(282),QuickSet:i(276),RightBottom:i(283),RightCenter:i(284),RightTop:i(285),TopCenter:i(286),TopLeft:i(287),TopRight:i(288)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={CenterOn:i(294),GetBottom:i(42),GetBounds:i(903),GetCenterX:i(87),GetCenterY:i(89),GetLeft:i(43),GetOffsetX:i(904),GetOffsetY:i(905),GetRight:i(44),GetTop:i(45),SetBottom:i(55),SetCenterX:i(88),SetCenterY:i(90),SetLeft:i(53),SetRight:i(54),SetTop:i(52)}},function(e,f,i){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(42),o=i(43),r=i(44),a=i(45),l=function(h,u){u===void 0&&(u={});var v=o(h),d=a(h);return u.x=v,u.y=d,u.width=r(h)-v,u.height=n(h)-d,u};e.exports=l},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n.width*n.originX};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n.height*n.originY};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={CanvasInterpolation:i(367),CanvasPool:i(31),Smoothing:i(192),TouchAction:i(907),UserSelect:i(908)}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return o===void 0&&(o="none"),n.style.msTouchAction=o,n.style["ms-touch-action"]=o,n.style["touch-action"]=o,n};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){o===void 0&&(o="none");var r=["-webkit-","-khtml-","-moz-","-ms-",""];return r.forEach(function(a){n.style[a+"user-select"]=o}),n.style["-webkit-touch-callout"]=o,n.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",n};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(103),o=function(r){r===void 0&&(r=1024);var a=[],l=255,h,u=255,v=0,d=0;for(h=0;h<=l;h++)a.push({r:u,g:h,b:d,color:n(u,h,d)});for(v=255,h=l;h>=0;h--)a.push({r:h,g:v,b:d,color:n(h,v,d)});for(u=0,h=0;h<=l;h++,v--)a.push({r:u,g:v,b:h,color:n(u,v,h)});for(v=0,d=255,h=0;h<=l;h++,d--,u++)a.push({r:u,g:v,b:d,color:n(u,v,d)});if(r===1024)return a;var c=[],p=0,g=1024/r;for(h=0;h<r;h++)c.push(a[Math.floor(p)]),p+=g;return c};e.exports=o},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){var o={r:n>>16&255,g:n>>8&255,b:n&255,a:255};return n>16777215&&(o.a=n>>>24),o};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(38),o=i(399),r=function(a,l,h){var u=h,v=h,d=h;if(l!==0){var c=h<.5?h*(1+l):h+l-h*l,p=2*h-c;u=o(p,c,a+1/3),v=o(p,c,a),d=o(p,c,a-1/3)}var g=new n;return g.setGLTo(u,v,d,1)};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(188),o=function(r,a){r===void 0&&(r=1),a===void 0&&(a=1);for(var l=[],h=0;h<=359;h++)l.push(n(h/359,r,a));return l};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(135),o=function(l,h,u,v,d,c,p,g){p===void 0&&(p=100),g===void 0&&(g=0);var m=g/p;return{r:n(l,v,m),g:n(h,d,m),b:n(u,c,m)}},r=function(l,h,u,v){return u===void 0&&(u=100),v===void 0&&(v=0),o(l.r,l.g,l.b,h.r,h.g,h.b,u,v)},a=function(l,h,u,v,d,c){return d===void 0&&(d=100),c===void 0&&(c=0),o(l.r,l.g,l.b,h,u,v,d,c)};e.exports={RGBWithRGB:o,ColorWithRGB:a,ColorWithColor:r}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(195),o=i(38),r=function(a,l){return a===void 0&&(a=0),l===void 0&&(l=255),new o(n(a,l),n(a,l),n(a,l))};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(398),o=function(r,a,l,h,u){return h===void 0&&(h=255),u===void 0&&(u="#"),u==="#"?"#"+((1<<24)+(r<<16)+(a<<8)+l).toString(16).slice(1,7):"0x"+n(h)+n(r)+n(a)+n(l)};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={BitmapMask:i(310),GeometryMask:i(311)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n={AddToDOM:i(142),DOMContentLoaded:i(400),GetInnerHeight:i(401),GetScreenOrientation:i(402),GetTarget:i(407),ParseXML:i(408),RemoveFromDOM:i(202),RequestAnimationFrame:i(386)};e.exports=n},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={EventEmitter:i(919)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(9),r=i(24),a=new n({Extends:o,initialize:function(){o.call(this)},shutdown:function(){this.removeAllListeners()},destroy:function(){this.removeAllListeners()}});r.register("EventEmitter",a,"events"),e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(142),o=i(321),r=i(325),a=i(31),l=i(0),h=i(346),u=i(921),v=i(366),d=i(101),c=i(384),p=i(347),g=i(400),m=i(9),x=i(22),y=i(409),T=i(24),C=i(414),S=i(415),E=i(417),M=i(106),O=i(422),L=i(385),R=i(387),w=i(426),D=new l({initialize:function(N){this.config=new h(N),this.renderer=null,this.domContainer=null,this.canvas=null,this.context=null,this.isBooted=!1,this.isRunning=!1,this.events=new m,this.anims=new o(this),this.textures=new O(this),this.cache=new r(this),this.registry=new d(this),this.input=new y(this,this.config),this.scene=new E(this,this.config.sceneConfig),this.device=p,this.scale=new S(this,this.config),this.sound=null,this.sound=w.create(this),this.loop=new L(this,this.config.fps),this.plugins=new C(this,this.config),this.pendingDestroy=!1,this.removeCanvas=!1,this.noReturn=!1,this.hasFocus=!1,g(this.boot.bind(this))},boot:function(){if(!T.hasCore("EventEmitter")){console.warn("Aborting. Core Plugins missing.");return}this.isBooted=!0,this.config.preBoot(this),this.scale.preBoot(),v(this),u(this),c(this),n(this.canvas,this.config.parent),this.textures.once(M.READY,this.texturesReady,this),this.events.emit(x.BOOT)},texturesReady:function(){this.events.emit(x.READY),this.start()},start:function(){this.isRunning=!0,this.config.postBoot(this),this.renderer?this.loop.start(this.step.bind(this)):this.loop.start(this.headlessStep.bind(this)),R(this);var B=this.events;B.on(x.HIDDEN,this.onHidden,this),B.on(x.VISIBLE,this.onVisible,this),B.on(x.BLUR,this.onBlur,this),B.on(x.FOCUS,this.onFocus,this)},step:function(B,N){if(this.pendingDestroy)return this.runDestroy();var z=this.events;z.emit(x.PRE_STEP,B,N),z.emit(x.STEP,B,N),this.scene.update(B,N),z.emit(x.POST_STEP,B,N);var X=this.renderer;X.preRender(),z.emit(x.PRE_RENDER,X,B,N),this.scene.render(X),X.postRender(),z.emit(x.POST_RENDER,X,B,N)},headlessStep:function(B,N){if(this.pendingDestroy)return this.runDestroy();var z=this.events;z.emit(x.PRE_STEP,B,N),z.emit(x.STEP,B,N),this.scene.update(B,N),z.emit(x.POST_STEP,B,N),z.emit(x.PRE_RENDER),z.emit(x.POST_RENDER)},onHidden:function(){this.loop.pause(),this.events.emit(x.PAUSE)},onVisible:function(){this.loop.resume(),this.events.emit(x.RESUME)},onBlur:function(){this.hasFocus=!1,this.loop.blur()},onFocus:function(){this.hasFocus=!0,this.loop.focus()},getFrame:function(){return this.loop.frame},getTime:function(){return this.loop.now},destroy:function(B,N){N===void 0&&(N=!1),this.pendingDestroy=!0,this.removeCanvas=B,this.noReturn=N},runDestroy:function(){this.scene.destroy(),this.events.emit(x.DESTROY),this.events.removeAllListeners(),this.renderer&&this.renderer.destroy(),this.removeCanvas&&this.canvas&&(a.remove(this.canvas),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)),this.domContainer&&this.domContainer.parentNode.removeChild(this.domContainer),this.loop.destroy(),this.pendingDestroy=!1}});e.exports=D},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(142),o=function(r){var a=r.config;if(!(!a.parent||!a.domCreateContainer)){var l=document.createElement("div");l.style.cssText=["display: block;","width: "+r.scale.width+"px;","height: "+r.scale.height+"px;","padding: 0; margin: 0;","position: absolute;","overflow: hidden;","pointer-events: "+a.domPointerEvents+";","transform: scale(1);","transform-origin: left top;"].join(" "),r.domContainer=l,n(l,a.parent)}};e.exports=o},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="boot"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="destroy"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragend"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragenter"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="drag"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragleave"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragover"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragstart"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="drop"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="gameout"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="gameover"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="gameobjectdown"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragend"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragenter"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="drag"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragleave"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragover"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragstart"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="drop"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="gameobjectmove"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="gameobjectout"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="gameobjectover"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerdown"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointermove"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerout"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerover"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerup"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="wheel"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="gameobjectup"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="gameobjectwheel"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="boot"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="process"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="update"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerdown"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerdownoutside"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointermove"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerout"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerover"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerup"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerupoutside"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="wheel"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerlockchange"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="preupdate"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="shutdown"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="start"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="update"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="addfile"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="complete"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="filecomplete"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="filecomplete-"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="loaderror"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="load"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="fileprogress"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="postprocess"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="progress"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="start"},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n={game:"game",renderer:"renderer",anims:"anims",cache:"cache",plugins:"plugins",registry:"registry",scale:"scale",sound:"sound",textures:"textures",events:"events",cameras:"cameras",add:"add",make:"make",scenePlugin:"scene",displayList:"children",lights:"lights",data:"data",input:"input",load:"load",time:"time",tweens:"tweens",arcadePhysics:"physics",impactPhysics:"impact",matterPhysics:"matter"};e.exports=n},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r){if(!r.getElementsByTagName("TextureAtlas")){console.warn("Invalid Texture Atlas XML given");return}var a=n.source[o];n.add("__BASE",o,0,0,a.width,a.height);for(var l=r.getElementsByTagName("SubTexture"),h,u=0;u<l.length;u++){var v=l[u].attributes,d=v.name.value,c=parseInt(v.x.value,10),p=parseInt(v.y.value,10),g=parseInt(v.width.value,10),m=parseInt(v.height.value,10);if(h=n.add(d,o,c,p,g,m),v.frameX){var x=Math.abs(parseInt(v.frameX.value,10)),y=Math.abs(parseInt(v.frameY.value,10)),T=parseInt(v.frameWidth.value,10),C=parseInt(v.frameHeight.value,10);h.setTrim(g,m,x,y,T,C)}}return n};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){var r=n.source[o];return n.add("__BASE",o,0,0,r.width,r.height),n};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){var r=n.source[o];return n.add("__BASE",o,0,0,r.width,r.height),n};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(77),o=function(r,a,l){if(!l.frames&&!l.textures){console.warn("Invalid Texture Atlas JSON Array");return}var h=r.source[a];r.add("__BASE",a,0,0,h.width,h.height);for(var u=Array.isArray(l.textures)?l.textures[a].frames:l.frames,v,d=0;d<u.length;d++){var c=u[d];v=r.add(c.filename,a,c.frame.x,c.frame.y,c.frame.w,c.frame.h),c.trimmed&&v.setTrim(c.sourceSize.w,c.sourceSize.h,c.spriteSourceSize.x,c.spriteSourceSize.y,c.spriteSourceSize.w,c.spriteSourceSize.h),c.rotated&&(v.rotated=!0,v.updateUVsInverted());var p=c.anchor||c.pivot;p&&(v.customPivot=!0,v.pivotX=p.x,v.pivotY=p.y),v.customData=n(c)}for(var g in l)g!=="frames"&&(Array.isArray(l[g])?r.customData[g]=l[g].slice(0):r.customData[g]=l[g]);return r};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(77),o=function(r,a,l){if(!l.frames){console.warn("Invalid Texture Atlas JSON Hash given, missing 'frames' Object");return}var h=r.source[a];r.add("__BASE",a,0,0,h.width,h.height);var u=l.frames,v;for(var d in u)if(!!u.hasOwnProperty(d)){var c=u[d];v=r.add(d,a,c.frame.x,c.frame.y,c.frame.w,c.frame.h),c.trimmed&&v.setTrim(c.sourceSize.w,c.sourceSize.h,c.spriteSourceSize.x,c.spriteSourceSize.y,c.spriteSourceSize.w,c.spriteSourceSize.h),c.rotated&&(v.rotated=!0,v.updateUVsInverted());var p=c.anchor||c.pivot;p&&(v.customPivot=!0,v.pivotX=p.x,v.pivotY=p.y),v.customData=n(c)}for(var g in l)g!=="frames"&&(Array.isArray(l[g])?r.customData[g]=l[g].slice(0):r.customData[g]=l[g]);return r};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(2),o=function(r,a,l,h,u,v,d){var c=n(d,"frameWidth",null),p=n(d,"frameHeight",c);if(c===null)throw new Error("TextureManager.SpriteSheet: Invalid frameWidth given.");var g=r.source[a];r.add("__BASE",a,0,0,g.width,g.height);var m=n(d,"startFrame",0),x=n(d,"endFrame",-1),y=n(d,"margin",0),T=n(d,"spacing",0),C=Math.floor((u-y+T)/(c+T)),S=Math.floor((v-y+T)/(p+T)),E=C*S;E===0&&console.warn("SpriteSheet frame dimensions will result in zero frames for texture:",r.key),(m>E||m<-E)&&(m=0),m<0&&(m=E+m),x!==-1&&(E=m+(x+1));for(var M=y,O=y,L=0,R=0,w=0;w<E;w++){L=0,R=0;var D=M+c,B=O+p;D>u&&(L=D-u),B>v&&(R=B-v),r.add(w,a,l+M,h+O,c-L,p-R),M+=c+T,M+c>u&&(M=y,O+=p+T)}return r};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(2),o=function(r,a,l){var h=n(l,"frameWidth",null),u=n(l,"frameHeight",h);if(!h)throw new Error("TextureManager.SpriteSheetFromAtlas: Invalid frameWidth given.");var v=r.source[0];r.add("__BASE",0,0,0,v.width,v.height),n(l,"startFrame",0),n(l,"endFrame",-1);for(var d=n(l,"margin",0),c=n(l,"spacing",0),p=a.cutX,g=a.cutY,m=a.cutWidth,x=a.cutHeight,y=a.realWidth,T=a.realHeight,C=Math.floor((y-d+c)/(h+c)),S=Math.floor((T-d+c)/(u+c)),E=a.x,M=h-E,O=h-(y-m-E),L=a.y,R=u-L,w=u-(T-x-L),D,B=d,N=d,z=0,X=a.sourceIndex,k=0;k<S;k++){for(var K=k===0,b=k===S-1,I=0;I<C;I++){var G=I===0,Y=I===C-1;if(D=r.add(z,X,p+B,g+N,h,u),G||K||Y||b){var U=G?E:0,W=K?L:0,H=0,Z=0;G&&(H+=h-M),Y&&(H+=h-O),K&&(Z+=u-R),b&&(Z+=u-w);var q=h-H,_=u-Z;D.cutWidth=q,D.cutHeight=_,D.setTrim(h,u,U,W,q,_)}B+=c,G?B+=M:Y?B+=O:B+=h,z++}B=d,N+=c,K?N+=R:b?N+=w:N+=u}return r};e.exports=o},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=0,n=function(r,a,l,h){var u=i-h.y-h.height;r.add(l,a,h.x,u,h.width,h.height)},o=function(r,a,l){var h=r.source[a];r.add("__BASE",a,0,0,h.width,h.height),i=h.height;for(var u=l.split(`
`),v=/^[ ]*(- )*(\w+)+[: ]+(.*)/,d="",c="",p={x:0,y:0,width:0,height:0},g=0;g<u.length;g++){var m=u[g].match(v);if(!!m){var x=m[1]==="- ",y=m[2],T=m[3];if(x&&(c!==d&&(n(r,a,c,p),d=c),p={x:0,y:0,width:0,height:0}),y==="name"){c=T;continue}switch(y){case"x":case"y":case"width":case"height":p[y]=parseInt(T,10);break}}}return c!==d&&n(r,a,c,p),r};e.exports=o},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="complete"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="decoded"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="decodedall"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="destroy"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="detune"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="detune"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="mute"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="rate"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="volume"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="loop"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="looped"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="mute"},function(e,f){/**
 * @author       pi-kei
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pan"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pauseall"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pause"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="play"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="rate"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="resumeall"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="resume"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="seek"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="stopall"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="stop"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="unlocked"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="volume"},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n={Events:i(75),DisplayList:i(1012),GameObjectCreator:i(16),GameObjectFactory:i(5),UpdateList:i(1040),Components:i(11),GetCalcMatrix:i(19),BuildGameObject:i(28),BuildGameObjectAnimation:i(439),GameObject:i(15),BitmapText:i(148),Blitter:i(213),Bob:i(440),Container:i(214),DOMElement:i(442),DynamicBitmapText:i(215),Extern:i(444),Graphics:i(216),Group:i(113),Image:i(125),Layer:i(219),Particles:i(1074),PathFollower:i(457),RenderTexture:i(221),RetroFont:i(1082),Rope:i(223),Sprite:i(73),Text:i(224),GetTextSize:i(458),MeasureText:i(460),TextStyle:i(459),TileSprite:i(225),Zone:i(129),Video:i(226),Shape:i(34),Arc:i(461),Curve:i(462),Ellipse:i(463),Grid:i(464),IsoBox:i(465),IsoTriangle:i(466),Line:i(467),Polygon:i(468),Rectangle:i(473),Star:i(474),Triangle:i(475),Factories:{Blitter:i(1130),Container:i(1131),DOMElement:i(1132),DynamicBitmapText:i(1133),Extern:i(1134),Graphics:i(1135),Group:i(1136),Image:i(1137),Layer:i(1138),Particles:i(1139),PathFollower:i(1140),RenderTexture:i(1141),Rope:i(1142),Sprite:i(1143),StaticBitmapText:i(1144),Text:i(1145),TileSprite:i(1146),Zone:i(1147),Video:i(1148),Arc:i(1149),Curve:i(1150),Ellipse:i(1151),Grid:i(1152),IsoBox:i(1153),IsoTriangle:i(1154),Line:i(1155),Polygon:i(1156),Rectangle:i(1157),Star:i(1158),Triangle:i(1159)},Creators:{Blitter:i(1160),Container:i(1161),DynamicBitmapText:i(1162),Graphics:i(1163),Group:i(1164),Image:i(1165),Layer:i(1166),Particles:i(1167),RenderTexture:i(1168),Rope:i(1169),Sprite:i(1170),StaticBitmapText:i(1171),Text:i(1172),TileSprite:i(1173),Zone:i(1174),Video:i(1175)}};n.Shader=i(229),n.Mesh=i(230),n.PointLight=i(150),n.Factories.Shader=i(1184),n.Factories.Mesh=i(1185),n.Factories.PointLight=i(1186),n.Creators.Shader=i(1187),n.Creators.Mesh=i(1188),n.Creators.PointLight=i(1189),n.Light=i(481),n.LightsManager=i(482),n.LightsPlugin=i(1190),e.exports=n},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(110),r=i(24),a=i(75),l=i(20),h=i(79),u=new n({Extends:o,initialize:function(d){o.call(this,d),this.sortChildrenFlag=!1,this.scene=d,this.systems=d.sys,this.events=d.sys.events,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.events.once(l.BOOT,this.boot,this),this.events.on(l.START,this.start,this)},boot:function(){this.events.once(l.DESTROY,this.destroy,this)},addChildCallback:function(v){v.displayList&&v.displayList!==this&&v.removeFromDisplayList(),v.displayList||(this.queueDepthSort(),v.displayList=this,v.emit(a.ADDED_TO_SCENE,v,this.scene),this.events.emit(l.ADDED_TO_SCENE,v,this.scene))},removeChildCallback:function(v){this.queueDepthSort(),v.displayList=null,v.emit(a.REMOVED_FROM_SCENE,v,this.scene),this.events.emit(l.REMOVED_FROM_SCENE,v,this.scene)},start:function(){this.events.once(l.SHUTDOWN,this.shutdown,this)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(h(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(v,d){return v._depth-d._depth},getChildren:function(){return this.list},shutdown:function(){for(var v=this.list,d=v.length;d--;)v[d].destroy(!0);v.length=0,this.events.off(l.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(l.START,this.start,this),this.scene=null,this.systems=null,this.events=null}});r.register("DisplayList",u,"displayList"),e.exports=u},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={CheckMatrix:i(209),MatrixToString:i(1014),ReverseColumns:i(1015),ReverseRows:i(1016),Rotate180:i(1017),RotateLeft:i(1018),RotateMatrix:i(147),RotateRight:i(1019),Translate:i(1020),TransposeMatrix:i(435)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(186),o=i(209),r=function(a){var l="";if(!o(a))return l;for(var h=0;h<a.length;h++){for(var u=0;u<a[h].length;u++){var v=a[h][u].toString();v!=="undefined"?l+=n(v,2):l+="?",u<a[h].length-1&&(l+=" |")}if(h<a.length-1){l+=`
`;for(var d=0;d<a[h].length;d++)l+="---",d<a[h].length-1&&(l+="+");l+=`
`}}return l};e.exports=r},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n.reverse()};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){for(var o=0;o<n.length;o++)n[o].reverse();return n};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(147),o=function(r){return n(r,180)};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(147),o=function(r){return n(r,90)};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(147),o=function(r){return n(r,-90)};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(178),o=i(179),r=function(a,l,h){if(l===void 0&&(l=0),h===void 0&&(h=0),h!==0&&(h<0?n(a,Math.abs(h)):o(a,h)),l!==0)for(var u=0;u<a.length;u++){var v=a[u];l<0?n(v,Math.abs(l)):o(v,l)}return a};e.exports=r},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r,a,l){if(l===void 0&&(l=n),r>0){var h=r-n.length;if(h<=0)return null}if(!Array.isArray(o))return n.indexOf(o)===-1?(n.push(o),a&&a.call(l,o),o):null;for(var u=o.length-1;u>=0;)n.indexOf(o[u])!==-1&&o.splice(u,1),u--;if(u=o.length,u===0)return null;r>0&&u>h&&(o.splice(h),u=h);for(var v=0;v<u;v++){var d=o[v];n.push(d),a&&a.call(l,d)}return o};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r,a,l,h){if(r===void 0&&(r=0),h===void 0&&(h=n),a>0){var u=a-n.length;if(u<=0)return null}if(!Array.isArray(o))return n.indexOf(o)===-1?(n.splice(r,0,o),l&&l.call(h,o),o):null;for(var v=o.length-1;v>=0;)n.indexOf(o[v])!==-1&&o.pop(),v--;if(v=o.length,v===0)return null;a>0&&v>u&&(o.splice(u),v=u);for(var d=v-1;d>=0;d--){var c=o[d];n.splice(r,0,c),l&&l.call(h,c)}return o};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){var r=n.indexOf(o);return r!==-1&&r<n.length&&(n.splice(r,1),n.push(o)),o};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(78),o=function(r,a,l,h,u){h===void 0&&(h=0),u===void 0&&(u=r.length);var v=0;if(n(r,h,u))for(var d=h;d<u;d++){var c=r[d];c[a]===l&&v++}return v};e.exports=o},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r){var a,l=[null];for(a=3;a<arguments.length;a++)l.push(arguments[a]);for(a=0;a<n.length;a++)l[0]=n[a],o.apply(r,l);return n};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(78),o=function(r,a,l,h,u){if(h===void 0&&(h=0),u===void 0&&(u=r.length),n(r,h,u)){var v,d=[null];for(v=5;v<arguments.length;v++)d.push(arguments[v]);for(v=h;v<u;v++)d[0]=r[v],a.apply(l,d)}return r};e.exports=o},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){var r=n.indexOf(o);if(r>0){var a=n[r-1],l=n.indexOf(a);n[r]=a,n[l]=o}return n};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r){var a=n.indexOf(o);if(a===-1||r<0||r>=n.length)throw new Error("Supplied index out of bounds");return a!==r&&(n.splice(a,1),n.splice(r,0,o)),o};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){var r=n.indexOf(o);if(r!==-1&&r<n.length-1){var a=n[r+1],l=n.indexOf(a);n[r]=a,n[l]=o}return n};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r){if(o===r)return n;var a=n.indexOf(o),l=n.indexOf(r);if(a<0||l<0)throw new Error("Supplied items must be elements of the same array");return a>l||(n.splice(a,1),l===n.length-1?n.push(o):n.splice(l,0,o)),n};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r){if(o===r)return n;var a=n.indexOf(o),l=n.indexOf(r);if(a<0||l<0)throw new Error("Supplied items must be elements of the same array");return a<l||(n.splice(a,1),l===0?n.unshift(o):n.splice(l,0,o)),n};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(363),o=function(r,a,l){r===void 0&&(r=0),a===void 0&&(a=null),l===void 0&&(l=1),a===null&&(a=r,r=0);for(var h=[],u=Math.max(n((a-r)/(l||1)),0),v=0;v<u;v++)h.push(r),r+=l;return h};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(74),o=function(r,a,l,h){if(h===void 0&&(h=r),a<0||a>r.length-1)throw new Error("Index out of bounds");var u=n(r,a);return l&&l.call(h,u),u};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(78),o=function(r,a,l,h,u){if(a===void 0&&(a=0),l===void 0&&(l=r.length),u===void 0&&(u=r),n(r,a,l)){var v=l-a,d=r.splice(a,v);if(h)for(var c=0;c<d.length;c++){var p=d[c];h.call(u,p)}return d}else return[]};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(74),o=function(r,a,l){a===void 0&&(a=0),l===void 0&&(l=r.length);var h=a+Math.floor(Math.random()*l);return n(r,h)};e.exports=o},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r){var a=n.indexOf(o),l=n.indexOf(r);return a!==-1&&l===-1?(n[a]=r,!0):!1};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){var r=n.indexOf(o);return r!==-1&&r>0&&(n.splice(r,1),n.unshift(o)),o};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(78),o=function(r,a,l,h,u){if(h===void 0&&(h=0),u===void 0&&(u=r.length),n(r,h,u))for(var v=h;v<u;v++){var d=r[v];d.hasOwnProperty(a)&&(d[a]=l)}return r};e.exports=o},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r){if(o===r)return n;var a=n.indexOf(o),l=n.indexOf(r);if(a<0||l<0)throw new Error("Supplied items must be elements of the same array");return n[a]=r,n[l]=o,n};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(211),r=i(24),a=i(20),l=new n({Extends:o,initialize:function(u){o.call(this),this.checkQueue=!0,this.scene=u,this.systems=u.sys,u.sys.events.once(a.BOOT,this.boot,this),u.sys.events.on(a.START,this.start,this)},boot:function(){this.systems.events.once(a.DESTROY,this.destroy,this)},start:function(){var h=this.systems.events;h.on(a.PRE_UPDATE,this.update,this),h.on(a.UPDATE,this.sceneUpdate,this),h.once(a.SHUTDOWN,this.shutdown,this)},sceneUpdate:function(h,u){for(var v=this._active,d=v.length,c=0;c<d;c++){var p=v[c];p.active&&p.preUpdate.call(p,h,u)}},shutdown:function(){for(var h=this._active.length;h--;)this._active[h].destroy(!0);for(h=this._pending.length;h--;)this._pending[h].destroy(!0);for(h=this._destroy.length;h--;)this._destroy[h].destroy(!0);this._toProcess=0,this._pending=[],this._active=[],this._destroy=[],this.removeAllListeners();var u=this.systems.events;u.off(a.PRE_UPDATE,this.update,this),u.off(a.UPDATE,this.sceneUpdate,this),u.off(a.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.systems.events.off(a.START,this.start,this),this.scene=null,this.systems=null}});r.register("UpdateList",l,"updateList"),e.exports=l},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="add"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="remove"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r,a){if(r===void 0&&(r=!1),a===void 0)return a={local:{x:0,y:0,width:0,height:0},global:{x:0,y:0,width:0,height:0},lines:{shortest:0,longest:0,lengths:null,height:0},wrappedText:"",words:[],characters:[],scaleX:0,scaleY:0},a;var l=n.text,h=l.length,u=n.maxWidth,v=n.wordWrapCharCode,d=Number.MAX_VALUE,c=Number.MAX_VALUE,p=0,g=0,m=n.fontData.chars,x=n.fontData.lineHeight,y=n.letterSpacing,T=0,C=0,S=0,E=null,M=n._align,O=0,L=0,R=n.fontSize/n.fontData.size,w=R*n.scaleX,D=R*n.scaleY,B=null,N=0,z=[],X=Number.MAX_VALUE,k=0,K=0,b=0,I,G=[],Y=[],U=null;if(u>0){for(I=0;I<h;I++){if(S=l.charCodeAt(I),S===10){U!==null&&(G.push({word:U.word,i:U.i,x:U.x*w,y:U.y*D,w:U.w*w,h:U.h*D,cr:!0}),U=null),T=0,C+=x,B=null;continue}if(E=m[S],!!E){if(B!==null)var W=E.kerning[N];S===v?U!==null&&(G.push({word:U.word,i:U.i,x:U.x*w,y:U.y*D,w:U.w*w,h:U.h*D,cr:!1}),U=null):(U===null&&(U={word:"",i:I,x:T,y:C,w:0,h:x,cr:!1}),U.word=U.word.concat(l[I]),U.w+=E.xOffset+E.xAdvance+(W!==void 0?W:0)),T+=E.xAdvance+y,B=E,N=S}}U!==null&&G.push({word:U.word,i:U.i,x:U.x*w,y:U.y*D,w:U.w*w,h:U.h*D,cr:!1}),T=0,C=0,B=null,N=0;var H,Z=0,q=[];for(I=0;I<G.length;I++){var _=G[I],nt=_.x,rt=_.x+_.w;if(H){var at=nt-(H.x+H.w);Z=nt-(at+H.w),H=null}var ct=nt-Z,ut=rt-Z;ct>u||ut>u?(q.push(_.i-1),_.cr?(q.push(_.i+_.word.length),Z=0,H=null):H=_):_.cr&&(q.push(_.i+_.word.length),Z=0,H=null)}var pt=function(ne,he,De){return ne.substr(0,he)+De+ne.substr(he+1)};for(I=q.length-1;I>=0;I--)l=pt(l,q[I],`
`);a.wrappedText=l,h=l.length,G=[],U=null}var Dt=0;for(I=0;I<h;I++){if(S=l.charCodeAt(I),S===10){U!==null&&(G.push({word:U.word,i:U.i,x:U.x*w,y:U.y*D,w:U.w*w,h:U.h*D}),U=null),T=0,C+=x,B=null,z[K]=b,b>k&&(k=b),b<X&&(X=b),K++,b=0;continue}if(E=m[S],!!E){if(O=T,L=C,B!==null){var St=E.kerning[N];O+=St!==void 0?St:0}d>O&&(d=O),c>L&&(c=L);var Et=O+E.xAdvance,dt=L+x;p<Et&&(p=Et),g<dt&&(g=dt);var Bt=E.xOffset+E.xAdvance+(St!==void 0?St:0);S===v?U!==null&&(G.push({word:U.word,i:U.i,x:U.x*w,y:U.y*D,w:U.w*w,h:U.h*D}),U=null):(U===null&&(U={word:"",i:Dt,x:T,y:C,w:0,h:x}),U.word=U.word.concat(l[I]),U.w+=Bt),Y.push({i:Dt,char:l[I],code:S,x:(E.xOffset+T)*R,y:(E.yOffset+C)*R,w:E.width*R,h:E.height*R,t:C*R,r:Et*R,b:x*R,line:K,glyph:E}),T+=E.xAdvance+y,B=E,N=S,b=Et*R,Dt++}}if(U!==null&&G.push({word:U.word,i:U.i,x:U.x*w,y:U.y*D,w:U.w*w,h:U.h*D}),z[K]=b,b>k&&(k=b),b<X&&(X=b),M>0)for(var mt=0;mt<Y.length;mt++){var Ot=Y[mt];if(M===1){var Oe=(k-z[Ot.line])/2;Ot.x+=Oe,Ot.r+=Oe}else if(M===2){var $e=k-z[Ot.line];Ot.x+=$e,Ot.r+=$e}}var Qt=a.local,Ht=a.global,oe=a.lines;return Qt.x=d*R,Qt.y=c*R,Qt.width=p*R,Qt.height=g*R,Ht.x=n.x-n._displayOriginX+d*w,Ht.y=n.y-n._displayOriginY+c*D,Ht.width=p*w,Ht.height=g*D,oe.shortest=X,oe.longest=k,oe.lengths=z,o&&(Qt.x=Math.ceil(Qt.x),Qt.y=Math.ceil(Qt.y),Qt.width=Math.ceil(Qt.width),Qt.height=Math.ceil(Qt.height),Ht.x=Math.ceil(Ht.x),Ht.y=Math.ceil(Ht.y),Ht.width=Math.ceil(Ht.width),Ht.height=Math.ceil(Ht.height),oe.shortest=Math.ceil(X),oe.longest=Math.ceil(k)),r&&(n._displayOriginX=n.originX*Qt.width,n._displayOriginY=n.originY*Qt.height,Ht.x=n.x-n._displayOriginX*n.scaleX,Ht.y=n.y-n._displayOriginY*n.scaleY,o&&(Ht.x=Math.ceil(Ht.x),Ht.y=Math.ceil(Ht.y))),a.words=G,a.characters=Y,a.lines.height=x,a.scale=R,a.scaleX=n.scaleX,a.scaleY=n.scaleY,a};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(212),o=function(r,a,l,h,u,v,d){var c=r.sys.textures.get(l),p=c.get(h),g=r.sys.cache.xml.get(u);if(p&&g){var m=n(g,p,v,d,c);return r.sys.cache.bitmapFont.add(a,{data:m,texture:l,frame:h,fromAtlas:!0}),!0}else return!1};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),o=i(1);n=i(1046),o=i(1048),e.exports={renderWebGL:n,renderCanvas:o}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1047),o=i(19),r=i(12),a=function(l,h,u,v){var d=h._text,c=d.length;if(c!==0){u.addToRenderList(h);var p=l.pipelines.set(h.pipeline,h),g=o(h,u,v).calc,m=u.roundPixels,x=u.alpha,y=h.charColors,T=h.tintFill,C=r.getTintAppendFloatAlpha,S=C(h.tintTopLeft,x*h._alphaTL),E=C(h.tintTopRight,x*h._alphaTR),M=C(h.tintBottomLeft,x*h._alphaBL),O=C(h.tintBottomRight,x*h._alphaBR),L=h.frame.glTexture,R=p.setGameObject(h),w=h.getTextBounds(!1),D,B,N,z=w.characters,X=h.dropShadowX,k=h.dropShadowY,K=X!==0||k!==0;if(l.pipelines.preBatch(h),K){var b=h.dropShadowColor,I=h.dropShadowAlpha,G=C(b,x*I*h._alphaTL),Y=C(b,x*I*h._alphaTR),U=C(b,x*I*h._alphaBL),W=C(b,x*I*h._alphaBR);for(D=0;D<z.length;D++)B=z[D],N=B.glyph,!(B.code===32||N.width===0||N.height===0)&&n(p,h,B,N,X,k,g,m,G,Y,U,W,1,L,R)}for(D=0;D<z.length;D++)if(B=z[D],N=B.glyph,!(B.code===32||N.width===0||N.height===0))if(y[B.i]){var H=y[B.i],Z=H.tintEffect,q=C(H.tintTL,x*h._alphaTL),_=C(H.tintTR,x*h._alphaTR),nt=C(H.tintBL,x*h._alphaBL),rt=C(H.tintBR,x*h._alphaBR);n(p,h,B,N,0,0,g,m,q,_,nt,rt,Z,L,R)}else n(p,h,B,N,0,0,g,m,S,E,M,O,T,L,R);l.pipelines.postBatch(h)}};e.exports=a},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r,a,l,h,u,v,d,c,p,g,m,x,y){var T=r.x-o.displayOriginX+l,C=r.y-o.displayOriginY+h,S=T+r.w,E=C+r.h,M=u.getXRound(T,C,v),O=u.getYRound(T,C,v),L=u.getXRound(T,E,v),R=u.getYRound(T,E,v),w=u.getXRound(S,E,v),D=u.getYRound(S,E,v),B=u.getXRound(S,C,v),N=u.getYRound(S,C,v);n.batchQuad(o,M,O,L,R,w,D,B,N,a.u0,a.v0,a.u1,a.v1,d,c,p,g,m,x,y)};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(30),o=function(r,a,l,h){var u=a._text,v=u.length,d=r.currentContext;if(!(v===0||!n(r,d,a,l,h))){l.addToRenderList(a);var c=a.fromAtlas?a.frame:a.texture.frames.__BASE,p=a.fontData.chars,g=a.fontData.lineHeight,m=a._letterSpacing,x=0,y=0,T=0,C=null,S=0,E=0,M=0,O=0,L=0,R=0,w=null,D=0,B=c.source.image,N=c.cutX,z=c.cutY,X=a._fontSize/a.fontData.size,k=a._align,K=0,b=0,I=a.getTextBounds(!1);a.maxWidth>0&&(u=I.wrappedText,v=u.length);var G=a._bounds.lines;k===1?b=(G.longest-G.lengths[0])/2:k===2&&(b=G.longest-G.lengths[0]),d.translate(-a.displayOriginX,-a.displayOriginY);for(var Y=l.roundPixels,U=0;U<v;U++){if(T=u.charCodeAt(U),T===10){K++,k===1?b=(G.longest-G.lengths[K])/2:k===2&&(b=G.longest-G.lengths[K]),x=0,y+=g,w=null;continue}if(C=p[T],!!C){if(S=N+C.x,E=z+C.y,M=C.width,O=C.height,L=C.xOffset+x,R=C.yOffset+y,w!==null){var W=C.kerning[D];L+=W!==void 0?W:0}L*=X,R*=X,L+=b,x+=C.xAdvance+m,w=C,D=T,!(M===0||O===0||T===32)&&(Y&&(L=Math.round(L),R=Math.round(R)),d.save(),d.translate(L,R),d.scale(X,X),d.drawImage(B,S,E,M,O,0,0,M,O),d.restore())}}d.restore()}};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),o=i(1);n=i(1050),o=i(1051),e.exports={renderWebGL:n,renderCanvas:o}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(25),o=i(12),r=new n,a=function(l,h,u,v){var d=h.getRenderList();if(d.length!==0){var c=u.alpha*h.alpha;if(c!==0){u.addToRenderList(h);var p=l.pipelines.set(this.pipeline,h),g=u.scrollX*h.scrollFactorX,m=u.scrollY*h.scrollFactorY,x=r.copyFrom(u.matrix);v&&(x.multiplyWithOffset(v,-g,-m),g=0,m=0);var y=h.x-g,T=h.y-m,C=-1,S=!1,E=u.roundPixels;l.pipelines.preBatch(h);for(var M=0;M<d.length;M++){var O=d[M],L=O.frame,R=O.alpha*c;if(R!==0){var w=L.width,D=L.height,B=y+O.x+L.x,N=T+O.y+L.y;O.flipX&&(w*=-1,B+=L.width),O.flipY&&(D*=-1,N+=L.height);var z=B+w,X=N+D,k=x.getX(B,N),K=x.getY(B,N),b=x.getX(z,X),I=x.getY(z,X),G=o.getTintAppendFloatAlpha(O.tint,R);if(L.sourceIndex!==C){var Y=p.setGameObject(h,L);C=L.sourceIndex}E&&(k=Math.round(k),K=Math.round(K),b=Math.round(b),I=Math.round(I)),p.batchQuad(h,k,K,k,I,b,I,b,K,L.u0,L.v0,L.u1,L.v1,G,G,G,G,S,L.glTexture,Y)&&(C=-1)}}l.pipelines.postBatch(h)}}};e.exports=a},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r,a){var l=o.getRenderList();if(l.length!==0){var h=n.currentContext,u=r.alpha*o.alpha;if(u!==0){r.addToRenderList(o),h.globalCompositeOperation=n.blendModes[o.blendMode],h.imageSmoothingEnabled=!(!n.antialias||o.frame.source.scaleMode);var v=o.x-r.scrollX*o.scrollFactorX,d=o.y-r.scrollY*o.scrollFactorY;h.save(),a&&a.copyToContext(h);for(var c=r.roundPixels,p=0;p<l.length;p++){var g=l[p],m=g.flipX||g.flipY,x=g.frame,y=x.canvasData,T=x.x,C=x.y,S=1,E=1,M=g.alpha*u;M!==0&&(h.globalAlpha=M,m?(g.flipX&&(S=-1,T-=y.width),g.flipY&&(E=-1,C-=y.height),h.save(),h.translate(g.x+v,g.y+d),h.scale(S,E),h.drawImage(x.source.image,y.x,y.y,y.width,y.height,T,C,y.width,y.height),h.restore()):(c&&(T=Math.round(T),C=Math.round(C)),h.drawImage(x.source.image,y.x,y.y,y.width,y.height,T+g.x+v,C+g.y+d,y.width,y.height)))}h.restore()}}};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),o=i(1);n=i(1053),o=i(1054),e.exports={renderWebGL:n,renderCanvas:o}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r,a){r.addToRenderList(o);var l=o.list,h=l.length;if(h!==0){var u=o.localTransform;a?(u.loadIdentity(),u.multiply(a),u.translate(o.x,o.y),u.rotate(o.rotation),u.scale(o.scaleX,o.scaleY)):u.applyITRS(o.x,o.y,o.rotation,o.scaleX,o.scaleY),n.pipelines.preBatch(o);var v=o.blendMode!==-1;v||n.setBlendMode(0);for(var d=o.alpha,c=o.scrollFactorX,p=o.scrollFactorY,g=0;g<h;g++){var m=l[g];if(!!m.willRender(r)){var x,y,T,C;if(m.alphaTopLeft!==void 0)x=m.alphaTopLeft,y=m.alphaTopRight,T=m.alphaBottomLeft,C=m.alphaBottomRight;else{var S=m.alpha;x=S,y=S,T=S,C=S}var E=m.scrollFactorX,M=m.scrollFactorY;!v&&m.blendMode!==n.currentBlendMode&&n.setBlendMode(m.blendMode);var O=m.mask;O&&O.preRenderWebGL(n,m,r);var L=m.type;L!==n.currentType&&(n.newType=!0,n.currentType=L),n.nextTypeMatch=g<h-1?l[g+1].type===n.currentType:!1,m.setScrollFactor(E*c,M*p),m.setAlpha(x*d,y*d,T*d,C*d),m.renderWebGL(n,m,r,u),m.setAlpha(x,y,T,C),m.setScrollFactor(E,M),O&&O.postRenderWebGL(n,r),n.newType=!1}}n.pipelines.postBatch(o)}};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r,a){r.addToRenderList(o);var l=o.list;if(l.length!==0){var h=o.localTransform;a?(h.loadIdentity(),h.multiply(a),h.translate(o.x,o.y),h.rotate(o.rotation),h.scale(o.scaleX,o.scaleY)):h.applyITRS(o.x,o.y,o.rotation,o.scaleX,o.scaleY);var u=o.blendMode!==-1;u||n.setBlendMode(0);var v=o._alpha,d=o.scrollFactorX,c=o.scrollFactorY;o.mask&&o.mask.preRenderCanvas(n,null,r);for(var p=0;p<l.length;p++){var g=l[p];if(!!g.willRender(r)){var m=g.alpha,x=g.scrollFactorX,y=g.scrollFactorY;!u&&g.blendMode!==n.currentBlendMode&&n.setBlendMode(g.blendMode),g.setScrollFactor(x*d,y*c),g.setAlpha(m*v),g.renderCanvas(n,g,r,h),g.setAlpha(m),g.setScrollFactor(x,y)}}o.mask&&o.mask.postRenderCanvas(n)}};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),o=i(1);n=i(443),o=i(443),e.exports={renderWebGL:n,renderCanvas:o}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports=["normal","multiply","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),o=i(1);n=i(1058),o=i(1059),e.exports={renderWebGL:n,renderCanvas:o}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(19),o=i(25),r=i(12),a=new o,l=function(h,u,v,d){var c=u.text,p=c.length;if(p!==0){v.addToRenderList(u);var g=h.pipelines.set(u.pipeline,u),m=n(u,v,d),x=m.sprite,y=m.calc,T=a,C=u.cropWidth>0||u.cropHeight>0;C&&(g.flush(),h.pushScissor(y.tx,y.ty,u.cropWidth*y.scaleX,u.cropHeight*y.scaleY));var S=u.frame,E=S.glTexture,M=u.tintFill,O=r.getTintAppendFloatAlpha(u.tintTopLeft,v.alpha*u._alphaTL),L=r.getTintAppendFloatAlpha(u.tintTopRight,v.alpha*u._alphaTR),R=r.getTintAppendFloatAlpha(u.tintBottomLeft,v.alpha*u._alphaBL),w=r.getTintAppendFloatAlpha(u.tintBottomRight,v.alpha*u._alphaBR),D=g.setGameObject(u),B=0,N=0,z=0,X=0,k=u.letterSpacing,K,b=0,I=0,G,Y=u.scrollX,U=u.scrollY,W=u.fontData,H=W.chars,Z=W.lineHeight,q=u.fontSize/W.size,_=0,nt=u._align,rt=0,at=0,ct=u.getTextBounds(!1);u.maxWidth>0&&(c=ct.wrappedText,p=c.length);var ut=u._bounds.lines;nt===1?at=(ut.longest-ut.lengths[0])/2:nt===2&&(at=ut.longest-ut.lengths[0]);var pt=v.roundPixels,Dt=u.displayCallback,St=u.callbackData;h.pipelines.preBatch(u);for(var Et=0;Et<p;Et++){if(z=c.charCodeAt(Et),z===10){rt++,nt===1?at=(ut.longest-ut.lengths[rt])/2:nt===2&&(at=ut.longest-ut.lengths[rt]),B=0,N+=Z,G=null;continue}if(K=H[z],!!K){b=K.width,I=K.height;var dt=K.xOffset+B-Y,Bt=K.yOffset+N-U;if(G!==null){var mt=K.kerning[X];dt+=mt!==void 0?mt:0}if(B+=K.xAdvance+k,G=K,X=z,!(b===0||I===0||z===32)){if(q=u.fontSize/u.fontData.size,_=0,Dt){St.color=0,St.tint.topLeft=O,St.tint.topRight=L,St.tint.bottomLeft=R,St.tint.bottomRight=w,St.index=Et,St.charCode=z,St.x=dt,St.y=Bt,St.scale=q,St.rotation=_,St.data=K.data;var Ot=Dt(St);dt=Ot.x,Bt=Ot.y,q=Ot.scale,_=Ot.rotation,Ot.color?(O=Ot.color,L=Ot.color,R=Ot.color,w=Ot.color):(O=Ot.tint.topLeft,L=Ot.tint.topRight,R=Ot.tint.bottomLeft,w=Ot.tint.bottomRight),O=r.getTintAppendFloatAlpha(O,v.alpha*u._alphaTL),L=r.getTintAppendFloatAlpha(L,v.alpha*u._alphaTR),R=r.getTintAppendFloatAlpha(R,v.alpha*u._alphaBL),w=r.getTintAppendFloatAlpha(w,v.alpha*u._alphaBR)}dt*=q,Bt*=q,dt-=u.displayOriginX,Bt-=u.displayOriginY,dt+=at,T.applyITRS(dt,Bt,_,q,q),y.multiply(T,x);var Oe=K.u0,$e=K.v0,Qt=K.u1,Ht=K.v1,oe=b,ne=I,he=x.e,De=x.f,Ci=ne*x.c+x.e,Si=ne*x.d+x.f,Ei=oe*x.a+ne*x.c+x.e,Pi=oe*x.b+ne*x.d+x.f,Mi=oe*x.a+x.e,Ai=oe*x.b+x.f;pt&&(he=Math.round(he),De=Math.round(De),Ci=Math.round(Ci),Si=Math.round(Si),Ei=Math.round(Ei),Pi=Math.round(Pi),Mi=Math.round(Mi),Ai=Math.round(Ai)),g.batchQuad(u,he,De,Ci,Si,Ei,Pi,Mi,Ai,Oe,$e,Qt,Ht,O,L,R,w,M,E,D)}}}C&&(g.flush(),h.popScissor()),h.pipelines.postBatch(u)}};e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(30),o=function(r,a,l,h){var u=a._text,v=u.length,d=r.currentContext;if(!(v===0||!n(r,d,a,l,h))){l.addToRenderList(a);var c=a.fromAtlas?a.frame:a.texture.frames.__BASE,p=a.displayCallback,g=a.callbackData,m=a.fontData.chars,x=a.fontData.lineHeight,y=a._letterSpacing,T=0,C=0,S=0,E=null,M=0,O=0,L=0,R=0,w=0,D=0,B=null,N=0,z=a.frame.source.image,X=c.cutX,k=c.cutY,K=0,b=0,I=a._fontSize/a.fontData.size,G=a._align,Y=0,U=0;a.getTextBounds(!1);var W=a._bounds.lines;G===1?U=(W.longest-W.lengths[0])/2:G===2&&(U=W.longest-W.lengths[0]),d.translate(-a.displayOriginX,-a.displayOriginY);var H=l.roundPixels;a.cropWidth>0&&a.cropHeight>0&&(d.beginPath(),d.rect(0,0,a.cropWidth,a.cropHeight),d.clip());for(var Z=0;Z<v;Z++){if(b=I,K=0,S=u.charCodeAt(Z),S===10){Y++,G===1?U=(W.longest-W.lengths[Y])/2:G===2&&(U=W.longest-W.lengths[Y]),T=0,C+=x,B=null;continue}if(E=m[S],!!E){if(M=X+E.x,O=k+E.y,L=E.width,R=E.height,w=E.xOffset+T-a.scrollX,D=E.yOffset+C-a.scrollY,B!==null){var q=E.kerning[N];w+=q!==void 0?q:0}if(p){g.index=Z,g.charCode=S,g.x=w,g.y=D,g.scale=b,g.rotation=K,g.data=E.data;var _=p(g);w=_.x,D=_.y,b=_.scale,K=_.rotation}w*=b,D*=b,w+=U,T+=E.xAdvance+y,B=E,N=S,!(L===0||R===0||S===32)&&(H&&(w=Math.round(w),D=Math.round(D)),d.save(),d.translate(w,D),d.rotate(K),d.scale(b,b),d.drawImage(z,M,O,L,R,0,0,L,R),d.restore())}}d.restore()}};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),o=i(1);n=i(1061),o=i(1062),e.exports={renderWebGL:n,renderCanvas:o}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(19),o=function(r,a,l,h){r.pipelines.clear();var u=n(a,l,h).calc;a.render.call(a,r,l,u),r.pipelines.rebind()};e.exports=o},function(e,f){},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),o=i(1);n=i(1064),o=i(448),o=i(448),e.exports={renderWebGL:n,renderCanvas:o}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(217),o=i(19),r=i(25),a=i(12),l=function(c,p,g){this.x=c,this.y=p,this.width=g},h=function(c,p,g){this.points=[],this.pointsLength=1,this.points[0]=new l(c,p,g)},u=[],v=new r,d=function(c,p,g,m){if(p.commandBuffer.length!==0){g.addToRenderList(p);var x=c.pipelines.set(p.pipeline,p);c.pipelines.preBatch(p);for(var y=o(p,g,m).calc,T=v.loadIdentity(),C=p.commandBuffer,S=g.alpha*p.alpha,E=1,M=x.fillTint,O=x.strokeTint,L=0,R=0,w=0,D=.01,B=Math.PI*2,N,z=[],X=0,k=!0,K=null,b=a.getTintAppendFloatAlpha,I=0;I<C.length;I++)switch(N=C[I],N){case n.BEGIN_PATH:{z.length=0,K=null,k=!0;break}case n.CLOSE_PATH:{k=!1,K&&K.points.length&&K.points.push(K.points[0]);break}case n.FILL_PATH:{for(X=0;X<z.length;X++)x.batchFillPath(z[X].points,T,y);break}case n.STROKE_PATH:{for(X=0;X<z.length;X++)x.batchStrokePath(z[X].points,E,k,T,y);break}case n.LINE_STYLE:{E=C[++I];var G=C[++I],Y=C[++I]*S,U=b(G,Y);O.TL=U,O.TR=U,O.BL=U,O.BR=U;break}case n.FILL_STYLE:{var W=C[++I],H=C[++I]*S,Z=b(W,H);M.TL=Z,M.TR=Z,M.BL=Z,M.BR=Z;break}case n.GRADIENT_FILL_STYLE:{var q=C[++I]*S,_=C[++I]*S,nt=C[++I]*S,rt=C[++I]*S;M.TL=b(C[++I],q),M.TR=b(C[++I],_),M.BL=b(C[++I],nt),M.BR=b(C[++I],rt);break}case n.GRADIENT_LINE_STYLE:{E=C[++I];var at=C[++I]*S;O.TL=b(C[++I],at),O.TR=b(C[++I],at),O.BL=b(C[++I],at),O.BR=b(C[++I],at);break}case n.ARC:{var ct=0,ut=C[++I],pt=C[++I],Dt=C[++I],St=C[++I],Et=C[++I],dt=C[++I],Bt=C[++I];for(Et-=St,dt?Et<-B?Et=-B:Et>0&&(Et=-B+Et%B):Et>B?Et=B:Et<0&&(Et=B+Et%B),K===null&&(K=new h(ut+Math.cos(St)*Dt,pt+Math.sin(St)*Dt,E),z.push(K),ct+=D);ct<1+Bt;)w=Et*ct+St,L=ut+Math.cos(w)*Dt,R=pt+Math.sin(w)*Dt,K.points.push(new l(L,R,E)),ct+=D;w=Et+St,L=ut+Math.cos(w)*Dt,R=pt+Math.sin(w)*Dt,K.points.push(new l(L,R,E));break}case n.FILL_RECT:{x.batchFillRect(C[++I],C[++I],C[++I],C[++I],T,y);break}case n.FILL_TRIANGLE:{x.batchFillTriangle(C[++I],C[++I],C[++I],C[++I],C[++I],C[++I],T,y);break}case n.STROKE_TRIANGLE:{x.batchStrokeTriangle(C[++I],C[++I],C[++I],C[++I],C[++I],C[++I],E,T,y);break}case n.LINE_TO:{K!==null?K.points.push(new l(C[++I],C[++I],E)):(K=new h(C[++I],C[++I],E),z.push(K));break}case n.MOVE_TO:{K=new h(C[++I],C[++I],E),z.push(K);break}case n.SAVE:{u.push(T.copyToArray());break}case n.RESTORE:{T.copyFromArray(u.pop());break}case n.TRANSLATE:{ut=C[++I],pt=C[++I],T.translate(ut,pt);break}case n.SCALE:{ut=C[++I],pt=C[++I],T.scale(ut,pt);break}case n.ROTATE:{T.rotate(C[++I]);break}}c.pipelines.postBatch(p)}};e.exports=d},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),o=i(1);n=i(1066),o=i(1067),e.exports={renderWebGL:n,renderCanvas:o}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r,a){r.addToRenderList(o),o.pipeline.batchSprite(o,r,a)};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r,a){r.addToRenderList(o),n.batchSprite(o,o.frame,r,a)};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),o=i(1);n=i(1069),o=i(1070),e.exports={renderWebGL:n,renderCanvas:o}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r,a){r.addToRenderList(o),this.pipeline.batchSprite(o,r,a)};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r,a){r.addToRenderList(o),n.batchSprite(o,o.frame,r,a)};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),o=i(1);n=i(1072),o=i(1073),e.exports={renderWebGL:n,renderCanvas:o}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r){var a=o.list,l=a.length;if(l!==0){o.depthSort(),n.pipelines.preBatch(o);var h=o.blendMode!==-1;h||n.setBlendMode(0);for(var u=o.alpha,v=0;v<l;v++){var d=a[v];if(!!d.willRender(r)){var c,p,g,m;if(d.alphaTopLeft!==void 0)c=d.alphaTopLeft,p=d.alphaTopRight,g=d.alphaBottomLeft,m=d.alphaBottomRight;else{var x=d.alpha;c=x,p=x,g=x,m=x}!h&&d.blendMode!==n.currentBlendMode&&n.setBlendMode(d.blendMode);var y=d.mask;y&&y.preRenderWebGL(n,d,r);var T=d.type;T!==n.currentType&&(n.newType=!0,n.currentType=T),n.nextTypeMatch=v<l-1?a[v+1].type===n.currentType:!1,d.setAlpha(c*u,p*u,g*u,m*u),d.renderWebGL(n,d,r),d.setAlpha(c,p,g,m),y&&y.postRenderWebGL(n,r),n.newType=!1}}n.pipelines.postBatch(o)}};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r){var a=o.list;if(a.length!==0){o.depthSort();var l=o.blendMode!==-1;l||n.setBlendMode(0);var h=o._alpha;o.mask&&o.mask.preRenderCanvas(n,null,r);for(var u=0;u<a.length;u++){var v=a[u];if(!!v.willRender(r)){var d=v.alpha;!l&&v.blendMode!==n.currentBlendMode&&n.setBlendMode(v.blendMode),v.setAlpha(d*h),v.renderCanvas(n,v,r),v.setAlpha(d)}}o.mask&&o.mask.postRenderCanvas(n)}};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={EmitterOp:i(449),GravityWell:i(450),Particle:i(451),ParticleEmitter:i(452),ParticleEmitterManager:i(220),Zones:i(1078)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),o=i(1);n=i(1076),o=i(1077),e.exports={renderWebGL:n,renderCanvas:o}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(25),o=i(12),r=new n,a=new n,l=new n,h=new n,u=function(v,d,c,p){var g=d.emitters.list,m=g.length;if(m!==0){var x=v.pipelines.set(d.pipeline),y=r,T=a,C=l,S=h;p?(S.loadIdentity(),S.multiply(p),S.translate(d.x,d.y),S.rotate(d.rotation),S.scale(d.scaleX,d.scaleY)):S.applyITRS(d.x,d.y,d.rotation,d.scaleX,d.scaleY);var E=c.roundPixels,M=d.defaultFrame.glTexture,O=o.getTintAppendFloatAlpha,L=x.setGameObject(d,d.defaultFrame);v.pipelines.preBatch(d);for(var R=0;R<m;R++){var w=g[R],D=w.alive,B=D.length;if(!(!w.visible||B===0)){c.addToRenderList(w);var N=w.scrollFactorX,z=w.scrollFactorY;v.setBlendMode(w.blendMode),w.mask&&(w.mask.preRenderWebGL(v,w,c),v.pipelines.set(d.pipeline));for(var X=0,k=0;k<B;k++){var K=D[k],b=K.alpha*c.alpha;if(!(b<=0)){C.applyITRS(K.x,K.y,K.rotation,K.scaleX,K.scaleY),y.copyFrom(c.matrix),y.multiplyWithOffset(S,-c.scrollX*N,-c.scrollY*z),C.e=K.x,C.f=K.y,y.multiply(C,T);var I=K.frame,G=-I.halfWidth,Y=-I.halfHeight,U=G+I.width,W=Y+I.height,H=T.getXRound(G,Y,E),Z=T.getYRound(G,Y,E),q=T.getXRound(G,W,E),_=T.getYRound(G,W,E),nt=T.getXRound(U,W,E),rt=T.getYRound(U,W,E),at=T.getXRound(U,Y,E),ct=T.getYRound(U,Y,E),ut=O(K.tint,b);x.batchQuad(w,H,Z,q,_,nt,rt,at,ct,I.u0,I.v0,I.u1,I.v1,ut,ut,ut,ut,X,M,L)}}w.mask&&w.mask.postRenderWebGL(v,c)}}v.pipelines.postBatch(d)}};e.exports=u},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(25),o=new n,r=new n,a=new n,l=new n,h=function(u,v,d,c){var p=v.emitters.list,g=p.length;if(g!==0){var m=o.copyFrom(d.matrix),x=r,y=a,T=l;c?(T.loadIdentity(),T.multiply(c),T.translate(v.x,v.y),T.rotate(v.rotation),T.scale(v.scaleX,v.scaleY)):T.applyITRS(v.x,v.y,v.rotation,v.scaleX,v.scaleY);for(var C=u.currentContext,S=d.roundPixels,E=0;E<g;E++){var M=p[E],O=M.alive,L=O.length;if(!(!M.visible||L===0)){d.addToRenderList(M);var R=M.scrollFactorX,w=M.scrollFactorY;C.save(),C.globalCompositeOperation=u.blendModes[M.blendMode];for(var D=0;D<L;D++){var B=O[D],N=B.alpha*d.alpha;if(!(N<=0)){y.applyITRS(B.x,B.y,B.rotation,B.scaleX,B.scaleY),m.copyFrom(d.matrix),m.multiplyWithOffset(T,-d.scrollX*R,-d.scrollY*w),y.e=B.x,y.f=B.y,m.multiply(y,x);var z=B.frame,X=z.canvasData,k=-z.halfWidth,K=-z.halfHeight;C.globalAlpha=N,C.save(),x.setToContext(C),S&&(k=Math.round(k),K=Math.round(K)),C.imageSmoothingEnabled=!(!u.antialias||z.source.scaleMode),C.drawImage(z.source.image,X.x,X.y,X.width,X.height,k,K,X.width,X.height),C.restore()}}C.restore()}}}};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={DeathZone:i(453),EdgeZone:i(454),RandomZone:i(456)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),o=i(1);n=i(1080),o=i(1081),e.exports={renderWebGL:n,renderCanvas:o}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(12),o=function(r,a,l,h){l.addToRenderList(a);var u=l.alpha,v=a.renderTarget,d=v.width,c=v.height,p=n.getTintAppendFloatAlpha,g=r.pipelines.set(a.pipeline),m=g.setTexture2D(v.texture);r.pipelines.preBatch(a),g.batchTexture(a,v.texture,d,c,a.x,a.y,d,c,a.scaleX,a.scaleY,a.rotation,a.flipX,!a.flipY,a.scrollFactorX,a.scrollFactorY,a.displayOriginX,a.displayOriginY,0,0,d,c,p(a.tintTopLeft,u*a._alphaTL),p(a.tintTopRight,u*a._alphaTR),p(a.tintBottomLeft,u*a._alphaBL),p(a.tintBottomRight,u*a._alphaBR),a.tintFill,0,0,l,h,!0,m),r.resetTextures(),r.pipelines.postBatch(a)};e.exports=o},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r,a){r.addToRenderList(o),n.batchSprite(o,o.frame,r,a)};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1083),o=i(17),r={Parse:i(1084)};r=o(!1,r,n),e.exports=r},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={TEXT_SET1:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",TEXT_SET2:` !"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ`,TEXT_SET3:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",TEXT_SET4:"ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789",TEXT_SET5:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789",TEXT_SET6:`ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789"(),-.' `,TEXT_SET7:`AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW")28FLRX-'39`,TEXT_SET8:"0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET9:`ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'"?!`,TEXT_SET10:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET11:`ABCDEFGHIJKLMNOPQRSTUVWXYZ.,"-+!?()':;0123456789`};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(6),o=function(r,a){var l=a.width,h=a.height,u=Math.floor(l/2),v=Math.floor(h/2),d=n(a,"chars","");if(d!==""){var c=n(a,"image",""),p=r.sys.textures.getFrame(c),g=p.cutX,m=p.cutY,x=p.source.width,y=p.source.height,T=n(a,"offset.x",0),C=n(a,"offset.y",0),S=n(a,"spacing.x",0),E=n(a,"spacing.y",0),M=n(a,"lineSpacing",0),O=n(a,"charsPerRow",null);O===null&&(O=x/l,O>d.length&&(O=d.length));for(var L=T,R=C,w={retroFont:!0,font:c,size:l,lineHeight:h+M,chars:{}},D=0,B=0;B<d.length;B++){var N=d.charCodeAt(B),z=(g+L)/x,X=(m+R)/y,k=(g+L+l)/x,K=(m+R+h)/y;w.chars[N]={x:L,y:R,width:l,height:h,centerX:u,centerY:v,xOffset:0,yOffset:0,xAdvance:l,data:{},kerning:{},u0:z,v0:X,u1:k,v1:K},D++,D===O?(D=0,L=T,R+=h+E):L+=l+S}var b={data:w,frame:null,texture:c};return b}};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),o=i(1);n=i(1086),o=i(1087),e.exports={renderWebGL:n,renderCanvas:o}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(19),o=i(12),r=function(a,l,h,u){h.addToRenderList(l);var v=a.pipelines.set(l.pipeline,l),d=n(l,h,u).calc,c=l.vertices,p=l.uv,g=l.colors,m=l.alphas,x=l.alpha,y=o.getTintAppendFloatAlpha,T=h.roundPixels,C=c.length,S=Math.floor(C*.5);v.flush(),a.pipelines.preBatch(l);var E=v.setGameObject(l),M=v.vertexViewF32,O=v.vertexViewU32,L=v.vertexCount*v.currentShader.vertexComponentCount-1,R=0,w=l.tintFill;l.dirty&&l.updateVertices();for(var D=l.debugCallback,B=[],N=0;N<C;N+=2){var z=c[N+0],X=c[N+1],k=z*d.a+X*d.c+d.e,K=z*d.b+X*d.d+d.f;T&&(k=Math.round(k),K=Math.round(K)),M[++L]=k,M[++L]=K,M[++L]=p[N+0],M[++L]=p[N+1],M[++L]=E,M[++L]=w,O[++L]=y(g[R],h.alpha*(m[R]*x)),R++,D&&(B[N+0]=k,B[N+1]=K)}D&&D.call(l,l,C,B),v.vertexCount+=S,a.pipelines.postBatch(l)};e.exports=r},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(){};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),o=i(1);n=i(1089),o=i(1090),e.exports={renderWebGL:n,renderCanvas:o}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(12),o=function(r,a,l,h){if(!(a.width===0||a.height===0)){l.addToRenderList(a);var u=a.frame,v=u.width,d=u.height,c=n.getTintAppendFloatAlpha,p=r.pipelines.set(a.pipeline,a),g=p.setTexture2D(u.glTexture,a);r.pipelines.preBatch(a),p.batchTexture(a,u.glTexture,v,d,a.x,a.y,v/a.style.resolution,d/a.style.resolution,a.scaleX,a.scaleY,a.rotation,a.flipX,a.flipY,a.scrollFactorX,a.scrollFactorY,a.displayOriginX,a.displayOriginY,0,0,v,d,c(a.tintTopLeft,l.alpha*a._alphaTL),c(a.tintTopRight,l.alpha*a._alphaTR),c(a.tintBottomLeft,l.alpha*a._alphaBL),c(a.tintBottomRight,l.alpha*a._alphaBR),a.tintFill,0,0,l,h,!1,g),r.pipelines.postBatch(a)}};e.exports=o},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r,a){o.width===0||o.height===0||(r.addToRenderList(o),n.batchSprite(o,o.frame,r,a))};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),o=i(1);n=i(1092),o=i(1093),e.exports={renderWebGL:n,renderCanvas:o}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(12),o=function(r,a,l,h){a.updateCanvas();var u=a.width,v=a.height;if(!(u===0||v===0)){l.addToRenderList(a),r.pipelines.preBatch(a);var d=n.getTintAppendFloatAlpha,c=r.pipelines.set(a.pipeline,a),p=c.setTexture2D(a.fillPattern,a);c.batchTexture(a,a.fillPattern,a.displayFrame.width*a.tileScaleX,a.displayFrame.height*a.tileScaleY,a.x,a.y,u,v,a.scaleX,a.scaleY,a.rotation,a.flipX,a.flipY,a.scrollFactorX,a.scrollFactorY,a.originX*u,a.originY*v,0,0,u,v,d(a.tintTopLeft,l.alpha*a._alphaTL),d(a.tintTopRight,l.alpha*a._alphaTR),d(a.tintBottomLeft,l.alpha*a._alphaBL),d(a.tintBottomRight,l.alpha*a._alphaBR),a.tintFill,a.tilePositionX%a.displayFrame.width/a.displayFrame.width,a.tilePositionY%a.displayFrame.height/a.displayFrame.height,l,h,!1,p),r.pipelines.postBatch(a)}};e.exports=o},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r,a){o.updateCanvas(),r.addToRenderList(o),n.batchSprite(o,o.frame,r,a)};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),o=i(1);n=i(1095),o=i(1096),e.exports={renderWebGL:n,renderCanvas:o}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r,a){o.videoTexture&&(r.addToRenderList(o),o.pipeline.batchSprite(o,r,a))};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r,a){o.videoTexture&&(r.addToRenderList(o),n.batchSprite(o,o.frame,r,a))};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),o=i(1);n=i(1098),o=i(1099),e.exports={renderWebGL:n,renderCanvas:o}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(19),o=i(114),r=i(81),a=function(l,h,u,v){u.addToRenderList(h);var d=l.pipelines.set(h.pipeline),c=n(h,u,v),p=d.calcMatrix.copyFrom(c.calc),g=h._displayOriginX,m=h._displayOriginY,x=u.alpha*h.alpha;l.pipelines.preBatch(h),h.isFilled&&o(d,p,h,x,g,m),h.isStroked&&r(d,h,x,g,m),l.pipelines.postBatch(h)};e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(36),o=i(48),r=i(60),a=i(30),l=function(h,u,v,d){v.addToRenderList(u);var c=h.currentContext;if(a(h,c,u,v,d)){var p=u.radius;c.beginPath(),c.arc(p-u.originX*(p*2),p-u.originY*(p*2),p,n(u._startAngle),n(u._endAngle),u.anticlockwise),u.closePath&&c.closePath(),u.isFilled&&(o(c,u),c.fill()),u.isStroked&&(r(c,u),c.stroke()),c.restore()}};e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),o=i(1);n=i(1101),o=i(1102),e.exports={renderWebGL:n,renderCanvas:o}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(114),o=i(19),r=i(81),a=function(l,h,u,v){u.addToRenderList(h);var d=l.pipelines.set(h.pipeline),c=o(h,u,v),p=d.calcMatrix.copyFrom(c.calc),g=h._displayOriginX+h._curveBounds.x,m=h._displayOriginY+h._curveBounds.y,x=u.alpha*h.alpha;l.pipelines.preBatch(h),h.isFilled&&n(d,p,h,x,g,m),h.isStroked&&r(d,h,x,g,m),l.pipelines.postBatch(h)};e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(48),o=i(60),r=i(30),a=function(l,h,u,v){u.addToRenderList(h);var d=l.currentContext;if(r(l,d,h,u,v)){var c=h._displayOriginX+h._curveBounds.x,p=h._displayOriginY+h._curveBounds.y,g=h.pathData,m=g.length-1,x=g[0]-c,y=g[1]-p;d.beginPath(),d.moveTo(x,y),h.closePath||(m-=2);for(var T=2;T<m;T+=2){var C=g[T]-c,S=g[T+1]-p;d.lineTo(C,S)}h.closePath&&d.closePath(),h.isFilled&&(n(d,h),d.fill()),h.isStroked&&(o(d,h),d.stroke()),d.restore()}};e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),o=i(1);n=i(1104),o=i(1105),e.exports={renderWebGL:n,renderCanvas:o}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(114),o=i(19),r=i(81),a=function(l,h,u,v){u.addToRenderList(h);var d=l.pipelines.set(h.pipeline),c=o(h,u,v),p=d.calcMatrix.copyFrom(c.calc),g=h._displayOriginX,m=h._displayOriginY,x=u.alpha*h.alpha;l.pipelines.preBatch(h),h.isFilled&&n(d,p,h,x,g,m),h.isStroked&&r(d,h,x,g,m),l.pipelines.postBatch(h)};e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(48),o=i(60),r=i(30),a=function(l,h,u,v){u.addToRenderList(h);var d=l.currentContext;if(r(l,d,h,u,v)){var c=h._displayOriginX,p=h._displayOriginY,g=h.pathData,m=g.length-1,x=g[0]-c,y=g[1]-p;d.beginPath(),d.moveTo(x,y),h.closePath||(m-=2);for(var T=2;T<m;T+=2){var C=g[T]-c,S=g[T+1]-p;d.lineTo(C,S)}d.closePath(),h.isFilled&&(n(d,h),d.fill()),h.isStroked&&(o(d,h),d.stroke()),d.restore()}};e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),o=i(1);n=i(1107),o=i(1108),e.exports={renderWebGL:n,renderCanvas:o}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(19),o=i(12),r=function(a,l,h,u){h.addToRenderList(l);var v=a.pipelines.set(l.pipeline),d=n(l,h,u),c=v.calcMatrix.copyFrom(d.calc);c.translate(-l._displayOriginX,-l._displayOriginY);var p=h.alpha*l.alpha,g=l.width,m=l.height,x=l.cellWidth,y=l.cellHeight,T=Math.ceil(g/x),C=Math.ceil(m/y),S=x,E=y,M=x-(T*x-g),O=y-(C*y-m),L,R,w=l.showCells,D=l.showAltCells,B=l.showOutline,N=0,z=0,X=0,k=0,K=0;if(B&&(S--,E--,M===x&&M--,O===y&&O--),a.pipelines.preBatch(l),w&&l.fillAlpha>0)for(L=v.fillTint,R=o.getTintAppendFloatAlpha(l.fillColor,l.fillAlpha*p),L.TL=R,L.TR=R,L.BL=R,L.BR=R,z=0;z<C;z++)for(D&&(X=z%2),N=0;N<T;N++){if(D&&X){X=0;continue}X++,k=N<T-1?S:M,K=z<C-1?E:O,v.batchFillRect(N*x,z*y,k,K)}if(D&&l.altFillAlpha>0)for(L=v.fillTint,R=o.getTintAppendFloatAlpha(l.altFillColor,l.altFillAlpha*p),L.TL=R,L.TR=R,L.BL=R,L.BR=R,z=0;z<C;z++)for(D&&(X=z%2),N=0;N<T;N++){if(D&&!X){X=1;continue}X=0,k=N<T-1?S:M,K=z<C-1?E:O,v.batchFillRect(N*x,z*y,k,K)}if(B&&l.outlineFillAlpha>0){var b=v.strokeTint,I=o.getTintAppendFloatAlpha(l.outlineFillColor,l.outlineFillAlpha*p);for(b.TL=I,b.TR=I,b.BL=I,b.BR=I,N=1;N<T;N++){var G=N*x;v.batchLine(G,0,G,m,1,1,1,0,!1)}for(z=1;z<C;z++){var Y=z*y;v.batchLine(0,Y,g,Y,1,1,1,0,!1)}}a.pipelines.postBatch(l)};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(48),o=i(60),r=i(30),a=function(l,h,u,v){u.addToRenderList(h);var d=l.currentContext;if(r(l,d,h,u,v)){var c=-h._displayOriginX,p=-h._displayOriginY,g=u.alpha*h.alpha,m=h.width,x=h.height,y=h.cellWidth,T=h.cellHeight,C=Math.ceil(m/y),S=Math.ceil(x/T),E=y,M=T,O=y-(C*y-m),L=T-(S*T-x),R=h.showCells,w=h.showAltCells,D=h.showOutline,B=0,N=0,z=0,X=0,k=0;if(D&&(E--,M--,O===y&&O--,L===T&&L--),R&&h.fillAlpha>0)for(n(d,h),N=0;N<S;N++)for(w&&(z=N%2),B=0;B<C;B++){if(w&&z){z=0;continue}z++,X=B<C-1?E:O,k=N<S-1?M:L,d.fillRect(c+B*y,p+N*T,X,k)}if(w&&h.altFillAlpha>0)for(n(d,h,h.altFillColor,h.altFillAlpha*g),N=0;N<S;N++)for(w&&(z=N%2),B=0;B<C;B++){if(w&&!z){z=1;continue}z=0,X=B<C-1?E:O,k=N<S-1?M:L,d.fillRect(c+B*y,p+N*T,X,k)}if(D&&h.outlineFillAlpha>0){for(o(d,h,h.outlineFillColor,h.outlineFillAlpha*g),B=1;B<C;B++){var K=B*y;d.beginPath(),d.moveTo(K+c,p),d.lineTo(K+c,x+p),d.stroke()}for(N=1;N<S;N++){var b=N*T;d.beginPath(),d.moveTo(c,b+p),d.lineTo(c+m,b+p),d.stroke()}}d.restore()}};e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),o=i(1);n=i(1110),o=i(1111),e.exports={renderWebGL:n,renderCanvas:o}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(19),o=i(12),r=function(a,l,h,u){h.addToRenderList(l);var v=a.pipelines.set(l.pipeline),d=n(l,h,u),c=v.calcMatrix.copyFrom(d.calc),p=l.width,g=l.height,m=p/2,x=p/l.projection,y=h.alpha*l.alpha;if(!!l.isFilled){var T,C,S,E,M,O,L,R,w;a.pipelines.preBatch(l),l.showTop&&(T=o.getTintAppendFloatAlpha(l.fillTop,y),C=c.getX(-m,-g),S=c.getY(-m,-g),E=c.getX(0,-x-g),M=c.getY(0,-x-g),O=c.getX(m,-g),L=c.getY(m,-g),R=c.getX(0,x-g),w=c.getY(0,x-g),v.batchQuad(l,C,S,E,M,O,L,R,w,0,0,1,1,T,T,T,T,2)),l.showLeft&&(T=o.getTintAppendFloatAlpha(l.fillLeft,y),C=c.getX(-m,0),S=c.getY(-m,0),E=c.getX(0,x),M=c.getY(0,x),O=c.getX(0,x-g),L=c.getY(0,x-g),R=c.getX(-m,-g),w=c.getY(-m,-g),v.batchQuad(l,C,S,E,M,O,L,R,w,0,0,1,1,T,T,T,T,2)),l.showRight&&(T=o.getTintAppendFloatAlpha(l.fillRight,y),C=c.getX(m,0),S=c.getY(m,0),E=c.getX(0,x),M=c.getY(0,x),O=c.getX(0,x-g),L=c.getY(0,x-g),R=c.getX(m,-g),w=c.getY(m,-g),v.batchQuad(l,C,S,E,M,O,L,R,w,0,0,1,1,T,T,T,T,2)),a.pipelines.postBatch(l)}};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(48),o=i(30),r=function(a,l,h,u){h.addToRenderList(l);var v=a.currentContext;if(o(a,v,l,h,u)&&l.isFilled){var d=l.width,c=l.height,p=d/2,g=d/l.projection;l.showTop&&(n(v,l,l.fillTop),v.beginPath(),v.moveTo(-p,-c),v.lineTo(0,-g-c),v.lineTo(p,-c),v.lineTo(p,-1),v.lineTo(0,g-1),v.lineTo(-p,-1),v.lineTo(-p,-c),v.fill()),l.showLeft&&(n(v,l,l.fillLeft),v.beginPath(),v.moveTo(-p,0),v.lineTo(0,g),v.lineTo(0,g-c),v.lineTo(-p,-c),v.lineTo(-p,0),v.fill()),l.showRight&&(n(v,l,l.fillRight),v.beginPath(),v.moveTo(p,0),v.lineTo(0,g),v.lineTo(0,g-c),v.lineTo(p,-c),v.lineTo(p,0),v.fill()),v.restore()}};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),o=i(1);n=i(1113),o=i(1114),e.exports={renderWebGL:n,renderCanvas:o}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(19),o=i(12),r=function(a,l,h,u){h.addToRenderList(l);var v=a.pipelines.set(l.pipeline),d=n(l,h,u),c=v.calcMatrix.copyFrom(d.calc),p=l.width,g=l.height,m=p/2,x=p/l.projection,y=l.isReversed,T=h.alpha*l.alpha;if(!!l.isFilled){a.pipelines.preBatch(l);var C,S,E,M,O,L,R;if(l.showTop&&y){C=o.getTintAppendFloatAlpha(l.fillTop,T),S=c.getX(-m,-g),E=c.getY(-m,-g),M=c.getX(0,-x-g),O=c.getY(0,-x-g),L=c.getX(m,-g),R=c.getY(m,-g);var w=c.getX(0,x-g),D=c.getY(0,x-g);v.batchQuad(l,S,E,M,O,L,R,w,D,0,0,1,1,C,C,C,C,2)}l.showLeft&&(C=o.getTintAppendFloatAlpha(l.fillLeft,T),y?(S=c.getX(-m,-g),E=c.getY(-m,-g),M=c.getX(0,x),O=c.getY(0,x),L=c.getX(0,x-g),R=c.getY(0,x-g)):(S=c.getX(-m,0),E=c.getY(-m,0),M=c.getX(0,x),O=c.getY(0,x),L=c.getX(0,x-g),R=c.getY(0,x-g)),v.batchTri(l,S,E,M,O,L,R,0,0,1,1,C,C,C,2)),l.showRight&&(C=o.getTintAppendFloatAlpha(l.fillRight,T),y?(S=c.getX(m,-g),E=c.getY(m,-g),M=c.getX(0,x),O=c.getY(0,x),L=c.getX(0,x-g),R=c.getY(0,x-g)):(S=c.getX(m,0),E=c.getY(m,0),M=c.getX(0,x),O=c.getY(0,x),L=c.getX(0,x-g),R=c.getY(0,x-g)),v.batchTri(l,S,E,M,O,L,R,0,0,1,1,C,C,C,2)),a.pipelines.postBatch(l)}};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(48),o=i(30),r=function(a,l,h,u){h.addToRenderList(l);var v=a.currentContext;if(o(a,v,l,h,u)&&l.isFilled){var d=l.width,c=l.height,p=d/2,g=d/l.projection,m=l.isReversed;l.showTop&&m&&(n(v,l,l.fillTop),v.beginPath(),v.moveTo(-p,-c),v.lineTo(0,-g-c),v.lineTo(p,-c),v.lineTo(0,g-c),v.fill()),l.showLeft&&(n(v,l,l.fillLeft),v.beginPath(),m?(v.moveTo(-p,-c),v.lineTo(0,g),v.lineTo(0,g-c)):(v.moveTo(-p,0),v.lineTo(0,g),v.lineTo(0,g-c)),v.fill()),l.showRight&&(n(v,l,l.fillRight),v.beginPath(),m?(v.moveTo(p,-c),v.lineTo(0,g),v.lineTo(0,g-c)):(v.moveTo(p,0),v.lineTo(0,g),v.lineTo(0,g-c)),v.fill()),v.restore()}};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),o=i(1);n=i(1116),o=i(1117),e.exports={renderWebGL:n,renderCanvas:o}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(19),o=i(12),r=function(a,l,h,u){h.addToRenderList(l);var v=a.pipelines.set(l.pipeline),d=n(l,h,u);v.calcMatrix.copyFrom(d.calc);var c=l._displayOriginX,p=l._displayOriginY,g=h.alpha*l.alpha;if(a.pipelines.preBatch(l),l.isStroked){var m=v.strokeTint,x=o.getTintAppendFloatAlpha(l.strokeColor,l.strokeAlpha*g);m.TL=x,m.TR=x,m.BL=x,m.BR=x;var y=l._startWidth,T=l._endWidth;v.batchLine(l.geom.x1-c,l.geom.y1-p,l.geom.x2-c,l.geom.y2-p,y,T,1,0,!1,d.sprite,d.camera)}a.pipelines.postBatch(l)};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(60),o=i(30),r=function(a,l,h,u){h.addToRenderList(l);var v=a.currentContext;if(o(a,v,l,h,u)){var d=l._displayOriginX,c=l._displayOriginY;l.isStroked&&(n(v,l),v.beginPath(),v.moveTo(l.geom.x1-d,l.geom.y1-c),v.lineTo(l.geom.x2-d,l.geom.y2-c),v.stroke()),v.restore()}};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),o=i(1);n=i(1119),o=i(1120),e.exports={renderWebGL:n,renderCanvas:o}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(114),o=i(19),r=i(81),a=function(l,h,u,v){u.addToRenderList(h);var d=l.pipelines.set(h.pipeline),c=o(h,u,v),p=d.calcMatrix.copyFrom(c.calc),g=h._displayOriginX,m=h._displayOriginY,x=u.alpha*h.alpha;l.pipelines.preBatch(h),h.isFilled&&n(d,p,h,x,g,m),h.isStroked&&r(d,h,x,g,m),l.pipelines.postBatch(h)};e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(48),o=i(60),r=i(30),a=function(l,h,u,v){u.addToRenderList(h);var d=l.currentContext;if(r(l,d,h,u,v)){var c=h._displayOriginX,p=h._displayOriginY,g=h.pathData,m=g.length-1,x=g[0]-c,y=g[1]-p;d.beginPath(),d.moveTo(x,y),h.closePath||(m-=2);for(var T=2;T<m;T+=2){var C=g[T]-c,S=g[T+1]-p;d.lineTo(C,S)}d.closePath(),h.isFilled&&(n(d,h),d.fill()),h.isStroked&&(o(d,h),d.stroke()),d.restore()}};e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),o=i(1);n=i(1122),o=i(1123),e.exports={renderWebGL:n,renderCanvas:o}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(19),o=i(81),r=i(12),a=function(l,h,u,v){u.addToRenderList(h);var d=l.pipelines.set(h.pipeline),c=n(h,u,v);d.calcMatrix.copyFrom(c.calc);var p=h._displayOriginX,g=h._displayOriginY,m=u.alpha*h.alpha;if(l.pipelines.preBatch(h),h.isFilled){var x=d.fillTint,y=r.getTintAppendFloatAlpha(h.fillColor,h.fillAlpha*m);x.TL=y,x.TR=y,x.BL=y,x.BR=y,d.batchFillRect(-p,-g,h.width,h.height)}h.isStroked&&o(d,h,m,p,g),l.pipelines.postBatch(h)};e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(48),o=i(60),r=i(30),a=function(l,h,u,v){u.addToRenderList(h);var d=l.currentContext;if(r(l,d,h,u,v)){var c=h._displayOriginX,p=h._displayOriginY;h.isFilled&&(n(d,h),d.fillRect(-c,-p,h.width,h.height)),h.isStroked&&(o(d,h),d.beginPath(),d.rect(-c,-p,h.width,h.height),d.stroke()),d.restore()}};e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),o=i(1);n=i(1125),o=i(1126),e.exports={renderWebGL:n,renderCanvas:o}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(114),o=i(19),r=i(81),a=function(l,h,u,v){u.addToRenderList(h);var d=l.pipelines.set(h.pipeline),c=o(h,u,v),p=d.calcMatrix.copyFrom(c.calc),g=h._displayOriginX,m=h._displayOriginY,x=u.alpha*h.alpha;l.pipelines.preBatch(h),h.isFilled&&n(d,p,h,x,g,m),h.isStroked&&r(d,h,x,g,m),l.pipelines.postBatch(h)};e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(48),o=i(60),r=i(30),a=function(l,h,u,v){u.addToRenderList(h);var d=l.currentContext;if(r(l,d,h,u,v)){var c=h._displayOriginX,p=h._displayOriginY,g=h.pathData,m=g.length-1,x=g[0]-c,y=g[1]-p;d.beginPath(),d.moveTo(x,y),h.closePath||(m-=2);for(var T=2;T<m;T+=2){var C=g[T]-c,S=g[T+1]-p;d.lineTo(C,S)}d.closePath(),h.isFilled&&(n(d,h),d.fill()),h.isStroked&&(o(d,h),d.stroke()),d.restore()}};e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),o=i(1);n=i(1128),o=i(1129),e.exports={renderWebGL:n,renderCanvas:o}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(19),o=i(81),r=i(12),a=function(l,h,u,v){u.addToRenderList(h);var d=l.pipelines.set(h.pipeline),c=n(h,u,v);d.calcMatrix.copyFrom(c.calc);var p=h._displayOriginX,g=h._displayOriginY,m=u.alpha*h.alpha;if(l.pipelines.preBatch(h),h.isFilled){var x=d.fillTint,y=r.getTintAppendFloatAlpha(h.fillColor,h.fillAlpha*m);x.TL=y,x.TR=y,x.BL=y,x.BR=y;var T=h.geom.x1-p,C=h.geom.y1-g,S=h.geom.x2-p,E=h.geom.y2-g,M=h.geom.x3-p,O=h.geom.y3-g;d.batchFillTriangle(T,C,S,E,M,O,c.sprite,c.camera)}h.isStroked&&o(d,h,m,p,g),l.pipelines.postBatch(h)};e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(48),o=i(60),r=i(30),a=function(l,h,u,v){u.addToRenderList(h);var d=l.currentContext;if(r(l,d,h,u,v)){var c=h._displayOriginX,p=h._displayOriginY,g=h.geom.x1-c,m=h.geom.y1-p,x=h.geom.x2-c,y=h.geom.y2-p,T=h.geom.x3-c,C=h.geom.y3-p;d.beginPath(),d.moveTo(g,m),d.lineTo(x,y),d.lineTo(T,C),d.closePath(),h.isFilled&&(n(d,h),d.fill()),h.isStroked&&(o(d,h),d.stroke()),d.restore()}};e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(213),o=i(5);o.register("blitter",function(r,a,l,h){return this.displayList.add(new n(this.scene,r,a,l,h))})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(214),o=i(5);o.register("container",function(r,a,l){return this.displayList.add(new n(this.scene,r,a,l))})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(442),o=i(5);o.register("dom",function(r,a,l,h,u){var v=new n(this.scene,r,a,l,h,u);return this.displayList.add(v),v})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(215),o=i(5);o.register("dynamicBitmapText",function(r,a,l,h,u){return this.displayList.add(new n(this.scene,r,a,l,h,u))})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(444),o=i(5);o.register("extern",function(){var r=new n(this.scene);return this.displayList.add(r),r})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(216),o=i(5);o.register("graphics",function(r){return this.displayList.add(new n(this.scene,r))})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(113),o=i(5);o.register("group",function(r,a){return this.updateList.add(new n(this.scene,r,a))})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(125),o=i(5);o.register("image",function(r,a,l,h){return this.displayList.add(new n(this.scene,r,a,l,h))})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(219),o=i(5);o.register("layer",function(r){return this.displayList.add(new n(this.scene,r))})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(5),o=i(220);n.register("particles",function(r,a,l){return this.displayList.add(new o(this.scene,r,a,l))})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(5),o=i(457);n.register("follower",function(r,a,l,h,u){var v=new o(this.scene,r,a,l,h,u);return this.displayList.add(v),this.updateList.add(v),v})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(5),o=i(221);n.register("renderTexture",function(r,a,l,h,u,v){return this.displayList.add(new o(this.scene,r,a,l,h,u,v))})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(223),o=i(5);o.register("rope",function(r,a,l,h,u,v,d,c){return this.displayList.add(new n(this.scene,r,a,l,h,u,v,d,c))})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(5),o=i(73);n.register("sprite",function(r,a,l,h){var u=new o(this.scene,r,a,l,h);return this.displayList.add(u),u})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(148),o=i(5);o.register("bitmapText",function(r,a,l,h,u,v){return this.displayList.add(new n(this.scene,r,a,l,h,u,v))})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(224),o=i(5);o.register("text",function(r,a,l,h){return this.displayList.add(new n(this.scene,r,a,l,h))})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(225),o=i(5);o.register("tileSprite",function(r,a,l,h,u,v){return this.displayList.add(new n(this.scene,r,a,l,h,u,v))})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(129),o=i(5);o.register("zone",function(r,a,l,h){return this.displayList.add(new n(this.scene,r,a,l,h))})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(226),o=i(5);o.register("video",function(r,a,l){return this.displayList.add(new n(this.scene,r,a,l))})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(461),o=i(5);o.register("arc",function(r,a,l,h,u,v,d,c){return this.displayList.add(new n(this.scene,r,a,l,h,u,v,d,c))}),o.register("circle",function(r,a,l,h,u){return this.displayList.add(new n(this.scene,r,a,l,0,360,!1,h,u))})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(5),o=i(462);n.register("curve",function(r,a,l,h,u){return this.displayList.add(new o(this.scene,r,a,l,h,u))})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(463),o=i(5);o.register("ellipse",function(r,a,l,h,u,v){return this.displayList.add(new n(this.scene,r,a,l,h,u,v))})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(5),o=i(464);n.register("grid",function(r,a,l,h,u,v,d,c,p,g){return this.displayList.add(new o(this.scene,r,a,l,h,u,v,d,c,p,g))})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(5),o=i(465);n.register("isobox",function(r,a,l,h,u,v,d){return this.displayList.add(new o(this.scene,r,a,l,h,u,v,d))})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(5),o=i(466);n.register("isotriangle",function(r,a,l,h,u,v,d,c){return this.displayList.add(new o(this.scene,r,a,l,h,u,v,d,c))})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(5),o=i(467);n.register("line",function(r,a,l,h,u,v,d,c){return this.displayList.add(new o(this.scene,r,a,l,h,u,v,d,c))})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(5),o=i(468);n.register("polygon",function(r,a,l,h,u){return this.displayList.add(new o(this.scene,r,a,l,h,u))})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(5),o=i(473);n.register("rectangle",function(r,a,l,h,u,v){return this.displayList.add(new o(this.scene,r,a,l,h,u,v))})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(474),o=i(5);o.register("star",function(r,a,l,h,u,v,d){return this.displayList.add(new n(this.scene,r,a,l,h,u,v,d))})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(5),o=i(475);n.register("triangle",function(r,a,l,h,u,v,d,c,p,g){return this.displayList.add(new o(this.scene,r,a,l,h,u,v,d,c,p,g))})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(213),o=i(28),r=i(16),a=i(13);r.register("blitter",function(l,h){l===void 0&&(l={});var u=a(l,"key",null),v=a(l,"frame",null),d=new n(this.scene,0,0,u,v);return h!==void 0&&(l.add=h),o(this.scene,d,l),d})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(28),o=i(214),r=i(16),a=i(13);r.register("container",function(l,h){l===void 0&&(l={});var u=a(l,"x",0),v=a(l,"y",0),d=a(l,"children",null),c=new o(this.scene,u,v,d);return h!==void 0&&(l.add=h),n(this.scene,c,l),c})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(215),o=i(28),r=i(16),a=i(13);r.register("dynamicBitmapText",function(l,h){l===void 0&&(l={});var u=a(l,"font",""),v=a(l,"text",""),d=a(l,"size",!1),c=new n(this.scene,0,0,u,v,d);return h!==void 0&&(l.add=h),o(this.scene,c,l),c})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(16),o=i(216);n.register("graphics",function(r,a){r===void 0&&(r={}),a!==void 0&&(r.add=a);var l=new o(this.scene,r);return r.add&&this.scene.sys.displayList.add(l),l})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(16),o=i(113);n.register("group",function(r){return new o(this.scene,null,r)})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(28),o=i(16),r=i(13),a=i(125);o.register("image",function(l,h){l===void 0&&(l={});var u=r(l,"key",null),v=r(l,"frame",null),d=new a(this.scene,0,0,u,v);return h!==void 0&&(l.add=h),n(this.scene,d,l),d})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(28),o=i(219),r=i(16),a=i(13);r.register("layer",function(l,h){l===void 0&&(l={});var u=a(l,"children",null),v=new o(this.scene,u);return h!==void 0&&(l.add=h),n(this.scene,v,l),v})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(16),o=i(13),r=i(2),a=i(220);n.register("particles",function(l,h){l===void 0&&(l={});var u=o(l,"key",null),v=o(l,"frame",null),d=r(l,"emitters",null),c=new a(this.scene,u,v,d);h!==void 0&&(l.add=h);var p=r(l,"add",!1);return p?this.displayList.add(c):this.updateList.add(c),c})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(28),o=i(16),r=i(13),a=i(221);o.register("renderTexture",function(l,h){l===void 0&&(l={});var u=r(l,"x",0),v=r(l,"y",0),d=r(l,"width",32),c=r(l,"height",32),p=r(l,"key",void 0),g=r(l,"frame",void 0),m=new a(this.scene,u,v,d,c,p,g);return h!==void 0&&(l.add=h),n(this.scene,m,l),m})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(28),o=i(16),r=i(13),a=i(6),l=i(223);o.register("rope",function(h,u){h===void 0&&(h={});var v=r(h,"key",null),d=r(h,"frame",null),c=r(h,"horizontal",!0),p=a(h,"points",void 0),g=a(h,"colors",void 0),m=a(h,"alphas",void 0),x=new l(this.scene,0,0,v,d,p,c,g,m);return u!==void 0&&(h.add=u),n(this.scene,x,h),h.add||this.updateList.add(x),x})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(28),o=i(439),r=i(16),a=i(13),l=i(73);r.register("sprite",function(h,u){h===void 0&&(h={});var v=a(h,"key",null),d=a(h,"frame",null),c=new l(this.scene,0,0,v,d);return u!==void 0&&(h.add=u),n(this.scene,c,h),o(c,h),c})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(148),o=i(28),r=i(16),a=i(13),l=i(6);r.register("bitmapText",function(h,u){h===void 0&&(h={});var v=l(h,"font",""),d=a(h,"text",""),c=a(h,"size",!1),p=l(h,"align",0),g=new n(this.scene,0,0,v,d,c,p);return u!==void 0&&(h.add=u),o(this.scene,g,h),g})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(28),o=i(16),r=i(13),a=i(224);o.register("text",function(l,h){l===void 0&&(l={});var u=r(l,"text",""),v=r(l,"style",null),d=r(l,"padding",null);d!==null&&(v.padding=d);var c=new a(this.scene,0,0,u,v);return h!==void 0&&(l.add=h),n(this.scene,c,l),c.autoRound=r(l,"autoRound",!0),c.resolution=r(l,"resolution",1),c})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(28),o=i(16),r=i(13),a=i(225);o.register("tileSprite",function(l,h){l===void 0&&(l={});var u=r(l,"x",0),v=r(l,"y",0),d=r(l,"width",512),c=r(l,"height",512),p=r(l,"key",""),g=r(l,"frame",""),m=new a(this.scene,u,v,d,c,p,g);return h!==void 0&&(l.add=h),n(this.scene,m,l),m})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(16),o=i(13),r=i(129);n.register("zone",function(a){var l=o(a,"x",0),h=o(a,"y",0),u=o(a,"width",1),v=o(a,"height",u);return new r(this.scene,l,h,u,v)})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(28),o=i(16),r=i(13),a=i(226);o.register("video",function(l,h){l===void 0&&(l={});var u=r(l,"key",null),v=new a(this.scene,0,0,u);return h!==void 0&&(l.add=h),n(this.scene,v,l),l.add||this.updateList.add(v),v})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),o=i(1);n=i(1177),o=i(1178),e.exports={renderWebGL:n,renderCanvas:o}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(19),o=function(r,a,l,h){if(!!a.shader){if(l.addToRenderList(a),r.pipelines.clear(),a.renderToTexture)a.load(),a.flush();else{var u=n(a,l,h).calc;(r.width!==a._rendererWidth||r.height!==a._rendererHeight)&&a.projOrtho(0,r.width,r.height,0),a.load(u.matrix),a.flush()}r.pipelines.rebind()}};e.exports=o},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(){};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),o=i(1);n=i(1180),o=i(1181),e.exports={renderWebGL:n,renderCanvas:o}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(19),o=function(r,a,l,h){var u=a.faces,v=u.length;if(v!==0){l.addToRenderList(a);var d=r.pipelines.set(a.pipeline,a),c=n(a,l,h).calc,p=d.setGameObject(a),g=d.vertexViewF32,m=d.vertexViewU32,x=d.vertexCount*d.currentShader.vertexComponentCount-1,y=a.tintFill,T=[],C=a.debugCallback,S=c.a,E=c.b,M=c.c,O=c.d,L=c.e,R=c.f,w=a.viewPosition.z,D=a.hideCCW,B=l.roundPixels,N=l.alpha*a.alpha,z=0;r.pipelines.preBatch(a);for(var X=0;X<v;X++){var k=u[X];!k.isInView(l,D,w,N,S,E,M,O,L,R,B)||(d.shouldFlush(3)&&(d.flush(),x=0),x=k.load(g,m,x,p,y),z++,d.vertexCount+=3,C&&T.push(k))}a.totalFrame+=z,C&&C.call(a,a,T),r.pipelines.postBatch(a)}};e.exports=o},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(){};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),o=i(1);n=i(1183),e.exports={renderWebGL:n,renderCanvas:o}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(19),o=function(r,a,l,h){l.addToRenderList(a);var u=r.pipelines.set(a.pipeline),v=n(a,l,h).calc,d=a.width,c=a.height,p=-a._radius,g=-a._radius,m=p+d,x=g+c,y=v.getX(0,0),T=v.getY(0,0),C=v.getX(p,g),S=v.getY(p,g),E=v.getX(p,x),M=v.getY(p,x),O=v.getX(m,x),L=v.getY(m,x),R=v.getX(m,g),w=v.getY(m,g);r.pipelines.preBatch(a),u.batchPointLight(a,l,C,S,E,M,O,L,R,w,y,T),r.pipelines.postBatch(a)};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(229),o=i(5);o.register("shader",function(r,a,l,h,u,v,d){return this.displayList.add(new n(this.scene,r,a,l,h,u,v,d))})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(230),o=i(5);o.register("mesh",function(r,a,l,h,u,v,d,c,p,g,m){return this.displayList.add(new n(this.scene,r,a,l,h,u,v,d,c,p,g,m))})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(5),o=i(150);n.register("pointlight",function(r,a,l,h,u,v){return this.displayList.add(new o(this.scene,r,a,l,h,u,v))})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(28),o=i(16),r=i(13),a=i(229);o.register("shader",function(l,h){l===void 0&&(l={});var u=r(l,"key",null),v=r(l,"x",0),d=r(l,"y",0),c=r(l,"width",128),p=r(l,"height",128),g=new a(this.scene,u,v,d,c,p);return h!==void 0&&(l.add=h),n(this.scene,g,l),g})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(28),o=i(16),r=i(13),a=i(6),l=i(230);o.register("mesh",function(h,u){h===void 0&&(h={});var v=r(h,"key",null),d=r(h,"frame",null),c=a(h,"vertices",[]),p=a(h,"uvs",[]),g=a(h,"indicies",[]),m=a(h,"containsZ",!1),x=a(h,"normals",[]),y=a(h,"colors",16777215),T=a(h,"alphas",1),C=new l(this.scene,0,0,v,d,c,p,g,m,x,y,T);return u!==void 0&&(h.add=u),n(this.scene,C,h),C})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(28),o=i(16),r=i(13),a=i(150);o.register("pointlight",function(l,h){l===void 0&&(l={});var u=r(l,"color",16777215),v=r(l,"radius",128),d=r(l,"intensity",1),c=r(l,"attenuation",.1),p=new a(this.scene,0,0,u,v,d,c);return h!==void 0&&(l.add=h),n(this.scene,p,l),p})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(482),r=i(24),a=i(20),l=new n({Extends:o,initialize:function(u){this.scene=u,this.systems=u.sys,u.sys.settings.isBooted||u.sys.events.once(a.BOOT,this.boot,this),o.call(this)},boot:function(){var h=this.systems.events;h.on(a.SHUTDOWN,this.shutdown,this),h.on(a.DESTROY,this.destroy,this)},destroy:function(){this.shutdown(),this.scene=void 0,this.systems=void 0}});r.register("LightsPlugin",l,"lights"),e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(65);n.Area=i(1192),n.Circumference=i(302),n.CircumferencePoint=i(169),n.Clone=i(1193),n.Contains=i(66),n.ContainsPoint=i(1194),n.ContainsRect=i(1195),n.CopyFrom=i(1196),n.Equals=i(1197),n.GetBounds=i(1198),n.GetPoint=i(300),n.GetPoints=i(301),n.Offset=i(1199),n.OffsetPoint=i(1200),n.Random=i(170),e.exports=n},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n.radius>0?Math.PI*n.radius*n.radius:0};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(65),o=function(r){return new n(r.x,r.y,r.radius)};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(66),o=function(r,a){return n(r,a.x,a.y)};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(66),o=function(r,a){return n(r,a.x,a.y)&&n(r,a.right,a.y)&&n(r,a.x,a.bottom)&&n(r,a.right,a.bottom)};e.exports=o},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return o.setTo(n.x,n.y,n.radius)};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return n.x===o.x&&n.y===o.y&&n.radius===o.radius};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(10),o=function(r,a){return a===void 0&&(a=new n),a.x=r.left,a.y=r.top,a.width=r.diameter,a.height=r.diameter,a};e.exports=o},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r){return n.x+=o,n.y+=r,n};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return n.x+=o.x,n.y+=o.y,n};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(111);n.Area=i(1202),n.Circumference=i(447),n.CircumferencePoint=i(218),n.Clone=i(1203),n.Contains=i(112),n.ContainsPoint=i(1204),n.ContainsRect=i(1205),n.CopyFrom=i(1206),n.Equals=i(1207),n.GetBounds=i(1208),n.GetPoint=i(445),n.GetPoints=i(446),n.Offset=i(1209),n.OffsetPoint=i(1210),n.Random=i(180),e.exports=n},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n.isEmpty()?0:n.getMajorRadius()*n.getMinorRadius()*Math.PI};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(111),o=function(r){return new n(r.x,r.y,r.width,r.height)};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(112),o=function(r,a){return n(r,a.x,a.y)};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(112),o=function(r,a){return n(r,a.x,a.y)&&n(r,a.right,a.y)&&n(r,a.x,a.bottom)&&n(r,a.right,a.bottom)};e.exports=o},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return o.setTo(n.x,n.y,n.width,n.height)};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return n.x===o.x&&n.y===o.y&&n.width===o.width&&n.height===o.height};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(10),o=function(r,a){return a===void 0&&(a=new n),a.x=r.left,a.y=r.top,a.width=r.width,a.height=r.height,a};e.exports=o},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r){return n.x+=o,n.y+=r,n};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return n.x+=o.x,n.y+=o.y,n};e.exports=i},function(e,f,i){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4),o=i(231),r=function(a,l,h){if(h===void 0&&(h=[]),o(a,l)){var u=a.x,v=a.y,d=a.radius,c=l.x,p=l.y,g=l.radius,m,x,y,T,C;if(v===p)C=(g*g-d*d-c*c+u*u)/(2*(u-c)),m=1,x=-2*p,y=c*c+C*C-2*c*C+p*p-g*g,T=x*x-4*m*y,T===0?h.push(new n(C,-x/(2*m))):T>0&&(h.push(new n(C,(-x+Math.sqrt(T))/(2*m))),h.push(new n(C,(-x-Math.sqrt(T))/(2*m))));else{var S=(u-c)/(v-p),E=(g*g-d*d-c*c+u*u-p*p+v*v)/(2*(v-p));m=S*S+1,x=2*v*S-2*E*S-2*u,y=u*u+v*v+E*E-d*d-2*v*E,T=x*x-4*m*y,T===0?(C=-x/(2*m),h.push(new n(C,E-C*S))):T>0&&(C=(-x+Math.sqrt(T))/(2*m),h.push(new n(C,E-C*S)),C=(-x-Math.sqrt(T))/(2*m),h.push(new n(C,E-C*S)))}}return h};e.exports=r},function(e,f,i){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(232),o=i(151),r=function(a,l,h){if(h===void 0&&(h=[]),o(a,l)){var u=l.getLineA(),v=l.getLineB(),d=l.getLineC(),c=l.getLineD();n(u,a,h),n(v,a,h),n(d,a,h),n(c,a,h)}return h};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(140),o=i(487),r=i(47),a=new r;function l(v,d,c,p,g){var m=Math.cos(v),x=Math.sin(v);a.setTo(d,c,d+m,c+x);var y=o(a,p);y&&g.push(new n(y.x,y.y,v,y.w))}function h(v,d){return v.z-d.z}var u=function(v,d,c){Array.isArray(c)||(c=[c]);for(var p=[],g=[],m=0;m<c.length;m++)for(var x=c[m].points,y=0;y<x.length;y++){var T=Math.atan2(x[y].y-d,x[y].x-v);g.indexOf(T)===-1&&(l(T,v,d,c,p),l(T-1e-5,v,d,c,p),l(T+1e-5,v,d,c,p),g.push(T))}return p.sort(h)};e.exports=u},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(10),o=i(152),r=function(a,l,h){return h===void 0&&(h=new n),o(a,l)&&(h.x=Math.max(a.x,l.x),h.y=Math.max(a.y,l.y),h.width=Math.min(a.right,l.right)-h.x,h.height=Math.min(a.bottom,l.bottom)-h.y),h};e.exports=r},function(e,f,i){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(234),o=i(152),r=function(a,l,h){if(h===void 0&&(h=[]),o(a,l)){var u=a.getLineA(),v=a.getLineB(),d=a.getLineC(),c=a.getLineD();n(u,l,h),n(v,l,h),n(d,l,h),n(c,l,h)}return h};e.exports=r},function(e,f,i){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(489),o=i(234),r=function(a,l,h){if(h===void 0&&(h=[]),n(a,l)){var u=l.getLineA(),v=l.getLineB(),d=l.getLineC();o(u,a,h),o(v,a,h),o(d,a,h)}return h};e.exports=r},function(e,f,i){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(232),o=i(491),r=function(a,l,h){if(h===void 0&&(h=[]),o(a,l)){var u=a.getLineA(),v=a.getLineB(),d=a.getLineC();n(u,l,h),n(v,l,h),n(d,l,h)}return h};e.exports=r},function(e,f,i){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(494),o=i(492),r=function(a,l,h){if(h===void 0&&(h=[]),n(a,l)){var u=l.getLineA(),v=l.getLineB(),d=l.getLineC();o(a,u,h),o(a,v,h),o(a,d,h)}return h};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(496),o=function(r,a){if(!n(r,a))return!1;var l=Math.min(a.x1,a.x2),h=Math.max(a.x1,a.x2),u=Math.min(a.y1,a.y2),v=Math.max(a.y1,a.y2);return r.x>=l&&r.x<=h&&r.y>=u&&r.y<=v};e.exports=o},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r,a,l,h){return h===void 0&&(h=0),!(o>n.right+h||r<n.left-h||a>n.bottom+h||l<n.top-h)};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(47);n.Angle=i(97),n.BresenhamPoints=i(317),n.CenterOn=i(1222),n.Clone=i(1223),n.CopyFrom=i(1224),n.Equals=i(1225),n.Extend=i(1226),n.GetEasedPoints=i(1227),n.GetMidPoint=i(1228),n.GetNearestPoint=i(1229),n.GetNormal=i(1230),n.GetPoint=i(307),n.GetPoints=i(172),n.GetShortestDistance=i(1231),n.Height=i(1232),n.Length=i(67),n.NormalAngle=i(497),n.NormalX=i(1233),n.NormalY=i(1234),n.Offset=i(1235),n.PerpSlope=i(1236),n.Random=i(173),n.ReflectAngle=i(1237),n.Rotate=i(1238),n.RotateAroundPoint=i(1239),n.RotateAroundXY=i(236),n.SetToAngle=i(1240),n.Slope=i(1241),n.Width=i(1242),e.exports=n},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r){var a=o-(n.x1+n.x2)/2,l=r-(n.y1+n.y2)/2;return n.x1+=a,n.y1+=l,n.x2+=a,n.y2+=l,n};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(47),o=function(r){return new n(r.x1,r.y1,r.x2,r.y2)};e.exports=o},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return o.setTo(n.x1,n.y1,n.x2,n.y2)};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return n.x1===o.x1&&n.y1===o.y1&&n.x2===o.x2&&n.y2===o.y2};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(67),o=function(r,a,l){l===void 0&&(l=a);var h=n(r),u=r.x2-r.x1,v=r.y2-r.y1;return a&&(r.x1=r.x1-u/h*a,r.y1=r.y1-v/h*a),l&&(r.x2=r.x2+u/h*l,r.y2=r.y2+v/h*l),r};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(352),o=i(80),r=i(4),a=function(l,h,u,v,d){v===void 0&&(v=0),d===void 0&&(d=[]);var c=[],p=l.x1,g=l.y1,m=l.x2-p,x=l.y2-g,y=o(h,d),T,C,S=u-1;for(T=0;T<S;T++)C=y(T/S),c.push(new r(p+m*C,g+x*C));if(C=y(1),c.push(new r(p+m*C,g+x*C)),v>0){var E=c[0],M=[E];for(T=1;T<c.length-1;T++){var O=c[T];n(E,O)>=v&&(M.push(O),E=O)}var L=c[c.length-1];return n(E,L)<v&&M.pop(),M.push(L),M}else return c};e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4),o=function(r,a){return a===void 0&&(a=new n),a.x=(r.x1+r.x2)/2,a.y=(r.y1+r.y2)/2,a};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Florian Mertens
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4),o=function(r,a,l){l===void 0&&(l=new n);var h=r.x1,u=r.y1,v=r.x2,d=r.y2,c=(v-h)*(v-h)+(d-u)*(d-u);if(c===0)return l;var p=((a.x-h)*(v-h)+(a.y-u)*(d-u))/c;return l.x=h+p*(v-h),l.y=u+p*(d-u),l};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(14),o=i(97),r=i(4),a=function(l,h){h===void 0&&(h=new r);var u=o(l)-n.TAU;return h.x=Math.cos(u),h.y=Math.sin(u),h};e.exports=a},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Florian Mertens
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){var r=n.x1,a=n.y1,l=n.x2,h=n.y2,u=(l-r)*(l-r)+(h-a)*(h-a);if(u===0)return!1;var v=((a-o.y)*(l-r)-(r-o.x)*(h-a))/u;return Math.abs(v)*Math.sqrt(u)};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return Math.abs(n.y1-n.y2)};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(14),o=i(97),r=function(a){return Math.cos(o(a)-n.TAU)};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(14),o=i(97),r=function(a){return Math.sin(o(a)-n.TAU)};e.exports=r},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r){return n.x1+=o,n.y1+=r,n.x2+=o,n.y2+=r,n};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return-((n.x2-n.x1)/(n.y2-n.y1))};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(97),o=i(497),r=function(a,l){return 2*o(l)-Math.PI-n(a)};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(236),o=function(r,a){var l=(r.x1+r.x2)/2,h=(r.y1+r.y2)/2;return n(r,l,h,a)};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(236),o=function(r,a,l){return n(r,a.x,a.y,l)};e.exports=o},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r,a,l){return n.x1=o,n.y1=r,n.x2=o+Math.cos(a)*l,n.y2=r+Math.sin(a)*l,n};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return(n.y2-n.y1)/(n.x2-n.x1)};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return Math.abs(n.x1-n.x2)};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n={Face:i(116),GenerateGridVerts:i(1244),GenerateObjVerts:i(480),GenerateVerts:i(479),ParseObj:i(498),ParseObjMaterial:i(499),RotateFace:i(1245),Vertex:i(117)};e.exports=n},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(116),o=i(2),r=i(69),a=i(39),l=i(117),h=new a,u=new a,v=new r,d=function(c){var p=o(c,"mesh"),g=o(c,"texture",null),m=o(c,"frame"),x=o(c,"width",1),y=o(c,"height",x),T=o(c,"widthSegments",1),C=o(c,"heightSegments",T),S=o(c,"x",0),E=o(c,"y",0),M=o(c,"z",0),O=o(c,"rotateX",0),L=o(c,"rotateY",0),R=o(c,"rotateZ",0),w=o(c,"zIsUp",!0),D=o(c,"isOrtho",p?p.dirtyCache[11]:!1),B=o(c,"colors",[16777215]),N=o(c,"alphas",[1]),z=o(c,"tile",!1),X=o(c,"flipY",!1),k=o(c,"width",null),K={faces:[],verts:[]};if(h.set(S,E,M),u.set(O,L,R),v.fromRotationXYTranslation(u,h,w),!g&&p)g=p.texture;else if(p&&typeof g=="string")g=p.scene.sys.textures.get(g);else return K;var b=g.get(m);!k&&D&&g&&p&&(x=b.width/p.height,y=b.height/p.height);var I=x/2,G=y/2,Y=Math.floor(T),U=Math.floor(C),W=Y+1,H=U+1,Z=x/Y,q=y/U,_=[],nt=[],rt,at,ct=0,ut=1,pt=0,Dt=1;b&&(ct=b.u0,ut=b.u1,X?(pt=b.v1,Dt=b.v0):(pt=b.v0,Dt=b.v1));var St=ut-ct,Et=Dt-pt;for(at=0;at<H;at++){var dt=at*q-G;for(rt=0;rt<W;rt++){var Bt=rt*Z-I;nt.push(Bt,-dt);var mt=ct+St*(rt/Y),Ot=pt+Et*(at/U);_.push(mt,Ot)}}Array.isArray(B)||(B=[B]),Array.isArray(N)||(N=[N]);var Oe=0,$e=0;for(at=0;at<U;at++)for(rt=0;rt<Y;rt++){var Qt=(rt+W*at)*2,Ht=(rt+W*(at+1))*2,oe=(rt+1+W*(at+1))*2,ne=(rt+1+W*at)*2,he=B[$e],De=N[Oe],Ci=new l(nt[Qt],nt[Qt+1],0,_[Qt],_[Qt+1],he,De).transformMat4(v),Si=new l(nt[Ht],nt[Ht+1],0,_[Ht],_[Ht+1],he,De).transformMat4(v),Ei=new l(nt[ne],nt[ne+1],0,_[ne],_[ne+1],he,De).transformMat4(v),Pi=new l(nt[Ht],nt[Ht+1],0,_[Ht],_[Ht+1],he,De).transformMat4(v),Mi=new l(nt[oe],nt[oe+1],0,_[oe],_[oe+1],he,De).transformMat4(v),Ai=new l(nt[ne],nt[ne+1],0,_[ne],_[ne+1],he,De).transformMat4(v);z&&(Ci.setUVs(ct,Dt),Si.setUVs(ct,pt),Ei.setUVs(ut,Dt),Pi.setUVs(ct,pt),Mi.setUVs(ut,pt),Ai.setUVs(ut,Dt)),$e++,$e===B.length&&($e=0),Oe++,Oe===N.length&&(Oe=0),K.verts.push(Ci,Si,Ei,Pi,Mi,Ai),K.faces.push(new n(Ci,Si,Ei),new n(Pi,Mi,Ai))}return p&&(p.faces=p.faces.concat(K.faces),p.vertices=p.vertices.concat(K.verts)),K};e.exports=d},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r,a){var l,h;if(r===void 0&&a===void 0){var u=n.getInCenter();l=u.x,h=u.y}var v=Math.cos(o),d=Math.sin(o),c=n.vertex1,p=n.vertex2,g=n.vertex3,m=c.x-l,x=c.y-h;c.set(m*v-x*d+l,m*d+x*v+h),m=p.x-l,x=p.y-h,p.set(m*v-x*d+l,m*d+x*v+h),m=g.x-l,x=g.y-h,g.set(m*v-x*d+l,m*d+x*v+h)};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4);n.Ceil=i(1247),n.Clone=i(1248),n.CopyFrom=i(1249),n.Equals=i(1250),n.Floor=i(1251),n.GetCentroid=i(1252),n.GetMagnitude=i(500),n.GetMagnitudeSq=i(501),n.GetRectangleFromPoints=i(1253),n.Interpolate=i(1254),n.Invert=i(1255),n.Negative=i(1256),n.Project=i(1257),n.ProjectUnit=i(1258),n.SetMagnitude=i(1259),e.exports=n},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n.setTo(Math.ceil(n.x),Math.ceil(n.y))};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4),o=function(r){return new n(r.x,r.y)};e.exports=o},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return o.setTo(n.x,n.y)};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return n.x===o.x&&n.y===o.y};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n.setTo(Math.floor(n.x),Math.floor(n.y))};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4),o=function(r,a){if(a===void 0&&(a=new n),!Array.isArray(r))throw new Error("GetCentroid points argument must be an array");var l=r.length;if(l<1)throw new Error("GetCentroid points array must not be empty");if(l===1)a.x=r[0].x,a.y=r[0].y;else{for(var h=0;h<l;h++)a.x+=r[h].x,a.y+=r[h].y;a.x/=l,a.y/=l}return a};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(10),o=function(r,a){a===void 0&&(a=new n);for(var l=Number.NEGATIVE_INFINITY,h=Number.POSITIVE_INFINITY,u=Number.NEGATIVE_INFINITY,v=Number.POSITIVE_INFINITY,d=0;d<r.length;d++){var c=r[d];c.x>l&&(l=c.x),c.x<h&&(h=c.x),c.y>u&&(u=c.y),c.y<v&&(v=c.y)}return a.x=h,a.y=v,a.width=l-h,a.height=u-v,a};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4),o=function(r,a,l,h){return l===void 0&&(l=0),h===void 0&&(h=new n),h.x=r.x+(a.x-r.x)*l,h.y=r.y+(a.y-r.y)*l,h};e.exports=o},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n.setTo(n.y,n.x)};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4),o=function(r,a){return a===void 0&&(a=new n),a.setTo(-r.x,-r.y)};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4),o=i(501),r=function(a,l,h){h===void 0&&(h=new n);var u=a.x*l.x+a.y*l.y,v=u/o(l);return v!==0&&(h.x=v*l.x,h.y=v*l.y),h};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4),o=function(r,a,l){l===void 0&&(l=new n);var h=r.x*a.x+r.y*a.y;return h!==0&&(l.x=h*a.x,l.y=h*a.y),l};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(500),o=function(r,a){if(r.x!==0||r.y!==0){var l=n(r);r.x/=l,r.y/=l}return r.x*=a,r.y*=a,r};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(227);n.Clone=i(1261),n.Contains=i(228),n.ContainsPoint=i(1262),n.Earcut=i(59),n.GetAABB=i(469),n.GetNumberArray=i(1263),n.GetPoints=i(470),n.Perimeter=i(471),n.Reverse=i(1264),n.Simplify=i(1265),n.Smooth=i(472),n.Translate=i(1266),e.exports=n},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(227),o=function(r){return new n(r.points)};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(228),o=function(r,a){return n(r,a.x,a.y)};e.exports=o},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){o===void 0&&(o=[]);for(var r=0;r<n.points.length;r++)o.push(n.points[r].x),o.push(n.points[r].y);return o};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n.points.reverse(),n};e.exports=i},function(e,f){function i(h,u){var v=h.x-u.x,d=h.y-u.y;return v*v+d*d}function n(h,u,v){var d=u.x,c=u.y,p=v.x-d,g=v.y-c;if(p!==0||g!==0){var m=((h.x-d)*p+(h.y-c)*g)/(p*p+g*g);m>1?(d=v.x,c=v.y):m>0&&(d+=p*m,c+=g*m)}return p=h.x-d,g=h.y-c,p*p+g*g}function o(h,u){for(var v=h[0],d=[v],c,p=1,g=h.length;p<g;p++)c=h[p],i(c,v)>u&&(d.push(c),v=c);return v!==c&&d.push(c),d}function r(h,u,v,d,c){for(var p=d,g,m=u+1;m<v;m++){var x=n(h[m],h[u],h[v]);x>p&&(g=m,p=x)}p>d&&(g-u>1&&r(h,u,g,d,c),c.push(h[g]),v-g>1&&r(h,g,v,d,c))}function a(h,u){var v=h.length-1,d=[h[0]];return r(h,0,v,u,d),d.push(h[v]),d}var l=function(h,u,v){u===void 0&&(u=1),v===void 0&&(v=!1);var d=h.points;if(d.length>2){var c=u*u;v||(d=o(d,c)),h.setTo(a(d,c))}return h};e.exports=l},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r){for(var a=n.points,l=0;l<a.length;l++)a[l].x+=o,a[l].y+=r;return n};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n.width*n.height};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n.x=Math.ceil(n.x),n.y=Math.ceil(n.y),n};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n.x=Math.ceil(n.x),n.y=Math.ceil(n.y),n.width=Math.ceil(n.width),n.height=Math.ceil(n.height),n};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(10),o=function(r){return new n(r.x,r.y,r.width,r.height)};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(57),o=function(r,a){return n(r,a.x,a.y)};e.exports=o},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return o.setTo(n.x,n.y,n.width,n.height)};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return n.x===o.x&&n.y===o.y&&n.width===o.width&&n.height===o.height};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(237),o=function(r,a){var l=n(r);return l<n(a)?r.setSize(a.height*l,a.height):r.setSize(a.width,a.width/l),r.setPosition(a.centerX-r.width/2,a.centerY-r.height/2)};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(237),o=function(r,a){var l=n(r);return l>n(a)?r.setSize(a.height*l,a.height):r.setSize(a.width,a.width/l),r.setPosition(a.centerX-r.width/2,a.centerY-r.height/2)};e.exports=o},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n.x=Math.floor(n.x),n.y=Math.floor(n.y),n};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n.x=Math.floor(n.x),n.y=Math.floor(n.y),n.width=Math.floor(n.width),n.height=Math.floor(n.height),n};e.exports=i},function(e,f,i){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(10),o=function(r,a,l,h,u){return u===void 0&&(u=new n),u.setTo(Math.min(r,l),Math.min(a,h),Math.abs(r-l),Math.abs(a-h))};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4),o=function(r,a){return a===void 0&&(a=new n),a.x=r.centerX,a.y=r.centerY,a};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4),o=function(r,a){return a===void 0&&(a=new n),a.x=r.width,a.y=r.height,a};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(190),o=function(r,a,l){var h=r.centerX,u=r.centerY;return r.setSize(r.width+a*2,r.height+l*2),n(r,h,u)};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(10),o=i(152),r=function(a,l,h){return h===void 0&&(h=new n),o(a,l)?(h.x=Math.max(a.x,l.x),h.y=Math.max(a.y,l.y),h.width=Math.min(a.right,l.right)-h.x,h.height=Math.min(a.bottom,l.bottom)-h.y):h.setEmpty(),h};e.exports=r},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){for(var r=n.x,a=n.right,l=n.y,h=n.bottom,u=0;u<o.length;u++)r=Math.min(r,o[u].x),a=Math.max(a,o[u].x),l=Math.min(l,o[u].y),h=Math.max(h,o[u].y);return n.x=r,n.y=l,n.width=a-r,n.height=h-l,n};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){var r=Math.min(n.x,o.x),a=Math.max(n.right,o.right);n.x=r,n.width=a-r;var l=Math.min(n.y,o.y),h=Math.max(n.bottom,o.bottom);return n.y=l,n.height=h-l,n};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r){var a=Math.min(n.x,o),l=Math.max(n.right,o);n.x=a,n.width=l-a;var h=Math.min(n.y,r),u=Math.max(n.bottom,r);return n.y=h,n.height=u-h,n};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r){return n.x+=o,n.y+=r,n};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return n.x+=o.x,n.y+=o.y,n};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return n.x<o.right&&n.right>o.x&&n.y<o.bottom&&n.bottom>o.y};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4),o=i(36),r=function(a,l,h){h===void 0&&(h=new n),l=o(l);var u=Math.sin(l),v=Math.cos(l),d=v>0?a.width/2:a.width/-2,c=u>0?a.height/2:a.height/-2;return Math.abs(d*u)<Math.abs(c*v)?c=d*u/v:d=c*v/u,h.x=d+a.centerX,h.y=c+a.centerY,h};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(195),o=i(503),r=i(4),a=function(l,h,u){if(u===void 0&&(u=new r),o(l,h))switch(n(0,3)){case 0:u.x=l.x+Math.random()*(h.right-l.x),u.y=l.y+Math.random()*(h.top-l.y);break;case 1:u.x=h.x+Math.random()*(l.right-h.x),u.y=h.bottom+Math.random()*(l.bottom-h.bottom);break;case 2:u.x=l.x+Math.random()*(h.x-l.x),u.y=h.y+Math.random()*(l.bottom-h.y);break;case 3:u.x=h.right+Math.random()*(l.right-h.right),u.y=l.y+Math.random()*(h.bottom-l.y);break}return u};e.exports=a},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return n.width===o.width&&n.height===o.height};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r){return r===void 0&&(r=o),n.width*=o,n.height*=r,n};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(82);n.Area=i(1294),n.BuildEquilateral=i(1295),n.BuildFromPolygon=i(1296),n.BuildRight=i(1297),n.CenterOn=i(1298),n.Centroid=i(504),n.CircumCenter=i(1299),n.CircumCircle=i(1300),n.Clone=i(1301),n.Contains=i(115),n.ContainsArray=i(235),n.ContainsPoint=i(1302),n.CopyFrom=i(1303),n.Decompose=i(495),n.Equals=i(1304),n.GetPoint=i(476),n.GetPoints=i(477),n.InCenter=i(506),n.Perimeter=i(1305),n.Offset=i(505),n.Random=i(181),n.Rotate=i(1306),n.RotateAroundPoint=i(1307),n.RotateAroundXY=i(238),e.exports=n},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){var o=n.x1,r=n.y1,a=n.x2,l=n.y2,h=n.x3,u=n.y3;return Math.abs(((h-o)*(l-r)-(a-o)*(u-r))/2)};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(82),o=function(r,a,l){var h=l*(Math.sqrt(3)/2),u=r,v=a,d=r+l/2,c=a+h,p=r-l/2,g=a+h;return new n(u,v,d,c,p,g)};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(59),o=i(82),r=function(a,l,h,u,v){l===void 0&&(l=null),h===void 0&&(h=1),u===void 0&&(u=1),v===void 0&&(v=[]);for(var d=n(a,l),c,p,g,m,x,y,T,C,S,E=0;E<d.length;E+=3)c=d[E],p=d[E+1],g=d[E+2],m=a[c*2]*h,x=a[c*2+1]*u,y=a[p*2]*h,T=a[p*2+1]*u,C=a[g*2]*h,S=a[g*2+1]*u,v.push(new o(m,x,y,T,C,S));return v};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(82),o=function(r,a,l,h){h===void 0&&(h=l);var u=r,v=a,d=r,c=a-h,p=r+l,g=a;return new n(u,v,d,c,p,g)};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(504),o=i(505),r=function(a,l,h,u){u===void 0&&(u=n);var v=u(a),d=l-v.x,c=h-v.y;return o(a,d,c)};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(3);function o(a,l,h,u){return a*u-l*h}var r=function(a,l){l===void 0&&(l=new n);var h=a.x3,u=a.y3,v=a.x1-h,d=a.y1-u,c=a.x2-h,p=a.y2-u,g=2*o(v,d,c,p),m=o(d,v*v+d*d,p,c*c+p*p),x=o(v,v*v+d*d,c,c*c+p*p);return l.x=h-m/g,l.y=u+x/g,l};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(65),o=function(r,a){a===void 0&&(a=new n);var l=r.x1,h=r.y1,u=r.x2,v=r.y2,d=r.x3,c=r.y3,p=u-l,g=v-h,m=d-l,x=c-h,y=p*(l+u)+g*(h+v),T=m*(l+d)+x*(h+c),C=2*(p*(c-v)-g*(d-u)),S,E;if(Math.abs(C)<1e-6){var M=Math.min(l,u,d),O=Math.min(h,v,c);S=(Math.max(l,u,d)-M)*.5,E=(Math.max(h,v,c)-O)*.5,a.x=M+S,a.y=O+E,a.radius=Math.sqrt(S*S+E*E)}else a.x=(x*y-g*T)/C,a.y=(p*T-m*y)/C,S=a.x-l,E=a.y-h,a.radius=Math.sqrt(S*S+E*E);return a};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(82),o=function(r){return new n(r.x1,r.y1,r.x2,r.y2,r.x3,r.y3)};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(115),o=function(r,a){return n(r,a.x,a.y)};e.exports=o},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return o.setTo(n.x1,n.y1,n.x2,n.y2,n.x3,n.y3)};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return n.x1===o.x1&&n.y1===o.y1&&n.x2===o.x2&&n.y2===o.y2&&n.x3===o.x3&&n.y3===o.y3};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(67),o=function(r){var a=r.getLineA(),l=r.getLineB(),h=r.getLineC();return n(a)+n(l)+n(h)};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(238),o=i(506),r=function(a,l){var h=o(a);return n(a,h.x,h.y,l)};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(238),o=function(r,a,l){return n(r,a.x,a.y,l)};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(203),o=i(17),r={CreatePixelPerfectHandler:i(507),CreateInteractiveObject:i(508),Events:i(51),Gamepad:i(1309),InputManager:i(409),InputPlugin:i(1321),InputPluginCache:i(153),Keyboard:i(1322),Mouse:i(1336),Pointer:i(412),Touch:i(1337)};r=o(!1,r,n),e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Axis:i(509),Button:i(510),Events:i(239),Gamepad:i(511),GamepadPlugin:i(1316),Configs:i(1317)}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="down"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="up"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="connected"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="disconnected"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="down"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="up"},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(9),r=i(239),a=i(511),l=i(6),h=i(153),u=i(51),v=new n({Extends:o,initialize:function(c){o.call(this),this.scene=c.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=c,this.enabled=!0,this.target,this.gamepads=[],this.queue=[],this.onGamepadHandler,this._pad1,this._pad2,this._pad3,this._pad4,c.pluginEvents.once(u.BOOT,this.boot,this),c.pluginEvents.on(u.START,this.start,this)},boot:function(){var d=this.scene.sys.game,c=this.settings.input,p=d.config;this.enabled=l(c,"gamepad",p.inputGamepad)&&d.device.input.gamepads,this.target=l(c,"gamepad.target",p.inputGamepadEventTarget),this.sceneInputPlugin.pluginEvents.once(u.DESTROY,this.destroy,this)},start:function(){this.enabled&&(this.startListeners(),this.refreshPads()),this.sceneInputPlugin.pluginEvents.once(u.SHUTDOWN,this.shutdown,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},startListeners:function(){var d=this,c=this.target,p=function(g){g.defaultPrevented||!d.isActive()||(d.refreshPads(),d.queue.push(g))};this.onGamepadHandler=p,c.addEventListener("gamepadconnected",p,!1),c.addEventListener("gamepaddisconnected",p,!1),this.sceneInputPlugin.pluginEvents.on(u.UPDATE,this.update,this)},stopListeners:function(){this.target.removeEventListener("gamepadconnected",this.onGamepadHandler),this.target.removeEventListener("gamepaddisconnected",this.onGamepadHandler),this.sceneInputPlugin.pluginEvents.off(u.UPDATE,this.update);for(var d=0;d<this.gamepads.length;d++)this.gamepads[d].removeAllListeners()},disconnectAll:function(){for(var d=0;d<this.gamepads.length;d++)this.gamepads[d].pad.connected=!1},refreshPads:function(){var d=navigator.getGamepads();if(!d)this.disconnectAll();else for(var c=this.gamepads,p=0;p<d.length;p++){var g=d[p];if(!!g){var m=g.id,x=g.index,y=c[x];if(y)y.id!==m?(y.destroy(),c[x]=new a(this,g)):y.update(g);else{var T=new a(this,g);c[x]=T,this._pad1?this._pad2?this._pad3?this._pad4||(this._pad4=T):this._pad3=T:this._pad2=T:this._pad1=T}}}},getAll:function(){for(var d=[],c=this.gamepads,p=0;p<c.length;p++)c[p]&&d.push(c[p]);return d},getPad:function(d){for(var c=this.gamepads,p=0;p<c.length;p++)if(c[p]&&c[p].index===d)return c[p]},update:function(){if(!!this.enabled){this.refreshPads();var d=this.queue.length;if(d!==0)for(var c=this.queue.splice(0,d),p=0;p<d;p++){var g=c[p],m=this.getPad(g.gamepad.index);g.type==="gamepadconnected"?this.emit(r.CONNECTED,m,g):g.type==="gamepaddisconnected"&&this.emit(r.DISCONNECTED,m,g)}}},shutdown:function(){this.stopListeners(),this.removeAllListeners()},destroy:function(){this.shutdown();for(var d=0;d<this.gamepads.length;d++)this.gamepads[d]&&this.gamepads[d].destroy();this.gamepads=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.target=null},total:{get:function(){return this.gamepads.length}},pad1:{get:function(){return this._pad1}},pad2:{get:function(){return this._pad2}},pad3:{get:function(){return this._pad3}},pad4:{get:function(){return this._pad4}}});h.register("GamepadPlugin",v,"gamepad","gamepad","inputGamepad"),e.exports=v},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={DUALSHOCK_4:i(1318),SNES_USB:i(1319),XBOX_360:i(1320)}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SHARE:8,OPTIONS:9,PS:16,TOUCHBAR:17,X:0,CIRCLE:1,SQUARE:2,TRIANGLE:3,L1:4,R1:5,L2:6,R2:7,L3:10,R3:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SELECT:8,START:9,B:0,A:1,Y:2,X:3,LEFT_SHOULDER:4,RIGHT_SHOULDER:5}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,MENU:16,A:0,B:1,X:2,Y:3,LB:4,RB:5,LT:6,RT:7,BACK:8,START:9,LS:10,RS:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(65),o=i(66),r=i(0),a=i(203),l=i(508),h=i(507),u=i(50),v=i(111),d=i(112),c=i(51),p=i(9),g=i(2),m=i(56),x=i(153),y=i(7),T=i(24),C=i(10),S=i(57),E=i(20),M=i(82),O=i(115),L=new r({Extends:p,initialize:function(w){p.call(this),this.scene=w,this.systems=w.sys,this.settings=w.sys.settings,this.manager=w.sys.game.input,this.pluginEvents=new p,this.enabled=!0,this.displayList,this.cameras,x.install(this),this.mouse=this.manager.mouse,this.topOnly=!0,this.pollRate=-1,this._pollTimer=0;var D={cancelled:!1};this._eventContainer={stopPropagation:function(){D.cancelled=!0}},this._eventData=D,this.dragDistanceThreshold=0,this.dragTimeThreshold=0,this._temp=[],this._tempZones=[],this._list=[],this._pendingInsertion=[],this._pendingRemoval=[],this._draggable=[],this._drag={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._dragState=[],this._over={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._validTypes=["onDown","onUp","onOver","onOut","onMove","onDragStart","onDrag","onDragEnd","onDragEnter","onDragLeave","onDragOver","onDrop"],this._updatedThisFrame=!1,w.sys.events.once(E.BOOT,this.boot,this),w.sys.events.on(E.START,this.start,this)},boot:function(){this.cameras=this.systems.cameras,this.displayList=this.systems.displayList,this.systems.events.once(E.DESTROY,this.destroy,this),this.pluginEvents.emit(c.BOOT)},start:function(){var R=this.systems.events;R.on(E.TRANSITION_START,this.transitionIn,this),R.on(E.TRANSITION_OUT,this.transitionOut,this),R.on(E.TRANSITION_COMPLETE,this.transitionComplete,this),R.on(E.PRE_UPDATE,this.preUpdate,this),R.once(E.SHUTDOWN,this.shutdown,this),this.manager.events.on(c.GAME_OUT,this.onGameOut,this),this.manager.events.on(c.GAME_OVER,this.onGameOver,this),this.enabled=!0,this._dragState=[0,0,0,0,0,0,0,0,0,0],this.pluginEvents.emit(c.START)},onGameOver:function(R){this.isActive()&&this.emit(c.GAME_OVER,R.timeStamp,R)},onGameOut:function(R){this.isActive()&&this.emit(c.GAME_OUT,R.timeStamp,R)},preUpdate:function(){this.pluginEvents.emit(c.PRE_UPDATE);var R=this._pendingRemoval,w=this._pendingInsertion,D=R.length,B=w.length;if(!(D===0&&B===0)){for(var N=this._list,z=0;z<D;z++){var X=R[z],k=N.indexOf(X);k>-1&&(N.splice(k,1),this.clear(X,!0))}R.length=0,this._pendingRemoval.length=0,this._list=N.concat(w.splice(0))}},isActive:function(){return this.enabled&&this.scene.sys.isActive()},updatePoll:function(R,w){if(!this.isActive())return!1;if(this.pluginEvents.emit(c.UPDATE,R,w),this._updatedThisFrame)return this._updatedThisFrame=!1,!1;var D,B=this.manager,N=B.pointers,z=B.pointersTotal;for(D=0;D<z;D++)N[D].updateMotion();if(this._list.length===0)return!1;var X=this.pollRate;if(X===-1)return!1;if(X>0)if(this._pollTimer-=w,this._pollTimer<0)this._pollTimer=this.pollRate;else return!1;var k=!1;for(D=0;D<z;D++){var K=0,b=N[D];this._tempZones=[],this._temp=this.hitTestPointer(b),this.sortGameObjects(this._temp,b),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),K+=this.processOverOutEvents(b),this.getDragState(b)===2&&this.processDragThresholdEvent(b,R),K>0&&(k=!0)}return k},update:function(R,w){if(!this.isActive())return!1;for(var D=w.length,B=!1,N=0;N<D;N++){var z=0,X=w[N];switch(this._tempZones=[],this._temp=this.hitTestPointer(X),this.sortGameObjects(this._temp,X),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),R){case a.MOUSE_DOWN:z+=this.processDragDownEvent(X),z+=this.processDownEvents(X),z+=this.processOverOutEvents(X);break;case a.MOUSE_UP:z+=this.processDragUpEvent(X),z+=this.processUpEvents(X),z+=this.processOverOutEvents(X);break;case a.TOUCH_START:z+=this.processDragDownEvent(X),z+=this.processDownEvents(X),z+=this.processOverEvents(X);break;case a.TOUCH_END:case a.TOUCH_CANCEL:z+=this.processDragUpEvent(X),z+=this.processUpEvents(X),z+=this.processOutEvents(X);break;case a.MOUSE_MOVE:case a.TOUCH_MOVE:z+=this.processDragMoveEvent(X),z+=this.processMoveEvents(X),z+=this.processOverOutEvents(X);break;case a.MOUSE_WHEEL:z+=this.processWheelEvent(X);break}z>0&&(B=!0)}return this._updatedThisFrame=!0,B},clear:function(R,w){w===void 0&&(w=!1);var D=R.input;if(!!D){w||this.queueForRemoval(R),D.gameObject=void 0,D.target=void 0,D.hitArea=void 0,D.hitAreaCallback=void 0,D.callbackContext=void 0,R.input=null;var B=this._draggable.indexOf(R);return B>-1&&this._draggable.splice(B,1),B=this._drag[0].indexOf(R),B>-1&&this._drag[0].splice(B,1),B=this._over[0].indexOf(R),B>-1&&(this._over[0].splice(B,1),this.manager.resetCursor(D)),R}},disable:function(R){R.input.enabled=!1},enable:function(R,w,D,B){return B===void 0&&(B=!1),R.input?R.input.enabled=!0:this.setHitArea(R,w,D),R.input&&B&&!R.input.dropZone&&(R.input.dropZone=B),this},hitTestPointer:function(R){for(var w=this.cameras.getCamerasBelowPointer(R),D=0;D<w.length;D++){for(var B=w[D],N=this.manager.hitTest(R,this._list,B),z=0;z<N.length;z++){var X=N[z];X.input.dropZone&&this._tempZones.push(X)}if(N.length>0)return R.camera=B,N}return R.camera=w[0],[]},processDownEvents:function(R){var w=0,D=this._temp,B=this._eventData,N=this._eventContainer;B.cancelled=!1;for(var z=!1,X=0;X<D.length;X++){var k=D[X];if(!!k.input){if(w++,k.emit(c.GAMEOBJECT_POINTER_DOWN,R,k.input.localX,k.input.localY,N),B.cancelled||!k.input){z=!0;break}if(this.emit(c.GAMEOBJECT_DOWN,R,k,N),B.cancelled||!k.input){z=!0;break}}}return!z&&this.manager&&(R.downElement===this.manager.game.canvas?this.emit(c.POINTER_DOWN,R,D):this.emit(c.POINTER_DOWN_OUTSIDE,R)),w},getDragState:function(R){return this._dragState[R.id]},setDragState:function(R,w){this._dragState[R.id]=w},processDragThresholdEvent:function(R,w){var D=!1,B=this.dragTimeThreshold,N=this.dragDistanceThreshold;if((N>0&&u(R.x,R.y,R.downX,R.downY)>=N||B>0&&w>=R.downTime+B)&&(D=!0),D)return this.setDragState(R,3),this.processDragStartList(R)},processDragStartList:function(R){if(this.getDragState(R)!==3)return 0;for(var w=this._drag[R.id],D=0;D<w.length;D++){var B=w[D],N=B.input;N.dragState=2,N.dragStartX=B.x,N.dragStartY=B.y,N.dragStartXGlobal=R.worldX,N.dragStartYGlobal=R.worldY,N.dragX=N.dragStartXGlobal-N.dragStartX,N.dragY=N.dragStartYGlobal-N.dragStartY,B.emit(c.GAMEOBJECT_DRAG_START,R,N.dragX,N.dragY),this.emit(c.DRAG_START,R,B)}return this.setDragState(R,4),w.length},processDragDownEvent:function(R){var w=this._temp;if(this._draggable.length===0||w.length===0||!R.primaryDown||this.getDragState(R)!==0)return 0;this.setDragState(R,1);for(var D=[],B=0;B<w.length;B++){var N=w[B];N.input.draggable&&N.input.dragState===0&&D.push(N)}return D.length===0?(this.setDragState(R,0),0):(D.length>1&&(this.sortGameObjects(D,R),this.topOnly&&D.splice(1)),this._drag[R.id]=D,this.dragDistanceThreshold===0&&this.dragTimeThreshold===0?(this.setDragState(R,3),this.processDragStartList(R)):(this.setDragState(R,2),0))},processDragMoveEvent:function(R){if(this.getDragState(R)===2&&this.processDragThresholdEvent(R,this.manager.game.loop.now),this.getDragState(R)!==4)return 0;for(var w=this._tempZones,D=this._drag[R.id],B=0;B<D.length;B++){var N=D[B],z=N.input,X=z.target;if(X){var k=w.indexOf(X);k===0?(N.emit(c.GAMEOBJECT_DRAG_OVER,R,X),this.emit(c.DRAG_OVER,R,N,X)):k>0?(N.emit(c.GAMEOBJECT_DRAG_LEAVE,R,X),this.emit(c.DRAG_LEAVE,R,N,X),z.target=w[0],X=z.target,N.emit(c.GAMEOBJECT_DRAG_ENTER,R,X),this.emit(c.DRAG_ENTER,R,N,X)):(N.emit(c.GAMEOBJECT_DRAG_LEAVE,R,X),this.emit(c.DRAG_LEAVE,R,N,X),w[0]?(z.target=w[0],X=z.target,N.emit(c.GAMEOBJECT_DRAG_ENTER,R,X),this.emit(c.DRAG_ENTER,R,N,X)):z.target=null)}else!X&&w[0]&&(z.target=w[0],X=z.target,N.emit(c.GAMEOBJECT_DRAG_ENTER,R,X),this.emit(c.DRAG_ENTER,R,N,X));var K,b;if(!N.parentContainer)K=R.worldX-z.dragX,b=R.worldY-z.dragY;else{var I=R.worldX-z.dragStartXGlobal,G=R.worldY-z.dragStartYGlobal,Y=N.getParentRotation(),U=I*Math.cos(Y)+G*Math.sin(Y),W=G*Math.cos(Y)-I*Math.sin(Y);U*=1/N.parentContainer.scaleX,W*=1/N.parentContainer.scaleY,K=U+z.dragStartX,b=W+z.dragStartY}N.emit(c.GAMEOBJECT_DRAG,R,K,b),this.emit(c.DRAG,R,N,K,b)}return D.length},processDragUpEvent:function(R){for(var w=this._drag[R.id],D=0;D<w.length;D++){var B=w[D],N=B.input;if(N&&N.dragState===2){N.dragState=0,N.dragX=N.localX-B.displayOriginX,N.dragY=N.localY-B.displayOriginY;var z=!1,X=N.target;X&&(B.emit(c.GAMEOBJECT_DROP,R,X),this.emit(c.DROP,R,B,X),N.target=null,z=!0),B.input&&(B.emit(c.GAMEOBJECT_DRAG_END,R,N.dragX,N.dragY,z),this.emit(c.DRAG_END,R,B,z))}}return this.setDragState(R,0),w.splice(0),0},processMoveEvents:function(R){var w=0,D=this._temp,B=this._eventData,N=this._eventContainer;B.cancelled=!1;for(var z=!1,X=0;X<D.length;X++){var k=D[X];if(!!k.input){if(w++,k.emit(c.GAMEOBJECT_POINTER_MOVE,R,k.input.localX,k.input.localY,N),B.cancelled||!k.input){z=!0;break}if(this.emit(c.GAMEOBJECT_MOVE,R,k,N),B.cancelled||!k.input){z=!0;break}if(this.topOnly)break}}return z||this.emit(c.POINTER_MOVE,R,D),w},processWheelEvent:function(R){var w=0,D=this._temp,B=this._eventData,N=this._eventContainer;B.cancelled=!1;for(var z=!1,X=R.deltaX,k=R.deltaY,K=R.deltaZ,b=0;b<D.length;b++){var I=D[b];if(!!I.input){if(w++,I.emit(c.GAMEOBJECT_POINTER_WHEEL,R,X,k,K,N),B.cancelled||!I.input){z=!0;break}if(this.emit(c.GAMEOBJECT_WHEEL,R,I,X,k,K,N),B.cancelled||!I.input){z=!0;break}}}return z||this.emit(c.POINTER_WHEEL,R,D,X,k,K),w},processOverEvents:function(R){var w=this._temp,D=0,B=w.length,N=[];if(B>0){var z=this.manager,X=this._eventData,k=this._eventContainer;X.cancelled=!1;for(var K=!1,b=0;b<B;b++){var I=w[b];if(!!I.input){if(N.push(I),z.setCursor(I.input),I.emit(c.GAMEOBJECT_POINTER_OVER,R,I.input.localX,I.input.localY,k),D++,X.cancelled||!I.input){K=!0;break}if(this.emit(c.GAMEOBJECT_OVER,R,I,k),X.cancelled||!I.input){K=!0;break}}}K||this.emit(c.POINTER_OVER,R,N)}return this._over[R.id]=N,D},processOutEvents:function(R){var w=this._over[R.id],D=0,B=w.length;if(B>0){var N=this.manager,z=this._eventData,X=this._eventContainer;z.cancelled=!1;var k=!1;this.sortGameObjects(w,R);for(var K=0;K<B;K++){var b=w[K];if(b=w[K],!!b.input){if(N.resetCursor(b.input),b.emit(c.GAMEOBJECT_POINTER_OUT,R,X),D++,z.cancelled||!b.input){k=!0;break}if(this.emit(c.GAMEOBJECT_OUT,R,b,X),z.cancelled||!b.input){k=!0;break}k||this.emit(c.POINTER_OUT,R,w)}}this._over[R.id]=[]}return D},processOverOutEvents:function(R){var w=this._temp,D,B,N=[],z=[],X=[],k=this._over[R.id],K=this._drag[R.id],b=this.manager;for(D=0;D<k.length;D++)B=k[D],w.indexOf(B)===-1&&K.indexOf(B)===-1?N.push(B):X.push(B);for(D=0;D<w.length;D++)B=w[D],k.indexOf(B)===-1&&z.push(B);var I=N.length,G=0,Y=this._eventData,U=this._eventContainer;Y.cancelled=!1;var W=!1;if(I>0){for(this.sortGameObjects(N,R),D=0;D<I;D++)if(B=N[D],!!B.input){if(b.resetCursor(B.input),B.emit(c.GAMEOBJECT_POINTER_OUT,R,U),G++,Y.cancelled||!B.input){W=!0;break}if(this.emit(c.GAMEOBJECT_OUT,R,B,U),Y.cancelled||!B.input){W=!0;break}}W||this.emit(c.POINTER_OUT,R,N)}if(I=z.length,Y.cancelled=!1,W=!1,I>0){for(this.sortGameObjects(z,R),D=0;D<I;D++)if(B=z[D],!!B.input){if(b.setCursor(B.input),B.emit(c.GAMEOBJECT_POINTER_OVER,R,B.input.localX,B.input.localY,U),G++,Y.cancelled||!B.input){W=!0;break}if(this.emit(c.GAMEOBJECT_OVER,R,B,U),Y.cancelled||!B.input){W=!0;break}}W||this.emit(c.POINTER_OVER,R,z)}return k=X.concat(z),this._over[R.id]=this.sortGameObjects(k,R),G},processUpEvents:function(R){var w=this._temp,D=this._eventData,B=this._eventContainer;D.cancelled=!1;for(var N=!1,z=0;z<w.length;z++){var X=w[z];if(!!X.input){if(X.emit(c.GAMEOBJECT_POINTER_UP,R,X.input.localX,X.input.localY,B),D.cancelled||!X.input){N=!0;break}if(this.emit(c.GAMEOBJECT_UP,R,X,B),D.cancelled||!X.input){N=!0;break}}}return!N&&this.manager&&(R.upElement===this.manager.game.canvas?this.emit(c.POINTER_UP,R,w):this.emit(c.POINTER_UP_OUTSIDE,R)),w.length},queueForInsertion:function(R){return this._pendingInsertion.indexOf(R)===-1&&this._list.indexOf(R)===-1&&this._pendingInsertion.push(R),this},queueForRemoval:function(R){return this._pendingRemoval.push(R),this},setDraggable:function(R,w){w===void 0&&(w=!0),Array.isArray(R)||(R=[R]);for(var D=0;D<R.length;D++){var B=R[D];B.input.draggable=w;var N=this._draggable.indexOf(B);w&&N===-1?this._draggable.push(B):!w&&N>-1&&this._draggable.splice(N,1)}return this},makePixelPerfect:function(R){R===void 0&&(R=1);var w=this.systems.textures;return h(w,R)},setHitArea:function(R,w,D){if(w===void 0)return this.setHitAreaFromTexture(R);Array.isArray(R)||(R=[R]);var B=!1,N=!1,z=!1,X=!1,k=!1,K=!0;if(y(w)){var b=w;w=g(b,"hitArea",null),D=g(b,"hitAreaCallback",null),B=g(b,"draggable",!1),N=g(b,"dropZone",!1),z=g(b,"cursor",!1),X=g(b,"useHandCursor",!1),k=g(b,"pixelPerfect",!1);var I=g(b,"alphaTolerance",1);k&&(w={},D=this.makePixelPerfect(I)),(!w||!D)&&(this.setHitAreaFromTexture(R),K=!1)}else typeof w=="function"&&!D&&(D=w,w={});for(var G=0;G<R.length;G++){var Y=R[G];if(k&&Y.type==="Container"){console.warn("Cannot pixelPerfect test a Container. Use a custom callback.");continue}var U=Y.input?Y.input:l(Y,w,D);U.customHitArea=K,U.dropZone=N,U.cursor=X?"pointer":z,Y.input=U,B&&this.setDraggable(Y),this.queueForInsertion(Y)}return this},setHitAreaCircle:function(R,w,D,B,N){N===void 0&&(N=o);var z=new n(w,D,B);return this.setHitArea(R,z,N)},setHitAreaEllipse:function(R,w,D,B,N,z){z===void 0&&(z=d);var X=new v(w,D,B,N);return this.setHitArea(R,X,z)},setHitAreaFromTexture:function(R,w){w===void 0&&(w=S),Array.isArray(R)||(R=[R]);for(var D=0;D<R.length;D++){var B=R[D],N=B.frame,z=0,X=0;if(B.width?(z=B.width,X=B.height):N&&(z=N.realWidth,X=N.realHeight),B.type==="Container"&&(z===0||X===0)){console.warn("Container.setInteractive must specify a Shape or call setSize() first");continue}z!==0&&X!==0&&(B.input=l(B,new C(0,0,z,X),w),this.queueForInsertion(B))}return this},setHitAreaRectangle:function(R,w,D,B,N,z){z===void 0&&(z=S);var X=new C(w,D,B,N);return this.setHitArea(R,X,z)},setHitAreaTriangle:function(R,w,D,B,N,z,X,k){k===void 0&&(k=O);var K=new M(w,D,B,N,z,X);return this.setHitArea(R,K,k)},enableDebug:function(R,w){w===void 0&&(w=65280);var D=R.input;if(!D||!D.hitArea)return this;var B=D.hitArea,N=B.type,z=D.hitAreaDebug,X=this.systems.add,k=this.systems.updateList;z&&(k.remove(z),z.destroy(),z=null);var K=0,b=0;switch(N){case m.CIRCLE:z=X.arc(0,0,B.radius),K=B.x-B.radius,b=B.y-B.radius;break;case m.ELLIPSE:z=X.ellipse(0,0,B.width,B.height),K=B.x-B.width/2,b=B.y-B.height/2;break;case m.LINE:z=X.line(0,0,B.x1,B.y1,B.x2,B.y2);break;case m.POLYGON:z=X.polygon(0,0,B.points);break;case m.RECTANGLE:z=X.rectangle(0,0,B.width,B.height),K=B.x,b=B.y;break;case m.TRIANGLE:z=X.triangle(0,0,B.x1,B.y1,B.x2,B.y2,B.x3,B.y3);break}return z&&(z.isFilled=!1,z.preUpdate=function(){z.setStrokeStyle(1/R.scale,w),z.setDisplayOrigin(R.displayOriginX,R.displayOriginY);var I=R.x,G=R.y,Y=R.rotation,U=R.scaleX,W=R.scaleY;if(R.parentContainer){var H=R.getWorldTransformMatrix();I=H.tx,G=H.ty,Y=H.rotation,U=H.scaleX,W=H.scaleY}z.setRotation(Y),z.setScale(U,W),z.setPosition(I+K,G+b),z.setScrollFactor(R.scrollFactorX,R.scrollFactorY),z.setDepth(R.depth)},k.add(z),D.hitAreaDebug=z),this},removeDebug:function(R){var w=R.input;if(w&&w.hitAreaDebug){var D=w.hitAreaDebug;this.systems.updateList.remove(D),D.destroy(),w.hitAreaDebug=null}return this},setPollAlways:function(){return this.setPollRate(0)},setPollOnMove:function(){return this.setPollRate(-1)},setPollRate:function(R){return this.pollRate=R,this._pollTimer=0,this},setGlobalTopOnly:function(R){return this.manager.globalTopOnly=R,this},setTopOnly:function(R){return this.topOnly=R,this},sortGameObjects:function(R,w){if(R.length<2)return R;var D=w.camera.renderList;return R.sort(function(B,N){return D.indexOf(N)-D.indexOf(B)})},sortDropZones:function(R){return R.length<2?R:(this.scene.sys.depthSort(),R.sort(this.sortDropZoneHandler.bind(this)))},sortDropZoneHandler:function(R,w){if(!R.parentContainer&&!w.parentContainer)return this.displayList.getIndex(w)-this.displayList.getIndex(R);if(R.parentContainer===w.parentContainer)return w.parentContainer.getIndex(w)-R.parentContainer.getIndex(R);if(R.parentContainer===w)return-1;if(w.parentContainer===R)return 1;for(var D=R.getIndexList(),B=w.getIndexList(),N=Math.min(D.length,B.length),z=0;z<N;z++){var X=D[z],k=B[z];if(X!==k)return k-X}return B.length-D.length},stopPropagation:function(){return this.manager._tempSkip=!0,this},addPointer:function(R){return this.manager.addPointer(R)},setDefaultCursor:function(R){return this.manager.setDefaultCursor(R),this},transitionIn:function(){this.enabled=this.settings.transitionAllowInput},transitionComplete:function(){this.settings.transitionAllowInput||(this.enabled=!0)},transitionOut:function(){this.enabled=this.settings.transitionAllowInput},shutdown:function(){this.pluginEvents.emit(c.SHUTDOWN),this._temp.length=0,this._list.length=0,this._draggable.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0,this._dragState.length=0;for(var R=0;R<10;R++)this._drag[R]=[],this._over[R]=[];this.removeAllListeners();var w=this.manager;w.canvas.style.cursor=w.defaultCursor;var D=this.systems.events;D.off(E.TRANSITION_START,this.transitionIn,this),D.off(E.TRANSITION_OUT,this.transitionOut,this),D.off(E.TRANSITION_COMPLETE,this.transitionComplete,this),D.off(E.PRE_UPDATE,this.preUpdate,this),w.events.off(c.GAME_OUT,this.onGameOut,this),w.events.off(c.GAME_OVER,this.onGameOver,this),D.off(E.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.pluginEvents.emit(c.DESTROY),this.pluginEvents.removeAllListeners(),this.scene.sys.events.off(E.START,this.start,this),this.scene=null,this.cameras=null,this.manager=null,this.events=null,this.mouse=null},x:{get:function(){return this.manager.activePointer.x}},y:{get:function(){return this.manager.activePointer.y}},isOver:{get:function(){return this.manager.isOver}},mousePointer:{get:function(){return this.manager.mousePointer}},activePointer:{get:function(){return this.manager.activePointer}},pointer1:{get:function(){return this.manager.pointers[1]}},pointer2:{get:function(){return this.manager.pointers[2]}},pointer3:{get:function(){return this.manager.pointers[3]}},pointer4:{get:function(){return this.manager.pointers[4]}},pointer5:{get:function(){return this.manager.pointers[5]}},pointer6:{get:function(){return this.manager.pointers[6]}},pointer7:{get:function(){return this.manager.pointers[7]}},pointer8:{get:function(){return this.manager.pointers[8]}},pointer9:{get:function(){return this.manager.pointers[9]}},pointer10:{get:function(){return this.manager.pointers[10]}}});T.register("InputPlugin",L,"input"),e.exports=L},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Events:i(154),KeyboardManager:i(410),KeyboardPlugin:i(1330),Key:i(512),KeyCodes:i(143),KeyCombo:i(513),AdvanceKeyCombo:i(515),ProcessKeyCombo:i(514),ResetKeyCombo:i(516),JustDown:i(1332),JustUp:i(1333),DownDuration:i(1334),UpDuration:i(1335)}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="keydown"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="keyup"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="keycombomatch"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="down"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="keydown-"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="keyup-"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="up"},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(9),r=i(154),a=i(22),l=i(6),h=i(51),u=i(153),v=i(512),d=i(143),c=i(513),p=i(1331),g=i(20),m=i(76),x=new n({Extends:o,initialize:function(T){o.call(this),this.game=T.systems.game,this.scene=T.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=T,this.manager=T.manager.keyboard,this.enabled=!0,this.keys=[],this.combos=[],this.prevCode=null,this.prevTime=0,this.prevType=null,T.pluginEvents.once(h.BOOT,this.boot,this),T.pluginEvents.on(h.START,this.start,this)},boot:function(){var y=this.settings.input;this.enabled=l(y,"keyboard",!0);var T=l(y,"keyboard.capture",null);T&&this.addCaptures(T),this.sceneInputPlugin.pluginEvents.once(h.DESTROY,this.destroy,this)},start:function(){this.sceneInputPlugin.manager.events.on(h.MANAGER_PROCESS,this.update,this),this.sceneInputPlugin.pluginEvents.once(h.SHUTDOWN,this.shutdown,this),this.game.events.on(a.BLUR,this.resetKeys,this),this.scene.sys.events.on(g.PAUSE,this.resetKeys,this),this.scene.sys.events.on(g.SLEEP,this.resetKeys,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},addCapture:function(y){return this.manager.addCapture(y),this},removeCapture:function(y){return this.manager.removeCapture(y),this},getCaptures:function(){return this.manager.captures},enableGlobalCapture:function(){return this.manager.preventDefault=!0,this},disableGlobalCapture:function(){return this.manager.preventDefault=!1,this},clearCaptures:function(){return this.manager.clearCaptures(),this},createCursorKeys:function(){return this.addKeys({up:d.UP,down:d.DOWN,left:d.LEFT,right:d.RIGHT,space:d.SPACE,shift:d.SHIFT})},addKeys:function(y,T,C){T===void 0&&(T=!0),C===void 0&&(C=!1);var S={};if(typeof y=="string"){y=y.split(",");for(var E=0;E<y.length;E++){var M=y[E].trim();M&&(S[M]=this.addKey(M,T,C))}}else for(var O in y)S[O]=this.addKey(y[O],T,C);return S},addKey:function(y,T,C){T===void 0&&(T=!0),C===void 0&&(C=!1);var S=this.keys;if(y instanceof v){var E=S.indexOf(y);return E>-1?S[E]=y:S[y.keyCode]=y,T&&this.addCapture(y.keyCode),y.setEmitOnRepeat(C),y}return typeof y=="string"&&(y=d[y.toUpperCase()]),S[y]||(S[y]=new v(this,y),T&&this.addCapture(y),S[y].setEmitOnRepeat(C)),S[y]},removeKey:function(y,T){T===void 0&&(T=!1);var C=this.keys,S;if(y instanceof v){var E=C.indexOf(y);E>-1&&(S=this.keys[E],this.keys[E]=void 0)}else typeof y=="string"&&(y=d[y.toUpperCase()]);return C[y]&&(S=C[y],C[y]=void 0),S&&(S.plugin=null,T&&S.destroy()),this},removeAllKeys:function(y){for(var T=this.keys,C=0;C<T.length;C++){var S=T[C];S&&(T[C]=void 0,y&&S.destroy())}return this},createCombo:function(y,T){return new c(this,y,T)},checkDown:function(y,T){if(T===void 0&&(T=0),this.enabled&&y.isDown){var C=m(this.time-y.timeDown,T);if(C>y._tick)return y._tick=C,!0}return!1},update:function(){var y=this.manager.queue,T=y.length;if(!(!this.isActive()||T===0))for(var C=this.keys,S=0;S<T;S++){var E=y[S],M=E.keyCode,O=C[M],L=!1;E.cancelled===void 0&&(E.cancelled=0,E.stopImmediatePropagation=function(){E.cancelled=1},E.stopPropagation=function(){E.cancelled=-1}),E.cancelled!==-1&&(M===this.prevCode&&E.timeStamp===this.prevTime&&E.type===this.prevType||(this.prevCode=M,this.prevTime=E.timeStamp,this.prevType=E.type,E.type==="keydown"?(O&&(L=O.isDown,O.onDown(E)),!E.cancelled&&(!O||!L)&&(p[M]&&this.emit(r.KEY_DOWN+p[M],E),E.cancelled||this.emit(r.ANY_KEY_DOWN,E))):(O&&O.onUp(E),E.cancelled||(p[M]&&this.emit(r.KEY_UP+p[M],E),E.cancelled||this.emit(r.ANY_KEY_UP,E))),E.cancelled===1&&(E.cancelled=0)))}},resetKeys:function(){for(var y=this.keys,T=0;T<y.length;T++)y[T]&&y[T].reset();return this},shutdown:function(){this.removeAllKeys(!0),this.removeAllListeners(),this.sceneInputPlugin.manager.events.off(h.MANAGER_PROCESS,this.update,this),this.game.events.off(a.BLUR,this.resetKeys),this.scene.sys.events.off(g.PAUSE,this.resetKeys,this),this.scene.sys.events.off(g.SLEEP,this.resetKeys,this),this.queue=[]},destroy:function(){this.shutdown();for(var y=this.keys,T=0;T<y.length;T++)y[T]&&y[T].destroy();this.keys=[],this.combos=[],this.queue=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.manager=null},time:{get:function(){return this.sceneInputPlugin.manager.time}}});u.register("KeyboardPlugin",x,"keyboard","keyboard","inputKeyboard"),e.exports=x},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(143),o={};for(var r in n)o[n[r]]=r;e.exports=o},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n._justDown?(n._justDown=!1,!0):!1};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n._justUp?(n._justUp=!1,!0):!1};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){o===void 0&&(o=50);var r=n.plugin.game.loop.time-n.timeDown;return n.isDown&&r<o};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){o===void 0&&(o=50);var r=n.plugin.game.loop.time-n.timeUp;return n.isUp&&r<o};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={MouseManager:i(411)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={TouchManager:i(413)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(21),o=i(17),r={Events:i(95),FileTypes:i(1339),File:i(23),FileTypesManager:i(8),GetURL:i(155),LoaderPlugin:i(1365),MergeXHRSettings:i(240),MultiFile:i(49),XHRLoader:i(517),XHRSettings:i(156)};r=o(!1,r,n),e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={AnimationJSONFile:i(1340),AsepriteFile:i(1341),AtlasJSONFile:i(1342),AtlasXMLFile:i(1343),AudioFile:i(518),AudioSpriteFile:i(1344),BinaryFile:i(1345),BitmapFontFile:i(1346),CSSFile:i(1347),GLSLFile:i(1348),HTML5AudioFile:i(519),HTMLFile:i(1349),HTMLTextureFile:i(1350),ImageFile:i(71),JSONFile:i(61),MultiAtlasFile:i(1351),MultiScriptFile:i(1352),OBJFile:i(1353),PackFile:i(1354),PluginFile:i(1355),SceneFile:i(1356),ScenePluginFile:i(1357),ScriptFile:i(520),SpriteSheetFile:i(1358),SVGFile:i(1359),TextFile:i(242),TilemapCSVFile:i(1360),TilemapImpactFile:i(1361),TilemapJSONFile:i(1362),UnityAtlasFile:i(1363),VideoFile:i(1364),XMLFile:i(241)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(8),r=i(61),a=i(95),l=new n({Extends:r,initialize:function(u,v,d,c,p){r.call(this,u,v,d,c,p),this.type="animationJSON"},onProcess:function(){this.loader.once(a.POST_PROCESS,this.onLoadComplete,this),r.prototype.onProcess.call(this)},onLoadComplete:function(){this.loader.systems.anims.fromJSON(this.data)}});o.register("animation",function(h,u,v,d){if(Array.isArray(h))for(var c=0;c<h.length;c++)this.addFile(new l(this,h[c]));else this.addFile(new l(this,h,u,d,v));return this}),e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(8),r=i(2),a=i(71),l=i(7),h=i(61),u=i(49),v=new n({Extends:u,initialize:function(c,p,g,m,x,y){var T,C;if(l(p)){var S=p;p=r(S,"key"),T=new a(c,{key:p,url:r(S,"textureURL"),extension:r(S,"textureExtension","png"),normalMap:r(S,"normalMap"),xhrSettings:r(S,"textureXhrSettings")}),C=new h(c,{key:p,url:r(S,"atlasURL"),extension:r(S,"atlasExtension","json"),xhrSettings:r(S,"atlasXhrSettings")})}else T=new a(c,p,g,x),C=new h(c,p,m,y);T.linkFile?u.call(this,c,"atlasjson",p,[T,C,T.linkFile]):u.call(this,c,"atlasjson",p,[T,C])},addToCache:function(){if(this.isReadyToProcess()){var d=this.files[0],c=this.files[1],p=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(d.key,d.data,c.data,p),c.addToCache(),this.complete=!0}}});o.register("aseprite",function(d,c,p,g,m){var x;if(Array.isArray(d))for(var y=0;y<d.length;y++)x=new v(this,d[y]),this.addFile(x.files);else x=new v(this,d,c,p,g,m),this.addFile(x.files);return this}),e.exports=v},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(8),r=i(2),a=i(71),l=i(7),h=i(61),u=i(49),v=new n({Extends:u,initialize:function(c,p,g,m,x,y){var T,C;if(l(p)){var S=p;p=r(S,"key"),T=new a(c,{key:p,url:r(S,"textureURL"),extension:r(S,"textureExtension","png"),normalMap:r(S,"normalMap"),xhrSettings:r(S,"textureXhrSettings")}),C=new h(c,{key:p,url:r(S,"atlasURL"),extension:r(S,"atlasExtension","json"),xhrSettings:r(S,"atlasXhrSettings")})}else T=new a(c,p,g,x),C=new h(c,p,m,y);T.linkFile?u.call(this,c,"atlasjson",p,[T,C,T.linkFile]):u.call(this,c,"atlasjson",p,[T,C])},addToCache:function(){if(this.isReadyToProcess()){var d=this.files[0],c=this.files[1],p=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(d.key,d.data,c.data,p),c.pendingDestroy(),this.complete=!0}}});o.register("atlas",function(d,c,p,g,m){var x;if(Array.isArray(d))for(var y=0;y<d.length;y++)x=new v(this,d[y]),this.addFile(x.files);else x=new v(this,d,c,p,g,m),this.addFile(x.files);return this}),e.exports=v},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(8),r=i(2),a=i(71),l=i(7),h=i(49),u=i(241),v=new n({Extends:h,initialize:function(c,p,g,m,x,y){var T,C;if(l(p)){var S=p;p=r(S,"key"),T=new a(c,{key:p,url:r(S,"textureURL"),extension:r(S,"textureExtension","png"),normalMap:r(S,"normalMap"),xhrSettings:r(S,"textureXhrSettings")}),C=new u(c,{key:p,url:r(S,"atlasURL"),extension:r(S,"atlasExtension","xml"),xhrSettings:r(S,"atlasXhrSettings")})}else T=new a(c,p,g,x),C=new u(c,p,m,y);T.linkFile?h.call(this,c,"atlasxml",p,[T,C,T.linkFile]):h.call(this,c,"atlasxml",p,[T,C])},addToCache:function(){if(this.isReadyToProcess()){var d=this.files[0],c=this.files[1],p=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlasXML(d.key,d.data,c.data,p),c.pendingDestroy(),this.complete=!0}}});o.register("atlasXML",function(d,c,p,g,m){var x;if(Array.isArray(d))for(var y=0;y<d.length;y++)x=new v(this,d[y]),this.addFile(x.files);else x=new v(this,d,c,p,g,m),this.addFile(x.files);return this}),e.exports=v},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(518),o=i(0),r=i(8),a=i(2),l=i(7),h=i(61),u=i(49),v=new o({Extends:u,initialize:function(c,p,g,m,x,y,T){if(l(p)){var C=p;p=a(C,"key"),g=a(C,"jsonURL"),m=a(C,"audioURL"),x=a(C,"audioConfig"),y=a(C,"audioXhrSettings"),T=a(C,"jsonXhrSettings")}var S;if(!m)S=new h(c,p,g,T),u.call(this,c,"audiosprite",p,[S]),this.config.resourceLoad=!0,this.config.audioConfig=x,this.config.audioXhrSettings=y;else{var E=n.create(c,p,m,x,y);E&&(S=new h(c,p,g,T),u.call(this,c,"audiosprite",p,[E,S]),this.config.resourceLoad=!1)}},onFileComplete:function(d){var c=this.files.indexOf(d);if(c!==-1&&(this.pending--,this.config.resourceLoad&&d.type==="json"&&d.data.hasOwnProperty("resources"))){var p=d.data.resources,g=a(this.config,"audioConfig"),m=a(this.config,"audioXhrSettings"),x=n.create(this.loader,d.key,p,g,m);x&&(this.addToMultiFile(x),this.loader.addFile(x))}},addToCache:function(){if(this.isReadyToProcess()){var d=this.files[0],c=this.files[1];d.addToCache(),c.addToCache(),this.complete=!0}}});r.register("audioSprite",function(d,c,p,g,m,x){var y=this.systems.game,T=y.config.audio,C=y.device.audio;if(T&&T.noAudio||!C.webAudio&&!C.audioData)return this;var S;if(Array.isArray(d))for(var E=0;E<d.length;E++)S=new v(this,d[E]),S.files&&this.addFile(S.files);else S=new v(this,d,c,p,g,m,x),S.files&&this.addFile(S.files);return this})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(21),r=i(23),a=i(8),l=i(2),h=i(7),u=new n({Extends:r,initialize:function(d,c,p,g,m){var x="bin";if(h(c)){var y=c;c=l(y,"key"),p=l(y,"url"),g=l(y,"xhrSettings"),x=l(y,"extension",x),m=l(y,"dataType",m)}var T={type:"binary",cache:d.cacheManager.binary,extension:x,responseType:"arraybuffer",key:c,url:p,xhrSettings:g,config:{dataType:m}};r.call(this,d,T)},onProcess:function(){this.state=o.FILE_PROCESSING;var v=this.config.dataType;this.data=v?new v(this.xhrLoader.response):this.xhrLoader.response,this.onProcessComplete()}});a.register("binary",function(v,d,c,p){if(Array.isArray(v))for(var g=0;g<v.length;g++)this.addFile(new u(this,v[g]));else this.addFile(new u(this,v,d,p,c));return this}),e.exports=u},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(8),r=i(2),a=i(71),l=i(7),h=i(49),u=i(212),v=i(241),d=new n({Extends:h,initialize:function(p,g,m,x,y,T){var C,S;if(l(g)){var E=g;g=r(E,"key"),C=new a(p,{key:g,url:r(E,"textureURL"),extension:r(E,"textureExtension","png"),normalMap:r(E,"normalMap"),xhrSettings:r(E,"textureXhrSettings")}),S=new v(p,{key:g,url:r(E,"fontDataURL"),extension:r(E,"fontDataExtension","xml"),xhrSettings:r(E,"fontDataXhrSettings")})}else C=new a(p,g,m,y),S=new v(p,g,x,T);C.linkFile?h.call(this,p,"bitmapfont",g,[C,S,C.linkFile]):h.call(this,p,"bitmapfont",g,[C,S])},addToCache:function(){if(this.isReadyToProcess()){var c=this.files[0],p=this.files[1];c.addToCache(),p.pendingDestroy();var g=c.cache.get(c.key),m=u(p.data,c.cache.getFrame(c.key),0,0,g);this.loader.cacheManager.bitmapFont.add(c.key,{data:m,texture:c.key,frame:null}),this.complete=!0}}});o.register("bitmapFont",function(c,p,g,m,x){var y;if(Array.isArray(c))for(var T=0;T<c.length;T++)y=new d(this,c[T]),this.addFile(y.files);else y=new d(this,c,p,g,m,x),this.addFile(y.files);return this}),e.exports=d},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(21),r=i(23),a=i(8),l=i(2),h=i(7),u=new n({Extends:r,initialize:function(d,c,p,g){var m="css";if(h(c)){var x=c;c=l(x,"key"),p=l(x,"url"),g=l(x,"xhrSettings"),m=l(x,"extension",m)}var y={type:"script",cache:!1,extension:m,responseType:"text",key:c,url:p,xhrSettings:g};r.call(this,d,y)},onProcess:function(){this.state=o.FILE_PROCESSING,this.data=document.createElement("style"),this.data.defer=!1,this.data.innerHTML=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});a.register("css",function(v,d,c){if(Array.isArray(v))for(var p=0;p<v.length;p++)this.addFile(new u(this,v[p]));else this.addFile(new u(this,v,d,c));return this}),e.exports=u},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(21),r=i(23),a=i(8),l=i(2),h=i(7),u=i(396),v=new n({Extends:r,initialize:function(c,p,g,m,x){var y="glsl";if(h(p)){var T=p;p=l(T,"key"),g=l(T,"url"),m=l(T,"shaderType","fragment"),x=l(T,"xhrSettings"),y=l(T,"extension",y)}else m===void 0&&(m="fragment");var C={type:"glsl",cache:c.cacheManager.shader,extension:y,responseType:"text",key:p,url:g,config:{shaderType:m},xhrSettings:x};r.call(this,c,C)},onProcess:function(){this.state=o.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var d=this.data.split(`
`),c=this.extractBlock(d,0);if(c)for(;c;){var p=this.getShaderName(c.header),g=this.getShaderType(c.header),m=this.getShaderUniforms(c.header),x=c.shader;if(this.cache.has(p)){var y=this.cache.get(p);g==="fragment"?y.fragmentSrc=x:y.vertexSrc=x,y.uniforms||(y.uniforms=m)}else g==="fragment"?this.cache.add(p,new u(p,x,"",m)):this.cache.add(p,new u(p,"",x,m));c=this.extractBlock(d,c.offset)}else this.config.shaderType==="fragment"?this.cache.add(this.key,new u(this.key,this.data)):this.cache.add(this.key,new u(this.key,"",this.data));this.pendingDestroy()},getShaderName:function(d){for(var c=0;c<d.length;c++){var p=d[c].trim();if(p.substring(0,5)==="name:")return p.substring(5).trim()}return this.key},getShaderType:function(d){for(var c=0;c<d.length;c++){var p=d[c].trim();if(p.substring(0,5)==="type:")return p.substring(5).trim()}return this.config.shaderType},getShaderUniforms:function(d){for(var c={},p=0;p<d.length;p++){var g=d[p].trim();if(g.substring(0,8)==="uniform."){var m=g.indexOf(":");if(m){var x=g.substring(8,m);try{c[x]=JSON.parse(g.substring(m+1))}catch{console.warn("Invalid uniform JSON: "+x)}}}}return c},extractBlock:function(d,c){for(var p=-1,g=-1,m=-1,x=!1,y=!1,T=[],C=[],S=c;S<d.length;S++){var E=d[S].trim();if(E==="---")if(p===-1)p=S,x=!0;else if(x)g=S,x=!1,y=!0;else{y=!1;break}else x?T.push(E):y&&(C.push(E),m=S)}return!x&&g!==-1?{header:T,shader:C.join(`
`),offset:m}:null}});a.register("glsl",function(d,c,p,g){if(Array.isArray(d))for(var m=0;m<d.length;m++)this.addFile(new v(this,d[m]));else this.addFile(new v(this,d,c,p,g));return this}),e.exports=v},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(21),r=i(23),a=i(8),l=i(2),h=i(7),u=new n({Extends:r,initialize:function(d,c,p,g){var m="html";if(h(c)){var x=c;c=l(x,"key"),p=l(x,"url"),g=l(x,"xhrSettings"),m=l(x,"extension",m)}var y={type:"text",cache:d.cacheManager.html,extension:m,responseType:"text",key:c,url:p,xhrSettings:g};r.call(this,d,y)},onProcess:function(){this.state=o.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});a.register("html",function(v,d,c){if(Array.isArray(v))for(var p=0;p<v.length;p++)this.addFile(new u(this,v[p]));else this.addFile(new u(this,v,d,c));return this}),e.exports=u},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(21),r=i(23),a=i(8),l=i(2),h=i(7),u=new n({Extends:r,initialize:function(d,c,p,g,m,x){g===void 0&&(g=512),m===void 0&&(m=512);var y="html";if(h(c)){var T=c;c=l(T,"key"),p=l(T,"url"),x=l(T,"xhrSettings"),y=l(T,"extension",y),g=l(T,"width",g),m=l(T,"height",m)}var C={type:"html",cache:d.textureManager,extension:y,responseType:"text",key:c,url:p,xhrSettings:x,config:{width:g,height:m}};r.call(this,d,C)},onProcess:function(){this.state=o.FILE_PROCESSING;var v=this.config.width,d=this.config.height,c=[];c.push('<svg width="'+v+'px" height="'+d+'px" viewBox="0 0 '+v+" "+d+'" xmlns="http://www.w3.org/2000/svg">'),c.push('<foreignObject width="100%" height="100%">'),c.push('<body xmlns="http://www.w3.org/1999/xhtml">'),c.push(this.xhrLoader.responseText),c.push("</body>"),c.push("</foreignObject>"),c.push("</svg>");var p=[c.join(`
`)],g=this;try{var m=new window.Blob(p,{type:"image/svg+xml;charset=utf-8"})}catch{g.state=o.FILE_ERRORED,g.onProcessComplete();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin,this.data.onload=function(){r.revokeObjectURL(g.data),g.onProcessComplete()},this.data.onerror=function(){r.revokeObjectURL(g.data),g.onProcessError()},r.createObjectURL(this.data,m,"image/svg+xml")},addToCache:function(){var v=this.cache.addImage(this.key,this.data);this.pendingDestroy(v)}});a.register("htmlTexture",function(v,d,c,p,g){if(Array.isArray(v))for(var m=0;m<v.length;m++)this.addFile(new u(this,v[m]));else this.addFile(new u(this,v,d,c,p,g));return this}),e.exports=u},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(8),r=i(2),a=i(71),l=i(7),h=i(61),u=i(49),v=new n({Extends:u,initialize:function(c,p,g,m,x,y,T){if(l(p)){var C=p;p=r(C,"key"),r(C,"url",!1)?g=r(C,"url"):g=r(C,"atlasURL"),y=r(C,"xhrSettings"),m=r(C,"path"),x=r(C,"baseURL"),T=r(C,"textureXhrSettings")}var S=new h(c,p,g,y);u.call(this,c,"multiatlas",p,[S]),this.config.path=m,this.config.baseURL=x,this.config.textureXhrSettings=T},onFileComplete:function(d){var c=this.files.indexOf(d);if(c!==-1&&(this.pending--,d.type==="json"&&d.data.hasOwnProperty("textures"))){var p=d.data.textures,g=this.config,m=this.loader,x=m.baseURL,y=m.path,T=m.prefix,C=r(g,"baseURL",this.baseURL),S=r(g,"path",this.path),E=r(g,"prefix",this.prefix),M=r(g,"textureXhrSettings");m.setBaseURL(C),m.setPath(S),m.setPrefix(E);for(var O=0;O<p.length;O++){var L=p[O].image,R="MA"+this.multiKeyIndex+"_"+L,w=new a(m,R,L,M);if(this.addToMultiFile(w),m.addFile(w),p[O].normalMap){var D=new a(m,R,p[O].normalMap,M);D.type="normalMap",w.setLink(D),this.addToMultiFile(D),m.addFile(D)}}m.setBaseURL(x),m.setPath(y),m.setPrefix(T)}},addToCache:function(){if(this.isReadyToProcess()){for(var d=this.files[0],c=[],p=[],g=[],m=1;m<this.files.length;m++){var x=this.files[m];if(x.type!=="normalMap")for(var y=x.key.indexOf("_"),T=x.key.substr(y+1),C=x.data,S=0;S<d.data.textures.length;S++){var E=d.data.textures[S];if(E.image===T){p.push(C),c.push(E),x.linkFile&&g.push(x.linkFile.data);break}}}for(g.length===0&&(g=void 0),this.loader.textureManager.addAtlasJSONArray(this.key,p,c,g),this.complete=!0,m=0;m<this.files.length;m++)this.files[m].pendingDestroy()}}});o.register("multiatlas",function(d,c,p,g,m){var x;if(Array.isArray(d))for(var y=0;y<d.length;y++)x=new v(this,d[y]),this.addFile(x.files);else x=new v(this,d,c,p,g,m),this.addFile(x.files);return this}),e.exports=v},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(8),r=i(2),a=i(7),l=i(49),h=i(520),u=new n({Extends:l,initialize:function(d,c,p,g){var m="js",x=[];if(a(c)){var y=c;c=r(y,"key"),p=r(y,"url"),g=r(y,"xhrSettings"),m=r(y,"extension",m)}Array.isArray(p)||(p=[p]);for(var T=0;T<p.length;T++){var C=new h(d,{key:c+"_"+T.toString(),url:p[T],extension:m,xhrSettings:g});C.onProcess=function(){this.onProcessComplete()},x.push(C)}l.call(this,d,"scripts",c,x)},addToCache:function(){if(this.isReadyToProcess()){for(var v=0;v<this.files.length;v++){var d=this.files[v];d.data=document.createElement("script"),d.data.language="javascript",d.data.type="text/javascript",d.data.defer=!1,d.data.text=d.xhrLoader.responseText,document.head.appendChild(d.data)}this.complete=!0}}});o.register("scripts",function(v,d,c){var p;if(Array.isArray(v))for(var g=0;g<v.length;g++)p=new u(this,v[g]),this.addFile(p.files);else p=new u(this,v,d,c),this.addFile(p.files);return this}),e.exports=u},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(8),r=i(2),a=i(7),l=i(49),h=i(498),u=i(499),v=i(242),d=new n({Extends:l,initialize:function(p,g,m,x,y,T){var C,S,E=p.cacheManager.obj;if(a(g)){var M=g;g=r(M,"key"),C=new v(p,{key:g,type:"obj",cache:E,url:r(M,"url"),extension:r(M,"extension","obj"),xhrSettings:r(M,"xhrSettings"),config:{flipUV:r(M,"flipUV",y)}}),x=r(M,"matURL"),x&&(S=new v(p,{key:g,type:"mat",cache:E,url:x,extension:r(M,"matExtension","mat"),xhrSettings:r(M,"xhrSettings")}))}else C=new v(p,{key:g,url:m,type:"obj",cache:E,extension:"obj",xhrSettings:T,config:{flipUV:y}}),x&&(S=new v(p,{key:g,url:x,type:"mat",cache:E,extension:"mat",xhrSettings:T}));l.call(this,p,"obj",g,[C,S])},addToCache:function(){if(this.isReadyToProcess()){var c=this.files[0],p=this.files[1],g=h(c.data,c.config.flipUV);p&&(g.materials=u(p.data)),c.cache.add(c.key,g),this.complete=!0}}});o.register("obj",function(c,p,g,m,x){var y;if(Array.isArray(c))for(var T=0;T<c.length;T++)y=new d(this,c[T]),this.addFile(y.files);else y=new d(this,c,p,g,m,x),this.addFile(y.files);return this}),e.exports=d},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(21),r=i(8),a=i(61),l=new n({Extends:a,initialize:function(u,v,d,c,p){a.call(this,u,v,d,c,p),this.type="packfile"},onProcess:function(){this.state!==o.FILE_POPULATED&&(this.state=o.FILE_PROCESSING,this.data=JSON.parse(this.xhrLoader.responseText)),this.loader.addPack(this.data,this.config),this.onProcessComplete()}});r.register("pack",function(h,u,v,d){if(Array.isArray(h))for(var c=0;c<h.length;c++)this.addFile(new l(this,h[c]));else this.addFile(new l(this,h,u,d,v));return this}),e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(21),r=i(23),a=i(8),l=i(2),h=i(7),u=new n({Extends:r,initialize:function(d,c,p,g,m,x){var y="js";if(h(c)){var T=c;c=l(T,"key"),p=l(T,"url"),x=l(T,"xhrSettings"),y=l(T,"extension",y),g=l(T,"start"),m=l(T,"mapping")}var C={type:"plugin",cache:!1,extension:y,responseType:"text",key:c,url:p,xhrSettings:x,config:{start:g,mapping:m}};r.call(this,d,C),typeof p=="function"&&(this.data=p,this.state=o.FILE_POPULATED)},onProcess:function(){var v=this.loader.systems.plugins,d=this.config,c=l(d,"start",!1),p=l(d,"mapping",null);if(this.state===o.FILE_POPULATED)v.install(this.key,this.data,c,p);else{this.state=o.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data);var g=v.install(this.key,window[this.key],c,p);(c||p)&&(this.loader.systems[p]=g,this.loader.scene[p]=g)}this.onProcessComplete()}});a.register("plugin",function(v,d,c,p,g){if(Array.isArray(v))for(var m=0;m<v.length;m++)this.addFile(new u(this,v[m]));else this.addFile(new u(this,v,d,c,p,g));return this}),e.exports=u},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(21),r=i(23),a=i(8),l=i(2),h=i(7),u=new n({Extends:r,initialize:function(d,c,p,g){var m="js";if(h(c)){var x=c;c=l(x,"key"),p=l(x,"url"),g=l(x,"xhrSettings"),m=l(x,"extension",m)}var y={type:"text",extension:m,responseType:"text",key:c,url:p,xhrSettings:g};r.call(this,d,y)},onProcess:function(){this.state=o.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var v=this.data.concat(`(function(){
return new `+this.key+`();
}).call(this);`),d=eval;this.loader.sceneManager.add(this.key,d(v)),this.complete=!0}});a.register("sceneFile",function(v,d,c){if(Array.isArray(v))for(var p=0;p<v.length;p++)this.addFile(new u(this,v[p]));else this.addFile(new u(this,v,d,c));return this}),e.exports=u},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(21),r=i(23),a=i(8),l=i(2),h=i(7),u=new n({Extends:r,initialize:function(d,c,p,g,m,x){var y="js";if(h(c)){var T=c;c=l(T,"key"),p=l(T,"url"),x=l(T,"xhrSettings"),y=l(T,"extension",y),g=l(T,"systemKey"),m=l(T,"sceneKey")}var C={type:"scenePlugin",cache:!1,extension:y,responseType:"text",key:c,url:p,xhrSettings:x,config:{systemKey:g,sceneKey:m}};r.call(this,d,C),typeof p=="function"&&(this.data=p,this.state=o.FILE_POPULATED)},onProcess:function(){var v=this.loader.systems.plugins,d=this.config,c=this.key,p=l(d,"systemKey",c),g=l(d,"sceneKey",c);this.state===o.FILE_POPULATED?v.installScenePlugin(p,this.data,g,this.loader.scene,!0):(this.state=o.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),v.installScenePlugin(p,window[this.key],g,this.loader.scene,!0)),this.onProcessComplete()}});a.register("scenePlugin",function(v,d,c,p,g){if(Array.isArray(v))for(var m=0;m<v.length;m++)this.addFile(new u(this,v[m]));else this.addFile(new u(this,v,d,c,p,g));return this}),e.exports=u},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(8),r=i(71),a=new n({Extends:r,initialize:function(h,u,v,d,c){r.call(this,h,u,v,c,d),this.type="spritesheet"},addToCache:function(){var l=this.cache.addSpriteSheet(this.key,this.data,this.config);this.pendingDestroy(l)}});o.register("spritesheet",function(l,h,u,v){if(Array.isArray(l))for(var d=0;d<l.length;d++)this.addFile(new a(this,l[d]));else this.addFile(new a(this,l,h,u,v));return this}),e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(21),r=i(23),a=i(8),l=i(2),h=i(7),u=new n({Extends:r,initialize:function(d,c,p,g,m){var x="svg";if(h(c)){var y=c;c=l(y,"key"),p=l(y,"url"),g=l(y,"svgConfig",{}),m=l(y,"xhrSettings"),x=l(y,"extension",x)}var T={type:"svg",cache:d.textureManager,extension:x,responseType:"text",key:c,url:p,xhrSettings:m,config:{width:l(g,"width"),height:l(g,"height"),scale:l(g,"scale")}};r.call(this,d,T)},onProcess:function(){this.state=o.FILE_PROCESSING;var v=this.xhrLoader.responseText,d=[v],c=this.config.width,p=this.config.height,g=this.config.scale;t:if(c&&p||g){var m=null,x=new DOMParser;m=x.parseFromString(v,"text/xml");var y=m.getElementsByTagName("svg")[0],T=y.hasAttribute("viewBox"),C=parseFloat(y.getAttribute("width")),S=parseFloat(y.getAttribute("height"));if(!T&&C&&S)y.setAttribute("viewBox","0  0 "+C+" "+S);else if(T&&!C&&!S){var E=y.getAttribute("viewBox").split(/\s+|,/);C=E[2],S=E[3]}if(g)if(C&&S)c=C*g,p=S*g;else break t;y.setAttribute("width",c.toString()+"px"),y.setAttribute("height",p.toString()+"px"),d=[new XMLSerializer().serializeToString(y)]}try{var M=new window.Blob(d,{type:"image/svg+xml;charset=utf-8"})}catch{this.onProcessError();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin;var O=this,L=!1;this.data.onload=function(){L||r.revokeObjectURL(O.data),O.onProcessComplete()},this.data.onerror=function(){L?O.onProcessError():(L=!0,r.revokeObjectURL(O.data),O.data.src="data:image/svg+xml,"+encodeURIComponent(d.join("")))},r.createObjectURL(this.data,M,"image/svg+xml")},addToCache:function(){var v=this.cache.addImage(this.key,this.data);this.pendingDestroy(v)}});a.register("svg",function(v,d,c,p){if(Array.isArray(v))for(var g=0;g<v.length;g++)this.addFile(new u(this,v[g]));else this.addFile(new u(this,v,d,c,p));return this}),e.exports=u},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(21),r=i(23),a=i(8),l=i(2),h=i(7),u=i(40),v=new n({Extends:r,initialize:function(c,p,g,m){var x="csv";if(h(p)){var y=p;p=l(y,"key"),g=l(y,"url"),m=l(y,"xhrSettings"),x=l(y,"extension",x)}var T={type:"tilemapCSV",cache:c.cacheManager.tilemap,extension:x,responseType:"text",key:p,url:g,xhrSettings:m};r.call(this,c,T),this.tilemapFormat=u.CSV},onProcess:function(){this.state=o.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var d={format:this.tilemapFormat,data:this.data};this.cache.add(this.key,d),this.pendingDestroy(d)}});a.register("tilemapCSV",function(d,c,p){if(Array.isArray(d))for(var g=0;g<d.length;g++)this.addFile(new v(this,d[g]));else this.addFile(new v(this,d,c,p));return this}),e.exports=v},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(8),r=i(61),a=i(40),l=new n({Extends:r,initialize:function(u,v,d,c){r.call(this,u,v,d,c),this.type="tilemapJSON",this.cache=u.cacheManager.tilemap},addToCache:function(){var h={format:a.WELTMEISTER,data:this.data};this.cache.add(this.key,h),this.pendingDestroy(h)}});o.register("tilemapImpact",function(h,u,v){if(Array.isArray(h))for(var d=0;d<h.length;d++)this.addFile(new l(this,h[d]));else this.addFile(new l(this,h,u,v));return this}),e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(8),r=i(61),a=i(40),l=new n({Extends:r,initialize:function(u,v,d,c){r.call(this,u,v,d,c),this.type="tilemapJSON",this.cache=u.cacheManager.tilemap},addToCache:function(){var h={format:a.TILED_JSON,data:this.data};this.cache.add(this.key,h),this.pendingDestroy(h)}});o.register("tilemapTiledJSON",function(h,u,v){if(Array.isArray(h))for(var d=0;d<h.length;d++)this.addFile(new l(this,h[d]));else this.addFile(new l(this,h,u,v));return this}),e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(8),r=i(2),a=i(71),l=i(7),h=i(49),u=i(242),v=new n({Extends:h,initialize:function(c,p,g,m,x,y){var T,C;if(l(p)){var S=p;p=r(S,"key"),T=new a(c,{key:p,url:r(S,"textureURL"),extension:r(S,"textureExtension","png"),normalMap:r(S,"normalMap"),xhrSettings:r(S,"textureXhrSettings")}),C=new u(c,{key:p,url:r(S,"atlasURL"),extension:r(S,"atlasExtension","txt"),xhrSettings:r(S,"atlasXhrSettings")})}else T=new a(c,p,g,x),C=new u(c,p,m,y);T.linkFile?h.call(this,c,"unityatlas",p,[T,C,T.linkFile]):h.call(this,c,"unityatlas",p,[T,C])},addToCache:function(){if(this.isReadyToProcess()){var d=this.files[0],c=this.files[1],p=this.files[2]?this.files[2].data:null;this.loader.textureManager.addUnityAtlas(d.key,d.data,c.data,p),c.pendingDestroy(),this.complete=!0}}});o.register("unityAtlas",function(d,c,p,g,m){var x;if(Array.isArray(d))for(var y=0;y<d.length;y++)x=new v(this,d[y]),this.addFile(x.files);else x=new v(this,d,c,p,g,m),this.addFile(x.files);return this}),e.exports=v},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(21),r=i(23),a=i(8),l=i(155),h=i(2),u=i(7),v=new n({Extends:r,initialize:function(c,p,g,m,x,y,T){m===void 0&&(m="loadeddata"),x===void 0&&(x=!1),y===void 0&&(y=!1),m!=="loadeddata"&&m!=="canplay"&&m!=="canplaythrough"&&(m="loadeddata");var C={type:"video",cache:c.cacheManager.video,extension:g.type,responseType:"blob",key:p,url:g.url,xhrSettings:T,config:{loadEvent:m,asBlob:x,noAudio:y}};this.onLoadCallback=this.onVideoLoadHandler.bind(this),this.onErrorCallback=this.onVideoErrorHandler.bind(this),r.call(this,c,C)},onProcess:function(){if(this.state=o.FILE_PROCESSING,!this.config.asBlob){this.onProcessComplete();return}var d=this.createVideoElement();this.data=d;var c=this;this.data.onloadeddata=function(){c.onProcessComplete()},this.data.onerror=function(){r.revokeObjectURL(c.data),c.onProcessError()},r.createObjectURL(d,this.xhrLoader.response,""),d.load()},createVideoElement:function(){var d=document.createElement("video");return d.controls=!1,d.crossOrigin=this.loader.crossOrigin,this.config.noAudio&&(d.muted=!0,d.defaultMuted=!0,d.setAttribute("autoplay","autoplay")),d.setAttribute("playsinline","playsinline"),d.setAttribute("preload","auto"),d},onVideoLoadHandler:function(d){var c=d.target;c.removeEventListener(this.config.loadEvent,this.onLoadCallback,!0),c.removeEventListener("error",this.onErrorCallback,!0),this.data=c,this.resetXHR(),this.loader.nextFile(this,!0)},onVideoErrorHandler:function(d){var c=d.target;c&&(c.removeEventListener(this.config.loadEvent,this.onLoadCallback,!0),c.removeEventListener("error",this.onErrorCallback,!0)),this.resetXHR(),this.loader.nextFile(this,!1)},load:function(){var d=this.config.loadEvent;if(this.config.asBlob)r.prototype.load.call(this);else{this.percentComplete=0;var c=this.createVideoElement();c.addEventListener(d,this.onLoadCallback,!0),c.addEventListener("error",this.onErrorCallback,!0),c.src=l(this,this.loader.baseURL),c.load()}}});v.create=function(d,c,p,g,m,x,y){var T=d.systems.game;u(c)&&(p=h(c,"url",[]),g=h(c,"loadEvent","loadeddata"),m=h(c,"asBlob",!1),x=h(c,"noAudio",!1),y=h(c,"xhrSettings"),c=h(c,"key"));var C=v.getVideoURL(T,p);if(C)return new v(d,c,C,g,m,x,y)},v.getVideoURL=function(d,c){Array.isArray(c)||(c=[c]);for(var p=0;p<c.length;p++){var g=h(c[p],"url",c[p]);if(g.indexOf("blob:")===0)return{url:g,type:""};var m;if(g.indexOf("data:")===0?m=g.split(",")[0].match(/\/(.*?);/):m=g.match(/\.([a-zA-Z0-9]+)($|\?)/),m=h(c[p],"type",m?m[1]:"").toLowerCase(),d.device.video[m])return{url:g,type:m}}return null},a.register("video",function(d,c,p,g,m,x){var y;if(Array.isArray(d))for(var T=0;T<d.length;T++)y=v.create(this,d[T]),y&&this.addFile(y);else y=v.create(this,d,c,p,g,m,x),y&&this.addFile(y);return this}),e.exports=v},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(21),r=i(149),a=i(9),l=i(95),h=i(8),u=i(2),v=i(24),d=i(20),c=i(156),p=new n({Extends:a,initialize:function(m){a.call(this);var x=m.sys.game.config,y=m.sys.settings.loader;this.scene=m,this.systems=m.sys,this.cacheManager=m.sys.cache,this.textureManager=m.sys.textures,this.sceneManager=m.sys.game.scene,h.install(this),this.prefix="",this.path="",this.baseURL="",this.setBaseURL(u(y,"baseURL",x.loaderBaseURL)),this.setPath(u(y,"path",x.loaderPath)),this.setPrefix(u(y,"prefix",x.loaderPrefix)),this.maxParallelDownloads=u(y,"maxParallelDownloads",x.loaderMaxParallelDownloads),this.xhr=c(u(y,"responseType",x.loaderResponseType),u(y,"async",x.loaderAsync),u(y,"user",x.loaderUser),u(y,"password",x.loaderPassword),u(y,"timeout",x.loaderTimeout),u(y,"withCredentials",x.loaderWithCredentials)),this.crossOrigin=u(y,"crossOrigin",x.loaderCrossOrigin),this.totalToLoad=0,this.progress=0,this.list=new r,this.inflight=new r,this.queue=new r,this._deleteQueue=new r,this.totalFailed=0,this.totalComplete=0,this.state=o.LOADER_IDLE,this.multiKeyIndex=0,m.sys.events.once(d.BOOT,this.boot,this),m.sys.events.on(d.START,this.pluginStart,this)},boot:function(){this.systems.events.once(d.DESTROY,this.destroy,this)},pluginStart:function(){this.systems.events.once(d.SHUTDOWN,this.shutdown,this)},setBaseURL:function(g){return g===void 0&&(g=""),g!==""&&g.substr(-1)!=="/"&&(g=g.concat("/")),this.baseURL=g,this},setPath:function(g){return g===void 0&&(g=""),g!==""&&g.substr(-1)!=="/"&&(g=g.concat("/")),this.path=g,this},setPrefix:function(g){return g===void 0&&(g=""),this.prefix=g,this},setCORS:function(g){return this.crossOrigin=g,this},addFile:function(g){Array.isArray(g)||(g=[g]);for(var m=0;m<g.length;m++){var x=g[m];this.keyExists(x)||(this.list.set(x),this.emit(l.ADD,x.key,x.type,this,x),this.isLoading()&&(this.totalToLoad++,this.updateProgress()))}},keyExists:function(g){var m=g.hasCacheConflict();return m||this.list.iterate(function(x){if(x.type===g.type&&x.key===g.key)return m=!0,!1}),!m&&this.isLoading()&&(this.inflight.iterate(function(x){if(x.type===g.type&&x.key===g.key)return m=!0,!1}),this.queue.iterate(function(x){if(x.type===g.type&&x.key===g.key)return m=!0,!1})),m},addPack:function(g,m){m&&g.hasOwnProperty(m)&&(g={packKey:g[m]});var x=0,y=this.baseURL,T=this.path,C=this.prefix;for(var S in g)if(!!Object.prototype.hasOwnProperty.call(g,S)){var E=g[S],M=u(E,"baseURL",y),O=u(E,"path",T),L=u(E,"prefix",C),R=u(E,"files",null),w=u(E,"defaultType","void");if(Array.isArray(R)){this.setBaseURL(M),this.setPath(O),this.setPrefix(L);for(var D=0;D<R.length;D++){var B=R[D],N=B.hasOwnProperty("type")?B.type:w;this[N]&&(this[N](B),x++)}}}return this.setBaseURL(y),this.setPath(T),this.setPrefix(C),x>0},isLoading:function(){return this.state===o.LOADER_LOADING||this.state===o.LOADER_PROCESSING},isReady:function(){return this.state===o.LOADER_IDLE||this.state===o.LOADER_COMPLETE},start:function(){!this.isReady()||(this.progress=0,this.totalFailed=0,this.totalComplete=0,this.totalToLoad=this.list.size,this.emit(l.START,this),this.list.size===0?this.loadComplete():(this.state=o.LOADER_LOADING,this.inflight.clear(),this.queue.clear(),this.updateProgress(),this.checkLoadQueue(),this.systems.events.on(d.UPDATE,this.update,this)))},updateProgress:function(){this.progress=1-(this.list.size+this.inflight.size)/this.totalToLoad,this.emit(l.PROGRESS,this.progress)},update:function(){this.state===o.LOADER_LOADING&&this.list.size>0&&this.inflight.size<this.maxParallelDownloads&&this.checkLoadQueue()},checkLoadQueue:function(){this.list.each(function(g){if((g.state===o.FILE_POPULATED||g.state===o.FILE_PENDING&&this.inflight.size<this.maxParallelDownloads)&&(this.inflight.set(g),this.list.delete(g),g.crossOrigin||(g.crossOrigin=this.crossOrigin),g.load()),this.inflight.size===this.maxParallelDownloads)return!1},this)},nextFile:function(g,m){!this.inflight||(this.inflight.delete(g),this.updateProgress(),m?(this.totalComplete++,this.queue.set(g),this.emit(l.FILE_LOAD,g),g.onProcess()):(this.totalFailed++,this._deleteQueue.set(g),this.emit(l.FILE_LOAD_ERROR,g),this.fileProcessComplete(g)))},fileProcessComplete:function(g){!this.scene||!this.systems||!this.systems.game||this.systems.game.pendingDestroy||(g.state===o.FILE_ERRORED?g.multiFile&&g.multiFile.onFileFailed(g):g.state===o.FILE_COMPLETE&&(g.multiFile?g.multiFile.isReadyToProcess()&&g.multiFile.addToCache():g.addToCache()),this.queue.delete(g),this.list.size===0&&this.inflight.size===0&&this.queue.size===0&&this.loadComplete())},loadComplete:function(){this.emit(l.POST_PROCESS,this),this.list.clear(),this.inflight.clear(),this.queue.clear(),this.progress=1,this.state=o.LOADER_COMPLETE,this.systems.events.off(d.UPDATE,this.update,this),this._deleteQueue.iterateLocal("destroy"),this._deleteQueue.clear(),this.emit(l.COMPLETE,this,this.totalComplete,this.totalFailed)},flagForRemoval:function(g){this._deleteQueue.set(g)},saveJSON:function(g,m){return this.save(JSON.stringify(g),m)},save:function(g,m,x){m===void 0&&(m="file.json"),x===void 0&&(x="application/json");var y=new Blob([g],{type:x}),T=URL.createObjectURL(y),C=document.createElement("a");return C.download=m,C.textContent="Download "+m,C.href=T,C.click(),this},reset:function(){this.list.clear(),this.inflight.clear(),this.queue.clear();var g=this.systems.game.config,m=this.systems.settings.loader;this.setBaseURL(u(m,"baseURL",g.loaderBaseURL)),this.setPath(u(m,"path",g.loaderPath)),this.setPrefix(u(m,"prefix",g.loaderPrefix)),this.state=o.LOADER_IDLE},shutdown:function(){this.reset(),this.state=o.LOADER_SHUTDOWN,this.systems.events.off(d.UPDATE,this.update,this),this.systems.events.off(d.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.state=o.LOADER_DESTROYED,this.systems.events.off(d.UPDATE,this.update,this),this.systems.events.off(d.START,this.pluginStart,this),this.list=null,this.inflight=null,this.queue=null,this.scene=null,this.systems=null,this.textureManager=null,this.cacheManager=null,this.sceneManager=null}});v.register("Loader",p,"load"),e.exports=p},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(62),o=i(17),r={ArcadePhysics:i(1367),Body:i(527),Collider:i(528),Components:i(243),Events:i(245),Factory:i(521),GetOverlapX:i(246),GetOverlapY:i(247),SeparateX:i(537),SeparateY:i(538),Group:i(524),Image:i(522),Sprite:i(157),StaticBody:i(539),StaticGroup:i(525),Tilemap:i(1391),World:i(526)};r=o(!1,r,n),e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(36),r=i(50),a=i(353),l=i(521),h=i(2),u=i(127),v=i(523),d=i(244),c=i(24),p=i(20),g=i(3),m=i(526),x=new n({initialize:function(T){this.scene=T,this.systems=T.sys,this.config=this.getConfig(),this.world,this.add,T.sys.events.once(p.BOOT,this.boot,this),T.sys.events.on(p.START,this.start,this)},boot:function(){this.world=new m(this.scene,this.config),this.add=new l(this.world),this.systems.events.once(p.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new m(this.scene,this.config),this.add=new l(this.world));var y=this.systems.events;h(this.config,"customUpdate",!1)||y.on(p.UPDATE,this.world.update,this.world),y.on(p.POST_UPDATE,this.world.postUpdate,this.world),y.once(p.SHUTDOWN,this.shutdown,this)},enableUpdate:function(){this.systems.events.on(p.UPDATE,this.world.update,this.world)},disableUpdate:function(){this.systems.events.off(p.UPDATE,this.world.update,this.world)},getConfig:function(){var y=this.systems.game.config.physics,T=this.systems.settings.physics,C=u(h(T,"arcade",{}),h(y,"arcade",{}));return C},overlap:function(y,T,C,S,E){return C===void 0&&(C=null),S===void 0&&(S=null),E===void 0&&(E=C),this.world.collideObjects(y,T,C,S,E,!0)},collide:function(y,T,C,S,E){return C===void 0&&(C=null),S===void 0&&(S=null),E===void 0&&(E=C),this.world.collideObjects(y,T,C,S,E,!1)},collideTiles:function(y,T,C,S,E){return this.world.collideTiles(y,T,C,S,E)},overlapTiles:function(y,T,C,S,E){return this.world.overlapTiles(y,T,C,S,E)},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},accelerateTo:function(y,T,C,S,E,M){S===void 0&&(S=60);var O=Math.atan2(C-y.y,T-y.x);return y.body.acceleration.setToPolar(O,S),E!==void 0&&M!==void 0&&y.body.maxVelocity.set(E,M),O},accelerateToObject:function(y,T,C,S,E){return this.accelerateTo(y,T.x,T.y,C,S,E)},closest:function(y,T){T||(T=this.world.bodies.entries);for(var C=Number.MAX_VALUE,S=null,E=y.x,M=y.y,O=T.length,L=0;L<O;L++){var R=T[L],w=R.body||R;if(!(y===R||y===w||y===w.gameObject||y===w.center)){var D=a(E,M,w.center.x,w.center.y);D<C&&(S=R,C=D)}}return S},furthest:function(y,T){T||(T=this.world.bodies.entries);for(var C=-1,S=null,E=y.x,M=y.y,O=T.length,L=0;L<O;L++){var R=T[L],w=R.body||R;if(!(y===R||y===w||y===w.gameObject||y===w.center)){var D=a(E,M,w.center.x,w.center.y);D>C&&(S=R,C=D)}}return S},moveTo:function(y,T,C,S,E){S===void 0&&(S=60),E===void 0&&(E=0);var M=Math.atan2(C-y.y,T-y.x);return E>0&&(S=r(y.x,y.y,T,C)/(E/1e3)),y.body.velocity.setToPolar(M,S),M},moveToObject:function(y,T,C,S){return this.moveTo(y,T.x,T.y,C,S)},velocityFromAngle:function(y,T,C){return T===void 0&&(T=60),C===void 0&&(C=new g),C.setToPolar(o(y),T)},velocityFromRotation:function(y,T,C){return T===void 0&&(T=60),C===void 0&&(C=new g),C.setToPolar(y,T)},overlapRect:function(y,T,C,S,E,M){return d(this.world,y,T,C,S,E,M)},overlapCirc:function(y,T,C,S,E){return v(this.world,y,T,C,S,E)},shutdown:function(){if(!!this.world){var y=this.systems.events;y.off(p.UPDATE,this.world.update,this.world),y.off(p.POST_UPDATE,this.world.postUpdate,this.world),y.off(p.SHUTDOWN,this.shutdown,this),this.add.destroy(),this.world.destroy(),this.add=null,this.world=null}},destroy:function(){this.shutdown(),this.scene.sys.events.off(p.START,this.start,this),this.scene=null,this.systems=null}});c.register("ArcadePhysics",x,"arcadePhysics"),e.exports=x},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setAcceleration:function(n,o){return this.body.acceleration.set(n,o),this},setAccelerationX:function(n){return this.body.acceleration.x=n,this},setAccelerationY:function(n){return this.body.acceleration.y=n,this}};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setAngularVelocity:function(n){return this.body.angularVelocity=n,this},setAngularAcceleration:function(n){return this.body.angularAcceleration=n,this},setAngularDrag:function(n){return this.body.angularDrag=n,this}};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setBounce:function(n,o){return this.body.bounce.set(n,o),this},setBounceX:function(n){return this.body.bounce.x=n,this},setBounceY:function(n){return this.body.bounce.y=n,this},setCollideWorldBounds:function(n,o,r){return this.body.setCollideWorldBounds(n,o,r),this}};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setDebug:function(n,o,r){return this.debugShowBody=n,this.debugShowVelocity=o,this.debugBodyColor=r,this},setDebugBodyColor:function(n){return this.body.debugBodyColor=n,this},debugShowBody:{get:function(){return this.body.debugShowBody},set:function(n){this.body.debugShowBody=n}},debugShowVelocity:{get:function(){return this.body.debugShowVelocity},set:function(n){this.body.debugShowVelocity=n}},debugBodyColor:{get:function(){return this.body.debugBodyColor},set:function(n){this.body.debugBodyColor=n}}};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setDrag:function(n,o){return this.body.drag.set(n,o),this},setDragX:function(n){return this.body.drag.x=n,this},setDragY:function(n){return this.body.drag.y=n,this},setDamping:function(n){return this.body.useDamping=n,this}};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={enableBody:function(n,o,r,a,l){return n&&this.body.reset(o,r),a&&(this.body.gameObject.active=!0),l&&(this.body.gameObject.visible=!0),this.body.enable=!0,this},disableBody:function(n,o){return n===void 0&&(n=!1),o===void 0&&(o=!1),this.body.stop(),this.body.enable=!1,n&&(this.body.gameObject.active=!1),o&&(this.body.gameObject.visible=!1),this},refreshBody:function(){return this.body.updateFromGameObject(),this}};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setFriction:function(n,o){return this.body.friction.set(n,o),this},setFrictionX:function(n){return this.body.friction.x=n,this},setFrictionY:function(n){return this.body.friction.y=n,this}};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setGravity:function(n,o){return this.body.gravity.set(n,o),this},setGravityX:function(n){return this.body.gravity.x=n,this},setGravityY:function(n){return this.body.gravity.y=n,this}};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setImmovable:function(n){return n===void 0&&(n=!0),this.body.immovable=n,this}};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setMass:function(n){return this.body.mass=n,this}};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setPushable:function(n){return n===void 0&&(n=!0),this.body.pushable=n,this}};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setOffset:function(n,o){return this.body.setOffset(n,o),this},setSize:function(n,o,r){return this.body.setSize(n,o,r),this},setBodySize:function(n,o,r){return this.body.setSize(n,o,r),this},setCircle:function(n,o,r){return this.body.setCircle(n,o,r),this}};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setVelocity:function(n,o){return this.body.setVelocity(n,o),this},setVelocityX:function(n){return this.body.setVelocityX(n),this},setVelocityY:function(n){return this.body.setVelocityY(n),this},setMaxVelocity:function(n,o){return this.body.maxVelocity.set(n,o),this}};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="collide"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="overlap"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pause"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="resume"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="tilecollide"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="tileoverlap"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="worldbounds"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="worldstep"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i,n,o,r,a,l,h,u,v,d,c,p,g,m,x,y,T,C=function(R,w,D){i=R,n=w;var B=i.velocity.x,N=n.velocity.x;return o=i.pushable,v=i._dx<0,d=i._dx>0,c=i._dx===0,x=Math.abs(i.right-n.x)<=Math.abs(n.right-i.x),h=N-B*i.bounce.x,r=n.pushable,p=n._dx<0,g=n._dx>0,m=n._dx===0,y=!x,u=B-N*n.bounce.x,T=Math.abs(D),S()},S=function(){return d&&x&&n.blocked.right?(i.processX(-T,h,!1,!0),1):v&&y&&n.blocked.left?(i.processX(T,h,!0),1):g&&y&&i.blocked.right?(n.processX(-T,u,!1,!0),2):p&&x&&i.blocked.left?(n.processX(T,u,!0),2):0},E=function(){var R=i.velocity.x,w=n.velocity.x,D=Math.sqrt(w*w*n.mass/i.mass)*(w>0?1:-1),B=Math.sqrt(R*R*i.mass/n.mass)*(R>0?1:-1),N=(D+B)*.5;return D-=N,B-=N,a=N+D*i.bounce.x,l=N+B*n.bounce.x,v&&y?M(0):p&&x?M(1):d&&x?M(2):g&&y?M(3):!1},M=function(R){if(o&&r)T*=.5,R===0||R===3?(i.processX(T,a),n.processX(-T,l)):(i.processX(-T,a),n.processX(T,l));else if(o&&!r)R===0||R===3?i.processX(T,h,!0):i.processX(-T,h,!1,!0);else if(!o&&r)R===0||R===3?n.processX(-T,u,!1,!0):n.processX(T,u,!0);else{var w=T*.5;R===0?m?(i.processX(T,0,!0),n.processX(0,null,!1,!0)):g?(i.processX(w,0,!0),n.processX(-w,0,!1,!0)):(i.processX(w,n.velocity.x,!0),n.processX(-w,null,!1,!0)):R===1?c?(i.processX(0,null,!1,!0),n.processX(T,0,!0)):d?(i.processX(-w,0,!1,!0),n.processX(w,0,!0)):(i.processX(-w,null,!1,!0),n.processX(w,i.velocity.x,!0)):R===2?m?(i.processX(-T,0,!1,!0),n.processX(0,null,!0)):p?(i.processX(-w,0,!1,!0),n.processX(w,0,!0)):(i.processX(-w,n.velocity.x,!1,!0),n.processX(w,null,!0)):R===3&&(c?(i.processX(0,null,!0),n.processX(-T,0,!1,!0)):v?(i.processX(w,0,!0),n.processX(-w,0,!1,!0)):(i.processX(w,n.velocity.y,!0),n.processX(-w,null,!1,!0)))}return!0},O=function(R){R===1?n.velocity.x=0:x?n.processX(T,u,!0):n.processX(-T,u,!1,!0),i.moves&&(n.y+=(i.y-i.prev.y)*i.friction.y,n._dy=n.y-n.prev.y)},L=function(R){R===2?i.velocity.x=0:y?i.processX(T,h,!0):i.processX(-T,h,!1,!0),n.moves&&(i.y+=(n.y-n.prev.y)*n.friction.y,i._dy=i.y-i.prev.y)};e.exports={BlockCheck:S,Check:E,Set:C,Run:M,RunImmovableBody1:O,RunImmovableBody2:L}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i,n,o,r,a,l,h,u,v,d,c,p,g,m,x,y,T,C=function(R,w,D){i=R,n=w;var B=i.velocity.y,N=n.velocity.y;return o=i.pushable,v=i._dy<0,d=i._dy>0,c=i._dy===0,x=Math.abs(i.bottom-n.y)<=Math.abs(n.bottom-i.y),h=N-B*i.bounce.y,r=n.pushable,p=n._dy<0,g=n._dy>0,m=n._dy===0,y=!x,u=B-N*n.bounce.y,T=Math.abs(D),S()},S=function(){return d&&x&&n.blocked.down?(i.processY(-T,h,!1,!0),1):v&&y&&n.blocked.up?(i.processY(T,h,!0),1):g&&y&&i.blocked.down?(n.processY(-T,u,!1,!0),2):p&&x&&i.blocked.up?(n.processY(T,u,!0),2):0},E=function(){var R=i.velocity.y,w=n.velocity.y,D=Math.sqrt(w*w*n.mass/i.mass)*(w>0?1:-1),B=Math.sqrt(R*R*i.mass/n.mass)*(R>0?1:-1),N=(D+B)*.5;return D-=N,B-=N,a=N+D*i.bounce.y,l=N+B*n.bounce.y,v&&y?M(0):p&&x?M(1):d&&x?M(2):g&&y?M(3):!1},M=function(R){if(o&&r)T*=.5,R===0||R===3?(i.processY(T,a),n.processY(-T,l)):(i.processY(-T,a),n.processY(T,l));else if(o&&!r)R===0||R===3?i.processY(T,h,!0):i.processY(-T,h,!1,!0);else if(!o&&r)R===0||R===3?n.processY(-T,u,!1,!0):n.processY(T,u,!0);else{var w=T*.5;R===0?m?(i.processY(T,0,!0),n.processY(0,null,!1,!0)):g?(i.processY(w,0,!0),n.processY(-w,0,!1,!0)):(i.processY(w,n.velocity.y,!0),n.processY(-w,null,!1,!0)):R===1?c?(i.processY(0,null,!1,!0),n.processY(T,0,!0)):d?(i.processY(-w,0,!1,!0),n.processY(w,0,!0)):(i.processY(-w,null,!1,!0),n.processY(w,i.velocity.y,!0)):R===2?m?(i.processY(-T,0,!1,!0),n.processY(0,null,!0)):p?(i.processY(-w,0,!1,!0),n.processY(w,0,!0)):(i.processY(-w,n.velocity.y,!1,!0),n.processY(w,null,!0)):R===3&&(c?(i.processY(0,null,!0),n.processY(-T,0,!1,!0)):v?(i.processY(w,0,!0),n.processY(-w,0,!1,!0)):(i.processY(w,n.velocity.y,!0),n.processY(-w,null,!1,!0)))}return!0},O=function(R){R===1?n.velocity.y=0:x?n.processY(T,u,!0):n.processY(-T,u,!1,!0),i.moves&&(n.x+=(i.x-i.prev.x)*i.friction.x,n._dx=n.x-n.prev.x)},L=function(R){R===2?i.velocity.y=0:y?i.processY(T,h,!0):i.processY(-T,h,!1,!0),n.moves&&(i.x+=(n.x-n.prev.x)*n.friction.x,i._dx=i.x-i.prev.x)};e.exports={BlockCheck:S,Check:E,Set:C,Run:M,RunImmovableBody1:O,RunImmovableBody2:L}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n={ProcessTileCallbacks:i(530),ProcessTileSeparationX:i(534),ProcessTileSeparationY:i(536),SeparateTile:i(532),TileCheckX:i(533),TileCheckY:i(535),TileIntersectsBody:i(248)};e.exports=n},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(3),r=new n({initialize:function(){this.boundsCenter=new o,this.centerDiff=new o},parseBody:function(a){if(a=a.hasOwnProperty("body")?a.body:a,!a.hasOwnProperty("bounds")||!a.hasOwnProperty("centerOfMass"))return!1;var l=this.boundsCenter,h=this.centerDiff,u=a.bounds.max.x-a.bounds.min.x,v=a.bounds.max.y-a.bounds.min.y,d=u*a.centerOfMass.x,c=v*a.centerOfMass.y;return l.set(u/2,v/2),h.set(d-l.x,c-l.y),!0},getTopLeft:function(a,l,h){if(l===void 0&&(l=0),h===void 0&&(h=0),this.parseBody(a)){var u=this.boundsCenter,v=this.centerDiff;return new o(l+u.x+v.x,h+u.y+v.y)}return!1},getTopCenter:function(a,l,h){if(l===void 0&&(l=0),h===void 0&&(h=0),this.parseBody(a)){var u=this.boundsCenter,v=this.centerDiff;return new o(l+v.x,h+u.y+v.y)}return!1},getTopRight:function(a,l,h){if(l===void 0&&(l=0),h===void 0&&(h=0),this.parseBody(a)){var u=this.boundsCenter,v=this.centerDiff;return new o(l-(u.x-v.x),h+u.y+v.y)}return!1},getLeftCenter:function(a,l,h){if(l===void 0&&(l=0),h===void 0&&(h=0),this.parseBody(a)){var u=this.boundsCenter,v=this.centerDiff;return new o(l+u.x+v.x,h+v.y)}return!1},getCenter:function(a,l,h){if(l===void 0&&(l=0),h===void 0&&(h=0),this.parseBody(a)){var u=this.centerDiff;return new o(l+u.x,h+u.y)}return!1},getRightCenter:function(a,l,h){if(l===void 0&&(l=0),h===void 0&&(h=0),this.parseBody(a)){var u=this.boundsCenter,v=this.centerDiff;return new o(l-(u.x-v.x),h+v.y)}return!1},getBottomLeft:function(a,l,h){if(l===void 0&&(l=0),h===void 0&&(h=0),this.parseBody(a)){var u=this.boundsCenter,v=this.centerDiff;return new o(l+u.x+v.x,h-(u.y-v.y))}return!1},getBottomCenter:function(a,l,h){if(l===void 0&&(l=0),h===void 0&&(h=0),this.parseBody(a)){var u=this.boundsCenter,v=this.centerDiff;return new o(l+v.x,h-(u.y-v.y))}return!1},getBottomRight:function(a,l,h){if(l===void 0&&(l=0),h===void 0&&(h=0),this.parseBody(a)){var u=this.boundsCenter,v=this.centerDiff;return new o(l-(u.x-v.x),h-(u.y-v.y))}return!1}});e.exports=r},function(e,f){/**
 * @author       Stefan Hedman <schteppe@gmail.com> (http://steffe.se)
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={decomp:R,quickDecomp:N,isSimple:D,removeCollinearPoints:z,removeDuplicatePoints:X,makeCCW:x};function i(b,I,G){G=G||0;var Y=[0,0],U,W,H,Z,q,_,nt;return U=b[1][1]-b[0][1],W=b[0][0]-b[1][0],H=U*b[0][0]+W*b[0][1],Z=I[1][1]-I[0][1],q=I[0][0]-I[1][0],_=Z*I[0][0]+q*I[0][1],nt=U*q-Z*W,k(nt,0,G)||(Y[0]=(q*H-W*_)/nt,Y[1]=(U*_-Z*H)/nt),Y}function n(b,I,G,Y){var U=I[0]-b[0],W=I[1]-b[1],H=Y[0]-G[0],Z=Y[1]-G[1];if(H*W-Z*U===0)return!1;var q=(U*(G[1]-b[1])+W*(b[0]-G[0]))/(H*W-Z*U),_=(H*(b[1]-G[1])+Z*(G[0]-b[0]))/(Z*U-H*W);return q>=0&&q<=1&&_>=0&&_<=1}function o(b,I,G){return(I[0]-b[0])*(G[1]-b[1])-(G[0]-b[0])*(I[1]-b[1])}function r(b,I,G){return o(b,I,G)>0}function a(b,I,G){return o(b,I,G)>=0}function l(b,I,G){return o(b,I,G)<0}function h(b,I,G){return o(b,I,G)<=0}var u=[],v=[];function d(b,I,G,Y){if(Y){var U=u,W=v;U[0]=I[0]-b[0],U[1]=I[1]-b[1],W[0]=G[0]-I[0],W[1]=G[1]-I[1];var H=U[0]*W[0]+U[1]*W[1],Z=Math.sqrt(U[0]*U[0]+U[1]*U[1]),q=Math.sqrt(W[0]*W[0]+W[1]*W[1]),_=Math.acos(H/(Z*q));return _<Y}else return o(b,I,G)===0}function c(b,I){var G=I[0]-b[0],Y=I[1]-b[1];return G*G+Y*Y}function p(b,I){var G=b.length;return b[I<0?I%G+G:I%G]}function g(b){b.length=0}function m(b,I,G,Y){for(var U=G;U<Y;U++)b.push(I[U])}function x(b){for(var I=0,G=b,Y=1;Y<b.length;++Y)(G[Y][1]<G[I][1]||G[Y][1]===G[I][1]&&G[Y][0]>G[I][0])&&(I=Y);return r(p(b,I-1),p(b,I),p(b,I+1))?!1:(y(b),!0)}function y(b){for(var I=[],G=b.length,Y=0;Y!==G;Y++)I.push(b.pop());for(var Y=0;Y!==G;Y++)b[Y]=I[Y]}function T(b,I){return l(p(b,I-1),p(b,I),p(b,I+1))}var C=[],S=[];function E(b,I,G){var Y,U,W=C,H=S;if(a(p(b,I+1),p(b,I),p(b,G))&&h(p(b,I-1),p(b,I),p(b,G)))return!1;U=c(p(b,I),p(b,G));for(var Z=0;Z!==b.length;++Z)if(!((Z+1)%b.length===I||Z===I)&&a(p(b,I),p(b,G),p(b,Z+1))&&h(p(b,I),p(b,G),p(b,Z))&&(W[0]=p(b,I),W[1]=p(b,G),H[0]=p(b,Z),H[1]=p(b,Z+1),Y=i(W,H),c(p(b,I),Y)<U))return!1;return!0}function M(b,I,G){for(var Y=0;Y!==b.length;++Y)if(!(Y===I||Y===G||(Y+1)%b.length===I||(Y+1)%b.length===G)&&n(p(b,I),p(b,G),p(b,Y),p(b,Y+1)))return!1;return!0}function O(b,I,G,Y){var U=Y||[];if(g(U),I<G)for(var W=I;W<=G;W++)U.push(b[W]);else{for(var W=0;W<=G;W++)U.push(b[W]);for(var W=I;W<b.length;W++)U.push(b[W])}return U}function L(b){for(var I=[],G=[],Y=[],U=[],W=Number.MAX_VALUE,H=0;H<b.length;++H)if(T(b,H)){for(var Z=0;Z<b.length;++Z)if(E(b,H,Z)){G=L(O(b,H,Z,U)),Y=L(O(b,Z,H,U));for(var q=0;q<Y.length;q++)G.push(Y[q]);G.length<W&&(I=G,W=G.length,I.push([p(b,H),p(b,Z)]))}}return I}function R(b){var I=L(b);return I.length>0?w(b,I):[b]}function w(b,I){if(I.length===0)return[b];if(I instanceof Array&&I.length&&I[0]instanceof Array&&I[0].length===2&&I[0][0]instanceof Array){for(var G=[b],Y=0;Y<I.length;Y++)for(var U=I[Y],W=0;W<G.length;W++){var H=G[W],Z=w(H,U);if(Z){G.splice(W,1),G.push(Z[0],Z[1]);break}}return G}else{var U=I,Y=b.indexOf(U[0]),W=b.indexOf(U[1]);return Y!==-1&&W!==-1?[O(b,Y,W),O(b,W,Y)]:!1}}function D(b){var I=b,G;for(G=0;G<I.length-1;G++)for(var Y=0;Y<G-1;Y++)if(n(I[G],I[G+1],I[Y],I[Y+1]))return!1;for(G=1;G<I.length-2;G++)if(n(I[0],I[I.length-1],I[G],I[G+1]))return!1;return!0}function B(b,I,G,Y,U){U=U||0;var W=I[1]-b[1],H=b[0]-I[0],Z=W*b[0]+H*b[1],q=Y[1]-G[1],_=G[0]-Y[0],nt=q*G[0]+_*G[1],rt=W*_-q*H;return k(rt,0,U)?[0,0]:[(_*Z-H*nt)/rt,(W*nt-q*Z)/rt]}function N(b,I,G,Y,U,W,H){W=W||100,H=H||0,U=U||25,I=typeof I!="undefined"?I:[],G=G||[],Y=Y||[];var Z=[0,0],q=[0,0],_=[0,0],nt=0,rt=0,at=0,ct=0,ut=0,pt=0,Dt=0,St=[],Et=[],dt=b,Bt=b;if(Bt.length<3)return I;if(H++,H>W)return console.warn("quickDecomp: max level ("+W+") reached."),I;for(var mt=0;mt<b.length;++mt)if(T(dt,mt)){G.push(dt[mt]),nt=rt=Number.MAX_VALUE;for(var Ot=0;Ot<b.length;++Ot)r(p(dt,mt-1),p(dt,mt),p(dt,Ot))&&h(p(dt,mt-1),p(dt,mt),p(dt,Ot-1))&&(_=B(p(dt,mt-1),p(dt,mt),p(dt,Ot),p(dt,Ot-1)),l(p(dt,mt+1),p(dt,mt),_)&&(at=c(dt[mt],_),at<rt&&(rt=at,q=_,pt=Ot))),r(p(dt,mt+1),p(dt,mt),p(dt,Ot+1))&&h(p(dt,mt+1),p(dt,mt),p(dt,Ot))&&(_=B(p(dt,mt+1),p(dt,mt),p(dt,Ot),p(dt,Ot+1)),r(p(dt,mt-1),p(dt,mt),_)&&(at=c(dt[mt],_),at<nt&&(nt=at,Z=_,ut=Ot)));if(pt===(ut+1)%b.length)_[0]=(q[0]+Z[0])/2,_[1]=(q[1]+Z[1])/2,Y.push(_),mt<ut?(m(St,dt,mt,ut+1),St.push(_),Et.push(_),pt!==0&&m(Et,dt,pt,dt.length),m(Et,dt,0,mt+1)):(mt!==0&&m(St,dt,mt,dt.length),m(St,dt,0,ut+1),St.push(_),Et.push(_),m(Et,dt,pt,mt+1));else{if(pt>ut&&(ut+=b.length),ct=Number.MAX_VALUE,ut<pt)return I;for(var Ot=pt;Ot<=ut;++Ot)a(p(dt,mt-1),p(dt,mt),p(dt,Ot))&&h(p(dt,mt+1),p(dt,mt),p(dt,Ot))&&(at=c(p(dt,mt),p(dt,Ot)),at<ct&&M(dt,mt,Ot)&&(ct=at,Dt=Ot%b.length));mt<Dt?(m(St,dt,mt,Dt+1),Dt!==0&&m(Et,dt,Dt,Bt.length),m(Et,dt,0,mt+1)):(mt!==0&&m(St,dt,mt,Bt.length),m(St,dt,0,Dt+1),m(Et,dt,Dt,mt+1))}return St.length<Et.length?(N(St,I,G,Y,U,W,H),N(Et,I,G,Y,U,W,H)):(N(Et,I,G,Y,U,W,H),N(St,I,G,Y,U,W,H)),I}return I.push(b),I}function z(b,I){for(var G=0,Y=b.length-1;b.length>3&&Y>=0;--Y)d(p(b,Y-1),p(b,Y),p(b,Y+1),I)&&(b.splice(Y%b.length,1),G++);return G}function X(b,I){for(var G=b.length-1;G>=1;--G)for(var Y=b[G],U=G-1;U>=0;--U)if(K(Y,b[U],I)){b.splice(G,1);continue}}function k(b,I,G){return G=G||0,Math.abs(b-I)<=G}function K(b,I,G){return k(b[0],I[0],G)&&k(b[1],I[1],G)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(86),o=i(0),r=i(591),a=i(128),l=i(592),h=i(1395),u=i(1396),v=i(1397),d=i(593),c=i(589),p=i(590),g=i(1398),m=i(64),x=new o({initialize:function(T){this.world=T,this.scene=T.scene,this.sys=T.scene.sys},rectangle:function(y,T,C,S,E){var M=n.rectangle(y,T,C,S,E);return this.world.add(M),M},trapezoid:function(y,T,C,S,E,M){var O=n.trapezoid(y,T,C,S,E,M);return this.world.add(O),O},circle:function(y,T,C,S,E){var M=n.circle(y,T,C,S,E);return this.world.add(M),M},polygon:function(y,T,C,S,E){var M=n.polygon(y,T,C,S,E);return this.world.add(M),M},fromVertices:function(y,T,C,S,E,M,O){typeof C=="string"&&(C=m.fromPath(C));var L=n.fromVertices(y,T,C,S,E,M,O);return this.world.add(L),L},fromPhysicsEditor:function(y,T,C,S,E){E===void 0&&(E=!0);var M=c.parseBody(y,T,C,S);return E&&!this.world.has(M)&&this.world.add(M),M},fromSVG:function(y,T,C,S,E,M){S===void 0&&(S=1),E===void 0&&(E={}),M===void 0&&(M=!0);for(var O=C.getElementsByTagName("path"),L=[],R=0;R<O.length;R++){var w=l.pathToVertices(O[R],30);S!==1&&m.scale(w,S,S),L.push(w)}var D=n.fromVertices(y,T,L,E);return M&&this.world.add(D),D},fromJSON:function(y,T,C,S,E){S===void 0&&(S={}),E===void 0&&(E=!0);var M=p.parseBody(y,T,C,S);return M&&E&&this.world.add(M),M},imageStack:function(y,T,C,S,E,M,O,L,R){O===void 0&&(O=0),L===void 0&&(L=0),R===void 0&&(R={});var w=this.world,D=this.sys.displayList;R.addToWorld=!1;var B=r.stack(C,S,E,M,O,L,function(N,z){var X=new u(w,N,z,y,T,R);return D.add(X),X.body});return w.add(B),B},stack:function(y,T,C,S,E,M,O){var L=r.stack(y,T,C,S,E,M,O);return this.world.add(L),L},pyramid:function(y,T,C,S,E,M,O){var L=r.pyramid(y,T,C,S,E,M,O);return this.world.add(L),L},chain:function(y,T,C,S,E,M){return r.chain(y,T,C,S,E,M)},mesh:function(y,T,C,S,E){return r.mesh(y,T,C,S,E)},newtonsCradle:function(y,T,C,S,E){var M=r.newtonsCradle(y,T,C,S,E);return this.world.add(M),M},car:function(y,T,C,S,E){var M=r.car(y,T,C,S,E);return this.world.add(M),M},softBody:function(y,T,C,S,E,M,O,L,R,w){var D=r.softBody(y,T,C,S,E,M,O,L,R,w);return this.world.add(D),D},joint:function(y,T,C,S,E){return this.constraint(y,T,C,S,E)},spring:function(y,T,C,S,E){return this.constraint(y,T,C,S,E)},constraint:function(y,T,C,S,E){S===void 0&&(S=1),E===void 0&&(E={}),E.bodyA=y.type==="body"?y:y.body,E.bodyB=T.type==="body"?T:T.body,isNaN(C)||(E.length=C),E.stiffness=S;var M=a.create(E);return this.world.add(M),M},worldConstraint:function(y,T,C,S){C===void 0&&(C=1),S===void 0&&(S={}),S.bodyB=y.type==="body"?y:y.body,isNaN(T)||(S.length=T),S.stiffness=C;var E=a.create(S);return this.world.add(E),E},mouseSpring:function(y){return this.pointerConstraint(y)},pointerConstraint:function(y){y===void 0&&(y={}),y.hasOwnProperty("render")||(y.render={visible:!1});var T=new g(this.scene,this.world,y);return this.world.add(T.constraint),T},image:function(y,T,C,S,E){var M=new u(this.world,y,T,C,S,E);return this.sys.displayList.add(M),M},tileBody:function(y,T){return new d(this.world,y,T)},sprite:function(y,T,C,S,E){var M=new v(this.world,y,T,C,S,E);return this.sys.displayList.add(M),this.sys.updateList.add(M),M},gameObject:function(y,T,C){return h(this.world,y,T,C)},destroy:function(){this.world=null,this.scene=null,this.sys=null}});e.exports=x},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(249),o=i(2),r=i(3);function a(h){return!!h.get&&typeof h.get=="function"||!!h.set&&typeof h.set=="function"}var l=function(h,u,v,d){v===void 0&&(v={}),d===void 0&&(d=!0);var c=u.x,p=u.y;u.body={temp:!0,position:{x:c,y:p}};var g=[n.Bounce,n.Collision,n.Force,n.Friction,n.Gravity,n.Mass,n.Sensor,n.SetBody,n.Sleep,n.Static,n.Transform,n.Velocity];if(g.forEach(function(x){for(var y in x)a(x[y])?Object.defineProperty(u,y,{get:x[y].get,set:x[y].set}):Object.defineProperty(u,y,{value:x[y]})}),u.world=h,u._tempVec2=new r(c,p),v.hasOwnProperty("type")&&v.type==="body")u.setExistingBody(v,d);else{var m=o(v,"shape",null);m||(m="rectangle"),v.addToWorld=d,u.setBody(m,v)}return u};e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(249),r=i(15),a=i(2),l=i(125),h=i(167),u=i(3),v=new n({Extends:l,Mixins:[o.Bounce,o.Collision,o.Force,o.Friction,o.Gravity,o.Mass,o.Sensor,o.SetBody,o.Sleep,o.Static,o.Transform,o.Velocity,h],initialize:function(c,p,g,m,x,y){r.call(this,c.scene,"Image"),this._crop=this.resetCropObject(),this.setTexture(m,x),this.setSizeToFrame(),this.setOrigin(),this.world=c,this._tempVec2=new u(p,g);var T=a(y,"shape",null);T?this.setBody(T,y):this.setRectangle(this.width,this.height,y),this.setPosition(p,g),this.initPipeline()}});e.exports=v},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(164),o=i(0),r=i(249),a=i(15),l=i(2),h=i(167),u=i(73),v=i(3),d=new o({Extends:u,Mixins:[r.Bounce,r.Collision,r.Force,r.Friction,r.Gravity,r.Mass,r.Sensor,r.SetBody,r.Sleep,r.Static,r.Transform,r.Velocity,h],initialize:function(p,g,m,x,y,T){a.call(this,p.scene,"Sprite"),this._crop=this.resetCropObject(),this.anims=new n(this),this.setTexture(x,y),this.setSizeToFrame(),this.setOrigin(),this.world=p,this._tempVec2=new v(g,m);var C=l(T,"shape",null);C?this.setBody(C,T):this.setRectangle(this.width,this.height,T),this.setPosition(g,m),this.initPipeline()}});e.exports=d},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(84),o=i(0),r=i(118),a=i(128),l=i(273),h=i(272),u=i(51),v=i(127),d=i(165),c=i(3),p=i(64),g=new o({initialize:function(x,y,T){T===void 0&&(T={});var C={label:"Pointer Constraint",pointA:{x:0,y:0},pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,collisionFilter:{category:1,mask:4294967295,group:0}};this.scene=x,this.world=y,this.camera=null,this.pointer=null,this.active=!0,this.position=new c,this.body=null,this.part=null,this.constraint=a.create(v(T,C)),this.world.on(h.BEFORE_UPDATE,this.update,this),x.sys.input.on(u.POINTER_DOWN,this.onDown,this),x.sys.input.on(u.POINTER_UP,this.onUp,this)},onDown:function(m){this.pointer||(this.pointer=m,this.camera=m.camera)},onUp:function(m){m===this.pointer&&(this.pointer=null)},getBody:function(m){var x=this.position,y=this.constraint;this.camera.getWorldPoint(m.x,m.y,x);for(var T=r.allBodies(this.world.localWorld),C=0;C<T.length;C++){var S=T[C];if(!S.ignorePointer&&n.contains(S.bounds,x)&&l.canCollide(S.collisionFilter,y.collisionFilter)&&this.hitTestBody(S,x))return this.world.emit(h.DRAG_START,S,this.part,this),!0}return!1},hitTestBody:function(m,x){for(var y=this.constraint,T=m.parts.length,C=T>1?1:0,S=C;S<T;S++){var E=m.parts[S];if(p.contains(E.vertices,x))return y.pointA=x,y.pointB={x:x.x-m.position.x,y:x.y-m.position.y},y.bodyB=m,y.angleB=m.angle,d.set(m,!1),this.part=E,this.body=m,!0}return!1},update:function(){var m=this.pointer,x=this.body;if(!this.active||!m){x&&this.stopDrag();return}if(!m.isDown&&x){this.stopDrag();return}else if(m.isDown){if(!x&&!this.getBody(m))return;x=this.body;var y=this.position,T=this.constraint;this.camera.getWorldPoint(m.x,m.y,y),T.pointA.x=y.x,T.pointA.y=y.y,d.set(x,!1),this.world.emit(h.DRAG,x,this)}},stopDrag:function(){var m=this.body,x=this.constraint;x.bodyB=null,x.pointB=null,this.pointer=null,this.body=null,this.part=null,m&&this.world.emit(h.DRAG_END,m,this)},destroy:function(){this.world.removeConstraint(this.constraint),this.pointer=null,this.constraint=null,this.body=null,this.part=null,this.world.off(h.BEFORE_UPDATE,this.update),this.scene.sys.input.off(u.POINTER_DOWN,this.onDown,this),this.scene.sys.input.off(u.POINTER_UP,this.onUp,this)}});e.exports=g},function(e,f,i){var n={};e.exports=n;var o=i(595),r=i(32);(function(){n.name="matter-js",n.version="0.14.2",n.uses=[],n.used=[],n.use=function(){o.use(n,Array.prototype.slice.call(arguments))},n.before=function(a,l){return a=a.replace(/^Matter./,""),r.chainPathBefore(n,a,l)},n.after=function(a,l){return a=a.replace(/^Matter./,""),r.chainPathAfter(n,a,l)}})()},function(e,f,i){var n={};e.exports=n;var o=i(83),r=i(274),a=i(84),l=i(86),h=i(64);(function(){n.collides=function(u,v){for(var d=[],c=0;c<v.length;c++){var p=v[c];if(u!==p&&a.overlaps(p.bounds,u.bounds))for(var g=p.parts.length===1?0:1;g<p.parts.length;g++){var m=p.parts[g];if(a.overlaps(m.bounds,u.bounds)){var x=r.collides(m,u);if(x.collided){d.push(x);break}}}}return d},n.ray=function(u,v,d,c){c=c||1e-100;for(var p=o.angle(v,d),g=o.magnitude(o.sub(v,d)),m=(d.x+v.x)*.5,x=(d.y+v.y)*.5,y=l.rectangle(m,x,g,c,{angle:p}),T=n.collides(y,u),C=0;C<T.length;C+=1){var S=T[C];S.body=S.bodyB=S.bodyA}return T},n.region=function(u,v,d){for(var c=[],p=0;p<u.length;p++){var g=u[p],m=a.overlaps(g.bounds,v);(m&&!d||!m&&d)&&c.push(g)}return c},n.point=function(u,v){for(var d=[],c=0;c<u.length;c++){var p=u[c];if(a.contains(p.bounds,v))for(var g=p.parts.length===1?0:1;g<p.parts.length;g++){var m=p.parts[g];if(a.contains(m.bounds,v)&&h.contains(m.vertices,v)){d.push(p);break}}}return d}})()},function(e,f,i){var n={};e.exports=n;var o=i(596),r=i(165),a=i(599),l=i(598),h=i(1523),u=i(597),v=i(166),d=i(118),c=i(128),p=i(32),g=i(41);(function(){n.create=function(m,x){x=p.isElement(m)?x:m,m=p.isElement(m)?m:null,x=x||{},(m||x.render)&&p.warn("Engine.create: engine.render is deprecated (see docs)");var y={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},timing:{timestamp:0,timeScale:1},broadphase:{controller:u}},T=p.extend(y,x);return T.world=x.world||o.create(T.world),T.pairs=l.create(),T.broadphase=T.broadphase.controller.create(T.broadphase),T.metrics=T.metrics||{extended:!1},T.metrics=h.create(T.metrics),T},n.update=function(m,x,y){x=x||1e3/60,y=y||1;var T=m.world,C=m.timing,S=m.broadphase,E=[],M;C.timestamp+=x*C.timeScale;var O={timestamp:C.timestamp};v.trigger(m,"beforeUpdate",O);var L=d.allBodies(T),R=d.allConstraints(T);for(h.reset(m.metrics),m.enableSleeping&&r.update(L,C.timeScale),n._bodiesApplyGravity(L,T.gravity),n._bodiesUpdate(L,x,C.timeScale,y,T.bounds),c.preSolveAll(L),M=0;M<m.constraintIterations;M++)c.solveAll(R,C.timeScale);c.postSolveAll(L),S.controller?(T.isModified&&S.controller.clear(S),S.controller.update(S,L,m,T.isModified),E=S.pairsList):E=L,T.isModified&&d.setModified(T,!1,!1,!0);var w=S.detector(E,m),D=m.pairs,B=C.timestamp;for(l.update(D,w,B),l.removeOld(D,B),m.enableSleeping&&r.afterCollisions(D.list,C.timeScale),D.collisionStart.length>0&&v.trigger(m,"collisionStart",{pairs:D.collisionStart}),a.preSolvePosition(D.list),M=0;M<m.positionIterations;M++)a.solvePosition(D.list,L,C.timeScale);for(a.postSolvePosition(L),c.preSolveAll(L),M=0;M<m.constraintIterations;M++)c.solveAll(R,C.timeScale);for(c.postSolveAll(L),a.preSolveVelocity(D.list),M=0;M<m.velocityIterations;M++)a.solveVelocity(D.list,C.timeScale);return D.collisionActive.length>0&&v.trigger(m,"collisionActive",{pairs:D.collisionActive}),D.collisionEnd.length>0&&v.trigger(m,"collisionEnd",{pairs:D.collisionEnd}),h.update(m.metrics,m),n._bodiesClearForces(L),v.trigger(m,"afterUpdate",O),m},n.merge=function(m,x){if(p.extend(m,x),x.world){m.world=x.world,n.clear(m);for(var y=d.allBodies(m.world),T=0;T<y.length;T++){var C=y[T];r.set(C,!1),C.id=p.nextId()}}},n.clear=function(m){var x=m.world;l.clear(m.pairs);var y=m.broadphase;if(y.controller){var T=d.allBodies(x);y.controller.clear(y),y.controller.update(y,T,m,!0)}},n._bodiesClearForces=function(m){for(var x=0;x<m.length;x++){var y=m[x];y.force.x=0,y.force.y=0,y.torque=0}},n._bodiesApplyGravity=function(m,x){var y=typeof x.scale!="undefined"?x.scale:.001;if(!(x.x===0&&x.y===0||y===0))for(var T=0;T<m.length;T++){var C=m[T];C.ignoreGravity||C.isStatic||C.isSleeping||(C.force.x+=C.mass*x.x*y*C.gravityScale.x,C.force.y+=C.mass*x.y*y*C.gravityScale.y)}},n._bodiesUpdate=function(m,x,y,T,C){for(var S=0;S<m.length;S++){var E=m[S];E.isStatic||E.isSleeping||g.update(E,x,y,T)}}})()},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(86),o=i(41),r=i(0),a=i(32),l=i(118),h=i(1401),u=i(9),v=i(272),d=i(2),c=i(6),p=i(41),g=i(166),m=i(593),x=i(596),y=i(83),T=new r({Extends:u,initialize:function(S,E){u.call(this),this.scene=S,this.engine=h.create(E),this.localWorld=this.engine.world;var M=c(E,"gravity",null);M?this.setGravity(M.x,M.y,M.scale):M===!1&&this.setGravity(0,0,0),this.walls={left:null,right:null,top:null,bottom:null},this.enabled=c(E,"enabled",!0),this.correction=c(E,"correction",1),this.getDelta=c(E,"getDelta",this.update60Hz);var O=d(E,"runner",{}),L=d(O,"fps",!1),R=d(O,"fps",60),w=d(O,"delta",1e3/R),D=d(O,"deltaMin",1e3/R),B=d(O,"deltaMax",1e3/(R*.5));L||(R=1e3/w),this.runner={fps:R,correction:d(O,"correction",1),deltaSampleSize:d(O,"deltaSampleSize",60),counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:d(O,"isFixed",!1),delta:w,deltaMin:D,deltaMax:B},this.autoUpdate=c(E,"autoUpdate",!0);var N=c(E,"debug",!1);if(this.drawDebug=typeof N=="object"?!0:N,this.debugGraphic,this.debugConfig={showAxes:d(N,"showAxes",!1),showAngleIndicator:d(N,"showAngleIndicator",!1),angleColor:d(N,"angleColor",15208787),showBroadphase:d(N,"showBroadphase",!1),broadphaseColor:d(N,"broadphaseColor",16757760),showBounds:d(N,"showBounds",!1),boundsColor:d(N,"boundsColor",16777215),showVelocity:d(N,"showVelocity",!1),velocityColor:d(N,"velocityColor",44783),showCollisions:d(N,"showCollisions",!1),collisionColor:d(N,"collisionColor",16094476),showSeparations:d(N,"showSeparations",!1),separationColor:d(N,"separationColor",16753920),showBody:d(N,"showBody",!0),showStaticBody:d(N,"showStaticBody",!0),showInternalEdges:d(N,"showInternalEdges",!1),renderFill:d(N,"renderFill",!1),renderLine:d(N,"renderLine",!0),fillColor:d(N,"fillColor",1075465),fillOpacity:d(N,"fillOpacity",1),lineColor:d(N,"lineColor",2678297),lineOpacity:d(N,"lineOpacity",1),lineThickness:d(N,"lineThickness",1),staticFillColor:d(N,"staticFillColor",857979),staticLineColor:d(N,"staticLineColor",1255396),showSleeping:d(N,"showSleeping",!1),staticBodySleepOpacity:d(N,"staticBodySleepOpacity",.7),sleepFillColor:d(N,"sleepFillColor",4605510),sleepLineColor:d(N,"sleepLineColor",10066585),showSensors:d(N,"showSensors",!0),sensorFillColor:d(N,"sensorFillColor",857979),sensorLineColor:d(N,"sensorLineColor",1255396),showPositions:d(N,"showPositions",!0),positionSize:d(N,"positionSize",4),positionColor:d(N,"positionColor",14697178),showJoint:d(N,"showJoint",!0),jointColor:d(N,"jointColor",14737474),jointLineOpacity:d(N,"jointLineOpacity",1),jointLineThickness:d(N,"jointLineThickness",2),pinSize:d(N,"pinSize",4),pinColor:d(N,"pinColor",4382944),springColor:d(N,"springColor",14697184),anchorColor:d(N,"anchorColor",15724527),anchorSize:d(N,"anchorSize",4),showConvexHulls:d(N,"showConvexHulls",!1),hullColor:d(N,"hullColor",14091216)},this.drawDebug&&this.createDebugGraphic(),this.setEventsProxy(),d(E,"setBounds",!1)){var z=E.setBounds;if(typeof z=="boolean")this.setBounds();else{var X=d(z,"x",0),k=d(z,"y",0),K=d(z,"width",S.sys.scale.width),b=d(z,"height",S.sys.scale.height),I=d(z,"thickness",64),G=d(z,"left",!0),Y=d(z,"right",!0),U=d(z,"top",!0),W=d(z,"bottom",!0);this.setBounds(X,k,K,b,I,G,Y,U,W)}}},setCompositeRenderStyle:function(C){var S=C.bodies,E=C.constraints,M=C.composites,O,L,R;for(O=0;O<S.length;O++)L=S[O],R=L.render,this.setBodyRenderStyle(L,R.lineColor,R.lineOpacity,R.lineThickness,R.fillColor,R.fillOpacity);for(O=0;O<E.length;O++)L=E[O],R=L.render,this.setConstraintRenderStyle(L,R.lineColor,R.lineOpacity,R.lineThickness,R.pinSize,R.anchorColor,R.anchorSize);for(O=0;O<M.length;O++)L=M[O],this.setCompositeRenderStyle(L);return this},setBodyRenderStyle:function(C,S,E,M,O,L){var R=C.render,w=this.debugConfig;return R?(S==null&&(S=C.isStatic?w.staticLineColor:w.lineColor),E==null&&(E=w.lineOpacity),M==null&&(M=w.lineThickness),O==null&&(O=C.isStatic?w.staticFillColor:w.fillColor),L==null&&(L=w.fillOpacity),S!==!1&&(R.lineColor=S),E!==!1&&(R.lineOpacity=E),M!==!1&&(R.lineThickness=M),O!==!1&&(R.fillColor=O),L!==!1&&(R.fillOpacity=L),this):this},setConstraintRenderStyle:function(C,S,E,M,O,L,R){var w=C.render,D=this.debugConfig;if(!w)return this;if(S==null){var B=w.type;B==="line"?S=D.jointColor:B==="pin"?S=D.pinColor:B==="spring"&&(S=D.springColor)}return E==null&&(E=D.jointLineOpacity),M==null&&(M=D.jointLineThickness),O==null&&(O=D.pinSize),L==null&&(L=D.anchorColor),R==null&&(R=D.anchorSize),S!==!1&&(w.lineColor=S),E!==!1&&(w.lineOpacity=E),M!==!1&&(w.lineThickness=M),O!==!1&&(w.pinSize=O),L!==!1&&(w.anchorColor=L),R!==!1&&(w.anchorSize=R),this},setEventsProxy:function(){var C=this,S=this.engine,E=this.localWorld;this.drawDebug&&(g.on(E,"compositeModified",function(M){C.setCompositeRenderStyle(M)}),g.on(E,"beforeAdd",function(M){for(var O=[].concat(M.object),L=0;L<O.length;L++){var R=O[L],w=R.render;R.type==="body"?C.setBodyRenderStyle(R,w.lineColor,w.lineOpacity,w.lineThickness,w.fillColor,w.fillOpacity):R.type==="composite"?C.setCompositeRenderStyle(R):R.type==="constraint"&&C.setConstraintRenderStyle(R,w.lineColor,w.lineOpacity,w.lineThickness,w.pinSize,w.anchorColor,w.anchorSize)}})),g.on(E,"beforeAdd",function(M){C.emit(v.BEFORE_ADD,M)}),g.on(E,"afterAdd",function(M){C.emit(v.AFTER_ADD,M)}),g.on(E,"beforeRemove",function(M){C.emit(v.BEFORE_REMOVE,M)}),g.on(E,"afterRemove",function(M){C.emit(v.AFTER_REMOVE,M)}),g.on(S,"beforeUpdate",function(M){C.emit(v.BEFORE_UPDATE,M)}),g.on(S,"afterUpdate",function(M){C.emit(v.AFTER_UPDATE,M)}),g.on(S,"collisionStart",function(M){var O=M.pairs,L,R;O.length>0&&(L=O[0].bodyA,R=O[0].bodyB),C.emit(v.COLLISION_START,M,L,R)}),g.on(S,"collisionActive",function(M){var O=M.pairs,L,R;O.length>0&&(L=O[0].bodyA,R=O[0].bodyB),C.emit(v.COLLISION_ACTIVE,M,L,R)}),g.on(S,"collisionEnd",function(M){var O=M.pairs,L,R;O.length>0&&(L=O[0].bodyA,R=O[0].bodyB),C.emit(v.COLLISION_END,M,L,R)})},setBounds:function(C,S,E,M,O,L,R,w,D){return C===void 0&&(C=0),S===void 0&&(S=0),E===void 0&&(E=this.scene.sys.scale.width),M===void 0&&(M=this.scene.sys.scale.height),O===void 0&&(O=64),L===void 0&&(L=!0),R===void 0&&(R=!0),w===void 0&&(w=!0),D===void 0&&(D=!0),this.updateWall(L,"left",C-O,S-O,O,M+O*2),this.updateWall(R,"right",C+E,S-O,O,M+O*2),this.updateWall(w,"top",C,S-O,E,O),this.updateWall(D,"bottom",C,S+M,E,O),this},updateWall:function(C,S,E,M,O,L){var R=this.walls[S];C?(R&&x.remove(this.localWorld,R),E+=O/2,M+=L/2,this.walls[S]=this.create(E,M,O,L,{isStatic:!0,friction:0,frictionStatic:0})):(R&&x.remove(this.localWorld,R),this.walls[S]=null)},createDebugGraphic:function(){var C=this.scene.sys.add.graphics({x:0,y:0});return C.setDepth(Number.MAX_VALUE),this.debugGraphic=C,this.drawDebug=!0,C},disableGravity:function(){return this.localWorld.gravity.x=0,this.localWorld.gravity.y=0,this.localWorld.gravity.scale=0,this},setGravity:function(C,S,E){return C===void 0&&(C=0),S===void 0&&(S=1),this.localWorld.gravity.x=C,this.localWorld.gravity.y=S,E!==void 0&&(this.localWorld.gravity.scale=E),this},create:function(C,S,E,M,O){var L=n.rectangle(C,S,E,M,O);return x.add(this.localWorld,L),L},add:function(C){return x.add(this.localWorld,C),this},remove:function(C,S){Array.isArray(C)||(C=[C]);for(var E=0;E<C.length;E++){var M=C[E],O=M.body?M.body:M;l.remove(this.localWorld,O,S)}return this},removeConstraint:function(C,S){return l.remove(this.localWorld,C,S),this},convertTilemapLayer:function(C,S){var E=C.layer,M=C.getTilesWithin(0,0,E.width,E.height,{isColliding:!0});return this.convertTiles(M,S),this},convertTiles:function(C,S){if(C.length===0)return this;for(var E=0;E<C.length;E++)new m(this,C[E],S);return this},nextGroup:function(C){return p.nextGroup(C)},nextCategory:function(){return p.nextCategory()},pause:function(){return this.enabled=!1,this.emit(v.PAUSE),this},resume:function(){return this.enabled=!0,this.emit(v.RESUME),this},update:function(C,S){if(!(!this.enabled||!this.autoUpdate)){var E=this.engine,M=this.runner,O=E.timing,L=this.correction;M.isFixed?S=this.getDelta(C,S):(S=C-M.timePrev||M.delta,M.timePrev=C,M.deltaHistory.push(S),M.deltaHistory=M.deltaHistory.slice(-M.deltaSampleSize),S=Math.min.apply(null,M.deltaHistory),S=S<M.deltaMin?M.deltaMin:S,S=S>M.deltaMax?M.deltaMax:S,L=S/M.delta,M.delta=S),M.timeScalePrev!==0&&(L*=O.timeScale/M.timeScalePrev),O.timeScale===0&&(L=0),M.timeScalePrev=O.timeScale,M.correction=L,M.frameCounter+=1,C-M.counterTimestamp>=1e3&&(M.fps=M.frameCounter*((C-M.counterTimestamp)/1e3),M.counterTimestamp=C,M.frameCounter=0),h.update(E,S,L)}},step:function(C,S){h.update(this.engine,C,S)},update60Hz:function(){return 1e3/60},update30Hz:function(){return 1e3/30},has:function(C){var S=C.hasOwnProperty("body")?C.body:C;return l.get(this.localWorld,S.id,S.type)!==null},getAllBodies:function(){return l.allBodies(this.localWorld)},getAllConstraints:function(){return l.allConstraints(this.localWorld)},getAllComposites:function(){return l.allComposites(this.localWorld)},postUpdate:function(){if(!!this.drawDebug){var C=this.debugConfig,S=this.engine,E=this.debugGraphic,M=l.allBodies(this.localWorld);this.debugGraphic.clear(),C.showBroadphase&&S.broadphase.controller&&this.renderGrid(S.broadphase,E,C.broadphaseColor,.5),C.showBounds&&this.renderBodyBounds(M,E,C.boundsColor,.5),(C.showBody||C.showStaticBody)&&this.renderBodies(M),C.showJoint&&this.renderJoints(),(C.showAxes||C.showAngleIndicator)&&this.renderBodyAxes(M,E,C.showAxes,C.angleColor,.5),C.showVelocity&&this.renderBodyVelocity(M,E,C.velocityColor,1,2),C.showSeparations&&this.renderSeparations(S.pairs.list,E,C.separationColor),C.showCollisions&&this.renderCollisions(S.pairs.list,E,C.collisionColor)}},renderGrid:function(C,S,E,M){S.lineStyle(1,E,M);for(var O=a.keys(C.buckets),L=0;L<O.length;L++){var R=O[L];if(!(C.buckets[R].length<2)){var w=R.split(/C|R/);S.strokeRect(parseInt(w[1],10)*C.bucketWidth,parseInt(w[2],10)*C.bucketHeight,C.bucketWidth,C.bucketHeight)}}return this},renderSeparations:function(C,S,E){S.lineStyle(1,E,1);for(var M=0;M<C.length;M++){var O=C[M];if(!!O.isActive){var L=O.collision,R=L.bodyA,w=L.bodyB,D=R.position,B=w.position,N=L.penetration,z=!R.isStatic&&!w.isStatic?4:1;w.isStatic&&(z=0),S.lineBetween(B.x,B.y,B.x-N.x*z,B.y-N.y*z),z=!R.isStatic&&!w.isStatic?4:1,R.isStatic&&(z=0),S.lineBetween(D.x,D.y,D.x-N.x*z,D.y-N.y*z)}}return this},renderCollisions:function(C,S,E){S.lineStyle(1,E,.5),S.fillStyle(E,1);var M,O;for(M=0;M<C.length;M++)if(O=C[M],!!O.isActive)for(var L=0;L<O.activeContacts.length;L++){var R=O.activeContacts[L],w=R.vertex;S.fillRect(w.x-2,w.y-2,5,5)}for(M=0;M<C.length;M++)if(O=C[M],!!O.isActive){var D=O.collision,B=O.activeContacts;if(B.length>0){var N=B[0].vertex.x,z=B[0].vertex.y;B.length===2&&(N=(B[0].vertex.x+B[1].vertex.x)/2,z=(B[0].vertex.y+B[1].vertex.y)/2),D.bodyB===D.supports[0].body||D.bodyA.isStatic?S.lineBetween(N-D.normal.x*8,z-D.normal.y*8,N,z):S.lineBetween(N+D.normal.x*8,z+D.normal.y*8,N,z)}}return this},renderBodyBounds:function(C,S,E,M){S.lineStyle(1,E,M);for(var O=0;O<C.length;O++){var L=C[O];if(!!L.render.visible){var R=L.bounds;if(R)S.strokeRect(R.min.x,R.min.y,R.max.x-R.min.x,R.max.y-R.min.y);else for(var w=L.parts,D=w.length>1?1:0;D<w.length;D++){var B=w[D];S.strokeRect(B.bounds.min.x,B.bounds.min.y,B.bounds.max.x-B.bounds.min.x,B.bounds.max.y-B.bounds.min.y)}}}return this},renderBodyAxes:function(C,S,E,M,O){S.lineStyle(1,M,O);for(var L=0;L<C.length;L++){var R=C[L],w=R.parts;if(!!R.render.visible){var D,B,N;if(E)for(B=w.length>1?1:0;B<w.length;B++)for(D=w[B],N=0;N<D.axes.length;N++){var z=D.axes[N];S.lineBetween(D.position.x,D.position.y,D.position.x+z.x*20,D.position.y+z.y*20)}else for(B=w.length>1?1:0;B<w.length;B++)for(D=w[B],N=0;N<D.axes.length;N++)S.lineBetween(D.position.x,D.position.y,(D.vertices[0].x+D.vertices[D.vertices.length-1].x)/2,(D.vertices[0].y+D.vertices[D.vertices.length-1].y)/2)}}return this},renderBodyVelocity:function(C,S,E,M,O){S.lineStyle(O,E,M);for(var L=0;L<C.length;L++){var R=C[L];!R.render.visible||S.lineBetween(R.position.x,R.position.y,R.position.x+(R.position.x-R.positionPrev.x)*2,R.position.y+(R.position.y-R.positionPrev.y)*2)}return this},renderBodies:function(C){for(var S=this.debugGraphic,E=this.debugConfig,M=E.showBody,O=E.showStaticBody,L=E.showSleeping,R=E.showInternalEdges,w=E.showConvexHulls,D=E.renderFill,B=E.renderLine,N=E.staticBodySleepOpacity,z=E.sleepFillColor,X=E.sleepLineColor,k=E.hullColor,K=0;K<C.length;K++){var b=C[K];if(!!b.render.visible&&!(!O&&b.isStatic||!M&&!b.isStatic)){var I=b.render.lineColor,G=b.render.lineOpacity,Y=b.render.lineThickness,U=b.render.fillColor,W=b.render.fillOpacity;L&&b.isSleeping&&(b.isStatic?(G*=N,W*=N):(I=X,U=z)),D||(U=null),B||(I=null),this.renderBody(b,S,R,I,G,Y,U,W);var H=b.parts.length;w&&H>1&&this.renderConvexHull(b,S,k,Y)}}},renderBody:function(C,S,E,M,O,L,R,w){M===void 0&&(M=null),O===void 0&&(O=null),L===void 0&&(L=1),R===void 0&&(R=null),w===void 0&&(w=null);for(var D=this.debugConfig,B=D.sensorFillColor,N=D.sensorLineColor,z=C.parts,X=z.length,k=X>1?1:0;k<X;k++){var K=z[k],b=K.render,I=b.opacity;if(!(!b.visible||I===0||K.isSensor&&!D.showSensors)){var G=K.circleRadius;if(S.beginPath(),K.isSensor?(R!==null&&S.fillStyle(B,w*I),M!==null&&S.lineStyle(L,N,O*I)):(R!==null&&S.fillStyle(R,w*I),M!==null&&S.lineStyle(L,M,O*I)),G)S.arc(K.position.x,K.position.y,G,0,2*Math.PI);else{var Y=K.vertices,U=Y.length;S.moveTo(Y[0].x,Y[0].y);for(var W=1;W<U;W++){var H=Y[W];if(!Y[W-1].isInternal||E?S.lineTo(H.x,H.y):S.moveTo(H.x,H.y),W<U&&H.isInternal&&!E){var Z=(W+1)%U;S.moveTo(Y[Z].x,Y[Z].y)}}S.closePath()}R!==null&&S.fillPath(),M!==null&&S.strokePath()}}if(D.showPositions&&!C.isStatic){var q=C.position.x,_=C.position.y,nt=Math.ceil(D.positionSize/2);S.fillStyle(D.positionColor,1),S.fillRect(q-nt,_-nt,D.positionSize,D.positionSize)}return this},renderConvexHull:function(C,S,E,M){M===void 0&&(M=1);var O=C.parts,L=O.length;if(L>1){var R=C.vertices;S.lineStyle(M,E),S.beginPath(),S.moveTo(R[0].x,R[0].y);for(var w=1;w<R.length;w++)S.lineTo(R[w].x,R[w].y);S.lineTo(R[0].x,R[0].y),S.strokePath()}return this},renderJoints:function(){for(var C=this.debugGraphic,S=l.allConstraints(this.localWorld),E=0;E<S.length;E++){var M=S[E].render,O=M.lineColor,L=M.lineOpacity,R=M.lineThickness,w=M.pinSize,D=M.anchorColor,B=M.anchorSize;this.renderConstraint(S[E],C,O,L,R,w,D,B)}},renderConstraint:function(C,S,E,M,O,L,R,w){var D=C.render;if(!D.visible||!C.pointA||!C.pointB)return this;S.lineStyle(O,E,M);var B=C.bodyA,N=C.bodyB,z,X;if(B?z=y.add(B.position,C.pointA):z=C.pointA,D.type==="pin")S.strokeCircle(z.x,z.y,L);else{if(N?X=y.add(N.position,C.pointB):X=C.pointB,S.beginPath(),S.moveTo(z.x,z.y),D.type==="spring")for(var k=y.sub(X,z),K=y.perp(y.normalise(k)),b=Math.ceil(a.clamp(C.length/5,12,20)),I,G=1;G<b;G+=1)I=G%2===0?1:-1,S.lineTo(z.x+k.x*(G/b)+K.x*I*4,z.y+k.y*(G/b)+K.y*I*4);S.lineTo(X.x,X.y)}return S.strokePath(),D.anchors&&w>0&&(S.fillStyle(R),S.fillCircle(z.x,z.y,w),S.fillCircle(X.x,X.y,w)),this},resetCollisionIDs:function(){return o._nextCollidingGroupId=1,o._nextNonCollidingGroupId=-1,o._nextCategory=1,this},shutdown:function(){g.off(this.engine),this.removeAllListeners(),x.clear(this.localWorld,!1),h.clear(this.engine),this.drawDebug&&this.debugGraphic.destroy()},destroy:function(){this.shutdown()}});e.exports=T},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={BasePlugin:i(540),DefaultPlugins:i(197),PluginCache:i(24),PluginManager:i(414),ScenePlugin:i(1404)}},function(e,f,i){/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2020 Photon Storm Ltd.
* @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
*/var n=i(540),o=i(0),r=i(20),a=new o({Extends:n,initialize:function(h,u,v){n.call(this,u),this.scene=h,this.systems=h.sys,this.pluginKey=v,h.sys.events.once(r.BOOT,this.boot,this)},boot:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Canvas:i(1406),Events:i(91),Snapshot:i(1407),WebGL:i(1408)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={CanvasRenderer:i(368),GetBlendModes:i(370),SetTransform:i(30)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Canvas:i(369),WebGL:i(383)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(107),o=i(17),r={PipelineManager:i(372),Pipelines:i(1409),RenderTarget:i(141),Utils:i(12),WebGLPipeline:i(58),WebGLRenderer:i(371),WebGLShader:i(375)};r=o(!1,r,n),e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(92),o=i(17),r={BitmapMaskPipeline:i(373),Events:i(374),GraphicsPipeline:i(376),LightPipeline:i(377),MultiPipeline:i(108),PointLightPipeline:i(378),PostFXPipeline:i(1410),RopePipeline:i(379),SinglePipeline:i(380),UtilityPipeline:i(381)};r=o(!1,r,n),e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(198),r=i(2),a=i(1411),l=i(382),h=i(58),u=new n({Extends:h,initialize:function(d){d.renderTarget=r(d,"renderTarget",1),d.fragShader=r(d,"fragShader",a),d.vertShader=r(d,"vertShader",l),d.attributes=r(d,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),d.batchSize=1,d.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],h.call(this,d),this.isPostFX=!0,this.gameObject,this.colorMatrix=new o,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderer.isBooted&&(this.manager=this.renderer.pipelines,this.boot())},boot:function(){h.prototype.boot.call(this);var v=this.manager.UTILITY_PIPELINE;this.fullFrame1=v.fullFrame1,this.fullFrame2=v.fullFrame2,this.halfFrame1=v.halfFrame1,this.halfFrame2=v.halfFrame2,this.set1i("uMainSampler",0)},onDraw:function(v){this.bindAndDraw(v)},copyFrame:function(v,d,c,p,g){this.manager.copyFrame(v,d,c,p,g)},copyToGame:function(v){this.manager.copyToGame(v)},drawFrame:function(v,d,c){this.manager.drawFrame(v,d,c,this.colorMatrix)},blendFrames:function(v,d,c,p,g){this.manager.blendFrames(v,d,c,p,g)},blendFramesAdditive:function(v,d,c,p,g){this.manager.blendFramesAdditive(v,d,c,p,g)},clearFrame:function(v,d){this.manager.clearFrame(v,d)},blitFrame:function(v,d,c,p,g,m){this.manager.blitFrame(v,d,c,p,g,m)},copyFrameRect:function(v,d,c,p,g,m,x,y){this.manager.copyFrameRect(v,d,c,p,g,m,x,y)},bindAndDraw:function(v,d,c,p,g){c===void 0&&(c=!0),p===void 0&&(p=!0);var m=this.gl,x=this.renderer;this.bind(g),this.set1i("uMainSampler",0),d?(m.viewport(0,0,d.width,d.height),m.bindFramebuffer(m.FRAMEBUFFER,d.framebuffer),m.framebufferTexture2D(m.FRAMEBUFFER,m.COLOR_ATTACHMENT0,m.TEXTURE_2D,d.texture,0),c&&(p?m.clearColor(0,0,0,0):m.clearColor(0,0,0,1),m.clear(m.COLOR_BUFFER_BIT))):(x.popFramebuffer(!1,!1,!1),x.currentFramebuffer||m.viewport(0,0,x.width,x.height)),m.activeTexture(m.TEXTURE0),m.bindTexture(m.TEXTURE_2D,v.texture),m.bufferData(m.ARRAY_BUFFER,this.vertexData,m.STATIC_DRAW),m.drawArrays(m.TRIANGLES,0,6),d?(m.bindTexture(m.TEXTURE_2D,null),m.bindFramebuffer(m.FRAMEBUFFER,null)):x.resetTextures()}});e.exports=u},function(e,f){e.exports=["#define SHADER_NAME PHASER_POSTFX_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","","varying vec2 outTexCoord;","","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord);","}",""].join(`
`)},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(17),o=i(201),r={Center:i(403),Events:i(104),Orientation:i(404),ScaleManager:i(415),ScaleModes:i(405),Zoom:i(406)};r=n(!1,r,o.CENTER),r=n(!1,r,o.ORIENTATION),r=n(!1,r,o.SCALE_MODE),r=n(!1,r,o.ZOOM),e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(144),o=i(17),r={Events:i(20),GetPhysicsPlugins:i(419),GetScenePlugins:i(420),SceneManager:i(417),ScenePlugin:i(1414),Settings:i(421),Systems:i(204)};r=o(!1,r,n),e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(18),o=i(0),r=i(20),a=i(2),l=i(24),h=new o({initialize:function(v){this.scene=v,this.systems=v.sys,this.settings=v.sys.settings,this.key=v.sys.settings.key,this.manager=v.sys.game.scene,this.transitionProgress=0,this._elapsed=0,this._target=null,this._duration=0,this._onUpdate,this._onUpdateScope,this._willSleep=!1,this._willRemove=!1,v.sys.events.once(r.BOOT,this.boot,this),v.sys.events.on(r.START,this.pluginStart,this)},boot:function(){this.systems.events.once(r.DESTROY,this.destroy,this)},pluginStart:function(){this._target=null,this.systems.events.once(r.SHUTDOWN,this.shutdown,this)},start:function(u,v){return u===void 0&&(u=this.key),this.manager.queueOp("stop",this.key),this.manager.queueOp("start",u,v),this},restart:function(u){var v=this.key;return this.manager.queueOp("stop",v),this.manager.queueOp("start",v,u),this},transition:function(u){u===void 0&&(u={});var v=a(u,"target",!1),d=this.manager.getScene(v);if(!v||!this.checkValidTransition(d))return!1;var c=a(u,"duration",1e3);this._elapsed=0,this._target=d,this._duration=c,this._willSleep=a(u,"sleep",!1),this._willRemove=a(u,"remove",!1);var p=a(u,"onUpdate",null);p&&(this._onUpdate=p,this._onUpdateScope=a(u,"onUpdateScope",this.scene));var g=a(u,"allowInput",!1);this.settings.transitionAllowInput=g;var m=d.sys.settings;return m.isTransition=!0,m.transitionFrom=this.scene,m.transitionDuration=c,m.transitionAllowInput=g,a(u,"moveAbove",!1)?this.manager.moveAbove(this.key,v):a(u,"moveBelow",!1)&&this.manager.moveBelow(this.key,v),d.sys.isSleeping()?d.sys.wake(a(u,"data")):this.manager.start(v,a(u,"data")),this.systems.events.emit(r.TRANSITION_OUT,d,c),this.systems.events.on(r.UPDATE,this.step,this),!0},checkValidTransition:function(u){return!(!u||u.sys.isActive()||u.sys.isTransitioning()||u===this.scene||this.systems.isTransitioning())},step:function(u,v){this._elapsed+=v,this.transitionProgress=n(this._elapsed/this._duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.transitionProgress),this._elapsed>=this._duration&&this.transitionComplete()},transitionComplete:function(){var u=this._target.sys,v=this._target.sys.settings;this.systems.events.off(r.UPDATE,this.step,this),u.events.emit(r.TRANSITION_COMPLETE,this.scene),v.isTransition=!1,v.transitionFrom=null,this._duration=0,this._target=null,this._onUpdate=null,this._onUpdateScope=null,this._willRemove?this.manager.remove(this.key):this._willSleep?this.systems.sleep():this.manager.stop(this.key)},add:function(u,v,d,c){return this.manager.add(u,v,d,c)},launch:function(u,v){return u&&u!==this.key&&this.manager.queueOp("start",u,v),this},run:function(u,v){return u&&u!==this.key&&this.manager.queueOp("run",u,v),this},pause:function(u,v){return u===void 0&&(u=this.key),this.manager.queueOp("pause",u,v),this},resume:function(u,v){return u===void 0&&(u=this.key),this.manager.queueOp("resume",u,v),this},sleep:function(u,v){return u===void 0&&(u=this.key),this.manager.queueOp("sleep",u,v),this},wake:function(u,v){return u===void 0&&(u=this.key),this.manager.queueOp("wake",u,v),this},switch:function(u){return u!==this.key&&this.manager.queueOp("switch",this.key,u),this},stop:function(u,v){return u===void 0&&(u=this.key),this.manager.queueOp("stop",u,v),this},setActive:function(u,v,d){v===void 0&&(v=this.key);var c=this.manager.getScene(v);return c&&c.sys.setActive(u,d),this},setVisible:function(u,v){v===void 0&&(v=this.key);var d=this.manager.getScene(v);return d&&d.sys.setVisible(u),this},isSleeping:function(u){return u===void 0&&(u=this.key),this.manager.isSleeping(u)},isActive:function(u){return u===void 0&&(u=this.key),this.manager.isActive(u)},isPaused:function(u){return u===void 0&&(u=this.key),this.manager.isPaused(u)},isVisible:function(u){return u===void 0&&(u=this.key),this.manager.isVisible(u)},swapPosition:function(u,v){return v===void 0&&(v=this.key),u!==v&&this.manager.swapPosition(u,v),this},moveAbove:function(u,v){return v===void 0&&(v=this.key),u!==v&&this.manager.moveAbove(u,v),this},moveBelow:function(u,v){return v===void 0&&(v=this.key),u!==v&&this.manager.moveBelow(u,v),this},remove:function(u){return u===void 0&&(u=this.key),this.manager.remove(u),this},moveUp:function(u){return u===void 0&&(u=this.key),this.manager.moveUp(u),this},moveDown:function(u){return u===void 0&&(u=this.key),this.manager.moveDown(u),this},bringToTop:function(u){return u===void 0&&(u=this.key),this.manager.bringToTop(u),this},sendToBack:function(u){return u===void 0&&(u=this.key),this.manager.sendToBack(u),this},get:function(u){return this.manager.getScene(u)},getIndex:function(u){return u===void 0&&(u=this.key),this.manager.getIndex(u)},shutdown:function(){var u=this.systems.events;u.off(r.SHUTDOWN,this.shutdown,this),u.off(r.POST_UPDATE,this.step,this),u.off(r.TRANSITION_OUT)},destroy:function(){this.shutdown(),this.scene.sys.events.off(r.START,this.start,this),this.scene=null,this.systems=null,this.settings=null,this.manager=null}});l.register("ScenePlugin",h,"scenePlugin"),e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Events:i(438),List:i(110),Map:i(102),ProcessQueue:i(211),RTree:i(531),Set:i(149),Size:i(416)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(17),o=i(1417),r={CanvasTexture:i(423),Events:i(106),FilterMode:o,Frame:i(109),Parsers:i(425),Texture:i(206),TextureManager:i(422),TextureSource:i(424)};r=n(!1,r,o),e.exports=r},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={LINEAR:0,NEAREST:1};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(17),o=i(1419),r={Components:i(251),Parsers:i(1452),Formats:i(40),ImageCollection:i(576),ParseToTilemap:i(262),Tile:i(85),Tilemap:i(580),TilemapCreator:i(1459),TilemapFactory:i(1460),Tileset:i(122),TilemapLayer:i(581),Orientation:i(29),LayerData:i(120),MapData:i(121),ObjectLayer:i(572)};r=n(!1,r,o.ORIENTATION),e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n={ORIENTATION:i(29)};e.exports=n},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(26),o=i(63),r=function(a,l,h,u,v,d,c,p){c===void 0&&(c=!0),a<0&&(a=0),l<0&&(l=0);for(var g=n(a,l,h,u,null,p),m=v-a,x=d-l,y=0;y<g.length;y++){var T=g[y].x+m,C=g[y].y+x;T>=0&&T<p.width&&C>=0&&C<p.height&&p.data[C][T]&&p.data[C][T].copy(g[y])}c&&o(v-1,d-1,h+2,u+2,p)};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(26),o=i(542),r=function(a,l,h,u,v,d){h||(h={}),Array.isArray(a)||(a=[a]);var c=d.tilemapLayer;u||(u=c.scene),v||(v=u.cameras.main);var p=n(0,0,d.width,d.height,null,d),g=[],m;for(m=0;m<p.length;m++){var x=p[m];if(a.indexOf(x.index)!==-1){var y=c.tileToWorldXY(x.x,x.y,void 0,v,d);h.x=y.x,h.y=y.y,g.push(u.make.sprite(h))}}if(typeof l=="number")for(m=0;m<a.length;m++)o(a[m],l,0,0,d.width,d.height,d);else if(Array.isArray(l))for(m=0;m<a.length;m++)o(a[m],l[m],0,0,d.width,d.height,d);return g};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(26),o=i(63),r=i(72),a=function(l,h,u,v,d,c,p){for(var g=p.collideIndexes.indexOf(l)!==-1,m=n(h,u,v,d,null,p),x=0;x<m.length;x++)m[x].index=l,r(m[x],g);c&&o(h-1,u-1,v+2,d+2,p)};e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(26),o=function(r,a,l,h,u,v,d,c){var p=n(l,h,u,v,d,c);return p.filter(r,a)};e.exports=o},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r,a){o===void 0&&(o=0),r===void 0&&(r=!1);var l=0,h,u,v;if(r){for(u=a.height-1;u>=0;u--)for(h=a.width-1;h>=0;h--)if(v=a.data[u][h],v&&v.index===n){if(l===o)return v;l+=1}}else for(u=0;u<a.height;u++)for(h=0;h<a.width;h++)if(v=a.data[u][h],v&&v.index===n){if(l===o)return v;l+=1}return null};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(26),o=function(r,a,l,h,u,v,d,c){var p=n(l,h,u,v,d,c);return p.find(r,a)||null};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(26),o=function(r,a,l,h,u,v,d,c){var p=n(l,h,u,v,d,c);p.forEach(r,a)};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(29),o=i(544),r=i(545),a=i(547),l=i(1),h=i(548),u=function(v){return v===n.ORTHOGONAL?o:v===n.HEXAGONAL?r:v===n.STAGGERED?h:v===n.ISOMETRIC?a:l};e.exports=u},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(158),o=i(3),r=new o,a=function(l,h,u,v,d){return d.tilemapLayer.worldToTileXY(l,h,!0,r,v),n(r.x,r.y,u,d)};e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(483),o=i(26),r=i(484),a=i(1),l=i(3),h=function(p,g){return r.RectangleToTriangle(g,p)},u=new l,v=new l,d=new l,c=function(p,g,m,x){if(p===void 0)return[];var y=a;p instanceof n.Circle?y=r.CircleToRectangle:p instanceof n.Rectangle?y=r.RectangleToRectangle:p instanceof n.Triangle?y=h:p instanceof n.Line&&(y=r.LineToRectangle),x.tilemapLayer.worldToTileXY(p.left,p.top,!0,v,m);var T=v.x,C=v.y;x.tilemapLayer.worldToTileXY(p.right,p.bottom,!0,d,m);var S=Math.ceil(d.x),E=Math.ceil(d.y),M=Math.max(S-T,1),O=Math.max(E-C,1),L=o(T,C,M,O,g,x),R=x.tileWidth,w=x.tileHeight;x.tilemapLayer&&(R*=x.tilemapLayer.scaleX,w*=x.tilemapLayer.scaleY);for(var D=[],B=new n.Rectangle(0,0,R,w),N=0;N<L.length;N++){var z=L[N];x.tilemapLayer.tileToWorldXY(z.x,z.y,u,m),B.x=u.x,B.y=u.y,y(p,B)&&D.push(z)}return D};e.exports=c},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(29),o=i(1),r=i(253),a=function(l){return l===n.ORTHOGONAL?r:o};e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(29),o=i(550),r=i(551),a=i(1),l=i(552),h=i(553),u=function(v){return v===n.ORTHOGONAL?h:v===n.ISOMETRIC?r:v===n.HEXAGONAL?o:v===n.STAGGERED?l:a};e.exports=u},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(29),o=i(554),r=i(1),a=i(555),l=i(254),h=function(u){return u===n.ORTHOGONAL?l:u===n.HEXAGONAL?o:u===n.STAGGERED?a:r};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(29),o=i(1),r=i(255),a=function(l){return l===n.ORTHOGONAL?r:o};e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(29),o=i(556),r=i(557),a=i(1),l=i(558),h=i(559),u=function(v){return v===n.ORTHOGONAL?h:v===n.ISOMETRIC?r:v===n.HEXAGONAL?o:v===n.STAGGERED?l:a};e.exports=u},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(29),o=i(560),r=i(1),a=i(561),l=i(256),h=function(u){return u===n.ORTHOGONAL?l:u===n.HEXAGONAL?o:u===n.STAGGERED?a:r};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(562),o=i(3),r=new o,a=function(l,h,u,v){v.tilemapLayer.worldToTileXY(l,h,!0,r,u);var d=r.x,c=r.y;return n(d,c,v)};e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(257),o=i(3),r=new o,a=function(l,h,u,v,d,c){return c.tilemapLayer.worldToTileXY(h,u,!0,r,d,c),n(l,r.x,r.y,v,c)};e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(63),o=i(257),r=function(a,l,h,u,v){if(u===void 0&&(u=!0),!Array.isArray(a))return null;Array.isArray(a[0])||(a=[a]);for(var d=a.length,c=a[0].length,p=0;p<d;p++)for(var g=0;g<c;g++){var m=a[p][g];o(m,l+g,h+p,!1,v)}u&&n(l-1,h-1,c+2,d+2,v)};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(26),o=i(210),r=function(a,l,h,u,v,d){var c,p=n(a,l,h,u,{},d);if(!v)for(v=[],c=0;c<p.length;c++)v.indexOf(p[c].index)===-1&&v.push(p[c].index);for(c=0;c<p.length;c++)p[c].index=o(v)};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(563),o=i(3),r=new o,a=function(l,h,u,v,d,c){return c.tilemapLayer.worldToTileXY(l,h,!0,r,d,c),n(r.x,r.y,u,v,c)};e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(26),o=i(397),r=new o(105,210,231,150),a=new o(243,134,48,200),l=new o(40,39,37,150),h=function(u,v,d){v===void 0&&(v={});var c=v.tileColor!==void 0?v.tileColor:r,p=v.collidingTileColor!==void 0?v.collidingTileColor:a,g=v.faceColor!==void 0?v.faceColor:l,m=n(0,0,d.width,d.height,null,d);u.translateCanvas(d.tilemapLayer.x,d.tilemapLayer.y),u.scaleCanvas(d.tilemapLayer.scaleX,d.tilemapLayer.scaleY);for(var x=0;x<m.length;x++){var y=m[x],T=y.width,C=y.height,S=y.pixelX,E=y.pixelY,M=y.collides?p:c;M!==null&&(u.fillStyle(M.color,M.alpha/255),u.fillRect(S,E,T,C)),S+=1,E+=1,T-=2,C-=2,g!==null&&(u.lineStyle(1,g.color,g.alpha/255),y.faceTop&&u.lineBetween(S,E,S+T,E),y.faceRight&&u.lineBetween(S+T,E,S+T,E+C),y.faceBottom&&u.lineBetween(S,E+C,S+T,E+C),y.faceLeft&&u.lineBetween(S,E,S,E+C))}};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(72),o=i(63),r=i(160),a=function(l,h,u,v,d){h===void 0&&(h=!0),u===void 0&&(u=!0),d===void 0&&(d=!0),Array.isArray(l)||(l=[l]);for(var c=0;c<l.length;c++)r(l[c],h,v);if(d)for(var p=0;p<v.height;p++)for(var g=0;g<v.width;g++){var m=v.data[p][g];m&&l.indexOf(m.index)!==-1&&n(m,h)}u&&o(0,0,v.width,v.height,v)};e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(72),o=i(63),r=i(160),a=function(l,h,u,v,d,c){if(u===void 0&&(u=!0),v===void 0&&(v=!0),c===void 0&&(c=!0),!(l>h)){for(var p=l;p<=h;p++)r(p,u,d);if(c)for(var g=0;g<d.height;g++)for(var m=0;m<d.width;m++){var x=d.data[g][m];x&&x.index>=l&&x.index<=h&&n(x,u)}v&&o(0,0,d.width,d.height,d)}};e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(72),o=i(63),r=i(160),a=function(l,h,u,v){h===void 0&&(h=!0),u===void 0&&(u=!0),Array.isArray(l)||(l=[l]);for(var d=0;d<v.height;d++)for(var c=0;c<v.width;c++){var p=v.data[d][c];p&&l.indexOf(p.index)===-1&&(n(p,h),r(p.index,h,v))}u&&o(0,0,v.width,v.height,v)};e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(72),o=i(63),r=i(126),a=function(l,h,u,v){h===void 0&&(h=!0),u===void 0&&(u=!0);for(var d=0;d<v.height;d++)for(var c=0;c<v.width;c++){var p=v.data[d][c];if(!!p){for(var g in l)if(!!r(p.properties,g)){var m=l[g];Array.isArray(m)||(m=[m]);for(var x=0;x<m.length;x++)p.properties[g]===m[x]&&n(p,h)}}}u&&o(0,0,v.width,v.height,v)};e.exports=a},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(72),o=i(63),r=function(a,l,h){a===void 0&&(a=!0),l===void 0&&(l=!0);for(var u=0;u<h.height;u++)for(var v=0;v<h.width;v++){var d=h.data[u][v];if(!!d){var c=d.getCollisionGroup();c&&c.objects&&c.objects.length>0&&n(d,a)}}l&&o(0,0,h.width,h.height,h)};e.exports=r},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,r,a){if(typeof n=="number")a.callbacks[n]=o!==null?{callback:o,callbackContext:r}:void 0;else for(var l=0,h=n.length;l<h;l++)a.callbacks[n[l]]=o!==null?{callback:o,callbackContext:r}:void 0};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(26),o=function(r,a,l,h,u,v,d){for(var c=n(r,a,l,h,null,d),p=0;p<c.length;p++)c[p].setCollisionCallback(u,v)};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(26),o=i(131),r=function(a,l,h,u,v){var d=n(a,l,h,u,null,v),c=d.map(function(g){return g.index});o(c);for(var p=0;p<d.length;p++)d[p].index=c[p]};e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(26),o=function(r,a,l,h,u,v,d){for(var c=n(l,h,u,v,null,d),p=0;p<c.length;p++)c[p]&&(c[p].index===r?c[p].index=a:c[p].index===a&&(c[p].index=r))};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(26),o=function(r,a,l,h,u,v){if(!!u){var d,c=n(r,a,l,h,null,v),p=0;for(d=0;d<u.length;d++)p+=u[d].weight;if(!(p<=0))for(d=0;d<c.length;d++){for(var g=Math.random()*p,m=0,x=-1,y=0;y<u.length;y++)if(m+=u[y].weight,g<=m){var T=u[y].index;x=Array.isArray(T)?T[Math.floor(Math.random()*T.length)]:T;break}c[d].index=x}}};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={FromOrientationString:i(258),Parse:i(564),Parse2DArray:i(259),ParseCSV:i(565),Impact:i(1454),Tiled:i(1455)}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){for(var r=0;r<n.length;r++){var a=n[r],l=r;if(a.name&&a.name!==""&&(l=a.name),Array.isArray(a.wangtiles)&&a.wangtiles.length>0){var h={},u={},v,d,c;if(Array.isArray(a.edgecolors))for(v=0;v<a.edgecolors.length;v++)c=1+v,d=a.edgecolors[v],d.name!==""&&(h[c]=d.name);if(Array.isArray(a.cornercolors))for(v=0;v<a.cornercolors.length;v++)c=1+v,d=a.cornercolors[v],d.name!==""&&(u[c]=d.name);if(Array.isArray(a.colors))for(v=0;v<a.colors.length;v++)d=a.colors[v],c=1+v,d.name!==""&&(h[c]=u[c]=d.name);for(var p=[h,u,h,u,h,u,h,u],g=0;g<a.wangtiles.length;g++){var m=a.wangtiles[g],x=o[m.tileid]||(o[m.tileid]={});x=x.wangid||(x.wangid={});for(var y=[],T=0;T<Math.min(p.length,m.wangid.length);T++){if(d=m.wangid[T],d===0){y.push(void 0);continue}var C=p[T][d];if(C!==void 0){y.push(C);continue}y.push(d)}x[l]=y}}}};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ParseTileLayers:i(578),ParseTilesets:i(579),ParseWeltmeister:i(577)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={AssignTileProperties:i(567),Base64Decode:i(574),BuildTilesetIndex:i(568),CreateGroupLayer:i(161),ParseGID:i(261),ParseImageLayers:i(569),ParseJSONTiled:i(566),ParseObject:i(260),ParseObjectLayers:i(570),ParseTileLayers:i(573),ParseTilesets:i(575)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),o=i(1);n=i(1457),o=i(1458),e.exports={renderWebGL:n,renderCanvas:o}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(12),o=function(r,a,l){var h=a.cull(l),u=h.length,v=l.alpha*a.alpha;if(!(u===0||v<=0)){var d=a.gidMap,c=r.pipelines.set(a.pipeline,a),p=n.getTintAppendFloatAlpha,g=a.scrollFactorX,m=a.scrollFactorY,x=a.x,y=a.y,T=a.scaleX,C=a.scaleY;r.pipelines.preBatch(a);for(var S=0;S<u;S++){var E=h[S],M=d[E.index];if(!!M){var O=M.getTileTextureCoordinates(E.index);if(O!==null){var L=M.glTexture,R=c.setTexture2D(L,a),w=M.tileWidth,D=M.tileHeight,B=O.x,N=O.y,z=M.tileWidth*.5,X=M.tileHeight*.5,k=p(E.tint,v*E.alpha);c.batchTexture(a,L,L.width,L.height,x+(z+E.pixelX)*T,y+(X+E.pixelY)*C,E.width,E.height,T,C,E.rotation,E.flipX,E.flipY,g,m,z,X,B,N,w,D,k,k,k,k,!1,0,0,l,null,!0,R)}}}r.pipelines.postBatch(a)}};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(25),o=new n,r=new n,a=new n,l=function(h,u,v,d){var c=u.cull(v),p=c.length,g=v.alpha*u.alpha;if(!(p===0||g<=0)){var m=o,x=r,y=a;x.applyITRS(u.x,u.y,u.rotation,u.scaleX,u.scaleY),m.copyFrom(v.matrix);var T=h.currentContext,C=u.gidMap;T.save(),d?(m.multiplyWithOffset(d,-v.scrollX*u.scrollFactorX,-v.scrollY*u.scrollFactorY),x.e=u.x,x.f=u.y,m.multiply(x,y),y.copyToContext(T)):(x.e-=v.scrollX*u.scrollFactorX,x.f-=v.scrollY*u.scrollFactorY,x.copyToContext(T)),(!h.antialias||u.scaleX>1||u.scaleY>1)&&(T.imageSmoothingEnabled=!1);for(var S=0;S<p;S++){var E=c[S],M=C[E.index];if(!!M){var O=M.image.getSourceImage(),L=M.getTileTextureCoordinates(E.index);if(L!==null){var R=M.tileWidth,w=M.tileHeight,D=R*.5,B=w*.5;T.save(),T.translate(E.pixelX+D,E.pixelY+B),E.rotation!==0&&T.rotate(E.rotation),(E.flipX||E.flipY)&&T.scale(E.flipX?-1:1,E.flipY?-1:1),T.globalAlpha=g*E.alpha,T.drawImage(O,L.x,L.y,R,w,-D,-B,R,w),T.restore()}}}T.restore()}};e.exports=l},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(16),o=i(262);n.register("tilemap",function(r){var a=r!==void 0?r:{};return o(this.scene,a.key,a.tileWidth,a.tileHeight,a.width,a.height,a.data,a.insertNull)})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(5),o=i(262);n.register("tilemap",function(r,a,l,h,u,v,d){return r===null&&(r=void 0),a===null&&(a=void 0),l===null&&(l=void 0),h===null&&(h=void 0),u===null&&(u=void 0),o(this.scene,r,a,l,h,u,v,d)})},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Clock:i(1462),TimerEvent:i(582)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(24),r=i(20),a=i(582),l=i(93),h=new n({initialize:function(v){this.scene=v,this.systems=v.sys,this.now=0,this.timeScale=1,this.paused=!1,this._active=[],this._pendingInsertion=[],this._pendingRemoval=[],v.sys.events.once(r.BOOT,this.boot,this),v.sys.events.on(r.START,this.start,this)},boot:function(){this.now=this.systems.game.loop.time,this.systems.events.once(r.DESTROY,this.destroy,this)},start:function(){var u=this.systems.events;u.on(r.PRE_UPDATE,this.preUpdate,this),u.on(r.UPDATE,this.update,this),u.once(r.SHUTDOWN,this.shutdown,this)},addEvent:function(u){var v;return u instanceof a?(v=u,this.removeEvent(v),v.elapsed=v.startAt,v.hasDispatched=!1,v.repeatCount=v.repeat===-1||v.loop?999999999999:v.repeat):v=new a(u),this._pendingInsertion.push(v),v},delayedCall:function(u,v,d,c){return this.addEvent({delay:u,callback:v,args:d,callbackScope:c})},clearPendingEvents:function(){return this._pendingInsertion=[],this},removeEvent:function(u){Array.isArray(u)||(u=[u]);for(var v=0;v<u.length;v++){var d=u[v];l(this._pendingRemoval,d),l(this._pendingInsertion,d),l(this._active,d)}return this},removeAllEvents:function(){return this._pendingRemoval=this._pendingRemoval.concat(this._active),this},preUpdate:function(){var u=this._pendingRemoval.length,v=this._pendingInsertion.length;if(!(u===0&&v===0)){var d,c;for(d=0;d<u;d++){c=this._pendingRemoval[d];var p=this._active.indexOf(c);p>-1&&this._active.splice(p,1),c.destroy()}for(d=0;d<v;d++)c=this._pendingInsertion[d],this._active.push(c);this._pendingRemoval.length=0,this._pendingInsertion.length=0}},update:function(u,v){if(this.now=u,!this.paused){v*=this.timeScale;for(var d=0;d<this._active.length;d++){var c=this._active[d];if(!c.paused&&(c.elapsed+=v*c.timeScale,c.elapsed>=c.delay)){var p=c.elapsed-c.delay;c.elapsed=c.delay,!c.hasDispatched&&c.callback&&(c.hasDispatched=!0,c.callback.apply(c.callbackScope,c.args)),c.repeatCount>0?(c.repeatCount--,c.elapsed=p,c.hasDispatched=!1):this._pendingRemoval.push(c)}}}},shutdown:function(){var u;for(u=0;u<this._pendingInsertion.length;u++)this._pendingInsertion[u].destroy();for(u=0;u<this._active.length;u++)this._active[u].destroy();for(u=0;u<this._pendingRemoval.length;u++)this._pendingRemoval[u].destroy();this._active.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;var v=this.systems.events;v.off(r.PRE_UPDATE,this.preUpdate,this),v.off(r.UPDATE,this.update,this),v.off(r.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(r.START,this.start,this),this.scene=null,this.systems=null}});o.register("Clock",h,"time"),e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(100),o=i(17),r={Builders:i(1464),Events:i(267),TweenManager:i(1480),Tween:i(266),TweenData:i(268),Timeline:i(588)};r=o(!1,r,n),e.exports=r},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={GetBoolean:i(99),GetEaseFunction:i(80),GetNewValue:i(162),GetProps:i(583),GetTargets:i(263),GetTweens:i(584),GetValueOp:i(264),NumberTweenBuilder:i(585),StaggerBuilder:i(586),TimelineBuilder:i(587),TweenBuilder:i(163)}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports=["callbackScope","completeDelay","delay","duration","ease","easeParams","flipX","flipY","hold","loop","loopDelay","offset","onActive","onActiveParams","onActiveScope","onComplete","onCompleteParams","onCompleteScope","onLoop","onLoopParams","onLoopScope","onRepeat","onRepeatParams","onRepeatScope","onStart","onStartParams","onStartScope","onStop","onStopParams","onStopScope","onUpdate","onUpdateParams","onUpdateScope","onYoyo","onYoyoParams","onYoyoScope","paused","props","repeat","repeatDelay","targets","useFrames","yoyo"]},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="complete"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="loop"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pause"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="resume"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="start"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="update"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="active"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="complete"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="loop"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="repeat"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="start"},function(e,f){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="stop"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="update"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="yoyo"},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(93),o=i(0),r=i(585),a=i(24),l=i(20),h=i(586),u=i(587),v=i(100),d=i(163),c=new o({initialize:function(g){this.scene=g,this.systems=g.sys,this.timeScale=1,this._add=[],this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,g.sys.events.once(l.BOOT,this.boot,this),g.sys.events.on(l.START,this.start,this)},boot:function(){this.systems.events.once(l.DESTROY,this.destroy,this)},start:function(){var p=this.systems.events;p.on(l.PRE_UPDATE,this.preUpdate,this),p.on(l.UPDATE,this.update,this),p.once(l.SHUTDOWN,this.shutdown,this),this.timeScale=1},createTimeline:function(p){return u(this,p)},timeline:function(p){var g=u(this,p);return g.paused||(this._add.push(g),this._toProcess++),g},create:function(p){return d(this,p)},add:function(p){var g=d(this,p);return this._add.push(g),this._toProcess++,g},existing:function(p){return this._add.push(p),this._toProcess++,this},addCounter:function(p){var g=r(this,p);return this._add.push(g),this._toProcess++,g},stagger:function(p,g){return h(p,g)},preUpdate:function(){if(this._toProcess!==0){var p=this._destroy,g=this._active,m=this._pending,x,y;for(x=0;x<p.length;x++){y=p[x];var T=g.indexOf(y);T===-1?(T=m.indexOf(y),T>-1&&(y.state=v.REMOVED,m.splice(T,1))):(y.state=v.REMOVED,g.splice(T,1))}for(p.length=0,p=this._add,x=0;x<p.length;x++)y=p[x],y.state===v.PENDING_ADD&&(y.init()?(y.play(),this._active.push(y)):this._pending.push(y));p.length=0,this._toProcess=0}},update:function(p,g){var m=this._active,x;g*=this.timeScale;for(var y=0;y<m.length;y++)x=m[y],x.update(p,g)&&(this._destroy.push(x),this._toProcess++)},remove:function(p){return n(this._add,p),n(this._pending,p),n(this._active,p),n(this._destroy,p),p.state=v.REMOVED,this},makeActive:function(p){if(this._add.indexOf(p)!==-1||this._active.indexOf(p)!==-1)return this;var g=this._pending.indexOf(p);return g!==-1&&this._pending.splice(g,1),this._add.push(p),p.state=v.PENDING_ADD,this._toProcess++,this},each:function(p,g){for(var m=[null],x=1;x<arguments.length;x++)m.push(arguments[x]);for(var y in this.list)m[0]=this.list[y],p.apply(g,m)},getAllTweens:function(){for(var p=this._active,g=[],m=0;m<p.length;m++)g.push(p[m]);return g},getGlobalTimeScale:function(){return this.timeScale},getTweensOf:function(p,g){g===void 0&&(g=!1);var m=this._active,x,y=[],T,C;for(Array.isArray(p)||(p=[p]),T=0;T<m.length;T++)for(x=m[T],C=0;C<p.length;C++)x.hasTarget(p[C])&&y.push(x);if(g)for(m=this._pending,T=0;T<m.length;T++)for(x=m[T],C=0;C<p.length;C++)x.hasTarget(p[C])&&y.push(x);return y},isTweening:function(p){for(var g=this._active,m,x=0;x<g.length;x++)if(m=g[x],m.hasTarget(p)&&m.isPlaying())return!0;return!1},killAll:function(){for(var p=this.getAllTweens(),g=0;g<p.length;g++)p[g].stop();return this},killTweensOf:function(p){for(var g=this.getTweensOf(p),m=0;m<g.length;m++)g[m].stop();return this},pauseAll:function(){for(var p=this._active,g=0;g<p.length;g++)p[g].pause();return this},resumeAll:function(){for(var p=this._active,g=0;g<p.length;g++)p[g].resume();return this},setGlobalTimeScale:function(p){return this.timeScale=p,this},shutdown:function(){this.killAll(),this._add=[],this._pending=[],this._active=[],this._destroy=[],this._toProcess=0;var p=this.systems.events;p.off(l.PRE_UPDATE,this.preUpdate,this),p.off(l.UPDATE,this.update,this),p.off(l.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(l.START,this.start,this),this.scene=null,this.systems=null}});a.register("TweenManager",c,"tweens"),e.exports=c},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Array:i(208),Base64:i(1482),Objects:i(1484),String:i(1488),NOOP:i(1)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ArrayBufferToBase64:i(1483),Base64ToArrayBuffer:i(433)}},function(e,f){/**
 * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=function(o,r){for(var a=new Uint8Array(o),l=a.length,h=r?"data:"+r+";base64,":"",u=0;u<l;u+=3)h+=i[a[u]>>2],h+=i[(a[u]&3)<<4|a[u+1]>>4],h+=i[(a[u+1]&15)<<2|a[u+2]>>6],h+=i[a[u+2]&63];return l%3===2?h=h.substring(0,h.length-1)+"=":l%3===1&&(h=h.substring(0,h.length-2)+"=="),h};e.exports=n},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Clone:i(77),DeepCopy:i(175),Extend:i(17),GetAdvancedValue:i(13),GetFastValue:i(2),GetMinMaxValue:i(1485),GetValue:i(6),HasAll:i(1486),HasAny:i(455),HasValue:i(126),IsPlainObject:i(7),Merge:i(127),MergeRight:i(1487),Pick:i(571),SetValue:i(478)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(6),o=i(18),r=function(a,l,h,u,v){v===void 0&&(v=h);var d=n(a,l,v);return o(d,h,u)};e.exports=r},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){for(var r=0;r<o.length;r++)if(!n.hasOwnProperty(o[r]))return!1;return!0};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(77),o=function(r,a){var l=n(r);for(var h in a)l.hasOwnProperty(h)&&(l[h]=a[h]);return l};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Format:i(1489),Pad:i(186),RemoveAt:i(1490),Reverse:i(1491),UppercaseFirst:i(205),UUID:i(222)}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return n.replace(/%([0-9]+)/g,function(r,a){return o[Number(a)-1]})};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return o===0?n.slice(1):n.slice(0,o-1)+n.slice(o)};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n.split("").reverse().join("")};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={SoundManagerCreator:i(426),Events:i(70),BaseSound:i(146),BaseSoundManager:i(145),WebAudioSound:i(434),WebAudioSoundManager:i(432),HTML5AudioSound:i(429),HTML5AudioSoundManager:i(427),NoAudioSound:i(431),NoAudioSoundManager:i(430)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Arcade:i(1366),Matter:i(1494)}},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={BodyBounds:i(1392),Components:i(249),Events:i(272),Factory:i(1394),MatterGameObject:i(1395),Image:i(1396),Matter:i(594),MatterPhysics:i(1524),PolyDecomp:i(1393),Sprite:i(1397),TileBody:i(593),PhysicsEditorParser:i(589),PhysicsJSONParser:i(590),PointerConstraint:i(1398),World:i(1402)}},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setBounce:function(n){return this.body.restitution=n,this}};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setCollisionCategory:function(n){return this.body.collisionFilter.category=n,this},setCollisionGroup:function(n){return this.body.collisionFilter.group=n,this},setCollidesWith:function(n){var o=0;if(!Array.isArray(n))o=n;else for(var r=0;r<n.length;r++)o|=n[r];return this.body.collisionFilter.mask=o,this},setOnCollide:function(n){return this.body.onCollideCallback=n,this},setOnCollideEnd:function(n){return this.body.onCollideEndCallback=n,this},setOnCollideActive:function(n){return this.body.onCollideActiveCallback=n,this},setOnCollideWith:function(n,o){Array.isArray(n)||(n=[n]);for(var r=0;r<n.length;r++){var a=n[r].hasOwnProperty("body")?n[r].body:n[r];this.body.setOnCollideWith(a,o)}return this}};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(41),o={applyForce:function(r){return this._tempVec2.set(this.body.position.x,this.body.position.y),n.applyForce(this.body,this._tempVec2,r),this},applyForceFrom:function(r,a){return n.applyForce(this.body,r,a),this},thrust:function(r){var a=this.body.angle;return this._tempVec2.set(r*Math.cos(a),r*Math.sin(a)),n.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustLeft:function(r){var a=this.body.angle-Math.PI/2;return this._tempVec2.set(r*Math.cos(a),r*Math.sin(a)),n.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustRight:function(r){var a=this.body.angle+Math.PI/2;return this._tempVec2.set(r*Math.cos(a),r*Math.sin(a)),n.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustBack:function(r){var a=this.body.angle-Math.PI;return this._tempVec2.set(r*Math.cos(a),r*Math.sin(a)),n.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this}};e.exports=o},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setFriction:function(n,o,r){return this.body.friction=n,o!==void 0&&(this.body.frictionAir=o),r!==void 0&&(this.body.frictionStatic=r),this},setFrictionAir:function(n){return this.body.frictionAir=n,this},setFrictionStatic:function(n){return this.body.frictionStatic=n,this}};e.exports=i},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setIgnoreGravity:function(n){return this.body.ignoreGravity=n,this}};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(41),o=i(3),r={setMass:function(a){return n.setMass(this.body,a),this},setDensity:function(a){return n.setDensity(this.body,a),this},centerOfMass:{get:function(){return new o(this.body.centerOfMass.x,this.body.centerOfMass.y)}}};e.exports=r},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setSensor:function(n){return this.body.isSensor=n,this},isSensor:function(){return this.body.isSensor}};e.exports=i},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(86),o=i(41),r=i(124),a=i(2),l=i(589),h=i(590),u=i(64),v={setRectangle:function(d,c,p){return this.setBody({type:"rectangle",width:d,height:c},p)},setCircle:function(d,c){return this.setBody({type:"circle",radius:d},c)},setPolygon:function(d,c,p){return this.setBody({type:"polygon",sides:c,radius:d},p)},setTrapezoid:function(d,c,p,g){return this.setBody({type:"trapezoid",width:d,height:c,slope:p},g)},setExistingBody:function(d,c){c===void 0&&(c=!0),this.body&&this.world.remove(this.body,!0),this.body=d;for(var p=0;p<d.parts.length;p++)d.parts[p].gameObject=this;var g=this;if(d.destroy=function(){g.world.remove(g.body,!0),g.body.gameObject=null},c&&(this.world.has(d)&&this.world.remove(d,!0),this.world.add(d)),this._originComponent){var m=d.render.sprite.xOffset,x=d.render.sprite.yOffset,y=d.centerOfMass.x,T=d.centerOfMass.y;if(r(y,.5)&&r(T,.5))this.setOrigin(m+.5,x+.5);else{var C=d.centerOffset.x,S=d.centerOffset.y;this.setOrigin(m+C/this.displayWidth,x+S/this.displayHeight)}}return this},setBody:function(d,c){if(!d)return this;var p;typeof d=="string"&&(d={type:d});var g=a(d,"type","rectangle"),m=a(d,"x",this._tempVec2.x),x=a(d,"y",this._tempVec2.y),y=a(d,"width",this.width),T=a(d,"height",this.height);switch(g){case"rectangle":p=n.rectangle(m,x,y,T,c);break;case"circle":var C=a(d,"radius",Math.max(y,T)/2),S=a(d,"maxSides",25);p=n.circle(m,x,C,c,S);break;case"trapezoid":var E=a(d,"slope",.5);p=n.trapezoid(m,x,y,T,E,c);break;case"polygon":var M=a(d,"sides",5),O=a(d,"radius",Math.max(y,T)/2);p=n.polygon(m,x,M,O,c);break;case"fromVertices":case"fromVerts":var L=a(d,"verts",null);if(L)if(typeof L=="string"&&(L=u.fromPath(L)),this.body&&!this.body.hasOwnProperty("temp"))o.setVertices(this.body,L),p=this.body;else{var R=a(d,"flagInternal",!1),w=a(d,"removeCollinear",.01),D=a(d,"minimumArea",10);p=n.fromVertices(m,x,L,c,R,w,D)}break;case"fromPhysicsEditor":p=l.parseBody(m,x,d,c);break;case"fromPhysicsTracer":p=h.parseBody(m,x,d,c);break}return p&&this.setExistingBody(p,d.addToWorld),this}};e.exports=v},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(272),o=i(165),r=i(166),a={setToSleep:function(){return o.set(this.body,!0),this},setAwake:function(){return o.set(this.body,!1),this},setSleepThreshold:function(l){return l===void 0&&(l=60),this.body.sleepThreshold=l,this},setSleepEvents:function(l,h){return this.setSleepStartEvent(l),this.setSleepEndEvent(h),this},setSleepStartEvent:function(l){if(l){var h=this.world;r.on(this.body,"sleepStart",function(u){h.emit(n.SLEEP_START,u,this)})}else r.off(this.body,"sleepStart");return this},setSleepEndEvent:function(l){if(l){var h=this.world;r.on(this.body,"sleepEnd",function(u){h.emit(n.SLEEP_END,u,this)})}else r.off(this.body,"sleepEnd");return this}};e.exports=a},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="afteradd"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="afterremove"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="afterupdate"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="beforeadd"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="beforeremove"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="beforeupdate"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="collisionactive"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="collisionend"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="collisionstart"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragend"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="drag"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragstart"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pause"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="resume"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="sleepend"},function(e,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="sleepstart"},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(41),o={setStatic:function(r){return n.setStatic(this.body,r),this},isStatic:function(){return this.body.isStatic}};e.exports=o},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(41),o=i(14),r=i(269),a=i(270),l=4,h={x:{get:function(){return this.body.position.x},set:function(u){this._tempVec2.set(u,this.y),n.setPosition(this.body,this._tempVec2)}},y:{get:function(){return this.body.position.y},set:function(u){this._tempVec2.set(this.x,u),n.setPosition(this.body,this._tempVec2)}},scaleX:{get:function(){return this._scaleX},set:function(u){var v=1/this._scaleX,d=1/this._scaleY;this._scaleX=u,this._scaleX===0?this.renderFlags&=~l:this.renderFlags|=l,n.scale(this.body,v,d),n.scale(this.body,u,this._scaleY)}},scaleY:{get:function(){return this._scaleY},set:function(u){var v=1/this._scaleX,d=1/this._scaleY;this._scaleY=u,this._scaleY===0?this.renderFlags&=~l:this.renderFlags|=l,n.scale(this.body,v,d),n.scale(this.body,this._scaleX,u)}},angle:{get:function(){return a(this.body.angle*o.RAD_TO_DEG)},set:function(u){this.rotation=a(u)*o.DEG_TO_RAD}},rotation:{get:function(){return this.body.angle},set:function(u){this._rotation=r(u),n.setAngle(this.body,this._rotation)}},setPosition:function(u,v){return u===void 0&&(u=0),v===void 0&&(v=u),this._tempVec2.set(u,v),n.setPosition(this.body,this._tempVec2),this},setRotation:function(u){return u===void 0&&(u=0),this._rotation=r(u),n.setAngle(this.body,u),this},setFixedRotation:function(){return n.setInertia(this.body,1/0),this},setAngle:function(u){return u===void 0&&(u=0),this.angle=u,n.setAngle(this.body,this.rotation),this},setScale:function(u,v,d){u===void 0&&(u=1),v===void 0&&(v=u);var c=1/this._scaleX,p=1/this._scaleY;return this._scaleX=u,this._scaleY=v,n.scale(this.body,c,p,d),n.scale(this.body,u,v,d),this}};e.exports=h},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(41),o={setAngularVelocity:function(r){return n.setAngularVelocity(this.body,r),this},setVelocityX:function(r){return this._tempVec2.set(r,this.body.velocity.y),n.setVelocity(this.body,this._tempVec2),this},setVelocityY:function(r){return this._tempVec2.set(this.body.velocity.x,r),n.setVelocity(this.body,this._tempVec2),this},setVelocity:function(r,a){return this._tempVec2.set(r,a),n.setVelocity(this.body,this._tempVec2),this}};e.exports=o},function(e,f,i){var n={};e.exports=n;var o=i(118),r=i(32);(function(){n.create=function(a){var l={extended:!1,narrowDetections:0,narrowphaseTests:0,narrowReuse:0,narrowReuseCount:0,midphaseTests:0,broadphaseTests:0,narrowEff:1e-4,midEff:1e-4,broadEff:1e-4,collisions:0,buckets:0,bodies:0,pairs:0};return r.extend(l,!1,a)},n.reset=function(a){a.extended&&(a.narrowDetections=0,a.narrowphaseTests=0,a.narrowReuse=0,a.narrowReuseCount=0,a.midphaseTests=0,a.broadphaseTests=0,a.narrowEff=0,a.midEff=0,a.broadEff=0,a.collisions=0,a.buckets=0,a.pairs=0,a.bodies=0)},n.update=function(a,l){if(a.extended){var h=l.world,u=o.allBodies(h);a.collisions=a.narrowDetections,a.pairs=l.pairs.list.length,a.bodies=u.length,a.midEff=(a.narrowDetections/(a.midphaseTests||1)).toFixed(2),a.narrowEff=(a.narrowDetections/(a.narrowphaseTests||1)).toFixed(2),a.broadEff=(1-a.broadphaseTests/(u.length||1)).toFixed(2),a.narrowReuse=(a.narrowReuseCount/(a.narrowphaseTests||1)).toFixed(2)}}})()},function(e,f,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(123),o=i(271),r=i(86),a=i(41),l=i(1392),h=i(84),u=i(0),v=i(118),d=i(591),c=i(128),p=i(273),g=i(50),m=i(1394),x=i(2),y=i(6),T=i(597),C=i(1525),S=i(1526),E=i(1399),M=i(1527),O=i(127),L=i(250),R=i(598),w=i(595),D=i(24),B=i(1400),N=i(599),z=i(274),X=i(20),k=i(592),K=i(83),b=i(64),I=i(1402),G=new u({initialize:function(U){this.scene=U,this.systems=U.sys,this.config=this.getConfig(),this.world,this.add,this.bodyBounds,this.body=a,this.composite=v,this.detector=p,this.grid=T,this.pair=L,this.pairs=R,this.query=B,this.resolver=N,this.sat=z,this.constraint=c,this.bodies=r,this.composites=d,this.axes=o,this.bounds=h,this.svg=k,this.vector=K,this.vertices=b,this.verts=b,this._tempVec2=K.create(),y(this.config,"plugins.collisionevents",!0)&&this.enableCollisionEventsPlugin(),y(this.config,"plugins.attractors",!1)&&this.enableAttractorPlugin(),y(this.config,"plugins.wrap",!1)&&this.enableWrapPlugin(),N._restingThresh=y(this.config,"restingThresh",4),N._restingThreshTangent=y(this.config,"restingThreshTangent",6),N._positionDampen=y(this.config,"positionDampen",.9),N._positionWarming=y(this.config,"positionWarming",.8),N._frictionNormalMultiplier=y(this.config,"frictionNormalMultiplier",5),U.sys.events.once(X.BOOT,this.boot,this),U.sys.events.on(X.START,this.start,this)},boot:function(){this.world=new I(this.scene,this.config),this.add=new m(this.world),this.bodyBounds=new l,this.systems.events.once(X.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new I(this.scene,this.config),this.add=new m(this.world));var Y=this.systems.events;Y.on(X.UPDATE,this.world.update,this.world),Y.on(X.POST_UPDATE,this.world.postUpdate,this.world),Y.once(X.SHUTDOWN,this.shutdown,this)},getConfig:function(){var Y=this.systems.game.config.physics,U=this.systems.settings.physics,W=O(x(U,"matter",{}),x(Y,"matter",{}));return W},enableAttractorPlugin:function(){return w.register(C),w.use(E,C),this},enableWrapPlugin:function(){return w.register(M),w.use(E,M),this},enableCollisionEventsPlugin:function(){return w.register(S),w.use(E,S),this},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},set60Hz:function(){return this.world.getDelta=this.world.update60Hz,this.world.autoUpdate=!0,this},set30Hz:function(){return this.world.getDelta=this.world.update30Hz,this.world.autoUpdate=!0,this},step:function(Y,U){this.world.step(Y,U)},containsPoint:function(Y,U,W){Y=this.getMatterBodies(Y);var H=K.create(U,W),Z=B.point(Y,H);return Z.length>0},intersectPoint:function(Y,U,W){W=this.getMatterBodies(W);var H=K.create(Y,U),Z=[],q=B.point(W,H);return q.forEach(function(_){Z.indexOf(_)===-1&&Z.push(_)}),Z},intersectRect:function(Y,U,W,H,Z,q){Z===void 0&&(Z=!1),q=this.getMatterBodies(q);var _={min:{x:Y,y:U},max:{x:Y+W,y:U+H}},nt=[],rt=B.region(q,_,Z);return rt.forEach(function(at){nt.indexOf(at)===-1&&nt.push(at)}),nt},intersectRay:function(Y,U,W,H,Z,q){Z===void 0&&(Z=1),q=this.getMatterBodies(q);for(var _=[],nt=B.ray(q,K.create(Y,U),K.create(W,H),Z),rt=0;rt<nt.length;rt++)_.push(nt[rt].body);return _},intersectBody:function(Y,U){U=this.getMatterBodies(U);for(var W=[],H=B.collides(Y,U),Z=0;Z<H.length;Z++){var q=H[Z];q.bodyA===Y?W.push(q.bodyB):W.push(q.bodyA)}return W},overlap:function(Y,U,W,H,Z){W===void 0&&(W=null),H===void 0&&(H=null),Z===void 0&&(Z=W),Array.isArray(Y)||(Y=[Y]),Y=this.getMatterBodies(Y),U=this.getMatterBodies(U);for(var q=!1,_=0;_<Y.length;_++)for(var nt=Y[_],rt=B.collides(nt,U),at=0;at<rt.length;at++){var ct=rt[at],ut=ct.bodyA.id===nt.id?ct.bodyB:ct.bodyA;if(!H||H.call(Z,nt,ut,ct)){if(q=!0,W)W.call(Z,nt,ut,ct);else if(!H)return!0}}return q},setCollisionCategory:function(Y,U){return Y=this.getMatterBodies(Y),Y.forEach(function(W){W.collisionFilter.category=U}),this},setCollisionGroup:function(Y,U){return Y=this.getMatterBodies(Y),Y.forEach(function(W){W.collisionFilter.group=U}),this},setCollidesWith:function(Y,U){Y=this.getMatterBodies(Y);var W=0;if(!Array.isArray(U))W=U;else for(var H=0;H<U.length;H++)W|=U[H];return Y.forEach(function(Z){Z.collisionFilter.mask=W}),this},getMatterBodies:function(Y){if(!Y)return this.world.getAllBodies();Array.isArray(Y)||(Y=[Y]);for(var U=[],W=0;W<Y.length;W++){var H=Y[W].hasOwnProperty("body")?Y[W].body:Y[W];U.push(H)}return U},setVelocity:function(Y,U,W){Y=this.getMatterBodies(Y);var H=this._tempVec2;return H.x=U,H.y=W,Y.forEach(function(Z){a.setVelocity(Z,H)}),this},setVelocityX:function(Y,U){Y=this.getMatterBodies(Y);var W=this._tempVec2;return W.x=U,Y.forEach(function(H){W.y=H.velocity.y,a.setVelocity(H,W)}),this},setVelocityY:function(Y,U){Y=this.getMatterBodies(Y);var W=this._tempVec2;return W.y=U,Y.forEach(function(H){W.x=H.velocity.x,a.setVelocity(H,W)}),this},setAngularVelocity:function(Y,U){return Y=this.getMatterBodies(Y),Y.forEach(function(W){a.setAngularVelocity(W,U)}),this},applyForce:function(Y,U){Y=this.getMatterBodies(Y);var W=this._tempVec2;return Y.forEach(function(H){W.x=H.position.x,W.y=H.position.y,a.applyForce(H,W,U)}),this},applyForceFromPosition:function(Y,U,W,H){Y=this.getMatterBodies(Y);var Z=this._tempVec2;return Y.forEach(function(q){H===void 0&&(H=q.angle),Z.x=W*Math.cos(H),Z.y=W*Math.sin(H),a.applyForce(q,U,Z)}),this},applyForceFromAngle:function(Y,U,W){Y=this.getMatterBodies(Y);var H=this._tempVec2;return Y.forEach(function(Z){W===void 0&&(W=Z.angle),H.x=U*Math.cos(W),H.y=U*Math.sin(W),a.applyForce(Z,{x:Z.position.x,y:Z.position.y},H)}),this},getConstraintLength:function(Y){var U=Y.pointA.x,W=Y.pointA.y,H=Y.pointB.x,Z=Y.pointB.y;return Y.bodyA&&(U+=Y.bodyA.position.x,W+=Y.bodyA.position.y),Y.bodyB&&(H+=Y.bodyB.position.x,Z+=Y.bodyB.position.y),g(U,W,H,Z)},alignBody:function(Y,U,W,H){Y=Y.hasOwnProperty("body")?Y.body:Y;var Z;switch(H){case n.TOP_LEFT:case n.LEFT_TOP:Z=this.bodyBounds.getTopLeft(Y,U,W);break;case n.TOP_CENTER:Z=this.bodyBounds.getTopCenter(Y,U,W);break;case n.TOP_RIGHT:case n.RIGHT_TOP:Z=this.bodyBounds.getTopRight(Y,U,W);break;case n.LEFT_CENTER:Z=this.bodyBounds.getLeftCenter(Y,U,W);break;case n.CENTER:Z=this.bodyBounds.getCenter(Y,U,W);break;case n.RIGHT_CENTER:Z=this.bodyBounds.getRightCenter(Y,U,W);break;case n.LEFT_BOTTOM:case n.BOTTOM_LEFT:Z=this.bodyBounds.getBottomLeft(Y,U,W);break;case n.BOTTOM_CENTER:Z=this.bodyBounds.getBottomCenter(Y,U,W);break;case n.BOTTOM_RIGHT:case n.RIGHT_BOTTOM:Z=this.bodyBounds.getBottomRight(Y,U,W);break}return Z&&a.setPosition(Y,Z),this},shutdown:function(){var Y=this.systems.events;this.world&&(Y.off(X.UPDATE,this.world.update,this.world),Y.off(X.POST_UPDATE,this.world.postUpdate,this.world)),Y.off(X.SHUTDOWN,this.shutdown,this),this.add&&this.add.destroy(),this.world&&this.world.destroy(),this.add=null,this.world=null},destroy:function(){this.shutdown(),this.scene.sys.events.off(X.START,this.start,this),this.scene=null,this.systems=null}});D.register("MatterPhysics",G,"matterPhysics"),e.exports=G},function(e,f,i){var n=i(594),o={name:"matter-attractors",version:"0.1.7",for:"matter-js@^0.14.2",silent:!0,install:function(r){r.after("Body.create",function(){o.Body.init(this)}),r.before("Engine.update",function(a){o.Engine.update(a)})},Body:{init:function(r){r.plugin.attractors=r.plugin.attractors||[]}},Engine:{update:function(r){for(var a=n.Composite.allBodies(r.world),l=0;l<a.length;l++){var h=a[l],u=h.plugin.attractors;if(u&&u.length>0)for(var v=0;v<a.length;v++){var d=a[v];if(l!==v)for(var c=0;c<u.length;c++){var p=u[c],g=p;n.Common.isFunction(p)&&(g=p(h,d)),g&&n.Body.applyForce(d,d.position,g)}}}}},Attractors:{gravityConstant:.001,gravity:function(r,a){var l=n.Vector.sub(a.position,r.position),h=n.Vector.magnitudeSquared(l)||1e-4,u=n.Vector.normalise(l),v=-o.Attractors.gravityConstant*(r.mass*a.mass/h),d=n.Vector.mult(u,v);n.Body.applyForce(r,r.position,n.Vector.neg(d)),n.Body.applyForce(a,a.position,d)}}};e.exports=o},function(e,f){/**
 * @author       @dxu https://github.com/dxu/matter-collision-events
 * @author       Richard Davey <rich@photonstorm.com>
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={name:"matter-collision-events",version:"0.1.6",for:"matter-js@^0.14.2",silent:!0,install:function(n){n.after("Engine.create",function(){n.Events.on(this,"collisionStart",function(o){o.pairs.map(function(r){var a=r.bodyA,l=r.bodyB;a.gameObject&&a.gameObject.emit("collide",a,l,r),l.gameObject&&l.gameObject.emit("collide",l,a,r),n.Events.trigger(a,"onCollide",{pair:r}),n.Events.trigger(l,"onCollide",{pair:r}),a.onCollideCallback&&a.onCollideCallback(r),l.onCollideCallback&&l.onCollideCallback(r),a.onCollideWith[l.id]&&a.onCollideWith[l.id](l,r),l.onCollideWith[a.id]&&l.onCollideWith[a.id](a,r)})}),n.Events.on(this,"collisionActive",function(o){o.pairs.map(function(r){var a=r.bodyA,l=r.bodyB;a.gameObject&&a.gameObject.emit("collideActive",a,l,r),l.gameObject&&l.gameObject.emit("collideActive",l,a,r),n.Events.trigger(a,"onCollideActive",{pair:r}),n.Events.trigger(l,"onCollideActive",{pair:r}),a.onCollideActiveCallback&&a.onCollideActiveCallback(r),l.onCollideActiveCallback&&l.onCollideActiveCallback(r)})}),n.Events.on(this,"collisionEnd",function(o){o.pairs.map(function(r){var a=r.bodyA,l=r.bodyB;a.gameObject&&a.gameObject.emit("collideEnd",a,l,r),l.gameObject&&l.gameObject.emit("collideEnd",l,a,r),n.Events.trigger(a,"onCollideEnd",{pair:r}),n.Events.trigger(l,"onCollideEnd",{pair:r}),a.onCollideEndCallback&&a.onCollideEndCallback(r),l.onCollideEndCallback&&l.onCollideEndCallback(r)})})})}};e.exports=i},function(e,f,i){var n=i(594),o={name:"matter-wrap",version:"0.1.4",for:"matter-js@^0.14.2",silent:!0,install:function(r){r.after("Engine.update",function(){o.Engine.update(this)})},Engine:{update:function(r){for(var a=r.world,l=n.Composite.allBodies(a),h=n.Composite.allComposites(a),u=0;u<l.length;u+=1){var v=l[u];v.plugin.wrap&&o.Body.wrap(v,v.plugin.wrap)}for(u=0;u<h.length;u+=1){var d=h[u];d.plugin.wrap&&o.Composite.wrap(d,d.plugin.wrap)}}},Bounds:{wrap:function(r,a){var l=null,h=null;if(typeof a.min.x!="undefined"&&typeof a.max.x!="undefined"&&(r.min.x>a.max.x?l=a.min.x-r.max.x:r.max.x<a.min.x&&(l=a.max.x-r.min.x)),typeof a.min.y!="undefined"&&typeof a.max.y!="undefined"&&(r.min.y>a.max.y?h=a.min.y-r.max.y:r.max.y<a.min.y&&(h=a.max.y-r.min.y)),l!==null||h!==null)return{x:l||0,y:h||0}}},Body:{wrap:function(r,a){var l=o.Bounds.wrap(r.bounds,a);return l&&n.Body.translate(r,l),l}},Composite:{bounds:function(r){for(var a=n.Composite.allBodies(r),l=[],h=0;h<a.length;h+=1){var u=a[h];l.push(u.bounds.min,u.bounds.max)}return n.Bounds.create(l)},wrap:function(r,a){var l=o.Bounds.wrap(o.Composite.bounds(r),a);return l&&n.Composite.translate(r,l),l}}};e.exports=o},function(e,f,i){(function(n){/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2020 Photon Storm Ltd.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var o=i(33),r=i(17),a={Actions:i(275),Animations:i(723),BlendModes:i(35),Cache:i(735),Cameras:i(738),Core:i(806),Class:i(0),Create:i(888),Curves:i(894),Data:i(896),Display:i(898),DOM:i(917),Events:i(918),Game:i(920),GameObjects:i(1011),Geom:i(483),Input:i(1308),Loader:i(1338),Math:i(193),Physics:i(1493),Plugins:i(1403),Renderer:i(1405),Scale:i(1412),ScaleModes:i(168),Scene:i(418),Scenes:i(1413),Structs:i(1415),Textures:i(1416),Tilemaps:i(1418),Time:i(1461),Tweens:i(1463),Utils:i(1481)};a.Sound=i(1492),a=r(!1,a,o),e.exports=a,n.Phaser=a}).call(this,i(600))}])})})(Vy);var no=vL(Vy.exports);class yt{constructor(t){this.scene=t,this.displayList=t.sys.displayList,this.updateList=t.sys.updateList,t.events.once("destroy",this.destroy,this)}destroy(){this.scene=null,this.displayList=null,this.updateList=null}static register(t,e){yt.prototype[t]=e}}var pL=function(s){return s===void 0&&(s=gL),this.getFrameNameCallback=s,this},gL=function(s,t,e){return e==="__BASE"?`${s},${t}`:`${e}_${s},${t}`},oa=function(s){var t,e,f;if(typeof s!="object"||s===null)return s;t=Array.isArray(s)?[]:{};for(f in s)e=s[f],t[f]=oa(e);return t},mL=function(s,t,e,f){Array.isArray(t)&&(f=e,e=t,t=void 0),t===void 0&&(t="__BASE"),e=oa(e),f=oa(f),this.textureKey=s,this.baseFrameName=t,this.columns.data=e,this.columns.count=e?e.length:0,this.columns.stretch=0,this.columns.minWidth=0,this.columns.scale=1,this.rows.data=f,this.rows.count=f?f.length:0,this.rows.stretch=0,this.rows.minHeight=0,this.rows.scale=1;var i=this.scene.sys.textures.get(s);if(!i)return this.clear(),this;if(!e||!f)return this.clear(),this;for(var n=i.get(t),o=n.width,r=0,a=0,l=e.length;a<l;a++)e[a]===void 0?r++:typeof e[a]=="number"?o-=e[a]:o-=e[a].width;for(var h=o/r,u=n.height,v=0,a=0,l=f.length;a<l;a++)f[a]===void 0?v++:typeof f[a]=="number"?u-=f[a]:u-=f[a].width;for(var d=u/v,c,p,g,m,x,y=0,T=0,C=0,S=f.length;C<S;C++){f[C]===void 0&&(f[C]=d),typeof f[C]=="number"&&(f[C]={height:f[C],stretch:C%2}),c=f[C],g=c.height,this.rows.stretch+=c.stretch|0,this.rows.minHeight+=c.stretch>0?0:g,y=0;for(var a=0,E=e.length;a<E;a++){if(e[a]===void 0&&(e[a]=h),typeof e[a]=="number"&&(e[a]={width:e[a],stretch:a%2}),p=e[a],m=p.width,C===0&&(this.columns.stretch+=p.stretch|0,this.columns.minWidth+=p.stretch>0?0:m),m>=1&&g>=1){x=this.getFrameNameCallback(a,C,t);var M=typeof x;(M==="string"||M==="number")&&i.add(x,0,y+n.cutX,T+n.cutY,m,g)}y+=m}T+=g}return this.updateTexture(),this},xL=function(){if(this.clear(),this.textureKey===void 0)return this;var s=this.scene.sys.textures.get(this.textureKey);if(!s)return this;var t=this.columns.minWidth*this.maxFixedPartScaleX,e=this.rows.minHeight*this.maxFixedPartScaleY,f=this.width-t,i=this.height-e,n=f>=0?this.maxFixedPartScaleX:this.width/t,o=i>=0?this.maxFixedPartScaleY:this.height/e;if(this.preserveRatio){var r=Math.min(n,o);if(n>r){var a=(n-r)*t;f>=0?f+=a:f=a,n=r}if(o>r){var l=(o-r)*e;i>=0?i+=l:i=l,o=r}}this.columns.scale=n,this.rows.scale=o;var h;f>0?h=this.columns.stretch>0?f/this.columns.stretch:0:h=0;var u;i>0?u=this.rows.stretch>0?i/this.rows.stretch:0:u=0;for(var v,d,c,p,g,m=0,x=0,y,T=0,C=this.rows.count;T<C;T++){c=this.rows.data[T],g=c.stretch===0?c.height*o:u*c.stretch,m=0;for(var S=0,E=this.columns.count;S<E;S++)d=this.columns.data[S],p=d.stretch===0?d.width*n:h*d.stretch,v=this.getFrameNameCallback(S,T,this.baseFrameName),s.has(v)&&p>0&&g>0&&(c.stretch===0&&d.stretch===0||this.getStretchMode(S,T)===0?y=0:y=1,y===0?this._drawImage(this.textureKey,v,m,x,p,g):this._drawTileSprite(this.textureKey,v,m,x,p,g)),m+=p;x+=g}};const yL=Phaser.Utils.Objects.IsPlainObject,p0=Phaser.Utils.Objects.GetValue;var TL=function(s){return yL(s)?(this.stretchMode.edge=Af(p0(s,"edge",0)),this.stretchMode.internal=Af(p0(s,"internal",0))):(s=Af(s),this.stretchMode.edge=s,this.stretchMode.internal=s),this},Af=function(s){return typeof s=="string"&&(s=CL[s]),s};const CL={scale:0,repeat:1};var SL=function(s,t){return s===0||s===this.columns.count-1||t===0||t===this.rows.count-1},EL=function(s,t){return SL.call(this,s,t)?this.stretchMode.edge:this.stretchMode.internal},PL=function(s){return s==null&&(s=!0),this.preserveRatio=s,this},ML=function(s,t){return t===void 0&&(t=s),this.maxFixedPartScaleX=s,this.maxFixedPartScaleY=t,this},mi=function(){},AL={_drawImage:mi,_drawTileSprite:mi,setGetFrameNameCallback:pL,setTexture:mL,updateTexture:xL,setStretchMode:TL,getStretchMode:EL,setPreserveRatio:PL,setMaxFixedPartScale:ML};const Da=Phaser.Utils.Objects.IsPlainObject,te=Phaser.Utils.Objects.GetValue;var Uy=function(s,t){class e extends s{constructor(i,n,o,r,a,l,h,u,v,d){Da(n)?(d=n,n=te(d,"x",0),o=te(d,"y",0),r=te(d,"width",1),a=te(d,"height",1),l=te(d,"key",void 0),h=te(d,"baseFrame",void 0),u=te(d,"columns",void 0),v=te(d,"rows",void 0)):Da(r)?(d=r,r=te(d,"width",1),a=te(d,"height",1),l=te(d,"key",void 0),h=te(d,"baseFrame",void 0),u=te(d,"columns",void 0),v=te(d,"rows",void 0)):Da(l)?(d=l,l=te(d,"key",void 0),h=te(d,"baseFrame",void 0),u=te(d,"columns",void 0),v=te(d,"rows",void 0)):Da(h)?(d=h,h=te(d,"baseFrame",void 0),u=te(d,"columns",void 0),v=te(d,"rows",void 0)):Array.isArray(h)?(d=v,v=u,u=h,h=te(d,"baseFrame",void 0)):Da(u)&&(d=u,u=te(d,"columns",void 0),v=te(d,"rows",void 0)),super(i),this.type=t,this.setPosition(n,o).setSize(r,a).setOrigin(.5,.5),this.columns={},this.rows={},this.stretchMode={},this._tileSprite=void 0,this._image=void 0,this.setGetFrameNameCallback(te(d,"getFrameNameCallback",void 0)),this.setStretchMode(te(d,"stretchMode",0)),this.setPreserveRatio(te(d,"preserveRatio",!0));var c=te(d,"maxFixedPartScale",1),p=te(d,"maxFixedPartScaleX",c),g=te(d,"maxFixedPartScaleY",void 0);this.setMaxFixedPartScale(p,g),this.setTexture(l,h,u,v)}get minWidth(){return this.columns.minWidth}get minHeight(){return this.rows.minHeight}get fixedPartScaleX(){return this.columns.scale}get fixedPartScaleY(){return this.rows.scale}resize(i,n){return this.width===i&&this.height===n?this:(super.resize(i,n),this.updateTexture(),this)}}return Object.assign(e.prototype,AL),e},Wy=function(s,t,e){return e===void 0&&(e="image"),s[t]||(s[t]=s.scene.make[e]({add:!1,origin:{x:0,y:0}}),s.once("destroy",function(){s[t]&&(s[t].destroy(),s[t]=void 0)})),s[t]},OL=function(s,t,e,f,i,n){var o=Wy(this,"_image","image").setTexture(s,t).setDisplaySize(i,n);this.draw(o,e,f)},RL=function(s,t,e,f,i,n){var o=Wy(this,"_tileSprite","tileSprite").setTexture(s,t).setSize(i,n);this.draw(o,e,f)},LL={_drawImage:OL,_drawTileSprite:RL};const wL=Phaser.GameObjects.RenderTexture;class Sl extends Uy(wL,"rexNinePatch"){}Object.assign(Sl.prototype,LL);var Xy=function(s){return s==null||s===""||s.length===0},FL=function(s,t,e){var f=s;if(!Xy(t)){typeof t=="string"&&(t=t.split("."));for(var i,n=0,o=t.length;n<o;n++){if(i=t[n],f[i]==null||typeof f[i]!="object"){var r;n===o-1?e===void 0?r={}:r=e:r={},f[i]=r}f=f[i]}}return f},Ct=function(s,t,e,f){if(f===void 0&&(f="."),typeof s=="object"){if(Xy(t)){if(e==null)return;typeof e=="object"&&(s=e)}else{typeof t=="string"&&(t=t.split(f));var i=t.pop(),n=FL(s,t);n[i]=e}return s}};yt.register("ninePatch",function(s,t,e,f,i,n,o,r){var a=new Sl(this.scene,s,t,e,f,i,n,o,r);return this.scene.add.existing(a),a});Ct(window,"RexPlugins.UI.NinePatch",Sl);const IL=Phaser.GameObjects.GetCalcMatrix;var DL=function(s,t,e,f){var i=t.getRenderList();if(i.length!==0){e.addToRenderList(t);var n=s.pipelines.set(t.pipeline),o=t.frame.glTexture,r=n.setGameObject(t),a=e.roundPixels,l=IL(t,e,f),h=n.calcMatrix.copyFrom(l.calc),u=t._displayOriginX,v=t._displayOriginY,d=e.alpha*t.alpha;s.pipelines.preBatch(t);for(var c=0,p=i.length;c<p;c++)i[c].webglRender(n,h,d,u,v,o,r,a);s.pipelines.postBatch(t)}};const BL=Phaser.Renderer.Canvas.SetTransform;var bL=function(s,t,e,f){var i=s.currentContext,n=t.getRenderList();if(!(n.length===0||!BL(s,i,t,e,f))){e.addToRenderList(t);var o=e.roundPixels,r=-t._displayOriginX,a=-t._displayOriginY;i.translate(r,a);for(var l=0,h=n.length;l<h;l++)n[l].canvasRender(i,r,a,o);i.restore()}},GL={renderWebGL:DL,renderCanvas:bL},Hy=function(s,t){return this.texture=this.scene.sys.textures.get(s),this.frame=this.texture.get(t),this},g0=function(s,t){if(this.width===s&&this.height===t)return this;this.width=s,this.height=t,this.updateDisplayOrigin();var e=this.input;return e&&!e.customHitArea&&(e.hitArea.width=s,e.hitArea.height=t),this},NL=function(s){return this.lastAppendedChildren.length=0,Array.isArray(s)?(this.children.add(s),this.lastAppendedChildren.push(...s)):(this.children.add(s),this.lastAppendedChildren.push(s)),this};const YL=Phaser.Utils.Array.Remove;var zL=function(s){return this.poolManager&&this.poolManager.free(s),YL(this.children.list,s),this.lastAppendedChildren.length=0,this.dirty=!0,this},m0=function(){return this.poolManager&&this.poolManager.freeMultiple(this.children.list),this.children.list.length=0,this.lastAppendedChildren.length=0,this.dirty=!0,this},VL=function(){return this.lastAppendedChildren},UL=function(){return this.children.list},WL={setTint(s){return this.tint=s,this.tintFill=!1,this},setTintFill(s){return this.tint=s,this.tintFill=!0,this},clearTint(){return this.setTint(16777215),this}},$y={setTexture:Hy,resize:g0,setSize:g0,addChild:NL,removeChild:zL,removeChildren:m0,clear:m0,getLastAppendedChildren:VL,getChildren:UL};Object.assign($y,WL);class bs{constructor(){this.items=[]}destroy(){this.clear(),this.items=void 0}pop(){return this.items.length>0?this.items.pop():null}push(t){return this.items.push(t),this}pushMultiple(t){return this.items.push.apply(this.items,t),t.length=0,this}clear(){return this.items.length=0,this}}const XL=Phaser.Utils.Objects.GetValue;var HL={};class $L{constructor(t){this.pools=XL(t,"pools",HL)}destroy(){this.pools=void 0}free(t){if(!this.pools)return this;var e=t.type;return this.pools.hasOwnProperty(e)||(this.pools[e]=new bs),this.pools[e].push(t),t.onFree(),this}freeMultiple(t){if(!this.pools)return this;for(var e=0,f=t.length;e<f;e++)this.free(t[e]);return this}allocate(t){return!this.pools||!this.pools.hasOwnProperty(t)?null:this.pools[t].pop()}}const kL=Phaser.GameObjects.GameObject,KL=Phaser.Utils.Objects.IsPlainObject,Ba=Phaser.Utils.Objects.GetValue,ZL=Phaser.Structs.List,JL=Phaser.Utils.Array.StableSort;class ky extends kL{constructor(t,e,f,i,n,o){KL(e)&&(o=e,e=Ba(o,"x",0),f=Ba(o,"y",0),i=Ba(o,"texture"),n=Ba(o,"frame")),e===void 0&&(e=0),f===void 0&&(f=0),super(t,"rexBlitter"),this.children=new ZL,this.renderList=[],this.displayListDirty=!1,this.lastAppendedChildren=[];var r=Ba(o,"reuseBob",!0);this.poolManager=r?new $L(o):void 0,this.setTexture(i,n).setPosition(e,f).setOrigin(0,0).clearTint().initPipeline()}preDestroy(){this.removeChildren(),this.children.destroy(),this.renderList.length=0,this.poolManager&&this.poolManager.destroy()}getRenderList(){if(this.displayListDirty){this.renderList.length=0;for(var t=!1,e=this.children.list,f=0,i=e.length;f<i;f++){var n=e[f];QL(n)&&(this.renderList.push(n),t||(t=n.depth!==0))}t&&JL(this.renderList,jL),this.displayListDirty=!1}return this.renderList}}var QL=function(s){return s.active&&s.visible&&s.alpha>0},jL=function(s,t){return s._depth-t._depth};const un=Phaser.GameObjects.Components;Phaser.Class.mixin(ky,[un.Alpha,un.BlendMode,un.ComputedSize,un.Depth,un.GetBounds,un.Mask,un.Origin,un.Pipeline,un.ScrollFactor,un.Transform,un.Visible,GL,$y]);const Ky="image";/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var gi=function(s,t,e){if(!s||typeof s=="number")return e;if(s.hasOwnProperty(t))return s[t];if(t.indexOf(".")!==-1){for(var f=t.split("."),i=s,n=e,o=0;o<f.length;o++)if(i.hasOwnProperty(f[o]))n=i[f[o]],i=i[f[o]];else{n=e;break}return n}else return e},Is=function(s){if(typeof s!="object"||s===null)return s;if(Array.isArray(s))s.length=0;else for(var t in s)delete s[t];return s},El={enableData(){return this.data===void 0&&(this.data={}),this},setData(s,t){if(this.enableData(),arguments.length===1){var e=s;for(s in e)this.data[s]=e[s]}else this.data[s]=t;return this},getData(s,t){return this.enableData(),s===void 0?this.data:gi(this.data,s,t)},incData(s,t,e){return e===void 0&&(e=0),this.enableData(),this.setData(s,this.getData(s,e)+t),this},mulData(s,t,e){return e===void 0&&(e=0),this.enableData(),this.setData(s,this.getData(s,e)*t),this},clearData(){return this.data&&Is(this.data),this}};class Zy{constructor(t,e){this.type=e,this.data=void 0,this.setParent(t).reset().setActive()}destroy(){this.parent&&this.parent.removeChild(this)}setParent(t){return this.parent=t,this}setDisplayListDirty(t){return t&&this.parent&&(this.parent.displayListDirty=!0),this}get active(){return this._active}set active(t){this.setDisplayListDirty(this._active!=t),this._active=t}setActive(t){return t===void 0&&(t=!0),this.active=t,this}modifyPorperties(t){return this}reset(){this.clearData()}onFree(){this.reset().setActive(!1).setParent()}}Object.assign(Zy.prototype,El);const qL=Phaser.Math.DegToRad,_L=Phaser.Math.RadToDeg,Br=Phaser.Utils.Objects.GetValue;class tw extends Zy{get visible(){return this._visible}set visible(t){this.setDisplayListDirty(this._visible!=t),this._visible=t}setVisible(t){return t===void 0&&(t=!0),this.visible=t,this}get alpha(){return this._alpha}set alpha(t){this.setDisplayListDirty(!!this._alpha!=!!t),this._alpha=t}setAlpha(t){return this.alpha=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setPosition(t,e){return this.x=t,this.y=e,this}setRotation(t){return this.rotation=t,this}get angle(){return _L(this.rotation)}set angle(t){this.rotation=qL(t)}setAngle(t){return this.angle=t,this}setScaleX(t){return this.scaleX=t,this}get width(){return this._width}set width(t){this._width=t}setWidth(t,e){return e===void 0&&(e=!1),this.width=t,e&&(this.scaleY=this.scaleX),this}setScaleY(t){return this.scaleY=t,this}setScale(t,e){return e===void 0&&(e=t),this.scaleX=t,this.scaleY=e,this}get height(){return this._height}set height(t){this._height=t}setHeight(t,e){return e===void 0&&(e=!1),this.height=t,e&&(this.scaleX=this.scaleY),this}setScale(t,e){return e===void 0&&(e=t),this.scaleX=t,this.scaleY=e,this}get displayWidth(){return this._width*this.scaleX}set displayWidth(t){this.scaleX=t/this._width}setDisplayWidth(t,e){return e===void 0&&(e=!1),this.displayWidth=t,e&&(this.scaleY=this.scaleX),this}get displayHeight(){return this._height*this.scaleY}set displayHeight(t){this.scaleY=t/this._height}setDisplayHeight(t,e){return e===void 0&&(e=!1),this.displayHeight=t,e&&(this.scaleX=this.scaleY),this}setOriginX(t){return this.originX=t,this._displayOriginX=this.width*t,this}setOriginY(t){return this.originY=t,this._displayOriginY=this.height*t,this}setOrigin(t,e){return e===void 0&&(e=t),this.setOriginX(t).setOriginY(e),this}get depth(){return this._depth}set depth(t){this.setDisplayListDirty(this._depth!=t),this._depth=t}setDepth(t){return t===void 0&&(t=0),this.depth=t,this}modifyPorperties(t){if(!t)return this;t.hasOwnProperty("x")&&this.setX(t.x),t.hasOwnProperty("y")&&this.setY(t.y),t.hasOwnProperty("rotation")?this.setRotation(t.rotation):t.hasOwnProperty("angle")&&this.setAngle(t.angle),t.hasOwnProperty("alpha")&&this.setAlpha(t.alpha);var e=Br(t,"width",void 0),f=Br(t,"height",void 0),i=Br(t,"scale",void 0),n=Br(t,"scaleX",i),o=Br(t,"scaleY",i);e!==void 0?f===void 0&&o===void 0?this.setWidth(e,!0):this.setWidth(e):n!==void 0?this.setScaleX(n):t.hasOwnProperty("displayWidth")&&this.setDisplayWidth(t.displayWidth),f!==void 0?e===void 0&&n===void 0?this.setHeight(f,!0):this.setHeight(f):o!==void 0?this.setScaleY(o):t.hasOwnProperty("displayHeight")&&this.setDisplayHeight(t.displayHeight);var r=Br(t,"origin",void 0);return r!==void 0?this.setOrigin(r):(t.hasOwnProperty("originX")&&this.setOriginX(t.originX),t.hasOwnProperty("originY")&&this.setOriginY(t.originY)),t.hasOwnProperty("depth")&&this.setDepth(t.depth),this}reset(){return super.reset(),this.setVisible().setAlpha(1).setPosition(0,0).setRotation(0).setScale(1,1).setOrigin(0).setDepth(0),this}webglRender(t,e,f,i,n,o,r,a){}canvasRender(t,e,f,i){}}const ew=Phaser.GameObjects.Components.TransformMatrix,iw=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha;var fn=new ew,nw=function(s,t,e,f,i,n,o,r){var a=this._width,l=this._height,h=a*this.originX,u=l*this.originY,v=this.x-f,d=this.y-i,c=1,p=1;this.flipX&&(v+=a-h*2,c=-1),this.flipY&&(d+=l-u*2,p=-1),fn.applyITRS(v,d,this.rotation,this.scaleX*c,this.scaleY*p),t.multiply(fn,fn);var g=-h,m=-u,x=g+a,y=m+l,T=fn.getXRound(g,m,r),C=fn.getXRound(g,y,r),S=fn.getXRound(x,y,r),E=fn.getXRound(x,m,r),M=fn.getYRound(g,m,r),O=fn.getYRound(g,y,r),L=fn.getYRound(x,y,r),R=fn.getYRound(x,m,r),w=this.frame.u0,D=this.frame.v0,B=this.frame.u1,N=this.frame.v1,z=iw(this.tint,this.alpha*e);s.batchQuad(this.parent,T,M,C,O,S,L,E,R,w,D,B,N,z,z,z,z,this.tintFill,n,o)},sw=function(s,t,e,f){s.save();var i=this._width,n=this._height,o=i*this.originX,r=n*this.originY,a=this.x-o,l=this.y-r,h=1,u=1;this.flipX&&(a+=i,h=-1),this.flipY&&(l+=n,u=-1),f&&(a=Math.round(a),l=Math.round(l)),s.translate(a,l),s.rotate(this.rotation),s.scale(this.scaleX*h,this.scaleY*u);var v=this.frame;s.drawImage(v.source.image,v.cutX,v.cutY,i,n,0,0,i,n),s.restore()};const rw=Phaser.Utils.Objects.IsPlainObject;class Jy extends tw{constructor(t,e){super(t,Ky),this.setFrame(e)}get width(){return this._width}set width(t){}get height(){return this._height}set height(t){}setFrame(t){return arguments.length>0&&!rw(t)&&(t=this.parent.texture.get(t)),this.frame=t,this._width=t?t.width:0,this._height=t?t.height:0,this}setFlipX(t){return t===void 0&&(t=!0),this.flipX=t,this}setFlipY(t){return t===void 0&&(t=!0),this.flipY=t,this}resetFlip(){return this.flipX=!1,this.flipY=!1,this}get tint(){return this._tint===void 0?this.parent.tint:this._tint}set tint(t){this._tint=t}setTint(t){return this.tint=t,this.tintFill=!1,this}setTintFill(t){return this.tint=t,this.tintFill=!0,this}clearTint(){return this.setTint(16777215),this}resetTint(){return this.tint=void 0,this.tintFill=void 0,this}get tintFill(){return this._tintFill===void 0?this.parent.tintFill:this._tintFill}set tintFill(t){this._tintFill=t}reset(){return super.reset(),this.resetFlip().resetTint().setFrame(),this}modifyPorperties(t){return t?(t.hasOwnProperty("width")&&(t.displayWidth=t.width,delete t.width),t.hasOwnProperty("height")&&(t.displayHeight=t.height,delete t.height),t.hasOwnProperty("frame")&&this.setFrame(t.frame),super.modifyPorperties(t),t.hasOwnProperty("flipX")&&this.setFlipX(t.flipX),t.hasOwnProperty("flipY")&&this.setFlipY(t.flipY),t.hasOwnProperty("tint")&&this.setTint(t.tint),t.hasOwnProperty("tintFill")&&this.setTintFill(t.tintFill),this):this}}var aw={webglRender:nw,canvasRender:sw};Object.assign(Jy.prototype,aw);var Qy=function(s,t){typeof t=="string"&&(t={frame:t});var e=s.poolManager?s.poolManager.allocate(Ky):null;return e===null?e=new Jy(s):e.setParent(s).setActive(),e.modifyPorperties(t),s.addChild(e),e},ow=function(s,t,e,f,i,n){Qy(this,{frame:t,x:e,y:f,width:i,height:n})},hw=function(s,t,e,f,i,n){var o=this.texture.get(t),r=o.width,a=o.height,l=Math.floor(i/r),h=Math.floor(n/a);e+=(i-l*r)/2,f+=(n-h*a)/2;for(var u=0;u<l;u++)for(var v=0;v<h;v++)Qy(this,{frame:t,x:e+u*r,y:f+v*a})},lw={_drawImage:ow,_drawTileSprite:hw};class Pl extends Uy(ky,"rexNinePatch2"){setTexture(t,e,f,i){return Hy.call(this,t,"__BASE"),this.columns?(super.setTexture(t,e,f,i),this):this}}Object.assign(Pl.prototype,lw);yt.register("ninePatch2",function(s,t,e,f,i,n,o,r){var a=new Pl(this.scene,s,t,e,f,i,n,o,r);return this.scene.add.existing(a),a});Ct(window,"RexPlugins.UI.NinePatch2",Pl);const As=Phaser.Utils.Objects.GetValue;class jy{constructor(t,e,f,i,n){this.cornerRadius={},this._width=0,this._height=0,this.setTo(t,e,f,i,n)}setTo(t,e,f,i,n){return this.setPosition(t,e),this.setRadius(n),this.setSize(f,i),this}setPosition(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),this.x=t,this.y=e,this}setRadius(t){return t===void 0&&(t=0),this.radius=t,this}setSize(t,e){return this.width=t,this.height=e,this}get minWidth(){var t=this.cornerRadius;return Math.max(t.tl.x+t.tr.x,t.bl.x+t.br.x)}get minHeight(){var t=this.cornerRadius;return Math.max(t.tl.y+t.bl.y,t.tr.y+t.br.y)}get width(){return this._width}set width(t){t==null&&(t=0),this._width=Math.max(t,this.minWidth)}get height(){return this._height}set height(t){t==null&&(t=0),this._height=Math.max(t,this.minHeight)}get radius(){var t=this.cornerRadius;return Math.max(t.tl.x,t.tl.y,t.tr.x,t.tr.y,t.bl.x,t.bl.y,t.br.x,t.br.y)}set radius(t){var e,f;typeof t=="number"?(e=t,f=t):(e=As(t,"x",0),f=As(t,"y",0));var i=this.cornerRadius;i.tl=Ph(As(t,"tl",void 0),e,f),i.tr=Ph(As(t,"tr",void 0),e,f),i.bl=Ph(As(t,"bl",void 0),e,f),i.br=Ph(As(t,"br",void 0),e,f)}get radiusTL(){var t=this.cornerRadius.tl;return Math.max(t.x,t.y)}set radiusTL(t){Mh(this.cornerRadius.tl,t)}get radiusTR(){var t=this.cornerRadius.tr;return Math.max(t.x,t.y)}set radiusTR(t){Mh(this.cornerRadius.tr,t)}get radiusBL(){var t=this.cornerRadius.bl;return Math.max(t.x,t.y)}set radiusBL(t){Mh(this.cornerRadius.bl,t)}get radiusBR(){var t=this.cornerRadius.br;return Math.max(t.x,t.y)}set radiusBR(t){Mh(this.cornerRadius.br,t)}}var Ph=function(s,t,e){return s===void 0?{x:t,y:e}:typeof s=="number"?{x:s,y:s}:s},Mh=function(s,t){typeof t=="number"?(s.x=t,s.y=t):(s.x=As(t,"x",0),s.y=As(t,"y",0))},ea=function(s,t,e){var f=e.length;if(f>=2){var i=e[f-2],n=e[f-1];if(s===i&&t===n)return e}return e.push(s,t),e};const x0=Phaser.Math.DegToRad;var ia=function(s,t,e,f,i,n,o,r,a){o&&n>i?n-=360:!o&&n<i&&(n+=360);var l=n-i,h=x0(l)/r;i=x0(i);for(var u=0;u<=r;u++){var v=i+h*u,d=s+e*Math.cos(v),c=t+f*Math.sin(v);ea(d,c,a)}return a},uw=Phaser.Renderer.WebGL.Utils,qy=function(s,t,e,f,i,n){for(var o=uw.getTintAppendFloatAlpha(e.fillColor,e.fillAlpha*f),r=e.pathData,a=e.pathIndexes,l=0;l<a.length;l+=3){var h=a[l]*2,u=a[l+1]*2,v=a[l+2]*2,d=r[h+0]-i,c=r[h+1]-n,p=r[u+0]-i,g=r[u+1]-n,m=r[v+0]-i,x=r[v+1]-n,y=t.getX(d,c),T=t.getY(d,c),C=t.getX(p,g),S=t.getY(p,g),E=t.getX(m,x),M=t.getY(m,x);s.batchTri(e,y,T,C,S,E,M,0,0,1,1,o,o,o,2)}},fw=Phaser.Renderer.WebGL.Utils,Ml=function(s,t,e,f,i){var n=s.strokeTint,o=fw.getTintAppendFloatAlpha(t.strokeColor,t.strokeAlpha*e);n.TL=o,n.TR=o,n.BL=o,n.BR=o;var r=t.pathData,a=r.length-1,l=t.lineWidth,h=l/2,u=r[0]-f,v=r[1]-i;t.closePath||(a-=2);for(var d=2;d<a;d+=2){var c=r[d]-f,p=r[d+1]-i;s.batchLine(u,v,c,p,h,h,l,d-2,t.closePath?d===a-1:!1),u=c,v=p}};const dw=Phaser.GameObjects.GetCalcMatrix;var cw=function(s,t,e,f){t.dirty&&(t.updateData(),t.dirty=!1),e.addToRenderList(t);var i=s.pipelines.set(t.pipeline),n=dw(t,e,f),o=i.calcMatrix.copyFrom(n.calc),r=t._displayOriginX,a=t._displayOriginY,l=e.alpha*t.alpha;s.pipelines.preBatch(t),t.isFilled&&qy(i,o,t,l,r,a),t.isStroked&&Ml(i,t,l,r,a),s.pipelines.postBatch(t)},So=function(s,t,e,f){var i=e||t.fillColor,n=f||t.fillAlpha,o=(i&16711680)>>>16,r=(i&65280)>>>8,a=i&255;s.fillStyle="rgba("+o+","+r+","+a+","+n+")"},Eo=function(s,t,e,f){var i=e||t.strokeColor,n=f||t.strokeAlpha,o=(i&16711680)>>>16,r=(i&65280)>>>8,a=i&255;s.strokeStyle="rgba("+o+","+r+","+a+","+n+")",s.lineWidth=t.lineWidth};const vw=Phaser.Renderer.Canvas.SetTransform;var pw=function(s,t,e,f){t.dirty&&(t.updateData(),t.dirty=!1),e.addToRenderList(t);var i=s.currentContext;if(vw(s,i,t,e,f)){var n=t._displayOriginX,o=t._displayOriginY,r=t.pathData,a=r.length-1,l=r[0]-n,h=r[1]-o;i.beginPath(),i.moveTo(l,h),t.closePath||(a-=2);for(var u=2;u<a;u+=2){var v=r[u]-n,d=r[u+1]-o;i.lineTo(v,d)}i.closePath(),t.isFilled&&(So(i,t),i.fill()),t.isStroked&&(Eo(i,t),i.stroke()),i.restore()}},gw={renderWebGL:cw,renderCanvas:pw};const mw=Phaser.GameObjects.Shape,xw=Phaser.Utils.Objects.IsPlainObject,y0=Phaser.Utils.Objects.GetValue,yw=Phaser.Geom.Polygon.Earcut;class Al extends mw{constructor(t,e,f,i,n,o,r,a){var l,h,u;if(xw(e)){var v=e;e=v.x,f=v.y,i=v.width,n=v.height,o=v.radius,r=v.color,a=v.alpha,l=v.strokeColor,h=v.strokeAlpha,u=v.strokeWidth}e===void 0&&(e=0),f===void 0&&(f=0),o===void 0&&(o=0);var d=new jy;super(t,"rexRoundRectangleShape",d);var c=y0(o,"radius",o);d.setTo(0,0,i,n,c);var p=y0(o,"iteration",void 0);this.setIteration(p),this.setPosition(e,f),r!==void 0&&this.setFillStyle(r,a),l!==void 0&&(u===void 0&&(u=2),this.setStrokeStyle(u,l,h)),this.updateDisplayOrigin(),this.dirty=!0}updateData(){var t=this.geom,e=this.pathData;e.length=0;var f=t.cornerRadius,i,n=this.iteration+1;if(i=f.br,Ah(i)){var o=t.width-i.x,r=t.height-i.y;ia(o,r,i.x,i.y,0,90,!1,n,e)}else ea(t.width,t.height,e);if(i=f.bl,Ah(i)){var o=i.x,r=t.height-i.y;ia(o,r,i.x,i.y,90,180,!1,n,e)}else ea(0,t.height,e);if(i=f.tl,Ah(i)){var o=i.x,r=i.y;ia(o,r,i.x,i.y,180,270,!1,n,e)}else ea(0,0,e);if(i=f.tr,Ah(i)){var o=t.width-i.x,r=i.y;ia(o,r,i.x,i.y,270,360,!1,n,e)}else ea(t.width,0,e);return e.push(e[0],e[1]),this.pathIndexes=yw(e),this}get width(){return this.geom.width}set width(t){this.resize(t,this.height)}get height(){return this.geom.height}set height(t){this.resize(this.width,t)}setSize(t,e){if(e===void 0&&(e=t),this.geom.width===t&&this.geom.height===e)return this;this.geom.setSize(t,e),this.updateDisplayOrigin(),this.dirty=!0;var f=this.input;return f&&!f.customHitArea&&(f.hitArea.width=t,f.hitArea.height=e),this}resize(t,e){return this.setSize(t,e),this}get iteration(){return this._iteration}set iteration(t){if(this._iteration===void 0){this._iteration=t;return}this._iteration!==t&&(this._iteration=t,this.dirty=!0)}setIteration(t){return t===void 0&&(t=6),this.iteration=t,this}get radius(){return this.geom.radius}set radius(t){this.geom.setRadius(t),this.updateDisplayOrigin(),this.dirty=!0}get radiusTL(){return this.geom.radiusTL}set radiusTL(t){this.geom.radiusTL=t,this.dirty=!0}get radiusTR(){return this.geom.radiusTR}set radiusTR(t){this.geom.radiusTR=t,this.dirty=!0}get radiusBL(){return this.geom.radiusBL}set radiusBL(t){this.geom.radiusBL=t,this.dirty=!0}get radiusBR(){return this.geom.radiusBR}set radiusBR(t){this.geom.radiusBR=t,this.dirty=!0}setRadius(t){return t===void 0&&(t=0),this.radius=t,this}setRadiusTL(t){return t===void 0&&(t=0),this.radiusTL=t,this}setRadiusTR(t){return t===void 0&&(t=0),this.radiusTR=t,this}setRadiusBL(t){return t===void 0&&(t=0),this.radiuBL=t,this}setRadiusBR(t){return t===void 0&&(t=0),this.radiusBR=t,this}get cornerRadius(){return this.geom.cornerRadius}set cornerRadius(t){this.radius=t}setCornerRadius(t){return this.setRadius(t)}}var Ah=function(s){return s.x!==0&&s.y!==0};Object.assign(Al.prototype,gw);yt.register("roundRectangle",function(s,t,e,f,i,n,o){var r=new Al(this.scene,s,t,e,f,i,n,o);return this.scene.add.existing(r),r});Ct(window,"RexPlugins.UI.RoundRectangle",Al);const Tw=Phaser.Renderer.WebGL.Utils;var Cw=function(s,t,e,f){if(t.dirty&&(t.updateTexture(),t.dirty=!1),!(t.width===0||t.height===0)){e.addToRenderList(t);var i=t.frame,n=i.width,o=i.height,r=Tw.getTintAppendFloatAlpha,a=s.pipelines.set(t.pipeline,t),l=a.setTexture2D(i.glTexture,t);s.pipelines.preBatch(t),a.batchTexture(t,i.glTexture,n,o,t.x,t.y,n/t.resolution,o/t.resolution,t.scaleX,t.scaleY,t.rotation,t.flipX,t.flipY,t.scrollFactorX,t.scrollFactorY,t.displayOriginX,t.displayOriginY,0,0,n,o,r(t.tintTopLeft,e.alpha*t._alphaTL),r(t.tintTopRight,e.alpha*t._alphaTR),r(t.tintBottomLeft,e.alpha*t._alphaBL),r(t.tintBottomRight,e.alpha*t._alphaBR),t.tintFill,0,0,e,f,!1,l),s.pipelines.postBatch(t)}},Sw=function(s,t,e,f){t.dirty&&(t.updateTexture(),t.dirty=!1),!(t.width===0||t.height===0)&&(e.addToRenderList(t),s.batchSprite(t,t.frame,e,f))},Ew={renderWebGL:Cw,renderCanvas:Sw};const Pw=Phaser.Display.Color;var Mw={clear(){return this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.dirty=!0,this},fill(s){return this.context.fillStyle=s,this.context.fillRect(0,0,this.canvas.width,this.canvas.height),this.dirty=!0,this},loadFromURL(s,t){var e=this,f=new Image;return f.onload=function(){e.width!==f.width||e.height!==f.height?e.resize(f.width,f.height):e.clear(),e.context.drawImage(f,0,0),e.updateTexture(),t&&t(),f.onload=null,f.src="",f.remove()},f.src=s,this},loadFromURLPromise(s){var t=this;return new Promise(function(e,f){t.loadFromURL(s,e)})},drawFrame(s,t,e,f,i,n){var o=this.scene.sys.textures.getFrame(s,t);return o?(e===void 0&&(e=0),f===void 0&&(f=0),i===void 0&&(i=o.cutWidth),n===void 0&&(n=o.cutHeight),this.context.drawImage(o.source.image,o.cutX,o.cutY,o.cutWidth,o.cutHeight,e,f,i,n),this.dirty=!0,this):this},getDataURL(s,t){return this.canvas.toDataURL(s,t)},getPixel(s,t,e){e===void 0&&(e=new Pw);var f=this.context.getImageData(s,t,1,1);return e.setTo(f.data[0],f.data[1],f.data[2],f.data[3]),e},setPixel(s,t,e,f,i,n){if(typeof e!="number"){var o=e;e=o.red,f=o.green,i=o.blue,n=o.alpha}n===void 0&&(n=e!==0||f!==0||i!==0?255:0);var r=this.context.createImageData(1,1);return r.data[0]=e,r.data[1]=f,r.data[2]=i,r.data[3]=n,this.context.putImageData(r,s,t),this.dirty=!0,this}},_y=function(s,t,e,f,i,n,o){var r=s.sys.textures,a=s.renderer;f===void 0&&(f=0),i===void 0&&(i=0),n===void 0&&(n=t.width),o===void 0&&(o=t.height);var l;r.exists(e)?l=r.get(e):l=r.createCanvas(e,n,o);var h=l.getSourceImage();h.width!==n&&(h.width=n),h.height!==o&&(h.height=o);var u=h.getContext("2d");u.clearRect(0,0,n,o),u.drawImage(t,f,i,n,o),a.gl&&l&&a.canvasToTexture(h,l.source[0].glTexture,!0,0)},Aw={updateTexture(s,t){s&&(t?s.call(t,this.canvas,this.context):s(this.canvas,this.context)),(this.canvas.width!==this.frame.width||this.canvas.height!==this.frame.height)&&this.frame.setSize(this.canvas.width,this.canvas.height),this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(this.canvas,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!1;var e=this.input;return e&&!e.customHitArea&&(e.hitArea.width=this.width,e.hitArea.height=this.height),this},generateTexture(s,t,e,f,i){var n=this.canvas;return f===void 0?f=n.width:f*=this.resolution,i===void 0?i=n.height:i*=this.resolution,_y(this.scene,n,s,t,e,f,i),this},loadTexture(s,t){var e=this.scene.sys.textures.getFrame(s,t);return e?(this.width!==e.cutWidth||this.height!==e.cutHeight?this.setSize(e.cutWidth,e.cutHeight):this.clear(),this.drawFrame(s,t),this.dirty=!0,this):this}};const T0=Phaser.Display.Canvas.CanvasPool,Ow=Phaser.GameObjects.GameObject;class Xn extends Ow{constructor(t,e,f,i,n){e===void 0&&(e=0),f===void 0&&(f=0),i===void 0&&(i=1),n===void 0&&(n=1),super(t,"rexCanvas"),this.renderer=t.sys.game.renderer,this.resolution=1,this._width=i,this._height=n,i=Math.max(Math.ceil(i*this.resolution),1),n=Math.max(Math.ceil(n*this.resolution),1),this.canvas=T0.create(this,i,n),this.context=this.canvas.getContext("2d"),this.dirty=!1,this.setPosition(e,f),this.setOrigin(.5,.5),this.initPipeline(),this._crop=this.resetCropObject(),this.texture=t.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.dirty=!0,t.sys.game.events.on("contextrestored",this.onContextRestored,this)}onContextRestored(){this.dirty=!0}preDestroy(){this.scene.sys.game.events.off("contextrestored",this.onContextRestored,this),T0.remove(this.canvas),this.texture.destroy(),this.canvas=null,this.context=null}get width(){return this._width}set width(t){this.setSize(t,this._height)}get height(){return this._height}set height(t){this.setSize(this._width,t)}setSize(t,e){return this._width===t&&this._height===e?this:(this._width=t,this._height=e,this.updateDisplayOrigin(),t=Math.max(Math.ceil(t*this.resolution),1),e=Math.max(Math.ceil(e*this.resolution),1),this.canvas.width=t,this.canvas.height=e,this.frame.setSize(t,e),this.dirty=!0,this)}get displayWidth(){return this.scaleX*this._width}set displayWidth(t){this.scaleX=t/this._width}get displayHeight(){return this.scaleY*this._height}set displayHeight(t){this.scaleY=t/this._height}setDisplaySize(t,e){return this.displayWidth=t,this.displayHeight=e,this}getCanvas(t){return t||(this.dirty=!0),this.canvas}getContext(t){return t||(this.dirty=!0),this.context}needRedraw(){return this.dirty=!0,this}resize(t,e){return this.setSize(t,e),this}}const Di=Phaser.GameObjects.Components;Phaser.Class.mixin(Xn,[Di.Alpha,Di.BlendMode,Di.Crop,Di.Depth,Di.Flip,Di.GetBounds,Di.Mask,Di.Origin,Di.Pipeline,Di.ScrollFactor,Di.Tint,Di.Transform,Di.Visible,Ew,Mw,Aw]);const Rw=Phaser.Utils.String.Pad;var Xt=function(s,t,e){if(s==null)return s;switch(typeof s){case"string":return s;case"number":return`#${Rw(Math.floor(s).toString(16),6,"0",1)}`;case"function":return s(t,e);case"object":return s.hasOwnProperty("r")?s.hasOwnProperty("a")?`rgba(${s.r},${s.g},${s.b},${s.a})`:`rgb(${s.r},${s.g},${s.b})`:s.hasOwnProperty("h")?s.hasOwnProperty("a")?`hsla(${s.h},${s.s},${s.l},${s.a})`:`hsl(${s.h},${s.s},${s.l})`:s;default:return s}};const Ol=Phaser.Math.DegToRad,C0=Ol(0),S0=Ol(90),E0=Ol(180),P0=Ol(270);var t1=function(s,t,e,f,i,n,o){var r=new jy(t,e,f,i,n),a=r.minWidth,l=r.minHeight,h=f>=a?1:f/a,u=i>=l?1:i/l,v=r.cornerRadius,d,c,p,g,m;s.save(),s.beginPath(),s.translate(t,e),d=v.br,c=d.x*h,p=d.y*u,g=f-c,m=i-p,s.moveTo(f,m),c>0&&p>0?Oh(s,g,m,c,p,C0,S0,o):(s.lineTo(f,i),s.lineTo(g,i)),d=v.bl,c=d.x*h,p=d.y*u,g=c,m=i-p,s.lineTo(c,i),c>0&&p>0?Oh(s,g,m,c,p,S0,E0,o):(s.lineTo(0,i),s.lineTo(0,m)),d=v.tl,c=d.x*h,p=d.y*u,g=c,m=p,s.lineTo(0,m),c>0&&p>0?Oh(s,g,m,c,p,E0,P0,o):(s.lineTo(0,0),s.lineTo(g,0)),d=v.tr,c=d.x*h,p=d.y*u,g=f-c,m=p,s.lineTo(g,0),c>0&&p>0?Oh(s,g,m,c,p,P0,C0,o):(s.lineTo(f,0),s.lineTo(f,m)),s.closePath(),s.restore()},Oh=function(s,t,e,f,i,n,o,r){if(r==null)s.ellipse(t,e,f,i,0,n,o);else{r+=1;for(var a,l,h,u=(o-n)/r,v=0;v<=r;v++)h=n+u*v,a=t+f*Math.cos(h),l=e+i*Math.sin(h),s.lineTo(a,l)}},Lw=function(s,t,e,f,i,n,o,r,a,l,h,u,v){if(t1(t,e,f,i,n,o,v),r!=null){if(h!=null){var d;u?d=t.createLinearGradient(0,0,i,0):d=t.createLinearGradient(0,0,0,n),d.addColorStop(0,r),d.addColorStop(1,h),r=d}t.fillStyle=r,t.fill()}a!=null&&l>0&&(t.strokeStyle=a,t.lineWidth=l,t.stroke())},fc=function(s,t,e,f,i,n,o,r){if(!(t==null&&e==null)){var a=s.canvas.width,l=s.canvas.height;e==null&&(f=0);var h=f/2;a-=f,l-=f,Lw(s.canvas,s.context,h,h,a,l,i,t,e,f,n,o,r)}},ww=function(){fc(this,this.fillStyle,this.strokeStyle,this.lineWidth,this.radius,this.fillColor2,this.isHorizontalGradient,this.iteration)};const M0=Phaser.Utils.Objects.GetValue;class e1 extends Xn{constructor(t,e,f,i,n,o,r,a,l,h,u){super(t,e,f,i,n),this.type="rexRoundRectangleCanvas";var v=M0(o,"radius",o),d=M0(o,"iteration",void 0);this.setRadius(v),this.setIteration(d),this.setFillStyle(r,h,u),this.setStrokeStyle(a,l)}get radius(){return this._radius}set radius(t){this.dirty|=this._radius!=t,this._radius=t}setRadius(t){return this.radius=t,this}get iteration(){return this._iteration}set iteration(t){this.dirty|=this._iteration!=t,this._iteration=t}setIteration(t){return this.iteration=t,this}get fillStyle(){return this._fillStyle}set fillStyle(t){t=Xt(t,this.canvas,this.context),this.dirty|=this._fillStyle!=t,this._fillStyle=t}get fillColor2(){return this._fillColor2}set fillColor2(t){t=Xt(t,this.canvas,this.context),this.dirty|=this._fillColor2!=t,this._fillColor2=t}get isHorizontalGradient(){return this._fillStyle}set isHorizontalGradient(t){this.dirty|=this._isHorizontalGradient!=t,this._isHorizontalGradient=t}setFillStyle(t,e,f){return f===void 0&&(f=!0),this.fillStyle=t,this.fillColor2=e,this.isHorizontalGradient=f,this}get strokeStyle(){return this._strokeStyle}set strokeStyle(t){t=Xt(t,this.canvas,this.context),this.dirty|=this._strokeStyle!=t,this._strokeStyle=t}get lineWidth(){return this._lineWidth}set lineWidth(t){this.dirty|=this._lineWidth!=t,this._lineWidth=t}setStrokeStyle(t,e){return this.strokeStyle=t,this.lineWidth=e,this}updateTexture(){return this.clear(),ww.call(this),super.updateTexture(),this}}yt.register("roundRectangleCanvas",function(s,t,e,f,i,n,o,r,a,l){var h=new e1(this.scene,s,t,e,f,i,n,o,r,a,l);return this.scene.add.existing(h),h});Ct(window,"RexPlugins.UI.RoundRectangleCanvas",e1);/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var Fw=Phaser.Renderer.WebGL.Utils,Iw=function(s,t,e,f){if(!(t.width===0||t.height===0)){e.addToRenderList(t);var i=t.frame,n=i.width,o=i.height,r=Fw.getTintAppendFloatAlpha,a=s.pipelines.set(t.pipeline,t),l=a.setTexture2D(i.glTexture,t);s.pipelines.preBatch(t),a.batchTexture(t,i.glTexture,n,o,t.x,t.y,n/t.style.resolution,o/t.style.resolution,t.scaleX,t.scaleY,t.rotation,t.flipX,t.flipY,t.scrollFactorX,t.scrollFactorY,t.displayOriginX,t.displayOriginY,0,0,n,o,r(t.tintTopLeft,e.alpha*t._alphaTL),r(t.tintTopRight,e.alpha*t._alphaTR),r(t.tintBottomLeft,e.alpha*t._alphaBL),r(t.tintBottomRight,e.alpha*t._alphaBR),t.tintFill,0,0,e,f,!1,l),s.pipelines.postBatch(t)}};/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var Dw=function(s,t,e,f){t.width===0||t.height===0||(e.addToRenderList(t),s.batchSprite(t,t.frame,e,f))},Bw={renderWebGL:Iw,renderCanvas:Dw};const Of=Phaser.Display.Canvas.CanvasPool;var bw=function(s,t,e){e===void 0&&(e={});var f=Of.create(this),i=f.getContext("2d");s.syncFont(f,i);var n=i.measureText(t),o=Math.ceil(n.width*s.baselineX),r=o,a=2*r;if(r=r*s.baselineY|0,f.width=o,f.height=a,i.fillStyle="#f00",i.fillRect(0,0,o,a),i.font=s._font,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(s.testString,0,r),e.left=0,o===0||a===0||!i.getImageData(0,0,o,a))return Of.remove(f),e;for(var l=i.getImageData(0,0,o,a).data,h=!1,u=0;u<o;u++){for(var v=0;v<a;v++){var d=(v*o+u)*4;if(l[d]!==255){e.left=u,h=!0;break}}if(h)break}return Of.remove(f),e};const Gw=Phaser.GameObjects.GameObject;class i1 extends Gw{setStyle(t){return this.style.setStyle(t)}setFont(t){return this.style.setFont(t)}setFontFamily(t){return this.style.setFontFamily(t)}setFontSize(t){return this.style.setFontSize(t)}setFontStyle(t){return this.style.setFontStyle(t)}setTestString(t){return this.style.setTestString(t)}setFixedSize(t,e){return this.style.setFixedSize(t,e)}setBackgroundColor(t,e,f){return this.style.setBackgroundColor(t,e,f)}setBackgroundStrokeColor(t,e){return this.style.setBackgroundStrokeColor(t,e)}setBackgroundCornerRadius(t,e){return this.style.setBackgroundCornerRadius(t,e)}setFill(t){return this.style.setFill(t)}setColor(t){return this.style.setColor(t)}setStroke(t,e){return this.style.setStroke(t,e)}setShadow(t,e,f,i,n,o){return this.style.setShadow(t,e,f,i,n,o)}setShadowOffset(t,e){return this.style.setShadowOffset(t,e)}setShadowColor(t){return this.style.setShadowColor(t)}setShadowBlur(t){return this.style.setShadowBlur(t)}setShadowStroke(t){return this.style.setShadowStroke(t)}setShadowFill(t){return this.style.setShadowFill(t)}setWrapMode(t){return this.style.setWrapMode(t)}setWrapWidth(t){return this.style.setWrapWidth(t)}setWordWrapWidth(t){return this.style.setWrapWidth(t)}setAlign(t){return this.style.setHAlign(t)}setHAlign(t){return this.style.setHAlign(t)}setVAlign(t){return this.style.setVAlign(t)}setLineSpacing(t){return this.style.setLineSpacing(t)}set lineSpacing(t){this.setLineSpacing(t)}get lineSpacing(){return this.style.lineSpacing}setXOffset(t){return this.style.setXOffset(t)}setMaxLines(t){return this.style.setMaxLines(t)}setResolution(t){return this.style.setResolution(t)}getTextMetrics(){return this.style.getTextMetrics()}setTextMetrics(t,e){return this.style.setTextMetrics(t,e)}measureTextMargins(t,e){return bw(this.style,t,e)}}const di=Phaser.GameObjects.Components;Phaser.Class.mixin(i1,[di.Alpha,di.BlendMode,di.ComputedSize,di.Crop,di.Depth,di.Flip,di.GetBounds,di.Mask,di.Origin,di.Pipeline,di.ScrollFactor,di.Tint,di.Transform,di.Visible,Bw]);var Nw={backgroundColor:["backgroundColor",null,Xt],backgroundColor2:["backgroundColor2",null,Xt],backgroundHorizontalGradient:["backgroundHorizontalGradient",!0,null],backgroundStrokeColor:["backgroundStrokeColor",null,Xt],backgroundStrokeLineWidth:["backgroundStrokeLineWidth",2,null],backgroundCornerRadius:["backgroundCornerRadius",0,null],backgroundCornerIteration:["backgroundCornerIteration",null,null],fontFamily:["fontFamily","Courier",null],fontSize:["fontSize","16px",null],fontStyle:["fontStyle","",null],color:["color","#fff",Xt],stroke:["stroke","#fff",Xt],strokeThickness:["strokeThickness",0,null],shadowOffsetX:["shadow.offsetX",0,null],shadowOffsetY:["shadow.offsetY",0,null],shadowColor:["shadow.color","#000",Xt],shadowBlur:["shadow.blur",0,null],shadowStroke:["shadow.stroke",!1,null],shadowFill:["shadow.fill",!1,null],underlineColor:["underline.color","#000",Xt],underlineThickness:["underline.thickness",0,null],underlineOffset:["underline.offset",0,null],halign:["halign","left",null],valign:["valign","top",null],maxLines:["maxLines",0,null],fixedWidth:["fixedWidth",0,null],fixedHeight:["fixedHeight",0,null],resolution:["resolution",0,null],lineSpacing:["lineSpacing",0,null],xOffset:["xOffset",0,null],rtl:["rtl",!1,null],testString:["testString","|M\xC3\u2030qgy",null],baselineX:["baselineX",1.2,null],baselineY:["baselineY",1.4,null],wrapMode:["wrap.mode",0,null],wrapWidth:["wrap.width",0,null],wrapCallback:["wrap.callback",null],wrapCallbackScope:["wrap.callbackScope",null]};/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */const Rh=Phaser.Display.Canvas.CanvasPool;var A0=function(s){var t=Rh.create(this),e=t.getContext("2d");s.syncFont(t,e);var f=e.measureText(s.testString);if("actualBoundingBoxAscent"in f){var i=f.actualBoundingBoxAscent,n=f.actualBoundingBoxDescent,l={ascent:i,descent:n,fontSize:i+n};return Rh.remove(t),l}var o=Math.ceil(f.width*s.baselineX),r=o,a=2*r;r=r*s.baselineY|0,t.width=o,t.height=a,e.fillStyle="#f00",e.fillRect(0,0,o,a),e.font=s._font,e.textBaseline="alphabetic",e.fillStyle="#000",e.fillText(s.testString,0,r);var l={ascent:0,descent:0,fontSize:0};if(!e.getImageData(0,0,o,a))return l.ascent=r,l.descent=r+6,l.fontSize=l.ascent+l.descent,Rh.remove(t),l;var h=e.getImageData(0,0,o,a).data,u=h.length,v=o*4,d,c,p=0,g=!1;for(d=0;d<r;d++){for(c=0;c<v;c+=4)if(h[p+c]!==255){g=!0;break}if(!g)p+=v;else break}for(l.ascent=r-d,p=u-v,g=!1,d=a;d>r;d--){for(c=0;c<v;c+=4)if(h[p+c]!==255){g=!0;break}if(!g)p-=v;else break}return l.descent=d-r,l.fontSize=l.ascent+l.descent,Rh.remove(t),l},Ie={NO_NEWLINE:0,RAW_NEWLINE:1,WRAPPED_NEWLINE:2,NO_WRAP:0,WORD_WRAP:1,CHAR_WRAP:2,SPLITREGEXP:/(?:\r\n|\r|\n)/};const Yw=Phaser.Utils.Objects.GetAdvancedValue,Bi=Phaser.Utils.Objects.GetValue;class dc{constructor(t,e,f){this.parent=t,f===void 0&&(f=Nw),this.propertyMap=f,this.backgroundColor,this.backgroundColor2,this.backgroundHorizontalGradient,this.backgroundStrokeColor,this.backgroundStrokeLineWidth,this.backgroundCornerRadius,this.backgroundCornerIteration,this.fontFamily,this.fontSize,this.fontStyle,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.underlineColor,this.underlineThickness,this.underlineOffset,this.halign,this.valign,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.lineSpacing,this.xOffset,this.rtl,this.testString,this.baselineX,this.baselineY,this.wrapMode,this.wrapWidth,this.wrapCallback,this.wrapCallbackScope,this._font,this.setStyle(e,!1,!0)}get isWrapFitMode(){return this.fixedWidth>0&&this.wrapMode!==Ie.NO_WRAP&&this.wrapWidth===0}setStyle(t,e,f){if(e===void 0&&(e=!0),f===void 0&&(f=!1),t&&t.hasOwnProperty("wrap")){var i=t.wrap;if(i.hasOwnProperty("mode")){var n=i.mode;typeof n=="string"&&(i.mode=O0[n])}else i.hasOwnProperty("width")&&(i.mode=1)}t&&t.rtl&&f&&!t.hasOwnProperty("halign")&&(t.halign="right"),t&&t.hasOwnProperty("fontSize")&&typeof t.fontSize=="number"&&(t.fontSize=t.fontSize.toString()+"px");var o=this.propertyMap;for(var r in o){var a=o[r],l=a[0],h=f?a[1]:this[r],u=a[2];if(r==="wrapCallback"||r==="wrapCallbackScope")this[r]=Bi(t,l,h);else{var v=Yw(t,l,h);u&&(v=u(v)),this[r]=v}}var d=Bi(t,"font",null);d===null?this._font=this.fontStyle+" "+this.fontSize+" "+this.fontFamily:this._font=d;var c=Bi(t,"fill",null);c!==null&&(this.color=Xt(c));var p=Bi(t,"metrics",!1);return p?this.metrics={ascent:Bi(p,"ascent",0),descent:Bi(p,"descent",0),fontSize:Bi(p,"fontSize",0)}:(e||!this.metrics)&&(this.metrics=A0(this)),e?this.parent.updateText():this.parent}syncFont(t,e){e.font=this._font}syncStyle(t,e){e.textBaseline="alphabetic",e.fillStyle=this.color,e.strokeStyle=this.stroke,e.lineWidth=this.strokeThickness,e.lineCap="round",e.lineJoin="round"}syncShadow(t,e){e?(t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur):(t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowColor=0,t.shadowBlur=0)}update(t){return t&&(this._font=`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`.trim(),this.metrics=A0(this)),this.parent.updateText(t)}buildFont(){var t=`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`.trim();return t!==this._font&&(this._font=t),this}setFont(t){return typeof t=="string"?(this.fontFamily=t,this.fontSize="",this.fontStyle=""):(this.fontFamily=Bi(t,"fontFamily","Courier"),this.fontSize=Bi(t,"fontSize","16px"),this.fontStyle=Bi(t,"fontStyle","")),this.update(!0)}setFontFamily(t){return this.fontFamily=t,this.update(!0)}setFontStyle(t){return this.fontStyle=t,this.update(!0)}setFontSize(t){return typeof t=="number"&&(t=t.toString()+"px"),this.fontSize=t,this.update(!0)}setTestString(t){return this.testString=t,this.update(!0)}setFixedSize(t,e){return this.fixedWidth=t,this.fixedHeight=e,t&&(this.parent.width=t),e&&(this.parent.height=e),this.update(this.isWrapFitMode)}setResolution(t){return this.resolution=t,this.update(!1)}setLineSpacing(t){return this.lineSpacing=t,this.update(!1)}setXOffset(t){return this.xOffset=t,this.update(!1)}setBackgroundColor(t,e,f){return f===void 0&&(f=!0),this.backgroundColor=Xt(t,this.parent.canvas,this.parent.context),this.backgroundColor2=Xt(e,this.parent.canvas,this.parent.context),this.backgroundHorizontalGradient=f,this.update(!1)}setBackgroundStrokeColor(t,e){return this.backgroundStrokeColor=Xt(t,this.parent.canvas,this.parent.context),this.backgroundStrokeLineWidth=e,this.update(!1)}setBackgroundCornerRadius(t,e){return this.backgroundCornerRadius=t,this.backgroundCornerIteration=e,this.update(!1)}setFill(t){return this.color=Xt(t,this.parent.canvas,this.parent.context),this.update(!1)}setColor(t){return this.color=Xt(t,this.parent.canvas,this.parent.context),this.update(!1)}setStroke(t,e){return t===void 0?this.strokeThickness=0:(e===void 0&&(e=this.strokeThickness),this.stroke=Xt(t,this.parent.canvas,this.parent.context),this.strokeThickness=e),this.update(!0)}setShadow(t,e,f,i,n,o){return t===void 0&&(t=0),e===void 0&&(e=0),f===void 0&&(f="#000"),i===void 0&&(i=0),n===void 0&&(n=!1),o===void 0&&(o=!0),this.shadowOffsetX=t,this.shadowOffsetY=e,this.shadowColor=Xt(f,this.parent.canvas,this.parent.context),this.shadowBlur=i,this.shadowStroke=n,this.shadowFill=o,this.update(!1)}setShadowOffset(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),this.shadowOffsetX=t,this.shadowOffsetY=e,this.update(!1)}setShadowColor(t){return t===void 0&&(t="#000"),this.shadowColor=Xt(t,this.parent.canvas,this.parent.context),this.update(!1)}setShadowBlur(t){return t===void 0&&(t=0),this.shadowBlur=t,this.update(!1)}setShadowStroke(t){return this.shadowStroke=t,this.update(!1)}setShadowFill(t){return this.shadowFill=t,this.update(!1)}setUnderline(t,e,f){return t===void 0&&(t="#000"),e===void 0&&(e=0),f===void 0&&(f=0),this.underlineColor=Xt(t,this.parent.canvas,this.parent.context),this.underlineThickness=e,this.underlineOffset=f,this.update(!1)}setUnderlineColor(t){return t===void 0&&(t="#000"),this.underlineColor=Xt(t,this.parent.canvas,this.parent.context),this.update(!1)}setUnderlineThickness(t){return t===void 0&&(t=0),this.underlineThickness=t,this.update(!1)}setUnderlineOffset(t){return t===void 0&&(t=0),this.underlineOffset=t,this.update(!1)}setWrapMode(t){return typeof t=="string"&&(t=O0[t.toLowerCase()]||0),this.wrapMode=t,this.update(!0)}setWrapWidth(t){return this.wrapWidth=t,this.update(!1)}setAlign(t,e){return t===void 0&&(t="left"),e===void 0&&(e="top"),this.halign=t,this.valign=e,this.update(!1)}setHAlign(t){return t===void 0&&(t="left"),this.halign=t,this.update(!1)}setVAlign(t){return t===void 0&&(t="top"),this.valign=t,this.update(!1)}setMaxLines(t){return t===void 0&&(t=0),this.maxLines=t,this.update(!1)}getTextMetrics(){var t=this.metrics;return{ascent:t.ascent,descent:t.descent,fontSize:t.fontSize}}setTextMetrics(t,e){return this.metrics.ascent=t.ascent,this.metrics.descent=t.descent,this.metrics.fontSize=t.fontSize,e&&(typeof e=="string"?(this.fontFamily=e,this.fontSize="",this.fontStyle=""):(this.fontFamily=Bi(e,"fontFamily",this.fontFamily),this.fontSize=Bi(e,"fontSize",this.fontSize),this.fontStyle=Bi(e,"fontStyle",this.fontStyle))),this.parent.updateText(!0)}get lineHeight(){return this.metrics.fontSize+this.strokeThickness+this.lineSpacing}toJSON(){var t={},e=this.propertyMap;for(var f in e)t[f]=this[f];return t.metrics=this.getTextMetrics(),t}destroy(){this.parent=void 0}}const O0={none:Ie.NO_WRAP,word:Ie.WORD_WRAP,char:Ie.CHAR_WRAP,character:Ie.CHAR_WRAP};var zw={draw(s,t,e,f){var i=this.penManager;this.hitAreaManager.clear();var n=this.context;n.save();var o=this.defaultStyle;this.clear(),fc(this,o.backgroundColor,o.backgroundStrokeColor,o.backgroundStrokeLineWidth,o.backgroundCornerRadius,o.backgroundColor2,o.backgroundHorizontalGradient,o.backgroundCornerIteration),s+=this.startXOffset,t+=this.startYOffset;var r=o.halign,a=o.valign,l,h=o.lineHeight,u=i.lines,v=u.length,d=o.maxLines,c,p,g;d>0&&v>d?(c=d,a==="center"?p=Math.floor((v-c)/2):a==="bottom"?p=v-c:p=0):(c=v,p=0),g=p+c;var m,x,y=this.rtl,T=y?this.parent.width:void 0;a==="center"?x=Math.max((f-c*h)/2,0):a==="bottom"?x=Math.max(f-c*h-2,0):x=0,x+=t;for(var C=p;C<g;C++)if(l=i.getLineWidth(C),l!==0){for(var S=u[C],E=S.length,M=r,O=0;O<E;O++){var L=S[O].prop.align;if(L!==void 0){M=L;break}}M==="center"?m=(e-l)/2:M==="right"?m=y?0:e-l:m=y?e-l:0,m+=s;for(var O=0;O<E;O++)this.drawPen(S[O],m,x,T)}n.restore()},drawPen(s,t,e,f){t+=s.x,e+=s.y+(s.prop.y||0),f!==void 0&&(t=f-t);var i=this.canvas,n=this.context;n.save();var o=this.parser.propToContextStyle(this.defaultStyle,s.prop);o.buildFont(),o.syncFont(i,n),o.syncStyle(i,n),o.underlineThickness>0&&s.width>0&&this.drawUnderline(t,e,s.width,o),s.isTextPen&&this.drawText(t,e,s.text,o),s.isImagePen&&this.drawImage(t,e,s.prop.img,o),n.restore(),s.hasAreaMarker&&s.width>0&&this.hitAreaManager.add(s.prop.area,t,e-this.startYOffset,s.width,this.defaultStyle.lineHeight)},clear(){var s=this.canvas;this.context.clearRect(0,0,s.width,s.height)},drawUnderline(s,t,e,f){t+=f.underlineOffset-f.underlineThickness/2,this.autoRound&&(s=Math.round(s),t=Math.round(t));var i=this.context,n=i.lineCap;i.lineCap="butt",i.strokeStyle=f.underlineColor,i.lineWidth=f.underlineThickness,i.beginPath(),i.moveTo(s,t),i.lineTo(s+e,t),i.stroke(),i.lineCap=n},drawText(s,t,e,f){this.autoRound&&(s=Math.round(s),t=Math.round(t));var i=this.context;f.stroke&&f.stroke!=="none"&&f.strokeThickness>0&&(f.syncShadow(i,f.shadowStroke),i.strokeText(e,s,t)),f.color&&f.color!=="none"&&(f.syncShadow(i,f.shadowFill),i.fillText(e,s,t))},drawImage(s,t,e,f){t-=this.startYOffset,this.parent.imageManager.draw(e,this.context,s,t,this.autoRound)}};const tr=Phaser.Utils.Objects.GetValue,Vw=Ie.NO_NEWLINE,R0=Ie.RAW_NEWLINE;class Uw{constructor(t){this.prop={},this.resetFromJSON(t)}resetFromJSON(t){this.text=tr(t,"text",""),this.x=tr(t,"x",0),this.y=tr(t,"y",0),this.width=tr(t,"width",0);var e=tr(t,"prop",null);e===null&&(e={}),this.prop=e,this.newLineMode=tr(t,"newLineMode",0),this.startIndex=tr(t,"startIndex",0)}get plainText(){var t=this.text;return this.newLineMode===R0&&(t+=`
`),t}get wrapText(){var t=this.text;return this.newLineMode!==Vw&&(t+=`
`),t}get rawTextLength(){var t=this.text.length;return this.newLineMode===R0&&(t+=1),t}get endIndex(){return this.startIndex+this.rawTextLength}get lastX(){return this.x+this.width}get isTextPen(){return this.text!==""}get isImagePen(){return!!this.prop.img}get hasAreaMarker(){return!!this.prop.area}}var pr=function(s,t){var e=Array.isArray(s);if(t===void 0?t=e?[]:{}:Is(t),e){t.length=s.length;for(var f=0,i=s.length;f<i;f++)t[f]=s[f]}else for(var n in s)t[n]=s[n];return t};const L0=Phaser.Utils.Objects.GetFastValue,w0=Ie.NO_NEWLINE,Ww=Ie.WRAPPED_NEWLINE;class cc{constructor(t){this.pens=[],this.lines=[],this.maxLinesWidth=void 0,this.pensPool=t.pensPool,this.linesPool=t.linesPool,this.tagToText=L0(t,"tagToText",mi),this.tagToTextScope=L0(t,"tagToTextScope",void 0)}destroy(){this.clear(),this.tagToText=void 0,this.tagToTextScope=void 0}clear(){for(var t=0,e=this.lines.length;t<e;t++)this.lines[t].length=0;this.pensPool.pushMultiple(this.pens),this.linesPool.pushMultiple(this.lines),this.maxLinesWidth=void 0}addTextPen(t,e,f,i,n,o){var r=this.pensPool.pop();return r==null&&(r=new Uw),er.text=t,er.x=e,er.y=f,er.width=i,er.prop=n,er.newLineMode=o,r.resetFromJSON(er),this.addPen(r),this}addImagePen(t,e,f,i){return this.addTextPen("",t,e,f,i,w0),this}addNewLinePen(){var t=this.lastPen,e=t?t.lastX:0,f=t?t.y:0,i=t?pr(t.prop):null;return this.addTextPen("",e,f,0,i,Ww),this}addPen(t){var e=this.lastPen;e==null?t.startIndex=0:t.startIndex=e.endIndex,this.pens.push(t);var f=this.lastLine;f==null&&(f=this.linesPool.pop()||[],this.lines.push(f)),f.push(t),t.newLineMode!==w0&&(f=this.linesPool.pop()||[],this.lines.push(f)),this.maxLinesWidth=void 0}clone(t){t==null&&(t=new cc),t.clear();for(var e=0,f=this.lines.length;e<f;e++)for(var i=this.lines[e],n=0,o=i.length;n<o;n++){var r=i[n];t.addPen(r.text,r.x,r.y,r.width,pr(r.prop),r.newLineMode)}return t}get lastPen(){return this.pens[this.pens.length-1]}get lastLine(){return this.lines[this.lines.length-1]}getLineStartIndex(t){if(t>=this.lines.length)return this.getLineEndIndex(t);var e=this.lines[t];return e&&e[0]?e[0].startIndex:0}getLineEndIndex(t){t>=this.lines.length&&(t=this.lines.length-1);var e,f=!1,i;for(e=t;e>=0&&(i=this.lines[e],f=i!=null&&i.length>0,!f);e--);if(!f)return 0;var n=i[i.length-1];return n.endIndex}getLineWidth(t){var e=this.lines[t];if(!e)return 0;var f=e[e.length-1];if(f==null)return 0;var i=f.lastX;return i}getMaxLineWidth(){if(this.maxLinesWidth!==void 0)return this.maxLinesWidth;for(var t,e=0,f=0,i=this.lines.length;f<i;f++)t=this.getLineWidth(f),t>e&&(e=t);return this.maxLinesWidth=e,e}getLineWidths(){for(var t=[],e=0,f=this.lines.length;e<f;e++)t.push(this.getLineWidth(e));return t}get linesCount(){return this.lines.length}get plainText(){for(var t="",e=this.pens,f=0,i=e.length;f<i;f++)t+=e[f].plainText;return t}get rawTextLength(){for(var t=0,e=this.pens,f=0,i=this.pens.length;f<i;f++)t+=e[f].rawTextLength;return t}getSliceTagText(t,e,f){if(t===void 0&&(t=0),e===void 0){var i=this.lastPen;if(i==null)return"";e=i.endIndex}f===void 0&&(f=!1);for(var n="",o,r,a,l,h,u,v,d=0,c=this.pens.length;d<c&&(o=this.pens[d],l=o.endIndex,!(!(l<=t)&&(o=this.pens[d],r=f?o.wrapText:o.plainText,u=o.prop,a=o.startIndex,h=a>=t&&l<=e,h||(r=r.substring(t-a,e-a)),this.tagToTextScope?n+=this.tagToText.call(this.tagToTextScope,r,u,v):n+=this.tagToText(r,u,v),v=u,l>=e)));d++);return n}get length(){return this.lines.length}set length(t){this.clear()}}var er={};const Xw=Phaser.Geom.Rectangle;var F0=new bs;class Hw{constructor(){this.hitAreas=[]}destroy(){this.clear()}clear(){return F0.pushMultiple(this.hitAreas),this}add(t,e,f,i,n){var o=F0.pop();return o===null?o=new Xw(e,f,i,n):o.setTo(e,f,i,n),o.key=t,this.hitAreas.push(o),this}getFirst(t,e){for(var f=0,i=this.hitAreas.length;f<i;f++){var n=this.hitAreas[f];if(n.contains(t,e))return n}return null}drawBounds(t,e,f){e===void 0&&(e=16777215),f&&t.save().scaleCanvas(f.scaleX,f.scaleY).rotateCanvas(f.rotation).translateCanvas(f.x,f.y);for(var i=0,n=this.hitAreas.length;i<n;i++){var o=this.hitAreas[i];t.lineStyle(1,e).strokeRect(o.x,o.y,o.width,o.height)}return f&&t.restore(),this}}var $w=function(){this.parent.on("pointerdown",kw,this).on("pointerup",Kw,this).on("pointermove",Rf,this).on("pointerover",Rf,this).on("pointerout",function(s,t){Rf.call(this,s,null,null,t)},this)},kw=function(s,t,e,f){var i=this.hitAreaManager.getFirst(t,e);i!==null&&so.call(this,"areadown",i.key,s,t,e,f)},Kw=function(s,t,e,f){var i=this.hitAreaManager.getFirst(t,e);i!==null&&so.call(this,"areaup",i.key,s,t,e,f)},Rf=function(s,t,e,f){if(t===null){this.lastHitAreaKey!==null&&so.call(this,"areaout",this.lastHitAreaKey,s,t,e,f),this.lastHitAreaKey=null;return}var i=this.hitAreaManager.getFirst(t,e),n=i?i.key:null;this.lastHitAreaKey!==n&&(this.lastHitAreaKey!==null&&so.call(this,"areaout",this.lastHitAreaKey,s,t,e,f),n!==null&&so.call(this,"areaover",n,s,t,e,f),this.lastHitAreaKey=n)},so=function(s,t,e,f,i,n){this.parent.emit(`${s}-${t}`,e,f,i,n),this.parent.emit(s,t,e,f,i,n)};const Zw=Ie.NO_NEWLINE,Jw=Ie.RAW_NEWLINE,Lf=Ie.WRAPPED_NEWLINE,I0=Ie.NO_WRAP,Qw=Ie.WORD_WRAP,jw=Ie.CHAR_WRAP,qw=Ie.SPLITREGEXP;var n1=function(s,t,e,f,i,n){f<=0&&(e=I0);var o=[];if(!s||!s.length)return o;for(var r=e===I0,a=e===Qw,l=s.split(qw),h,u,v,d=0,c=l.length;d<c;d++){if(h=l[d],v=d===c-1?Zw:Jw,r){var p=t(h);o.push(n.getLine(h,p,v));continue}if(u=d===0?f-i:f,h.length<=100){var p=t(h);if(p<=u){o.push(n.getLine(h,p,v));continue}}var g,m;a?(g=h.split(" "),m=g[g.length-1]==="",m&&(g.length-=1)):g=h;for(var x,y,T,C="",S=0,E,M=a?t(" "):void 0,O=0,L=g.length;O<L;O++){if(x=g[O],y=t(x),T=O===L-1,a&&(!T||m)&&(x+=" ",y+=M),a&&y>f){C!==""?o.push(n.getLine(C,S,Lf)):O===0&&i>0&&o.push(n.getLine("",0,Lf)),o.push(...n1(x,t,jw,f,0,n));var R=o.pop();C=R.text,S=R.width,n.freeLine(R),C===" "&&(C="",S=0);continue}E=S+y,E>u?(o.push(n.getLine(C,S,Lf)),C=x,S=y,u=f):(C+=x,S=E),T&&o.push(n.getLine(C,S,v))}}return o};const wf=Phaser.Utils.Objects.GetValue,_w=Ie.NO_WRAP,tF=Ie.NO_NEWLINE;class s1{constructor(t){this.parent=t.parent,this.context=wf(t,"context",null),this.canvas=this.context.canvas,this.parser=wf(t,"parser",null),this.defaultStyle=wf(t,"style",null),this.autoRound=!0,this.pensPool=t.pensPool,this.linesPool=t.linesPool,this.wrapTextLinesPool=t.wrapTextLinesPool,this.penManager=this.newPenManager(),this._tmpPenManager=null,this.hitAreaManager=new Hw,this.lastHitAreaKey=null;var e=this.context;this.getTextWidth=function(f){return e.measureText(f).width}}destroy(){this.context=void 0,this.canvas=void 0,this.parser=void 0,this.defaultStyle=void 0,this.penManager&&(this.penManager.destroy(),this.penManager=void 0),this._tmpPenManager&&(this._tmpPenManager.destroy(),this._tmpPenManager=void 0),this.hitAreaManager&&(this.hitAreaManager.destroy(),this.hitAreaManager=void 0)}updatePenManager(t,e,f,i,n){if(n===void 0&&(n=this.penManager),n.clear(),t==="")return n;var o=this.parent.style;if(o.isWrapFitMode){var r=this.parent.padding;f=o.fixedWidth-r.left-r.right}for(var a=this.canvas,l=this.context,h=function(N){return l.measureText(N).width},u=0,v=0,d=o.wrapCallback,c=o.wrapCallbackScope,p=!0,g,m,x,y=this.parser.splitText(t),T,C,S=this.wrapTextLinesPool,E=0,M=y.length;E<M;E++)if(T=this.parser.tagTextToProp(y[E],m),g=T.plainText,m=T.prop,m.img){var O=this.imageManager.getOuterWidth(m.img);f>0&&e!==_w&&f<u+O&&(n.addNewLinePen(),v+=i,u=0),n.addImagePen(u,v,O,pr(m)),u+=O}else if(g!==""){if(l.save(),x=this.parser.propToContextStyle(this.defaultStyle,m),x.buildFont(),x.syncFont(a,l),x.syncStyle(a,l),!d)C=n1(g,h,e,f,u,S);else{C=d.call(c,g,h,f,u),typeof C=="string"&&(C=C.split(`
`));for(var w,L=0,R=C.length;L<R;L++)w=C[L],typeof w=="string"?C[L]=S.getLine(w,h(w),L<R-1?2:0):p=!1}for(var w,L=0,R=C.length;L<R;L++)w=C[L],n.addTextPen(w.text,u,v,w.width,pr(m),w.newLineMode),w.newLineMode!==tF?(u=0,v+=i):u+=w.width;p&&S.freeLines(C),C=null,l.restore()}for(var E=0,M=this.lines.length;E<M;E++){var D=this.lines[E],B=D[D.length-1];B&&(B.width+=this.parser.getStrokeThinkness(this.defaultStyle,B.prop))}return n}get startXOffset(){var t=this.defaultStyle;return t.strokeThickness/2+t.xOffset}get startYOffset(){var t=this.defaultStyle;return t.strokeThickness/2+t.metrics.ascent}get lines(){return this.penManager.lines}get desplayLinesCount(){var t=this.penManager.linesCount,e=this.defaultStyle.maxLines;return e>0&&t>e&&(t=e),t}get linesWidth(){return Math.ceil(this.penManager.getMaxLineWidth())}get linesHeight(){var t=this.desplayLinesCount,e=this.defaultStyle.lineHeight*t;return t>0&&(e-=this.defaultStyle.lineSpacing),e}get imageManager(){return this.parent.imageManager}get rtl(){return this.parent.style.rtl}newPenManager(){return new cc({pensPool:this.pensPool,linesPool:this.linesPool,tagToText:this.parser.propToTagText,tagToTextScope:this.parser})}get tmpPenManager(){return this._tmpPenManager===null&&(this._tmpPenManager=this.newPenManager()),this._tmpPenManager}getPlainText(t,e,f){var i;if(t==null)i=this.penManager.plainText;else{var n=this.parser.splitText(t,1);i="";for(var o=0,r=n.length;o<r;o++)i+=n[o]}return(e!=null||f!=null)&&(e==null&&(e=0),f==null&&(f=i.length),i=i.substring(e,f)),i}getPenManager(t,e){if(t===void 0)return this.copyPenManager(e,this.penManager);e===void 0&&(e=this.newPenManager());var f=this.defaultStyle;return this.updatePenManager(t,f.wrapMode,f.wrapWidth,f.lineHeight,e),e}getText(t,e,f,i){if(t==null)return this.penManager.getSliceTagText(e,f,i);var n=this.tmpPenManager,o=this.defaultStyle;return this.updatePenManager(t,o.wrapMode,o.wrapWidth,o.lineHeight,n),n.getSliceTagText(e,f,i)}copyPenManager(t,e){return e===void 0&&(e=this.penManager),e.copy(t)}getTextWidth(t){return t===void 0&&(t=this.penManager),t.getMaxLineWidth()}getLastPen(t){return t===void 0&&(t=this.penManager),t.lastPen}}var eF={setInteractive:$w};Object.assign(s1.prototype,zw,eF);class iF extends bs{freeLine(t){if(!!t)return this.push(t),this}freeLines(t){if(!!t)return this.pushMultiple(t),this}getLine(t,e,f){var i=this.pop();return i===null&&(i={}),i.text=t,i.width=e,i.newLineMode=f,i}}const Ff=Phaser.Utils.Objects.GetValue;var If=function(s,t){t===void 0&&(t={key:s}),t.hasOwnProperty("key")||(t.key=s);var e=t.key,f=t.frame,i=t.width,n=t.height;if(i===void 0||n===void 0){var o=this.textureManager.getFrame(e,f),r=o?o.cutWidth:0,a=o?o.cutHeight:0;i===void 0&&n===void 0?(i=r,n=a):i===void 0?i=r*(n/a):n===void 0&&(n=a*(i/r))}this.images[s]={key:e,frame:f,width:i,height:n,y:Ff(t,"y",0),left:Ff(t,"left",0),right:Ff(t,"right",0)}},nF=function(s,t,e,f,i){var n=this.get(s);e+=n.left,f+=n.y,i&&(e=Math.round(e),f=Math.round(f));var o=this.textureManager.getFrame(n.key,n.frame);t.drawImage(o.source.image,o.cutX,o.cutY,o.cutWidth,o.cutHeight,e,f,n.width,n.height)};class vc{constructor(t){this.textureManager=t.sys.textures,this.images={}}destroy(){this.textureManager=void 0,this.images=void 0}add(t,e){if(typeof t=="string")If.call(this,t,e);else if(Array.isArray(t))for(var f=t,i=0,n=f.length;i<n;i++)If.call(this,f[i]);else{var f=t;for(var t in f)If.call(this,t,f[t])}return this}has(t){return this.images.hasOwnProperty(t)}remove(t){return this.has(t)&&delete this.images[t],this}get(t){return this.has(t)||this.textureManager.exists(t)&&this.add(t),this.images[t]}getOuterWidth(t){var e=this.get(t);return e?e.width+e.left+e.right:0}getFrame(t){var e=this.get(t);return e?this.textureManager.getFrame(e.key,e.frame):void 0}hasTexture(t){return!!this.getFrame(t)}}var sF={draw:nF};Object.assign(vc.prototype,sF);const rF=Phaser.Utils.Objects.IsPlainObject,aF=Phaser.DOM.AddToDOM,D0=Phaser.Display.Canvas.CanvasPool,oF=Phaser.GameObjects.GameObject,dn=Phaser.Utils.Objects.GetValue,hF=Phaser.DOM.RemoveFromDOM,lF=Ie.SPLITREGEXP;var br=null,Df=null,Bf=null;class r1 extends i1{constructor(t,e,f,i,n,o,r){if(rF(e)){var a=e;e=dn(a,"x",0),f=dn(a,"y",0),i=dn(a,"text",""),n=dn(a,"style","")}if(e===void 0&&(e=0),f===void 0&&(f=0),super(t,o),this.renderer=t.sys.game.renderer,this.setPosition(e,f),this.setOrigin(0,0),this.initPipeline(),this.canvas=D0.create(this),this.context=this.canvas.getContext("2d"),this._imageManager=void 0,n){if(n.hasOwnProperty("align")){var l=n.align;delete n.align,n.halign=l}n.hasOwnProperty("stroke")&&!n.hasOwnProperty("strokeThickness")&&(n.strokeThickness=1)}this.style=new dc(this,n);var h=dn(n,"images",void 0);h&&this.addImage(h),this.autoRound=!0,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.dirty=!1,this.style.resolution===0&&(this.style.resolution=1),this._crop=this.resetCropObject(),this.texture=t.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),br||(br={},Df=new bs,Bf=new iF,this.scene.game.events.once("destroy",function(){br=null,Df=null,Bf=null})),br.hasOwnProperty(o)||(br[o]=new bs),this.canvasText=new s1({parent:this,context:this.context,parser:r,style:this.style,pensPool:br[o],linesPool:Df,wrapTextLinesPool:Bf}),this.parser=r,this.initRTL(),n&&n.padding&&this.setPadding(n.padding),this.setText(i),t.sys.game.events.on("contextrestored",this.onContextRestored,this)}onContextRestored(){this.dirty=!0}preDestroy(){this.style.rtl&&hF(this.canvas),this.scene.sys.game.events.off("contextrestored",this.onContextRestored,this),this.canvasText.destroy(),this.canvasText=void 0,this._imageManager&&(this._imageManager.destroy(),this._imageManager=void 0),D0.remove(this.canvas),this.texture.destroy()}set text(t){this.setText(t)}get text(){return this._text}initRTL(){!this.style.rtl||(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",aF(this.canvas,this.scene.sys.canvas),this.originX=1)}setText(t){return t==null?t="":Array.isArray(t)?t=t.join(`
`):t=t.toString(),t===this._text?this:(this._text=t,this.updateText(),this)}appendText(t){return t==null?this:(Array.isArray(t)&&(t=t.join(`
`)),this.setText(this.text+t.toString()),this)}setPadding(t,e,f,i){if(typeof t=="object"){var n=t,o=dn(n,"x",null);o!==null?(t=o,f=o):(t=dn(n,"left",0),f=dn(n,"right",t));var r=dn(n,"y",null);r!==null?(e=r,i=r):(e=dn(n,"top",0),i=dn(n,"bottom",e))}else t===void 0&&(t=0),e===void 0&&(e=t),f===void 0&&(f=t),i===void 0&&(i=e);return this.padding.left=t,this.padding.top=e,this.padding.right=f,this.padding.bottom=i,this.updateText(!1)}updateText(t){t===void 0&&(t=!0);var e=this.canvasText,f=this.style;t&&e.updatePenManager(this._text,f.wrapMode,f.wrapWidth,f.lineHeight);var i=this.padding,n,o,r=Math.ceil(e.linesWidth);f.fixedWidth===0?(this.width=r+i.left+i.right,n=r):(this.width=f.fixedWidth,n=this.width-i.left-i.right,n<r&&(n=r)),f.fixedHeight===0?(this.height=e.linesHeight+i.top+i.bottom,o=e.linesHeight):(this.height=f.fixedHeight,o=this.height-i.top-i.bottom,o<e.linesHeight&&(o=e.linesHeight));var a=this.width,l=this.height;this.updateDisplayOrigin();var h=f.resolution;a*=h,l*=h,a=Math.max(Math.ceil(a),1),l=Math.max(Math.ceil(l),1);var u=this.canvas,v=this.context;u.width!==a||u.height!==l?(u.width=a,u.height=l,this.frame.setSize(a,l)):v.clearRect(0,0,a,l),v.save(),v.scale(h,h);var d=this.style.rtl?i.right:i.left,c=i.top;e.draw(d,c,n,o),v.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(u,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!0;var p=this.input;return p&&!p.customHitArea&&(p.hitArea.width=this.width,p.hitArea.height=this.height),this}toJSON(){var t=Components.ToJSON(this),e={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),resolution:this.resolution,padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return t.data=e,t}setInteractive(t,e,f){var i=!!this.input;return oF.prototype.setInteractive.call(this,t,e,f),i||this.canvasText.setInteractive(),this}getWrappedText(t,e,f){return t=this.canvasText.getText(t,e,f,!0),t.split(lF)}getPlainText(t,e,f){return this.canvasText.getPlainText(t,e,f)}getText(t,e,f,i){return i===void 0&&(i=!1),this.canvasText.getText(t,e,f,i)}getSubString(t,e,f){return this.getText(t,e,f)}copyPenManager(t){return this.canvasText.copyPenManager(t)}getPenManager(t,e){return this.canvasText.getPenManager(t,e)}setSize(t,e){return this.setFixedSize(t,e)}resize(t,e){return this.setFixedSize(t,e)}get imageManager(){return this._imageManager||(this._imageManager=new vc(this.scene)),this._imageManager}addImage(t,e){return this.imageManager.add(t,e),this}drawAreaBounds(t,e){return this.canvasText.hitAreaManager.drawBounds(t,e,this),this}generateTexture(t,e,f,i,n){var o=this.canvas;return i===void 0?i=o.width:i*=this.resolution,n===void 0?n=o.height:n*=this.resolution,_y(this.scene,o,t,e,f,i,n),this}}var _e=function(s,t){return t===void 0?`\\[${s}\\]`:`\\[${s}=(${t})\\]`},Ti=function(s){return`\\[/${s}\\]`};const pc="[-.0-9]+",gc="[a-z]+|#[0-9abcdef]+",mc="[^\\]]+",a1="esc",o1=_e(a1),h1=Ti(a1),l1="raw",u1=_e(l1),f1=Ti(l1),d1="b",c1=_e(d1),v1=Ti(d1),p1="i",g1=_e(p1),m1=Ti(p1),x1="weight",y1=_e(x1,pc),T1=Ti(x1),C1="size",S1=_e(C1,pc),E1=Ti(C1),P1="color",M1=_e(P1,gc),A1=Ti(P1),xc="u",O1=_e(xc),R1=_e(xc,gc),L1=Ti(xc),w1="shadow",F1=_e(w1),I1=Ti(w1),yc="stroke",D1=_e(yc),B1=_e(yc,gc),b1=Ti(yc),G1="y",N1=_e(G1,pc),Y1=Ti(G1),z1="img",V1=_e(z1,mc),U1=Ti(z1),W1="area",X1=_e(W1,mc),H1=Ti(W1),$1="align",k1=_e($1,mc),K1=Ti($1),Z1=new RegExp(o1,"i"),zd=new RegExp(h1,"i"),J1=new RegExp(u1,"i"),Vd=new RegExp(f1,"i"),uF=new RegExp(c1,"i"),fF=new RegExp(v1,"i"),dF=new RegExp(g1,"i"),cF=new RegExp(m1,"i"),B0=new RegExp(y1,"i"),vF=new RegExp(T1,"i"),b0=new RegExp(S1,"i"),pF=new RegExp(E1,"i"),G0=new RegExp(M1,"i"),gF=new RegExp(A1,"i"),mF=new RegExp(O1,"i"),N0=new RegExp(R1,"i"),xF=new RegExp(L1,"i"),yF=new RegExp(F1,"i"),TF=new RegExp(I1,"i"),CF=new RegExp(D1,"i"),Y0=new RegExp(B1,"i"),SF=new RegExp(b1,"i"),z0=new RegExp(N1,"i"),EF=new RegExp(Y1,"i"),V0=new RegExp(V1,"i"),PF=new RegExp(U1,"i"),U0=new RegExp(X1,"i"),MF=new RegExp(H1,"i"),W0=new RegExp(k1,"i"),AF=new RegExp(K1,"i"),X0=new RegExp([u1,f1,o1,h1,c1,v1,g1,m1,y1,T1,S1,E1,M1,A1,O1,R1,L1,F1,I1,D1,B1,b1,N1,Y1,V1,U1,X1,H1,k1,K1].join("|"),"ig");var OF=function(s,t){for(var e=[],f=0,i=!1,n=!1;;){var o=X0.exec(s);if(!o)break;var r=o[0];if(n)if(zd.test(r))n=!1;else continue;else if(i)if(Vd.test(r))i=!1;else continue;else Z1.test(r)?n=!0:J1.test(r)&&(i=!0);var a=X0.lastIndex,l=a-r.length;if(f<l){var h=s.substring(f,l);e.push(h)}t===void 0&&e.push(r),f=a}var u=s.length;return f<u&&e.push(s.substring(f,u)),e};const ze=!1,Ve=!0;var RF={plainText:null,prevProp:null},LF=function(s,t){t==null&&(t={});var e="";if(t.img&&Zt(t,ze,"img"),t.esc)zd.test(s)?Zt(t,ze,"esc"):e=s;else if(t.raw)Vd.test(s)?Zt(t,ze,"raw"):e=s;else if(Z1.test(s))Zt(t,Ve,"esc",!0);else if(zd.test(s))Zt(t,ze,"esc");else if(J1.test(s))Zt(t,Ve,"raw",!0);else if(Vd.test(s))Zt(t,ze,"raw");else if(uF.test(s))Zt(t,Ve,"b",!0);else if(fF.test(s))Zt(t,ze,"b");else if(dF.test(s))Zt(t,Ve,"i",!0);else if(cF.test(s))Zt(t,ze,"i");else if(B0.test(s)){var f=s.match(B0);Zt(t,Ve,"weight",f[1])}else if(vF.test(s))Zt(t,ze,"weight");else if(b0.test(s)){var f=s.match(b0);Zt(t,Ve,"size",`${f[1]}px`)}else if(pF.test(s))Zt(t,ze,"size");else if(G0.test(s)){var f=s.match(G0);Zt(t,Ve,"color",f[1])}else if(gF.test(s))Zt(t,ze,"color");else if(mF.test(s))Zt(t,Ve,"u",!0);else if(N0.test(s)){var f=s.match(N0);Zt(t,Ve,"u",f[1])}else if(xF.test(s))Zt(t,ze,"u");else if(yF.test(s))Zt(t,Ve,"shadow",!0);else if(TF.test(s))Zt(t,ze,"shadow");else if(CF.test(s))Zt(t,Ve,"stroke",!0);else if(Y0.test(s)){var f=s.match(Y0);Zt(t,Ve,"stroke",f[1])}else if(SF.test(s))Zt(t,ze,"stroke");else if(z0.test(s)){var f=s.match(z0);Zt(t,Ve,"y",parseFloat(f[1]))}else if(EF.test(s))Zt(t,ze,"y");else if(V0.test(s)){var f=s.match(V0);Zt(t,Ve,"img",f[1])}else if(PF.test(s))Zt(t,ze,"img");else if(U0.test(s)){var f=s.match(U0);Zt(t,Ve,"area",f[1])}else if(MF.test(s))Zt(t,ze,"area");else if(W0.test(s)){var f=s.match(W0);Zt(t,Ve,"align",f[1])}else AF.test(s)?Zt(t,ze,"align"):e=s;var i=RF;return i.plainText=e,i.prop=t,i},Zt=function(s,t,e,f){return t===Ve?s[e]=f:s.hasOwnProperty(e)&&delete s[e],s},wF=function(s,t){var e=IF;if(t.hasOwnProperty("img"))e.image=t.img;else{if(e.image=null,t.hasOwnProperty("family")?e.fontFamily=t.family:e.fontFamily=s.fontFamily,t.hasOwnProperty("size")){var f=t.size;typeof f=="number"&&(f=`${f}px`),e.fontSize=f}else e.fontSize=s.fontSize;e.fontStyle=FF(t),t.hasOwnProperty("color")?e.color=t.color:e.color=s.color,t.hasOwnProperty("stroke")?t.stroke===!0?(e.stroke=s.stroke,e.strokeThickness=s.strokeThickness):(e.stroke=t.stroke,e.strokeThickness=s.strokeThickness):(e.stroke=s.stroke,e.strokeThickness=0)}return t.hasOwnProperty("shadow")?t.shadow===!0?(e.shadowColor=s.shadowColor,e.shadowOffsetX=s.shadowOffsetX,e.shadowOffsetY=s.shadowOffsetY,e.shadowBlur=s.shadowBlur,e.shadowStroke=!0,e.shadowFill=!0):(e.shadowColor=t.shadow,e.shadowOffsetX=s.shadowOffsetX,e.shadowOffsetY=s.shadowOffsetY,e.shadowBlur=s.shadowBlur,e.shadowStroke=!0,e.shadowFill=!0):(e.shadowColor="#000",e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=0,e.shadowStroke=!1,e.shadowFill=!1),t.hasOwnProperty("u")?t.u===!0?(e.underlineColor=s.underlineColor,e.underlineThickness=s.underlineThickness,e.underlineOffset=s.underlineOffset):(e.underlineColor=t.u,e.underlineThickness=s.underlineThickness,e.underlineOffset=s.underlineOffset):(e.underlineColor="#000",e.underlineThickness=0,e.underlineOffset=0),e},FF=function(s){var t=s.b,e=s.weight,f=s.i;return t||e||f?f?t?"bold italic":e?`${e} italic`:"italic":t?"bold":e.toString():""},IF=new dc,DF=function(s,t,e){e==null&&(e=BF);var f=[];for(var i in e)t.hasOwnProperty(i)||f.push(`[/${i}]`);for(var i in t){var n=t[i];if(e[i]!==n)switch(i){case"size":f.push(`[size=${n.replace("px","")}]`);break;case"color":case"weight":case"stroke":case"y":case"img":case"area":case"align":f.push(`[${i}=${n}]`);break;case"u":n===!0?f.push("[u]"):f.push(`[u=${n}]`);break;default:f.push(`[${i}]`);break}}return f.push(s),f.join("")},BF={};class Q1{getStrokeThinkness(t,e){var f;return e.hasOwnProperty("stroke")?f=t.strokeThickness:f=0,f}}var bF={splitText:OF,tagTextToProp:LF,propToContextStyle:wF,propToTagText:DF};Object.assign(Q1.prototype,bF);class Tc extends r1{constructor(t,e,f,i,n){var o=new Q1(n);super(t,e,f,i,n,"rexBBCodeText",o)}}yt.register("BBCodeText",function(s,t,e,f){var i=new Tc(this.scene,s,t,e,f);return this.scene.add.existing(i),i});Ct(window,"RexPlugins.UI.BBCodeText",Tc);var GF={plainText:null,prevProp:null},NF=new dc;class YF{constructor(t){t===void 0&&(t={}),this.tags=t}addTag(t,e){this.tags[t]=e}getTag(t){return this.tags[t]}splitText(t,e){for(var f=[],i=0;;){var n=bf.exec(t);if(!n)break;var o=n[0],r=bf.lastIndex-o.length;if(i<r&&f.push(t.substring(i,r)),e===void 0)f.push(o);else if(e===1){if($0.test(o)){var a=o.match(k0);f.push(a[2])}else if(K0.test(o)){var a=o.match(Z0);f.push(a[2])}}i=bf.lastIndex}var l=t.length;return i<l&&f.push(t.substring(i,l)),f}tagTextToProp(t,e){var f,i;if($0.test(t)){var n=t.match(k0);if(n!=null){var o=n[1],r=this.tags;r.hasOwnProperty(o)?i=r[o]:i={},i._class=o,f=n[2]}}else if(K0.test(t)){var n=t.match(Z0);if(n!=null){var a=n[1];i=zF(a),i._style=a,f=n[2]}}f==null&&(f=t),i==null&&(i={});var l=GF;return l.plainText=f,l.prop=i,l}propToContextStyle(t,e){var f=NF;if(e.hasOwnProperty("img"))f.image=e.img;else{if(f.image=null,e.hasOwnProperty("family")||e.hasOwnProperty("fontFamily")||e.hasOwnProperty("font-family")){var i=e.hasOwnProperty("family")?e.family:e.hasOwnProperty("fontFamily")?e.fontFamily:e["font-family"];f.fontFamily=i}else f.fontFamily=t.fontFamily;if(e.hasOwnProperty("size")||e.hasOwnProperty("fontSize")||e.hasOwnProperty("font-size")){var n=e.hasOwnProperty("size")?e.size:e.hasOwnProperty("fontSize")?e.fontSize:e["font-size"];typeof n=="number"&&(n=`${n}px`),f.fontSize=n}else f.fontSize=t.fontSize;if(e.hasOwnProperty("style")||e.hasOwnProperty("fontStyle")||e.hasOwnProperty("font-style")){var o=e.hasOwnProperty("style")?e.style:e.hasOwnProperty("fontStyle")?e.fontStyle:e["font-style"];f.fontStyle=o}else f.fontStyle=t.fontStyle;if(e.hasOwnProperty("color")||e.hasOwnProperty("font-color")){var r=e.hasOwnProperty("color")?e.color:e["font-color"];f.color=r}else f.color=t.color;if(e.hasOwnProperty("stroke")){var a=e.stroke;f.stroke=a.hasOwnProperty("color")?a.color:t.stroke,f.strokeThickness=a.hasOwnProperty("thickness")?a.thickness:t.strokeThickness}else f.stroke=t.stroke,f.strokeThickness=t.strokeThickness}if(e.hasOwnProperty("shadow")){var l=e.shadow;f.shadowColor=l.hasOwnProperty("color")?l.color:t.shadowColor,f.shadowOffsetX=l.hasOwnProperty("offsetX")?l.offsetX:t.shadowOffsetX,f.shadowOffsetY=l.hasOwnProperty("offsetY")?l.offsetY:t.shadowOffsetY,f.shadowBlur=l.hasOwnProperty("blur")?l.blur:t.shadowBlur,f.shadowStroke=!0,f.shadowFill=!0}else f.shadowColor=t.shadowColor,f.shadowOffsetX=t.shadowOffsetX,f.shadowOffsetY=t.shadowOffsetY,f.shadowBlur=t.shadowBlur,f.shadowStroke=t.shadowStroke,f.shadowFill=t.shadowFill;if(e.hasOwnProperty("u")||e.hasOwnProperty("underline")){var h=e.hasOwnProperty("u")?e.u:e.underline;f.underlineColor=h.hasOwnProperty("color")?h.color:t.underlineColor,f.underlineThickness=h.hasOwnProperty("thickness")?h.thickness:t.underlineThickness,f.underlineOffset=h.hasOwnProperty("offset")?h.offset:t.underlineOffset}else f.underlineColor=t.underlineColor,f.underlineThickness=t.underlineThickness,f.underlineOffset=t.underlineOffset;return f}getStrokeThinkness(t,e){var f;if(e.hasOwnProperty("stroke")){var i=e.stroke;f=i.hasOwnProperty("thickness")?i.thickness:t.strokeThickness}else f=t.strokeThickness;return f}propToTagText(t,e,f){return e.hasOwnProperty("_class")?t===""&&this.isTextTag(e._class)?"":`<class='${e._class}'>${t}</class>`:e.hasOwnProperty("_style")?`<style='${e._style}'>${t}</style>`:t}destroy(){this.tags=void 0}isTextTag(t){var e=this.tags[t];return e?e.img==null:!1}}var zF=function(s){s=s.split(";");for(var t={},e,f,i,n=0,o=s.length;n<o;n++)if(e=s[n].split(":"),f=e[0],i=e[1],!(H0(f)||H0(i))){switch(f){case"stroke":var r=i.split(" "),h=r.length;i={},h>=1&&(i.color=r[0]),h>=2&&(i.thickness=parseInt(r[1].replace("px","")));break;case"shadow":var a=i.split(" "),h=a.length;i={},h>=1&&(i.color=a[0]),h>=2&&(i.offsetX=parseInt(a[1].replace("px",""))),h>=3&&(i.offsetY=parseInt(a[2].replace("px",""))),h>=4&&(i.blur=parseInt(a[3].replace("px","")));break;case"u":case"underline":var l=i.split(" "),h=l.length;i={},h>=1&&(i.color=l[0]),h>=2&&(i.thickness=parseInt(l[1].replace("px",""))),h>=3&&(i.offset=parseInt(l[2].replace("px","")));break;case"y":i=parseFloat(i);break}t[f]=i}return t},H0=function(s){return s=s.replace(VF,""),s.length===0},bf=/<\s*class=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/class\s*\>|<\s*style=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/style\s*\>/g,$0=/<\s*class=/i,k0=/<\s*class=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/class\s*\>/,K0=/<\s*style=/i,Z0=/<\s*style=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/style\s*\>/,VF=/^\s+|\s+$/;const UF=Phaser.Utils.Objects.GetValue;class j1 extends r1{constructor(t,e,f,i,n){var o=UF(n,"tags",void 0),r=new YF(o);super(t,e,f,i,n,"rexTagText",r)}addTag(t,e){return this.parser.addTag(t,e),this.updateText(!0)}addTags(t){for(var e in t)this.parser.addTag(e,t[e]);return this.updateText(!0)}getTag(t){return this.parser.getTag(t)}preDestroy(){super.preDestroy(),this.parser.destroy(),this.parser=void 0}}yt.register("tagText",function(s,t,e,f){var i=new j1(this.scene,s,t,e,f);return this.scene.add.existing(i),i});Ct(window,"RexPlugins.UI.TagText",j1);var WF=function(s,t){if(this.scene.sys.scale.autoRound&&(s=Math.floor(s),t=Math.floor(t)),this.width===s&&this.height===t)return this;var e=this.node.style;return e.width=`${s}px`,e.height=`${t}px`,this.updateSize(),this};const XF=Phaser.Utils.Objects.GetValue;var J0=function(s,t,e){e===void 0&&(e={});var f,i;for(var n in s)f=s[n],i=XF(t,n,f[1]),i!==void 0&&(e[f[0]]=i);return e},HF=function(s,t,e){for(let f in e)t.addEventListener(f,function(i){s.emit(e[f],s,i)})},$F=function(s){s.addEventListener("touchstart",Gr,!1),s.addEventListener("touchmove",Gr,!1),s.addEventListener("touchend",Gr,!1),s.addEventListener("mousedown",Gr,!1),s.addEventListener("mouseup",Gr,!1),s.addEventListener("mousemove",Gr,!1)},Gr=function(s){s.stopPropagation()};const kF=Phaser.GameObjects.DOMElement,Q0=Phaser.Utils.Objects.IsPlainObject,es=Phaser.Utils.Objects.GetValue;class Cc extends kF{constructor(t,e,f,i,n,o){Q0(e)?(o=e,e=es(o,"x",0),f=es(o,"y",0),i=es(o,"width",0),n=es(o,"height",0)):Q0(i)&&(o=i,i=es(o,"width",0),n=es(o,"height",0)),o===void 0&&(o={});var r,a=es(o,"type","text");a==="textarea"?(r=document.createElement("textarea"),r.style.resize="none"):(r=document.createElement("input"),r.type=a),J0(j0,o,r);var l=es(o,"style",void 0);l=J0(q0,o,l);var h=r.style;for(var u in o)u in j0||u in q0||u in h&&(l[u]=o[u]);l["box-sizing"]="border-box",super(t,e,f,r,l),this.type="rexInputText",this.resize(i,n),HF(this,r,ZF),$F(r),es(o,"selectAll",!1)&&this.selectAll(),this._isFocused=!1,this.on("focus",function(){this._isFocused=!0},this).on("blur",function(){this._isFocused=!1},this)}get text(){return this.node.value}set text(t){this.node.value=t}setText(t){return this.text=t,this}get maxLength(){return this.node.maxLength}set maxLength(t){this.node.maxLength=t}setMaxLength(t){return this.maxLength=t,this}get minLength(){return this.node.minLength}set minLength(t){this.node.minLength=t}setMinLength(t){return this.minLength=t,this}get placeholder(){return this.node.placeholder}set placeholder(t){this.node.placeholder=t}setPlaceholder(t){return this.placeholder=t,this}selectText(t,e){return t===void 0?this.node.select():this.node.setSelectionRange(t,e),this}selectAll(){return this.selectText(),this}get selectionStart(){return this.node.selectionStart}get selectionEnd(){return this.node.selectionEnd}get selectedText(){var t=this.node;return t.value.substring(t.selectionStart,t.selectionEnd)}get cursorPosition(){return this.node.selectionStart}set cursorPosition(t){this.node.setSelectionRange(t,t)}setCursorPosition(t){return t===void 0&&(t=0),this.cursorPosition=t,this}get tooltip(){return this.node.title}set tooltip(t){this.node.title=t}setTooltip(t){return this.tooltip=t,this}setTextChangedCallback(t){return this.onTextChanged=t,this}get readOnly(){return this.node.readOnly}set readOnly(t){this.node.readOnly=t}setReadOnly(t){return t===void 0&&(t=!0),this.readOnly=t,this}get spellCheck(){return this.node.spellcheck}set spellCheck(t){this.node.spellcheck=t}setSpellCheck(t){return this.spellCheck=t,this}get fontColor(){return this.node.style.color}set fontColor(t){this.node.style.color=t}setFontColor(t){return this.fontColor=t,this}setStyle(t,e){return this.node.style[t]=e,this}getStyle(t){return this.node.style[t]}scrollToBottom(){return this.node.scrollTop=this.node.scrollHeight,this}setEnabled(t){return t===void 0&&(t=!0),this.node.disabled=!t,this}setBlur(){return this.node.blur(),this}setFocus(){return this.node.focus(),this}get isFocused(){return this._isFocused}}var KF={resize:WF};Object.assign(Cc.prototype,KF);const j0={id:["id",void 0],text:["value",void 0],maxLength:["maxLength",void 0],minLength:["minLength",void 0],placeholder:["placeholder",void 0],tooltip:["title",void 0],readOnly:["readOnly",!1],spellCheck:["spellcheck",!1],autoComplete:["autocomplete","off"]},q0={align:["textAlign",void 0],paddingLeft:["padding-left",void 0],paddingRight:["padding-right",void 0],paddingTop:["padding-top",void 0],paddingBottom:["padding-bottom",void 0],fontFamily:["fontFamily",void 0],fontSize:["font-size",void 0],color:["color","#ffffff"],backgroundColor:["backgroundColor","transparent"],border:["border",0],borderColor:["borderColor","transparent"],outline:["outline","none"],direction:["direction",void 0]},ZF={input:"textchange",click:"click",dblclick:"dblclick",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",keydown:"keydown",keyup:"keyup",keypress:"keypress",focus:"focus",blur:"blur",select:"select"};var Sc=function(s,t,e,f){if(t)return!(e&&!e(s,t)||!_0(s,t)||f&&!f(s,t));for(var i=s.scene.input.manager,n=i.pointersTotal,o=i.pointers,t,r=0;r<n;r++)if(t=o[r],!(e&&!e(s,t))&&!!_0(s,t)&&!(f&&!f(s,t)))return!0;return!1},_0=function(s,t){for(var e=s.scene,f=e.input.cameras.getCamerasBelowPointer(t),i=e.input.manager,n=[s],o,r=0,a=f.length;r<a;r++)if(o=i.hitTest(t,n,f[r]),o.length>0)return!0;return!1},JF=function(s,t,e){s=s.replace(" ","");var f=e.previousText;if(s===f)return s;if(isNaN(s)){s=f;var i=e.cursorPosition-1;e.setText(s),e.setCursorPosition(i)}else e.previousText=s;return s};const QF=Phaser.Game;var tm=function(s){return s instanceof QF};const jF=Phaser.Scene;var aa=function(s){return s instanceof jF},qF=function(s){if(tm(s))return s;if(tm(s.game))return s.game;if(aa(s))return s.sys.game;if(aa(s.scene))return s.scene.sys.game},Ec=function(s){return qF(s).loop.delta};const Nr=Phaser.Utils.Objects.GetValue,_F=Phaser.Math.Wrap;class q1 extends Cc{constructor(t,e){super(t.scene,e);var f=this.node.style;f.position="absolute",f.opacity=0,f.pointerEvents="none",f.zIndex=0,f.transform="scale(0)",this.setCursor(Nr(e,"cursor","|")),this.setCursorFlashDuration(Nr(e,"cursorFlashDuration",1e3)),this.cursorFlashTimer=0,this.setEnterClose(Nr(e,"enterClose",!0)),this.onOpenCallback=Nr(e,"onOpen",void 0),this.onCloseCallback=Nr(e,"onClose",void 0);var i=Nr(e,"onUpdate",void 0);i==="number"&&(i=JF),this.onUpdateCallback=i,this.textObject=t,t.setInteractive().on("pointerdown",this.setFocus,this).on("destroy",this.destroy,this),this.on("focus",function(){this.cursorFlashTimer=0,this.enterClose&&this.scene.input.keyboard.once("keydown-ENTER",this.setBlur,this),this.setText(this.textObject.text),this.scene.sys.events.on("postupdate",this.updateText,this),this.scene.input.on("pointerdown",this.onClickOutside,this),this.onOpenCallback&&this.onOpenCallback(this.textObject,this)},this).on("blur",function(){this.updateText(),this.scene.sys.events.off("postupdate",this.updateText,this),this.scene.input.off("pointerdown",this.onClickOutside,this),this.onCloseCallback&&this.onCloseCallback(this.textObject,this)},this)}preDestroy(){this.textObject.off("pointerdown",this.setFocus,this),this.textObject.off("destroy",this.destroy,this),this.scene.sys.events.off("postupdate",this.updateText,this),this.scene.input.off("pointerdown",this.onClickOutside,this),super.preDestroy()}onClickOutside(t){Sc(this.textObject,t)||this.setBlur()}updateText(){var t=this.text;if(this.onUpdateCallback){var e=this.onUpdateCallback(t,this.textObject,this);e!=null&&(t=e)}if(this.isFocused&&this.hasCursor){var f=this.cursorPosition;t=t.substring(0,f)+this.cursor+t.substring(f)}return this.textObject.setText(t),this}setCursor(t){return this._cursor=t,this.hasCursor=t&&t!=="",t}setCursorFlashDuration(t){return this.cursorFlashDuration=t,this}get cursor(){if(!this._isFocused)return this._cursor;var t;this.cursorFlashTimer<this.cursorFlashDuration/2?t=this._cursor:t=" ";var e=this.cursorFlashTimer+Ec(this.scene);return this.cursorFlashTimer=_F(e,0,this.cursorFlashDuration),t}setEnterClose(t){return t===void 0&&(t=!0),this.enterClose=t,this}open(){return this.setFocus(),this}close(){return this.setBlur(),this}get isOpened(){return this._isFocused}}yt.register("hiddenEdit",function(s,t){var e=new q1(s,t);return e});Ct(window,"RexPlugins.UI.HiddenEdit",q1);const tI=Phaser.GameObjects.Zone,eI=Phaser.Utils.Array.Add,iI=Phaser.Utils.Array.Remove;class Po extends tI{constructor(t,e,f,i,n){e===void 0&&(e=0),f===void 0&&(f=0),i===void 0&&(i=1),n===void 0&&(n=1),super(t,e,f,i,n),this.children=[]}destroy(t){if(!!this.scene){if(t)for(var e,f=this.children.length-1;f>=0;f--)e=this.children[f],!e.parentContainer&&!e.displayList&&e.destroy(t);this.clear(!t),super.destroy(t)}}contains(t){return this.children.indexOf(t)!==-1}add(t){var e=this;return eI(this.children,t,0,function(f){f.once("destroy",e.onChildDestroy,e)},this),this}remove(t,e){var f=this;return iI(this.children,t,function(i){i.off("destroy",f.onChildDestroy,f),e&&i.destroy()}),this}onChildDestroy(t,e){this.remove(t,!1)}clear(t){for(var e=this,f,i=0,n=this.children.length;i<n;i++)f=this.children[i],f.off("destroy",e.onChildDestroy,e),t&&f.destroy();return this.children.length=0,this}}const em=Phaser.GameObjects.Components;Phaser.Class.mixin(Po,[em.Alpha,em.Flip]);var Tn=function(s,t){var e;if(t===void 0)s.hasOwnProperty("rexContainer")&&(e=s.rexContainer.parent);else for(e=Tn(s);e&&e.name!==t;)e=Tn(e);return e},_1=function(s){for(var t=Tn(s);t;)s=t,t=Tn(t);return s};const nI=Phaser.Math.DegToRad,sI=Phaser.Math.RadToDeg;var Jt=function(s){if(!s.hasOwnProperty("rexContainer")){var t={parent:null,self:null,layer:null,x:0,y:0,syncPosition:!0,rotation:0,syncRotation:!0,scaleX:0,scaleY:0,syncScale:!0,alpha:0,syncAlpha:!0,visible:!0,active:!0};Object.defineProperty(t,"angle",{get:function(){return sI(this.rotation)},set:function(e){this.rotation=nI(e)}}),Object.defineProperty(t,"displayWidth",{get:function(){return s.width*this.scaleX},set:function(e){this.scaleX=e/s.width}}),Object.defineProperty(t,"displayHeight",{get:function(){return s.height*this.scaleY},set:function(e){this.scaleY=e/s.height}}),s.rexContainer=t}return s.rexContainer},rI={setParent(s,t){t===void 0&&(t=this);var e=Jt(s);return t?(e.parent=t,e.self=s):(e.parent=null,e.self=null),this},getParent(s,t){return typeof s=="string"&&(t=s,s=void 0),s===void 0&&(s=this),Tn(s,t)},getTopmostParent(s){return s===void 0&&(s=this),_1(s)}};const Lh=Phaser.Utils.Objects.GetValue,tT=Po.prototype.add;var Gf=function(s,t){this.setParent(s);var e=Jt(s);return eT(e,t),this.resetChildState(s).updateChildVisible(s).updateChildActive(s).updateChildScrollFactor(s).updateChildMask(s),tT.call(this,s),this.addToRenderLayer(s),this},Nf=function(s,t){this.setParent(s);var e=Jt(s);return eT(e,t),e.x=s.x,e.y=s.y,e.rotation=s.rotation,e.scaleX=s.scaleX,e.scaleY=s.scaleY,e.alpha=s.alpha,e.visible=s.visible,e.active=s.active,this.updateChildPosition(s).updateChildAlpha(s).updateChildVisible(s).updateChildActive(s).updateChildScrollFactor(s).updateChildMask(s),tT.call(this,s),this.addToRenderLayer(s),this},eT=function(s,t){s.syncPosition=Lh(t,"syncPosition",!0),s.syncRotation=Lh(t,"syncRotation",!0),s.syncScale=Lh(t,"syncScale",!0),s.syncAlpha=Lh(t,"syncAlpha",!0)},aI={add(s){return Array.isArray(s)?this.addMultiple(s):Gf.call(this,s),this},pin(s,t){return Array.isArray(s)?this.addMultiple(s,t):Gf.call(this,s,t),this},addMultiple(s){for(var t=0,e=s.length;t<e;t++)Gf.call(this,s[t]);return this},addLocal(s){return Array.isArray(s)?this.addMultiple(s):Nf.call(this,s),this},pinLocal(s,t){return Array.isArray(s)?this.addMultiple(s,t):Nf.call(this,s,t),this},addLocalMultiple(s){for(var t=0,e=s.length;t<e;t++)Nf.call(this,s[t]);return this}};const oI=Po.prototype.remove,hI=Po.prototype.clear;var lI={remove(s,t){return Tn(s)!==this?this:(this.setParent(s,null),t||this.removeFromRenderLayer(s),oI.call(this,s,t),this)},clear(s){for(var t=this.children,e=0,f=t.length;e<f;e++){var i=t[e];this.setParent(i,null),s||this.removeFromRenderLayer(i)}return hI.call(this,s),this}},uI={getLocalState(s){return Jt(s)},resetChildState(s){return this.resetChildPositionState(s).resetChildVisibleState(s).resetChildAlphaState(s).resetChildActiveState(s),this},resetChildrenState(s){for(var t=0,e=s.length;t<e;t++)this.resetChildState(s[t]);return this},syncProperties(){return this.syncPosition().syncVisible().syncAlpha().syncActive().syncScrollFactor().syncMask(),this}};const im=Phaser.Math.RotateAround;var fI={worldToLocal(s){return s.x-=this.x,s.y-=this.y,im(s,0,0,-this.rotation),s.x/=this.scaleX,s.y/=this.scaleY,s},localToWorld(s){return s.x*=this.scaleX,s.y*=this.scaleY,im(s,0,0,this.rotation),s.x+=this.x,s.y+=this.y,s}},uo=function(s,t){return s===t?1:s/t},dI={updateChildPosition(s){s.isRexContainerLite&&(s.syncChildrenEnable=!1);var t=Jt(s),e=t.parent;return t.syncPosition&&(s.x=t.x,s.y=t.y,e.localToWorld(s)),t.syncRotation&&(s.rotation=t.rotation+e.rotation),t.syncScale&&(s.scaleX=t.scaleX*e.scaleX,s.scaleY=t.scaleY*e.scaleY),s.isRexContainerLite&&(s.syncChildrenEnable=!0,s.syncPosition()),this},syncPosition(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildPosition,this),this},resetChildPositionState(s){var t=Jt(s),e=t.parent;return t.x=s.x,t.y=s.y,e.worldToLocal(t),t.scaleX=uo(s.scaleX,e.scaleX),t.scaleY=uo(s.scaleY,e.scaleY),t.rotation=s.rotation-e.rotation,this},setChildPosition(s,t,e){return s.x=t,s.y=e,this.resetChildPositionState(s),this},setChildLocalPosition(s,t,e){var f=Jt(s);return f.x=t,f.y=e,this.updateChildPosition(s),this},resetLocalPositionState(){var s=Jt(this).parent;return s&&s.resetChildPositionState(this),this}};const cI=Phaser.Math.DegToRad;var vI={updateChildRotation(s){var t=Jt(s),e=t.parent;return t.syncRotation&&(s.rotation=e.rotation+t.rotation),this},syncRotation(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildRotation,this),this},resetChildRotationState(s){var t=Jt(s),e=t.parent;return t.rotation=s.rotation-e.rotation,this},setChildRotation(s,t){return s.rotation=t,this.resetChildRotationState(s),this},setChildAngle(s,t){return s.angle=t,this.resetChildRotationState(s),this},setChildLocalRotation(s,t){var e=Jt(s);return e.rotation=t,this.updateChildRotation(s),this},setChildLocalAngle(s,t){var e=Jt(s);return e.rotation=cI(t),this.updateChildRotation(s),this},resetLocalRotationState(){var s=Jt(this).parent;return s&&s.resetChildRotationState(this),this}},pI={updateChildScale(s){var t=Jt(s),e=t.parent;return t.syncScale&&(s.scaleX=e.scaleX*t.scaleX,s.scaleY=e.scaleY*t.scaleY),this},syncScale(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildScale,this),this},resetChildScaleState(s){var t=Jt(s),e=t.parent;return t.scaleX=uo(s.scaleX,e.scaleX),t.scaleY=uo(s.scaleY,e.scaleY),this},setChildScale(s,t,e){return e===void 0&&(e=t),s.scaleX=t,s.scaleY=e,this.resetChildScaleState(s),this},setChildLocalScale(s,t,e){e===void 0&&(e=t);var f=Jt(s);return f.scaleX=t,f.scaleY=e,this.updateChildScale(s),this},setChildDisplaySize(s,t,e){return s.setDisplaySize(t,e),this.resetChildScaleState(s),this},resetLocalScaleState(){var s=Jt(this).parent;return s&&s.resetChildScaleState(this),this}},gI={updateChildVisible(s){var t=Jt(s),e=t.parent,f=t.hasOwnProperty("maskVisible")?t.maskVisible:!0;return s.visible=e.visible&&t.visible&&f,this},syncVisible(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildVisible,this),this},resetChildVisibleState(s){var t=Jt(s);return t.hasOwnProperty("maskVisible")&&delete t.maskVisible,t.visible=s.visible,this},setChildVisible(s,t){return this.setChildLocalVisible(s,t),this},setChildLocalVisible(s,t){t===void 0&&(t=!0);var e=Jt(s);return e.visible=t,this.updateChildVisible(s),this},setChildMaskVisible(s,t){t===void 0&&(t=!0);var e=Jt(s);return e.maskVisible=t,this.updateChildVisible(s),this},resetLocalVisibleState(){var s=Jt(this).parent;return s&&s.resetChildVisibleState(this),this}},mI={updateChildAlpha(s){var t=Jt(s),e=t.parent;return t.syncAlpha&&(s.alpha=e.alpha*t.alpha),this},syncAlpha(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildAlpha,this),this},resetChildAlphaState(s){var t=Jt(s),e=t.parent;return t.alpha=uo(s.alpha,e.alpha),this},setChildAlpha(s,t){return s.alpha=t,this.resetChildAlphaState(s),this},setChildLocalAlpha(s,t){var e=Jt(s);return e.alpha=t,this.updateChildAlpha(s),this},resetLocalAlphaState(){var s=Jt(this).parent;return s&&s.resetChildAlphaState(this),this}},xI={updateChildActive(s){var t=Jt(s),e=t.parent;return s.active=e.active&&t.active,this},syncActive(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildActive,this),this},resetChildActiveState(s){var t=Jt(s);return t.active=s.active,this},setChildActive(s,t){return s.active=t,this.resetChildActiveState(s),this},setChildLocalActive(s,t){t===void 0&&(t=!0);var e=Jt(s);return e.active=t,this.updateChildActive(s),this},resetLocalActiveState(){var s=Jt(this).parent;return s&&s.resetChildActiveState(this),this}},yI={updateChildScrollFactor(s){var t=Jt(s),e=t.parent;return s.setScrollFactor(e.scrollFactorX,e.scrollFactorY),this},syncScrollFactor(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildScrollFactor,this),this}},TI={updateChildMask(s){if(this.mask==null)return this;var t=this.mask.hasOwnProperty("geometryMask")?this.mask.geometryMask:this.mask.bitmapMask;return t!==s&&(s.mask=this.mask),this},syncMask(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildMask,this),this},setMask(s){return this.mask=s,this},clearMask(s){return s===void 0&&(s=!1),this._mask=null,this.children.forEach(function(t){t.clearMask(!1)}),s&&this.mask&&this.mask.destroy(),this}},fo=function(s,t){if(s.length===0)return s;t===void 0&&(t=!1);var e=s[0].scene,f=e.sys.displayList;return f.depthSort(),t?s.sort(function(i,n){return f.getIndex(n)-f.getIndex(i)}):s.sort(function(i,n){return f.getIndex(i)-f.getIndex(n)}),s},CI={setDepth(s,t){if(this.depth=s,!t&&this.children)for(var e=this.getAllChildren(),f=0,i=e.length;f<i;f++)e[f].depth=s;return this},swapDepth(s){var t=this.depth,e=s.depth;return this.setDepth(e),s.setDepth(t),this},incDepth(s){if(this.depth+=s,this.children)for(var t=this.getAllChildren(),e=0,f=t.length;e<f;e++)t[e].depth+=s;return this},moveDepthBelow(s){var t=this.displayList;if(s.displayList!==t)return this;var e=this.getAllChildren([this]);fo(e);for(var f=0,i=e.length;f<i;f++){var n=e[f];if(t.exists(n)){t.moveBelow(s,n);break}}return this},moveDepthAbove(s){var t=this.displayList;if(s.displayList!==t)return this;var e=this.getAllChildren([this]);fo(e,!0);for(var f=0,i=e.length;f<i;f++){var n=e[f];if(t.exists(n)){t.moveAbove(s,n);break}}return this}},iT=function(s,t){var e=t(s);if(!e&&s.isRexContainerLite)for(var f=s.children,i=0,n=f.length;i<n;i++)iT(f[i],t)},Yf=function(s,t){for(var e=[s];e.length>0;){var f=e.shift(),i=t(f);!i&&f.isRexContainerLite&&e.push(...f.children)}};const ir=Phaser.Utils.Array;var SI={getChildren(s){if(!s)s=this.children;else for(var t=0,e=this.children.length;t<e;t++)s.push(this.children[t]);return s},getAllChildren(s){s===void 0&&(s=[]);var t=this;return Yf(t,function(e){e!==t&&s.push(e)}),s},getAllVisibleChildren(s){s===void 0&&(s=[]);var t=this;return Yf(t,function(e){if(e!==t){if(!e.visible)return!0;s.push(e)}}),s},bfs(s,t){return t===void 0&&(t=this),Yf(t,s),this},dfs(s,t){return t===void 0&&(t=this),iT(t,s),this},contains(s){var t=Tn(s);return t?t===this?!0:this.contains(t):!1},getByName(s,t){if(t){for(var e=[this],f,i;e.length;){f=e.shift();for(var n=0,o=f.children.length;n<o;n++){if(i=f.children[n],i.name===s)return i;i.isRexContainerLite&&e.push(i)}}return null}else return ir.GetFirst(this.children,"name",s)},getRandom(s,t){return ir.GetRandom(this.children,s,t)},getFirst(s,t,e,f){return ir.GetFirstElement(this.children,s,t,e,f)},getAll(s,t,e,f){return ir.GetAll(this.children,s,t,e,f)},count(s,t,e,f){return ir.CountAllMatching(this.children,s,t,e,f)},swap(s,t){return ir.Swap(this.children,s,t),this},setAll(s,t,e,f){return ir.SetAll(this.children,s,t,e,f),this}},zf=function(s){for(var t=[],e=0,f=s.length;e<f;e++){var i=s[e];!i.hasOwnProperty("rexContainer")||t.push(i.rexContainer)}return t},EI=function(s){for(var t=0,e=s.length;t<e;t++){var f=s[t].scene;if(f)return f}return null},nm=function(s,t,e){if(!e.parent){s.remove();return}var f=e.parent,i=e.self;switch(t){case"x":case"y":f.updateChildPosition(i);break;case"angle":case"rotation":f.updateChildRotation(i);break;case"scaleX":case"scaleY":case"displayWidth":case"displayHeight":f.updateChildScale(i);break;case"alpha":f.updateChildAlpha(i);break;default:f.updateChildPosition(i),f.updateChildRotation(i),f.updateChildScale(i),f.updateChildAlpha(i);break}},PI={tweenChild(s){var t=s.targets;Array.isArray(t)||(t=[t]);var e=this.scene||EI(t);if(!!e){s.targets=zf(t);var f=e.tweens.add(s);return f.on("update",nm),f}},createTweenChildConfig(s){var t=s.targets;t&&(Array.isArray(t)||(t=[t]),s.targets=zf(t));var e=s.onUpdate;return s.onUpdate=function(f,i){e&&e(f,i),nm(f,void 0,i)},s},tween(s){var t=this.scene;return s.targets||(s.targets=this),t.tweens.add(s)},timelineChild(s){var t=s.targets;t&&(Array.isArray(t)||(t=[t]),s.targets=zf(t));for(var e=s.tweens,f=0,i=e.length;f<i;f++)e[f]=this.createTweenChildConfig(e[f]);var n=this.scene.tweens.timeline(s);return n}},sm=function(s){this._setParentContainerFlag=!0;var t=this.getAllChildren([this]);return fo(t),s.add(t),this._setParentContainerFlag=!1,this},MI=function(){if(!this.parentContainer)return this;this._setParentContainerFlag=!0;var s=this.getAllChildren([this]);return fo(s),s.reverse(),this.parentContainer.remove(s),this._setParentContainerFlag=!1,this},AI={addToLayer:sm,addToContainer:sm,removeFromContainer:MI},OI={enableLayer(){if(this.layer)return this;var s=this.scene.add.layer();return this.moveDepthBelow(s),this.once("destroy",function(){s.list.length=0,s.destroy()}),this.addToLayer(s),this.layer=s,this},getLayer(){return this.layer||this.enableLayer(),this.layer},getRenderLayer(){if(this.layer)return this.layer;for(var s=this.getParent();s;){var t=s.layer;if(t)return t;s=s.getParent()}return null},addToRenderLayer(s){if(!s.displayList)return this;var t=this.getRenderLayer();if(!t)return this;s.isRexContainerLite?s.addToLayer(t):t.add(s);var e=Jt(s);return e.layer=t,this},removeFromRenderLayer(s){var t=Jt(s),e=t.layer;return e?(e.remove(s),t.layer=null,this):this}},ae=function(s){return s.displayWidth!==void 0?s.displayWidth:s.width},qt=function(s){return s.displayHeight!==void 0?s.displayHeight:s.height};const rm=Phaser.Geom.Rectangle,Gs=Phaser.Math.Vector2,RI=Phaser.Math.RotateAround;var ul=function(s,t){if(t===void 0?t=new rm:t===!0&&(Vf===void 0&&(Vf=new rm),t=Vf),s.getBounds)return s.getBounds(t);var e,f,i,n,o,r,a,l;if(s.parentContainer){var h=s.parentContainer.getBoundsTransformMatrix();Ud(s,t),h.transformPoint(t.x,t.y,t),e=t.x,f=t.y,Wd(s,t),h.transformPoint(t.x,t.y,t),i=t.x,n=t.y,Xd(s,t),h.transformPoint(t.x,t.y,t),o=t.x,r=t.y,Hd(s,t),h.transformPoint(t.x,t.y,t),a=t.x,l=t.y}else Ud(s,t),e=t.x,f=t.y,Wd(s,t),i=t.x,n=t.y,Xd(s,t),o=t.x,r=t.y,Hd(s,t),a=t.x,l=t.y;return t.x=Math.min(e,i,o,a),t.y=Math.min(f,n,r,l),t.width=Math.max(e,i,o,a)-t.x,t.height=Math.max(f,n,r,l)-t.y,t},Vf=void 0,Ud=function(s,t,e){return t===void 0?t=new Gs:t===!0&&(qi===void 0&&(qi=new Gs),t=qi),s.getTopLeft?s.getTopLeft(t):(t.x=s.x-ae(s)*s.originX,t.y=s.y-qt(s)*s.originY,Rl(s,t,e))},Wd=function(s,t,e){return t===void 0?t=new Gs:t===!0&&(qi===void 0&&(qi=new Gs),t=qi),s.getTopRight?s.getTopRight(t):(t.x=s.x-ae(s)*s.originX+ae(s),t.y=s.y-qt(s)*s.originY,Rl(s,t,e))},Xd=function(s,t,e){return t===void 0?t=new Gs:t===!0&&(qi===void 0&&(qi=new Gs),t=qi),s.getBottomLeft?s.getBottomLeft(t):(t.x=s.x-ae(s)*s.originX,t.y=s.y-qt(s)*s.originY+qt(s),Rl(s,t,e))},Hd=function(s,t,e){return t===void 0?t=new Gs:t===!0&&(qi===void 0&&(qi=new Gs),t=qi),s.getBottomRight?s.getBottomRight(t):(t.x=s.x-ae(s)*s.originX+ae(s),t.y=s.y-qt(s)*s.originY+qt(s),Rl(s,t,e))},qi=void 0,Rl=function(s,t,e){if(e===void 0&&(e=!1),s.rotation!==0&&RI(t,s.x,s.y,s.rotation),e&&s.parentContainer){var f=s.parentContainer.getBoundsTransformMatrix();f.transformPoint(t.x,t.y,t)}return t};const am=Phaser.Geom.Rectangle,LI=Phaser.Geom.Rectangle.Union;var wI=function(s,t){t===void 0?t=new am:t===!0&&(Uf===void 0&&(Uf=new am),t=Uf),t.setTo(0,0,0,0);for(var e,f=!0,i=0,n=s.length;i<n;i++)if(e=s[i],!!e.getBounds){var o=ul(e,!0);f?(t.setTo(o.x,o.y,o.width,o.height),f=!1):LI(o,t,t)}return t},Uf,nr=Phaser.Utils.Objects.GetValue,Pc=function(s){if(!!s){var t=s.gameObjects,e=s.renderTexture,f=nr(s,"x",void 0),i=nr(s,"y",void 0),n=nr(s,"width",void 0),o=nr(s,"height",void 0),r=nr(s,"originX",0),a=nr(s,"originY",0),l=nr(s,"padding",0),h,u;if(n===void 0||o===void 0||f===void 0||i===void 0){var v=wI(t,!0),d=f!==void 0&&i!==void 0;d?(n=Math.max(f-v.left,v.right-f)*2,o=Math.max(i-v.top,v.bottom-i)*2,r=.5,a=.5):(f=v.x,i=v.y,n=v.width,o=v.height,r=0,a=0),h=v.x,u=v.y}else h=f+(0-r)*n,u=i+(0-a)*o;h-=l,u-=l,n+=l*2,o+=l*2;var c=!e;if(c){var p=t[0].scene;e=p.add.renderTexture(0,0,n,o)}e.setPosition(f,i),(e.width!==n||e.height!==o)&&e.setSize(n,o),e.setOrigin(r,a),e.camera.setScroll(h,u),t=fo(pr(t)),e.draw(t);var g=s.saveTexture;return g&&e.saveTexture(g),c&&g&&e.destroy(),e}},FI={snapshot(s){var t=this.scaleX,e=this.scaleY,f=t===1&&e===1;f||this.setScale(1),s===void 0&&(s={}),s.gameObjects=this.getAllVisibleChildren(),s.x=this.x,s.y=this.y,s.originX=this.originX,s.originY=this.originY;var i=Pc(s),n=!!i.scene;return f||(this.setScale(t,e),n&&i.setScale(t,e)),n?i:this}};const om=Phaser.Utils.Objects.GetValue;var nT=function(s,t,e){var f=s.getBounds||s.width!==void 0&&s.height!==void 0;if(!!f){var i,n;typeof e=="number"?i=e:(i=om(e,"color"),n=om(e,"lineWidth")),i===void 0&&(i=16777215),n===void 0&&(n=1),is[0]=Ud(s,is[0]),is[1]=Wd(s,is[1]),is[2]=Hd(s,is[2]),is[3]=Xd(s,is[3]),t.lineStyle(n,i).strokePoints(is,!0,!0)}},is=[void 0,void 0,void 0,void 0];const II=Phaser.Utils.Objects.GetValue;var DI=function(s,t){for(var e=II(t,"drawContainer",!0),f=this.getAllVisibleChildren([this]),i=0,n=f.length;i<n;i++){var o=f[i];!e&&o.isRexContainerLite||nT(o,s,t)}return this};const BI=Phaser.Math.RotateAround;var bI=function(s,t,e){e===void 0&&(e=t);var f={x:(t-s.originX)*s.displayWidth,y:(e-s.originY)*s.displayHeight};return BI(f,0,0,s.rotation),s.originX=t,s.originY=e,s.x=s.x+f.x,s.y=s.y+f.y,s},GI=function(s,t){this.syncChildrenEnable=!1,bI(this,s,t),this.syncChildrenEnable=!0;for(var e=this.getAllChildren(),f=0,i=e.length;f<i;f++)this.resetChildPositionState(e[f]);return this},sT={changeOrigin:GI,drawBounds:DI};Object.assign(sT,rI,aI,lI,uI,fI,dI,vI,pI,gI,mI,xI,yI,TI,CI,SI,PI,AI,OI,FI);class en extends Po{constructor(t,e,f,i,n,o){Array.isArray(i)&&(o=i,i=void 0,n=void 0),super(t,e,f,i,n),this.type="rexContainerLite",this.isRexContainerLite=!0,this.syncChildrenEnable=!0,this._active=!0,this._mask=null,this._scrollFactorX=1,this._scrollFactorY=1,o&&this.add(o)}destroy(t){!this.scene||(this.syncChildrenEnable=!1,super.destroy(t))}resize(t,e){return this.setSize(t,e),this}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this.syncPosition())}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this.syncPosition())}get rotation(){return super.rotation}set rotation(t){this.rotation!==t&&(super.rotation=t,this.syncPosition())}get scaleX(){return super.scaleX}set scaleX(t){this.scaleX!==t&&(super.scaleX=t,this.syncPosition())}get scaleY(){return super.scaleY}set scaleY(t){this.scaleY!==t&&(super.scaleY=t,this.syncPosition())}get scale(){return super.scale}set scale(t){this.scale!==t&&(super.scale=t,this.syncPosition())}get visible(){return super.visible}set visible(t){super.visible!==t&&(super.visible=t,this.syncVisible())}get alpha(){return super.alpha}set alpha(t){super.alpha!==t&&(super.alpha=t,this.syncAlpha())}get active(){return this._active}set active(t){this._active!==t&&(this._active=t,this.syncActive())}get mask(){return this._mask}set mask(t){this._mask!==t&&(this._mask=t,this.syncMask())}get scrollFactorX(){return this._scrollFactorX}set scrollFactorX(t){this._scrollFactorX!==t&&(this._scrollFactorX=t,this.syncScrollFactor())}get scrollFactorY(){return this._scrollFactorY}set scrollFactorY(t){this._scrollFactorY!==t&&(this._scrollFactorY=t,this.syncScrollFactor())}get list(){return this.children}static GetParent(t){return Tn(t)}get parentContainer(){return this._parentContainer}set parentContainer(t){if(!this._parentContainer&&!t){this._parentContainer=t;return}if(this.setParentContainerFlag){this._parentContainer=t;return}this._parentContainer&&!t?(this.removeFromContainer(),this._parentContainer=t):t?(this._parentContainer=t,this.addToContainer(t)):this._parentContainer=t}get setParentContainerFlag(){if(this._setParentContainerFlag)return!0;var t=Tn(this);return t?t.setParentContainerFlag:!1}}Object.assign(en.prototype,sT);yt.register("container",function(s,t,e,f,i){var n=new en(this.scene,s,t,e,f,i);return this.scene.add.existing(n),n});Ct(window,"RexPlugins.UI.Container",en);yt.register("canvas",function(s,t,e,f){var i=new Xn(this.scene,s,t,e,f);return this.scene.add.existing(i),i});Ct(window,"RexPlugins.UI.Canvas",Xn);const wh=Phaser.Utils.Objects.GetValue;class Mc extends Xn{constructor(t,e,f,i,n,o){super(t,e,f),this.type="rexCircleMaskImage",this.setTexture(i,n,o)}setTexture(t,e,f){typeof e=="object"&&(f=e,e=void 0),typeof f=="string"&&(f={maskType:f});var i=wh(f,"maskType",0),n=wh(f,"backgroundColor",void 0);if(i===void 0?i=0:typeof i=="string"&&(i=NI[i]),this._textureKey=t,this._frameName=e,i===null)return this.loadTexture(t,e),this.dirty=!0,this;var o=n!=null;o||this.loadTexture(t,e);var r=this.canvas,a=this.context,l=r.width,h=r.height;switch(a.save(),a.globalCompositeOperation=o?"source-over":"destination-in",a.beginPath(),i){case 2:var u=wh(f,"radius",0),v=wh(f,"iteration",void 0);t1(a,0,0,l,h,u,v);break;default:var d=Math.floor(l/2),c=Math.floor(h/2);i===0?a.arc(d,c,Math.min(d,c),0,2*Math.PI):a.ellipse(d,c,d,c,0,0,2*Math.PI);break}return o&&(a.fillStyle=n),a.fill(),a.restore(),o&&(a.save(),a.globalCompositeOperation="destination-atop",this.loadTexture(t,e),a.restore()),this.dirty=!0,this}resize(t,e){return this.setDisplaySize(t,e),this}}const NI={circle:0,ellipse:1,roundRectangle:2};yt.register("circleMaskImage",function(s,t,e,f,i){var n=new Mc(this.scene,s,t,e,f,i);return this.scene.add.existing(n),n});Ct(window,"RexPlugins.UI.CircleMaskImage",Mc);const ba=Phaser.Utils.Objects.GetValue;class rT extends Xn{constructor(t,e,f,i,n,o){super(t,e,f),this.type="rexAlphaMaskImage",this.maskFrame=null,this.setTexture(i,n,o)}setTexture(t,e,f){typeof e=="object"&&(f=e,e=void 0),typeof f=="string"&&(f={mask:{key:f}});var i=ba(f,"mask.key"),n=ba(f,"mask.frame"),o=ba(f,"mask.invertAlpha",!1),r=ba(f,"mask.scale"),a=ba(f,"backgroundColor");if(i){this._maskKey=i,this._maskFrame=n,this._maskScale=r;var l=i?this.scene.sys.textures.get(i):null;this.maskFrame=l?l.get(n):null}this._textureKey=t,this._frameName=e;var h=this.maskFrame;if(h===null)return this.loadTexture(t,e),this.dirty=!0,this;var u=a!=null;this.loadTexture(t,e);var v=this.canvas,d=this.context,c=v.width,p=v.height;d.save(),d.globalCompositeOperation=o?"destination-out":"destination-in";var g,m;this._maskScale!=null?(g=h.cutWidth*this._maskScale,m=h.cutHeight*this._maskScale):(g=c,m=p);var x=(c-g)/2,y=(p-m)/2;return this.drawFrame(this._maskKey,this._maskFrame,x,y,g,m),d.restore(),u&&(d.save(),d.globalCompositeOperation="destination-over",d.fillStyle=a,d.fillRect(0,0,c,p),d.restore()),this.dirty=!0,this}resize(t,e){return this.setDisplaySize(t,e),this}}yt.register("alphaMaskImage",function(s,t,e,f,i){var n=new rT(this.scene,s,t,e,f,i);return this.scene.add.existing(n),n});Ct(window,"RexPlugins.UI.AlphaMaskImage",rT);const Fh=Phaser.Utils.Objects.GetValue;var nl=function(s,t){return t===void 0?s:s[t]},Ds=function(s,t,e){s===void 0&&(s={}),t===void 0&&(t=0);var f=typeof t;return f==="string"?s[t]=e:f==="number"?(s.left=t,s.right=t,s.top=t,s.bottom=t):(s.left=Fh(t,"left",0),s.right=Fh(t,"right",0),s.top=Fh(t,"top",0),s.bottom=Fh(t,"bottom",0)),s};class Ac{constructor(t,e){this.setParent(t),this.type=e,this.reset().setActive()}destroy(){this.parent.removeChild(this)}setParent(t){return this.parent=t,this}get scene(){return this.parent.scene}get canvas(){return this.parent?this.parent.canvas:null}get context(){return this.parent?this.parent.context:null}setDirty(t){return t&&this.parent&&(this.parent.dirty=!0),this}get active(){return this._active}set active(t){this.setDirty(this._active!=t),this._active=t}setActive(t){return t===void 0&&(t=!0),this.active=t,this}modifyPorperties(t){return this}onFree(){this.reset().setParent()}reset(){return this}}Object.assign(Ac.prototype,El);const YI=Phaser.Math.DegToRad,zI=Phaser.Math.RadToDeg,Ih=Phaser.Utils.Objects.GetValue;class Ll extends Ac{constructor(t,e){super(t,e),this.originX=0,this.offsetX=0,this.offsetY=0}get visible(){return this._visible}set visible(t){this.setDirty(this._visible!=t),this._visible=t}setVisible(t){return t===void 0&&(t=!0),this.visible=t,this}get alpha(){return this._alpha}set alpha(t){this.setDirty(this._alpha!=t),this._alpha=t}setAlpha(t){return this.alpha=t,this}get x(){return this._x}set x(t){this.setDirty(this._x!=t),this._x=t}setX(t){return this.x=t,this}get y(){return this._y}set y(t){this.setDirty(this._y!=t),this._y=t}setY(t){return this.y=t,this}setPosition(t,e){return this.x=t,this.y=e,this}setInitialPosition(t,e){return this.x0=t,this.y0=e,this}get rotation(){return this._rotation}set rotation(t){this.setDirty(this._rotation!=t),this._rotation=t}setRotation(t){return this.rotation=t,this}get angle(){return zI(this._rotation)}set angle(t){this.rotation=YI(t)}setAngle(t){return this.angle=t,this}get scaleX(){return this._scaleX}set scaleX(t){this.setDirty(this._scaleX!==t),this._scaleX=t}setScaleX(t){return this.scaleX=t,this}get width(){return 0}set width(t){}setWidth(t,e){return e===void 0&&(e=!1),this.width=t,e&&(this.scaleY=this.scaleX),this}get leftSpace(){return this._leftSpace}set leftSpace(t){this.setDirty(this._leftSpace!==t),this._leftSpace=t}setLeftSpace(t){return this.leftSpace=t,this}get rightSpace(){return this._rightSpace}set rightSpace(t){this.setDirty(this._rightSpace!==t),this._rightSpace=t}setRightSpace(t){return this.rightSpace=t,this}get outerWidth(){return this.width+this.leftSpace+this.rightSpace}get scaleY(){return this._scaleY}set scaleY(t){this.setDirty(this._scaleY!==t),this._scaleY=t}setScaleY(t){return this.scaleY=t,this}get height(){return 0}set height(t){}setHeight(t,e){return e===void 0&&(e=!1),this.height=t,e&&(this.scaleX=this.scaleY),this}setScale(t,e){return e===void 0&&(e=t),this.scaleX=t,this.scaleY=e,this}setOrigin(t){return this.originX=t,this}setAlign(t){return this.align=t,this}modifyPorperties(t){if(!t)return this;t.hasOwnProperty("x")&&this.setX(t.x),t.hasOwnProperty("y")&&this.setY(t.y),t.hasOwnProperty("rotation")?this.setRotation(t.rotation):t.hasOwnProperty("angle")&&this.setAngle(t.angle),t.hasOwnProperty("alpha")&&this.setAlpha(t.alpha);var e=Ih(t,"width",void 0),f=Ih(t,"height",void 0),i=Ih(t,"scaleX",void 0),n=Ih(t,"scaleY",void 0);return e!==void 0?f===void 0&&n===void 0?this.setWidth(e,!0):this.setWidth(e):i!==void 0&&this.setScaleX(i),f!==void 0?e===void 0&&i===void 0?this.setHeight(f,!0):this.setHeight(f):n!==void 0&&this.setScaleY(n),t.hasOwnProperty("leftSpace")&&this.setLeftSpace(t.leftSpace),t.hasOwnProperty("rightSpace")&&this.setRightSpace(t.rightSpace),t.hasOwnProperty("align")&&this.setAlign(t.align),this}setDrawBelowCallback(t){return this.drawBelowCallback=t,this}setDrawAboveCallback(t){return this.drawAboveCallback=t,this}reset(){return this.setVisible().setAlpha(1).setPosition(0,0).setRotation(0).setScale(1,1).setLeftSpace(0).setRightSpace(0).setOrigin(0).setAlign().setDrawBelowCallback().setDrawAboveCallback(),this}drawContent(){}draw(){var t=this.context;t.save();var e=this.x+this.leftSpace+this.offsetX-this.originX*this.width,f=this.y+this.offsetY;this.autoRound&&(e=Math.round(e),f=Math.round(f)),t.translate(e,f),t.globalAlpha=this.alpha,t.scale(this.scaleX,this.scaleY),t.rotate(this.rotation),this.drawBelowCallback&&this.drawBelowCallback(this),this.drawContent(),this.drawAboveCallback&&this.drawAboveCallback(this),t.restore()}}const sr=Phaser.Utils.Objects.GetValue;class VI extends Ll{constructor(t,e){super(t,"background"),this.setColor(sr(e,"color",null),sr(e,"color2",null),sr(e,"horizontalGradient",!0)),this.setStroke(sr(e,"stroke",null),sr(e,"strokeThickness",2)),this.setCornerRadius(sr(e,"cornerRadius",0),sr(e,"cornerIteration",null))}set color(t){t=Xt(t,this.canvas,this.context),this.setDirty(this._color!=t),this._color=t}get color(){return this._color}set color2(t){t=Xt(t,this.canvas,this.context),this.setDirty(this._color2!=t),this._color2=t}get color2(){return this._color2}set horizontalGradient(t){this.setDirty(this._horizontalGradient!=t),this._horizontalGradient=t}get horizontalGradient(){return this._horizontalGradient}setColor(t,e,f){return f===void 0&&(f=!0),this.color=t,this.color2=e,this.horizontalGradient=f,this}set stroke(t){t=Xt(t,this.canvas,this.context),this.setDirty(this._stroke!=t),this._stroke=t}get stroke(){return this._stroke}set strokeThickness(t){this.setDirty(this._strokeThickness!=t),this._strokeThickness=t}get strokeThickness(){return this._strokeThickness}setStroke(t,e){return this.stroke=t,this.strokeThickness=e,this}set cornerRadius(t){this.setDirty(this._cornerRadius!=t),this._cornerRadius=t}get cornerRadius(){return this._cornerRadius}set cornerIteration(t){this.setDirty(this._cornerIteration!=t),this._cornerIteration=t}get cornerIteration(){return this._cornerIteration}setCornerRadius(t,e){return this.cornerRadius=t,this.cornerIteration=e,this}drawContent(){fc(this.parent,this.color,this.stroke,this.strokeThickness,this.cornerRadius,this.color2,this.horizontalGradient,this.cornerIteration)}}const Ga=Phaser.Utils.Objects.GetValue;class UI extends Ll{constructor(t,e){super(t,"background"),this.setColor(Ga(e,"color",null),Ga(e,"color2",null),Ga(e,"horizontalGradient",!0)),this.setStroke(Ga(e,"stroke",null),Ga(e,"strokeThickness",2))}set color(t){t=Xt(t,this.canvas,this.context),this.setDirty(this._color!=t),this._color=t}get color(){return this._color}set color2(t){t=Xt(t,this.canvas,this.context),this.setDirty(this._color2!=t),this._color2=t}get color2(){return this._color2}set horizontalGradient(t){this.setDirty(this._horizontalGradient!=t),this._horizontalGradient=t}get horizontalGradient(){return this._horizontalGradient}setColor(t,e,f){return f===void 0&&(f=!0),this.color=t,this.color2=e,this.horizontalGradient=f,this}set stroke(t){t=Xt(t,this.canvas,this.context),this.setDirty(this._stroke!=t),this._stroke=t}get stroke(){return this._stroke}set strokeThickness(t){this.setDirty(this._strokeThickness!=t),this._strokeThickness=t}get strokeThickness(){return this._strokeThickness}setStroke(t,e){return this.stroke=t,this.strokeThickness=e,this}drawContent(){var t=this.parent.padding,e=t.left,f=t.top,i=this.parent.width-t.left-t.right,n=this.parent.height-t.top-t.bottom,o=this.context;if(this.color!=null){var r;if(this.color2!=null){var a;this.horizontalGradient?a=o.createLinearGradient(0,0,i,0):a=o.createLinearGradient(0,0,0,n),a.addColorStop(0,this.color),a.addColorStop(1,this.color2),r=a}else r=this.color;o.fillStyle=r,o.fillRect(e,f,i,n)}this.stroke!=null&&this.strokeThickness>0&&(o.strokeStyle=this.stroke,o.lineWidth=this.strokeThickness,o.strokeRect(e,f,i,n))}}var Dh=function(s,t,e){return t.hasOwnProperty(s)?t[s]:e[s]};const Ze=Phaser.Utils.Objects.GetValue;class wl{constructor(t){this.set(t)}toJSON(){return{bold:this.bold,italic:this.italic,fontSize:this.fontSize,fontFamily:this.fontFamily,color:this.color,stroke:this.stroke,strokeThickness:this.strokeThickness,shaodwColor:this.shadowColor,shadowBlur:this.shadowBlur,shadowOffsetX:this.shadowOffsetX,shadowOffsetY:this.shadowOffsetY,offsetX:this.offsetX,offsetY:this.offsetY,leftSpace:this.leftSpace,rightSpace:this.rightSpace,align:this.align}}set(t){return this.setBold(Ze(t,"bold",!1)),this.setItalic(Ze(t,"italic",!1)),this.setFontSize(Ze(t,"fontSize","16px")),this.setFontFamily(Ze(t,"fontFamily","Courier")),this.setColor(Ze(t,"color","#fff")),this.setStrokeStyle(Ze(t,"stroke",null),Ze(t,"strokeThickness",0)),this.setShadow(Ze(t,"shadowColor",null),Ze(t,"shadowOffsetX",0),Ze(t,"shadowOffsetY",0),Ze(t,"shadowBlur",0)),this.setOffset(Ze(t,"offsetX",0),Ze(t,"offsetY",0)),this.setSpace(Ze(t,"leftSpace",0),Ze(t,"rightSpace",0)),this.setAlign(Ze(t,"align",void 0)),this}modify(t){return t.hasOwnProperty("bold")&&this.setBold(t.bold),t.hasOwnProperty("italic")&&this.setItalic(t.italic),t.hasOwnProperty("fontSize")&&this.setFontSize(t.fontSize),t.hasOwnProperty("fontFamily")&&this.setFontFamily(t.fontFamily),t.hasOwnProperty("color")&&this.setColor(t.color),(t.hasOwnProperty("stroke")||t.hasOwnProperty("strokeThickness"))&&this.setStrokeStyle(Dh("stroke",t,this),Dh("strokeThickness",t,this)),t.hasOwnProperty("shadowColor")&&this.setShadowColor(t.shadowColor),(t.hasOwnProperty("shadowOffsetX")||t.hasOwnProperty("shadowOffsetY"))&&this.setShadowOffset(Dh("shadowOffsetX",t,this),Dh("shadowOffsetY",t,this)),t.hasOwnProperty("shadowBlur")&&this.setShadowBlur(t.shaodwBlur),t.hasOwnProperty("offsetX")&&this.setOffsetX(t.offsetX),t.hasOwnProperty("offsetY")&&this.setOffsetY(t.offsetY),t.hasOwnProperty("leftSpace")&&this.setLeftSpace(t.leftSpace),t.hasOwnProperty("rightSpace")&&this.setRightSpace(t.rightSpace),t.hasOwnProperty("align")&&this.setAlign(t.align),this}clone(){return new wl(this.toJSON())}copyFrom(t){return this.set(t.toJSON()),this}copyTo(t){return t.set(this.toJSON()),this}setBold(t){return t===void 0&&(t=!0),this.bold=t,this}setItalic(t){return t===void 0&&(t=!0),this.italic=t,this}get fontStyle(){return this.bold&&this.italic?"bold italic":this.bold?"bold":this.italic?"italic":""}setFontSize(t){return typeof t=="number"&&(t=`${t}px`),this.fontSize=t,this}setFontFamily(t){return this.fontFamily=t,this}get font(){return`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`}setColor(t){return this.color=Xt(t),this}get hasFill(){return this.color!=null}setStrokeStyle(t,e){return this.stroke=Xt(t),e!==void 0&&(this.strokeThickness=e),this}setStrokeThickness(t){return this.strokeThickness=t,this}get hasStroke(){return this.stroke!=null&&this.strokeThickness>0}setShadowColor(t){return this.shadowColor=Xt(t),this}setShadowOffset(t,e){return t===void 0&&(t=0),e===void 0&&(e=0),this.shadowOffsetX=t,this.shadowOffsetY=e,this}setShadowBlur(t){return t===void 0&&(t=0),this.shaodwBlur=t,this}setShadow(t,e,f,i){return this.setShadowColor(t).setShadowOffset(e,f).setShadowBlur(i),this}setOffsetX(t){return t===void 0&&(t=0),this.offsetX=t,this}setOffsetY(t){return t===void 0&&(t=0),this.offsetY=t,this}setOffset(t,e){return this.setOffsetX(t).setOffsetY(e),this}setLeftSpace(t){return t===void 0&&(t=0),this.leftSpace=t,this}setRightSpace(t){return t===void 0&&(t=0),this.rightSpace=t,this}setSpace(t,e){return this.setLeftSpace(t).setRightSpace(e),this}setAlign(t){return this.align=t,this}syncFont(t){return t.font=this.font,this}syncStyle(t){t.textBaseline="alphabetic";var e=this.hasFill,f=this.hasStroke;return t.fillStyle=e?this.color:"#000",t.strokeStyle=f?this.stroke:"#000",t.lineWidth=f?this.strokeThickness:0,t.lineCap="round",t.lineJoin="round",this}syncShadow(t){t.shadowColor!=null?(t.shadowColor=this.shadowColor,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowBlur=this.shadowBlur):(t.shadowColor=0,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0)}getTextMetrics(t,e){return this.syncFont(t).syncStyle(t),t.measureText(e)}}var WI=function(s,t){return s===void 0&&(s=0),t===void 0&&(t=0),s>0&&t>0?(this.fixedWidth!==s||this.fixedHeight!==t)&&(this.dirty=!0):this.dirty=!0,this.fixedWidth=s,this.fixedHeight=t,s>0&&(this.width=s),t>0&&(this.height=t),this},XI=function(s,t){var e=this.padding,f=e.left,i=e.right,n=e.top,o=e.bottom;return Ds(e,s,t),this.dirty=this.dirty||f!=e.left||i!=e.right||n!=e.top||o!=e.bottom,this},HI=function(s){return nl(this.padding,s)},$I=function(s){return this.textStyle.modify(s),this},kI=function(){return this.textStyle.copyFrom(this.defaultTextStyle),this},KI=function(s){return this.poolManager.free(s),RemoveItem(this.children.list,s),this.lastAppendedChildren.length=0,this.dirty=!0,this},ZI=function(){return this.poolManager.freeMultiple(this.children),this.children.length=0,this.lastAppendedChildren.length=0,this.dirty=!0,this},JI=function(){return this.setText(),this},QI=function(s){return this.lastAppendedChildren.length=0,Array.isArray(s)?(this.children.push(...s),this.lastAppendedChildren.push(...s)):(this.children.push(s),this.lastAppendedChildren.push(s)),this};const ua="text",Oc="image",Rc="command";var Ns=function(s){var t=s.type;return t===ua||t===Oc},aT=function(s){return s.type===ua&&s.text===`
`},jI=function(s){return s.type===ua&&s.text===" "},qI=function(s){return s.type===Rc};class _I extends Ll{constructor(t,e,f){super(t,ua),this.style=new wl(f),this.setText(e)}get autoRound(){return this.parent.autoRound}get offsetX(){return this.style.offsetX}set offsetX(t){this.style&&(this.style.offsetX=t)}get offsetY(){return this.style.offsetY}set offsetY(t){this.style&&(this.style.offsetY=t)}get leftSpace(){return this.style.leftSpace*this.scaleX}set leftSpace(t){this.style&&(this.style.leftSpace=t),super.leftSpace=t}get rightSpace(){return this.style.rightSpace*this.scaleX}set rightSpace(t){this.style&&(this.style.rightSpace=t),super.rightSpace=t}get align(){return this.style.align}set align(t){this.style&&(this.style.align=t)}modifyStyle(t){return this.setDirty(!0),this.style.modify(t),this}modifyPorperties(t){return t?(this.modifyStyle(t),super.modifyPorperties(t),this):this}setText(t){return this.setDirty(this.text!=t),this.text=t,this.updateTextSize(),this}updateTextSize(){if(this.text===`
`||this.text==="")this.textWidth=0,this.textHeight=0;else{var t=this.style.getTextMetrics(this.context,this.text);this.textWidth=t.width;var e,f;t.hasOwnProperty("actualBoundingBoxAscent")?(e=t.actualBoundingBoxAscent,f=t.actualBoundingBoxDescent):(e=0,f=0),this.textHeight=e+f}return this}get width(){return this.textWidth*this.scaleX}set width(t){this.textWidth>0?this.scaleX=t/this.textWidth:this.scaleX=1}get height(){return this.textHeight*this.scaleY}set height(t){this.textHeight>0?this.scaleY=t/this.textHeight:this.scaleY=1}drawContent(){var t=this.style,e=t.hasFill,f=t.hasStroke;if(!(!e&&!f)){var i=this.context;t.syncFont(i).syncStyle(i),f&&(t.syncShadow(i),i.strokeText(this.text,0,0)),e&&(t.syncShadow(i),i.fillText(this.text,0,0))}}draw(){if(!this.visible||this.text===""||this.text===`
`)return this;super.draw()}}var Fl=function(s,t){t&&this.textStyle.modify(t);for(var e=[],f=0,i=s.length;f<i;f++){var n=s.charAt(f),o=this.poolManager.allocate(ua);o===null?o=new _I(this,n,this.textStyle):o.setParent(this).setActive().modifyStyle(this.textStyle).setText(n),e.push(o)}return this.addChild(e),this},tD=function(s,t){return s===void 0&&(s=""),this.removeChildren(),Fl.call(this,s,t),this.dirty=!0,this};class eD extends Ll{constructor(t,e,f){super(t,Oc),this.setTexture(e,f)}get frameWidth(){return this.frameObj?this.frameObj.cutWidth:0}get frameHeight(){return this.frameObj?this.frameObj.cutHeight:0}get offsetY(){return-this.height}set offsetY(t){}get key(){return this._key}set key(t){this.setDirty(this._key!=t),this._key=t}get frame(){return this._frame}set frame(t){this.setDirty(this._frame!=t),this._frame=t}setTexture(t,e){return this.key=t,this.frame=e,this.frameObj=this.scene.sys.textures.getFrame(t,e),this}get width(){return this.frameWidth*this.scaleX}set width(t){this.setDirty(this.width!==t),this.scaleX=t/this.frameWidth}get height(){return this.frameHeight*this.scaleY}set height(t){this.setDirty(this.height!==t),this.scaleY=t/this.frameHeight}setHeight(t,e){return e===void 0&&(e=!1),this.height=t,e&&(this.scaleX=this.scaleY),this}drawContent(){var t=this.context,e=this.frameObj,f=this.frameWidth,i=this.frameHeight;t.drawImage(e.source.image,e.cutX,e.cutY,f,i,0,0,f,i)}draw(){if(!this.visible)return this;super.draw()}}var oT=function(s,t,e){var f=this.poolManager.allocate(Oc);return f===null?f=new eD(this,s,t):f.setParent(this).setActive().setTexture(s,t),f.modifyPorperties(e),this.addChild(f),this};class iD extends Ac{constructor(t,e,f,i,n){super(t,Rc),this.setName(e).setParameter(i).setCallback(f,n)}setName(t){return this.name=t,this}setParameter(t){return this.param=t,this}setCallback(t,e){return this.callback=t,this.scope=e,this}exec(){var t;return this.scope?t=this.callback.call(this.scope,this.param,this.name):t=this.callback(this.param,this.name),t}draw(){}onFree(){super.onFree(),this.setName().setCallback().setParameter()}}var kt=function(s,t,e,f){var i=this.poolManager.allocate(Rc);return i===null?i=new iD(this,s,t,e,f):i.setParent(this).setActive().setName(s).setCallback(t,f).setParameter(e),this.addChild(i),this},nD=function(s){return s===void 0&&(s={}),this.wrapConfig=s,this},sD=function(s,t,e,f){f===void 0&&(f={word:[],width:0}),f.word.length=0;for(var i=s.length,n=t,o=f.word,r=0;n<i;){var a=s[n];if(!Ns(a)){o.push(a),n++;continue}if(a.type===ua&&a.text!==" "&&a.text!==`
`)o.push(a),r+=a.outerWidth,n++;else{n===t&&(o.push(a),r+=a.outerWidth);break}if(e)break}return f.width=r,f},hT=function(s){for(var t=0,e=s.length;t<e;t++){var f=s[t];if(f.align!==void 0)return f.align}},lT=function(s,t,e){if(!(t===0&&e===0))for(var f=0,i=s.length;f<i;f++){var n=s[f];!Ns(n)||(n.x+=t,n.y+=e)}},rD=function(s,t,e){var f=s.hAlign,i=s.vAlign,n,o,r=s.linesHeight;switch(i){case 1:case"center":o=(e-r)/2;break;case 2:case"bottom":o=e-r;break;default:o=0;break}for(var a=s.lines,l=0,h=a.length;l<h;l++){var u=a[l],v=u.width,d=u.children,c=hT(d);switch(c===void 0&&(c=f),c){case 1:case"center":n=(t-v)/2;break;case 2:case"right":n=t-v;break;default:n=0;break}lT(d,n,o)}};const cn=Phaser.Utils.Objects.GetValue;var aD=function(s){var t=cn(s,"start",0);Ds(this.wrapPadding,cn(s,"padding",0));var e=this.padding.top+this.padding.bottom+this.wrapPadding.top+this.wrapPadding.bottom,f=this.padding.left+this.padding.right+this.wrapPadding.left+this.wrapPadding.right,i=cn(s,"lineHeight",void 0),n;if(i===void 0)if(n=cn(s,"maxLines",0),this.fixedHeight>0){var G=this.fixedHeight-e;i=G/n}else i=0;else if(this.fixedHeight>0){if(n=cn(s,"maxLines",void 0),n===void 0){var G=this.fixedHeight-e;n=Math.floor(G/i)}}else n=cn(s,"maxLines",0);var o=n===0,r=cn(s,"wrapWidth",void 0);r===void 0&&(this.fixedWidth>0?r=this.fixedWidth-f:r=1/0);for(var a=cn(s,"letterSpacing",0),l=cn(s,"hAlign",0),h=cn(s,"vAlign",0),u=cn(s,"charWrap",!1),v={start:t,isLastPage:!1,padding:this.wrapPadding,lineHeight:i,maxLines:n,wrapWidth:r,letterSpacing:a,hAlign:l,vAlign:h,charWrap:u,children:[],lines:[],maxLineWidth:0,linesHeight:0},d=this.children,c=0,p=d.length;c<p;c++)d[c].setActive(!1);r+=a;for(var g=this.padding.left+this.wrapPadding.left,m=this.padding.top+this.wrapPadding.top+i,x=g,y=m,T=r,C=t,S=d.length,E=v.children,M=v.lines,O=[],L=0,R=0,w;C<S;){w=sD(d,C,u,w);var D=w.word,B=D.length,N=w.width+B*a;C+=B;var z=aT(D[0]);if(T<N||z){if(z){var X=D[0];X.setActive().setPosition(x,y),E.push(X),O.push(X)}if(x=g,y+=i,T=r,M.push({children:O,width:L}),R=Math.max(R,L),L=0,O=[],!o&&M.length===n)break;if(z)continue}T-=N,L+=N;for(var c=0,p=D.length;c<p;c++){var k=D[c];k.setActive(),E.push(k),O.push(k),Ns(k)&&(k.setPosition(x,y),x+=k.outerWidth+a)}}O.length>0&&(M.push({children:O,width:L}),R=Math.max(R,L)),v.start+=E.length,v.isLastPage=v.start===S,v.maxLineWidth=R,v.linesHeight=M.length*i;var K=this.fixedWidth>0?this.fixedWidth:v.maxLineWidth+f,b=this.fixedHeight>0?this.fixedHeight:v.linesHeight+e,I=K-f,G=b-e;rD(v,I,G),this.setSize(K,b);for(var c=0,p=E.length;c<p;c++){var k=E[c];!Ns(k)||(k.x0=k.x,k.y0=k.y)}return v};const oD=Phaser.Utils.Objects.Merge;var hD=function(s){return s===void 0&&(s={}),aD.call(this,oD(s,this.wrapConfig))},lD=function(s,t,e){var f=s.hAlign,i=s.vAlign,n,o,r=s.rtl,a=s.lines,l=s.lineWidth,h=s.linesWidth;switch(f){case 1:case"center":n=(t-h)/2;break;case 2:case"right":n=t-h;break;default:n=0;break}r&&(n+=l);for(var u=0,v=a.length;u<v;u++){var d=a[r?v-u-1:u],c=d.children,p=d.height,g=hT(c);switch(g===void 0&&(g=i),g){case 1:case"center":o=(e-p)/2;break;case 2:case"bottom":o=e-p;break;default:o=0;break}lT(c,n,o),n+=l}};const bi=Phaser.Utils.Objects.GetValue;var uD=function(s){var t=bi(s,"start",0);Ds(this.wrapPadding,bi(s,"padding",0));var e=this.padding.top+this.padding.bottom+this.wrapPadding.top+this.wrapPadding.bottom,f=this.padding.left+this.padding.right+this.wrapPadding.left+this.wrapPadding.right,i=bi(s,"lineWidth",void 0),n;if(i===void 0)if(n=bi(s,"maxLines",0),this.fixedWidth>0){var K=this.fixedWidth-f;i=K/n}else i=0;else if(this.fixedWidth>0){if(n=bi(s,"maxLines",void 0),n===void 0){var K=this.fixedWidth-f;n=Math.floor(K/i)+1}}else n=bi(s,"maxLines",0);var o=n===0,r=bi(s,"fixedChildHeight",void 0);if(r===void 0){var a=bi(s,"charPerLine",void 0);if(a!==void 0){var b=this.fixedHeight-e;r=Math.floor(b/a)}}var l=bi(s,"wrapHeight",void 0);l===void 0&&(this.fixedHeight>0?l=this.fixedHeight-e:l=1/0);for(var h=bi(s,"letterSpacing",0),u=bi(s,"rtl",!0),v=bi(s,"hAlign",u?2:0),d=bi(s,"vAlign",0),c={start:t,isLastPage:!1,padding:this.wrapPadding,lineWidth:i,maxLines:n,fixedChildHeight:r,wrapHeight:l,letterSpacing:h,hAlign:v,vAlign:d,rtl:u,children:[],lines:[],maxLineHeight:0,linesWidth:0},p=this.children,g=0,m=p.length;g<m;g++)p[g].setActive(!1);l+=h;for(var x=this.padding.left+this.wrapPadding.left,y=this.padding.top+this.wrapPadding.top,T=x,C=y,S=l,E=t,M=p.length,O=c.children,L=c.lines,R=[],w=0,D=0;E<M;){var B=p[E];if(E++,!Ns(B)){B.setActive(),O.push(B),R.push(B);continue}var N=(r!==void 0?r:B.height)+h,z=aT(B);if(S<N||z){if(z&&(B.setActive().setPosition(T,C).setOrigin(.5),O.push(B),R.push(B)),T=x,C=y,S=l,L.push({children:R,height:w}),D=Math.max(D,w),w=0,R=[],!o&&L.length===n)break;if(z)continue}S-=N,w+=N,B.setActive().setPosition(T,C).setOrigin(.5),O.push(B),R.push(B),C+=N}R.length>0&&(L.push({children:R,height:w}),D=Math.max(D,w)),c.start+=O.length,c.isLastPage=c.start===M,c.maxLineHeight=D,c.linesWidth=L.length*i;var X=this.fixedWidth>0?this.fixedWidth:c.linesWidth+f,k=this.fixedHeight>0?this.fixedHeight:c.maxLineHeight+e,K=X-f,b=k-e;lD(c,K,b),this.setSize(X,k);for(var g=0,m=O.length;g<m;g++){var I=O[g];!Ns(I)||(I.x0=I.x,I.y0=I.y)}return c};const fD=Phaser.Utils.Objects.Merge;var dD=function(s){return s===void 0&&(s={}),uD.call(this,fD(s,this.wrapConfig))},cD=function(){this.clear(),this.setSize(this.width,this.height),this.background.active&&this.background.draw();for(var s,t=0,e=this.children.length;t<e;t++)s=this.children[t],s.active&&s.visible&&s.draw();this.innerBounds.active&&this.innerBounds.draw()},vD=function(){return this.children},pD=function(){return this.lastAppendedChildren};const gD=Phaser.Utils.Array.GetAll;var mD=function(){return gD(this.children,"active",!0)},xD=function(){for(var s=this.children,t=0,e=0,f=0,i=s.length;f<i;f++){var n=s[f];if(!(!Ns(n)||!n.active||!n.visible)){var o=n.x0!==void 0?n.x0:n.x,r=n.y0!==void 0?n.y0:n.y;t=Math.max(t,o),e=Math.max(e,r)}}var a=t+this.padding.left+this.padding.right+this.wrapPadding.left+this.wrapPadding.right,l=e+this.padding.top+this.padding.bottom+this.wrapPadding.top+this.wrapPadding.bottom;return(this.width!==a||this.height!==l)&&(this.dirty=!0,this.width=a,this.height=l),this},yD={setFixedSize:WI,setPadding:XI,getPadding:HI,modifyTextStyle:$I,resetTextStyle:kI,removeChild:KI,removeChildren:ZI,clearContent:JI,addChild:QI,setText:tD,appendText:Fl,appendImage:oT,appendCommand:kt,setWrapConfig:nD,runWordWrap:hD,runVerticalWrap:dD,drawContent:cD,getChildren:vD,getLastAppendedChildren:pD,getActiveChildren:mD,setToMinSize:xD};const TD=Phaser.Utils.Objects.GetFastValue;var CD={};class SD{constructor(t){this.pools=TD(t,"pools",CD)}free(t){if(!this.pools)return this;var e=t.type;return this.pools.hasOwnProperty(e)||(this.pools[e]=new bs),this.pools[e].push(t),t.onFree(),this}freeMultiple(t){if(!this.pools)return this;for(var e=0,f=t.length;e<f;e++)this.free(t[e]);return this}allocate(t){return!this.pools||!this.pools.hasOwnProperty(t)?null:this.pools[t].pop()}}const hm=Phaser.Utils.Objects.IsPlainObject,Ki=Phaser.Utils.Objects.GetValue;class Mo extends Xn{constructor(t,e,f,i,n,o){hm(e)?(o=e,e=Ki(o,"x",0),f=Ki(o,"y",0),i=Ki(o,"width",0),n=Ki(o,"height",0)):hm(i)&&(o=i,i=Ki(o,"width",0),n=Ki(o,"height",0));var r=i===0?1:i,a=n===0?1:n;super(t,e,f,r,a),this.type="rexDynamicText",this.autoRound=!0,this.padding=Ds(),this.wrapPadding=Ds();var l=Ki(o,"style",void 0);this.defaultTextStyle=new wl(l),this.textStyle=this.defaultTextStyle.clone(),this.background=new VI(this,Ki(o,"background",void 0)),this.innerBounds=new UI(this,Ki(o,"innerBounds",void 0)),this.children=[],this.lastAppendedChildren=[],this.poolManager=new SD(o),this.setFixedSize(i,n),this.setPadding(Ki(o,"padding",0)),this.setWrapConfig(Ki(o,"wrap",void 0));var h=Ki(o,"text",void 0);h&&this.setText(h)}updateTexture(){return this.drawContent(),super.updateTexture(),this}}Object.assign(Mo.prototype,yD);yt.register("dynamicText",function(s,t,e,f,i){var n=new Mo(this.scene,s,t,e,f,i);return this.scene.add.existing(n),n});Ct(window,"RexPlugins.UI.DynamicText",Mo);var fa={setEventEmitter(s,t){return t===void 0&&(t=Phaser.Events.EventEmitter),this._privateEE=s===!0||s===void 0,this._eventEmitter=this._privateEE?new t:s,this},destroyEventEmitter(){return this._eventEmitter&&this._privateEE&&this._eventEmitter.shutdown(),this},getEventEmitter(){return this._eventEmitter},on:function(){return this._eventEmitter&&this._eventEmitter.on.apply(this._eventEmitter,arguments),this},once:function(){return this._eventEmitter&&this._eventEmitter.once.apply(this._eventEmitter,arguments),this},off:function(){return this._eventEmitter&&this._eventEmitter.off.apply(this._eventEmitter,arguments),this},emit:function(s){return this._eventEmitter&&s&&this._eventEmitter.emit.apply(this._eventEmitter,arguments),this},addListener:function(){return this._eventEmitter&&this._eventEmitter.addListener.apply(this._eventEmitter,arguments),this},removeListener:function(){return this._eventEmitter&&this._eventEmitter.removeListener.apply(this._eventEmitter,arguments),this},removeAllListeners:function(){return this._eventEmitter&&this._eventEmitter.removeAllListeners.apply(this._eventEmitter,arguments),this},listenerCount:function(){return this._eventEmitter?this._eventEmitter.listenerCount.apply(this._eventEmitter,arguments):0},listeners:function(){return this._eventEmitter?this._eventEmitter.listeners.apply(this._eventEmitter,arguments):[]},eventNames:function(){return this._eventEmitter?this._eventEmitter.eventNames.apply(this._eventEmitter,arguments):[]}},uT=function(s){if(s==null||typeof s!="object")return null;if(aa(s))return s;if(s.scene&&aa(s.scene))return s.scene;if(s.parent&&s.parent.scene&&aa(s.parent.scene))return s.parent.scene};const ED=Phaser.Utils.Objects.GetValue;class He{constructor(t,e){this.parent=t,this.scene=uT(t),this.isShutdown=!1,this.setEventEmitter(ED(e,"eventEmitter",!0)),this.parent&&this.parent===this.scene?this.scene.sys.events.once("shutdown",this.onSceneDestroy,this):this.parent&&this.parent.once&&this.parent.once("destroy",this.onParentDestroy,this)}shutdown(t){this.isShutdown||(this.parent&&this.parent===this.scene?this.scene.sys.events.off("shutdown",this.onSceneDestroy,this):this.parent&&this.parent.once&&this.parent.off("destroy",this.onParentDestroy,this),this.destroyEventEmitter(),this.parent=void 0,this.scene=void 0,this.isShutdown=!0)}destroy(t){this.shutdown(t)}onSceneDestroy(){this.destroy(!0)}onParentDestroy(t,e){this.destroy(e)}}Object.assign(He.prototype,fa);const PD=Phaser.Utils.Objects.GetValue;class Il extends He{constructor(t,e){super(t,e),this._isRunning=!1,this.isPaused=!1,this.tickingState=!1,this.setTickingMode(PD(e,"tickingMode",1))}boot(){this.tickingMode===2&&!this.tickingState&&this.startTicking()}shutdown(t){this.isShutdown||(this.stop(),this.tickingState&&this.stopTicking(),super.shutdown(t))}setTickingMode(t){typeof t=="string"&&(t=MD[t]),this.tickingMode=t}startTicking(){this.tickingState=!0}stopTicking(){this.tickingState=!1}get isRunning(){return this._isRunning}set isRunning(t){this._isRunning!==t&&(this._isRunning=t,this.tickingMode===1&&t!=this.tickingState&&(t?this.startTicking():this.stopTicking()))}start(){return this.isPaused=!1,this.isRunning=!0,this}pause(){return this.isRunning&&(this.isPaused=!0,this.isRunning=!1),this}resume(){return this.isPaused&&(this.isRunning=!0),this}stop(){return this.isPaused=!1,this.isRunning=!1,this}complete(){this.isPaused=!1,this.isRunning=!1,this.emit("complete",this.parent,this)}}const MD={no:0,lazy:1,always:2},AD=Phaser.Utils.Objects.GetValue;class OD extends Il{constructor(t,e){super(t,e),this.tickEventName=AD(e,"tickEventName","update")}startTicking(){super.startTicking(),this.scene.sys.events.on(this.tickEventName,this.update,this)}stopTicking(){super.stopTicking(),this.scene&&this.scene.sys.events.off(this.tickEventName,this.update,this)}}const ns=Phaser.Utils.Objects.GetValue,lm=Phaser.Math.Clamp;class fT{constructor(t){this.resetFromJSON(t)}resetFromJSON(t){this.state=ns(t,"state",Na),this.timeScale=ns(t,"timeScale",1),this.delay=ns(t,"delay",0),this.repeat=ns(t,"repeat",0),this.repeatCounter=ns(t,"repeatCounter",0),this.repeatDelay=ns(t,"repeatDelay",0),this.duration=ns(t,"duration",0),this.nowTime=ns(t,"nowTime",0),this.justRestart=ns(t,"justRestart",!1)}toJSON(){return{state:this.state,timeScale:this.timeScale,delay:this.delay,repeat:this.repeat,repeatCounter:this.repeatCounter,repeatDelay:this.repeatDelay,duration:this.duration,nowTime:this.nowTime,justRestart:this.justRestart}}destroy(){}setTimeScale(t){return this.timeScale=t,this}setDelay(t){return t===void 0&&(t=0),this.delay=t,this}setDuration(t){return this.duration=t,this}setRepeat(t){return this.repeat=t,this}setRepeatInfinity(){return this.repeat=-1,this}setRepeatDelay(t){return this.repeatDelay=t,this}start(){return this.nowTime=this.delay>0?-this.delay:0,this.state=this.nowTime>=0?Yr:Ya,this.repeatCounter=0,this}stop(){return this.state=Na,this}update(t,e){this.state===Na||this.state===Bh||e===0||this.timeScale===0||(this.nowTime+=e*this.timeScale,this.justRestart=!1,this.nowTime>=this.duration?this.repeat===-1||this.repeatCounter<this.repeat?(this.repeatCounter++,this.justRestart=!0,this.nowTime-=this.duration,this.repeatDelay>0&&(this.nowTime-=this.repeatDelay,this.state=um)):(this.nowTime=this.duration,this.state=Bh):this.nowTime>=0&&(this.state=Yr))}get t(){var t;switch(this.state){case Na:case Ya:case um:t=0;break;case Yr:t=this.nowTime/this.duration;break;case Bh:t=1;break}return lm(t,0,1)}set t(t){t=lm(t,-1,1),t<0?(this.state=Ya,this.nowTime=-this.delay*t):(this.state=Yr,this.nowTime=this.duration*t,t===1&&this.repeat!==0&&this.repeatCounter++)}setT(t){return this.t=t,this}get isIdle(){return this.state===Na}get isDelay(){return this.state===Ya}get isCountDown(){return this.state===Yr}get isRunning(){return this.state===Ya||this.state===Yr}get isDone(){return this.state===Bh}get isOddIteration(){return(this.repeatCounter&1)===1}get isEvenIteration(){return(this.repeatCounter&1)===0}}const Na=0,Ya=1,Yr=2,um=3,Bh=-1;class RD extends OD{constructor(t,e){super(t,e),this.timer=new fT}shutdown(t){this.isShutdown||(super.shutdown(t),this.timer.destroy(),this.timer=void 0)}start(){return this.timer.start(),super.start(),this}stop(){return this.timer.stop(),super.stop(),this}complete(){return this.timer.stop(),super.complete(),this}}const za=Phaser.Utils.Objects.GetValue,fm=Phaser.Utils.Objects.GetAdvancedValue,LD=Phaser.Tweens.Builders.GetEaseFunction;class gr extends RD{resetFromJSON(t){return this.timer.resetFromJSON(za(t,"timer")),this.setEnable(za(t,"enable",!0)),this.setTarget(za(t,"target",this.parent)),this.setDelay(fm(t,"delay",0)),this.setDuration(fm(t,"duration",1e3)),this.setEase(za(t,"ease","Linear")),this.setRepeat(za(t,"repeat",0)),this}setEnable(t){return t==null&&(t=!0),this.enable=t,this}setTarget(t){return t===void 0&&(t=this.parent),this.target=t,this}setDelay(t){return this.delay=t,this}setDuration(t){return this.duration=t,this}setRepeat(t){return this.repeat=t,this}setRepeatDelay(t){return this.repeatDelay=t,this}setEase(t){return t===void 0&&(t="Linear"),this.ease=t,this.easeFn=LD(t),this}start(){return this.timer.isRunning?this:(super.start(),this)}restart(){return this.timer.stop(),this.start.apply(this,arguments),this}stop(t){return t===void 0&&(t=!1),super.stop(),t&&(this.timer.setT(1),this.updateGameObject(this.target,this.timer),this.complete()),this}update(t,e){if(!this.isRunning||!this.enable||!this.parent.active)return this;var f=this.target,i=this.timer;return i.update(t,e),i.isDelay||this.updateGameObject(f,i),this.emit("update",f,this),i.isDone&&this.complete(),this}updateGameObject(t,e){}}const dm=Phaser.Utils.Objects.GetValue,cm=Phaser.Utils.Objects.GetAdvancedValue,wD=Phaser.Math.Linear;class dT extends gr{constructor(t,e,f){e.scene=t,e.active=!0,super(e,f),this.volume={},this.resetFromJSON(f)}resetFromJSON(t){return super.resetFromJSON(t),this.setMode(dm(t,"mode",0)),this.setEnable(dm(t,"enable",!0)),this.setVolumeRange(cm(t,"volume.start",this.parent.volume),cm(t,"volume.end",0)),this}setMode(t){return typeof t=="string"&&(t=FD[t]),this.mode=t,this}setVolumeRange(t,e){return this.volume.start=t,this.volume.end=e,this}start(){return this.timer.isRunning?this:(this.parent.setVolume(this.volume.start),this.timer.setDelay(this.delay).setDuration(this.duration),super.start(),this)}updateGameObject(t,e){t.volume=wD(this.volume.start,this.volume.end,e.t)}complete(){switch(super.complete(),this.mode){case 1:this.parent.stop();break;case 2:this.parent.destroy();break}return this}}const FD={stop:1,destroy:2};var vm=function(s,t,e,f,i){f===void 0&&(f=1),i===void 0&&(i=0);var n={mode:0,volume:{start:i,end:f},duration:e};typeof t=="string"&&(t=s.sys.sound.add(t));var o;return t.hasOwnProperty("_fade")?(o=t._fade,o.stop().resetFromJSON(n)):(o=new dT(s,t,n),t._fade=o),o.start(),t.isPlaying||t.setVolume(i).play(),t},Wf=function(s,t,e,f){f===void 0&&(f=!0);var i={mode:f?2:1,volume:{start:t.volume,end:0},duration:e},n;return t.hasOwnProperty("_fade")?(n=t._fade,n.stop().resetFromJSON(i)):(n=new dT(s,t,i),t._fade=n),n.start(),t.isPlaying||t.play(),t};const Xf=Phaser.Utils.Objects.GetValue,pm=Phaser.Utils.Array.Remove;class ID{constructor(t,e){this.scene=t,this.soundEffects=[],this.backgroundMusic=void 0,this.setBackgroundMusicLoopValue(Xf(e,"bgm.loop",!0)),this.setBackgroundMusicFadeTime(Xf(e,"bgm.fade",500));var f=Xf(e,"bgm.initial",void 0);f&&this.setCurrentBackgroundMusic(f)}destroy(t){if(this.soundEffects.length&&!t)for(var e=this.soundEffects.length-1;e>=0;e--)this.soundEffects[e].destroy();this.soundEffects.length=0,this.backgroundMusic&&!t&&this.backgroundMusic.destroy(),this.backgroundMusic=void 0,this.scene=void 0}setBackgroundMusicLoopValue(t){return this.backgroundMusicLoopValue=t,this}setBackgroundMusicFadeTime(t){return this.backgroundMusicFadeTime=t,this}getSoundEffects(){return this.soundEffects}getLastSoundEffect(){return this.soundEffects[this.soundEffects.length-1]}getBackgroundMusic(){return this.backgroundMusic}playSoundEffect(t){var e=this.scene.sys.sound.add(t);return this.soundEffects.push(e),e.once("complete",function(){e.destroy(),this.scene&&pm(this.soundEffects,e)},this).once("destroy",function(){!this.scene||pm(this.soundEffects,e)},this).play(),this}setSoundEffectVolume(t){var e=this.getLastSoundEffect();return e&&e.setVolume(t),this}fadeInSoundEffect(t){var e=this.getLastSoundEffect();return e&&vm(this.scene,e,t),this}fadeOutSoundEffect(t,e){var f=this.getLastSoundEffect();return f&&Wf(this.scene,f,t,e),this}fadeOutAllSoundEffects(t,e){for(var f=this.soundEffects.length-1;f>=0;f--)Wf(this.scene,this.soundEffects[f],t,e);return this}setCurrentBackgroundMusic(t){this.backgroundMusic=t,t&&(t.setLoop(this.backgroundMusicLoopValue),t.once("complete",function(){this.backgroundMusic.destroy(),this.backgroundMusic=void 0},this).once("destroy",function(){this.backgroundMusic=void 0},this),t.isPlaying||t.play())}playBackgroundMusic(t){return this.backgroundMusic&&this.backgroundMusic.key===t?this:(this.stopBackgroundMusic(),this.setCurrentBackgroundMusic(this.scene.sys.sound.add(t)),this.backgroundMusicFadeTime>0&&this.fadeInBackgroundMusic(this.backgroundMusicFadeTime),this)}pauseBackgroundMusic(){return this.backgroundMusic&&this.backgroundMusic.pause(),this}resumeBackgroundMusic(){return this.backgroundMusic&&this.backgroundMusic.resume(),this}stopBackgroundMusic(){return this.backgroundMusic&&(this.backgroundMusicFadeTime>0?this.fadeOutBackgroundMusic(this.backgroundMusicFadeTime,!0):(this.backgroundMusic.stop(),this.backgroundMusic.destroy(),this.backgroundMusic=void 0)),this}fadeInBackgroundMusic(t){return this.backgroundMusic&&vm(this.scene,this.backgroundMusic,t),this}fadeOutBackgroundMusic(t,e){return this.backgroundMusic&&Wf(this.scene,this.backgroundMusic,t,e),this}crossFadeBackgroundMusic(t,e){var f=this.backgroundMusicFadeTime;return this.backgroundMusicFadeTime=0,this.fadeOutBackgroundMusic(e,!0).playBackgroundMusic(t).fadeInBackgroundMusic(e),this.backgroundMusicFadeTime=f,this}}const Hf=Phaser.Utils.Objects.GetValue;class DD extends Il{constructor(t,e){super(t,e),this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.isRunning=Hf(t,"isRunning",!1),this.timeScale=Hf(t,"timeScale",1),this.now=Hf(t,"now",0),this}toJSON(){return{isRunning:this.isRunning,timeScale:this.timeScale,now:this.now,tickingMode:this.tickingMode}}start(t){return t===void 0&&(t=0),this.delta=0,this.now=t,super.start(),this}seek(t){return this.now=t,this}setTimeScale(t){return this.timeScale=t,this}tick(t){return t*=this.timeScale,this.now+=t,this.delta=t,this.emit("update",this.now,this.delta),this}}class cT extends DD{startTicking(){super.startTicking(),this.scene.sys.events.on("update",this.update,this)}stopTicking(){super.stopTicking(),this.scene&&this.scene.sys.events.off("update",this.update,this)}update(t,e){return!this.isRunning||this.timeScale===0?this:(this.tick(e),this)}}var BD=function(s,t){return t===void 0&&(t=.5),s<=t?s=s/t:s=1-(s-t)/(1-t),s};const gm=Phaser.Math.Clamp;class bD{constructor(t,e){this.setTimeline(t).reset(e)}setTimeline(t){return this.timeline=t,this}setName(t){return this.name=t,this}setCallbacks(t,e,f,i){return this.target=t,this.onStart=e,this.onProgress=f,this.onComplete=i,this}setDuration(t,e){return e===void 0&&(e=!1),this.duration=t,this.remainder=t,this.t=0,this.yoyo=e,this}setPaused(t){return this.isPaused=t,this}pause(){return this.isPaused=!0,this}resume(){return this.isPaused=!1,this}setRemoved(t){return this.removed=t,this}remove(){return this.removed=!0,this}seek(t){return this.remainder=this.duration*(1-t),this}reset(t){return this.setName(t.name).setDuration(t.duration,t.yoyo).setCallbacks(t.target,t.onStart,t.onProgress,t.onComplete).setPaused(!1).setRemoved(!1),this}onFree(){this.setTimeline().setCallbacks()}getProgress(){var t=1-this.remainder/this.duration;return t=gm(t,0,1),this.yoyo&&(t=BD(t)),t}setProgress(t){t=gm(t,0,1),this.remainder=this.duration*(1-t)}runCallback(t){!t||t(this.target,this.t,this)}update(t,e){if(this.removed)return!0;if(this.isPaused)return!1;this.remainder-=e,this.t=this.getProgress(),this.runCallback(this.onProgress);var f=this.remainder<=0;return f&&this.runCallback(this.onComplete),f}}class GD extends bs{allocate(){return this.pop()}free(t){t.onFree(),this.push(t)}freeMultiple(t){for(var e=0,f=t.length;e<f;e++)this.free(t[e]);return this}}const ND=Phaser.Utils.Objects.GetValue,YD=new GD;class zD extends cT{constructor(t,e){super(t,e),this.addedTimers=[],this.timers=[],this.timerPool=ND(e,"pool",YD)}shutdown(){this.isShutdown||(this.timerPool.freeMultiple(this.addedTimers).freeMultiple(this.timers),this.timerPool=void 0,this.addedTimers=void 0,this.timers=void 0,super.shutdown())}addTimer(t){var e=this.timerPool.allocate();return e?e.setTimeline(this).reset(t):e=new bD(this,t),this.addedTimers.push(e),e.runCallback(e.onStart),this.isRunning||this.start(),e}delayCall(t,e,f,i){var n=this.addTimer({duration:t,onComplete:function(o,r,a){f===void 0&&(f=[]),f.push(a),e.apply(i,f)}});return n}getTimers(t){for(var e=[],f=[this.addedTimers,this.timers],i=0,n=f.length;i<n;i++)for(var o=f[i],r=0,a=o.length;r<a;r++){var l=o[r];l.name===t&&e.push(l)}return e}update(t,e){super.update(t,e),this.timers.push(...this.addedTimers),this.addedTimers.length=0;for(var f=[],i=0,n=this.timers.length;i<n;i++){var o=this.timers[i],r=o.update(this.now,this.delta);r?this.timerPool.free(o):f.push(o)}this.timers=f,this.timers.length===0&&this.addedTimers.length===0&&this.complete()}}const VD=Phaser.Utils.Objects.GetValue;var UD=function(s,t){var e=VD(t,"sounds");return e!==!1&&(this.soundManager=new ID(s,e)),this.gameObjectManagers={},this.timeline=new zD(this),this.managersScene=s,this},WD=function(s){this.soundManager&&this.soundManager.destroy(s),this.soundManager=void 0;for(var t in this.gameObjectManagers)this.gameObjectManagers.destroy(s),delete this.gameObjectManagers[t];this.timeline&&this.timeline.destroy(),this.timeline=void 0,this.managersScene=void 0},XD={hasProperty(s){var t=this.gameObject;if(t.hasOwnProperty(s))return!0;var e=t[s];return e!==void 0},getProperty(s){return this.gameObject[s]},setProperty(s,t){return this.gameObject[s]=t,this},easeProperty(s,t,e,f,i,n,o){var r=this.tweens,a=r[s];a&&a.remove();var l=this.gameObject,h={targets:l,duration:e,ease:f,repeat:i,yoyo:n,onComplete:function(){r[s].remove(),r[s]=null,o&&o(l,s)},onCompleteScope:this};return h[s]=t,a=this.scene.tweens.add(h),a.timeScale=this.timeScale,r[s]=a,this}},HD={hasMethod(s){return typeof this.gameObject[s]=="function"},call(s,...t){if(!this.hasMethod(s))return this;var e=this.gameObject;return e[s].apply(e,t),this}},$D={hasData(s){var t=this.gameObject;return t.data?t.data.has(s):!1},getData(s){return this.gameObject.getData(s)},setData(s,t){return this.gameObject.setData(s,t),this}};class Lc{constructor(t,e,f){this.GOManager=t,this.tweens={},this.setGO(e,f)}get scene(){return this.GOManager.scene}get timeScale(){return this.GOManager.timeScale}destroy(){this.freeGO(),this.GOManager=void 0}freeTweens(){var t=this.tweens,e;for(var f in t)e=t[f],e&&e.remove(),t[f]=null;return this}freeGO(){return this.freeTweens(),this.gameObject.destroy(),this.gameObject=void 0,this}setGO(t,e){return t.setName(e),this.gameObject=t,this.name=e,this.freeTweens(),this}setTimeScale(t){var e=this.tweens;for(var f in e)e[f].timeScale=t;return this}}Object.assign(Lc.prototype,XD,HD,$D);var kD=function(s){for(var t in s)return!1;return!0};const KD={tint:0,alpha:1};var ZD={setGOFadeMode(s){return typeof s=="string"&&(s=KD[s]),this.fadeMode=s,this},setGOFadeTime(s){return this.fadeTime=s,this},hasTintFadeEffect(s){return(this.fadeMode===void 0||this.fadeMode===0)&&this.fadeTime>0&&s.setTint!==void 0},hasAlphaFadeEffect(s){return(this.fadeMode===void 0||this.fadeMode===1)&&this.fadeTime>0&&s.setAlpha!==void 0},fadeBob(s,t,e,f){var i=s.gameObject;return this.hasTintFadeEffect(i)?(t!==void 0&&s.setProperty("tintGray",255*t),s.easeProperty("tintGray",Math.floor(255*e),this.fadeTime,"Linear",0,!1,f)):this.hasAlphaFadeEffect(i)?(t!==void 0&&s.setProperty("alpha",t),s.easeProperty("alpha",e,this.fadeTime,"Linear",0,!1,f)):f&&f(i),this}},mm=function(s){return s>>16&255},xm=function(s){return s>>8&255},ym=function(s){return s&255};const JD=~(255<<16)&16777215,QD=~(255<<8)&16777215,jD=16776960;var qD=function(s,t){return(t&255)<<16|s&JD},_D=function(s,t){return(t&255)<<8|s&QD},tB=function(s,t){return t&255|s&jD},eB=function(s,t,e,f){return(t&255)<<16|(e&255)<<8|f&255},iB=function(s,t){if(s.hasOwnProperty("tintR"))return s;t===void 0&&(t=16777215);var e=mm(t),f=xm(t),i=ym(t);return Object.defineProperty(s,"tint",{get:function(){return t},set:function(n){n=Math.floor(n)&16777215,s.setTint&&s.setTint(n),t!==n&&(t=n,e=mm(t),f=xm(t),i=ym(t))}}),Object.defineProperty(s,"tintR",{get:function(){return e},set:function(n){n=Math.floor(n)&255,e!==n&&(e=n,s.tint=qD(t,n))}}),Object.defineProperty(s,"tintG",{get:function(){return f},set:function(n){n=Math.floor(n)&255,f!==n&&(f=n,s.tint=_D(t,n))}}),Object.defineProperty(s,"tintB",{get:function(){return i},set:function(n){n=Math.floor(n)&255,i!==n&&(i=n,s.tint=tB(t,n))}}),Object.defineProperty(s,"tintGray",{get:function(){return Math.floor((e+f+i)/3)},set:function(n){n=Math.floor(n)&255,(e!==n||f!==n||i!==n)&&(e=n,f=n,i=n,s.tint=eB(t,n,n,n))}}),s.tint=t,s};const nB=Phaser.Events.EventEmitter;var sB=function(s){if(s.events)return s;var t=new nB,e=s.x;Object.defineProperty(s,"x",{get:function(){return e},set:function(o){e!==o&&(e=o,t.emit("update",s))}});var f=s.y;Object.defineProperty(s,"y",{get:function(){return f},set:function(o){f!==o&&(f=o,t.emit("update",s))}});var i=s.width;Object.defineProperty(s,"width",{get:function(){return i},set:function(o){i!==o&&(i=o,t.emit("update",s))}});var n=s.height;return Object.defineProperty(s,"height",{get:function(){return n},set:function(o){n!==o&&(n=o,t.emit("update",s))}}),s.events=t,s},rB=function(s,t,e,f,i){if(s.hasOwnProperty("vp"))return s;e===void 0&&(e=.5),f===void 0&&(f=.5),i===void 0&&(i=aB),sB(t);var n=t.events;s.vp=t;var o=function(){i(s,t,e,f)};n.on("update",o),s.once("destroy",function(){n.off("update",o),s.vp=void 0}),Object.defineProperty(s,"vpx",{get:function(){return e},set:function(r){e!==r&&(e=r,o())}}),Object.defineProperty(s,"vpy",{get:function(){return f},set:function(r){f!==r&&(f=r,o())}}),o()},aB=function(s,t,e,f){s.x=t.x+t.width*e,s.y=t.y+t.height*f};const oB=Phaser.Utils.Array.Remove;var hB={has(s){return this.bobs.hasOwnProperty(s)},get(s){return this.bobs[s]},getGO(s){var t=this.get(s);return t?t.gameObject:null},addGO(s,t){this.remove(s,!0),this.hasTintFadeEffect(t)&&iB(t),this.viewportCoordinateEnable&&rB(t,this.viewport),t.once("destroy",function(){oB(this.removedGOs,t),this.isEmpty&&this.emit("empty")},this);var e=new this.BobClass(this,t,s);return this.bobs[s]=e,this},add(s,...t){var e=this.createGameObjectCallback,f=this.createGameObjectScope,i=e.call(f,this.scene,...t);this.addGO(s,i);var n=this.get(s);return this.fadeBob(n,0,1),this},forEachGO(s,t){for(var e in this.bobs){var f=this.bobs[e].gameObject,i;if(t?i=s.call(t,f,e,this):i=s(f,e,this),i)break}return this}},lB={remove(s,t){if(!this.has(s))return this;var e=this.get(s);return delete this.bobs[s],this.removedGOs.push(e.gameObject),t?e.destroy():this.fadeBob(e,void 0,0,function(){e.destroy()}),this},removeAll(){var s=this.bobs;for(var t in s)this.remove(t);return this},clear(s){s===void 0&&(s=!0);var t=this.bobs;for(var e in t)s&&t[e].destroy(),delete t[e];return this.removedGOs.length=0,this}},uB={hasProperty(s,t){return this.has(s)?this.get(s).hasProperty(t):!1},getProperty(s,t){if(!!this.has(s))return this.get(s).getProperty(t)},setProperty(s,t,e){return this.has(s)?(this.get(s).setProperty(t,e),this):this},easeProperty(s,t,e,f,i,n,o,r){return this.has(s)?(f===void 0&&(f=1e3),i===void 0&&(i="Linear"),n===void 0&&(n=0),o===void 0&&(o=!1),this.get(s).easeProperty(t,e,f,i,n,o,r),this):this},hasTweenTask(s,t){if(!this.has(s))return!1;var e=this.get(s).tweens;return e.hasOwnProperty(t)},getTweenTask(s,t){if(!this.has(s))return null;var e=this.get(s).tweens,f=e[t];return f||null}},fB={hasMethod(s,t){return this.has(s)?this.get(s).hasMethod(t):!1},call(s,t,...e){return this.has(s)?(this.get(s).call(t,...e),this):this}},dB={hasData(s,t){return this.has(s)?this.get(s).hasData(t):!1},getData(s,t){if(!!this.has(s))return this.get(s).getData(t)},setData(s,t,e){return this.has(s)?(this.get(s).setData(t,e),this):this}},cB=function(s,t){return this.forEachGO(function(e){e.drawBounds?e.drawBounds(s,t):nT(e,s,t)}),this},vT={drawGameObjectsBounds:cB};Object.assign(vT,ZD,hB,lB,uB,fB,dB);const vB=Phaser.Cameras.Scene2D.BaseCamera;var pB=function(s){return s instanceof vB};const pT=Phaser.Geom.Rectangle;var da=function(s,t,e){pB(t)||(e=t,t=void 0),e===void 0?e=new pT:e===!0&&(e=gB);var f=s.sys.scale,i=f.baseSize,n=f.parentSize,o=f.canvasBounds,r=f.displayScale,a=o.x>=0?0:-(o.x*r.x),l=o.y>=0?0:-(o.y*r.y),h;n.width>=o.width?h=i.width:h=i.width-(o.width-n.width)*r.x;var u;if(n.height>=o.height?u=i.height:u=i.height-(o.height-n.height)*r.y,e.setTo(a,l,h,u),t){var v=t.scrollX,d=t.scrollY,c=1/t.zoomX,p=1/t.zoomY;e.width*=c,e.height*=p,e.centerX=t.centerX+v,e.centerY=t.centerY+d}return e},gB=new pT;const An=Phaser.Utils.Objects.GetValue;class Dl{constructor(t,e){this.scene=t,this.BobClass=An(e,"BobClass",Lc),this.setCreateGameObjectCallback(An(e,"createGameObject"),An(e,"createGameObjectScope")),this.setEventEmitter(An(e,"eventEmitter",void 0));var f=An(e,"fade",500);typeof f=="number"?(this.setGOFadeMode(),this.setGOFadeTime(f)):(this.setGOFadeMode(An(f,"mode")),this.setGOFadeTime(An(f,"time",500)));var i=An(e,"viewportCoordinate",!1);i!==!1?(this.setViewportCoordinateEnable(An(e,"enable",!0)),this.setViewport(An(i,"viewport"))):this.setViewportCoordinateEnable(!1),this.bobs={},this.removedGOs=[],this._timeScale=1}destroy(t){this.clear(!t),this.createGameObjectCallback=void 0,this.viewport=void 0,this.scene=void 0}set timeScale(t){if(this._timeScale!==t){this._timeScale=t;var e=this.bobs;for(var f in e)e[f].setTimeScale(t)}}get timeScale(){return this._timeScale}setTimeScale(t){return this.timeScale=t,this}setCreateGameObjectCallback(t,e){return this.createGameObjectCallback=t,this.createGameObjectScope=e,this}setViewportCoordinateEnable(t){return t===void 0&&(t=!0),this.viewportCoordinateEnable=t,this}setViewport(t){return t===void 0&&(t=da(this.scene,this.scene.cameras.main)),this.viewport=t,this}get isEmpty(){return kD(this.bobs)&&this.removedGOs.length===0}}Object.assign(Dl.prototype,fa,vT);var mB={addGameObjectManager(s,t){s===void 0&&(s={}),t===void 0&&(t=Dl),s.createGameObjectScope||(s.createGameObjectScope=this);var e=new t(this.managersScene,s);return this.gameObjectManagers[s.name]=e,this},getGameObjectManager(s){return this.gameObjectManagers[s]},getGameObjectManagerNames(){var s=[];for(var t in this.gameObjectManagers)s.push(t);return s}},xB={createGameObject(s,t,...e){return this.getGameObjectManager(s).add(t,...e),this},destroyGameObject(s,t){var e=this.getGameObjectManager(s);return t===void 0?e.removeAll():e.remove(t),this},callGameObjectMethod(s,t,e,...f){return this.getGameObjectManager(s).call(t,e,...f),this},setGameObjectProperty(s,t,e,f){return this.getGameObjectManager(s).setProperty(t,e,f),this},easeGameObjectProperty(s,t,e,f,i,n,o,r){return this.getGameObjectManager(s).easeProperty(t,e,f,i,n,o,r),this},getGameObject(s,t,e){var f=this.getGameObjectManager(s);if(typeof t=="string")return f.getGO(t);var i=t;i===void 0&&(i=f.bobs),e===void 0&&(e={});for(t in i)e[t]=f.getGO(t);return e},addGameObject(s,t,e){var f=this.getGameObjectManager(s);if(typeof t=="string")f.addGO(t,e);else{var i=t;for(t in i)f.addGO(t,i[t])}return this},drawGameObjectsBounds(s,t,e){s instanceof Phaser.GameObjects.Graphics&&(e=t,t=s,s=void 0),s===void 0&&(s=this.getGameObjectManagerNames()),Array.isArray(s)||(s=[s]);for(var f=0,i=s.length;f<i;f++)this.getGameObjectManager(s[f]).drawGameObjectsBounds(t,e);return this}},yB=function(s){class t extends s{}var e={initManagers:UD,destroyManagers:WD};return Object.assign(t.prototype,e,mB,xB),t},zr=function(s){return s.replace(TB,"\\$&").replace(CB,"\\x2d")},TB=/[|\\{}()[\]^$+*?.]/g,CB=/-/g,SB=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,gT=function(s){return typeof s!="string"||(s===""?s=null:SB.test(s)?s=parseFloat(s):s==="false"?s=!1:s==="true"&&(s=!0)),s},EB=function(s,t){if(s==null)return[];for(var e=s.split(","),f=0,i=e.length;f<i;f++)e[f]=t(e[f]);return e};const PB="[!$a-z0-9-_.]+",MB="[ !$a-z0-9-_.#,|&]+",AB=function(s){return s};class mT{constructor(t){this.setEventEmitter(gi(t,"eventEmitter",void 0)),this.setTagExpression(gi(t,"regex.tag",PB)),this.setValueExpression(gi(t,"regex.value",MB)),this.setValueConverter(gi(t,"valueConvert",!0));var e=gi(t,"delimiters","<>");this.setDelimiters(e[0],e[1]),this.setLoopEnable(gi(t,"loop",!1)),this.isRunning=!1,this.isPaused=!1,this.skipEventFlag=!1,this.justCompleted=!1,this.lastTagStart=null,this.lastTagEnd=null,this.lastContent=null}shutdown(){this.destroyEventEmitter()}destroy(){this.shutdown()}setTagExpression(t){return this.tagExpression=t,this}setValueExpression(t){return this.valueExpression=t,this}setValueConverter(t){return t===!0?t=gT:t||(t=AB),this.valueConverter=t,this}setDelimiters(t,e){e===void 0&&(e=t[1],t=t[0]),this.delimiterLeft=t,this.delimiterRight=e,t=zr(t),e=zr(e);var f=`${t}(${this.tagExpression})(=(${this.valueExpression}))?${e}`,i=`${t}/(${this.tagExpression})${e}`;return this.reTagOn=RegExp(f,"i"),this.reTagOff=RegExp(i,"i"),this.reSplit=RegExp(`${f}|${i}`,"gi"),this}setLoopEnable(t){return t===void 0&&(t=!0),this.loopEnable=t,this}setSource(t){return this.source=t,this}resetIndex(t){return t===void 0&&(t=0),this.progressIndex=t,this.reSplit.lastIndex=t,this.lastTagStart=null,this.lastTagEnd=null,this.lastContent=null,this.justCompleted=!1,this.isRunning=!1,this}start(t){return this.setSource(t).restart(),this}restart(){this.resetIndex().next()}next(){if(this.isPaused&&this.onResume(),this.isRunning)return this;if(this.isRunning=!0,this.justCompleted)return this.isRunning=!1,this;this.reSplit.lastIndex===0&&this.onStart();var t=this.source,e=t.length;for(this.reSplit.lastIndex=this.progressIndex;;){var f=this.reSplit.exec(t);if(!f){if(this.progressIndex<e&&(this.onContent(t.substring(this.progressIndex,e)),this.isPaused)){this.progressIndex=e;break}this.onComplete(),this.isRunning=!1;return}var i=f[0],n=this.reSplit.lastIndex,o=n-i.length;if(this.progressIndex<o&&(this.onContent(t.substring(this.progressIndex,o)),this.isPaused)){this.progressIndex=o;break}if(this.reTagOff.test(i)?this.onTagEnd(i):this.onTagStart(i),this.progressIndex=n,this.isPaused)break}return this.isRunning=!1,this}skipEvent(){return this.skipEventFlag=!0,this}pause(){return this.isPaused||this.onPause(),this}pauseUntilEvent(t,e){return this.isPaused?this:(this.pause(),t.once(e,function(){this.next()},this),this)}onContent(t){this.skipEventFlag=!1,this.emit("content",t),this.lastContent=t}onTagStart(t){var e=t.match(this.reTagOn),f=e[1],i=EB(e[3],this.valueConverter);this.skipEventFlag=!1,this.emit(`+${f}`,...i),this.skipEventFlag||this.emit("+",f,...i),this.lastTagStart=f}onTagEnd(t){var e=t.match(this.reTagOff)[1];this.skipEventFlag=!1,this.emit(`-${e}`),this.skipEventFlag||this.emit("-",e),this.lastTagEnd=e}onStart(){this.isRunning=!0,this.emit("start",this)}onComplete(){this.isRunning=!1,this.justCompleted=!0,this.emit("complete",this),this.loopEnable&&this.resetIndex()}onPause(){this.isPaused=!0,this.emit("pause",this)}onResume(){this.isPaused=!1,this.emit("resume",this)}getTagOnRegString(t,e){return t===void 0&&(t=this.tagExpression),e===void 0&&(e=this.valueExpression),`${zr(this.delimiterLeft)}(${t})(=(${e}))?${zr(this.delimiterRight)}`}getTagOffRegString(t){return t===void 0&&(t=this.tagExpression),`${zr(this.delimiterLeft)}/(${t})${zr(this.delimiterRight)}`}}Object.assign(mT.prototype,fa);var OB=function(s,t,e){var f="color",i;t.on("start",function(){i=s.textStyle.color}).on(`+${f}`,function(n){s.textStyle.setColor(n),t.skipEvent()}).on(`-${f}`,function(){s.textStyle.setColor(i),t.skipEvent()}).on("complete",function(){s.textStyle.setColor(i)})},RB=function(s,t,e){var f="stroke",i;t.on("start",function(){i=s.textStyle.stroke,s.textStyle.setStrokeStyle(null)}).on(`+${f}`,function(n){n===void 0&&(n=i),s.textStyle.setStrokeStyle(n),t.skipEvent()}).on(`-${f}`,function(){s.textStyle.setStrokeStyle(null),t.skipEvent()}).on("complete",function(){s.textStyle.setStrokeStyle(i)})},LB=function(s,t,e){var f="b";t.on("start",function(){s.textStyle.setBold(!1)}).on(`+${f}`,function(){s.textStyle.setBold(!0),t.skipEvent()}).on(`-${f}`,function(){s.textStyle.setBold(!1),t.skipEvent()})},wB=function(s,t,e){var f="i";t.on("start",function(){s.textStyle.setItalic(!1)}).on(`+${f}`,function(){s.textStyle.setItalic(!0),t.skipEvent()}).on(`-${f}`,function(){s.textStyle.setItalic(!1),t.skipEvent()})},FB=function(s,t,e){var f="size",i;t.on("start",function(){i=s.textStyle.fontSize}).on(`+${f}`,function(n){s.textStyle.setFontSize(n),t.skipEvent()}).on(`-${f}`,function(){s.textStyle.setFontSize(i),t.skipEvent()}).on("complete",function(){s.textStyle.setFontSize(i)})},IB=function(s,t,e){var f="y",i;t.on("start",function(){i=s.textStyle.offsetY,s.textStyle.setOffsetY(0)}).on(`+${f}`,function(n){n===void 0&&(n=i),s.textStyle.setOffsetY(n),t.skipEvent()}).on(`-${f}`,function(){s.textStyle.setOffsetY(0),t.skipEvent()}).on("complete",function(){s.textStyle.setOffsetY(0)})},DB=function(s,t,e){var f="x",i;t.on("start",function(){i=s.textStyle.offsetY,s.textStyle.setOffsetX(0)}).on(`+${f}`,function(n){n===void 0&&(n=i),s.textStyle.setOffsetX(n),t.skipEvent()}).on(`-${f}`,function(){s.textStyle.setOffsetX(0),t.skipEvent()}).on("complete",function(){s.textStyle.setOffsetX(0)})},BB=function(s,t,e){var f="left",i;t.on("start",function(){i=s.textStyle.leftSpace,s.textStyle.setLeftSpace(0)}).on(`+${f}`,function(n){n===void 0&&(n=i),s.textStyle.setLeftSpace(n),t.skipEvent()}).on(`-${f}`,function(){s.textStyle.setLeftSpace(0),t.skipEvent()}).on("complete",function(){s.textStyle.setLeftSpace(0)})},bB=function(s,t,e){var f="right",i;t.on("start",function(){i=s.textStyle.rightSpace,s.textStyle.setRightSpace(0)}).on(`+${f}`,function(n){n===void 0&&(n=i),s.textStyle.setRightSpace(n),t.skipEvent()}).on(`-${f}`,function(){s.textStyle.setRightSpace(0),t.skipEvent()}).on("complete",function(){s.textStyle.setRightSpace(0)})},GB=function(s,t,e){var f="shadow",i;t.on("start",function(){i=s.textStyle.shadowColor,s.textStyle.setShadowColor(null)}).on(`+${f}`,function(n){n===void 0&&(n=i),s.textStyle.setShadowColor(n),t.skipEvent()}).on(`-${f}`,function(){s.textStyle.setShadowColor(null),t.skipEvent()}).on("complete",function(){s.textStyle.setShadowColor(i)})},NB=function(s,t,e){var f="align";t.on(`+${f}`,function(i){s.textStyle.setAlign(i),t.skipEvent()}).on(`-${f}`,function(){s.textStyle.setAlign(),t.skipEvent()}).on("complete",function(){s.textStyle.setAlign()})},YB=function(s,t,e){var f="img";t.on(`+${f}`,function(i){var n=s.imageManager.get(i);oT.call(s,n.key,n.frame,{width:n.width,hieght:n.height,leftSpace:n.left,rightSpace:n.right}),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()})},zB=function(s,t,e){var f="speed";t.on(`+${f}`,function(i){Tm(s,i),t.skipEvent()}).on(`-${f}`,function(){Tm(s,void 0),t.skipEvent()})},VB=function(s){this.typeWriter.setTypingSpeed(s)},Tm=function(s,t){kt.call(s,"speed",VB,t,s)},UB=function(s,t,e){var f="se";t.on(`+${f}`,function(i,n){kt.call(s,"se",WB,[i,n],s),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()})},WB=function(s){if(!this.skipSoundEffect){var t=s[0],e=s[1];this.soundManager.playSoundEffect(t),e&&this.soundManager.fadeInSoundEffect(e)}},XB=function(s,t,e){var f="se.fadein";t.on(`+${f}`,function(i){kt.call(s,"se.fadein",HB,i,s),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()})},HB=function(s){this.soundManager.fadeInSoundEffect(s)},$B=function(s,t,e){var f="se.fadeout";t.on(`+${f}`,function(i,n){n=n==="stop",kt.call(s,"se.fadeout",kB,[i,n],s),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()})},kB=function(s){this.soundManager.fadeOutSoundEffect(...s)},KB=function(s,t,e){var f="se.volume";t.on(`+${f}`,function(i){kt.call(s,"se.volume",ZB,i,s),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()})},ZB=function(s){this.soundManager.setSoundEffectVolume(s)},JB=function(s,t,e){var f="bgm";t.on(`+${f}`,function(i,n){kt.call(s,"bgm",QB,[i,n],s),t.skipEvent()}).on(`-${f}`,function(){kt.call(s,"bgm.stop",jB,void 0,s),t.skipEvent()})},QB=function(s){var t=s[0],e=s[1];this.soundManager.playBackgroundMusic(t),e&&this.soundManager.fadeInBackgroundMusic(e)},jB=function(){this.soundManager.stopBackgroundMusic()},qB=function(s,t,e){var f="bgm.fadein";t.on(`+${f}`,function(i){kt.call(s,"bgm.fadein",_B,i,s),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()})},_B=function(s){this.soundManager.fadeInBackgroundMusic(s)},tb=function(s,t,e){var f="bgm.fadeout";t.on(`+${f}`,function(i,n){n=n==="stop",kt.call(s,"bgm.fadeout",eb,[i,n],s),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()})},eb=function(s){this.soundManager.fadeOutBackgroundMusic(...s)},ib=function(s,t,e){var f="bgm.cross";t.on(`+${f}`,function(i,n){kt.call(s,"bgm.cross",nb,[i,n],s),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()})},nb=function(s){this.soundManager.crossFadeBackgroundMusic(...s)};Phaser.Utils.Objects.GetValue;var sb=function(s,t,e){var f="bgm.pause";t.on(`+${f}`,function(){kt.call(s,"bgm.pause",rb,void 0,s),t.skipEvent()}).on(`-${f}`,function(){kt.call(s,"bgm.resume",ab,void 0,s),t.skipEvent()})},rb=function(){this.soundManager.pauseBackgroundMusic()},ab=function(){this.soundManager.resumeBackgroundMusic()},ob=function(s,t,e){var f="camera.fadein";t.on(`+${f}`,function(i,n,o,r){kt.call(s,"camera.fadein",hb,[i,n,o,r],s),t.skipEvent()})},hb=function(s){this.camera.fadeIn(...s)},lb=function(s,t,e){var f="camera.fadeout";t.on(`+${f}`,function(i,n,o,r){kt.call(s,"camera.fadeout",ub,[i,n,o,r],s),t.skipEvent()})},ub=function(s){this.camera.fadeOut(...s)},fb=function(s,t,e){var f="camera.shake";t.on(`+${f}`,function(i,n){kt.call(s,"camera.shake",db,[i,n],s),t.skipEvent()})},db=function(s){this.camera.shake(...s)},cb=function(s,t,e){var f="camera.flash";t.on(`+${f}`,function(i,n,o,r){kt.call(s,"camera.flash",vb,[i,n,o,r],s),t.skipEvent()})},vb=function(s){this.camera.flash(...s)},pb=function(s,t,e){var f="camera.zoom";t.on(`+${f}`,function(i){kt.call(s,"camera.zoom",gb,i,s),t.skipEvent()}).on(`+${f}.to`,function(i,n,o){kt.call(s,"camera.zoom.to",mb,[i,n,o],s),t.skipEvent()})},gb=function(s){this.camera.setZoom(s)},mb=function(s){this.camera.zoomTo(...s)};const Cm=Phaser.Math.DegToRad;var xb=function(s,t,e){var f="camera.rotate";t.on(`+${f}`,function(i){i=Cm(i),kt.call(s,"camera.rotate",yb,i,s),t.skipEvent()}).on(`+${f}.to`,function(i,n,o){i=Cm(i),kt.call(s,"camera.rotate.to",Tb,[i,n,o],s),t.skipEvent()})},yb=function(s){this.camera.setRotation(s)},Tb=function(s){var t=s[0],e=s[1],f=s[2];this.camera.rotateTo(t,!1,e,f)},Cb=function(s,t,e){var f="camera.scroll";t.on(`+${f}`,function(i,n){kt.call(s,"camera.scroll",Sb,[i,n],s),t.skipEvent()}).on(`+${f}.to`,function(i,n,o,r){kt.call(s,"camera.scroll.to",Eb,[i,n,o,r],s),t.skipEvent()})},Sb=function(s){this.camera.setScroll(...s)},Eb=function(s){var t=s[0],e=s[1],f=s[2],i=s[3],n=this.camera,o=n.scrollX,r=n.scrollY;n.setScroll(t,e),t+=n.centerX,e+=n.centerY,n.setScroll(o,r),n.pan(t,e,f,i)},Pb=function(s,t,e){var f="wait",i="click";t.on(`+${f}`,function(n){Sm(s,n),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()}).on(`+${i}`,function(){Sm(s,"click"),t.skipEvent()}).on(`-${i}`,function(){t.skipEvent()})},Mb=function(s){this.typeWriter.wait(s)},Sm=function(s,t){kt.call(s,"wait",Mb,t,s)},Ab=function(s,t,e){var f="r";t.on(`+${f}`,function(){Fl.call(s,`
`),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()})},Ob=function(s,t,e){var f="content.off";t.on(`+${f}`,function(){t.setContentOutputEnable(!1),t.skipEvent()})},Rb=function(s,t,e){var f="content.on";t.on(`+${f}`,function(){t.setContentOutputEnable(),t.skipEvent()})},Lb=function(s,t,e){t.on("content",function(f){if(t.contentOutputEnable)Fl.call(s,f);else{var i=`+${t.lastTagStart}`;s.emit(`parser.${i}#content`,t,f)}})},wb=function(s,t,e){t.on("start",function(){s.emit("parser.start",t)}).on("+",function(f,...i){if(!t.skipEventFlag){var n=`+${f}`,o=i;s.emit(`parser.${n}`,t,...i,o),Em(s,n,o)}}).on("-",function(f){if(!t.skipEventFlag){var i=`-${f}`,n=[];s.emit(`parser.${i}`,t,n),Em(s,i,n)}}).on("complete",function(){s.emit("parser.complete",t)})},Fb=function(s,t){var e=`tag.${t}`;s==null?this.emit(e):this.emit(e,...s)},Em=function(s,t,e){kt.call(s,t,Fb,e,s)};const Pm=[OB,RB,LB,wB,FB,GB,NB,IB,DB,BB,bB,YB,zB,UB,XB,$B,KB,JB,qB,tb,ib,sb,ob,lb,fb,cb,pb,xb,Cb,Pb,Ab,Ob,Rb,Lb,wb];var Ib=function(s,t,e){for(var f=0,i=Pm.length;f<i;f++)Pm[f](s,t,e)},Db=function(s,t){for(var e=s.commentLineStart,f=t.split(`
`),i=0,n=f.length;i<n;i++){var o=f[i];o===""||(o.trim().length===0||e&&o.startsWith(e))&&(f[i]="")}return f.join("")};const Bb=Phaser.Utils.Objects.GetValue;class bb extends mT{constructor(t,e){e===void 0&&(e={}),e.hasOwnProperty("delimiters")||(e.delimiters="[]"),super(e),Ib(t,this,e),this.setCommentLineStartSymbol(Bb(e,"comment","//")),this.setContentOutputEnable()}setCommentLineStartSymbol(t){return this.commentLineStart=t,this}setContentOutputEnable(t){return t===void 0&&(t=!0),this.contentOutputEnable=t,this}start(t){return super.start(Db(this,t)),this}}var Gb={setDefaultTypingSpeed(s){return this.defaultSpeed=s,this},setTypingSpeed(s){return s===void 0&&(s=this.defaultSpeed),this.speed=s,this}},wc=function(s,t){return new Promise(function(e,f){s.once(t,function(){e()})})},We=function(s){return wc(s,"complete")},Nb=function(s){return this.children=s,this.index=0,this.isPageTyping=!0,this.onTypeStart&&this.onTypeStart(s),this.typing(),We(this)};const Yb="delay",xT="anim";var yT=function(s){s===void 0&&(s=0);var t=0;for(this.inTypingProcessLoop=!0;this.inTypingProcessLoop;){var e=this.getNextChild();if(!e){this.timeline.isRunning?this.timeline.once("complete",function(){this.isPageTyping=!1,this.emit("complete")},this):(this.isPageTyping=!1,this.emit("complete"));break}if(Ns(e)){var f=this.animationConfig;if(f.duration>0){var i=this.timeline.addTimer({name:xT,target:e,duration:f.duration,yoyo:f.yoyo,onStart:f.onStart,onProgress:f.onProgress,onComplete:f.onComplete});this.skipTypingAnimation&&i.seek(1)}else f.onStart&&f.onStart(e,0);this.minSizeEnable&&this.textPlayer.setToMinSize(),this.textPlayer.emit("typing",e);var n=this.nextChild;if(n&&!(this.skipSpaceEnable&&jI(n))){if(t+=this.speed+s,s=0,t>0){this.typingTimer=this.timeline.addTimer({name:Yb,target:this,duration:t,onComplete:function(o,r,a){o.typingTimer=void 0,yT.call(o,a.remainder)}});break}}}else qI(e)&&e.exec()}this.inTypingProcessLoop=!1},zb=function(){return this.timeline.pause(),this},Vb=function(){return this.timeline.resume(),this},Ub=function(){return this.isTypingPaused?this:(this.typingTimer?(this.typingTimer.pause(),this.isTypingPaused=!0):this.inTypingProcessLoop&&(this.inTypingProcessLoop=!1,this.isTypingPaused=!0),this)},Wb=function(s){return this.isTypingPaused?(s===void 0&&(s=0),this.typingTimer?(this.isTypingPaused=!1,this.typingTimer.resume(),this.typingTimer.remainder+=s):this.isTypingPaused&&(this.isTypingPaused=!1,this.typing(s)),this):this};const yn="_remove.wait",$d="_remove.play",Mm=[yn,$d];var Ws=function(s,t,e,f,i){return function(){s.emit(yn,i),t.apply(f,e)}},Am=function(s,t,e,f,i){var n=Ws(s,e,f,i,"custom"),o=t?`wait.${t}`:"wait";s.emit(o,n)},Xb=function(s,t,e,f,i){var n=Ws(s,e,f,i,"time"),o;s.once(yn,function(){o&&(o.remove(),o=void 0)}),o=s.timeline.delayCall(t,n),s.emit("wait.time",t)},Hb=function(s,t,e,f){var i=s.clickEE;if(!!i){var n=Ws(s,t,e,f,"click");s.once(yn,function(){i.off("pointerdown",n,s)}),i.once("pointerdown",n,s),s.emit("wait.click")}},Om=function(s,t,e,f,i){var n=Ws(s,e,f,i,"music");t&&(s.once(yn,function(){t.off("complete",n,s)}),t.once("complete",n,s)),s.emit("wait.music",t),t||n()},$b=function(s){switch(s){case"camera.fadein":case"camera.fadeout":case"camera.flash":case"camera.shake":case"camera.zoom":case"camera.rotate":case"camera.scroll":return!0;default:return!1}},kb=function(s,t,e,f,i){var n=Ws(s,e,f,i,`camera.${t}`),o=s.camera,r,a;switch(t){case"camera.fadein":r=o.fadeEffect,a="camerafadeincomplete";break;case"camera.fadeout":r=o.fadeEffect,a="camerafadeoutcomplete";break;case"camera.flash":r=o.flashEffect,a="cameraflashcomplete";break;case"camera.shake":r=o.shakeEffect,a="camerashakecomplete";break;case"camera.zoom":r=o.zoomEffect,a="camerazoomcomplete";break;case"camera.rotate":r=o.rotateToEffect,a="camerarotatecomplete";break;case"camera.scroll":r=o.panEffect,a="camerapancomplete";break}r.isRunning?(s.once(yn,function(l){o.off(a,n,s)}),o.once(a,n,s),s.emit("wait.camera",t)):(s.emit("wait.camera",t),n())},Kb=function(s,t,e,f,i){var n=Ws(s,e,f,i,"keydown"),o=`keydown-${t.toUpperCase()}`,r=s.scene.input.keyboard;s.once(yn,function(){r.off(o,n,s)}),r.once(o,n,s),s.emit("wait.keydown",t)},Zb=function(s,t){var e=t.split(".");return s.gameObjectManagers.hasOwnProperty(e[0])},Jb=function(s,t,e,f,i){var n=Ws(s,e,f,i),o=t.split("."),r=o[0],a=s.getGameObjectManager(r),l=`wait.${r}`;switch(o.length){case 1:a.isEmpty?(s.emit(l),n()):(s.once(yn,function(C){a.off("empty",n,s)}),a.once("empty",n,s),s.emit(l));return;case 2:var v=o[1];if(!a.has(v))s.emit(l,v),n();else{var h=a.get(v),u=h.gameObject;s.once(yn,function(){u.off("destroy",n,s)}),u.once("destroy",n,s),s.emit(l,v)}return;case 3:var v=o[1],d=o[2],c=a.getProperty(v,d);if(typeof c=="number"){var p=a.getTweenTask(v,d);p?(s.once(yn,function(){p.off("complete",n,s)}),p.once("complete",n,s),s.emit(l,v,d)):(s.emit(l,v,d),n());return}var g=d,m=g.startsWith("!");if(m&&(g=g.substring(1)),a.hasData(v,g)){var u=a.getGO(v),x=u.getData(g),y=!m;if(x===y)s.emit(l,v,d),n();else{var T=`changedata-${g}`,e=function(E,M,O){M=!!M,M===y&&n.call(s)};s.once(yn,function(){u.off(T,e)}),u.on(T,e),s.emit(l,v,d)}return}}};const Qb=Phaser.Input.Keyboard.KeyCodes;var TT=function(s,t,e,f,i){typeof t=="string"&&t.length>1&&t.indexOf("|")!==-1?t=t.split("|"):t=[t];for(var n=0,o=t.length;n<o;n++){var r=t[n];if(r==null||r==="wait")Am(s,void 0,e,f,i);else if(typeof r=="number"||!isNaN(r))Xb(s,parseFloat(r),e,f,i);else if(r==="click")Hb(s,e,f,i);else if(r==="se"){var a=s.soundManager.getLastSoundEffect();Om(s,a,e,f,i)}else if(r==="bgm"){var a=s.soundManager.getBackgroundMusic();Om(s,a,e,f,i)}else Qb.hasOwnProperty(r.toUpperCase())?Kb(s,r,e,f,i):$b(r)?kb(s,r,e,f,i):Zb(s,r)?Jb(s,r,e,f,i):Am(s,r,e,f,i)}},jb=function(s){return this.ignoreWait?this:(this.pauseTyping(),TT(this.textPlayer,s,this.resumeTyping,[],this),this)},qb=function(s){return s===void 0&&(s=!0),this.ignoreWait=s,this},_b=function(s){return s===void 0&&(s=!0),this.skipSpaceEnable=s,this},tG=function(s){if(s===void 0&&(s=!0),this.skipTypingAnimation=s,s)for(var t=this.timeline.getTimers(xT),e=0,f=t.length;e<f;e++)t[e].seek(1);return this},eG=function(s){if(s===void 0&&(s=!0),this.skipSoundEffect=s,s){var t=this.textPlayer._soundManager;t&&t.fadeOutAllSoundEffects(100,!0)}return this},iG=function(){return this.typingTimer&&this.typingTimer.seek(1),this},CT={start:Nb,typing:yT,pause:zb,resume:Vb,pauseTyping:Ub,resumeTyping:Wb,wait:jb,setIgnoreWait:qb,setSkipSpaceEnable:_b,setSkipTypingAnimation:tG,setSkipSoundEffect:eG,skipCurrentTypingDelay:iG};Object.assign(CT,Gb);const Va=Phaser.Utils.Objects.GetValue;class ST{constructor(t,e){this.setEventEmitter(),this.textPlayer=t,this.isPageTyping=!1,this.typingTimer=void 0,this.pauseTypingTimer=void 0,this.inTypingProcessLoop=!1,this.isTypingPaused=!1,this.setIgnoreWait(!1),this.setSkipTypingAnimation(!1),this.setTypingStartCallback(Va(e,"onTypingStart",sG)),this.setDefaultTypingSpeed(Va(e,"speed",250)),this.setTypingSpeed(),this.setSkipSpaceEnable(Va(e,"skipSpace",!1)),this.setAnimationConfig(Va(e,"animation",void 0)),this.setMinSizeEnable(Va(e,"minSizeEnable",!1))}destroy(){this.destroyEventEmitter(),this.textPlayer=void 0,this.typingTimer=void 0,this.pauseTypingTimer=void 0,this.onTypeStart=void 0,this.animationConfig=void 0}get timeline(){return this.textPlayer.timeline}setTypingStartCallback(t){return this.onTypeStart=t,this}setAnimationConfig(t){return t||(t={}),t.hasOwnProperty("duration")||(t.duration=0),t.hasOwnProperty("onStart")||(t.onStart=nG),this.animationConfig=t,this}setMinSizeEnable(t){return t===void 0&&(t=!0),this.minSizeEnable=t,this}getNextChild(){var t=this.nextChild;return this.index=Math.min(this.index+1,this.children.length),this._nextChild=void 0,t}get nextChild(){return this._nextChild||(this._nextChild=this.children[this.index]),this._nextChild}}var nG=function(s){s.setVisible&&s.setVisible()},sG=function(s){for(var t=0,e=s.length;t<e;t++){var f=s[t];f.setVisible&&f.setVisible(!1)}};Object.assign(ST.prototype,fa,CT);class rG extends Lc{playAnimation(t){return this.gameObject.anims.timeScale=this.timeScale,this.gameObject.play(t),this}stopAnimation(){return this.gameObject.stop(),this}chainAnimation(t){return this.gameObject.chain(t),this}pauseAnimation(){return this.gameObject.anims.pause(),this}setTimeScale(t){return super.setTimeScale(t),this.gameObject.anims&&(this.gameObject.anims.timeScale=t),this}}var aG={playAnimation(s,t){return this.has(s)||this.add(s),this.get(s).playAnimation(t),this},stopAnimation(s){return this.has(s)?(this.get(s).stopAnimation(),this):this},chainAnimation(s,t){return this.has(s)?(this.get(s).chainAnimation(t),this):this},pauseAnimation(s){return this.has(s)?(this.get(s).pauseAnimation(),this):this}},ET={};Object.assign(ET,aG);class PT extends Dl{constructor(t,e){e===void 0&&(e={}),e.BobClass=rG,super(t,e)}setCreateGameObjectCallback(t,e){return!t||t==="sprite"?t=oG:t==="image"&&(t=hG),super.setCreateGameObjectCallback(t,e),this}}var oG=function(s,t,e){return typeof e!="string"&&typeof e!="number"&&(e=void 0),s.add.sprite(0,0,t,e)},hG=function(s,t,e){return typeof e!="string"&&typeof e!="number"&&(e=void 0),s.add.image(0,0,t,e)};Object.assign(PT.prototype,ET);var Rm=function(s,t){return s.length===3&&s[0]===t&&s[2]==="play"},lG=function(s,t){return s.length===3&&s[0]===t&&s[2]==="stop"},uG=function(s,t,e){var f=e.name;t.on("+",function(i,...n){if(!t.skipEventFlag){var o=i.split("."),r;if(Rm(o,f))r=o[1];else return;kt.call(s,`${f}.play`,fG,[f,r,n],s),t.skipEvent()}}).on("+",function(i){if(!t.skipEventFlag){var n=i.split("."),o;if(lG(n,f))o=n[1];else return;kt.call(s,`${f}.stop`,Lm,[f,o],s),t.skipEvent()}}).on("-",function(i){if(!t.skipEventFlag){var n=i.split("."),o;if(Rm(n,f))o=n[1];else return;kt.call(s,`${f}.stop`,Lm,[f,o],s),t.skipEvent()}})},fG=function(s){var t,e,f;[t,e,f]=s;var i=f.shift(),n=this.getGameObjectManager(t);n.playAnimation(e,i),f.length>0&&n.chainAnimation(e,f)},Lm=function(s){var t,e;[t,...e]=s;var f=this.getGameObjectManager(t);f.stopAnimation(...e)},dG=function(s,t){return s.length===3&&s[0]===t&&s[2]==="pause"},cG=function(s,t,e){var f=e.name;t.on("+",function(i){if(!t.skipEventFlag){var n=i.split("."),o;if(dG(n,f))o=n[1];else return;kt.call(s,`${f}.pause`,vG,[f,o],s),t.skipEvent()}})},vG=function(s){var t,e;[t,...e]=s;var f=this.getGameObjectManager(t);f.pauseAnimation(...e)},pG=function(s,t){return s.length===3&&s[0]===t&&s[2]==="chain"},gG=function(s,t,e){var f=e.name;t.on("+",function(i){if(!t.skipEventFlag){var n=i.split("."),o;if(pG(n,f))o=n[1];else return;var r=Array.prototype.slice.call(arguments,1);kt.call(s,`${f}.chain`,mG,[f,o,r],s),t.skipEvent()}})},mG=function(s){var t,e;[t,...e]=s;var f=this.getGameObjectManager(t);f.chainAnimation(...e)};const xG=[uG,cG,gG];var yG=function(s){s===void 0&&(s={}),s.name="sprite",s.parseCallbacks=xG,this.addGameObjectManager(s,PT)},wm=function(s,t){return s.length===2&&s[0]===t},TG=function(s,t,e){var f=e.name;t.on("+",function(i,...n){if(!t.skipEventFlag){var o=i.split("."),r;if(wm(o,f))r=o[1];else return;kt.call(s,`${f}.add`,CG,[f,r,...n],s),t.skipEvent()}}).on("-",function(i){if(!t.skipEventFlag){var n=i.split("."),o;if(wm(n,f))o=n[1];else return;kt.call(s,`${f}.remove`,SG,[f,o],s),t.skipEvent()}})},CG=function(s){var t,e;[t,...e]=s;var f=this.getGameObjectManager(t);f.add(...e)},SG=function(s){var t,e;[t,...e]=s;var f=this.getGameObjectManager(t);f.remove(...e)},EG=function(s,t,e){var f=e.name;t.on("-",function(i){t.skipEventFlag||i===f&&(kt.call(s,`${f}.removeall`,PG,f,s),t.skipEvent())})},PG=function(s){var t=this.getGameObjectManager(s);t.removeAll()},MG=function(s,t){return s.length===3&&s[0]===t},AG=function(s,t,e){var f=e.name;t.on("+",function(i,...n){if(!t.skipEventFlag){var o=i.split("."),r,a;if(MG(o,f))r=o[1],a=o[2];else return;kt.call(s,`${f}.call`,OG,[f,r,a,...n],s),t.skipEvent()}})},OG=function(s){var t,e,f,i;[t,e,f,...i]=s;var n=`${t}.${f}`;if(this.emit(n,e,...i),!(this.listenerCount(n)>0)){var o=this.getGameObjectManager(t);o.hasMethod(e,f)?o.call(e,f,...i):o.setProperty(e,f,i[0])}},RG={to:!0,yoyo:!0,from:!0,toLeft:!0,toRight:!0,toUp:!0,toDown:!0,yoyoLeft:!0,yoyoRight:!0,yoyoUp:!0,yoyoDown:!0,fromLeft:!0,fromRight:!0,fromUp:!0,fromDown:!0},LG=function(s,t){return s.length===4&&s[0]===t&&RG[s[3]]},wG=function(s,t,e){var f=e.name;s.getGameObjectManager(f),t.on("+",function(i,n,o,r,a){if(!t.skipEventFlag){var l=i.split("."),h,u,v;if(LG(l,f))h=l[1],u=l[2],v=l[3];else return;typeof r=="number"&&(a=r,r=void 0),kt.call(s,`${f}.ease`,FG,[f,h,u,n,o,r,a,v],s),t.skipEvent()}})},FG=function(s){var t,e,f,i,n,o,r,a;[t,e,f,i,n,o,r,a]=s;var l=this.getGameObjectManager(t),h=l.getProperty(e,f);if(typeof h=="number"){a.endsWith("Left")||a.endsWith("Up")?a.startsWith("to")||a.startsWith("yoyo")?i=h-i:a.startsWith("from")&&(l.setProperty(e,f,h-i),i=h):a.endsWith("Right")||a.endsWith("Down")?a.startsWith("to")||a.startsWith("yoyo")?i=h+i:a.startsWith("from")&&(l.setProperty(e,f,h+i),i=h):a==="from"&&(l.setProperty(e,f,i),i=h);var u=a.startsWith("yoyo");l.easeProperty(e,f,i,n,o,r,u)}};const Fm=[TG,EG,AG,wG];var IG={addGameObjectManager(s,t){s===void 0&&(s={});var e=s.name;e||console.warn("Parameter 'name' is required in TextPlayer.addGameObjectManager(config) method"),this.__proto__.__proto__.addGameObjectManager.call(this,s,t),t===void 0&&(t=Dl);var f=s.parseCallbacks;f?f=[...f,...Fm]:f=Fm;for(var i=0,n=f.length;i<n;i++)f[i](this,this.parser,s);return this}},DG=function(s){return this.clickTarget=s,s?aa(s)?this.clickEE=s.input:this.clickEE=s.setInteractive():this.clickEE=null,this},BG=function(s){return this.camera=s,this},bG=function(s){var t=this;s?typeof s=="function"?this.nextPageInput=function(e,f,i){var n=Ws(t,e,f,i);s.call(t,n)}:this.nextPageInput=function(e,f,i){TT(t,s,e,f,i)}:this.nextPageInput=null},GG=function(s,t){return this.imageManager.add(s,t),this},NG={play(s){return this.isPlaying?this:(this.removeChildren(),this.parser.start(s),this.isPlaying=!0,this.once("complete",function(){this.isPlaying=!1},this),this.lastWrapResult=void 0,this.typingNextPage(),this)},playPromise(s){var t=We(this);return this.play(s),t}};const YG=Phaser.Utils.Objects.GetValue;var kd=function(){if(!this.isPlaying||this.isPageTyping)return this;var s=YG(this.wrapConfig,"callback",this.runWordWrap);typeof s=="string"&&(s=this[s]);var t=s.call(this,this.lastWrapResult);this.lastWrapResult=t,this.emit("page.start");var e=function(){this.emit($d),t.isLastPage?this.emit("complete"):(this.emit("page.complete"),this.ignoreNextPageInput?kd.call(this):this.nextPageInput&&this.nextPageInput(kd,[],this))};this.once($d,function(){this.typeWriter.off("complete",e,this)}),this.typeWriter.once("complete",e,this).start(t.children)},zG={pause(){return this.timeline.pause(),this},pauseTyping(){return this.typeWriter.pauseTyping(),this}},VG={resume(){return this.timeline.resume(),this},resumeTyping(s){return this.typeWriter.resumeTyping(s),this}},UG=function(s){return this.typeWriter.wait(s),this},WG={setDefaultTypingSpeed(s){return this.defaultTypingSpeed=s,this},setTypingSpeed(s){return this.typingSpeed=s,this}},XG=function(s){return this.timeScale=s,this},HG=function(s){return this.typeWriter.setIgnoreWait(s),this},$G=function(s){return s===void 0&&(s=!0),this.ignoreNextPageInput=s,this},kG=function(){if(!this.isPlaying||!this.isPageTyping)return this;var s=this.typeWriter.speed,t=this.typeWriter.ignoreWait,e=this.typeWriter.skipTypingAnimation,f=this.typeWriter.skipSoundEffect;return this.typeWriter.once("complete",function(){this.typeWriter.setTypingSpeed(s).setIgnoreWait(t).setSkipTypingAnimation(e).setSkipSoundEffect(f)},this).setTypingSpeed(0).skipCurrentTypingDelay().setIgnoreWait(!0).setSkipTypingAnimation(!0).setSkipSoundEffect(!0),this},KG={getSprite(s){return this.getGameObject("sprite",s)},addSprite(s,t){return this.addGameObject("sprite",s,t),this}},ZG={setContentOutputEnable(s){return this.parser.setContentOutputEnable(s),this},setContentCallback(s,t){return this.contentCallback=s,this.contentCallbackScope=t,this}},MT={setClickTarget:DG,setTargetCamera:BG,setNextPageInput:bG,addImage:GG,typingNextPage:kd,wait:UG,setTimeScale:XG,setIgnoreWait:HG,setIgnoreNextPageInput:$G,showPage:kG};Object.assign(MT,IG,NG,zG,VG,WG,KG,ZG);var JG=function(s){for(var t=0,e=Mm.length;t<e;t++)s.emit(Mm[t])};const Im=Phaser.Utils.Objects.IsPlainObject,Ts=Phaser.Utils.Objects.GetValue;class Fc extends yB(Mo){constructor(t,e,f,i,n,o){Im(e)?o=e:Im(i)&&(o=i),o===void 0&&(o={});var r=o.text;delete o.text,super(t,e,f,i,n,o),this.type="rexTextPlayer",this.parser=new bb(this,Ts(o,"parser",void 0)),this.typeWriter=new ST(this,Ts(o,"typing",void 0)),this._imageManager=void 0;var a=Ts(o,"images",void 0);a&&this.addImage(a),this.setTargetCamera(Ts(o,"camera",this.scene.sys.cameras.main)),this.initManagers(t,o);var l=Ts(o,"sprites");l!==!1&&l!==null&&yG.call(this,l),this.setIgnoreNextPageInput(Ts(o,"ignoreNextPageInput",!1)),this.setClickTarget(Ts(o,"clickTarget",this)),this.setNextPageInput(Ts(o,"nextPageInput",null)),this.isPlaying=!1,r&&this.play(r)}get imageManager(){return this._imageManager===void 0&&(this._imageManager=new vc(this.scene)),this._imageManager}get spriteManager(){return this.getGameObjectManager("sprite")}destroy(t){!this.scene||(JG(this),this.parser.destroy(),this.parser=void 0,this.typeWriter.destroy(t),this.typeWriter=void 0,this._imageManager&&this._imageManager.destroy(t),this._imageManager=void 0,this.camera=void 0,this.clickEE=void 0,this.destroyManagers(t),super.destroy(t))}get isPageTyping(){return this.typeWriter.isPageTyping}set defaultTypingSpeed(t){this.typeWriter.setDefaultTypingSpeed(t)}get defaultTypingSpeed(){return this.typeWriter.defaultTypingSpeed}set typingSpeed(t){this.typeWriter.setTypingSpeed(t)}get typingSpeed(){return this.typeWriter.speed}set timeScale(t){this.timeline.timeScale=t,this._spriteManager!==void 0&&this._spriteManager.setTimeScale(t)}get timeScale(){return this.timeline.timeScale}}Object.assign(Fc.prototype,MT);yt.register("textPlayer",function(s,t,e,f,i){var n=new Fc(this.scene,s,t,e,f,i);return this.scene.add.existing(n),n});Ct(window,"RexPlugins.UI.TextPlayer",Fc);var $f=function(s,t,e,f,i,n,o,r,a,l,h,u){l===void 0&&(l=0),h===void 0&&(h=2*Math.PI),u===void 0&&(u=!1),t.beginPath(),t.ellipse(e,f,i,n,0,l,h,u),o!=null&&(t.fillStyle=o,t.fill()),r!=null&&(t.strokeStyle=r,t.lineWidth=a,t.stroke())},QG=function(s,t,e,f,i,n,o,r,a,l,h){a===void 0&&r!=null&&(a=2),l===void 0&&(l="start"),h===void 0&&(h="alphabetic"),t.font=n,t.textAlign=l,t.textBaseline=h,t.fillStyle=o,t.strokeStyle=r,t.lineWidth=a,t.lineCap="round",t.lineJoin="round",r!=null&&r!=="none"&&a>0&&t.strokeText(i,e,f),o!=null&&o!=="none"&&t.fillText(i,e,f)},jG=function(){var s=this.radius,t=this.thickness*this.radius,e=this.radius-t/2,f=this.radius-t,i=this.canvas,n=this.context;if(this.trackColor&&t>0&&(n.save(),$f(i,n,s,s,e,e,void 0,this.trackColor,t),n.restore()),this.barColor&&e>0){var o,r,a;if(this.value===1)o=!1,r=0,a=2*Math.PI;else{o=this.anticlockwise,r=this.startAngle;var l=2*Math.PI*(o?1-this.value:this.value);a=l+r}n.save(),$f(i,n,s,s,e,e,void 0,this.barColor,t,r,a,o),n.restore()}if(this.centerColor&&f>0){var h;this.centerColor2?(h=this.context.createRadialGradient(s,s,0,s,s,f),h.addColorStop(0,this.centerColor),h.addColorStop(1,this.centerColor2)):h=this.centerColor,n.save(),$f(i,n,s,s,f,f,h),n.restore()}this.textFormatCallback&&(this.textColor||this.textStrokeColor)&&(n.save(),QG(i,n,s,s,this.getFormatText(),this.textFont,this.textColor,this.textStrokeColor,this.textStrokeThickness,"center","middle"),n.restore())};const Cs=Phaser.Utils.Objects.GetValue,qG=Phaser.Math.Linear;class Bl extends gr{constructor(t,e){super(t,e),this.resetFromJSON(),this.boot()}start(t){if(this.timer.isRunning)return this;var e=this.target;this.propertyKey=Cs(t,"key","value");var f=e[this.propertyKey];return this.fromValue=Cs(t,"from",f),this.toValue=Cs(t,"to",f),this.setEase(Cs(t,"ease",this.ease)),this.setDuration(Cs(t,"duration",this.duration)),this.setRepeat(Cs(t,"repeat",0)),this.setDelay(Cs(t,"delay",0)),this.setRepeatDelay(Cs(t,"repeatDelay",0)),this.timer.setDuration(this.duration).setRepeat(this.repeat).setDelay(this.delay).setRepeatDelay(this.repeatDelay),e[this.propertyKey]=this.fromValue,super.start(),this}updateGameObject(t,e){var f=e.t;f=this.easeFn(f),t[this.propertyKey]=qG(this.fromValue,this.toValue,f)}}const _G=Phaser.Math.Percent;var t3=function(s){return this.easeValuePropName=s,this},e3=function(s){return this.easeValueDuration=s,this},i3=function(s){return this.easeFunction=s,this},n3=function(){return this.easeValueTask&&this.easeValueTask.stop(),this},s3=function(s,t,e){return s==null?this:(t!==void 0&&(s=_G(s,t,e)),this.easeValueTask===void 0&&(this.easeValueTask=new Bl(this,{eventEmitter:null})),this.easeValueTask.restart({key:this.easeValuePropName,to:s,duration:this.easeValueDuration,ease:this.easeFunction}),this)},r3=function(s,t,e,f){return e===void 0&&(e=-1),f===void 0&&(f=0),this.easeValueTask===void 0&&(this.easeValueTask=new Bl(this,{eventEmitter:null})),this.easeValueTask.restart({key:this.easeValuePropName,from:s,to:t,duration:this.easeValueDuration,ease:this.easeFunction,repeat:e,repeatDelay:f}),this},Ao={setEaseValuePropName:t3,setEaseValueDuration:e3,setEaseValueFunction:i3,stopEaseValue:n3,easeValueTo:s3,easeValueRepeat:r3};const ve=Phaser.Utils.Objects.GetValue,a3=Phaser.Utils.Objects.IsPlainObject,Dm=Phaser.Math.Clamp,o3=Phaser.Math.Linear,Bm=Phaser.Math.Percent,h3=Phaser.Math.DegToRad(270);class Ic extends Xn{constructor(t,e,f,i,n,o,r){a3(e)&&(r=e,e=ve(r,"x",0),f=ve(r,"y",0),i=ve(r,"radius",1),n=ve(r,"barColor",void 0),o=ve(r,"value",0));var a=i*2;super(t,e,f,a,a),this.type="rexCircularProgressCanvas",this.eventEmitter=ve(r,"eventEmitter",this),this.setRadius(i),this.setTrackColor(ve(r,"trackColor",void 0)),this.setBarColor(n),this.setCenterColor(ve(r,"centerColor",void 0)),this.setThickness(ve(r,"thickness",.2)),this.setStartAngle(ve(r,"startAngle",h3)),this.setAnticlockwise(ve(r,"anticlockwise",!1)),this.setTextColor(ve(r,"textColor",void 0)),this.setTextStrokeColor(ve(r,"textStrokeColor",void 0),ve(r,"textStrokeThickness",void 0));var l=ve(r,"textFont",void 0);l?this.setTextFont(l):this.setTextFont(ve(r,"textSize","16px"),ve(r,"textFamily","Courier"),ve(r,"textStyle","")),this.setTextFormatCallback(ve(r,"textFormatCallback",void 0),ve(r,"textFormatCallbackScope",void 0));var h=ve(r,"valuechangeCallback",null);if(h!==null){var u=ve(r,"valuechangeCallbackScope",void 0);this.eventEmitter.on("valuechange",h,u)}this.setEaseValuePropName("value").setEaseValueDuration(ve(r,"easeValue.duration",0)).setEaseValueFunction(ve(r,"easeValue.ease","Linear")),this.setValue(o)}resize(t,e){return t=Math.floor(Math.min(t,e)),t===this.width?this:(super.resize(t,t),this.setRadius(t/2),this)}get value(){return this._value}set value(t){t=Dm(t,0,1);var e=this._value,f=e!=t;this.dirty=this.dirty||f,this._value=t,f&&this.eventEmitter.emit("valuechange",this._value,e,this.eventEmitter)}setValue(t,e,f){return t==null?this:(e!==void 0&&(t=Bm(t,e,f)),this.value=t,this)}addValue(t,e,f){return e!==void 0&&(t=Bm(t,e,f)),this.value+=t,this}getValue(t,e){var f=this.value;return t!==void 0&&(f=o3(t,e,f)),f}get radius(){return this._radius}set radius(t){this.dirty=this.dirty||this._radius!=t,this._radius=t;var e=t*2;this.resize(e,e)}setRadius(t){return this.radius=t,this}get trackColor(){return this._trackColor}set trackColor(t){t=Xt(t,this.canvas,this.context),this.dirty=this.dirty||this._trackColor!=t,this._trackColor=t}setTrackColor(t){return this.trackColor=t,this}get barColor(){return this._barColor}set barColor(t){t=Xt(t,this.canvas,this.context),this.dirty=this.dirty||this._barColor!=t,this._barColor=t}setBarColor(t){return this.barColor=t,this}get startAngle(){return this._startAngle}set startAngle(t){this.dirty=this.dirty||this._startAngle!=t,this._startAngle=t}setStartAngle(t){return this.startAngle=t,this}get anticlockwise(){return this._anticlockwise}set anticlockwise(t){this.dirty=this.dirty||this._anticlockwise!=t,this._anticlockwise=t}setAnticlockwise(t){return t===void 0&&(t=!0),this.anticlockwise=t,this}get thickness(){return this._thickness}set thickness(t){t=Dm(t,0,1),this.dirty=this.dirty||this._thickness!=t,this._thickness=t}setThickness(t){return this.thickness=t,this}get centerColor(){return this._centerColor}set centerColor(t){t=Xt(t,this.canvas,this.context),this.dirty=this.dirty||this._centerColor!=t,this._centerColor=t}get centerColor2(){return this._centerColor2}set centerColor2(t){t=Xt(t,this.canvas,this.context),this.dirty=this.dirty||this._centerColor2!=t,this._centerColor2=t}setCenterColor(t,e){return this.centerColor=t,this.centerColor2=e,this}get textColor(){return this._textColor}set textColor(t){t=Xt(t,this.canvas,this.context),this.dirty=this.dirty||this._textColor!=t,this._textColor=t}setTextColor(t){return this.textColor=t,this}get textStrokeColor(){return this._textStrokeColor}set textStrokeColor(t){t=Xt(t,this.canvas,this.context),this.dirty=this.dirty||this._textStrokeColor!=t,this._textStrokeColor=t}get textStrokeThickness(){return this._textStrokeThickness}set textStrokeThickness(t){this.dirty=this.dirty||this._textStrokeThickness!=t,this._textStrokeThickness=t}setTextStrokeColor(t,e){return e===void 0&&(e=2),this.textStrokeColor=t,this.textStrokeThickness=e,this}get textFont(){return this._textFont}set textFont(t){this.dirty=this.dirty||this._textFont!=t,this._textFont=t}setTextFont(t,e,f){var i;return e===void 0?i=t:i=f+" "+t+" "+e,this.textFont=i,this}setTextFormatCallback(t,e){return this.textFormatCallback=t,this.textFormatCallbackScope=e,this}updateTexture(){return this.clear(),jG.call(this),super.updateTexture(),this}getFormatText(t){t===void 0&&(t=this.value);var e;return this.textFormatCallbackScope?e=this.textFormatCallback(t):e=this.textFormatCallback.call(this.textFormatCallbackScope,t),e}}Object.assign(Ic.prototype,Ao);yt.register("circularProgressCanvas",function(s,t,e,f,i,n){var o=new Ic(this.scene,s,t,e,f,i,n);return this.scene.add.existing(o),o});Ct(window,"RexPlugins.UI.CircularProgressCanvas",Ic);const l3=Phaser.GameObjects.GetCalcMatrix;var u3=function(s,t,e,f){t.updateData(),e.addToRenderList(t);var i=s.pipelines.set(t.pipeline),n=l3(t,e,f),o=i.calcMatrix.copyFrom(n.calc),r=t._displayOriginX,a=t._displayOriginY,l=e.alpha*t.alpha;s.pipelines.preBatch(t);for(var h=t.geom,u=0,v=h.length;u<v;u++)h[u].webglRender(i,o,l,r,a);s.pipelines.postBatch(t)};const f3=Phaser.Renderer.Canvas.SetTransform;var d3=function(s,t,e,f){t.updateData(),e.addToRenderList(t);var i=s.currentContext;if(f3(s,i,t,e,f)){for(var n=t._displayOriginX,o=t._displayOriginY,r=t.geom,a=0,l=r.length;a<l;a++)r[a].canvasRender(i,n,o);i.restore()}},c3={renderWebGL:u3,renderCanvas:d3};const v3=Phaser.GameObjects.Shape,p3=Phaser.Utils.Array.Remove;class Dc extends v3{constructor(t,e,f,i,n){e===void 0&&(e=0),f===void 0&&(f=0),i===void 0&&(i=0),n===void 0&&(n=i),super(t,"rexShapes",[]),this._width=-1,this._height=-1,this.dirty=!0,this.isSizeChanged=!0,this.shapes={},this.setPosition(e,f),this.setSize(i,n),this.updateDisplayOrigin()}get width(){return this._width}set width(t){this.setSize(t,this._height)}get height(){return this._height}set height(t){this.setSize(this._width,t)}setDirty(t){return t===void 0&&(t=!0),this.dirty=t,this}setSize(t,e){this.isSizeChanged=this.isSizeChanged||this._width!==t||this._height!==e,this.dirty=this.dirty||this.isSizeChanged,this._width=t,this._height=e,this.updateDisplayOrigin();var f=this.input;return f&&!f.customHitArea&&(f.hitArea.width=t,f.hitArea.height=e),this}resize(t,e){return this.setSize(t,e),this}get fillColor(){return this._fillColor}set fillColor(t){this.setFillStyle(t,this._fillAlpha)}get fillAlpha(){return this._fillAlpha}set fillAlpha(t){this.setFillStyle(this._fillColor,t)}setFillStyle(t,e){return e===void 0&&(e=1),this.dirty=this.dirty||this.fillColor!==t||this.fillAlpha!==e,this._fillColor=t,this._fillAlpha=e,this}get lineWidth(){return this._lineWidth}set lineWidth(t){this.setStrokeStyle(t,this._strokeColor,this._strokeAlpha)}get strokeColor(){return this._strokeColor}set strokeColor(t){this.setStrokeStyle(this._lineWidth,t,this._strokeAlpha)}get strokeAlpha(){return this._strokeAlpha}set strokeAlpha(t){this.setStrokeStyle(this._lineWidth,this._strokeColor,t)}setStrokeStyle(t,e,f){return f===void 0&&(f=1),this.dirty=this.dirty||this.lineWidth!==t||this.strokeColor!==e||this.strokeAlpha!==f,this._lineWidth=t,this._strokeColor=e,this._strokeAlpha=f,this}updateShapes(){}updateData(){if(!this.dirty)return this;this.updateShapes();for(var t=this.geom,e=0,f=t.length;e<f;e++){var i=t[e];i.dirty&&i.updateData()}return this.isSizeChanged=!1,this.dirty=!1,this}clear(){return this.geom.length=0,Is(this.shapes),this}getShape(t){return this.shapes[t]}getShapes(){return this.geom}addShape(t){this.geom.push(t);var e=t.name;return e&&(this.shapes[e]=t),this.dirty=!0,this}deleteShape(t){var e=this.getShape(t);return e&&(delete this.shapes[t],p3(this.geom,e)),this}}Object.assign(Dc.prototype,c3);var g3=function(s,t){return s===void 0?this.isFilled=!1:(t===void 0&&(t=1),this.isFilled=!0,this.fillColor=s,this.fillAlpha=t),this},m3=function(s,t,e){return s===void 0||t===void 0?this.isStroked=!1:(e===void 0&&(e=1),this.isStroked=!0,this.lineWidth=s,this.strokeColor=t,this.strokeAlpha=e),this},x3={fillStyle:g3,lineStyle:m3};class bl{constructor(){this.name=void 0,this.dirty=!0,this.data=void 0,this.isFilled=!1,this.fillColor=void 0,this.fillAlpha=1,this.isStroked=!1,this.lineWidth=1,this.strokeColor=void 0,this.strokeAlpha=1}setName(t){return this.name=t,this}reset(){return this.fillStyle().lineStyle(),this}webglRender(t,e,f,i,n){}canvasRender(t,e,f){}updateData(){this.dirty=!1}}Object.assign(bl.prototype,x3,El);const y3=Phaser.Geom.Polygon.Earcut;class Gl extends bl{constructor(){super(),this.pathData=[],this.pathIndexes=[],this.closePath=!1}updateData(){return this.pathIndexes=y3(this.pathData),super.updateData(),this}webglRender(t,e,f,i,n){this.isFilled&&qy(t,e,this,f,i,n),this.isStroked&&Ml(t,this,f,i,n)}canvasRender(t,e,f){var i=this.pathData,n=i.length-1,o=i[0]-e,r=i[1]-f;t.beginPath(),t.moveTo(o,r),this.closePath||(n-=2);for(var a=2;a<n;a+=2){var l=i[a]-e,h=i[a+1]-f;t.lineTo(l,h)}this.closePath&&t.closePath(),this.isFilled&&(So(t,this),t.fill()),this.isStroked&&(Eo(t,this),t.stroke())}}const bm=Phaser.Math.DegToRad;class Nl extends Gl{constructor(t,e,f,i,n,o,r,a){t===void 0&&(t=0),e===void 0&&(e=0),f===void 0&&(f=0),i===void 0&&(i=0),n===void 0&&(n=0),o===void 0&&(o=360),r===void 0&&(r=!1),a===void 0&&(a=!1),super(),this.setCenterPosition(t,e),this.setRadius(f,i),this.setAngle(n,o,r),this.setPie(a),this.setIterations(32)}get x(){return this._x}set x(t){this.dirty=this.dirty||this._x!==t,this._x=t}get y(){return this._y}set y(t){this.dirty=this.dirty||this._y!==t,this._y=t}setCenterPosition(t,e){return e===void 0&&(e=t),this.x=t,this.y=e,this}get radiusX(){return this._radiusX}set radiusX(t){this.dirty=this.dirty||this._radiusX!==t,this._radiusX=t}get radiusY(){return this._radiusY}set radiusY(t){this.dirty=this.dirty||this._radiusY!==t,this._radiusY=t}setRadius(t,e){return e===void 0&&(e=t),this.radiusX=t,this.radiusY=e,this}get startAngle(){return this._startAngle}set startAngle(t){this.dirty=this.dirty||this._startAngle!==t,this._startAngle=t}get endAngle(){return this._endAngle}set endAngle(t){this.dirty=this.dirty||this._endAngle!==t,this._endAngle=t}get anticlockwise(){return this._anticlockwise}set anticlockwise(t){this.dirty=this.dirty||this._anticlockwise!==t,this._anticlockwise=t}setAngle(t,e,f){return f===void 0&&(f=!1),this.startAngle=t,this.endAngle=e,this.anticlockwise=f,this}get pie(){return this._pie}set pie(t){this.dirty=this.dirty||this._pie!==t,this._pie=t}setPie(t){return t===void 0&&(t=!0),this.pie=t,this}get iterations(){return this._iterations}set iterations(t){this.dirty=this.dirty||this._iterations!==t,this._iterations=t}setIterations(t){return this.iterations=t,this}updateData(){return this.pathData.length=0,this.pie&&this.pathData.push(this.x,this.y),ia(this.x,this.y,this.radiusX,this.radiusY,this.startAngle,this.endAngle,this.anticlockwise,this.iterations,this.pathData),this.pie&&this.pathData.push(this.x,this.y),this.pathData.push(this.pathData[0],this.pathData[1]),super.updateData(),this}canvasRender(t,e,f){t.beginPath();var i=this.x-e,n=this.y-f,o=bm(this.startAngle),r=bm(this.endAngle);this.pie&&(t.moveTo(i,n),t.lineTo(i+Math.cos(o)*this.radiusX,n+Math.sin(o)*this.radiusY)),t.ellipse(i,n,this.radiusX,this.radiusY,0,o,r,this.anticlockwise),this.pie&&t.lineTo(i,n),this.isFilled&&(So(t,this),t.fill()),this.isStroked&&(Eo(t,this),t.stroke())}}class Kd extends Nl{constructor(t,e,f){super(t,e,f,f,0,360)}}class T3 extends Gl{constructor(t){super(),this.setCurve(t),this.setIterations(32)}get curve(){return this._curve}set curve(t){this.dirty=this.dirty||this._curve!==t,this._curve=t}setCurve(t){return this.curve=t,this}get iterations(){return this._iterations}set iterations(t){this.dirty=this.dirty||this._iterations!==t,this._iterations=t}setIterations(t){return this.iterations=t,this}updateData(){this.pathData.length=0;for(var t=this.curve.getPoints(this.iterations),e=0,f=t.length;e<f;e++)this.pathData.push(t[e].x,t[e].y);return this.pathData.push(t[0].x,t[0].y),super.updateData(),this}}class C3 extends Nl{constructor(t,e,f,i){super(t,e,f,i,0,360)}}class S3 extends Gl{constructor(t,e,f,i){t===void 0&&(t=0),e===void 0&&(e=0),f===void 0&&(f=0),i===void 0&&(i=0),super(),this.setP0(t,e),this.setP1(f,i)}get x0(){return this._x0}set x0(t){this.dirty=this.dirty||this._x0!==t,this._x0=t}get y0(){return this._y0}set y0(t){this.dirty=this.dirty||this._y0!==t,this._y0=t}setP0(t,e){return this.x0=t,this.y0=e,this}get x1(){return this._x1}set x1(t){this.dirty=this.dirty||this._x1!==t,this._x1=t}get y1(){return this._y1}set y1(t){this.dirty=this.dirty||this._y1!==t,this._y1=t}setP1(t,e){return this.x1=t,this.y1=e,this}updateData(){return this.pathData.length=0,this.pathData.push(this.x0,this.y0),this.pathData.push(this.x1,this.y1),this.pathData.push(this.x0,this.y0),super.updateData(),this}}var E3=function(s,t,e){return e.length=0,s!=null&&e.push(s,t),e};const Gm=Phaser.Math.Interpolation.QuadraticBezier;var Nm=function(s,t,e,f,i,n){for(var o=n.length,r=n[o-2],a=n[o-1],l=1,h=i-1;l<=h;l++){var u=l/h;n.push(Gm(u,r,s,e),Gm(u,a,t,f))}return n};const P3=Phaser.Math.RotateAround;var M3=function(s,t,e,f){for(var i={x:0,y:0},n=0,o=f.length-1;n<o;n+=2)i.x=f[n],i.y=f[n+1],P3(i,s,t,e),f[n]=i.x,f[n+1]=i.y;return f},A3=function(s,t,e){for(var f=0,i=e.length-1;f<i;f+=2)e[f]+=s,e[f+1]+=t;return e},O3=function(s,t){t===void 0&&(t=[]);for(var e=0,f=s.length-1;e<f;e+=2)t.push({x:s[e],y:s[e+1]});return t};const R3=Phaser.Geom.Polygon;var L3=function(s,t){return t===void 0&&(t=new R3),t.setTo(s),t};const w3=Phaser.Math.DegToRad;class F3{constructor(t){t===void 0&&(t=[]),this.pathData=t,this.closePath=!1,this.setIterations(32),this.lastPointX=void 0,this.lastPointY=void 0}setIterations(t){return this.iterations=t,this}start(){return this.startAt(),this}startAt(t,e){return E3(t,e,this.pathData),this.lastPointX=t,this.lastPointY=e,this}lineTo(t,e,f){return f===void 0&&(f=!1),f&&(t+=this.lastPointX,e+=this.lastPointY),ea(t,e,this.pathData),this.lastPointX=t,this.lastPointY=e,this}verticalLineTo(t,e){return this.lineTo(t,this.lastPointY,e),this}horizontalLineTo(t,e){return this.lineTo(this.lastPointX,t,e),this}ellipticalArc(t,e,f,i,n,o,r){r===void 0&&(r=!1),ia(t,e,f,i,n,o,r,this.iterations,this.pathData);var a=this.pathData.length;return this.lastPointX=this.pathData[a-2],this.lastPointY=this.pathData[a-1],this}arc(t,e,f,i,n,o){return this.ellipticalArc(t,e,f,f,i,n,o),this}quadraticBezierTo(t,e,f,i){return Nm(t,e,f,i,this.iterations,this.pathData),this.lastPointX=f,this.lastPointY=i,this.lastCX=t,this.lastCY=e,this}smoothQuadraticBezierTo(t,e){var f=this.lastPointX*2-this.lastCX,i=this.lastPointY*2-this.lastCY;return this.quadraticBezierTo(f,i,t,e),this}cubicBezierCurveTo(t,e,f,i,n,o){return Nm(t,e,f,i,n,o,this.iterations,this.pathData),this.lastPointX=n,this.lastPointY=o,this.lastCX=f,this.lastCY=i,this}smoothCubicBezierCurveTo(t,e,f,i){var n=this.lastPointX*2-this.lastCX,o=this.lastPointY*2-this.lastCY;return this.cubicBezierCurveTo(n,o,t,e,f,i),this}close(){return this.closePath=!0,this}end(){return this.pathData.push(this.lastPointX,this.lastPointY),this}rotateAround(t,e,f){if(this.pathData.length===0)return this;f=w3(f),M3(t,e,f,this.pathData);var i=this.pathData.length;if(this.lastPointX=this.pathData[i-2],this.lastPointY=this.pathData[i-1],this.lastCX!==void 0){var n={x:this.lastCX,y:this.lastCY};PointRotateAround(n,t,e,f),this.lastCX=n.x,this.lastCY=n.y}return this}offset(t,e){return A3(t,e,this.pathData),this}toPoints(){return O3(this.pathData)}toPolygon(t){return L3(this.pathData,t)}draw(t,e,f){var i=this.toPoints();return e&&t.fillPoints(i,this.closePath,this.closePath),f&&t.strokePoints(i,this.closePath,this.closePath),this}}class I3 extends Gl{constructor(){super(),this.builder=new F3(this.pathData)}get iterations(){return this.builder.iterations}set iterations(t){this.dirty=this.dirty||this.builder.iterations!==t,this.builder.setIterations(t)}setIterations(t){return this.iterations=t,this}get lastPointX(){return this.builder.lastPointX}get lastPointY(){return this.builder.lastPointY}start(){return this.builder.start(),this.dirty=!0,this}startAt(t,e){return this.builder.startAt(t,e),this.dirty=!0,this}lineTo(t,e,f){return this.builder.lineTo(t,e,f),this.dirty=!0,this}verticalLineTo(t,e){return this.builder.verticalLineTo(t,e),this.dirty=!0,this}horizontalLineTo(t,e){return this.builder.horizontalLineTo(t,e),this.dirty=!0,this}ellipticalArc(t,e,f,i,n,o,r){return this.builder.ellipticalArc(t,e,f,i,n,o,r),this.dirty=!0,this}arc(t,e,f,i,n,o){return this.builder.arc(t,e,f,i,n,o),this.dirty=!0,this}quadraticBezierTo(t,e,f,i){return this.builder.quadraticBezierTo(t,e,f,i),this.dirty=!0,this}smoothQuadraticBezierTo(t,e){return this.builder.smoothQuadraticBezierTo(t,e),this.dirty=!0,this}cubicBezierCurveTo(t,e,f,i,n,o){return this.builder.cubicBezierCurveTo(t,e,f,i,n,o),this.dirty=!0,this}smoothCubicBezierCurveTo(t,e,f,i){return this.builder.smoothCubicBezierCurveTo(t,e,f,i),this.dirty=!0,this}close(){return this.builder.close(),this.closePath=this.builder.closePath,this.dirty=!0,this}end(){return this.builder.end(),this.dirty=!0,this}rotateAround(t,e,f){return this.builder.rotateAround(t,e,f),this.dirty=!0,this}offset(t,e){return this.builder.offset(t,e),this.dirty=!0,this}toPolygon(t){return this.builder.toPolygon(t)}}const D3=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha;class B3 extends bl{constructor(t,e,f,i){t===void 0&&(t=0),e===void 0&&(e=0),f===void 0&&(f=0),i===void 0&&(i=f),super(),this.pathData=[],this.closePath=!0,this.setTopLeftPosition(t,e),this.setSize(f,i)}get x(){return this._x}set x(t){this.dirty=this.dirty||this._x!==t,this._x=t}get y(){return this._y}set y(t){this.dirty=this.dirty||this._y!==t,this._y=t}setTopLeftPosition(t,e){return this.x=t,this.y=e,this}get width(){return this._width}set width(t){this.dirty=this.dirty||this._width!==t,this._width=t}get height(){return this._height}set height(t){this.dirty=this.dirty||this._height!==t,this._height=t}setSize(t,e){return this.width=t,this.height=e,this}updateData(){this.pathData.length=0;var t=this.x,e=t+this.width,f=this.y,i=f+this.height;return this.pathData.push(t,f),this.pathData.push(e,f),this.pathData.push(e,i),this.pathData.push(t,i),this.pathData.push(t,f),super.updateData(),this}webglRender(t,e,f,i,n){if(this.isFilled){var o=t.fillTint,r=D3(this.fillColor,this.fillAlpha*f);o.TL=r,o.TR=r,o.BL=r,o.BR=r,t.batchFillRect(-i+this.x,-n+this.y,this.width,this.height)}this.isStroked&&Ml(t,this,f,i,n)}canvasRender(t,e,f){this.isFilled&&(So(t,this),t.fillRect(-e,-f,this.width,this.height)),this.isStroked&&(Eo(t,this),t.beginPath(),t.rect(-e,-f,this.width,this.height),t.stroke())}}const b3=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha;class G3 extends bl{constructor(t,e,f,i,n,o){t===void 0&&(t=0),e===void 0&&(e=0),f===void 0&&(f=0),i===void 0&&(i=0),n===void 0&&(n=0),o===void 0&&(o=0),super(),this.pathData=[],this.closePath=!0,this.setP0(t,e),this.setP1(f,i),this.setP2(n,o)}get x0(){return this._x0}set x0(t){this.dirty=this.dirty||this._x0!==t,this._x0=t}get y0(){return this._y0}set y0(t){this.dirty=this.dirty||this._y0!==t,this._y0=t}setP0(t,e){return this.x0=t,this.y0=e,this}get x1(){return this._x1}set x1(t){this.dirty=this.dirty||this._x1!==t,this._x1=t}get y1(){return this._y1}set y1(t){this.dirty=this.dirty||this._y1!==t,this._y1=t}setP1(t,e){return this.x1=t,this.y1=e,this}get x2(){return this._x2}set x2(t){this.dirty=this.dirty||this._x2!==t,this._x2=t}get y2(){return this._y2}set y2(t){this.dirty=this.dirty||this._y2!==t,this._y2=t}setP2(t,e){return this.dirty=this.dirty||this.x2!==t||this.y2!==e,this.x2=t,this.y2=e,this}updateData(){return this.pathData.length=0,this.pathData.push(this.x0,this.y0),this.pathData.push(this.x1,this.y1),this.pathData.push(this.x2,this.y2),this.pathData.push(this.x0,this.y0),super.updateData(),this}webglRender(t,e,f,i,n){if(this.isFilled){var o=b3(this.fillColor,this.fillAlpha*f),r=this.x0-i,a=this.y0-n,l=this.x1-i,h=this.y1-n,u=this.x2-i,v=this.y2-n,d=e.getX(r,a),c=e.getY(r,a),p=e.getX(l,h),g=e.getY(l,h),m=e.getX(u,v),x=e.getY(u,v);t.batchTri(d,c,p,g,m,x,o,o,o)}this.isStroked&&Ml(t,this,f,i,n)}canvasRender(t,e,f){var i=this.x1-e,n=this.y1-f,o=this.x2-e,r=this.y2-f,a=this.x3-e,l=this.y3-f;t.beginPath(),t.moveTo(i,n),t.lineTo(o,r),t.lineTo(a,l),t.closePath(),this.isFilled&&(So(t,this),t.fill()),this.isStroked&&(Eo(t,this),t.stroke())}}const si=Phaser.Utils.Objects.GetValue,N3=Phaser.Utils.Objects.IsPlainObject,Ym=Phaser.Math.Clamp,Y3=Phaser.Math.Linear,zm=Phaser.Math.Percent,z3=Phaser.Math.DegToRad(270),V3=Phaser.Math.RadToDeg;class Yl extends Dc{constructor(t,e,f,i,n,o,r){N3(e)&&(r=e,e=si(r,"x",0),f=si(r,"y",0),i=si(r,"radius",1),n=si(r,"barColor",void 0),o=si(r,"value",0));var a=i*2;super(t,e,f,a,a),this.type="rexCircularProgress",this.eventEmitter=si(r,"eventEmitter",this),this.addShape(new Kd().setName("track")).addShape(new Nl().setName("bar")).addShape(new Kd().setName("center")),this.setRadius(i),this.setTrackColor(si(r,"trackColor",void 0)),this.setBarColor(n),this.setCenterColor(si(r,"centerColor",void 0)),this.setThickness(si(r,"thickness",.2)),this.setStartAngle(si(r,"startAngle",z3)),this.setAnticlockwise(si(r,"anticlockwise",!1));var l=si(r,"valuechangeCallback",null);if(l!==null){var h=si(r,"valuechangeCallbackScope",void 0);this.eventEmitter.on("valuechange",l,h)}this.setEaseValuePropName("value").setEaseValueDuration(si(r,"easeValue.duration",0)).setEaseValueFunction(si(r,"easeValue.ease","Linear")),this.setValue(o)}resize(t,e){return t=Math.floor(Math.min(t,e)),t===this.width?this:(super.resize(t,t),this.setRadius(t/2),this)}get value(){return this._value}set value(t){t=Ym(t,0,1);var e=this._value,f=e!=t;this.dirty=this.dirty||f,this._value=t,f&&this.eventEmitter.emit("valuechange",this._value,e,this.eventEmitter)}setValue(t,e,f){return t==null?this:(e!==void 0&&(t=zm(t,e,f)),this.value=t,this)}addValue(t,e,f){return e!==void 0&&(t=zm(t,e,f)),this.value+=t,this}getValue(t,e){var f=this.value;return t!==void 0&&(f=Y3(t,e,f)),f}get radius(){return this._radius}set radius(t){this.dirty=this.dirty||this._radius!=t,this._radius=t;var e=t*2;this.resize(e,e)}setRadius(t){return this.radius=t,this}get trackColor(){return this._trackColor}set trackColor(t){this.dirty=this.dirty||this._trackColor!=t,this._trackColor=t}setTrackColor(t){return this.trackColor=t,this}get barColor(){return this._barColor}set barColor(t){this.dirty=this.dirty||this._barColor!=t,this._barColor=t}setBarColor(t){return this.barColor=t,this}get startAngle(){return this._startAngle}set startAngle(t){this.dirty=this.dirty||this._startAngle!=t,this._startAngle=t}setStartAngle(t){return this.startAngle=t,this}get anticlockwise(){return this._anticlockwise}set anticlockwise(t){this.dirty=this.dirty||this._anticlockwise!=t,this._anticlockwise=t}setAnticlockwise(t){return t===void 0&&(t=!0),this.anticlockwise=t,this}get thickness(){return this._thickness}set thickness(t){t=Ym(t,0,1),this.dirty=this.dirty||this._thickness!=t,this._thickness=t}setThickness(t){return this.thickness=t,this}get centerColor(){return this._centerColor}set centerColor(t){this.dirty=this.dirty||this._centerColor!=t,this._centerColor=t}setCenterColor(t){return this.centerColor=t,this}updateShapes(){var t=this.radius,e=this.thickness*this.radius,f=this.radius-e/2,i=this.radius-e,n=this.getShape("track");this.trackColor!=null&&e>0?n.setCenterPosition(t,t).setRadius(f).lineStyle(e,this.trackColor):n.reset();var o=this.getShape("bar");if(this.barColor!=null&&f>0){var r,a,l;if(this.value===1)r=!1,a=0,l=361;else{r=this.anticlockwise,a=V3(this.startAngle);var h=360*(r?1-this.value:this.value);l=h+a}o.setCenterPosition(t,t).setRadius(f).setAngle(a,l,r).lineStyle(e,this.barColor)}else o.reset();var u=this.getShape("center");this.centerColor&&i>0?u.setCenterPosition(t,t).setRadius(i).fillStyle(this.centerColor):u.reset()}}Object.assign(Yl.prototype,Ao);yt.register("circularProgress",function(s,t,e,f,i,n){var o=new Yl(this.scene,s,t,e,f,i,n);return this.scene.add.existing(o),o});Ct(window,"RexPlugins.UI.CircularProgress",Yl);var zl=function(s){return s.hasOwnProperty("rexSizer")||(s.rexSizer={}),s.rexSizer},U3=function(s){var t=zl(s);return t.hasOwnProperty("prevState")||(t.prevState={}),t.prevState},W3=function(s){return s===void 0&&(s=da(this.scene)),this.left=Math.max(this.left,s.left),this.right=Math.min(this.right,s.right),this.top=Math.max(this.top,s.top),this.bottom=Math.min(this.bottom,s.bottom),this};const ci=Phaser.Display.Align;var Vl={center:ci.CENTER,left:ci.LEFT_CENTER,right:ci.RIGHT_CENTER,top:ci.TOP_CENTER,bottom:ci.BOTTOM_CENTER,"left-top":ci.TOP_LEFT,"left-center":ci.LEFT_CENTER,"left-bottom":ci.BOTTOM_LEFT,"center-top":ci.TOP_CENTER,"center-center":ci.CENTER,"center-bottom":ci.BOTTOM_CENTER,"right-top":ci.TOP_RIGHT,"right-center":ci.RIGHT_CENTER,"right-bottom":ci.BOTTOM_RIGHT},Zd=new Phaser.GameObjects.Zone({sys:{queueDepthSort:mi,events:{once:mi}}},0,0,1,1);Zd.setOrigin(0);var ls={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12},Bc=function(s){var t=qt(s);return s.y+t-t*s.originY},bc=function(s){var t=ae(s);return s.x-t*s.originX+t*.5},Gc=function(s,t){var e=qt(s);return s.y=t-e+e*s.originY,s},Nc=function(s,t){var e=ae(s),f=e*s.originX;return s.x=t+f-e*.5,s},X3=function(s,t,e,f){return e===void 0&&(e=0),f===void 0&&(f=0),Nc(s,bc(t)+e),Gc(s,Bc(t)+f),s},Yc=function(s){var t=ae(s);return s.x-t*s.originX},zc=function(s,t){var e=ae(s);return s.x=t+e*s.originX,s},H3=function(s,t,e,f){return e===void 0&&(e=0),f===void 0&&(f=0),zc(s,Yc(t)-e),Gc(s,Bc(t)+f),s},Vc=function(s){var t=ae(s);return s.x+t-t*s.originX},Uc=function(s,t){var e=ae(s);return s.x=t-e+e*s.originX,s},$3=function(s,t,e,f){return e===void 0&&(e=0),f===void 0&&(f=0),Uc(s,Vc(t)+e),Gc(s,Bc(t)+f),s},Wc=function(s,t){var e=qt(s),f=e*s.originY;return s.y=t+f-e*.5,s},k3=function(s,t,e){return Nc(s,t),Wc(s,e)},Xc=function(s){var t=qt(s);return s.y-t*s.originY+t*.5},K3=function(s,t,e,f){return e===void 0&&(e=0),f===void 0&&(f=0),k3(s,bc(t)+e,Xc(t)+f),s},Z3=function(s,t,e,f){return e===void 0&&(e=0),f===void 0&&(f=0),zc(s,Yc(t)-e),Wc(s,Xc(t)+f),s},J3=function(s,t,e,f){return e===void 0&&(e=0),f===void 0&&(f=0),Uc(s,Vc(t)+e),Wc(s,Xc(t)+f),s},Hc=function(s){var t=qt(s);return s.y-t*s.originY},$c=function(s,t){var e=qt(s);return s.y=t+e*s.originY,s},Q3=function(s,t,e,f){return e===void 0&&(e=0),f===void 0&&(f=0),Nc(s,bc(t)+e),$c(s,Hc(t)-f),s},j3=function(s,t,e,f){return e===void 0&&(e=0),f===void 0&&(f=0),zc(s,Yc(t)-e),$c(s,Hc(t)-f),s},q3=function(s,t,e,f){return e===void 0&&(e=0),f===void 0&&(f=0),Uc(s,Vc(t)+e),$c(s,Hc(t)-f),s},Hn=[];Hn[ls.BOTTOM_CENTER]=X3;Hn[ls.BOTTOM_LEFT]=H3;Hn[ls.BOTTOM_RIGHT]=$3;Hn[ls.CENTER]=K3;Hn[ls.LEFT_CENTER]=Z3;Hn[ls.RIGHT_CENTER]=J3;Hn[ls.TOP_CENTER]=Q3;Hn[ls.TOP_LEFT]=j3;Hn[ls.TOP_RIGHT]=q3;var AT=function(s,t,e,f,i){return Hn[e](s,t,f,i)},Ul=function(s,t,e,f,i,n){Zd.setPosition(t,e).setSize(f,i),AT(s,Zd,n)};const Ua=Phaser.Utils.Objects.GetValue,_3=Phaser.GameObjects.Group;var tN=function(s,t){var e=s.scene,f,i,n,o,r;if(typeof t=="number")f=t;else{f=Ua(t,"color"),i=ul(t,"lineWidth");var a=Ua(t,"name",!1);a&&(n=Ua(a,"createTextCallback",eN),o=Ua(a,"createTextCallbackScope",void 0),r=Ua(a,"align","left-top"),typeof r=="string"&&(r=Vl[r]))}if(f===void 0&&(f=16777215),i===void 0&&(i=1),n&&!s.children){s.children=new _3(e),s.once("destroy",function(p,g){p.children.destroy(!g),p.children=void 0});var l=s.clear.bind(s);s.clear=function(){l(),s.children.clear(!1,!0)}}for(var h=this.getAllShownChildren([this]),u,v,d=0,c=h.length;d<c;d++){if(u=h[d],u.getBounds||u.width!==void 0&&u.height!==void 0)rr=ul(u,rr);else continue;f!=null&&s.lineStyle(i,f).strokeRectShape(rr),u.name&&n&&(o?v=n.call(o,e):v=n(e),v&&(v.setText(u.name),s.children.add(v),Ul(v,rr.x,rr.y,rr.width,rr.height,r)))}return this},eN=function(s,t,e){return s.add.text(0,0,"")},rr=void 0;const bh=Phaser.Utils.Objects.GetValue;var ca=function(s,t){return t===void 0&&(t={}),typeof s=="number"?(t.left=s,t.right=s,t.top=s,t.bottom=s):(t.left=bh(s,"left",0),t.right=bh(s,"right",0),t.top=bh(s,"top",0),t.bottom=bh(s,"bottom",0)),t};const iN=en.prototype.add;var Oo=function(s){return iN.call(this,s),this.sizerEventsEnable&&(s.emit("sizer.add",s,this),this.emit("add",s,this)),this},nN={addBackground(s,t,e){this.backgroundChildren===void 0&&(this.backgroundChildren=[]),typeof t=="string"&&(e=t,t=void 0),t===void 0&&(t=0),Oo.call(this,s),this.backgroundChildren.push(s);var f=this.getSizerConfig(s);return f.padding=ca(t),e!==void 0&&this.addChildrenMap(e,s),this},isBackground(s){return this.backgroundChildren===void 0?!1:this.backgroundChildren.indexOf(s)!==-1}},sN={removeFromParentSizer(){var s=this.getParentSizer();return s&&s.remove(this),this}},Vm=function(s,t){return this.childrenMap[s]=t,this},rN=function(s){if(typeof s=="object"){var t=s;for(var s in this.childrenMap)if(this.childrenMap[s]===t)return delete this.childrenMap[s],this}return delete this.childrenMap[s],this},aN=function(s,t){if(typeof s=="string"&&(s=s.split(".")),s.length!==0){var e=s.shift(),f=null;if(e.charAt(0)==="#")e=e.substring(1),f=this.getByName(e,t);else if(e.indexOf("[")===-1)this.childrenMap&&(f=this.childrenMap[e]);else{var i=e.match(oN);if(i!=null&&this.childrenMap){var n=this.childrenMap[i[1]];n&&(f=n[i[2]])}}return s.length===0?f:f&&f.childrenMap?f.getElement(s):null}};const oN=/(\S+)\[(\d+)\]/i;var hN={getInnerPadding(s){return nl(this.space,s)},setInnerPadding(s,t){return Ds(this.space,s,t),this},getOuterPadding(s){return nl(this.getSizerConfig(this).padding,s)},setOuterPadding(s,t){return Ds(this.getSizerConfig(this).padding,s,t),this},getChildOuterPadding(s,t){return typeof s=="string"&&(s=this.getElement(s)),nl(this.getSizerConfig(s).padding,t)},setChildOuterPadding(s,t,e){return typeof s=="string"&&(s=this.getElement(s)),Ds(this.getSizerConfig(s).padding,t,e),this}},kc=function(s){return s===void 0&&(s=Math.max(this.childrenWidth,this.minWidth)),s},lN=function(s){var t,e;for(var f in this.sizerChildren)t=this.sizerChildren[f],t&&t.isRexSizer&&!t.ignoreLayout&&(e=this.getExpandedChildWidth(t,s),e=t.resolveWidth(e),t.resolveChildrenWidth(e))},Kc=function(s){var t=Math.max(this.childrenHeight,this.minHeight);return s===void 0&&(s=t),s},uN=function(s){var t;return s.isRexSizer?t=Math.max(s.minWidth,s.childrenWidth):s.minWidth!==void 0?t=s.minWidth:t=ae(s),t},fN=function(s){var t;return s.isRexSizer?t=Math.max(s.minHeight,s.childrenHeight):s.minHeight!==void 0?t=s.minHeight:t=qt(s),t},dN=function(s,t){return t},cN=function(s,t){return t},vN=function(){return 0},pN=function(){return 0},gN=function(s){s===void 0&&(s=[]);for(var t=s.length,e=this.getChildrenSizers(s),f=s.length,i=t;i<f;i++)e[i].getAllChildrenSizers(s);return s},mN=function(s){return s===void 0&&(s=[]),s},xN={getShownChildren(s){s===void 0&&(s=[]);for(var t=this.children,e,f=0,i=t.length;f<i;f++)e=t[f],!(e.rexSizer&&e.rexSizer.hidden)&&s.push(e);return s},getAllShownChildren(s){s===void 0&&(s=[]);for(var t=this.children,e,f=0,i=t.length;f<i;f++)e=t[f],!(e.rexSizer&&e.rexSizer.hidden)&&(s.push(e),e.hasOwnProperty("isRexContainerLite")&&s.push(...e.getAllShownChildren()));return s}},Ro=function(){this._childrenWidth=void 0,this._childrenHeight=void 0;for(var s=this.getChildrenSizers(),t,e=0,f=s.length;e<f;e++)t=s[e],!t.ignoreLayout&&t.preLayout()},yN=function(){var s=this.scaleX,t=this.scaleY,e=s===1&&t===1;return e||this.setScale(1),this.runLayout(),e||this.setScale(s,t),this},TN=function(s,t,e){if(this.ignoreLayout)return this;var f=!s;return f&&this.preLayout(),t=this.resolveWidth(t),f&&(this.resolveChildrenWidth(t),this.runWidthWrap(t)),e=this.resolveHeight(e),this.resize(t,e),this.sizerEventsEnable&&this.layoutedChildren===void 0&&(this.layoutedChildren=[]),this.layoutChildren(),this.layoutBackgrounds(),this.sizerEventsEnable&&(this.emit("postlayout",this.layoutedChildren,this),this.layoutedChildren.length=0),this.postLayout()},CN=function(){},SN=function(s,t,e){return this._anchor&&this._anchor.updatePosition(),this},OT=function(s){var t,e;for(var f in this.sizerChildren)t=this.sizerChildren[f],!(!t||t.isRexSizer&&t.ignoreLayout||!t.runWidthWrap)&&(e=this.getExpandedChildWidth(t,s),t.isRexSizer&&(e=t.resolveWidth(e)),t.runWidthWrap(e));return this};class Zc extends He{constructor(t,e){super(t,{eventEmitter:!1}),this.viewport=void 0,this.resetFromJSON(e)}shutdown(t){this.isShutdown||(this.autoAnchor(!1),this.viewport=void 0,this.onUpdateViewportCallback=void 0,this.onUpdateViewportCallbackScope=void 0,this.onResizeCallback=void 0,this.onResizeCallbackScope=void 0,super.shutdown(t))}resetFromJSON(t){t===void 0&&(t={});var e,f;t.x!==void 0?(e=null,f=t.x):t.left!==void 0?(e=0,f=t.left):t.right!==void 0?(e=1,f=t.right):t.centerX!==void 0&&(e=.5,f=t.centerX);var i,n;t.y!==void 0?(i=null,n=t.y):t.top!==void 0?(i=0,n=t.top):t.bottom!==void 0?(i=1,n=t.bottom):t.centerY!==void 0&&(i=.5,n=t.centerY);var o,r;f!==void 0&&(f=f.replace("left","0%").replace("right","100%").replace("center","50%").split("%"),o=parseFloat(f[0])/100,r=f[1]===""?0:parseFloat(f[1]));var a,l;n!==void 0&&(n=n.replace("top","0%").replace("bottom","100%").replace("center","50%").split("%"),a=parseFloat(n[0])/100,l=n[1]===""?0:parseFloat(n[1]));var h=t.width,u,v;h!==void 0&&(h=h.split("%"),u=parseFloat(h[0])/100,v=h[1]===""?0:parseFloat(h[1]));var d=t.height,c,p;d!==void 0&&(d=d.split("%"),c=parseFloat(d[0])/100,p=d[1]===""?0:parseFloat(d[1])),this.setAlign(e,i),this.setPercentage(o,a),this.setOffset(r,l),this.setSizePercentage(u,c),this.setSizePadding(v,p);var g=t.onResizeCallback,m=t.onResizeCallbackScope;g!==void 0&&this.setResizeCallback(g,m);var x=t.onUpdateViewportCallback,y=t.onUpdateViewportCallbackScope;return x!==void 0&&this.setUpdateViewportCallback(x,y),this.autoAnchor(t.enable),this}autoAnchor(t){return t===void 0&&(t=!0),t=!!t,this.autoAnchorEnable===t?this:(t?(this.scene.sys.scale.on("resize",this.anchor,this),this.anchor()):this.scene.sys.scale.off("resize",this.anchor,this),this.autoAnchorEnable=t,this)}setAlign(t,e){return this.alignX=t,this.alignY=e,this}setPercentage(t,e){return this.percentageX=t,this.percentageY=e,this}setOffset(t,e){return this.offsetX=t,this.offsetY=e,this}setSizePercentage(t,e){return this.percentageWidth=t,this.percentageHeight=e,this}setSizePadding(t,e){return this.paddingWidth=t,this.paddingHeight=e,this}setResizeCallback(t,e){return this.onResizeCallback=t,this.onResizeCallbackScope=e,this}setUpdateViewportCallback(t,e){return this.onUpdateViewportCallback=t,this.onUpdateViewportCallbackScope=e,this}anchor(){return this.updateViewport(),this.updateSize(),this.updatePosition(),this}updateSize(){var t=this.onResizeCallback,e=this.onResizeCallbackScope,f=this.anchorWidth,i=this.anchorHeight;if(!(f===void 0&&i===void 0||!t)){var n=this.parent;f===void 0&&(f=n.width),i===void 0&&(i=n.height),e?t.call(e,f,i,n,this):t(f,i,n,this)}}updatePosition(){var t=this.parent;return this.alignX===null?t.x=this.anchorX:this.alignX!==void 0&&(t.x=this.anchorX+t.displayWidth*(t.originX-this.alignX)),this.alignY===null?t.y=this.anchorY:this.alignY!==void 0&&(t.y=this.anchorY+t.displayHeight*(t.originY-this.alignY)),this}get anchorX(){return this.viewport.x+this.viewport.width*this.percentageX+this.offsetX}get anchorY(){return this.viewport.y+this.viewport.height*this.percentageY+this.offsetY}get anchorWidth(){if(this.percentageWidth!==void 0)return this.viewport.width*this.percentageWidth+this.paddingWidth}get anchorHeight(){if(this.percentageHeight!==void 0)return this.viewport.height*this.percentageHeight+this.paddingHeight}updateViewport(){var t=this.parent.scene.cameras.main;this.viewport=da(this.scene,t,this.viewport);var e=this.viewport,f=this.onUpdateViewportCallback,i=this.onUpdateViewportCallbackScope;f&&(i?f.call(i,e,this.parent,this):f(e,this.parent,this))}}var EN=function(s){s===void 0&&(s={});var t=s.hasOwnProperty("width"),e=s.hasOwnProperty("height"),f=s.hasOwnProperty("onResizeCallback");return(t||e)&&!f&&(s.onResizeCallback=function(i,n,o){t&&o.setMinWidth(i),e&&o.setMinHeight(n),o.layout()}),this._anchor===void 0?this._anchor=new Zc(this,s):this._anchor.resetFromJSON(s),this};const PN=Phaser.Utils.Objects.GetValue,Vr=Phaser.Utils.Objects.GetAdvancedValue,Um=Phaser.Math.Linear;class fl extends gr{constructor(t,e){super(t,e),this.scaleStart={},this.scaleEnd={},this.resetFromJSON(e),this.boot()}resetFromJSON(t){return super.resetFromJSON(t),this.setMode(PN(t,"mode",0)),this.setScaleRange(Vr(t,"start",void 0),Vr(t,"end",0)),this}setMode(t){return typeof t=="string"&&(t=MN[t]),this.mode=t,this}setScaleRange(t,e){return typeof t=="number"?(this.startX=t,this.startY=t):(this.startX=Vr(t,"x",this.parent.scaleX),this.startY=Vr(t,"y",this.parent.scaleY)),typeof e=="number"?(this.endX=e,this.endY=e):(this.endX=Vr(e,"x",void 0),this.endY=Vr(e,"y",void 0)),this.hasScaleX=this.startX!==void 0&&this.endX!==void 0,this.hasScaleY=this.startY!==void 0&&this.endY!==void 0,this}start(){if(this.timer.isRunning)return this;var t=this.parent;this.hasScaleX&&(t.scaleX=this.startX),this.hasScaleY&&(t.scaleY=this.startY);var e=this.repeat;return this.mode===2&&e!==-1&&(e=(e+1)*2-1),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(e),super.start(),this}updateGameObject(t,e){var f=e.t;e.isOddIteration&&(f=1-f),f=this.easeFn(f),this.hasScaleX&&(t.scaleX=Um(this.startX,this.endX,f)),this.hasScaleY&&(t.scaleY=Um(this.startY,this.endY,f))}complete(){return super.complete(),this.mode===1&&this.parent.destroy(),this}}const MN={stop:0,destroy:1,yoyo:2};var RT=function(s,t,e,f,i){f===void 0&&(f="Cubic");var n,o;switch(e){case 0:case"x":n={x:0},o={x:s.scaleX};break;case 1:case"y":n={y:0},o={y:s.scaleY};break;default:n=0,o=s.scale;break}var r={mode:0,start:n,end:o,duration:t,ease:f};return i===void 0?i=new fl(s,r):i.resetFromJSON(r),i.restart(),i},LT=function(s,t,e,f,i,n){f===void 0&&(f="Linear"),i instanceof fl&&(n=i,i=void 0),i===void 0&&(i=!0);var o={};switch(o.mode=i?1:0,e){case 0:case"x":o.end={x:0};break;case 1:case"y":o.end={y:0};break;default:o.end=0;break}return o.duration=t,o.ease=f,n===void 0?n=new fl(s,o):n.resetFromJSON(o),n.restart(),n},AN=function(s,t,e,f,i,n,o){e===void 0&&(e=1.2),f===void 0&&(f=0),n===void 0&&(n="Cubic");var r,a;switch(i){case 0:case"x":r={x:s.scaleX},a={x:e};break;case 1:case"y":r={y:s.scaleX},a={y:e};break;default:r=s.scaleX,a=e;break}var l={mode:2,start:r,end:a,duration:t/2,ease:n,repeat:f};return o===void 0?o=new fl(s,l):o.resetFromJSON(l),o.restart(),o};const kf=Phaser.Utils.Objects.IsPlainObject;var Kf=function(s,t){t.completeEventName=void 0,t.on("complete",function(){t.completeEventName&&(s.emit(t.completeEventName,s),t.completeEventName=void 0)}),t.on("update",function(){var e=s.getParentSizer();e&&e.resetChildPositionState(s)})},ON={popUp(s,t,e){if(kf(s)){var f=s;s=f.duration,t=f.orientation,e=f.ease}var i=this._scale===void 0;return this._scale=RT(this,s,t,e,this._scale),i&&Kf(this,this._scale),this._scale.completeEventName="popup.complete",this},popUpPromise(s,t,e){return this.popUp(s,t,e),We(this._scale)},scaleDownDestroy(s,t,e,f){if(kf(s)){var i=s;s=i.duration,t=i.orientation,e=i.ease,f=i.destroy}var n=this._scale===void 0;return this._scale=LT(this,s,t,e,f,this._scale),n&&Kf(this,this._scale),this._scale.completeEventName="scaledown.complete",this},scaleDownDestroyPromise(s,t,e,f){return this.scaleDownDestroy(s,t,e,f),We(this._scale)},scaleDown(s,t,e){return this.scaleDownDestroy(s,t,e,!1),this},scaleDownPromise(s,t,e){return this.scaleDown(s,t,e),We(this._scale)},scaleYoyo(s,t,e,f,i){if(kf(s)){var n=s;s=n.duration,t=n.peakValue,e=n.repeat,f=n.orientation,i=n.ease}var o=this._scale===void 0;return this._scale=AN(this,s,t,e,f,i,this._scale),o&&Kf(this,this._scale),this._scale.completeEventName="scaleyoyo.complete",this},scaleYoyoPromise(s,t,e,f,i){return this.scaleYoyo(s,t,e,f,i),We(this._scale)}};const RN=Phaser.Utils.Objects.GetValue,Wm=Phaser.Utils.Objects.GetAdvancedValue,LN=Phaser.Math.Linear;class Jd extends gr{constructor(t,e){super(t,e),this.resetFromJSON(e),this.boot()}resetFromJSON(t){return super.resetFromJSON(t),this.setMode(RN(t,"mode",0)),this.setAlphaRange(Wm(t,"start",this.parent.alpha),Wm(t,"end",0)),this}setMode(t){return typeof t=="string"&&(t=wN[t]),this.mode=t,this}setAlphaRange(t,e){return this.alphaStart=t,this.alphaEnd=e,this}start(){if(this.timer.isRunning)return this;var t=this.parent;return t.setAlpha(this.alphaStart),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(this.mode===2?-1:0),super.start(),this}updateGameObject(t,e){var f=e.t;e.isOddIteration&&(f=1-f),t.alpha=LN(this.alphaStart,this.alphaEnd,f)}complete(){return super.complete(),this.mode===1&&this.parent.destroy(),this}}const wN={stop:0,destroy:1,yoyo:2},FN=Phaser.Utils.Objects.IsPlainObject;var Wl=function(s,t,e,f){var i,n;FN(e)?(i=e.start,n=e.end):n=e,i===void 0&&(i=0),n===void 0&&(n=1);var o={mode:0,start:i,end:n,duration:t};return f===void 0?f=new Jd(s,o):f.resetFromJSON(o),f.restart(),f},Xl=function(s,t,e,f){e instanceof Jd&&(f=e,e=void 0),e===void 0&&(e=!0);var i={mode:e?1:0,end:0,duration:t};return f===void 0?f=new Jd(s,i):f.resetFromJSON(i),f.restart(),f};const Xm=Phaser.Utils.Objects.IsPlainObject;var Hm=function(s,t){t.completeEventName=void 0,t.on("complete",function(){t.completeEventName&&(s.emit(t.completeEventName,s),t.completeEventName=void 0)}),t.on("update",function(){var e=s.getParentSizer();e&&e.resetChildAlphaState(s)})},IN={fadeIn(s,t){if(Xm(s)){var e=s;s=e.duration,t=e.alpha}var f=this._fade===void 0;return this._fade=Wl(this,s,t,this._fade),f&&Hm(this,this._fade),this._fade.completeEventName="fadein.complete",this},fadeInPromise(s,t){return this.fadeIn(s,t),We(this._fade)},fadeOutDestroy(s,t){if(Xm(s)){var e=s;s=e.duration,t=e.destroy}var f=this._fade===void 0;return this._fade=Xl(this,s,t,this._fade),f&&Hm(this,this._fade),this._fade.completeEventName="fadeout.complete",this},fadeOutDestroyPromise(s,t){return this.fadeOutDestroy(s,t),We(this._fade)},fadeOut(s){return this.fadeOutDestroy(s,!1),this},fadeOutPromise(s){return this.fadeOut(s),We(this._fade)}};const DN=Phaser.Utils.Objects.GetValue,Ur=Phaser.Utils.Objects.GetAdvancedValue,$m=Phaser.Math.Linear;class dl extends gr{constructor(t,e){super(t,e),this.resetFromJSON(e),this.boot()}resetFromJSON(t){if(super.resetFromJSON(t),this.setMode(DN(t,"mode",0)),t&&(t.hasOwnProperty("x")||t.hasOwnProperty("y"))){var e=Ur(t,"x",void 0),f=Ur(t,"y",void 0);this.setTargetPosition(e,f)}else this.setTargetPosition(t);return this}setMode(t){return typeof t=="string"&&(t=BN[t]),this.mode=t,this}setTargetPosition(t,e){if(typeof t=="number"||typeof e=="number")this.startX=this.parent.x,this.startY=this.parent.y,this.endX=t,this.endY=e;else{var f=t;this.startX=Ur(f,"startX",void 0),this.startY=Ur(f,"startY",void 0),this.endX=Ur(f,"endX",void 0),this.endY=Ur(f,"endY",void 0)}return this.hasMoveX=this.startX!==void 0&&this.endX!==void 0,this.hasMoveY=this.startY!==void 0&&this.endY!==void 0,this}start(){if(this.timer.isRunning)return this;var t=this.parent;return this.hasMoveX&&(t.x=this.startX),this.hasMoveY&&(t.y=this.startY),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(this.mode===2?-1:0),super.start(),this}updateGameObject(t,e){var f=e.t;e.isOddIteration&&(f=1-f),f=this.easeFn(f),this.hasMoveX&&(t.x=$m(this.startX,this.endX,f)),this.hasMoveY&&(t.y=$m(this.startY,this.endY,f))}complete(){return super.complete(),this.mode===1&&this.parent.destroy(),this}}const BN={stop:0,destroy:1,yoyo:2};var cl=function(s,t){if(typeof s=="number")return s;var e=s[0],f=parseFloat(s.substr(2));switch(e){case"+":return t+f;case"-":return t-f;case"*":return t*f;case"/":return t/f}},wT=function(s,t,e,f,i,n,o){n instanceof dl&&(o=n,n=void 0),n===void 0&&(n=!1);var r={};return r.mode=n?1:0,e!==void 0&&(r.startX=s.x,r.endX=cl(e,s.x)),f!==void 0&&(r.startY=s.y,r.endY=cl(f,s.y)),r.duration=t,r.ease=i===void 0?"Linear":i,o===void 0?o=new dl(s,r):o.resetFromJSON(r),o.restart(),o},FT=function(s,t,e,f,i,n,o){n instanceof dl&&(o=n,n=void 0),n===void 0&&(n=!1);var r={};return r.mode=n?1:0,e!==void 0&&(r.startX=cl(e,s.x),r.endX=s.x),f!==void 0&&(r.startY=cl(f,s.y),r.endY=s.y),r.duration=t,r.ease=i===void 0?"Linear":i,o===void 0?o=new dl(s,r):o.resetFromJSON(r),o.restart(),o};const km=Phaser.Utils.Objects.IsPlainObject,Km=Phaser.Math.Distance.Between;var Zm=function(s,t){t.completeEventName=void 0,t.on("complete",function(){t.completeEventName&&(s.emit(t.completeEventName,s),t.completeEventName=void 0)}),t.on("update",function(){var e=s.getParentSizer();e&&e.resetChildPositionState(s)})},bN={moveFrom(s,t,e,f,i){if(km(s)){var n=s;t=n.x,e=n.y,n.hasOwnProperty("speed")?s=Km(t,e,this.x,this.y)*1e3/n.speed:s=n.duration,f=n.ease}var o=this._easeMove===void 0;return this._easeMove=FT(this,s,t,e,f,i,this._easeMove),o&&Zm(this,this._easeMove),this._easeMove.completeEventName="movefrom.complete",this},moveFromPromise(s,t,e,f,i){return this.moveFrom(s,t,e,f,i),We(this._easeMove)},moveFromDestroy(s,t,e,f){return this.moveFrom(s,t,e,f,!0),this},moveFromDestroyPromise(s,t,e,f){return this.moveFromDestroy(s,t,e,f),We(this._easeMove)},moveTo(s,t,e,f,i){if(km(s)){var n=s;t=n.x,e=n.y,n.hasOwnProperty("speed")?s=Km(t,e,this.x,this.y)*1e3/n.speed:s=n.duration,f=n.ease}var o=this._easeMove===void 0;return this._easeMove=wT(this,s,t,e,f,i,this._easeMove),o&&Zm(this,this._easeMove),this._easeMove.completeEventName="moveto.complete",this},moveToPromise(s,t,e,f,i){return this.moveTo(s,t,e,f,i),We(this._easeMove)},moveToDestroy(s,t,e,f){return this.moveTo(s,t,e,f,!0),this},moveToDestroyPromise(s,t,e,f){return this.moveToDestroy(s,t,e,f,!0),We(this._easeMove)},moveStop(s){return this._easeMove?(this._easeMove.stop(s),this):this}};const vn=Phaser.Utils.Objects.GetValue;class Jc extends Il{constructor(t,e){super(t,e),this.timer=new fT,this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.timer.resetFromJSON(vn(t,"timer")),this.setEnable(vn(t,"enable",!0)),this.setMode(vn(t,"mode",1)),this.isRunning=vn(t,"isRunning",!1),this.setMagnitudeMode(vn(t,"magnitudeMode",1)),this.setDuration(vn(t,"duration",500)),this.setMagnitude(vn(t,"magnitude",10)),this.ox=vn(t,"ox",void 0),this.oy=vn(t,"oy",void 0),this}toJSON(){return{timer:this.timer.toJSON(),enable:this.enable,mode:this.mode,isRunning:this.isRunning,magnitudeMode,duration:this.duration,magnitude:this.magnitude,ox:this.ox,oy:this.oy}}shutdown(t){this.isShutdown||(super.shutdown(t),this.timer.destroy(),this.timer=void 0)}startTicking(){super.startTicking(),this.mode===0?(this.scene.game.events.on("poststep",this.update,this),this.scene.game.events.on("prestep",this.backToOrigin,this)):this.scene.sys.events.on("preupdate",this.update,this)}stopTicking(){super.stopTicking(),this.scene&&(this.mode===0?(this.scene.game.events.off("poststep",this.update,this),this.scene.game.events.off("prestep",this.backToOrigin,this)):this.scene.sys.events.off("preupdate",this.update,this))}setEnable(t){return t==null&&(t=!0),this.enable=t,this}setMode(t){return typeof t=="string"&&(t=GN[t]),this.mode=t,this}setMagnitudeMode(t){return typeof t=="string"&&(t=NN[t]),this.magnitudeMode=t,this}setDuration(t){return this.duration=t,this}setMagnitude(t){return this.magnitude=t,this}start(t,e){if(typeof t!="number"){var f=t;e=vn(f,"magnitude",void 0),t=vn(f,"duration",void 0)}return e!==void 0&&this.setMagnitude(e),t!==void 0&&this.setDuration(t),this.timer.setDuration(this.duration).start(),super.start(),this}shake(t,e){return this.start(t,e),this}update(t,e){if(!this.isRunning||!this.enable)return this;var f=this.parent;if(!f.active)return this;if(this.timer.update(t,e),this.timer.isDone)this.backToOrigin(),this.complete();else{this.ox===void 0&&(this.ox=f.x,this.oy=f.y);var i=this.magnitude;this.magnitudeMode===1&&(i*=1-this.timer.t);var n=Math.random()*Math.PI*2,o=Math.cos(n)*i,r=Math.sin(n)*i;f.setPosition(this.ox+o,this.oy+r)}return this}backToOrigin(){if(!this.isRunning||!this.enable)return this;if(this.ox===void 0)return this;var t=this.parent;return this.ox===t.x&&this.oy===t.y?this:(t.setPosition(this.ox,this.oy),this.ox=void 0,this.oy=void 0,this)}}const GN={effect:0,behavior:1},NN={constant:0,decay:1},YN=Phaser.Utils.Objects.IsPlainObject;var zN=function(s,t){t.on("complete",function(){s.emit("shake.complete",s)})},VN={shake(s,t,e){if(YN(s)){var f=s;s=f.duration,t=f.magnitude,e=f.magnitudeMode}return this._shake===void 0&&(this._shake=new Jc(this,{mode:0,magnitudeMode:1}),zN(this,this._shake)),s!==void 0&&this._shake.setDuration(s),t!==void 0&&this._shake.setMagnitude(t),e!==void 0&&this._shake.setMagnitudeMode(e),this._shake.shake(),this},shakePromise(s,t){return this.shake(s,t),We(this._shake)}};const Jm=Phaser.Utils.Objects.IsPlainObject;class UN extends He{constructor(t,e){super(t,e),this.parent.setDataEnabled(),this.easeTasks={}}complete(t){this.emit(`complete-${t}`,this.parent,this),this.emit("complete",t,this.parent,this)}getEaseTask(t){var e=this.easeTasks[t];return e===void 0&&(e=new Bl(this.parent),this.easeTasks[t]=e,e.setTarget(this.parent.data.values).on("complete",function(){this.complete(t)},this)),e}easeTo(t,e,f,i){if(Jm(t)){var n=t;t=n.key,e=n.value,f=n.duration,i=n.ease;var o=n.speed;f===void 0&&o!==void 0&&(f=Math.abs(e-this.parent.data.values[t])/o*1e3)}f===void 0&&(f=1e3),i===void 0&&(i="Linear");var r=this.getEaseTask(t);return r.restart({key:t,to:e,duration:f,ease:i}),this}easeFrom(t,e,f,i){if(Jm(t)){var n=t;t=n.key,e=n.value,f=n.duration,i=n.ease;var o=n.speed;f===void 0&&o!==void 0&&(f=Math.abs(e-this.parent.data.values[t])/o*1e3)}f===void 0&&(f=1e3),i===void 0&&(i="Linear");var r=this.getEaseTask(t);return r.restart({key:t,from:e,duration:f,ease:i}),this}stopEase(t,e){e===void 0&&(e=!0);var f=this.easeTasks[t];return f&&f.stop(e),this}stopAll(t){t===void 0&&(t=!0);for(var e in this.easeTasks)this.stopEase(e,t);return this}}var WN=function(s,t){t.on("complete",function(e){s.emit(`easedata.${e}.complete`,s),s.emit("easedata.complete",e,s)})},XN={easeDataTo(s,t,e,f){return this._easeData||(this._easeData=new UN(this),WN(this,this._easeData)),this._easeData.easeTo(s,t,e,f),this},easeDataToPromise(s,t,e,f){return this.easeDataTo(s,t,e,f),wc(this._easeData,`complete-${s}`)},stopEaseData(s,t){return this._easeData?(this._easeData.stopEase(s,t),this):this},stopAllEaseData(s){return this._easeData?(this._easeData.stopAll(s),this):this}},Rs=function(s){IT(s,!1)},Ls=function(s){IT(s,!0)},Qc=function(s){if(!s)return!1;var t=zl(s);return!t.hidden},IT=function(s,t){if(!!s){var e=zl(s);e.hidden=t;var f=Tn(s);f?f.setChildVisible(s,!t):s.setVisible(!t)}},HN={show(s){return s===void 0&&(s=this),Rs(s),this},hide(s){return s===void 0&&(s=this),Ls(s),this},isShow(s){return s===void 0&&(s=this),Qc(s)}},Qd=function(s,t,e,f,i){if(!s||!s.getBounds||f&&!f(s,t,e))return!1;var n=ul(s,!0);return!(!n.contains(t,e)||i&&!i(s,t,e))},jc=function(s,t,e,f){if(t)return Qd(s,t.worldX,t.worldY,e,f);for(var i=s.scene.input.manager,n=i.pointersTotal,o=i.pointers,r=0;r<n;r++)if(t=o[r],Qd(s,t.worldX,t.worldY,e,f))return!0;return!1},$N=function(s,t){return t===void 0&&(t=this),jc(t,s)},qc=function(s){return s&&typeof s=="function"},Cn=function(s){return Object.prototype.toString.call(s)==="[object Array]"},jd=function(s,t,e,f,i){return Qd(s,t,e,kN(f),KN(i))},Qm=function(s){var t=s.rexSizer&&s.rexSizer.hidden;return!t},kN=function(s){return s?function(t,e,f){return Qm(t)?(s(t,e,f),!0):!1}:Qm},KN=function(s){return s},ZN=function(s,t,e,f,i){if(qc(e)||(i=e,e=void 0,f=void 0),i===void 0&&(this.sizerChildren?i=this.sizerChildren:i=this.children),Cn(i)){for(var n,o=0,r=i.length;o<r;o++)if(n=i[o],jd(n,s,t,e,f))return n}else{var n;for(var a in i)if(n=i[a],jd(n,s,t,e,f))return n}return null},co=function(s,t){var e;if(t===void 0)s.hasOwnProperty("rexContainer")&&(e=s.rexContainer.parent,e.isRexSizer||(e=null));else for(e=co(s);e&&e.name!==t;)e=co(e);return e},JN=function(s){for(var t=co(s);t;)s=t,t=co(t);return s},QN={getParentSizer(s,t){return typeof s=="string"&&(t=s,s=void 0),s===void 0&&(s=this),co(s,t)},getTopmostSizer(s){return s===void 0&&(s=this),JN(s)}},Ys=function(s,t,e){!s||t===void 0&&e===void 0||(s.resize?(t===void 0&&(t=s.width),e===void 0&&(e=s.height),s.resize(t,e)):(t!==void 0&&(s.displayWidth=t),e!==void 0&&(s.displayHeight=e)))},jN=function(s,t){return t===void 0?t={}:t===!0&&(t=qN),t.x=s.x,t.y=s.y,t.scaleX=s.scaleX,t.scaleY=s.scaleY,t.width=s.width,t.height=s.height,t.displayWidth=s.displayWidth,t.displayHeight=s.displayHeight,t},qN={},Lo=function(s){this.sizerEventsEnable&&(jN(s,this.getChildPrevState(s)),this.layoutedChildren.push(s))},wo=function(s,t,e,f,i,n,o,r){Ul(s,t,e,f,i,n),o!==void 0&&(s.x+=o),r!==void 0&&(s.y+=r),this.resetChildPositionState(s),this.sizerEventsEnable&&s.emit("sizer.postlayout",s,this)};const _N=Phaser.Display.Align.CENTER;var t5=function(){if(this.backgroundChildren!==void 0)for(var s=this.backgroundChildren,t=this.left,e=this.top,f=this.width,i=this.height,n,o,r,a,l,h,u,v=0,d=s.length;v<d;v++)n=s[v],o=n.rexSizer,!o.hidden&&(r=o.padding,Lo.call(this,n),a=t+r.left,l=e+r.top,h=f-r.left-r.right,u=i-r.top-r.bottom,Ys(n,h,u),wo.call(this,n,a,l,h,u,_N))},e5=function(s,t){var e=typeof s;return e==="string"?s=this.getElement(s):(s===void 0||e!="object")&&(t=s,s=this),t===void 0&&(t=!0),s.input&&s.input.hasOwnProperty("draggable")?s.input.draggable=t:t&&(s.setInteractive(),s.scene.input.setDraggable(s),s.on("drag",function(f,i,n){var o=this.getTopmostSizer();o.x+=i-s.x,o.y+=n-s.y,o.emit("sizer.drag",f,i,n)},this).on("dragstart",function(f,i,n){var o=this.getTopmostSizer();o.emit("sizer.dragstart",f,i,n)},this).on("dragend",function(f,i,n,o){var r=this.getTopmostSizer();r.emit("sizer.dragend",f,i,n,o)},this)),this};const Wa=Phaser.Utils.Objects.GetValue;class va extends He{constructor(t,e){super(t,e),this._enable=void 0,t.setInteractive(Wa(e,"inputConfig",void 0)),this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.lastClickTime=void 0,this.setEnable(Wa(t,"enable",!0)),this.setMode(Wa(t,"mode",1)),this.setClickInterval(Wa(t,"clickInterval",100)),this.setDragThreshold(Wa(t,"threshold",void 0)),this}boot(){var t=this.parent;t.on("pointerdown",this.onPress,this),t.on("pointerup",this.onRelease,this),t.on("pointerout",this.onPointOut,this),t.on("pointermove",this.onMove,this),t.on("pointerover",this.onOver,this),t.on("pointeroutr",this.onOut,this)}shutdown(t){this.isShutdown||(this.pointer=null,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t){t||this.cancel(),this._enable=t;var e=t?"enable":"disable";this.emit(e,this,this.parent)}}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setMode(t){return typeof t=="string"&&(t=i5[t]),this.mode=t,this}setClickInterval(t){return this.clickInterval=t,this}setDragThreshold(t){return this.dragThreshold=t,this}onPress(t,e,f,i){this.pointer===void 0&&(this.pointer=t,this.mode===0&&this.click(t.downTime,t,i))}onRelease(t,e,f,i){this.pointer===t&&(this.mode===1&&this.click(t.upTime,t,i),this.pointer=void 0)}onPointOut(t,e){this.pointer===t&&this.cancel()}onMove(t,e,f,i){this.pointer===t&&this.dragThreshold!==void 0&&t.getDistance()>=this.dragThreshold&&this.cancel()}click(t,e,f){if(!this.enable)return this;if(t===void 0)return this.emit("click",this,this.parent,e,f),this;this.pointer=void 0;var i=this.lastClickTime;return i!==void 0&&t-i<=this.clickInterval?this:(this.lastClickTime=t,this.emit("click",this,this.parent,e,f),this)}cancel(){return this.pointer=void 0,this}onOver(t,e,f,i){return this.enable?(this.emit("over",this,this.parent,t,i),this):this}onOut(t,e){return this.enable?(this.emit("out",this,this.parent,t,e),this):this}}const i5={press:0,pointerdown:0,release:1,pointerup:1};var n5={onClick(s,t,e){return s?(this._click===void 0&&(this._click=new va(this,e)),this._click.on("click",s,t),this):this},offClick(s,t){return this._click===void 0?this:(this._click.off("click",s,t),this)},enableClick(s){return this._click===void 0?this:(this._click.setEnable(s),this)},disableClick(){return this._click===void 0?this:(this._click.setEnable(!1),this)}};const Gh=Phaser.Utils.Objects.GetValue;class _c extends He{constructor(t,e){super(t,e),this._enable=void 0;var f=Gh(e,"inputConfig",void 0);f&&t.setInteractive(f),this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.setEnable(Gh(t,"enable",!0)),this.setMode(Gh(t,"mode",1)),this.setClickInterval(Gh(t,"clickInterval",100)),this}boot(){var t=this.parent.scene;t.input.on("pointerdown",this.onPress,this),t.input.on("pointerup",this.onRelease,this)}shutdown(t){if(!this.isShutdown){var e=this.parent.scene;e.input.off("pointerdown",this.onPress,this),e.input.off("pointerup",this.onRelease,this),super.shutdown(t)}}get enable(){return this._enable}set enable(t){if(this._enable!==t){this._enable=t;var e=t?"enable":"disable";this.emit(e,this,this.parent)}}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setMode(t){return typeof t=="string"&&(t=s5[t]),this.mode=t,this}setClickInterval(t){return this.clickInterval=t,this}isPointerInside(t){var e=this.parent,f=e.input?Sc:jc;return f(e,t)}onPress(t){if(this.mode===0){if(!this.parent.willRender(t.camera))return;this.isPointerInside(t)||this.click(t.downTime,t)}}onRelease(t){if(this.mode===1){if(!this.parent.willRender(t.camera))return;this.isPointerInside(t)||this.click(t.upTime,t)}}click(t,e){if(!this.enable)return this;if(t===void 0)return this.emit("clickoutside",this,this.parent,e),this;var f=this.lastClickTime;return f!==void 0&&t-f<=this.clickInterval?this:(this.lastClickTime=t,this.emit("clickoutside",this,this.parent,e),this)}}const s5={press:0,pointerdown:0,release:1,pointerup:1};var r5={onClickOutside(s,t,e){return s?(this._clickOutside===void 0&&(this._clickOutside=new _c(this,e)),this._clickOutside.on("clickoutside",s,t),this):this},offClickOutside(s,t){return this._clickOutside===void 0?this:(this._clickOutside.off("clickoutside",s,t),this)},enableClickOutside(s){return this._clickOutside===void 0?this:(this._clickOutside.setEnable(s),this)},disableClickOutside(){return this._clickOutside===void 0?this:(this._clickOutside.setEnable(!1),this)}};class $n{constructor(t){var e=gi(t,"states",void 0);e&&this.addStates(e);var f=gi(t,"extend",void 0);if(f)for(var i in f)(!this.hasOwnProperty(i)||this[i]===void 0)&&(this[i]=f[i]);var n=gi(t,"eventEmitter",void 0),o=gi(t,"EventEmitterClass",void 0);this.setEventEmitter(n,o),this._stateLock=!1,this.resetFromJSON(t)}shutdown(){this.destroyEventEmitter()}destroy(){this.shutdown()}resetFromJSON(t){this.setEnable(gi(t,"enable",!0)),this.start(gi(t,"start",void 0));var e=gi(t,"init",void 0);return e&&e.call(this),this}toJSON(){return{curState:this.state,prevState:this.prevState,enable:this.enable,start:this._start}}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}set state(t){if(!(!this.enable||this._stateLock)&&this._state!==t){if(this._prevState=this._state,this._state=t,this._stateLock=!0,this.emit("statechange",this),this._prevState!=null){var e="exit_"+this._prevState,f=this[e];f&&f.call(this),this.emit(e,this)}if(this._stateLock=!1,this._state!=null){var i="enter_"+this._state,n=this[i];n&&n.call(this),this.emit(i,this)}}}get state(){return this._state}get prevState(){return this._prevState}start(t){return this._start=t,this._prevState=void 0,this._state=t,this}goto(t){return t!=null&&(this.state=t),this}next(){var t,e=this["next_"+this.state];return e&&(typeof e=="string"?t=e:t=e.call(this)),this.goto(t),this}addState(t,e){typeof t!="string"&&(e=t,t=e.name);var f=e.next;f&&(this["next_"+t]=f);var i=e.exit;i&&(this["exit_"+t]=i);var n=e.enter;return n&&(this["enter_"+t]=n),this}addStates(t){if(Array.isArray(t))for(var e=0,f=t.length;e<f;e++)this.addState(t[e]);else for(var i in t)this.addState(i,t[i]);return this}runMethod(t,e,f,i,n,o){var r=this[t+"_"+this.state];if(!!r){var a=arguments.length;switch(a){case 1:return r.call(this);case 2:return r.call(this,e);case 3:return r.call(this,e,f);case 4:return r.call(this,e,f,i);case 5:return r.call(this,e,f,i,n);case 6:return r.call(this,e,f,i,n,o)}for(var l=new Array(a-1),h=1;h<a;h++)l[h-1]=arguments[h];return r.apply(this,l)}}update(t,e){this.runMethod("update",t,e)}preupdate(t,e){this.runMethod("preupdate",t,e)}postupdate(t,e){this.runMethod("postupdate",t,e)}}Object.assign($n.prototype,fa);class a5 extends $n{constructor(){super({eventEmitter:!1}),this.goto("IDLE")}setCooldownTime(t){return this.cooldownTime=t,this.cooldownMode=t!==void 0,this}request(){return this.runMethod("request")}update_IDLE(){this.compensationTime=0}request_IDLE(){return this.next(),!0}next_IDLE(){if(this.cooldownMode)return"COOLDOWN"}enter_COOLDOWN(){this.remainderTime=this.cooldownTime+this.compensationTime}update_COOLDOWN(t,e){this.remainderTime-=e,this.remainderTime<0&&(this.compensationTime=this.cooldownTime>e?-this.remainderTime:0,this.goto("IDLE"))}request_COOLDOWN(){return!1}}const Zf=Phaser.Utils.Objects.GetValue;class vo extends He{constructor(t,e){super(t,e),this._enable=void 0,this.cooldown=new a5,this.parent.setInteractive(Zf(e,"inputConfig",void 0)),this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.isInTouching=!1,this.setEnable(Zf(t,"enable",!0)),this.setCooldown(Zf(t,"cooldown",void 0)),this}boot(){var t=this.parent;t.on("pointerdown",this.onPointIn,this),t.on("pointerover",this.onPointIn,this),t.on("pointerup",this.onPointOut,this),t.on("pointerout",this.onPointOut,this),this.scene.sys.events.on("preupdate",this.preupdate,this)}shutdown(t){this.isShutdown||(this.scene.sys.events.off("preupdate",this.preupdate,this),this.pointer=void 0,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||(this.isInTouching=!1,this.pointer=void 0),this._enable=t,this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}get cooldownTime(){return this.cooldown.cooldownTime}set cooldownTime(t){this.cooldown.setCooldownTime(t)}setCooldown(t){return this.cooldownTime=t,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointIn(t,e,f){!this.enable||!t.isDown||this.pointer!==void 0||(this.pointer=t,this.isInTouching=!0)}onPointOut(t){!this.enable||this.pointer!==t||(this.pointer=void 0,this.isInTouching=!1)}preupdate(t,e){this.cooldown.update(t,e),this.isInTouching&&this.cooldown.request()&&this.emit("intouch",this,this.parent,this.pointer)}}var o5={onTouching(s,t,e){return s?(this._inTouching===void 0&&(this._inTouching=new vo(this,e)),this._inTouching.on("intouch",s,t),this):this},offTouching(s,t){return this._inTouching===void 0?this:(this._inTouching.off("intouch",s,t),this)},enableTouching(s){return this._inTouching===void 0?this:(this._inTouching.setEnable(s),this)},disableTouching(){return this._inTouching===void 0?this:(this._inTouching.setEnable(!1),this)}},DT=function(s,t,e){for(var f,i=0,n=s.length;i<n;i++)if(f=s[i],!!jd(f,t,e))return f.pointToChild(t,e);return null},zn=function(s,t,e,f,i,n,o){var r;i===void 0?r=f:r=DT(e,f,i),r&&s.emit(t,r,n,o)};const h5=Phaser.Utils.Objects.GetValue;var l5=function(s){var t=h5(s,"down",void 0);t!==!1&&this.on("pointerdown",u5,this)},u5=function(s,t,e,f){var i=this._childrenInteractive;zn(i.eventEmitter,`${i.eventNamePrefix}down`,i.targetSizers,s.worldX,s.worldY,s,f)};const f5=Phaser.Utils.Objects.GetValue;var d5=function(s){var t=f5(s,"up",void 0);t!==!1&&this.on("pointerup",c5,this)},c5=function(s,t,e,f){var i=this._childrenInteractive;zn(i.eventEmitter,`${i.eventNamePrefix}up`,i.targetSizers,s.worldX,s.worldY,s,f)};const v5=Phaser.Utils.Objects.GetValue;var p5=function(s){var t=v5(s,"over",void 0);t!==!1&&this.on("pointermove",jm,this).on("pointerover",jm,this).on("pointerout",g5,this)},jm=function(s,t,e,f){var i=this._childrenInteractive,n=DT(i.targetSizers,s.worldX,s.worldY),o=i.lastOverChild;n&&o&&n===o||(i.lastOverChild=n,zn(i.eventEmitter,`${i.eventNamePrefix}out`,i.targetSizers,o,void 0,s,f),zn(i.eventEmitter,`${i.eventNamePrefix}over`,i.targetSizers,n,void 0,s,f))},g5=function(s,t){var e=this._childrenInteractive,f=e.lastOverChild;e.lastOverChild=null,zn(e.eventEmitter,`${e.eventNamePrefix}out`,e.targetSizers,f,void 0,s,t)};const m5=Phaser.Utils.Objects.GetValue;var x5=function(s){var t=m5(s,"click",void 0);if(t!==!1){t===void 0&&(t={}),t.hasOwnProperty("threshold")||(t.threshold=10);var e=this._childrenInteractive;this._click=new va(this,t),this._click.on("click",function(f,i,n,o){zn(e.eventEmitter,`${e.eventNamePrefix}click`,e.targetSizers,n.worldX,n.worldY,n,o)},this)}};const Jf=Phaser.Utils.Objects.GetValue;class Hl extends Il{constructor(t,e){var f=uT(t);f===t&&(t=void 0),super(f,e),this.gameObject=t,t&&t.setInteractive(Jf(e,"inputConfig",void 0)),this._enable=void 0,this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.setEnable(Jf(t,"enable",!0)),this.setDetectBounds(),this.gameObject===void 0?this.setDetectBounds(Jf(t,"bounds",void 0)):this.setDetectBounds(),this.tracerState=Qf,this.pointer=void 0,this.lastPointer=void 0,this.movedState=!1,this.isTouchingAnyObject=!1,this}boot(){super.boot(),this.gameObject?this.gameObject.on("pointerdown",this.onPointerDown,this):this.scene.input.on("pointerdown",this.onPointerDown,this),this.scene.input.on("pointerup",this.onPointerUp,this),this.scene.input.on("gameout",this.dragCancel,this),this.scene.input.on("pointermove",this.onPointerMove,this),this.scene.sys.events.once("shutdown",this.destroy,this)}shutdown(t){!this.scene||(this.gameObject||this.scene.input.off("pointerdown",this.onPointerDown,this),this.scene.input.off("pointerup",this.onPointerUp,this),this.scene.input.off("gameout",this.dragCancel,this),this.scene.input.off("pointermove",this.onPointerMove,this),this.scene.sys.events.off("shutdown",this.destroy,this),this.gameObject=void 0,this.bounds=void 0,this.pointer=void 0,this.lastPointer=void 0,this.movedState=!1,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||this.dragCancel(),this._enable=t,this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}setDetectBounds(t){return this.bounds=t,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointerDown(t,e){if(!!this.enable&&this.pointer===void 0){var f=this.bounds?this.bounds.contains(t.x,t.y):!0;!f||this.pointer!==t&&(this.pointer=t,this.lastPointer=t,this.movedState=!1,this.tracerState=qm,this.gameObject===void 0&&(this.isTouchingAnyObject=e.length>0),this.onDragStart())}}onPointerUp(t){if(!!this.enable){var e=this.bounds?this.bounds.contains(t.x,t.y):!0;!e||this.pointer===t&&(this.pointer=void 0,this.movedState=!1,this.tracerState=Qf,this.onDragEnd())}}onPointerMove(t){if(!!this.enable&&t.isDown){var e=this.bounds?this.bounds.contains(t.x,t.y):!0,f=this.pointer===t;!f&&e||(f&&!e?this.onPointerUp(t):(this.movedState||(this.movedState=t.x!==t.downX||t.y!==t.downY),this.movedState&&this.onDrag()))}}dragCancel(){return this.tracerState===qm&&this.onDragEnd(),this.pointer=void 0,this.tracerState=Qf,this}onDragStart(){this.emit("dragstart",this)}onDragEnd(){this.emit("dragend",this)}onDrag(){this.emit("drag",this)}preUpdate(t,e){}postUpdate(t,e){}startTicking(){super.startTicking(),this.scene.sys.events.on("preupdate",this.preUpdate,this),this.scene.sys.events.on("postupdate",this.postUpdate,this)}stopTicking(){super.stopTicking(),this.scene&&(this.scene.sys.events.off("preupdate",this.preUpdate,this),this.scene.sys.events.off("postupdate",this.postUpdate,this))}setRecongizedStateObject(t){return this.recongizedState=t,this}get state(){return this.recongizedState.state}set state(t){this.recongizedState.state=t}cancel(){return this.state=y5,this}}const Qf=0,qm=1,y5="IDLE",ar=Phaser.Utils.Objects.GetValue,T5=Phaser.Math.Distance.Between;class $l extends Hl{constructor(t,e){super(t,e);var f=this,i={states:{IDLE:{enter:function(){f.stop(),f.tapsCount=0,f.x=0,f.y=0,f.worldX=0,f.worldY=0},exit:function(){var n=f.lastPointer;f.x=n.x,f.y=n.y,f.worldX=n.worldX,f.worldY=n.worldY}},BEGIN:{enter:function(){f.start(),f.tapsCount=0,f.emit("tappingstart",f,f.gameObject,f.lastPointer)}},RECOGNIZED:{enter:function(){f.start(),f.emit("tap",f,f.gameObject,f.lastPointer),f.emit(`${f.tapsCount}tap`,f,f.gameObject,f.lastPointer)}}},init:function(){this.state=or},eventEmitter:!1};this.setRecongizedStateObject(new $n(i))}resetFromJSON(t){super.resetFromJSON(t),this.setHoldTime(ar(t,"time",250)),this.setTapInterval(ar(t,"tapInterval",200)),this.setDragThreshold(ar(t,"threshold",9)),this.setTapOffset(ar(t,"tapOffset",10));var e=ar(t,"taps",void 0);return e!==void 0?this.setTaps(e):(this.setMaxTaps(ar(t,"maxTaps",void 0)),this.setMinTaps(ar(t,"minTaps",void 0))),this}onDragStart(){switch(this.state){case or:this.state=Wr;break;case Wr:var t=this.lastPointer,e=T5(t.upX,t.upY,t.x,t.y);e>this.tapOffset&&(this.state=Xr,this.state=Wr);break;case Xr:this.state=Wr;break}}onDragEnd(){this.state===Wr&&(this.tapsCount++,this.emit("tapping",this,this.gameObject,this.lastPointer),this.maxTaps!==void 0&&this.tapsCount===this.maxTaps&&(this.state=Xr))}onDrag(){this.state!==or&&this.pointer.getDistance()>this.dragThreshold&&(this.state=or)}preUpdate(t,e){if(!(!this.isRunning||!this.enable)&&this.state===Wr){var f=this.lastPointer;if(f.isDown){var i=t-f.downTime;i>this.holdTime&&(this.state=or)}else{var n=t-f.upTime;n>this.tapInterval&&(this.minTaps===void 0||this.tapsCount>=this.minTaps?this.state=Xr:this.state=or)}}}postUpdate(t,e){!this.isRunning||!this.enable||this.state===Xr&&(this.state=or)}get isTapped(){return this.state===Xr}setHoldTime(t){return this.holdTime=t,this}setTapInterval(t){return this.tapInterval=t,this}setDragThreshold(t){return this.dragThreshold=t,this}setTapOffset(t){return this.tapOffset=t,this}setMaxTaps(t){return this.maxTaps=t,this}setMinTaps(t){return this.minTaps=t,this}setTaps(t,e){return e===void 0&&(e=t),this.setMinTaps(t).setMaxTaps(e),this}}const or="IDLE",Wr="BEGIN",Xr="RECOGNIZED",_m=Phaser.Utils.Objects.GetValue;class kl extends Hl{constructor(t,e){super(t,e);var f=this,i={states:{IDLE:{enter:function(){f.x=0,f.y=0,f.worldX=0,f.worldY=0},exit:function(){var n=f.lastPointer;f.x=n.x,f.y=n.y,f.worldX=n.worldX,f.worldY=n.worldY}},BEGIN:{enter:function(){f.start()},exit:function(){f.stop()}},RECOGNIZED:{enter:function(){f.emit("pressstart",f,f.gameObject,f.lastPointer)},exit:function(){f.emit("pressend",f,f.gameObject,f.lastPointer)}}},init:function(){this.state=Nh},eventEmitter:!1};this.setRecongizedStateObject(new $n(i))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(_m(t,"threshold",9)),this.setHoldTime(_m(t,"time",251)),this}onDragStart(){this.state=tx,this.holdTime===0&&(this.state=jf)}onDragEnd(){this.state=Nh}onDrag(){this.state!==Nh&&this.pointer.getDistance()>this.dragThreshold&&(this.state=Nh)}preUpdate(t,e){if(!(!this.isRunning||!this.enable)&&this.state===tx){var f=t-this.pointer.downTime;f>=this.holdTime&&(this.state=jf)}}get isPressed(){return this.state===jf}setHoldTime(t){return this.holdTime=t,this}setDragThreshold(t){return this.dragThreshold=t,this}}const Nh="IDLE",tx="BEGIN",jf="RECOGNIZED",C5=Phaser.Utils.Objects.GetValue;class BT extends Hl{constructor(t,e){super(t,e);var f=this,i={states:{IDLE:{},BEGIN:{enter:function(){var n=f.pointer;f.startX=n.x,f.startY=n.y,f.startWorldX=n.worldX,f.startWorldY=n.worldY}},RECOGNIZED:{enter:function(){f.emit("panstart",f,f.gameObject,f.lastPointer)},exit:function(){var n=f.lastPointer;f.endX=n.x,f.endY=n.y,f.endWorldX=n.worldX,f.endWorldY=n.worldY,f.emit("panend",f,f.gameObject,f.lastPointer)}}},init:function(){this.state=ex},eventEmitter:!1};this.setRecongizedStateObject(new $n(i))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(C5(t,"threshold",10)),this}onDragStart(){this.state=ix,this.dragThreshold===0&&(this.state=Yh)}onDragEnd(){this.state=ex}onDrag(){switch(this.state){case ix:this.pointer.getDistance()>=this.dragThreshold&&(this.state=Yh);break;case Yh:var t=this.pointer.position,e=this.pointer.prevPosition;this.dx=t.x-e.x,this.dy=t.y-e.y;var f=this.pointer;this.x=f.x,this.y=f.y,this.worldX=f.worldX,this.worldY=f.worldY,this.emit("pan",this,this.gameObject,this.lastPointer);break}}get isPanned(){return this.state===Yh}setDragThreshold(t){return this.dragThreshold=t,this}}const ex="IDLE",ix="BEGIN",Yh="RECOGNIZED",S5=Phaser.Math.Distance.Between,E5=Phaser.Math.Angle.Between;var P5={getDt:function(){var s=Ec(this.scene);return s},getVelocity:function(){var s=this.pointer.position,t=this.pointer.prevPosition,e=S5(t.x,t.y,s.x,s.y),f=e/(this.getDt()*.001);return f},getVelocityX:function(){var s=this.pointer.position,t=this.pointer.prevPosition,e=Math.abs(s.x-t.x),f=e/(this.getDt()*.001);return f},getVelocityY:function(){var s=this.pointer.position,t=this.pointer.prevPosition,e=Math.abs(s.y-t.y),f=e/(this.getDt()*.001);return f},getVelocityAngle:function(){var s=this.pointer.position,t=this.pointer.prevPosition,e=E5(t.x,t.y,s.x,s.y);return e}},M5={"up&down":0,"left&right":1,"4dir":2,"8dir":3},A5=function(s,t,e){switch(e===void 0?e={}:e===!0&&(e=O5),e.left=!1,e.right=!1,e.up=!1,e.down=!1,s=(s+360)%360,t){case 0:s<180?e.down=!0:e.up=!0;break;case 1:s>90&&s<=270?e.left=!0:e.right=!0;break;case 2:s>45&&s<=135?e.down=!0:s>135&&s<=225?e.left=!0:s>225&&s<=315?e.up=!0:e.right=!0;break;case 3:s>22.5&&s<=67.5?(e.down=!0,e.right=!0):s>67.5&&s<=112.5?e.down=!0:s>112.5&&s<=157.5?(e.down=!0,e.left=!0):s>157.5&&s<=202.5?e.left=!0:s>202.5&&s<=247.5?(e.left=!0,e.up=!0):s>247.5&&s<=292.5?e.up=!0:(s>292.5&&s<=337.5&&(e.up=!0),e.right=!0);break}return e},O5={};const qf=Phaser.Utils.Objects.GetValue,R5=Phaser.Math.RadToDeg;class Fo extends Hl{constructor(t,e){super(t,e);var f=this,i={states:{IDLE:{enter:function(){f.x=0,f.y=0,f.worldX=0,f.worldY=0},exit:function(){var n=f.lastPointer;f.x=n.x,f.y=n.y,f.worldX=n.worldX,f.worldY=n.worldY}},BEGIN:{enter:function(){f.validDrag=!1}},RECOGNIZED:{enter:function(){f.start(),f.updateDirectionStates(),f.emit("swipe",f,f.gameObject,f.lastPointer)},exit:function(){f.stop(),f.clearDirectionStates()}}},init:function(){this.state=_f},eventEmitter:!1};this.setRecongizedStateObject(new $n(i)),this.clearDirectionStates()}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(qf(t,"threshold",10)),this.setVelocityThreshold(qf(t,"velocityThreshold",1e3)),this.setDirectionMode(qf(t,"dir","8dir")),this}onDragStart(){this.state=nx}onDragEnd(){this.state=_f}onDrag(){this.state===nx&&(this.validDrag||(this.validDrag=this.dragThreshold===0||this.pointer.getDistance()>=this.dragThreshold),this.validDrag&&this.dragVelocity>this.velocityThreshold&&(this.state=td))}postUpdate(t,e){!this.isRunning||!this.enable||this.state===td&&(this.state=_f)}get isSwiped(){return this.state===td}get dragVelocity(){var t;switch(this.dirMode){case 0:t=this.getVelocityY();break;case 1:t=this.getVelocityX();break;default:t=this.getVelocity();break}return t}setDragThreshold(t){return this.dragThreshold=t,this}setVelocityThreshold(t){return this.velocityThreshold=t,this}setDirectionMode(t){return typeof t=="string"&&(t=M5[t]),this.dirMode=t,this}updateDirectionStates(){var t=R5(this.getVelocityAngle());return A5(t,this.dirMode,this),this}clearDirectionStates(){return this.left=!1,this.right=!1,this.up=!1,this.down=!1,this}}Object.assign(Fo.prototype,P5);const _f="IDLE",nx="BEGIN",td="RECOGNIZED",ed=Phaser.Utils.Objects.GetValue,L5=Phaser.Utils.Array.SpliceOne,w5=Phaser.Math.Distance.Between,F5=Phaser.Math.Angle.Between;class tv{constructor(t,e){var f=t.input.manager.pointersTotal-1;f<2&&t.input.addPointer(2-f),this.scene=t,this.setEventEmitter(ed(e,"eventEmitter",void 0)),this._enable=void 0,this.pointers=[],this.movedState={},this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.setEnable(ed(t,"enable",!0)),this.bounds=ed(t,"bounds",void 0),this.tracerState=zh,this.pointers.length=0,Is(this.movedState),this}boot(){this.scene.input.on("pointerdown",this.onPointerDown,this),this.scene.input.on("pointerup",this.onPointerUp,this),this.scene.input.on("gameout",this.dragCancel,this),this.scene.input.on("pointermove",this.onPointerMove,this),this.scene.sys.events.once("shutdown",this.destroy,this)}shutdown(){!this.scene||(this.destroyEventEmitter(),this.pointers.length=0,Is(this.movedState),this.scene.input.off("pointerdown",this.onPointerDown,this),this.scene.input.off("pointerup",this.onPointerUp,this),this.scene.input.off("gameout",this.dragCancel,this),this.scene.input.off("pointermove",this.onPointerMove,this),this.scene.sys.events.off("shutdown",this.destroy,this),this.scene=void 0)}destroy(){this.shutdown()}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||this.dragCancel(),this._enable=t,this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointerDown(t){if(!!this.enable&&this.pointers.length!==2){var e=this.bounds?this.bounds.contains(t.x,t.y):!0;if(!!e){var f=this.pointers.indexOf(t);if(f===-1)switch(this.movedState[t.id]=!1,this.pointers.push(t),this.tracerState){case zh:this.tracerState=Ha,this.onDrag1Start();break;case Ha:this.tracerState=On,this.onDrag2Start();break}}}}onPointerUp(t){if(!!this.enable){var e=this.bounds?this.bounds.contains(t.x,t.y):!0;if(!!e){var f=this.pointers.indexOf(t);if(f!==-1)switch(delete this.movedState[t.id],L5(this.pointers,f),this.tracerState){case Ha:this.tracerState=zh,this.onDrag1End();break;case On:this.tracerState=Ha,this.onDrag2End(),this.onDrag1Start();break}}}}onPointerMove(t){if(!!this.enable&&t.isDown){var e=this.bounds?this.bounds.contains(t.x,t.y):!0,f=this.pointers.indexOf(t)!==-1;if(!(!f&&e)){if(f&&!e)this.onPointerUp(t);else if(this.movedState[t.id]||(this.movedState[t.id]=t.x!==t.downX||t.y!==t.downY),this.movedState[t.id])switch(this.tracerState){case Ha:this.onDrag1();break;case On:this.onDrag2();break}}}}dragCancel(){return this.tracerState===On&&this.onDrag2End(),this.pointers.length=0,Is(this.movedState),this.tracerState=zh,this}onDrag1Start(){this.emit("drag1start",this)}onDrag1End(){this.emit("drag1end",this)}onDrag1(){this.emit("drag1",this)}onDrag2Start(){this.emit("drag2start",this)}onDrag2End(){this.emit("drag2end",this)}onDrag2(){this.emit("drag2",this)}get distanceBetween(){if(this.tracerState!==On)return 0;var t=this.pointers[0],e=this.pointers[1];return w5(t.x,t.y,e.x,e.y)}get angleBetween(){if(this.tracerState!==On)return 0;var t=this.pointers[0],e=this.pointers[1];return F5(t.x,t.y,e.x,e.y)}get drag1Vector(){var t=this.pointers[0];if(t&&this.movedState[t.id]){var e=t.position,f=t.prevPosition;Xa.x=e.x-f.x,Xa.y=e.y-f.y}else Xa.x=0,Xa.y=0;return Xa}get centerX(){if(this.tracerState!==On)return 0;var t=this.pointers[0].position,e=this.pointers[1].position;return(t.x+e.x)/2}get centerY(){if(this.tracerState!==On)return 0;var t=this.pointers[0].position,e=this.pointers[1].position;return(t.y+e.y)/2}get prevCenterX(){if(this.tracerState!==On)return 0;var t=this.movedState[this.pointers[0].id]?this.pointers[0].prevPosition:this.pointers[0].position,e=this.movedState[this.pointers[1].id]?this.pointers[1].prevPosition:this.pointers[1].position;return(t.x+e.x)/2}get prevCenterY(){if(this.tracerState!==On)return 0;var t=this.movedState[this.pointers[0].id]?this.pointers[0].prevPosition:this.pointers[0].position,e=this.movedState[this.pointers[1].id]?this.pointers[1].prevPosition:this.pointers[1].position;return(t.y+e.y)/2}get movementCenterX(){return this.centerX-this.prevCenterX}get movementCenterY(){return this.centerY-this.prevCenterY}setRecongizedStateObject(t){return this.recongizedState=t,this}get state(){return this.recongizedState.state}set state(t){this.recongizedState.state=t}cancel(){return this.state=I5,this}}Object.assign(tv.prototype,fa);var Xa={};const zh=0,Ha=1,On=2,I5="IDLE",D5=Phaser.Utils.Objects.GetValue;class bT extends tv{constructor(t,e){super(t,e);var f=this,i={states:{IDLE:{enter:function(){f.prevDistance=void 0,f.scaleFactor=1}},BEGIN:{},RECOGNIZED:{enter:function(){f.emit("pinchstart",f)},exit:function(){f.emit("pinchend",f)}}},init:function(){this.state=sx},eventEmitter:!1};this.setRecongizedStateObject(new $n(i))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(D5(t,"threshold",0)),this}onDrag2Start(){this.scaleFactor=1,this.prevDistance=this.distanceBetween,this.state=rx,this.dragThreshold===0&&(this.state=Vh)}onDrag2End(){this.state=sx}onDrag2(){switch(this.state){case rx:if(this.pointers[0].getDistance()>=this.dragThreshold&&this.pointers[1].getDistance()>=this.dragThreshold){var t=this.distanceBetween;this.scaleFactor=t/this.prevDistance,this.prevDistance=t,this.state=Vh}break;case Vh:var t=this.distanceBetween;this.scaleFactor=t/this.prevDistance,this.emit("pinch",this),this.prevDistance=t;break}}get isPinched(){return this.state===Vh}setDragThreshold(t){return this.dragThreshold=t,this}}const sx="IDLE",rx="BEGIN",Vh="RECOGNIZED",B5=Phaser.Math.RotateAround;var ax=function(s,t,e,f){return B5(s,t,e,f),s.rotation+=f,s},b5=function(s,t,e,f){return f===void 0?f={}:f===!0&&(f=G5),e.getWorldPoint(s,t,f),f},G5={},N5=function(s,t){if(!this.isRotation)return this;t===void 0&&(t=this.pointers[0].camera);var e=this.movementCenterX,f=this.movementCenterY,i=b5(this.centerX,this.centerY,t,!0),n=i.x,o=i.y,r=this.rotation;if(Array.isArray(s))for(var a=s,l=0,h=a.length;l<h;l++)s=a[l],s.x+=e,s.y+=f,ax(s,n,o,r);else s.x+=e,s.y+=f,ax(s,n,o,r);return this};const Y5=Phaser.Utils.Objects.GetValue,id=Phaser.Math.Angle.WrapDegrees,ox=Phaser.Math.Angle.ShortestBetween,nd=Phaser.Math.RadToDeg,z5=Phaser.Math.DegToRad;class ev extends tv{constructor(t,e){super(t,e);var f=this,i={states:{IDLE:{enter:function(){f.prevAngle=void 0,f.angle=0}},BEGIN:{},RECOGNIZED:{enter:function(){f.emit("rotatestart",f)},exit:function(){f.emit("rotateend",f)}}},init:function(){this.state=hx},eventEmitter:!1};this.setRecongizedStateObject(new $n(i))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(Y5(t,"threshold",0)),this}onDrag2Start(){this.prevAngle=id(nd(this.angleBetween)),this.state=lx,this.dragThreshold===0&&(this.state=Uh)}onDrag2End(){this.state=hx}onDrag2(){switch(this.state){case lx:if(this.pointers[0].getDistance()>=this.dragThreshold&&this.pointers[1].getDistance()>=this.dragThreshold){var t=id(nd(this.angleBetween));this.angle=ox(this.prevAngle,t),this.prevAngle=t,this.state=Uh}break;case Uh:var t=id(nd(this.angleBetween));this.angle=ox(this.prevAngle,t),this.prevAngle=t,this.emit("rotate",this);break}}get isRotated(){return this.state===Uh}get rotation(){return z5(this.angle)}setDragThreshold(t){return this.dragThreshold=t,this}}var V5={spinObject:N5};Object.assign(ev.prototype,V5);const hx="IDLE",lx="BEGIN",Uh="RECOGNIZED",U5=Phaser.Utils.Objects.GetValue;var W5=function(s){var t=U5(s,"tap",void 0);if(t!==!1){var e=this._childrenInteractive;this._tap=new $l(this,t),this._tap.on("tap",function(f,i,n){zn(e.eventEmitter,`${e.eventNamePrefix}${f.tapsCount}tap`,e.targetSizers,f.worldX,f.worldY,n)},this)}};const X5=Phaser.Utils.Objects.GetValue;var H5=function(s){var t=X5(s,"press",void 0);if(t!==!1){var e=this._childrenInteractive;this._press=new kl(this,t),this._press.on("pressstart",function(f,i,n){zn(e.eventEmitter,`${e.eventNamePrefix}pressstart`,e.targetSizers,f.worldX,f.worldY,n)},this).on("pressend",function(f,i,n){zn(e.eventEmitter,`${e.eventNamePrefix}pressend`,e.targetSizers,f.worldX,f.worldY,n)},this)}};const $5=Phaser.Utils.Objects.GetValue;var k5=function(s){var t=$5(s,"swipe",void 0);if(t!==!1){t===void 0&&(t={}),t.hasOwnProperty("dir")||(t.dir="4dir");var e=this._childrenInteractive;this._swipe=new Fo(this,t),this._swipe.on("swipe",function(f,i,n){var o=f.left?"left":f.right?"right":f.up?"up":"down";zn(e.eventEmitter,`${e.eventNamePrefix}swipe${o}`,e.targetSizers,f.worldX,f.worldY,n)},this)}};const sd=Phaser.Utils.Objects.GetValue;var iv=function(s,t){return s.setInteractive(),s._childrenInteractive={targetSizers:sd(t,"targets",[s]),eventEmitter:sd(t,"eventEmitter",s),eventNamePrefix:sd(t,"inputEventPrefix","child.")},l5.call(s,t),d5.call(s,t),p5.call(s,t),x5.call(s,t),W5.call(s,t),H5.call(s,t),k5.call(s,t),s},K5=function(s){return iv(this,s),this},Z5=function(){for(var s=this.getAllChildren([this]),t=0,e=s.length;t<e;t++){var f=s[t];f.emit.apply(f,arguments)}return this},GT={getSizerConfig:zl,getChildPrevState:U3,pushIntoBounds:W3,drawBounds:tN,resolveWidth:kc,resolveChildrenWidth:lN,resolveHeight:Kc,getChildWidth:uN,getChildHeight:fN,getExpandedChildWidth:dN,getExpandedChildHeight:cN,getChildrenWidth:vN,getChildrenHeight:pN,addChildrenMap:Vm,addElement:Vm,removeChildrenMap:rN,getElement:aN,getAllChildrenSizers:gN,getChildrenSizers:mN,preLayout:Ro,layout:yN,runLayout:TN,layoutChildren:CN,runWidthWrap:OT,layoutBackgrounds:t5,postLayout:SN,setAnchor:EN,isInTouching:$N,pointToChild:ZN,setDraggable:e5,setChildrenInteractive:K5,broadcastEvent:Z5};Object.assign(GT,hN,nN,sN,QN,ON,IN,bN,VN,XN,n5,r5,o5,HN,xN);const Hr=Phaser.Utils.Objects.GetValue;class mr extends en{constructor(t,e,f,i,n,o){super(t,e,f,2,2),this.isRexSizer=!0,this.setMinSize(i,n),this.setName(Hr(o,"name","")),this.rexSizer={},this.space={},this.backgroundChildren=void 0,this.sizerChildren=void 0,this.childrenMap={},this.layoutedChildren=void 0;var r=Hr(o,"anchor",void 0);r&&this.setAnchor(r),this.setInnerPadding(Hr(o,"space",0)),this.setDraggable(Hr(o,"draggable",!1)),this.setSizerEventsEnable(Hr(o,"sizerEvents",!1)),this.setDirty(!0),Hr(o,"enableLayer",!1)&&this.enableLayer()}destroy(t){if(!!this.scene){if(t)for(var e=this.getAllChildrenSizers([this]),f=0,i=e.length;f<i;f++)e[f].sizerEventsEnable=!1;super.destroy(t),Is(this.backgroundChildren),Is(this.sizerChildren),this.childrenMap=void 0,this.space=void 0,this.rexSizer=void 0,this.layoutedChildren=void 0}}setMinSize(t,e){return this.setMinWidth(t).setMinHeight(e),this}setMinWidth(t){return t==null&&(t=0),this.minWidth=t,this}setMinHeight(t){return t==null&&(t=0),this.minHeight=t,this}setDirty(t){return t===void 0&&(t=!0),this.dirty=t,this}setSizerEventsEnable(t){return t===void 0&&(t=!0),this.sizerEventsEnable=t,this}get ignoreLayout(){return this.rexSizer.hidden||!this.dirty}get childrenWidth(){return this._childrenWidth===void 0&&(this._childrenWidth=this.getChildrenWidth()),this._childrenWidth}get childrenHeight(){return this._childrenHeight===void 0&&(this._childrenHeight=this.getChildrenHeight()),this._childrenHeight}get left(){return this.x-ae(this)*this.originX}set left(t){this.x+=t-this.left}alignLeft(t){return this.left=t,this}get right(){return this.left+ae(this)}set right(t){this.x+=t-this.right}alignRight(t){return this.right=t,this}get centerX(){return this.left+ae(this)/2}set centerX(t){this.x+=t-this.centerX}alignCenterX(t){return this.centerX=t,this}get top(){return this.y-qt(this)*this.originY}set top(t){this.y+=t-this.top}alignTop(t){return this.top=t,this}get bottom(){return this.top+qt(this)}set bottom(t){this.y+=t-this.bottom}alignBottom(t){return this.bottom=t,this}get centerY(){return this.top+qt(this)/2}set centerY(t){this.y+=t-this.centerY}alignCenterY(t){return this.centerY=t,this}get innerLeft(){return this.left+this.space.left}get innerRight(){return this.right-this.space.right}get innerTop(){return this.top+this.space.top}get innerBottom(){return this.bottom-this.space.bottom}get innerWidth(){return this.width-this.space.left-this.space.right}get innerHeight(){return this.height-this.space.top-this.space.bottom}get minInnerWidth(){var t=this.minWidth-this.space.left-this.space.right;return Math.max(t,0)}get minInnerHeight(){var t=this.minHeight-this.space.top-this.space.bottom;return Math.max(t,0)}}Object.assign(mr.prototype,GT);var J5=function(){if(this.rexSizer.hidden)return 0;var s=0,t=this.sizerChildren,e,f,i;for(var n in t)e=t[n],f=e.rexSizer.padding,i=this.getChildWidth(e)+f.left+f.right,s=Math.max(i,s);return s+this.space.left+this.space.right},Q5=function(){if(this.rexSizer.hidden)return 0;var s=0,t=this.sizerChildren,e,f,i;for(var n in t)e=t[n],i=e.isRexSizer?Math.max(e.minHeight,e.childrenHeight):e.minHeight!==void 0?e.minHeight:qt(e),f=e.rexSizer.padding,i+=f.top+f.bottom,s=Math.max(i,s);return s+this.space.top+this.space.bottom},j5=function(s,t){t===void 0&&(t=this.width);var e,f=s.rexSizer;if(f.expandWidth){var i=t-this.space.left-this.space.right,n=f.padding;e=i-n.left-n.right}return e},q5=function(s,t){t===void 0&&(t=this.height);var e,f=s.rexSizer;if(f.expandHeight){var i=t-this.space.top-this.space.bottom,n=f.padding;e=i-n.top-n.bottom}return e},_5=function(s){s===void 0&&(s=[]);var t=this.sizerChildren,e;for(var f in t)e=t[f],e.isRexSizer&&s.push(e);return s},nv=function(s,t){s.width<s.childrenWidth&&console.warn(`Layout width error: Parent=${t.constructor.name}, Child=${s.constructor.name}`),s.height<s.childrenHeight&&console.warn(`Layout height error: Parent=${t.constructor.name}, Child=${s.constructor.name}`)},tY=function(){var s,t,e,f=this.innerLeft,i=this.innerTop,n=this.innerWidth,o=this.innerHeight,r,a,l,h,u,v,d=this.sizerChildren;for(var c in d)s=d[c],!s.rexSizer.hidden&&(t=s.rexSizer,e=t.padding,Lo.call(this,s),s.isRexSizer?(s.runLayout(this,this.getExpandedChildWidth(s),this.getExpandedChildHeight(s)),nv(s,this)):(u=void 0,v=void 0,t.expandWidth&&(u=n-e.left-e.right),t.expandHeight&&(v=o-e.top-e.bottom),Ys(s,u,v)),r=f+e.left,l=n-e.left-e.right,a=i+e.top,h=o-e.top-e.bottom,wo.call(this,s,r,a,l,h,t.align,t.alignOffsetX,t.alignOffsetY))};const ux=Phaser.Utils.Objects.IsPlainObject,Rn=Phaser.Utils.Objects.GetValue,fx=Phaser.Display.Align.CENTER,eY=Phaser.Utils.String.UUID;var iY=function(s,t,e,f,i,n,o,r,a){if(Oo.call(this,s),ux(t)){var h=t;t=Rn(h,"key",void 0),e=Rn(h,"align",fx),r=Rn(h,"offsetX",0),a=Rn(h,"offsetY",0),f=Rn(h,"padding",0),i=Rn(h,"expand",!0),s.isRexSizer||(n=Rn(h,"minWidth",s._minWidth),o=Rn(h,"minHeight",s._minHeighted))}var l=t!==void 0;l||(t=eY()),typeof e=="string"&&(e=Vl[e]),e===void 0&&(e=fx),r===void 0&&(r=0),a===void 0&&(a=0),f===void 0&&(f=0),i===void 0&&(i=!0),s.isRexSizer||(n===void 0&&(n=s._minWidth),o===void 0&&(o=s._minHeight));var h=this.getSizerConfig(s);return h.align=e,h.alignOffsetX=r,h.alignOffsetY=a,h.padding=ca(f),ux(i)?(h.expandWidth=Rn(i,"width",!1),h.expandHeight=Rn(i,"height",!1)):(h.expandWidth=i,h.expandHeight=i),s.isRexSizer||(h.expandWidth&&(s.minWidth=n===void 0?ae(s):n),h.expandHeight&&(s.minHeight=o===void 0?qt(s):o)),this.sizerChildren.hasOwnProperty(t)&&this.sizerChildren[t].destroy(),this.sizerChildren[t]=s,l&&this.addChildrenMap(t,s),this},nY={add:iY};const sY=Phaser.Utils.Array.Remove,rY=en.prototype.remove;var Kl=function(s,t){return this.isBackground(s)&&sY(this.backgroundChildren,s),rY.call(this,s,t),!t&&this.sizerEventsEnable&&(s.emit("sizer.remove",s,this),this.emit("remove",s,this)),this};const aY=en.prototype.clear;var Zl=function(s){this.backgroundChildren&&(this.backgroundChildren.length=0);var t=!s&&this.sizerEventsEnable,e;if(t&&(e=this.getChildren([])),aY.call(this,s),t)for(var f,i=0,n=e.length;i<n;i++)f=e[i],f.emit("sizer.remove",f,this),this.emit("remove",f,this);return this},oY={remove(s,t){var e;if(typeof s=="string"){if(e=s,s=this.sizerChildren[e],!s)return this}else{if(this.getParentSizer(s)!==this)return this;e=this.childToKey(s)}return e&&(delete this.sizerChildren[e],this.childrenMap.hasOwnProperty(e)&&delete this.childrenMap[e]),Kl.call(this,s,t),this},removeAll(s){for(var t in this.sizerChildren)this.remove(t,s);return this},clear(s){for(var t in this.sizerChildren)delete this.sizerChildren[t],this.childrenMap.hasOwnProperty(t)&&delete this.childrenMap[t];return Zl.call(this,s),this}},NT={getChildrenWidth:J5,getChildrenHeight:Q5,getExpandedChildWidth:j5,getExpandedChildHeight:q5,getChildrenSizers:_5,layoutChildren:tY};Object.assign(NT,nY,oY);var Jl=function(s,t){if(Array.isArray(s))return s.indexOf(t);for(var e in s)if(s[e]===t)return e;return null};const dx=Phaser.Utils.Objects.IsPlainObject,$r=Phaser.Utils.Objects.GetValue;class Sn extends mr{constructor(t,e,f,i,n,o){dx(e)?(o=e,e=$r(o,"x",0),f=$r(o,"y",0),i=$r(o,"width",void 0),n=$r(o,"height",void 0)):dx(i)&&(o=i,i=$r(o,"width",void 0),n=$r(o,"height",void 0)),super(t,e,f,i,n,o),this.type="rexOverlapSizer",this.sizerChildren={},this.addChildrenMap("items",this.sizerChildren)}childToKey(t){if(typeof t=="string"){var e=t;if(this.sizerChildren.hasOwnPropery(e))return e}else return Jl(this.sizerChildren,t);return null}}Object.assign(Sn.prototype,NT);var hY=Phaser.Math.Distance.Between,vl=function(s,t,e){var f=s.width/2;return hY(f,f,t,e)<=f};const lY=Phaser.Math.Angle.Between,uY=Phaser.Math.Angle.Normalize;var cx=function(s,t,e){if(!!this.enable&&!!s.isDown){var f=this.sizerChildren.knob;if(!!vl(f,t,e)){var i=f.width/2,n=f.startAngle,o=lY(i,i,t,e),r=f.anticlockwise?n-o:o-n,a=uY(r)/(2*Math.PI);this.stopEaseValue(),this.easeValueDuration===0||Math.abs(this.value-a)<.1?this.value=a:this.easeValueTo(a)}}},fY=function(){var s=this.sizerChildren.knob;s.setInteractive().on("pointerdown",cx,this).on("pointermove",cx,this)};const vx=Phaser.Math.Angle.Between,dY=Phaser.Math.Angle.Wrap;var cY=function(s,t,e){if(!(!this.enable||this.panPointer)){var f=this.sizerChildren.knob;!vl(f,t,e)||YT.call(this,s)}},vY=function(s,t,e){if(!!this.enable&&!!s.isDown){var f=this.sizerChildren.knob;switch(this.panState){case sv:vl(f,t,e)&&YT.call(this,s);break;case VT:vl(f,t,e)?gY.call(this):zT.call(this);break}}},pY=function(s,t,e){!this.enable||this.panPointer!==s||zT.call(this)},YT=function(s){this.panPointer=s,this.panState=VT},zT=function(){this.panPointer=void 0,this.panState=sv},gY=function(){var s=this.panPointer.prevPosition,t=this.panPointer.position,e=this.sizerChildren.knob,f=vx(e.x,e.y,s.x,s.y),i=vx(e.x,e.y,t.x,t.y),n=e.anticlockwise?f-i:i-f,o=dY(n)/(Math.PI*2);this.stopEaseValue(),this.value+=o};const sv=0,VT=1;var mY=function(){var s=this.sizerChildren.knob;s.setInteractive().on("pointerdown",cY,this).on("pointermove",vY,this).on("pointerup",pY,this),this.panPointer=void 0,this.panState=sv},xY=function(s,t){return this.textFormatCallback=s,this.textFormatCallbackScope=t,this},UT=function(s){s===void 0&&(s=this.value);var t;return this.textFormatCallbackScope?t=this.textFormatCallback(s):t=this.textFormatCallback.call(this.textFormatCallbackScope,s),t},yY=function(){var s=this.sizerChildren.text;return s&&this.textFormatCallback&&(s.setText(UT.call(this)),s.layout&&s.layout()),this},TY={setTextFormatCallback:xY,getFormatText:UT,updateText:yY};const Je=Phaser.Utils.Objects.GetValue,CY=Phaser.Math.Linear,px=Phaser.Math.Percent,SY=Phaser.Math.Snap.To;class Ql extends Sn{constructor(t,e){e===void 0&&(e={}),super(t,e),this.type="rexKnob",this.eventEmitter=Je(e,"eventEmitter",this);var f=Je(e,"background",void 0),i=Je(e,"text",void 0);f&&this.addBackground(f),i&&(e.textColor=void 0,e.textStrokeColor=void 0,this.setTextFormatCallback(Je(e,"textFormatCallback",void 0),Je(e,"textFormatCallbackScope",void 0)));var n=new Yl(t,e);n.setDepth(Je(e,"knobDepth",0)),n._value=-1,t.add.existing(n),this.add(n,"knob"),i&&(this.add(i,"text","center",0,!1),t.children.moveBelow(n,i)),this.addChildrenMap("background",f),this.addChildrenMap("knob",n),this.addChildrenMap("text",i);var o=Je(e,"valuechangeCallback",null);if(o!==null){var r=Je(e,"valuechangeCallbackScope",void 0);this.eventEmitter.on("valuechange",o,r)}this.setEnable(Je(e,"enable",void 0)),this.setEaseValuePropName("value").setEaseValueDuration(Je(e,"easeValue.duration",0)).setEaseValueFunction(Je(e,"easeValue.ease","Linear")),this.setGap(Je(e,"gap",void 0)),this.setValue(Je(e,"value",0),Je(e,"min",void 0),Je(e,"max",void 0));var a=Je(e,"input",0);switch(typeof a=="string"&&(a=EY[a]),a){case 0:mY.call(this);break;case 1:fY.call(this);break}}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}setGap(t){return this.gap=t,this}get value(){return this.sizerChildren.knob.value}set value(t){this.gap!==void 0&&(t=SY(t,this.gap));var e=this.value;this.sizerChildren.knob.value=t;var f=this.value;e!==f&&(this.updateText(),this.eventEmitter.emit("valuechange",f,e,this.eventEmitter))}setValue(t,e,f){return t==null?this:(e!==void 0&&(t=px(t,e,f)),this.value=t,this)}addValue(t,e,f){return e!==void 0&&(t=px(t,e,f)),this.value+=t,this}getValue(t,e){var f=this.value;return t!==void 0&&(f=CY(t,e,f)),f}}const EY={pan:0,drag:0,click:1,none:-1};Object.assign(Ql.prototype,TY,Ao);yt.register("knob",function(s){var t=new Ql(this.scene,s);return this.scene.add.existing(t),t});Ct(window,"RexPlugins.UI.Knob",Ql);const PY={arc:Nl,circle:Kd,curve:T3,ellipse:C3,line:S3,lines:I3,rectangle:B3,triangle:G3},gx=Phaser.Utils.Objects.GetValue,MY=Phaser.Utils.Objects.IsPlainObject,AY=function(){for(var s=this.getShapes(),t=0,e=s.length;t<e;t++)s[t].lineStyle().fillStyle()};var OY={createShape(s,t){var e=PY[s],f=new e;return t&&f.setName(t),f},buildShapes(s){var t=gx(s,"create",void 0);if(MY(t)){var e=t;for(var f in e){var i=e[f];switch(typeof i){case"number":for(var n=0;n<i;n++)this.addShape(this.createShape(f));break;case"string":this.addShape(this.createShape(f,i));break;default:for(var o=i,n=0,r=o.length;n<r;n++)this.addShape(this.createShape(f,o[n]));break}}}else if(Array.isArray(t))for(var e=t,n=0,r=e.length;n<r;n++){var a=e[n];this.addShape(this.createShape(a.type,a.name))}else typeof t=="function"&&t.call(this);this.setUpdateShapesCallback(gx(s,"update"))},setUpdateShapesCallback(s){return s===void 0&&(s=AY),this.dirty=this.dirty||this.updateCallback!==s,this.updateCallback=s,this},updateShapes(){this.updateCallback.call(this)}};const $a=Phaser.Utils.Objects.GetValue,RY=Phaser.Utils.Objects.IsPlainObject;class jl extends Dc{constructor(t,e,f,i,n,o){RY(e)&&(o=e,e=$a(o,"x",0),f=$a(o,"y",0),i=$a(o,"width",2),n=$a(o,"height",2)),super(t,e,f,i,n),this.type=$a(o,"type","rexCustomShapes"),this.buildShapes(o)}}Object.assign(jl.prototype,OY);yt.register("customShapes",function(s,t,e,f,i){var n=new jl(this.scene,s,t,e,f,i);return this.scene.add.existing(n),n});Ct(window,"RexPlugins.UI.CustomShapes",jl);const Ln=Phaser.Utils.Objects.GetValue,LY=Phaser.Utils.Objects.IsPlainObject,wY=Phaser.Math.Clamp,FY=Phaser.Math.Linear,mx=Phaser.Math.Percent;class rv extends jl{constructor(t,e,f,i,n,o){LY(e)&&(o=e,e=Ln(o,"x",0),f=Ln(o,"y",0),i=Ln(o,"width",2),n=Ln(o,"height",2)),o===void 0&&(o={}),o.type||(o.type="rexCustomProgress"),super(t,e,f,i,n,o),this.eventEmitter=Ln(o,"eventEmitter",this);var r=Ln(o,"valuechangeCallback",null);if(r!==null){var a=Ln(o,"valuechangeCallbackScope",void 0);this.eventEmitter.on("valuechange",r,a)}this.setEaseValuePropName("value").setEaseValueDuration(Ln(o,"easeValue.duration",0)).setEaseValueFunction(Ln(o,"easeValue.ease","Linear")),this.setValue(Ln(o,"value",0))}get centerX(){return this.width/2}get centerY(){return this.height/2}get radius(){return Math.min(this.centerX,this.centerY)}get value(){return this._value}set value(t){t=wY(t,0,1);var e=this._value,f=e!=t;this.dirty=this.dirty||f,this._value=t,f&&this.eventEmitter.emit("valuechange",this._value,e,this.eventEmitter)}setValue(t,e,f){return t==null?this:(e!==void 0&&(t=mx(t,e,f)),this.value=t,this)}addValue(t,e,f){return e!==void 0&&(t=mx(t,e,f)),this.value+=t,this}getValue(t,e){var f=this.value;return t!==void 0&&(f=FY(t,e,f)),f}}Object.assign(rv.prototype,Ao);yt.register("customProgress",function(s,t,e,f,i){var n=new rv(this.scene,s,t,e,f,i);return this.scene.add.existing(n),n});Ct(window,"RexPlugins.UI.CustomProgress",rv);var IY={setTransitionStartCallback(s,t){return this.onStartCallback=s,this.onStartCallbackScope=t,this},setTransitionProgressCallback(s,t){return this.onProgressCallback=s,this.onProgressCallbackScope=t,this},setTransitionCompleteCallback(s,t){return this.onCompleteCallback=s,this.onCompleteCallbackScope=t,this}};const DY=Phaser.Utils.Objects.IsPlainObject,Zi=Phaser.Utils.Objects.GetValue;var BY={out:0,in:1},bY={setTransitionDirection(s){return typeof s=="string"&&(s=BY[s]),this.dir=s,this},setDuration(s){return this.duration=s,this},setEaseFunction(s){return this.easeFunction=s,this},setNextTexture(s,t){return this.nextImage.setTexture(s,t),this},transit(s,t){if(this.isRunning&&(this.ignoreCompleteEvent=!0,this.stop(),this.ignoreCompleteEvent=!1),DY(s)){var e=s;s=Zi(e,"key",void 0),t=Zi(e,"frame",void 0),this.setDuration(Zi(e,"duration",this.duration)).setEaseFunction(Zi(e,"ease",this.easeFunction)).setTransitionDirection(Zi(e,"dir",this.dir));var f=Zi(e,"mask",void 0);f&&this.setMaskGameObject(f),this.setMaskEnable(f===!0);var i=Zi(e,"onStart",void 0),n=Zi(e,"onProgress",void 0),o=Zi(e,"onComplete",void 0);(i!==void 0||n!==void 0||o!==void 0)&&this.setTransitionStartCallback(i,Zi(e,"onStartScope",void 0)).setTransitionProgressCallback(n,Zi(e,"onProgressScope",void 0)).setTransitionCompleteCallback(o,Zi(e,"onCompleteScope",void 0))}return this.setNextTexture(s,t),this.start(),this},start(){return this.easeValueTask===void 0&&(this.easeValueTask=new Bl(this,{eventEmitter:null})),this.easeValueTask.restart({key:"t",from:0,to:1,duration:this.duration,ease:this.easeFunction}),this},pause(){return this.easeValueTask&&this.easeValueTask.pause(),this},resume(){return this.easeValueTask&&this.easeValueTask.resume(),this},stop(){return this.easeValueTask&&this.easeValueTask.stop(),this.setT(1),this}},xx=function(s,t,e,f,i){switch(this.clear().fillStyle(16777215),this.shape){case 1:var n=Math.min(s,t)/2;this.fillCircle(-s*(f-.5),-t*(i-.5),n+e);break;default:this.fillRect(-(s*f)-e,-(t*i)-e,s+2*e,t+2*e);break}};const GY=Phaser.GameObjects.Graphics;class qd extends GY{constructor(t,e,f){e===void 0&&(e=0),typeof e=="string"&&(e=NY[e]),f===void 0&&(f=0),super(t.scene),this.parent=t,this.shape=e,this.padding=f,this.setPosition().resize().setVisible(!1)}destroy(){return this.parent=void 0,super.destroy(),this}setPosition(t,e){var f=this.parent;return t===void 0&&(t=f.x),e===void 0&&(e=f.y),super.setPosition(t,e),this}resize(t,e,f){var i=this.parent;return t===void 0&&(t=i.width),e===void 0&&(e=i.height),f===void 0&&(f=this.padding),this.widthSave===t&&this.heightSave===e&&this.paddingSave===f?this:(this.widthSave=t,this.heightSave=e,this.paddingSave=f,this.originXSave=i.originX,this.originYSave=i.originY,xx.call(this,t,e,f,i.originX,i.originY),this)}setOrigin(t,e){e===void 0&&(e=t);var f=this.parent;return t===void 0&&(t=f.originX),e===void 0&&(e=f.originY),this.originXSave===t&&this.originYSave===e?this:(this.originXSave=t,this.originYSave=e,xx.call(this,this.widthSave,this.heightSave,this.paddingSave,t,e),this)}}const NY={rectangle:0,circle:1};var YY={setMaskGameObject(s){if(!s)return this.removeMaskGameObject(),this;if(this.maskGameObject){if(s===!0&&this.maskGameObject instanceof qd)return this;if(this.maskGameObject===s)return this;this.removeMaskGameObject()}return s===!0&&(s=new qd(this)),this.maskGameObject=s,this.maskGameObject.resize(this.width,this.height).setOrigin(this.originX,this.originY).setPosition(0,0).setScale(1).setVisible(!1),this.addLocal(this.maskGameObject),this.childrenMask=this.maskGameObject.createGeometryMask(),this},removeMaskGameObject(){return this.backImage.clearMask(),this.frontImage.clearMask(),this.childrenMask=void 0,this.remove(this.maskGameObject,!0),this.maskGameObject=void 0,this},setImageMaskEnable(s,t,e){return t===void 0&&(t=!0),this.childrenMask||this.setMaskGameObject(!0),t?(s.setMask(this.childrenMask),e&&this.childrenMask.setInvertAlpha()):s.clearMask(),this},setCurrentImageMaskEnable(s,t){return this.setImageMaskEnable(this.currentImage,s,t),this},setNextImageMaskEnable(s,t){return this.setImageMaskEnable(this.nextImage,s,t),this},setCellImagesMaskEnable(s,t){for(var e=this.getCellImages(),f=0,i=e.length;f<i;f++)this.setImageMaskEnable(e[f],s,t);return this},setMaskEnable(s,t){return this.setImageMaskEnable(this.backImage,s,t),this.setImageMaskEnable(this.frontImage,s,t),this.setCellImagesMaskEnable(s,t),this}},zY=function(s,t){t===void 0&&(t=",");var e;return s==="__BASE"?e=function(f,i){return`${f}${t}${i}`}:e=function(f,i){return`${s}_${f}${t}${i}`},e},VY=function(s,t,e,f,i,n){e==null&&(e="__BASE"),n||(n=zY(e,n));for(var o=s.sys.textures.get(t),r=o.source[0].isRenderTexture,a=typeof e=="object"?e:o.get(e),l=a.width,h=a.height,u,v,d,c=l/f,p=h/i,g=0,m=0,x=0;x<i;x++){g=0;for(var y=0;y<f;y++)d=n(y,x),u=g+a.cutX,r?v=h-m-p+a.cutY:v=m+a.cutY,o.add(d,0,u,v,c,p),g+=c;m+=p}return{getFrameNameCallback:n,cellWidth:c,cellHeight:p,columns:f,rows:i}};const ss=Phaser.Utils.Objects.GetValue,UY=Phaser.GameObjects.Image,WY=Phaser.Utils.Objects.IsPlainObject,XY=Phaser.Math.RotateAround;var HY=function(s,t,e,f){WY(t)&&(f=t,t=ss(f,"columns",1),e=ss(f,"rows",1));var i=ss(f,"onCreateImage");if(!i){var n=ss(f,"ImageClass",UY);i=function(X,k,K){return new n(X,0,0,k,K)}}for(var o=ss(f,"originX",.5),r=ss(f,"originY",.5),a=ss(f,"add",!0),l=ss(f,"align",a),h=ss(f,"objectPool",void 0),u=s.scene,v=s.texture,d=s.frame,c=VY(u,v,d,t,e),p=c.getFrameNameCallback,g=s.scaleX,m=s.scaleY,x=s.rotation,y=s.getTopLeft(),T=y.x,C=y.y,S=[],E=c.cellWidth*g,M=c.cellHeight*m,O=0;O<e;O++)for(var L=0;L<t;L++){var R,w=p(L,O);h&&h.length>0?R=h.pop().setTexture(v,w):R=i(u,v,w),a&&u.add.existing(R);var D=T+E*L,B=C+M*O,N=D+o*E,z=B+r*M;l&&(R.setOrigin(o,r).setPosition(N,z).setScale(g,m).setRotation(x),XY(R,T,C,x)),S.push(R)}return S},$Y={gridCutImage(s,t,e,f){f===void 0&&(f={}),f.objectPool=this.imagesPool;for(var i=HY(s,t,e,f),n,o=0,r=i.length;o<r;o++)n=i[o],n.setVisible(!0),this.add(n);return this.cellImages=i,this.setChildLocalVisible(s,!1),i},gridCutCurrentImage(s,t,e){return this.gridCutImage(this.currentImage,s,t,e)},gridCutNextImage(s,t,e){return this.gridCutImage(this.nextImage,s,t,e)},getCellImages(){return this.cellImages},freeCellImages(){if(this.cellImages.length===0)return this;for(var s=this.cellImages[0].texture,t=this.cellImages,e,f,i=0,n=t.length;i<n;i++)e=t[i],this.setChildLocalAlpha(e,1).setChildLocalScale(e,1).setChildLocalVisible(e,!1),e.clearMask(),f=e.frame.name,e.setTexture(),s.remove(f);return this.imagesPool.push(...t),t.length=0,this}},kY={setFlipX(s){return this.flipX=s,this},setFlipY(s){return this.flipY=s,this},toggleFlipX(){return this.flipX=!this.flipX,this},toggleFlipY(){return this.flipY=!this.flipY,this},setFlip(s,t){return this.flipX=s,this.flipY=t,this},resetFlip(){return this.flipX=!1,this.flipY=!1,this}},WT={};Object.assign(WT,IY,bY,YY,$Y,kY);var KY=function(s,t,e,f){},ZY=function(s,t,e,f){s.setChildLocalAlpha(t,1-f).setChildLocalAlpha(e,f)},JY=function(s,t,e,f){s.setChildLocalAlpha(t,1)};const yx=Phaser.Utils.Objects.IsPlainObject,be=Phaser.Utils.Objects.GetValue,QY=Phaser.Math.Clamp;class av extends en{constructor(t,e,f,i,n,o){yx(e)?(o=e,e=be(o,"x",0),f=be(o,"y",0),i=be(o,"key",void 0),n=be(o,"frame",void 0)):yx(n)&&(o=n,n=void 0);var r=be(o,"back",void 0),a=be(o,"front",void 0);r||(r=t.add.image(e,f,i,n)),a||(a=t.add.image(e,f,i,n));var l=be(o,"width",a.width),h=be(o,"height",a.height);super(t,e,f,l,h),r.setVisible(!1),this.addMultiple([r,a]),this.type="rexTransitionImage",this.backImage=r,this.frontImage=a,this.maskGameObject=void 0,this.cellImages=[],this.imagesPool=[];var u=be(o,"onStart",void 0),v=be(o,"onProgress",void 0),d=be(o,"onComplete",void 0),c=be(o,"dir",0);u===void 0&&v===void 0&&d===void 0&&(u=KY,v=ZY,d=JY,c=0),this.setTransitionStartCallback(u,be(o,"onStartScope",void 0)).setTransitionProgressCallback(v,be(o,"onProgressScope",void 0)).setTransitionCompleteCallback(d,be(o,"onCompleteScope",void 0)).setTransitionDirection(c).setDuration(be(o,"duration",1e3)).setEaseFunction(be(o,"ease","Linear"));var p=be(o,"mask",void 0);p&&this.setMaskGameObject(p),this.setMaskEnable(!1),this.ignoreCompleteEvent=!1}destroy(t){!this.scene||(this.childrenMask&&(this.childrenMask.destroy(),this.childrenMask=void 0),this.backImage=void 0,this.frontImage=void 0,this.maskGameObject=void 0,this.cellImages.length=0,this.imagesPool.length=0,super.destroy(t),this.onStartCallback=void 0,this.onStartCallbackScope=void 0,this.onProgressCallback=void 0,this.onProgressCallbackScope=void 0,this.onCompleteCallback=void 0,this.onCompleteCallbackScope=void 0,this.easeValueTask=void 0)}get currentImage(){return this.dir===0?this.frontImage:this.backImage}get nextImage(){return this.dir===0?this.backImage:this.frontImage}get texture(){return this.nextImage.texture}get frame(){return this.nextImage.frame}get flipX(){return this._flipX}set flipX(t){this._flipX!==t&&(this._flipX=t,this.backImage.setFlipX(t),this.frontImage.setFlipX(t))}get flipY(){return this._flipY}set flipY(t){this._flipY!==t&&(this._flipY=t,this.backImage.setFlipY(t),this.frontImage.setFlipY(t))}get t(){return this._t}set t(t){if(t=QY(t,0,1),this._t!==t){this._t=t;var e=this.currentImage,f=this.nextImage;if(t===0&&(this.setChildVisible(this.frontImage,!0).setChildVisible(this.backImage,!0),rd(this.onStartCallback,this.onStartCallbackScope,this,e,f,t)),rd(this.onProgressCallback,this.onProgressCallbackScope,this,e,f,t),t===1){rd(this.onCompleteCallback,this.onCompleteCallbackScope,this,e,f,t);var i=f.texture.key,n=f.frame.name;this.frontImage.setTexture(i,n),this.backImage.setTexture(i,n),this.setChildVisible(this.frontImage,!0).setChildVisible(this.backImage,!1).setMaskEnable(!1).freeCellImages()}t===1&&!this.ignoreCompleteEvent&&this.emit("complete")}}setT(t){return this.t=t,this}get isRunning(){return this.easeValueTask?this.easeValueTask.isRunning:!1}setOrigin(t,e){return super.setOrigin(t,e),this.backImage.setOrigin(t,e),this.frontImage.setOrigin(t,e),this.maskGameObject&&this.maskGameObject.setOrigin(t,e),this}setTexture(t,e){return this.frontImage.setTexture(t,e),this.backImage.setTexture(t,e).setVisible(!1),this}}var rd=function(s,t,e,f,i,n){!s||(t?s.call(t,e,f,i,n):s(e,f,i,n))};Object.assign(av.prototype,WT);yt.register("transitionImage",function(s,t,e,f,i){var n=new av(this.scene,s,t,e,f,i);return this.scene.add.existing(n),n});Ct(window,"RexPlugins.UI.TransitionImage",av);const jY=Phaser.GameObjects.Rectangle;class ov extends jY{constructor(t,e,f){super(t,0,0,2,2,e,1),this.setAlpha(f),this.setScrollFactor(0),this.boot()}boot(){var t=this.scene;t.sys.events.on("prerender",this.resize,this)}destroy(t){!this.scene||(this.scene.sys.events.off("prerender",this.resize,this),super.destroy(t))}get tint(){return this.fillColor}set tint(t){this.setFillStyle(t,this.fillAlpha)}resize(){var t=this.scene,e=t.sys.scale.gameSize,f=t.sys.cameras.main,i=e.width,n=e.height,o=1/f.zoom,r=i/2,a=n/2,l=i*o,h=n*o;(this.x!==r||this.y!==a)&&this.setPosition(r,a),(this.width!==l||this.height!==h)&&this.setSize(l,h).setOrigin(.5)}}yt.register("fullWindowRectangle",function(s,t){var e=new ov(this.scene,s,t);return this.scene.add.existing(e),e});Ct(window,"RexPlugins.UI.FullWindowRectangle",ov);const Tx=Phaser.Utils.Objects.GetValue;class hv extends He{constructor(t,e){super(t,{eventEmitter:!1}),this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.setHitAreaMode(Tx(t,"hitAreaMode",0)),this.setEnable(Tx(t,"enable",!0)),this}boot(){this.parent.on("pointerdown",function(t,e,f,i){i.stopPropagation()}).on("pointerup",function(t,e,f,i){i.stopPropagation()}).on("pointermove",function(t,e,f,i){i.stopPropagation()}).on("pointerover",function(t,e,f,i){i.stopPropagation()}).on("pointerout",function(t,e){e.stopPropagation()})}setHitAreaMode(t){typeof t=="string"&&(t=qY[t]);var e=this.parent;return e.input&&e.removeInteractive(),t===0?e.setInteractive():e.setInteractive({hitArea:{},hitAreaCallback:function(){return!0}}),this}setEnable(t){return t===void 0&&(t=!0),t?this.parent.setInteractive():this.parent.disableInteractive(),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}}var qY={default:0,fullWindow:1};const Cx=Phaser.Utils.Objects.GetValue;class lv extends ov{constructor(t,e){var f=Cx(e,"color",0),i=Cx(e,"alpha",.8);super(t,f,i),this.touchEventStop=new hv(this,{hitAreaMode:1})}}yt.register("cover",function(s){var t=new lv(this.scene,s);return this.scene.add.existing(t),t});Ct(window,"RexPlugins.UI.Cover",lv);var _Y=function(s){if(!window.Chart){var t=`Can not find chartjs! Load chartjs in preload stage.
scene.load.script('chartjs', 'https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.8.0/Chart.min.js');`;return console.error(t),this}return this.chart&&this.chart.destroy(),this.chart=new Chart(this.context,tz(this,s)),this},tz=function(s,t){t===void 0&&(t={}),t.options===void 0&&(t.options={});var e=t.options;e.responsive=!1,e.maintainAspectRatio=!1,e.hasOwnProperty("devicePixelRatio")||(e.devicePixelRatio=1);var f=!1;e.animation===void 0?e.animation={}:e.animation===!1&&(f=!0,e.animation={});var i=e.animation;f&&(i.duration=0);var n=i.onProgress;i.onProgress=function(r){n&&n(r),s.needRedraw()};var o=i.onComplete;return i.onComplete=function(r){o&&o(r),s.needRedraw()},t},ez=function(s){if(this.chart!==void 0)if(typeof s=="string"){for(var t=this.chart.data.datasets,e,f=0,i=t.length;f<i;f++)if(e=t[f],e.label===s)return e}else return this.chart.data.datasets[s]},iz=function(s,t){var e=this.getChartDataset(s);if(e!==void 0){if(typeof t=="string"){var f=this.chart.data.labels;if(t=f.indexOf(t),t===-1)return}return e.data[t]}},nz=function(s,t,e){if(this.chart===void 0)return this;var f=this.getChartDataset(s);if(typeof t=="string"){var i=this.chart.data.labels;if(t=i.indexOf(t),t===-1)return this}return f.data[t]=e,this},sz=function(){return this.chart===void 0?this:(this.chart.update(),this)};class uv extends Xn{constructor(t,e,f,i,n,o){super(t,e,f,i,n),this.type="rexChart",this.chart=void 0,o!==void 0&&this.setChart(o)}destroy(t){!this.scene||(this.chart&&(this.chart.destroy(),this.chart=void 0),super.destroy(t))}resize(t,e){if(t===this.width&&e===this.height)return this;if(super.resize(t,e),this.chart){var f=this.chart;f.height=this.canvas.height,f.width=this.canvas.width,f.aspectRatio=f.height?f.width/f.height:null,f.update()}return this}}var rz={setChart:_Y,getChartDataset:ez,getChartData:iz,setChartData:nz,updateChart:sz};Object.assign(uv.prototype,rz);yt.register("chart",function(s,t,e,f,i){var n=new uv(this.scene,s,t,e,f,i);return this.scene.add.existing(n),n});Ct(window,"RexPlugins.UI.Chart",uv);var az=function(s){if(this.rexSizer.hidden)return 0;s===void 0&&(s=!0);var t=0,e=this.sizerChildren,f,i,n;if(this.orientation===0)for(var o=0,r=e.length;o<r;o++)f=e[o],!f.rexSizer.hidden&&(f.rexSizer.proportion===0||s?n=this.getChildWidth(f):n=0,i=f.rexSizer.padding,n+=i.left+i.right,o>0&&(n+=this.space.item),t+=n);else for(var o=0,r=e.length;o<r;o++)f=e[o],f.hasOwnProperty("rexSizer")&&(f.rexSizer.hidden||(i=f.rexSizer.padding,n=this.getChildWidth(f)+i.left+i.right,t=Math.max(n,t)));return t+this.space.left+this.space.right},oz=function(s){if(this.rexSizer.hidden)return 0;s===void 0&&(s=!0);var t=0,e=this.sizerChildren,f,i,n;if(this.orientation===0)for(var o=0,r=e.length;o<r;o++)f=e[o],!f.rexSizer.hidden&&(i=f.rexSizer.padding,n=this.getChildHeight(f)+i.top+i.bottom,t=Math.max(n,t));else for(var o=0,r=e.length;o<r;o++)f=e[o],f.hasOwnProperty("rexSizer")&&(f.rexSizer.hidden||(f.rexSizer.proportion===0||s?n=this.getChildHeight(f):n=0,i=f.rexSizer.padding,n+=i.top+i.bottom,o>0&&(n+=this.space.item),t+=n));return t+this.space.top+this.space.bottom},hz=function(s,t){t===void 0&&(t=this.width);var e,f=s.rexSizer,i=f.padding;if(this.orientation===0)f.proportion>0&&this.proportionLength>0&&(e=f.proportion*this.proportionLength);else if(f.expand){var n=t-this.space.left-this.space.right;e=n-i.left-i.right}return e},lz=function(s,t){t===void 0&&(t=this.height);var e,f=s.rexSizer,i=f.padding;if(this.orientation===0){if(f.expand){var n=t-this.space.top-this.space.bottom;e=n-i.top-i.bottom}}else f.proportion>0&&this.proportionLength>0&&(e=f.proportion*this.proportionLength);return e},uz=function(s){s===void 0&&(s=[]);for(var t=this.sizerChildren,e,f=0,i=t.length;f<i;f++)e=t[f],e.isRexSizer&&s.push(e);return s},fz=function(){return this._childrenProportion=void 0,this.proportionLength=void 0,Ro.call(this),this};const dz=Phaser.Math.Wrap;var cz=function(){for(var s=this.sizerChildren,t,e,f,i=this.innerLeft,n=this.innerTop,o=this.innerWidth,r=this.innerHeight,a=i,l=n,h,u,v,d,c,p,g,m=this.startChildIndex,x=0,y=s.length;x<y;x++)m===0?g=x:g=dz(x+m,0,y),this.rtl&&(g=y-g-1),t=s[g],!t.rexSizer.hidden&&(e=t.rexSizer,f=e.padding,Lo.call(this,t),t.isRexSpace?(c=0,p=0):(c=this.getExpandedChildWidth(t),p=this.getExpandedChildHeight(t)),t.isRexSizer?(t.runLayout(this,c,p),nv(t,this)):Ys(t,c,p),c===void 0&&(c=ae(t)),p===void 0&&(p=qt(t)),this.orientation===0?(h=a+f.left,e.proportion===0||this.proportionLength===0?v=c:v=e.proportion*this.proportionLength,u=l+f.top,d=r-f.top-f.bottom):(h=a+f.left,v=o-f.left-f.right,u=l+f.top,e.proportion===0||this.proportionLength===0?d=p:d=e.proportion*this.proportionLength),wo.call(this,t,h,u,v,d,e.align),this.orientation===0?a+=v+f.left+f.right+this.space.item:l+=d+f.top+f.bottom+this.space.item)},vz=function(t){var t=kc.call(this,t);if(this.proportionLength===void 0&&this.orientation===0){var e=t-this.childrenWidth;e>0?(e=t-this.getChildrenWidth(!1),this.proportionLength=e/this.childrenProportion):this.proportionLength=0}return t},pz=function(s,e){var e=Kc.call(this,s,e);if(this.proportionLength===void 0&&this.orientation===1){var f=e-this.childrenHeight;f>0?(f=e-this.getChildrenHeight(!1),this.proportionLength=f/this.childrenProportion):this.proportionLength=0}return e};const gz=Phaser.GameObjects.Zone;class ql extends gz{constructor(t){super(t,0,0,1,1),this.isRexSpace=!0}}var mz=function(s,t){var e=this.sizerChildren;if(e.length===0)return-1;for(var f=-1,i=1/0,n=0,o=e.length;n<o;n++){var r=e[n],a;this.orientation===0?a=Math.abs(r.left-s):a=Math.abs(r.top-t),i>a&&(i=a,f=n)}var r=e[e.length-1],a;return this.orientation===0?a=Math.abs(r.right-s):a=Math.abs(r.bottom-t),i>a&&(i=a,f=n+1),f};const XT=Phaser.Utils.Objects.IsPlainObject,Ss=Phaser.Utils.Objects.GetValue,Sx=Phaser.Display.Align.CENTER,xz={min:0,full:-1};var ad=function(s,t,e,f,i,n,o,r,a){Oo.call(this,s);var l=s.isRexSpace,h=typeof t;if(t===null)return this;if(h!=="number"){if(h==="string")t=xz[t];else if(XT(t)){var u=t;t=Ss(u,"proportion",void 0),e=Ss(u,"align",Sx),f=Ss(u,"padding",0),i=Ss(u,"expand",!1),n=Ss(u,"key",void 0),o=Ss(u,"index",void 0),s.isRexSizer||(r=Ss(u,"minWidth",void 0),a=Ss(u,"minHeight",void 0))}}typeof e=="string"&&(e=Vl[e]),t===void 0&&(t=l?1:0),e===void 0&&(e=Sx),f===void 0&&(f=0),i===void 0&&(i=!1),r===void 0&&(l?r=0:s.isRexSizer||(r=s._minWidth)),a===void 0&&(l?a=0:s.isRexSizer||(a=s._minHeight));var u=this.getSizerConfig(s);return u.proportion=t,u.align=e,u.padding=ca(f),u.expand=i,o===void 0||o>=this.sizerChildren.length?this.sizerChildren.push(s):this.sizerChildren.splice(o,0,s),s.isRexSizer||(t>0&&(this.orientation===0?s.minWidth=r===void 0?ae(s):r:s.minHeight=a===void 0?qt(s):a),i&&(this.orientation===0?s.minHeight=a:s.minWidth=r)),n!==void 0&&this.addChildrenMap(n,s),this},yz={add:ad,addSpace(s){return this.insertSpace(void 0,s),this},insertSpace(s,t){return t===void 0&&(t=1),ad.call(this,new ql(this.scene),{proportion:t,minWidth:0,minHeight:0,index:s}),this},insert(s,t,e,f,i,n,o,r){return XT(e)&&(e.index=s),ad.call(this,t,e,f,i,n,o,s,r),this},insertAtPosition(s,t,e,f,i,n,o,r,a){var l=mz.call(this,s,t);return l===-1&&(l=void 0),this.insert(l,e,f,i,n,o,r,a),this}};const Tz=Phaser.Utils.Array.Remove;var Cz={remove(s,t){return this.getParentSizer(s)!==this?this:(Tz(this.sizerChildren,s),Kl.call(this,s,t),this)},removeAll(s){for(var t=this.sizerChildren.length-1;t>=0;t--)this.remove(this.sizerChildren[t],s);return this},clear(s){return this.sizerChildren.length=0,Zl.call(this,s),this}},HT={getChildrenWidth:az,getChildrenHeight:oz,getExpandedChildWidth:hz,getExpandedChildHeight:lz,getChildrenSizers:uz,preLayout:fz,layoutChildren:cz,resolveWidth:vz,resolveHeight:pz};Object.assign(HT,yz,Cz);var Sz=function(){for(var s=0,t=this.sizerChildren,e,f,i=0,n=t.length;i<n;i++)e=t[i],!e.rexSizer.hidden&&(f=e.rexSizer.proportion,f>0&&(s+=f));return s},Ez={x:0,h:0,horizontal:0,"left-to-right":0,y:1,v:1,vertical:1,"top-to-bottom":1},fv=function(s){return typeof s=="string"&&(s=Ez[s]),s};const od=Phaser.Utils.Objects.IsPlainObject,Ji=Phaser.Utils.Objects.GetValue;class Se extends mr{constructor(t,e,f,i,n,o,r){od(e)?(r=e,e=Ji(r,"x",0),f=Ji(r,"y",0),i=Ji(r,"width",void 0),n=Ji(r,"height",void 0),o=Ji(r,"orientation",0)):od(i)?(r=i,i=Ji(r,"width",void 0),n=Ji(r,"height",void 0),o=Ji(r,"orientation",0)):od(o)&&(r=o,o=Ji(r,"orientation",0)),o===void 0&&(o=0),super(t,e,f,i,n,r),this.type="rexSizer",this.sizerChildren=[],this.setOrientation(o),this.setItemSpacing(Ji(r,"space.item",0)),this.setStartChildIndex(Ji(r,"startChildIndex",0)),this.setRTL(Ji(r,"rtl",!1)),this.addChildrenMap("items",this.sizerChildren)}setOrientation(t){return this.orientation=fv(t),this}setItemSpacing(t){return this.space.item=t,this}setStartChildIndex(t){return this.startChildIndex=t,this}setRTL(t){return t===void 0&&(t=!0),this.rtl=t,this}get childrenProportion(){return this._childrenProportion===void 0&&(this._childrenProportion=Sz.call(this)),this._childrenProportion}}Object.assign(Se.prototype,HT);yt.register("sizer",function(s,t,e,f,i,n){var o=new Se(this.scene,s,t,e,f,i,n);return this.scene.add.existing(o),o});Ct(window,"RexPlugins.UI.Sizer",Se);var $T=function(){return Array.prototype.reduce.call(arguments,Pz,0)},Pz=function(s,t){return s+t},Mz=function(s){if(this.rexSizer.hidden)return 0;s===void 0&&(s=!0);for(var t=0,e,f=this.sizerChildren,i,n,o,r,a=0;a<this.columnCount;a++){if(r=this.columnProportions[a],e=0,r===0||s){for(var l=0;l<this.rowCount;l++)i=f[l*this.columnCount+a],i&&(i.rexSizer.hidden||(n=i.rexSizer.padding,o=this.getChildWidth(i)+n.left+n.right,e=Math.max(e,o)));t+=e}this.columnWidth[a]=e}var h=this.space,u=Math.max(h.indentLeftOdd,h.indentLeftEven);return t+$T(h.left,u,...h.column,h.right)},Az=function(s){if(this.rexSizer.hidden)return 0;s===void 0&&(s=!0);for(var t=0,e,f=this.sizerChildren,i,n,o,r,a=0;a<this.rowCount;a++){if(r=this.rowProportions[a],e=0,r===0||s){for(var l=0;l<this.columnCount;l++)i=f[a*this.columnCount+l],i&&(i.rexSizer.hidden||(o=i.isRexSizer?Math.max(i.minHeight,i.childrenHeight):i.hasOwnProperty("minHeight")?i.minHeight:qt(i),n=i.rexSizer.padding,o+=n.top+n.bottom,e=Math.max(e,o)));t+=e}this.rowHeight[a]=e}var h=this.space,u=Math.max(h.indentTopOdd,h.indentTopEven);return t+$T(h.top,u,...h.row,h.bottom)},Oz=function(s,t){var e,f=s.rexSizer;if(f.expand){var i=f.padding;e=t-i.left-i.right}return e},Rz=function(s,t){var e,f=s.rexSizer;if(f.expand){var i=f.padding;e=t-i.top-i.bottom}return e},Lz=function(s){s===void 0&&(s=[]);for(var t=this.sizerChildren,e,f=0,i=t.length;f<i;f++)e=t[f],e&&e.isRexSizer&&s.push(e);return s},wz=function(){return this._totalColumnProportions=void 0,this._totalRowProportions=void 0,this.proportionWidthLength=void 0,this.proportionHeightLength=void 0,Ro.call(this),this},Fz=function(){for(var s,t,e,f=this.innerLeft,i=this.innerTop,n,o=i,r,a,l,h,u,v,d=this.space.column,c=this.space.row,p=this.space.indentLeftOdd,g=this.space.indentLeftEven,m=this.space.indentTopOdd,x=this.space.indentTopEven,y,T,C,S,E=0;E<this.rowCount;E++){T=this.getRowHeight(E),C=E%2?g:p,n=f+C;for(var M=0;M<this.columnCount;M++){if(y=this.getColumnWidth(M),s=this.getChildAt(M,E),!s||s.rexSizer.hidden){n+=y+d[M];continue}Lo.call(this,s),u=this.getExpandedChildWidth(s,y),v=this.getExpandedChildHeight(s,T),s.isRexSizer?(s.runLayout(this,u,v),nv(s,this)):Ys(s,u,v),t=s.rexSizer,e=t.padding,r=n+e.left,l=y-e.left-e.right,S=M%2?x:m,a=o+S+e.top,h=T-e.top-e.bottom,wo.call(this,s,r,a,l,h,t.align),n+=y+d[M]}o+=T+c[E]}},Iz=function(t){var t=kc.call(this,t);if(this.proportionWidthLength===void 0){var e=this.totalColumnProportions;if(e>0){var f=t-this.getChildrenWidth(!1);f>=0&&(this.proportionWidthLength=f/e)}else this.proportionWidthLength=0}return t},Dz=function(s,e){var e=Kc.call(this,s,e);if(this.proportionHeightLength===void 0){var f=this.totalRowProportions;if(f>0){var i=e-this.getChildrenHeight(!1);i>=0&&(this.proportionHeightLength=i/f)}else this.proportionHeightLength=0}return e},Bz=function(s){var t,e,f;for(var i in this.sizerChildren)t=this.sizerChildren[i],t&&t.isRexSizer&&!t.ignoreLayout&&(f=this.getColumnWidth(parseInt(i)%this.columnCount),e=this.getExpandedChildWidth(t,f),e=t.resolveWidth(e),t.resolveChildrenWidth(e))},bz=function(s){var t,e,f;for(var i in this.sizerChildren)t=this.sizerChildren[i],!(!t||t.isRexSizer&&t.ignoreLayout||!t.runWidthWrap)&&(f=this.getColumnWidth(parseInt(i)%this.columnCount),e=this.getExpandedChildWidth(t,f),t.isRexSizer&&(e=t.resolveWidth(e)),t.runWidthWrap(e));return this};const Gz=Phaser.Utils.Objects.IsPlainObject,kr=Phaser.Utils.Objects.GetValue,Ex=Phaser.Display.Align.CENTER;var Px=function(s,t,e,f,i){if(typeof s=="number"||typeof t=="number")if(s===void 0){for(var n,o=0;o<f;o++)if(n=t*f+o,!e[n])return n}else if(t===void 0){for(var n,o=0;o<i;o++)if(n=o*f+s,!e[n])return n}else{var n=t*f+s;if(!e[n])return n}else if(t===!0){for(var n,o=0;o<f;o++)for(var r=0;r<i;r++)if(n=r*f+o,!e[n])return n}else for(var o=0,a=e.length;o<a;o++)if(!e[o])return o;return null},Nz=function(s,t,e,f,i,n,o){if(Oo.call(this,s),Gz(t)){var a=t;t=kr(a,"column",void 0),e=kr(a,"row",void 0),f=kr(a,"align",Ex),i=kr(a,"padding",0),n=kr(a,"expand",!1),o=kr(a,"key",void 0)}var r=Px(t,e,this.sizerChildren,this.columnCount,this.rowCount);if(r===null){if(typeof t=="number"&&typeof e=="number")return this;e===!0||typeof e=="number"?this.addEmptyColumn():this.addEmptyRow(),r=Px(t,e,this.sizerChildren,this.columnCount,this.rowCount)}typeof f=="string"&&(f=Vl[f]),f===void 0&&(f=Ex),i===void 0&&(i=0),n===void 0&&(n=!0);var a=this.getSizerConfig(s);return a.align=f,a.padding=ca(i),a.expand=n,this.sizerChildren[r]=s,o!==void 0&&this.addChildrenMap(o,s),this},Yz={add:Nz},qr=function(s,t,e,f){e===void 0&&(e=0),f===void 0&&(f=s.length-1);for(var i=e;i<=f;i++)s[i]=t;return s},zz={remove(s,t){if(this.getParentSizer(s)!==this)return this;var e=this.sizerChildren.indexOf(s);return e!==-1&&(this.sizerChildren[e]=null),Kl.call(this,s,t),this},removeAt(s,t,e){var f=this.getChildAt(s,t);return f&&this.remove(f,e),this},removeAll(s){for(var t=this.sizerChildren.length-1;t>=0;t--){var e=this.sizerChildren[t];!e||this.remove(e,s)}return this},clear(s){return qr(this.sizerChildren,null),Zl.call(this,s),this}};const Mx=Phaser.Utils.Objects.GetValue;var Vz=function(s,t,e,f,i){if(e===void 0&&(e=0),f===void 0&&(f=0),this.columnCount=s,this.rowCount=t,this.gridCount=s*t,this.sizerChildren===void 0?this.sizerChildren=[]:this.removeAll(),this.sizerChildren.length=s*t,qr(this.sizerChildren,null),this.columnProportions=[],this.columnProportions.length=s,typeof e=="number")qr(this.columnProportions,e);else for(var n=0;n<s;n++)this.columnProportions[n]=e[n]||0;if(this.rowProportions=[],this.rowProportions.length=t,typeof f=="number")qr(this.rowProportions,f);else for(var n=0;n<t;n++)this.rowProportions[n]=f[n]||0;this.columnWidth=[],this.columnWidth.length=s,this.rowHeight=[],this.rowHeight.length=t,this.space.column=[],this.space.column.length=s-1;var o=Mx(i,"column",0);if(typeof o=="number")qr(this.space.column,o);else for(var n=0,r=this.space.column.length;n<r;n++)this.space.column[n]=o[n]||0;this.space.row=[],this.space.row.length=t-1;var a=Mx(i,"row",0);if(typeof a=="number")qr(this.space.row,a);else for(var n=0,r=this.space.row.length;n<r;n++)this.space.row[n]=a[n]||0;return this},kT=function(s,t,e){t===void 0&&(t=this.rowProportions[0]||0),e===void 0&&(e=this.space.row[0]||0),this.rowCount+=1,this.gridCount+=this.columnCount;for(var f=[s*this.columnCount,0],i=0;i<this.columnCount;i++)f.push(null);return this.sizerChildren.splice.apply(this.sizerChildren,f),this.rowProportions.push(t),this.rowHeight.length+=1,this.space.row.splice(s,0,e),this},Uz=function(s,t){return kT.call(this,this.rowCount,s,t),this},KT=function(s,t,e){t===void 0&&(t=this.columnProportions[0]||0),e===void 0&&(e=this.space.column[0]||0),this.columnCount+=1,this.gridCount+=this.rowCount;for(var f=this.rowCount-1;f>=0;f--){var i=f*this.columnCount+s;this.sizerChildren.splice(i,0,null)}return this.columnProportions.push(t),this.columnWidth.length+=1,this.space.column.splice(s,0,e),this},Wz=function(s,t){return KT.call(this,this.columnCount,s,t),this},ZT={getChildrenWidth:Mz,getChildrenHeight:Az,getExpandedChildWidth:Oz,getExpandedChildHeight:Rz,getChildrenSizers:Lz,preLayout:wz,layoutChildren:Fz,resolveWidth:Iz,resolveHeight:Dz,resolveChildrenWidth:Bz,runWidthWrap:bz,resetGrid:Vz,inseryEmptyRow:kT,addEmptyRow:Uz,insertEmptyColumn:KT,addEmptyColumn:Wz};Object.assign(ZT,Yz,zz);var Xz=function(){for(var s=0,t,e=0;e<this.columnCount;e++)t=this.columnProportions[e],t>0&&(s+=t);return s},Hz=function(){for(var s=0,t,e=0;e<this.rowCount;e++)t=this.rowProportions[e],t>0&&(s+=t);return s};const Wh=Phaser.Utils.Objects.IsPlainObject,ue=Phaser.Utils.Objects.GetValue;class us extends mr{constructor(t,e,f,i,n,o,r,a,l,h){Wh(e)?(h=e,e=ue(h,"x",0),f=ue(h,"y",0),i=ue(h,"width",void 0),n=ue(h,"height",void 0),o=ue(h,"column",h.col||0),r=ue(h,"row",0),a=ue(h,"columnProportions",0),l=ue(h,"rowProportions",0)):Wh(i)?(h=i,i=ue(h,"width",void 0),n=ue(h,"height",void 0),o=ue(h,"column",h.col||0),r=ue(h,"row",0),a=ue(h,"columnProportions",0),l=ue(h,"rowProportions",0)):Wh(o)?(h=o,o=ue(h,"column",h.col||0),r=ue(h,"row",0),a=ue(h,"columnProportions",0),l=ue(h,"rowProportions",0)):Wh(a)&&(h=a,a=ue(h,"columnProportions",0),l=ue(h,"rowProportions",0)),super(t,e,f,i,n,h),this.type="rexGridSizer",this.resetGrid(o,r,a,l,ue(h,"space",void 0)),this.setIndentLeft(ue(h,"space.indentLeftOdd",0),ue(h,"space.indentLeftEven",0)),this.setIndentTop(ue(h,"space.indentTopOdd",0),ue(h,"space.indentTopEven",0)),this.addChildrenMap("items",this.sizerChildren);var u=ue(h,"createCellContainerCallback");if(u)for(var f=0,v=this.rowCount;f<v;f++)for(var e=0,d=this.columnCount;e<d;e++){var c={column:e,row:f},p=u(t,e,f,c);p&&this.add(p,c)}}destroy(t){!this.scene||(super.destroy(t),this.columnProportions=void 0,this.rowProportions=void 0,this.columnWidth=void 0,this.rowHeight=void 0)}setIndentLeft(t,e){return this.space.indentLeftOdd=t,this.space.indentLeftEven=e,this}setIndentTop(t,e){return this.space.indentTopOdd=t,this.space.indentTopEven=e,this}setColumnProportion(t,e){return t>=this.columnProportions.length?this:(this.columnProportions[t]=e,this)}setRowProportion(t,e){return t>=this.rowProportions.length?this:(this.rowProportions[t]=e,this)}get totalColumnProportions(){return this._totalColumnProportions===void 0&&(this._totalColumnProportions=Xz.call(this)),this._totalColumnProportions}get totalRowProportions(){return this._totalRowProportions===void 0&&(this._totalRowProportions=Hz.call(this)),this._totalRowProportions}getChildAt(t,e){return this.sizerChildren[e*this.columnCount+t]}childToGridIndex(t,e){if(!t)return null;var f=this.sizerChildren.indexOf(t);return f===-1?null:(e===void 0&&(e={}),e.x=f%this.columnCount,e.y=Math.floor(f/this.columnCount),e)}getColumnWidth(t){var e=this.columnProportions[t],f=e===0?this.columnWidth[t]:e*this.proportionWidthLength;return f}getRowHeight(t){var e=this.rowProportions[t],f=e===0?this.rowHeight[t]:e*this.proportionHeightLength;return f}}Object.assign(us.prototype,ZT);yt.register("gridSizer",function(s,t,e,f,i,n,o,r,a){var l=new us(this.scene,s,t,e,f,i,n,o,r,a);return this.scene.add.existing(l),l});Ct(window,"RexPlugins.UI.GridSizer",us);var $z=function(){return this.rexSizer.hidden?0:this.maxChildWidth+this.space.left+this.space.right},kz=function(){return this.rexSizer.hidden?0:this.widthWrapResult.height+this.space.top+this.space.bottom},Kz=function(s){s===void 0&&(s=[]);for(var t=this.sizerChildren,e,f=0,i=t.length;f<i;f++)e=t[f],e!==`
`&&e.isRexSizer&&s.push(e);return s},Zz=function(){return this._maxChildWidth=void 0,this._maxChildHeight=void 0,Ro.call(this),this},Jz=function(){for(var s=this.innerWidth,t=this.justifyPercentage,e=this.space.item,f=this.space.line,i=this.space.indentLeftOdd,n=this.space.indentLeftEven,o=this.space.indentTopOdd,r=this.space.indentTopEven,a,l,h,u=0,v,d,c=this.innerLeft,p=this.innerTop,g,m,x,y,T=this.widthWrapResult.lines,C,S,E,M,O=p,L=0,R=T.length;L<R;L++){switch(C=T[L],S=C.children,this.rtl&&S.reverse(),v=L%2?n:i,M=c+v,E=s-C.width,this.align){case 0:break;case 1:M+=E;break;case 2:M+=E/2;break;case 3:u=hd(s,E,t,S.length);break;case 4:u=hd(s,E,t,S.length),u===0&&(M+=E);break;case 5:u=hd(s,E,t,S.length),u===0&&(M+=E/2);break}for(var w=0,D=S.length;w<D;w++)a=S[w],!a.rexSizer.hidden&&(l=a.rexSizer,h=l.padding,Lo.call(this,a),g=M+h.left,w>0&&(g+=e),d=w%2?r:o,m=O+d+h.top,x=ae(a),y=qt(a),M=g+x+h.right+u,wo.call(this,a,g,m,x,y,l.align));O+=C.height+f}},hd=function(s,t,e,f){return t/s<=e?t/(f-1):0},Qz=function(s,t){t===void 0?t={lines:[],width:0,height:0}:(t.lines.length=0,t.width=0,t.height=0);for(var e=this.sizerChildren,f=this.space.item,i=this.space.line,n=this.space.indentLeftOdd,o=this.space.indentLeftEven,r=this.space.indentTopOdd,a=this.space.indentTopEven,l,h,u,v=0,d,c=t.lines,p=void 0,g,m=0,x=e.length;m<x;m++){if(l=e[m],l===`
`)l=void 0,h=0,g=!0;else{if(l.rexSizer.hidden)continue;l.isRexSizer&&l.layout(),h=jz(l),g=v<h||p===void 0}if(g){p&&(p.width=s-(v+f),t.width=Math.max(t.width,p.width),t.height+=p.height+i),p={children:[],height:0},c.push(p);var d=c.length%2?n:o;v=s-d}v-=h+f,l&&(p.children.push(l),u=qz(l),p.height=Math.max(p.height,u))}return p&&(p.width=s-(v+f),t.width=Math.max(t.width,p.width),t.height+=p.height),t.height+=Math.max(r,a),t},jz=function(s){var t=s.rexSizer.padding;return ae(s)+t.left+t.right},qz=function(s){var t=s.rexSizer.padding;return qt(s)+t.top+t.bottom},_z=function(s){var t=s-this.space.left-this.space.right;this.widthWrapResult=Qz.call(this,t,this.widthWrapResult),OT.call(this,s)};const Ax=Phaser.Math.Distance.Between;var tV=function(s,t){var e=this.sizerChildren;if(e.length===0)return-1;for(var f=-1,i=1/0,n=0,o=e.length;n<o;n++){var r=e[n];if(!(Math.abs(r.centerY-t)>r.height/2)){var l=Ax(r.left,r.centerY,s,t);i>l&&(i=l,f=n);var a=e[n+1];if(!(a&&a.y===r.y)){var l=Ax(r.right,r.centerY,s,t);i>l&&(i=l,f=n+1)}}}return f};const eV=Phaser.Utils.Objects.IsPlainObject,ld=Phaser.Utils.Objects.GetValue,iV=Phaser.Display.Align.CENTER;var ud=function(s,t,e,f){if(s===`
`)return this.addNewLine(),this;if(Oo.call(this,s),eV(t)){var i=t;t=ld(i,"padding",0),e=ld(i,"key",void 0),f=ld(i,"index",void 0)}t===void 0&&(t=0);var i=this.getSizerConfig(s);return i.align=iV,i.padding=ca(t),f===void 0||f>=this.sizerChildren.length?this.sizerChildren.push(s):this.sizerChildren.splice(f,0,s),e!==void 0&&this.addChildrenMap(e,s),this},nV={add(s,t,e){if(Cn(s))for(var f=s,i=0,n=f.length;i<n;i++)ud.call(this,f[i],t);else ud.call(this,s,t,e);return this},addNewLine(){return this.sizerChildren.push(`
`),this},insert(s,t,e,f){return ud.call(this,t,e,f,s),this},insertAtPosition(s,t,e,f,i){var n=tV.call(this,s,t);return n===-1&&(n=void 0),this.insert(n,e,f,i),this}};const sV=Phaser.Utils.Array.Remove;var rV={remove(s,t){return this.getParentSizer(s)!==this?this:(sV(this.sizerChildren,s),Kl.call(this,s,t),this)},removeAll(s){for(var t=this.sizerChildren.length-1;t>=0;t--)this.remove(this.sizerChildren[t],s);return this},clear(s){return this.sizerChildren.length=0,Zl.call(this,s),this}},JT={getChildrenWidth:$z,getChildrenHeight:kz,getChildrenSizers:Kz,preLayout:Zz,layoutChildren:Jz,runWidthWrap:_z};Object.assign(JT,nV,rV);var aV=function(s){s===void 0&&(s=this.sizerChildren);for(var t=0,e,f,i=0,n=s.length;i<n;i++)e=s[i],e!==`
`&&(f=this.getChildWidth(e),t=Math.max(f,t));return t},oV=function(s){s===void 0&&(s=this.sizerChildren);for(var t=0,e,f,i=0,n=s.length;i<n;i++)e=s[i],e!==`
`&&(f=e.isRexSizer?Math.max(e.minHeight,e.childrenHeight):e.hasOwnProperty("minHeight")?e.minHeight:qt(e),t=Math.max(f,t));return t};const Ox=Phaser.Utils.Objects.IsPlainObject,Qe=Phaser.Utils.Objects.GetValue;class Xs extends mr{constructor(t,e,f,i,n,o){Ox(e)?(o=e,e=Qe(o,"x",0),f=Qe(o,"y",0),i=Qe(o,"width",void 0),n=Qe(o,"height",void 0)):Ox(i)&&(o=i,i=Qe(o,"width",void 0),n=Qe(o,"height",void 0)),super(t,e,f,i,n,o),this.type="rexFixWidthSizer",this.sizerChildren=[],this.setOrientation(Qe(o,"orientation",0)),this.setItemSpacing(Qe(o,"space.item",0)),this.setLineSpacing(Qe(o,"space.line",0)),this.setIntentLeft(Qe(o,"space.indentLeftOdd",0),Qe(o,"space.indentLeftEven",0)),this.setIntentTop(Qe(o,"space.indentTopOdd",0),Qe(o,"space.indentTopEven",0)),this.setAlign(Qe(o,"align",0)),this.setJustifyPercentage(Qe(o,"justifyPercentage",.25)),this.setRTL(Qe(o,"rtl",!1)),this.addChildrenMap("items",this.sizerChildren)}setOrientation(t){return this.orientation=fv(t),this}setItemSpacing(t){return this.space.item=t,this}setLineSpacing(t){return this.space.line=t,this}setIntentLeft(t,e){return this.space.indentLeftOdd=t,this.space.indentLeftEven=e,this}setIntentTop(t,e){return this.space.indentTopOdd=t,this.space.indentTopEven=e,this}setAlign(t){return typeof t=="string"&&(t=hV[t]),this.align=t,this}setJustifyPercentage(t){return this.justifyPercentage=t,this}setRTL(t){return t===void 0&&(t=!0),this.rtl=t,this}get maxChildWidth(){return this._maxChildWidth===void 0&&(this._maxChildWidth=aV.call(this)),this._maxChildWidth}get maxChildHeight(){return this._maxChildHeight===void 0&&(this._maxChildHeight=oV.call(this)),this._maxChildHeight}}const hV={left:0,top:0,right:1,bottom:1,center:2,justify:3,"justify-left":3,"justify-top":3,"justify-right":4,"justify-bottom":4,"justify-center":5};Object.assign(Xs.prototype,JT);yt.register("fixWidthSizer",function(s,t,e,f,i){var n=new Xs(this.scene,s,t,e,f,i);return this.scene.add.existing(n),n});Ct(window,"RexPlugins.UI.FixWidthSizer",Xs);yt.register("overlapSizer",function(s,t,e,f,i){var n=new Sn(this.scene,s,t,e,f,i);return this.scene.add.existing(n),n});Ct(window,"RexPlugins.UI.OverlapSizer",Sn);yt.register("space",function(){var s=new ql(this.scene);return s});Ct(window,"RexPlugins.UI.Space",ql);var po=function(s,t,e,f){var i=new qd(t,e,f);if(s&&!s.isRexSizer){var n=i.createGeometryMask();s.setMask(n),this.once("destroy",function(){s.setMask(),n.destroy()})}return this.pin(i),i};const pn=Phaser.Utils.Objects.GetValue;class pa extends Se{constructor(t,e){super(t,e),this.type="rexLabel";var f=pn(e,"background",void 0),i=pn(e,"icon",void 0),n=pn(e,"iconMask",void 0),o=pn(e,"text",void 0),r=pn(e,"action",void 0),a=pn(e,"actionMask",void 0),l=pn(e,"align",void 0),h=pn(e,"space.icon",0),u=pn(e,"space.text",0);if(f&&this.addBackground(f),(l==="right"||l==="bottom"||l==="center")&&this.addSpace(),i){var v;this.orientation===0?(o||r)&&(v={right:h}):(o||r)&&(v={bottom:h}),this.add(i,{proportion:0,padding:v}),n&&(n=po.call(this,i,i,1))}if(o){var d=pn(e,"expandTextWidth",!1),c=pn(e,"expandTextHeight",!1),p,v,g;this.orientation===0?(p=d?1:0,r&&(v={right:u}),g=c):(p=c?1:0,r&&(v={bottom:u}),g=d),this.add(o,{proportion:p,expand:g,padding:v})}r&&(this.add(r),a&&(a=po.call(this,r,r,1))),l==="center"&&this.addSpace(),this.addChildrenMap("background",f),this.addChildrenMap("icon",i),this.addChildrenMap("iconMask",n),this.addChildrenMap("text",o),this.addChildrenMap("action",r),this.addChildrenMap("actionMask",a)}get text(){var t=this.childrenMap.text;return t===void 0?"":t.text}set text(t){var e=this.childrenMap.text;e!==void 0&&e.setText(t)}setText(t){return this.text=t,this}appendText(t){return this.text+=t,this}setTexture(t,e){var f=this.childrenMap.icon;if(f!==void 0)return f.setTexture(t,e),this}get texture(){var t=this.childrenMap.icon;if(t!==void 0)return t.texture}get frame(){var t=this.childrenMap.icon;if(t!==void 0)return t.frame}runLayout(t,e,f){if(this.ignoreLayout)return this;super.runLayout(t,e,f);var i=this.childrenMap.iconMask;i&&(i.setPosition(),this.resetChildPositionState(i));var n=this.childrenMap.actionMask;return n&&(n.setPosition(),this.resetChildPositionState(n)),this}resize(t,e){super.resize(t,e);var f=this.childrenMap.iconMask;f&&f.resize();var i=this.childrenMap.actionMask;return i&&i.resize(),this}}yt.register("label",function(s){var t=new pa(this.scene,s);return this.scene.add.existing(t),t});Ct(window,"RexPlugins.UI.Label",pa);const Xh=Se.prototype.add,Rx=Se.prototype.addSpace;var fd=function(s){var t=!s.isRexSpace,e=!t||this.buttonsExpand?1:0;if(this.sizerChildren.length===0)if(t){var f=!this.buttonsExpand&&(this.buttonsAlign==="right"||this.buttonsAlign==="center"||this.buttonsAlign==="bottom");f&&Rx.call(this),Xh.call(this,s,{proportion:e,expand:!0});var i=!this.buttonsExpand&&this.buttonsAlign==="center";i&&Rx.call(this),this.hasTailSpace=i}else Xh.call(this,s,{proportion:e,expand:!0}),this.hasTailSpace=!1;else if(this.hasTailSpace){var n=this.sizerChildren.length-1;Xh.call(this,s,{index:n,proportion:e,expand:!0})}else Xh.call(this,s,{proportion:e,expand:!0});return t&&this.buttonGroup.add(s),this},lV={addButton(s){if(Cn(s))for(var t=s,e=0,f=t.length;e<f;e++)fd.call(this,t[e]);else fd.call(this,s);return this},addButtons(s){for(var t=0,e=s.length;t<e;t++)fd.call(this,s[t]);return this}};const uV=Se.prototype.remove,fV=Se.prototype.clear;var dd=function(s,t){return this.getParentSizer(s)!==this?this:(this.buttonGroup.remove(s),uV.call(this,s,t),this)},dV={remove(s,t){if(Cn(s))for(var e=s,f=0,i=e.length;f<i;f++)dd.call(this,e[f],t);else dd.call(this,s,t);return this},clear(s){var t=this.buttonGroup.buttons;return t.length=0,fV.call(this,s),this},removeButton(e,t){var e=this.getButton(e);return e?(this.remove(e,t),this):this},clearButtons(s){for(var t=this.buttonGroup.buttons,e=t.length-1;e>=0;e--)dd.call(this,t[e],s);return this}},cV={add(s){if(this.buttons.push(s),this.buttonsType){var t=s.name;t===""?console.error(`${this.parent.constructor.name}: Button key is an empty string`):this.buttonMap.hasOwnProperty(t)&&console.error(`${this.parent.constructor.name}: Duplicate button key '${t}'`),this.buttonMap[t]=s,this.dataManager.set(t,void 0).set(t,!1)}return s._buttonBehavior=new va(s,this.clickConfig),s._buttonBehavior.on("click",function(e,f,i,n){this.fireEvent("button.click",f,i,n)},this).on("enable",function(e,f){this.fireEvent("button.enable",f)},this).on("disable",function(e,f){this.fireEvent("button.disable",f)},this),s.on("pointerover",function(e,f,i,n){this.fireEvent("button.over",s,e,n)},this).on("pointerout",function(e,f){this.fireEvent("button.out",s,e,f)},this),this},addMultiple(s){for(var t=0,e=s.length;t<e;t++)this.add(gameObject[t]);return this}};const vV=Phaser.Utils.Array.Remove;var pV={remove(s){if(vV(this.buttons,s),this.buttonsType){var t=s.name;delete this.buttonMap[t],this.dataManager.remove(t)}return this},clear(){if(this.buttons.length=0,this.buttonsType)for(var s in this.buttonMap)delete this.buttonMap[s],this.dataManager.remove(s);return this}},gV=function(s,t,...e){var f;if(typeof t=="number"){if(f=t,t=this.buttons[f],!t)return}else if(f=this.buttons.indexOf(t),f===-1)return;this.eventEmitter!==this.parent&&this.parent.emit(s,t,f,...e),this.groupName!==void 0?this.eventEmitter.emit(s,t,this.groupName,f,...e):this.eventEmitter.emit(s,t,f,...e)};const _r=Phaser.Utils.Objects.GetValue;var Lx=function(s){var t=_r(s,"dataManager",void 0);if(t===void 0){var e=this.parent;e.setDataEnabled(),t=e.data}this.dataManager=t;var f,i;f=_r(s,"setValueCallback",void 0),i=_r(s,"setValueCallbackScope",void 0),f===void 0&&(f=_r(s,"setButtonStateCallback",void 0),i=_r(s,"setButtonStateCallbackScope",void 0)),this.setValueCallback=f,this.setValueCallbackScope=i,t.events.on("changedata",function(n,o,r,a){var l=this.buttonMap[o];if(!!l){var h=this.setValueCallback,u=this.setValueCallbackScope;h&&(u?h.call(u,l,r,a):h(l,r,a)),this.fireEvent("button.statechange",l,r,a)}},this)},mV={setButtonsType(s){s===void 0&&(s={});var t=_r(s,"buttonsType",s.type);switch(this.buttonsType=t,t){case"radio":this.setRadioType(s);break;case"checkboxes":this.setCheckboxesType(s);break}return this},setRadioType(s){Lx.call(this,s);var t=void 0,e=this.parent,f=this.buttons,i=this.dataManager;return Object.defineProperty(e,"value",{get:function(){return t},set:function(n){n!==t&&(t=n,f.forEach(function(o){var r=o.name,a=i.get(r);r===n?a||i.set(r,!0):a&&i.set(r,!1)}))},enumerable:!0,configurable:!0}),e.on("button.click",function(n){e.value=n.name}),this},setCheckboxesType(s){Lx.call(this,s);var t=this.parent,e=this.dataManager;return t.on("button.click",function(f){e.toggle(f.name)}),this},clearAllButtonsState(){for(var s in this.buttonMap)this.dataManager.set(s,!1);return this},getAllButtonsState(){var s={};for(var t in this.buttonMap)s[t]=this.dataManager.get(t);return s},setSelectedButtonName(s){return this.parent.value=s,this},getSelectedButtonName(){return this.parent.value},setButtonState(s,t){return t===void 0&&(t=!0),this.dataManager.set(s,t),this},getButtonState(s){return this.dataManager.get(s)}},xV=function(s,t){if(s)if(Cn(s)){for(var e,f=0,i=s.length;f<i;f++)if(e=wx(s[f],t),e)return e}else{var e;for(var n in s)if(e=wx(s[n],t),e)return e}else return null},wx=function(s,t){return s?s.hasOwnProperty("name")?s.name===t?s:null:GetElementByName(s,t):null},_l={getButton(s){var t=this.buttons,e,f=typeof s;switch(f){case"number":e=t[s];break;case"string":e=xV(t,s);break;default:e=s,t.indexOf(e)===-1&&(e=void 0);break}return e},setButtonEnable(s,t){var e=this.buttons;if(s===void 0||typeof s=="boolean"){t=s;for(var f=0,i=e.length;f<i;f++)e[f]._buttonBehavior.setEnable(t)}else this.getButton(s)._buttonBehavior.setEnable(t);return this},toggleButtonEnable(s){var t=this.buttons;if(s===void 0||typeof s=="boolean")for(var e=0,f=t.length;e<f;e++)t[e]._buttonBehavior.toggleEnable();else this.getButton(s)._buttonBehavior.toggleEnable();return this},getButtonEnable(s){return s===void 0&&(s=0),this.getButton(s)._buttonBehavior.enable},emitButtonClick(s){var t=this.buttonGroup?this.buttonGroup:this;return t.fireEvent("button.click",s),this},showButton(s){return Rs(this.getButton(s)),this},hideButton(s){return Ls(this.getButton(s)),this},isButtonShown(s){return Qc(this.getButton(s)),this},forEachButtton(s,t){for(var e=this.buttons,f=0,i=e.length;f<i;f++)t?s.call(t,e[f],f,e):s(e[f],f,e);return this}};class tu{constructor(t){this.parent=t.parent,this.eventEmitter=t.eventEmitter,this.groupName=t.groupName,this.clickConfig=t.clickConfig,this.buttonsType=void 0,this.buttons=[],this.buttonMap={}}destroy(){this.parent=void 0,this.eventEmitter=void 0,this.clickConfig=void 0,this.buttons=void 0}}var yV={fireEvent:gV};Object.assign(tu.prototype,cV,pV,mV,_l,yV);var dv={clearAllButtonsState(){return this.buttonGroup.clearAllButtonsState(),this},getAllButtonsState(){return this.buttonGroup.getAllButtonsState()},setSelectedButtonName(s){return this.buttonGroup.setSelectedButtonName(s),this},getSelectedButtonName(){return this.buttonGroup.getSelectedButtonName()},setButtonState(s,t){return this.buttonGroup.setButtonState(s,t),this},getButtonState(s){return this.buttonGroup.getButtonState(s)}};const hr=Phaser.Utils.Objects.GetValue;class Ue extends Se{constructor(t,e){e===void 0&&(e={});var f=e.space;typeof f=="number"&&(e.space={item:f}),super(t,e),this.type="rexButtons",this.buttonGroup=new tu({parent:this,eventEmitter:hr(e,"eventEmitter",this),groupName:hr(e,"groupName",void 0),clickConfig:hr(e,"click",void 0)}).setButtonsType(e);var i=hr(e,"background",void 0),n=hr(e,"buttons",void 0);this.buttonsExpand=hr(e,"expand",!1),this.buttonsAlign=hr(e,"align",void 0),i&&this.addBackground(i),n&&this.addButtons(n),this.addChildrenMap("background",i),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(t){!this.scene||(super.destroy(t),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(t){this.buttonGroup.groupName=t}get eventEmitter(){return this.buttonGroup.eventEmitter}}Object.assign(Ue.prototype,lV,dV,_l,dv);yt.register("buttons",function(s){var t=new Ue(this.scene,s);return this.scene.add.existing(t),t});Ct(window,"RexPlugins.UI.Buttons",Ue);const TV=us.prototype.add;var CV={addButton(s,t,e){return TV.call(this,s,t,e,void 0,0,this.buttonsExpand),this.buttonGroup.add(s),this},addButtons(s,t){for(var e=0,f=s;e<f;e++)this.addButton(s[e],void 0,t);return this}};const SV=us.prototype.remove,EV=us.prototype.clear;var cd=function(e,t){var e=this.getButton(e);return e?(this.buttonGroup.remove(e),SV.call(this,e,t),this):this},PV={remove(s,t){if(Cn(s))for(var e=s,f=0,i=e.length;f<i;f++)cd.call(this,e[f],t);else cd.call(this,s,t);return this},clear(s){var t=this.buttonGroup.buttons;return t.length=0,EV.call(this,s),this},removeButton(s,t){return this.remove(s,t),this},clearButtons(s){for(var t=this.buttonGroup.buttons,e=t.length-1;e>=0;e--)cd.call(this,t[e],s);return this}};const wn=Phaser.Utils.Objects.GetValue;class Io extends us{constructor(t,e){e===void 0&&(e={});var f=wn(e,"row",0),i=wn(e,"column",e.col||0),n=wn(e,"createCellContainerCallback"),o=wn(e,"buttons",void 0),r=wn(e,"expand",!0),a=r?1:0;if(n&&(e.createCellContainerCallback=void 0),o!==void 0){f=Math.max(f,o.length);for(var l=0,h=o.length;l<h;l++)i=Math.max(i,o[l].length)}e.row=f,e.column=i,e.columnProportions=a,e.rowProportions=a,super(t,e),this.type="rexGridButtons",this.buttonGroup=new tu({parent:this,eventEmitter:wn(e,"eventEmitter",this),groupName:wn(e,"groupName",void 0),clickConfig:wn(e,"click",void 0)}).setButtonsType(e);var u=wn(e,"background",void 0);if(this.buttonsExpand=r,wn(e,"space",void 0),u&&this.addBackground(u),o)for(var v,d,c=0,p=o.length;c<p;c++){v=o[c];for(var g=0,m=v.length;g<m;g++)d=v[g],d&&this.addButton(d,g,c)}else if(n)for(var x=0;x<f;x++)for(var y=0;y<i;y++){var d=n(t,y,x);d&&this.addButton(d,y,x)}this.addChildrenMap("background",u),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(t){!this.scene||(super.destroy(t),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(t){this.buttonGroup.groupName=t}get eventEmitter(){return this.buttonGroup.eventEmitter}}Object.assign(Io.prototype,CV,PV,_l,dv);yt.register("gridButtons",function(s){var t=new Io(this.scene,s);return this.scene.add.existing(t),t});Ct(window,"RexPlugins.UI.GridButtons",Io);const QT=Xs.prototype.add;var Hh=function(s){return QT.call(this,s),this.buttonGroup.add(s),this},MV={addButton(s){if(Cn(s))for(var t=s,e=0,f=t.length;e<f;e++)Hh.call(this,t[e]);else Hh.call(this,s);return this},addButtons(s){if(Cn(s[0]))for(var t=s,e,f=0,i=t.length-1;f<=i;f++){e=t[f];for(var n=0,o=e.length;n<o;n++)Hh.call(this,e[n]);f>i&&QT.addNewLine(this)}else for(var n=0,o=s.length;n<o;n++)Hh.call(this,s[n]);return this}};const AV=Xs.prototype.remove,OV=Xs.prototype.clear;var vd=function(e,t){var e=this.getButton(e);return e?(this.buttonGroup.remove(e),AV.call(this,e,t),this):this},RV={remove(s,t){if(Cn(s))for(var e=s,f=0,i=e.length;f<i;f++)vd.call(this,e[f],t);else vd.call(this,s,t);return this},clear(s){var t=this.buttonGroup.buttons;return t.length=0,OV.call(this,s),this},removeButton(s,t){return this.remove(s,t),this},clearButtons(s){for(var t=this.buttonGroup.buttons,e=t.length-1;e>=0;e--)vd.call(this,t[e],s);return this}};const Kr=Phaser.Utils.Objects.GetValue;class zs extends Xs{constructor(t,e){e===void 0&&(e={});var f=e.space;typeof f=="number"&&(e.space={item:f,line:f}),super(t,e),this.type="rexFixWidthButtons",this.buttonGroup=new tu({parent:this,eventEmitter:Kr(e,"eventEmitter",this),groupName:Kr(e,"groupName",void 0),clickConfig:Kr(e,"click",void 0)}).setButtonsType(e);var i=Kr(e,"background",void 0),n=Kr(e,"buttons",void 0);this.buttonsAlign=Kr(e,"align",void 0),i&&this.addBackground(i),n&&this.addButtons(n),this.addChildrenMap("background",i),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(t){!this.scene||(super.destroy(t),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(t){this.buttonGroup.groupName=t}get eventEmitter(){return this.buttonGroup.eventEmitter}}Object.assign(zs.prototype,MV,RV,_l,dv);yt.register("fixWidthButtons",function(s){var t=new zs(this.scene,s);return this.scene.add.existing(t),t});Ct(window,"RexPlugins.UI.FixWidthButtons",zs);var LV={getChoice(s){var t=this.childrenMap.choicesSizer;if(t)return t.getButton(s)},getAction(s){return this.childrenMap.actionsSizer.getButton(s)},getToolbar(s){return this.childrenMap.toolbarSizer.getButton(s)},getLeftToolbar(s){return this.childrenMap.leftToolbarSizer.getButton(s)},setChoiceEnable(s,t){var e=this.childrenMap.choicesSizer;return e&&e.setButtonEnable(s,t),this},setActionEnable(s,t){return this.childrenMap.actionsSizer.setButtonEnable(s,t),this},setToolbarEnable(s,t){return this.childrenMap.toolbarSizer.setButtonEnable(s,t),this},setLeftToolbarEnable(s,t){return this.childrenMap.leftToolbarSizer.setButtonEnable(s,t),this},toggleChoiceEnable(s){var t=this.childrenMap.choicesSizer;return t&&t.toggleButtonEnable(s),this},toggleActionEnable(s){return this.childrenMap.actionsSizer.toggleButtonEnable(s),this},toggleToolbarEnable(s){return this.childrenMap.toolbarSizer.toggleButtonEnable(s),this},toggleLeftToolbarEnable(s){return this.childrenMap.leftToolbarSizer.toggleButtonEnable(s),this},getChoiceEnable(s){var t=this.childrenMap.choicesSizer;return t?t.getButtonEnable(s):!1},getActionEnable(s){return this.childrenMap.actionsSizer.getButtonEnable(s)},getToolbarEnable(s){return this.childrenMap.toolbarSizer.getButtonEnable(s)},getLeftToolbarEnable(s){return this.childrenMap.leftToolbarSizer.getButtonEnable(s)},emitChoiceClick(s){var t=this.childrenMap.choicesSizer;return t&&t.emitButtonClick(s),this},emitActionClick(s){return this.childrenMap.actionsSizer.emitButtonClick(s),this},emitToolbarClick(s){return this.childrenMap.toolbarSizer.emitButtonClick(s),this},emitLeftToolbarClick(s){return this.childrenMap.leftToolbarSizer.emitButtonClick(s),this},showChoice(s){var t=this.childrenMap.choicesSizer;return t&&t.showButton(s),this},showAction(s){return this.childrenMap.actionsSizer.showButton(s),this},showToolbar(s){return this.childrenMap.toolbarSizer.showButton(s),this},showLeftToolbar(s){return this.childrenMap.leftToolbarSizer.showButton(s),this},hideChoice(s){var t=this.childrenMap.choicesSizer;return t&&t.hideButton(s),this},hideAction(s){return this.childrenMap.actionsSizer.hideButton(s),this},hideToolbar(s){return this.childrenMap.toolbarSizer.hideButton(s),this},hideLeftToolbar(s){return this.childrenMap.leftToolbarSizer.hideButton(s),this},addChoice(s){var t=this.childrenMap.choicesSizer;return t&&t.addButton(s),this},addAction(s){return this.childrenMap.actionsSizer.addButton(s),this},addToolbar(s){return this.childrenMap.toolbarSizer.addButton(s),this},addLeftToolbar(s){return this.childrenMap.leftToolbarSizer.addButton(s),this},removeChoice(s,t){var e=this.childrenMap.choicesSizer;return e&&e.removeButton(s,t),this},removeAction(s,t){return this.childrenMap.actionsSizer.removeButton(s,t),this},removeToolbar(s,t){return this.childrenMap.toolbarSizer.removeButton(s,t),this},removeLeftToolbar(s,t){return this.childrenMap.leftToolbarSizer.removeButton(s,t),this},clearChoices(s){var t=this.childrenMap.choicesSizer;return t&&t.clearButtons(s),this},clearActions(s){return this.childrenMap.actionsSizer.clearButtons(s),this},clearToolbar(s){return this.childrenMap.toolbarSizer.clearButtons(s),this},clearLeftToolbar(s){return this.childrenMap.leftToolbarSizer.clearButtons(s),this},forEachChoice(s,t){var e=this.childrenMap.choicesSizer;return e&&e.forEachButtton(s,t),this},forEachAction(s,t){return this.childrenMap.actionsSizer.forEachButtton(s,t),this},forEachToolbar(s,t){return this.childrenMap.toolbarSizer.forEachButtton(s,t),this},forEachLeftToolbar(s,t){return this.childrenMap.leftToolbarSizer.forEachButtton(s,t),this},setAllButtonsEnable(s){return s===void 0&&(s=!0),this.childrenMap.toolbarSizer&&this.setToolbarEnable(s),this.childrenMap.leftToolbarSizer&&this.setLeftToolbarEnable(s),this.childrenMap.actionsSizer&&this.setActionEnable(s),this.childrenMap.choicesSizer&&this.setChoiceEnable(s),this},getChoicesButtonStates(){var s=this.childrenMap.choicesSizer;return s?s.getAllButtonsState():{}},getChoicesButtonState(s){var t=this.childrenMap.choicesSizer;return s===void 0?t?t.getAllButtonsState():{}:t?t.getButtonState(s):!1},setChoicesButtonState(s,t){var e=this.childrenMap.choicesSizer;return e&&e.setButtonState(s,t),this},clearChoicesButtonStates(){var s=this.childrenMap.choicesSizer;return s&&s.clearAllButtonsState(),this},getChoicesSelectedButtonName(){var s=this.childrenMap.choicesSizer;return s?s.getSelectedButtonName():""},setChoicesSelectedButtonName(s){var t=this.childrenMap.choicesSizer;return t&&t.setSelectedButtonName(s),this}};const Lt=Phaser.Utils.Objects.GetValue;class eu extends Se{constructor(t,e){e===void 0&&(e={}),e.orientation=1,super(t,e),this.type="rexDialog",this.eventEmitter=Lt(e,"eventEmitter",this);var f=Lt(e,"background",void 0),i=Lt(e,"title",void 0),n=Lt(e,"toolbar",void 0),o=Lt(e,"toolbarBackground",void 0),r=Lt(e,"leftToolbar",void 0),a=Lt(e,"leftToolbarBackground",void 0),l=Lt(e,"content",void 0),h=Lt(e,"description",void 0),u,v=Lt(e,"choices",void 0),d=Lt(e,"choicesBackground",void 0),c,p=Lt(e,"actions",void 0),g=Lt(e,"actionsBackground",void 0),m=Lt(e,"click",void 0);f&&this.addBackground(f);var x;n&&(x=new Ue(t,{groupName:"toolbar",background:o,buttons:n,orientation:0,space:{item:Lt(e,"space.toolbarItem",0)},click:m,eventEmitter:this.eventEmitter}));var y;if(r&&(y=new Ue(t,{groupName:"leftToolbar",background:a,buttons:r,orientation:0,space:{item:Lt(e,"space.leftToolbarItem",0)},click:m,eventEmitter:this.eventEmitter})),i||n||r){var T=!!i&&Lt(e,"expand.title",!0),C=Lt(e,"align.title","center"),S=i&&!T&&C==="center"||!i&&(n||r),E=!S,M;E?M=new Se(t,{orientation:0}):M=new Sn(t);var O=E?!0:{height:!0};if(y&&M.add(y,{align:"left",expand:O}),i){E&&!T&&C==="right"&&M.addSpace();var w={left:Lt(e,"space.titleLeft",0),right:Lt(e,"space.titleRight",0)},L=T?1:0;M.add(i,{align:C,proportion:L,expand:O,padding:w}),E&&!T&&C==="left"&&M.addSpace()}x&&(E&&!i&&M.addSpace(),M.add(x,{align:"right",expand:O}));var R=Lt(e,"space.title",0),w;(l||h||v||p)&&(w={bottom:R}),this.add(M,{padding:w,expand:!0})}if(l){var D=Lt(e,"align.content","center"),B=Lt(e,"space.content",0),w={left:Lt(e,"space.contentLeft",0),right:Lt(e,"space.contentRight",0),bottom:h||v||p?B:0},N=Lt(e,"expand.content",!0);this.add(l,{align:D,padding:w,expand:N})}if(h){var D=Lt(e,"align.description","center"),z=Lt(e,"space.description",0),w={left:Lt(e,"space.descriptionLeft",0),right:Lt(e,"space.descriptionRight",0),bottom:v||p?z:0},N=Lt(e,"expand.description",!0);this.add(h,{align:D,padding:w,expand:N})}if(v){var X=Lt(e,"choicesType","").split("-"),k=ka(X,"wrap")?zs:ka(X,"grid")?Io:Ue,K=ka(X,"radio")?"radio":ka(X,"checkboxes")?"checkboxes":void 0,b={left:Lt(e,"space.choicesBackgroundLeft",0),right:Lt(e,"space.choicesBackgroundRight",0),top:Lt(e,"space.choicesBackgroundTop",0),bottom:Lt(e,"space.choicesBackgroundBottom",0)},I=Lt(e,"space.choice",0);k===Ue?b.item=I:k===zs?(b.item=I,b.line=Lt(e,"space.choiceLine",I)):(b.column=Lt(e,"space.choiceColumn",I),b.row=Lt(e,"space.choiceRow",I));var G={width:Lt(e,"choicesWidth",void 0),height:Lt(e,"choicesHeight",void 0),groupName:"choices",buttonsType:K,background:d,buttons:v,space:b,click:m,eventEmitter:this.eventEmitter,setValueCallback:Lt(e,"choicesSetValueCallback",void 0),setValueCallbackScope:Lt(e,"choicesSetValueCallbackScope",void 0)};k===Ue&&(G.orientation=ka(X,"x")?0:1),u=new k(t,G);var Y=Lt(e,"space.choices",0),w={left:Lt(e,"space.choicesLeft",0),right:Lt(e,"space.choicesRight",0),bottom:p?Y:0},D=Lt(e,"align.choices","center"),N=Lt(e,"expand.choices",!0);this.add(u,{align:D,padding:w,expand:N})}if(p){c=new Ue(t,{groupName:"actions",background:g,buttons:p,orientation:0,space:{item:Lt(e,"space.action",0)},expand:Lt(e,"expand.actions",!1),align:Lt(e,"align.actions","center"),click:m,eventEmitter:this.eventEmitter});var w={left:Lt(e,"space.actionsLeft",0),right:Lt(e,"space.actionsRight",0)};this.add(c,{align:"center",padding:w,expand:!0})}this.addChildrenMap("background",f),this.addChildrenMap("title",i),this.addChildrenMap("toolbar",n),this.addChildrenMap("leftToolbar",r),this.addChildrenMap("content",l),this.addChildrenMap("description",h),this.addChildrenMap("choices",v),this.addChildrenMap("actions",p),this.addChildrenMap("choicesSizer",u),this.addChildrenMap("actionsSizer",c),this.addChildrenMap("toolbarSizer",x),this.addChildrenMap("leftToolbarSizer",y)}}var ka=function(s,t){return s.indexOf(t)!==-1};Object.assign(eu.prototype,LV);yt.register("dialog",function(s){var t=new eu(this.scene,s);return this.scene.add.existing(t),t});Ct(window,"RexPlugins.UI.Dialog",eu);const fe=Phaser.Utils.Objects.GetValue;class cv extends Se{constructor(t,e){e===void 0&&(e={}),e.orientation=1,super(t,e),this.type="rexHolyGrail";var f=fe(e,"background",void 0);f&&this.addBackground(f);var i=fe(e,"header",void 0);if(i){var n=fe(e,"proportion.header",0),o=fe(e,"align.header","center"),r=fe(e,"space.header",void 0);typeof r=="number"&&(r={bottom:r});var a=fe(e,"expand.header",!0);this.add(i,{proportion:n,align:o,padding:r,expand:a})}var l=new Se(t,{orientation:0});this.add(l,{proportion:1,align:"center",padding:0,expand:!0});var h=fe(e,"leftSide",void 0);if(h){var n=fe(e,"proportion.leftSide",0),o=fe(e,"align.leftSide","center"),r=fe(e,"space.leftSide",void 0);typeof r=="number"&&(r={right:r});var a=fe(e,"expand.leftSide",!0);l.add(h,{proportion:n,align:o,padding:r,expand:a})}var u=fe(e,"content",void 0);if(u){var n=fe(e,"proportion.content",1),o=fe(e,"align.content","center"),r=fe(e,"space.content",void 0),a=fe(e,"expand.content",!0);l.add(u,{proportion:n,align:o,padding:r,expand:a})}var v=fe(e,"rightSide",void 0);if(v){var n=fe(e,"proportion.rightSide",0),o=fe(e,"align.rightSide","center"),r=fe(e,"space.rightSide",void 0);typeof r=="number"&&(r={left:r});var a=fe(e,"expand.rightSide",!0);l.add(v,{proportion:n,align:o,padding:r,expand:a})}var d=fe(e,"footer",void 0);if(d){var n=fe(e,"proportion.footer",0),o=fe(e,"align.footer","center"),r=fe(e,"space.footer",void 0);typeof r=="number"&&(r={top:r});var a=fe(e,"expand.footer",!0);this.add(d,{proportion:n,align:o,padding:r,expand:a})}this.addChildrenMap("background",f),this.addChildrenMap("header",i),this.addChildrenMap("leftSide",h),this.addChildrenMap("content",u),this.addChildrenMap("rightSide",v),this.addChildrenMap("footer",d)}}yt.register("holyGrail",function(s){var t=new cv(this.scene,s);return this.scene.add.existing(t),t});Ct(window,"RexPlugins.UI.HolyGrail",cv);var wV={getButtonsSizer(s){return this.childrenMap[`${s}ButtonsSizer`]},getButton(s,t){var e=this.getButtonsSizer(s);return e?e.getButton(t):void 0},setButtonEnable(s,t,e){return this.getButtonsSizer(s).setButtonEnable(t,e),this},setLeftButtonEnable(s,t){return this.childrenMap.leftButtonsSizer.setButtonEnable(s,t),this},setRightButtonEnable(s,t){return this.childrenMap.rightButtonsSizer.setButtonEnable(s,t),this},setTopButtonEnable(s,t){return this.childrenMap.topButtonsSizer.setButtonEnable(s,t),this},setBottomButtonEnable(s,t){return this.childrenMap.bottomButtonsSizer.setButtonEnable(s,t),this},toggleButtonEnable(s,t){return this.getButtonsSizer(s).toggleButtonEnable(t),this},toggleLeftButtonEnable(s){return this.childrenMap.leftButtonsSizer.toggleButtonEnable(s),this},toggleRightButtonEnable(s){return this.childrenMap.rightButtonsSizer.toggleButtonEnable(s),this},toggleTopButtonEnable(s){return this.childrenMap.topButtonsSizer.toggleButtonEnable(s),this},toggleBottomButtonEnable(s){return this.childrenMap.bottomButtonsSizer.toggleButtonEnable(s),this},getButtonEnable(s,t){return this.getButtonsSizer(s).getButtonEnable(t)},getLeftButtonEnable(s){return this.childrenMap.leftButtonsSizer.getButtonEnable(s)},getRightButtonEnable(s){return this.childrenMap.rightButtonsSizer.getButtonEnable(s)},getTopButtonEnable(s){return this.childrenMap.topButtonsSizer.getButtonEnable(s)},getBottomButtonEnable(s){return this.childrenMap.bottomButtonsSizer.getButtonEnable(s)},emitButtonClick(s,t){var e=this.getButtonsSizer(s);return e?(e.emitButtonClick(t),this):this},emitLeftButtonClick(s){return this.childrenMap.leftButtonsSizer.emitButtonClick(s),this},emitRightButtonClick(s){return this.childrenMap.rightButtonsSizer.emitButtonClick(s),this},emitTopButtonClick(s){return this.childrenMap.topButtonsSizer.emitButtonClick(s),this},emitBottomButtonClick(s){return this.childrenMap.bottomButtonsSizer.emitButtonClick(s),this},getLeftButton(s){return this.childrenMap.leftButtonsSizer.getButton(s)},getRightButton(s){return this.childrenMap.rightButtonsSizer.getButton(s)},getTopButton(s){return this.childrenMap.topButtonsSizer.getButton(s)},getBottomButton(s){return this.childrenMap.bottomButtonsSizer.getButton(s)},showButton(s,t){return Rs(this.getButton(s,t)),this},showLeftButton(s){return Rs(this.getLeftButton(s)),this},showRightButton(s){return Rs(this.getRightButton(s)),this},showTopButton(s){return Rs(this.getTopButton(s)),this},showBottomButton(s){return Rs(this.getBottomButton(s)),this},hideButton(s,t){return Ls(this.getButton(s,t)),this},hideLeftButton(s){return Ls(this.getLeftButton(s)),this},hideRightButton(s){return Ls(this.getRightButton(s)),this},hideTopButton(s){return Ls(this.getTopButton(s)),this},hideBottomButton(s){return Ls(this.getBottomButton(s)),this},addButton(s,t){return this.getButtonsSizer(s).addButton(t),this},addLeftButton(s){return this.addButton("left",s),this},addRightButton(s){return this.addButton("right",s),this},addTopButton(s){return this.addButton("top",s),this},removeButton(s,t,e){return this.getButtonsSizer(s).removeButton(t,e),this},removeLeftButton(s,t){return this.removeButton("left",s,t),this},removeRightButton(s,t){return this.removeButton("right",s,t),this},removeTopButton(s,t){return this.removeButton("top",s,t),this},removeBottomButton(s,t){return this.removeButton("bottom",s,t),this},clearButtons(s,t){return this.getButtonsSizer(s).clearButtons(t),this},clearLeftButtons(s){return this.clearButtons("left",s),this},clearRightButtons(s){return this.clearButtons("right",s),this},clearTopButtons(s){return this.clearButtons("top",s),this},clearBottomButtonss(s){return this.clearButtons("bottom",s),this},forEachButton(s,t,e){return this.getButtonsSizer(s).forEachButtton(t,e),this},forEachLeftButton(s,t){return this.childrenMap.leftButtonsSizer.forEachButtton(s,t),this},forEachRightButton(s,t){return this.childrenMap.rightButtonsSizer.forEachButtton(s,t),this},forEachTopButton(s,t){return this.childrenMap.topButtonsSizer.forEachButtton(s,t),this},forEachBottomButton(s,t){return this.childrenMap.bottomButtonsSizer.forEachButtton(s,t),this}};const pe=Phaser.Utils.Objects.GetValue;class vv extends us{constructor(t,e){e===void 0&&(e={}),e.column=3,e.row=3,super(t,e),this.type="rexTabs",this.eventEmitter=pe(e,"eventEmitter",this);var f=pe(e,"background",void 0),i=pe(e,"panel",void 0),n=pe(e,"leftButtons",void 0),o=pe(e,"leftButtonsBackground",void 0),r,a=pe(e,"rightButtons",void 0),l=pe(e,"rightButtonsBackground",void 0),h,u=pe(e,"topButtons",void 0),v=pe(e,"topButtonsBackground",void 0),d,c=pe(e,"bottomButtons",void 0),p=pe(e,"bottomButtonsBackground",void 0),g,m=pe(e,"click",void 0);if(f&&this.addBackground(f),i&&this.add(i,1,1,"center",0,!0),n){var x=pe(e,"space.leftButtonsOffset",0),y=pe(e,"space.leftButton",0);r=new Ue(t,{groupName:"left",background:o,buttons:n,orientation:1,space:{item:y},align:pe(e,"align.leftButtons",void 0),click:m,eventEmitter:this.eventEmitter});var T={top:x};this.add(r,0,1,"top",T,!1)}if(a){var C=pe(e,"space.rightButtonsOffset",0),S=pe(e,"space.rightButton",0);h=new Ue(t,{groupName:"right",background:l,buttons:a,orientation:1,space:{item:S},align:pe(e,"align.rightButtons",void 0),click:m,eventEmitter:this.eventEmitter});var T={top:C};this.add(h,2,1,"top",T,!1)}if(u){var E=pe(e,"space.topButtonsOffset",0),M=pe(e,"space.topButton",0);d=new Ue(t,{groupName:"top",background:v,buttons:u,orientation:0,space:{item:M},align:pe(e,"align.topButtons",void 0),click:m,eventEmitter:this.eventEmitter});var T={left:E};this.add(d,1,0,"left",T,!1)}if(c){var O=pe(e,"space.bottomButtonsOffset",0),L=pe(e,"space.bottomButton",0);g=new Ue(t,{groupName:"bottom",background:p,buttons:c,orientation:0,space:{item:L},align:pe(e,"align.bottomButtons",void 0),click:m,eventEmitter:this.eventEmitter});var T={left:O};this.add(g,1,2,"left",T,!1)}this.addChildrenMap("background",f),this.addChildrenMap("panel",i),this.addChildrenMap("leftButtons",n),this.addChildrenMap("rightButtons",a),this.addChildrenMap("topButtons",u),this.addChildrenMap("bottomButtons",c),this.addChildrenMap("leftButtonsSizer",r),this.addChildrenMap("rightButtonsSizer",h),this.addChildrenMap("topButtonsSizer",d),this.addChildrenMap("bottomButtonsSizer",g)}}Object.assign(vv.prototype,wV);yt.register("tabs",function(s){var t=new vv(this.scene,s);return this.scene.add.existing(t),t});Ct(window,"RexPlugins.UI.Tabs",vv);const Fx=Phaser.Math.Percent;var jT=function(s,t,e){var f;return s.y===t.y?f=Fx(e.x,s.x,t.x):s.x===t.x&&(f=Fx(e.y,s.y,t.y)),f},FV=function(s,t,e){if(!!this.enable){pd.x=t,pd.y=e;var f,i;this.reverseAxis?(f=this.getEndPoint(),i=this.getStartPoint()):(f=this.getStartPoint(),i=this.getEndPoint()),this.value=jT(f,i,pd)}},pd={},Ix=function(s,t,e){if(!!this.enable&&!!s.isDown){gd.x=s.worldX,gd.y=s.worldY;var f,i;this.reverseAxis?(f=this.getEndPoint(),i=this.getStartPoint()):(f=this.getStartPoint(),i=this.getEndPoint());var n=jT(f,i,gd);this.stopEaseValue(),this.easeValueDuration===0||Math.abs(this.value-n)<.1?this.value=n:this.easeValueTo(n)}},gd={},qT=function(s,t){t===void 0&&(t=IV);var e=this.childrenMap.thumb,f=e.x,i=e.y;return Ul(e,this.innerLeft,this.innerTop,this.innerWidth,this.innerHeight,s),t.x=e.x,t.y=e.y,e.x=f,e.y=i,t},IV={};const DV=Phaser.Display.Align.LEFT_CENTER,BV=Phaser.Display.Align.TOP_CENTER;var bV=function(s){if(s===void 0&&(s=GV),this.childrenMap.thumb){var t=this.orientation===0?DV:BV;qT.call(this,t,s)}else this.orientation===0?(s.x=this.innerLeft+1,s.y=this.centerY):(s.x=this.centerX,s.y=this.innerTop+1);return s},GV={};const NV=Phaser.Display.Align.RIGHT_CENTER,YV=Phaser.Display.Align.BOTTOM_CENTER;var zV=function(s){if(s===void 0&&(s=VV),this.childrenMap.thumb){var t=this.orientation===0?NV:YV;qT.call(this,t,s)}else this.orientation===0?(s.x=this.innerRight-1,s.y=this.centerY):(s.x=this.centerX,s.y=this.innerBottom-1);return s},VV={};const Dx=Phaser.Math.Linear;var UV=function(s,t,e,f){return f===void 0&&(f=WV),f.x=Dx(t.x,e.x,s),f.y=Dx(t.y,e.y,s),f},WV={},XV=function(s){var t=this.childrenMap.thumb;if(t===void 0)return this;s===void 0&&(s=this.value);var e,f;return this.reverseAxis?(e=this.getEndPoint(),f=this.getStartPoint()):(e=this.getStartPoint(),f=this.getEndPoint()),UV(s,e,f,t),this.resetChildPositionState(t),this};const HV=Phaser.Display.Align.LEFT_CENTER,$V=Phaser.Display.Align.TOP_CENTER,kV=Phaser.Display.Align.RIGHT_CENTER,KV=Phaser.Display.Align.BOTTOM_CENTER;var ZV=function(s){var t=this.childrenMap.indicator;if(t===void 0)return this;s===void 0&&(s=this.value);var e=this.reverseAxis,f,i,n=this.childrenMap.thumb;if(n)if(this.orientation===0){var o=ae(n);if(e){var r=n.x-o*n.originX;f=this.right-r}else{var r=n.x-o*n.originX,a=r+o;f=a-this.left}}else{var l=qt(n);if(e){var h=n.y-l*n.originY;i=this.bottom-h}else{var h=n.y-l*n.originY,u=h+l;i=u-this.top}}else this.orientation===0?f=this.width*s:i=this.height*s;Ys(t,f,i);var v;e?v=this.orientation===0?kV:KV:v=this.orientation===0?HV:$V,AT(t,this,v),this.resetChildPositionState(t)};const je=Phaser.Utils.Objects.GetValue,JV=Phaser.Math.Clamp,QV=Phaser.Math.Linear,Bx=Phaser.Math.Percent,jV=Phaser.Math.Snap.To;class ga extends Se{constructor(t,e){super(t,e),this.type="rexSlider",this.eventEmitter=je(e,"eventEmitter",this),this.reverseAxis=je(e,"reverseAxis",!1);var f=je(e,"background",void 0),i=je(e,"track",void 0),n=je(e,"indicator",void 0),o=je(e,"thumb",void 0);f&&this.addBackground(f),i&&this.add(i,{proportion:1,expand:!0,minWidth:this.orientation===0?0:void 0,minHeight:this.orientation===1?0:void 0}),n&&this.pin(n),o&&this.pin(o);var r=je(e,"input",0);switch(typeof r=="string"&&(r=qV[r]),r){case 0:o&&(o.setInteractive(),this.scene.input.setDraggable(o),o.on("drag",FV,this).on("dragstart",function(h){this.eventEmitter.emit("inputstart",h)},this).on("dragend",function(h){this.eventEmitter.emit("inputend",h)},this));break;case 1:this.setInteractive().on("pointerdown",Ix,this).on("pointermove",Ix,this).on("pointerdown",function(h){this.eventEmitter.emit("inputstart",h)},this).on("pointerup",function(h){this.eventEmitter.emit("inputend",h)},this).on("pointerover",function(h){h.isDown&&this.eventEmitter.emit("inputstart",h)},this).on("pointerout",function(h){h.isDown&&this.eventEmitter.emit("inputend",h)},this);break}this.addChildrenMap("background",f),this.addChildrenMap("track",i),this.addChildrenMap("indicator",n),this.addChildrenMap("thumb",o);var a=je(e,"valuechangeCallback",null);if(a!==null){var l=je(e,"valuechangeCallbackScope",void 0);this.eventEmitter.on("valuechange",a,l)}this.setEnable(je(e,"enable",void 0)),this.setGap(je(e,"gap",void 0)),this.setValue(je(e,"value",0),je(e,"min",void 0),je(e,"max",void 0)),this.setEaseValuePropName("value").setEaseValueDuration(je(e,"easeValue.duration",0)).setEaseValueFunction(je(e,"easeValue.ease","Linear"))}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}setGap(t){return this.gap=t,this}get value(){return this._value}set value(t){this.gap!==void 0&&(t=jV(t,this.gap));var e=this._value;this._value=JV(t,0,1),e!==this._value&&(this.updateThumb(this._value),this.updateIndicator(this._value),this.eventEmitter.emit("valuechange",this._value,e,this.eventEmitter))}setValue(t,e,f){return t==null?this:(e!==void 0&&(t=Bx(t,e,f)),this.value=t,this)}addValue(t,e,f){return e!==void 0&&(t=Bx(t,e,f)),this.value+=t,this}getValue(t,e){var f=this.value;return t!==void 0&&(f=QV(t,e,f)),f}runLayout(t,e,f){return this.ignoreLayout?this:(super.runLayout(t,e,f),this.updateThumb(),this.updateIndicator(),this)}}const qV={pan:0,drag:0,click:1,none:-1};var _V={getStartPoint:bV,getEndPoint:zV,updateThumb:XV,updateIndicator:ZV};Object.assign(ga.prototype,_V,Ao);yt.register("slider",function(s){var t=new ga(this.scene,s);return this.scene.add.existing(t),t});Ct(window,"RexPlugins.UI.Slider",ga);var _T={v:0,vertical:0,h:1,horizontal:1};const t4=Phaser.Utils.Objects.GetValue;var iu=function(s,t){var e=t4(s,"scrollMode",0);return typeof e=="string"&&(e=_T[e]),e};const vi=Phaser.Utils.Objects.GetValue;class nu extends Se{constructor(t,e){super(t,e),this.type="rexScrollBar";var f=vi(e,"background",void 0),i=vi(e,"buttons",void 0),n=vi(i,"top",vi(i,"left",void 0)),o=vi(i,"bottom",vi(i,"right",void 0)),r,a=vi(e,"slider",void 0);if(f&&this.addBackground(f),n){this.add(n);var l=new vo(n);l.on("intouch",function(){if(!!this.enable){var g=r.reverseAxis?this.scrollStep:-this.scrollStep;this.value+=g}},this)}if(a){a.orientation=this.orientation,a.eventEmitter=this,a.value=null;var h;if(this.orientation===0){var u=vi(a,"width",void 0);h=u===void 0?1:0}else{var v=vi(a,"height",void 0);h=v===void 0?1:0}r=new ga(t,a),t.add.existing(r),this.add(r,{proportion:h})}if(o){this.add(o);var l=new vo(o);l.on("intouch",function(){if(!!this.enable){var m=r.reverseAxis?-this.scrollStep:this.scrollStep;this.value+=m}},this)}var d=[n,o];this.addChildrenMap("background",f),this.addChildrenMap("slider",r),this.addChildrenMap("buttons",d);var c=vi(e,"valuechangeCallback",null);if(c!==null){var p=vi(e,"valuechangeCallbackScope",void 0);this.on("valuechange",c,p)}this.setEnable(vi(e,"enable",void 0)),this.setValue(vi(e,"value",0)),this.setScrollStep(vi(i,"step",.01))}setScrollStep(t){return this.scrollStep=t,this}get enable(){return this.childrenMap.slider?this.childrenMap.slider.enable:!1}set enable(t){this.childrenMap.slider&&this.childrenMap.slider.setEnable(t)}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}get value(){return this.childrenMap.slider?this.childrenMap.slider.value:0}set value(t){!this.childrenMap.slider||(this.childrenMap.slider.value=t)}setValue(t,e,f){return this.childrenMap.slider&&this.childrenMap.slider.setValue(t,e,f),this}addValue(t,e,f){return this.childrenMap.slider&&this.childrenMap.slider.addValue(t,e,f),this}getValue(t,e){return this.childrenMap.slider?this.childrenMap.slider.getValue(t,e):0}easeValueTo(t,e,f){return this.childrenMap.slider&&this.childrenMap.slider.easeValueTo(t,e,f),this}stopEaseValue(){return this.childrenMap.slider&&this.childrenMap.slider.stopEaseValue(),this}setEaseValueDuration(t){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueDuration(t),this}setEaseValueFunction(t){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueFunction(t),this}}class e4 extends nu{constructor(t,e){e===void 0&&(e={});var f=pr(e);e={slider:f},e.orientation=f.orientation,delete f.orientation,e.background=f.background,delete f.background,e.buttons=f.buttons,delete f.buttons,super(t,e);var i=this.childrenMap.slider;this.addChildrenMap("track",i.childrenMap.track),this.addChildrenMap("indicator",i.childrenMap.indicator),this.addChildrenMap("thumb",i.childrenMap.thumb)}}class i4 extends $n{constructor(t,e){super(e),this.parent=t,this.init()}init(){this.start("IDLE")}next_IDLE(){var t,e=this.parent,f=e.dragState;return f.isDown&&(t=e.dragThreshold===0?"DRAG":"DRAGBEGIN"),t}update_IDLE(t,e){this.next()}next_DRAGBEGIN(){var t,e=this.parent,f=e.dragState;return f.isDown?t=f.pointer.getDistance()>=e.dragThreshold?"DRAG":"DRAGBEGIN":t="IDLE",t}update_DRAGBEGIN(t,e){this.next()}next_DRAG(){var t,e=this.parent,f=e.dragState;return f.isUp&&(e.outOfBounds?t="BACK":e.slidingEnable?t="SLIDE":t="IDLE"),t}update_DRAG(t,e){var f=this.parent,i=f.dragState;i.justMoved&&f.dragging(),this.next()}enter_DRAG(){this.parent.onDragStart()}exit_DRAG(){this.parent.onDragEnd()}next_SLIDE(){var t,e=this.parent,f=e.dragState;return f.isDown?t="DRAG":e.isSliding||(t="IDLE"),t}enter_SLIDE(){this.parent.onSliding()}exit_SLIDE(){this.parent.stop()}update_SLIDE(t,e){this.parent.sliding(t,e),this.next()}next_BACK(){var t,e=this.parent,f=e.dragState;return f.isDown?t="DRAG":e.isPullBack||(t="IDLE"),t}enter_BACK(){this.parent.onPullBack()}exit_BACK(){this.parent.stop()}update_BACK(t,e){this.parent.pullBack(t,e),this.next()}}const $h=Phaser.Utils.Objects.GetValue,n4=Phaser.Math.Distance.Between;class s4 extends He{constructor(t,e){super(t,e),this._enable=void 0,t.setInteractive($h(e,"inputConfig",void 0)),this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.isInTouched=!1,this.holdStartTime=void 0,this.x=void 0,this.y=void 0,this.preX=void 0,this.preY=void 0,this.localX=void 0,this.localY=void 0,this.justMoved=!1,this.setEnable($h(t,"enable",!0)),this.holdThreshold=$h(t,"holdThreshold",50),this.pointerOutReleaseEnable=$h(t,"pointerOutRelease",!0),this}boot(){this.parent.on("pointerdown",this.onPointIn,this),this.parent.on("pointerup",this.onPointOut,this),this.pointerOutReleaseEnable&&this.parent.on("pointerout",this.onPointOut,this),this.parent.on("pointermove",this.onPointerMove,this),this.scene.sys.events.on("preupdate",this.preupdate,this)}shutdown(t){this.isShutdown||(this.scene.sys.events.off("preupdate",this.preupdate,this),this.pointer=void 0,super.shutdown(t))}get enable(){return this._enable}set enable(t){this._enable!==t&&(t||(this.isInTouched=!1,this.pointer=void 0),this._enable=t)}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setPointerOutReleaseEnable(t){return t===void 0&&(t=!0),this.pointerOutReleaseEnable=t,this}get isDown(){return this.pointer&&this.pointer.isDown}get isUp(){return!this.isDown}get dx(){return this.x-this.preX}get dy(){return this.y-this.preY}get dt(){var t=Ec(this.scene);return t}get speed(){if(this.x===this.preX&&this.y===this.preY)return 0;var t=n4(this.preX,this.preY,this.x,this.y),e=t/(this.dt*.001);return e}get speedX(){return this.dx/(this.dt*.001)}get speedY(){return this.dy/(this.dt*.001)}onPointIn(t,e,f){!this.enable||!t.isDown||this.pointer!==void 0||(this.pointer=t,this.localX=e,this.localY=f)}onPointOut(t){!this.enable||this.pointer!==t||(this.pointer=void 0)}onPointerMove(t,e,f){!this.enable||!t.isDown||this.pointer!==t||(this.localX=e,this.localY=f)}preupdate(t,e){if(!!this.enable){var f=this.pointer;this.justMoved=!1,f&&!this.isInTouched?(this.x=f.worldX,this.y=f.worldY,this.preX=f.worldX,this.preY=f.worldY,this.isInTouched=!0,this.holdStartTime=void 0,this.emit("touchstart",f,this.localX,this.localY)):f&&this.isInTouched?this.x===f.x&&this.y===f.y?this.holdStartTime===void 0?this.holdStartTime=t:t-this.holdStartTime>this.holdThreshold&&(this.preX=this.x,this.preY=this.y):(this.preX=this.x,this.preY=this.y,this.x=f.worldX,this.y=f.worldY,this.holdStartTime=void 0,this.justMoved=!0,this.emit("touchmove",f,this.localX,this.localY)):!f&&this.isInTouched&&(this.isInTouched=!1,this.holdStartTime=void 0,this.emit("touchend",f))}}}const md=Phaser.Utils.Objects.GetValue;class r4{constructor(t){this.resetFromJSON(t)}resetFromJSON(t){return this.setValue(md(t,"value",0)),this.setSpeed(md(t,"speed",0)),this.setAcceleration(md(t,"acceleration",0)),this}reset(){this.setValue(0),this.setSpeed(0),this.setAcceleration(0)}setValue(t){return this.value=t,this}setSpeed(t){return this.speed=t,this}setAcceleration(t){return this.acceleration=t,this}updateSpeed(t){return this.acceleration!==0&&(this.speed+=this.acceleration*t,this.speed<0&&(this.speed=0)),this}getDeltaValue(t){return this.updateSpeed(t),this.speed<=0?0:this.speed*t}update(t){return this.updateSpeed(t),this.speed>0&&(this.value+=this.getDeltaValue(t)),this}get isMoving(){return this.speed>0}}class a4{constructor(){this.value,this.dir,this.movement=new r4}init(t,e,f,i,n){return this.value=t,this.end=n,n!==void 0?this.dir=t<n:this.dir=e,this.movement.setSpeed(f).setAcceleration(-i),this}stop(){this.movement.reset()}update(t){var e=this.movement.getDeltaValue(t);return this.dir||(e=-e),this.end===void 0?this.value+=e:e===0?this.value=this.end:(this.value+=e,this.dir?this.value>this.end&&(this.value=this.end):this.value<this.end&&(this.value=this.end)),this}get isMoving(){return this.movement.isMoving}}const Ge=Phaser.Utils.Objects.GetValue,o4=Phaser.Math.Clamp;class h4 extends He{constructor(t,e){super(t,e);var f=Ge(e,"enable",!0);this._state=new i4(this,{enable:f,eventEmitter:!1});var i={inputConfig:Ge(e,"inputConfig",void 0),enable:f,pointerOutRelease:Ge(e,"pointerOutRelease",!0),eventEmitter:!1};this.dragState=new s4(t,i),this._enable=void 0,this._value=void 0,this._slowDown=new a4;var n=Ge(e,"valuechangeCallback",null);if(n!==null){var o=Ge(e,"valuechangeCallbackScope",void 0);this.on("valuechange",n,o)}if(n=Ge(e,"overmaxCallback",null),n!==null){var o=Ge(e,"overmaxCallbackScope",void 0);this.on("overmax",n,o)}if(n=Ge(e,"overminCallback",null),n!==null){var o=Ge(e,"overminCallbackScope",void 0);this.on("overmin",n,o)}this.resetFromJSON(e),this.boot()}resetFromJSON(t){this.setOrientationMode(Ge(t,"orientation",0)),this.setDragThreshold(Ge(t,"threshold",10)),this.setSlidingDeceleration(Ge(t,"slidingDeceleration",5e3)),this.setBackDeceleration(Ge(t,"backDeceleration",2e3));var e=Ge(t,"bounds",void 0);return e?this.setBounds(e):this.setBounds(Ge(t,"max",0),Ge(t,"min",0)),this.setValue(Ge(t,"value",this.maxValue||0)),this.setEnable(Ge(t,"enable",!0)),this}boot(){this.scene.sys.events.on("preupdate",this._state.update,this._state)}shutdown(t){this.isShutdown||(this.scene.sys.events.off("preupdate",this._state.update,this._state),this._state.destroy(t),this.dragState.destroy(t),this._state=void 0,this.dragState=void 0,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return this._enable=t,this._state.setEnable(t),this.dragState.setEnable(t),this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setOrientationMode(t){return typeof t=="string"&&(t=l4[t]),this.orientationMode=t,this}setDragThreshold(t){return this.dragThreshold=t,this}setSlidingDeceleration(t){return this.slidingDeceleration=t,this}setBackDeceleration(t){return this.backDeceleration=t,this}setBounds(t,e){if(Array.isArray(t)){var f=t;t=f[0],e=f[1]}return t<e?(this.minValue=t,this.maxValue=e):(this.minValue=e,this.maxValue=t),this}get value(){return this._value}set value(t){if(t!==this._value){var e=this._value,f=this.overMax(t),i=this.overMin(t);f&&this.emit("overmax",t,e),i&&this.emit("overmin",t,e),this.backEnable||(f&&(t=this.maxValue),i&&(t=this.minValue)),this._value=t,this.emit("valuechange",t,e)}}setValue(t,e){return e===void 0&&(e=!1),e&&(t=o4(t,this.minValue,this.maxValue)),this.value=t,this}addValue(t,e){return this.setValue(this.value+t,e),this}get state(){return this._state.state}get isDragging(){return this.dragState.isInTouched}get outOfMaxBound(){return this.overMax(this.value)}get outOfMinBound(){return this.overMin(this.value)}get outOfBounds(){return this.outOfMinBound||this.outOfMaxBound}overMax(t){return this.maxValue!=null&&t>this.maxValue}overMin(t){return this.minValue!=null&&t<this.minValue}get backEnable(){return typeof this.backDeceleration=="number"}get isPullBack(){return this._slowDown.isMoving}get slidingEnable(){return typeof this.slidingDeceleration=="number"}get isSliding(){return this._slowDown.isMoving}get dragDelta(){return this.orientationMode===0?this.dragState.dy:this.orientationMode===1?this.dragState.dx:0}get dragSpeed(){return this.orientationMode===0?this.dragState.speedY:this.orientationMode===1?this.dragState.speedX:0}onDragStart(){this.emit("dragstart")}onDragEnd(){this.emit("dragend")}dragging(){this.value+=this.dragDelta}onSliding(){var t=this.value,e=this.dragSpeed;if(e===0){this._slowDown.stop(),this._state.next();return}var f=this.slidingDeceleration;this._slowDown.init(t,e>0,Math.abs(e),f)}sliding(t,e){e*=.001;var f=this._slowDown.update(e).value;this.overMax(f)?(this.value=this.maxValue,this._slowDown.stop()):this.overMin(f)?(this.value=this.minValue,this._slowDown.stop()):this.value=f}onPullBack(){var t=this.value,e=this.outOfMinBound?this.minValue:this.maxValue,f=Math.abs(e-t),i=this.backDeceleration,n=Math.sqrt(2*i*f);this._slowDown.init(t,void 0,n,i,e)}pullBack(t,e){e*=.001,this.value=this._slowDown.update(e).value,this._slowDown.isMoving||this._state.next()}stop(){this._slowDown.stop()}}const l4={y:0,v:0,vertical:0,x:1,h:1,horizontal:1},kh=Phaser.Utils.Objects.GetValue;class u4 extends He{constructor(t,e){if(super(t,e),this.parent!==this.scene?this.focusMode=kh(e,"focus",!1):this.focusMode=!1,this.setSpeed(kh(e,"speed",.1)),this.setEnable(kh(e,"enable",!0)),!this.focusMode)this.scene.input.on("wheel",this.onSceneScroll,this);else{var t=this.parent;t.setInteractive(kh(e,"inputConfig",void 0)).on("wheel",function(i,n,o,r,a){!this.enable||this.scroll(o)},this)}}destroy(){this.focusMode||this.scene.input.off("wheel",this.onSceneScroll,this)}onSceneScroll(t,e,f,i,n,o){!this.enable||this.scroll(i)}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}setSpeed(t){return this.speed=t,this}scroll(t){t*=this.speed,this.emit("scroll",t,this.parent,this)}}const we=Phaser.Utils.Objects.GetValue;var f4=function(s,t){var e=s.scene,f=iu(t),i=new Se(e,{orientation:f}),n=we(t,"child.gameObject",void 0),o=0,r=we(t,"slider",void 0),a,l=0,h=we(r,"position",0);typeof h=="string"&&(h=d4[h]);var u=h===0,v=we(t,"scroller",!0),d,c=we(t,"mouseWheelScroller",!1),p;if(n){var g=we(t,"space.child",0);if(s.childMargin={},typeof g!="number"){var m=g;f===0?(o={left:we(m,"left",0),right:we(m,"right",0)},s.childMargin.top=we(m,"top",0),s.childMargin.bottom=we(m,"bottom",0)):(o={top:we(m,"top",0),bottom:we(m,"bottom",0)},s.childMargin.top=we(m,"left",0),s.childMargin.bottom=we(m,"right",0))}else r&&(f===0?o=u?{right:g}:{left:g}:o=u?{bottom:g}:{top:g}),s.childMargin.top=0,s.childMargin.bottom=0;r?(r===!0&&(r={}),r.orientation=i.orientation===0?1:0,a=new e4(e,r),l=we(t,"space.slider",0),s.adaptThumbSizeMode=we(r,"adaptThumbSize",!1),s.minThumbSize=we(r,"minThumbSize",void 0)):(s.adaptThumbSizeMode=!1,s.minThumbSize=void 0),v&&(v===!0&&(v={}),v.orientation=f,d=new h4(n,v)),c&&(p=new u4(n,c)),a&&!u&&i.add(a,{proportion:0,align:"center",padding:l,expand:!0});var x=we(t,"child.proportion",1),y=we(t,"child.expand",!0);i.add(n,{proportion:x,align:"center",padding:o,expand:y}),a&&u&&i.add(a,{proportion:0,align:"center",padding:l,expand:!0})}return a&&a.on("valuechange",function(T){s.t=T,s.emit("scroll",s)}),d&&d.on("valuechange",function(T){s.childOY=T,s.emit("scroll",s)}),p&&p.on("scroll",function(T){s.addChildOY(-T,!0)}),s.addChildrenMap("child",n),s.addChildrenMap("slider",a),s.addChildrenMap("scroller",d),s.addChildrenMap("mouseWheelScroller",p),i},d4={right:0,left:1,bottom:0,top:1};Se.prototype.runLayout;var c4=function(){var s=this.topChildOY,t=this.bottomChildOY,e=this.childrenMap.scroller,f=this.childrenMap.slider;return e&&e.setBounds(t,s),f&&f.setEnable(t!==s),this.updateController(),this.adaptThumbSizeMode&&v4.call(this),this},v4=function(){var s=Math.min(this.childVisibleHeight/this.childHeight,1),t=this.childrenMap.slider,e=t.childrenMap.track,f=t.childrenMap.thumb,i=this.minThumbSize;if(this.scrollMode===0){var n=e.displayHeight*s;i!==void 0&&n<i&&(n=i),Ys(f,void 0,n)}else{var o=e.displayWidth*s;i!==void 0&&o<i&&(o=i),Ys(f,o,void 0)}p4.call(this)},p4=function(){var s=this.childrenMap.slider,t=s.minWidth,e=s.minHeight;s.minWidth=s.width,s.minHeight=s.height,s.layout(),s.minWidth=t,s.minHeight=e},g4=function(){var s=this.childrenMap.scroller,t=this.childrenMap.slider;s&&s.setValue(this.childOY),t&&t.setValue(this.t)};const Fn=Phaser.Utils.Objects.GetValue,bx=Phaser.Math.Clamp;class su extends Se{constructor(t,e){e===void 0&&(e={});var f=iu(e);e.orientation=f===0?1:0,super(t,e),this.type=Fn(e,"type","rexScrollable");var i=Fn(e,"background",void 0),n=f4(this,e),o=Fn(e,"header",void 0),r=Fn(e,"footer",void 0);if(i&&this.addBackground(i),o){var a=Fn(e,"align.header","center"),l=Fn(e,"space.header",0),h;f===0?h={bottom:l}:h={right:l};var u=Fn(e,"expand.header",!0);this.add(o,{proportion:0,align:a,padding:h,expand:u})}if(n&&this.add(n,{proportion:1,align:"center",padding:0,expand:!0}),r){var a=Fn(e,"align.footer","center"),v=Fn(e,"space.footer",0),h;f===0?h={top:v}:h={left:v};var u=Fn(e,"expand.footer",!0);this.add(r,{proportion:0,align:a,padding:h,expand:u})}this.addChildrenMap("background",i),this.addChildrenMap("header",o),this.addChildrenMap("footer",r),this.runLayoutFlag=!1}runLayout(t,e,f){return this.ignoreLayout?this:(super.runLayout(t,e,f),this.resizeController(),this.runLayoutFlag||(this.runLayoutFlag=!0,this.setT(0)),this)}set t(t){var e=this.childMargin;if(e.top!==0||e.bottom!==0){var f=this.childrenMap.child,i=f.topChildOY-f.bottomChildOY,n=i+e.top+e.bottom,o=n*t-e.top;t=o/i}this.childrenMap.child.t=t,this.updateController()}get t(){var t=this.childrenMap.child.t,e=this.childMargin;if(e.top!==0||e.bottom!==0){var f=this.childrenMap.child,i=f.topChildOY-f.bottomChildOY,n=i+e.top+e.bottom,o=i*t+e.top;t=o/n}return t}set childOY(t){this.childrenMap.child.childOY=t,this.updateController()}get childOY(){return this.childrenMap.child.childOY}get topChildOY(){return this.childrenMap.child.topChildOY+this.childMargin.top}get bottomChildOY(){return this.childrenMap.child.bottomChildOY-this.childMargin.bottom}get childVisibleHeight(){return this.childrenMap.child.childVisibleHeight}get childHeight(){return this.childrenMap.child.childHeight}get isOverflow(){var t=this.childrenMap.child;return t.topChildOY!==t.bottomChildOY}get scrollMode(){return this.orientation===0?1:0}setChildOY(t,e){return e===void 0&&(e=!1),e&&(t=bx(t,this.bottomChildOY,this.topChildOY)),this.childOY=t,this}addChildOY(t,e){return this.setChildOY(this.childOY+t,e),this}setT(t,e){return e===void 0&&(e=!1),e&&(t=bx(t,0,1)),this.t=t,this}addT(t,e){return this.setT(this.t+t,e),this}scrollToTop(){return this.t=0,this}scrollToBottom(){return this.t=1,this}get sliderEnable(){var t=this.childrenMap.slider;return t?t.enable:!1}set sliderEnable(t){var e=this.childrenMap.slider;!e||e.setEnable(t)}setSliderEnable(t){return t===void 0&&(t=!0),this.sliderEnable=t,this}get scrollerEnable(){var t=this.childrenMap.scroller;return t?t.enable:!1}set scrollerEnable(t){var e=this.childrenMap.scroller;!e||e.setEnable(t)}setScrollerEnable(t){return t===void 0&&(t=!0),this.scrollerEnable=t,this}get mouseWheelScrollerEnable(){var t=this.childrenMap.mouseWheelScroller;return t?t.enable:!1}set mouseWheelScrollerEnable(t){var e=this.childrenMap.mouseWheelScrollerEnable;!e||e.setEnable(t)}setMouseWheelScrollerEnable(t){return t===void 0&&(t=!0),this.mouseWheelScrollerEnable=t,this}setDropZoneEnable(t){t===void 0&&(t=!0);var e=this.childrenMap.child;return e.setInteractive(),e.input.dropZone=t,this}}var m4={resizeController:c4,updateController:g4};Object.assign(su.prototype,m4);class tC{constructor(t,e){this.container=null,this._deltaHeight=0,this.setParent(t)}setParent(t){this.parent=t,this.parentContainer=t.getParentContainer()}destroy(t){t===void 0&&(t=!1),t||this.destroyContainer(),this.deltaHeight=0,this.data=void 0,this.container=null,this.parent=void 0,this.parentContainer=void 0}get table(){return this.parent}get scrollMode(){return this.parentContainer.scrollMode}get colIndx(){return this.parent.cellIndxeToColIndex(this.index)}get rowIndx(){return this.parent.cellIndxeToRowIndex(this.index)}getContainer(){return this.container}setContainer(t){return t?(this.container&&this.container.destroy(),this.container=t,this.parentContainer.add(t),this):(this.destroyContainer(),this)}destroyContainer(){return this.container&&(this.container.destroy(),this.container=null),this}popContainer(){if(this.container){var t=this.container;return this.container=null,this.parentContainer.remove(t),t}else return null}setXY(t,e){return this.container&&this.parentContainer.setChildLocalPosition(this.container,t,e),this}get deltaHeight(){return this._deltaHeight}set deltaHeight(t){t==null&&(t=0);var e=this.parent;this._deltaHeight===0&&t!==0?e.nonZeroDeltaHeightCount++:this._deltaHeight!==0&&t===0&&e.nonZeroDeltaHeightCount--;var f=this._deltaHeight!==t;if(this._deltaHeight=t,f){e.resetTotalRowsHeight();var i=this.scrollMode===0?"cellheightchange":"cellwidthchange";this.parentContainer.emit(i,this,this.container,this.parentContainer)}}get deltaWidth(){return this.deltaHeight}set deltaWidth(t){this.deltaHeight=t}setDeltaHeight(t){return this.deltaHeight=t,this}setDeltaWidth(t){return this.deltaHeight=t,this}get height(){return this.scrollMode===0?this.deltaHeight+this.parent.defaultCellHeight:this.parent.defaultCellWidth}set height(t){this.scrollMode!==1&&this.setDeltaHeight(t-this.parent.defaultCellHeight)}setHeight(t){return this.height=t,this}get width(){return this.scrollMode===0?this.parent.defaultCellWidth:this.deltaHeight+this.parent.defaultCellHeight}set width(t){this.scrollMode!==0&&this.setDeltaHeight(t-this.parent.defaultCellHeight)}setWidth(t){return this.width=t,this}get scene(){return this.parentContainer.scene}}Object.assign(tC.prototype,El);const Kh=Phaser.Utils.Objects.GetValue,x4=Phaser.Utils.Array.SpliceOne;class y4{constructor(t,e){this.parent=t,this.cells=[],this.cellPool=new bs,this.resetFromJSON(e)}resetFromJSON(t){return this.colCount=void 0,this.nonZeroDeltaHeightCount=0,this.resetTotalRowsHeight(),this.setDefaultCellHeight(Kh(t,"cellHeight",30)),this.setDefaultCellWidth(Kh(t,"cellWidth",30)),this.initCells(Kh(t,"cellsCount",0)),this.setColumnCount(Kh(t,"columns",1)),this}destroy(t){this.cellPool.destroy(),this.cells=void 0,this.parent=void 0}get defaultCellHeightMode(){return this.nonZeroDeltaHeightCount===0}setDefaultCellHeight(t){return this.defaultCellHeight=t,this}setDefaultCellWidth(t){return this.defaultCellWidth=t,this}initCells(t){var e=this.cells;e.length=t;for(var f=0;f<t;f++)e[f]=null;return this}insertNewCells(t,e){var f=this.cells;if(t===f.length){var i=t+e;f.legth=i;for(var n=t;n<i;n++)f[n]=null}else{var o=[];o.length=e;for(var n=0;n<e;n++)o[n]=null;this.cells.splice(t,0,...o)}return this.resetTotalRowsHeight(),this}removeCells(t,e){for(var f=t+e,i=t;i<f;i++)this.freeCell(i);return f===this.cells.length?this.cells.length=t:(e===1?x4(this.cells,t):this.cells.splice(t,e),this.buildCellIndex(t)),this.resetTotalRowsHeight(),this}setColumnCount(t){return this.colCount=t,this.resetTotalRowsHeight(),this}get rowCount(){return Math.ceil(this.cells.length/this.colCount)}get cellsCount(){return this.cells.length}isValidCellIdx(t){return t>=0&&t<this.cells.length}heightToRowIndex(t,e){if(this.defaultCellHeightMode){var r=t/this.defaultCellHeight;return e?r=Math.ceil(r):r=Math.floor(r),r}for(var f=this.rowCount,i=t,n,o,r=0;;)if(o=this.getRowHeight(r),i-=o,n=r>=0&&r<f,i>0&&n)r+=1;else{if(i===0)return r;if(e){var a=r;r+=1,n=r>=0&&r<f,n||(r=a)}return r}}widthToColIndex(t,e){var f=t/this.defaultCellWidth;return e?f=Math.ceil(f):f=Math.floor(f),f}colRowToCellIndex(t,e){return t>=this.colCount?null:e*this.colCount+t}rowIndexToHeight(t,e){if(this.defaultCellHeightMode)return(e-t+1)*this.defaultCellHeight;for(var f,i=0,n=t;n<=e;n++)f=this.getRowHeight(n),i+=f;return i}colIndexToWidth(t,e){return(e-t+1)*this.defaultCellWidth}getRowHeight(t){var e=this.colCount;if(e<=1)return this.getCellHeight(this.colRowToCellIndex(0,t));for(var f=0,i,n=0;n<e;n++)i=this.getCellHeight(this.colRowToCellIndex(n,t)),f<i&&(f=i);return f}getColWidth(t){return this.defaultCellWidth}getCellHeight(t){if(!this.isValidCellIdx(t))return 0;var e;if(this.defaultCellHeightMode)e=this.defaultCellHeight;else{var f=this.getCell(t,!1),i=f?f.deltaHeight:0;e=this.defaultCellHeight+i}return e}resetTotalRowsHeight(){this._totalRowsHeight=null}get totalRowsHeight(){return this._totalRowsHeight===null&&(this._totalRowsHeight=this.rowIndexToHeight(0,this.rowCount-1)),this._totalRowsHeight}get totalColumnWidth(){return this.colCount*this.defaultCellWidth}cellIndxeToColIndex(t){return t%this.colCount}cellIndxeToRowIndex(t){return Math.floor(t/this.colCount)}getCell(t,e){if(!this.isValidCellIdx(t))return null;if(e===void 0&&(e=!0),this.cells[t]===null&&e){var f=this.newCell(t);this.cells[t]=f}return this.cells[t]}newCell(t){var e=this.cellPool.pop();return e===null?e=new tC(this):e.setParent(this),e.index=t,e}buildCellIndex(t){t===void 0&&(t=0);for(var e=this.cells,f,i=t,n=e.length;i<n;i++)f=e[i],f&&(f.index=i);return this}getParentContainer(){return this.parent}freeCell(t){return typeof t=="number"&&(t=this.cells[t]),t?(t.destroy(),this.cellPool.push(t),this):this}}var T4=function(s){var t=this.table,e=this.topTableOY,f=this.bottomTableOY,i=s>this.topTableOY,n=s<this.bottomTableOY;if(this.clampTableOXY){var o=t.rowCount,r=t.heightToRowIndex(this.instHeight,!0);o<r?s=0:i?s=e:n&&(s=f)}return this._tableOY!==s&&(this._tableOY=s),i&&(this.execeedTopState||this.emit("execeedtop",this,s,e)),this.execeedTopState=i,n&&(this.execeedBottomState||this.emit("execeedbottom",this,s,f)),this.execeedBottomState=n,this},C4=function(s){var t=this.table,e=this.leftTableOX,f=this.rightTableOX,i=s>this.leftTableOX,n=s<this.rightTableOX;if(this.clampTableOXY){var o=t.colCount,r=t.widthToColIndex(this.instWidth,!0);o<r?s=0:i?s=e:n&&(s=f)}return this._tableOX!==s&&(this._tableOX=s),i&&(this.execeedLeftState||this.emit("execeedleft",this,s,e)),this.execeedLeftState=i,n&&(this.execeedRightState||this.emit("execeedright",this,s,f)),this.execeedRightState=n,this},eC=function(s){return s.hasOwnProperty("geometryMask")?s.geometryMask:s.bitmapMask};const S4=Phaser.Geom.Intersects.RectangleToRectangle,E4=Phaser.Geom.Rectangle.Overlaps;var P4=function(s,t,e){if(!!t){e===void 0&&(e=s.getAllChildren());for(var f=s.getBounds(),i=eC(t),n,o,r,a=0,l=e.length;a<l;a++)if(n=e[a],!n.hasOwnProperty("isRexContainerLite")&&n!==i&&!!M4(n))if(n.getBounds)switch(o=n.getBounds(o),r=A4(f,o),r){case 4:O4(s,n);break;case 0:S4(f,o)||E4(f,o)?xd(s,n,t):R4(s,n);break;default:xd(s,n,t);break}else xd(s,n,t)}},M4=function(s){if(!s.displayList)return!1;for(;;){var t=s.rexContainer;if(t)if(t.visible){var e=t.parent;if(e){s=e;continue}else return!0}else return!1;else return s.visible}},A4=function(s,t){var e=0,f=t.top,i=t.bottom,n=t.left,o=t.right;return e+=s.contains(n,f)?1:0,e+=s.contains(n,i)?1:0,e+=s.contains(o,f)?1:0,e+=s.contains(o,i)?1:0,e},O4=function(s,t,e){s.setChildMaskVisible(t,!0),t.clearMask&&t.clearMask()},xd=function(s,t,e){s.setChildMaskVisible(t,!0),t.setMask&&t.setMask(e)},R4=function(s,t,e){s.setChildMaskVisible(t,!1),t.clearMask&&t.clearMask()};const yd=Phaser.Utils.Objects.GetValue,L4={update:0,everyTick:1};var iC={setupChildrenMask(s){return s===!1?this:(this.setMaskUpdateMode(yd(s,"updateMode",0)),this.enableChildrenMask(yd(s,"padding",0)),this.setMaskLayer(yd(s,"layer",void 0)),this.startMaskUpdate(),this)},destroyChildrenMask(){return this.childrenMask?(this.stopMaskUpdate(),this.childrenMask.destroy(),this.childrenMask=void 0,this):this},setMaskUpdateMode(s){return typeof s=="string"&&(s=L4[s]),this.maskUpdateMode=s,this},startMaskUpdate(){this.scene.game.events.on("poststep",this.maskChildren,this)},stopMaskUpdate(){this.scene.game.events.off("poststep",this.maskChildren,this)},enableChildrenMask(s){var t=po.call(this,null,this,0,s);return this.childrenMask=t.createGeometryMask(),this},setMaskChildrenFlag(s){return s===void 0&&(s=!0),this.maskChildrenFlag=s,this},setMaskLayer(s){return this.maskLayer=s,this},maskChildren(){return!this.childrenMask||!this.maskChildrenFlag||this.alpha===0||!this.visible?this:(this.layer?this.layer.setMask(this.childrenMask):this.maskLayer?(this.addToLayer(this.maskLayer),this.maskLayer.setMask(this.childrenMask)):P4(this,this.childrenMask),this.maskUpdateMode===0&&(this.maskChildrenFlag=!1),this)},layoutChildrenMask(){if(!this.childrenMask)return this;var s=eC(this.childrenMask);return s.setPosition().resize(),this.resetChildPositionState(s),this}},w4=function(){if(this.cellsCount!==0){var s=this.table,t=s.heightToRowIndex(-this.tableOY);t<=0&&(t=0);var e=t,f=s.widthToColIndex(-this.tableOX);f<=0&&(f=0);for(var i=f,n=s.colRowToCellIndex(i,e),o=this.bottomBound,r=this.rightBound,a=s.cellsCount-1,l=s.colCount-1,h=this.getCellTLX(i),u=h,v=this.getCellTLY(e);v<o&&n<=a;){if(this.table.isValidCellIdx(n)){var d=s.getCell(n,!0);this.visibleCells.set(d),this.preVisibleCells.contains(d)||this.showCell(d),this.scrollMode===0?d.setXY(u,v):d.setXY(v,u)}u<r&&i<l?(u+=s.getColWidth(i),i+=1):(u=h,v+=s.getRowHeight(e),i=f,e+=1),n=s.colRowToCellIndex(i,e)}}},nC=function(s){var t=null,e=s.getContainer();if(e?(t=e,s.popContainer()):this.cellContainersPool&&(t=this.cellContainersPool.getFirstDead(),t!==null&&t.setActive(!0).setVisible(!0)),this.emit("cellvisible",s,t,this),this.cellContainersPool){var e=s.getContainer();e?t===null?this.cellContainersPool.add(e):t!==e&&(this.cellContainersPool.add(e),this.cellContainersPool.killAndHide(t)):t!==null&&this.cellContainersPool.killAndHide(t)}},F4=function(s){var t=this.scrollMode===0?this.topLeftX:this.topLeftY,e=this.tableOX+this.table.colIndexToWidth(0,s-1)+t;return e},I4=function(s){var t=this.scrollMode===0?this.topLeftY:this.topLeftX,e=this.tableOY+this.table.rowIndexToHeight(0,s-1)+t;return e},D4=function(){var s=this.preVisibleCells,t=this.visibleCells;s.iterate(function(e){t.contains(e)||this.hideCell(e)},this)},sC=function(s){if(this.emit("cellinvisible",s),this.cellContainersPool){var t=s.popContainer();t&&this.cellContainersPool.killAndHide(t)}s.destroyContainer()},B4=function(s){return s===void 0&&(s=!1),s&&(Gx.call(this),this.hideCells()),Gx.call(this),this.showCells(),this.hideCells(),this.setMaskChildrenFlag(),this},Gx=function(){var s=this.preVisibleCells;this.preVisibleCells=this.visibleCells,this.visibleCells=s,this.visibleCells.clear()},b4=function(s){var t=this.table.getCell(s,!1);return t&&this.visibleCells.contains(t)},rC=function(s,t){t-=this.y+this.topLeftY,s-=this.x+this.topLeftX;var e=this.tableOY-(this.scrollMode===0?t:s),f=this.tableOX-(this.scrollMode===0?s:t),i=this.table,n=i.heightToRowIndex(-e),o=i.widthToColIndex(-f),r=i.colRowToCellIndex(o,n);return r===null||!this.isCellVisible(r)?null:r},G4=function(s,t){var e=rC.call(this,s,t);if(e!==null)return this.getCellContainer(e)},N4=function(s,t){return this.visibleCells.each(s,t),this},Y4=function(s,t){return this.visibleCells.iterate(s,t),this},z4=function(s,t){return this.table.cells.slice().forEach(s,t),this},V4=function(s,t){return this.table.cells.forEach(s,t),this},U4=function(s){var t=this.cellsCount;return t===s?this:(t>s?this.removeCells(s,t-s):this.insertNewCells(t,s-t),this)};const W4=Phaser.Math.Clamp;var X4=function(s,t){return typeof s=="object"&&(s=s.index),t===void 0&&(t=1),t<=0?this:(s=W4(s,0,this.cellsCount),this.table.insertNewCells(s,t),this)},H4=function(s,t){if(typeof s=="object"&&(s=s.index),t===void 0&&(t=1),s<0&&(t+=s,s=0),t<=0)return this;if(s>this.cellsCount)return this;for(var e,f=s,i=s+t;f<i;f++)e=this.getCell(f,!1),e&&(this.visibleCells.contains(e)&&(sC.call(this,e),this.visibleCells.delete(e)),this.preVisibleCells.delete(e));return this.table.removeCells(s,t),this},$4=function(s){return this.table.colCount===s?this:(this.table.setColumnCount(s),this)},k4=function(s,t){return this.setCellsCount(s*t),this.table.setColumnCount(s),this},K4=function(s){var t=this.table.getCell(s,!1);return!t||!t.container?this:(nC.call(this,t),this)},aC={setTableOY:T4,setTableOX:C4,showCells:w4,showCell:nC,getCellTLX:F4,getCellTLY:I4,hideCells:D4,hideCell:sC,updateTable:B4,isCellVisible:b4,pointToCellIndex:rC,pointToCellContainer:G4,eachVisibleCell:N4,iterateVisibleCell:Y4,eachCell:z4,iterateCell:V4,setCellsCount:U4,insertNewCells:X4,removeCells:H4,setColumnCount:$4,setGridSize:k4,updateVisibleCell:K4};Object.assign(aC,iC);const Z4=Phaser.GameObjects.Group,Nx=Phaser.Structs.Set,In=Phaser.Utils.Objects.GetValue;class oC extends en{constructor(t,e,f,i,n,o){o===void 0&&(o={}),super(t,e,f,i,n),this.type="rexGridTable",this._tableOX=0,this._tableOY=0,this.visibleCells=new Nx,this.preVisibleCells=new Nx,this.execeedTopState=!1,this.execeedBottomState=!1,this.execeedLeftState=!1,this.execeedRightState=!1;var r=In(o,"reuseCellContainer",!1);r&&(this.cellContainersPool=new Z4(t));var a=In(o,"cellVisibleCallback",null);if(a!==null){var l=In(o,"cellVisibleCallbackScope",void 0);this.on("cellvisible",a,l)}if(a=In(o,"cellInvisibleCallback",null),a!==null){var l=In(o,"cellInvisibleCallbackScope",void 0);this.on("cellinvisible",a,l)}In(o,"enableLayer",!1)&&this.enableLayer(),this.setupChildrenMask(In(o,"mask",void 0)),this.setScrollMode(In(o,"scrollMode",0)),this.setClampMode(In(o,"clamplTableOXY",!0));var h,u,v,d=this.scrollMode===0;if(d?(h=o.cellWidth,u=o.cellHeight,v=o.columns):(h=o.cellHeight,u=o.cellWidth,v=In(o,"rows",o.columns)),this.expandCellSize=h===void 0,this.expandCellSize){var i=d?this.width:this.height;h=i/v}o.cellWidth=h,o.cellHeight=u,o.columns=v,this.table=new y4(this,o),this.updateTable()}destroy(t){!this.scene||(this.destroyChildrenMask(),this.table.destroy(t),this.table=void 0,this.cellContainersPool&&(this.cellContainersPool.destroy(!0),this.cellContainersPool=void 0),super.destroy(t))}setScrollMode(t){return typeof t=="string"&&(t=J4[t.toLowerCase()]),this.scrollMode=t,this}setClampMode(t){return t===void 0&&(t=!0),this.clampTableOXY=t,this}get tableOY(){return this._tableOY}get tableOX(){return this._tableOX}set tableOY(t){this.setTableOY(t).updateTable()}set tableOX(t){this.setTableOX(t).updateTable()}setTableOXY(t,e){return this.setTableOY(e).setTableOX(t),this}addTableOY(t){return this.setTableOY(this.tableOY+t),this}addTableOX(t){return this.setTableOX(this.tableOX+t),this}addTableOXY(t,e){return this.addTableOY(e).addTableOX(t),this}setTableOYByPercentage(t){return this.setTableOY(-this.tableVisibleHeight*t),this}getTableOYPercentage(){var t=this.tableVisibleHeight;return t===0?0:this.tableOY/-t}set t(t){this.setTableOYByPercentage(t).updateTable()}get t(){return this.getTableOYPercentage()}getCell(t){return this.table.getCell(t,!0)}getCellContainer(t){var e=this.table.getCell(t,!1),f;return e&&(f=e.getContainer()),f}get cellsCount(){return this.table.cellsCount}get columnCount(){return this.table.colCount}setCellHeight(t,e){var f;return typeof t=="number"?f=this.table.getCell(t,!0):f=t,f.height=e,this}setCellWidth(t,e){var f;return typeof t=="number"?f=this.table.getCell(t,!0):f=t,f.width=e,this}get instHeight(){return this.scrollMode===0?this.height:this.width}get instWidth(){return this.scrollMode===0?this.width:this.height}get tableHeight(){return this.table.totalRowsHeight}get tableWidth(){return this.table.totalColumnWidth}get topTableOY(){return 0}get bottomTableOY(){return-this.tableVisibleHeight}get leftTableOX(){return 0}get rightTableOX(){return-this.tableVisibleWidth}get tableVisibleHeight(){var t=this.tableHeight-this.instHeight;return t<0&&(t=0),t}get tableVisibleWidth(){var t,e=this.tableWidth,f=this.instWidth;return e>f?t=e-f:t=0,t}get bottomLeftY(){return-(this.displayHeight*this.originY)+this.displayHeight}get topRightX(){return-(this.displayWidth*this.originX)+this.displayWidth}get topLeftX(){return-(this.displayWidth*this.originX)}get topLeftY(){return-(this.displayHeight*this.originY)}get bottomBound(){return this.scrollMode===0?this.bottomLeftY:this.topRightX}get rightBound(){return this.scrollMode===0?this.topRightX:this.bottomLeftY}resize(t,e){return this.width===t&&this.height===e?this:(super.resize(t,e),this.expandCellSize&&this.table.setDefaultCellWidth(this.instWidth/this.table.colCount),this.updateTable(!0),this.layoutChildrenMask(),this.maskChildren(),this)}}Object.assign(oC.prototype,aC);const J4={v:0,vertical:0,h:1,horizontal:1};var Q4=function(s){Object.defineProperty(s,"childOY",{configurable:!0,get:function(){return s.tableOY},set:function(t){s.tableOY=t}}),Object.defineProperty(s,"topChildOY",{get:function(){return s.topTableOY}}),Object.defineProperty(s,"bottomChildOY",{get:function(){return s.bottomTableOY}}),Object.defineProperty(s,"childVisibleHeight",{get:function(){return s.instHeight}}),Object.defineProperty(s,"childHeight",{get:function(){return s.tableHeight}})},j4=function(s){s.on("cellvisible",function(t,o,f){var i=this.createCellContainerCallback,n=this.createCellContainerCallbackScope;t.item=this.items[t.index];var o;n?o=i.call(n,t,o,f):o=i(t,o,f),o&&(o.setOrigin&&o.setOrigin(0),o.isRexSizer&&o.layout()),t.item=void 0,t.setContainer(o)},this)},Vn=function(s,t,e,f,i,n,o){var r;if(i===void 0?r=f:r=e.pointToCellIndex(f,i),r!=null){var a=e.getCellContainer(r);a&&s.emit(t,a,r,n,o)}},q4=function(s,t){s.on("pointerdown",function(e,f,i,n){Vn(this.eventEmitter,"cell.down",s,e.x,e.y,e,n)},this).on("pointerup",function(e,f,i,n){Vn(this.eventEmitter,"cell.up",s,e.x,e.y,e,n)},this)},_4=function(s,t){s.on("pointermove",Yx,this).on("pointerover",Yx,this).on("pointerout",tU,this)},Yx=function(s,t,e,f){var i=this.childrenMap.child,n=i.pointToCellIndex(s.x,s.y);if(n!==i.input.lastOverCellIndex){var o=i.input.lastOverCellIndex;i.input.lastOverCellIndex=n,Vn(this.eventEmitter,"cell.out",i,o,void 0,s,f),Vn(this.eventEmitter,"cell.over",i,n,void 0,s,f)}},tU=function(s,t){var e=this.childrenMap.child,f=e.input.lastOverCellIndex;e.input.lastOverCellIndex=void 0,Vn(this.eventEmitter,"cell.out",e,f,void 0,s,t)};const eU=Phaser.Utils.Objects.GetValue;var iU=function(s,t){var e=eU(t,"click",void 0);e!==!1&&(e===void 0&&(e={}),e.threshold=10,s._click=new va(s,e),s._click.on("click",function(f,i,n,o){Vn(this.eventEmitter,"cell.click",i,n.x,n.y,n,o)},this))};const nU=Phaser.Utils.Objects.GetValue;var sU=function(s,t){var e=nU(t,"tap",void 0);e!==!1&&(s._tap=new $l(s,e),s._tap.on("tap",function(f,i,n){var o=`cell.${f.tapsCount}tap`;Vn(this.eventEmitter,o,f.gameObject,f.x,f.y,n)},this))};const rU=Phaser.Utils.Objects.GetValue;var aU=function(s,t){var e=rU(t,"press",void 0);e!==!1&&(s._press=new kl(s,e),s._press.on("pressstart",function(f,i,n){Vn(this.eventEmitter,"cell.pressstart",s,f.x,f.y,n)},this).on("pressend",function(f,i,n){Vn(this.eventEmitter,"cell.pressend",s,f.x,f.y,n)},this))};const oU=Phaser.Utils.Objects.GetValue;var hU=function(s,t){var e=oU(t,"swipe",void 0);e!==!1&&(e===void 0&&(e={}),e.dir="4dir",s._swipe=new Fo(s,e),s._swipe.on("swipe",function(f,i,n){var o=f.left?"left":f.right?"right":f.up?"up":"down";Vn(this.eventEmitter,`cell.swipe${o}`,s,f.x,f.y,n)},this))},lU=function(s,t){s.setInteractive(),q4.call(this,s,t),_4.call(this,s,t),iU.call(this,s,t),sU.call(this,s,t),aU.call(this,s,t),hU.call(this,s,t)},uU=function(s){s===void 0?this.items.length=0:this.items=s;var t=this.childrenMap.child;return t.setCellsCount(this.items.length),t.updateTable(!0),this.resizeController(),this};const Dn=Phaser.Utils.Objects.GetValue;class pv extends su{constructor(t,e){e===void 0&&(e={});var f=iu(e),i=Dn(e,"table",void 0);i===void 0&&(i={}),i.scrollMode=f,i.clamplTableOXY=Dn(e,"clamplChildOY",!1);var n=Dn(i,"width",void 0),o=Dn(i,"height",void 0),r=new oC(t,0,0,n,o,i);t.add.existing(r);var a,l;f===0?(a=n===void 0?1:0,l=o===void 0):(a=o===void 0?1:0,l=n===void 0),Q4(r),r.minWidth=n===void 0?0:void 0,r.minHeight=o===void 0?0:void 0,e.type="rexGridTable",e.child={gameObject:r,proportion:a,expand:l};var h=Dn(e,"space",void 0);h&&(h.child=h.table),super(t,e),this.addChildrenMap("table",r),this.addChildrenMap("tableLayer",r.maskLayer),this.eventEmitter=Dn(e,"eventEmitter",this);var u=Dn(e,"createCellContainerCallback",mi),v=Dn(e,"createCellContainerCallbackScope",void 0);this.setCreateCellContainerCallback(u,v),j4.call(this,r),this.resizeControllerFlag=!1;var d=f===0?"cellheightchange":"cellwidthchange";r.on(d,function(){this.resizeControllerFlag=!0},this),Dn(i,"interactive",!0)&&lU.call(this,r,i),this.setItems(Dn(e,"items",[])),t.game.events.on("poststep",this.onPostStep,this)}destroy(t){!this.scene||(this.scene.game.events.off("poststep",this.onPostStep,this),super.destroy(t))}setCreateCellContainerCallback(t,e){return this.createCellContainerCallback=t,this.createCellContainerCallbackScope=e,this}refresh(){return this.setItems(this.items),this}getCell(t){var e=this.childrenMap.child;return e.getCell(t)}getCellContainer(t){var e=this.childrenMap.child;return e.getCellContainer(t)}updateVisibleCell(t){var e=this.childrenMap.child;return e.updateVisibleCell(t)}onPostStep(){this.resizeControllerFlag&&(this.resizeController(),this.resizeControllerFlag=!1)}}var fU={setItems:uU};Object.assign(pv.prototype,fU);yt.register("gridTable",function(s){var t=new pv(this.scene,s);return this.scene.add.existing(t),t});Ct(window,"RexPlugins.UI.GridTable",pv);var gv=function(s,t){return s.sameOrientation?s.orientation=t.orientation:s.orientation=t.orientation===0?1:0,s},dU=function(s,t){s.popUp(gv(s.root.easeIn,s))},cU=function(s,t){s.scaleDown(gv(s.root.easeOut,s))},vU={setTransitInCallback(s){return s===void 0&&(s=dU),this.transitInCallback=s,this},setTransitOutCallback(s){return s===void 0&&(s=cU),this.transitOutCallback=s,this}},mv=function(s,t,e,f,i){var n=s.scene,o=n.sys.events,r=n.time.delayedCall(t,o.once,["postupdate",function(){e.call(f,i)}],o);return r},pU={delayCall(s,t,e){return this.timer=mv(this,s,t,e),this},removeDelayCall(){return this.timer&&(this.timer.remove(!1),this.timer=void 0),this}},gU=function(s,t){var f=this.childrenMap.subMenu;if(f&&f.parentButton===s)return this;this.collapseSubMenu();var e;this.root.toggleOrientation?e=this.orientation===0?1:0:e=this.orientation;var f=new this.constructor(this.scene,{items:t,orientation:e,space:this.space,createBackgroundCallback:this.root.createBackgroundCallback,createBackgroundCallbackScope:this.root.createBackgroundCallbackScope,createButtonCallback:this.root.createButtonCallback,createButtonCallbackScope:this.root.createButtonCallbackScope,easeIn:this.root.easeIn,easeOut:this.root.easeOut,_rootMenu:this.root,_parentMenu:this,_parentButton:s});return this.pin(f),this.childrenMap.subMenu=f,this.root.emit("expand",f,s,this),this},mU=function(){var s=this.root;s.emit("collapse",this,this.parentButton,s);var t=s.easeOut.duration;return s.transitOutCallback(this,t),this.collapseSubMenu(),this.delayCall(t,this.destroy,this),this},xU=function(){var s=this.childrenMap.subMenu;return s===void 0?this:(this.childrenMap.subMenu=void 0,this.remove(s),s.collapse(),this)},hC={expandSubMenu:gU,collapse:mU,collapseSubMenu:xU};Object.assign(hC,vU,pU);var yU=function(s,t,e,f){var i;return e&&(t.scene=s,f?i=e.call(f,t):i=e(t),t.scene=void 0),i},TU=function(s,t,e,f){var i,n=[],o;if(t&&e)for(var r=0,a=t.length;r<a;r++)i=t[r],i.scene=s,f?o=e.call(f,i,r,t):o=e(i,r,t),i.scene=void 0,n.push(o);return n},CU=function(s){s.on(s.root.expandEventName,function(t,e){if(!this._isPassedEvent){var f=this.root.childrenKey,i=this.items[e][f];i&&this.expandSubMenu(t,i)}},s).on("button.click",function(t,e,f,i){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.click",t,e,f,i),this.root._isPassedEvent=!1)},s).on("button.over",function(t,e,f,i){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.over",t,e,f,i),this.root._isPassedEvent=!1)},s).on("button.out",function(t,e,f,i){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.out",t,e,f,i),this.root._isPassedEvent=!1)},s)},zx=function(s,t){return typeof t=="number"&&(t={duration:t}),t.hasOwnProperty("orientation")&&t.orientation!==void 0?t.sameOrientation=fv(t.orientation)===s.orientation:t.sameOrientation=!0,t.destroy=!1,t},SU=function(){var s=this.root,t=s.easeIn.duration;s.transitInCallback(this,t),this!==this.root&&this.delayCall(t,function(){this.root.emit("popup.complete",this)},this)};const ri=Phaser.Utils.Objects.GetValue;class ru extends Ue{constructor(t,e){e===void 0&&(e={}),e.hasOwnProperty("orientation")||(e.orientation=1);var f=e._rootMenu,i=e._parentMenu,n=e._parentButton,o=ri(e,"popup",!0),r=ri(e,"items",void 0),a=ri(e,"createBackgroundCallback",void 0),l=ri(e,"createBackgroundCallbackScope",void 0);e.background=yU(t,r,a,l);var h=ri(e,"createButtonCallback",void 0),u=ri(e,"createButtonCallbackScope",void 0);if(e.buttons=TU(t,r,h,u),super(t,e),this.type="rexMenu",this.items=r,this.root=f===void 0?this:f,this.isRoot=this.root===this,this.parentMenu=i,this.parentButton=n,this.timer=void 0,this.isRoot){this.isPopUpMode=o;var v=e.bounds;v===void 0&&(v=da(t)),this.bounds=v,this.subMenuSide=[this.y<v.centerY?tc:rl,this.x<v.centerX?_d:sl];var d=ri(e,"subMenuSide",void 0);d!==void 0&&(typeof d=="string"&&(d=EU[d]),this.subMenuSide[this.orientation]=d),this.toggleOrientation=ri(e,"toggleOrientation",!1),this.expandEventName=ri(e,"expandEvent","button.click"),this.easeIn=zx(this,ri(e,"easeIn",0)),this.easeOut=zx(this,ri(e,"easeOut",0)),this.setTransitInCallback(ri(e,"transitIn")),this.setTransitOutCallback(ri(e,"transitOut")),this.createBackgroundCallback=a,this.createBackgroundCallbackScope=l,this.createButtonCallback=h,this.createButtonCallbackScope=u,this.childrenKey=ri(e,"childrenKey","children"),this._isPassedEvent=!1,this.pointerDownOutsideCollapsing=ri(e,"pointerDownOutsideCollapsing",!0),this.pointerDownOutsideCollapsing&&t.input.on("pointerdown",this.onPointerDownOutside,this)}var c=0,p=0;if(!this.root.easeIn.sameOrientation){var g=gv(this.root.easeIn,this).orientation,m=i?i.orientation:this.orientation,d=this.root.subMenuSide[m];g===0&&d===sl&&(c=1),g===1&&d===rl&&(p=1)}if(o&&this.setOrigin(c,p).layout(),!this.isRoot){this.setScale(this.root.scaleX,this.root.scaleY);var d=this.root.subMenuSide[i.orientation];switch(d){case sl:this.alignTop(n.top).alignRight(n.left);break;case _d:this.alignTop(n.top).alignLeft(n.right);break;case rl:this.alignLeft(n.left).alignBottom(n.top);break;case tc:this.alignLeft(n.left).alignTop(n.bottom);break}}CU(this),o&&(this.pushIntoBounds(this.root.bounds),SU.call(this))}destroy(t){!this.scene||(this.isRoot&&this.pointerDownOutsideCollapsing&&this.scene.input.off("pointerdown",this.onPointerDownOutside,this),super.destroy(t),this.removeDelayCall())}isInTouching(t){return super.isInTouching(t)?!0:this.childrenMap.subMenu?this.childrenMap.subMenu.isInTouching(t):!1}onPointerDownOutside(t){this.isInTouching(t)||(this.isPopUpMode?this.collapse():this.collapseSubMenu())}}const sl=2,_d=0,rl=3,tc=1,EU={up:rl,down:tc,left:sl,right:_d};Object.assign(ru.prototype,hC);yt.register("menu",function(s){var t=new ru(this.scene,s);return this.scene.add.existing(t),t});Ct(window,"RexPlugins.UI.Menu",ru);var PU=function(s,t){s.popUp(this.listEaseInDuration,"y","Cubic")},MU=function(s,t){s.scaleDown(this.listEaseOutDuration,"y","Linear")},AU={setWrapEnable(s){return s===void 0&&(s=!0),this.listWrapEnable=s,this},setCreateButtonCallback(s){return this.listCreateButtonCallback=s,this},setCreateBackgroundCallback(s){return this.listCreateBackgroundCallback=s,this},setButtonClickCallback(s){return this.listOnButtonClick=s,this},setButtonOverCallback(s){return this.listOnButtonOver=s,this},setButtonOutCallback(s){return this.listOnButtonOut=s,this},setListEaseInDuration(s){return s===void 0&&(s=0),this.listEaseInDuration=s,this},setListEaseOutDuration(s){return s===void 0&&(s=0),this.listEaseOutDuration=s,this},setListTransitInCallback(s){return s===void 0&&(s=PU),this.listTransitInCallback=s,this},settListTTransitOutCallback(s){return s===void 0&&(s=MU),this.listTransitOutCallback=s,this},setListBounds(s){return this.listBounds=s,this},setListWidth(s){return this.listWidth=s,this},setListHeight(s){return this.listHeight=s,this},setListSize(s,t){return this.setListWidth(s).setListHeight(t),this},setListAlignmentMode(s){return this.listAlignMode=s,this},setListSpace(s){return s===void 0&&(s={}),this.listSpace=s,this},setListDraggable(s){return s===void 0&&(s=!0),this.listDraggable=s,this}},OU=function(s){var t,e=this.listCreateBackgroundCallback;e&&(t=e.call(this,s),s.add.existing(t));var f=[],i=this.listCreateButtonCallback;if(i)for(var n=this.options,o=0,r=n.length;o<r;o++){var a=i.call(this,s,n[o],o,n);s.add.existing(a),f.push(a)}var l=this.listWidth;l===void 0&&(this.listAlignMode==="text"?l=this.getElement("text").width:l=this.width);var h=this.listHeight,u;return this.listWrapEnable?u=new zs(s,{width:l,height:h,background:t,buttons:f,space:this.listSpace,draggable:this.listDraggable}):u=new Ue(s,{width:l,height:h,orientation:"y",background:t,buttons:f,space:this.listSpace,draggable:this.listDraggable}),s.add.existing(u),u},RU=function(){if(this.listPanel)return this;var s=this.scene,t=OU.call(this,s).setOrigin(0,0).layout(),e=this.getElement(this.listAlignMode).getTopLeft().x;t.setPosition(e,this.bottom);var f=this.listBounds;f||(f=da(s)),t.bottom>f.bottom&&t.changeOrigin(0,1).setPosition(e,this.top),t.on("button.over",function(n,o,r,a){this.listOnButtonOver&&this.listOnButtonOver.call(this,n,o,r,a),this.emit("button.over",this,t,n,o,r,a)},this).on("button.out",function(n,o,r,a){this.listOnButtonOut&&this.listOnButtonOut.call(this,n,o,r,a),this.emit("button.out",this,t,n,o,r,a)},this);var i=this.listEaseInDuration;return this.listTransitInCallback(t,i),this.delayCall(i,function(){var n=this.listOnButtonClick;n&&t.on("button.click",function(o,r,a,l){n.call(this,o,r,a,l),this.emit("button.click",this,t,o,r,a,l)},this),s.input.once("pointerup",this.closeListPanel,this),this.emit("list.open",this,t)},this),this.pin(t),this.listPanel=t,this},LU=function(){if(!this.listPanel)return this;var s=this.listPanel;this.listPanel=void 0;var t=this.listEaseOutDuration;return this.listTransitOutCallback(s,t),this.delayCall(t,function(){this.emit("list.close",this,s),s.destroy()},this),this},wU=function(){return this.listPanel?this.closeListPanel():this.openListPanel(),this},FU={delayCall(s,t,e){return this.timer=mv(this,s,t,e),this},removeDelayCall(){return this.timer&&(this.timer.remove(!1),this.timer=void 0),this}},lC={openListPanel:RU,closeListPanel:LU,toggleListPanel:wU};Object.assign(lC,AU,FU);const Me=Phaser.Utils.Objects.GetValue;class xv extends pa{constructor(t,e){super(t,e),this.type="rexDropDownList",this.timer=void 0,this.setOptions(Me(e,"options"));var f=Me(e,"list");this.setWrapEnable(Me(f,"wrap",!1)),this.setCreateButtonCallback(Me(f,"createButtonCallback")),this.setCreateBackgroundCallback(Me(f,"createBackgroundCallback")),this.setButtonClickCallback(Me(f,"onButtonClick")),this.setButtonOverCallback(Me(f,"onButtonOver")),this.setButtonOutCallback(Me(f,"onButtonOut")),this.setListEaseInDuration(Me(f,"easeIn",500)),this.setListEaseOutDuration(Me(f,"easeOut",100)),this.setListTransitInCallback(Me(f,"transitIn")),this.settListTTransitOutCallback(Me(f,"transitOut")),this.setListSize(Me(f,"width"),Me(f,"height")),this.setListAlignmentMode(Me(f,"alignParent","text")),this.setListBounds(Me(f,"bounds")),this.setListSpace(Me(f,"space")),this.setListDraggable(Me(f,"draggable",!1)),this.setValueChangeCallback(Me(e,"setValueCallback"),Me(e,"setValueCallbackScope")),this.setValue(Me(e,"value")),this.onClick(this.toggleListPanel,this)}destroy(t){!this.scene||(this.listPanel&&(this.listPanel.destroy(t),this.listPanel=void 0),super.destroy(t),this.removeDelayCall())}setOptions(t){return t===void 0&&(t=[]),this.options=t,this}setValueChangeCallback(t,e){return this.valueChangeCallback=t,this.valueChangeCallbackScope=e,this}setValue(t){return this.value=t,this}get value(){return this._value}set value(t){if(this._value!==t){var e=this._value;this._value=t;var f=this.valueChangeCallback,i=this.valueChangeCallbackScope;f&&(i?f.call(i,this,t,e):f(this,t,e))}}}Object.assign(xv.prototype,lC);yt.register("dropDownList",function(s){var t=new xv(this.scene,s);return this.scene.add.existing(t),t});Ct(window,"RexPlugins.UI.DropDownList",xv);const IU=Phaser.GameObjects.Text;var yv=function(s){return s instanceof IU};const DU=Phaser.GameObjects.BitmapText;var uC=function(s){return s instanceof DU};const Yi=0,_i=1,tn=2;var Do=function(s){var t;return uC(s)?t=tn:yv(s)?t=Yi:t=_i,t},Tv=function(s,t,e){var f=Do(s);switch(f){case Yi:e=s.getWrappedText(t);break;case _i:e=s.getPenManager(t,e);break;case tn:s.maxWidth>0?e=s.setText(t).getTextBounds().wrappedText.split(`
`):e=t.split(`
`);break}return e},BU=function(s,t){s===void 0&&(s=this.startLineIndex),t===void 0&&(t=s+this.pageLinesCount);var e;switch(this.textObjectType){case Yi:case tn:e=this.lines.slice(s,t).join(`
`);break;case _i:var f=this.lines.getLineStartIndex(s),i=this.lines.getLineEndIndex(t-1);e=this.lines.getSliceTagText(f,i,!0);break}return e},Td=function(s){return Array.isArray(s)?s=s.join(`
`):typeof s=="number"&&(s=s.toString()),s},bU={clearText(){return this.sections.length=0,this.pageStartIndexes.length=0,this.lines.length=0,this},appendPage(e){var t=this.totalLinesCount;this.sections.push(Td(e));var e=this.sections.join(`
`);this.lines=Tv(this.parent,e,this.lines);for(var f=this.totalLinesCount-t,i=Math.ceil(f/this.pageLinesCount),n=0;n<i;n++)this.pageStartIndexes.push(t+n*this.pageLinesCount);return this},setText(s,t){t===void 0&&(t=!0),t&&this.resetPageIdx(),this.clearText();for(var e=Td(s).split(this.pageBreak),f=0,i=e.length;f<i;f++)this.appendPage(e[f]);return this},appendText(s){var t=this.content+Td(s);return this.setText(t,!1),this}};const GU=Phaser.Math.Clamp;var NU={getPage(s){return s===void 0&&(s=this.pageIndex),this.setPageIndex(s).getLines(this.startLineIndex,this.endLineIndex)},getNextPage(){return this.getPage(this.pageIndex+1)},getPreviousPage(){return this.getPage(this.pageIndex-1)},resetPageIdx(){return this.pageIndex=-1,this},setPageIndex(s){return s=GU(s,0,this.pageCount-1),this.pageIndex=s,this.startLineIndex=this.pageStartIndexes[s],this.endLineIndex=this.pageStartIndexes[s+1],this}},Cv=function(s,t){var e=Do(s);switch(e){case Yi:var n=s.style,f=n.wordWrapWidth,i=n.wordWrapCallback;n.wordWrapWidth=0,n.wordWrapCallback=void 0,s.setText(t),n.wordWrapWidth=f,n.wordWrapCallback=i;break;case _i:var n=s.style,o=n.wrapMode;n.wrapMode=0,s.setText(t),n.wrapMode=o;break;case tn:var r=s._maxWidth;s._maxWidth=0,s.setText(t),s._maxWidth=r;break}},YU={showPage(s){return this.displayText(this.getPage(s)),this},showNextPage(){return this.displayText(this.getNextPage()),this},showPreviousPage(){return this.displayText(this.getPreviousPage()),this},show(){return this.displayText(this.getLines()),this},showNextLine(){return this.displayText(this.setStartLineIndex(this.startLineIndex+1).getLines()),this},showPreviousLine(){return this.displayText(this.setStartLineIndex(this.startLineIndex-1).getLines()),this},displayText(s){Cv(this.parent,s)}},fC={getLines:BU};Object.assign(fC,bU,NU,YU);const Ka=Phaser.Utils.Objects.GetValue,zU=Phaser.Math.Clamp;class dC extends He{constructor(t,e){super(t,{eventEmitter:!1}),this.textObjectType=Do(this.parent),this.pageStartIndexes=[],this.lines=Tv(this.parent,""),this.sections=[],this.resetFromJSON(e)}resetFromJSON(t){return this.setMaxLines(Ka(t,"maxLines",void 0)),this.setPageBreak(Ka(t,"pageBreak",`\f
`)),this.setText(Ka(t,"text","")),this.setStartLineIndex(Ka(t,"start",0)),this.setPageIndex(Ka(t,"page",-1)),this}toJSON(){return{maxLines:this.maxLines,text:this.content,start:this.startLineIndex,page:this.pageIndex,pageBreak:this.pageBreak}}shutdown(t){if(!this.isShutdown){switch(this.textObjectType){case Yi:this.lines.length=0;break;case _i:this.lines.destroy();break;case tn:this.lines.length=0;break}this.pageStartIndexes.length=0,this.sections.length=0,this.lines=void 0,this.pageStartIndexes=void 0,this.sections=void 0,super.shutdown(t)}}setMaxLines(t){return this.maxLines=t,this}setPageBreak(t){return this.pageBreak=t,this}get pageCount(){return this.pageStartIndexes.length}get isFirstPage(){return this.pageIndex<=0}get isLastPage(){return this.pageIndex>=this.pageCount-1}get totalLinesCount(){return this.lines?this.lines.length:0}get startLineIndex(){return this._startLineIndex}set startLineIndex(t){t=zU(t,0,this.totalLinesCount-1),this._startLineIndex=t}setStartLineIndex(t){return this.startLineIndex=t,this}get pageLinesCount(){if(this.maxLines!==void 0)return this.maxLines;var t;switch(this.textObjectType){case Yi:case _i:var e=this.parent.style.maxLines;e>0?t=e:t=this.totalLinesCount;break;case tn:t=this.totalLinesCount;break}return t}get content(){return this.sections.join(this.pageBreak)}}Object.assign(dC.prototype,fC);var VU=function(s,t){var e=Do(s);switch(e){case Yi:s.style.syncFont(s.canvas,s.context),t=s.runWordWrap(t);break;case _i:t=s.getText(t,void 0,void 0,!0);break;case tn:t=s.setText(t).getTextBounds().wrappedText;break}return t};const Zr=Phaser.Utils.Objects.GetFastValue,Cd=Phaser.Utils.Objects.GetValue;class UU extends He{constructor(t,e){super(t,e),this.timer=null,this.resetFromJSON(e)}resetFromJSON(t){this.setTextWrapEnable(Cd(t,"wrap",!1)),this.setTypeMode(Cd(t,"typeMode",0)),this.setTypeSpeed(Cd(t,"speed",333)),this.setTextCallback=Zr(t,"setTextCallback",null),this.setTextCallbackScope=Zr(t,"setTextCallbackScope",null),this.setTypingContent(Zr(t,"text","")),this.typingIdx=Zr(t,"typingIdx",0),this.insertIdx=Zr(t,"insertIdx",null);var e=Zr(t,"elapsed",null);return e!==null&&this.start(void 0,void 0,this.typingIdx,e),this}shutdown(t){this.isShutdown||(this.freeTimer(),super.shutdown(t))}setTypeMode(t){return typeof t=="string"&&(t=WU[t]),this.typeMode=t,this}setTypeSpeed(t){return this.speed=t,this}setTextWrapEnable(t){return t===void 0&&(t=!0),this.textWrapEnable=t,this}set text(t){var e=Vx(t);this.textWrapEnable&&(e=VU(this.parent,e)),this._text=e}get text(){return this._text}get isTyping(){return this.getTimer()!==null}get isLastChar(){return this.typingIdx===this.textLen}start(t,e,f,i){return t!==void 0&&this.setTypingContent(t),e!==void 0&&(this.speed=e),f===void 0&&(f=0),this.typingIdx=f+1,this.speed===0?this.stop(!0):(this.setText(""),this.startTimer(i)),this}appendText(t){var e=this.text.concat(Vx(t));return this.isTyping?this.setTypingContent(e):this.start(e,void 0,this.textLen),this}stop(t){var e=this.getTimer();return e&&this.freeTimer(),t&&(this.typingIdx=this.textLen,this.setText(this.text),this.emit("type"),this.emit("complete",this,this.parent)),this}pause(){var t=this.getTimer();return t&&(t.paused=!0),this}resume(){var t=this.getTimer();return t&&(t.paused=!1),this}setTypingContent(t){return this.text=t,this.textLen=this.getTextLength(this.text),this}onTyping(){var t=this.getTypingString(this.text,this.typingIdx,this.textLen,this.typeMode);this.setText(t),this.emit("type"),this.isLastChar?(this.freeTimer(),this.emit("complete",this,this.parent)):(this.timer.delay=this.speed,this.typingIdx++)}getTypingString(t,e,f,i){var n;if(i===0){var o=0,r=e;this.insertIdx=r,n=this.getSubString(t,o,r)}else if(i===1){var r=f,o=r-e;this.insertIdx=0,n=this.getSubString(t,o,r)}else if(i===2){var a=f/2,o=Math.floor(a-e/2),r=o+e;this.insertIdx=e%2?e:0,n=this.getSubString(t,o,r)}else if(i===3){var l=Math.floor(e/2),h;if(l>0){var r=f,o=r-l;h=this.getSubString(t,o,r)}else h="";var u=e-l,v;if(u>0){var o=0,r=o+u;this.insertIdx=r,v=this.getSubString(t,o,r)}else v="",this.insertIdx=0;n=v+h}return n}startTimer(t){this.timer&&this.freeTimer();var e;return t===void 0?e=0:(this.speed,e=t),this.timer=this.scene.time.addEvent({delay:0,startAt:e,loop:!0,callback:this.onTyping,callbackScope:this}),this}getTimer(){return this.timer}freeTimer(){return this.timer&&(this.timer.remove(),this.timer=null),this}setText(t){this.setTextCallback&&(this.setTextCallbackScope?t=this.setTextCallback.call(this.setTextCallbackScope,t,this.isLastChar,this.insertIdx):t=this.setTextCallback(t,this.isLastChar,this.insertIdx)),this.textWrapEnable?Cv(this.parent,t):this.parent.setText(t)}getTextLength(t){var e=this.parent,f;return e.getPlainText?f=e.getPlainText(t).length:f=t.length,f}getSubString(t,e,f){var i=this.parent,n;return i.getSubString?n=i.getSubString(t,e,f):n=t.slice(e,f),n}}var Vx=function(s){return Array.isArray(s)?s=s.join(`
`):typeof s=="number"&&(s=s.toString()),s};const WU={"left-to-right":0,"right-to-left":1,"middle-to-sides":2,"sides-to-middle":3},Ux=Phaser.Utils.Objects.GetValue;class Sv extends pa{constructor(t,e){e===void 0&&(e={text:XU(t)}),super(t,e),this.type="rexTextBox";var f=this.childrenMap.text;this.page=new dC(f,Ux(e,"page",void 0)),this.typing=new UU(f,Ux(e,"typing",e.type)),this.typing.on("complete",this.onPageEnd,this).on("type",this.onType,this),this.textWidth=f.width,this.textHeight=f.height}start(t,e){return this.page.setText(t),e!==void 0&&this.setTypeSpeed(e),this.typeNextPage(),this}typeNextPage(){if(this.isLastPage)this.emit("complete");else{var t=this.page.getNextPage();this.typing.start(t)}return this}pause(){return this.typing.pause(),this}resume(){return this.typing.resume(),this}stop(t){return this.typing.stop(t),this}setTypeSpeed(t){return this.typing.setTypeSpeed(t),this}get isTyping(){return this.typing.isTyping}get isLastPage(){return this.page.isLastPage}get isFirstPage(){return this.page.isFirstPage}get pageCount(){return this.page.pageCount}get pageIndex(){return this.page.pageIndex}onType(){var t=this.childrenMap.text;(this.textWidth!==t.width||this.textHeight!==t.height)&&(this.textWidth=t.width,this.textHeight=t.height,this.getTopmostSizer().layout()),this.emit("type")}onPageEnd(){this.emit("pageend"),this.isLastPage&&this.emit("complete")}}var XU=function(s){return s.add.text(0,0,"",{wordWrap:{width:200},maxLines:5})};yt.register("textBox",function(s){var t=new Sv(this.scene,s);return this.scene.add.existing(t),t});Ct(window,"RexPlugins.UI.TextBox",Sv);const Gi=Phaser.Utils.Objects.GetValue;class Ev extends Se{constructor(t,e){super(t,e),this.type="rexNumberBar";var f=Gi(e,"background",void 0),i=Gi(e,"icon",void 0),n=Gi(e,"iconMask",void 0),o=Gi(e,"slider",void 0),r=Gi(e,"text",void 0),a=Gi(e,"space.icon",0),l=Gi(e,"space.slider",0);if(f&&this.addBackground(f),i){var h;this.orientation===0?(o||r)&&(h={right:a}):(o||r)&&(h={bottom:a}),this.add(i,{proportion:0,align:"center",padding:h}),n&&(n=po.call(this,i,i,1))}var u;if(o){o.orientation=this.orientation,o.eventEmitter=this,o.value=null,o.hasOwnProperty("input")||(o.input=-1),u=new ga(t,o),t.add.existing(u);var h;this.orientation===0?r&&(h={right:l}):r&&(h={bottom:l});var v;if(this.orientation===0){var d=Gi(o,"width",void 0);v=d===void 0?1:0}else{var c=Gi(o,"height",void 0);v=c===void 0?1:0}this.add(u,{proportion:v,align:"center",padding:h})}r&&this.add(r),this.addChildrenMap("background",f),this.addChildrenMap("icon",i),this.addChildrenMap("iconMask",n),this.addChildrenMap("slider",u),this.addChildrenMap("text",r);var p=Gi(e,"valuechangeCallback",null);if(p!==null){var g=Gi(e,"valuechangeCallbackScope",void 0);this.on("valuechange",p,g)}this.setEnable(Gi(e,"enable",void 0)),this.setValue(Gi(e,"value",0))}get enable(){return this.childrenMap.slider?this.childrenMap.slider.enable:!1}set enable(t){this.childrenMap.slider&&this.childrenMap.slider.setEnable(t)}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}get value(){return this.childrenMap.slider?this.childrenMap.slider.value:0}set value(t){!this.childrenMap.slider||(this.childrenMap.slider.value=t)}setValue(t,e,f){return this.childrenMap.slider&&this.childrenMap.slider.setValue(t,e,f),this}addValue(t,e,f){return this.childrenMap.slider&&this.childrenMap.slider.addValue(t,e,f),this}getValue(t,e){return this.childrenMap.slider?this.childrenMap.slider.getValue(t,e):0}easeValueTo(t,e,f){return this.childrenMap.slider&&this.childrenMap.slider.easeValueTo(t,e,f),this}stopEaseValue(){return this.childrenMap.slider&&this.childrenMap.slider.stopEaseValue(),this}setEaseValueDuration(t){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueDuration(t),this}setEaseValueFunction(t){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueFunction(t),this}get text(){var t=this.childrenMap.text;if(t===void 0)return"";var e;return t.text?e=t.text:e=t.getData("text"),e}set text(t){var e=this.childrenMap.text;e!==void 0&&(e.setText?e.setText(t):e.setData("text",t))}setText(t){return this.text=t,this}}yt.register("numberBar",function(s){var t=new Ev(this.scene,s);return this.scene.add.existing(t),t});Ct(window,"RexPlugins.UI.NumberBar",Ev);yt.register("scrollBar",function(s){var t=new nu(this.scene,s);return this.scene.add.existing(t),t});Ct(window,"RexPlugins.UI.ScrollBar",nu);const Sd=Phaser.Utils.Objects.GetValue,Wx={leftTop:"left-top",centerTop:"center-top",rightTop:"right-top",leftCenter:"left-center",center:"center",rightCenter:"right-center",leftBottom:"left-bottom",centerBottom:"center-bottom",rightBottom:"right-bottom"};class Pv extends Sn{constructor(t,e){super(t,e),this.type="rexBadge";var f=Sd(e,"background",void 0);f&&this.addBackground(f),this.addChildrenMap("background",f);var i=Sd(e,"main",void 0);i&&this.add(i,{key:"main",align:"center",expand:!1}),this.addChildrenMap("main",i);for(var n in Wx){var o=Sd(e,n,void 0);o&&(this.add(o,{key:n,align:Wx[n],expand:!1}),this.addChildrenMap(n,o))}}}yt.register("badgeLabel",function(s){var t=new Pv(this.scene,s);return this.scene.add.existing(t),t});Ct(window,"RexPlugins.UI.BadgeLabel",Pv);const HU=Sn.prototype.add;var Xx=function(s,t,e,f,i,n,o,r,a){return s.setVisible(!1),HU.call(this,s,t,e,f,i,n,o,r,a),this},$U={add:Xx,addPage:Xx},kU=function(s){return s===void 0?null:this.sizerChildren.hasOwnProperty(s)?this.sizerChildren[s]:null};const Hx=en.prototype.setChildVisible;var KU=function(s){this._previousKey=this._currentKey;var t=this.previousPage;t&&(this.swapMode===0?(Hx.call(this,t,!1),this.emit("pageinvisible",t,this._previousKey,this)):t.destroy()),s&&!this.sizerChildren.hasOwnProperty(s)&&this.emit("createpage",s,this),this._currentKey=s;var e=this.currentPage;return e&&(Hx.call(this,e,!0),this.emit("pagevisible",e,this._currentKey,this),this.fadeInDuration>0&&e.setAlpha(0).fadeIn(this.fadeInDuration,1)),this},ZU=function(s){return this.sizerChildren.hasOwnProperty(s)},cC={getPage:kU,swapPage:KU,hasPage:ZU};Object.assign(cC,$U);const $x=Phaser.Utils.Objects.GetValue;class Bo extends Sn{constructor(t,e){super(t,e),this.type="rexPages",this.childrenMap=this.sizerChildren,this._previousKey=void 0,this._currentKey=void 0,this.setSwapMode($x(e,"swapMode",0)),this.setFadeInDuration($x(e,"fadeIn",0))}setSwapMode(t){return typeof t=="string"&&(t=JU[t]),this.swapMode=t,this}setFadeInDuration(t){return this.fadeInDuration=t,this}get previousKey(){return this._previousKey}get currentKey(){return this._currentKey}set currentKey(t){this.swapPage(t)}get currentPage(){return this.getPage(this.currentKey)}get previousPage(){return this.getPage(this.previousKey)}get keys(){return Object.keys(this.sizerChildren)}}Object.assign(Bo.prototype,cC);const JU={invisible:0,destroy:1};yt.register("pages",function(s){var t=new Bo(this.scene,s);return this.scene.add.existing(t),t});Ct(window,"RexPlugins.UI.Pages",Bo);const vC=Phaser.Math.Vector3,QU=Phaser.Math.Matrix4;var kx=new vC,Kx=new vC,Zx=new QU,jU=function(s,t,e,f,i,n,o){t===void 0&&(t=0),e===void 0&&(e=0),f===void 0&&(f=0),i===void 0&&(i=0),n===void 0&&(n=0),o===void 0&&(o=0),kx.set(t,e,f),Kx.set(i,n,o),Zx.fromRotationXYTranslation(Kx,kx,!0);for(var r=0,a=s.vertices.length;r<a;r++)s.vertices[r].transformMat4(Zx)};const qU=Phaser.GameObjects.Mesh,_U=Phaser.Utils.Objects.IsPlainObject,lr=Phaser.Utils.Objects.GetValue,tW=Phaser.Geom.Mesh.GenerateGridVerts,Ed=Phaser.Math.RadToDeg,al=Phaser.Math.DegToRad,pC=45,eW=1+1/Math.sin(al(pC));class gC extends qU{constructor(t,e,f,i,n,o){_U(e)&&(o=e,e=lr(o,"x",0),f=lr(o,"y",0),i=lr(o,"key",null),n=lr(o,"frame",null)),super(t,e,f,i,n),this.type="rexPerspectiveImage",this.setSizeToFrame(),this.resetPerspective(),this.panZ(eW),this.hideCCW=lr(o,"hideCCW",!0);var r=lr(o,"gridWidth",32),a=lr(o,"gridHeight",r);this.resetVerts(r,a)}resetPerspective(){return this.setPerspective(this.width,this.height,pC),this}resetVerts(t,e){if(t!==void 0&&(this.gridWidth=t),e!==void 0&&(this.gridHeight=e),this.clear(),this.dirtyCache[9]=-1,this.width===0||this.height===0)return this;var f=this.frame.cutWidth,i=this.frame.cutHeight;tW({mesh:this,texture:this.texture.key,frame:this.frame.name,width:f/this.height,height:i/this.height,widthSegments:Math.ceil(f/this.gridWidth),heightSegments:Math.ceil(i/this.gridHeight),flipY:this.frame.source.isRenderTexture});var n=this.transformInfo;return n&&this.transformVerts(n.x,n.y,n.z,n.rotateX,n.rotateY,n.rotateZ),this}syncSize(){return this.setSizeToFrame(),this.resetPerspective(),this.resetVerts(),this}get rotationX(){return this.modelRotation.x}set rotationX(t){this.modelRotation.x=t}get angleX(){return Ed(this.rotationX)}set angleX(t){this.rotationX=al(t)}get rotationY(){return this.modelRotation.y}set rotationY(t){this.modelRotation.y=t}get angleY(){return Ed(this.rotationY)}set angleY(t){this.rotationY=al(t)}get rotationZ(){return this.modelRotation.z}set rotationZ(t){this.modelRotation.z=t}get angleZ(){return Ed(this.rotationZ)}set angleZ(t){this.rotationZ=al(t)}transformVerts(t,e,f,i,n,o){return t===void 0&&(t=0),e===void 0&&(e=0),f===void 0&&(f=0),i===void 0&&(i=0),n===void 0&&(n=0),o===void 0&&(o=0),this.transformInfo||(this.transformInfo={}),this.transformInfo.x=t,this.transformInfo.y=e,this.transformInfo.rotateX=i,this.transformInfo.rotateY=n,this.transformInfo.rotateZ=o,jU(this,t,e,f,i,n,o),this}forceUpdate(){return this.dirtyCache[10]=1,this}get tint(){return this.vertices.length===0?16777215:this.vertices[0].color}set tint(t){for(var e=this.vertices,f=0,i=e.length;f<i;f++)e[f].color=t}setTint(t){return this.tint=t,this}}const iW=Phaser.GameObjects.RenderTexture,nW=Phaser.Utils.Objects.IsPlainObject,Zh=Phaser.Utils.Objects.GetValue;class mC extends gC{constructor(t,e,f,i,n,o){nW(e)&&(o=e,e=Zh(o,"x",0),f=Zh(o,"y",0),i=Zh(o,"width",32),n=Zh(o,"height",32));var r=new iW(t,e,f,i,n).setOrigin(.5);super(t,e,f,r.texture.key,null,o),this.type="rexPerspectiveRenderTexture",this.rt=r}destroy(t){super.destroy(t),this.rt.destroy(),this.rt=null}snapshot(t,e){return e===void 0&&(e={}),e.gameObjects=t,e.renderTexture=this.rt,Pc(e),(this.width!==this.frame.realWidth||this.height!==this.frame.realHeight)&&this.syncSize(),this}}Phaser.Animations.AnimationState;Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;var xn=function(s,t,e,f){if(Array.isArray(s))for(var i=!1,n=0,o=s.length;n<o;n++){var r=s[n];if(!(f&&!r)&&(e?i=t.call(e,r,n,s):i=t(r,n,s),i))return}else{var i=!1;for(var a in s){var r=s[a];if(!(f&&!r)&&(e?i=t.call(e,r,a,s):i=t(r,a,s),i))return}}};const Pd=Phaser.Math.RadToDeg,Md=Phaser.Math.DegToRad;class sW extends en{constructor(t,e,f,i,n,o){super(t,e,f,i,n),this.faces=o,xn(o,function(r){r.setPosition(e,f),this.add(r)},this,!0)}get rotationX(){return 0}set rotationX(t){}get angleX(){return Pd(this.rotationX)}set angleX(t){this.rotationX=Md(t)}get rotationY(){return 0}set rotationY(t){}get angleY(){return Pd(this.rotationY)}set angleY(t){this.rotationY=Md(t)}get rotationZ(){return 0}set rotationZ(t){}get angleZ(){return Pd(this.rotationZ)}set angleZ(t){this.rotationZ=Md(t)}setDebug(t,e){return xn(this.faces,function(f){f.setDebug(t,e)},null,!0),this}panX(t){return xn(this.faces,function(e){e.panX(t)},null,!0),this}panY(t){return xn(this.faces,function(e){e.panY(t)},null,!0),this}panZ(t){return xn(this.faces,function(e){e.panZ(t)},null,!0),this}transformVerts(t,e,f,i,n,o){return xn(this.faces,function(r){r.transformVerts(t,e,f,i,n,o)},null,!0),this}forEachFace(t,e,f){return xn(this.faces,t,e,f),this}}const rW=Phaser.Utils.Objects.IsPlainObject,aW={key:"__WHITE"},oW={image:gC,rendertexture:mC};var Jx=function(s,t){t===void 0&&(t=aW);var e;return rW(t)?(t.hasOwnProperty("type")||(t.hasOwnProperty("key")?t.type="image":t.hasOwnProperty("width")&&(t.type="rendertexture")),e=new oW[t.type](s,t),s.add.existing(e)):e=t,e},hW=function(s,t,e){var f;if(e===void 0){f=[];for(var i,n,o=0,r=t.length;o<r;o++)n=t[o],n?i=Jx(s,n):i=null,f.push(i)}else{f={};for(var i,a,o=0,r=e.length;o<r;o++)a=e[o],t.hasOwnProperty(a)?i=Jx(s,t[a]):i=null,f[a]=i}return f};const lW=Phaser.Math.DegToRad,Qx=lW(180);var uW=function(s,t){var e=t.back;e&&(s.orientation===0?e.transformVerts(0,0,0,0,Qx,0):e.transformVerts(0,0,0,Qx,0,0))};const Ad=Phaser.Utils.Objects.GetValue,fW=Phaser.Math.Linear;class dW extends gr{constructor(t,e){super(t,e),this.resetFromJSON(e),this.boot()}resetFromJSON(t){return super.resetFromJSON(t),this.setEase(Ad(t,"ease","Cubic")),this.setFrontToBackDirection(Ad(t,"frontToBack",0)),this.setBackToFrontDirection(Ad(t,"backToFront",1)),this}setFrontToBackDirection(t){return typeof t=="string"&&(t=jx[t]),this.endAngleFB=t===0?180:-180,this}setBackToFrontDirection(t){return typeof t=="string"&&(t=jx[t]),this.endAngleBF=t===0?-180:180,this}start(t,e){if(this.timer.isRunning)return this;this.timer.setDelay(this.delay).setDuration(t);var f=e+1,i=this.parent;return i.face===0?(this.startAngle=0,this.endAngle=this.endAngleFB*f):(this.startAngle=this.endAngleBF,this.endAngle=this.startAngle-this.endAngleBF*f),super.start(),this}flip(t,e){return this.isRunning?this:(t===void 0&&(t=this.duration),e===void 0&&(e=0),this.start(t,e),this.emit("start",this.parent,this),this.parent.currentFaceIndex=(this.parent.currentFaceIndex+e+1)%2,this)}flipRight(t,e){return this.parent.currentFaceIndex===0?this.setFrontToBackDirection(0):this.setBackToFrontDirection(0),this.flip(t,e),this}flipLeft(t,e){return this.parent.currentFaceIndex===0?this.setFrontToBackDirection(1):this.setBackToFrontDirection(1),this.flip(t,e),this}updateGameObject(t,e){var f=this.easeFn(e.t),i=fW(this.startAngle,this.endAngle,f);t.orientation===0?t.angleY=i:t.angleX=i}}const jx={right:0,"left-to-right":0,left:1,"right-to-left":1},cW=Phaser.Utils.Objects.IsPlainObject,ur=Phaser.Utils.Objects.GetValue,vW=["back","front"];class pW extends sW{constructor(t,e,f,i){cW(e)&&(i=e,e=ur(i,"x",0),f=ur(i,"y",0));var n=hW(t,i,vW),o=n.back,r=n.front,a=ur(i,"width"),l=ur(i,"height");if(a===void 0||l===void 0){if(a===void 0){var h=r?r.width:0,u=o?o.width:0;a=Math.max(h,u)}if(l===void 0){var v=r?r.height:0,d=o?o.height:0;l=Math.max(v,d)}}super(t,e,f,a,l,n),this.type="rexPerspectiveCard",this.frontFaceRotationX=0,this.frontFaceRotationY=0,this.frontFaceRotationZ=0,xn(n,function(p,g){this[`${g}Face`]=p},this);var c=ur(i,"flip",void 0);c!==!1&&(this.flip=new dW(this,c)),this.setOrientation(ur(i,"orientation",0)),uW(this,n),this.setFace(ur(i,"face",0))}get rotationX(){return this.frontFaceRotationX}set rotationX(t){this.frontFaceRotationX!==t&&(this.frontFaceRotationX=t,xn(this.faces,function(e){e.rotationX=t},null,!0))}get rotationY(){return this.frontFaceRotationY}set rotationY(t){this.frontFaceRotationY!==t&&(this.frontFaceRotationY=t,xn(this.faces,function(e){e.rotationY=t},null,!0))}get rotationZ(){return this.frontFaceRotationZ}set rotationZ(t){this.frontFaceRotationZ!==t&&(this.frontFaceRotationZ=t,xn(this.faces,function(e){e.rotationZ=t},null,!0))}setOrientation(t){return typeof t=="string"&&(t=gW[t]),this.orientation=t,this}get face(){return this.currentFaceIndex}set face(t){typeof t=="string"&&(t=mW[t]),this.currentFaceIndex=t;var e=t===1,f=e?180:0;this.orientation===0?this.angleY=f:this.angleX=f}setFace(t){return this.face=t,this}toggleFace(){var t=this.face===0?1:0;return this.setFace(t),this}}const gW={x:0,horizontal:0,h:0,y:1,vertical:1,v:1},mW={front:0,back:1};Phaser.Utils.Objects.GetValue;Phaser.Math.RadToDeg;Phaser.Math.DegToRad;Phaser.Math.Angle.WrapDegrees;Phaser.Math.Angle.ShortestBetween;Phaser.Math.Wrap;Phaser.Math.Linear;Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;Phaser.Math.DegToRad;Phaser.Math.RadToDeg;Phaser.Math.Angle.WrapDegrees;Phaser.Math.Linear;Phaser.Math.Wrap;Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;Phaser.Math.Wrap;const xW=Phaser.Utils.Objects.GetValue;var yW=function(s,t,e){t.visibleSibling=[],t.isRunning=!1,t.useParentBounds=xW(e,"useParentBounds",!1),t.setPosition(s.x,s.y).setVisible(!1),s.pin(t)},xC=function(s,t){if(!s)return!1;for(var e=t.visibleSibling,f=0,i=e.length;f<i;f++)s.setChildVisible(e[f],!0);return e.length=0,s.setChildVisible(t,!1),t.isRunning=!1,!0},TW=function(s,t){if(!s)return!1;xC(s,t);var e=t.useParentBounds;Pc({gameObjects:s.getAllVisibleChildren(),renderTexture:t.rt,x:t.x,y:t.y,width:e?s.displayWidth:void 0,height:e?s.displayHeighth:void 0,originX:e?s.originX:void 0,originY:e?s.originY:void 0}),s.setChildVisible(t,!0);for(var f=t.visibleSibling,i=s.children,n=0,o=i.length;n<o;n++){var r=i[n];r.visible&&r!==t&&(s.setChildVisible(r,!1),f.push(r))}return t.isRunning=!0,!0},yC=function(s){return class extends s{constructor(e,f){var i=e.scene;super(i,0,0,1,1,f),i.add.existing(this),yW(e,this,f)}destroy(e){!this.scene||(this.exit(),super.destroy(e))}enter(){var e=TW(this.rexContainer.parent,this);return e&&this.syncSize(),this}exit(){return xC(this.rexContainer.parent,this),this}}};class TC extends yC(mC){get perspectiveState(){return this.isRunning}}const CW=Phaser.Utils.Objects.GetValue;var SW=function(s){var t=this.scene;this.setSnapshotPadding(CW(s,"snapshotPadding",0)),s=pr(s),delete s.width,delete s.height,s.front={width:1,height:1},s.back={width:1,height:1};var e=new pW(t,s);t.add.existing(e);var f=e.flip;if(f){var i=this;f.on("start",function(){i.enterPerspectiveMode()}).on("complete",function(){i.exitPerspectiveMode()})}return e};const EW=["front","back"];var PW={enterPerspectiveMode(){return this.isInPerspectiveMode?this:(this.setChildVisible(this.perspectiveCard,!0),this.snapshotFace(0),this.snapshotFace(1),this.setChildVisible(this.childrenMap.front,!1),this.setChildVisible(this.childrenMap.back,!1),this.perspectiveCard.setSize(this.width,this.height),this)},exitPerspectiveMode(){if(!this.isInPerspectiveMode)return this;this.setChildVisible(this.perspectiveCard,!1);var s=this.perspectiveCard.face===0;return this.setChildVisible(this.childrenMap.front,s),this.setChildVisible(this.childrenMap.back,!s),this},setSnapshotPadding(s){return this.snapshotPadding=s,this},snapshotFace(s){typeof s=="number"&&(s=EW[s]);var t=this.perspectiveCard.faces[s],e=this.childrenMap[s];t.rt.clear();var f=e.visible;e.visible=!0;var i=e.isRexContainerLite?e.getAllVisibleChildren():e;return t.snapshot(i,{padding:this.snapshotPadding}),e.visible=f,this}};const qx=Phaser.Utils.Objects.GetValue;class Mv extends Sn{constructor(t,e){super(t,e),this.type="rexPerspectiveCard";var f=e.back,i=qx(e,"expand.back",!0);this.add(f,{key:"back",expand:i});var n=e.front,o=qx(e,"expand.front",!0);this.add(n,{key:"front",expand:o}),this.perspectiveCard=SW.call(this,e),this.pin(this.perspectiveCard),this.exitPerspectiveMode(!1)}get flip(){return this.perspectiveCard.flip}get face(){return this.perspectiveCard.face}set face(t){if(!(this.flip&&this.flip.isRunning)){this.perspectiveCard.face=t;var e=t===0,f=this.childrenMap.front,i=this.childrenMap.back;this.setChildVisible(f,e),this.setChildVisible(i,!e)}}setFace(t){return this.face=t,this}toggleFace(){var t=this.face===0?1:0;return this.setFace(t),this}get isInPerspectiveMode(){return this.perspectiveCard.visible}get rotationX(){return this.perspectiveCard.rotationX}set rotationX(t){this.enterPerspectiveMode(),this.perspectiveCard.rotationX=t}get angleX(){return this.perspectiveCard.angleX}set angleX(t){this.enterPerspectiveMode(),this.perspectiveCard.angleX=t}get rotationY(){return this.perspectiveCard.rotationY}set rotationY(t){this.enterPerspectiveMode(),this.perspectiveCard.rotationY=t}get angleY(){return this.perspectiveCard.angleY}set angleY(t){this.enterPerspectiveMode(),this.perspectiveCard.angleY=t}get rotationZ(){return this.perspectiveCard.rotationZ}set rotationZ(t){this.enterPerspectiveMode(),this.perspectiveCard.rotationZ=t}get angleZ(){return this.perspectiveCard.angleZ}set angleZ(t){this.enterPerspectiveMode(),this.perspectiveCard.angleZ=t}panX(t){return this.enterPerspectiveMode(),this.perspectiveCard.panX(t),this}panY(t){return this.enterPerspectiveMode(),this.perspectiveCard.panY(t),this}panZ(t){return this.enterPerspectiveMode(),this.perspectiveCard.panZ(t),this}transformVerts(t,e,f,i,n,o){return this.enterPerspectiveMode(),this.perspectiveCard.transformVerts(t,e,f,i,n,o),this}forEachFace(t,e,f){return this.enterPerspectiveMode(),this.perspectiveCard.forEachFace(t,e,f),this}}Object.assign(Mv.prototype,PW);yt.register("perspectiveCard",function(s){var t=new Mv(this.scene,s);return this.scene.add.existing(t),t});Ct(window,"RexPlugins.UI.PerspectiveCard",Mv);var MW=function(s){var t=this.getElement("tabs.buttons");if(!(s>=t.length))return t[s].name},AW=function(s){for(var t=this.getElement("tabs.buttons"),e=0,f=t.length;e<f;e++)if(t[e].name===s)return e};const OW=Phaser.Utils.Objects.IsPlainObject,Od=Phaser.Utils.Objects.GetValue,RW=Phaser.Utils.String.UUID;var LW=function(s,t,e){if(OW(s)){var f=s;s=Od(f,"key"),t=Od(f,"tab"),e=Od(f,"page")}return s||(s=RW()),t.name=s,this.childrenMap.tabs.addButton(t),this.childrenMap.pages.addPage(e,{key:s}),this},wW=function(s){var t;return typeof s=="number"?t=s:t=this.getPageIndex(s),t!=null&&this.childrenMap.tabs.emitButtonClick(t),this},FW=function(){return this.swapPage(0),this},IW=function(){return this.swapPage(this.getElement("tabs.buttons").length-1),this},DW={swapPage:wW,swapFirstPage:FW,swapLastPage:IW},BW=function(s,t){typeof s=="number"&&(s=this.getPageKey(s));var e=this.childrenMap.tabs,f=e.getByName(s),i=this.childrenMap.pages,n=i.getElement(s);return!f||!n?this:(i.removeChildrenMap(s),e.removeButton(f,t),i.remove(n,t),this)},bW={removePage:BW},GW=function(s){return typeof s=="number"&&(s=this.getPageKey(s)),this.childrenMap.pages.getPage(s)},NW=function(s){var t;return typeof s=="number"?t=s:t=this.getPageIndex(s),this.getElement("tabs.buttons")[t]},CC={getPageKey:MW,getPageIndex:AW,addPage:LW,getPage:GW,getTab:NW};Object.assign(CC,DW,bW);const fr=Phaser.Utils.Objects.GetValue,Jh=Se.prototype.add;class Av extends Se{constructor(t,e){e===void 0&&(e={});var f=fr(e,"tabPosition","top"),i=f==="left"||f==="right"?"x":"y";e.orientation=i,super(t,e),this.type="rexTabPages";var n=fr(e,"background",void 0);n&&this.addBackground(n);var o=fr(e,"pages"),r=new Bo(t,o);t.add.existing(r);var a=i==="y",l=a?fr(e,"wrapTabs",!1):!1,h=fr(e,"tabs",void 0);h===void 0&&(h={});var u=l?zs:Ue;h.orientation=a?"x":"y",h.buttonsType="radio";var v=new u(t,h);t.add.existing(v);var d=l?!0:fr(e,"expand.tabs",!1),c=fr(e,"align.tabs","left");switch(f){case"top":case"left":Jh.call(this,v,{proportion:0,expand:d,align:c}),Jh.call(this,r,{proportion:1,expand:!0});break;case"bottom":case"right":Jh.call(this,r,{proportion:1,expand:!0}),Jh.call(this,v,{proportion:0,expand:d,align:c});break}this.addChildrenMap("background",n),this.addChildrenMap("tabs",v),this.addChildrenMap("pages",r),v.on("button.click",function(p){var g=p.name;r.hasPage(g)&&r.swapPage(g)}),v.on("button.statechange",function(p,g,m,x){var y=m?"tab.focus":"tab.blur";this.emit(y,p,p.name)},this),r.on("pagevisible",function(p,g,m){this.emit("page.focus",p,g)}),r.on("pageinvisible",function(p,g,m){this.emit("page.blur",p,g)})}get currentKey(){return this.getElement("pages").currentKey}set currentKey(t){this.showPage(t)}get keys(){return this.getElement("pages").keys}get currentPage(){return this.getElement("pages").currentPage}get previousPage(){return this.getElement("pages").previousPage}}Object.assign(Av.prototype,CC);yt.register("tabPages",function(s){var t=new Av(this.scene,s);return this.scene.add.existing(t),t});Ct(window,"RexPlugins.UI.TabPages",Av);var YW=function(s){return s!==void 0&&(this.text=s),this.lines=Tv(this.textObject,this.text,this.lines),this.linesCount=this.lines.length,this._textHeight=void 0,this._textVisibleHeight=void 0,this.updateTextObject(),this},SC=function(s){return(s-this.textLineSpacing)/(this.textLineHeight+this.textLineSpacing)},EC=function(s){return s*(this.textLineHeight+this.textLineSpacing)-this.textLineSpacing},zW=function(s){var t=s+this.visibleLinesCount+1,e;switch(this.textObjectType){case Yi:e=this.lines.slice(s,t).join(`
`);break;case _i:var f=this.lines.getLineStartIndex(s),i=this.lines.getLineEndIndex(t-1);e=this.lines.getSliceTagText(f,i,!0);break;case tn:e=this.lines.slice(s,t).join(`
`);break}return e},PC=function(){var s=this.textObject.rexSizer;this.textObject.y+=s.offsetY-s.preOffsetY,s.preOffsetY=s.offsetY,this.resetChildPositionState(this.textObject),this.textCropEnable&&VW.call(this)},VW=function(){if(!!this.textObject.setCrop){var s=this.textObject.rexSizer.offsetY,t,e;s<=0?(t=-s,e=this.height):(t=0,e=this.height-s),this.textObject.setCrop(0,t,this.width,e)}},UW=function(){var s=Math.max(Math.floor(SC.call(this,-this.textOY)),0),t=EC.call(this,s)+this.textOY,e=zW.call(this,s);return Cv(this.textObject,e),this.textObject.rexSizer.offsetY=t,PC.call(this),this},WW=function(){return this._textLineHeight=void 0,this._textLineSpacing=void 0,this._visibleLinesCount=void 0,this._textHeight=void 0,this._textVisibleHeight=void 0,Ro.call(this),this},XW=function(s,t,e){if(e+=this.textLineHeight+this.textLineSpacing,!(this.textObjectWidth===t&&this._textObjectRealHeight===e)){switch(this.textObjectWidth=t,this._textObjectRealHeight=e,this.textObjectType){case Yi:case _i:s.setFixedSize(t,e);var f=s.style,i=Math.max(t,0);this.textObjectType===Yi?f.wordWrapWidth=i:(f.wrapMode===0&&(f.wrapMode=1),f.wrapWidth=i);break;case tn:s.setMaxWidth(t);break}this.setText()}},HW=function(){var s,t,e,f=this.left,i=this.top,n,o,r,a;s=this.textObject,s.rexSizer.hidden||(t=s.rexSizer,e=t.padding,n=f+e.left,o=i+e.top,r=this.width-e.left-e.right,a=this.height-e.top-e.bottom,XW.call(this,s,r,a),Ul(s,n,o,r,a,t.align),t.preOffsetY=0,PC.call(this),this.textMask&&(this.textMask.setPosition().resize(),this.resetChildPositionState(this.textMask)))},$W={setText:YW,updateTextObject:UW,preLayout:WW,layoutChildren:HW};const _x=Phaser.Utils.Objects.IsPlainObject,Ni=Phaser.Utils.Objects.GetValue,kW=Phaser.Display.Align.TOP_LEFT;class MC extends mr{constructor(t,e,f,i,n,o){_x(e)?(o=e,e=Ni(o,"x",0),f=Ni(o,"y",0),i=Ni(o,"width",void 0),n=Ni(o,"height",void 0)):_x(i)&&(o=i,i=Ni(o,"width",void 0),n=Ni(o,"height",void 0)),super(t,e,f,i,n,o),this.type="rexTextBlock",this.textObject=void 0,this.linesCount=0,this.textMask=void 0,this.textObjectType=void 0,this._textLineHeight=void 0,this._textLineSpacing=void 0,this._visibleLinesCount=void 0,this._textHeight=void 0,this._textVisibleHeight=void 0,this.lines=void 0,this.text=Ni(o,"content",""),this._textOY=0,this.execeedTopState=!1,this.execeedBottomState=!1,this.setClampMode(Ni(o,"clamplTextOY",!0)),this.alwaysScrollable=Ni(o,"alwaysScrollable",!1);var r=Ni(o,"background",void 0),a=Ni(o,"text",void 0);a===void 0&&(a=KW(t)),this.textCropEnable=Ni(o,"textCrop",!!a.setCrop);var l=Ni(o,"textMask",!this.textCropEnable);r&&this.addBackground(r),this.add(a),this.sizerChildren=[a];var h=this.getSizerConfig(a);h.align=kW,h.padding=ca(0),h.expand=!0,this.textObject=a,this.textObjectType=Do(a),h.preOffsetY=0,h.offsetY=0,l&&(this.textMask=po.call(this,this.textObject,this)),this.addChildrenMap("background",r),this.addChildrenMap("text",a)}destroy(t){if(!!this.scene){if(this.textObject=void 0,this.textMask=void 0,this.lines){switch(this.textObjectType){case Yi:this.lines.length=0;break;case _i:this.lines.destroy();break;case tn:this.lines.length=0;break}this.lines=void 0}super.destroy(t)}}setClampMode(t){return t===void 0&&(t=!0),this.clampTextOY=t,this}get textLineHeight(){if(this._textLineHeight===void 0){var t;switch(this.textObjectType){case Yi:case _i:var e=this.textObject.style;t=e.metrics.fontSize+e.strokeThickness;break;case tn:var f=this.textObject.fontSize/this.textObject.fontData.size;t=this.textObject.fontData.lineHeight*f;break}this._textLineHeight=t}return this._textLineHeight}get textLineSpacing(){if(this._textLineSpacing===void 0){var t;switch(this.textObjectType){case Yi:case _i:t=this.textObject.lineSpacing;break;case tn:t=0;break}this._textLineSpacing=t}return this._textLineSpacing}get visibleLinesCount(){return this._visibleLinesCount===void 0&&(this._visibleLinesCount=Math.floor(SC.call(this,this._textObjectRealHeight))),this._visibleLinesCount}get topTextOY(){return 0}get bottomTextOY(){return-this.textVisibleHeight}get textHeight(){return this._textHeight===void 0&&(this._textHeight=EC.call(this,this.linesCount)),this._textHeight}get textObjectHeight(){return this._textObjectRealHeight-(this.textLineHeight+this.textLineSpacing)}get textVisibleHeight(){if(this._textVisibleHeight===void 0){var t=this.textHeight-this.textObjectHeight;!this.alwaysScrollable&&t<0&&(t=0),this._textVisibleHeight=t}return this._textVisibleHeight}textOYExceedTop(t){return t===void 0&&(t=this.textOY),t>this.topTextOY}textOYExeceedBottom(t){return t===void 0&&(t=this.textOY),t<this.bottomTextOY}get textOY(){return this._textOY}set textOY(t){var e=this.topTextOY,f=this.bottomTextOY,i=this.textOYExceedTop(t),n=this.textOYExeceedBottom(t);this.clampTextOY&&(this.visibleLinesCount>this.linesCount?t=0:i?t=e:n&&(t=f)),this._textOY!==t&&(this._textOY=t,this.updateTextObject()),i&&(this.execeedTopState||this.emit("execeedtop",this,t,e)),this.execeedTopState=i,n&&(this.execeedBottomState||this.emit("execeedbottom",this,t,f)),this.execeedBottomState=n}setTextOY(t){return this.textOY=t,this}set t(t){this.textOY=-this.textVisibleHeight*t}get t(){var t=this.textVisibleHeight;return t===0?0:this.textOY/-t}setTextOYByPercentage(t){return this.t=t,this}}var KW=function(s){return s.add.text(0,0,"")};Object.assign(MC.prototype,$W);var ZW=function(s){Object.defineProperty(s,"childOY",{configurable:!0,get:function(){return s.textOY},set:function(t){s.textOY=t}}),Object.defineProperty(s,"topChildOY",{get:function(){return s.topTextOY}}),Object.defineProperty(s,"bottomChildOY",{get:function(){return s.bottomTextOY}}),Object.defineProperty(s,"childVisibleHeight",{get:function(){return s.textObjectHeight}}),Object.defineProperty(s,"childHeight",{get:function(){return s.textHeight}})},JW=function(s){var t=this.childrenMap.child;return t.setText(s),this.resizeController(),this},QW=function(s){return this.setText(this.text+s),this};const rs=Phaser.Utils.Objects.GetValue;class au extends su{constructor(t,e){e===void 0&&(e={});var f=rs(e,"text",void 0),i=rs(e,"textWidth",void 0),n=rs(e,"textHeight",void 0),o=rs(e,"textCrop",!!f.setCrop),r=rs(e,"textMask",!o),a=rs(e,"content",""),l=new MC(t,{width:i,height:n,text:f,textMask:r,textCrop:o&&!r,content:a,clamplTextOY:rs(e,"clamplChildOY",!1),alwaysScrollable:rs(e,"alwaysScrollable",!1)});t.add.existing(l);var h=i===void 0?1:0,u=n===void 0;ZW(l),e.scrollMode=0,e.type="rexTextArea",e.child={gameObject:l,proportion:h,expand:u};var v=rs(e,"space",void 0);v&&(v.child=v.text),super(t,e),this.addChildrenMap("text",f)}get text(){return this.childrenMap.child.text}get linesCount(){return this.childrenMap.child.linesCount}get contentHeight(){return this.childrenMap.child.textHeight}}var jW={setText:JW,appendText:QW};Object.assign(au.prototype,jW);yt.register("textArea",function(s){var t=new au(this.scene,s);return this.scene.add.existing(t),t});Ct(window,"RexPlugins.UI.TextArea",au);var qW=function(){if(this.rexSizer.hidden)return 0;var s,t=this.child,e=t.rexSizer;return e.hidden?s=0:this.scrollMode===0?s=this.getChildWidth(t):s=0,s},_W=function(){if(this.rexSizer.hidden)return 0;var s,t=this.child,e=t.rexSizer;return e.hidden||this.scrollMode===0?s=0:s=t.isRexSizer?Math.max(t.minHeight,t.childrenHeight):t.hasOwnProperty("minHeight")?t.minHeight:qt(t),s},tX=function(s){return s===void 0&&(s=[]),this.child&&this.child.isRexSizer&&s.push(this.child),s},eX=function(){var s=this.left,t=this.top;this.scrollMode===0?t+=this.childOY:s+=this.childOY,this.child.setPosition(s,t),this.resetChildPositionState(this.child),this.setMaskChildrenFlag()},iX=function(){var s=this.child,t,e;s.rexSizer.hidden||(this.scrollMode===0?t=this.width:e=this.height,s.isRexSizer?s.runLayout(this,t,e):Ys(s,t,e),this.resetChildPosition(),this.layoutChildrenMask(),this.maskChildren())},AC={getChildrenWidth:qW,getChildrenHeight:_W,getChildrenSizers:tX,resetChildPosition:eX,layoutChildren:iX};Object.assign(AC,iC);const ty=Phaser.Utils.Objects.IsPlainObject,gn=Phaser.Utils.Objects.GetValue,nX=Phaser.Display.Align.TOP_LEFT;class OC extends mr{constructor(t,e,f,i,n,o){ty(e)?(o=e,e=gn(o,"x",0),f=gn(o,"y",0),i=gn(o,"width",void 0),n=gn(o,"height",void 0)):ty(i)&&(o=i,i=gn(o,"width",void 0),n=gn(o,"height",void 0)),super(t,e,f,i,n,o),this.type="rexScrollableBlock",this.child=void 0,this.childrenMask=void 0,this._childOY=0,this.execeedTopState=!1,this.execeedBottomState=!1,this.setScrollMode(gn(o,"scrollMode",!0)),this.setClampMode(gn(o,"clamplChildOY",!0));var r=gn(o,"child",void 0),a=gn(o,"expand",!0);r.setOrigin&&r.setOrigin(0),this.add(r),this.sizerChildren=[r];var l=this.getSizerConfig(r);l.align=nX,l.expand=a,this.child=r,this.setupChildrenMask(gn(o,"mask",void 0))}destroy(t){!this.scene||(this.destroyChildrenMask(),this.child=void 0,super.destroy(t))}setScrollMode(t){return typeof t=="string"&&(t=_T[t.toLowerCase()]),this.scrollMode=t,this}setClampMode(t){return t===void 0&&(t=!0),this.clampChildOY=t,this}get instHeight(){return this.scrollMode===0?this.height:this.width}get instWidth(){return this.scrollMode===0?this.width:this.height}get childHeight(){return this.scrollMode===0?qt(this.child):ae(this.child)}get childWidth(){return this.scrollMode===0?ae(this.child):qt(this.child)}get topChildOY(){return 0}get bottomChildOY(){return-this.visibleHeight}get childVisibleHeight(){return this.instHeight}get visibleHeight(){var t=this.childHeight-this.childVisibleHeight;return t<0&&(t=0),t}childOYExceedTop(t){return t===void 0&&(t=this.childOY),t>this.topChildOY}childOYExeceedBottom(t){return t===void 0&&(t=this.childOY),t<this.bottomChildOY}get childOY(){return this._childOY}set childOY(t){var e=this.topChildOY,f=this.bottomChildOY,i=this.childOYExceedTop(t),n=this.childOYExeceedBottom(t);this.clampChildOY&&(this.childVisibleHeight>this.childHeight?t=0:i?t=e:n&&(t=f)),this._childOY!==t&&(this._childOY=t,this.resetChildPosition()),i&&(this.execeedTopState||this.emit("execeedtop",this,t,e)),this.execeedTopState=i,n&&(this.execeedBottomState||this.emit("execeedbottom",this,t,f)),this.execeedBottomState=n}setChildOY(t){return this.childOY=t,this}set t(t){this.childOY=-this.visibleHeight*t}get t(){var t=this.visibleHeight;return t===0?0:this.childOY/-t}setChildOYByPercentage(t){return this.t=t,this}}Object.assign(OC.prototype,AC);const Za=Phaser.Utils.Objects.GetValue;class RC extends su{constructor(t,e){e===void 0&&(e={});var f=iu(e),i=Za(e,"panel",void 0);i===void 0&&(i={}),i.scrollMode=f,i.clamplChildOY=Za(e,"clamplChildOY",!1);var n=new OC(t,i);t.add.existing(n);var o=Za(i,"width",void 0),r=Za(i,"height",void 0),a,l;f===0?(a=o===void 0?1:0,l=r===void 0):(a=r===void 0?1:0,l=o===void 0),e.type="rexScrollablePanel",e.child={gameObject:n,proportion:a,expand:l};var h=Za(e,"space",void 0);h&&(h.child=h.panel),super(t,e),this.addChildrenMap("panel",n.child),this.addChildrenMap("panelLayer",n.maskLayer)}setChildrenInteractive(t){return t===void 0&&(t={}),t.hasOwnProperty("eventEmitter")||(t.eventEmitter=this),t.hasOwnProperty("targets")||(t.targets=[this.childrenMap.panel]),iv(this.childrenMap.child,t),this}}yt.register("scrollablePanel",function(s){var t=new RC(this.scene,s);return this.scene.add.existing(t),t});Ct(window,"RexPlugins.UI.ScrollablePanel",RC);var Qh={popUp:function(s,t){s.popUp(t)},scaleDown:function(s,t){s.scaleDown(t)},fadeIn:function(s,t){s.fadeIn(t)},fadeOut:function(s,t){s.fadeOut(t)}},LC=function(s,t,e,f){e===void 0&&(e=0),f===void 0&&(f=t.length),s.length=f-e;for(var i=0,n=s.length;i<n;i++)s[i]=t[i+e];return s};const ol=Phaser.Utils.Objects.GetValue;var ec=function(s,t,e){var f=ol(e,"reverse",!1),i;if(Cn(s[0]))if(f)for(var o=s.length,n=o-1;n>=0;n--)i=ec(s[n],t,e);else for(var n=0,o=s.length;n<o;n++)i=ec(s[n],t,e);else i=sX(s,t,e);return i},sX=function(s,t,e){var f=ol(e,"argsConvert",void 0),i=ol(e,"argsConvertScope",void 0),n=s[0];if(Es=LC(Es,s,1),f){f===!0&&(f=gT,i=void 0);for(var o=0,r=Es.length;o<r;o++)i?Es[o]=f.call(i,Es[o],s):Es[o]=f(Es[o],s)}var a;typeof n=="string"?(a=t[n],a==null&&(a=ol(t,n,null))):a=n;var l=a.apply(t,Es);return l},Es=[];const mn=Phaser.Utils.Objects.GetValue;class rX extends He{constructor(t,e){super(t,e);var f=mn(e,"clock",void 0);f||(f=new cT(t)),this.clock=f,this.clock.on("update",this.update,this),this.resetFromJSON(e)}resetFromJSON(t){return this.clock.resetFromJSON(mn(t,"clock",void 0)),this.state=mn(t,"state",0),this.commands=mn(t,"commands",[]),this.scope=mn(t,"scope",void 0),this.setTimeUnit(mn(t,"timeUnit",0)),this.setDtMode(mn(t,"dtMode",0)),this.index=mn(t,"index",0),this.nextTime=mn(t,"nextTime",0),this}toJSON(){return{clock:this.clock.toJSON(),state:this.state,commands:this.commands,scope:this.scope,timeUnit:this.timeUnit,dtMode:this.dtMode,index:this.index,nextTime:this.nextTime}}shutdown(t){this.isShutdown||(this.clock.shutdown(t),this.commands=void 0,super.shutdown(t))}load(t,e,f){this.stop();var i=mn(f,"timeUnit",void 0);i!==void 0&&this.setTimeUnit(i);var n=mn(f,"dtMode",void 0);return n!==void 0&&this.setDtMode(n),t=t.filter(function(o){var r=o[0];return!isNaN(r)}).map(function(o){var r=o[0];return typeof r=="string"&&(o[0]=parseFloat(o[0])),o}),this.dtMode===0&&t.sort(function(o,r){var a=o[0],l=r[0];return a>l?1:a<l?-1:0}),this.commands=t,this.scope=e,this}start(t){return t===void 0&&(t=0),this.stop(),this.index=0,this.state=1,this.nextTime=this.getNextDt(0),this.clock.start(t),this.update(t),this.emit("start",this.parent,this),this}pause(){return this.clock.pause(),this.emit("pause",this.parent,this),this}resume(){return this.clock.resume(),this.emit("resume",this.parent,this),this}stop(){return this.clock.stop(),this.state=0,this.emit("stop",this.parent,this),this}seek(t){return this.clock.seek(t),this}seekToNext(){return this.seek(this.nextTime),this}get isPlaying(){return this.clock.isRunning}get completed(){return this.state===2}get timeScale(){return this.clock.timeScale}set timeScale(t){this.clock.timeScale=t}setTimeScale(t){return this.timeScale=t,this}get now(){return this.clock.now}update(t){if(this.nextTime>t)return this;for(var e=this.commands.length-1;;){var f=this.commands[this.index],i=f[1];if(Cn(i)||(i=LC(aX,f,1)),ec(i,this.scope),this.emit("runcommand",i,this.scope),this.index===e)return this.complete(),this;if(this.index++,this.nextTime=this.getNextDt(this.nextTime),this.nextTime>t)return this}}complete(){this.clock.stop(),this.state=2,this.emit("complete",this.parent,this)}getNextDt(t){var e=this.commands[this.index][0];return this.timeUnit===1&&(e=e*1e3),this.dtMode===1&&(e+=t),e}setDtMode(t){return typeof t=="string"&&(t=hX[t]),this.dtMode=t,this}setTimeUnit(t){return typeof t=="string"&&(t=oX[t]),this.timeUnit=t,this}}var aX=[];const oX={ms:0,s:1,sec:1},hX={abs:0,absolute:0,inc:1,increment:1},Ja=Phaser.Utils.Objects.GetValue;class Ov extends pa{constructor(t,e){e===void 0&&(e={text:createDefaultTextObject(t)}),super(t,e),this.type="rexToast",this.setTransitInTime(Ja(e,"duration.in",200)),this.setDisplayTime(Ja(e,"duration.hold",1200)),this.setTransitOutTime(Ja(e,"duration.out",200)),this.setTransitInCallback(Ja(e,"transitIn",Ps.popUp)),this.setTransitOutCallback(Ja(e,"transitOut",Ps.scaleDown)),this.player=new rX(this,{dtMode:1}),this.messages=[],this.scaleX0=void 0,this.scaleY0=void 0,this.setVisible(!1)}destroy(t){!this.scene||(this.player.destroy(),this.player=void 0,this.messages=void 0,super.destroy(t))}setDisplayTime(t){return this.displayTime=t,this}setTransitOutTime(t){return this.transitOutTime=t,this}setTransitInTime(t){return this.transitInTime=t,this}setTransitInCallback(t){switch(typeof t=="string"&&(t=Ps[t]),t){case Ps.popUp:t=Qh.popUp;break;case Ps.fadeIn:t=Qh.fadeIn;break}return t||(t=mi),this.transitInCallback=t,this}setTransitOutCallback(t){switch(typeof t=="string"&&(t=Ps[t]),t){case Ps.scaleDown:t=Qh.scaleDown;break;case Ps.fadeOut:t=Qh.fadeOut;break}return t||(t=mi),this.transitOutCallback=t,this}setScale(t,e){return e===void 0&&(e=t),this.scaleX0=t,this.scaleY0=e,super.setScale(t,e),this}showMessage(t){if(this.scaleX0===void 0&&(this.scaleX0=this.scaleX),this.scaleY0===void 0&&(this.scaleY0=this.scaleY),t===void 0){if(this.messages.length===0)return this;t=this.messages.shift()}if(this.player.isPlaying)return this.messages.push(t),this;this.setScale(this.scaleX0,this.scaleY0).setVisible(!0),typeof t=="string"?this.setText(t):t(this),this.layout();var e=[[0,[this.transitInCallback,this,this.transitInTime]],[this.transitInTime,[mi]],[this.displayTime,[this.transitOutCallback,this,this.transitOutTime]],[this.transitOutTime,[this.setVisible,!1]],[30,[mi]]];return this.player.load(e,this).once("complete",function(){this.showMessage()},this).start(),this}}const Ps={popUp:0,fadeIn:1,scaleDown:0,fadeOut:1};yt.register("toast",function(s){var t=new Ov(this.scene,s);return this.scene.add.existing(t),t});Ct(window,"RexPlugins.UI.Toast",Ov);var lX=function(){return function(s,t,e,f){t!=="panel"&&e.setChildVisible(s,!0)}},uX=function(){return function(s,t,e,f){t!=="panel"&&e.setChildVisible(s,!1)}},fX={show:lX,hide:uX},dX=function(s,t){return t===void 0&&(t=1),function(e,f,i,n){f!=="panel"&&i.fadeChild(e,n?0:s,t)}},cX=function(s,t){return t===void 0&&(t=0),function(e,f,i,n){f!=="panel"&&i.fadeChild(e,n?0:s,t)}},vX={show:dX,hide:cX},ey=function(s,t){return function(e,f,i,n){f!=="panel"&&i.moveChild(e,n?0:s,t)}},pX={show:ey,hide:ey},iy=function(s,t){return function(e,f,i,n){f==="panel"&&i.moveChild(e,n?0:s,t)}},gX={show:iy,hide:iy};const Rd={visible:fX,fade:vX,move:pX,"move-panel":gX};var mX=function(s){var t,e;[t,...e]=typeof s=="string"?[s]:s;var f,i;return Rd.hasOwnProperty(t)?(f=Rd[t].show.apply(null,e),i=Rd[t].hide.apply(null,e)):(f=mi,i=mi),{show:f,hide:i}},xX={showChild(s,t){var e=this.sizerChildren[s];return e&&(this.emit("showchild",e,s,this,t),this.resetChildState(e)),this},hideChild(s,t){var e=this.sizerChildren[s];return e&&(this.emit("hidechild",e,s,this,t),this.resetChildState(e)),this},swapChild(s,t){return this.currentChildKey===s||(this.currentChildKey==="panel"||s==="panel"?(this.previousChildKey=this.currentChildKey,this.currentChildKey=s,this.hideChild(this.previousChildKey,t),this.showChild(this.currentChildKey,t)):(this.swapChild("panel",t),this.swapChild(s,t))),this},showPanel(s){return this.swapChild("panel",s),this},showLeftSide(){return this.swapChild("leftSide"),this},showRightSide(){return this.swapChild("rightSide"),this},showTopSide(){return this.swapChild("topSide"),this},showBottomSide(){return this.swapChild("bottomSide"),this},hideLeftSide(){return this.currentChildKey=="leftSide"&&this.showPanel(),this},hideRightSide(){return this.currentChildKey=="rightSide"&&this.showPanel(),this},hideTopSide(){return this.currentChildKey=="topSide"&&this.showPanel(),this},hideBottomSide(){return this.currentChildKey=="bottomSide"&&this.showPanel(),this},toggleLeftSide(){var s=this.currentChildKey!=="panel"?"panel":"leftSide";return this.swapChild(s),this},toggleRightSide(){var s=this.currentChildKey!=="panel"?"panel":"rightSide";return this.swapChild(s),this},toggleTopSide(){var s=this.currentChildKey!=="panel"?"panel":"topSide";return this.swapChild(s),this},toggleBottomSide(){var s=this.currentChildKey!=="panel"?"panel":"bottomSide";return this.swapChild(s),this}};const yX=en.prototype.setChildVisible;var TX={setChildVisible(s,t){var e;if(typeof s=="string"){var e=s;s=this.sizerChildren[e]}else e=Jl(this.sizerChildren,s);return t===void 0&&(t=this.currentChildKey===e),yX.call(this,s,t),this}},CX={fadeChild(s,t,e){var f;return typeof s=="string"?(f=s,s=this.sizerChildren[f]):f=Jl(this.sizerChildren,s),t===void 0&&(t=500),e===void 0&&(e=this.currentChildKey===f?1:0),s.fadeIn(t,{start:s.alpha,end:e}),this},fadeChildPromise(s,t,e){return typeof s=="string"&&(s=this.sizerChildren[key]),this.fadeChild(s,t,e),s._fade?We(s._fade):Promise.resolve()}},SX={moveChild(s,t,e,f){var i;typeof s=="string"?(i=s,s=this.sizerChildren[i]):i=Jl(this.sizerChildren,s),t===void 0&&(t=500);var n=this.currentChildKey===i;if(f===void 0)switch(i){case"leftSide":case"rightSide":f=ae(s);break;case"topSide":case"bottomSide":f=qt(s);break;default:if(n)switch(this.previousChildKey){case"leftSide":case"rightSide":f=ae(this.sizerChildren[this.previousChildKey]);break;case"topSide":case"bottomSide":f=qt(this.sizerChildren[this.previousChildKey]);break;default:f=0;break}else switch(this.currentChildKey){case"leftSide":case"rightSide":f=ae(this.sizerChildren[this.currentChildKey]);break;case"topSide":case"bottomSide":f=qt(this.sizerChildren[this.currentChildKey]);break;default:f=0;break}break}var o,r,a,l;if(n)switch(i){case"panel":switch(this.previousChildKey){case"leftSide":o=!0;break;case"rightSide":r=!0;break;case"topSide":a=!0;break;case"bottomSide":l=!0;break}break;case"leftSide":r=!0;break;case"rightSide":o=!0;break;case"topSide":l=!0;break;case"bottomSide":a=!0;break}else switch(i){case"panel":switch(this.currentChildKey){case"leftSide":r=!0;break;case"rightSide":o=!0;break;case"topSide":l=!0;break;case"bottomSide":a=!0;break}break;case"leftSide":o=!0;break;case"rightSide":r=!0;break;case"topSide":a=!0;break;case"bottomSide":l=!0;break}return o?s.moveTo(t,`-=${f}`,void 0,e):r?s.moveTo(t,`+=${f}`,void 0,e):a?s.moveTo(t,void 0,`-=${f}`,e):l?s.moveTo(t,void 0,`+=${f}`,e):s.moveTo(0),this},moveChildPromise(s,t,e,f){return typeof s=="string"&&(s=this.sizerChildren[key]),this.moveChild(s,t,e,f),s._easeMove?We(s._easeMove):Promise.resolve()}},wC={};Object.assign(wC,TX,CX,SX);const pi=Phaser.Utils.Objects.GetValue;class Rv extends Sn{constructor(t,e){super(t,e),this.type="rexSides",this.childrenMap=this.sizerChildren,this.previousChildKey=void 0,this.currentChildKey=void 0;var f=pi(e,"showChildCallback",void 0);if(f)if(qc(f)){var i=pi(e,"showChildCallbackScope",void 0);this.on("showchild",f,i);var n=pi(e,"hideChildCallback",void 0),o=pi(e,"hideChildCallbackScope",void 0);this.on("hidechild",n,o)}else{var r=mX(f);this.on("showchild",r.show),this.on("hidechild",r.hide)}var a=pi(e,"background",void 0),l=pi(e,"panel",void 0),h=pi(e,"leftSide",void 0),u=pi(e,"rightSide",void 0),v=pi(e,"topSide",void 0),d=pi(e,"bottomSide",void 0);if(a&&this.addBackground(a),l&&this.add(l,"panel","center",0,!0),h){var c=pi(e,"expand.left",!0);this.add(h,"leftSide","left-top",0,{height:c})}if(u){var c=pi(e,"expand.right",!0);this.add(u,"rightSide","right-top",0,{height:c})}if(v){var c=pi(e,"expand.top",!0);this.add(v,"topSide","left-top",0,{width:c})}if(d){var c=pi(e,"expand.bottom",!0);this.add(d,"bottomSide","left-bottom",0,{width:c})}}reset(){return this.previousChildKey=void 0,this.currentChildKey="panel",this.showChild("panel",!0),this.hideChild("leftSide",!0),this.hideChild("rightSide",!0),this.hideChild("topSide",!0),this.hideChild("bottomSide",!0),this}}Object.assign(Rv.prototype,xX,wC);yt.register("sides",function(s){var t=new Rv(this.scene,s);return this.scene.add.existing(t),t});Ct(window,"RexPlugins.UI.Sides",Rv);yt.register("click",function(s,t){return new va(s,t)});Ct(window,"RexPlugins.UI.Click",va);yt.register("clickOutside",function(s,t){return new _c(s,t)});Ct(window,"RexPlugins.UI.ClickOutside",_c);yt.register("inTouching",function(s,t){return new vo(s,t)});Ct(window,"RexPlugins.UI.InTouching",vo);const EX=Phaser.GameObjects.GameObject;var ou=function(s){return s instanceof EX};yt.register("tap",function(s,t){return ou(s)||(t=s,s=this.scene),new $l(s,t)});Ct(window,"RexPlugins.UI.Tap",$l);yt.register("press",function(s,t){return ou(s)||(t=s,s=this.scene),new kl(s,t)});Ct(window,"RexPlugins.UI.Press",kl);yt.register("swipe",function(s,t){return ou(s)||(t=s,s=this.scene),new Fo(s,t)});Ct(window,"RexPlugins.UI.Swipe",Fo);yt.register("pan",function(s,t){return ou(s)||(t=s,s=this.scene),new BT(s,t)});Ct(window,"RexPlugins.UI.Pan",BT);var FC=function(s){for(var t=s.scene.input,e=t.manager,f=e.pointersTotal,i=e.pointers,n,o=0;o<f;o++)if(n=i[o],!(!n.primaryDown||t.getDragState(n)!==0||!Sc(s,n)))return t.setDragState(n,1),t._drag[n.id]=[s],t.dragDistanceThreshold===0||t.dragTimeThreshold===0?(t.setDragState(n,3),t.processDragStartList(n)):t.setDragState(n,2),!0;return!1};const jh=Phaser.Utils.Objects.GetValue,ny=Phaser.Math.Distance.Between,sy=Phaser.Math.RotateAroundDistance;class IC extends He{constructor(t,e){super(t,{eventEmitter:!1}),this._enable=void 0,t.setInteractive(jh(e,"inputConfig",void 0)),this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.setEnable(jh(t,"enable",!0)),this.setAxisMode(jh(t,"axis",0)),this.setAxisRotation(jh(t,"rotation",0)),this}toJSON(){return{enable:this.enable,axis:this.axisMode,rotation:this.axisRotation}}boot(){var t=this.parent;t.on("dragstart",this.onDragStart,this),t.on("drag",this.onDrag,this),t.on("dragend",this.onDragEnd,this)}shutdown(t){this.isShutdown||(this.pointer=void 0,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||this.dragend(),this._enable=t,this.scene.input.setDraggable(this.parent,t),this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setAxisMode(t){return typeof t=="string"&&(t=PX[t]),this.axisMode=t,this}setAxisRotation(t){return this.axisRotation=t,this}drag(){return FC(this.parent),this}dragend(){if(!!this.isDragging)return this.scene.input.setDragState(this.pointer,5),this}onDragStart(t,e,f){this.isDragging||(this.pointer=t)}onDrag(t,e,f){if(this.pointer===t){var i=this.parent;if(this.axisMode===0)i.x=e,i.y=f;else if(this.axisRotation===0)this.axisMode===1?i.x=e:this.axisMode===2&&(i.y=f);else{var n,o={x:e,y:f};n=ny(o.x,o.y,i.x,i.y),o=sy(o,i.x,i.y,-this.axisRotation,n),this.axisMode===1?o.y=i.y:this.axisMode===2&&(o.x=i.x),n=ny(o.x,o.y,i.x,i.y),o=sy(o,i.x,i.y,this.axisRotation,n),i.x=o.x,i.y=o.y}}}onDragEnd(t,e,f,i){this.pointer===t&&(this.pointer=void 0)}get isDragging(){return this.pointer!==void 0}}const PX={both:0,"h&v":0,"x&y":0,horizontal:1,h:1,x:1,vertical:2,v:2,y:2};yt.register("drag",function(s,t){return new IC(s,t)});Ct(window,"RexPlugins.UI.Drag",IC);yt.register("pinch",function(s){return new bT(this.scene,s)});Ct(window,"RexPlugins.UI.Pinch",bT);yt.register("rotate",function(s){return new ev(this.scene,s)});Ct(window,"RexPlugins.UI.Rotate",ev);const MX=Phaser.Utils.Objects.IsPlainObject,ry=Phaser.Utils.Objects.GetValue;var ay=function(s,t,e){var f;if(s===void 0)s=e.texture.key,t=e.frame.name;else if(MX(s)){var i=s;s=ry(i,"key",e.texture.key),t=ry(i,"frame",e.frame.name)}else typeof s=="string"||(f=s);return f===void 0&&(f=function(n){n.setTexture(s,t)}),f};const Qa=Phaser.Utils.Objects.GetValue,AX=Phaser.Utils.Objects.GetAdvancedValue,OX=Phaser.Math.Linear;class DC extends gr{constructor(t,e){super(t,e),this.resetFromJSON(e),this.boot()}resetFromJSON(t){return super.resetFromJSON(t),this.setDuration(AX(t,"duration",500)),this.setEase(Qa(t,"ease","Sine")),this.setOrientation(Qa(t,"orientation",0)),this.setFrontFace(Qa(t,"front",void 0)),this.setBackFace(Qa(t,"back",void 0)),this.setFace(Qa(t,"face",0)),this}setOrientation(t){return typeof t=="string"&&(t=RX[t]),this.orientation=t,this}get face(){return this._face}set face(t){typeof t=="string"&&(t=LX[t]),this._face=t,t===0&&this.frontFaceCallback?this.frontFaceCallback(this.parent):t===1&&this.backFaceCallback&&this.backFaceCallback(this.parent)}setFace(t){return this.face=t,this}toggleFace(){var t=this.face===0?1:0;return this.setFace(t),this}setFrontFace(t,e){return this.frontFaceCallback=ay(t,e,this.parent),this}setBackFace(t,e){return this.backFaceCallback=ay(t,e,this.parent),this}start(){if(this.timer.isRunning)return this;var t=this.parent;return this.orientation===0?this.scale0=t.scaleX:this.scale0=t.scaleY,this.timer.setDelay(this.delay).setDuration(this.duration/2).setRepeat(1),super.start(),this}flip(t){return this.isRunning?this:(t!==void 0&&this.setDuration(t),this.start(),this)}updateGameObject(t,e){e.justRestart&&this.toggleFace();var f=e.t;e.isOddIteration&&(f=1-f),f=this.easeFn(f);var i=OX(this.scale0,0,f);this.orientation===0?t.scaleX=i:t.scaleY=i}}const RX={x:0,horizontal:0,y:1,vertical:1},LX={front:0,back:1};yt.register("flip",function(s,t){return new DC(s,t)});Ct(window,"RexPlugins.UI.Flip",DC);yt.register("shake",function(s,t){return new Jc(s,t)});Ct(window,"RexPlugins.UI.Shake",Jc);yt.register("touchEventStop",function(s,t){return new hv(s,t)});Ct(window,"RexPlugins.UI.TouchEventStop",hv);yt.register("perspective",function(s,t){return new TC(s,t)});Ct(window,"RexPlugins.UI.Perspective",TC);const BC=Phaser.Math.RotateAround;var Ld=function(s,t,e){var f=s.width/2,i=s.height/2;return qe.x=t-f,qe.y=e-i,BC(qe,0,0,s.rotation),qe.x*=s.scaleX,qe.y*=s.scaleY,qe.x+=s.x,qe.y+=s.y,qe},wX=function(s,t,e){var f=s.width/2,i=s.height/2;return qe.x=t-s.x,qe.y=e-s.y,qe.x/=s.scaleX,qe.y/=s.scaleY,BC(qe,0,0,-s.rotation),qe.x+=f,qe.y+=i,qe},qe={x:0,y:0};class FX{constructor(t,e){this.parent=t,this.vertex=e,this._localX=void 0,this._localY=void 0}destroy(){this.parent=void 0,this.vertex=void 0}updateVertexPosition(t,e){var f=this.parent,i=f.height,n=f.frame.cutWidth/i/2,o=f.frame.cutHeight/i/2,r=t/i-n,a=e/i-o,l=this.vertex;return l.x=r,l.y=-a,f.forceUpdate(),this}get localX(){return this._localX}set localX(t){this.setLocalXY(t,this._localY)}get localY(){return this._localY}set localY(t){this.setLocalXY(this._localX,t)}get localXOrigin(){return this._localXOrigin}get localYOrigin(){return this._localYOrigin}resetLocalXY(t,e){return this._localXOrigin=t,this._localYOrigin=e,this._localX=t,this._localY=e,this}setLocalXY(t,e,f){return this._localX===t&&this._localY===e?this:(this._localX=t,this._localY=e,f||this.updateVertexPosition(t,e),this)}setWorldXY(t,e){if(this._worldX===t&&this._worldY===e)return this;var f=wX(this.parent,t,e);return this.setLocalXY(f.x,f.y),this}setPosition(t,e){return this.setWorldXY(t,e),this}getWorldXY(){return Ld(this.parent,this._localX,this._localY)}get x(){var t=Ld(this.parent,this._localX,this._localY);return t.x}set x(t){this.setWorldXY(t,this.y)}get y(){var t=Ld(this.parent,this._localX,this._localY);return t.y}set y(t){this.setWorldXY(this.x,t)}}const IX=Phaser.Geom.Mesh.Vertex,DX=Phaser.Geom.Mesh.Face;var BX=function(s){for(var t=s.isNinePointMode,e=t?9:4,f=s.vertices,i=s.faces,n=s.controlPoints,o=0;o<e;o++){var r=new IX;f.push(r),n.push(new FX(s,r))}for(var a=t?GX:bX,o=0,l=a.length;o<l;o+=3){var h=f[a[o+0]],u=f[a[o+1]],v=f[a[o+2]];i.push(new DX(h,u,v))}t?(s.topLeft=n[0],s.topCenter=n[1],s.topRight=n[2],s.centerLeft=n[3],s.center=n[4],s.centerRight=n[5],s.bottomLeft=n[6],s.bottomCenter=n[7],s.bottomRight=n[8]):(s.topLeft=n[0],s.topRight=n[1],s.bottomLeft=n[2],s.bottomRight=n[3])};const bX=[0,2,3,0,3,1],GX=[0,3,4,0,4,1,1,4,2,4,5,2,3,6,4,6,7,4,4,7,8,4,8,5];var NX=function(s){var t,e=0,f=s.height,i=0,n=s.width;if(s.isNinePointMode){var o=(i+n)/2,r=(e+f)/2;t=[i,e,o,e,n,e,i,r,o,r,n,r,i,f,o,f,n,f]}else t=[i,e,n,e,i,f,n,f];return t};const YX=Phaser.GameObjects.Mesh,zX=Phaser.Utils.Objects.IsPlainObject,ja=Phaser.Utils.Objects.GetValue;class VX extends YX{constructor(t,e,f,i,n,o){zX(e)&&(o=e,e=ja(o,"x",0),f=ja(o,"y",0),i=ja(o,"key",null),n=ja(o,"frame",null)),super(t,e,f,i,n),this.type="rexQuadImage",this.isNinePointMode=ja(o,"ninePointMode",!1),this.controlPoints=[],BX(this),this.hideCCW=!1,this.syncSize()}preDestroy(){for(var t=0,e=this.controlPoints.length;t<e;t++)this.controlPoints[t].destroy();this.controlPoints=void 0,super.preDestroy()}resetVerts(){this.dirtyCache[9]=-1;for(var t=NX(this),e=this.width,f=this.height,i=this.frame.cutWidth/f/2,n=this.frame.cutHeight/f/2,o=this.frame.source.isRenderTexture,r=this.frame.u0,a=this.frame.u1,l=o?this.frame.v1:this.frame.v0,h=o?this.frame.v0:this.frame.v1,u=a-r,v=h-l,d=this.controlPoints,c=0,p=t.length;c<p;c+=2){var g=t[c+0],m=t[c+1],x=c/2,y=g/f-i,T=m/f-n,C=r+u*(g/e),S=l+v*(m/f);this.vertices[x].set(y,-T,0).setUVs(C,S),d[x].resetLocalXY(g,m)}return this}syncSize(){return this.setSizeToFrame(),this.setOrtho(this.width/this.height,1),this.resetVerts(),this}forceUpdate(){return this.dirtyCache[10]=1,this}get tint(){return this.vertices.length===0?16777215:this.vertices[0].color}set tint(t){for(var e=this.vertices,f=0,i=e.length;f<i;f++)e[f].color=t}setTint(t){return this.tint=t,this}}Phaser.GameObjects.RenderTexture;Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;var oy=function(s,t,e){t===void 0&&(t=0),e===void 0&&(e=0);for(var f=s.width,i=s.height,n=f*.5,o=i*.5,r=Math.tan(t)*o,a=Math.tan(e)*n,l=s.controlPoints,h=0,u=l.length;h<u;h++){var v=l[h],d=v.localXOrigin,c=v.localYOrigin;v.localX=d+(c>o?r:-r),v.localY=c+(d>n?a:-a)}};const UX=Phaser.Utils.Objects.IsPlainObject,qh=Phaser.Utils.Objects.GetValue,hy=Phaser.Math.DegToRad,ly=Phaser.Math.RadToDeg;class WX extends VX{constructor(t,e,f,i,n){if(UX(e)){var o=e;e=qh(o,"x",0),f=qh(o,"y",0),i=qh(o,"key",null),n=qh(o,"frame",null)}super(t,e,f,i,n),this.type="rexSkewmage",this._skewX=0,this._skewY=0}get skewX(){return this._skewX}set skewX(t){this._skewX=t,oy(this,this._skewX,this._skewY)}get skewXDeg(){return ly(this._skewX)}set skewXDeg(t){this.skewX=hy(t)}get skewY(){return this._skewY}set skewY(t){this._skewY=t,oy(this,this._skewX,this._skewY)}get skewYDeg(){return ly(this._skewY)}set skewYDeg(t){this.skewY=hy(t)}setSkewX(t){return this.skewX=t,this}setSkewY(t){return this.skewY=t,this}setSkew(t,e){return e===void 0&&(e=t),this.skewX=t,this.skewY=e,this}setSkewXDeg(t){return this.skewXDeg=t,this}setSkewYDeg(t){return this.skewYDeg=t,this}setSkewDeg(t,e){return e===void 0&&(e=t),this.skewXDeg=t,this.skewYDeg=e,this}}const XX=Phaser.GameObjects.RenderTexture,HX=Phaser.Utils.Objects.IsPlainObject,_h=Phaser.Utils.Objects.GetValue;class $X extends WX{constructor(t,e,f,i,n){if(HX(e)){var o=e;e=_h(o,"x",0),f=_h(o,"y",0),i=_h(o,"width",32),n=_h(o,"height",32)}var r=new XX(t,e,f,i,n).setOrigin(.5);super(t,e,f,r.texture.key,null),this.type="rexSkewRenderTexture",this.rt=r}destroy(t){super.destroy(t),this.rt.destroy(),this.rt=null}}class bC extends yC($X){get skewState(){return this.isRunning}}yt.register("skew",function(s,t){return new bC(s,t)});Ct(window,"RexPlugins.UI.Skew",bC);yt.register("anchor",function(s,t){return new Zc(s,t)});Ct(window,"RexPlugins.UI.Anchor",Zc);/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function GC(s){return typeof s=="undefined"||s===null}function kX(s){return typeof s=="object"&&s!==null}function KX(s){return Array.isArray(s)?s:GC(s)?[]:[s]}function ZX(s,t){var e,f,i,n;if(t)for(n=Object.keys(t),e=0,f=n.length;e<f;e+=1)i=n[e],s[i]=t[i];return s}function JX(s,t){var e="",f;for(f=0;f<t;f+=1)e+=s;return e}function QX(s){return s===0&&Number.NEGATIVE_INFINITY===1/s}var jX=GC,qX=kX,_X=KX,t6=JX,e6=QX,i6=ZX,Fe={isNothing:jX,isObject:qX,toArray:_X,repeat:t6,isNegativeZero:e6,extend:i6};function NC(s,t){var e="",f=s.reason||"(unknown reason)";return s.mark?(s.mark.name&&(e+='in "'+s.mark.name+'" '),e+="("+(s.mark.line+1)+":"+(s.mark.column+1)+")",!t&&s.mark.snippet&&(e+=`

`+s.mark.snippet),f+" "+e):f}function go(s,t){Error.call(this),this.name="YAMLException",this.reason=s,this.mark=t,this.message=NC(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}go.prototype=Object.create(Error.prototype);go.prototype.constructor=go;go.prototype.toString=function(t){return this.name+": "+NC(this,t)};var oi=go;function wd(s,t,e,f,i){var n="",o="",r=Math.floor(i/2)-1;return f-t>r&&(n=" ... ",t=f-r+n.length),e-f>r&&(o=" ...",e=f+r-o.length),{str:n+s.slice(t,e).replace(/\t/g,"\u2192")+o,pos:f-t+n.length}}function Fd(s,t){return Fe.repeat(" ",t-s.length)+s}function n6(s,t){if(t=Object.create(t||null),!s.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var e=/\r?\n|\r|\0/g,f=[0],i=[],n,o=-1;n=e.exec(s.buffer);)i.push(n.index),f.push(n.index+n[0].length),s.position<=n.index&&o<0&&(o=f.length-2);o<0&&(o=f.length-1);var r="",a,l,h=Math.min(s.line+t.linesAfter,i.length).toString().length,u=t.maxLength-(t.indent+h+3);for(a=1;a<=t.linesBefore&&!(o-a<0);a++)l=wd(s.buffer,f[o-a],i[o-a],s.position-(f[o]-f[o-a]),u),r=Fe.repeat(" ",t.indent)+Fd((s.line-a+1).toString(),h)+" | "+l.str+`
`+r;for(l=wd(s.buffer,f[o],i[o],s.position,u),r+=Fe.repeat(" ",t.indent)+Fd((s.line+1).toString(),h)+" | "+l.str+`
`,r+=Fe.repeat("-",t.indent+h+3+l.pos)+`^
`,a=1;a<=t.linesAfter&&!(o+a>=i.length);a++)l=wd(s.buffer,f[o+a],i[o+a],s.position-(f[o]-f[o+a]),u),r+=Fe.repeat(" ",t.indent)+Fd((s.line+a+1).toString(),h)+" | "+l.str+`
`;return r.replace(/\n$/,"")}var s6=n6,r6=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],a6=["scalar","sequence","mapping"];function o6(s){var t={};return s!==null&&Object.keys(s).forEach(function(e){s[e].forEach(function(f){t[String(f)]=e})}),t}function h6(s,t){if(t=t||{},Object.keys(t).forEach(function(e){if(r6.indexOf(e)===-1)throw new oi('Unknown option "'+e+'" is met in definition of "'+s+'" YAML type.')}),this.options=t,this.tag=s,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(e){return e},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=o6(t.styleAliases||null),a6.indexOf(this.kind)===-1)throw new oi('Unknown kind "'+this.kind+'" is specified for "'+s+'" YAML type.')}var Xe=h6;function uy(s,t){var e=[];return s[t].forEach(function(f){var i=e.length;e.forEach(function(n,o){n.tag===f.tag&&n.kind===f.kind&&n.multi===f.multi&&(i=o)}),e[i]=f}),e}function l6(){var s={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,e;function f(i){i.multi?(s.multi[i.kind].push(i),s.multi.fallback.push(i)):s[i.kind][i.tag]=s.fallback[i.tag]=i}for(t=0,e=arguments.length;t<e;t+=1)arguments[t].forEach(f);return s}function ic(s){return this.extend(s)}ic.prototype.extend=function(t){var e=[],f=[];if(t instanceof Xe)f.push(t);else if(Array.isArray(t))f=f.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(e=e.concat(t.implicit)),t.explicit&&(f=f.concat(t.explicit));else throw new oi("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");e.forEach(function(n){if(!(n instanceof Xe))throw new oi("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(n.loadKind&&n.loadKind!=="scalar")throw new oi("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(n.multi)throw new oi("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),f.forEach(function(n){if(!(n instanceof Xe))throw new oi("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(ic.prototype);return i.implicit=(this.implicit||[]).concat(e),i.explicit=(this.explicit||[]).concat(f),i.compiledImplicit=uy(i,"implicit"),i.compiledExplicit=uy(i,"explicit"),i.compiledTypeMap=l6(i.compiledImplicit,i.compiledExplicit),i};var YC=ic,zC=new Xe("tag:yaml.org,2002:str",{kind:"scalar",construct:function(s){return s!==null?s:""}}),VC=new Xe("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(s){return s!==null?s:[]}}),UC=new Xe("tag:yaml.org,2002:map",{kind:"mapping",construct:function(s){return s!==null?s:{}}}),WC=new YC({explicit:[zC,VC,UC]});function u6(s){if(s===null)return!0;var t=s.length;return t===1&&s==="~"||t===4&&(s==="null"||s==="Null"||s==="NULL")}function f6(){return null}function d6(s){return s===null}var XC=new Xe("tag:yaml.org,2002:null",{kind:"scalar",resolve:u6,construct:f6,predicate:d6,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function c6(s){if(s===null)return!1;var t=s.length;return t===4&&(s==="true"||s==="True"||s==="TRUE")||t===5&&(s==="false"||s==="False"||s==="FALSE")}function v6(s){return s==="true"||s==="True"||s==="TRUE"}function p6(s){return Object.prototype.toString.call(s)==="[object Boolean]"}var HC=new Xe("tag:yaml.org,2002:bool",{kind:"scalar",resolve:c6,construct:v6,predicate:p6,represent:{lowercase:function(s){return s?"true":"false"},uppercase:function(s){return s?"TRUE":"FALSE"},camelcase:function(s){return s?"True":"False"}},defaultStyle:"lowercase"});function g6(s){return 48<=s&&s<=57||65<=s&&s<=70||97<=s&&s<=102}function m6(s){return 48<=s&&s<=55}function x6(s){return 48<=s&&s<=57}function y6(s){if(s===null)return!1;var t=s.length,e=0,f=!1,i;if(!t)return!1;if(i=s[e],(i==="-"||i==="+")&&(i=s[++e]),i==="0"){if(e+1===t)return!0;if(i=s[++e],i==="b"){for(e++;e<t;e++)if(i=s[e],i!=="_"){if(i!=="0"&&i!=="1")return!1;f=!0}return f&&i!=="_"}if(i==="x"){for(e++;e<t;e++)if(i=s[e],i!=="_"){if(!g6(s.charCodeAt(e)))return!1;f=!0}return f&&i!=="_"}if(i==="o"){for(e++;e<t;e++)if(i=s[e],i!=="_"){if(!m6(s.charCodeAt(e)))return!1;f=!0}return f&&i!=="_"}}if(i==="_")return!1;for(;e<t;e++)if(i=s[e],i!=="_"){if(!x6(s.charCodeAt(e)))return!1;f=!0}return!(!f||i==="_")}function T6(s){var t=s,e=1,f;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),f=t[0],(f==="-"||f==="+")&&(f==="-"&&(e=-1),t=t.slice(1),f=t[0]),t==="0")return 0;if(f==="0"){if(t[1]==="b")return e*parseInt(t.slice(2),2);if(t[1]==="x")return e*parseInt(t.slice(2),16);if(t[1]==="o")return e*parseInt(t.slice(2),8)}return e*parseInt(t,10)}function C6(s){return Object.prototype.toString.call(s)==="[object Number]"&&s%1===0&&!Fe.isNegativeZero(s)}var $C=new Xe("tag:yaml.org,2002:int",{kind:"scalar",resolve:y6,construct:T6,predicate:C6,represent:{binary:function(s){return s>=0?"0b"+s.toString(2):"-0b"+s.toString(2).slice(1)},octal:function(s){return s>=0?"0o"+s.toString(8):"-0o"+s.toString(8).slice(1)},decimal:function(s){return s.toString(10)},hexadecimal:function(s){return s>=0?"0x"+s.toString(16).toUpperCase():"-0x"+s.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),S6=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function E6(s){return!(s===null||!S6.test(s)||s[s.length-1]==="_")}function P6(s){var t,e;return t=s.replace(/_/g,"").toLowerCase(),e=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?e===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:e*parseFloat(t,10)}var M6=/^[-+]?[0-9]+e/;function A6(s,t){var e;if(isNaN(s))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===s)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===s)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Fe.isNegativeZero(s))return"-0.0";return e=s.toString(10),M6.test(e)?e.replace("e",".e"):e}function O6(s){return Object.prototype.toString.call(s)==="[object Number]"&&(s%1!==0||Fe.isNegativeZero(s))}var kC=new Xe("tag:yaml.org,2002:float",{kind:"scalar",resolve:E6,construct:P6,predicate:O6,represent:A6,defaultStyle:"lowercase"}),KC=WC.extend({implicit:[XC,HC,$C,kC]}),ZC=KC,JC=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),QC=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function R6(s){return s===null?!1:JC.exec(s)!==null||QC.exec(s)!==null}function L6(s){var t,e,f,i,n,o,r,a=0,l=null,h,u,v;if(t=JC.exec(s),t===null&&(t=QC.exec(s)),t===null)throw new Error("Date resolve error");if(e=+t[1],f=+t[2]-1,i=+t[3],!t[4])return new Date(Date.UTC(e,f,i));if(n=+t[4],o=+t[5],r=+t[6],t[7]){for(a=t[7].slice(0,3);a.length<3;)a+="0";a=+a}return t[9]&&(h=+t[10],u=+(t[11]||0),l=(h*60+u)*6e4,t[9]==="-"&&(l=-l)),v=new Date(Date.UTC(e,f,i,n,o,r,a)),l&&v.setTime(v.getTime()-l),v}function w6(s){return s.toISOString()}var jC=new Xe("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:R6,construct:L6,instanceOf:Date,represent:w6});function F6(s){return s==="<<"||s===null}var qC=new Xe("tag:yaml.org,2002:merge",{kind:"scalar",resolve:F6}),Lv=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function I6(s){if(s===null)return!1;var t,e,f=0,i=s.length,n=Lv;for(e=0;e<i;e++)if(t=n.indexOf(s.charAt(e)),!(t>64)){if(t<0)return!1;f+=6}return f%8===0}function D6(s){var t,e,f=s.replace(/[\r\n=]/g,""),i=f.length,n=Lv,o=0,r=[];for(t=0;t<i;t++)t%4===0&&t&&(r.push(o>>16&255),r.push(o>>8&255),r.push(o&255)),o=o<<6|n.indexOf(f.charAt(t));return e=i%4*6,e===0?(r.push(o>>16&255),r.push(o>>8&255),r.push(o&255)):e===18?(r.push(o>>10&255),r.push(o>>2&255)):e===12&&r.push(o>>4&255),new Uint8Array(r)}function B6(s){var t="",e=0,f,i,n=s.length,o=Lv;for(f=0;f<n;f++)f%3===0&&f&&(t+=o[e>>18&63],t+=o[e>>12&63],t+=o[e>>6&63],t+=o[e&63]),e=(e<<8)+s[f];return i=n%3,i===0?(t+=o[e>>18&63],t+=o[e>>12&63],t+=o[e>>6&63],t+=o[e&63]):i===2?(t+=o[e>>10&63],t+=o[e>>4&63],t+=o[e<<2&63],t+=o[64]):i===1&&(t+=o[e>>2&63],t+=o[e<<4&63],t+=o[64],t+=o[64]),t}function b6(s){return Object.prototype.toString.call(s)==="[object Uint8Array]"}var _C=new Xe("tag:yaml.org,2002:binary",{kind:"scalar",resolve:I6,construct:D6,predicate:b6,represent:B6}),G6=Object.prototype.hasOwnProperty,N6=Object.prototype.toString;function Y6(s){if(s===null)return!0;var t=[],e,f,i,n,o,r=s;for(e=0,f=r.length;e<f;e+=1){if(i=r[e],o=!1,N6.call(i)!=="[object Object]")return!1;for(n in i)if(G6.call(i,n))if(!o)o=!0;else return!1;if(!o)return!1;if(t.indexOf(n)===-1)t.push(n);else return!1}return!0}function z6(s){return s!==null?s:[]}var tS=new Xe("tag:yaml.org,2002:omap",{kind:"sequence",resolve:Y6,construct:z6}),V6=Object.prototype.toString;function U6(s){if(s===null)return!0;var t,e,f,i,n,o=s;for(n=new Array(o.length),t=0,e=o.length;t<e;t+=1){if(f=o[t],V6.call(f)!=="[object Object]"||(i=Object.keys(f),i.length!==1))return!1;n[t]=[i[0],f[i[0]]]}return!0}function W6(s){if(s===null)return[];var t,e,f,i,n,o=s;for(n=new Array(o.length),t=0,e=o.length;t<e;t+=1)f=o[t],i=Object.keys(f),n[t]=[i[0],f[i[0]]];return n}var eS=new Xe("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:U6,construct:W6}),X6=Object.prototype.hasOwnProperty;function H6(s){if(s===null)return!0;var t,e=s;for(t in e)if(X6.call(e,t)&&e[t]!==null)return!1;return!0}function $6(s){return s!==null?s:{}}var iS=new Xe("tag:yaml.org,2002:set",{kind:"mapping",resolve:H6,construct:$6}),wv=ZC.extend({implicit:[jC,qC],explicit:[_C,tS,eS,iS]}),Vs=Object.prototype.hasOwnProperty,pl=1,nS=2,sS=3,gl=4,Id=1,k6=2,fy=3,K6=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Z6=/[\x85\u2028\u2029]/,J6=/[,\[\]\{\}]/,rS=/^(?:!|!!|![a-z\-]+!)$/i,aS=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function dy(s){return Object.prototype.toString.call(s)}function Yn(s){return s===10||s===13}function vr(s){return s===9||s===32}function xi(s){return s===9||s===32||s===10||s===13}function na(s){return s===44||s===91||s===93||s===123||s===125}function Q6(s){var t;return 48<=s&&s<=57?s-48:(t=s|32,97<=t&&t<=102?t-97+10:-1)}function j6(s){return s===120?2:s===117?4:s===85?8:0}function q6(s){return 48<=s&&s<=57?s-48:-1}function cy(s){return s===48?"\0":s===97?"\x07":s===98?"\b":s===116||s===9?"	":s===110?`
`:s===118?"\v":s===102?"\f":s===114?"\r":s===101?"\x1B":s===32?" ":s===34?'"':s===47?"/":s===92?"\\":s===78?"\x85":s===95?"\xA0":s===76?"\u2028":s===80?"\u2029":""}function _6(s){return s<=65535?String.fromCharCode(s):String.fromCharCode((s-65536>>10)+55296,(s-65536&1023)+56320)}var oS=new Array(256),hS=new Array(256);for(var Jr=0;Jr<256;Jr++)oS[Jr]=cy(Jr)?1:0,hS[Jr]=cy(Jr);function tH(s,t){this.input=s,this.filename=t.filename||null,this.schema=t.schema||wv,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=s.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function lS(s,t){var e={name:s.filename,buffer:s.input.slice(0,-1),position:s.position,line:s.line,column:s.position-s.lineStart};return e.snippet=s6(e),new oi(t,e)}function Rt(s,t){throw lS(s,t)}function ml(s,t){s.onWarning&&s.onWarning.call(null,lS(s,t))}var vy={YAML:function(t,e,f){var i,n,o;t.version!==null&&Rt(t,"duplication of %YAML directive"),f.length!==1&&Rt(t,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(f[0]),i===null&&Rt(t,"ill-formed argument of the YAML directive"),n=parseInt(i[1],10),o=parseInt(i[2],10),n!==1&&Rt(t,"unacceptable YAML version of the document"),t.version=f[0],t.checkLineBreaks=o<2,o!==1&&o!==2&&ml(t,"unsupported YAML version of the document")},TAG:function(t,e,f){var i,n;f.length!==2&&Rt(t,"TAG directive accepts exactly two arguments"),i=f[0],n=f[1],rS.test(i)||Rt(t,"ill-formed tag handle (first argument) of the TAG directive"),Vs.call(t.tagMap,i)&&Rt(t,'there is a previously declared suffix for "'+i+'" tag handle'),aS.test(n)||Rt(t,"ill-formed tag prefix (second argument) of the TAG directive");try{n=decodeURIComponent(n)}catch{Rt(t,"tag prefix is malformed: "+n)}t.tagMap[i]=n}};function Bs(s,t,e,f){var i,n,o,r;if(t<e){if(r=s.input.slice(t,e),f)for(i=0,n=r.length;i<n;i+=1)o=r.charCodeAt(i),o===9||32<=o&&o<=1114111||Rt(s,"expected valid JSON character");else K6.test(r)&&Rt(s,"the stream contains non-printable characters");s.result+=r}}function py(s,t,e,f){var i,n,o,r;for(Fe.isObject(e)||Rt(s,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(e),o=0,r=i.length;o<r;o+=1)n=i[o],Vs.call(t,n)||(t[n]=e[n],f[n]=!0)}function sa(s,t,e,f,i,n,o,r,a){var l,h;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),l=0,h=i.length;l<h;l+=1)Array.isArray(i[l])&&Rt(s,"nested arrays are not supported inside keys"),typeof i=="object"&&dy(i[l])==="[object Object]"&&(i[l]="[object Object]");if(typeof i=="object"&&dy(i)==="[object Object]"&&(i="[object Object]"),i=String(i),t===null&&(t={}),f==="tag:yaml.org,2002:merge")if(Array.isArray(n))for(l=0,h=n.length;l<h;l+=1)py(s,t,n[l],e);else py(s,t,n,e);else!s.json&&!Vs.call(e,i)&&Vs.call(t,i)&&(s.line=o||s.line,s.lineStart=r||s.lineStart,s.position=a||s.position,Rt(s,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(t,i,{configurable:!0,enumerable:!0,writable:!0,value:n}):t[i]=n,delete e[i];return t}function Fv(s){var t;t=s.input.charCodeAt(s.position),t===10?s.position++:t===13?(s.position++,s.input.charCodeAt(s.position)===10&&s.position++):Rt(s,"a line break is expected"),s.line+=1,s.lineStart=s.position,s.firstTabInLine=-1}function Ae(s,t,e){for(var f=0,i=s.input.charCodeAt(s.position);i!==0;){for(;vr(i);)i===9&&s.firstTabInLine===-1&&(s.firstTabInLine=s.position),i=s.input.charCodeAt(++s.position);if(t&&i===35)do i=s.input.charCodeAt(++s.position);while(i!==10&&i!==13&&i!==0);if(Yn(i))for(Fv(s),i=s.input.charCodeAt(s.position),f++,s.lineIndent=0;i===32;)s.lineIndent++,i=s.input.charCodeAt(++s.position);else break}return e!==-1&&f!==0&&s.lineIndent<e&&ml(s,"deficient indentation"),f}function hu(s){var t=s.position,e;return e=s.input.charCodeAt(t),!!((e===45||e===46)&&e===s.input.charCodeAt(t+1)&&e===s.input.charCodeAt(t+2)&&(t+=3,e=s.input.charCodeAt(t),e===0||xi(e)))}function Iv(s,t){t===1?s.result+=" ":t>1&&(s.result+=Fe.repeat(`
`,t-1))}function eH(s,t,e){var f,i,n,o,r,a,l,h,u=s.kind,v=s.result,d;if(d=s.input.charCodeAt(s.position),xi(d)||na(d)||d===35||d===38||d===42||d===33||d===124||d===62||d===39||d===34||d===37||d===64||d===96||(d===63||d===45)&&(i=s.input.charCodeAt(s.position+1),xi(i)||e&&na(i)))return!1;for(s.kind="scalar",s.result="",n=o=s.position,r=!1;d!==0;){if(d===58){if(i=s.input.charCodeAt(s.position+1),xi(i)||e&&na(i))break}else if(d===35){if(f=s.input.charCodeAt(s.position-1),xi(f))break}else{if(s.position===s.lineStart&&hu(s)||e&&na(d))break;if(Yn(d))if(a=s.line,l=s.lineStart,h=s.lineIndent,Ae(s,!1,-1),s.lineIndent>=t){r=!0,d=s.input.charCodeAt(s.position);continue}else{s.position=o,s.line=a,s.lineStart=l,s.lineIndent=h;break}}r&&(Bs(s,n,o,!1),Iv(s,s.line-a),n=o=s.position,r=!1),vr(d)||(o=s.position+1),d=s.input.charCodeAt(++s.position)}return Bs(s,n,o,!1),s.result?!0:(s.kind=u,s.result=v,!1)}function iH(s,t){var e,f,i;if(e=s.input.charCodeAt(s.position),e!==39)return!1;for(s.kind="scalar",s.result="",s.position++,f=i=s.position;(e=s.input.charCodeAt(s.position))!==0;)if(e===39)if(Bs(s,f,s.position,!0),e=s.input.charCodeAt(++s.position),e===39)f=s.position,s.position++,i=s.position;else return!0;else Yn(e)?(Bs(s,f,i,!0),Iv(s,Ae(s,!1,t)),f=i=s.position):s.position===s.lineStart&&hu(s)?Rt(s,"unexpected end of the document within a single quoted scalar"):(s.position++,i=s.position);Rt(s,"unexpected end of the stream within a single quoted scalar")}function nH(s,t){var e,f,i,n,o,r;if(r=s.input.charCodeAt(s.position),r!==34)return!1;for(s.kind="scalar",s.result="",s.position++,e=f=s.position;(r=s.input.charCodeAt(s.position))!==0;){if(r===34)return Bs(s,e,s.position,!0),s.position++,!0;if(r===92){if(Bs(s,e,s.position,!0),r=s.input.charCodeAt(++s.position),Yn(r))Ae(s,!1,t);else if(r<256&&oS[r])s.result+=hS[r],s.position++;else if((o=j6(r))>0){for(i=o,n=0;i>0;i--)r=s.input.charCodeAt(++s.position),(o=Q6(r))>=0?n=(n<<4)+o:Rt(s,"expected hexadecimal character");s.result+=_6(n),s.position++}else Rt(s,"unknown escape sequence");e=f=s.position}else Yn(r)?(Bs(s,e,f,!0),Iv(s,Ae(s,!1,t)),e=f=s.position):s.position===s.lineStart&&hu(s)?Rt(s,"unexpected end of the document within a double quoted scalar"):(s.position++,f=s.position)}Rt(s,"unexpected end of the stream within a double quoted scalar")}function sH(s,t){var e=!0,f,i,n,o=s.tag,r,a=s.anchor,l,h,u,v,d,c=Object.create(null),p,g,m,x;if(x=s.input.charCodeAt(s.position),x===91)h=93,d=!1,r=[];else if(x===123)h=125,d=!0,r={};else return!1;for(s.anchor!==null&&(s.anchorMap[s.anchor]=r),x=s.input.charCodeAt(++s.position);x!==0;){if(Ae(s,!0,t),x=s.input.charCodeAt(s.position),x===h)return s.position++,s.tag=o,s.anchor=a,s.kind=d?"mapping":"sequence",s.result=r,!0;e?x===44&&Rt(s,"expected the node content, but found ','"):Rt(s,"missed comma between flow collection entries"),g=p=m=null,u=v=!1,x===63&&(l=s.input.charCodeAt(s.position+1),xi(l)&&(u=v=!0,s.position++,Ae(s,!0,t))),f=s.line,i=s.lineStart,n=s.position,ha(s,t,pl,!1,!0),g=s.tag,p=s.result,Ae(s,!0,t),x=s.input.charCodeAt(s.position),(v||s.line===f)&&x===58&&(u=!0,x=s.input.charCodeAt(++s.position),Ae(s,!0,t),ha(s,t,pl,!1,!0),m=s.result),d?sa(s,r,c,g,p,m,f,i,n):u?r.push(sa(s,null,c,g,p,m,f,i,n)):r.push(p),Ae(s,!0,t),x=s.input.charCodeAt(s.position),x===44?(e=!0,x=s.input.charCodeAt(++s.position)):e=!1}Rt(s,"unexpected end of the stream within a flow collection")}function rH(s,t){var e,f,i=Id,n=!1,o=!1,r=t,a=0,l=!1,h,u;if(u=s.input.charCodeAt(s.position),u===124)f=!1;else if(u===62)f=!0;else return!1;for(s.kind="scalar",s.result="";u!==0;)if(u=s.input.charCodeAt(++s.position),u===43||u===45)Id===i?i=u===43?fy:k6:Rt(s,"repeat of a chomping mode identifier");else if((h=q6(u))>=0)h===0?Rt(s,"bad explicit indentation width of a block scalar; it cannot be less than one"):o?Rt(s,"repeat of an indentation width identifier"):(r=t+h-1,o=!0);else break;if(vr(u)){do u=s.input.charCodeAt(++s.position);while(vr(u));if(u===35)do u=s.input.charCodeAt(++s.position);while(!Yn(u)&&u!==0)}for(;u!==0;){for(Fv(s),s.lineIndent=0,u=s.input.charCodeAt(s.position);(!o||s.lineIndent<r)&&u===32;)s.lineIndent++,u=s.input.charCodeAt(++s.position);if(!o&&s.lineIndent>r&&(r=s.lineIndent),Yn(u)){a++;continue}if(s.lineIndent<r){i===fy?s.result+=Fe.repeat(`
`,n?1+a:a):i===Id&&n&&(s.result+=`
`);break}for(f?vr(u)?(l=!0,s.result+=Fe.repeat(`
`,n?1+a:a)):l?(l=!1,s.result+=Fe.repeat(`
`,a+1)):a===0?n&&(s.result+=" "):s.result+=Fe.repeat(`
`,a):s.result+=Fe.repeat(`
`,n?1+a:a),n=!0,o=!0,a=0,e=s.position;!Yn(u)&&u!==0;)u=s.input.charCodeAt(++s.position);Bs(s,e,s.position,!1)}return!0}function gy(s,t){var e,f=s.tag,i=s.anchor,n=[],o,r=!1,a;if(s.firstTabInLine!==-1)return!1;for(s.anchor!==null&&(s.anchorMap[s.anchor]=n),a=s.input.charCodeAt(s.position);a!==0&&(s.firstTabInLine!==-1&&(s.position=s.firstTabInLine,Rt(s,"tab characters must not be used in indentation")),!(a!==45||(o=s.input.charCodeAt(s.position+1),!xi(o))));){if(r=!0,s.position++,Ae(s,!0,-1)&&s.lineIndent<=t){n.push(null),a=s.input.charCodeAt(s.position);continue}if(e=s.line,ha(s,t,sS,!1,!0),n.push(s.result),Ae(s,!0,-1),a=s.input.charCodeAt(s.position),(s.line===e||s.lineIndent>t)&&a!==0)Rt(s,"bad indentation of a sequence entry");else if(s.lineIndent<t)break}return r?(s.tag=f,s.anchor=i,s.kind="sequence",s.result=n,!0):!1}function aH(s,t,e){var f,i,n,o,r,a,l=s.tag,h=s.anchor,u={},v=Object.create(null),d=null,c=null,p=null,g=!1,m=!1,x;if(s.firstTabInLine!==-1)return!1;for(s.anchor!==null&&(s.anchorMap[s.anchor]=u),x=s.input.charCodeAt(s.position);x!==0;){if(!g&&s.firstTabInLine!==-1&&(s.position=s.firstTabInLine,Rt(s,"tab characters must not be used in indentation")),f=s.input.charCodeAt(s.position+1),n=s.line,(x===63||x===58)&&xi(f))x===63?(g&&(sa(s,u,v,d,c,null,o,r,a),d=c=p=null),m=!0,g=!0,i=!0):g?(g=!1,i=!0):Rt(s,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),s.position+=1,x=f;else{if(o=s.line,r=s.lineStart,a=s.position,!ha(s,e,nS,!1,!0))break;if(s.line===n){for(x=s.input.charCodeAt(s.position);vr(x);)x=s.input.charCodeAt(++s.position);if(x===58)x=s.input.charCodeAt(++s.position),xi(x)||Rt(s,"a whitespace character is expected after the key-value separator within a block mapping"),g&&(sa(s,u,v,d,c,null,o,r,a),d=c=p=null),m=!0,g=!1,i=!1,d=s.tag,c=s.result;else if(m)Rt(s,"can not read an implicit mapping pair; a colon is missed");else return s.tag=l,s.anchor=h,!0}else if(m)Rt(s,"can not read a block mapping entry; a multiline key may not be an implicit key");else return s.tag=l,s.anchor=h,!0}if((s.line===n||s.lineIndent>t)&&(g&&(o=s.line,r=s.lineStart,a=s.position),ha(s,t,gl,!0,i)&&(g?c=s.result:p=s.result),g||(sa(s,u,v,d,c,p,o,r,a),d=c=p=null),Ae(s,!0,-1),x=s.input.charCodeAt(s.position)),(s.line===n||s.lineIndent>t)&&x!==0)Rt(s,"bad indentation of a mapping entry");else if(s.lineIndent<t)break}return g&&sa(s,u,v,d,c,null,o,r,a),m&&(s.tag=l,s.anchor=h,s.kind="mapping",s.result=u),m}function oH(s){var t,e=!1,f=!1,i,n,o;if(o=s.input.charCodeAt(s.position),o!==33)return!1;if(s.tag!==null&&Rt(s,"duplication of a tag property"),o=s.input.charCodeAt(++s.position),o===60?(e=!0,o=s.input.charCodeAt(++s.position)):o===33?(f=!0,i="!!",o=s.input.charCodeAt(++s.position)):i="!",t=s.position,e){do o=s.input.charCodeAt(++s.position);while(o!==0&&o!==62);s.position<s.length?(n=s.input.slice(t,s.position),o=s.input.charCodeAt(++s.position)):Rt(s,"unexpected end of the stream within a verbatim tag")}else{for(;o!==0&&!xi(o);)o===33&&(f?Rt(s,"tag suffix cannot contain exclamation marks"):(i=s.input.slice(t-1,s.position+1),rS.test(i)||Rt(s,"named tag handle cannot contain such characters"),f=!0,t=s.position+1)),o=s.input.charCodeAt(++s.position);n=s.input.slice(t,s.position),J6.test(n)&&Rt(s,"tag suffix cannot contain flow indicator characters")}n&&!aS.test(n)&&Rt(s,"tag name cannot contain such characters: "+n);try{n=decodeURIComponent(n)}catch{Rt(s,"tag name is malformed: "+n)}return e?s.tag=n:Vs.call(s.tagMap,i)?s.tag=s.tagMap[i]+n:i==="!"?s.tag="!"+n:i==="!!"?s.tag="tag:yaml.org,2002:"+n:Rt(s,'undeclared tag handle "'+i+'"'),!0}function hH(s){var t,e;if(e=s.input.charCodeAt(s.position),e!==38)return!1;for(s.anchor!==null&&Rt(s,"duplication of an anchor property"),e=s.input.charCodeAt(++s.position),t=s.position;e!==0&&!xi(e)&&!na(e);)e=s.input.charCodeAt(++s.position);return s.position===t&&Rt(s,"name of an anchor node must contain at least one character"),s.anchor=s.input.slice(t,s.position),!0}function lH(s){var t,e,f;if(f=s.input.charCodeAt(s.position),f!==42)return!1;for(f=s.input.charCodeAt(++s.position),t=s.position;f!==0&&!xi(f)&&!na(f);)f=s.input.charCodeAt(++s.position);return s.position===t&&Rt(s,"name of an alias node must contain at least one character"),e=s.input.slice(t,s.position),Vs.call(s.anchorMap,e)||Rt(s,'unidentified alias "'+e+'"'),s.result=s.anchorMap[e],Ae(s,!0,-1),!0}function ha(s,t,e,f,i){var n,o,r,a=1,l=!1,h=!1,u,v,d,c,p,g;if(s.listener!==null&&s.listener("open",s),s.tag=null,s.anchor=null,s.kind=null,s.result=null,n=o=r=gl===e||sS===e,f&&Ae(s,!0,-1)&&(l=!0,s.lineIndent>t?a=1:s.lineIndent===t?a=0:s.lineIndent<t&&(a=-1)),a===1)for(;oH(s)||hH(s);)Ae(s,!0,-1)?(l=!0,r=n,s.lineIndent>t?a=1:s.lineIndent===t?a=0:s.lineIndent<t&&(a=-1)):r=!1;if(r&&(r=l||i),(a===1||gl===e)&&(pl===e||nS===e?p=t:p=t+1,g=s.position-s.lineStart,a===1?r&&(gy(s,g)||aH(s,g,p))||sH(s,p)?h=!0:(o&&rH(s,p)||iH(s,p)||nH(s,p)?h=!0:lH(s)?(h=!0,(s.tag!==null||s.anchor!==null)&&Rt(s,"alias node should not have any properties")):eH(s,p,pl===e)&&(h=!0,s.tag===null&&(s.tag="?")),s.anchor!==null&&(s.anchorMap[s.anchor]=s.result)):a===0&&(h=r&&gy(s,g))),s.tag===null)s.anchor!==null&&(s.anchorMap[s.anchor]=s.result);else if(s.tag==="?"){for(s.result!==null&&s.kind!=="scalar"&&Rt(s,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+s.kind+'"'),u=0,v=s.implicitTypes.length;u<v;u+=1)if(c=s.implicitTypes[u],c.resolve(s.result)){s.result=c.construct(s.result),s.tag=c.tag,s.anchor!==null&&(s.anchorMap[s.anchor]=s.result);break}}else if(s.tag!=="!"){if(Vs.call(s.typeMap[s.kind||"fallback"],s.tag))c=s.typeMap[s.kind||"fallback"][s.tag];else for(c=null,d=s.typeMap.multi[s.kind||"fallback"],u=0,v=d.length;u<v;u+=1)if(s.tag.slice(0,d[u].tag.length)===d[u].tag){c=d[u];break}c||Rt(s,"unknown tag !<"+s.tag+">"),s.result!==null&&c.kind!==s.kind&&Rt(s,"unacceptable node kind for !<"+s.tag+'> tag; it should be "'+c.kind+'", not "'+s.kind+'"'),c.resolve(s.result,s.tag)?(s.result=c.construct(s.result,s.tag),s.anchor!==null&&(s.anchorMap[s.anchor]=s.result)):Rt(s,"cannot resolve a node with !<"+s.tag+"> explicit tag")}return s.listener!==null&&s.listener("close",s),s.tag!==null||s.anchor!==null||h}function uH(s){var t=s.position,e,f,i,n=!1,o;for(s.version=null,s.checkLineBreaks=s.legacy,s.tagMap=Object.create(null),s.anchorMap=Object.create(null);(o=s.input.charCodeAt(s.position))!==0&&(Ae(s,!0,-1),o=s.input.charCodeAt(s.position),!(s.lineIndent>0||o!==37));){for(n=!0,o=s.input.charCodeAt(++s.position),e=s.position;o!==0&&!xi(o);)o=s.input.charCodeAt(++s.position);for(f=s.input.slice(e,s.position),i=[],f.length<1&&Rt(s,"directive name must not be less than one character in length");o!==0;){for(;vr(o);)o=s.input.charCodeAt(++s.position);if(o===35){do o=s.input.charCodeAt(++s.position);while(o!==0&&!Yn(o));break}if(Yn(o))break;for(e=s.position;o!==0&&!xi(o);)o=s.input.charCodeAt(++s.position);i.push(s.input.slice(e,s.position))}o!==0&&Fv(s),Vs.call(vy,f)?vy[f](s,f,i):ml(s,'unknown document directive "'+f+'"')}if(Ae(s,!0,-1),s.lineIndent===0&&s.input.charCodeAt(s.position)===45&&s.input.charCodeAt(s.position+1)===45&&s.input.charCodeAt(s.position+2)===45?(s.position+=3,Ae(s,!0,-1)):n&&Rt(s,"directives end mark is expected"),ha(s,s.lineIndent-1,gl,!1,!0),Ae(s,!0,-1),s.checkLineBreaks&&Z6.test(s.input.slice(t,s.position))&&ml(s,"non-ASCII line breaks are interpreted as content"),s.documents.push(s.result),s.position===s.lineStart&&hu(s)){s.input.charCodeAt(s.position)===46&&(s.position+=3,Ae(s,!0,-1));return}if(s.position<s.length-1)Rt(s,"end of the stream or a document separator is expected");else return}function uS(s,t){s=String(s),t=t||{},s.length!==0&&(s.charCodeAt(s.length-1)!==10&&s.charCodeAt(s.length-1)!==13&&(s+=`
`),s.charCodeAt(0)===65279&&(s=s.slice(1)));var e=new tH(s,t),f=s.indexOf("\0");for(f!==-1&&(e.position=f,Rt(e,"null byte is not allowed in input")),e.input+="\0";e.input.charCodeAt(e.position)===32;)e.lineIndent+=1,e.position+=1;for(;e.position<e.length-1;)uH(e);return e.documents}function fH(s,t,e){t!==null&&typeof t=="object"&&typeof e=="undefined"&&(e=t,t=null);var f=uS(s,e);if(typeof t!="function")return f;for(var i=0,n=f.length;i<n;i+=1)t(f[i])}function dH(s,t){var e=uS(s,t);if(e.length!==0){if(e.length===1)return e[0];throw new oi("expected a single document in the stream, but found more")}}var cH=fH,vH=dH,fS={loadAll:cH,load:vH},dS=Object.prototype.toString,cS=Object.prototype.hasOwnProperty,Dv=65279,pH=9,mo=10,gH=13,mH=32,xH=33,yH=34,nc=35,TH=37,CH=38,SH=39,EH=42,vS=44,PH=45,xl=58,MH=61,AH=62,OH=63,RH=64,pS=91,gS=93,LH=96,mS=123,wH=124,xS=125,ti={};ti[0]="\\0";ti[7]="\\a";ti[8]="\\b";ti[9]="\\t";ti[10]="\\n";ti[11]="\\v";ti[12]="\\f";ti[13]="\\r";ti[27]="\\e";ti[34]='\\"';ti[92]="\\\\";ti[133]="\\N";ti[160]="\\_";ti[8232]="\\L";ti[8233]="\\P";var FH=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],IH=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function DH(s,t){var e,f,i,n,o,r,a;if(t===null)return{};for(e={},f=Object.keys(t),i=0,n=f.length;i<n;i+=1)o=f[i],r=String(t[o]),o.slice(0,2)==="!!"&&(o="tag:yaml.org,2002:"+o.slice(2)),a=s.compiledTypeMap.fallback[o],a&&cS.call(a.styleAliases,r)&&(r=a.styleAliases[r]),e[o]=r;return e}function BH(s){var t,e,f;if(t=s.toString(16).toUpperCase(),s<=255)e="x",f=2;else if(s<=65535)e="u",f=4;else if(s<=4294967295)e="U",f=8;else throw new oi("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+e+Fe.repeat("0",f-t.length)+t}var bH=1,xo=2;function GH(s){this.schema=s.schema||wv,this.indent=Math.max(1,s.indent||2),this.noArrayIndent=s.noArrayIndent||!1,this.skipInvalid=s.skipInvalid||!1,this.flowLevel=Fe.isNothing(s.flowLevel)?-1:s.flowLevel,this.styleMap=DH(this.schema,s.styles||null),this.sortKeys=s.sortKeys||!1,this.lineWidth=s.lineWidth||80,this.noRefs=s.noRefs||!1,this.noCompatMode=s.noCompatMode||!1,this.condenseFlow=s.condenseFlow||!1,this.quotingType=s.quotingType==='"'?xo:bH,this.forceQuotes=s.forceQuotes||!1,this.replacer=typeof s.replacer=="function"?s.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function my(s,t){for(var e=Fe.repeat(" ",t),f=0,i=-1,n="",o,r=s.length;f<r;)i=s.indexOf(`
`,f),i===-1?(o=s.slice(f),f=r):(o=s.slice(f,i+1),f=i+1),o.length&&o!==`
`&&(n+=e),n+=o;return n}function sc(s,t){return`
`+Fe.repeat(" ",s.indent*t)}function NH(s,t){var e,f,i;for(e=0,f=s.implicitTypes.length;e<f;e+=1)if(i=s.implicitTypes[e],i.resolve(t))return!0;return!1}function yl(s){return s===mH||s===pH}function yo(s){return 32<=s&&s<=126||161<=s&&s<=55295&&s!==8232&&s!==8233||57344<=s&&s<=65533&&s!==Dv||65536<=s&&s<=1114111}function xy(s){return yo(s)&&s!==Dv&&s!==gH&&s!==mo}function yy(s,t,e){var f=xy(s),i=f&&!yl(s);return(e?f:f&&s!==vS&&s!==pS&&s!==gS&&s!==mS&&s!==xS)&&s!==nc&&!(t===xl&&!i)||xy(t)&&!yl(t)&&s===nc||t===xl&&i}function YH(s){return yo(s)&&s!==Dv&&!yl(s)&&s!==PH&&s!==OH&&s!==xl&&s!==vS&&s!==pS&&s!==gS&&s!==mS&&s!==xS&&s!==nc&&s!==CH&&s!==EH&&s!==xH&&s!==wH&&s!==MH&&s!==AH&&s!==SH&&s!==yH&&s!==TH&&s!==RH&&s!==LH}function zH(s){return!yl(s)&&s!==xl}function eo(s,t){var e=s.charCodeAt(t),f;return e>=55296&&e<=56319&&t+1<s.length&&(f=s.charCodeAt(t+1),f>=56320&&f<=57343)?(e-55296)*1024+f-56320+65536:e}function yS(s){var t=/^\n* /;return t.test(s)}var TS=1,rc=2,CS=3,SS=4,ta=5;function VH(s,t,e,f,i,n,o,r){var a,l=0,h=null,u=!1,v=!1,d=f!==-1,c=-1,p=YH(eo(s,0))&&zH(eo(s,s.length-1));if(t||o)for(a=0;a<s.length;l>=65536?a+=2:a++){if(l=eo(s,a),!yo(l))return ta;p=p&&yy(l,h,r),h=l}else{for(a=0;a<s.length;l>=65536?a+=2:a++){if(l=eo(s,a),l===mo)u=!0,d&&(v=v||a-c-1>f&&s[c+1]!==" ",c=a);else if(!yo(l))return ta;p=p&&yy(l,h,r),h=l}v=v||d&&a-c-1>f&&s[c+1]!==" "}return!u&&!v?p&&!o&&!i(s)?TS:n===xo?ta:rc:e>9&&yS(s)?ta:o?n===xo?ta:rc:v?SS:CS}function UH(s,t,e,f,i){s.dump=function(){if(t.length===0)return s.quotingType===xo?'""':"''";if(!s.noCompatMode&&(FH.indexOf(t)!==-1||IH.test(t)))return s.quotingType===xo?'"'+t+'"':"'"+t+"'";var n=s.indent*Math.max(1,e),o=s.lineWidth===-1?-1:Math.max(Math.min(s.lineWidth,40),s.lineWidth-n),r=f||s.flowLevel>-1&&e>=s.flowLevel;function a(l){return NH(s,l)}switch(VH(t,r,s.indent,o,a,s.quotingType,s.forceQuotes&&!f,i)){case TS:return t;case rc:return"'"+t.replace(/'/g,"''")+"'";case CS:return"|"+Ty(t,s.indent)+Cy(my(t,n));case SS:return">"+Ty(t,s.indent)+Cy(my(WH(t,o),n));case ta:return'"'+XH(t)+'"';default:throw new oi("impossible error: invalid scalar style")}}()}function Ty(s,t){var e=yS(s)?String(t):"",f=s[s.length-1]===`
`,i=f&&(s[s.length-2]===`
`||s===`
`),n=i?"+":f?"":"-";return e+n+`
`}function Cy(s){return s[s.length-1]===`
`?s.slice(0,-1):s}function WH(s,t){for(var e=/(\n+)([^\n]*)/g,f=function(){var l=s.indexOf(`
`);return l=l!==-1?l:s.length,e.lastIndex=l,Sy(s.slice(0,l),t)}(),i=s[0]===`
`||s[0]===" ",n,o;o=e.exec(s);){var r=o[1],a=o[2];n=a[0]===" ",f+=r+(!i&&!n&&a!==""?`
`:"")+Sy(a,t),i=n}return f}function Sy(s,t){if(s===""||s[0]===" ")return s;for(var e=/ [^ ]/g,f,i=0,n,o=0,r=0,a="";f=e.exec(s);)r=f.index,r-i>t&&(n=o>i?o:r,a+=`
`+s.slice(i,n),i=n+1),o=r;return a+=`
`,s.length-i>t&&o>i?a+=s.slice(i,o)+`
`+s.slice(o+1):a+=s.slice(i),a.slice(1)}function XH(s){for(var t="",e=0,f,i=0;i<s.length;e>=65536?i+=2:i++)e=eo(s,i),f=ti[e],!f&&yo(e)?(t+=s[i],e>=65536&&(t+=s[i+1])):t+=f||BH(e);return t}function HH(s,t,e){var f="",i=s.tag,n,o,r;for(n=0,o=e.length;n<o;n+=1)r=e[n],s.replacer&&(r=s.replacer.call(e,String(n),r)),(hs(s,t,r,!1,!1)||typeof r=="undefined"&&hs(s,t,null,!1,!1))&&(f!==""&&(f+=","+(s.condenseFlow?"":" ")),f+=s.dump);s.tag=i,s.dump="["+f+"]"}function Ey(s,t,e,f){var i="",n=s.tag,o,r,a;for(o=0,r=e.length;o<r;o+=1)a=e[o],s.replacer&&(a=s.replacer.call(e,String(o),a)),(hs(s,t+1,a,!0,!0,!1,!0)||typeof a=="undefined"&&hs(s,t+1,null,!0,!0,!1,!0))&&((!f||i!=="")&&(i+=sc(s,t)),s.dump&&mo===s.dump.charCodeAt(0)?i+="-":i+="- ",i+=s.dump);s.tag=n,s.dump=i||"[]"}function $H(s,t,e){var f="",i=s.tag,n=Object.keys(e),o,r,a,l,h;for(o=0,r=n.length;o<r;o+=1)h="",f!==""&&(h+=", "),s.condenseFlow&&(h+='"'),a=n[o],l=e[a],s.replacer&&(l=s.replacer.call(e,a,l)),hs(s,t,a,!1,!1)&&(s.dump.length>1024&&(h+="? "),h+=s.dump+(s.condenseFlow?'"':"")+":"+(s.condenseFlow?"":" "),hs(s,t,l,!1,!1)&&(h+=s.dump,f+=h));s.tag=i,s.dump="{"+f+"}"}function kH(s,t,e,f){var i="",n=s.tag,o=Object.keys(e),r,a,l,h,u,v;if(s.sortKeys===!0)o.sort();else if(typeof s.sortKeys=="function")o.sort(s.sortKeys);else if(s.sortKeys)throw new oi("sortKeys must be a boolean or a function");for(r=0,a=o.length;r<a;r+=1)v="",(!f||i!=="")&&(v+=sc(s,t)),l=o[r],h=e[l],s.replacer&&(h=s.replacer.call(e,l,h)),hs(s,t+1,l,!0,!0,!0)&&(u=s.tag!==null&&s.tag!=="?"||s.dump&&s.dump.length>1024,u&&(s.dump&&mo===s.dump.charCodeAt(0)?v+="?":v+="? "),v+=s.dump,u&&(v+=sc(s,t)),hs(s,t+1,h,!0,u)&&(s.dump&&mo===s.dump.charCodeAt(0)?v+=":":v+=": ",v+=s.dump,i+=v));s.tag=n,s.dump=i||"{}"}function Py(s,t,e){var f,i,n,o,r,a;for(i=e?s.explicitTypes:s.implicitTypes,n=0,o=i.length;n<o;n+=1)if(r=i[n],(r.instanceOf||r.predicate)&&(!r.instanceOf||typeof t=="object"&&t instanceof r.instanceOf)&&(!r.predicate||r.predicate(t))){if(e?r.multi&&r.representName?s.tag=r.representName(t):s.tag=r.tag:s.tag="?",r.represent){if(a=s.styleMap[r.tag]||r.defaultStyle,dS.call(r.represent)==="[object Function]")f=r.represent(t,a);else if(cS.call(r.represent,a))f=r.represent[a](t,a);else throw new oi("!<"+r.tag+'> tag resolver accepts not "'+a+'" style');s.dump=f}return!0}return!1}function hs(s,t,e,f,i,n,o){s.tag=null,s.dump=e,Py(s,e,!1)||Py(s,e,!0);var r=dS.call(s.dump),a=f,l;f&&(f=s.flowLevel<0||s.flowLevel>t);var h=r==="[object Object]"||r==="[object Array]",u,v;if(h&&(u=s.duplicates.indexOf(e),v=u!==-1),(s.tag!==null&&s.tag!=="?"||v||s.indent!==2&&t>0)&&(i=!1),v&&s.usedDuplicates[u])s.dump="*ref_"+u;else{if(h&&v&&!s.usedDuplicates[u]&&(s.usedDuplicates[u]=!0),r==="[object Object]")f&&Object.keys(s.dump).length!==0?(kH(s,t,s.dump,i),v&&(s.dump="&ref_"+u+s.dump)):($H(s,t,s.dump),v&&(s.dump="&ref_"+u+" "+s.dump));else if(r==="[object Array]")f&&s.dump.length!==0?(s.noArrayIndent&&!o&&t>0?Ey(s,t-1,s.dump,i):Ey(s,t,s.dump,i),v&&(s.dump="&ref_"+u+s.dump)):(HH(s,t,s.dump),v&&(s.dump="&ref_"+u+" "+s.dump));else if(r==="[object String]")s.tag!=="?"&&UH(s,s.dump,t,n,a);else{if(r==="[object Undefined]")return!1;if(s.skipInvalid)return!1;throw new oi("unacceptable kind of an object to dump "+r)}s.tag!==null&&s.tag!=="?"&&(l=encodeURI(s.tag[0]==="!"?s.tag.slice(1):s.tag).replace(/!/g,"%21"),s.tag[0]==="!"?l="!"+l:l.slice(0,18)==="tag:yaml.org,2002:"?l="!!"+l.slice(18):l="!<"+l+">",s.dump=l+" "+s.dump)}return!0}function KH(s,t){var e=[],f=[],i,n;for(ac(s,e,f),i=0,n=f.length;i<n;i+=1)t.duplicates.push(e[f[i]]);t.usedDuplicates=new Array(n)}function ac(s,t,e){var f,i,n;if(s!==null&&typeof s=="object")if(i=t.indexOf(s),i!==-1)e.indexOf(i)===-1&&e.push(i);else if(t.push(s),Array.isArray(s))for(i=0,n=s.length;i<n;i+=1)ac(s[i],t,e);else for(f=Object.keys(s),i=0,n=f.length;i<n;i+=1)ac(s[f[i]],t,e)}function ZH(s,t){t=t||{};var e=new GH(t);e.noRefs||KH(s,e);var f=s;return e.replacer&&(f=e.replacer.call({"":f},"",f)),hs(e,0,f,!0,!0)?e.dump+`
`:""}var JH=ZH,QH={dump:JH};function Bv(s,t){return function(){throw new Error("Function yaml."+s+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}var jH=Xe,qH=YC,_H=WC,t9=KC,e9=ZC,i9=wv,n9=fS.load,s9=fS.loadAll,r9=QH.dump,a9=oi,o9={binary:_C,float:kC,map:UC,null:XC,pairs:eS,set:iS,timestamp:jC,bool:HC,int:$C,merge:qC,omap:tS,seq:VC,str:zC},h9=Bv("safeLoad","load"),l9=Bv("safeLoadAll","loadAll"),u9=Bv("safeDump","dump"),ES={Type:jH,Schema:qH,FAILSAFE_SCHEMA:_H,JSON_SCHEMA:t9,CORE_SCHEMA:e9,DEFAULT_SCHEMA:i9,load:n9,loadAll:s9,dump:r9,YAMLException:a9,types:o9,safeLoad:h9,safeLoadAll:l9,safeDump:u9},ro=function(s){if(typeof s=="string")try{return ES.load(s)}catch(t){console.log(t);return}return s},f9=function(s,t){if(s.hasOwnProperty("$type"))return s.$type;if(s.hasOwnProperty("name")){var e=t[`#${s.name}`];if(e&&e.hasOwnProperty("$type"))return e.$type}if(s.hasOwnProperty("$class"))for(var f=s.$class.split(" "),i=0,n=f.length;i<n;i++){var e=t[`.${f[i]}`];if(e&&e.hasOwnProperty("$type"))return e.$type}},xe=function(s,t){if(t===void 0)return s;if(s.hasOwnProperty("name")&&hl(s,t[`#${s.name}`]),s.hasOwnProperty("$class"))for(var e=s.$class.split(" "),f=0,i=e.length;f<i;f++)hl(s,t[`.${e[f]}`]);return s.hasOwnProperty("$type")&&hl(s,t[s.$type]),s},hl=function(s,t){if(t===void 0)return s;for(var e in t)if(!s.hasOwnProperty(e))s[e]=oa(t[e]);else{var f=s[e];f&&typeof f=="object"&&hl(f,t[e])}return s};const My=["tint","alpha","visible","flipX","flipY"];var xr=function(s,t){for(var e=0,f=My.length;e<f;e++){var i=My[e],n=t[i];n!==void 0&&(s[i]=n)}return t.cropResize&&!s.resize&&(s.resize=function(o,r){return s.setCrop(0,0,o,r),s}),s},PS=function(s,t,e,f,i,n){t=xe(t,f);var o=new n(s,0,0,t.key,t.frame);return t.width!==void 0&&o.setDisplayWidth(t.width),t.height!==void 0&&o.setDisplayHeight(t.height),xr(o,t),s.add.existing(o),o};const d9=Phaser.GameObjects.Image;var c9=function(s,t,e,f,i){return PS(s,t,e,f,i,d9)};const v9=Phaser.GameObjects.Sprite;var p9=function(s,t,e,f,i){return PS(s,t,e,f,i,v9)};const g9=Phaser.GameObjects.Video;var m9=function(s,t,e,f,i){t=xe(t,f);var n=new g9(s,0,0,t.key);return t.width!==void 0&&n.setDisplayWidth(t.width),t.height!==void 0&&n.setDisplayHeight(t.height),xr(n,t),s.add.existing(n),n};const x9=Phaser.GameObjects.Text;var y9=function(s,t,e,f,i){t=xe(t,f);var n=new x9(s,0,0,t.text,t);return xr(n,t),s.add.existing(n),n},T9=function(s,t,e,f,i){t=xe(t,f);var n=new Tc(s,0,0,t.text,t);return xr(n,t),s.add.existing(n),n},C9=function(s,t,e,f,i){t=xe(t,f);var n=new Al(s,t);return s.add.existing(n),n},S9=function(s,t,e,f,i){t=xe(t,f);var n=new Sl(s,t);return xr(n,t),s.add.existing(n),n},E9=function(s,t,e,f,i){t=xe(t,f);var n=new Pl(s,t);return s.add.existing(n),n},P9=function(s,t,e,f,i){t=xe(t,f);var n=t.width||1,o=t.height||1,r=new Xn(s,0,0,n,o);return t.fill!==void 0&&r.fill(t.fill),xr(r,t),s.add.existing(r),r},M9=function(s,t,e,f,i){t=xe(t,f);var n=new Mc(s,0,0,t.key,t.frame,t);return t.width!==void 0&&n.setDisplayWidth(t.width),t.height!==void 0&&n.setDisplayHeight(t.height),xr(n,t),s.add.existing(n),n},A9=function(s,t,e,f,i){var n=new ql(s);return n},At=function(s,t,e,f,i,n){var o=t[e];if(!!o){var r;return r=la(s,o,f,i,n),t[e]=r,r}},Ay=function(s,t,e,f,i){if(t){Array.isArray(t)||(t=[t]);for(var n=0,o=t.length;n<o;n++){var r=t[n];r.$child||(r={$child:r},t[n]=r),At(s,r,"$child",e,f,i)}}return t},bo=function(s,t,e,f,i,n){t=xe(t,f);var o=Ay(s,t.background,e,f,i),r=Ay(s,t.children,e,f,i),a=new n(s,t);if(s.add.existing(a),o)for(var l=0,h=o.length;l<h;l++){var u=o[l];a.addBackground(u.$child,u.padding)}if(r)for(var l=0,h=r.length;l<h;l++){var u=r[l];a.add(u.$child,u)}return a},O9=function(s,t,e,f,i){return bo(s,t,e,f,i,Se)},R9=function(s,t,e,f,i){return bo(s,t,e,f,i,Xs)},L9=function(s,t,e,f,i){var n=t.createCellContainerCallback;if(n){var o=n.$child;delete n.$child,t.createCellContainerCallback=function(r,a,l,h){var u=la(r,o,e,f,i);for(var v in n)h[v]=n[v];return u}}return bo(s,t,e,f,i,us)},w9=function(s,t,e,f,i){return bo(s,t,e,f,i,Sn)},Fs=function(s,t,e,f,i,n){var o=t[e];if(!!o){if(Array.isArray(o))for(var r=0,a=o.length;r<a;r++)Array.isArray(o[r])?Fs(s,o,r,f,i,n):At(s,o,r,f,i,n);else for(var l in o)At(s,o,l,f,i,n);return o}},F9=function(s,t,e,f,i){t=xe(t,f),At(s,t,"background",e,f,i),Fs(s,t,"buttons",e,f,i);var n=new Ue(s,t);return s.add.existing(n),n},I9=function(s,t,e,f,i){t=xe(t,f),At(s,t,"background",e,f,i),Fs(s,t,"buttons",e,f,i);var n=new zs(s,t);return s.add.existing(n),n},D9=function(s,t,e,f,i){t=xe(t,f),At(s,t,"background",e,f,i);var n=t.buttons;if(n)for(var o=0,r=n.length;o<r;o++)Fs(s,n,o,e,f,i);var a=t.createCellContainerCallback;if(a){var l=a.$child;delete a.$child,t.createCellContainerCallback=function(u,v,d,c){var p=la(u,l,e,f,i);for(var g in a)c[g]=a[g];return p}}var h=new Io(s,t);return s.add.existing(h),h},bv=function(s,t,e,f,i,n){t=xe(t,f),At(s,t,"background",e,f,i),At(s,t,"icon",e,f,i),At(s,t,"text",e,f,i),At(s,t,"action",e,f,i);var o=new n(s,t);return s.add.existing(o),o},B9=function(s,t,e,f,i){return bv(s,t,e,f,i,pa)},b9=function(s,t,e,f,i){t=xe(t,f),At(s,t,"background",e,f,i),At(s,t,"main",e,f,i),At(s,t,"leftTop",e,f,i),At(s,t,"centerTop",e,f,i),At(s,t,"rightTop",e,f,i),At(s,t,"leftCenter",e,f,i),At(s,t,"center",e,f,i),At(s,t,"rightCenter",e,f,i),At(s,t,"leftBottom",e,f,i),At(s,t,"centerBottom",e,f,i),At(s,t,"rightBottom",e,f,i);var n=new Pv(s,t);return s.add.existing(n),n},G9=function(s,t,e,f,i){t=xe(t,f),At(s,t,"background",e,f,i),At(s,t,"toolbarBackground",e,f,i),At(s,t,"leftToolbarBackground",e,f,i),At(s,t,"choicesBackground",e,f,i),At(s,t,"actionsBackground",e,f,i),At(s,t,"title",e,f,i),Fs(s,t,"toolbar",e,f,i),Fs(s,t,"leftToolbar",e,f,i),At(s,t,"content",e,f,i),At(s,t,"description",e,f,i),Fs(s,t,"choices",e,f,i),Fs(s,t,"actions",e,f,i);var n=new eu(s,t);return s.add.existing(n),n},N9=function(s,t,e,f,i){return bv(s,t,e,f,i,Sv)},Y9=function(s,t,e,f,i){t=xe(t,f),At(s,t,"background",e,f,i),At(s,t,"track",e,f,i),At(s,t,"indicator",e,f,i),At(s,t,"thumb",e,f,i);var n=new ga(s,t);return s.add.existing(n),n},Gv=function(s,t,e,f,i){return t&&(At(s,t,"background",e,f,i),At(s,t,"track",e,f,i),At(s,t,"indicator",e,f,i),At(s,t,"thumb",e,f,i)),t},z9=function(s,t,e,f,i){t=xe(t,f),At(s,t,"background",e,f,i),At(s,t,"icon",e,f,i),Gv(s,t.slider,e,f,i),At(s,t,"text",e,f,i);var n=new Ev(s,t);return s.add.existing(n),n},V9=function(s,t,e,f,i){t=xe(t,f),At(s,t,"background",e,f,i),Gv(s,t.slider,e,f,i);var n=t.buttons;n&&(At(s,n,"top",e,f,i),At(s,n,"bottom",e,f,i),At(s,n,"left",e,f,i),At(s,n,"right",e,f,i));var o=new nu(s,t);return s.add.existing(o),o},U9=function(s,t,e,f,i){t=xe(t,f),At(s,t,"background",e,f,i),At(s,t,"text",e,f,i),Gv(s,t.slider,e,f,i),At(s,t,"header",e,f,i),At(s,t,"footer",e,f,i);var n=new au(s,t);return s.add.existing(n),n},W9=function(s,t,e,f,i){return bo(s,t,e,f,i,Bo)},X9=function(s,t,e,f,i){return bv(s,t,e,f,i,Ov)},H9=function(s,t,e,f,i){t=xe(t,f),At(s,t,"background",e,f,i),At(s,t,"text",e,f,i);var n=new Ql(s,t);return s.add.existing(n),n},$9=function(s,t,e,f,i){t=xe(t,f),At(s,t,"background",e,f,i),At(s,t,"content",e,f,i),At(s,t,"leftSide",e,f,i),At(s,t,"rightSide",e,f,i),At(s,t,"header",e,f,i),At(s,t,"footer",e,f,i);var n=new cv(s,t);return s.add.existing(n),n},k9=function(s,t,e,f,i){t=xe(t,f);var n=t.background;delete t.background,n&&(t.createBackgroundCallback=function(r){var a=r.scene,l=la(a,oa(n),e,f,i);return l}),t.createButtonCallback=function(r,a,l){var h=r.scene,u=r.$next;delete r.scene,delete r.$next;var v=la(h,oa(r),e,f,i);return r.scene=h,r.$next=u,v},t.childrenKey="$next";var o=new ru(s,t);return s.add.existing(o),o},K9={Image:c9,Sprite:p9,Video:m9,Text:y9,BBCodeText:T9,RoundRectangle:C9,Ninepatch:S9,Ninepatch2:E9,Canvas:P9,CircleMaskImage:M9,Space:A9,Sizer:O9,FixWidthSizer:R9,GridSizer:L9,OverlapSizer:w9,Buttons:F9,FixWidthButtons:I9,GridButtons:D9,Label:B9,BadgeLabel:b9,Dialog:G9,TextBox:N9,Slider:Y9,NumberBar:z9,ScrollBar:V9,TextArea:U9,Pages:W9,Toast:X9,Knob:H9,HolyGrail:$9,Menu:k9},la=function(s,t,e,f,i){var n=f9(t,f);if(!n){console.warn(`rexUI.Make: Can't get type name in ${JSON.stringify(t)}`);return}var o;if(i&&(o=i[n]),o||(o=K9[n]),!o){console.warn(`rexUI.Make: Can't create ${n} game object.`);return}var r=o(s,t,e,f,i);return t.name&&r.setName(t.name),r},MS=function(s,t,e,f,i){if(t=ro(t),Array.isArray(t))t=t[t.length-1];else if(t.$root){var n=t;if(t=t.$root,delete n.$root,f===void 0)f=n;else for(var o in n)f[o]||(f[o]=n[o])}f=ro(f);var r=la(s,t,e,f,i);return r};const Oy=Phaser.Utils.Objects.IsPlainObject;class Nv{constructor(t,e,f){this.setScene(t),this.setStyles(e),this.setBuilders(f)}setScene(t){return this.scene=t,this}setStyles(t){return this.styles=ro(t),this}addStyle(t,e){if(this.styles===void 0&&(this.styles={}),typeof t=="string"&&e===void 0&&(t=ro(t)),Oy(t)){var f=t;for(t in f)this.styles[t]=f[t]}else this.styles[t]=ro(e);return this}clearStyles(){return this.setStyles(),this}setBuilders(t){return this.customBuilders=t,this}addBuilder(t,e){if(this.customBuilders===void 0&&(this.customBuilders={}),Oy(t)){var f=t;for(t in f)this.customBuilders[t]=f[t]}else this.customBuilders[t]=e;return this}clearBuilder(){return this.setBuilders(),this}make(t,e){return MS(this.scene,t,e,this.styles,this.customBuilders)}}yt.register("maker",function(s,t){return new Nv(this.scene,s,t)});Ct(window,"RexPlugins.UI.Maker",Nv);const as=Phaser.Utils.Objects.GetValue;var Z9=function(s,t){t===void 0&&(t={});var e=s.scene,f=s.style,i=as(t,"backgroundColor",f.backgroundColor);i===null&&(i="transparent"),t.text=as(t,"text",s.text),t.fontFamily=as(t,"fontFamily",f.fontFamily),t.fontSize=as(t,"fontSize",f.fontSize),t.color=as(t,"color",f.color),t.backgroundColor=i,t.direction=as(t,"rtl",f.rtl)?"rtl":"ltr",t.align=as(t,"align",J9(f)),t.direction==="rtl"&&yv(s)&&(t.align="right");var n=new Cc(e,s.x,s.y,as(t,"width",s.width),as(t,"height",s.height),t);return n.setOrigin(s.originX,s.originY),e.add.existing(n),n},J9=function(s){return s.hasOwnProperty("align")?s.align:s.hasOwnProperty("halign")?s.halign:"left"};const tl=Phaser.Utils.Objects.GetValue;var Qr=void 0;class Q9 extends He{constructor(t){super(t,{eventEmitter:!1}),this.inputText=void 0,this.onClose=void 0,this.delayCall=void 0}shutdown(t){this.isShutdown||(this.close(),Qr===this&&(Qr=void 0),super.shutdown(t))}open(t,e){Qr!==void 0&&Qr.close(),Qr=this,qc(t)&&(e=t,t=void 0),e===void 0&&(e=tl(t,"onClose",void 0));var f=tl(t,"onOpen",void 0),i=tl(t,"onTextChanged",void 0);return this.inputText=Z9(this.parent,t).on("textchange",function(n){var o=n.text;i?i(this.parent,o):this.parent.text=o},this).setFocus(),this.parent.setVisible(!1),this.onClose=e,tl(t,"enterClose",!0)&&this.scene.input.keyboard.once("keydown-ENTER",this.close,this),this.delayCall=this.scene.time.delayedCall(0,function(){this.scene.input.once("pointerdown",this.close,this),f&&f(this.parent)},[],this),this}close(){return Qr=void 0,this.inputText?(this.parent.setVisible(!0),this.inputText.destroy(),this.inputText=void 0,this.delayCall&&(this.delayCall.remove(),this.delayCall=void 0),this.scene.input.keyboard.off("keydown-ENTER",this.close,this),this.scene.input.off("pointerdown",this.close,this),this.onClose&&this.onClose(this.parent),this):this}get isOpened(){return this.inputText!==void 0}get text(){return this.isOpened?this.inputText.text:this.parent.text}}var j9=function(s,t,e){return s._edit||(s._edit=new Q9(s)),s._edit.open(t,e),s._edit},q9=function(s){var t=function(e){var f=s.padding,i=e-f.left-f.right,n=s.style;return yv(s)?(n.wordWrapWidth=i,n.maxLines=0):(n.wrapMode===0&&(n.wrapMode=1),n.wrapWidth=i,n.maxLines=0),s.setFixedSize(e,0),s.minHeight=s.height,s};return t},_9=function(s){var t=function(e){return s.setFixedSize(e,0).runWordWrap(),s.minHeight=s.height,s};return t},t8=function(s){var t=function(e){return s.setMaxWidth(e),s.minHeight=s.height,s};return t},e8=function(s){return s instanceof Mo},i8=function(s,t){return t===void 0&&(t=0),s._minWidth=t,s.runWidthWrap=e8(s)?_9(s):uC(s)?t8(s):q9(s),s};const Dd=65535;var AS=function(s,t,e){if(t==null)return s;if(t===0)return Bd(s,0,e),s;var f=s.text.length;if(f===0)return Bd(s,t,e),s;for(var i=Math.floor(t*1.5/f),n={},o=Ly(s,i,t,e,n),r=0;r<=Dd&&o!==0;r++){if(i+=o,i<0){i=0;break}o=Ly(s,i,t,e,n)}return r===Dd&&console.warn(`FontSizeResize: Test count exceeds ${Dd}`),s.setFontSize(i),Bd(s,t,e),s},Ry=function(s,t,e){return e[t]===void 0&&(s.setFontSize(t),e[t]={width:s.width,height:s.height}),e[t]},Ly=function(s,t,e,f,i){var n=Ry(s,t,i),o=Ry(s,t+1,i);if(f!==void 0){if(n.height<=f&&o.height>f)return 0;if(n.height>f)return-1}return n.width<=e&&o.width>e?0:n.width>e?-1:Math.floor(e-n.width)},Bd=function(s,t,e){var f=s.style;f.fixedWidth=t,f.parent.width=t,e!==void 0&&(f.fixedHeight=e,f.parent.height=e),f.update(!1)},n8=function(s,t){return t===void 0&&(t=0),s._minWidth=t,s.runWidthWrap=function(e,f){return AS(s,e,f),s},s.resize=function(e,f){return s.width===e&&s.height===f||s.setFixedSize(e,f),s},s},s8=function(s,t){return s===void 0&&(s=0),new Promise(function(e,f){setTimeout(function(){e(t)},s)})};class r8 extends $n{constructor(t,e){super(e),this.parent=t,this.init()}init(){this.start("IDLE")}next_IDLE(){return"TRANS_OPNE"}next_TRANS_OPNE(){return"OPEN"}enter_TRANS_OPNE(){var t=this.parent;t.transitionIn(),t.delayCall(t.transitInTime,this.next,this)}exit_TRANS_OPNE(){var t=this.parent;t.removeDelayCall()}next_OPEN(){return"TRANS_CLOSE"}enter_OPEN(){var t=this.parent;t.onOpen()}exit_OPEN(){var t=this.parent;t.removeDelayCall()}next_TRANS_CLOSE(){return"CLOSE"}enter_TRANS_CLOSE(){var t=this.parent;t.transitionOut(),t.delayCall(t.transitOutTime,this.next,this)}exit_TRANS_CLOSE(){var t=this.parent;t.removeDelayCall()}next_CLOSE(){}enter_CLOSE(){var t=this.parent;t.onClose()}exit_CLOSE(){}}const qa=Phaser.Utils.Objects.GetValue;class a8 extends He{constructor(t,e){super(t,e),this.setTransitInTime(qa(e,"duration.in",200)),this.setTransitOutTime(qa(e,"duration.out",200)),this.setTransitInCallback(qa(e,"transitIn")),this.setTransitOutCallback(qa(e,"transitOut")),this.destroyParent=qa(e,"destroy",!0),this.timer=void 0,this._state=new r8(this,{eventEmitter:!1}),this.closeEventData=void 0}start(){this._state.next()}get state(){return this._state.state}shutdown(t){this.isShutdown||(this.transitInCallback=void 0,this.transitOutCallback=void 0,this.closeEventData=void 0,this.removeDelayCall(),super.shutdown(t))}transitionIn(){var t=this.transitInTime;return this.transitInCallback(this.parent,t),this}transitionOut(){var t=this.transitOutTime;return this.transitOutCallback(this.parent,t),this}onOpen(){}onClose(){this.destroyParent?this.parent.destroy():this.destroy()}delayCall(t,e,f){return this.timer=mv(this,t,e,f),this}removeDelayCall(){return this.timer&&(this.timer.remove(!1),this.timer=void 0),this}setTransitInTime(t){return this.transitInTime=t,this}setTransitOutTime(t){return this.transitOutTime=t,this}setTransitInCallback(t){return t||(t=mi),this.transitInCallback=t,this}setTransitOutCallback(t){return t||(t=mi),this.transitOutCallback=t,this}requestClose(t){return this._state.state==="OPEN"&&(this.closeEventData=arguments.length>0?t:this.parent,this._state.next()),this}}var o8=function(s,t){var e=s.scene,f=new lv(e,t);return e.add.existing(f),s.isRexContainerLite?s.moveDepthBelow(f):e.children.moveBelow(f,s),f},el={popUp:RT,scaleDown:function(s,t){LT(s,t,void 0,void 0,!1)},fadeIn:Wl,fadeOut:function(s,t){Xl(s,t,!1)}};const il=Phaser.Utils.Objects.GetValue;class h8 extends a8{constructor(t,e){e===void 0&&(e={}),e.hasOwnProperty("transitIn")||(e.transitIn=Ms.popUp),e.hasOwnProperty("transitOut")||(e.transitOut=Ms.scaleDown),super(t,e);var f=il(e,"cover");this.cover=f!==!1?o8(t,f):void 0;var i=il(e,"manualClose",!0);if(i)this.setDisplayTime(-1);else{this.setDisplayTime(il(e,"duration.hold",2e3));var n=il(e,"anyTouchClose",!0);n&&this.anyTouchClose()}this.start()}shutdown(t){this.isShutdown||(this.cover||this.scene.input.off("pointerup",this.requestClose,this),this.cover&&!t&&(this.cover.destroy(),this.cover=void 0),super.shutdown(t))}anyTouchClose(){return this.cover?this.cover.once("pointerup",this.requestClose,this):this.scene.input.once("pointerup",this.requestClose,this),this}transitionIn(){super.transitionIn();var t=this.transitInTime,e=this.cover;return e&&Wl(e,t,e.alpha),this}transitionOut(){super.transitionOut();var t=this.transitOutTime,e=this.cover;return e&&Xl(e,t,!1),this}onOpen(){var t=this.displayTime;t>=0&&this.delayCall(t,this.requestClose,this),this.emit("open",this.parent,this),super.onOpen()}onClose(){this.emit("close",this.closeEventData),super.onClose()}setDisplayTime(t){return this.displayTime=t,this}setTransitInCallback(t){switch(typeof t=="string"&&(t=Ms[t]),t){case Ms.popUp:t=el.popUp;break;case Ms.fadeIn:t=el.fadeIn;break}return super.setTransitInCallback(t),this}setTransitOutCallback(t){switch(typeof t=="string"&&(t=Ms[t]),t){case Ms.scaleDown:t=el.scaleDown;break;case Ms.fadeOut:t=el.fadeOut;break}return super.setTransitOutCallback(t),this}}const Ms={popUp:0,fadeIn:1,scaleDown:0,fadeOut:1};var OS=function(s,t){var e=new h8(s,t);return e.on("open",function(){s.emit("modal.open",e)}),e.on("close",function(f){s.emit("modal.close",f,e)}),s.on("modal.requestClose",e.requestClose,e),e.on("close",function(){s.off("modal.requestClose",e.requestClose,e)}),e},l8=function(s,t){var e=OS(s,t);return new Promise(function(f,i){e.once("close",function(n){f(n)})})},u8=function(s,t){s.emit("modal.requestClose",t)};class RS extends Phaser.Plugins.ScenePlugin{constructor(t,e){super(t,e),this.add=new yt(t)}start(){var t=this.scene.events;t.on("destroy",this.destroy,this)}isInTouching(t,e,f,i){return t.visible?jc(t,e,f,i):!1}get viewport(){return da(this.scene,this.scene.cameras.main,!0)}make(t,e,f,i){return MS(this.scene,t,e,f,i)}get maker(){return this._maker||(this._maker=new Nv(this.scene)),this._maker}}var f8={getParentSizer:Tn,getTopmostSizer:_1,hide:Ls,show:Rs,isShown:Qc,edit:j9,wrapExpandText:i8,fontSizeExpandText:n8,fontSizeResize:AS,waitEvent:wc,waitComplete:We,delayPromise:s8,setChildrenInteractive:iv,fadeIn:Wl,fadeOutDestroy:Xl,easeMoveTo:wT,easeMoveFrom:FT,modal:OS,modalPromise:l8,modalClose:u8,requestDrag:FC,yaml:ES};Object.assign(RS.prototype,f8);var me={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(s,t){(function(){var e,f="4.17.21",i=200,n="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",r="Invalid `variable` option passed into `_.template`",a="__lodash_hash_undefined__",l=500,h="__lodash_placeholder__",u=1,v=2,d=4,c=1,p=2,g=1,m=2,x=4,y=8,T=16,C=32,S=64,E=128,M=256,O=512,L=30,R="...",w=800,D=16,B=1,N=2,z=3,X=1/0,k=9007199254740991,K=17976931348623157e292,b=0/0,I=4294967295,G=I-1,Y=I>>>1,U=[["ary",E],["bind",g],["bindKey",m],["curry",y],["curryRight",T],["flip",O],["partial",C],["partialRight",S],["rearg",M]],W="[object Arguments]",H="[object Array]",Z="[object AsyncFunction]",q="[object Boolean]",_="[object Date]",nt="[object DOMException]",rt="[object Error]",at="[object Function]",ct="[object GeneratorFunction]",ut="[object Map]",pt="[object Number]",Dt="[object Null]",St="[object Object]",Et="[object Promise]",dt="[object Proxy]",Bt="[object RegExp]",mt="[object Set]",Ot="[object String]",Oe="[object Symbol]",$e="[object Undefined]",Qt="[object WeakMap]",Ht="[object WeakSet]",oe="[object ArrayBuffer]",ne="[object DataView]",he="[object Float32Array]",De="[object Float64Array]",Ci="[object Int8Array]",Si="[object Int16Array]",Ei="[object Int32Array]",Pi="[object Uint8Array]",Mi="[object Uint8ClampedArray]",Ai="[object Uint16Array]",ma="[object Uint32Array]",BS=/\b__p \+= '';/g,bS=/\b(__p \+=) '' \+/g,GS=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Vv=/&(?:amp|lt|gt|quot|#39);/g,Uv=/[&<>"']/g,NS=RegExp(Vv.source),YS=RegExp(Uv.source),zS=/<%-([\s\S]+?)%>/g,VS=/<%([\s\S]+?)%>/g,Wv=/<%=([\s\S]+?)%>/g,US=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,WS=/^\w*$/,XS=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,cu=/[\\^$.*+?()[\]{}|]/g,HS=RegExp(cu.source),vu=/^\s+/,$S=/\s/,kS=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,KS=/\{\n\/\* \[wrapped with (.+)\] \*/,ZS=/,? & /,JS=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,QS=/[()=,{}\[\]\/\s]/,jS=/\\(\\)?/g,qS=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Xv=/\w*$/,_S=/^[-+]0x[0-9a-f]+$/i,tE=/^0b[01]+$/i,eE=/^\[object .+?Constructor\]$/,iE=/^0o[0-7]+$/i,nE=/^(?:0|[1-9]\d*)$/,sE=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Go=/($^)/,rE=/['\n\r\u2028\u2029\\]/g,No="\\ud800-\\udfff",aE="\\u0300-\\u036f",oE="\\ufe20-\\ufe2f",hE="\\u20d0-\\u20ff",Hv=aE+oE+hE,$v="\\u2700-\\u27bf",kv="a-z\\xdf-\\xf6\\xf8-\\xff",lE="\\xac\\xb1\\xd7\\xf7",uE="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",fE="\\u2000-\\u206f",dE=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Kv="A-Z\\xc0-\\xd6\\xd8-\\xde",Zv="\\ufe0e\\ufe0f",Jv=lE+uE+fE+dE,pu="['\u2019]",cE="["+No+"]",Qv="["+Jv+"]",Yo="["+Hv+"]",jv="\\d+",vE="["+$v+"]",qv="["+kv+"]",_v="[^"+No+Jv+jv+$v+kv+Kv+"]",gu="\\ud83c[\\udffb-\\udfff]",pE="(?:"+Yo+"|"+gu+")",tp="[^"+No+"]",mu="(?:\\ud83c[\\udde6-\\uddff]){2}",xu="[\\ud800-\\udbff][\\udc00-\\udfff]",Tr="["+Kv+"]",ep="\\u200d",ip="(?:"+qv+"|"+_v+")",gE="(?:"+Tr+"|"+_v+")",np="(?:"+pu+"(?:d|ll|m|re|s|t|ve))?",sp="(?:"+pu+"(?:D|LL|M|RE|S|T|VE))?",rp=pE+"?",ap="["+Zv+"]?",mE="(?:"+ep+"(?:"+[tp,mu,xu].join("|")+")"+ap+rp+")*",xE="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",yE="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",op=ap+rp+mE,TE="(?:"+[vE,mu,xu].join("|")+")"+op,CE="(?:"+[tp+Yo+"?",Yo,mu,xu,cE].join("|")+")",SE=RegExp(pu,"g"),EE=RegExp(Yo,"g"),yu=RegExp(gu+"(?="+gu+")|"+CE+op,"g"),PE=RegExp([Tr+"?"+qv+"+"+np+"(?="+[Qv,Tr,"$"].join("|")+")",gE+"+"+sp+"(?="+[Qv,Tr+ip,"$"].join("|")+")",Tr+"?"+ip+"+"+np,Tr+"+"+sp,yE,xE,jv,TE].join("|"),"g"),ME=RegExp("["+ep+No+Hv+Zv+"]"),AE=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,OE=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],RE=-1,de={};de[he]=de[De]=de[Ci]=de[Si]=de[Ei]=de[Pi]=de[Mi]=de[Ai]=de[ma]=!0,de[W]=de[H]=de[oe]=de[q]=de[ne]=de[_]=de[rt]=de[at]=de[ut]=de[pt]=de[St]=de[Bt]=de[mt]=de[Ot]=de[Qt]=!1;var le={};le[W]=le[H]=le[oe]=le[ne]=le[q]=le[_]=le[he]=le[De]=le[Ci]=le[Si]=le[Ei]=le[ut]=le[pt]=le[St]=le[Bt]=le[mt]=le[Ot]=le[Oe]=le[Pi]=le[Mi]=le[Ai]=le[ma]=!0,le[rt]=le[at]=le[Qt]=!1;var LE={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},wE={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},FE={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},IE={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},DE=parseFloat,BE=parseInt,hp=typeof jr=="object"&&jr&&jr.Object===Object&&jr,bE=typeof self=="object"&&self&&self.Object===Object&&self,Ne=hp||bE||Function("return this")(),Tu=t&&!t.nodeType&&t,$s=Tu&&!0&&s&&!s.nodeType&&s,lp=$s&&$s.exports===Tu,Cu=lp&&hp.process,zi=function(){try{var et=$s&&$s.require&&$s.require("util").types;return et||Cu&&Cu.binding&&Cu.binding("util")}catch{}}(),up=zi&&zi.isArrayBuffer,fp=zi&&zi.isDate,dp=zi&&zi.isMap,cp=zi&&zi.isRegExp,vp=zi&&zi.isSet,pp=zi&&zi.isTypedArray;function Oi(et,ot,st){switch(st.length){case 0:return et.call(ot);case 1:return et.call(ot,st[0]);case 2:return et.call(ot,st[0],st[1]);case 3:return et.call(ot,st[0],st[1],st[2])}return et.apply(ot,st)}function GE(et,ot,st,Tt){for(var bt=-1,jt=et==null?0:et.length;++bt<jt;){var Re=et[bt];ot(Tt,Re,st(Re),et)}return Tt}function Vi(et,ot){for(var st=-1,Tt=et==null?0:et.length;++st<Tt&&ot(et[st],st,et)!==!1;);return et}function NE(et,ot){for(var st=et==null?0:et.length;st--&&ot(et[st],st,et)!==!1;);return et}function gp(et,ot){for(var st=-1,Tt=et==null?0:et.length;++st<Tt;)if(!ot(et[st],st,et))return!1;return!0}function fs(et,ot){for(var st=-1,Tt=et==null?0:et.length,bt=0,jt=[];++st<Tt;){var Re=et[st];ot(Re,st,et)&&(jt[bt++]=Re)}return jt}function zo(et,ot){var st=et==null?0:et.length;return!!st&&Cr(et,ot,0)>-1}function Su(et,ot,st){for(var Tt=-1,bt=et==null?0:et.length;++Tt<bt;)if(st(ot,et[Tt]))return!0;return!1}function ce(et,ot){for(var st=-1,Tt=et==null?0:et.length,bt=Array(Tt);++st<Tt;)bt[st]=ot(et[st],st,et);return bt}function ds(et,ot){for(var st=-1,Tt=ot.length,bt=et.length;++st<Tt;)et[bt+st]=ot[st];return et}function Eu(et,ot,st,Tt){var bt=-1,jt=et==null?0:et.length;for(Tt&&jt&&(st=et[++bt]);++bt<jt;)st=ot(st,et[bt],bt,et);return st}function YE(et,ot,st,Tt){var bt=et==null?0:et.length;for(Tt&&bt&&(st=et[--bt]);bt--;)st=ot(st,et[bt],bt,et);return st}function Pu(et,ot){for(var st=-1,Tt=et==null?0:et.length;++st<Tt;)if(ot(et[st],st,et))return!0;return!1}var zE=Mu("length");function VE(et){return et.split("")}function UE(et){return et.match(JS)||[]}function mp(et,ot,st){var Tt;return st(et,function(bt,jt,Re){if(ot(bt,jt,Re))return Tt=jt,!1}),Tt}function Vo(et,ot,st,Tt){for(var bt=et.length,jt=st+(Tt?1:-1);Tt?jt--:++jt<bt;)if(ot(et[jt],jt,et))return jt;return-1}function Cr(et,ot,st){return ot===ot?_E(et,ot,st):Vo(et,xp,st)}function WE(et,ot,st,Tt){for(var bt=st-1,jt=et.length;++bt<jt;)if(Tt(et[bt],ot))return bt;return-1}function xp(et){return et!==et}function yp(et,ot){var st=et==null?0:et.length;return st?Ou(et,ot)/st:b}function Mu(et){return function(ot){return ot==null?e:ot[et]}}function Au(et){return function(ot){return et==null?e:et[ot]}}function Tp(et,ot,st,Tt,bt){return bt(et,function(jt,Re,re){st=Tt?(Tt=!1,jt):ot(st,jt,Re,re)}),st}function XE(et,ot){var st=et.length;for(et.sort(ot);st--;)et[st]=et[st].value;return et}function Ou(et,ot){for(var st,Tt=-1,bt=et.length;++Tt<bt;){var jt=ot(et[Tt]);jt!==e&&(st=st===e?jt:st+jt)}return st}function Ru(et,ot){for(var st=-1,Tt=Array(et);++st<et;)Tt[st]=ot(st);return Tt}function HE(et,ot){return ce(ot,function(st){return[st,et[st]]})}function Cp(et){return et&&et.slice(0,Mp(et)+1).replace(vu,"")}function Ri(et){return function(ot){return et(ot)}}function Lu(et,ot){return ce(ot,function(st){return et[st]})}function xa(et,ot){return et.has(ot)}function Sp(et,ot){for(var st=-1,Tt=et.length;++st<Tt&&Cr(ot,et[st],0)>-1;);return st}function Ep(et,ot){for(var st=et.length;st--&&Cr(ot,et[st],0)>-1;);return st}function $E(et,ot){for(var st=et.length,Tt=0;st--;)et[st]===ot&&++Tt;return Tt}var kE=Au(LE),KE=Au(wE);function ZE(et){return"\\"+IE[et]}function JE(et,ot){return et==null?e:et[ot]}function Sr(et){return ME.test(et)}function QE(et){return AE.test(et)}function jE(et){for(var ot,st=[];!(ot=et.next()).done;)st.push(ot.value);return st}function wu(et){var ot=-1,st=Array(et.size);return et.forEach(function(Tt,bt){st[++ot]=[bt,Tt]}),st}function Pp(et,ot){return function(st){return et(ot(st))}}function cs(et,ot){for(var st=-1,Tt=et.length,bt=0,jt=[];++st<Tt;){var Re=et[st];(Re===ot||Re===h)&&(et[st]=h,jt[bt++]=st)}return jt}function Uo(et){var ot=-1,st=Array(et.size);return et.forEach(function(Tt){st[++ot]=Tt}),st}function qE(et){var ot=-1,st=Array(et.size);return et.forEach(function(Tt){st[++ot]=[Tt,Tt]}),st}function _E(et,ot,st){for(var Tt=st-1,bt=et.length;++Tt<bt;)if(et[Tt]===ot)return Tt;return-1}function tP(et,ot,st){for(var Tt=st+1;Tt--;)if(et[Tt]===ot)return Tt;return Tt}function Er(et){return Sr(et)?iP(et):zE(et)}function an(et){return Sr(et)?nP(et):VE(et)}function Mp(et){for(var ot=et.length;ot--&&$S.test(et.charAt(ot)););return ot}var eP=Au(FE);function iP(et){for(var ot=yu.lastIndex=0;yu.test(et);)++ot;return ot}function nP(et){return et.match(yu)||[]}function sP(et){return et.match(PE)||[]}var rP=function et(ot){ot=ot==null?Ne:Pr.defaults(Ne.Object(),ot,Pr.pick(Ne,OE));var st=ot.Array,Tt=ot.Date,bt=ot.Error,jt=ot.Function,Re=ot.Math,re=ot.Object,Fu=ot.RegExp,aP=ot.String,Ui=ot.TypeError,Wo=st.prototype,oP=jt.prototype,Mr=re.prototype,Xo=ot["__core-js_shared__"],Ho=oP.toString,ee=Mr.hasOwnProperty,hP=0,Ap=function(){var P=/[^.]+$/.exec(Xo&&Xo.keys&&Xo.keys.IE_PROTO||"");return P?"Symbol(src)_1."+P:""}(),$o=Mr.toString,lP=Ho.call(re),uP=Ne._,fP=Fu("^"+Ho.call(ee).replace(cu,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ko=lp?ot.Buffer:e,vs=ot.Symbol,Ko=ot.Uint8Array,Op=ko?ko.allocUnsafe:e,Zo=Pp(re.getPrototypeOf,re),Rp=re.create,Lp=Mr.propertyIsEnumerable,Jo=Wo.splice,wp=vs?vs.isConcatSpreadable:e,ya=vs?vs.iterator:e,ks=vs?vs.toStringTag:e,Qo=function(){try{var P=js(re,"defineProperty");return P({},"",{}),P}catch{}}(),dP=ot.clearTimeout!==Ne.clearTimeout&&ot.clearTimeout,cP=Tt&&Tt.now!==Ne.Date.now&&Tt.now,vP=ot.setTimeout!==Ne.setTimeout&&ot.setTimeout,jo=Re.ceil,qo=Re.floor,Iu=re.getOwnPropertySymbols,pP=ko?ko.isBuffer:e,Fp=ot.isFinite,gP=Wo.join,mP=Pp(re.keys,re),Le=Re.max,ke=Re.min,xP=Tt.now,yP=ot.parseInt,Ip=Re.random,TP=Wo.reverse,Du=js(ot,"DataView"),Ta=js(ot,"Map"),Bu=js(ot,"Promise"),Ar=js(ot,"Set"),Ca=js(ot,"WeakMap"),Sa=js(re,"create"),_o=Ca&&new Ca,Or={},CP=qs(Du),SP=qs(Ta),EP=qs(Bu),PP=qs(Ar),MP=qs(Ca),th=vs?vs.prototype:e,Ea=th?th.valueOf:e,Dp=th?th.toString:e;function J(P){if(ye(P)&&!Gt(P)&&!(P instanceof Wt)){if(P instanceof Wi)return P;if(ee.call(P,"__wrapped__"))return Bg(P)}return new Wi(P)}var Rr=function(){function P(){}return function(A){if(!ge(A))return{};if(Rp)return Rp(A);P.prototype=A;var F=new P;return P.prototype=e,F}}();function eh(){}function Wi(P,A){this.__wrapped__=P,this.__actions__=[],this.__chain__=!!A,this.__index__=0,this.__values__=e}J.templateSettings={escape:zS,evaluate:VS,interpolate:Wv,variable:"",imports:{_:J}},J.prototype=eh.prototype,J.prototype.constructor=J,Wi.prototype=Rr(eh.prototype),Wi.prototype.constructor=Wi;function Wt(P){this.__wrapped__=P,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=I,this.__views__=[]}function AP(){var P=new Wt(this.__wrapped__);return P.__actions__=hi(this.__actions__),P.__dir__=this.__dir__,P.__filtered__=this.__filtered__,P.__iteratees__=hi(this.__iteratees__),P.__takeCount__=this.__takeCount__,P.__views__=hi(this.__views__),P}function OP(){if(this.__filtered__){var P=new Wt(this);P.__dir__=-1,P.__filtered__=!0}else P=this.clone(),P.__dir__*=-1;return P}function RP(){var P=this.__wrapped__.value(),A=this.__dir__,F=Gt(P),V=A<0,$=F?P.length:0,Q=VM(0,$,this.__views__),j=Q.start,tt=Q.end,it=tt-j,ht=V?tt:j-1,lt=this.__iteratees__,ft=lt.length,gt=0,Mt=ke(it,this.__takeCount__);if(!F||!V&&$==it&&Mt==it)return ng(P,this.__actions__);var Ft=[];t:for(;it--&&gt<Mt;){ht+=A;for(var zt=-1,It=P[ht];++zt<ft;){var Ut=lt[zt],$t=Ut.iteratee,Fi=Ut.type,ni=$t(It);if(Fi==N)It=ni;else if(!ni){if(Fi==B)continue t;break t}}Ft[gt++]=It}return Ft}Wt.prototype=Rr(eh.prototype),Wt.prototype.constructor=Wt;function Ks(P){var A=-1,F=P==null?0:P.length;for(this.clear();++A<F;){var V=P[A];this.set(V[0],V[1])}}function LP(){this.__data__=Sa?Sa(null):{},this.size=0}function wP(P){var A=this.has(P)&&delete this.__data__[P];return this.size-=A?1:0,A}function FP(P){var A=this.__data__;if(Sa){var F=A[P];return F===a?e:F}return ee.call(A,P)?A[P]:e}function IP(P){var A=this.__data__;return Sa?A[P]!==e:ee.call(A,P)}function DP(P,A){var F=this.__data__;return this.size+=this.has(P)?0:1,F[P]=Sa&&A===e?a:A,this}Ks.prototype.clear=LP,Ks.prototype.delete=wP,Ks.prototype.get=FP,Ks.prototype.has=IP,Ks.prototype.set=DP;function kn(P){var A=-1,F=P==null?0:P.length;for(this.clear();++A<F;){var V=P[A];this.set(V[0],V[1])}}function BP(){this.__data__=[],this.size=0}function bP(P){var A=this.__data__,F=ih(A,P);if(F<0)return!1;var V=A.length-1;return F==V?A.pop():Jo.call(A,F,1),--this.size,!0}function GP(P){var A=this.__data__,F=ih(A,P);return F<0?e:A[F][1]}function NP(P){return ih(this.__data__,P)>-1}function YP(P,A){var F=this.__data__,V=ih(F,P);return V<0?(++this.size,F.push([P,A])):F[V][1]=A,this}kn.prototype.clear=BP,kn.prototype.delete=bP,kn.prototype.get=GP,kn.prototype.has=NP,kn.prototype.set=YP;function Kn(P){var A=-1,F=P==null?0:P.length;for(this.clear();++A<F;){var V=P[A];this.set(V[0],V[1])}}function zP(){this.size=0,this.__data__={hash:new Ks,map:new(Ta||kn),string:new Ks}}function VP(P){var A=vh(this,P).delete(P);return this.size-=A?1:0,A}function UP(P){return vh(this,P).get(P)}function WP(P){return vh(this,P).has(P)}function XP(P,A){var F=vh(this,P),V=F.size;return F.set(P,A),this.size+=F.size==V?0:1,this}Kn.prototype.clear=zP,Kn.prototype.delete=VP,Kn.prototype.get=UP,Kn.prototype.has=WP,Kn.prototype.set=XP;function Zs(P){var A=-1,F=P==null?0:P.length;for(this.__data__=new Kn;++A<F;)this.add(P[A])}function HP(P){return this.__data__.set(P,a),this}function $P(P){return this.__data__.has(P)}Zs.prototype.add=Zs.prototype.push=HP,Zs.prototype.has=$P;function on(P){var A=this.__data__=new kn(P);this.size=A.size}function kP(){this.__data__=new kn,this.size=0}function KP(P){var A=this.__data__,F=A.delete(P);return this.size=A.size,F}function ZP(P){return this.__data__.get(P)}function JP(P){return this.__data__.has(P)}function QP(P,A){var F=this.__data__;if(F instanceof kn){var V=F.__data__;if(!Ta||V.length<i-1)return V.push([P,A]),this.size=++F.size,this;F=this.__data__=new Kn(V)}return F.set(P,A),this.size=F.size,this}on.prototype.clear=kP,on.prototype.delete=KP,on.prototype.get=ZP,on.prototype.has=JP,on.prototype.set=QP;function Bp(P,A){var F=Gt(P),V=!F&&_s(P),$=!F&&!V&&ys(P),Q=!F&&!V&&!$&&Ir(P),j=F||V||$||Q,tt=j?Ru(P.length,aP):[],it=tt.length;for(var ht in P)(A||ee.call(P,ht))&&!(j&&(ht=="length"||$&&(ht=="offset"||ht=="parent")||Q&&(ht=="buffer"||ht=="byteLength"||ht=="byteOffset")||jn(ht,it)))&&tt.push(ht);return tt}function bp(P){var A=P.length;return A?P[$u(0,A-1)]:e}function jP(P,A){return ph(hi(P),Js(A,0,P.length))}function qP(P){return ph(hi(P))}function bu(P,A,F){(F!==e&&!hn(P[A],F)||F===e&&!(A in P))&&Zn(P,A,F)}function Pa(P,A,F){var V=P[A];(!(ee.call(P,A)&&hn(V,F))||F===e&&!(A in P))&&Zn(P,A,F)}function ih(P,A){for(var F=P.length;F--;)if(hn(P[F][0],A))return F;return-1}function _P(P,A,F,V){return ps(P,function($,Q,j){A(V,$,F($),j)}),V}function Gp(P,A){return P&&Pn(A,Be(A),P)}function tM(P,A){return P&&Pn(A,ui(A),P)}function Zn(P,A,F){A=="__proto__"&&Qo?Qo(P,A,{configurable:!0,enumerable:!0,value:F,writable:!0}):P[A]=F}function Gu(P,A){for(var F=-1,V=A.length,$=st(V),Q=P==null;++F<V;)$[F]=Q?e:mf(P,A[F]);return $}function Js(P,A,F){return P===P&&(F!==e&&(P=P<=F?P:F),A!==e&&(P=P>=A?P:A)),P}function Xi(P,A,F,V,$,Q){var j,tt=A&u,it=A&v,ht=A&d;if(F&&(j=$?F(P,V,$,Q):F(P)),j!==e)return j;if(!ge(P))return P;var lt=Gt(P);if(lt){if(j=WM(P),!tt)return hi(P,j)}else{var ft=Ke(P),gt=ft==at||ft==ct;if(ys(P))return ag(P,tt);if(ft==St||ft==W||gt&&!$){if(j=it||gt?{}:Mg(P),!tt)return it?FM(P,tM(j,P)):wM(P,Gp(j,P))}else{if(!le[ft])return $?P:{};j=XM(P,ft,tt)}}Q||(Q=new on);var Mt=Q.get(P);if(Mt)return Mt;Q.set(P,j),t0(P)?P.forEach(function(It){j.add(Xi(It,A,F,It,P,Q))}):qg(P)&&P.forEach(function(It,Ut){j.set(Ut,Xi(It,A,F,Ut,P,Q))});var Ft=ht?it?nf:ef:it?ui:Be,zt=lt?e:Ft(P);return Vi(zt||P,function(It,Ut){zt&&(Ut=It,It=P[Ut]),Pa(j,Ut,Xi(It,A,F,Ut,P,Q))}),j}function eM(P){var A=Be(P);return function(F){return Np(F,P,A)}}function Np(P,A,F){var V=F.length;if(P==null)return!V;for(P=re(P);V--;){var $=F[V],Q=A[$],j=P[$];if(j===e&&!($ in P)||!Q(j))return!1}return!0}function Yp(P,A,F){if(typeof P!="function")throw new Ui(o);return Fa(function(){P.apply(e,F)},A)}function Ma(P,A,F,V){var $=-1,Q=zo,j=!0,tt=P.length,it=[],ht=A.length;if(!tt)return it;F&&(A=ce(A,Ri(F))),V?(Q=Su,j=!1):A.length>=i&&(Q=xa,j=!1,A=new Zs(A));t:for(;++$<tt;){var lt=P[$],ft=F==null?lt:F(lt);if(lt=V||lt!==0?lt:0,j&&ft===ft){for(var gt=ht;gt--;)if(A[gt]===ft)continue t;it.push(lt)}else Q(A,ft,V)||it.push(lt)}return it}var ps=fg(En),zp=fg(Yu,!0);function iM(P,A){var F=!0;return ps(P,function(V,$,Q){return F=!!A(V,$,Q),F}),F}function nh(P,A,F){for(var V=-1,$=P.length;++V<$;){var Q=P[V],j=A(Q);if(j!=null&&(tt===e?j===j&&!wi(j):F(j,tt)))var tt=j,it=Q}return it}function nM(P,A,F,V){var $=P.length;for(F=Yt(F),F<0&&(F=-F>$?0:$+F),V=V===e||V>$?$:Yt(V),V<0&&(V+=$),V=F>V?0:i0(V);F<V;)P[F++]=A;return P}function Vp(P,A){var F=[];return ps(P,function(V,$,Q){A(V,$,Q)&&F.push(V)}),F}function Ye(P,A,F,V,$){var Q=-1,j=P.length;for(F||(F=$M),$||($=[]);++Q<j;){var tt=P[Q];A>0&&F(tt)?A>1?Ye(tt,A-1,F,V,$):ds($,tt):V||($[$.length]=tt)}return $}var Nu=dg(),Up=dg(!0);function En(P,A){return P&&Nu(P,A,Be)}function Yu(P,A){return P&&Up(P,A,Be)}function sh(P,A){return fs(A,function(F){return qn(P[F])})}function Qs(P,A){A=ms(A,P);for(var F=0,V=A.length;P!=null&&F<V;)P=P[Mn(A[F++])];return F&&F==V?P:e}function Wp(P,A,F){var V=A(P);return Gt(P)?V:ds(V,F(P))}function ei(P){return P==null?P===e?$e:Dt:ks&&ks in re(P)?zM(P):qM(P)}function zu(P,A){return P>A}function sM(P,A){return P!=null&&ee.call(P,A)}function rM(P,A){return P!=null&&A in re(P)}function aM(P,A,F){return P>=ke(A,F)&&P<Le(A,F)}function Vu(P,A,F){for(var V=F?Su:zo,$=P[0].length,Q=P.length,j=Q,tt=st(Q),it=1/0,ht=[];j--;){var lt=P[j];j&&A&&(lt=ce(lt,Ri(A))),it=ke(lt.length,it),tt[j]=!F&&(A||$>=120&&lt.length>=120)?new Zs(j&&lt):e}lt=P[0];var ft=-1,gt=tt[0];t:for(;++ft<$&&ht.length<it;){var Mt=lt[ft],Ft=A?A(Mt):Mt;if(Mt=F||Mt!==0?Mt:0,!(gt?xa(gt,Ft):V(ht,Ft,F))){for(j=Q;--j;){var zt=tt[j];if(!(zt?xa(zt,Ft):V(P[j],Ft,F)))continue t}gt&&gt.push(Ft),ht.push(Mt)}}return ht}function oM(P,A,F,V){return En(P,function($,Q,j){A(V,F($),Q,j)}),V}function Aa(P,A,F){A=ms(A,P),P=Lg(P,A);var V=P==null?P:P[Mn($i(A))];return V==null?e:Oi(V,P,F)}function Xp(P){return ye(P)&&ei(P)==W}function hM(P){return ye(P)&&ei(P)==oe}function lM(P){return ye(P)&&ei(P)==_}function Oa(P,A,F,V,$){return P===A?!0:P==null||A==null||!ye(P)&&!ye(A)?P!==P&&A!==A:uM(P,A,F,V,Oa,$)}function uM(P,A,F,V,$,Q){var j=Gt(P),tt=Gt(A),it=j?H:Ke(P),ht=tt?H:Ke(A);it=it==W?St:it,ht=ht==W?St:ht;var lt=it==St,ft=ht==St,gt=it==ht;if(gt&&ys(P)){if(!ys(A))return!1;j=!0,lt=!1}if(gt&&!lt)return Q||(Q=new on),j||Ir(P)?Sg(P,A,F,V,$,Q):NM(P,A,it,F,V,$,Q);if(!(F&c)){var Mt=lt&&ee.call(P,"__wrapped__"),Ft=ft&&ee.call(A,"__wrapped__");if(Mt||Ft){var zt=Mt?P.value():P,It=Ft?A.value():A;return Q||(Q=new on),$(zt,It,F,V,Q)}}return gt?(Q||(Q=new on),YM(P,A,F,V,$,Q)):!1}function fM(P){return ye(P)&&Ke(P)==ut}function Uu(P,A,F,V){var $=F.length,Q=$,j=!V;if(P==null)return!Q;for(P=re(P);$--;){var tt=F[$];if(j&&tt[2]?tt[1]!==P[tt[0]]:!(tt[0]in P))return!1}for(;++$<Q;){tt=F[$];var it=tt[0],ht=P[it],lt=tt[1];if(j&&tt[2]){if(ht===e&&!(it in P))return!1}else{var ft=new on;if(V)var gt=V(ht,lt,it,P,A,ft);if(!(gt===e?Oa(lt,ht,c|p,V,ft):gt))return!1}}return!0}function Hp(P){if(!ge(P)||KM(P))return!1;var A=qn(P)?fP:eE;return A.test(qs(P))}function dM(P){return ye(P)&&ei(P)==Bt}function cM(P){return ye(P)&&Ke(P)==mt}function vM(P){return ye(P)&&Ch(P.length)&&!!de[ei(P)]}function $p(P){return typeof P=="function"?P:P==null?fi:typeof P=="object"?Gt(P)?Zp(P[0],P[1]):Kp(P):c0(P)}function Wu(P){if(!wa(P))return mP(P);var A=[];for(var F in re(P))ee.call(P,F)&&F!="constructor"&&A.push(F);return A}function pM(P){if(!ge(P))return jM(P);var A=wa(P),F=[];for(var V in P)V=="constructor"&&(A||!ee.call(P,V))||F.push(V);return F}function Xu(P,A){return P<A}function kp(P,A){var F=-1,V=li(P)?st(P.length):[];return ps(P,function($,Q,j){V[++F]=A($,Q,j)}),V}function Kp(P){var A=rf(P);return A.length==1&&A[0][2]?Og(A[0][0],A[0][1]):function(F){return F===P||Uu(F,P,A)}}function Zp(P,A){return of(P)&&Ag(A)?Og(Mn(P),A):function(F){var V=mf(F,P);return V===e&&V===A?xf(F,P):Oa(A,V,c|p)}}function rh(P,A,F,V,$){P!==A&&Nu(A,function(Q,j){if($||($=new on),ge(Q))gM(P,A,j,F,rh,V,$);else{var tt=V?V(lf(P,j),Q,j+"",P,A,$):e;tt===e&&(tt=Q),bu(P,j,tt)}},ui)}function gM(P,A,F,V,$,Q,j){var tt=lf(P,F),it=lf(A,F),ht=j.get(it);if(ht){bu(P,F,ht);return}var lt=Q?Q(tt,it,F+"",P,A,j):e,ft=lt===e;if(ft){var gt=Gt(it),Mt=!gt&&ys(it),Ft=!gt&&!Mt&&Ir(it);lt=it,gt||Mt||Ft?Gt(tt)?lt=tt:Ee(tt)?lt=hi(tt):Mt?(ft=!1,lt=ag(it,!0)):Ft?(ft=!1,lt=og(it,!0)):lt=[]:Ia(it)||_s(it)?(lt=tt,_s(tt)?lt=n0(tt):(!ge(tt)||qn(tt))&&(lt=Mg(it))):ft=!1}ft&&(j.set(it,lt),$(lt,it,V,Q,j),j.delete(it)),bu(P,F,lt)}function Jp(P,A){var F=P.length;if(!!F)return A+=A<0?F:0,jn(A,F)?P[A]:e}function Qp(P,A,F){A.length?A=ce(A,function(Q){return Gt(Q)?function(j){return Qs(j,Q.length===1?Q[0]:Q)}:Q}):A=[fi];var V=-1;A=ce(A,Ri(wt()));var $=kp(P,function(Q,j,tt){var it=ce(A,function(ht){return ht(Q)});return{criteria:it,index:++V,value:Q}});return XE($,function(Q,j){return LM(Q,j,F)})}function mM(P,A){return jp(P,A,function(F,V){return xf(P,V)})}function jp(P,A,F){for(var V=-1,$=A.length,Q={};++V<$;){var j=A[V],tt=Qs(P,j);F(tt,j)&&Ra(Q,ms(j,P),tt)}return Q}function xM(P){return function(A){return Qs(A,P)}}function Hu(P,A,F,V){var $=V?WE:Cr,Q=-1,j=A.length,tt=P;for(P===A&&(A=hi(A)),F&&(tt=ce(P,Ri(F)));++Q<j;)for(var it=0,ht=A[Q],lt=F?F(ht):ht;(it=$(tt,lt,it,V))>-1;)tt!==P&&Jo.call(tt,it,1),Jo.call(P,it,1);return P}function qp(P,A){for(var F=P?A.length:0,V=F-1;F--;){var $=A[F];if(F==V||$!==Q){var Q=$;jn($)?Jo.call(P,$,1):Zu(P,$)}}return P}function $u(P,A){return P+qo(Ip()*(A-P+1))}function yM(P,A,F,V){for(var $=-1,Q=Le(jo((A-P)/(F||1)),0),j=st(Q);Q--;)j[V?Q:++$]=P,P+=F;return j}function ku(P,A){var F="";if(!P||A<1||A>k)return F;do A%2&&(F+=P),A=qo(A/2),A&&(P+=P);while(A);return F}function Vt(P,A){return uf(Rg(P,A,fi),P+"")}function TM(P){return bp(Dr(P))}function CM(P,A){var F=Dr(P);return ph(F,Js(A,0,F.length))}function Ra(P,A,F,V){if(!ge(P))return P;A=ms(A,P);for(var $=-1,Q=A.length,j=Q-1,tt=P;tt!=null&&++$<Q;){var it=Mn(A[$]),ht=F;if(it==="__proto__"||it==="constructor"||it==="prototype")return P;if($!=j){var lt=tt[it];ht=V?V(lt,it,tt):e,ht===e&&(ht=ge(lt)?lt:jn(A[$+1])?[]:{})}Pa(tt,it,ht),tt=tt[it]}return P}var _p=_o?function(P,A){return _o.set(P,A),P}:fi,SM=Qo?function(P,A){return Qo(P,"toString",{configurable:!0,enumerable:!1,value:Tf(A),writable:!0})}:fi;function EM(P){return ph(Dr(P))}function Hi(P,A,F){var V=-1,$=P.length;A<0&&(A=-A>$?0:$+A),F=F>$?$:F,F<0&&(F+=$),$=A>F?0:F-A>>>0,A>>>=0;for(var Q=st($);++V<$;)Q[V]=P[V+A];return Q}function PM(P,A){var F;return ps(P,function(V,$,Q){return F=A(V,$,Q),!F}),!!F}function ah(P,A,F){var V=0,$=P==null?V:P.length;if(typeof A=="number"&&A===A&&$<=Y){for(;V<$;){var Q=V+$>>>1,j=P[Q];j!==null&&!wi(j)&&(F?j<=A:j<A)?V=Q+1:$=Q}return $}return Ku(P,A,fi,F)}function Ku(P,A,F,V){var $=0,Q=P==null?0:P.length;if(Q===0)return 0;A=F(A);for(var j=A!==A,tt=A===null,it=wi(A),ht=A===e;$<Q;){var lt=qo(($+Q)/2),ft=F(P[lt]),gt=ft!==e,Mt=ft===null,Ft=ft===ft,zt=wi(ft);if(j)var It=V||Ft;else ht?It=Ft&&(V||gt):tt?It=Ft&&gt&&(V||!Mt):it?It=Ft&&gt&&!Mt&&(V||!zt):Mt||zt?It=!1:It=V?ft<=A:ft<A;It?$=lt+1:Q=lt}return ke(Q,G)}function tg(P,A){for(var F=-1,V=P.length,$=0,Q=[];++F<V;){var j=P[F],tt=A?A(j):j;if(!F||!hn(tt,it)){var it=tt;Q[$++]=j===0?0:j}}return Q}function eg(P){return typeof P=="number"?P:wi(P)?b:+P}function Li(P){if(typeof P=="string")return P;if(Gt(P))return ce(P,Li)+"";if(wi(P))return Dp?Dp.call(P):"";var A=P+"";return A=="0"&&1/P==-X?"-0":A}function gs(P,A,F){var V=-1,$=zo,Q=P.length,j=!0,tt=[],it=tt;if(F)j=!1,$=Su;else if(Q>=i){var ht=A?null:bM(P);if(ht)return Uo(ht);j=!1,$=xa,it=new Zs}else it=A?[]:tt;t:for(;++V<Q;){var lt=P[V],ft=A?A(lt):lt;if(lt=F||lt!==0?lt:0,j&&ft===ft){for(var gt=it.length;gt--;)if(it[gt]===ft)continue t;A&&it.push(ft),tt.push(lt)}else $(it,ft,F)||(it!==tt&&it.push(ft),tt.push(lt))}return tt}function Zu(P,A){return A=ms(A,P),P=Lg(P,A),P==null||delete P[Mn($i(A))]}function ig(P,A,F,V){return Ra(P,A,F(Qs(P,A)),V)}function oh(P,A,F,V){for(var $=P.length,Q=V?$:-1;(V?Q--:++Q<$)&&A(P[Q],Q,P););return F?Hi(P,V?0:Q,V?Q+1:$):Hi(P,V?Q+1:0,V?$:Q)}function ng(P,A){var F=P;return F instanceof Wt&&(F=F.value()),Eu(A,function(V,$){return $.func.apply($.thisArg,ds([V],$.args))},F)}function Ju(P,A,F){var V=P.length;if(V<2)return V?gs(P[0]):[];for(var $=-1,Q=st(V);++$<V;)for(var j=P[$],tt=-1;++tt<V;)tt!=$&&(Q[$]=Ma(Q[$]||j,P[tt],A,F));return gs(Ye(Q,1),A,F)}function sg(P,A,F){for(var V=-1,$=P.length,Q=A.length,j={};++V<$;){var tt=V<Q?A[V]:e;F(j,P[V],tt)}return j}function Qu(P){return Ee(P)?P:[]}function ju(P){return typeof P=="function"?P:fi}function ms(P,A){return Gt(P)?P:of(P,A)?[P]:Dg(_t(P))}var MM=Vt;function xs(P,A,F){var V=P.length;return F=F===e?V:F,!A&&F>=V?P:Hi(P,A,F)}var rg=dP||function(P){return Ne.clearTimeout(P)};function ag(P,A){if(A)return P.slice();var F=P.length,V=Op?Op(F):new P.constructor(F);return P.copy(V),V}function qu(P){var A=new P.constructor(P.byteLength);return new Ko(A).set(new Ko(P)),A}function AM(P,A){var F=A?qu(P.buffer):P.buffer;return new P.constructor(F,P.byteOffset,P.byteLength)}function OM(P){var A=new P.constructor(P.source,Xv.exec(P));return A.lastIndex=P.lastIndex,A}function RM(P){return Ea?re(Ea.call(P)):{}}function og(P,A){var F=A?qu(P.buffer):P.buffer;return new P.constructor(F,P.byteOffset,P.length)}function hg(P,A){if(P!==A){var F=P!==e,V=P===null,$=P===P,Q=wi(P),j=A!==e,tt=A===null,it=A===A,ht=wi(A);if(!tt&&!ht&&!Q&&P>A||Q&&j&&it&&!tt&&!ht||V&&j&&it||!F&&it||!$)return 1;if(!V&&!Q&&!ht&&P<A||ht&&F&&$&&!V&&!Q||tt&&F&&$||!j&&$||!it)return-1}return 0}function LM(P,A,F){for(var V=-1,$=P.criteria,Q=A.criteria,j=$.length,tt=F.length;++V<j;){var it=hg($[V],Q[V]);if(it){if(V>=tt)return it;var ht=F[V];return it*(ht=="desc"?-1:1)}}return P.index-A.index}function lg(P,A,F,V){for(var $=-1,Q=P.length,j=F.length,tt=-1,it=A.length,ht=Le(Q-j,0),lt=st(it+ht),ft=!V;++tt<it;)lt[tt]=A[tt];for(;++$<j;)(ft||$<Q)&&(lt[F[$]]=P[$]);for(;ht--;)lt[tt++]=P[$++];return lt}function ug(P,A,F,V){for(var $=-1,Q=P.length,j=-1,tt=F.length,it=-1,ht=A.length,lt=Le(Q-tt,0),ft=st(lt+ht),gt=!V;++$<lt;)ft[$]=P[$];for(var Mt=$;++it<ht;)ft[Mt+it]=A[it];for(;++j<tt;)(gt||$<Q)&&(ft[Mt+F[j]]=P[$++]);return ft}function hi(P,A){var F=-1,V=P.length;for(A||(A=st(V));++F<V;)A[F]=P[F];return A}function Pn(P,A,F,V){var $=!F;F||(F={});for(var Q=-1,j=A.length;++Q<j;){var tt=A[Q],it=V?V(F[tt],P[tt],tt,F,P):e;it===e&&(it=P[tt]),$?Zn(F,tt,it):Pa(F,tt,it)}return F}function wM(P,A){return Pn(P,af(P),A)}function FM(P,A){return Pn(P,Eg(P),A)}function hh(P,A){return function(F,V){var $=Gt(F)?GE:_P,Q=A?A():{};return $(F,P,wt(V,2),Q)}}function Lr(P){return Vt(function(A,F){var V=-1,$=F.length,Q=$>1?F[$-1]:e,j=$>2?F[2]:e;for(Q=P.length>3&&typeof Q=="function"?($--,Q):e,j&&ii(F[0],F[1],j)&&(Q=$<3?e:Q,$=1),A=re(A);++V<$;){var tt=F[V];tt&&P(A,tt,V,Q)}return A})}function fg(P,A){return function(F,V){if(F==null)return F;if(!li(F))return P(F,V);for(var $=F.length,Q=A?$:-1,j=re(F);(A?Q--:++Q<$)&&V(j[Q],Q,j)!==!1;);return F}}function dg(P){return function(A,F,V){for(var $=-1,Q=re(A),j=V(A),tt=j.length;tt--;){var it=j[P?tt:++$];if(F(Q[it],it,Q)===!1)break}return A}}function IM(P,A,F){var V=A&g,$=La(P);function Q(){var j=this&&this!==Ne&&this instanceof Q?$:P;return j.apply(V?F:this,arguments)}return Q}function cg(P){return function(A){A=_t(A);var F=Sr(A)?an(A):e,V=F?F[0]:A.charAt(0),$=F?xs(F,1).join(""):A.slice(1);return V[P]()+$}}function wr(P){return function(A){return Eu(f0(u0(A).replace(SE,"")),P,"")}}function La(P){return function(){var A=arguments;switch(A.length){case 0:return new P;case 1:return new P(A[0]);case 2:return new P(A[0],A[1]);case 3:return new P(A[0],A[1],A[2]);case 4:return new P(A[0],A[1],A[2],A[3]);case 5:return new P(A[0],A[1],A[2],A[3],A[4]);case 6:return new P(A[0],A[1],A[2],A[3],A[4],A[5]);case 7:return new P(A[0],A[1],A[2],A[3],A[4],A[5],A[6])}var F=Rr(P.prototype),V=P.apply(F,A);return ge(V)?V:F}}function DM(P,A,F){var V=La(P);function $(){for(var Q=arguments.length,j=st(Q),tt=Q,it=Fr($);tt--;)j[tt]=arguments[tt];var ht=Q<3&&j[0]!==it&&j[Q-1]!==it?[]:cs(j,it);if(Q-=ht.length,Q<F)return xg(P,A,lh,$.placeholder,e,j,ht,e,e,F-Q);var lt=this&&this!==Ne&&this instanceof $?V:P;return Oi(lt,this,j)}return $}function vg(P){return function(A,F,V){var $=re(A);if(!li(A)){var Q=wt(F,3);A=Be(A),F=function(tt){return Q($[tt],tt,$)}}var j=P(A,F,V);return j>-1?$[Q?A[j]:j]:e}}function pg(P){return Qn(function(A){var F=A.length,V=F,$=Wi.prototype.thru;for(P&&A.reverse();V--;){var Q=A[V];if(typeof Q!="function")throw new Ui(o);if($&&!j&&ch(Q)=="wrapper")var j=new Wi([],!0)}for(V=j?V:F;++V<F;){Q=A[V];var tt=ch(Q),it=tt=="wrapper"?sf(Q):e;it&&hf(it[0])&&it[1]==(E|y|C|M)&&!it[4].length&&it[9]==1?j=j[ch(it[0])].apply(j,it[3]):j=Q.length==1&&hf(Q)?j[tt]():j.thru(Q)}return function(){var ht=arguments,lt=ht[0];if(j&&ht.length==1&&Gt(lt))return j.plant(lt).value();for(var ft=0,gt=F?A[ft].apply(this,ht):lt;++ft<F;)gt=A[ft].call(this,gt);return gt}})}function lh(P,A,F,V,$,Q,j,tt,it,ht){var lt=A&E,ft=A&g,gt=A&m,Mt=A&(y|T),Ft=A&O,zt=gt?e:La(P);function It(){for(var Ut=arguments.length,$t=st(Ut),Fi=Ut;Fi--;)$t[Fi]=arguments[Fi];if(Mt)var ni=Fr(It),Ii=$E($t,ni);if(V&&($t=lg($t,V,$,Mt)),Q&&($t=ug($t,Q,j,Mt)),Ut-=Ii,Mt&&Ut<ht){var Pe=cs($t,ni);return xg(P,A,lh,It.placeholder,F,$t,Pe,tt,it,ht-Ut)}var ln=ft?F:this,ts=gt?ln[P]:P;return Ut=$t.length,tt?$t=_M($t,tt):Ft&&Ut>1&&$t.reverse(),lt&&it<Ut&&($t.length=it),this&&this!==Ne&&this instanceof It&&(ts=zt||La(ts)),ts.apply(ln,$t)}return It}function gg(P,A){return function(F,V){return oM(F,P,A(V),{})}}function uh(P,A){return function(F,V){var $;if(F===e&&V===e)return A;if(F!==e&&($=F),V!==e){if($===e)return V;typeof F=="string"||typeof V=="string"?(F=Li(F),V=Li(V)):(F=eg(F),V=eg(V)),$=P(F,V)}return $}}function _u(P){return Qn(function(A){return A=ce(A,Ri(wt())),Vt(function(F){var V=this;return P(A,function($){return Oi($,V,F)})})})}function fh(P,A){A=A===e?" ":Li(A);var F=A.length;if(F<2)return F?ku(A,P):A;var V=ku(A,jo(P/Er(A)));return Sr(A)?xs(an(V),0,P).join(""):V.slice(0,P)}function BM(P,A,F,V){var $=A&g,Q=La(P);function j(){for(var tt=-1,it=arguments.length,ht=-1,lt=V.length,ft=st(lt+it),gt=this&&this!==Ne&&this instanceof j?Q:P;++ht<lt;)ft[ht]=V[ht];for(;it--;)ft[ht++]=arguments[++tt];return Oi(gt,$?F:this,ft)}return j}function mg(P){return function(A,F,V){return V&&typeof V!="number"&&ii(A,F,V)&&(F=V=e),A=_n(A),F===e?(F=A,A=0):F=_n(F),V=V===e?A<F?1:-1:_n(V),yM(A,F,V,P)}}function dh(P){return function(A,F){return typeof A=="string"&&typeof F=="string"||(A=ki(A),F=ki(F)),P(A,F)}}function xg(P,A,F,V,$,Q,j,tt,it,ht){var lt=A&y,ft=lt?j:e,gt=lt?e:j,Mt=lt?Q:e,Ft=lt?e:Q;A|=lt?C:S,A&=~(lt?S:C),A&x||(A&=~(g|m));var zt=[P,A,$,Mt,ft,Ft,gt,tt,it,ht],It=F.apply(e,zt);return hf(P)&&wg(It,zt),It.placeholder=V,Fg(It,P,A)}function tf(P){var A=Re[P];return function(F,V){if(F=ki(F),V=V==null?0:ke(Yt(V),292),V&&Fp(F)){var $=(_t(F)+"e").split("e"),Q=A($[0]+"e"+(+$[1]+V));return $=(_t(Q)+"e").split("e"),+($[0]+"e"+(+$[1]-V))}return A(F)}}var bM=Ar&&1/Uo(new Ar([,-0]))[1]==X?function(P){return new Ar(P)}:Ef;function yg(P){return function(A){var F=Ke(A);return F==ut?wu(A):F==mt?qE(A):HE(A,P(A))}}function Jn(P,A,F,V,$,Q,j,tt){var it=A&m;if(!it&&typeof P!="function")throw new Ui(o);var ht=V?V.length:0;if(ht||(A&=~(C|S),V=$=e),j=j===e?j:Le(Yt(j),0),tt=tt===e?tt:Yt(tt),ht-=$?$.length:0,A&S){var lt=V,ft=$;V=$=e}var gt=it?e:sf(P),Mt=[P,A,F,V,$,lt,ft,Q,j,tt];if(gt&&QM(Mt,gt),P=Mt[0],A=Mt[1],F=Mt[2],V=Mt[3],$=Mt[4],tt=Mt[9]=Mt[9]===e?it?0:P.length:Le(Mt[9]-ht,0),!tt&&A&(y|T)&&(A&=~(y|T)),!A||A==g)var Ft=IM(P,A,F);else A==y||A==T?Ft=DM(P,A,tt):(A==C||A==(g|C))&&!$.length?Ft=BM(P,A,F,V):Ft=lh.apply(e,Mt);var zt=gt?_p:wg;return Fg(zt(Ft,Mt),P,A)}function Tg(P,A,F,V){return P===e||hn(P,Mr[F])&&!ee.call(V,F)?A:P}function Cg(P,A,F,V,$,Q){return ge(P)&&ge(A)&&(Q.set(A,P),rh(P,A,e,Cg,Q),Q.delete(A)),P}function GM(P){return Ia(P)?e:P}function Sg(P,A,F,V,$,Q){var j=F&c,tt=P.length,it=A.length;if(tt!=it&&!(j&&it>tt))return!1;var ht=Q.get(P),lt=Q.get(A);if(ht&&lt)return ht==A&&lt==P;var ft=-1,gt=!0,Mt=F&p?new Zs:e;for(Q.set(P,A),Q.set(A,P);++ft<tt;){var Ft=P[ft],zt=A[ft];if(V)var It=j?V(zt,Ft,ft,A,P,Q):V(Ft,zt,ft,P,A,Q);if(It!==e){if(It)continue;gt=!1;break}if(Mt){if(!Pu(A,function(Ut,$t){if(!xa(Mt,$t)&&(Ft===Ut||$(Ft,Ut,F,V,Q)))return Mt.push($t)})){gt=!1;break}}else if(!(Ft===zt||$(Ft,zt,F,V,Q))){gt=!1;break}}return Q.delete(P),Q.delete(A),gt}function NM(P,A,F,V,$,Q,j){switch(F){case ne:if(P.byteLength!=A.byteLength||P.byteOffset!=A.byteOffset)return!1;P=P.buffer,A=A.buffer;case oe:return!(P.byteLength!=A.byteLength||!Q(new Ko(P),new Ko(A)));case q:case _:case pt:return hn(+P,+A);case rt:return P.name==A.name&&P.message==A.message;case Bt:case Ot:return P==A+"";case ut:var tt=wu;case mt:var it=V&c;if(tt||(tt=Uo),P.size!=A.size&&!it)return!1;var ht=j.get(P);if(ht)return ht==A;V|=p,j.set(P,A);var lt=Sg(tt(P),tt(A),V,$,Q,j);return j.delete(P),lt;case Oe:if(Ea)return Ea.call(P)==Ea.call(A)}return!1}function YM(P,A,F,V,$,Q){var j=F&c,tt=ef(P),it=tt.length,ht=ef(A),lt=ht.length;if(it!=lt&&!j)return!1;for(var ft=it;ft--;){var gt=tt[ft];if(!(j?gt in A:ee.call(A,gt)))return!1}var Mt=Q.get(P),Ft=Q.get(A);if(Mt&&Ft)return Mt==A&&Ft==P;var zt=!0;Q.set(P,A),Q.set(A,P);for(var It=j;++ft<it;){gt=tt[ft];var Ut=P[gt],$t=A[gt];if(V)var Fi=j?V($t,Ut,gt,A,P,Q):V(Ut,$t,gt,P,A,Q);if(!(Fi===e?Ut===$t||$(Ut,$t,F,V,Q):Fi)){zt=!1;break}It||(It=gt=="constructor")}if(zt&&!It){var ni=P.constructor,Ii=A.constructor;ni!=Ii&&"constructor"in P&&"constructor"in A&&!(typeof ni=="function"&&ni instanceof ni&&typeof Ii=="function"&&Ii instanceof Ii)&&(zt=!1)}return Q.delete(P),Q.delete(A),zt}function Qn(P){return uf(Rg(P,e,Ng),P+"")}function ef(P){return Wp(P,Be,af)}function nf(P){return Wp(P,ui,Eg)}var sf=_o?function(P){return _o.get(P)}:Ef;function ch(P){for(var A=P.name+"",F=Or[A],V=ee.call(Or,A)?F.length:0;V--;){var $=F[V],Q=$.func;if(Q==null||Q==P)return $.name}return A}function Fr(P){var A=ee.call(J,"placeholder")?J:P;return A.placeholder}function wt(){var P=J.iteratee||Cf;return P=P===Cf?$p:P,arguments.length?P(arguments[0],arguments[1]):P}function vh(P,A){var F=P.__data__;return kM(A)?F[typeof A=="string"?"string":"hash"]:F.map}function rf(P){for(var A=Be(P),F=A.length;F--;){var V=A[F],$=P[V];A[F]=[V,$,Ag($)]}return A}function js(P,A){var F=JE(P,A);return Hp(F)?F:e}function zM(P){var A=ee.call(P,ks),F=P[ks];try{P[ks]=e;var V=!0}catch{}var $=$o.call(P);return V&&(A?P[ks]=F:delete P[ks]),$}var af=Iu?function(P){return P==null?[]:(P=re(P),fs(Iu(P),function(A){return Lp.call(P,A)}))}:Pf,Eg=Iu?function(P){for(var A=[];P;)ds(A,af(P)),P=Zo(P);return A}:Pf,Ke=ei;(Du&&Ke(new Du(new ArrayBuffer(1)))!=ne||Ta&&Ke(new Ta)!=ut||Bu&&Ke(Bu.resolve())!=Et||Ar&&Ke(new Ar)!=mt||Ca&&Ke(new Ca)!=Qt)&&(Ke=function(P){var A=ei(P),F=A==St?P.constructor:e,V=F?qs(F):"";if(V)switch(V){case CP:return ne;case SP:return ut;case EP:return Et;case PP:return mt;case MP:return Qt}return A});function VM(P,A,F){for(var V=-1,$=F.length;++V<$;){var Q=F[V],j=Q.size;switch(Q.type){case"drop":P+=j;break;case"dropRight":A-=j;break;case"take":A=ke(A,P+j);break;case"takeRight":P=Le(P,A-j);break}}return{start:P,end:A}}function UM(P){var A=P.match(KS);return A?A[1].split(ZS):[]}function Pg(P,A,F){A=ms(A,P);for(var V=-1,$=A.length,Q=!1;++V<$;){var j=Mn(A[V]);if(!(Q=P!=null&&F(P,j)))break;P=P[j]}return Q||++V!=$?Q:($=P==null?0:P.length,!!$&&Ch($)&&jn(j,$)&&(Gt(P)||_s(P)))}function WM(P){var A=P.length,F=new P.constructor(A);return A&&typeof P[0]=="string"&&ee.call(P,"index")&&(F.index=P.index,F.input=P.input),F}function Mg(P){return typeof P.constructor=="function"&&!wa(P)?Rr(Zo(P)):{}}function XM(P,A,F){var V=P.constructor;switch(A){case oe:return qu(P);case q:case _:return new V(+P);case ne:return AM(P,F);case he:case De:case Ci:case Si:case Ei:case Pi:case Mi:case Ai:case ma:return og(P,F);case ut:return new V;case pt:case Ot:return new V(P);case Bt:return OM(P);case mt:return new V;case Oe:return RM(P)}}function HM(P,A){var F=A.length;if(!F)return P;var V=F-1;return A[V]=(F>1?"& ":"")+A[V],A=A.join(F>2?", ":" "),P.replace(kS,`{
/* [wrapped with `+A+`] */
`)}function $M(P){return Gt(P)||_s(P)||!!(wp&&P&&P[wp])}function jn(P,A){var F=typeof P;return A=A==null?k:A,!!A&&(F=="number"||F!="symbol"&&nE.test(P))&&P>-1&&P%1==0&&P<A}function ii(P,A,F){if(!ge(F))return!1;var V=typeof A;return(V=="number"?li(F)&&jn(A,F.length):V=="string"&&A in F)?hn(F[A],P):!1}function of(P,A){if(Gt(P))return!1;var F=typeof P;return F=="number"||F=="symbol"||F=="boolean"||P==null||wi(P)?!0:WS.test(P)||!US.test(P)||A!=null&&P in re(A)}function kM(P){var A=typeof P;return A=="string"||A=="number"||A=="symbol"||A=="boolean"?P!=="__proto__":P===null}function hf(P){var A=ch(P),F=J[A];if(typeof F!="function"||!(A in Wt.prototype))return!1;if(P===F)return!0;var V=sf(F);return!!V&&P===V[0]}function KM(P){return!!Ap&&Ap in P}var ZM=Xo?qn:Mf;function wa(P){var A=P&&P.constructor,F=typeof A=="function"&&A.prototype||Mr;return P===F}function Ag(P){return P===P&&!ge(P)}function Og(P,A){return function(F){return F==null?!1:F[P]===A&&(A!==e||P in re(F))}}function JM(P){var A=yh(P,function(V){return F.size===l&&F.clear(),V}),F=A.cache;return A}function QM(P,A){var F=P[1],V=A[1],$=F|V,Q=$<(g|m|E),j=V==E&&F==y||V==E&&F==M&&P[7].length<=A[8]||V==(E|M)&&A[7].length<=A[8]&&F==y;if(!(Q||j))return P;V&g&&(P[2]=A[2],$|=F&g?0:x);var tt=A[3];if(tt){var it=P[3];P[3]=it?lg(it,tt,A[4]):tt,P[4]=it?cs(P[3],h):A[4]}return tt=A[5],tt&&(it=P[5],P[5]=it?ug(it,tt,A[6]):tt,P[6]=it?cs(P[5],h):A[6]),tt=A[7],tt&&(P[7]=tt),V&E&&(P[8]=P[8]==null?A[8]:ke(P[8],A[8])),P[9]==null&&(P[9]=A[9]),P[0]=A[0],P[1]=$,P}function jM(P){var A=[];if(P!=null)for(var F in re(P))A.push(F);return A}function qM(P){return $o.call(P)}function Rg(P,A,F){return A=Le(A===e?P.length-1:A,0),function(){for(var V=arguments,$=-1,Q=Le(V.length-A,0),j=st(Q);++$<Q;)j[$]=V[A+$];$=-1;for(var tt=st(A+1);++$<A;)tt[$]=V[$];return tt[A]=F(j),Oi(P,this,tt)}}function Lg(P,A){return A.length<2?P:Qs(P,Hi(A,0,-1))}function _M(P,A){for(var F=P.length,V=ke(A.length,F),$=hi(P);V--;){var Q=A[V];P[V]=jn(Q,F)?$[Q]:e}return P}function lf(P,A){if(!(A==="constructor"&&typeof P[A]=="function")&&A!="__proto__")return P[A]}var wg=Ig(_p),Fa=vP||function(P,A){return Ne.setTimeout(P,A)},uf=Ig(SM);function Fg(P,A,F){var V=A+"";return uf(P,HM(V,tA(UM(V),F)))}function Ig(P){var A=0,F=0;return function(){var V=xP(),$=D-(V-F);if(F=V,$>0){if(++A>=w)return arguments[0]}else A=0;return P.apply(e,arguments)}}function ph(P,A){var F=-1,V=P.length,$=V-1;for(A=A===e?V:A;++F<A;){var Q=$u(F,$),j=P[Q];P[Q]=P[F],P[F]=j}return P.length=A,P}var Dg=JM(function(P){var A=[];return P.charCodeAt(0)===46&&A.push(""),P.replace(XS,function(F,V,$,Q){A.push($?Q.replace(jS,"$1"):V||F)}),A});function Mn(P){if(typeof P=="string"||wi(P))return P;var A=P+"";return A=="0"&&1/P==-X?"-0":A}function qs(P){if(P!=null){try{return Ho.call(P)}catch{}try{return P+""}catch{}}return""}function tA(P,A){return Vi(U,function(F){var V="_."+F[0];A&F[1]&&!zo(P,V)&&P.push(V)}),P.sort()}function Bg(P){if(P instanceof Wt)return P.clone();var A=new Wi(P.__wrapped__,P.__chain__);return A.__actions__=hi(P.__actions__),A.__index__=P.__index__,A.__values__=P.__values__,A}function eA(P,A,F){(F?ii(P,A,F):A===e)?A=1:A=Le(Yt(A),0);var V=P==null?0:P.length;if(!V||A<1)return[];for(var $=0,Q=0,j=st(jo(V/A));$<V;)j[Q++]=Hi(P,$,$+=A);return j}function iA(P){for(var A=-1,F=P==null?0:P.length,V=0,$=[];++A<F;){var Q=P[A];Q&&($[V++]=Q)}return $}function nA(){var P=arguments.length;if(!P)return[];for(var A=st(P-1),F=arguments[0],V=P;V--;)A[V-1]=arguments[V];return ds(Gt(F)?hi(F):[F],Ye(A,1))}var sA=Vt(function(P,A){return Ee(P)?Ma(P,Ye(A,1,Ee,!0)):[]}),rA=Vt(function(P,A){var F=$i(A);return Ee(F)&&(F=e),Ee(P)?Ma(P,Ye(A,1,Ee,!0),wt(F,2)):[]}),aA=Vt(function(P,A){var F=$i(A);return Ee(F)&&(F=e),Ee(P)?Ma(P,Ye(A,1,Ee,!0),e,F):[]});function oA(P,A,F){var V=P==null?0:P.length;return V?(A=F||A===e?1:Yt(A),Hi(P,A<0?0:A,V)):[]}function hA(P,A,F){var V=P==null?0:P.length;return V?(A=F||A===e?1:Yt(A),A=V-A,Hi(P,0,A<0?0:A)):[]}function lA(P,A){return P&&P.length?oh(P,wt(A,3),!0,!0):[]}function uA(P,A){return P&&P.length?oh(P,wt(A,3),!0):[]}function fA(P,A,F,V){var $=P==null?0:P.length;return $?(F&&typeof F!="number"&&ii(P,A,F)&&(F=0,V=$),nM(P,A,F,V)):[]}function bg(P,A,F){var V=P==null?0:P.length;if(!V)return-1;var $=F==null?0:Yt(F);return $<0&&($=Le(V+$,0)),Vo(P,wt(A,3),$)}function Gg(P,A,F){var V=P==null?0:P.length;if(!V)return-1;var $=V-1;return F!==e&&($=Yt(F),$=F<0?Le(V+$,0):ke($,V-1)),Vo(P,wt(A,3),$,!0)}function Ng(P){var A=P==null?0:P.length;return A?Ye(P,1):[]}function dA(P){var A=P==null?0:P.length;return A?Ye(P,X):[]}function cA(P,A){var F=P==null?0:P.length;return F?(A=A===e?1:Yt(A),Ye(P,A)):[]}function vA(P){for(var A=-1,F=P==null?0:P.length,V={};++A<F;){var $=P[A];V[$[0]]=$[1]}return V}function Yg(P){return P&&P.length?P[0]:e}function pA(P,A,F){var V=P==null?0:P.length;if(!V)return-1;var $=F==null?0:Yt(F);return $<0&&($=Le(V+$,0)),Cr(P,A,$)}function gA(P){var A=P==null?0:P.length;return A?Hi(P,0,-1):[]}var mA=Vt(function(P){var A=ce(P,Qu);return A.length&&A[0]===P[0]?Vu(A):[]}),xA=Vt(function(P){var A=$i(P),F=ce(P,Qu);return A===$i(F)?A=e:F.pop(),F.length&&F[0]===P[0]?Vu(F,wt(A,2)):[]}),yA=Vt(function(P){var A=$i(P),F=ce(P,Qu);return A=typeof A=="function"?A:e,A&&F.pop(),F.length&&F[0]===P[0]?Vu(F,e,A):[]});function TA(P,A){return P==null?"":gP.call(P,A)}function $i(P){var A=P==null?0:P.length;return A?P[A-1]:e}function CA(P,A,F){var V=P==null?0:P.length;if(!V)return-1;var $=V;return F!==e&&($=Yt(F),$=$<0?Le(V+$,0):ke($,V-1)),A===A?tP(P,A,$):Vo(P,xp,$,!0)}function SA(P,A){return P&&P.length?Jp(P,Yt(A)):e}var EA=Vt(zg);function zg(P,A){return P&&P.length&&A&&A.length?Hu(P,A):P}function PA(P,A,F){return P&&P.length&&A&&A.length?Hu(P,A,wt(F,2)):P}function MA(P,A,F){return P&&P.length&&A&&A.length?Hu(P,A,e,F):P}var AA=Qn(function(P,A){var F=P==null?0:P.length,V=Gu(P,A);return qp(P,ce(A,function($){return jn($,F)?+$:$}).sort(hg)),V});function OA(P,A){var F=[];if(!(P&&P.length))return F;var V=-1,$=[],Q=P.length;for(A=wt(A,3);++V<Q;){var j=P[V];A(j,V,P)&&(F.push(j),$.push(V))}return qp(P,$),F}function ff(P){return P==null?P:TP.call(P)}function RA(P,A,F){var V=P==null?0:P.length;return V?(F&&typeof F!="number"&&ii(P,A,F)?(A=0,F=V):(A=A==null?0:Yt(A),F=F===e?V:Yt(F)),Hi(P,A,F)):[]}function LA(P,A){return ah(P,A)}function wA(P,A,F){return Ku(P,A,wt(F,2))}function FA(P,A){var F=P==null?0:P.length;if(F){var V=ah(P,A);if(V<F&&hn(P[V],A))return V}return-1}function IA(P,A){return ah(P,A,!0)}function DA(P,A,F){return Ku(P,A,wt(F,2),!0)}function BA(P,A){var F=P==null?0:P.length;if(F){var V=ah(P,A,!0)-1;if(hn(P[V],A))return V}return-1}function bA(P){return P&&P.length?tg(P):[]}function GA(P,A){return P&&P.length?tg(P,wt(A,2)):[]}function NA(P){var A=P==null?0:P.length;return A?Hi(P,1,A):[]}function YA(P,A,F){return P&&P.length?(A=F||A===e?1:Yt(A),Hi(P,0,A<0?0:A)):[]}function zA(P,A,F){var V=P==null?0:P.length;return V?(A=F||A===e?1:Yt(A),A=V-A,Hi(P,A<0?0:A,V)):[]}function VA(P,A){return P&&P.length?oh(P,wt(A,3),!1,!0):[]}function UA(P,A){return P&&P.length?oh(P,wt(A,3)):[]}var WA=Vt(function(P){return gs(Ye(P,1,Ee,!0))}),XA=Vt(function(P){var A=$i(P);return Ee(A)&&(A=e),gs(Ye(P,1,Ee,!0),wt(A,2))}),HA=Vt(function(P){var A=$i(P);return A=typeof A=="function"?A:e,gs(Ye(P,1,Ee,!0),e,A)});function $A(P){return P&&P.length?gs(P):[]}function kA(P,A){return P&&P.length?gs(P,wt(A,2)):[]}function KA(P,A){return A=typeof A=="function"?A:e,P&&P.length?gs(P,e,A):[]}function df(P){if(!(P&&P.length))return[];var A=0;return P=fs(P,function(F){if(Ee(F))return A=Le(F.length,A),!0}),Ru(A,function(F){return ce(P,Mu(F))})}function Vg(P,A){if(!(P&&P.length))return[];var F=df(P);return A==null?F:ce(F,function(V){return Oi(A,e,V)})}var ZA=Vt(function(P,A){return Ee(P)?Ma(P,A):[]}),JA=Vt(function(P){return Ju(fs(P,Ee))}),QA=Vt(function(P){var A=$i(P);return Ee(A)&&(A=e),Ju(fs(P,Ee),wt(A,2))}),jA=Vt(function(P){var A=$i(P);return A=typeof A=="function"?A:e,Ju(fs(P,Ee),e,A)}),qA=Vt(df);function _A(P,A){return sg(P||[],A||[],Pa)}function t2(P,A){return sg(P||[],A||[],Ra)}var e2=Vt(function(P){var A=P.length,F=A>1?P[A-1]:e;return F=typeof F=="function"?(P.pop(),F):e,Vg(P,F)});function Ug(P){var A=J(P);return A.__chain__=!0,A}function i2(P,A){return A(P),P}function gh(P,A){return A(P)}var n2=Qn(function(P){var A=P.length,F=A?P[0]:0,V=this.__wrapped__,$=function(Q){return Gu(Q,P)};return A>1||this.__actions__.length||!(V instanceof Wt)||!jn(F)?this.thru($):(V=V.slice(F,+F+(A?1:0)),V.__actions__.push({func:gh,args:[$],thisArg:e}),new Wi(V,this.__chain__).thru(function(Q){return A&&!Q.length&&Q.push(e),Q}))});function s2(){return Ug(this)}function r2(){return new Wi(this.value(),this.__chain__)}function a2(){this.__values__===e&&(this.__values__=e0(this.value()));var P=this.__index__>=this.__values__.length,A=P?e:this.__values__[this.__index__++];return{done:P,value:A}}function o2(){return this}function h2(P){for(var A,F=this;F instanceof eh;){var V=Bg(F);V.__index__=0,V.__values__=e,A?$.__wrapped__=V:A=V;var $=V;F=F.__wrapped__}return $.__wrapped__=P,A}function l2(){var P=this.__wrapped__;if(P instanceof Wt){var A=P;return this.__actions__.length&&(A=new Wt(this)),A=A.reverse(),A.__actions__.push({func:gh,args:[ff],thisArg:e}),new Wi(A,this.__chain__)}return this.thru(ff)}function u2(){return ng(this.__wrapped__,this.__actions__)}var f2=hh(function(P,A,F){ee.call(P,F)?++P[F]:Zn(P,F,1)});function d2(P,A,F){var V=Gt(P)?gp:iM;return F&&ii(P,A,F)&&(A=e),V(P,wt(A,3))}function c2(P,A){var F=Gt(P)?fs:Vp;return F(P,wt(A,3))}var v2=vg(bg),p2=vg(Gg);function g2(P,A){return Ye(mh(P,A),1)}function m2(P,A){return Ye(mh(P,A),X)}function x2(P,A,F){return F=F===e?1:Yt(F),Ye(mh(P,A),F)}function Wg(P,A){var F=Gt(P)?Vi:ps;return F(P,wt(A,3))}function Xg(P,A){var F=Gt(P)?NE:zp;return F(P,wt(A,3))}var y2=hh(function(P,A,F){ee.call(P,F)?P[F].push(A):Zn(P,F,[A])});function T2(P,A,F,V){P=li(P)?P:Dr(P),F=F&&!V?Yt(F):0;var $=P.length;return F<0&&(F=Le($+F,0)),Sh(P)?F<=$&&P.indexOf(A,F)>-1:!!$&&Cr(P,A,F)>-1}var C2=Vt(function(P,A,F){var V=-1,$=typeof A=="function",Q=li(P)?st(P.length):[];return ps(P,function(j){Q[++V]=$?Oi(A,j,F):Aa(j,A,F)}),Q}),S2=hh(function(P,A,F){Zn(P,F,A)});function mh(P,A){var F=Gt(P)?ce:kp;return F(P,wt(A,3))}function E2(P,A,F,V){return P==null?[]:(Gt(A)||(A=A==null?[]:[A]),F=V?e:F,Gt(F)||(F=F==null?[]:[F]),Qp(P,A,F))}var P2=hh(function(P,A,F){P[F?0:1].push(A)},function(){return[[],[]]});function M2(P,A,F){var V=Gt(P)?Eu:Tp,$=arguments.length<3;return V(P,wt(A,4),F,$,ps)}function A2(P,A,F){var V=Gt(P)?YE:Tp,$=arguments.length<3;return V(P,wt(A,4),F,$,zp)}function O2(P,A){var F=Gt(P)?fs:Vp;return F(P,Th(wt(A,3)))}function R2(P){var A=Gt(P)?bp:TM;return A(P)}function L2(P,A,F){(F?ii(P,A,F):A===e)?A=1:A=Yt(A);var V=Gt(P)?jP:CM;return V(P,A)}function w2(P){var A=Gt(P)?qP:EM;return A(P)}function F2(P){if(P==null)return 0;if(li(P))return Sh(P)?Er(P):P.length;var A=Ke(P);return A==ut||A==mt?P.size:Wu(P).length}function I2(P,A,F){var V=Gt(P)?Pu:PM;return F&&ii(P,A,F)&&(A=e),V(P,wt(A,3))}var D2=Vt(function(P,A){if(P==null)return[];var F=A.length;return F>1&&ii(P,A[0],A[1])?A=[]:F>2&&ii(A[0],A[1],A[2])&&(A=[A[0]]),Qp(P,Ye(A,1),[])}),xh=cP||function(){return Ne.Date.now()};function B2(P,A){if(typeof A!="function")throw new Ui(o);return P=Yt(P),function(){if(--P<1)return A.apply(this,arguments)}}function Hg(P,A,F){return A=F?e:A,A=P&&A==null?P.length:A,Jn(P,E,e,e,e,e,A)}function $g(P,A){var F;if(typeof A!="function")throw new Ui(o);return P=Yt(P),function(){return--P>0&&(F=A.apply(this,arguments)),P<=1&&(A=e),F}}var cf=Vt(function(P,A,F){var V=g;if(F.length){var $=cs(F,Fr(cf));V|=C}return Jn(P,V,A,F,$)}),kg=Vt(function(P,A,F){var V=g|m;if(F.length){var $=cs(F,Fr(kg));V|=C}return Jn(A,V,P,F,$)});function Kg(P,A,F){A=F?e:A;var V=Jn(P,y,e,e,e,e,e,A);return V.placeholder=Kg.placeholder,V}function Zg(P,A,F){A=F?e:A;var V=Jn(P,T,e,e,e,e,e,A);return V.placeholder=Zg.placeholder,V}function Jg(P,A,F){var V,$,Q,j,tt,it,ht=0,lt=!1,ft=!1,gt=!0;if(typeof P!="function")throw new Ui(o);A=ki(A)||0,ge(F)&&(lt=!!F.leading,ft="maxWait"in F,Q=ft?Le(ki(F.maxWait)||0,A):Q,gt="trailing"in F?!!F.trailing:gt);function Mt(Pe){var ln=V,ts=$;return V=$=e,ht=Pe,j=P.apply(ts,ln),j}function Ft(Pe){return ht=Pe,tt=Fa(Ut,A),lt?Mt(Pe):j}function zt(Pe){var ln=Pe-it,ts=Pe-ht,v0=A-ln;return ft?ke(v0,Q-ts):v0}function It(Pe){var ln=Pe-it,ts=Pe-ht;return it===e||ln>=A||ln<0||ft&&ts>=Q}function Ut(){var Pe=xh();if(It(Pe))return $t(Pe);tt=Fa(Ut,zt(Pe))}function $t(Pe){return tt=e,gt&&V?Mt(Pe):(V=$=e,j)}function Fi(){tt!==e&&rg(tt),ht=0,V=it=$=tt=e}function ni(){return tt===e?j:$t(xh())}function Ii(){var Pe=xh(),ln=It(Pe);if(V=arguments,$=this,it=Pe,ln){if(tt===e)return Ft(it);if(ft)return rg(tt),tt=Fa(Ut,A),Mt(it)}return tt===e&&(tt=Fa(Ut,A)),j}return Ii.cancel=Fi,Ii.flush=ni,Ii}var b2=Vt(function(P,A){return Yp(P,1,A)}),G2=Vt(function(P,A,F){return Yp(P,ki(A)||0,F)});function N2(P){return Jn(P,O)}function yh(P,A){if(typeof P!="function"||A!=null&&typeof A!="function")throw new Ui(o);var F=function(){var V=arguments,$=A?A.apply(this,V):V[0],Q=F.cache;if(Q.has($))return Q.get($);var j=P.apply(this,V);return F.cache=Q.set($,j)||Q,j};return F.cache=new(yh.Cache||Kn),F}yh.Cache=Kn;function Th(P){if(typeof P!="function")throw new Ui(o);return function(){var A=arguments;switch(A.length){case 0:return!P.call(this);case 1:return!P.call(this,A[0]);case 2:return!P.call(this,A[0],A[1]);case 3:return!P.call(this,A[0],A[1],A[2])}return!P.apply(this,A)}}function Y2(P){return $g(2,P)}var z2=MM(function(P,A){A=A.length==1&&Gt(A[0])?ce(A[0],Ri(wt())):ce(Ye(A,1),Ri(wt()));var F=A.length;return Vt(function(V){for(var $=-1,Q=ke(V.length,F);++$<Q;)V[$]=A[$].call(this,V[$]);return Oi(P,this,V)})}),vf=Vt(function(P,A){var F=cs(A,Fr(vf));return Jn(P,C,e,A,F)}),Qg=Vt(function(P,A){var F=cs(A,Fr(Qg));return Jn(P,S,e,A,F)}),V2=Qn(function(P,A){return Jn(P,M,e,e,e,A)});function U2(P,A){if(typeof P!="function")throw new Ui(o);return A=A===e?A:Yt(A),Vt(P,A)}function W2(P,A){if(typeof P!="function")throw new Ui(o);return A=A==null?0:Le(Yt(A),0),Vt(function(F){var V=F[A],$=xs(F,0,A);return V&&ds($,V),Oi(P,this,$)})}function X2(P,A,F){var V=!0,$=!0;if(typeof P!="function")throw new Ui(o);return ge(F)&&(V="leading"in F?!!F.leading:V,$="trailing"in F?!!F.trailing:$),Jg(P,A,{leading:V,maxWait:A,trailing:$})}function H2(P){return Hg(P,1)}function $2(P,A){return vf(ju(A),P)}function k2(){if(!arguments.length)return[];var P=arguments[0];return Gt(P)?P:[P]}function K2(P){return Xi(P,d)}function Z2(P,A){return A=typeof A=="function"?A:e,Xi(P,d,A)}function J2(P){return Xi(P,u|d)}function Q2(P,A){return A=typeof A=="function"?A:e,Xi(P,u|d,A)}function j2(P,A){return A==null||Np(P,A,Be(A))}function hn(P,A){return P===A||P!==P&&A!==A}var q2=dh(zu),_2=dh(function(P,A){return P>=A}),_s=Xp(function(){return arguments}())?Xp:function(P){return ye(P)&&ee.call(P,"callee")&&!Lp.call(P,"callee")},Gt=st.isArray,tO=up?Ri(up):hM;function li(P){return P!=null&&Ch(P.length)&&!qn(P)}function Ee(P){return ye(P)&&li(P)}function eO(P){return P===!0||P===!1||ye(P)&&ei(P)==q}var ys=pP||Mf,iO=fp?Ri(fp):lM;function nO(P){return ye(P)&&P.nodeType===1&&!Ia(P)}function sO(P){if(P==null)return!0;if(li(P)&&(Gt(P)||typeof P=="string"||typeof P.splice=="function"||ys(P)||Ir(P)||_s(P)))return!P.length;var A=Ke(P);if(A==ut||A==mt)return!P.size;if(wa(P))return!Wu(P).length;for(var F in P)if(ee.call(P,F))return!1;return!0}function rO(P,A){return Oa(P,A)}function aO(P,A,F){F=typeof F=="function"?F:e;var V=F?F(P,A):e;return V===e?Oa(P,A,e,F):!!V}function pf(P){if(!ye(P))return!1;var A=ei(P);return A==rt||A==nt||typeof P.message=="string"&&typeof P.name=="string"&&!Ia(P)}function oO(P){return typeof P=="number"&&Fp(P)}function qn(P){if(!ge(P))return!1;var A=ei(P);return A==at||A==ct||A==Z||A==dt}function jg(P){return typeof P=="number"&&P==Yt(P)}function Ch(P){return typeof P=="number"&&P>-1&&P%1==0&&P<=k}function ge(P){var A=typeof P;return P!=null&&(A=="object"||A=="function")}function ye(P){return P!=null&&typeof P=="object"}var qg=dp?Ri(dp):fM;function hO(P,A){return P===A||Uu(P,A,rf(A))}function lO(P,A,F){return F=typeof F=="function"?F:e,Uu(P,A,rf(A),F)}function uO(P){return _g(P)&&P!=+P}function fO(P){if(ZM(P))throw new bt(n);return Hp(P)}function dO(P){return P===null}function cO(P){return P==null}function _g(P){return typeof P=="number"||ye(P)&&ei(P)==pt}function Ia(P){if(!ye(P)||ei(P)!=St)return!1;var A=Zo(P);if(A===null)return!0;var F=ee.call(A,"constructor")&&A.constructor;return typeof F=="function"&&F instanceof F&&Ho.call(F)==lP}var gf=cp?Ri(cp):dM;function vO(P){return jg(P)&&P>=-k&&P<=k}var t0=vp?Ri(vp):cM;function Sh(P){return typeof P=="string"||!Gt(P)&&ye(P)&&ei(P)==Ot}function wi(P){return typeof P=="symbol"||ye(P)&&ei(P)==Oe}var Ir=pp?Ri(pp):vM;function pO(P){return P===e}function gO(P){return ye(P)&&Ke(P)==Qt}function mO(P){return ye(P)&&ei(P)==Ht}var xO=dh(Xu),yO=dh(function(P,A){return P<=A});function e0(P){if(!P)return[];if(li(P))return Sh(P)?an(P):hi(P);if(ya&&P[ya])return jE(P[ya]());var A=Ke(P),F=A==ut?wu:A==mt?Uo:Dr;return F(P)}function _n(P){if(!P)return P===0?P:0;if(P=ki(P),P===X||P===-X){var A=P<0?-1:1;return A*K}return P===P?P:0}function Yt(P){var A=_n(P),F=A%1;return A===A?F?A-F:A:0}function i0(P){return P?Js(Yt(P),0,I):0}function ki(P){if(typeof P=="number")return P;if(wi(P))return b;if(ge(P)){var A=typeof P.valueOf=="function"?P.valueOf():P;P=ge(A)?A+"":A}if(typeof P!="string")return P===0?P:+P;P=Cp(P);var F=tE.test(P);return F||iE.test(P)?BE(P.slice(2),F?2:8):_S.test(P)?b:+P}function n0(P){return Pn(P,ui(P))}function TO(P){return P?Js(Yt(P),-k,k):P===0?P:0}function _t(P){return P==null?"":Li(P)}var CO=Lr(function(P,A){if(wa(A)||li(A)){Pn(A,Be(A),P);return}for(var F in A)ee.call(A,F)&&Pa(P,F,A[F])}),s0=Lr(function(P,A){Pn(A,ui(A),P)}),Eh=Lr(function(P,A,F,V){Pn(A,ui(A),P,V)}),SO=Lr(function(P,A,F,V){Pn(A,Be(A),P,V)}),EO=Qn(Gu);function PO(P,A){var F=Rr(P);return A==null?F:Gp(F,A)}var MO=Vt(function(P,A){P=re(P);var F=-1,V=A.length,$=V>2?A[2]:e;for($&&ii(A[0],A[1],$)&&(V=1);++F<V;)for(var Q=A[F],j=ui(Q),tt=-1,it=j.length;++tt<it;){var ht=j[tt],lt=P[ht];(lt===e||hn(lt,Mr[ht])&&!ee.call(P,ht))&&(P[ht]=Q[ht])}return P}),AO=Vt(function(P){return P.push(e,Cg),Oi(r0,e,P)});function OO(P,A){return mp(P,wt(A,3),En)}function RO(P,A){return mp(P,wt(A,3),Yu)}function LO(P,A){return P==null?P:Nu(P,wt(A,3),ui)}function wO(P,A){return P==null?P:Up(P,wt(A,3),ui)}function FO(P,A){return P&&En(P,wt(A,3))}function IO(P,A){return P&&Yu(P,wt(A,3))}function DO(P){return P==null?[]:sh(P,Be(P))}function BO(P){return P==null?[]:sh(P,ui(P))}function mf(P,A,F){var V=P==null?e:Qs(P,A);return V===e?F:V}function bO(P,A){return P!=null&&Pg(P,A,sM)}function xf(P,A){return P!=null&&Pg(P,A,rM)}var GO=gg(function(P,A,F){A!=null&&typeof A.toString!="function"&&(A=$o.call(A)),P[A]=F},Tf(fi)),NO=gg(function(P,A,F){A!=null&&typeof A.toString!="function"&&(A=$o.call(A)),ee.call(P,A)?P[A].push(F):P[A]=[F]},wt),YO=Vt(Aa);function Be(P){return li(P)?Bp(P):Wu(P)}function ui(P){return li(P)?Bp(P,!0):pM(P)}function zO(P,A){var F={};return A=wt(A,3),En(P,function(V,$,Q){Zn(F,A(V,$,Q),V)}),F}function VO(P,A){var F={};return A=wt(A,3),En(P,function(V,$,Q){Zn(F,$,A(V,$,Q))}),F}var UO=Lr(function(P,A,F){rh(P,A,F)}),r0=Lr(function(P,A,F,V){rh(P,A,F,V)}),WO=Qn(function(P,A){var F={};if(P==null)return F;var V=!1;A=ce(A,function(Q){return Q=ms(Q,P),V||(V=Q.length>1),Q}),Pn(P,nf(P),F),V&&(F=Xi(F,u|v|d,GM));for(var $=A.length;$--;)Zu(F,A[$]);return F});function XO(P,A){return a0(P,Th(wt(A)))}var HO=Qn(function(P,A){return P==null?{}:mM(P,A)});function a0(P,A){if(P==null)return{};var F=ce(nf(P),function(V){return[V]});return A=wt(A),jp(P,F,function(V,$){return A(V,$[0])})}function $O(P,A,F){A=ms(A,P);var V=-1,$=A.length;for($||($=1,P=e);++V<$;){var Q=P==null?e:P[Mn(A[V])];Q===e&&(V=$,Q=F),P=qn(Q)?Q.call(P):Q}return P}function kO(P,A,F){return P==null?P:Ra(P,A,F)}function KO(P,A,F,V){return V=typeof V=="function"?V:e,P==null?P:Ra(P,A,F,V)}var o0=yg(Be),h0=yg(ui);function ZO(P,A,F){var V=Gt(P),$=V||ys(P)||Ir(P);if(A=wt(A,4),F==null){var Q=P&&P.constructor;$?F=V?new Q:[]:ge(P)?F=qn(Q)?Rr(Zo(P)):{}:F={}}return($?Vi:En)(P,function(j,tt,it){return A(F,j,tt,it)}),F}function JO(P,A){return P==null?!0:Zu(P,A)}function QO(P,A,F){return P==null?P:ig(P,A,ju(F))}function jO(P,A,F,V){return V=typeof V=="function"?V:e,P==null?P:ig(P,A,ju(F),V)}function Dr(P){return P==null?[]:Lu(P,Be(P))}function qO(P){return P==null?[]:Lu(P,ui(P))}function _O(P,A,F){return F===e&&(F=A,A=e),F!==e&&(F=ki(F),F=F===F?F:0),A!==e&&(A=ki(A),A=A===A?A:0),Js(ki(P),A,F)}function tR(P,A,F){return A=_n(A),F===e?(F=A,A=0):F=_n(F),P=ki(P),aM(P,A,F)}function eR(P,A,F){if(F&&typeof F!="boolean"&&ii(P,A,F)&&(A=F=e),F===e&&(typeof A=="boolean"?(F=A,A=e):typeof P=="boolean"&&(F=P,P=e)),P===e&&A===e?(P=0,A=1):(P=_n(P),A===e?(A=P,P=0):A=_n(A)),P>A){var V=P;P=A,A=V}if(F||P%1||A%1){var $=Ip();return ke(P+$*(A-P+DE("1e-"+(($+"").length-1))),A)}return $u(P,A)}var iR=wr(function(P,A,F){return A=A.toLowerCase(),P+(F?l0(A):A)});function l0(P){return yf(_t(P).toLowerCase())}function u0(P){return P=_t(P),P&&P.replace(sE,kE).replace(EE,"")}function nR(P,A,F){P=_t(P),A=Li(A);var V=P.length;F=F===e?V:Js(Yt(F),0,V);var $=F;return F-=A.length,F>=0&&P.slice(F,$)==A}function sR(P){return P=_t(P),P&&YS.test(P)?P.replace(Uv,KE):P}function rR(P){return P=_t(P),P&&HS.test(P)?P.replace(cu,"\\$&"):P}var aR=wr(function(P,A,F){return P+(F?"-":"")+A.toLowerCase()}),oR=wr(function(P,A,F){return P+(F?" ":"")+A.toLowerCase()}),hR=cg("toLowerCase");function lR(P,A,F){P=_t(P),A=Yt(A);var V=A?Er(P):0;if(!A||V>=A)return P;var $=(A-V)/2;return fh(qo($),F)+P+fh(jo($),F)}function uR(P,A,F){P=_t(P),A=Yt(A);var V=A?Er(P):0;return A&&V<A?P+fh(A-V,F):P}function fR(P,A,F){P=_t(P),A=Yt(A);var V=A?Er(P):0;return A&&V<A?fh(A-V,F)+P:P}function dR(P,A,F){return F||A==null?A=0:A&&(A=+A),yP(_t(P).replace(vu,""),A||0)}function cR(P,A,F){return(F?ii(P,A,F):A===e)?A=1:A=Yt(A),ku(_t(P),A)}function vR(){var P=arguments,A=_t(P[0]);return P.length<3?A:A.replace(P[1],P[2])}var pR=wr(function(P,A,F){return P+(F?"_":"")+A.toLowerCase()});function gR(P,A,F){return F&&typeof F!="number"&&ii(P,A,F)&&(A=F=e),F=F===e?I:F>>>0,F?(P=_t(P),P&&(typeof A=="string"||A!=null&&!gf(A))&&(A=Li(A),!A&&Sr(P))?xs(an(P),0,F):P.split(A,F)):[]}var mR=wr(function(P,A,F){return P+(F?" ":"")+yf(A)});function xR(P,A,F){return P=_t(P),F=F==null?0:Js(Yt(F),0,P.length),A=Li(A),P.slice(F,F+A.length)==A}function yR(P,A,F){var V=J.templateSettings;F&&ii(P,A,F)&&(A=e),P=_t(P),A=Eh({},A,V,Tg);var $=Eh({},A.imports,V.imports,Tg),Q=Be($),j=Lu($,Q),tt,it,ht=0,lt=A.interpolate||Go,ft="__p += '",gt=Fu((A.escape||Go).source+"|"+lt.source+"|"+(lt===Wv?qS:Go).source+"|"+(A.evaluate||Go).source+"|$","g"),Mt="//# sourceURL="+(ee.call(A,"sourceURL")?(A.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++RE+"]")+`
`;P.replace(gt,function(It,Ut,$t,Fi,ni,Ii){return $t||($t=Fi),ft+=P.slice(ht,Ii).replace(rE,ZE),Ut&&(tt=!0,ft+=`' +
__e(`+Ut+`) +
'`),ni&&(it=!0,ft+=`';
`+ni+`;
__p += '`),$t&&(ft+=`' +
((__t = (`+$t+`)) == null ? '' : __t) +
'`),ht=Ii+It.length,It}),ft+=`';
`;var Ft=ee.call(A,"variable")&&A.variable;if(!Ft)ft=`with (obj) {
`+ft+`
}
`;else if(QS.test(Ft))throw new bt(r);ft=(it?ft.replace(BS,""):ft).replace(bS,"$1").replace(GS,"$1;"),ft="function("+(Ft||"obj")+`) {
`+(Ft?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(tt?", __e = _.escape":"")+(it?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ft+`return __p
}`;var zt=d0(function(){return jt(Q,Mt+"return "+ft).apply(e,j)});if(zt.source=ft,pf(zt))throw zt;return zt}function TR(P){return _t(P).toLowerCase()}function CR(P){return _t(P).toUpperCase()}function SR(P,A,F){if(P=_t(P),P&&(F||A===e))return Cp(P);if(!P||!(A=Li(A)))return P;var V=an(P),$=an(A),Q=Sp(V,$),j=Ep(V,$)+1;return xs(V,Q,j).join("")}function ER(P,A,F){if(P=_t(P),P&&(F||A===e))return P.slice(0,Mp(P)+1);if(!P||!(A=Li(A)))return P;var V=an(P),$=Ep(V,an(A))+1;return xs(V,0,$).join("")}function PR(P,A,F){if(P=_t(P),P&&(F||A===e))return P.replace(vu,"");if(!P||!(A=Li(A)))return P;var V=an(P),$=Sp(V,an(A));return xs(V,$).join("")}function MR(P,A){var F=L,V=R;if(ge(A)){var $="separator"in A?A.separator:$;F="length"in A?Yt(A.length):F,V="omission"in A?Li(A.omission):V}P=_t(P);var Q=P.length;if(Sr(P)){var j=an(P);Q=j.length}if(F>=Q)return P;var tt=F-Er(V);if(tt<1)return V;var it=j?xs(j,0,tt).join(""):P.slice(0,tt);if($===e)return it+V;if(j&&(tt+=it.length-tt),gf($)){if(P.slice(tt).search($)){var ht,lt=it;for($.global||($=Fu($.source,_t(Xv.exec($))+"g")),$.lastIndex=0;ht=$.exec(lt);)var ft=ht.index;it=it.slice(0,ft===e?tt:ft)}}else if(P.indexOf(Li($),tt)!=tt){var gt=it.lastIndexOf($);gt>-1&&(it=it.slice(0,gt))}return it+V}function AR(P){return P=_t(P),P&&NS.test(P)?P.replace(Vv,eP):P}var OR=wr(function(P,A,F){return P+(F?" ":"")+A.toUpperCase()}),yf=cg("toUpperCase");function f0(P,A,F){return P=_t(P),A=F?e:A,A===e?QE(P)?sP(P):UE(P):P.match(A)||[]}var d0=Vt(function(P,A){try{return Oi(P,e,A)}catch(F){return pf(F)?F:new bt(F)}}),RR=Qn(function(P,A){return Vi(A,function(F){F=Mn(F),Zn(P,F,cf(P[F],P))}),P});function LR(P){var A=P==null?0:P.length,F=wt();return P=A?ce(P,function(V){if(typeof V[1]!="function")throw new Ui(o);return[F(V[0]),V[1]]}):[],Vt(function(V){for(var $=-1;++$<A;){var Q=P[$];if(Oi(Q[0],this,V))return Oi(Q[1],this,V)}})}function wR(P){return eM(Xi(P,u))}function Tf(P){return function(){return P}}function FR(P,A){return P==null||P!==P?A:P}var IR=pg(),DR=pg(!0);function fi(P){return P}function Cf(P){return $p(typeof P=="function"?P:Xi(P,u))}function BR(P){return Kp(Xi(P,u))}function bR(P,A){return Zp(P,Xi(A,u))}var GR=Vt(function(P,A){return function(F){return Aa(F,P,A)}}),NR=Vt(function(P,A){return function(F){return Aa(P,F,A)}});function Sf(P,A,F){var V=Be(A),$=sh(A,V);F==null&&!(ge(A)&&($.length||!V.length))&&(F=A,A=P,P=this,$=sh(A,Be(A)));var Q=!(ge(F)&&"chain"in F)||!!F.chain,j=qn(P);return Vi($,function(tt){var it=A[tt];P[tt]=it,j&&(P.prototype[tt]=function(){var ht=this.__chain__;if(Q||ht){var lt=P(this.__wrapped__),ft=lt.__actions__=hi(this.__actions__);return ft.push({func:it,args:arguments,thisArg:P}),lt.__chain__=ht,lt}return it.apply(P,ds([this.value()],arguments))})}),P}function YR(){return Ne._===this&&(Ne._=uP),this}function Ef(){}function zR(P){return P=Yt(P),Vt(function(A){return Jp(A,P)})}var VR=_u(ce),UR=_u(gp),WR=_u(Pu);function c0(P){return of(P)?Mu(Mn(P)):xM(P)}function XR(P){return function(A){return P==null?e:Qs(P,A)}}var HR=mg(),$R=mg(!0);function Pf(){return[]}function Mf(){return!1}function kR(){return{}}function KR(){return""}function ZR(){return!0}function JR(P,A){if(P=Yt(P),P<1||P>k)return[];var F=I,V=ke(P,I);A=wt(A),P-=I;for(var $=Ru(V,A);++F<P;)A(F);return $}function QR(P){return Gt(P)?ce(P,Mn):wi(P)?[P]:hi(Dg(_t(P)))}function jR(P){var A=++hP;return _t(P)+A}var qR=uh(function(P,A){return P+A},0),_R=tf("ceil"),tL=uh(function(P,A){return P/A},1),eL=tf("floor");function iL(P){return P&&P.length?nh(P,fi,zu):e}function nL(P,A){return P&&P.length?nh(P,wt(A,2),zu):e}function sL(P){return yp(P,fi)}function rL(P,A){return yp(P,wt(A,2))}function aL(P){return P&&P.length?nh(P,fi,Xu):e}function oL(P,A){return P&&P.length?nh(P,wt(A,2),Xu):e}var hL=uh(function(P,A){return P*A},1),lL=tf("round"),uL=uh(function(P,A){return P-A},0);function fL(P){return P&&P.length?Ou(P,fi):0}function dL(P,A){return P&&P.length?Ou(P,wt(A,2)):0}return J.after=B2,J.ary=Hg,J.assign=CO,J.assignIn=s0,J.assignInWith=Eh,J.assignWith=SO,J.at=EO,J.before=$g,J.bind=cf,J.bindAll=RR,J.bindKey=kg,J.castArray=k2,J.chain=Ug,J.chunk=eA,J.compact=iA,J.concat=nA,J.cond=LR,J.conforms=wR,J.constant=Tf,J.countBy=f2,J.create=PO,J.curry=Kg,J.curryRight=Zg,J.debounce=Jg,J.defaults=MO,J.defaultsDeep=AO,J.defer=b2,J.delay=G2,J.difference=sA,J.differenceBy=rA,J.differenceWith=aA,J.drop=oA,J.dropRight=hA,J.dropRightWhile=lA,J.dropWhile=uA,J.fill=fA,J.filter=c2,J.flatMap=g2,J.flatMapDeep=m2,J.flatMapDepth=x2,J.flatten=Ng,J.flattenDeep=dA,J.flattenDepth=cA,J.flip=N2,J.flow=IR,J.flowRight=DR,J.fromPairs=vA,J.functions=DO,J.functionsIn=BO,J.groupBy=y2,J.initial=gA,J.intersection=mA,J.intersectionBy=xA,J.intersectionWith=yA,J.invert=GO,J.invertBy=NO,J.invokeMap=C2,J.iteratee=Cf,J.keyBy=S2,J.keys=Be,J.keysIn=ui,J.map=mh,J.mapKeys=zO,J.mapValues=VO,J.matches=BR,J.matchesProperty=bR,J.memoize=yh,J.merge=UO,J.mergeWith=r0,J.method=GR,J.methodOf=NR,J.mixin=Sf,J.negate=Th,J.nthArg=zR,J.omit=WO,J.omitBy=XO,J.once=Y2,J.orderBy=E2,J.over=VR,J.overArgs=z2,J.overEvery=UR,J.overSome=WR,J.partial=vf,J.partialRight=Qg,J.partition=P2,J.pick=HO,J.pickBy=a0,J.property=c0,J.propertyOf=XR,J.pull=EA,J.pullAll=zg,J.pullAllBy=PA,J.pullAllWith=MA,J.pullAt=AA,J.range=HR,J.rangeRight=$R,J.rearg=V2,J.reject=O2,J.remove=OA,J.rest=U2,J.reverse=ff,J.sampleSize=L2,J.set=kO,J.setWith=KO,J.shuffle=w2,J.slice=RA,J.sortBy=D2,J.sortedUniq=bA,J.sortedUniqBy=GA,J.split=gR,J.spread=W2,J.tail=NA,J.take=YA,J.takeRight=zA,J.takeRightWhile=VA,J.takeWhile=UA,J.tap=i2,J.throttle=X2,J.thru=gh,J.toArray=e0,J.toPairs=o0,J.toPairsIn=h0,J.toPath=QR,J.toPlainObject=n0,J.transform=ZO,J.unary=H2,J.union=WA,J.unionBy=XA,J.unionWith=HA,J.uniq=$A,J.uniqBy=kA,J.uniqWith=KA,J.unset=JO,J.unzip=df,J.unzipWith=Vg,J.update=QO,J.updateWith=jO,J.values=Dr,J.valuesIn=qO,J.without=ZA,J.words=f0,J.wrap=$2,J.xor=JA,J.xorBy=QA,J.xorWith=jA,J.zip=qA,J.zipObject=_A,J.zipObjectDeep=t2,J.zipWith=e2,J.entries=o0,J.entriesIn=h0,J.extend=s0,J.extendWith=Eh,Sf(J,J),J.add=qR,J.attempt=d0,J.camelCase=iR,J.capitalize=l0,J.ceil=_R,J.clamp=_O,J.clone=K2,J.cloneDeep=J2,J.cloneDeepWith=Q2,J.cloneWith=Z2,J.conformsTo=j2,J.deburr=u0,J.defaultTo=FR,J.divide=tL,J.endsWith=nR,J.eq=hn,J.escape=sR,J.escapeRegExp=rR,J.every=d2,J.find=v2,J.findIndex=bg,J.findKey=OO,J.findLast=p2,J.findLastIndex=Gg,J.findLastKey=RO,J.floor=eL,J.forEach=Wg,J.forEachRight=Xg,J.forIn=LO,J.forInRight=wO,J.forOwn=FO,J.forOwnRight=IO,J.get=mf,J.gt=q2,J.gte=_2,J.has=bO,J.hasIn=xf,J.head=Yg,J.identity=fi,J.includes=T2,J.indexOf=pA,J.inRange=tR,J.invoke=YO,J.isArguments=_s,J.isArray=Gt,J.isArrayBuffer=tO,J.isArrayLike=li,J.isArrayLikeObject=Ee,J.isBoolean=eO,J.isBuffer=ys,J.isDate=iO,J.isElement=nO,J.isEmpty=sO,J.isEqual=rO,J.isEqualWith=aO,J.isError=pf,J.isFinite=oO,J.isFunction=qn,J.isInteger=jg,J.isLength=Ch,J.isMap=qg,J.isMatch=hO,J.isMatchWith=lO,J.isNaN=uO,J.isNative=fO,J.isNil=cO,J.isNull=dO,J.isNumber=_g,J.isObject=ge,J.isObjectLike=ye,J.isPlainObject=Ia,J.isRegExp=gf,J.isSafeInteger=vO,J.isSet=t0,J.isString=Sh,J.isSymbol=wi,J.isTypedArray=Ir,J.isUndefined=pO,J.isWeakMap=gO,J.isWeakSet=mO,J.join=TA,J.kebabCase=aR,J.last=$i,J.lastIndexOf=CA,J.lowerCase=oR,J.lowerFirst=hR,J.lt=xO,J.lte=yO,J.max=iL,J.maxBy=nL,J.mean=sL,J.meanBy=rL,J.min=aL,J.minBy=oL,J.stubArray=Pf,J.stubFalse=Mf,J.stubObject=kR,J.stubString=KR,J.stubTrue=ZR,J.multiply=hL,J.nth=SA,J.noConflict=YR,J.noop=Ef,J.now=xh,J.pad=lR,J.padEnd=uR,J.padStart=fR,J.parseInt=dR,J.random=eR,J.reduce=M2,J.reduceRight=A2,J.repeat=cR,J.replace=vR,J.result=$O,J.round=lL,J.runInContext=et,J.sample=R2,J.size=F2,J.snakeCase=pR,J.some=I2,J.sortedIndex=LA,J.sortedIndexBy=wA,J.sortedIndexOf=FA,J.sortedLastIndex=IA,J.sortedLastIndexBy=DA,J.sortedLastIndexOf=BA,J.startCase=mR,J.startsWith=xR,J.subtract=uL,J.sum=fL,J.sumBy=dL,J.template=yR,J.times=JR,J.toFinite=_n,J.toInteger=Yt,J.toLength=i0,J.toLower=TR,J.toNumber=ki,J.toSafeInteger=TO,J.toString=_t,J.toUpper=CR,J.trim=SR,J.trimEnd=ER,J.trimStart=PR,J.truncate=MR,J.unescape=AR,J.uniqueId=jR,J.upperCase=OR,J.upperFirst=yf,J.each=Wg,J.eachRight=Xg,J.first=Yg,Sf(J,function(){var P={};return En(J,function(A,F){ee.call(J.prototype,F)||(P[F]=A)}),P}(),{chain:!1}),J.VERSION=f,Vi(["bind","bindKey","curry","curryRight","partial","partialRight"],function(P){J[P].placeholder=J}),Vi(["drop","take"],function(P,A){Wt.prototype[P]=function(F){F=F===e?1:Le(Yt(F),0);var V=this.__filtered__&&!A?new Wt(this):this.clone();return V.__filtered__?V.__takeCount__=ke(F,V.__takeCount__):V.__views__.push({size:ke(F,I),type:P+(V.__dir__<0?"Right":"")}),V},Wt.prototype[P+"Right"]=function(F){return this.reverse()[P](F).reverse()}}),Vi(["filter","map","takeWhile"],function(P,A){var F=A+1,V=F==B||F==z;Wt.prototype[P]=function($){var Q=this.clone();return Q.__iteratees__.push({iteratee:wt($,3),type:F}),Q.__filtered__=Q.__filtered__||V,Q}}),Vi(["head","last"],function(P,A){var F="take"+(A?"Right":"");Wt.prototype[P]=function(){return this[F](1).value()[0]}}),Vi(["initial","tail"],function(P,A){var F="drop"+(A?"":"Right");Wt.prototype[P]=function(){return this.__filtered__?new Wt(this):this[F](1)}}),Wt.prototype.compact=function(){return this.filter(fi)},Wt.prototype.find=function(P){return this.filter(P).head()},Wt.prototype.findLast=function(P){return this.reverse().find(P)},Wt.prototype.invokeMap=Vt(function(P,A){return typeof P=="function"?new Wt(this):this.map(function(F){return Aa(F,P,A)})}),Wt.prototype.reject=function(P){return this.filter(Th(wt(P)))},Wt.prototype.slice=function(P,A){P=Yt(P);var F=this;return F.__filtered__&&(P>0||A<0)?new Wt(F):(P<0?F=F.takeRight(-P):P&&(F=F.drop(P)),A!==e&&(A=Yt(A),F=A<0?F.dropRight(-A):F.take(A-P)),F)},Wt.prototype.takeRightWhile=function(P){return this.reverse().takeWhile(P).reverse()},Wt.prototype.toArray=function(){return this.take(I)},En(Wt.prototype,function(P,A){var F=/^(?:filter|find|map|reject)|While$/.test(A),V=/^(?:head|last)$/.test(A),$=J[V?"take"+(A=="last"?"Right":""):A],Q=V||/^find/.test(A);!$||(J.prototype[A]=function(){var j=this.__wrapped__,tt=V?[1]:arguments,it=j instanceof Wt,ht=tt[0],lt=it||Gt(j),ft=function(Ut){var $t=$.apply(J,ds([Ut],tt));return V&&gt?$t[0]:$t};lt&&F&&typeof ht=="function"&&ht.length!=1&&(it=lt=!1);var gt=this.__chain__,Mt=!!this.__actions__.length,Ft=Q&&!gt,zt=it&&!Mt;if(!Q&&lt){j=zt?j:new Wt(this);var It=P.apply(j,tt);return It.__actions__.push({func:gh,args:[ft],thisArg:e}),new Wi(It,gt)}return Ft&&zt?P.apply(this,tt):(It=this.thru(ft),Ft?V?It.value()[0]:It.value():It)})}),Vi(["pop","push","shift","sort","splice","unshift"],function(P){var A=Wo[P],F=/^(?:push|sort|unshift)$/.test(P)?"tap":"thru",V=/^(?:pop|shift)$/.test(P);J.prototype[P]=function(){var $=arguments;if(V&&!this.__chain__){var Q=this.value();return A.apply(Gt(Q)?Q:[],$)}return this[F](function(j){return A.apply(Gt(j)?j:[],$)})}}),En(Wt.prototype,function(P,A){var F=J[A];if(F){var V=F.name+"";ee.call(Or,V)||(Or[V]=[]),Or[V].push({name:A,func:F})}}),Or[lh(e,m).name]=[{name:"wrapper",func:e}],Wt.prototype.clone=AP,Wt.prototype.reverse=OP,Wt.prototype.value=RP,J.prototype.at=n2,J.prototype.chain=s2,J.prototype.commit=r2,J.prototype.next=a2,J.prototype.plant=h2,J.prototype.reverse=l2,J.prototype.toJSON=J.prototype.valueOf=J.prototype.value=u2,J.prototype.first=J.prototype.head,ya&&(J.prototype[ya]=o2),J},Pr=rP();$s?(($s.exports=Pr)._=Pr,Tu._=Pr):Ne._=Pr}).call(jr)})(me,me.exports);class se{static parse(t,e=[]){let f=0;for(let n=0;n<t.length;n++){let o=t[n],r=t[f];switch(!0){case(t.length>=n+5&&t.slice(n,n+5)=="|_|->"):f=r!="|"?n:f;break;case o=="v":f=r!="|"&&r!="v"?n:f;break;case o=="^":f=r!="|"&&r!="v"&&r!="^"?n:f;break;case o=="~":f=r!="|"&&r!="v"&&r!="^"&&r!="~"?n:f;break;case o=="(":f=r!="|"&&r!="v"&&r!="^"&&r!="~"&&r!="~"?n:f;let a=1;for(;n<t.length&&a>0;)n++,t[n]=="("&&a++,t[n]==")"&&a--;break;case(o>="A"&&o<="Z"):f=r!="|"&&r!="v"&&r!="^"&&r!="~"&&r!="~"&&(r<"A"||r>"Z")?n:f;break;case(t.length>=n+3&&t.slice(n,n+3)=="_|_"):f=r!="|"&&r!="v"&&r!="^"&&r!="~"&&r!="~"&&(r<"A"||r>"Z")&&r!="_"?n:f;break;case(t.length>=n+3&&t.slice(n,n+3)=="\xAF|\xAF"):f=r!="|"&&r!="v"&&r!="^"&&r!="~"&&r!="~"&&(r<"A"||r>"Z")&&r!="_"&&r!="\xAF"?n:f;break;case o=="?":f=r!="|"&&r!="v"&&r!="^"&&r!="~"&&r!="~"&&(r<"A"||r>"Z")&&r!="_"&&r!="\xAF"&&r!="?"?n:f;break}}let i=t[f];switch(!0){case i=="|":return new Un(se.parse(t.slice(0,f),e),se.parse(t.slice(f+5,t.length),e));case i=="v":return new Wn(se.parse(t.slice(0,f),e),se.parse(t.slice(f+1,t.length),e));case i=="^":return new Us(se.parse(t.slice(0,f),e),se.parse(t.slice(f+1,t.length),e));case i=="~":return new ai(se.parse(t.slice(f+1,t.length),e));case i=="(":let n=f,o=1;for(;n<t.length&&o>0;)n++,t[n]=="("&&o++,t[n]==")"&&o--;return se.parse(t.slice(f+1,n),e);case(i>="A"&&i<="Z"):return new To(e[i.charCodeAt(0)-65]);case i=="_":return new lu;case i=="\xAF":return new uu;case i=="?":return new Hs}throw new Error("Failed to parse formula string: "+t)}}class Un extends se{constructor(t,e){super(),this.antecedent=t,this.consequent=e}generate_atom_list(t){let e=this.antecedent.generate_atom_list(t);return e=this.consequent.generate_atom_list(e),e}to_string(t){t=t!=null?t:[];let e=n=>n instanceof Un||n instanceof Wn||n instanceof Us,f=this.antecedent.to_string(t),i=this.consequent.to_string(t);return(e(this.antecedent)?"("+f+")":f)+" |_|-> "+(e(this.consequent)?"("+i+")":i)}compare(t){return t instanceof Un&&this.antecedent.compare(t.antecedent)&&this.consequent.compare(t.consequent)||t instanceof Hs}get_child(t){if(t.length==0)return this;switch(t[0]){case"l":return this.antecedent.get_child(t.slice(1,t.length));case"r":return this.consequent.get_child(t.slice(1,t.length));default:throw new Error("path string may only contain the letters 'l' and 'r'")}}}class Wn extends se{constructor(t,e){super(),this.subject1=t,this.subject2=e}generate_atom_list(t){let e=this.subject1.generate_atom_list(t);return e=this.subject2.generate_atom_list(e),e}to_string(t){t=t!=null?t:[];let e=n=>n instanceof Un||n instanceof Wn||n instanceof Us,f=this.subject1.to_string(t),i=this.subject2.to_string(t);return(e(this.subject1)?"("+f+")":f)+" v "+(e(this.subject2)?"("+i+")":i)}compare(t){return t instanceof Wn&&(this.subject1.compare(t.subject1)&&this.subject2.compare(t.subject2)||this.subject1.compare(t.subject2)&&this.subject2.compare(t.subject1))||t instanceof Hs}get_child(t){if(t.length==0)return this;switch(t[0]){case"l":return this.subject1.get_child(t.slice(1,t.length));case"r":return this.subject2.get_child(t.slice(1,t.length));default:throw new Error("path string may only contain the letters 'l' and 'r'")}}}class Us extends se{constructor(t,e){super(),this.subject1=t,this.subject2=e}generate_atom_list(t){let e=this.subject1.generate_atom_list(t);return e=this.subject2.generate_atom_list(e),e}to_string(t){t=t!=null?t:[];let e=n=>n instanceof Un||n instanceof Wn||n instanceof Us,f=this.subject1.to_string(t),i=this.subject2.to_string(t);return(e(this.subject1)?"("+f+")":f)+" ^ "+(e(this.subject2)?"("+i+")":i)}compare(t){return t instanceof Us&&(this.subject1.compare(t.subject1)&&this.subject2.compare(t.subject2)||this.subject1.compare(t.subject2)&&this.subject2.compare(t.subject1))||t instanceof Hs}get_child(t){if(t.length==0)return this;switch(t[0]){case"l":return this.subject1.get_child(t.slice(1,t.length));case"r":return this.subject2.get_child(t.slice(1,t.length));default:throw new Error("path string may only contain the letters 'l' and 'r'")}}}class ai extends se{constructor(t){super(),this.subject=t}generate_atom_list(t){return this.subject.generate_atom_list(t)}to_string(t){let e=i=>i instanceof Un||i instanceof Wn||i instanceof Us,f=this.subject.to_string(t);return"~"+(e(this.subject)?"("+f+")":f)}compare(t){return t instanceof ai&&this.subject.compare(t.subject)||t instanceof Hs}get_child(t){if(t.length==0)return this;switch(t[0]){case"l":return this.subject.get_child(t.slice(1,t.length));default:throw new Error("Negation only has left child")}}}class To extends se{constructor(t){super(),this.value=t}generate_atom_list(t){let e=t!=null?t:[];return e.includes(this.value)||(e=e.concat([this.value])),e}to_string(t){if(t==null)return"A";let e=t==null?void 0:t.findIndex(f=>f==this.value);return e==-1?(t==null||t.push(this.value),String.fromCharCode(t.length-1+65)):String.fromCharCode(e+65)}compare(t){return t instanceof To&&this.value==t.value||t instanceof To&&(this.value==null||t.value==null)||t instanceof Hs}get_child(t){if(t.length==0)return this;throw new Error("Cannot traverse any further")}}class lu extends se{constructor(){super()}generate_atom_list(t){return t!=null?t:[]}to_string(){return"_|_"}compare(t){return t instanceof lu||t instanceof Hs}get_child(t){if(t.length==0)return this;throw new Error("Cannot traverse any further")}}class uu extends se{constructor(){super()}generate_atom_list(t){return t!=null?t:[]}to_string(){return"\xAF|\xAF"}compare(t){return t instanceof uu||t instanceof Hs}get_child(t){if(t.length==0)return this;throw new Error("Cannot traverse any further")}}class Hs extends se{constructor(){super()}generate_atom_list(t){return t!=null?t:[]}to_string(){return"?"}compare(t){return!0}get_child(t){if(t.length==0)return this;throw new Error("Cannot traverse any further")}}var dr=(s=>(s[s.Attacker=0]="Attacker",s[s.Defender=1]="Defender",s[s.Either=2]="Either",s))(dr||{}),ji=(s=>(s[s.Resolve=0]="Resolve",s[s.Vacuous=1]="Vacuous",s[s.Counterfactual=2]="Counterfactual",s))(ji||{}),Te=(s=>(s[s.Defenders_Resolution=0]="Defenders_Resolution",s[s.Attackers_Resolution=1]="Attackers_Resolution",s[s.Defenders_Choice=2]="Defenders_Choice",s[s.Attackers_Choice=3]="Attackers_Choice",s[s.Defenders_World_Choice=4]="Defenders_World_Choice",s[s.No_Moves=5]="No_Moves",s))(Te||{});let oc=new Map([["a",0],["d",1],["a/d",2],["d/a",2]]),hc=new Map([["Res",0],["Cf",2],["Vac",1]]);class d8{constructor(){this.rules=[],this.initialize_rules()}initialize_rules(){let t=z=>z.get_current_world().is_atom_known_true(z.get_formula().value),e=z=>!z.get_current_world().is_atom_known_true(z.get_formula().value),f=z=>z.get_current_world().is_atom_known_true(z.get_formula().get_child("l").value),i=z=>!z.get_current_world().is_atom_known_true(z.get_formula().get_child("l").value),n=z=>z.get_current_world().get_edge_count()>0,o=z=>z.get_current_world().get_edge_count()>0&&z.get_current_world().get_edge_list().some(X=>X[1]<=z.get_radius());this.rules.push(ie.create("Attacker_Victory","Res","a","_|_")),this.rules.push(ie.create("Defender_Victory","Res","a","\xAF|\xAF"));let r=z=>z.configure("Res",se.parse("\xAF|\xAF"),"a/d");this.rules.push(ie.create("Negated_Bottom","Res","a","~_|_",r));let a=z=>z.configure("Res",se.parse("_|_"),"a/d");this.rules.push(ie.create("Negated_Top","Res","a","~\xAF|\xAF",a));let l=z=>z.configure("Res",se.parse("\xAF|\xAF"),"a/d");this.rules.push(ie.create("Known_Fact","Res","a","A",l,t));let h=z=>z.configure("Res",se.parse("_|_"),"a/d");this.rules.push(ie.create("Unknown_Fact","Res","a","A",h,e));let u=z=>z.configure("Res",se.parse("~\xAF|\xAF"),"a/d");this.rules.push(ie.create("Negated_Known_Fact","Res","a","~A",u,f));let v=z=>z.configure("Res",se.parse("~_|_"),"a/d");this.rules.push(ie.create("Negated_Unknown_Fact","Res","a","~A",v,i));let d=z=>z.configure("Res",z.get_formula().get_child("ll"),"a/d");this.rules.push(ie.create("Double_Negation","Res","a","~~?",d));let c=z=>z.configure("Res",z.get_formula().get_child("l"),"a/d");this.rules.push(ie.create("Left_OR","Res","d","?v?",c));let p=z=>z.configure("Res",z.get_formula().get_child("r"),"a/d");this.rules.push(ie.create("Right_OR","Res","d","?v?",p));let g=z=>z.configure("Res",new ai(z.get_formula().get_child("ll")),"a/d");this.rules.push(ie.create("Negated_Left_OR","Res","a","~(?v?)",g));let m=z=>z.configure("Res",new ai(z.get_formula().get_child("lr")),"a/d");this.rules.push(ie.create("Negated_Right_OR","Res","a","~(?v?)",m));let x=z=>z.configure("Res",z.get_formula().get_child("l"),"a/d");this.rules.push(ie.create("Left_AND","Res","a","?^?",x));let y=z=>z.configure("Res",z.get_formula().get_child("r"),"a/d");this.rules.push(ie.create("Right_AND","Res","a","?^?",y));let T=z=>z.configure("Res",new ai(z.get_formula().get_child("ll")),"a/d");this.rules.push(ie.create("Negated_Left_AND","Res","d","~(?^?)",T));let C=z=>z.configure("Res",new ai(z.get_formula().get_child("lr")),"a/d");this.rules.push(ie.create("Negated_Right_AND","Res","d","~(?^?)",C));let S=(z,X)=>z.configure("Cf",z.get_formula(),"a",void 0,X);this.rules.push(ie.create("Defender_Sphere_Selection","Res","d","? |_|-> ?",S,n,!0));let E=z=>z.configure("Res",z.get_formula().get_child("l"),"a/d",z.get_delim_world().index,-1);this.rules.push(ie.create("Attacker_Phi_Evaluation","Cf","a","? |_|-> ?",E));let M=(z,X)=>z.configure("Res",new Wn(new ai(z.get_formula().get_child("l")),z.get_formula().get_child("r")),"d",X,-1);this.rules.push(ie.create("Attacker_World_Choice","Cf","a","? |_|-> ?",M,o,!0));let O=z=>z.configure("Vac",z.get_formula().get_child("l"),"a");this.rules.push(ie.create("Defender_Vacuous_Truth_Claim","Res","d","? |_|-> ?",O));let L=(z,X)=>z.configure("Res",new ai(z.get_formula()),"a/d",X);this.rules.push(ie.create("Attacker_Vacuous_World_Choice","Vac","a","?",L,n,!0));let R=(z,X)=>z.configure("Cf",z.get_formula(),"d",void 0,X);this.rules.push(ie.create("Attacker_Sphere_Selection","Res","a","~(? |_|-> ?)",R,n,!0));let w=z=>z.configure("Res",new ai(z.get_formula().get_child("ll")),"a/d",z.get_delim_world().index,-1);this.rules.push(ie.create("Defender_Phi_Evaluation","Cf","d","~(? |_|-> ?)",w));let D=(z,X)=>z.configure("Res",new ai(new Wn(new ai(z.get_formula().get_child("ll")),z.get_formula().get_child("lr"))),"a",X,-1);this.rules.push(ie.create("Defender_World_Choice","Cf","d","~(? |_|-> ?)",D,o,!0));let B=z=>z.configure("Vac",z.get_formula().get_child("ll"),"d");this.rules.push(ie.create("Attacker_Vacuous_Truth_Claim","Res","a","~(? |_|-> ?)",B));let N=(z,X)=>z.configure("Res",z.get_formula(),"a/d",X);this.rules.push(ie.create("Defender_Vacuous_World_Choice","Vac","d","?",N,n,!0))}applicable(t){let e=[];for(let f=0;f<this.rules.length;f++){let i=this.rules[f];i.is_applicable(t)&&e.push(me.exports.cloneDeep(i))}return e}defender_moves(t){return this.applicable(t).filter(e=>e.get_player()==dr.Defender||e.get_player()==dr.Either)}attacker_moves(t){return this.applicable(t).filter(e=>e.get_player()==dr.Attacker||e.get_player()==dr.Either)}next_game_states(t,e){e=e!=null?e:this.defender_moves(t),e=e==null||e.length==0?this.attacker_moves(t):e;let f=[],i,n;for(let o=0;o<e.length;o++)if(i=e[o],i.get_world_input_requirement()){let a=t.get_graph().get_V();for(let l=0;l<a;l++){let h=!1;switch(!0){case i.get_name()==Pt.Defender_Sphere_Selection:case i.get_name()==Pt.Attacker_Sphere_Selection:case i.get_name()==Pt.Defender_Vacuous_World_Choice:case i.get_name()==Pt.Attacker_Vacuous_World_Choice:h=t.get_current_world().is_adj(l);break;case i.get_name()==Pt.Defender_World_Choice:case i.get_name()==Pt.Attacker_World_Choice:h=t.get_current_world().is_adj(l)&&t.get_current_world().get_edge(l)[1]<=t.get_radius();break}h&&(n=i.apply(me.exports.cloneDeep(t),l),f.push(n))}}else n=i.apply(me.exports.cloneDeep(t)),f.push(n);return f}get_rule(t){return me.exports.cloneDeep(this.rules.find(e=>e.get_name()==t))}}class ie{constructor(t,e,f,i,n,o,r){this.requires_world_input=!1,this.name=t,this.state_mode=e,this.active_player=f,this.structure=i,this.special=o!=null?o:()=>!0,this.apply=n!=null?n:a=>a,this.requires_world_input=r!=null?r:this.requires_world_input}static create(t,e,f,i,n,o,r){let a=Pt[t],l=hc.get(e),h=oc.get(f);if(a==null||l==null||h==null)throw new Error("Passed incorrect rule name or precondition abbreviation");return new ie(a,l,h,se.parse(i),n,o,r)}get_name(){return this.name}get_player(){return this.active_player}get_world_input_requirement(){return this.requires_world_input}get_special_condition(){return this.special}is_applicable(t){return!(t.get_mode()!=this.state_mode||t.get_active_player()!=dr.Either&&t.get_active_player()!=this.active_player||!this.structure.compare(t.get_formula())||!this.special(t))}}var Pt=(s=>(s[s.Attacker_Victory=0]="Attacker_Victory",s[s.Defender_Victory=1]="Defender_Victory",s[s.Negated_Bottom=2]="Negated_Bottom",s[s.Negated_Top=3]="Negated_Top",s[s.Known_Fact=4]="Known_Fact",s[s.Unknown_Fact=5]="Unknown_Fact",s[s.Negated_Known_Fact=6]="Negated_Known_Fact",s[s.Negated_Unknown_Fact=7]="Negated_Unknown_Fact",s[s.Double_Negation=8]="Double_Negation",s[s.Left_OR=9]="Left_OR",s[s.Right_OR=10]="Right_OR",s[s.Negated_Left_OR=11]="Negated_Left_OR",s[s.Negated_Right_OR=12]="Negated_Right_OR",s[s.Left_AND=13]="Left_AND",s[s.Right_AND=14]="Right_AND",s[s.Negated_Left_AND=15]="Negated_Left_AND",s[s.Negated_Right_AND=16]="Negated_Right_AND",s[s.Defender_Sphere_Selection=17]="Defender_Sphere_Selection",s[s.Attacker_Phi_Evaluation=18]="Attacker_Phi_Evaluation",s[s.Attacker_World_Choice=19]="Attacker_World_Choice",s[s.Defender_Vacuous_Truth_Claim=20]="Defender_Vacuous_Truth_Claim",s[s.Attacker_Vacuous_World_Choice=21]="Attacker_Vacuous_World_Choice",s[s.Attacker_Sphere_Selection=22]="Attacker_Sphere_Selection",s[s.Defender_Phi_Evaluation=23]="Defender_Phi_Evaluation",s[s.Defender_World_Choice=24]="Defender_World_Choice",s[s.Attacker_Vacuous_Truth_Claim=25]="Attacker_Vacuous_Truth_Claim",s[s.Defender_Vacuous_World_Choice=26]="Defender_Vacuous_World_Choice",s[s.No_Transition=27]="No_Transition",s))(Pt||{});class Tl{static choose_move(t,e){let f=this.choose_random_move(e),i=t.get_mode()==ji.Counterfactual?t.get_radius():1/0,n=f.get_world_input_requirement()?Tl.choose_random_reachable_world(t,f,i):-1;return[f,n]}static choose_random_move(t){let e=Math.ceil(0),f=Math.floor(t.length),i=Math.floor(Math.random()*(f-e)+e);return t[i]}static choose_random_reachable_world(t,e,f=1/0){if(!e.get_world_input_requirement())throw new Error("Passed move doesnt require world input!");let n=t.get_current_world().get_edges().filter(l=>l[1]<=f),o=Math.ceil(0),r=Math.floor(n.length),a=Math.floor(Math.random()*(r-o)+o);return console.log("AI chose world "+n[a][0].index),n[a][0].index}static choose_blunderscore_move(t,e,f){let i=[t],n=[],o=[];for(;i.length>0;){let v=i[i.length-1],d=!1,c=f.next_game_states(v),p;if(!n.some(g=>g.equals(v))){n.push(v),d=!0;for(let g=0;g<c.length;g++)p=c[g],n.some(m=>m.equals(p))||(i.some(m=>m.equals(p))&&(i=i.filter(m=>!m.equals(p))),i.push(p))}if(!d){let g=f.attacker_moves(v),m=f.defender_moves(v);switch(!0){case g.some(S=>S.get_name()==Pt.Defender_Victory):o.push([v,1,0]);break;case g.some(S=>S.get_name()==Pt.Attacker_Victory):o.push([v,0,0]);break;case m.length>0:let x=0,y=0;for(let S=0;S<c.length;S++){p=c[S];let E=o.find(M=>M[0].equals(p));x+=E[1],y+=E[2]}o.push([v,x/c.length,y/c.length+1]);break;case g.length>0:let T=1/0,C=0;for(let S=0;S<c.length;S++){p=c[S];let E=o.find(O=>O[0].equals(p)),M=E[1];(M<T||M==T&&C<E[2])&&(T=M,C=E[2])}o.push([v,T,C]);break}i.pop()}}let r,a=-1,l=1/0,h=-1,u;for(let v=0;v<e.length;v++){let d=e[v];u=f.next_game_states(t,[d]);for(let c=0;c<u.length;c++){let p=o.find(g=>g[0].equals(u[c]));p!=null&&(p[1]<l||p[1]==l&&p[2]>h)&&(r=d,a=d.get_name()==Pt.Attacker_Sphere_Selection?u[c].get_delim_world().index:u[c].get_current_world().index,l=p[1],h=p[2])}}return[r,a]}}class c8{constructor(t){this.rules_controller=new d8,this.state=t,console.log("Setup Game with Formula: "+this.state.get_formula().to_string())}determine_next_moves(){let t=this.rules_controller.defender_moves(this.state),e=this.rules_controller.attacker_moves(this.state),f;switch(!0){case(t.length>1&&t.some(i=>i.get_name()==Pt.Defender_Sphere_Selection||i.get_name()==Pt.Defender_Vacuous_World_Choice||i.get_name()==Pt.Defender_World_Choice)):return[Te.Defenders_World_Choice,t];case t.length>1:return[Te.Defenders_Choice,t];case t.length==1:return[Te.Defenders_Resolution,t];case(t.length==0&&e.length>1):return f=Tl.choose_blunderscore_move(me.exports.cloneDeep(this.state),e,this.rules_controller),[Te.Attackers_Resolution,[f[0]],f[1]];case(t.length==0&&e.length==1):return f=Tl.choose_blunderscore_move(me.exports.cloneDeep(this.state),e,this.rules_controller),[Te.Attackers_Resolution,[f[0]],f[1]];case(t.length==0&&e.length==0):return[Te.No_Moves,[]]}return[Te.No_Moves,[]]}execute_move(t,e){switch(this.state=t.apply(this.state,e),this.state.get_mode()){case ji.Resolve:console.log("---> "+this.state.get_formula().to_string()+" at world "+this.state.get_current_world().index);break;case ji.Counterfactual:console.log("---> Prove counterfactual "+this.state.get_formula().to_string()+`
within sphere centered on world `+this.state.get_current_world().index+" delimited by world "+this.state.get_delim_world().index);break}}does_require_delim(t){return t.get_world_input_requirement()}get_state(){return me.exports.cloneDeep(this.state)}get_rule(t){return this.rules_controller.get_rule(t)}}class Qi{constructor(t,e,f){this.x=t,this.y=e,this.z=f}dot2(t,e){return this.x*t+this.y*e}dot3(t,e,f){return this.x*t+this.y*e+this.z*f}}const v8=[new Qi(1,1,0),new Qi(-1,1,0),new Qi(1,-1,0),new Qi(-1,-1,0),new Qi(1,0,1),new Qi(-1,0,1),new Qi(1,0,-1),new Qi(-1,0,-1),new Qi(0,1,1),new Qi(0,-1,1),new Qi(0,1,-1),new Qi(0,-1,-1)],wy=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],p8=.5*(Math.sqrt(3)-1),_a=(3-Math.sqrt(3))/6,g8=1/3,Bn=1/6;var to=function(s){return s*s*s*(s*(s*6-15)+10)},bn=function(s,t,e){return(1-e)*s+e*t};class LS{constructor(t){t===void 0&&(t=0),this.perm=new Array(512),this.gradP=new Array(512),this.setSeed(t)}setSeed(t){var e=this.perm,f=this.gradP;t>0&&t<1&&(t*=65536),t=Math.floor(t),t<256&&(t|=t<<8);for(var i=0;i<256;i++){var n;i&1?n=wy[i]^t&255:n=wy[i]^t>>8&255,e[i]=e[i+256]=n,f[i]=f[i+256]=v8[n%12]}}simplex2(t,e){var f=this.perm,i=this.gradP,n,o,r,a=(t+e)*p8,l=Math.floor(t+a),h=Math.floor(e+a),u=(l+h)*_a,v=t-l+u,d=e-h+u,c,p;v>d?(c=1,p=0):(c=0,p=1);var g=v-c+_a,m=d-p+_a,x=v-1+2*_a,y=d-1+2*_a;l&=255,h&=255;var T=i[l+f[h]],C=i[l+c+f[h+p]],S=i[l+1+f[h+1]],E=.5-v*v-d*d;E<0?n=0:(E*=E,n=E*E*T.dot2(v,d));var M=.5-g*g-m*m;M<0?o=0:(M*=M,o=M*M*C.dot2(g,m));var O=.5-x*x-y*y;return O<0?r=0:(O*=O,r=O*O*S.dot2(x,y)),70*(n+o+r)}simplex3(t,e,f){var i=this.perm,n=this.gradP,o,r,a,l,h=(t+e+f)*g8,u=Math.floor(t+h),v=Math.floor(e+h),d=Math.floor(f+h),c=(u+v+d)*Bn,p=t-u+c,g=e-v+c,m=f-d+c,x,y,T,C,S,E;p>=g?g>=m?(x=1,y=0,T=0,C=1,S=1,E=0):p>=m?(x=1,y=0,T=0,C=1,S=0,E=1):(x=0,y=0,T=1,C=1,S=0,E=1):g<m?(x=0,y=0,T=1,C=0,S=1,E=1):p<m?(x=0,y=1,T=0,C=0,S=1,E=1):(x=0,y=1,T=0,C=1,S=1,E=0);var M=p-x+Bn,O=g-y+Bn,L=m-T+Bn,R=p-C+2*Bn,w=g-S+2*Bn,D=m-E+2*Bn,B=p-1+3*Bn,N=g-1+3*Bn,z=m-1+3*Bn;u&=255,v&=255,d&=255;var X=n[u+i[v+i[d]]],k=n[u+x+i[v+y+i[d+T]]],K=n[u+C+i[v+S+i[d+E]]],b=n[u+1+i[v+1+i[d+1]]],I=.6-p*p-g*g-m*m;I<0?o=0:(I*=I,o=I*I*X.dot3(p,g,m));var G=.6-M*M-O*O-L*L;G<0?r=0:(G*=G,r=G*G*k.dot3(M,O,L));var Y=.6-R*R-w*w-D*D;Y<0?a=0:(Y*=Y,a=Y*Y*K.dot3(R,w,D));var U=.6-B*B-N*N-z*z;return U<0?l=0:(U*=U,l=U*U*b.dot3(B,N,z)),32*(o+r+a+l)}perlin2(t,e){var f=this.perm,i=this.gradP,n=Math.floor(t),o=Math.floor(e);t=t-n,e=e-o,n=n&255,o=o&255;var r=i[n+f[o]].dot2(t,e),a=i[n+f[o+1]].dot2(t,e-1),l=i[n+1+f[o]].dot2(t-1,e),h=i[n+1+f[o+1]].dot2(t-1,e-1),u=to(t);return bn(bn(r,l,u),bn(a,h,u),to(e))}perlin3(t,e,f){var i=this.perm,n=this.gradP,o=Math.floor(t),r=Math.floor(e),a=Math.floor(f);t=t-o,e=e-r,f=f-a,o=o&255,r=r&255,a=a&255;var l=n[o+i[r+i[a]]].dot3(t,e,f),h=n[o+i[r+i[a+1]]].dot3(t,e,f-1),u=n[o+i[r+1+i[a]]].dot3(t,e-1,f),v=n[o+i[r+1+i[a+1]]].dot3(t,e-1,f-1),d=n[o+1+i[r+i[a]]].dot3(t-1,e,f),c=n[o+1+i[r+i[a+1]]].dot3(t-1,e,f-1),p=n[o+1+i[r+1+i[a]]].dot3(t-1,e-1,f),g=n[o+1+i[r+1+i[a+1]]].dot3(t-1,e-1,f-1),m=to(t),x=to(e),y=to(f);return bn(bn(bn(l,d,m),bn(h,c,m),y),bn(bn(u,p,m),bn(v,g,m),y),x)}}let fu={fontFamily:'Georgia, "Goudy Bookletter 1911", Times, serif'};var vt=(s=>(s[s.Formula=0]="Formula",s[s.Formula_Choice=1]="Formula_Choice",s[s.Negated_Formula_Choice=2]="Negated_Formula_Choice",s[s.Sphere_Selection=3]="Sphere_Selection",s[s.Counterfactual_World_Choice=4]="Counterfactual_World_Choice",s[s.Vacuous_World_Choice=5]="Vacuous_World_Choice",s[s.Transition=6]="Transition",s))(vt||{}),os=(s=>(s[s.Display=0]="Display",s[s.World_Choice=1]="World_Choice",s))(os||{});function ao(s){switch(s){case 3:case 4:case 5:return!0;default:return!1}}function cr(s,t,e){let i=s.game.textures.get(t).getSourceImage(t),n=s.game.textures.createCanvas(e,i.width,i.height),r=n.getSourceImage().getContext("2d");r.getContextAttributes().willReadFrequently=!0,r.drawImage(i,0,0),n.refresh()}function oo(s,t,e){let f=s.game.textures.get(t),i=f.getSourceImage(t),n=i.getContext("2d"),o=n.getImageData(0,0,i.width,i.height),r=o.data,a=r;for(let l=0;l<r.length/4;l++){let h=l*4,u=(e&16711680)>>16,v=(e&65280)>>8,d=e&255,c=Phaser.Display.Color.RGBToHSV(u,v,d),p=Phaser.Display.Color.RGBToHSV(a[h],a[h+1],a[h+2]),g=Phaser.Display.Color.HSVToRGB(c.h,c.s,p.v);a[h]=(g.color&16711680)>>16,a[h+1]=(g.color&65280)>>8,a[h+2]=g.color&255}n.putImageData(o,0,0),f.refresh()}function bd(s,t,e){let f=s.game.textures.get(t),i=f.getSourceImage(t),n=i.getContext("2d"),o=n.getImageData(0,0,i.width,i.height),r=o.data;for(let a=0;a<r.length/4;a++){let l=a*4,h=r,u=h[l],v=h[l+1],d=h[l+2],c=m8(u,v,d,e);h[l]=c[0],h[l+1]=c[1],h[l+2]=c[2]}n.putImageData(o,0,0),f.refresh()}const Fy=Math.PI/180;function m8(s,t,e,f){const i=Math.cos(f*Fy),n=Math.sin(f*Fy),o=[i+(1-i)/3,(1-i)/3-Math.sqrt(1/3)*n,(1-i)/3+Math.sqrt(1/3)*n];return[s*o[0]+t*o[1]+e*o[2],s*o[2]+t*o[0]+e*o[1],s*o[1]+t*o[2]+e*o[0]].map(a=>x8(a))}function x8(s){return 0>s?0:255<s?255:Math.round(s)}function y8(s,t,e,f){let i=s.game.textures.createCanvas(f,t,e),n=i.getSourceImage(),o=n.getContext("2d");o.getContextAttributes().willReadFrequently=!0;let r=o.getImageData(0,0,n.width,n.height),a=r.data,l=new LS(Math.random()),h=(t*t+e*e)/9/4;for(let u=0;u<e;u++)for(let v=0;v<t;v++){let d=v*4,c=u*t*4,p=d+c,g=a,m=0,x=0,y=0,T=Math.abs(t/2-v),C=Math.abs(e/2-u),S;S=1-(T*T+C*C)/4/h,m=24+(l.perlin2(v/t,u/e)+1)*63+64*S,x=24+(l.perlin2((v+25)/t,u/e)+1)*64+64*S,y=24+(l.perlin2((v-25)/t,u/e)+1)*64+64*S,g[p]=m,g[p+1]=x,g[p+2]=y,g[p+3]=255}o.putImageData(r,0,0),i.refresh()}function T8(s,t,e,f,i,n){let o=new Phaser.GameObjects.Graphics(s).translateCanvas(t-f/2,e-i/2);for(let r=0;r<n.length;r++){o.beginPath(),o.moveTo(n[r][0][0],n[r][0][1]);for(let a=1;a<n[r].length;a++)o.lineTo(n[r][a][0],n[r][a][1]);o.lineTo(n[r][0][0],n[r][0][1]),o.closePath(),o.fillPath()}return o.createGeometryMask()}let Iy=["You lose!","You win!","Resolving negated Untruth...","Resolving negated Truth...","The atom is true at the current world","The atom is false at the current world","The atom is true at the current world","The atom is false at the current world","Eliminating double negation...","You chose the left formula","You chose the right formula","The attacker chose the left formula","The attacker chose the right formula","The attacker chose the left formula","The attacker chose the right formula","You chose the left formula","You chose the right formula","You chose a sphere of accessibility","The attacker chose to evaluate the sphere-delimiting world","The attacker chose a world to evaluate the counterfactual at","You claimed that the counterfactual is vacuously true","The attacker chose a world to disprove your vacuous truth claim","The attacker chose a sphere of accessibility","You chose to evaluate the sphere-delimiting world","You chose to evaluate the counterfactual at a world","The attacker claimed that the counterfactual is vacuously true","You chose a world to disprove the attackers vacuous truth claim",""],C8=[[[29,97],[57,50],[80,50],[95,35],[196,35],[225,20],[674,20],[703,35],[804,35],[819,50],[842,50],[870,97],[870,101],[843,147],[820,147],[803,164],[96,164],[79,147],[57,147],[29,101]],[[140,170],[759,170],[749,180],[150,180]]];var ws=(s=>(s[s.NONE=0]="NONE",s[s.PULSE=1]="PULSE",s))(ws||{});class S8{static fill_text_animation_timeline(t,e,f){switch(f){case 1:t.add({targets:e,scale:1.125,duration:1e3,ease:"Cubic.In",yoyo:!1,repeat:0,offset:0}),t.add({targets:e,scale:1,duration:1e3,ease:"Cubic.Out",yoyo:!1,repeat:0,offset:1e3});break}}}class lc extends Phaser.GameObjects.Container{constructor(t,e,f,i){super(t,e,f),this.contents=[],this.contents=this.contents.concat(i||this.contents),t.get_width(),this.scene.get_height();let n=new Phaser.GameObjects.Sprite(t,0,5,"sup_panel");this.add(n);let o=new Phaser.GameObjects.Sprite(t,0,80,"sup_panel_knob");this.add(o),this.caption=new Phaser.GameObjects.Text(t,0,-60,"Can you prove this?",fu),this.caption.setOrigin(.5,.5),this.add(this.caption);let r=T8(t,e,f+5,900,200,C8);for(let a=0;i!=null&&a<i.length;a++)(i[a]||Phaser.GameObjects.Sprite||Phaser.GameObjects.Rectangle).setMask(r);o.setMask(r)}discard(){}embed(t){this.contents.push(t)}resize(){let t=this.scene.get_width(),e=this.scene.get_height();this.setX(t/2),this.setY(e-100)}animate_caption(t,e=-1){if(this.caption_animation_timeline!=null&&this.caption_animation_timeline.stop(),t==ws.NONE)return;let f=this.scene.tweens.createTimeline({loop:-1,onUpdate:function(){e!=-1&&f.totalElapsed>=e&&(console.log("stopping"),f.stop())}});this.caption_animation_timeline=f,S8.fill_text_animation_timeline(f,this.caption,t),f.play()}set_caption(t,e=ws.NONE,f=-1){this.caption.text=t,this.caption.scale=1,this.animate_caption(e,f)}static load_sprites(t){t.load.image("sup_panel","assets/Banner.png"),t.load.image("sup_panel_knob","assets/Banner_Knob.png"),t.load.image("sup_panel_mask","assets/Banner_Clip_Mask.png")}}lc.createPanel=function(s,t){var e=s.rexUI.add.sizer({orientation:"x",anchor:{centerX:"center",centerY:"bottom-110"},space:{item:10}});for(let f=0;f<t.length;f++)e.add(t[f]);return e};class Dy{static fill_animation_timeline(t,e,f){let i=f.get_formula(),n,o,r,a,l,h,u,v,d,c;switch(e){case Pt.Attacker_Victory:return 1500;case Pt.Defender_Victory:return 1500;case Pt.Negated_Bottom:return n=f.add_temporary_formula("\xAF|\xAF"),n.setAlpha(0),n.setX(0),o=i.get_child("l"),t.add({targets:[i,o],alpha:0,duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:i,x:0,duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:o,x:0,duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:n,alpha:1,duration:1500,ease:"Quart.In",yoyo:!1,repeat:0,offset:0}),1500;case Pt.Negated_Top:return o=f.add_temporary_formula("_|_"),o.setAlpha(0),o.setX(0),n=i.get_child("l"),t.add({targets:[i,n],alpha:0,duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:i,x:0,duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:n,x:0,duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:o,alpha:1,duration:1500,ease:"Quart.In",yoyo:!1,repeat:0,offset:0}),1500;case Pt.Known_Fact:return n=f.add_temporary_formula("\xAF|\xAF"),n.setAlpha(0),n.setX(0),t.add({targets:i,alpha:0,duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:n,alpha:1,duration:1500,ease:"Quart.In",yoyo:!1,repeat:0,offset:0}),1500;case Pt.Unknown_Fact:return o=f.add_temporary_formula("_|_"),o.setAlpha(0),o.setX(0),t.add({targets:i,alpha:0,duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:o,alpha:1,duration:1500,ease:"Quart.In",yoyo:!1,repeat:0,offset:0}),1500;case Pt.Negated_Known_Fact:return n=f.add_temporary_formula("\xAF|\xAF"),n.setAlpha(0),n.setX(xt/2),r=i.get_child("l"),t.add({targets:r,alpha:0,duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:n,alpha:1,duration:1500,ease:"Quart.In",yoyo:!1,repeat:0,offset:0}),1500;case Pt.Negated_Unknown_Fact:return o=f.add_temporary_formula("_|_"),o.setAlpha(0),o.setX(xt/2),r=i.get_child("l"),t.add({targets:r,alpha:0,duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:o,alpha:1,duration:1500,ease:"Quart.In",yoyo:!1,repeat:0,offset:0}),1500;case Pt.Double_Negation:return a=i.get_child("l"),t.add({targets:i,x:i.x+xt/2,duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:a,x:a.x-xt/2,duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:[i,a],alpha:0,duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:a.get_children(),x:"-="+xt.toString(),duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:1500}),t.add({targets:a.get_child("l").get_embedding(!0),x:"-="+xt.toString(),duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:1500}),3e3;case Pt.Left_OR:return 1500;case Pt.Right_OR:return 1500;case Pt.Negated_Left_OR:return l=i.get_child("l"),u=i.get_child("ll"),v=i.get_child("lr"),t.add({targets:v.get_children([l,v]),alpha:0,duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:l.get_embedding().concat(v.get_embedding(!0)),alpha:0,duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:i,x:"+="+((l.get_width()-u.get_width())/2).toString(),duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:1500}),t.add({targets:u.get_children([u]),x:"+="+((l.get_width()-u.get_width())/2-Kt).toString(),duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:1500}),t.add({targets:u.get_embedding(!0),x:"+="+((l.get_width()-u.get_width())/2-Kt).toString(),duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:1500}),3e3;case Pt.Negated_Right_OR:return l=i.get_child("l"),u=i.get_child("ll"),v=i.get_child("lr"),t.add({targets:u.get_children([l,u]),alpha:0,duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:l.get_embedding().concat(u.get_embedding(!0)),alpha:0,duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:i,x:"+="+((i.get_width()-xt)/2-v.get_width()/2).toString(),duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:1500}),t.add({targets:v.get_children([v]),x:"+="+((-i.get_width()+v.get_width())/2+Kt+xt/2).toString(),duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:1500}),t.add({targets:v.get_embedding(!0),x:"+="+((-i.get_width()+v.get_width())/2+Kt+xt/2).toString(),duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:1500}),3e3;case Pt.Left_AND:return u=i.get_child("l"),v=i.get_child("r"),t.add({targets:v.get_children([i,v]),alpha:0,duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:i.get_embedding().concat(v.get_embedding(!0)),alpha:0,duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:u.get_children([u]),x:"+="+((i.get_width()-u.get_width())/2-Kt).toString(),duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:1500}),t.add({targets:u.get_embedding(!0),x:"+="+((i.get_width()-u.get_width())/2-Kt).toString(),duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:1500}),3e3;case Pt.Right_AND:return u=i.get_child("l"),v=i.get_child("r"),t.add({targets:u.get_children([i,u]),alpha:0,duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:i.get_embedding().concat(u.get_embedding(!0)),alpha:0,duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:v.get_children([v]),x:"+="+((-i.get_width()+v.get_width())/2+Kt).toString(),duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:1500}),t.add({targets:v.get_embedding(!0),x:"+="+((-i.get_width()+v.get_width())/2+Kt).toString(),duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:1500}),3e3;case Pt.Negated_Left_AND:return 1500;case Pt.Negated_Left_AND:return 1500;case Pt.Attacker_Phi_Evaluation:return d=i.get_child("l"),c=i.get_child("r"),t.add({targets:c.get_children([i,c]),alpha:0,duration:3e3,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:c.get_embedding(!0).concat(i.get_embedding()),alpha:0,duration:3e3,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:d.get_children([d]),x:"+="+((i.get_width()-d.get_width())/2-Kt).toString(),duration:3e3,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:d.get_embedding(!0),x:"+="+((i.get_width()-d.get_width())/2-Kt).toString(),duration:3e3,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),3e3;case Pt.Attacker_World_Choice:return d=i.get_child("l"),c=i.get_child("r"),l=f.add_temporary_formula("~A v B"),l.setX((xt+d.get_width()-c.get_width())/2),l.setAlpha(0),l.get_embedding()[0].setAlpha(0),l.get_embedding()[1].setAlpha(0),l.get_embedding()[2].setAlpha(0),l.get_child("ll").setAlpha(0),l.get_child("r").setAlpha(0),a=l.get_child("l"),a.setX(-(yi+d.get_width()+c.get_width())/2),a.setAlpha(0),t.add({targets:i,alpha:0,duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:i.get_embedding(),alpha:0,duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:[a,l],alpha:1,duration:3e3,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:d.get_children([d]),x:"+="+((i.get_width()-d.get_width())/2-Kt+(+xt-c.get_width()-yi)/2).toString(),duration:3e3,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:d.get_embedding(!0),x:"+="+((i.get_width()-d.get_width())/2-Kt+(+xt-c.get_width()-yi)/2).toString(),duration:3e3,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:c.get_children([c]),x:"+="+((-i.get_width()+c.get_width())/2+Kt+(+d.get_width()+xt+yi)/2).toString(),duration:3e3,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:c.get_embedding(!0),x:"+="+((-d.get_width()-xt)/2+(xt*2+d.get_width())/2+Kt).toString(),duration:3e3,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),3e3;case Pt.Attacker_Vacuous_World_Choice:return a=f.add_temporary_formula("~A"),a.setX(-i.get_width()/2),a.setAlpha(0),r=a.get_child("l").setAlpha(0),t.add({targets:i.get_children([i]),x:"+="+(xt/2).toString(),duration:3e3,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:i.get_embedding(!0),x:"+="+(xt/2).toString(),duration:3e3,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:a,alpha:1,duration:3e3,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),3e3;case Pt.Attacker_Sphere_Selection:return 3e3;case Pt.Attacker_Vacuous_Truth_Claim:return h=i.get_child("l"),d=i.get_child("ll"),c=i.get_child("lr"),t.add({targets:[i,h].concat(c.get_children([c])),alpha:0,duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:c.get_embedding(!0).concat(h.get_embedding()),alpha:0,duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:d.get_children([d]),x:"+="+(c.get_width()/2).toString(),duration:3e3,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:d.get_embedding(!0),x:"+="+(c.get_width()/2).toString(),duration:3e3,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),3e3;case Pt.Defender_Vacuous_World_Choice:return 3e3;default:return 3e3}}static fill_transition_animation_timeline(t,e,f){let i=f.get_formula(),n,o,r;switch(!0){case(e[0]==vt.Formula&&e[1]==vt.Formula_Choice):return t.add({targets:i,alpha:0,duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:i.get_embedding(),alpha:0,duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:i.get_children([i]),x:"+="+(-i.x).toString(),duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:i.get_embedding(!0),x:"+="+(-i.x).toString(),duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),1500;case(e[0]==vt.Formula&&e[1]==vt.Negated_Formula_Choice):n=i.get_child("l"),o=i.get_child("ll"),r=i.get_child("lr");let a=f.add_temporary_formula("~_|_"),l=f.add_temporary_formula("~_|_");return a.setX((-o.get_width()-Nn-r.get_width())/2),l.setX((o.get_width()+Nn-r.get_width())/2),a.setAlpha(0),l.setAlpha(0),a.get_child("l").setAlpha(0),l.get_child("l").setAlpha(0),t.add({targets:[i,n],alpha:0,duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:n.get_embedding(),alpha:0,duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:o.get_children([o,a]),x:"+="+((i.get_width()-o.get_width()-xt-Kt)/2+(-o.get_width()-xt-Kt)/2-Nn/2).toString(),duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:o.get_embedding(!0),x:"+="+((i.get_width()-o.get_width()-xt-Kt)/2+(-o.get_width()-xt-Kt)/2-Nn/2).toString(),duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:r.get_children([r,l]),x:"+="+((-i.get_width()+r.get_width()+xt+Kt)/2+(xt+r.get_width()+Kt)/2+Nn/2).toString(),duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:r.get_embedding(!0),x:"+="+((-i.get_width()+r.get_width()+xt+Kt)/2+(xt+r.get_width()+Kt)/2+Nn/2).toString(),duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:[a,l],alpha:1,duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),1500;case(e[0]==vt.Formula&&e[1]==vt.Sphere_Selection):return 0;case(e[0]==vt.Formula&&e[1]==vt.Counterfactual_World_Choice):return 0;case(e[0]==vt.Formula&&e[1]==vt.Vacuous_World_Choice):return 0;default:return 1500}}}const yi=30,Nn=30,xt=60,Kt=10,io=8;class ho extends Phaser.GameObjects.Container{constructor(t,e,f,i,n,o=0){super(t,e,f),this.embedding_depth=0,this.atoms=me.exports.cloneDeep(n),this.embedding_depth=o,this.formula=Ce.parse(t,i,0,0,this.atoms),this.formula.add_to_container(this)}static load_sprites(t){t.textures.getTextureKeys().includes("false")||(t.load.image("false","assets/False.png"),t.load.image("true","assets/True.png"),t.load.image("atom","assets/Atom.png"),t.load.image("glow","assets/Glow.png"),t.load.image("negation","assets/Negation.png"),t.load.image("conjunction","assets/AND.png"),t.load.image("disjunction","assets/OR.png"),t.load.image("cf_would","assets/Cf_Would.png"),t.load.image("fill_open","assets/BO.png"),t.load.image("fill_connect","assets/Empty_Icon.png"),t.load.image("fill_closed","assets/BC.png"))}static configure_sprites(t){if(t.textures.getTextureKeys().includes("fill_open_0"))return;let e=[16763714,4359515,5452931,12931840,10663355,16748465,4699647,5647112,8671549];for(let f=0;f<io;f++)cr(t,"fill_open","fill_open_"+f.toString()),cr(t,"fill_connect","fill_connect_"+f.toString()),cr(t,"fill_closed","fill_closed_"+f.toString()),bd(t,"fill_open_"+f.toString(),f*(360/io)),bd(t,"fill_connect_"+f.toString(),f*(360/io)),bd(t,"fill_closed_"+f.toString(),f*(360/io)),cr(t,"atom","atom_"+f.toString()),oo(t,"atom_"+f.toString(),e[f])}animate_transition(t){let e=this.scene.tweens.createTimeline(),f=Dy.fill_transition_animation_timeline(e,t,this);return e.play(),f}animate(t,e){return this.next_formula=t,(e==Pt.Defender_Victory||e==Pt.Attacker_Victory)&&(this.next_formula=void 0),[Pt.Negated_Left_OR,Pt.Negated_Right_OR,Pt.Attacker_Vacuous_Truth_Claim].includes(e)&&this.embedding_depth++,this.start_animation(e)}end_animation(){this.next_formula!=null&&(this.removeAll(!0),this.formula=Ce.parse(this.scene,this.next_formula,0,0,this.atoms,this.embedding_depth),this.formula.add_to_container(this))}add_temporary_formula(t){let e=Ce.parse(this.scene,se.parse(t),0,0,this.atoms,this.embedding_depth);return e.add_to_container(this),e}set_atoms(t){this.atoms=t}set_formula(t){this.removeAll(!0),this.next_formula=void 0,this.formula=Ce.parse(this.scene,t,0,0,this.atoms,this.embedding_depth),this.formula.add_to_container(this)}set_embedding_depth(t){this.embedding_depth=t}start_animation(t){let e=this.scene.tweens.createTimeline(),f=Dy.fill_animation_timeline(e,t,this);return e.play(),f}get_formula(){return this.formula}get_embedding_depth(){return this.embedding_depth}get_width(){return this.formula.get_width()}}class Ce extends Phaser.GameObjects.Sprite{static parse(t,e,f,i,n=[],o=0){let r,a,l,h,u;switch(!0){case e instanceof Un:return r=Ce.parse(t,e.get_child("l"),f,i,n,o+1),a=Ce.parse(t,e.get_child("r"),f,i,n,o+1),r.offset(-xt/2-a.get_width()/2),a.offset(+xt/2+r.get_width()/2),new E8(t,f+(r.get_width()-a.get_width())/2,i,r,a,o);case e instanceof Wn:return l=Ce.parse(t,e.get_child("l"),f,i,n,o+1),h=Ce.parse(t,e.get_child("r"),f,i,n,o+1),l.offset(-yi/2-h.get_width()/2),h.offset(+yi/2+l.get_width()/2),new P8(t,f+(l.get_width()-h.get_width())/2,i,l,h,o);case e instanceof Us:return l=Ce.parse(t,e.get_child("l"),f,i,n,o+1),h=Ce.parse(t,e.get_child("r"),f,i,n,o+1),l.offset(-Nn/2-h.get_width()/2),h.offset(+Nn/2+l.get_width()/2),new M8(t,f+(l.get_width()-h.get_width())/2,i,l,h,o);case e instanceof ai:return u=Ce.parse(t,e.get_child("l"),f+xt/2,i,n,o),new A8(t,f-u.get_width()/2,i,u);case e instanceof To:return new O8(t,f,i,e.value,n);case e instanceof lu:return new R8(t,f,i);case e instanceof uu:return new L8(t,f,i);default:throw new Error("Cannot parse invalid formula")}}static get_embedding_sprite_key(t){return"_"+(t%io).toString()}}class E8 extends Ce{constructor(t,e,f,i,n,o){super(t,e,f,"cf_would"),this.brackets=[],this.antecedent=i,this.consequent=n;let r=this.antecedent.get_width(),a=this.consequent.get_width();if(o>=0){let l=Ce.get_embedding_sprite_key(o);this.brackets.push(new Phaser.GameObjects.Sprite(this.scene,this.x-r-Kt,this.y,"fill_open"+l).setDisplaySize(xt,xt)),this.brackets.push(new Phaser.GameObjects.Sprite(this.scene,this.x+(-r+a)/2,this.y,"fill_connect"+l).setDisplaySize(-xt+r+a+Kt*2,xt)),this.brackets.push(new Phaser.GameObjects.Sprite(this.scene,this.x+a+Kt,this.y,"fill_closed"+l).setDisplaySize(xt,xt))}this.setDisplaySize(xt,xt)}get_child(t){if(t.length==0)return this;switch(t[0]){case"l":return this.antecedent.get_child(t.slice(1,t.length));case"r":return this.consequent.get_child(t.slice(1,t.length));default:throw new Error("path string may only contain the letters 'l' and 'r'")}}offset(t){this.setX(this.x+t),this.antecedent.offset(t),this.consequent.offset(t);for(let e=0;e<this.brackets.length;e++)this.brackets[e].setX(this.brackets[e].x+t)}scale_recursive(t){this.setScale(this.scaleX*t,this.scaleY*t);for(let e=0;e<this.brackets.length;e++)this.brackets[e].setScale(this.brackets[e].texture.key=="bracket_compact"?this.brackets[e].scaleX*t:this.brackets[e].scaleX,this.brackets[e].scaleY*t);this.antecedent.scale_recursive(t),this.consequent.scale_recursive(t)}set_depth(t){this.setDepth(t),this.antecedent.set_depth(t),this.consequent.set_depth(t)}get_width(){return xt+this.antecedent.get_width()+this.consequent.get_width()+2*Kt}get_atoms(t){return this.antecedent.get_atoms(t).concat(this.consequent.get_atoms(t))}get_children(t=[]){return t.concat([this.antecedent,this.consequent]).concat(this.antecedent.get_children()).concat(this.consequent.get_children())}get_embedding(t){return t?this.brackets.concat(this.antecedent.get_embedding(!0)).concat(this.consequent.get_embedding(!0)):this.brackets}add_to_container(t){for(let e=0;e<this.brackets.length;e++)t.add(this.brackets[e]);t.add(this),this.antecedent.add_to_container(t),this.consequent.add_to_container(t)}}class P8 extends Ce{constructor(t,e,f,i,n,o){super(t,e,f,"disjunction"),this.brackets=[],this.subject1=i,this.subject2=n;let r=this.subject1.get_width(),a=this.subject2.get_width();if(o>=0){let l=Ce.get_embedding_sprite_key(o);l="",this.brackets.push(new Phaser.GameObjects.Sprite(this.scene,this.x-r+Kt,this.y,"fill_open"+l).setDisplaySize(xt,xt)),this.brackets.push(new Phaser.GameObjects.Sprite(this.scene,this.x+(-r+a)/2,this.y,"fill_connect"+l).setDisplaySize(-xt+r+a+Kt*2,xt)),this.brackets.push(new Phaser.GameObjects.Sprite(this.scene,this.x+a-Kt,this.y,"fill_closed"+l).setDisplaySize(xt,xt))}this.setDisplaySize(yi,xt)}get_child(t){if(t.length==0)return this;switch(t[0]){case"l":return this.subject1.get_child(t.slice(1,t.length));case"r":return this.subject2.get_child(t.slice(1,t.length));default:throw new Error("path string may only contain the letters 'l' and 'r'")}}offset(t){this.setX(this.x+t),this.subject1.offset(t),this.subject2.offset(t);for(let e=0;e<this.brackets.length;e++)this.brackets[e].setX(this.brackets[e].x+t)}scale_recursive(t){this.setScale(this.scaleX*t,this.scaleY*t);for(let e=0;e<this.brackets.length;e++)this.brackets[e].setScale(this.brackets[e].texture.key=="bracket_compact"?this.brackets[e].scaleX*t:this.brackets[e].scaleX,this.brackets[e].scaleY*t);this.subject1.scale_recursive(t),this.subject2.scale_recursive(t)}set_depth(t){this.setDepth(t),this.subject1.set_depth(t),this.subject2.set_depth(t)}get_width(){return yi+this.subject1.get_width()+this.subject2.get_width()+2*Kt}get_atoms(t){return this.subject1.get_atoms(t).concat(this.subject2.get_atoms(t))}get_children(t=[]){return t.concat([this.subject1,this.subject2]).concat(this.subject1.get_children()).concat(this.subject2.get_children())}get_embedding(t){return t?this.brackets.concat(this.subject1.get_embedding(!0)).concat(this.subject2.get_embedding(!0)):this.brackets}add_to_container(t){for(let e=0;e<this.brackets.length;e++)t.add(this.brackets[e]);t.add(this),this.subject1.add_to_container(t),this.subject2.add_to_container(t)}}class M8 extends Ce{constructor(t,e,f,i,n,o){super(t,e,f,"conjunction"),this.brackets=[],this.subject1=i,this.subject2=n;let r=this.subject1.get_width(),a=this.subject2.get_width();if(o>=0){let l=Ce.get_embedding_sprite_key(o);l="",this.brackets.push(new Phaser.GameObjects.Sprite(this.scene,this.x-r+Kt,this.y,"fill_open"+l).setDisplaySize(xt,xt)),this.brackets.push(new Phaser.GameObjects.Sprite(this.scene,this.x+(-r+a)/2,this.y,"fill_connect"+l).setDisplaySize(-xt+r+a+Kt*2,xt)),this.brackets.push(new Phaser.GameObjects.Sprite(this.scene,this.x+a-Kt,this.y,"fill_closed"+l).setDisplaySize(xt,xt))}this.setDisplaySize(yi,xt)}get_child(t){if(t.length==0)return this;switch(t[0]){case"l":return this.subject1.get_child(t.slice(1,t.length));case"r":return this.subject2.get_child(t.slice(1,t.length));default:throw new Error("path string may only contain the letters 'l' and 'r'")}}offset(t){this.setX(this.x+t),this.subject1.offset(t),this.subject2.offset(t);for(let e=0;e<this.brackets.length;e++)this.brackets[e].setX(this.brackets[e].x+t)}scale_recursive(t){this.setScale(this.scaleX*t,this.scaleY*t);for(let e=0;e<this.brackets.length;e++)this.brackets[e].setScale(this.brackets[e].texture.key=="bracket_compact"?this.brackets[e].scaleX*t:this.brackets[e].scaleX,this.brackets[e].scaleY*t);this.subject1.scale_recursive(t),this.subject2.scale_recursive(t)}set_depth(t){this.setDepth(t),this.subject1.set_depth(t),this.subject2.set_depth(t)}get_width(){return Nn+this.subject1.get_width()+this.subject2.get_width()+2*Kt}get_atoms(t){return this.subject1.get_atoms(t).concat(this.subject2.get_atoms(t))}get_children(t=[]){return t.concat([this.subject1,this.subject2]).concat(this.subject1.get_children()).concat(this.subject2.get_children())}get_embedding(t){return t?this.brackets.concat(this.subject1.get_embedding(!0)).concat(this.subject2.get_embedding(!0)):this.brackets}add_to_container(t){for(let e=0;e<this.brackets.length;e++)t.add(this.brackets[e]);t.add(this),this.subject1.add_to_container(t),this.subject2.add_to_container(t)}}class A8 extends Ce{constructor(t,e,f,i){super(t,e,f,"negation"),this.subject=i,this.setDisplaySize(xt,xt)}get_child(t){if(t.length==0)return this;switch(t[0]){case"l":return this.subject.get_child(t.slice(1,t.length));default:throw new Error("Negation only has left child")}}offset(t){this.setX(this.x+t),this.subject.offset(t)}scale_recursive(t){this.setScale(this.scaleX*t,this.scaleY*t),this.subject.scale_recursive(t)}set_depth(t){this.setDepth(t),this.subject.set_depth(t)}get_width(){return xt+this.subject.get_width()}get_atoms(t){return this.subject.get_atoms(t)}get_children(t=[]){return t.concat([this.subject]).concat(this.subject.get_children())}get_embedding(t){return t?this.subject.get_embedding(!0):[]}add_to_container(t){t.add(this),this.subject.add_to_container(t)}}class O8 extends Ce{constructor(t,e,f,i,n){let o=n.findIndex(r=>r==i);super(t,e,f,o!=-1?"atom_"+o:"atom"),this.value=i,this.setDisplaySize(xt,xt)}get_child(t){if(t.length==0)return this;throw new Error("Cannot traverse any further")}offset(t){this.setX(this.x+t)}scale_recursive(t){this.setScale(this.scaleX*t,this.scaleY*t)}set_depth(t){this.setDepth(t)}get_width(){return xt}get_atoms(t){return t.includes(this.value)?[this]:[]}get_children(t=[]){return t}get_embedding(){return[]}add_to_container(t){t.add(this)}}class R8 extends Ce{constructor(t,e,f){super(t,e,f,"false"),this.setDisplaySize(xt,xt)}get_child(t){if(t.length==0)return this;throw new Error("Cannot traverse any further")}offset(t){this.setX(this.x+t)}scale_recursive(t){this.setScale(this.scaleX*t,this.scaleY*t)}set_depth(t){this.setDepth(t)}get_width(){return xt}get_atoms(){return[]}get_children(t=[]){return t}get_embedding(){return[]}add_to_container(t){t.add(this)}}class L8 extends Ce{constructor(t,e,f){super(t,e,f,"true"),this.setDisplaySize(xt,xt)}get_child(t){if(t.length==0)return this;throw new Error("Cannot traverse any further")}offset(t){this.setX(this.x+t)}scale_recursive(t){this.setScale(this.scaleX*t,this.scaleY*t)}set_depth(t){this.setDepth(t)}get_width(){return xt}get_atoms(){return[]}get_children(t=[]){return t}get_embedding(){return[]}add_to_container(t){t.add(this)}}class Gd{static fill_transition_animation_timeline(t,e,f){switch(!0){case(e[0]==vt.Formula_Choice&&e[1]==vt.Formula):return t.add({targets:[f.get_or(),f.get_not_chosen_graphics(),f.get_option_boxes()[0],f.get_option_boxes()[1]],alpha:0,duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:f.get_chosen_graphic(),x:f.get_x(),duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),1500;case(e[0]==vt.Negated_Formula_Choice&&e[1]==vt.Formula):return console.log("Wooo"),t.add({targets:[f.get_or(),f.get_not_chosen_graphics(),f.get_option_boxes()[0],f.get_option_boxes()[1]],alpha:0,duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:f.get_chosen_graphic(),x:f.get_x(),duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),1500;default:return 1500}}static fill_popup_animation_timeline(t,e){return t.add({targets:[e.get_option_graphic(0)],x:"-="+((Os-yi)/2).toString(),duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:[e.get_option_graphic(1)],x:"+="+((Os-yi)/2).toString(),duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:e.get_option_boxes(),alpha:ra,duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:e.get_or(),alpha:1,duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:e.get_or(),scale:1,duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),1500}static fill_cf_popup_animation_timeline(t,e){return t.add({targets:e.get_option_boxes(),alpha:ra,duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:[e.get_option_graphic(0),e.get_or()],alpha:1,duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),t.add({targets:e.get_or(),scale:1,duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),1500}}const Os=60,By=60/255,ra=15/255;class by{constructor(t,e,f,i,n=0){this.choice_made=!1,this.cf_choice=!1,this.scene=t,this.x=t.get_width()/2,this.y=t.get_height()-105;let o=this.x,r=this.y,a=se.parse("_|_"),l=se.parse("~_|_"),h=[];e!=null&&f!=null&&i!=null&&(a=f.apply(e).get_formula(),l=i.apply(e).get_formula(),h=e.get_atoms(),this.state=e,this.rule1=f,this.rule2=i),this.or=new Phaser.GameObjects.Text(t,o,r,"OR",fu),this.option1=new ho(t,o,r,a,h,n).setDepth(1),this.option2=new ho(t,o,r,l,h,n).setDepth(1),this.option1.setX(this.option1.x-yi/2-this.option1.get_width()/2),this.option2.setX(this.option2.x+yi/2+this.option2.get_width()/2),this.option1_box=new Phaser.GameObjects.Sprite(t,o-225,r,"option_box_left"),this.option2_box=new Phaser.GameObjects.Sprite(t,o+225,r,"option_box_right"),this.option1_box.setAlpha(ra),this.option2_box.setAlpha(ra),this.option1_box.setInteractive(),this.option1_box.on("pointerup",()=>{this.choice_made=!0,this.choice=0,this.option1_box.disableInteractive(),this.option2_box.disableInteractive()}),this.option1_box.on("pointerover",()=>{this.option1_box.setAlpha(By)}),this.option1_box.on("pointerout",()=>{this.option1_box.setAlpha(ra)}),this.option2_box.setInteractive(),this.option2_box.on("pointerup",()=>{this.choice_made=!0,this.choice=1,this.option1_box.disableInteractive(),this.option2_box.disableInteractive()}),this.option2_box.on("pointerover",()=>{this.option2_box.setAlpha(By)}),this.option2_box.on("pointerout",()=>{this.option2_box.setAlpha(ra)}),this.option1_sprite=new Phaser.GameObjects.Sprite(this.scene,this.option1_box.x,this.option1_box.y,"option"),this.option2_sprite=new Phaser.GameObjects.Sprite(this.scene,this.option2_box.x,this.option2_box.y,"option"),this.option1_sprite.setVisible(!1),this.option2_sprite.setVisible(!1)}add_to_scene(){this.scene.children.add(this.or),this.or.setOrigin(.5,.5),this.scene.children.add(this.option1),this.scene.children.add(this.option2),this.scene.children.add(this.option1_box),this.scene.children.add(this.option2_box),this.scene.children.add(this.option1_sprite),this.scene.children.add(this.option2_sprite)}set(t,e,f,i=0){this.cf_choice=!1,this.choice_made=!1,this.set_visible(!0),this.state=t,this.rule1=e,this.rule2=f;let n=t.get_atoms();this.option1.set_atoms(n),this.option2.set_atoms(n),this.option1.set_embedding_depth(i+1),this.option2.set_embedding_depth(i+1),this.option1.set_formula(e.apply(this.state).get_formula()),this.option2.set_formula(f.apply(this.state).get_formula());let o=this.option1.get_width(),r=this.option2.get_width(),a=t.get_formula()instanceof ai?Nn:yi;this.option1.setX(this.x-a/2-o/2),this.option2.setX(this.x+a/2+r/2),this.or.setScale(.1,.1),this.or.setAlpha(0),this.option1.setAlpha(1),this.option2.setAlpha(1),this.option1_box.setAlpha(0),this.option2_box.setAlpha(0);let l=this.scene.tweens.createTimeline();Gd.fill_popup_animation_timeline(l,this),l.play(),this.option1_box.setInteractive(),this.option2_box.setInteractive(),this.option1_sprite.setX(this.option1_box.x),this.option2_sprite.setX(this.option2_box.x),this.option1_sprite.setDisplaySize(this.option1.get_width()-35,80),this.option2_sprite.setDisplaySize(this.option2.get_width()-35,80),this.option1_sprite.setVisible(!1),this.option2_sprite.setVisible(!1)}set_cf(t,e,f,i=0,n){this.cf_choice=!0,this.choice_made=!1,this.set_visible(!0),this.state=t,this.rule1=e,this.rule2=f;let o=t.get_atoms();this.option1.set_atoms(o),this.option2.set_atoms(o),this.option1.set_embedding_depth(i+1),this.option2.set_embedding_depth(i),this.option1.set_formula(e.apply(this.state).get_formula()),this.option2.set_formula(f.apply(this.state,n).get_formula());let r=this.option1.get_width(),a=this.option2.get_width();this.option1.setX(this.x-Os/2-r/2),this.option2.setX(this.x+Os/2+a/2),this.or.setScale(.1,.1),this.or.setAlpha(0),this.option1.setAlpha(0),this.option2.setAlpha(1),this.option1_box.setAlpha(0),this.option2_box.setAlpha(0);let l=this.scene.tweens.createTimeline();Gd.fill_cf_popup_animation_timeline(l,this),l.play(),this.option1_box.setInteractive(),this.option2_box.setInteractive()}animate_transition(t){let e=this.scene.tweens.createTimeline(),f=Gd.fill_transition_animation_timeline(e,t,this);return e.play(),f}resize(){let t=this.scene.get_width(),e=this.scene.get_height(),f=this.option1.get_width(),i=this.option2.get_width();this.or.setX(t/2),this.option1.setX(t/2-Os/2-f/2),this.option1_box.setX(t/2-Os/2-f/2),this.option2.setX(t/2+Os/2+i/2),this.option2_box.setX(t/2+Os/2+i/2),this.or.setY(e-100),this.option1.setY(e-100),this.option1_box.setY(e-100),this.option2.setY(e-100),this.option2_box.setY(e-100)}set_visible(t){this.option1.setVisible(t),this.option2.setVisible(t),this.option1_box.setVisible(t),this.option2_box.setVisible(t),this.or.setVisible(t)}destroy(){this.option1.destroy(!0),this.option2.destroy(!0),this.option1_box.destroy(!0),this.option2_box.destroy(!0),this.option1_sprite.destroy(!0),this.option2_sprite.destroy(!0),this.or.destroy()}get_x(){return this.x}get_y(){return this.y}get_or(){return this.or}get_option_boxes(){return[this.option1_box,this.option2_box]}get_option_graphic(t){return t==0?this.option1:this.option2}get_choice(){if(!this.is_choice_made)throw new Error("Cannot get Choice, when nothing has been chosen");return this.choice==0?this.rule1:this.rule2}get_chosen_graphic(){if(!this.is_choice_made)throw new Error("Cannot get Choice, when nothing has been chosen");return this.choice==0?this.option1:this.option2}get_not_chosen_graphics(){if(!this.is_choice_made)throw new Error("Cannot get what hasnt been chosen, when nothing has been chosen");return this.choice==0?this.option2:this.option1}get_atoms(t){return this.option1.get_formula().get_atoms(t).concat(this.option2.get_formula().get_atoms(t))}is_choice_made(){return this.choice_made}is_cf_choice(){return this.cf_choice}static load_sprites(t){t.load.image("option_box_left","assets/Option_Box_Left.png"),t.load.image("option_box_right","assets/Option_Box_Right.png")}}const uc=10207200,Gy=11326714,Ny=.85,Yv=.01,wS=.3,w8=.85,F8=.4,I8=1,D8=.7;var ll=(s=>(s[s.NONE=0]="NONE",s[s.BLINK=1]="BLINK",s))(ll||{});class lo{static fill_world_animation_timeline(t,e,f){switch(f){case 1:t.add({targets:e.map(i=>i.get_hover_ellipse()),alpha:wS,duration:1e3,ease:"Cubic.In",yoyo:!1,repeat:0,offset:0}),t.add({targets:e.map(i=>i.get_hover_ellipse()),alpha:Yv,duration:1e3,ease:"Cubic.Out",yoyo:!1,repeat:0,offset:1e3});break}}static create(t,e,f){let i=t.tweens.createTimeline({loop:-1});return lo.fill_world_animation_timeline(i,e,f),i}}const Co=60,Gn=20;class Yy extends Phaser.GameObjects.Container{constructor(t,e,f,i,n,o,r,a){super(t,e,f),this.worlds=[],this.delim_world=-1,this.mode=os.Display,this.chosen_world=-1,this.choice_made=!1,this.game_state=i,this.graph=this.game_state.get_graph(),this.current_world=n,this.graphics_controller=a;let l=this.graph.get_V();if(o.length!=l)throw new Error("Passed too many or too few positions!");for(let v=0;v<l;v++){let d=this.graph.get_worlds()[v].get_atoms().filter(p=>i.get_atoms().includes(p)),c=new B8(t,o[v][0],o[v][1],v,d,this);this.worlds.push(c),c.add_to_container(this)}let h=o;for(let v=0;v<r.length;v++){let d=r[v][0],c=r[v][1],p=r[v][2];if(d==c)continue;let g=new b8(t,new Phaser.Math.Vector2(h[d][0],h[d][1]),new Phaser.Math.Vector2(h[c][0],h[c][1]),p);this.worlds[d].add_edge(g),g.add_to_container(this)}this.rocket=new Phaser.GameObjects.Sprite(t,h[this.current_world][0],h[this.current_world][1],"rocket").setDisplaySize(Co+30,Co+30),this.add(this.rocket);let u=this.graph.get_worlds();for(let v=0;v<u.length;v++){u[v];let d=this.worlds[v].get_atoms(),c=o[v][0],p=o[v][1],g=40;for(let m=0;m<d.length;m++){let y=m/d.length*2*Math.PI,T=new Phaser.GameObjects.Sprite(t,c+Math.cos(y)*g,p+Math.sin(y)*g,"glow").setDisplaySize(Gn,Gn),C=new Phaser.GameObjects.Sprite(t,c+Math.cos(y)*g,p+Math.sin(y)*g,"atom_"+i.get_atoms().findIndex(S=>S==d[m])).setDisplaySize(Gn,Gn);this.worlds[v].add_atom_sprite(T),this.worlds[v].add_atom_sprite(C),this.add(T),this.add(C),C.setInteractive(),C.on("pointerover",()=>{C.setDisplaySize(35,35),T.setDisplaySize(35,35);let S=a.get_mode()==vt.Formula||ao(a.get_mode())?a.get_formula_graphics().get_formula().get_atoms([d[m]]):a.get_choice_controller().get_atoms([d[m]]);for(let E=0;E<S.length;E++)S[E].setDisplaySize(xt+10,xt+10)}),C.on("pointerout",()=>{C.setDisplaySize(Gn,Gn),T.setDisplaySize(Gn,Gn);let S=a.get_mode()==vt.Formula||ao(a.get_mode())?a.get_formula_graphics().get_formula().get_atoms([d[m]]):a.get_choice_controller().get_atoms([d[m]]);for(let E=0;E<S.length;E++)S[E].setDisplaySize(xt,xt)})}}this.set_sphere(n)}set_mode(t){switch(t){case os.Display:break;case os.World_Choice:this.choice_made=!1,this.chosen_world=-1;break}this.mode=t}resize(){let t=this.scene.get_width(),e=this.scene.get_height();this.setX(t/2),this.setY((e-200)/2)}animate(t){let e,f=this.graph.get_world(this.current_world),i=[];switch(t){case vt.Sphere_Selection:for(let r=0;r<this.worlds.length;r++)!f.is_adj(r)||i.push(this.worlds[r]);e=lo.create(this.scene,i,ll.BLINK);for(let r=0;r<i.length;r++)this.worlds[r].set_animation(e);break;case vt.Counterfactual_World_Choice:let n=f.get_edge_list(),o=n.find(r=>r[1]==this.delim_world)[2];for(let r=0;r<this.worlds.length;r++)!n.some(a=>a[1]==r&&a[2]<=o)||i.push(this.worlds[r]);e=lo.create(this.scene,i,ll.BLINK);for(let r=0;r<i.length;r++)this.worlds[r].set_animation(e);break;case vt.Vacuous_World_Choice:for(let r=0;r<this.worlds.length;r++)!f.is_adj(r)||i.push(this.worlds[r]);e=lo.create(this.scene,i,ll.BLINK);for(let r=0;r<i.length;r++)this.worlds[r].set_animation(e);break}this.animation=e,e.play()}stop_animation(){this.animation!=null&&this.animation.stop();for(let t=0;t<this.worlds.length;t++)this.worlds[t].clear_animation()}world_clicked(t){switch(this.mode){case os.Display:break;case os.World_Choice:let e=this.game_state.get_graph().get_world(this.current_world).get_edges().find(n=>n[0].get_index()==t),f=this.game_state.get_graph().get_world(this.current_world).get_edges().find(n=>n[0].get_index()==this.delim_world),i=f!=null?f[1]:1/0;if(e==null||e[1]>i)return;this.chosen_world=t,this.choice_made=!0,console.log("Chose world: "+t);break}}set_sphere(t,e=1/0){this.clear_sphere(),this.set_current_world(t);let f=this.graph.get_edges(t);for(let n=0;n<f.length;n++)f[n][1]<=e&&this.worlds[f[n][0].index].set_active(!0);let i=this.worlds[t].get_edges();for(let n=0;n<i.length;n++){if(i[n].get_weight()>e)continue;let o=i[n].get_sprites();for(let r=0;r<o.length;r++)o[r].setAlpha(w8)}}set_current_world(t){this.current_world=t,this.worlds[t].set_active(!0),this.rocket.setPosition(this.worlds[this.current_world].get_x(),this.worlds[this.current_world].get_y())}set_delim_world(t){this.delim_world=t}clear_hover_ellipse_alphas(){for(let t=0;t<this.worlds.length;t++)this.worlds[t].get_hover_ellipse().setAlpha(Yv)}clear_delim_world(){this.delim_world!=-1&&this.worlds[this.delim_world].set_color(uc,Gy),this.delim_world=-1}clear_sphere(){for(let t=0;t<this.worlds.length;t++){this.worlds[t].set_color(uc,Gy),this.worlds[t].set_active(!1);let e=this.worlds[t].get_edges();for(let f=0;f<e.length;f++){let i=e[f].get_sprites();for(let n=0;n<i.length;n++)i[n].setAlpha(F8)}}}get_graphics_controller(){return this.graphics_controller}get_delim_world(){return this.delim_world}get_current_world(){return this.current_world}get_chosen_world(){if(!this.choice_made)throw new Error("No world choice has yet been made");return this.chosen_world}is_choice_made(){return this.choice_made}static load_sprites(t){t.textures.getTextureKeys().includes("world_shadow")||(t.load.image("arrowhead","assets/arrows/Arrowhead_12.png"),t.load.image("arrowbody","assets/arrows/Arrowbody_12.png"),t.load.image("arrowtail","assets/arrows/Arrowtail_12.png"),t.load.image("marker","assets/arrows/Ruler_Marker_3.png"),t.load.image("bat1c","assets/Battery_1C.png"),t.load.image("bat2c","assets/Battery_2C.png"),t.load.image("bat3c","assets/Battery_3C.png"),t.load.image("arrowwave","assets/Arrowwave.png"),t.load.image("rocket","assets/Fly_By.png"),t.load.image("world","assets/Earth_Small.png"),t.load.image("grey_world","assets/Earth_Grey.png"))}static configure_sprites(t){}}class B8{constructor(t,e,f,i,n,o){this.atom_sprites=[],this.edges=[],this.x=e,this.y=f,this.atoms=n,this.world=new Phaser.GameObjects.Sprite(t,e,f,"world").setAlpha(Ny),this.hover_ellipse=new Phaser.GameObjects.Ellipse(t,e,f,Co,Co,uc).setAlpha(Yv),this.index_text=new Phaser.GameObjects.Text(t,e,f,i.toString(),fu).setOrigin(.5,.5).setAlpha(0),this.setup_listeners(),this.index=i,this.graph_graphics=o}set_active(t){this.world.setAlpha(t?Ny:.8),this.world.setTint(t?16777215:12303291);for(let e=0;e<this.atom_sprites.length;e++)this.atom_sprites[e].setAlpha(t?I8:D8),this.atom_sprites[e].setTint(t?16777215:12566463),t?this.atom_sprites[e].setInteractive():this.atom_sprites[e].disableInteractive();t?this.hover_ellipse.setInteractive():this.hover_ellipse.disableInteractive()}set_animation(t){this.animation=t}clear_animation(){this.animation=void 0}set_color(t,e){this.hover_ellipse.fillColor=t}add_edge(t){this.edges.push(t)}add_atom_sprite(t){this.atom_sprites.push(t)}add_to_container(t){t.add(this.world),t.add(this.hover_ellipse),t.add(this.index_text)}get_hover_ellipse(){return this.hover_ellipse}get_atoms(){return this.atoms}get_edges(){return this.edges}get_x(){return this.x}get_y(){return this.y}setup_listeners(){this.hover_ellipse.setInteractive(),this.hover_ellipse.on("pointerup",()=>{this.graph_graphics.world_clicked(this.index)}),this.hover_ellipse.on("pointerover",()=>{this.graph_graphics.stop_animation(),this.graph_graphics.clear_hover_ellipse_alphas(),this.hover_ellipse.setAlpha(wS);for(let f=0;f<this.atom_sprites.length;f++)this.atom_sprites[f].setDisplaySize(25,25);let t=this.graph_graphics.get_graphics_controller(),e=t.get_mode()==vt.Formula||ao(t.get_mode())?t.get_formula_graphics().get_formula().get_atoms(this.atoms):t.get_choice_controller().get_atoms(this.atoms);for(let f=0;f<e.length;f++)e[f].setDisplaySize(xt+10,xt+10)}),this.hover_ellipse.on("pointerout",()=>{this.graph_graphics.clear_hover_ellipse_alphas(),ao(this.graph_graphics.get_graphics_controller().get_mode())&&this.graph_graphics.animate(vt.Sphere_Selection);for(let f=0;f<this.atom_sprites.length;f++)this.atom_sprites[f].setDisplaySize(Gn,Gn);let t=this.graph_graphics.get_graphics_controller(),e=t.get_mode()==vt.Formula||ao(t.get_mode())?t.get_formula_graphics().get_formula().get_atoms(this.atoms):t.get_choice_controller().get_atoms(this.atoms);for(let f=0;f<e.length;f++)e[f].setDisplaySize(xt,xt)})}}class b8{constructor(t,e,f,i){this.stars=[],this.markers=[],this.weight=i;let n=new Phaser.Math.Vector2(f.x-e.x,f.y-e.y),o=e.lerp(f,.5),r=n.length()-Co,a=r-50,l=n.setLength(r/2-12.5);this.arrowhead=new Phaser.GameObjects.Sprite(t,o.x+l.x,o.y+l.y,"arrowhead"),this.arrowbody=new Phaser.GameObjects.Sprite(t,o.x,o.y,"arrowbody"),this.arrowtail=new Phaser.GameObjects.Sprite(t,o.x-l.x,o.y-l.y,"arrowtail"),this.arrowhead.setRotation(n.angle()),this.arrowbody.setScale(a/this.arrowbody.width,1),this.arrowbody.setRotation(n.angle()),this.arrowtail.setRotation(n.angle());let h=.55;this.arrowhead.setAlpha(h),this.arrowbody.setAlpha(h),this.arrowtail.setAlpha(h);let u=10,v=11,d=n.angle()>Math.PI/2&&n.angle()<=Math.PI*3/2?new Phaser.Math.Vector2(-n.y,n.x):new Phaser.Math.Vector2(n.y,-n.x),c=d.angle(),p=Math.atan(v/u),g=Math.PI/2-p,m;switch(!0){case(c>=0&&c<p):m=u;break;case(c>=p&&c<Math.PI/2):m=v,c=c-p;break;case(c>=Math.PI/2&&c<Math.PI/2+g):m=v,c=Math.PI/2+g-c;break;case(c>=Math.PI/2+g&&c<Math.PI):m=u,c=c-(Math.PI/2+g);break;case(c>=Math.PI&&c<Math.PI+p):m=u,c=Math.PI+p-c;break;case(c>=Math.PI+p&&c<Math.PI*3/2):m=v,c=c-(Math.PI+p);break;case(c>=Math.PI*3/2&&c<Math.PI*3/2+g):m=v,c=Math.PI*3/2+g-c;break;case(c>=Math.PI*3/2+g&&c<Math.PI*2):m=u,c=c-(Math.PI*3/2+g);break}let x=m/Math.cos(c);d.setLength(x);let y=o.clone().add(d);this.label=new Phaser.GameObjects.Text(t,y.x,y.y-2.5,i.toString(),fu),this.label.setOrigin(.5,.5);let T=o.clone().subtract(n.clone().setLength(r/2-12.5)),C=n.clone().setLength(a/i),S=Math.ceil(i/3);T=o.clone().add(d).subtract(n.clone().setLength((S-1)/2*20)),C=new Phaser.Math.Vector2(1,0).setLength(20);for(let E=0;E<S;E++){switch(!0){case i-E*3>=3:this.markers.push(new Phaser.GameObjects.Sprite(t,T.x,T.y,"bat3c"));break;case i-E*3==2:this.markers.push(new Phaser.GameObjects.Sprite(t,T.x,T.y,"bat2c"));break;case i-E*3==1:this.markers.push(new Phaser.GameObjects.Sprite(t,T.x,T.y,"bat1c"));break}T.add(C)}}add_to_container(t){t.add(this.arrowhead),t.add(this.arrowbody),t.add(this.arrowtail);for(let e=0;e<this.stars.length;e++)this.stars[e].add_to_container(t);for(let e=0;e<this.markers.length;e++)t.add(this.markers[e])}get_sprites(){return[this.arrowhead,this.arrowbody,this.arrowtail].concat(this.markers)}get_weight(){return this.weight}}const zy=["red_glow","blue_glow","yellow_glow"];class Nd{constructor(t,e,f,i=1){this.inc=0,this.scene=t,this.x=e,this.y=f,this.size=i,this.core=new Phaser.GameObjects.Sprite(t,e,f,"star").setDisplaySize(7.5,7.5).setAlpha(.5),this.glow=new Phaser.GameObjects.Sprite(t,e,f,zy[Math.floor(Math.random()*zy.length)]).setDisplaySize(8.5,8.5).setAlpha(.25),this.noise=new LS(Math.random());let n=t.tweens.createTimeline({loop:-1});this.fill_flicker_timeline(n),n.play()}add_to_container(t){t.add(this.glow),t.add(this.core)}fill_flicker_timeline(t){let e=Math.ceil(Math.random()*4)+1,f=Math.random()*500;for(let i=0;i<e;i++){let n=(.2+.15*Math.random())*this.size,o=400+Math.random()*100;t.add({targets:[this.core,this.glow],scale:n,duration:o,ease:"Back.easeInOut",yoyo:!1,repeat:0,offset:f}),f+=o}t.add({targets:[this.core,this.glow],scale:.25*this.size,duration:400+Math.random()*100,ease:"Back.easeInOut",yoyo:!1,repeat:0,offset:f})}static load_sprites(t){t.textures.getTextureKeys().includes("star")||t.load.image("star","assets/Star.png")}static configure_sprites(t){t.textures.getTextureKeys().includes("red_glow")||(cr(t,"star","red_glow"),oo(t,"red_glow",16742263),cr(t,"star","blue_glow"),oo(t,"blue_glow",2587584),cr(t,"star","yellow_glow"),oo(t,"yellow_glow",16774847))}}class Yd{constructor(t,e,f){this.mode=vt.Formula,this.next_mode=vt.Formula,this.next_animate=!1,this.ready=!1,this.idle_since=Date.now(),this.idle_time=2e3,this.scene=t;let i=t.get_width(),n=t.get_height();this.background=new Phaser.GameObjects.Sprite(t,i/2,n/2,"space"+t.get_level()).setDisplaySize(i,n).setDepth(-1),this.stars=this.create_stars(t,i,n),this.back=this.create_back(t,25,30),this.formula=new ho(t,i/2,n-105,e.get_formula(),e.get_atoms()),this.choice=new by(t,e),this.sup_panel=new lc(t,i/2,n-110,[this.formula,this.choice.get_option_graphic(0),this.choice.get_option_graphic(1),this.choice.get_option_boxes()[0],this.choice.get_option_boxes()[1]]),this.graph_graphics=new Yy(t,i/2,(n-200)/2,e,e.get_current_world().index,f,e.get_graph().get_edge_list(),this),this.vacuous=this.create_button(this.scene,"No World",i/2,n-235).setAlpha(0),t.add.existing(this.background),t.add.existing(this.stars),t.add.existing(this.back),t.children.add(this.sup_panel),t.children.add(this.graph_graphics),t.children.add(this.formula),this.choice.add_to_scene(),this.set_mode(vt.Formula),this.choice.set_visible(!1)}update(t){switch(this.mode){case vt.Formula:t>=this.idle_since+this.idle_time&&(this.formula.end_animation(),this.ready=!0,this.idle_time=0);break;case vt.Formula_Choice:case vt.Negated_Formula_Choice:this.choice.is_choice_made()&&(this.sup_panel.set_caption(Iy[this.choice.get_choice().get_name()]),this.ready=!0);break;case vt.Sphere_Selection:case vt.Counterfactual_World_Choice:case vt.Vacuous_World_Choice:this.graph_graphics.is_choice_made()&&(this.ready=!0);break;case vt.Transition:if(t>=this.idle_since+this.idle_time&&this.next_mode!=null)switch(console.log("> ending transition to "+vt[this.next_mode]),this.set_mode(this.next_mode),this.next_mode){case vt.Formula:this.next_animate?(console.log(this.next_state.to_string()),this.animate_move(this.next_state,this.next_move)):this.set_formula(this.next_state,this.next_formula);break;case vt.Formula_Choice:case vt.Negated_Formula_Choice:this.set_choice(this.next_state,this.next_option1,this.next_option2);break;case vt.Sphere_Selection:case vt.Counterfactual_World_Choice:case vt.Vacuous_World_Choice:this.set_world_choice([this.next_option1,this.next_option2]);break}break}this.sup_panel.update()}set_world_choice(t){let e=t.some(f=>f.get_name()==Pt.Defender_Sphere_Selection)?vt.Sphere_Selection:t.some(f=>f.get_name()==Pt.Defender_World_Choice)?vt.Counterfactual_World_Choice:vt.Vacuous_World_Choice;this.mode!=e&&(console.log("> transitioning to World_Choice"),this.next_option1=t[0],this.next_option2=t[1],this.transition_mode(e),this.mode==vt.Transition)||(this.sup_panel.set_caption("Choose a reachable world:",ws.PULSE),this.ready=!1)}set_choice(t,e,f){let i=t.get_formula()instanceof ai,n=t.get_formula()instanceof Un||t.get_formula().get_child("l")instanceof Un,o=vt.Formula_Choice;if(o=i&&!n?vt.Negated_Formula_Choice:o,!(this.mode!=o&&(console.log("> transitioning to "+vt[o]),this.next_option1=e,this.next_option2=f,this.next_state=t,this.transition_mode(o),this.mode==vt.Transition))){switch(o){case vt.Formula_Choice:this.sup_panel.set_caption("Choose a formula:",ws.PULSE),this.choice.set(t,e,f,this.formula.get_embedding_depth());break;case vt.Negated_Formula_Choice:this.sup_panel.set_caption("Choose a formula:",ws.PULSE),this.choice.set(t,e,f,this.formula.get_embedding_depth());break}this.ready=!1}}set_formula(t,e){this.mode!=vt.Formula&&(console.log("> transitioning to Formula"),this.next_formula=e,this.next_state=t,this.next_animate=!1,this.transition_mode(vt.Formula),this.mode==vt.Transition)||(console.log("> setting formula "+e.to_string()),this.formula.set_formula(e),t.get_mode()==ji.Counterfactual?this.graph_graphics.set_delim_world(t.get_delim_world().index):this.graph_graphics.clear_delim_world())}animate_move(t,e,f){if(this.mode!=vt.Formula&&(console.log("> transitioning to Formula"),this.transition_mode(vt.Formula),this.next_move=e,this.next_state=t,this.next_animate=!0,this.mode==vt.Transition))return;this.sup_panel.set_caption(Iy[e.get_name()],e.get_name()==Pt.Defender_Victory?ws.PULSE:ws.NONE);let i=e.apply(t,f);console.log("> animating move "+Pt[e.get_name()]+" => "+i.get_formula().to_string()),this.idle(this.formula.animate(i.get_formula(),e.get_name())),i.get_mode()==ji.Counterfactual?this.graph_graphics.set_delim_world(i.get_delim_world().index):this.graph_graphics.clear_delim_world(),this.graph_graphics.set_sphere(i.get_current_world().index,t.get_mode()==ji.Counterfactual&&e.get_name()!=Pt.Attacker_Phi_Evaluation&&e.get_name()!=Pt.Attacker_World_Choice&&e.get_name()!=Pt.Defender_Phi_Evaluation&&e.get_name()!=Pt.Defender_World_Choice?t.get_radius():void 0)}transition_mode(t){let e=this.mode;switch(this.mode=vt.Transition,this.next_mode=t,!0){case(e==vt.Formula&&this.next_mode==vt.Formula_Choice):console.log("> animating transition Formula -> Formula_Choice"),this.idle(this.formula.animate_transition([e,this.next_mode]));return;case(e==vt.Formula_Choice&&this.next_mode==vt.Formula):console.log("> animating transition Formula_Choice -> Formula"),this.idle(this.choice.animate_transition([e,this.next_mode]));return;case(e==vt.Formula&&this.next_mode==vt.Negated_Formula_Choice):console.log("> animating transition Formula -> Negated_Formula_Choice"),this.idle(this.formula.animate_transition([e,this.next_mode]));return;case(e==vt.Negated_Formula_Choice&&this.next_mode==vt.Formula):console.log("> animating transition Negated_Formula_Choice -> Formula"),this.idle(this.choice.animate_transition([e,this.next_mode]));return;case(e==vt.Formula&&this.next_mode==vt.Sphere_Selection):case(e==vt.Formula&&this.next_mode==vt.Counterfactual_World_Choice):console.log("> animating transition Formula -> World_Choice"),this.idle(this.formula.animate_transition([e,this.next_mode])),this.vacuous.setInteractive(),this.scene.add.tween({targets:this.vacuous,alpha:1,duration:1500,ease:"Quart.Out",yoyo:!1,repeat:0,offset:0}),this.graph_graphics.animate(this.next_mode);return;case(e==vt.Formula&&this.next_mode==vt.Vacuous_World_Choice):this.set_mode(this.next_mode);return;case(e==vt.Sphere_Selection&&this.next_mode==vt.Formula):case(e==vt.Counterfactual_World_Choice&&this.next_mode==vt.Formula):console.log("> animating transition World_Choice -> Formula"),this.graph_graphics.stop_animation(),this.vacuous.disableInteractive(),this.scene.add.tween({targets:this.vacuous,alpha:0,duration:1500,ease:"Quart.In",yoyo:!1,repeat:0,offset:0}),this.set_mode(this.next_mode);return;case(e==vt.Vacuous_World_Choice&&this.next_mode==vt.Formula):this.set_mode(this.next_mode);break;default:console.log("> skipping transition"),this.set_mode(this.next_mode);return}}set_mode(t){switch(this.mode=t,t){case vt.Formula:this.formula.setVisible(!0),this.choice.set_visible(!1),this.graph_graphics.set_mode(os.Display);break;case vt.Formula_Choice:case vt.Negated_Formula_Choice:this.formula.setVisible(!1),this.choice.set_visible(!0),this.graph_graphics.set_mode(os.Display);break;case vt.Sphere_Selection:case vt.Counterfactual_World_Choice:case vt.Vacuous_World_Choice:this.graph_graphics.set_mode(os.World_Choice);break}}resize_graphics(){this.background.setDisplaySize(this.scene.get_width(),this.scene.get_height()),this.background.setPosition(this.scene.get_width()/2,this.scene.get_height()/2),this.sup_panel.resize(),this.choice.resize(),this.graph_graphics.resize(),this.formula.setX(this.scene.get_width()/2),this.formula.setY(this.scene.get_height()-100)}get_mode(){return this.mode}get_choice(){return this.choice.get_choice()}get_world_choice(){return this.graph_graphics.is_choice_made()?this.graph_graphics.get_chosen_world():-1}get_formula_graphics(){return this.formula}get_choice_controller(){return this.choice}is_ready(){return this.ready}idle(t){this.ready=!1,this.idle_since=Date.now(),this.idle_time=t}create_stars(t,e,f){let i=new Phaser.GameObjects.Container(t,e/2,f/2),n=e*f/2100;for(let o=0;o<n;o++)new Nd(t,Math.random()*e-e/2,Math.random()*f-f/2).add_to_container(i);return i}create_back(t,e,f){var i=t.rexUI.add.label({width:60,height:60,orientation:0,icon:t.add.existing(new Phaser.GameObjects.Sprite(t,0,0,"back_icon").setDisplaySize(40,40).setAlpha(.6)),space:{icon:10,left:15,right:0,top:0,bottom:0}}).layout(),n=t.rexUI.add.buttons({x:e,y:f,buttons:[]}).addButton(i).layout();return n.on("button.over",function(o,r,a,l){o.getElement("icon").setAlpha(1)}),n.on("button.out",function(o,r,a,l){o.getElement("icon").setAlpha(.6)}),n.on("button.click",function(o,r,a,l){t.scene.start("Level_Select_Scene")}),n}create_button(t,e,f,i){var n=t.rexUI.add.label({width:120,height:60,orientation:0,background:t.add.existing(new Phaser.GameObjects.Sprite(t,0,0,"chunk")),text:t.add.text(0,0,e),space:{left:20,right:0,top:0,bottom:0}}),o=t.rexUI.add.buttons({x:f,y:i,buttons:[]}).addButton(n).layout();return o.on("button.over",function(r,a,l,h){r.getElement("background").setTexture("chunk_hover")}),o.on("button.out",function(r,a,l,h){r.getElement("background").setTexture("chunk")}),o.on("button.click",function(r,a,l,h){t.graphics_controller.ready=!0}),n}static load_sprites(t){Yy.load_sprites(t),ho.load_sprites(t),by.load_sprites(t),lc.load_sprites(t),Nd.load_sprites(t);let e=t.get_level();t.textures.getTextureKeys().includes("space"+e)||(y8(t,1600,1600,"space"+e),oo(t,"space"+e,5007251)),t.load.image("back_panel","assets/Slant_Right.png"),t.load.image("back_border","assets/Slant_Right_Border.png"),t.load.image("back_fill","assets/Slant_Right_Fill.png"),t.load.image("chunk","assets/Small_Chunk.png"),t.load.image("chunk_hover","assets/Small_Chunk_Hover.png")}static configure_sprites(t){ho.configure_sprites(t),Nd.configure_sprites(t)}}class zv extends no.Scene{constructor(t){super(t)}setup(){this.canvas=this.sys.game.canvas,window.addEventListener("resize",()=>{this.game.scale.resize(window.innerWidth,window.innerHeight),this.on_resize()},!1)}get_canvas(){return this.canvas}get_width(){return window.innerWidth}get_height(){return window.innerHeight}}class G8{constructor(t,e){this.worlds=[];for(let f=0;t!=null&&f<t.length;f++)this.add_world(me.exports.cloneDeep(t[f]));for(let f=0;e!=null&&f<e.length;f++)this.add_edge(e[f][0],e[f][1],e[f][2])}add_world(t){this.worlds=this.worlds.concat([new N8(this.worlds.length,t!=null?t:[])])}add_edge(t,e,f){this.worlds[t].add_edge(this.worlds[e],f)}clear(){this.worlds=[]}equals(t){if(this.get_V()!=t.get_V()||this.get_E()!=t.get_E())return!1;for(let e=0;e<this.get_V();e++){let f=t.worlds[e].get_edges(),i=this.worlds[e].get_edges();if(f.length!=i.length)return!1;for(let n=0;n<f.length;n++)if(f[n][0].index!=i[n][0].index||f[n][1]!=i[n][1])return!1}return!0}get_world(t){return me.exports.cloneDeep(this.worlds[t])}get_worlds(){return me.exports.cloneDeep(this.worlds)}get_edges(t){return me.exports.cloneDeep(this.worlds[t].get_edges())}get_edge_list(){let t=[];for(let e=0;e<this.worlds.length;e++){let f=this.worlds[e];t=t.concat(f.get_edge_list())}return t}get_V(){return this.worlds.length}get_E(){return this.worlds.reduce((t,e)=>t+e.get_edge_count(),0)}print(){console.log(this.get_V()+" vertices"),console.log(this.get_E()+" edges");for(let t=0;t<this.worlds.length;t++){let e="Vertex "+t+": ";const f=this.worlds[t].get_edge_count();for(let i=0;i<f;i++){let n=this.worlds[t].get_edges();e=e.concat("["+t+", "+n[i][0].get_index()+"] ")}console.log(e+`
`)}}}class N8{constructor(t,e){this.index=t,this.adj=[],this.atoms=e}add_edge(t,e){this.adj=this.adj.concat([[t,e]])}get_index(){return this.index}get_atoms(){return this.atoms}get_edges(){return me.exports.cloneDeep(this.adj)}get_edge_list(){let t=[],e;for(let f=0;f<this.adj.length;f++)e=[this.index,this.adj[f][0].index,this.adj[f][1]],t=t.concat([e]);return t}get_edge_count(){return this.adj.length}get_edge(t){let e=this.adj.find(f=>f[0].get_index()==t);if(e==null)throw new Error("No edge to passed world");return e}is_adj(t){return this.adj.map(e=>e[0].get_index()).includes(t)}is_atom_known_true(t){return this.atoms.some(e=>t==e)}}class Cl{constructor(t,e,f,i,n,o,r){this.delim_world=0,this.r=1/0,this.mode=t,this.similarity_graph=e,this.active_player=n,this.supposition=f,this.current_world=i,this.atoms=o;let a=e.get_world(i);if(t==ji.Counterfactual){if(r==null||!a.is_adj(r))throw new Error("Counterfactual Mode requires you to pass a valid delim_world");this.delim_world=r,this.r=a.get_edge(r)[1]}}static create(t,e,f,i,n,o,r){let a=hc.get(t),l=oc.get(o),h=se.parse(f,i);if(a==null||h==null||l==null)throw new Error("Passed incorrect State_Mode, Formula or Player string abbreviation");return new Cl(a,e,h,n,l,i,r)}configure(t,e,f,i,n){var u,v;let o=(u=hc.get(t))!=null?u:this.mode,r=me.exports.cloneDeep(e),a=(v=oc.get(f))!=null?v:this.active_player,l=i||this.current_world,h=n||this.delim_world;return new Cl(o,this.get_graph(),r,l,a,this.atoms,h)}equals(t){return!(this.mode!=t.get_mode()||!this.similarity_graph.equals(t.get_graph())||!this.supposition.compare(t.get_formula())||this.current_world!=t.get_current_world().index||this.active_player!=t.get_active_player()||JSON.stringify(this.atoms)!=JSON.stringify(t.get_atoms())||this.mode==ji.Counterfactual&&this.delim_world!=t.get_delim_world().index)}get_mode(){return this.mode}get_formula(){return me.exports.cloneDeep(this.supposition)}get_current_world(){return this.similarity_graph.get_world(this.current_world)}get_graph(){return me.exports.cloneDeep(this.similarity_graph)}get_active_player(){return this.active_player}get_atoms(){return me.exports.cloneDeep(this.atoms)}get_delim_world(){if(this.mode!=ji.Counterfactual)throw new Error("Game_State has no property delim_world in the current mode");return this.similarity_graph.get_world(this.delim_world)}get_radius(){if(this.mode!=ji.Counterfactual)throw new Error("Game_State has no property radius in the current mode");return this.r}to_string(){return"("+ji[this.mode]+", "+this.supposition.to_string()+", "+this.current_world+", "+dr[this.active_player]+", "+this.delim_world+")"}}class yr{static create(t,e,f,i,n,o,r,a,l){return{state_mode:t,supposition:e,atoms:me.exports.cloneDeep(f),player_turn:i,current_world:n,delim_world:o,graph:{worlds:me.exports.cloneDeep(r),world_positions:me.exports.cloneDeep(a),edges:me.exports.cloneDeep(l)}}}static to_state(t){let e=new G8(t.graph.worlds,t.graph.edges),f=t.state_mode,i=t.supposition,n=t.atoms,o=t.player_turn,r=t.current_world,a=t.delim_world;return Cl.create(f,e,i,n,r,o,a)}}let Nt,nn,sn,rn;Nt=["Es gibt Weltfrieden","Es gibt Ananas auf Pizza","Die Erde ist flach","Es gibt Insekten","Tempo-Taschent\xFCcher sind gelb"];nn=[du(Nt,[1,2,4])];sn=[[0,0]];rn=[[0,0,0]];let Y8=yr.create("Res","A v B",Nt,"a/d",0,-1,nn,sn,rn);Nt=["Menschen leben unterirdisch","Eisen ist teurer als Gold","Kompasse funktionieren","Die Erde hat ein Magnetfeld","Die Produktion von Lippenstift ist verboten"];nn=[du(Nt,[0,1,2,4])];sn=[[0,0]];rn=[[0,0,0]];let z8=yr.create("Res","(D ^ C) v A",Nt,"a/d",0,-1,nn,sn,rn);Nt=["K\xE4se ist ein pflanzliches Produkt","K\xFChe sind vom Aussterben bedroht","Milch ist ein Gift","Erd\xF6l ist ein Gift","Die Zugspitze ist der h\xF6chste Berg der Welt","Milch kann zu einem Bioplastik verarbeitet werden","Laktose-intolerante Menschen k\xF6nnen Milch verdauen"];nn=[du(Nt,[0,1,2,3,4,5])];sn=[[0,0]];rn=[[0,0,0]];let V8=yr.create("Res","(C ^ D) v (G ^ F)",Nt,"a/d",0,-1,nn,sn,rn);Nt=["Es gibt den Weihnachtsmann","Jedes Kind wird beschenkt"];nn=[[],[Nt[1]],du(Nt,[0,1]),[Nt[0]]];sn=[[0,0],[-50,-150],[-100,100],[200,50]];rn=[[0,0,0],[1,1,0],[2,2,0],[3,3,0],[0,1,1],[0,2,2],[0,3,3]];let U8=yr.create("Res","A |_|-> B",Nt,"a/d",0,-1,nn,sn,rn);Nt=["Alexander the Great died at the age of 32","Alexander the Great attacked europe","The romans defeated Alexander the Great","The romans built aqueducts","The greek gods became revered throughout europe","The toga became a fashion staple"];nn=[[Nt[0],Nt[3],Nt[5]],[Nt[0],Nt[2]],[Nt[4]],[Nt[1],Nt[2],Nt[3]],[Nt[1],Nt[4]]];sn=[[0,0],[-150,0],[0,-150],[150,0],[0,150]];rn=[[0,0,0],[1,1,0],[2,2,0],[3,3,0],[4,4,0],[0,1,1],[0,2,2],[0,3,2],[0,4,3],[1,2,3]];let W8=yr.create("Res","(~A ^ B) |_|-> C",Nt,"a/d",0,-1,nn,sn,rn);Nt=["Blah","Bleh","Bluh","Blih","Bloh"];nn=[[Nt[3],Nt[5]],[Nt[0],Nt[1],Nt[2]],[Nt[4]],[Nt[1],Nt[2],Nt[3]],[Nt[1],Nt[4]],Nt.slice(0,5),[]];sn=[[0,0],[-150,0],[0,-150],[150,0],[0,150],[300,-150],[237,203]];rn=[[0,0,0],[1,1,0],[2,2,0],[3,3,0],[4,4,0],[5,5,0],[6,6,0],[0,1,2],[0,2,4],[0,3,5],[0,4,6],[0,6,6],[1,2,3],[2,5,1],[3,5,4],[4,6,5],[5,0,4],[6,5,2]];let X8=yr.create("Res","~(A |_|-> B)",Nt,"a/d",0,-1,nn,sn,rn),H8=[Y8,z8,V8,U8,W8,X8];Nt=["Milch ist ein Gift","Erd\xF6l ist ein Gift","Laktose-intolerante Menschen k\xF6nnen Milch nicht verdauen","Milch kann zu Bioplastik verarbeitet werden"];function du(s,t){let e=[];for(let f=0;f<t.length;f++)e.push(s[t[f]]);return e}class FS extends zv{constructor(){super("Game_Scene"),this.game_over=!1}init(t){this.level=t.level}preload(){this.setup(),Yd.load_sprites(this)}create(){Yd.configure_sprites(this),this.load_level(H8[this.level])}update(t,e){let f=Date.now();if(this.graphics_controller.update(f),!this.game_over&&this.graphics_controller.is_ready()){let i=this.game_controller.get_state(),n=this.game_controller.determine_next_moves(),o=n[0],r=n[1],a=this.graphics_controller.get_mode();console.log("-----------------------------New Round!------------------------------------"),console.log(Te[o]+" => "+(r[0]==null?"":r.map(p=>Pt[p.get_name()]).reduce((p,g)=>p+" or "+g)));let l,h,u;switch(!0){case(o==Te.Defenders_Choice&&a==vt.Formula):this.graphics_controller.set_choice(i,r[0],r[1]);return;case(o==Te.Defenders_Choice&&a==vt.Formula_Choice):case(o==Te.Defenders_Choice&&a==vt.Negated_Formula_Choice):l=this.graphics_controller.get_choice(),l.get_world_input_requirement()||(h=l.apply(i).get_formula());break;case(o==Te.Defenders_World_Choice&&a==vt.Formula):this.graphics_controller.set_world_choice(r);return;case(o==Te.Defenders_World_Choice&&a==vt.Sphere_Selection):u=this.graphics_controller.get_world_choice(),l=u==-1?this.game_controller.get_rule(Pt.Defender_Vacuous_Truth_Claim):this.game_controller.get_rule(Pt.Defender_Sphere_Selection),h=l.apply(i,u).get_formula();break;case(o==Te.Defenders_World_Choice&&a==vt.Counterfactual_World_Choice):u=this.graphics_controller.get_world_choice(),l=u==-1?this.game_controller.get_rule(Pt.Defender_Phi_Evaluation):this.game_controller.get_rule(Pt.Defender_World_Choice),h=l.apply(i,u).get_formula();break;case(o==Te.Defenders_World_Choice&&a==vt.Vacuous_World_Choice):l=r[0],u=this.graphics_controller.get_world_choice(),h=l.apply(i,u).get_formula();break;case(o==Te.Defenders_Resolution&&a==vt.Formula):l=r[0];break;case(o==Te.Attackers_Resolution&&a==vt.Formula):l=r[0];break;case o==Te.No_Moves:console.log("Cannot play any move! Game ended."),this.game_over=!0;return;default:throw new Error("Fell through all game turn cases")}let v=this.game_controller.does_require_delim(l),d=a==vt.Sphere_Selection||a==vt.Counterfactual_World_Choice||a==vt.Vacuous_World_Choice,c=o!=Te.Attackers_Resolution&&o!=Te.Attackers_Choice;v&&!d&&!c&&(u=n[2]),this.game_over||(this.game_controller.execute_move(l,u),o!=Te.Defenders_Choice?this.graphics_controller.animate_move(i,l,u):this.graphics_controller.set_formula(this.game_controller.get_state(),h)),this.game_over=this.did_game_end(l)}}load_level(t){let e=yr.to_state(t);this.starting_state=e,this.game_controller=new c8(e),this.graphics_controller=new Yd(this,e,t.graph.world_positions),this.game_over=!1}on_resize(){this.graphics_controller.resize_graphics()}did_game_end(t){let e=t.get_name();return(e==Pt.Attacker_Victory||e==Pt.Defender_Victory)&&console.log(Pt[e]+"! Game ended."),e==Pt.Attacker_Victory||e==Pt.Defender_Victory}get_level(){return this.level}}class IS extends zv{constructor(){super("Level_Select_Scene")}preload(){this.load.image("rocket_launch","assets/Rocket_Launch.jpg"),this.load.image("back","assets/Slant.png"),this.load.image("chunk_up","assets/Chunk.png"),this.load.image("back_icon","assets/Back_Icon.png")}create(){let t=this.get_width(),e=this.get_height();this.back=this.create_back(this,25,30),this.rocket_launch=new Phaser.GameObjects.Sprite(this,t/2,e/2,"rocket_launch").setDisplaySize(t,e).setAlpha(.5),this.add.existing(this.rocket_launch);var f=[{name:"Disjunction"},{name:"Conjunction 1"},{name:"Conjunction 2"},{name:"Counterfactual 1"},{name:"Counterfactual 2"},{name:"Test"}];this.create_grid_table(this,t/2,e/2,760,400,f);const i=()=>{this.game.scale.resize(window.innerWidth,window.innerHeight),this.on_resize()};window.addEventListener("resize",i,!1)}update(t,e){}on_resize(){let t=this.get_width(),e=this.get_height();this.rocket_launch.setPosition(t/2,e/2),this.rocket_launch.setDisplaySize(t,e)}create_grid_table(t,e,f,i,n,o){var r=this.rexUI.add.gridTable({x:e,y:f,width:i,height:n,scrollMode:0,table:{cellWidth:480,cellHeight:120,columns:2,mask:{padding:2},reuseCellContainer:!0},space:{left:20,right:20,top:20,bottom:20,table:{left:0,right:0,top:0,bottom:0},header:10,footer:10},createCellContainerCallback:function(a,l){var h=a.scene;a.width,a.height;var u=a.item,v=a.index;return l===null&&(l=h.create_button(h,o[v])),l.setMinSize(240,120),l.getElement("text").setText(o[u.id].name),l},items:this.create_items(6)}).layout();return r.on("cell.over",function(a,l,h){a.getElement("background").setTexture("chunk_down_hover")},this).on("cell.out",function(a,l,h){a.getElement("background").setTexture("chunk_down")},this).on("cell.click",function(a,l,h){this.scene.start("Game_Scene",{level:this.swap_xy(l)})},this),r}create_button(t,e){var f=t.rexUI.add.label({width:240,height:120,orientation:0,background:t.add.existing(new Phaser.GameObjects.Sprite(t,0,0,"chunk_down")),icon:t.add.existing(new Phaser.GameObjects.Sprite(t,0,0,"dot")),text:t.add.text(0,0,e.name),space:{icon:10,left:25,right:0,top:0,bottom:20}});return f}create_items(t){for(var e=[],f=0;f<t;f++)e.push({id:this.swap_xy(f),color:16777215});return e}swap_xy(t){return t%2*2+Math.ceil(t/2)}create_back(t,e,f){var i=t.rexUI.add.label({width:60,height:60,orientation:0,icon:t.add.existing(new Phaser.GameObjects.Sprite(t,0,0,"back_icon").setDisplaySize(40,40).setAlpha(.6)),space:{icon:10,left:15,right:0,top:0,bottom:0}}).layout(),n=t.rexUI.add.buttons({x:e,y:f,buttons:[]}).addButton(i).layout();return n.on("button.over",function(o,r,a,l){o.getElement("icon").setAlpha(1)}),n.on("button.out",function(o,r,a,l){o.getElement("icon").setAlpha(.6)}),n.on("button.click",function(o,r,a,l){t.scene.start("Main_Menu_Scene")}),n}}class DS extends zv{constructor(){super("Main_Menu_Scene")}preload(){this.load.image("launchsite","assets/Launchsite.png"),this.load.image("chunk_down","assets/Chunk_Down.png"),this.load.image("chunk_down_hover","assets/Chunk_Down_Hover.png"),this.load.image("dot","assets/Wireframe.png")}create(){let t=this.get_width(),e=this.get_height();this.background=new Phaser.GameObjects.Sprite(this,t/2,e/2,"launchsite").setDisplaySize(t,e).setAlpha(.75),this.add.existing(this.background),this.start=this.create_button(this,"Start",t/2+t/16,e/2-e/6.25);const f=()=>{this.game.scale.resize(window.innerWidth,window.innerHeight),this.on_resize()};window.addEventListener("resize",f,!1)}update(t,e){}on_resize(){let t=this.get_width(),e=this.get_height();this.background.setPosition(t/2,e/2),this.background.setDisplaySize(t,e),this.start.setPosition(t/2+t/16,e/2-e/6.25)}create_button(t,e,f,i){var n=t.rexUI.add.label({width:240,height:120,orientation:0,background:t.add.existing(new Phaser.GameObjects.Sprite(t,0,0,"chunk_down")),icon:t.add.existing(new Phaser.GameObjects.Sprite(t,0,0,"dot")),text:t.add.text(0,0,e),space:{icon:10,left:25,right:0,top:0,bottom:20}}),o=t.rexUI.add.buttons({x:f,y:i,buttons:[]}).addButton(n).layout();return o.on("button.over",function(r,a,l,h){r.getElement("background").setTexture("chunk_down_hover")}),o.on("button.out",function(r,a,l,h){r.getElement("background").setTexture("chunk_down")}),o.on("button.click",function(r,a,l,h){t.scene.start("Level_Select_Scene")}),n}}var $8={type:no.WEBGL,parent:"game",pixelArt:!1,backgroundColor:"#55547A",scale:{width:window.innerWidth,height:window.innerHeight,mode:no.Scale.NONE,autoCenter:no.Scale.CENTER_BOTH},scene:[DS,IS,FS],plugins:{scene:[{key:"rexUI",plugin:RS,mapping:"rexUI"}]}};new no.Game(Object.assign($8,{scene:[DS,IS,FS]}));
